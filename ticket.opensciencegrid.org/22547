<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[22547] goc ticket stopped sending email</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=22547" method="post">
<div class="page-header">
    <h3><span class="muted">22547</span> / goc ticket stopped sending email</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Dave Dykstra</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Dave Dykstra</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-12-09</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Scott Teige <span class="muted"> / OSG Operations Infrastructure</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=22547", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/22547?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/22547?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20goc%20ticket%20stopped%20sending%20email%20ISSUE%3D22547%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='22547#1420492473'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-05T21:14:33+00:00">Jan 5, 2015 09:14 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1420492473">&nbsp;</a></div><pre>Closing this as it was released.</pre></div><div class='update_description'><i onclick="document.location='22547#1417640920'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-03T21:08:40+00:00">Dec 3, 2014 09:08 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1417640920">&nbsp;</a></div><pre>The update to GOC-TX will be released on 12/9 which will exchange SNOW&#39;s ticket resolution notes to GOC Ticket (which then send notifications to CC-ed addresses).</pre></div><div class='update_description'><i onclick="document.location='22547#1415821983'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-12T19:53:03+00:00">Nov 12, 2014 07:53 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1415821983">&nbsp;</a></div><pre>I&#39;ve managed to release the change, but when I tested it I still didn&#39;t receive any notification via CC.

One issue that I&#39;ve discovered is that, when SNOW resolves a ticket, they use a &#34;close_note&#34; and &#34;close_code&#34; field to store some extra notes. GOC-TX currently doesn&#39;t exchange this. I&#39;ve updated GOC-TX master code to inject this as the last ticket update for Footprints. I will be testing this and planning to release the update by Dec 9th.</pre></div><div class='update_description'><i onclick="document.location='22547#1415221458'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-05T21:04:18+00:00">Nov 5, 2014 09:04 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1415221458">&nbsp;</a></div><pre>I forgot to include this in for 11/11 release. The next possible window is Dec 9th.</pre></div><div class='update_description'><i onclick="document.location='22547#1414778841'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-31T18:07:21+00:00">Oct 31, 2014 06:07 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1414778841">&nbsp;</a></div><pre>After a bit of conversation at GOC, it looks like the right question that I should be asking is, why is GOC-TX converting some SNOW statuses to GOC Ticket&#39;s &#34;Closed&#34; status instead of &#34;Resolved&#34; status. Our notification rules shows that CC should receive notifications if I used Resolved status instead of Closed status. I will most likely make a change to GOC-TX and release the update on 11/11.</pre></div><div class='update_description'><i onclick="document.location='22547#1414012726'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-22T21:18:46+00:00">Oct 22, 2014 09:18 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1414012726">&nbsp;</a></div><pre>Tom,

Thanks for your input. I&#39;ve asked our support team on exactly how we should reconfigure our notification settings.

Stay tuned.</pre></div><div class='update_description'><i onclick="document.location='22547#1412287046'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-02T21:57:26+00:00">Oct 2, 2014 09:57 PM UTC</time> by <b>Thomas Wang</b><a class="anchor" name="1412287046">&nbsp;</a></div><pre>Copied to System Support as Ticket #26240 by Thomas Wang</pre></div><div class='update_description'><i onclick="document.location='22547#1412286969'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-02T21:56:09+00:00">Oct 2, 2014 09:56 PM UTC</time> by <b>Thomas Wang</b><a class="anchor" name="1412286969">&nbsp;</a></div><pre>Hi Soichi,

hmm, sounds like the problem is on closure, CC receiptients on the ticket are not getting the final update?
This can be fixed (per project setting) via Admin —&#62; Project —&#62; Mail Preferences
in the Email notification section, over to the right for the CC column
its set for send email based on CI and/or status
Make sure the status box under CC includes Closed (currently only covers service desk to resolved)
hit save and that should be in.
When an update comes in from ticket.grid to change the status to closed, it will trigger an email to the CC as well.

let me know if this helps.
thanks.
—Tom

On Oct 2, 2014, at 5&#58;08 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='22547#1412284092'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-02T21:08:12+00:00">Oct 2, 2014 09:08 PM UTC</time><a class="anchor" name="1412284092">&nbsp;</a></div><pre>That&#39;s the most important, yes.  I think it should also send notices out when someone does an update after it is closed.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Dave Dykstra 508</pre></div><div class='update_description'><i onclick="document.location='22547#1412282186'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-02T20:36:26+00:00">Oct 2, 2014 08:36 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1412282186">&nbsp;</a></div><pre>Dave,

So the issue here is that Footprints doesn&#39;t send out notification when the status is changed from Engineering to Closed at GOC, correct?

(CC-ing Tom Wang from IU GRNOC)

Tom,
Do you know of any way to configure our Footprints project so that email notifications will be sent to all CC addresses as well as any assignees? According to our ticket (ID 22451), the updates Kyle made while he was closing the ticket didn&#39;t get sent to any CC-ed addresses.</pre></div><div class='update_description'><i onclick="document.location='22547#1412184015'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-01T17:20:15+00:00">Oct 1, 2014 05:20 PM UTC</time><a class="anchor" name="1412184015">&nbsp;</a></div><pre>Kyle,

Yes that update did go through.  I thought of that possibility, but since I also didn&#39;t get Scott&#39;s message &#34;Have received confirmation it worked. Resolving.&#34; I thought that wouldn&#39;t be it.  But probably because he resolved it in the same step, it was considered closed.  I did not get an email either on your second &#34;Closing ticket&#34; message.

So, is that desired behavior?  I would think at a minimum people should get email for the message that closes a ticket.  Actually I think it would be better to get email for anything posted after a ticket is closed.

Dave

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Dave Dykstra 508</pre></div><div class='update_description'><i onclick="document.location='22547#1412180547'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-01T16:22:27+00:00">Oct 1, 2014 04:22 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1412180547">&nbsp;</a></div><pre>For what it&#39;s worth, I don&#39;t see email being sent to anything other than the assignees.  ALso, the ticket is closed, so I wonder if that has something to do with it.  I reopened this ticket, sent an update, and then closed it again.

<a href='https&#58;//ticket.grid.iu.edu/22451' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/22451</a>

You can see that when the ticket is open, everyone gets email.  When it&#39;s closed, only assignees do.</pre></div><div class='update_description'><i onclick="document.location='22547#1412180340'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-01T16:19:00+00:00">Oct 1, 2014 04:19 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1412180340">&nbsp;</a></div><pre>I see &#34;currently running, check tomorrow, should be there.&#34; in both GOC Ticket and SNOW Ticket

[GOC Ticket 22451]
6 days ago by Scott Teige
currently running, check tomorrow, should be there.
Appended a Description
Changed ENG Next Action Date/Time (UTC)
Notification mail sent&#58; Customer&#58; tparsons@....; Cc&#58; esimm@.... dwd@.... boyd@....; Assignee&#58; FNAL (Prod) Kyle Gross Scott Teige

[INC000000447857]
Collapse2014-09-24 13&#58;46&#58;12  cd-srv-goc-ops  - Changed&#58;  Additional comments
Additional comments currently running, check tomorrow, should be there.
-- by Scott Teige at Wed Sep 24 18&#58;45&#58;26 UTC 2014

Is the issue such that.. the exchange took abnormally long time? Or.. am I misunderstanding something?</pre></div><div class='update_description'><i onclick="document.location='22547#1412179559'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-01T16:05:59+00:00">Oct 1, 2014 04:05 PM UTC</time><a class="anchor" name="1412179559">&nbsp;</a></div><pre>The last one I received was the posting from Scott &#34;currently running, check tomorrow, should be there.&#34;

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Dave Dykstra 508</pre></div><div class='update_description'><i onclick="document.location='22547#1412115373'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-30T22:16:13+00:00">Sep 30, 2014 10:16 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1412115373">&nbsp;</a></div><pre>I just looked at GOC Ticket 22451 and exchanged FNAL ticket. Sorry for my laziness, but can you pinpoint me to the ticket update(s) that didn&#39;t get exchanged?</pre></div><div class='update_description'><i onclick="document.location='22547#1412105961'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-30T19:39:21+00:00">Sep 30, 2014 07:39 PM UTC</time><a class="anchor" name="1412105961">&nbsp;</a></div><pre>I did get email for this new ticket, so it&#39;s not a problem with all tickets.  Is it perhaps a problem for all tickets that are copied into the FNAL Ticket Exchange?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Dave Dykstra 508</pre></div><div class='update_description'><i onclick="document.location='22547#1412105609'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-30T19:33:29+00:00">Sep 30, 2014 07:33 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1412105609">&nbsp;</a></div><pre>Another ticket <a href='https&#58;//ticket.grid.iu.edu/22451' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/22451</a> stopped sending email a few days ago.  Is this a general problem, or something specific to that ticket?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Dave Dykstra 508</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F22547">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 22547});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
