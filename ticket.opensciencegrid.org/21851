<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[21851] CMS Analysis glideins can&#39;t authenticate at UCD</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=21851" method="post">
<div class="page-header">
    <h3><span class="muted">21851</span> / CMS Analysis glideins can&#39;t authenticate at UCD</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Daniel Klein</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Daniel Klein</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier3</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-07-25</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USCMS_Tier3 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=107023">107023</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=21851", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/21851?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/21851?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20CMS%20Analysis%20glideins%20can%26%2339%3Bt%20authenticate%20at%20UCD%20ISSUE%3D21851%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='21851#1407801608'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-12T00:00:08+00:00">Aug 12, 2014 12:00 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1407801608">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.

-- by SYSTEM at Mon Aug 11 23&#58;59&#58;05 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023</a></pre></div><div class='update_description'><i onclick="document.location='21851#1406313642'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-25T18:40:42+00:00">Jul 25, 2014 06:40 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406313642">&nbsp;</a></div><pre>Yep, looks like it&#39;s fixed from the factory ops perspective too. We&#39;re seeing plenty of jobs running from Analysis now, so I&#39;ll go ahead and close this... and use this as the solution message &#58;)

-- by Brendan Dennis at Fri Jul 25 18&#58;40&#58;21 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023</a></pre></div><div class='update_description'><i onclick="document.location='21851#1406232427'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-24T20:07:07+00:00">Jul 24, 2014 08:07 PM UTC</time><a class="anchor" name="1406232427">&nbsp;</a></div><pre>Looks like its working now. I had added more pool accounts in GUMS but didn&#39;t get the home directories pushed out properly to the nodes. Thanks for the help!

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=tknight/CN=740452/CN=Teresa Lynn Knight</pre></div><div class='update_description'><i onclick="document.location='21851#1406226303'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-24T18:25:03+00:00">Jul 24, 2014 06:25 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406226303">&nbsp;</a></div><pre>I&#39;ll correct Dan a little here.

The glideins will source $GLOBUS_LOCATION/etc/globus-user-env.sh if it is found, but do not strictly require it.  In fact, glideins from other frontends are able to run at UCD, so this is not likely related to the CMS analysis glideins going held with Globus error 22.

Also these glideins going held are never even able to get to workernodes, so they haven&#39;t even had a chance to even try sourcing $GLOBUS_LOCATION/etc/globus-user-env.sh.

Given that it is specifically affecting one frontend and not others, can you check to make sure the scratch area for the CMS analysis pilot user on the CE is not full?  Sometimes we see errors like this when that happens.

Jeff Dost
OSG Glidein Factory Operations

-- by Jeffrey Dost at Thu Jul 24 18&#58;24&#58;40 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023</a></pre></div><div class='update_description'><i onclick="document.location='21851#1406137889'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-23T17:51:29+00:00">Jul 23, 2014 05:51 PM UTC</time><a class="anchor" name="1406137889">&nbsp;</a></div><pre>Hi Chris,

Just FYI, factory ops opened the issue in the first place. We&#39;re tracking it in GGUS, so if it&#39;s all the same with you, can we go off CC here (GOC ticket), to avoid duplicate notifications? You may not have realized, but Luis is already a member of our team - he was simply inviting Jeff or myself to chime in because he wasn&#39;t certain how to proceed &#58;)

Anyway, for Terri&#58;

I believe your CE does need to define $GLOBUS_LOCATION for the glideins to work properly. At UCSD, we had a problem a couple weeks ago where one of our CEs wasn&#39;t defining it, and glideins were failing as a result. Furthermore, I&#39;ve checked a few glidein logs from other sites, and they all show GLOBUS_LOCATION=/usr in the environment. It&#39;s probably a standard location, so I&#39;m betting that if you set your CE to define this variable the same way, that will clear up the problem Luis reported.

Cheers,
Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dklein/CN=747387/CN=Daniel Klein</pre></div><div class='update_description'><i onclick="document.location='21851#1406133233'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-23T16:33:53+00:00">Jul 23, 2014 04:33 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1406133233">&nbsp;</a></div><pre>I have added the OSG-Gfactory to this ticket. Maybe they have seen something like this before.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21851#1406039135'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-22T14:25:35+00:00">Jul 22, 2014 02:25 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406039135">&nbsp;</a></div><pre>Hi Teresa,

I&#39;m sorry I can&#39;t provide you with any further details, as I&#39;m no Globus expert. I took the information from [1]. Maybe you can find something more helpful in the webpage, or one of our experienced Globus or Glidein experts can comment...

-Luis

[1] <a href='http&#58;//toolkit.globus.org/toolkit/docs/5.0/5.0.2/user/#errors' target='_blank' rel='nofollow'>http&#58;//toolkit.globus.org/toolkit/docs/5.0/5.0.2/user/#errors</a>

-- by Luis Emiro Linares Garcia at Tue Jul 22 14&#58;24&#58;56 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023</a></pre></div><div class='update_description'><i onclick="document.location='21851#1406037620'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-22T14:00:20+00:00">Jul 22, 2014 02:00 PM UTC</time><a class="anchor" name="1406037620">&nbsp;</a></div><pre>OK, I will dig some more, meanwhile&#58;

I don&#39;t have this variable defined, $GLOBUS_LOCATION, am I supposed to?

The CE is running Scientific Linux release 6.3 (Carbon)

In /usr/share/globus&#58;
config.guess                       globus-script-initializer
globus-args-parser-header          globus-sh-tools.sh
globus-gass-cache-util.pl          globus-sh-tools-vars.sh
globus_gram_job_manager            gridftp-ssh
globus-gram-protocol-constants.sh  packages
globus-job-manager-script.pl

In /usr/share/perl5/vendor_perl/Globus/GRAM/JobManager
condor_accounting_groups.pm  condor.pm  fork.pm

I don&#39;t find LRM.pm anywhere.

I do see some pilot jobs running all on the same node in the cluster.

cms2608 which maps to /DC=ch/DC=cern/OU=computers/CN=cmspilot02/vocms0167.cern.ch
cms2609 which maps to /DC=ch/DC=cern/OU=computers/CN=cmspilot05/vocms0167.cern.ch
cms2611 which maps to /DC=ch/DC=cern/OU=computers/CN=cmspilot06/vocms0167.cern.ch

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=tknight/CN=740452/CN=Teresa Lynn Knight</pre></div><div class='update_description'><i onclick="document.location='21851#1406034451'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-22T13:07:31+00:00">Jul 22, 2014 01:07 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406034451">&nbsp;</a></div><pre>Hi,

I see pilots having all the same problem when trying to go past the CE&#58;

Globus error 22&#58; the job manager failed to create an internal script argument file

From [1], the advised action to take is&#58;
Check that $GLOBUS_LOCATION/libexec/globus-job-manager-script.pl exists and is executable. Check that the LRM-specific perl module is located in $GLOBUS_LOCATION/lib/perl/Globus/GRAM/JobManager/ directory and is valid. The command perl -I$GLOBUS_LOCATION/lib/perl $GLOBUS_LOCATION/lib/perl/Globus/GRAM/JobManager/LRM.pm can be used to check if there are any syntax errors in the script.

Can you please check?

Best regards,
Luis

[1] <a href='http&#58;//toolkit.globus.org/toolkit/docs/5.0/5.0.2/user/#errors' target='_blank' rel='nofollow'>http&#58;//toolkit.globus.org/toolkit/docs/5.0/5.0.2/user/#errors</a>

-- by Luis Emiro Linares Garcia at Tue Jul 22 13&#58;07&#58;18 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023</a></pre></div><div class='update_description'><i onclick="document.location='21851#1405993452'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-22T01:44:12+00:00">Jul 22, 2014 01:44 AM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1405993452">&nbsp;</a></div><pre>I added 100 more pool accounts to gums and I now see cmspilot jobs
getting mapped.

21 Jul 2014 18&#58;39&#58;57,603 [INFO ]&#58; GridID[/DC=com/DC=DigiCert-Grid/O=Open
Science Grid/OU=Services/CN=cms.tier3.ucdavis.edu] - Mapped on host
&#39;/DC=com/DC=DigiCert-Grid/O=Open Science
Grid/OU=Services/CN=cms.tier3.ucdavis.edu&#39; the user
&#39;/DC=ch/DC=cern/OU=computers/CN=cmspilot04/vocms0167.cern.ch&#39; /
&#39;/cms/Role=pilot/Capability=NULL&#39; to &#39;cms2603&#39;
21 Jul 2014 18&#58;39&#58;57,810 [INFO ]&#58; GridID[/DC=com/DC=DigiCert-Grid/O=Open
Science Grid/OU=Services/CN=cms.tier3.ucdavis.edu] - Mapped on host
&#39;/DC=com/DC=DigiCert-Grid/O=Open Science
Grid/OU=Services/CN=cms.tier3.ucdavis.edu&#39; the user
&#39;/DC=ch/DC=cern/OU=computers/CN=cmspilot04/vocms0167.cern.ch&#39; /
&#39;/cms/Role=pilot/Capability=NULL&#39; to &#39;cms2603&#39;</pre></div><div class='update_description'><i onclick="document.location='21851#1405991117'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-22T01:05:17+00:00">Jul 22, 2014 01:05 AM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1405991117">&nbsp;</a></div><pre>Yes, I see cmspilot users not getting a mapping in GUMS. If I map a
random local account, say cms2323, I get a result&#58;
/DC=ch/DC=cern/OU=Organic
Units/OU=Users/CN=jmejiagu/CN=738553/CN=Jhovanny Andres Mejia Guisao

The only thing I have changed recently are the host and services certs
so I&#39;m not sure why these mappings are lost.

The uscmsPool accounts are set in Gums as&#58;
Current Assignments&#58;	2501-2600(100/100), cms0001-2500(2500/2500)

Snippets from gums-service-admin.log&#58;

21 Jul 2014 17&#58;49&#58;16,172 [WARN ]&#58; Could not assign user
&#39;/DC=ch/DC=cern/OU=computers/CN=cmspilot00/vocms0167.cern.ch&#39; to account
within pool account mapper &#39;uscmsPool&#39;.
21 Jul 2014 17&#58;49&#58;16,173 [INFO ]&#58; GridID[/DC=com/DC=DigiCert-Grid/O=Open
Science Grid/OU=Services/CN=cms.tier3.ucdavis.edu] - Mapped on host
&#39;/DC=com/DC=DigiCert-Grid/O=Open Science
Grid/OU=Services/CN=cms.tier3.ucdavis.edu&#39; the user
&#39;/DC=ch/DC=cern/OU=computers/CN=cmspilot00/vocms0167.cern.ch&#39; /
&#39;/cms/Role=pilot/Capability=NULL&#39; to &#39;null&#39;
21 Jul 2014 17&#58;49&#58;16,254 [WARN ]&#58; Could not assign user
&#39;/DC=ch/DC=cern/OU=computers/CN=cmspilot05/vocms0167.cern.ch&#39; to account
within pool account mapper &#39;uscmsPool&#39;.
21 Jul 2014 17&#58;49&#58;16,256 [INFO ]&#58; GridID[/DC=com/DC=DigiCert-Grid/O=Open
Science Grid/OU=Services/CN=cms.tier3.ucdavis.edu] - Mapped on host
&#39;/DC=com/DC=DigiCert-Grid/O=Open Science
Grid/OU=Services/CN=cms.tier3.ucdavis.edu&#39; the user
&#39;/DC=ch/DC=cern/OU=computers/CN=cmspilot05/vocms0167.cern.ch&#39; /
&#39;/cms/Role=pilot/Capability=NULL&#39; to &#39;null&#39;
21 Jul 2014 17&#58;49&#58;16,820 [INFO ]&#58; User group update for cmsfrontier (4
users).
21 Jul 2014 17&#58;49&#58;17,934 [INFO ]&#58; User group update for cmsphedex (23
users).
<div id='show_771548063' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_771548063'>21 Jul 2014 17&#58;49&#58;19,019 [INFO ]&#58; User group update for cmsprod (9 users).
21 Jul 2014 17&#58;49&#58;20,162 [INFO ]&#58; User group update for cmssoft (6 users).
21 Jul 2014 17&#58;49&#58;22,204 [INFO ]&#58; User group update for cmsuser (1188
users).
....
21 Jul 2014 17&#58;57&#58;49,511 [INFO ]&#58; GridID[/DC=com/DC=DigiCert-Grid/O=Open
Science Grid/OU=Services/CN=cms.tier3.ucdavis.edu] - Mapped on host
&#39;/DC=com/DC=DigiCert-Grid/O=Open Science
Grid/OU=Services/CN=cms.tier3.ucdavis.edu&#39; the user
&#39;/DC=com/DC=DigiCert-Grid/O=Open Science
Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu&#39; /
&#39;/osg/Role=NULL/Capability=NULL&#39; to &#39;osg&#39;
</div><script type='text/javascript'>
        $('#show_771548063').click(function() {
            $('#detail_771548063').slideDown("normal");
            $('#show_771548063').hide();
            $('#hide_771548063').show();
        });
        $('#hide_771548063').click(function() {
            $('#detail_771548063').slideUp();
            $('#hide_771548063').hide();
            $('#show_771548063').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='21851#1405981927'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-21T22:32:07+00:00">Jul 21, 2014 10:32 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405981927">&nbsp;</a></div><pre>Sorry,

I think Brendan may have overlooked the original issue.  We are getting some non-CMS glideins to run at UCD (from OSG VO), but all of the Analysis glideins are still failing to authenticate&#58;
1513446.3   fecmsucsd       7/21 22&#58;08 Globus error 7&#58; authentication with the remote server failed

This suggests there is still an issue with GUMS, at least for the CMS analysis user (see pilot proxy example in original ticket).

Jeff Dost
OSG Glidein Factory Operations

p.s. here&#39;s a breakdown of glideins right now at UCD&#58;
<a href='http&#58;//gfactory-1.t2.ucsd.edu/osg_gfactory/factoryEntryStatusNow.html?entry=CMS_T3_US_UCD_cms' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/osg_gfactory/factoryEntryStatusNow.html?entry=CMS_T3_US_UCD_cms</a>
you can see running glideins from OSG Flock but 0 running from the CMS frontends.

-- by Jeffrey Dost at Mon Jul 21 22&#58;31&#58;42 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023</a></pre></div><div class='update_description'><i onclick="document.location='21851#1405959255'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-21T16:14:15+00:00">Jul 21, 2014 04:14 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1405959255">&nbsp;</a></div><pre>Thank-you, you can close this ticket.

On Mon, Jul 21, 2014 at 6&#58;19 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62;  [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='21851#1405948774'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-21T13:19:34+00:00">Jul 21, 2014 01:19 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1405948774">&nbsp;</a></div><pre>Hi Terri,

Please give the ok to close this once you have completed all that you need to do.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21851#1405714451'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-18T20:14:11+00:00">Jul 18, 2014 08:14 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1405714451">&nbsp;</a></div><pre>Great, thank-you.

On Fri, Jul 18, 2014 at 1&#58;06 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62;  [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='21851#1405713984'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-18T20:06:24+00:00">Jul 18, 2014 08:06 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405713984">&nbsp;</a></div><pre>Hi Terri,

From the factory perspective, it looks like glideins are running normally now, so this ticket can be closed. If you want to leave it open for the purposes of troubleshooting the issues you’re having submitting jobs, that’s okay with us.

Brendan Dennis

-- by Brendan Dennis at Fri Jul 18 20&#58;05&#58;34 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023</a></pre></div><div class='update_description'><i onclick="document.location='21851#1405710329'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-18T19:05:29+00:00">Jul 18, 2014 07:05 PM UTC</time><a class="anchor" name="1405710329">&nbsp;</a></div><pre>Actually,  globusjob-submit does not work for me either

$ globus-job-get-output -r cms.tier3.ucdavis.edu&#58;2119/jobmanager-fork <a href='https&#58;//cms.tier3.ucdavis.edu&#58;44383/16434101295895889101/5408044200526646686/' target='_blank' rel='nofollow'>https&#58;//cms.tier3.ucdavis.edu&#58;44383/16434101295895889101/5408044200526646686/</a>

ts=2014-07-18T19&#58;02&#58;50.497853Z id=21124 event=gram.job.end level=ERROR gramid=/16434107893129276956/5408044200526657199/ job_status=4 status=-43 reason=&#34;the job manager failed to stage the executable&#34;

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=tknight/CN=740452/CN=Teresa Lynn Knight</pre></div><div class='update_description'><i onclick="document.location='21851#1405708051'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-18T18:27:31+00:00">Jul 18, 2014 06:27 PM UTC</time><a class="anchor" name="1405708051">&nbsp;</a></div><pre>I&#39;m trying to test if &#34;glideins&#34; are working now. Previous testing I used
$ globus-job-run cms.tier3.ucdavis.edu /usr/bin/whoami
This now hangs. In /var/log/globus I see&#58;

ts=2014-07-18T17&#58;54&#58;57.807280Z id=14283 event=gram.job.end level=ERROR gramid=/16434096897738243486/5408044200526660774/ job_status=4 status=-73 reason=&#34;the job manager failed to open stdout&#34;

afaik, nothing has changed so I&#39;m unclear why I am now getting &#39;failed to open stdout&#39;

But this works.
$ globus-job-submit cms.tier3.ucdavis.edu&#58;2119 /usr/bin/whoami
<a href='https&#58;//cms.tier3.ucdavis.edu&#58;44383/16434100196148864476/5408044200526647981/' target='_blank' rel='nofollow'>https&#58;//cms.tier3.ucdavis.edu&#58;44383/16434100196148864476/5408044200526647981/</a>

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=tknight/CN=740452/CN=Teresa Lynn Knight</pre></div><div class='update_description'><i onclick="document.location='21851#1405698546'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-18T15:49:06+00:00">Jul 18, 2014 03:49 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1405698546">&nbsp;</a></div><pre>The link that Teresa posted to OIM should be correct. Please let me know if I can help.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21851#1405645306'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-18T01:01:46+00:00">Jul 18, 2014 01:01 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405645306">&nbsp;</a></div><pre>Hi Terri,

I&#39;m afraid I don&#39;t know where you should go to request a new host cert. If your latest attempt didn&#39;t do the trick, we can always ask our admin here at UCSD for advice.

Best,
Dan

-- by Daniel Klein at Fri Jul 18 01&#58;01&#58;01 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023</a></pre></div><div class='update_description'><i onclick="document.location='21851#1405637070'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-17T22:44:30+00:00">Jul 17, 2014 10:44 PM UTC</time><a class="anchor" name="1405637070">&nbsp;</a></div><pre>Sorry, that was the wrong site. I think I&#39;ve found it here&#58; <a href='https&#58;//oim.grid.iu.edu/oim/certificaterequesthost' target='_blank' rel='nofollow'>https&#58;//oim.grid.iu.edu/oim/certificaterequesthost</a>

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=tknight/CN=740452/CN=Teresa Lynn Knight</pre></div><div class='update_description'><i onclick="document.location='21851#1405636307'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-17T22:31:47+00:00">Jul 17, 2014 10:31 PM UTC</time><a class="anchor" name="1405636307">&nbsp;</a></div><pre>The host key expired on the UCD GUMS server July 12. I just tried to get a new one at <a href='https&#58;//gridca.cern.ch/gridca/HostCertificates/RequestHostCertificate.aspx' target='_blank' rel='nofollow'>https&#58;//gridca.cern.ch/gridca/HostCertificates/RequestHostCertificate.aspx</a>
I typed in agent.tier3.ucdavis.edu as the host name and am told invalid hostname. Is this the correct site to get new host certificates?

thanks,
Terri Knight

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=tknight/CN=740452/CN=Teresa Lynn Knight</pre></div><div class='update_description'><i onclick="document.location='21851#1405626700'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-17T19:51:40+00:00">Jul 17, 2014 07:51 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405626700">&nbsp;</a></div><pre>Hi,

For the last couple of weeks, CMS analysis glideins have been unable to authenticate when submitted to cms.tier3.ucdavis.edu&#58;2119/jobmanager-condor. All the glideins go held with the error message&#58;

Globus error 7&#58; authentication with the remote server failed

Could somebody at the site please investigate this problem? For reference, I&#39;ve pasted the pilot proxy below.

Thanks,
Dan Klein
UCSD Glidein Factory Operations

Pilot proxy&#58;
subject   &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot00/vocms0167.cern.ch/CN=proxy
issuer    &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot00/vocms0167.cern.ch (<a href='http&#58;//cern.ch/' target='_blank' rel='nofollow'>http&#58;//cern.ch/</a>)
identity  &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot00/vocms0167.cern.ch (<a href='http&#58;//cern.ch/' target='_blank' rel='nofollow'>http&#58;//cern.ch/</a>)
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /var/gfactory/clientproxies/user_fecmsucsd/glidein_v3_0/credential_UCSD-v1_0.main_160364
timeleft  &#58; 71&#58;04&#58;30
key usage &#58; Digital Signature, Key Encipherment
=== VO cms extension information ===
VO        &#58; cms
subject   &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot00/vocms0167.cern.ch (<a href='http&#58;//cern.ch/' target='_blank' rel='nofollow'>http&#58;//cern.ch/</a>)
issuer    &#58; /DC=ch/DC=cern/OU=computers/CN=voms.cern.ch (<a href='http&#58;//cern.ch/' target='_blank' rel='nofollow'>http&#58;//cern.ch/</a>)
attribute &#58; /cms/Role=pilot/Capability=NULL
attribute &#58; /cms/Role=NULL/Capability=NULL
attribute &#58; /cms/dcms/Role=NULL/Capability=NULL
attribute &#58; /cms/escms/Role=NULL/Capability=NULL
attribute &#58; /cms/itcms/Role=NULL/Capability=NULL
timeleft  &#58; 71&#58;04&#58;30
uri       &#58; voms.cern.ch&#58;15002 (<a href='http&#58;//voms.cern.ch&#58;15002/' target='_blank' rel='nofollow'>http&#58;//voms.cern.ch&#58;15002/</a>)

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107023</a>
<div id='show_1102702932' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1102702932'>
[Ticket History]
Subject&#58; CMS Analysis glideins can&#39;t authenticate at UCD
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-site-support-team@....
-- by Daniel Klein at Thu Jul 17 19&#58;50&#58;48 UTC 2014
</div><script type='text/javascript'>
        $('#show_1102702932').click(function() {
            $('#detail_1102702932').slideDown("normal");
            $('#show_1102702932').hide();
            $('#hide_1102702932').show();
        });
        $('#hide_1102702932').click(function() {
            $('#detail_1102702932').slideUp();
            $('#hide_1102702932').hide();
            $('#show_1102702932').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F21851">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 21851});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
