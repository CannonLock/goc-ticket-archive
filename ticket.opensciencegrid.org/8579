<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[8579] Resource Specific Issue on UConn-OSG_CE</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=8579" method="post">
<div class="page-header">
    <h3><span class="muted">8579</span> / Resource Specific Issue on UConn-OSG_CE</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Richard T. Jones</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Waiting on Reply from Alain or Rich</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-06-28</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=8579", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/8579?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/8579?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Resource%20Specific%20Issue%20on%20UConn-OSG_CE%20ISSUE%3D8579%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='8579#1277727698'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-28T12:21:38+00:00">Jun 28, 2010 12:21 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1277727698">&nbsp;</a></div><pre>Closing this ticket based on the previous entry.</pre></div><div class='update_description'><i onclick="document.location='8579#1277565608'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-26T15:20:08+00:00">Jun 26, 2010 03:20 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1277565608">&nbsp;</a></div><pre>Alain and Christopher,

For me, this issue is resolved.  Thanks to all who contributed.

-Richard J.

On 6/25/2010 6&#58;08 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1277503687'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-25T22:08:07+00:00">Jun 25, 2010 10:08 PM UTC</time> by <b>VDT</b><a class="anchor" name="1277503687">&nbsp;</a></div><pre>On Jun 25, 2010, at 2&#58;20 PM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62; I read the last few updates, but I am not sure if you guys want to close the ticket? It seems like you know what the issue is now and how to fix it but I am not sure if you are able to implement that fix at this time.. Should I keep this ticket open for now or can we close it and reopen it at a later date if needed? Please advise.</font>

I think it can be closed. Do you agree, Richard?

-alain

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='8579#1277500797'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-25T21:19:57+00:00">Jun 25, 2010 09:19 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1277500797">&nbsp;</a></div><pre>Hey Alain and Richard,

I read the last few updates, but I am not sure if you guys want to close the ticket? It seems like you know what the issue is now and how to fix it but I am not sure if you are able to implement that fix at this time.. Should I keep this ticket open for now or can we close it and reopen it at a later date if needed? Please advise.

Regards,
Christopher
GOC</pre></div><div class='update_description'><i onclick="document.location='8579#1277400551'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-24T17:29:11+00:00">Jun 24, 2010 05:29 PM UTC</time> by <b>VDT</b><a class="anchor" name="1277400551">&nbsp;</a></div><pre>On Jun 22, 2010, at 6&#58;46 AM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62; rely on long-lived tcp connections to remote sites (condor_master,</font>
<font color='#7F7E6F'>&#62; condor_startd, condor_starter for glide-ins, globus-url-copy, and the</font>
<font color='#7F7E6F'>&#62; like) have SO_KEEPALIVE turned on for long-lived connections to remote</font>
<font color='#7F7E6F'>&#62; servers?</font>

You might appreciate this&#58;

<font color='#7F7E6F'>&#62; From&#58; Michael Link &#60;mlink@....&#62;</font>
<font color='#7F7E6F'>&#62; Date&#58; June 24, 2010 10&#58;24&#58;10 AM PDT</font>
<font color='#7F7E6F'>&#62; To&#58; Alain Roy &#60;roy@....&#62;</font>
<font color='#7F7E6F'>&#62; Cc&#58; Stuart Martin &#60;smartin@....&#62;, Joseph Bester &#60;bester@....&#62;</font>
<font color='#7F7E6F'>&#62; Subject&#58; Re&#58; Idea&#58; SO_KEEPALIVE in Globus?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Hi Alain,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;ve enabled keepalives by default in the gridftp server for 5.0.2. There aren&#39;t any options to set the parameters (the environment variables he mentions might be ok, but not for 5.0.2), so that would still have to be controlled on the system.  Was there a specific service you know you would like this, or were you just making a general request?</font>

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='8579#1277225588'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-22T16:53:08+00:00">Jun 22, 2010 04:53 PM UTC</time> by <b>VDT</b><a class="anchor" name="1277225588">&nbsp;</a></div><pre>Richard--

I shared your idea with the Condor and Globus developers. One of the senior Condor developers contacted me and said&#58;

<font color='#7F7E6F'>&#62; As far as I understand things, Condor already sets SO_KEEPALIVE on all TCP connections.  However, I have observed cases that seem to contradict this, so I&#39;d very much like to understand this better.</font>

I gave him your email address so he can follow up with you directly with a few questions. His name is Dan Bradley, and he&#39;s a very sharp guy.

-alain
-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='8579#1277218208'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-22T14:50:08+00:00">Jun 22, 2010 02:50 PM UTC</time> by <b>VDT</b><a class="anchor" name="1277218208">&nbsp;</a></div><pre>On Jun 22, 2010, at 6&#58;46 AM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62; Would it make sense for us to request that the major vdt components that</font>
<font color='#7F7E6F'>&#62; rely on long-lived tcp connections to remote sites (condor_master,</font>
<font color='#7F7E6F'>&#62; condor_startd, condor_starter for glide-ins, globus-url-copy, and the</font>
<font color='#7F7E6F'>&#62; like) have SO_KEEPALIVE turned on for long-lived connections to remote</font>
<font color='#7F7E6F'>&#62; servers?</font>

I think it&#39;s a good idea. As you say, it may take a while to actually happen, but I can try to spread the word to the various software providers.

I&#39;ll admit that I don&#39;t fully understand the technical implications, but what you say does make sense.

Thanks!
-alain
-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='8579#1277214248'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-22T13:44:08+00:00">Jun 22, 2010 01:44 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1277214248">&nbsp;</a></div><pre>Question for the experts&#58;

Would it make sense for us to request that the major vdt components that
rely on long-lived tcp connections to remote sites (condor_master,
condor_startd, condor_starter for glide-ins, globus-url-copy, and the
like) have SO_KEEPALIVE turned on for long-lived connections to remote
servers?  I consider a socket long-lived if it is normal for the socket
to be in a state where neither end is waiting for a write to complete
for an indefinite period of time.  Setting SO_KEEPALIVE to 1 on a socket
does not automatically generate keepalive packets, but it activates the
keepalive mechanism, whose behavior is controlled by the kernel
parameters tpc_keepalive_time, tcp_keepalive_intvl, tcp_keepalive_probes
(see stubs in /proc/sys/net/ipv4/) which are otherwise ineffectual on
that socket.  An even more elegant solution would be to create new
environment variables GLOBUS_TCP_KEEPALIVE_xxx where xxx is one of TIME,
INTVL, or PROBES which override the kernel values on the designated
long-lived sockets, and give the user optional control these parameters
for the designated sockets on a per-process basis.  To have condor
daemons respecting environment variables with a GLOBUS prefix may be
unsatisfying; others will think of a better implementation.

I know this would take some time to work its way down from the globus
and condor releases into the vdt, but that&#39;s fine.  This issue is not
urgent, but in my view it makes sense.

If this were in place then the system admin could tune the kernel
parameters to adjust the keepalive traffic load to the appropriate
level.  As it is, without keepalives enabled, the sysadmin has limited
ability to make the outgoing connections from his site be
firewall-resistant.

-Richard J.</pre></div><div class='update_description'><i onclick="document.location='8579#1277141886'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-21T17:38:06+00:00">Jun 21, 2010 05:38 PM UTC</time> by <b>VDT</b><a class="anchor" name="1277141886">&nbsp;</a></div><pre>That&#39;s very useful, thanks Richard!
-alain
-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='8579#1277140449'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-21T17:14:09+00:00">Jun 21, 2010 05:14 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1277140449">&nbsp;</a></div><pre>Alain,

To directly test for this issue, I would suggest the following steps.  I
did not follow these instructions myself because I am a heavy user of
tcpdump and strace -- standard tools for network diagnostics of running
jobs -- but it will be easier to do the following than to tell people
how to read what is going on in the strace of a process.

1. Find an offsite server that is willing to grant you ftp access
using a standard unencrypted ftp service.  This server will run
captive to a chroot file system as usual, but all that you will
need for this test is that a ftp server be listening on some port
that is visible from off the remote site, and that it is able to
accept incoming anonymous connections.  The server should
preferrably be on the same site where you are seeing what might be
hanging connections, but it does not need to be. Below I call this
server &#34;ftpserver.remote.site&#34;.
2. Ftp into that server, either through the standard ftp port, or
whatever control port is is listening on.  In response to the
login prompt, enter &#34;anonymous &#60;your email address&#62;&#34; (without the
quotes).  You should get back a ftp command prompt.  Confirm that
you are connected by issuing the command &#34;ls&#34;.  You should see a
listing of the top dir of the ftp server.
3. Now go away for some period of time (5 minutes, 10 minutes, 15
minutes).  Come back and try the command &#34;ls&#34; again.  If no
response is received, the session has gone dead for some reason.
Check that the ftpserver.remote.site server is still up and
running.  If so, there has been a firewall timeout between your
local host and the remote site.
4. By repeating this test with different intervals, you can narrow
down what the timeout value is.  This may be useful information
when you go to your site&#39;s (or the remote site&#39;s) network security
team and ask for help with resolving it.

-Richard Jones
<div id='show_1209509589' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1209509589'>
On 6/21/2010 12&#58;11 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1209509589').click(function() {
            $('#detail_1209509589').slideDown("normal");
            $('#show_1209509589').hide();
            $('#hide_1209509589').show();
        });
        $('#hide_1209509589').click(function() {
            $('#detail_1209509589').slideUp();
            $('#hide_1209509589').hide();
            $('#show_1209509589').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8579#1277136667'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-21T16:11:07+00:00">Jun 21, 2010 04:11 PM UTC</time> by <b>VDT</b><a class="anchor" name="1277136667">&nbsp;</a></div><pre>On Jun 18, 2010, at 12&#58;35 PM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62; The core issue on this ticket has been isolated and resolved.  It is</font>
<font color='#7F7E6F'>&#62; related to the behavior of the university firewall that all traffic must</font>
<font color='#7F7E6F'>&#62; pass through to/from the UConn campus.  My network security admin</font>
<font color='#7F7E6F'>&#62; confirms that the firewall silently drops any tcp connection that has</font>
<font color='#7F7E6F'>&#62; not seen any traffic within an interval determined by a single global</font>
<font color='#7F7E6F'>&#62; parameter called &#34;session-ttl&#34; which is currently set to 600 seconds.</font>

Hey, that&#39;s great that you were able to debug that.

I wonder if there is something we could have done to discover this problem sooner. When someone else emails us and asks us for help, is there something I could tell them to check easily to discover this problem? Any thoughts on that?

Thanks!
-alain
-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='8579#1276889646'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-18T19:34:06+00:00">Jun 18, 2010 07:34 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276889646">&nbsp;</a></div><pre>Hello all,

The core issue on this ticket has been isolated and resolved.  It is
related to the behavior of the university firewall that all traffic must
pass through to/from the UConn campus.  My network security admin
confirms that the firewall silently drops any tcp connection that has
not seen any traffic within an interval determined by a single global
parameter called &#34;session-ttl&#34; which is currently set to 600 seconds.
Once that interval has expired on a connection without any traffic being
exchanged, the connection is silently dropped from the routing tables.
The client never hears of this fact, but any new packets that it sends
over that socket are silently dropped by the firewall.  Brilliant!

By turning on the KEEPALIVE option on all tcp sockets to offsite
servers, we were able to demonstrate that the problem with broken
connections goes away.  The symptoms were hanging glidein pilots,
hanging globus-url-copy sessions, and the like.  Igor confirms that when
I have KEEPALIVE turned on and the KEEPIDLE value set appropriately,
these problems are not observed.

My chosen method of implementing this workaround is a bit technical, and
does not work for statically linked executables.  Fortunately, all of
the major components of the vdt are dynamically linked.  For details
please see my google notebook entry on this topic.  Only the top entry
is relevant; ignore the others that relate to other cluster-related matters.

<a href='http&#58;//www.google.com/notebook/public/12056295350928332556/BDQGkIwoQw-nmkd4i#SDReDSgoQi_-OweUk' target='_blank' rel='nofollow'>http&#58;//www.google.com/notebook/public/12056295350928332556/BDQGkIwoQw-nmkd4i#SDReDSgoQi_-OweUk</a>

Thanks to many of you for help in diagnosing this issue, Igor in
particular.

-Richard Jones</pre></div><div class='update_description'><i onclick="document.location='8579#1276720927'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-16T20:42:07+00:00">Jun 16, 2010 08:42 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276720927">&nbsp;</a></div><pre>Hi,

Could I request some response to the issue I raised in posting below
6/14/2010 at 2&#58;15pm ?

Meanwhile, I have made progress on the hanging transfers problem, and am
running definitive tests before posting my solution.

-Richard J.</pre></div><div class='update_description'><i onclick="document.location='8579#1276635787'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-15T21:03:07+00:00">Jun 15, 2010 09:03 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276635787">&nbsp;</a></div><pre>Correction to item #1 in the previous post&#58;

All of the transfers in this test did complete, but as many as 25% of
the globus-url-copy commands did not exit after completing the transfer,
but just sat there in a hung state.  Using netstat I could see that the
data socket has been closed on the client, but the control socket is
still sitting there, and the globus-url-copy client is waiting in
&#34;select()&#34; on the control socket.  This sounds exactly like what is
being described in the following&#58;

<a href='http&#58;//www.ncftp.com/ncftpd/doc/misc/ftp_and_firewalls.html#FirewallTimeouts' target='_blank' rel='nofollow'>http&#58;//www.ncftp.com/ncftpd/doc/misc/ftp_and_firewalls.html#FirewallTimeouts</a>

I have written to my netadmin team to ask what the firewall rules are
for silently closing idle connections.  As soon as I know if they are
silently timing out my control channels, I will see if they will make a
set of rules to prevent this from happening from my servers.  Otherwise
I will implement something like what they recommend on the reference web
page above to work around it.</pre></div><div class='update_description'><i onclick="document.location='8579#1276631826'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-15T19:57:06+00:00">Jun 15, 2010 07:57 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276631826">&nbsp;</a></div><pre>Status update on diagnosing network resource issue under full production
load&#58;

1. Tests with multiple simultaneous gridftp transfers from worker nodes
so far fail to show any problems.  I have submitted 200 simultaneous
jobs, each of which gets 7 input files (1MB, 2MB, 5MB, 10MB, 20MB, 50MB,
100MB) from <a href='gsiftp&#58;//glidein-c.t2.ucsd.edu/.' target='_blank' rel='nofollow'>gsiftp&#58;//glidein-c.t2.ucsd.edu/.</a>  These jobs complete
without problems.  The transfers are sharing a total of 40 MB/s through
my NAT router up the off-campus GB link.  I have not traced what the bw
limiter is on this, but perhaps it may be the traffic shaper at the
campus core.  For the moment I am more concerned about diagnosing the
failing transfers.

2. I am able to produce failures if I do the following&#58; get the 7 files
(1MB, 2MB, 5MB, 10MB, 20MB, 50MB, 100MB) onto the WN and leave them
sitting in the workdir on the WN when the job completes.  In this case,
it seems that the condor cleanup process copies them back into the
userdir on the gatekeeper host as soon as the job exits.  When I do this
I see many hundreds of simultaneous globus-gridftp-copy jobs running on
the gatekeeper host, and at this point the host bogs down with the
symptoms of resource exhaustion of some kind.  Not sure what resource is
being exhausted, but loadavg numbers go through the roof and terminal
response becomes very sluggish.  Condor never stops responding
completely, but the gatekeeper-submit host communication runs into
problems, and jobs on both the gatekeeper and submit host start going
into HOLD state.  Requires manual cleanup to recover.  Diagnosing of
this problem continues....

-Richard J.</pre></div><div class='update_description'><i onclick="document.location='8579#1276542907'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-14T19:15:07+00:00">Jun 14, 2010 07:15 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276542907">&nbsp;</a></div><pre>Trying to track down the reasons that my gridftp requests are failing,
can anyone give me a hint as to the different behaviors for these two
gridftp servers?  When I put a strace on my globus-url-copy command to
samgfwd02.fnal.gov&#58;4569 I see the server sends a greeting message as
soon as the tcp socket is established&#58; &#34;220 samgfwd02.fnal.gov GridFTP
Server 2.8 (gcc64dbg, 1217607445-63) [VDT patched 4.0.8] ready.&#34; This
transfer goes on to succeed.  When I try the server at
d0srv071.fnal.gov&#58;7891 there is no greeting message when the tcp socket
is established, and the globus-url-copy command waits for it.  After a
few seconds, the server then drops the connection.

I can reproduce these two behaviors just using the following telnet
commands&#58;

gryphn&#62; telnet samgfwd02.fnal.gov 4569
Trying 131.225.217.228...
Connected to samgfwd02.fnal.gov (131.225.217.228).
Escape character is &#39;^]&#39;.
220 samgfwd02.fnal.gov GridFTP Server 2.8 (gcc64dbg, 1217607445-63) [VDT
patched 4.0.8] ready.

whereas, on the other hand&#58;
gryphn&#62; telnet d0srv071.fnal.gov 7891
Trying 131.225.216.221...
Connected to d0srv071.fnal.gov (131.225.216.221).
Escape character is &#39;^]&#39;.
Connection closed by foreign host.

Is this 220 startup message from the server a part of the protocol?  The
complete error message when I do globus-url-copy to
d0srv071.fnal.gov&#58;7891 is&#58;

gryphn&#62; globus-url-copy -v -nodcau
<a href='gsiftp&#58;//d0srv071.fnal.gov&#58;7891/sam/cache2/osg-ouhep-4/boo/d0_MC_p20.09.03.tar.gz' target='_blank' rel='nofollow'>gsiftp&#58;//d0srv071.fnal.gov&#58;7891/sam/cache2/osg-ouhep-4/boo/d0_MC_p20.09.03.tar.gz</a>
file&#58;//&#96;pwd&#96;/d0_MC_p20.09.03.tar.gz-3
<div id='show_67085549' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_67085549'>Source&#58; <a href='gsiftp&#58;//d0srv071.fnal.gov&#58;7891/sam/cache2/osg-ouhep-4/boo/' target='_blank' rel='nofollow'>gsiftp&#58;//d0srv071.fnal.gov&#58;7891/sam/cache2/osg-ouhep-4/boo/</a>
Dest&#58;   file&#58;///scratch/condortest/condor-g2.d/
d0_MC_p20.09.03.tar.gz  -&#62;  d0_MC_p20.09.03.tar.gz-3

error&#58; an end-of-file was reached
globus_xio_system_select.c&#58;globus_l_xio_system_try_read&#58;1140&#58;
An end of file occurred

-Richard Jones
</div><script type='text/javascript'>
        $('#show_67085549').click(function() {
            $('#detail_67085549').slideDown("normal");
            $('#show_67085549').hide();
            $('#hide_67085549').show();
        });
        $('#hide_67085549').click(function() {
            $('#detail_67085549').slideUp();
            $('#hide_67085549').hide();
            $('#show_67085549').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8579#1276541648'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-14T18:54:08+00:00">Jun 14, 2010 06:54 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276541648">&nbsp;</a></div><pre>Igor,

Trying to reproduce from my end.  My network admin wants to watch the
blockage event in real time.  I am working to try to set up some offsite
gridftp transfers to servers that can accept many simultaneous incoming
connections.  The SAM servers at fnal are accepting the proxy cert I got
from Joel Snow, but the ones at OU are dropping the connection (eg.
<a href='gsiftp&#58;//ouhep00.nhn.ou.edu&#58;7891' target='_blank' rel='nofollow'>gsiftp&#58;//ouhep00.nhn.ou.edu&#58;7891</a>).  If you can help, please suggest a
half dozen surls that I can hammer with simultaneous gets.

-Richard Jones</pre></div><div class='update_description'><i onclick="document.location='8579#1276534087'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-14T16:48:07+00:00">Jun 14, 2010 04:48 PM UTC</time> by <b>sfiligoi@....</b><a class="anchor" name="1276534087">&nbsp;</a></div><pre>Hi Richard.

Any progress?

Igor

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1276197127'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-10T19:12:07+00:00">Jun 10, 2010 07:12 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1276197127">&nbsp;</a></div><pre>Richard,

It seems that there&#39;s been quite a bit of activity on that ticket&#58; <a href='https&#58;//ticket.grid.iu.edu/goc/viewer?id=8710' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=8710</a>

Kyle

On Jun 10, 2010, at 1&#58;54 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1276192450'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-10T17:54:10+00:00">Jun 10, 2010 05:54 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276192450">&nbsp;</a></div><pre>Meanwhile, I have opened related ticket a couple of days ago 8710, with
no response so far.  Can anyone on this ticket give me some help on that
one, or indicate if the issues might be related to this one?

-Richard J.

On 6/10/2010 1&#58;48 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1276192447'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-10T17:54:07+00:00">Jun 10, 2010 05:54 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276192447">&nbsp;</a></div><pre>I have entered a ticket into the university network incident reports
system.  I am waiting for the network team to get back to me.

-Richard J.

On 6/10/2010 1&#58;48 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1276192087'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-10T17:48:07+00:00">Jun 10, 2010 05:48 PM UTC</time> by <b>sfiligoi@....</b><a class="anchor" name="1276192087">&nbsp;</a></div><pre>Hi Richard.

Did you manage to find anything?

Igor

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1276065907'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-09T06:45:07+00:00">Jun 9, 2010 06:45 AM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276065907">&nbsp;</a></div><pre>Igor,

Ok, with this incident I can now go to my network security team and
investigate.

-Richard J.

On 6/8/2010 9&#58;12 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1276045926'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-09T01:12:06+00:00">Jun 9, 2010 01:12 AM UTC</time> by <b>sfiligoi@....</b><a class="anchor" name="1276045926">&nbsp;</a></div><pre>It seems 50 glideins ran without problems... but when the number grew to 100, most of them seem to have lost network connectivity.

Igor

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1276044488'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-09T00:48:08+00:00">Jun 9, 2010 12:48 AM UTC</time> by <b>sfiligoi@....</b><a class="anchor" name="1276044488">&nbsp;</a></div><pre>This is my identity, if you need it
x509userproxysubject = &#34;/DC=org/DC=doegrids/OU=Services/CN=testpilot01/glidein-1.t2.ucsd.edu&#34;
x509UserProxyFirstFQAN = &#34;/cms/Role=pilot/Capability=NULL&#34;
x509UserProxyVOName = &#34;cms&#34;
x509UserProxyFQAN = &#34;/DC=org/DC=doegrids/OU=Services/CN=testpilot01/glidein-1.t2.ucsd.edu,/cms/Role=pilot/Capability=NULL,/cms/Role=NULL/Capability=NULL,/cms/uscms/Role=NULL/Capability=NULL&#34;

Igor

Igor Sfiligoi wrote&#58;
<font color='#7F7E6F'>&#62; Hi Richard.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I have started submitting glidein jobs.</font>
<font color='#7F7E6F'>&#62; They will talk back to both</font>
<font color='#7F7E6F'>&#62; glidein-1.t2.ucsd.edu</font>
<font color='#7F7E6F'>&#62; submit-test-1.t2.ucsd.edu</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Let&#39;s see if we can reproduce the problem.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Igor</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Open Science Grid FootPrints wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1276044486'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-09T00:48:06+00:00">Jun 9, 2010 12:48 AM UTC</time> by <b>sfiligoi@....</b><a class="anchor" name="1276044486">&nbsp;</a></div><pre>Hi Richard.

I have started submitting glidein jobs.
They will talk back to both
glidein-1.t2.ucsd.edu
submit-test-1.t2.ucsd.edu

Let&#39;s see if we can reproduce the problem.

Igor

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1276005789'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-08T14:03:09+00:00">Jun 8, 2010 02:03 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276005789">&nbsp;</a></div><pre>Igor,

Yes, that would be helpful.  At this point, I would have to ask the
security team to go back through the firewall logs several weeks back to
some poorly known date.  It would be better to have a recent set of
events to point to.  Could you send the test jobs, and then send me an
email telling how many and what vo?

-Richard J.

On 6/8/2010 9&#58;18 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1276003086'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-08T13:18:06+00:00">Jun 8, 2010 01:18 PM UTC</time> by <b>sfiligoi@....</b><a class="anchor" name="1276003086">&nbsp;</a></div><pre>Hi Rich.

If it can help, I can submit a large number of jobs that mimic what glideins do so you can catch it in the act.

Just let me know.

Cheers,
Igor

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1275949616'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-07T22:26:56+00:00">Jun 7, 2010 10:26 PM UTC</time><a class="anchor" name="1275949616">&nbsp;</a></div><pre>[Updated CC List]
osg-gfactory-support@....
rana@....
burt@....</pre></div><div class='update_description'><i onclick="document.location='8579#1275948187'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-07T22:03:07+00:00">Jun 7, 2010 10:03 PM UTC</time> by <b>Burt Holzman</b><a class="anchor" name="1275948187">&nbsp;</a></div><pre>Hi Rich,

I talked a little bit to Derek this afternoon (who is submitting through
the UCSD factory as the HCC VO).  Is it possible that the UConn NAT or
firewall could be having issues?  Derek noted that when running at low
scale (50 jobs), things were fine, but at higher scale (300 jobs), they
experienced disconnections.

Glidein submitters may trip local or site-wide firewall rules (or other
cybersecurity protocols) -- 300 worker nodes conducting outbound traffic
to a single host can appear as a DDOS.  Could you check with your local
security folks if connections to glidein.unl.edu were blocked when the
problems were experienced?

- B</pre></div><div class='update_description'><i onclick="document.location='8579#1275946747'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-07T21:39:07+00:00">Jun 7, 2010 09:39 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1275946747">&nbsp;</a></div><pre>| Is HCC the only one that has ever complained?

No, there are reports from gpn and D0 that there are problems reaching
their servers as well.  I am currently in contact with Joel Snow about
the specific symptoms for D0 jobs.  In the D0 case, there is a failure
of one of the D0 gridftp servers to respond to a globus-url-copy command
issued to one of the surl&#39;s Joel gave me from any host on my site.  Joel
has provided me with a proxy cert to use for these tests.  It works for
some of his surl&#39;s, while specific servers seem to drop the connection
before auth negotiation has finished.  This may be unrelated to the
glide-in problems, but it makes sense to eliminate the simple stuff first.

One issue that I have seen in a number of cases is that I get an error
from globus-url-copy that the subject DN returned during negotiation
does not agree with that computed on the basis of dns information.  This
causes globus-url-copy to abort the request on my end.  I can get around
this by discovering the subject DN that the server is using (eg. some
have the prefix &#34;sam/&#34; before the FQHN in the server cert DN) and then
providing it on the globus-url-copy command line with the -s option.
Seems clumsy, but it works.  Is this the intended behavior?

-Richard J.</pre></div><div class='update_description'><i onclick="document.location='8579#1275945668'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-07T21:21:08+00:00">Jun 7, 2010 09:21 PM UTC</time> by <b>sfiligoi@....</b><a class="anchor" name="1275945668">&nbsp;</a></div><pre>Uhm... there should be no special networking tuning needed...
it &#34;should just work&#34;.

Is HCC the only one that has ever complained?
Or do you have problems with other VOs/users as well?

Igor

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1275679423'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-04T19:23:43+00:00">Jun 4, 2010 07:23 PM UTC</time><a class="anchor" name="1275679423">&nbsp;</a></div><pre>[Updated CC List]
osg-gfactory-support@....
rana@....
burt@....</pre></div><div class='update_description'><i onclick="document.location='8579#1275589269'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-03T18:21:09+00:00">Jun 3, 2010 06:21 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1275589269">&nbsp;</a></div><pre>I have had no replies to my last message.  Our cluster is sitting 90%
idle right now, presumably because groups are staying away from
UConn-OSG until this issue is addressed.  I am at UConn for the next ten
days, and available to carry out tests.

-Richard Jones</pre></div><div class='update_description'><i onclick="document.location='8579#1275587766'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-03T17:56:06+00:00">Jun 3, 2010 05:56 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1275587766">&nbsp;</a></div><pre>Has there been any discussion or updates for this issue? Just doing the weekly ping.

Thanks,
Kyle</pre></div><div class='update_description'><i onclick="document.location='8579#1274912646'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-26T22:24:06+00:00">May 26, 2010 10:24 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1274912646">&nbsp;</a></div><pre>Igor,

There are no network restrictions that I know of that should interfere
with glide-ins communication with the glide-in server from the worker
nodes, but I agree that it has the symptoms of a network issue.  Not
knowing the internals of the glide-in protocol, I cannot say what might
be causing it (special routes that I am supposed to have set up, etc.)
As far as I know, the outgoing tcp connections should be fine to
anywhere provided that default ip routing is ok.

<font color='#7F7E6F'>&#62; The glideins submitted by the UCSD gfactory seem to start fine, but then the Uconn WNs cannot talk to the HCC installation.</font>
<font color='#7F7E6F'>&#62; I strongly suspect some kind of network problem.  Does UConn have any particular networking rules that HCC should be aware of?</font>
<font color='#7F7E6F'>&#62;</font>

-Richard Jones</pre></div><div class='update_description'><i onclick="document.location='8579#1274802126'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-25T15:42:06+00:00">May 25, 2010 03:42 PM UTC</time> by <b>sfiligoi@....</b><a class="anchor" name="1274802126">&nbsp;</a></div><pre>Hi All.

First of all...
if someone put some text in the body of the first email we received, this may actually got somewhere.

What do you expect people do when they receive a generic
&#34;&#34;&#34;&#34;&#34;&#34;&#34;&#34;&#34;
[Updated CC List]
osg-gfactory-support@....

For complete ticket details, click
<a href='https&#58;//ticket.grid.iu.edu/goc/viewer?id=8579' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=8579</a>
&#34;&#34;&#34;&#34;&#34;&#34;&#34;&#34;&#34;
???

I receive way too many that I have nothing to do about to read the details of each and every one I get.

---------------------

Now, said that, the problem is fully between UConn-OSG-CE and the HCC installation.

The glideins submitted by the UCSD gfactory seem to start fine, but then the Uconn WNs cannot talk to the HCC installation.
I strongly suspect some kind of network problem.
Does UConn have any particular networking rules that HCC should be aware of?
As far as I know HCC runs fine with the rest of OSG, so I think it is a problem on the UConn side.

Igor

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1274798709'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-25T14:45:09+00:00">May 25, 2010 02:45 PM UTC</time> by <b>VDT</b><a class="anchor" name="1274798709">&nbsp;</a></div><pre>On May 25, 2010, at 8&#58;50 AM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62; Are there any updates to this issue?  There hasn&#39;t been any activity since the 18th.</font>

I recommended they contact the owners of the glide-in jobs. That&#39;s the best place for support. I haven&#39;t heard back if that&#39;s happened though.

-alain
-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='8579#1274795281'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-25T13:48:01+00:00">May 25, 2010 01:48 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1274795281">&nbsp;</a></div><pre>Are there any updates to this issue?  There hasn&#39;t been any activity since the 18th.

Kyle</pre></div><div class='update_description'><i onclick="document.location='8579#1274294321'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-19T18:38:41+00:00">May 19, 2010 06:38 PM UTC</time><a class="anchor" name="1274294321">&nbsp;</a></div><pre>[Updated CC List]
osg-gfactory-support@....
rana@....</pre></div><div class='update_description'><i onclick="document.location='8579#1274227119'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-18T23:58:39+00:00">May 18, 2010 11:58 PM UTC</time><a class="anchor" name="1274227119">&nbsp;</a></div><pre>[Updated CC List]
osg-gfactory-support@....</pre></div><div class='update_description'><i onclick="document.location='8579#1274201646'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-18T16:54:06+00:00">May 18, 2010 04:54 PM UTC</time> by <b>VDT</b><a class="anchor" name="1274201646">&nbsp;</a></div><pre>On May 18, 2010, at 11&#58;25 AM, Alain Roy wrote&#58;

<font color='#7F7E6F'>&#62; On May 18, 2010, at 11&#58;09 AM, Open Science Grid FootPrints wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; The DN associated with these jobs is</font>
<font color='#7F7E6F'>&#62;&#62; &#34;/DC=org/DC=doegrids/OU=People/CN=Derek Weitzel 285345&#34;.  I think this</font>
<font color='#7F7E6F'>&#62;&#62; is the name associated with the glidein server (UCSD site, perhaps?)</font>
<font color='#7F7E6F'>&#62;&#62; that is being used to manage these jobs, not that of the user who is</font>
<font color='#7F7E6F'>&#62;&#62; requesting the work.  Is this correct?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Ah great. GOC, you should add the following two people to the GOC ticket. (I don&#39;t know how to do that.)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Derek Weitzel &#60;dweitzel@....&#62;</font>
<font color='#7F7E6F'>&#62; Brian Bockelman &#60;bbockelm@....&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; We should ask them if Richard&#39;s diagnosis is correct (are the glidein jobs idle?). They&#39;re quite competent, so they can probably handle the debugging, but I&#39;m happy to help if I can.</font>

Ah, Brian tells me you should put down the following email address instead of Derek and Brian.

osg-gfactory-support@....

-alain

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='8579#1274200027'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-18T16:27:07+00:00">May 18, 2010 04:27 PM UTC</time> by <b>VDT</b><a class="anchor" name="1274200027">&nbsp;</a></div><pre>On May 18, 2010, at 11&#58;09 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; The DN associated with these jobs is</font>
<font color='#7F7E6F'>&#62; &#34;/DC=org/DC=doegrids/OU=People/CN=Derek Weitzel 285345&#34;.  I think this</font>
<font color='#7F7E6F'>&#62; is the name associated with the glidein server (UCSD site, perhaps?)</font>
<font color='#7F7E6F'>&#62; that is being used to manage these jobs, not that of the user who is</font>
<font color='#7F7E6F'>&#62; requesting the work.  Is this correct?</font>

Ah great. GOC, you should add the following two people to the GOC ticket. (I don&#39;t know how to do that.)

Derek Weitzel &#60;dweitzel@....&#62;
Brian Bockelman &#60;bbockelm@....&#62;

We should ask them if Richard&#39;s diagnosis is correct (are the glidein jobs idle?). They&#39;re quite competent, so they can probably handle the debugging, but I&#39;m happy to help if I can.

-alain
-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='8579#1274198947'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-18T16:09:07+00:00">May 18, 2010 04:09 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1274198947">&nbsp;</a></div><pre>Alain,

The DN associated with these jobs is
&#34;/DC=org/DC=doegrids/OU=People/CN=Derek Weitzel 285345&#34;.  I think this
is the name associated with the glidein server (UCSD site, perhaps?)
that is being used to manage these jobs, not that of the user who is
requesting the work.  Is this correct?

-Richard Jones

On 5/18/2010 11&#58;42 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1274197330'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-18T15:42:10+00:00">May 18, 2010 03:42 PM UTC</time> by <b>VDT</b><a class="anchor" name="1274197330">&nbsp;</a></div><pre>On May 18, 2010, at 10&#58;28 AM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62; These jobs are not mine.  They are submitted by other VO&#39;s and are</font>
<font color='#7F7E6F'>&#62; landing on my local CE for execution, which is what I want to see.  The</font>
<font color='#7F7E6F'>&#62; problem is that sometimes they seem to hang around for a long time doing</font>
<font color='#7F7E6F'>&#62; nothing, as I described.  I assume that they are glideinWMS jobs, but I</font>
<font color='#7F7E6F'>&#62; cannot confirm that.  Most of them that in the queue right now are</font>
<font color='#7F7E6F'>&#62; coming from the hcc VO.</font>

If that&#39;s the case, then we need to get in touch with the user that submitted the job.

Richard--do you have a user DN for the user that submitted these jobs?

GOC folks--can you help us get in touch with the hcc VO? (Is that based at Nebraska? Maybe Brian Bockelman?)

I&#39;m happy to help debug the software problem if that&#39;s needed, but right now it sounds like we need to get in touch the owner of the glideinWMS jobs before we can do much of anything.

Thanks,
-alain

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='8579#1274196427'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-18T15:27:07+00:00">May 18, 2010 03:27 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1274196427">&nbsp;</a></div><pre>Hello Alain,

These jobs are not mine.  They are submitted by other VO&#39;s and are
landing on my local CE for execution, which is what I want to see.  The
problem is that sometimes they seem to hang around for a long time doing
nothing, as I described.  I assume that they are glideinWMS jobs, but I
cannot confirm that.  Most of them that in the queue right now are
coming from the hcc VO.

-Richard J.

On 5/18/2010 11&#58;18 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8579#1274195886'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-18T15:18:06+00:00">May 18, 2010 03:18 PM UTC</time> by <b>VDT</b><a class="anchor" name="1274195886">&nbsp;</a></div><pre>On May 17, 2010, at 2&#58;25 PM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62; I am seeing poor efficiency on the UConn-OSG cluster when running jobs that use the glide-in mechanism.  The symptoms described below apply specifically to jobs submitted by the hcc VO, although similar symptoms have been seen in the past with jobs submitted by gpn.  The symptoms are that glide-in jobs get started on all available job slots, but then they stay around doing nothing for hours and days on end.  The following clues are found in the glide-in MasterLog file, found at ${jobdir}/glide_NNNNN/log/MasterLog&#58;</font>

Thanks. Can you give me a bit more background information? Are you using GlideinWMS? Are you the one deploying GlideinWMS, or are you just watching the jobs submitting someone else has submitted? I don&#39;t have the bit picture of what is happening here. The more I know, the better we can get the right people on the ticket.

<font color='#7F7E6F'>&#62; 05/13 20&#58;20&#58;35 (pid&#58;22168) condor_read() failed&#58; recv() returned -1, errno = 110 Connection timed out, reading 21 bytes from collector glidein.unl.edu&#58;9649.</font>
<font color='#7F7E6F'>&#62; 05/13 20&#58;20&#58;35 (pid&#58;22168) IO&#58; Failed to read packet header</font>
<font color='#7F7E6F'>&#62; 05/13 20&#58;20&#58;35 (pid&#58;22168) CCBListener&#58; failed to receive message from CCB server glidein.unl.edu&#58;9649</font>
<font color='#7F7E6F'>&#62; 05/13 20&#58;20&#58;35 (pid&#58;22168) CCBListener&#58; connection to CCB server glidein.unl.edu&#58;9649 failed; will try to reconnect in 60 seconds.</font>

It looks like whoever deployed GlideinWMS and is running that server needs to check if the server is running, if the port number is correct, and if there are messages on the CCB logs on that computer.

Thanks,
-alain
-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='8579#1274124430'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-17T19:27:10+00:00">May 17, 2010 07:27 PM UTC</time> by <b>VDT</b><a class="anchor" name="1274124430">&nbsp;</a></div><pre>Greetings from the VDT support system!

This message was generated automatically in response to the creation of a
ticket regarding&#58;

[vdt-support #-1] Open Science Grid&#58; Resource Specific Issue on UConn-OSG_CE ISSUE=8579 PROJ=71

Your original request is copied below for reference.

There is no need to reply to this message right now -- someone from the VDT
team will respond to you as soon as possible.  If you wish to view your
support ticket online, visit&#58;

<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6931</a>

Your ticket has been assigned an ID as follows&#58;

[vdt-support #6931]

Please include the ticket ID in the subject line of all future email about
this issue.  To do so, you may reply to this message.

Thank you for your interest in the VDT.

vdt-support@....

-------------------------------------------------------------------------
[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='8579#1274124278'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-17T19:24:38+00:00">May 17, 2010 07:24 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1274124278">&nbsp;</a></div><pre>VDT,

We received this ticket&#58;

I am seeing poor efficiency on the UConn-OSG cluster when running jobs that use the glide-in mechanism.  The symptoms described below apply specifically to jobs submitted by the hcc VO, although similar symptoms have been seen in the past with jobs submitted by gpn.  The symptoms are that glide-in jobs get started on all available job slots, but then they stay around doing nothing for hours and days on end.  The following clues are found in the glide-in MasterLog file, found at ${jobdir}/glide_NNNNN/log/MasterLog&#58;

05/13 20&#58;20&#58;35 (pid&#58;22168) condor_read() failed&#58; recv() returned -1, errno = 110 Connection timed out, reading 21 bytes from collector glidein.unl.edu&#58;9649.
05/13 20&#58;20&#58;35 (pid&#58;22168) IO&#58; Failed to read packet header
05/13 20&#58;20&#58;35 (pid&#58;22168) CCBListener&#58; failed to receive message from CCB server glidein.unl.edu&#58;9649
05/13 20&#58;20&#58;35 (pid&#58;22168) CCBListener&#58; connection to CCB server glidein.unl.edu&#58;9649 failed; will try to reconnect in 60 seconds.
05/13 20&#58;21&#58;36 (pid&#58;22168) ZKM&#58; 1&#58; attempting to map &#39;/DC=org/DC=doegrids/OU=Services/CN=host/glidein.unl.edu&#39;
05/13 20&#58;21&#58;36 (pid&#58;22168) ZKM&#58; 2&#58; mapret&#58; 0 included_voms&#58; 0 canonical_user&#58; collector1
05/13 20&#58;21&#58;36 (pid&#58;22168) ZKM&#58; successful mapping to collector1
05/13 20&#58;21&#58;36 (pid&#58;22168) CCBListener&#58; registered with CCB server glidein.unl.edu&#58;9649 as ccbid 129.93.229.144&#58;9649#16714

The above block repeats indefinitely with a period of 2 hours and 10 minutes.  There are no pff-site network access problems at our site during the above period.</pre></div><div class='update_description'><i onclick="document.location='8579#1273928264'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-15T12:57:44+00:00">May 15, 2010 12:57 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1273928264">&nbsp;</a></div><pre>I am seeing poor efficiency on the UConn-OSG cluster when running jobs that use the glide-in mechanism.  The symptoms described below apply specifically to jobs submitted by the hcc VO, although similar symptoms have been seen in the past with jobs submitted by gpn.  The symptoms are that glide-in jobs get started on all available job slots, but then they stay around doing nothing for hours and days on end.  The following clues are found in the glide-in MasterLog file, found at ${jobdir}/glide_NNNNN/log/MasterLog&#58;

05/13 20&#58;20&#58;35 (pid&#58;22168) condor_read() failed&#58; recv() returned -1, errno = 110 Connection timed out, reading 21 bytes from collector glidein.unl.edu&#58;9649.
05/13 20&#58;20&#58;35 (pid&#58;22168) IO&#58; Failed to read packet header
05/13 20&#58;20&#58;35 (pid&#58;22168) CCBListener&#58; failed to receive message from CCB server glidein.unl.edu&#58;9649
05/13 20&#58;20&#58;35 (pid&#58;22168) CCBListener&#58; connection to CCB server glidein.unl.edu&#58;9649 failed; will try to reconnect in 60 seconds.
05/13 20&#58;21&#58;36 (pid&#58;22168) ZKM&#58; 1&#58; attempting to map &#39;/DC=org/DC=doegrids/OU=Services/CN=host/glidein.unl.edu&#39;
05/13 20&#58;21&#58;36 (pid&#58;22168) ZKM&#58; 2&#58; mapret&#58; 0 included_voms&#58; 0 canonical_user&#58; collector1
05/13 20&#58;21&#58;36 (pid&#58;22168) ZKM&#58; successful mapping to collector1
05/13 20&#58;21&#58;36 (pid&#58;22168) CCBListener&#58; registered with CCB server glidein.unl.edu&#58;9649 as ccbid 129.93.229.144&#58;9649#16714

The above block repeats indefinitely with a period of 2 hours and 10 minutes.  There are no pff-site network access problems at our site during the above period.</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F8579">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 8579});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
