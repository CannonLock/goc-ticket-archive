<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[21503] CMS_T3_US_TTU gatekeeper queue down</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=21503" method="post">
<div class="page-header">
    <h3><span class="muted">21503</span> / CMS_T3_US_TTU gatekeeper queue down</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Luis Emiro</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Luis Emiro Linares Garcia</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">TIGRE</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Waiting for factory response</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-02-26</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG Glidein Factory Support <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">TIGRE <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=106383">106383</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Matyas Selmeci <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Suchandra Thapa <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/21503", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/21503?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/21503?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20CMS_T3_US_TTU%20gatekeeper%20queue%20down%20ISSUE%3D21503%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='21503#1426291207'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-14T00:00:07+00:00">Mar 14, 2015 12:00 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1426291207">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.

-- by GGUS SYSTEM at Fri Mar 13 23&#58;59&#58;02 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1424979456'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-26T19:37:36+00:00">Feb 26, 2015 07:37 PM UTC</time><a class="anchor" name="1424979456">&nbsp;</a></div><pre>Thanks Brandon, then I am closing this ticket

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='21503#1424885411'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-25T17:30:11+00:00">Feb 25, 2015 05:30 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1424885411">&nbsp;</a></div><pre>I am now seeing CMS glideins running on TTU, there just still aren&#39;t that many compared to OSG and GLOW. Those few that are running do seem to be running fine, although not all are also running user jobs. We can probably go ahead and close this; I can reopen it later if issues do arise with CMS glideins.

Brendan Dennis
UCSD Glidein Factory Operations

-- by Brendan Dennis at Wed Feb 25 17&#58;29&#58;06 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1424710719'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-23T16:58:39+00:00">Feb 23, 2015 04:58 PM UTC</time><a class="anchor" name="1424710719">&nbsp;</a></div><pre>Hi Brandon,

The unmatching glideins could not be there because of the CMS frontend problems last week. Can u double check if this is the case or we can close this?

Thanks

Edgar
OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='21503#1424205027'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-17T20:30:27+00:00">Feb 17, 2015 08:30 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1424205027">&nbsp;</a></div><pre>Hello All,

Is there any news on this since Brendan&#39;s last post? Please let me know if I can assist in some way.

Thanks,

Chris</pre></div><div class='update_description'><i onclick="document.location='21503#1423588464'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-10T17:14:24+00:00">Feb 10, 2015 05:14 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1423588464">&nbsp;</a></div><pre>Hi Brian,

Sorry for not replying here, we&#39;ve been talking to the TTU folks over in the GOC ticket thread for similar problems regarding Fermilab glideins&#58;
<a href='https&#58;//ticket.grid.iu.edu/goc/22952' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/22952</a>

To recap the updates from that ticket, it looks like the problems with glidein submission to TTU have been resolved, as I&#39;ve been seeing OSG glideins submitting and running to completion (including running user jobs) since late last week. However, I have yet to see any CMS glideins running; the few attempting to run seem to be going unmatched [1].

Brendan Dennis
UCSD Glidein Factory Operations

[1]
<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=CMS_T3_US_TTU_antaeus_serial&frontend=CMSG-v1_0_cmspilot' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=CMS_T3_US_TTU_antaeus_serial&frontend=CMSG-v1_0_cmspilot</a>

-- by Brendan Dennis at Tue Feb 10 17&#58;13&#58;42 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1423518303'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-09T21:45:03+00:00">Feb 9, 2015 09:45 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1423518303">&nbsp;</a></div><pre>Factory folks,

Could you submit more glideins to see if they get held?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='21503#1422997972'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-03T21:12:52+00:00">Feb 3, 2015 09:12 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1422997972">&nbsp;</a></div><pre>As with a related ticket, we are waiting for an update on this.

Please note that the comprehensive reboot after updates to resolve the glib vulnerability cleared up problems we had been chasing for a long period on our storage element associated with this CE that were being pursued on another ticket.  It is not known why this cleared up those problems, but it is possible that the oddities we saw (inconstant behavior on accessing files there) somehow affected externally submitted jobs if they made access to files via the SE.

We have also cleared out any long-running globus-job-manager processes (more than two days) to see if this might help clear things up.

Please retest.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4

-- by goc (via Footprints) at Mon Feb 02 16&#58;28&#58;36 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1422894422'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-02T16:27:02+00:00">Feb 2, 2015 04:27 PM UTC</time><a class="anchor" name="1422894422">&nbsp;</a></div><pre>As with a related ticket, we are waiting for an update on this.

Please note that the comprehensive reboot after updates to resolve the glib vulnerability cleared up problems we had been chasing for a long period on our storage element associated with this CE that were being pursued on another ticket.  It is not known why this cleared up those problems, but it is possible that the oddities we saw (inconstant behavior on accessing files there) somehow affected externally submitted jobs if they made access to files via the SE.

We have also cleared out any long-running globus-job-manager processes (more than two days) to see if this might help clear things up.

Please retest.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4</pre></div><div class='update_description'><i onclick="document.location='21503#1422382994'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-27T18:23:14+00:00">Jan 27, 2015 06:23 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1422382994">&nbsp;</a></div><pre>Hi all,

Some news from the factory perspective&#58; I cleared out all of the stale held glideins to let fresh ones in, and they&#39;ve actually started running, which they hadn&#39;t done previously. However, those glideins are failing validation [1] so they aren&#39;t running any user jobs. I&#39;m also seeing two other potentially problematic and related lines in the stderr logs [2][3] but I don&#39;t know if these are actually causing problems.

Brendan Dennis
UCSD Factory Operations

[1]
Signature OK for client&#58;discover_CMSSW.e72gxs.sh.
cmsset_default.sh not found!&#92;n
and /cms.cern.ch/cmsset_default.sh
and /cvmfs/cms.cern.ch/cmsset_default.sh
and /cmsset_default.sh
and /lustre/work/osg_apps/cmssoft/cms/cmsset_default.sh
=== Validation error in /state/partition1/glide_Ipihij/client/discover_CMSSW.sh ===
Tue Jan 27 11&#58;02&#58;31 CST 2015 Error running &#39;/state/partition1/glide_Ipihij/client/discover_CMSSW.sh&#39;
The test script did not produce an XML file. No further information available.

[2]
setup_x509.ecacxF.sh&#58; OK
Signature OK for main&#58;setup_x509.ecacxF.sh.
WARNING - Could not find CA certificates!
Looked in&#58;
$X509_CERT_DIR ()
$HOME/.globus/certificates/ (/home/CMS/uscmspool3576/.globus/certificates/)
/etc/grid-security/certificates/        $GLOBUS_LOCATION/share/certificates/ (/usr/share/certificates/)
$X509_CADIR ()
grid-proxy-init command not found in path!
voms-proxy-init command not found in path!
Not all x509 commands found in path (2 missing)!
/state/partition1/glide_Ipihij/main/setup_x509.sh&#58; line 220&#58; grid-proxy-info&#58; command not found
/state/partition1/glide_Ipihij/main/setup_x509.sh&#58; line 224&#58; voms-proxy-info&#58; command not found
condor_startup.ecbk0Q.sh&#58; OK
Signature OK for main&#58;condor_startup.ecbk0Q.sh.
Skipping last script condor_startup.sh
<div id='show_1257308960' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1257308960'>
[3]
Tue Jan 27 11&#58;02&#58;31 CST 2015 Notifying VO of error
Removed condor variables
Advertising failure to the VO collector
/state/partition1/glide_Ipihij/main/condor_startup.sh&#58; line 291&#58; let&#58; X509_EXPIRE &#58; expression recursion level exceeded (error token is &#34;X509_EXPIRE &#34;)
max wall time, 169200
job max time, 34800
calculated retire time, 133910
/state/partition1/glide_Ipihij/main/condor_startup.sh&#58; line 385&#58; [&#58; &#58; integer expression expected
used param retire spead, 1200
Retire time set to 133910
Die time set to 168710
/state/partition1/glide_Ipihij/main/condor_startup.sh&#58; line 427&#58; let&#58; session_duration=&#58; syntax error&#58; operand expected (error token is &#34;=&#34;)
couldn&#39;t parse ClassAd in /state/partition1/glide_Ipihij/condor_config.startd.classad
Tue Jan 27 11&#58;02&#58;31 CST 2015 Sleeping 324

-- by Brendan Dennis at Tue Jan 27 18&#58;09&#58;33 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a>
</div><script type='text/javascript'>
        $('#show_1257308960').click(function() {
            $('#detail_1257308960').slideDown("normal");
            $('#show_1257308960').hide();
            $('#hide_1257308960').show();
        });
        $('#hide_1257308960').click(function() {
            $('#detail_1257308960').slideUp();
            $('#hide_1257308960').hide();
            $('#show_1257308960').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='21503#1421862863'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-21T17:54:23+00:00">Jan 21, 2015 05:54 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1421862863">&nbsp;</a></div><pre>Hi Edgar,

Do you have anything new on this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21503#1421097293'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-12T21:14:53+00:00">Jan 12, 2015 09:14 PM UTC</time><a class="anchor" name="1421097293">&nbsp;</a></div><pre>Yes, apparently there are some stale job manager processes&#58;

[root@antaeus config.d]# ps aux | grep job-manager
osg       2197  0.2  0.5 141936 44216 ?        S    Jan10  10&#58;39 globus-job-manager -conf /etc/globus/globus-gram-job-manager.conf -type sge -seg-module sge
993576    4134  0.0  3.4 661900 279608 ?       S     2014  42&#58;20 globus-job-manager -conf /etc/globus/globus-gram-job-manager.conf -type sge -seg-module sge
991340    5643  0.0  1.7 1327552 140996 ?      S     2014  17&#58;21 globus-job-manager -conf /etc/globus/globus-gram-job-manager.conf -type sge -seg-module sge
cmsprod  16136  0.0  2.6 2206964 213844 ?      S     2014  10&#58;20 globus-job-manager -conf /etc/globus/globus-gram-job-manager.conf -type sge -seg-module sge
55525    18524  0.0  0.5 423176 46856 ?        S     2014   5&#58;36 globus-job-manager -conf /etc/globus/globus-gram-job-manager.conf -type sge -seg-module sge
sbgrid   26419  0.0  0.4 218040 39924 ?        S    Jan05   2&#58;25 globus-job-manager -conf /etc/globus/globus-gram-job-manager.conf -type sge -seg-module sge
993576   27964  0.3  0.1  44256  8492 ?        S    15&#58;04   0&#58;00 /usr/bin/perl /usr/share/globus/globus-job-manager-script.pl -m sge -c interactive
osg      27971  0.0  0.0  98760  4024 ?        S    15&#58;04   0&#58;00 globus-job-manager -conf /etc/globus/globus-gram-job-manager.conf -type condor -service-tag managedfork
root     28017  0.0  0.0 103256   860 pts/1    S+   15&#58;05   0&#58;00 grep job-manager
glow     28331  0.0  0.3 120960 24492 ?        S    Jan10   1&#58;35 globus-job-manager -conf /etc/globus/globus-gram-job-manager.conf -type sge -seg-module sge

I killed the old ones with my favorite one-line script&#58;

[root@antaeus config.d]# for pid in &#96;ps -ww -C globus-job-manager -o &#34;%p&#58;%t&#58;%a&#34; |  cut -f 1,2 -d &#34;&#58;&#34; | grep &#34;&#92;-&#34; | grep -v &#34; 1&#92;-&#34; | cut -f 1 -d &#34;&#58;&#34;&#96;; do echo &#34;Killing ${pid}&#34; ; kill ${pid}; done

Resulting in&#58;

Killing 2197
Killing 4134
Killing 5643
Killing 16136
Killing 18524
Killing 26419

This resulted in one remaining&#58;

glow     28331  0.0  0.3 120960 24496 ?        S    Jan10   1&#58;35 globus-job-manager -conf /etc/globus/globus-gram-job-manager.conf -type sge -seg-module sge

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4</pre></div><div class='update_description'><i onclick="document.location='21503#1421095928'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-12T20:52:08+00:00">Jan 12, 2015 08:52 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1421095928">&nbsp;</a></div><pre>Hi Amy,

I am just checking to see if you  saw Edgar&#39;s last post.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21503#1420486069'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-05T19:27:49+00:00">Jan 5, 2015 07:27 PM UTC</time><a class="anchor" name="1420486069">&nbsp;</a></div><pre>Hi Amy,

Do you still have a stale globus-job-manager proccess&#58;

ps aux | grep job-manager

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='21503#1419032178'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-19T23:36:18+00:00">Dec 19, 2014 11:36 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1419032178">&nbsp;</a></div><pre>I will be out for two weeks. I will continue working on this when I get back on the 5th.
-Mat</pre></div><div class='update_description'><i onclick="document.location='21503#1418652672'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-15T14:11:12+00:00">Dec 15, 2014 02:11 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1418652672">&nbsp;</a></div><pre>Hello All,

Just wanted to check on the status of this ticket. Are there still stale globus-job-manager processes? Please let me know how we can help.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21503#1418174458'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-10T01:20:58+00:00">Dec 10, 2014 01:20 AM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1418174458">&nbsp;</a></div><pre>Do you still have stale globus-job-manager processes after the downgrade?</pre></div><div class='update_description'><i onclick="document.location='21503#1417477561'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-01T23:46:01+00:00">Dec 1, 2014 11:46 PM UTC</time><a class="anchor" name="1417477561">&nbsp;</a></div><pre>Looking more closely, it could be that there are no files to stage out because of problems at the beginning of the jobs. I see the following at the beginning of another jobmanager-fork test job&#58;

ts=2014-12-01T23&#58;38&#58;23.427160Z id=24629 event=gram.script.start level=DEBUG
ts=2014-12-01T23&#58;38&#58;23.427337Z id=24629 event=gram.startup_lock.start level=DEBUG path=&#34;/var/lib/globus/gram_job_state/dream0012/antaeus/condor.managedfork.41ff49ad.lock&#34;
ts=2014-12-01T23&#58;38&#58;23.427421Z id=24629 event=gram.startup_lock.end level=DEBUG path=&#34;/var/lib/globus/gram_job_state/dream0012/antaeus/condor.managedfork.41ff49ad.lock&#34; status=0
ts=2014-12-01T23&#58;38&#58;23.427871Z id=24630 event=gram.send_job.start level=DEBUG
ts=2014-12-01T23&#58;38&#58;23.428096Z id=24629 event=gram.reload_requests.start level=DEBUG
ts=2014-12-01T23&#58;38&#58;23.428179Z id=24630 event=gram.send_job.end level=WARN status=-3 errno=2 msg=&#34;Error making datagram connection to Job Manager&#34; reason=&#34;No such file or directory&#34; path=&#34;/var/lib/globus/gram_job_state/dream0012/antaeus/condor.managedfork.41ff49ad.sock&#34;
ts=2014-12-01T23&#58;38&#58;23.428276Z id=24629 event=gram.reload_requests.end level=DEBUG statedir=&#34;/var/lib/globus/gram_job_state&#34; status=0 requests=0
ts=2014-12-01T23&#58;38&#58;23.428312Z id=24629 event=gram.startup_socket_init.start level=DEBUG
ts=2014-12-01T23&#58;38&#58;23.428512Z id=24629 event=gram.startup_socket_init.end level=DEBUG status=0 path=&#34;/var/lib/globus/gram_job_state/dream0012/antaeus/condor.managedfork.41ff49ad.sock&#34;
ts=2014-12-01T23&#58;38&#58;23.678522Z id=24630 event=gram.startup_lock.start level=DEBUG path=&#34;/var/lib/globus/gram_job_state/dream0012/antaeus/condor.managedfork.41ff49ad.lock&#34;
ts=2014-12-01T23&#58;38&#58;23.678620Z id=24630 event=gram.startup_lock.end level=DEBUG status=-124 path=&#34;/var/lib/globus/gram_job_state/dream0012/antaeus/condor.managedfork.41ff49ad.lock&#34; msg=&#34;Unable to lock file, perhaps another job manager is running&#34; errno=11 reason=&#34;Resource temporarily unavailable&#34;
ts=2014-12-01T23&#58;38&#58;23.678679Z id=24630 event=gram.send_job.start level=DEBUG
ts=2014-12-01T23&#58;38&#58;23.678844Z id=24629 event=gram.new_request.start level=DEBUG fd=0
ts=2014-12-01T23&#58;38&#58;23.680966Z id=24630 event=gram.send_job.end level=DEBUG status=0
ts=2014-12-01T23&#58;38&#58;23.681126Z id=24630 event=gram.end level=DEBUG
ts=2014-12-01T23&#58;38&#58;23.690053Z id=24629 event=gram.init_scratchdir.start level=DEBUG gramid=/16434113850151398691/1679668158233662104/ base=&#34;/home/GRIDUSERS/dream0012&#34;
ts=2014-12-01T23&#58;38&#58;23.690122Z id=24629 event=gram.init_scratchdir.end level=DEBUG gramid=/16434113850151398691/1679668158233662104/ status=0 reason=&#34;scratch_dir not in RSL&#34;

I don&#39;t know if these errors and warnings are expected when the condor job manager (needed to handle managed-fork jobs?) is running at the same time as the LRM one, which in our case is jobmanager-sge.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4</pre></div><div class='update_description'><i onclick="document.location='21503#1417476076'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-01T23:21:16+00:00">Dec 1, 2014 11:21 PM UTC</time><a class="anchor" name="1417476076">&nbsp;</a></div><pre>The jobs seem to have trouble staging the output once complete, when submitted from external sites. Here is the end of an otherwise successful job when submitted to the fork job manager&#58;

ts=2014-12-01T22&#58;45&#58;52.820936Z id=18269 event=gram.script.start level=DEBUG
[...]
ts=2014-12-01T22&#58;45&#58;58.211573Z id=18269 event=gram.script_read.start level=DEBUG gramid=/16434105054354146766/6019182216223870354/ result=0 nbytes=39
ts=2014-12-01T22&#58;45&#58;58.211616Z id=18269 event=gram.script.log level=DEBUG msg=&#34;stage_out(enter)&#34;
ts=2014-12-01T22&#58;45&#58;58.213159Z id=18269 event=gram.script_read.start level=DEBUG gramid=/16434105054354146766/6019182216223870354/ result=0 nbytes=152
ts=2014-12-01T22&#58;45&#58;58.213229Z id=18269 event=gram.script.log level=DEBUG msg=&#34;Sent NFS sync for /home/GRIDUSERS/dream0012/.globus/dream0012/.globus/job/antaeus/16434105054354146766.6019182216223870354/stdout&#34;
ts=2014-12-01T22&#58;45&#58;58.214633Z id=18269 event=gram.script_read.start level=DEBUG gramid=/16434105054354146766/6019182216223870354/ result=0 nbytes=152
ts=2014-12-01T22&#58;45&#58;58.214709Z id=18269 event=gram.script.log level=DEBUG msg=&#34;Sent NFS sync for /home/GRIDUSERS/dream0012/.globus/dream0012/.globus/job/antaeus/16434105054354146766.6019182216223870354/stderr&#34;
ts=2014-12-01T22&#58;45&#58;58.214764Z id=18269 event=gram.script_read.start level=DEBUG gramid=/16434105054354146766/6019182216223870354/ result=0 nbytes=189
ts=2014-12-01T22&#58;45&#58;58.214795Z id=18269 event=gram.script.log level=DEBUG msg=&#34;Staging /home/GRIDUSERS/dream0012/.globus/dream0012/.globus/job/antaeus/16434105054354146766.6019182216223870354/stderr to <a href='https&#58;//lxplus0204.cern.ch&#58;45435/dev/stderr&#34' target='_blank' rel='nofollow'>https&#58;//lxplus0204.cern.ch&#58;45435/dev/stderr&#34</a>;
ts=2014-12-01T22&#58;45&#58;58.216491Z id=18269 event=gram.script_read.start level=DEBUG gramid=/16434105054354146766/6019182216223870354/ result=0 nbytes=152
ts=2014-12-01T22&#58;45&#58;58.216549Z id=18269 event=gram.script.log level=DEBUG msg=&#34;Sent NFS sync for /home/GRIDUSERS/dream0012/.globus/dream0012/.globus/job/antaeus/16434105054354146766.6019182216223870354/stderr&#34;
ts=2014-12-01T22&#58;45&#58;58.216610Z id=18269 event=gram.script_read.start level=DEBUG gramid=/16434105054354146766/6019182216223870354/ result=0 nbytes=613
ts=2014-12-01T22&#58;45&#58;58.216643Z id=18269 event=gram.script.log level=DEBUG msg=&#34;Staging /home/GRIDUSERS/dream0012/.globus/dream0012/.globus/job/antaeus/16434105054354146766.6019182216223870354/stderr to <a href='https&#58;//lxplus0204.cern.ch&#58;45435/dev/stderr&#34' target='_blank' rel='nofollow'>https&#58;//lxplus0204.cern.ch&#58;45435/dev/stderr&#34</a>;
ts=2014-12-01T22&#58;45&#58;58.216669Z id=18269 event=gram.script.log level=DEBUG msg=&#34;Concretely, staging /home/GRIDUSERS/dream0012/.globus/dream0012/.globus/job/antaeus/16434105054354146766.6019182216223870354/stderr to <a href='https&#58;//lxplus0204.cern.ch&#58;45435/dev/stderr&#34' target='_blank' rel='nofollow'>https&#58;//lxplus0204.cern.ch&#58;45435/dev/stderr&#34</a>;
ts=2014-12-01T22&#58;45&#58;58.216693Z id=18269 event=gram.script.log level=DEBUG msg=&#34;with command /usr/bin/globus-url-copy file&#58;///home/GRIDUSERS/dream0012/.globus/dream0012/.globus/job/antaeus/16434105054354146766.6019182216223870354/stderr <a href='https&#58;//lxplus0204.cern.ch&#58;45435/dev/stderr&#34' target='_blank' rel='nofollow'>https&#58;//lxplus0204.cern.ch&#58;45435/dev/stderr&#34</a>;
ts=2014-12-01T22&#58;47&#58;01.234279Z id=18269 event=gram.script_read.start level=DEBUG gramid=/16434105054354146766/6019182216223870354/ result=0 nbytes=56
ts=2014-12-01T22&#58;47&#58;01.234367Z id=18269 event=gram.script.log level=DEBUG msg=&#34;filestageout staging failed with &#34;
[...]
=2014-12-01T22&#58;47&#58;01.234629Z id=18269 event=gram.callback.start level=DEBUG gramid=/16434105054354146766/6019182216223870354/ state=4 restart_when_done=false
ts=2014-12-01T22&#58;47&#58;01.235396Z id=18269 event=gram.callback.end level=DEBUG gramid=/16434105054354146766/6019182216223870354/ state=4 status=0 msg=&#34;Done queuing callback messages&#34;
ts=2014-12-01T22&#58;47&#58;01.273391Z id=18269 event=gram.directory_destroy.end level=DEBUG gramid=/16434105054354146766/6019182216223870354/ path=&#34;/home/GRIDUSERS/dream0012/.globus/dream0012/.globus/job/antaeus/16434105054354146766.6019182216223870354&#34; failures=0 status=0
ts=2014-12-01T22&#58;47&#58;01.314481Z id=18269 event=gram.job.end level=ERROR gramid=/16434105054354146766/6019182216223870354/ job_status=4 status=-73 reason=&#34;the job manager failed to open stdout&#34;

A similar set of messages occur when submitting SGE job manager jobs remotely, but there follow a repeated set of lines like the last one below&#58;

[...]
ts=2014-12-01T22&#58;52&#58;22.046152Z id=19817 event=gram.job.end level=ERROR gramid=/16434106151189835646/6208792725209341586/ job_status=4 status=-73 reason=&#34;the job manager failed to open stdout&#34;
ts=2014-12-01T22&#58;52&#58;30.885746Z id=19817 event=gram.add_reference_by_jobid.end level=DEBUG jobid=&#34;2138590.0&#34; status=-156 msg=&#34;Unknown job ID&#34; reason=&#34;the job contact string does not match any which the job manager is handling&#34;
[...]

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4</pre></div><div class='update_description'><i onclick="document.location='21503#1417450538'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-01T16:15:38+00:00">Dec 1, 2014 04:15 PM UTC</time><a class="anchor" name="1417450538">&nbsp;</a></div><pre>Hi Edgar,

Sorry for my late update. The worker nodes of TTU-Antaeus have been rebuilt. But in the current OSG site metrics report there is still no active VOs. Looks like the downgrade of the globus-gram-job-manager package doesn&#39;t help. Though we can submit grid jobs from local and the local grid jobs run fine. Please advise if you have any ideas on how to debug this issue. Thanks!

Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1416506061'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-20T17:54:21+00:00">Nov 20, 2014 05:54 PM UTC</time><a class="anchor" name="1416506061">&nbsp;</a></div><pre>Hi Amy,

Could you please update on the status of this ticket?

Thanks,

Edgar
OSG Software Team

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='21503#1416238275'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-17T15:31:15+00:00">Nov 17, 2014 03:31 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1416238275">&nbsp;</a></div><pre>Hi Amy,

The other ticket is closed now, is this one good to close too or are we waiting on something else?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21503#1415389287'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-07T19:41:27+00:00">Nov 7, 2014 07:41 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1415389287">&nbsp;</a></div><pre>Amy,

Thanks for the update.  We&#39;ll check in next week.

Thanks!
Vince</pre></div><div class='update_description'><i onclick="document.location='21503#1414613027'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-29T20:03:47+00:00">Oct 29, 2014 08:03 PM UTC</time><a class="anchor" name="1414613027">&nbsp;</a></div><pre>Hi Chris,

Thank you for checking on the status and sorry for my late response. I just sent an update to Luis in another open ticket <a href='https&#58;//ticket.grid.iu.edu/22615.' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/22615.</a>

Our OSG gatekeeper &#34;antaeus&#34; is up now and the package globus-gram-job-manager has been downgraded, but all the worker nodes have been rebuilt during the storage upgrade and they haven&#39;t been setup as worker nodes yet, so now I cannot start a test here. I&#39;m going to setup the nodes as worker nodes then will do a test on it to see if the downgrade would make a difference.

Thanks,
Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1414428717'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-27T16:51:57+00:00">Oct 27, 2014 04:51 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1414428717">&nbsp;</a></div><pre>Hello Amy,

Please update Luis on the current status when you get the chance.

Thanks,

Chris</pre></div><div class='update_description'><i onclick="document.location='21503#1413574935'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-17T19:42:15+00:00">Oct 17, 2014 07:42 PM UTC</time><a class="anchor" name="1413574935">&nbsp;</a></div><pre>Hi Chris,

We are still busy on upgrading our storage, all the systems are not back online at this moment. I&#39;ll get back to you next week for a further update. Thanks.

Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1413569514'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-17T18:11:54+00:00">Oct 17, 2014 06:11 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1413569514">&nbsp;</a></div><pre>Hi Amy,

Do you have an update on this ?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21503#1412360976'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-03T18:29:36+00:00">Oct 3, 2014 06:29 PM UTC</time><a class="anchor" name="1412360976">&nbsp;</a></div><pre>Hi Edgar,

Thank you for checking with me, and thank Mat for the suggestion. I haven&#39;t tried yet. Antaeus has been shut down for the data migration between the old and new storage systems. I won&#39;t be able to do the downgrade on Antaeus until the system comes back online on Oct. 16th. I&#39;ll keep you updated.

Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1412357761'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-03T17:36:01+00:00">Oct 3, 2014 05:36 PM UTC</time><a class="anchor" name="1412357761">&nbsp;</a></div><pre>Hi Amy,

Have you had the chance to downgrade your globus-gram-job-manager?

Cheers,

Edgar
OSG SOftware

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='21503#1412202609'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-01T22:30:09+00:00">Oct 1, 2014 10:30 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1412202609">&nbsp;</a></div><pre>Hi Amy,
Just noticed that your version of globus-gram-job-manager is the EPEL version, not the OSG version.
The EPEL version is 13.53-2.el6; the OSG version is 13.53-1.3.osg32.el6.
Since the EPEL version is higher, you should run &#34;yum downgrade globus-gram-job-manager-13.53-1.3.osg32.el6&#34; to get the OSG version.
-Mat</pre></div><div class='update_description'><i onclick="document.location='21503#1412095430'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-30T16:43:50+00:00">Sep 30, 2014 04:43 PM UTC</time><a class="anchor" name="1412095430">&nbsp;</a></div><pre>Hi Matt,

You got any news here?

Edgar
OSG Software

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='21503#1411674884'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-25T19:54:44+00:00">Sep 25, 2014 07:54 PM UTC</time><a class="anchor" name="1411674884">&nbsp;</a></div><pre>Hi Mat,

It looks like a firewall issue but it&#39;s actually not, because if we manually clean up the temporary job state files in /var/lib/globus/gram_job_state/ then those hanging jobs can start to run, we have done that for a couple of times.

Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1411674501'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-25T19:48:21+00:00">Sep 25, 2014 07:48 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1411674501">&nbsp;</a></div><pre>That comment definitely makes me suspect a firewall issue. Let me see if I can find a good way to diagnose...
-Mat</pre></div><div class='update_description'><i onclick="document.location='21503#1411416963'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-22T20:16:03+00:00">Sep 22, 2014 08:16 PM UTC</time><a class="anchor" name="1411416963">&nbsp;</a></div><pre>Yes, still broken. Looks like all of them are hanging, but this only happens to jobs submitted from outside, not for local jobs.

Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1411416741'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-22T20:12:21+00:00">Sep 22, 2014 08:12 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1411416741">&nbsp;</a></div><pre>Previous status as in still broken?

Also, just to be sure, is it only SGE job managers that are hanging or are Condor jobmanagers hanging too?

-Mat</pre></div><div class='update_description'><i onclick="document.location='21503#1411415880'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-22T19:58:00+00:00">Sep 22, 2014 07:58 PM UTC</time><a class="anchor" name="1411415880">&nbsp;</a></div><pre>Hi Mat,

During the two hours after the change has been made, there was no jobs running, then I did a reboot on the server, after the reboot, only one user&#39;s jobs got to run but finished quickly then everything went back to the previous status.

qname        grid-serial
hostname     compute-33-13.local
group        uscms
owner        uscmspool1340
project      hrothgar
department   defaultdepartment
jobname      scheduler_sge_job_script
jobnumber    2066185
taskid       undefined
account      sge
priority     0
qsub_time    Mon Sep 22 13&#58;34&#58;01 2014
start_time   Mon Sep 22 13&#58;34&#58;34 2014
end_time     Mon Sep 22 13&#58;35&#58;38 2014
granted_pe   NONE
slots        1
failed       0
exit_status  0
ru_wallclock 64
ru_utime     0.737
ru_stime     1.047
...

Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1411403663'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-22T16:34:23+00:00">Sep 22, 2014 04:34 PM UTC</time><a class="anchor" name="1411403663">&nbsp;</a></div><pre>Thank you Mat! I just did what you suggested. I&#39;ll let you know if that helps.

Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1411403323'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-22T16:28:43+00:00">Sep 22, 2014 04:28 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1411403323">&nbsp;</a></div><pre>You should also restart your gatekeeper after running osg-configure.</pre></div><div class='update_description'><i onclick="document.location='21503#1411402860'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-22T16:21:00+00:00">Sep 22, 2014 04:21 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1411402860">&nbsp;</a></div><pre>Hi Amy,

Could you edit /etc/osg/config.d/40-network.ini and change the following settings&#58;

port_range=40000,55000
source_range=40000,55000

and rerun osg-configure?

(It looks like that&#39;s what you want based on the GLOBUS_TCP_PORT_RANGE and GLOBUS_TCP_SOURCE_RANGE settings you have later in the file).
osg-configure does not actually look at GLOBUS_TCP_PORT_RANGE or GLOBUS_TCP_SOURCE_RANGE; those environment variables are set by the port_range and source_range options I mentioned above.

Let me know if that helps.
-Mat</pre></div><div class='update_description'><i onclick="document.location='21503#1411397560'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-22T14:52:40+00:00">Sep 22, 2014 02:52 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1411397560">&nbsp;</a></div><pre>Hi Mat,

Just checking back with you for any new information. If you don&#39;t have anything new could you advise when it would be good to check back with you?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21503#1411088091'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-19T00:54:51+00:00">Sep 19, 2014 12:54 AM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1411088091">&nbsp;</a></div><pre>Sorry, still debugging.
-Mat</pre></div><div class='update_description'><i onclick="document.location='21503#1411066998'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-18T19:03:18+00:00">Sep 18, 2014 07:03 PM UTC</time> by <b>echism</b><a class="anchor" name="1411066998">&nbsp;</a></div><pre>Is there anything new on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='21503#1410850955'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-16T07:02:35+00:00">Sep 16, 2014 07:02 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1410850955">&nbsp;</a></div><pre>Re-assigning the ticket back to OSG(Prod) SU in GGUS, as it was still assigned to WLCG SAM, but I think there is no longer any issue to resolve on our side.

Marian

-- by Marian  Babik at Tue Sep 16 07&#58;01&#58;30 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1410805259'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-15T18:20:59+00:00">Sep 15, 2014 06:20 PM UTC</time> by <b>echism</b><a class="anchor" name="1410805259">&nbsp;</a></div><pre>Hey Mat,

I&#39;ll be on this ticket this week. Please send an update when one becomes available.

Thank you</pre></div><div class='update_description'><i onclick="document.location='21503#1410552582'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-12T20:09:42+00:00">Sep 12, 2014 08:09 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1410552582">&nbsp;</a></div><pre>Adding Elizabeth to this for monitoring as I am out on PTO next week.</pre></div><div class='update_description'><i onclick="document.location='21503#1410533093'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-12T14:44:53+00:00">Sep 12, 2014 02:44 PM UTC</time><a class="anchor" name="1410533093">&nbsp;</a></div><pre>Hi Mat,

Thanks a lot for the very detailed instruction! Attached please find the two stack track files.

Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1410476299'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-11T22:58:19+00:00">Sep 11, 2014 10:58 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1410476299">&nbsp;</a></div><pre>Hi Amy,

What I meant was that if solve the &#34;hanging globus-job-manager processes&#34; issue, the lockfile problem should go away as well. To do that, we need to figure out where the globus-job-manager is hanging -- a full stack trace on one of the hung processes should help.

Can you do the following&#58;
1. If necessary, install gdb with &#34;yum install gdb&#34;
2. Install the debug symbols for the globus packages and dependencies with &#34;debuginfo-install --enablerepo=osg-debug globus-&#92;*&#34;
3. Find a globus-job-manager process that you can tell is not going to complete -- one that has been running for days, for example. Make note of the PID.
4. Get a core file by running &#34;gcore $PID&#34; (replace $PID with the PID from the previous step). Make note of the core file name.
5. Get a stack trace by running &#34;gdb -batch --core=$COREFILE /usr/sbin/globus-job-manager -ex &#39;thread apply all backtrace full&#39; &#62; full-backtrace.txt&#34; (replace $COREFILE with the core file name from the previous step).
6. Blank out any sensitive information in full-backtrace.txt (there shouldn&#39;t be any since the auth was taken care of in the gatekeeper, but you might want to check anyway).
7. Attach full-backtrace.txt.

Hopefully that should give some clue as to what&#39;s going wrong.

-Mat</pre></div><div class='update_description'><i onclick="document.location='21503#1410471525'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-11T21:38:45+00:00">Sep 11, 2014 09:38 PM UTC</time><a class="anchor" name="1410471525">&nbsp;</a></div><pre>Hi Mat,

Thanks for looking into this issue. We&#39;ve tried to kill the globus-job-manager processes and cleaned up the lock and other temporary job files manually, but that can only get an user&#39;s job to start running once, the jobs submitted after the first round will keep pending with the file locking issue since the temporary job files were not cleaned up automatically when the first round job finished.

The CE is not dependent on the osg-cleanup script as the osg-cleanup script doesn&#39;t work no matter what value is set for &#34;cleanup_age_in_days&#34;.

Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1410468404'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-11T20:46:44+00:00">Sep 11, 2014 08:46 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1410468404">&nbsp;</a></div><pre>Hi Amy,

I see a lot of complaints from gram about not being able to lock files. You should check for and kill hung globus-job-manager processes -- new processes can&#39;t grab those locks if the old processes are still running. If you see globus-job-manager processes regularly getting hung, that is a separate investigation.

Also, you should raise the osg-cleanup age back to 14 so state files that _are_ still in use don&#39;t get blown away, breaking running jobs. The system should not be dependent on osg-cleanup to keep functioning -- it&#39;s only there to keep the file system from getting cluttered up.

-Mat</pre></div><div class='update_description'><i onclick="document.location='21503#1410445782'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-11T14:29:42+00:00">Sep 11, 2014 02:29 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1410445782">&nbsp;</a></div><pre>-- by Hassen.Riahi@.... at Wed Sep 10 15&#58;37&#58;33 UTC 2014

The issue mentioned in comment 28 is not there anymore.

Putting it back in the SAM SU (although this might be CMS specific).

-- by pablo.saiz at Wed Sep 10 14&#58;38&#58;58 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1410210516'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-08T21:08:36+00:00">Sep 8, 2014 09:08 PM UTC</time><a class="anchor" name="1410210516">&nbsp;</a></div><pre>Hi Mat,

Attached please find the updated system profile marked with 09082014 and the gatekeeper and gram log files. The disk isn&#39;t full on the CE. If you need other information, please let me know. Thanks for the help!

Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1410202452'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-08T18:54:12+00:00">Sep 8, 2014 06:54 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1410202452">&nbsp;</a></div><pre>﻿I am out of the office until Monday, Sep. 15, 2014, and may not be able to respond immediately to the majority of my e-mail until then.  If you need to reach me, please leave a message on my office phone line at 806-834-5940. I will be checking messages periodically.</pre></div><div class='update_description'><i onclick="document.location='21503#1410202195'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-08T18:49:55+00:00">Sep 8, 2014 06:49 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1410202195">&nbsp;</a></div><pre>We&#39;re still trying to debug this. Amy, since you&#39;ve made some recent updates, can you attach a new profiler output and more recent gatekeeper and gram logs? Stale GRAM state files should not be preventing new jobs from running unless the files are corrupt (or the disk is full). Perhaps an &#39;ls -lR /var/lib/globus&#39; might help as well.
-Mat</pre></div><div class='update_description'><i onclick="document.location='21503#1409946075'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-05T19:41:15+00:00">Sep 5, 2014 07:41 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1409946075">&nbsp;</a></div><pre>Hello Software Team,

Could you please review this ASAP and provide an update?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21503#1409930200'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-05T15:16:40+00:00">Sep 5, 2014 03:16 PM UTC</time><a class="anchor" name="1409930200">&nbsp;</a></div><pre>Further update&#58; Amy has gone through and updated all OSG components to the latest versions, including glexec etc. on the worker nodes. We still see the same issue&#58; from her report&#58; &#34;The temporary job state files in /var/lib/globus/gram_job_state that are supposed to be removed after a job finishes are still there, that is, the osg clean up script doesn&#39;t work or globus-gram-job-manager doesn&#39;t work properly.&#34;

This is a critical issue for us as CMS jobs, SAM motioning etc. are all not working and physics analyses are being held up for data sets that are only hosted at TTU. Can we please ask for some help resolving this issue?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4</pre></div><div class='update_description'><i onclick="document.location='21503#1409848513'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-04T16:35:13+00:00">Sep 4, 2014 04:35 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1409848513">&nbsp;</a></div><pre>Note we have not been able to make progress against this issue for at least a month. Amy’s attempts at updating to the latest available rpms have not helped, and in fact, our OSG gatekeeper is presently not operational at all. (Prior to the most recent updates, at least it worked, but had the odd characteristic that temporary files had to be cleared off manually and were not removed upon completion of jobs, apparently.)

At this point it is a crucial problem as our CMS users are trying to run CRAB jobs for an important analysis, and we are completely stuck.

Can we ask please for a conference call between Amy, Suchandra, and anyone else who may be needed to resolve this problem?

Thanks,
Alan</pre></div><div class='update_description'><i onclick="document.location='21503#1409761687'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-03T16:28:07+00:00">Sep 3, 2014 04:28 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1409761687">&nbsp;</a></div><pre>Hi Suchandra,

I&#39;m just checking in to see if you have any news on this issue. Let me know if I can be of any assistance.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21503#1409326483'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-29T15:34:43+00:00">Aug 29, 2014 03:34 PM UTC</time><a class="anchor" name="1409326483">&nbsp;</a></div><pre>Hi Suchandra,

Yes, we can submit jobs directly from the CE through SGE, we can also submit jobs with grid credentials from the CE through jobmanager-sge. Attached please find the system profile for the CE. Thanks.

Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1409255902'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T19:58:22+00:00">Aug 28, 2014 07:58 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1409255902">&nbsp;</a></div><pre>Hi,

Can you run osg-system-profiler on the system and attach the output to this ticket?  Also, can you submit jobs directly to SGE from the CE using qsub (or the SGE equivalent)?

Suchandra Thapa</pre></div><div class='update_description'><i onclick="document.location='21503#1409062816'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-26T14:20:16+00:00">Aug 26, 2014 02:20 PM UTC</time><a class="anchor" name="1409062816">&nbsp;</a></div><pre>Hi Mat,

Thank you. The filesystem is mounted with the &#34;defaults&#34; option on CentOS 6.2, its type is ext4. The default mount options are &#34;user_xattr&#34; and &#34;acl&#34;. It&#39;s confusing that we have used the same default options before the upgrade on our CE but we didn&#39;t see this issue. Also, the installed kernel version is 2.6.32-431, it&#39;s newer than the version 2.6.30 which has &#34;relatime&#34; as the default option.

Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1409006770'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-25T22:46:10+00:00">Aug 25, 2014 10:46 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1409006770">&nbsp;</a></div><pre>I&#39;m not sure where in this long thread this happened, but for the past coupel of weeks at least, no grid jobs at all have successfully run at our site, I beleive.

I tried a simple globus-job-run submission on my own, which just hung and didn&#39;t run, and looked in the system /var/log/messages file. I see things that make me think something is deeply wrong, since we are getting dropped messages from some process and since nothing seems to actually make it to the batch system&#58;

Aug 25 17&#58;09&#58;21 antaeus rsyslogd-2177&#58; imuxsock lost 240 messages from pid 18178 due to rate-limiting
Aug 25 17&#58;09&#58;21 antaeus GRAM-gatekeeper[18178]&#58; Got connection &#58;&#58;ffff&#58;129.118.104.6 at Mon Aug 25 17&#58;09&#58;21 2014
Aug 25 17&#58;09&#58;21 antaeus GRAM-gatekeeper[18178]&#58; Authenticated globus user&#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4
Aug 25 17&#58;09&#58;21 antaeus rsyslogd-2177&#58; imuxsock begins to drop messages from pid 18178 due to rate-limiting
Aug 25 17&#58;09&#58;22 antaeus rsyslogd-2177&#58; imuxsock lost 240 messages from pid 18179 due to rate-limiting
Aug 25 17&#58;09&#58;22 antaeus gridinfo[18179]&#58; JMA 2014/08/25 17&#58;09&#58;22 GATEKEEPER_JM_ID 2014-08-25.22&#58;09&#58;21.0000018178.0000000000 for /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4 on &#58;&#58;ffff&#58;129.118.104.6
Aug 25 17&#58;09&#58;22 antaeus gridinfo[18179]&#58; JMA 2014/08/25 17&#58;09&#58;22 GATEKEEPER_JM_ID 2014-08-25.22&#58;09&#58;21.0000018178.0000000000 mapped to asill (23730, 101)
Aug 25 17&#58;09&#58;22 antaeus gridinfo[18179]&#58; JMA 2014/08/25 17&#58;09&#58;22 GATEKEEPER_JM_ID 2014-08-25.22&#58;09&#58;21.0000018178.0000000000 has GRAM_SCRIPT_JOB_ID 2024353.0 manager type sge
Aug 25 17&#58;09&#58;35 antaeus rsyslogd-2177&#58; imuxsock lost 245 messages from pid 18215 due to rate-limiting

When I do a similar globus-job-run without specifying the jobmanager-sge, the job does run on the head node as expected, so it is something wrong with how the connections are being made to the batch system.

Amy, I think you reinstalled the whole gatekeeper CE software stack, right? Are we sure that it is seeing the SGE log file area needed to manage jobs for the batch system?

Alan</pre></div><div class='update_description'><i onclick="document.location='21503#1409004251'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-25T22:04:11+00:00">Aug 25, 2014 10:04 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1409004251">&nbsp;</a></div><pre>Hi Amy,
What are your mount options on the filesystem /var/lib/globus/gram_job_state is on?
osg-cleanup looks at the atime (last access time) of each file before removing it. The atime is typically updated when the file is read from. However, if the file system is mounted with relatime, then the atime of a file is not updated more than every 24 hours (unless the file is written to). This means that setting the removal frequency to 1 day or less will cause files to be removed if they are being regularly read from but not written to.
&#39;relatime&#39; is the default for Linux kernel versions 2.6.30 or newer (which means RHEL 6). Unless there is a reason why that is not possible, I suggest not setting the OSG_CLEANUP_AGE to be less than 2.
-Mat</pre></div><div class='update_description'><i onclick="document.location='21503#1408993854'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-25T19:10:54+00:00">Aug 25, 2014 07:10 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1408993854">&nbsp;</a></div><pre>Hello Mat,

Do you have an update on this ticket? Please let me know if I can help.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21503#1408722482'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-22T15:48:02+00:00">Aug 22, 2014 03:48 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1408722482">&nbsp;</a></div><pre>Setting this for Monday to ping Mat.</pre></div><div class='update_description'><i onclick="document.location='21503#1408475641'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-19T19:14:01+00:00">Aug 19, 2014 07:14 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1408475641">&nbsp;</a></div><pre>Hello Mat,

Could you please update this ticket as soon as you have had the chance to review it?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21503#1408392482'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-18T20:08:02+00:00">Aug 18, 2014 08:08 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1408392482">&nbsp;</a></div><pre>Looking at the last update I think Edgar meant to assign Mat to this ticket. I have done that now.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21503#1407776726'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-11T17:05:26+00:00">Aug 11, 2014 05:05 PM UTC</time><a class="anchor" name="1407776726">&nbsp;</a></div><pre>Hi Mat,

Can you please give a look at this. Specially this from Amy&#58;

&#34;Actually we have the osg cleanup script installed on Antaeus, but it only cleans up the files older than 14 days in /var/lib/globus/gram_job_state/&#60;yserbane&#62;/&#60;hostname&#62;/.  Even the default 14 days can be changed, the cleanup script has a LIMITATION that it doesn&#39;t detect whether or not the temporary files it cleans up are in use. On Antaeus, some of the temporary files were created one or two days ago, they were not cleaned up by the default, if we change the default 14 days to 1 day those files can be cleaned up however it creates another issue that the temporary files used by running jobs (older than 1 day) get removed too! Then we get stuck there.&#34;

It looks there might be something to be addressed there,

Edgar
OSG Software Team,

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='21503#1407255981'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-05T16:26:21+00:00">Aug 5, 2014 04:26 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1407255981">&nbsp;</a></div><pre>This ticket is not waiting for submitter input. Hence changing the ticket status to in progress.
Guenter
GGUS ticket monitoring

-- by Guenter Grein at Tue Aug 05 09&#58;12&#58;35 UTC 2014

Sent notification on this ticket still waiting for user input to GGUS ticket monitoring team.

-- by SYSTEM at Tue Aug 05 08&#58;55&#58;51 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1407255917'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-05T16:25:17+00:00">Aug 5, 2014 04:25 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1407255917">&nbsp;</a></div><pre>Jeff,

Sorry for the delay. I have added the software team to review.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21503#1406830752'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-31T18:19:12+00:00">Jul 31, 2014 06:19 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406830752">&nbsp;</a></div><pre>Chris,

Can you please add OSG Software support? Amy&#39;s question looks more suitable for the software experts.

Thanks,
Jeff

-- by Jeffrey Dost at Thu Jul 31 00&#58;05&#58;39 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1406738258'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-30T16:37:38+00:00">Jul 30, 2014 04:37 PM UTC</time><a class="anchor" name="1406738258">&nbsp;</a></div><pre>Hi Dan,

You got the errors because the state files of your jobs got removed while we were trying to fix an issue on our newly upgraded CE. The issue is that the temporary files (including the lock files, state files) in /var/lib/globus/gram_job_state/&#60;yserbane&#62;/&#60;hostname&#62;/ didn&#39;t get cleaned up properly when the jobs finish. We think this is why the non-local grid jobs get held because right after we manually removed those temporary files the non-local grid jobs started running on the worker nodes. The odd thing is, this only happens to non-local grid jobs, not to the grid jobs submitted from the local site.

Actually we have the osg cleanup script installed on Antaeus, but it only cleans up the files older than 14 days in /var/lib/globus/gram_job_state/&#60;yserbane&#62;/&#60;hostname&#62;/.  Even the default 14 days can be changed, the cleanup script has a LIMITATION that it doesn&#39;t detect whether or not the temporary files it cleans up are in use. On Antaeus, some of the temporary files were created one or two days ago, they were not cleaned up by the default, if we change the default 14 days to 1 day those files can be cleaned up however it creates another issue that the temporary files used by running jobs (older than 1 day) get removed too! Then we get stuck there.

Any suggestions would be appreciated!

Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1406735830'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-30T15:57:10+00:00">Jul 30, 2014 03:57 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406735830">&nbsp;</a></div><pre>Hi all,

Unfortunately, glideins continue to have problems at this site. Currently, all of our glideins are held with the following two error messages&#58;

Globus error 79&#58; connecting to the job manager failed.  Possible reasons&#58; job terminated, invalid job contact, network problems, ...
Globus error 121&#58; the job state file doesn&#39;t exist

This seems to agree with the problems Chris reported. Is there any other info we can report that might be helpful?

Thanks,
Dan

-- by Daniel Klein at Tue Jul 29 17&#58;47&#58;26 UTC 2014

Sent 2nd reminder to ticket submitter (luis.linares@....) requesting input.

-- by SYSTEM at Tue Jul 29 08&#58;27&#58;57 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1406575860'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-28T19:31:00+00:00">Jul 28, 2014 07:31 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406575860">&nbsp;</a></div><pre>Hi,
another attempt failed after some 24 minutes&#58;

======================= glite-wms-job-status Success =====================
BOOKKEEPING INFORMATION&#58;

Status info for the Job &#58; <a href='https&#58;//wms306.cern.ch&#58;9000/aLEvnSE-bj5MlAj6iF_LrA' target='_blank' rel='nofollow'>https&#58;//wms306.cern.ch&#58;9000/aLEvnSE-bj5MlAj6iF_LrA</a>
Current Status&#58;     Aborted
Logged Reason(s)&#58;
- Got a job held event, reason&#58; Globus error 79&#58; connecting to the job manager failed.
Possible reasons&#58; job terminated, invalid job contact, network problems, ...
- Got a job held event, reason&#58; Globus error 79&#58; connecting to the job manager failed.
Possible reasons&#58; job terminated, invalid job contact, network problems, ...
Status Reason&#58;      Removal retries exceeded.
Destination&#58;        antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-grid-serial
Submitted&#58;          Sun Jul 27 21&#58;59&#58;14 2014 CEST
==========================================================================

-- by Maarten Litmaath at Sun Jul 27 20&#58;47&#58;31 UTC 2014

Hi,
as far as the WMS was concerned, my 2 test jobs were still
waiting in the queue while their 24h proxies expired...

-- by Maarten Litmaath at Sun Jul 27 19&#58;57&#58;43 UTC 2014

Hi Amy,

I&#39;ve cleared the factory queues of all glideins, so that fresh glideins will be submitted in due course. After the weekend, we can report back on the general health of the glideins at your site.

I also submitted some short-running test jobs, but those have been queued for the last ~30 minutes. If I get any new information today, I&#39;ll post here.

Best,
Dan

<div id='show_789178391' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_789178391'>-- by Daniel Klein at Fri Jul 25 23&#58;03&#58;27 UTC 2014

Hi all,
I have submitted a simple &#34;ops&#34; job, still queued as I write this&#58;

======================= glite-wms-job-status Success =====================
BOOKKEEPING INFORMATION&#58;

Status info for the Job &#58; <a href='https&#58;//wms306.cern.ch&#58;9000/Lb6Q7IpoKAvBWrgoiOr1UA' target='_blank' rel='nofollow'>https&#58;//wms306.cern.ch&#58;9000/Lb6Q7IpoKAvBWrgoiOr1UA</a>
Current Status&#58;     Scheduled
Status Reason&#58;      Job successfully submitted to Globus
Destination&#58;        antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-grid-serial
Submitted&#58;          Sat Jul 26 00&#58;38&#58;34 2014 CEST
==========================================================================

-- by Maarten Litmaath at Fri Jul 25 22&#58;43&#58;11 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a>
</div><script type='text/javascript'>
        $('#show_789178391').click(function() {
            $('#detail_789178391').slideDown("normal");
            $('#show_789178391').hide();
            $('#hide_789178391').show();
        });
        $('#hide_789178391').click(function() {
            $('#detail_789178391').slideUp();
            $('#hide_789178391').hide();
            $('#show_789178391').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='21503#1406575846'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-28T19:30:46+00:00">Jul 28, 2014 07:30 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1406575846">&nbsp;</a></div><pre>2014-07-25 	22&#58;43 	Public Diary&#58;
Hi all,
I have submitted a simple &#34;ops&#34; job, still queued as I write this&#58;

======================= glite-wms-job-status Success =====================
BOOKKEEPING INFORMATION&#58;

Status info for the Job &#58; <a href='https&#58;//wms306.cern.ch&#58;9000/Lb6Q7IpoKAvBWrgoiOr1UA' target='_blank' rel='nofollow'>https&#58;//wms306.cern.ch&#58;9000/Lb6Q7IpoKAvBWrgoiOr1UA</a>
Current Status&#58; Scheduled
Status Reason&#58; Job successfully submitted to Globus
Destination&#58; antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-grid-serial
Submitted&#58; Sat Jul 26 00&#58;38&#58;34 2014 CEST
==========================================================================
2014-07-25 	23&#58;03 	Public Diary&#58;
Hi Amy,

I&#39;ve cleared the factory queues of all glideins, so that fresh glideins will be submitted in due course. After the weekend, we can report back on the general health of the glideins at your site.

I also submitted some short-running test jobs, but those have been queued for the last ~30 minutes. If I get any new information today, I&#39;ll post here.

Best,
Dan
2014-07-27 	19&#58;57 	Public Diary&#58;
Hi,
as far as the WMS was concerned, my 2 test jobs were still
waiting in the queue while their 24h proxies expired...
2014-07-27 	20&#58;47 	Public Diary&#58;
Hi,
another attempt failed after some 24 minutes&#58;

======================= glite-wms-job-status Success =====================
BOOKKEEPING INFORMATION&#58;

Status info for the Job &#58; <a href='https&#58;//wms306.cern.ch&#58;9000/aLEvnSE-bj5MlAj6iF_LrA' target='_blank' rel='nofollow'>https&#58;//wms306.cern.ch&#58;9000/aLEvnSE-bj5MlAj6iF_LrA</a>
Current Status&#58; Aborted
<div id='show_1343325731' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1343325731'>Logged Reason(s)&#58;
- Got a job held event, reason&#58; Globus error 79&#58; connecting to the job manager failed.
Possible reasons&#58; job terminated, invalid job contact, network problems, ...
- Got a job held event, reason&#58; Globus error 79&#58; connecting to the job manager failed.
Possible reasons&#58; job terminated, invalid job contact, network problems, ...
Status Reason&#58; Removal retries exceeded.
Destination&#58; antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-grid-serial
Submitted&#58; Sun Jul 27 21&#58;59&#58;14 2014 CEST
==========================================================================
</div><script type='text/javascript'>
        $('#show_1343325731').click(function() {
            $('#detail_1343325731').slideDown("normal");
            $('#show_1343325731').hide();
            $('#hide_1343325731').show();
        });
        $('#hide_1343325731').click(function() {
            $('#detail_1343325731').slideUp();
            $('#hide_1343325731').hide();
            $('#show_1343325731').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='21503#1406325637'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-25T22:00:37+00:00">Jul 25, 2014 10:00 PM UTC</time><a class="anchor" name="1406325637">&nbsp;</a></div><pre>The upgrade is completed on TTU-ANTAEUS. Could one of you submit a test job from outside of our local network?

Thanks,
Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1406317913'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-25T19:51:53+00:00">Jul 25, 2014 07:51 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1406317913">&nbsp;</a></div><pre>Thanks for the update, Amy. Please let us know when the upgrade has been completed.

Maarten and Luis, if you could confirm the issue is resolved once the upgrade has been completed, I would appreciate it.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21503#1406124131'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-23T14:02:11+00:00">Jul 23, 2014 02:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406124131">&nbsp;</a></div><pre>Sent 1st reminder to ticket submitter (luis.linares@....) requesting input.

-- by SYSTEM at Tue Jul 22 07&#58;47&#58;06 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1406124057'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-23T14:00:57+00:00">Jul 23, 2014 02:00 PM UTC</time><a class="anchor" name="1406124057">&nbsp;</a></div><pre>Hi Maarten,

Thanks for your reply. We just started to rebuild our CE with the latest release of OSG software. Hope the problem will be gone when the upgraded CE is ready.

Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1405697408'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-18T15:30:08+00:00">Jul 18, 2014 03:30 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405697408">&nbsp;</a></div><pre>Hi Amy,
look at this snippet I sent earlier&#58;

GlobusScheduler = &#34;antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge&#34;;
GlobusRSL = &#34;(queue=grid-serial)(jobtype=single)[...]&#34;

That is how Condor-G (!) on the WMS approached your CE;
AFAIK this works fine for all other OSG CEs tested by SAM.
An OSG expert will need to help you sort out what is wrong...

-- by Maarten Litmaath at Wed Jul 16 15&#58;03&#58;30 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1405522154'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-16T14:49:14+00:00">Jul 16, 2014 02:49 PM UTC</time><a class="anchor" name="1405522154">&nbsp;</a></div><pre>Hi Maarten,

Your jobs didn&#39;t run. In the log file, there are these messages &#34;ts=2014-07-16T08&#58;30&#58;19.124498Z id=29582 event=gram.add_reference_by_jobid.end level=DEBUG jobid=&#34;1950905.0&#34; status=-156 msg=&#34;Unknown job ID&#34; reason=&#34;the job contact string does not match any which the job manager is handling&#34;. I think the cause is that in your job submission the job manager was specified as &#34;jobmanager-sge-grid-serial&#34;, not &#34;jobmanager-sge&#34;.

Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1405520154'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-16T14:15:54+00:00">Jul 16, 2014 02:15 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405520154">&nbsp;</a></div><pre>Hi Amy,
can you check what is happening with my jobs?

-- by Maarten Litmaath at Tue Jul 15 22&#58;04&#58;40 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1405520134'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-16T14:15:34+00:00">Jul 16, 2014 02:15 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1405520134">&nbsp;</a></div><pre>Latest updates from the GGUS ticket

2014-07-14 	17&#58;34 	Public Diary&#58;
We investigated further and found that the SAM tests were being submitted to an invalid queue for grid jobs.

We adjusted the list of advertised queues in GIP accordingly, and now only the available queues that are valid for grid jobs are being advertised.

On the next run of the SAM tests, we again got an error as follows. The SAM jobs are being submitted to a valid queue, but oddly the queue is appended to the job manager&#58;

Status info for the Job &#58; <a href='https&#58;//wms305.cern.ch&#58;9000/W_GHUeNytYK3nwO1AUcCrA' target='_blank' rel='nofollow'>https&#58;//wms305.cern.ch&#58;9000/W_GHUeNytYK3nwO1AUcCrA</a>
Current Status&#58; Aborted
Logged Reason(s)&#58;
- Got a job held event, reason&#58; Globus error 79&#58; connecting to the job manager failed. Possible reasons&#58; job terminated, invalid job contact, network problems, ...
- Got a job held event, reason&#58; Globus error 79&#58; connecting to the job manager failed. Possible reasons&#58; job terminated, invalid job contact, network problems, ...
Status Reason&#58; Removal retries exceeded.
Destination&#58; antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-grid-serial

There is no &#34;jobmanager-sge-grid-serial&#34; - instead the job manager is just &#34;jobmanager-sge&#34; for our resource and the &#34;grid-serial&#34; queue is just a queue in the system.

Question&#58; Why does the SAM job specify the job manager as a string that includes the queue name? Is there something we need to do to support this style of submission, and if so, why is this not part of the OSG configuration by default?

Please advise.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4
2014-07-14 	17&#58;42 	waiting for reply (WLCG Infrastructure Monitoring)

Public Diary&#58;
Hi Alan,
the WMS presents the destination in the format that _it_ supports
for WMS clients; it knows how to deal with the subcomponents.

Please look into the error. Possible cause are listed here&#58;

<a href='https&#58;//wiki.egi.eu/wiki/Tools/Manuals/TS71' target='_blank' rel='nofollow'>https&#58;//wiki.egi.eu/wiki/Tools/Manuals/TS71</a>
2014-07-15 	20&#58;43 	Public Diary&#58;
<div id='show_2023351252' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2023351252'>Dear OSG support,

We have carefully set the GIP configuration options for our cluster to match our available queues so that only these will be advertised.

This seems to work, but somehow the contact string being advertised for our CE includes the queue name for each available queue as a result. This is not what we want, I think - unless some other OSG setup step has not been done that would allow the cluster to respond to job submissions to that contact string.

Here is an example&#58;

TTU-ANTAEUS antaeus.hpcc.ttu.edu&#60;<a href='http&#58;//antaeus.hpcc.ttu.edu&#62' target='_blank' rel='nofollow'>http&#58;//antaeus.hpcc.ttu.edu&#62</a>; grid-priority 0 0 456 1000455 456 9999999 9999999 3600 3600 sge

Information
Data Directory /lustre/hep/osg
Application Directory /lustre/work/osg_apps
GRAM Version 5.0
LRMS Version GE 6.2u5
Gate Keeper Port 2119
Contact String antaeus.hpcc.ttu.edu/jobmanager-sge-grid-priority&#60;<a href='http&#58;//antaeus.hpcc.ttu.edu/jobmanager-sge-grid-priority&#62' target='_blank' rel='nofollow'>http&#58;//antaeus.hpcc.ttu.edu/jobmanager-sge-grid-priority&#62</a>;
Hosting Cluster antaeus.hpcc.ttu.edu
Glue Capability CPUScalingReferenceSI00=2000, glexec

Policy/State
Max Running Jobs 456
Assigned Job Slots 0
Max CPU Time 9999999
Max Wall Clock Time 9999999
Preemption 0
Max Slots Per Jobs 1
Total Jobs 0
Status Production
Free CPUs 456

Storage Element
sigmorgh.hpcc.ttu.edu&#60;<a href='http&#58;//sigmorgh.hpcc.ttu.edu&#62' target='_blank' rel='nofollow'>http&#58;//sigmorgh.hpcc.ttu.edu&#62</a>; (default)
TTU-ANTAEUS_classicSE

VO Support
suragrid
cms

Our BDII informaiton is searchable on the OSG OIM&#58;

<a href='http&#58;//myosg.grid.iu.edu/rgbdii/index?summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=ce&bdii_server=is-osg&start_type=7daysago&start_date=01%2F13%2F2012&end_type=now&end_date=01%2F13%2F2012&site=on&site_sel%5B%5D=10044&rg_sel%5B%5D=256&gridtype=on&gridtype_1=on&active_value=1&disable_value=1' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/rgbdii/index?summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=ce&bdii_server=is-osg&start_type=7daysago&start_date=01%2F13%2F2012&end_type=now&end_date=01%2F13%2F2012&site=on&site_sel%5B%5D=10044&rg_sel%5B%5D=256&gridtype=on&gridtype_1=on&active_value=1&disable_value=1</a>

or I made a TinyURL&#58;

<a href='http&#58;//tinyurl.com/qxjma7m' target='_blank' rel='nofollow'>http&#58;//tinyurl.com/qxjma7m</a>

Why does the OSG configuration set up a contact string for our cluster for each queue? Our job managers are just &#34;jobmanager&#34; and &#34;jobmanager-sge&#34; as far as I know, and I do not know why this setup produces the above contact strings with each queue name appended.

Please advise.

[root@antaeus config.d]# cat 20-sge.ini
;===================================================================
; SGE
;===================================================================

[SGE]
; This section has settings for configuring your CE for a SGE job manager

; The enabled setting indicates whether you want your CE to use a SGE job
; manager
; valid answers are True or False
enabled = True

; The sge_root setting should give the location of sge install directory
;
sge_root = /opt/gridengine

; The sge_cell setting should be set to the value of $SGE_CELL for your SGE
; install.
sge_cell = default

; The location of the SGE configuration file
; sge_config = /etc/sysconfig/gridengine
; On some installations the file may be in
; $SGE_ROOT/$SGE_CELL/common/settings.sh
; Uncomment the following if this is the case&#58;
sge_config = %(sge_root)s/%(sge_cell)s/common/settings.sh

; The sge_bin_location setting should be set to the location
; SGE binaries are located, this is a required setting
sge_bin_location = /opt/gridengine/bin/lx26-amd64

; The job_contact setting should give the contact string for the jobmanager
; on this CE (e.g. host.name/jobmanager-sge)
job_contact = antaeus.hpcc.ttu.edu/jobmanager-sge&#60;<a href='http&#58;//antaeus.hpcc.ttu.edu/jobmanager-sge&#62' target='_blank' rel='nofollow'>http&#58;//antaeus.hpcc.ttu.edu/jobmanager-sge&#62</a>;

; The util_contact should give the contact string for the default jobmanager
; on this CE (e.g. host.name/jobmanager)
util_contact = antaeus.hpcc.ttu.edu/jobmanager&#60;<a href='http&#58;//antaeus.hpcc.ttu.edu/jobmanager&#62' target='_blank' rel='nofollow'>http&#58;//antaeus.hpcc.ttu.edu/jobmanager&#62</a>;

; This setting is optional and determines whether the SGE

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=21503#1405456931' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=21503#1405456931</a> for full text.
2014-07-15 	21&#58;02 	Public Diary&#58;
You appear to be right. The problem, then, is that the OSG CE installation for SGE (at least, possibly other batch queueing systems) does not stand up or create such jobmanager submission points based on the available queues.

Is there a manual workaround for this problem?

On Jul 15, 2014, at 4&#58;43 PM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

the WMS presents the destination in the format that _it_ supports
2014-07-15 	21&#58;28 	Public Diary&#58;
Hi TTU team,
what you currently publish in the information system looks reasonable to me&#58;

$ lcg-infosites ce -v 1 -vo cms | grep ttu
antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-cms
antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-grid-priority
antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-grid-serial
antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-qwrf
$ lcg-infosites ce -v 1 -vo ops | grep ttu
antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-grid-serial
antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-qwrf

I submitted test jobs to the queues supporting &#34;ops&#34; and their status
looks promising so far&#58;

======================= glite-wms-job-status Success =====================
BOOKKEEPING INFORMATION&#58;

Status info for the Job &#58; <a href='https&#58;//wms306.cern.ch&#58;9000/V4uHwtMmOH8QLW0fNd0cpQ' target='_blank' rel='nofollow'>https&#58;//wms306.cern.ch&#58;9000/V4uHwtMmOH8QLW0fNd0cpQ</a>
Current Status&#58; Scheduled
Status Reason&#58; Job successfully submitted to Globus
Destination&#58; antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-grid-serial
Submitted&#58; Tue Jul 15 23&#58;11&#58;13 2014 CEST
==========================================================================
======================= glite-wms-job-status Success =====================
BOOKKEEPING INFORMATION&#58;

Status info for the Job &#58; <a href='https&#58;//wms306.cern.ch&#58;9000/i9NCBatjCISJ9TwIEqhvMg' target='_blank' rel='nofollow'>https&#58;//wms306.cern.ch&#58;9000/i9NCBatjCISJ9TwIEqhvMg</a>
Current Status&#58; Scheduled
Status Reason&#58; Job successfully submitted to Globus
Destination&#58; antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-qwrf
Submitted&#58; Tue Jul 15 23&#58;11&#58;41 2014 CEST
==========================================================================

With higher verbosity one can see how the WMS split the queue from the job manager&#58;

-----------------------------------------------------------------------------
glite-wms-job-status -i ttu.id -v 3 | grep Globus
Status Reason&#58; Job successfully submitted to Globus
GlobusScheduler = &#34;antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge&#34;;
GlobusRSL = &#34;(queue=grid-serial)(jobtype=single)(environment=(EDG_WL_JOBID &#39;<a href='https&#58;//wms306.cern.ch&#58;9000/V4uHwtMmOH8QLW0fNd0cpQ&#39' target='_blank' rel='nofollow'>https&#58;//wms306.cern.ch&#58;9000/V4uHwtMmOH8QLW0fNd0cpQ&#39</a>;))&#34;;
-----------------------------------------------------------------------------

Let&#39;s see how they fare. You might want to give &#34;ops&#34; more priority...
2014-07-15 	21&#58;48 	Public Diary&#58;
Thanks Maarten for your reply. We checked the settings on our CE, the environmental variable $GLOBUS_TCP_PORT_RANGE has already been setup, it&#39;s &#34;40000,55000&#34;. The firewall also has those tcp ports open.

[root@antaeus]# echo $GLOBUS_TCP_PORT_RANGE
40000,55000

8 ACCEPT tcp -- 0.0.0.0/0 0.0.0.0/0 state NEW tcp dpts&#58;40000&#58;50000

Would it be possible that something else hasn&#39;t been setup properly?

Thanks,
Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8
2014-07-15 	22&#58;04 	Public Diary&#58;
Hi Amy,
can you check what is happening with my jobs?
</div><script type='text/javascript'>
        $('#show_2023351252').click(function() {
            $('#detail_2023351252').slideDown("normal");
            $('#show_2023351252').hide();
            $('#hide_2023351252').show();
        });
        $('#hide_2023351252').click(function() {
            $('#detail_2023351252').slideUp();
            $('#hide_2023351252').hide();
            $('#show_2023351252').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='21503#1405460891'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-15T21:48:11+00:00">Jul 15, 2014 09:48 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405460891">&nbsp;</a></div><pre>Hi TTU team,
what you currently publish in the information system looks reasonable to me&#58;

$ lcg-infosites ce -v 1 -vo cms | grep ttu
antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-cms
antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-grid-priority
antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-grid-serial
antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-qwrf
$ lcg-infosites ce -v 1 -vo ops | grep ttu
antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-grid-serial
antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-qwrf

I submitted test jobs to the queues supporting &#34;ops&#34; and their status
looks promising so far&#58;

======================= glite-wms-job-status Success =====================
BOOKKEEPING INFORMATION&#58;

Status info for the Job &#58; <a href='https&#58;//wms306.cern.ch&#58;9000/V4uHwtMmOH8QLW0fNd0cpQ' target='_blank' rel='nofollow'>https&#58;//wms306.cern.ch&#58;9000/V4uHwtMmOH8QLW0fNd0cpQ</a>
Current Status&#58;     Scheduled
Status Reason&#58;      Job successfully submitted to Globus
Destination&#58;        antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-grid-serial
Submitted&#58;          Tue Jul 15 23&#58;11&#58;13 2014 CEST
==========================================================================
======================= glite-wms-job-status Success =====================
BOOKKEEPING INFORMATION&#58;

Status info for the Job &#58; <a href='https&#58;//wms306.cern.ch&#58;9000/i9NCBatjCISJ9TwIEqhvMg' target='_blank' rel='nofollow'>https&#58;//wms306.cern.ch&#58;9000/i9NCBatjCISJ9TwIEqhvMg</a>
Current Status&#58;     Scheduled
Status Reason&#58;      Job successfully submitted to Globus
Destination&#58;        antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-qwrf
Submitted&#58;          Tue Jul 15 23&#58;11&#58;41 2014 CEST
==========================================================================

With higher verbosity one can see how the WMS split the queue from the job manager&#58;
<div id='show_388862446' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_388862446'>
-----------------------------------------------------------------------------
glite-wms-job-status -i ttu.id -v 3 | grep Globus
Status Reason&#58;      Job successfully submitted to Globus
GlobusScheduler = &#34;antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge&#34;;
GlobusRSL = &#34;(queue=grid-serial)(jobtype=single)(environment=(EDG_WL_JOBID &#39;<a href='https&#58;//wms306.cern.ch&#58;9000/V4uHwtMmOH8QLW0fNd0cpQ&#39' target='_blank' rel='nofollow'>https&#58;//wms306.cern.ch&#58;9000/V4uHwtMmOH8QLW0fNd0cpQ&#39</a>;))&#34;;
-----------------------------------------------------------------------------

Let&#39;s see how they fare.  You might want to give &#34;ops&#34; more priority...

-- by Maarten Litmaath at Tue Jul 15 21&#58;28&#58;25 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a>
</div><script type='text/javascript'>
        $('#show_388862446').click(function() {
            $('#detail_388862446').slideDown("normal");
            $('#show_388862446').hide();
            $('#hide_388862446').show();
        });
        $('#hide_388862446').click(function() {
            $('#detail_388862446').slideUp();
            $('#hide_388862446').hide();
            $('#show_388862446').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='21503#1405460830'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-15T21:47:10+00:00">Jul 15, 2014 09:47 PM UTC</time><a class="anchor" name="1405460830">&nbsp;</a></div><pre>Thanks Maarten for your reply. We checked the settings on our CE, the environmental variable $GLOBUS_TCP_PORT_RANGE has already been setup, it&#39;s &#34;40000,55000&#34;.  The firewall also has those tcp ports open.

[root@antaeus]# echo $GLOBUS_TCP_PORT_RANGE
40000,55000

8    ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp dpts&#58;40000&#58;50000

Would it be possible that something else hasn&#39;t been setup properly?

Thanks,
Amy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amy Wang 8</pre></div><div class='update_description'><i onclick="document.location='21503#1405458058'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-15T21:00:58+00:00">Jul 15, 2014 09:00 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1405458058">&nbsp;</a></div><pre>You appear to be right.  The problem, then, is that the OSG CE installation for SGE (at least, possibly other batch queueing systems) does not stand up or create such jobmanager submission points based on the available queues.

Is there a manual workaround for this problem?

On Jul 15, 2014, at 4&#58;43 PM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

the WMS presents the destination in the format that _it_ supports</pre></div><div class='update_description'><i onclick="document.location='21503#1405456995'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-15T20:43:15+00:00">Jul 15, 2014 08:43 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405456995">&nbsp;</a></div><pre>Hi Alan,
the WMS presents the destination in the format that _it_ supports
for WMS clients; it knows how to deal with the subcomponents.

Please look into the error.  Possible cause are listed here&#58;

<a href='https&#58;//wiki.egi.eu/wiki/Tools/Manuals/TS71' target='_blank' rel='nofollow'>https&#58;//wiki.egi.eu/wiki/Tools/Manuals/TS71</a>

-- by Maarten Litmaath at Mon Jul 14 17&#58;42&#58;48 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1405456931'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-15T20:42:11+00:00">Jul 15, 2014 08:42 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1405456931">&nbsp;</a></div><pre>Dear OSG support,

We have carefully set the GIP configuration options for our cluster to match our available queues so that only these will be advertised.

This seems to work, but somehow the contact string being advertised for our CE includes the queue name for each available queue as a result. This is not what we want, I think - unless some other OSG setup step has not been done that would allow the cluster to respond to job submissions to that contact string.

Here is an example&#58;

TTU-ANTAEUS     antaeus.hpcc.ttu.edu&#60;<a href='http&#58;//antaeus.hpcc.ttu.edu&#62' target='_blank' rel='nofollow'>http&#58;//antaeus.hpcc.ttu.edu&#62</a>;       grid-priority   0       0       456             1000455 456     9999999 9999999 3600    3600    sge

Information
Data Directory /lustre/hep/osg
Application Directory /lustre/work/osg_apps
GRAM Version 5.0
LRMS Version GE 6.2u5
Gate Keeper Port 2119
Contact String antaeus.hpcc.ttu.edu/jobmanager-sge-grid-priority&#60;<a href='http&#58;//antaeus.hpcc.ttu.edu/jobmanager-sge-grid-priority&#62' target='_blank' rel='nofollow'>http&#58;//antaeus.hpcc.ttu.edu/jobmanager-sge-grid-priority&#62</a>;
Hosting Cluster antaeus.hpcc.ttu.edu
Glue Capability CPUScalingReferenceSI00=2000, glexec

Policy/State
Max Running Jobs 456
Assigned Job Slots 0
Max CPU Time 9999999
Max Wall Clock Time 9999999
Preemption 0
Max Slots Per Jobs 1
Total Jobs 0
Status Production
Free CPUs 456

Storage Element
sigmorgh.hpcc.ttu.edu&#60;<a href='http&#58;//sigmorgh.hpcc.ttu.edu&#62' target='_blank' rel='nofollow'>http&#58;//sigmorgh.hpcc.ttu.edu&#62</a>; (default)
TTU-ANTAEUS_classicSE

<div id='show_1508485598' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1508485598'>VO Support
suragrid
cms

Our BDII informaiton is searchable on the OSG OIM&#58;

<a href='http&#58;//myosg.grid.iu.edu/rgbdii/index?summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=ce&bdii_server=is-osg&start_type=7daysago&start_date=01%2F13%2F2012&end_type=now&end_date=01%2F13%2F2012&site=on&site_sel%5B%5D=10044&rg_sel%5B%5D=256&gridtype=on&gridtype_1=on&active_value=1&disable_value=1' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/rgbdii/index?summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=ce&bdii_server=is-osg&start_type=7daysago&start_date=01%2F13%2F2012&end_type=now&end_date=01%2F13%2F2012&site=on&site_sel%5B%5D=10044&rg_sel%5B%5D=256&gridtype=on&gridtype_1=on&active_value=1&disable_value=1</a>

or I made a TinyURL&#58;

<a href='http&#58;//tinyurl.com/qxjma7m' target='_blank' rel='nofollow'>http&#58;//tinyurl.com/qxjma7m</a>

Why does the OSG configuration set up a contact string for our cluster for each queue? Our job managers are just &#34;jobmanager&#34; and &#34;jobmanager-sge&#34; as far as I know, and I do not know why this setup produces the above contact strings with each queue name appended.

Please advise.

[root@antaeus config.d]# cat 20-sge.ini
;===================================================================
;                              SGE
;===================================================================

[SGE]
; This section has settings for configuring your CE for a SGE job manager

; The enabled setting indicates whether you want your CE to use a SGE job
; manager
; valid answers are True or False
enabled = True

; The sge_root setting should give the location of sge install directory
;
sge_root = /opt/gridengine

; The sge_cell setting should be set to the value of $SGE_CELL for your SGE
; install.
sge_cell = default

; The location of the SGE configuration file
; sge_config = /etc/sysconfig/gridengine
; On some installations the file may be in
; $SGE_ROOT/$SGE_CELL/common/settings.sh
; Uncomment the following if this is the case&#58;
sge_config = %(sge_root)s/%(sge_cell)s/common/settings.sh

; The sge_bin_location setting should be set to the location
; SGE binaries are located, this is a required setting
sge_bin_location = /opt/gridengine/bin/lx26-amd64

; The job_contact setting should give the contact string for the jobmanager
; on this CE (e.g. host.name/jobmanager-sge)
job_contact = antaeus.hpcc.ttu.edu/jobmanager-sge&#60;<a href='http&#58;//antaeus.hpcc.ttu.edu/jobmanager-sge&#62' target='_blank' rel='nofollow'>http&#58;//antaeus.hpcc.ttu.edu/jobmanager-sge&#62</a>;

; The util_contact should give the contact string for the default jobmanager
; on this CE (e.g. host.name/jobmanager)
util_contact = antaeus.hpcc.ttu.edu/jobmanager&#60;<a href='http&#58;//antaeus.hpcc.ttu.edu/jobmanager&#62' target='_blank' rel='nofollow'>http&#58;//antaeus.hpcc.ttu.edu/jobmanager&#62</a>;

; This setting is optional and determines whether the SGE SEG module is enabled
; for the SGE job manager. Although using the SEG requires access to your SGE
; log files on your CE, it also substantially reduces the load on your CE and
; SGE scheduler since Globus will be able to monitor job status by examining
; the SGE logs instead of querying the SGE scheduler.
;
; By default, this is disabled.
; This setting is optional and determines whether the SGE SEG module is enabled ; for the SGE job manager.
; Its value can be set to &#34;True&#34;, &#34;False&#34; or &#34;DEFAULT&#34;.
seg_enabled = TRUE

; This setting is required if the SEG is enabled. This setting should point
; to the directory with your server log files for your SGE installation so
; that the SEG module can monitor jobs running on your cluster.
;
; If you enable the SEG, you will need to change this and point it at
; the path to the reporting log  for SGE
#log_file = /SGE_log_dir/reporting
log_file = /SGE_OSG/reporting

; This option sets the queue that incoming jobs will be sent to by default.
; If this is not set, jobs will be sent to the queue that is set in your SGE
; settings
default_queue = grid-serial
queue_exclude = qwrf,serial,normal,hep,matlab,abaqus,ancellcc12,ancellcc8,ancellp,bioinfo,greencc,himem,kangcc,lilliancc,qREU,qgpu,qtemp,qtempkang,ray512cc,raycc,tangcc,tang256cc
grid-serial_whitelist = *
grid-priority_blacklist = *
grid-priority_whitelist = cms,suragrid
; If this option is set to True then the job manager will attempt to verify that
; incoming jobs specify a valid queue.  If this is set, then you must
; set the available_queues option as well
; This is set to False by default
; validate_queues = False

; This option tells globus which queues are available on your SGE cluster.
; This option is used in conjunction with the validate_queues option to
; verify that jobs are being sent to a queue that exists on your SGE
; cluster
; available_queues = UNAVAILABLE
; This setting is optional and will allow globus to accept limited proxies if set.
; Changing this is not needed for almost all sites. If set to True it will add
; the &#34;accept_limited&#34; option into /etc/grid-services/jobmanager-managed-fork.
; If it is set to False or not set then that prefix will not be added.
;
; By default this is set to False
;
; Most sites will not need to change this
; accept_limited = False

Alan
</div><script type='text/javascript'>
        $('#show_1508485598').click(function() {
            $('#detail_1508485598').slideDown("normal");
            $('#show_1508485598').hide();
            $('#hide_1508485598').show();
        });
        $('#hide_1508485598').click(function() {
            $('#detail_1508485598').slideUp();
            $('#hide_1508485598').hide();
            $('#show_1508485598').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='21503#1405359184'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-14T17:33:04+00:00">Jul 14, 2014 05:33 PM UTC</time><a class="anchor" name="1405359184">&nbsp;</a></div><pre>We investigated further and found that the SAM tests were being submitted to an invalid queue for grid jobs.

We adjusted the list of advertised queues in GIP accordingly, and now only the available queues that are valid for grid jobs are being advertised.

On the next run of the SAM tests, we again got an error as follows. The SAM jobs are being submitted to a valid queue, but oddly the queue is appended to the job manager&#58;

Status info for the Job &#58; <a href='https&#58;//wms305.cern.ch&#58;9000/W_GHUeNytYK3nwO1AUcCrA' target='_blank' rel='nofollow'>https&#58;//wms305.cern.ch&#58;9000/W_GHUeNytYK3nwO1AUcCrA</a>
Current Status&#58; Aborted
Logged Reason(s)&#58;
- Got a job held event, reason&#58; Globus error 79&#58; connecting to the job manager failed. Possible reasons&#58; job terminated, invalid job contact, network problems, ...
- Got a job held event, reason&#58; Globus error 79&#58; connecting to the job manager failed. Possible reasons&#58; job terminated, invalid job contact, network problems, ...
Status Reason&#58; Removal retries exceeded.
Destination&#58; antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge-grid-serial

There is no &#34;jobmanager-sge-grid-serial&#34; - instead the job manager is just &#34;jobmanager-sge&#34; for our resource and the &#34;grid-serial&#34; queue is just a queue in the system.

Question&#58; Why does the SAM job specify the job manager as a string that includes the queue name? Is there something we need to do to support this style of submission, and if so, why is this not part of the OSG configuration by default?

Please advise.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4</pre></div><div class='update_description'><i onclick="document.location='21503#1405114239'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-11T21:30:39+00:00">Jul 11, 2014 09:30 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405114239">&nbsp;</a></div><pre>CERN ticket reference&#58; <a href='https&#58;//cern.service-now.com/nav_to.do?uri=incident.do?sysparm_query=number=INC0598309' target='_blank' rel='nofollow'>https&#58;//cern.service-now.com/nav_to.do?uri=incident.do?sysparm_query=number=INC0598309</a>

-- by SYSTEM at Fri Jul 11 21&#58;30&#58;28 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1405114220'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-11T21:30:20+00:00">Jul 11, 2014 09:30 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405114220">&nbsp;</a></div><pre>SAM tests are being sent now to antaeus.hpcc.ttu.edu and visible in dashbaord Site Status Board
<a href='http&#58;//dashb-cms-sum.cern.ch/dashboard/request.py/latestresultssmry-sum#profile=CMS_CRITICAL_FULL&group=Tier3s&site' target='_blank' rel='nofollow'>http&#58;//dashb-cms-sum.cern.ch/dashboard/request.py/latestresultssmry-sum#profile=CMS_CRITICAL_FULL&group=Tier3s&site</a>[]=T3_US_TTU&flavour[]=All+Service+Flavours&metric[]=All+Metrics&status[]=All+Exit+Status

-- by stefano.belforte at Fri Jul 11 21&#58;24&#58;47 UTC 2014

Assign to specific person(s) has been cleared.
From SAM perspective, the site is monitored and visible in SAM/SUM interface&#58;
<a href='http&#58;//dashb-cms-sum.cern.ch/dashboard/request.py/historicalsmryview-sum' target='_blank' rel='nofollow'>http&#58;//dashb-cms-sum.cern.ch/dashboard/request.py/historicalsmryview-sum</a>

I&#39;m not sure why you&#39;re unable to see it in SSB, likely a separate issue, I will re-assign to SSB support.

Marian
Flushed field &#39;Assign ticket to...&#39;

-- by Marian  Babik at Fri Jul 11 19&#58;10&#58;22 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1405114163'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-11T21:29:23+00:00">Jul 11, 2014 09:29 PM UTC</time><a class="anchor" name="1405114163">&nbsp;</a></div><pre>do not know why
<a href='http&#58;//dashb-ssb.cern.ch/dashboard/request.py/siteview?site=T3_US_TTU#currentView=default&highlight=true' target='_blank' rel='nofollow'>http&#58;//dashb-ssb.cern.ch/dashboard/request.py/siteview?site=T3_US_TTU#currentView=default&highlight=true</a>
does not show SAM tests, since they appear in the other dashboard page
<a href='http&#58;//dashb-cms-sum.cern.ch/dashboard/request.py/latestresultssmry-sum#profile=CMS_CRITICAL_FULL&group=Tier3s&site' target='_blank' rel='nofollow'>http&#58;//dashb-cms-sum.cern.ch/dashboard/request.py/latestresultssmry-sum#profile=CMS_CRITICAL_FULL&group=Tier3s&site</a>[]=T3_US_TTU&flavour[]=All+Service+Flavours&metric[]=All+Metrics&status[]=All+Exit+Status

this is anyhow a dashboard problem, not a SAM one. If does not fix itself,  better open an ad hoc ticket.
Submission test currently fails, but that&#39;s another story, and given that pilots run I would not worry too much about glite submission

by /C=IT/O=INFN/OU=Personal Certificate/L=Trieste/CN=Stefano Belforte</pre></div><div class='update_description'><i onclick="document.location='21503#1405105052'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-11T18:57:32+00:00">Jul 11, 2014 06:57 PM UTC</time><a class="anchor" name="1405105052">&nbsp;</a></div><pre>I&#39;m not sure we are making progress here.  The issue at this point appears to be incorrect or missing entries in the SiteDB. How can these be fixed?

Again, specifically, the BDII information is published correctly

<a href='http&#58;//is.grid.iu.edu/data/cemon_processed_osg/antaeus.hpcc.ttu.edu.processed' target='_blank' rel='nofollow'>http&#58;//is.grid.iu.edu/data/cemon_processed_osg/antaeus.hpcc.ttu.edu.processed</a>

but the SAM tests are not being run&#58;

<a href='http&#58;//dashb-ssb.cern.ch/dashboard/request.py/siteview?site=T3_US_TTU#currentView=default&highlight=true' target='_blank' rel='nofollow'>http&#58;//dashb-ssb.cern.ch/dashboard/request.py/siteview?site=T3_US_TTU#currentView=default&highlight=true</a>

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4</pre></div><div class='update_description'><i onclick="document.location='21503#1405104314'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-11T18:45:14+00:00">Jul 11, 2014 06:45 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405104314">&nbsp;</a></div><pre>CERN ticket reference&#58; <a href='https&#58;//cern.service-now.com/nav_to.do?uri=incident.do?sysparm_query=number=INC0598291' target='_blank' rel='nofollow'>https&#58;//cern.service-now.com/nav_to.do?uri=incident.do?sysparm_query=number=INC0598291</a>

-- by SYSTEM at Fri Jul 11 18&#58;45&#58;06 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1405104295'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-11T18:44:55+00:00">Jul 11, 2014 06:44 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405104295">&nbsp;</a></div><pre>Hi Chris,
thanks for looking into it, CEs are discovered via BDII, so this was fixed once you started publishing it to the information system. In the meantime, the issue with sitename also disappeared, not sure if someone did something. SAM/Nagios now monitors both CE and SE endpoints.

Cheers,
Marian

-- by Marian  Babik at Fri Jul 11 14&#58;31&#58;58 UTC 2014

Hi,

Going to the SitDB portal doesn&#39;t allow me to do much.  Under hosts, I
there is no option to add a CE.  I can only add another SE.  Further, the
name field LCG&#58; ttu-antaeus is not editable.  Where can I then update
these necessary changes and resolve these conflicts?

Thanks and Regards,
Chris

********************************************************************************
This is an automated mail. When replying don&#39;t change the subject line!
Type your text above this box and S T R I P  P R E V I O U S  M A I L S please!!
*********************************************************************************

-- by Christopher Cowden at Thu Jul 10 18&#58;32&#58;03 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1405006080'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-10T15:28:00+00:00">Jul 10, 2014 03:28 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405006080">&nbsp;</a></div><pre>Hi,
concerning SAM tests, there are two issues, first one is that in SiteDB the site is registered as ttu-antaeus while in OIM it&#39;s TTU-ANTEAUS, the second one is that we don&#39;t seem to get any CE from SiteDB for this site (we only get SE&#58; sigmorgh.hpcc.ttu.edu).

Involving christopher.cowden@.... who might be able to fix this in SiteDB.

Cheers,
Marian

-- by Marian  Babik at Thu Jul 10 08&#58;47&#58;28 UTC 2014

not everything that reaches Indiana is sent to WLCG BDII.
I suggest to contact OSG ops on that, or the US CMS Tier3 coordinator (Rob Snihur IIRC)
stefano

On 07/09/2014 11&#58;31 PM, helpdesk@.... wrote&#58;
<font color='#7F7E6F'>&#62; GGUS ticket #106383 was updated.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; REFERENCE LINK&#58; <a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=106383</a></font>
<font color='#7F7E6F'>&#62; SUBJECT&#58; CMS_T3_US_TTU gatekeeper queue down</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; =====================</font>
<font color='#7F7E6F'>&#62; LATEST MODIFICATIONS&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; LAST MODIFIER -&#62; TIGRE (via Footprints)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; PUBLIC DIARY -&#62;</font>
<font color='#7F7E6F'>&#62; Further information from Amy below.  I have also verified that we appear to be publishing, CEMon and GIP are working, the information is getting to the indicated cemon directories and is getting processed at is.grid.iu.edu but apparently is not getting picked up and used further upstream.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Can you help us sharpen the focus on the missing piece(s) here please?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Alan</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;  From Amy&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<div id='show_1255124574' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1255124574'><font color='#7F7E6F'>&#62; I checked, the data from our site is already processed and saved in <a href='http&#58;//is.grid.iu.edu/data/cemon_raw_incoming/' target='_blank' rel='nofollow'>http&#58;//is.grid.iu.edu/data/cemon_raw_incoming/</a>, it&#39;s also saved in  <a href='http&#58;//is.grid.iu.edu/data/cemon_processed_osg/.' target='_blank' rel='nofollow'>http&#58;//is.grid.iu.edu/data/cemon_processed_osg/.</a> As it says, the data was successfully processed but the CE is not in the BDII, the problem should be at the GOC&#39;s site.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ----------------------------------------------------------</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 5.1 Why is a site missing from the BDII?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; There are several reasons a site might be missing from the BDII. Things to check are&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;    1. Is your site registered in OIM? Make sure your CE&#39;s hostname is listed, and double-check that the DNS reverse lookup for the CE&#39;s hostname works correctly. (That is, verify that you can lookup the name fro the IP address.)</font>
<font color='#7F7E6F'>&#62;    2. Recall that the CEMon Collector will process the data, and it may discard the data if there are problems. Before the data is processed, it is saved in a web-readable directory&#58; <a href='http&#58;//is.grid.iu.edu/data/cemon_raw_incoming/' target='_blank' rel='nofollow'>http&#58;//is.grid.iu.edu/data/cemon_raw_incoming/</a> . Look in that directory and verify that you have send data the CEMon Collector. The file names are the names of the computers that have sent data. If your data is not there, see the next section.</font>
<font color='#7F7E6F'>&#62;    3. After the data is processed but before it is sent to the BDII, it is saved in another web-readable directory&#58; <a href='http&#58;//is.grid.iu.edu/data/cemon_processed_osg/' target='_blank' rel='nofollow'>http&#58;//is.grid.iu.edu/data/cemon_processed_osg/</a> . Look in that directory and verify that the CEMon Collector did not discard your data. If your data was discarded, it might be because your site is not registered in OIM, or there are serious problems with the data or the DNS reverse lookup for for your CE failed. (By BockjooKim?&#58; if data is visible in raw data but not in the processed data, restarting tomcat could fix the issue.)</font>
<font color='#7F7E6F'>&#62;    4.If the data was successfully processed but you are not in the BDII, the problem may be at the GOC&#39;s site&#58; please file a ticket.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Amy</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>
<font color='#7F7E6F'>&#62;   This is an automated mail. When replying don&#39;t change the subject line!</font>
<font color='#7F7E6F'>&#62;   Type your text above this box and S T R I P  P R E V I O U S  M A I L S please!!</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>
<font color='#7F7E6F'>&#62;</font>

--
Stefano Belforte - I.N.F.N.     tel   &#58; +39 040 375-6261 (fax&#58; 375-6258)
Area di Ricerca - Padriciano 99 tel mobile&#58; +39 328 010 7327
34012 TRIESTE TS  - Italy       AIM&#58; stefanobelforte

-- by Stefano Belforte at Wed Jul 09 21&#58;57&#58;33 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a>
</div><script type='text/javascript'>
        $('#show_1255124574').click(function() {
            $('#detail_1255124574').slideDown("normal");
            $('#show_1255124574').hide();
            $('#hide_1255124574').show();
        });
        $('#hide_1255124574').click(function() {
            $('#detail_1255124574').slideUp();
            $('#hide_1255124574').hide();
            $('#show_1255124574').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='21503#1404941411'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-09T21:30:11+00:00">Jul 9, 2014 09:30 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1404941411">&nbsp;</a></div><pre>Further information from Amy below.  I have also verified that we appear to be publishing, CEMon and GIP are working, the information is getting to the indicated cemon directories and is getting processed at is.grid.iu.edu but apparently is not getting picked up and used further upstream.

Can you help us sharpen the focus on the missing piece(s) here please?

Alan

From Amy&#58;

I checked, the data from our site is already processed and saved in <a href='http&#58;//is.grid.iu.edu/data/cemon_raw_incoming/' target='_blank' rel='nofollow'>http&#58;//is.grid.iu.edu/data/cemon_raw_incoming/</a>, it&#39;s also saved in  <a href='http&#58;//is.grid.iu.edu/data/cemon_processed_osg/.' target='_blank' rel='nofollow'>http&#58;//is.grid.iu.edu/data/cemon_processed_osg/.</a> As it says, the data was successfully processed but the CE is not in the BDII, the problem should be at the GOC&#39;s site.

----------------------------------------------------------

5.1 Why is a site missing from the BDII?

There are several reasons a site might be missing from the BDII. Things to check are&#58;

1. Is your site registered in OIM? Make sure your CE&#39;s hostname is listed, and double-check that the DNS reverse lookup for the CE&#39;s hostname works correctly. (That is, verify that you can lookup the name fro the IP address.)
2. Recall that the CEMon Collector will process the data, and it may discard the data if there are problems. Before the data is processed, it is saved in a web-readable directory&#58; <a href='http&#58;//is.grid.iu.edu/data/cemon_raw_incoming/' target='_blank' rel='nofollow'>http&#58;//is.grid.iu.edu/data/cemon_raw_incoming/</a> . Look in that directory and verify that you have send data the CEMon Collector. The file names are the names of the computers that have sent data. If your data is not there, see the next section.
3. After the data is processed but before it is sent to the BDII, it is saved in another web-readable directory&#58; <a href='http&#58;//is.grid.iu.edu/data/cemon_processed_osg/' target='_blank' rel='nofollow'>http&#58;//is.grid.iu.edu/data/cemon_processed_osg/</a> . Look in that directory and verify that the CEMon Collector did not discard your data. If your data was discarded, it might be because your site is not registered in OIM, or there are serious problems with the data or the DNS reverse lookup for for your CE failed. (By BockjooKim?&#58; if data is visible in raw data but not in the processed data, restarting tomcat could fix the issue.)
4.If the data was successfully processed but you are not in the BDII, the problem may be at the GOC&#39;s site&#58; please file a ticket.

Amy</pre></div><div class='update_description'><i onclick="document.location='21503#1404919990'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-09T15:33:10+00:00">Jul 9, 2014 03:33 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1404919990">&nbsp;</a></div><pre>Thanks.

Using the information at that link, we see that our gatekeeper is not publishing the required information via BDII. (The storage element is listed, but not the CE.)

What should we do to debug the non-publishing of the BDII information?

Alan and Amy</pre></div><div class='update_description'><i onclick="document.location='21503#1404918252'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-09T15:04:12+00:00">Jul 9, 2014 03:04 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1404918252">&nbsp;</a></div><pre>Hi Alan,

In the meantime, you might want to give a look at [1], as it provides the current listing of SAM tests for sites, along with a list of experts for each of the test, who you can contact to debug specific problems.

[1] <a href='https&#58;//twiki.cern.ch/twiki/bin/view/CMSPublic/CompOpsSAMTests' target='_blank' rel='nofollow'>https&#58;//twiki.cern.ch/twiki/bin/view/CMSPublic/CompOpsSAMTests</a>

-- by Luis Emiro Linares Garcia at Mon Jul 07 07&#58;51&#58;12 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1404767791'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-07T21:16:31+00:00">Jul 7, 2014 09:16 PM UTC</time><a class="anchor" name="1404767791">&nbsp;</a></div><pre>Can we please get a response on starting SAM tests again at TTU so we can close this ticket?

Thanks!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4</pre></div><div class='update_description'><i onclick="document.location='21503#1404398652'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-03T14:44:12+00:00">Jul 3, 2014 02:44 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1404398652">&nbsp;</a></div><pre>Update&#58; apparently resetting the cvmfs on the gatekeeper has worked to allow CRAB jobs to work for non-TTU CMS general users, and now all we need is to get some response on getting the SUM tests running again.

Once this is reporting success for CMS, this ticket can be closed.

Alan</pre></div><div class='update_description'><i onclick="document.location='21503#1404342371'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-02T23:06:11+00:00">Jul 2, 2014 11:06 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1404342371">&nbsp;</a></div><pre>-- by Edward Karavakis at Wed Jul 02 15&#58;23&#58;09 UTC 2014

CERN ticket reference&#58; <a href='https&#58;//cern.service-now.com/nav_to.do?uri=incident.do?sysparm_query=number=INC0592847' target='_blank' rel='nofollow'>https&#58;//cern.service-now.com/nav_to.do?uri=incident.do?sysparm_query=number=INC0592847</a>

-- by SYSTEM at Wed Jul 02 15&#58;05&#58;22 UTC 2014

VOSupport is not responding. Maybe WLCG SAM can route this SAM-related issue to a knowledgeable source?

-- by Luis Emiro Linares Garcia at Wed Jul 02 15&#58;04&#58;29 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1404342309'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-02T23:05:09+00:00">Jul 2, 2014 11:05 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1404342309">&nbsp;</a></div><pre>Update&#58; We found an obscure problem with CVMFS on the TTU-Antaeus head node, in that it seemed to be mounted and allowed listing of typical /cvmfs/cms.cern.ch directories, but accessing a given file within such a directory produced and input/output error.

The CVMFS directories on the worker nodes were all OK.

This is now repaired and additionally an incorrect reference to cvmfs-talk instead of cvmfs_talk in the CVMFS scripts has been worked around by adding a soft-link to allow the script to work as written. We will pursue the latter as a separate bug to the CVMFS maintainers.

Please once again clear and resubmit any CMS glide-in jobs. If this was the problem, then it would explain why non-CMS glide-in jobs worked but CMS ones did not. It also explains why local jobs worked fine, since they only rely on CMSSW on the worker nodes and not on the gatekeeper node for execution.</pre></div><div class='update_description'><i onclick="document.location='21503#1404310873'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-02T14:21:13+00:00">Jul 2, 2014 02:21 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1404310873">&nbsp;</a></div><pre>Hi Alan,

I have cleared the factories queues off all pilots that were in a held or unknown state. It didn&#39;t look too encouraging though, as most of those pilots were submitted by the factories over the weekend. However, if you see pilots from other VOs, that is a good sign, let us check how submissions evolve.

Best regards,
Luis

-- by Luis Emiro Linares Garcia at Mon Jun 30 15&#58;55&#58;54 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1404310817'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-02T14:20:17+00:00">Jul 2, 2014 02:20 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1404310817">&nbsp;</a></div><pre>We continue to wait for any response from CMS regarding how to debug the apparent failure of CMS glideins to run on our system.

Can someone from CMS software support please respond?

Alan

On Jun 30, 2014, at 10&#58;51 AM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='21503#1404143475'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-30T15:51:15+00:00">Jun 30, 2014 03:51 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1404143475">&nbsp;</a></div><pre>We are also mystified by why CMS jobs (apparently at least including CMS glide in jobs) apparently don’t run on TTU-ANTAEUS even after the upgrades.

We do see glide in jobs for osg, sbgrid and glow apparently getting authorized. Can you check to see whether these are running to completion for those VOs?

Thanks,
Alan</pre></div><div class='update_description'><i onclick="document.location='21503#1404142626'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-30T15:37:06+00:00">Jun 30, 2014 03:37 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1404142626">&nbsp;</a></div><pre>Notified CMS SAM team of this ticket.

-- by artiedaj at Mon Jun 30 15&#58;36&#58;26 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1404142506'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-30T15:35:06+00:00">Jun 30, 2014 03:35 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1404142506">&nbsp;</a></div><pre>hello,

I believe this issue goes beyond the Site Support team scope. We probably need to contact the SAM team.

Regards,
John

-- by artiedaj at Mon Jun 30 15&#58;34&#58;48 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1403978530'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-28T18:02:10+00:00">Jun 28, 2014 06:02 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1403978530">&nbsp;</a></div><pre>Can you please ensure that all old pilots submitted prior to 27 June have been cleared out and that the tests you are submitting are based on fresh pilots submitted after the completion of our software updates?

At this point we are not seeing any issues with job submission by conventional grid methods. Any issues may be due to ways that the pilot jobs interact with the batch scheduler and might require further attention on our part. If you can help us identify what portions of your glide-in jobs differ from conventional grid submissions, that would be helpful.

Examples of tests that work&#58;

antaeus&#58;$ globus-job-run antaeus.hpcc.ttu.edu&#58;/jobmanager /usr/bin/id
uid=23730(asill) gid=101(hpcc) groups=101(hpcc),351(uscms),411(dream)

antaeus&#58;$ globus-job-run antaeus.hpcc.ttu.edu&#58;/jobmanager-sge /usr/bin/id
uid=23730(asill) gid=101(hpcc) groups=101(hpcc),351(uscms),411(dream),20013

antaeus&#58;$ globus-job-run antaeus.hpcc.ttu.edu/jobmanager-sge /bin/hostname
compute-33-24.local

We also have information from a non-TTU CMS user that indicates that CRAB3 jobs work, but jobs submitted using the older CRAB2 framework stay in a pending state. There may be something about jobs that expect an older (e.g., SL5/CentOS5/RHEL5) environment. Note that this resource is running under CentOS6.

Finally, can we get a response for our request for a link or a check-list from CMS for us to follow to get SUM tests run on a regular basis on our system?

Thanks,

Alan

On Jun 27, 2014, at 5&#58;14 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='21503#1403907289'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-27T22:14:49+00:00">Jun 27, 2014 10:14 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1403907289">&nbsp;</a></div><pre>Hi Alan and Amy,

Right now, I see that all glideins submitted to your site are being held. I see the following two error messages from the various held glideins&#58;
Globus error 79&#58; connecting to the job manager failed.  Possible reasons&#58; job terminated, invalid job contact, network problems, ...
Globus error 111&#58; the job manager timed out while waiting for a commit signal

The 111 error, of course, Luis reported above, but the 79 is new as far as I know. Do you think you could check the jobmanager for anything that might be causing connection problems like this?

Thanks,
Dan Klein
UCSD Glidein Factory Operations

-- by Daniel Klein at Fri Jun 27 22&#58;13&#58;40 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1403889971'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-27T17:26:11+00:00">Jun 27, 2014 05:26 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1403889971">&nbsp;</a></div><pre>Update&#58;

An inconsistency was discovered and corrected affecting accounts and permissions in the shared file system for the cluster. This has been corrected and also the OSG software has been updated to the latest packages on the cluster.

Test jobs now function correctly for us and we invite further tests.

Additionally, can the CMS software support team please respond with a link or a check-list for us to follow to get SUM tests run on a regular basis on our system, if these do not renew themselves automatically?

Thanks,
Alan and Amy
TTU

On Jun 23, 2014, at 2&#58;24 AM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='21503#1403508290'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-23T07:24:50+00:00">Jun 23, 2014 07:24 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1403508290">&nbsp;</a></div><pre>Dear Alan,

Please contact the Site Support team for getting help on SUM tests, given that none of them appear to be running. Actually, this ticket is being CCed to cms-comp-ops-site-support-team@..... But you might want to write to the list directly, citing this ticket in the body,

Concerning the queue, I still don&#39;t see it in BDII. It might be that the queue es temporarily down (and so it would not show up in BDII), but the other queues in the same CE do appear, so please confirm what&#39;s going on.

Thanks,
Luis

-- by Luis Emiro Linares Garcia at Mon Jun 23 07&#58;23&#58;54 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1403286489'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-20T17:48:09+00:00">Jun 20, 2014 05:48 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1403286489">&nbsp;</a></div><pre>We support CMS but don’t know why the SUM tests are not running here.

The error you forwarded could either be due to a highly occupied set of queues of to a queue misconfiguration here, or possibly due to a hangup in the OSG gatekeeper itself.  We’ll try to investigate. Meanwhile, what do we need to do to ensure that the SUM tests are being run here?

Alan

On Jun 20, 2014, at 12&#58;08 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='21503#1403284136'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-20T17:08:56+00:00">Jun 20, 2014 05:08 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1403284136">&nbsp;</a></div><pre>I&#39;ll add that I also don&#39;t see TTU at all anymore in the SUM tests, does it even still support CMS?

<a href='http&#58;//dashb-cms-sum.cern.ch/dashboard/request.py/latestresultssmry-sum#profile=CMS_CRITICAL_FULL&group=AllGroups&site' target='_blank' rel='nofollow'>http&#58;//dashb-cms-sum.cern.ch/dashboard/request.py/latestresultssmry-sum#profile=CMS_CRITICAL_FULL&group=AllGroups&site</a>[]=All+Sites&flavour[]=All+Service+Flavours&metric[]=All+Metrics&status[]=All+Exit+Status

Jeff Dost
OSG Glidein Factory Operations

-- by Jeffrey Dost at Fri Jun 20 17&#58;08&#58;27 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a></pre></div><div class='update_description'><i onclick="document.location='21503#1403271530'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-20T13:38:50+00:00">Jun 20, 2014 01:38 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1403271530">&nbsp;</a></div><pre>Dear admins,

Pilots from all your supported VOs have been unable to be submitted to your queue (antaeus.hpcc.ttu.edu&#58;2119/jobmanager-sge), with errors such as [1].

In checking, I see that the queue is no longer in BDII, and instead there are is a number of queues that support CMS, with different time limits (about half of them have the default value of 9999999). I&#39;m sorry if we missed an announcement from you about the decommissioning/replacement of the queue (I didn&#39;t find an announcement in the osg-gfactory-support@.... mailing list, or the cms-comp-ops or cms-gridAnnounce HyperNews forums). Can you please confirm which queues do you want us to configure in the factories?

Best regards,

Luis
CERN Glidein Factory operations

[1]
06/20 05&#58;14&#58;41 Globus job submission failed!
Reason&#58; 10 globus_xio_gsi&#58; Token size exceeds limit. Usually happens when someone tries to establish a insecure connection with a secure endpoint, e.g. when someone sends plain HTTP to a HTTPS endpoint without

06/16 15&#58;56&#58;29 Globus job submission failed!
Reason&#58; 111 the job manager timed out while waiting for a commit signal
Affected Site&#58; TTU-ANTAEUS

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106383</a>

[Ticket History]
Subject&#58; CMS_T3_US_TTU gatekeeper queue down
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-site-support-team@....;osg-gfactory-support@....
-- by Luis Emiro Linares Garcia at Fri Jun 20 13&#58;38&#58;12 UTC 2014</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F21503">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 21503});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
