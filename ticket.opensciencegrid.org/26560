<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[26560] Georgia Tech schedd is reporting shadow exceptions due to errors on cabinet-4-4-7.t2.ucsd.edu?</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=26560" method="post">
<div class="page-header">
    <h3><span class="muted">26560</span> / Georgia Tech schedd is reporting shadow exceptions due to errors on cabinet-4-4-7.t2.ucsd.edu?</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Peter Couvares</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">LIGO</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Peter Couvares</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">LIGO</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">WIP</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-10-16</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">LIGO <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/26560", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26560?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26560?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Georgia%20Tech%20schedd%20is%20reporting%20shadow%20exceptions%20due%20to%20errors%20on%20cabinet-4-4-7.t2.ucsd.edu%3F%20ISSUE%3D26560%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='26560#1444857992'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-14T21:26:32+00:00">Oct 14, 2015 09:26 PM UTC</time> by <b>pfcouvar@....</b><a class="anchor" name="1444857992">&nbsp;</a></div><pre>Sure, go ahead and close.

Thanks all!

-Peter

On Oct 13, 2015, at 6&#58;27 PM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='26560#1444856564'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-14T21:02:44+00:00">Oct 14, 2015 09:02 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1444856564">&nbsp;</a></div><pre>Afternoon Marty,

Thank you for the update. I&#39;ll wait to hear from Peter.

Thanks!
Vince</pre></div><div class='update_description'><i onclick="document.location='26560#1444775220'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-13T22:27:00+00:00">Oct 13, 2015 10:27 PM UTC</time><a class="anchor" name="1444775220">&nbsp;</a></div><pre>Hi Vince,

We&#39;re in the process of making some changes to the Georgia Tech configuration on site, at the factory, and on the LIGO frontend itself. It might be a few days before we&#39;ve got everything reconfigured and tested. In any case, this ticket may have outlived it&#39;s usefulness at this point since the discussion has moved over to email. If Peter agrees, maybe we can close out this ticket for you since it looks like almost everyone cc&#39;d here is also on the email thread?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26560#1444659111'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-12T14:11:51+00:00">Oct 12, 2015 02:11 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1444659111">&nbsp;</a></div><pre>Greetings all,

Checking in to see if there are any new developments or work on this issue.  If I can assist please let me know.

Thank you,
Vince</pre></div><div class='update_description'><i onclick="document.location='26560#1443557708'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-29T20:15:08+00:00">Sep 29, 2015 08:15 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1443557708">&nbsp;</a></div><pre>James/Claudia,

Have you guys gotten any further figuring out your workflow issues?

Patty/Memo,

Have you guys been able to look into your Gratia/RSV setup?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='26560#1443058690'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-24T01:38:10+00:00">Sep 24, 2015 01:38 AM UTC</time> by <b>james.clark@....</b><a class="anchor" name="1443058690">&nbsp;</a></div><pre>Here&#39;s the latest from Claudia&#58;

---
I&#39;m trying to perform  some tests&#58;
when the node chosen to run is not Gatech we have clearly a missing library
(but we already kwen it);
instead when the node is in Gatech, the problem is related fully to cwb.
And I think is still an Healpix problem;
due to the fact that I can not re-compile the code in clazzaro3
@ligo-6&#58;//cvmfs/oasis.opensciencegrid.org/ligo/ I can not test
cwb without this package and completely test this assumption.

There is, instead, another strange behavior from my point of view&#58;
from shell cwb runs perfectly linking to /cvmfs/
oasis.opensciencegrid.org/ligo/;
do shell and nodes link to physically the  same /cvmfs/
oasis.opensciencegrid.org/ligo ??
(or they link to different places with the same name and from shell I reach
for some reason the ligo-dev?)
Anyway nodes can correctly see the /cvmfs/ repository and load all other
libraries, and start the run.
I will continue to test it.
---

On 23 September 2015 at 12&#58;29, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26560#1443025774'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-23T16:29:34+00:00">Sep 23, 2015 04:29 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1443025774">&nbsp;</a></div><pre>James/Claudia,

Have you guys been able to successfully submit your CVMFS-dependent jobs?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='26560#1442938750'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-22T16:19:10+00:00">Sep 22, 2015 04:19 PM UTC</time><a class="anchor" name="1442938750">&nbsp;</a></div><pre>Hi Brian,

It looks like we may have seen a small batch of user jobs run on glidein at Ligo_US_GATech_ce1 on or around September 18th [1] [2]. And I did not see any other hold messages in the condor activity log for when these jobs came through. So I suspect the issue has been resolved. If you&#39;d like to confirm with another round of test jobs, please let us know and we&#39;ll double check to make sure things are working correctly.

Marty Kandes
UCSD Glidein Factory Operations

[1]

<a href='http&#58;//glidein.grid.iu.edu/factory/monitor/factoryStatus.html?entry=Ligo_US_GATech_ce1&frontend=total&infoGroup=running&elements=StatusRunning' target='_blank' rel='nofollow'>http&#58;//glidein.grid.iu.edu/factory/monitor/factoryStatus.html?entry=Ligo_US_GATech_ce1&frontend=total&infoGroup=running&elements=StatusRunning</a>,ClientGlideRunning,ClientGlideIdle,&rra=2&window_min=0&window_max=0&timezone=-4

[2]

<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=Ligo_US_GATech_ce1&frontend=total&infoGroup=running&elements=StatusRunning' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=Ligo_US_GATech_ce1&frontend=total&infoGroup=running&elements=StatusRunning</a>,ClientGlideRunning,ClientGlideIdle,&rra=2&window_min=0&window_max=0&timezone=-4

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26560#1442862865'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-21T19:14:25+00:00">Sep 21, 2015 07:14 PM UTC</time> by <b>mehmet.belgin@....</b><a class="anchor" name="1442862865">&nbsp;</a></div><pre>Thank you for your email.

I will be out of the office from until 10/10 with limited access to internet. If you need urgent assistance with PACE systems, please contact &#39;pace-support@....&#39;. Otherwise, I will try to get back to you as soon as I can.</pre></div><div class='update_description'><i onclick="document.location='26560#1442862735'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-21T19:12:15+00:00">Sep 21, 2015 07:12 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1442862735">&nbsp;</a></div><pre>Factory ops&#58; How are the pilots looking?

James/Claudia&#58; Have you been able to run your jobs that depend on CVMFS?</pre></div><div class='update_description'><i onclick="document.location='26560#1442590665'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T15:37:45+00:00">Sep 18, 2015 03:37 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1442590665">&nbsp;</a></div><pre>Marty,

Are you still seeing proxy delegation issues? Users at GT have been able to successfully run jobs so we should be seeing improvement on your end.

- Brian</pre></div><div class='update_description'><i onclick="document.location='26560#1442422637'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-16T16:57:17+00:00">Sep 16, 2015 04:57 PM UTC</time><a class="anchor" name="1442422637">&nbsp;</a></div><pre>P.S. There may be a proxy delegation problem, where the CE is shortening the proxy lifetime when the glidein is submitted to the worker nodes. We see this sometimes. That would at least make logical sense with the hold reason.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26560#1442422427'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-16T16:53:47+00:00">Sep 16, 2015 04:53 PM UTC</time><a class="anchor" name="1442422427">&nbsp;</a></div><pre>Hi guys,

Yeah, as Edgar mentioned, being unable to find a cvmfs mount on a worker node is one of the easiest problems to spot. This is probably something else since I would imagine the proxy needs to be validated before the glidein can even begin to run it&#39;s startup script to check for cvmfs.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26560#1442417763'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-16T15:36:03+00:00">Sep 16, 2015 03:36 PM UTC</time><a class="anchor" name="1442417763">&nbsp;</a></div><pre>The glidein just dies. And prevents jobs from landing in that worker node for a while. But I agree our factory freinds would have altered us if that was the case. They can easiyl spot validation errors

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='26560#1442417544'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-16T15:32:24+00:00">Sep 16, 2015 03:32 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1442417544">&nbsp;</a></div><pre>I&#39;ve been trying via direct submission. Concerning your validation
script, does the glidein just idle if it can&#39;t find a node with CVMFS or
does it remove itself from the queue? I&#39;d expect to see more idle
glideins if the former were the case.

- Brian

On 09/16/2015 10&#58;26 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26560#1442417176'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-16T15:26:16+00:00">Sep 16, 2015 03:26 PM UTC</time><a class="anchor" name="1442417176">&nbsp;</a></div><pre>Hi Brian,

I am not sure if you are doing direct Submission to the CE or via Glideins, if it is via glideins Brian B asked me to add a validation script so jobs will only staart on nodes which have cvmfs available

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='26560#1442365928'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-16T01:12:08+00:00">Sep 16, 2015 01:12 AM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1442365928">&nbsp;</a></div><pre>Memo and I spoke offline briefly before he left for vacation and this is what he said after some investigation&#58;

&#34;Yes, I see that job, and the only reason why it is not working is the unavailability of compute nodes due to lacking CVMFS mounts. The queue structure seems to be working well otherwise.&#34;

Is CVMFS still a problem at GT? I&#39;m also not sure why my simple &#39;env&#39; jobs would need CVMFS...

- Brian</pre></div><div class='update_description'><i onclick="document.location='26560#1442359245'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T23:20:45+00:00">Sep 15, 2015 11:20 PM UTC</time><a class="anchor" name="1442359245">&nbsp;</a></div><pre>Hi Brian,

It looks like the only activity I&#39;ve been able to observe on the factory is glideins and/or user jobs being held due to an expired proxy [1]. However, we checked the pilot proxy [2] on both the LIGO frontend and the factories, and they are not expired. It looks like this is a site-specific issue at Georgia Tech since user jobs appear to have continued to run successfully at other sites, e.g. see UCSD [3] --- at least through last week.

Marty Kandes
UCSD Glidein Factory Operations

[1]

012 (3076710.000.000) 09/09 15&#58;09&#58;43 Job was held.
CE job in status 1 put on hold by SYSTEM_PERIODIC_HOLD due to expired user proxy.
Code 26 Subcode 0
...
009 (3076710.000.000) 09/09 15&#58;14&#58;01 Job was aborted by the user.
via condor_rm (by user gfactory)

[2]

2015-09-15 23&#58;12&#58;00 UTC [gfactory@glidein&#58;~]$ proxy_info feligo info -all /var/lib/gwms-factory/client-proxies/user_feligo/glidein_gfactory_instance/credential_osg-ligo-1-t2-ucsd-edu_OSG_gWMSFrontend.main_539767
subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=osg-ligo-1.t2.ucsd.edu/CN=proxy
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=osg-ligo-1.t2.ucsd.edu
identity  &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=osg-ligo-1.t2.ucsd.edu
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /var/lib/gwms-factory/client-proxies/user_feligo/glidein_gfactory_instance/credential_osg-ligo-1-t2-ucsd-edu_OSG_gWMSFrontend.main_539767
timeleft  &#58; 71&#58;26&#58;31
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO osg extension information ===
VO        &#58; osg
subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=osg-ligo-1.t2.ucsd.edu
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=voms1.opensciencegrid.org
attribute &#58; /osg/ligo/Role=NULL/Capability=NULL
attribute &#58; /osg/Role=NULL/Capability=NULL
attribute &#58; /osg/uclhc/Role=NULL/Capability=NULL
timeleft  &#58; 23&#58;26&#58;31
<div id='show_1294885519' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1294885519'>uri       &#58; voms1.opensciencegrid.org&#58;15027

[3]

<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=CMS_T2_US_UCSD_gw4_bigmem&frontend=LIGO_frontend&infoGroup=running&elements=StatusRunning' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=CMS_T2_US_UCSD_gw4_bigmem&frontend=LIGO_frontend&infoGroup=running&elements=StatusRunning</a>,ClientGlideRunning,ClientGlideIdle,&rra=3&window_min=0&window_max=0&timezone=-7

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049
</div><script type='text/javascript'>
        $('#show_1294885519').click(function() {
            $('#detail_1294885519').slideDown("normal");
            $('#show_1294885519').hide();
            $('#hide_1294885519').show();
        });
        $('#hide_1294885519').click(function() {
            $('#detail_1294885519').slideUp();
            $('#hide_1294885519').hide();
            $('#show_1294885519').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='26560#1442322927'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T13:15:27+00:00">Sep 15, 2015 01:15 PM UTC</time> by <b>mehmet.belgin@....</b><a class="anchor" name="1442322927">&nbsp;</a></div><pre>Thank you for your email.

I will be out of the office from until 10/10 with limited access to internet. If you need urgent assistance with PACE systems, please contact &#39;pace-support@....&#39;. Otherwise, I will try to get back to you as soon as I can.</pre></div><div class='update_description'><i onclick="document.location='26560#1442322793'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T13:13:13+00:00">Sep 15, 2015 01:13 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1442322793">&nbsp;</a></div><pre>Hi Marty,

Can you verify if glideins are still being sent to GT?  Please let me know if I can assist.

Thank you,
Vince</pre></div><div class='update_description'><i onclick="document.location='26560#1442003256'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T20:27:36+00:00">Sep 11, 2015 08:27 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1442003256">&nbsp;</a></div><pre>Marty,

Have you stopped sending glideins to GT?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='26560#1441898748'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-10T15:25:48+00:00">Sep 10, 2015 03:25 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1441898748">&nbsp;</a></div><pre>Memo,

I&#39;ve submitted a test job and it&#39;s been sitting idle for the past hour and it tells me that the PBS job ID is 81045. Could you take a look at that job and see why it may be idling?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='26560#1441836850'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-09T22:14:10+00:00">Sep 9, 2015 10:14 PM UTC</time> by <b>mehmet.belgin@....</b><a class="anchor" name="1441836850">&nbsp;</a></div><pre>Done&#58;

[root@ligo-ce1 ~]# condor_ce_rm -const &#39;JobStatus == 3&#39;

Couldn&#39;t find/remove all jobs matching constraint (JobStatus == 3)
[root@ligo-ce1 ~]# condor_ce_rm -forcex -const &#39;JobStatus == 3&#39;
All jobs matching constraint (JobStatus == 3) have been removed locally
(remote state unknown)

Thanks Brian.

On 9/9/15 5&#58;44 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26560#1441835082'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-09T21:44:42+00:00">Sep 9, 2015 09:44 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1441835082">&nbsp;</a></div><pre>And by &#39;all current jobs&#39;, I meant all jobs in the &#39;X&#39; state.</pre></div><div class='update_description'><i onclick="document.location='26560#1441835053'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-09T21:44:13+00:00">Sep 9, 2015 09:44 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1441835053">&nbsp;</a></div><pre>Let&#39;s also try to remove all current jobs&#58;

# condor_ce_rm -const &#39;JobStatus == 3&#39;
# condor_ce_rm -forcex -const &#39;JobStatus == 3&#39;</pre></div><div class='update_description'><i onclick="document.location='26560#1441833983'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-09T21:26:23+00:00">Sep 9, 2015 09:26 PM UTC</time> by <b>mehmet.belgin@....</b><a class="anchor" name="1441833983">&nbsp;</a></div><pre>Done. Will condor service restart suffice (already did)?

On 9/9/15 4&#58;38 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26560#1441831136'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-09T20:38:56+00:00">Sep 9, 2015 08:38 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1441831136">&nbsp;</a></div><pre>Patty/Memo,

Can you set the blah_max_threaded_cmds in /etc/blah.config to 50? <a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1980' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1980</a>

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='26560#1441814502'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-09T16:01:42+00:00">Sep 9, 2015 04:01 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1441814502">&nbsp;</a></div><pre>After speaking with an HTCondor dev, it looks like it&#39;s an error coming from HTCondor because of all the pending requests. Does manual job submission from the CE to PBS still work?</pre></div><div class='update_description'><i onclick="document.location='26560#1441744536'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-08T20:35:36+00:00">Sep 8, 2015 08:35 PM UTC</time> by <b>mehmet.belgin@....</b><a class="anchor" name="1441744536">&nbsp;</a></div><pre>Hi Brian,

Patty is out of the office today, so let me try to answer your question.

PBS job submission is working, but all of the nodes seem to have lost
their CVMFS mount and they are offline.

<font color='#7F7E6F'>&#62;&#62; &#39;F&#39; &#39;Threads limit reached&#39;</font>

Not sure how to read this. Do you think this error is condor specific,
or a ulimit issue on our server(s)?

-Memo

On 9/8/15 4&#58;21 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26560#1441743655'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-08T20:20:55+00:00">Sep 8, 2015 08:20 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1441743655">&nbsp;</a></div><pre>Memo/Patty,

This is a real problem, it looks like there are some issues with the jobs being submitted to the PBS scheduler. I&#39;m seeing the following errors in /var/log/condor-ce/GridmanagerLog.ligoshared&#58;

09/07/15 20&#58;13&#58;44 [11169] GAHP[11172] &#60;- &#39;BLAH_JOB_CANCEL 20 pbs/20150815/80353&#39;
09/07/15 20&#58;13&#58;44 [11169] GAHP[11172] -&#62; &#39;F&#39; &#39;Threads limit reached&#39;
09/07/15 20&#58;13&#58;44 [11169] ERROR &#34;Bad BLAH_JOB_CANCEL Request&#58; F&#34; at line 2568 in file /builddir/build/BUILD/condor-8.2.8/src/condor_gridmanager/gahp-client.cpp

Does PBS submission still work from the CE host?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='26560#1441132969'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-01T18:42:49+00:00">Sep 1, 2015 06:42 PM UTC</time><a class="anchor" name="1441132969">&nbsp;</a></div><pre>Hi all,

To add the factory perspective for this update&#58; LIGO glideins are pending at the gatekeeper [1]. From our factory monitoring statistics, it doesn&#39;t look like we&#39;ve see a glideins run here since early August. Please let us know if you need any assistance from us moving forward.

Marty Kandes
UCSD Glidein Factory Operations

[1]

ligo-ce1.pace.gatech.edu

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26560#1441061586'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-31T22:53:06+00:00">Aug 31, 2015 10:53 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1441061586">&nbsp;</a></div><pre>Greetings all,

Checking in on the status of this request.  Please advise.

Thanks!
Vince</pre></div><div class='update_description'><i onclick="document.location='26560#1440446479'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-24T20:01:19+00:00">Aug 24, 2015 08:01 PM UTC</time><a class="anchor" name="1440446479">&nbsp;</a></div><pre>Hi Claudia,

(Hope the big move is going well!)

One trick I&#39;ve found useful in the past is doing something like&#58;

mkdir -p test_dev_post
touch test_dev_post/output

(and similar for all of your transfer_output) at the beginning of your script.  This way, if an unexpected error occurs and the executable doesn&#39;t produce output, the job finishes instead of going on hold.

Of course, some would prefer the job go on hold in this case.  It&#39;s somewhat of a personal preference.

Brian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26560#1440105266'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-20T21:14:26+00:00">Aug 20, 2015 09:14 PM UTC</time><a class="anchor" name="1440105266">&nbsp;</a></div><pre>Adding Claudia Lazzaro on cc.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='26560#1440104211'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-20T20:56:51+00:00">Aug 20, 2015 08:56 PM UTC</time><a class="anchor" name="1440104211">&nbsp;</a></div><pre>Peter, Claudia,

I am looking into this can u upload your submit file please? I see your jobs idle&#58;

condor_q -name ligo-6.pace.gatech.edu

-- Schedd&#58; ligo-6.pace.gatech.edu &#58; &#60;130.207.168.190&#58;9615?sock=9968_2eec_3&#62;
ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD
9841.0   clazzaro3       8/14 07&#58;57   0+00&#58;00&#58;00 I  0   0.0  hh.sh
10027.0   jclark308       8/19 13&#58;30   1+00&#58;13&#58;41 R  0   0.3  condor_dagman -f -
10028.0   jclark308       8/19 13&#58;30   0+00&#58;00&#58;13 I  0   97.7 cwb.sh
10029.0   jclark308       8/19 13&#58;30   0+00&#58;01&#58;08 I  0   0.0  cwb.sh
10030.0   jclark308       8/19 13&#58;30   0+00&#58;00&#58;49 I  0   0.0  cwb.sh
10031.0   jclark308       8/19 13&#58;30   0+00&#58;01&#58;08 I  0   0.0  cwb.sh
10158.0   clazzaro3       8/20 10&#58;18   0+03&#58;25&#58;48 R  0   0.3  condor_dagman -f -
10159.0   clazzaro3       8/20 10&#58;18   0+00&#58;00&#58;00 I  0   0.0  cwb.sh
10160.0   clazzaro3       8/20 10&#58;18   0+00&#58;00&#58;00 I  0   0.0  cwb.sh
10161.0   clazzaro3       8/20 10&#58;18   0+00&#58;00&#58;00 I  0   0.0  cwb.sh
10162.0   clazzaro3       8/20 10&#58;18   0+00&#58;00&#58;00 I  0   0.0  cwb.sh

But from what u write here&#58;

007 (9933.000.000) 08/18 05&#58;18&#58;12 Shadow exception!

If I look onto what happend with that job&#58;

condor_history -name ligo-6.pace.gatech.edu -l 9933.0

The job did ran, but I guess the output it was expecting it was not there&#58;

TransferOutput = &#34;test_dev_post/output ,test_dev_post/log&#34;

So what happend in that job I think is that it did not produce the expected output&#58;

test_dev_post/output
<div id='show_1199715546' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1199715546'>
You can see that condor tried it several times&#58;

NumJobStarts = 8

And the Hold Reason&#58;

LastHoldReason = &#34;Error from glidein_231236_74643666@....&#58; STARTER at 169.228.131.94 failed to send file(s) to &#60;130.207.168.190&#58;9615&#62;&#58; error reading from /data1/condor_local/execute/dir_231202/glide_eVUJBO/execute/dir_235823/test_dev_post/output &#58; (errno 2) No such file or directory; SHADOW failed to receive file(s) from &#60;169.228.131.94&#58;47835&#62;&#34;

So basically the job did not produce this test_dev_post/output  or it did not produced it where condor expected to.

Cheers,

Edgar

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020
</div><script type='text/javascript'>
        $('#show_1199715546').click(function() {
            $('#detail_1199715546').slideDown("normal");
            $('#show_1199715546').hide();
            $('#hide_1199715546').show();
        });
        $('#hide_1199715546').click(function() {
            $('#detail_1199715546').slideUp();
            $('#hide_1199715546').hide();
            $('#show_1199715546').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='26560#1440100771'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-20T19:59:31+00:00">Aug 20, 2015 07:59 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1440100771">&nbsp;</a></div><pre>That is a machine at UCSD actually, not UCSB. However the file system is fine. Are you sure that is where you are dumping your output? Moreover it is inside the pilot which is really out of the sites control.

/data1/condor_local/execute/dir_106776 (Where Pilot it)
/data1/condor_local/execute/dir_106776/glide_UxvAzk/execute/dir_112467/ (where the Job is running)

Are you getting anything back besides this error? ie any stdout at all?</pre></div><div class='update_description'><i onclick="document.location='26560#1440100425'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-20T19:53:45+00:00">Aug 20, 2015 07:53 PM UTC</time><a class="anchor" name="1440100425">&nbsp;</a></div><pre>Adding UCSD experts. Edgar, Marty, can you help with this?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='26560#1440100340'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-20T19:52:20+00:00">Aug 20, 2015 07:52 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1440100340">&nbsp;</a></div><pre>Dear OSG support gurus,

Claudia Lazzaro at Georgia Tech (cc’ed) is unable to successfully run any jobs via OSG, and is seeing errors like the following on the LIGO submit node at Georgia Tech (130.207.168.190)&#58;

...
007 (9933.000.000) 08/18 05&#58;18&#58;12 Shadow exception!
Error from glidein_106809_551162949@....&#58; STARTER at 169.228.131.99 failed to send file(s) to &#60;130.207.168.190&#58;9615&#62;&#58; error reading from /data1/condor_local/execute/dir_106776/glide_UxvAzk/execute/dir_112467/test_dev_post/output &#58; (errno 2) No such file or directory; SHADOW failed to receive file(s) from &#60;169.228.131.99&#58;41951&#62;
1706  -  Run Bytes Sent By Job
18847  -  Run Bytes Received By Job
...
012 (9933.000.000) 08/18 05&#58;18&#58;13 Job was held.
Error from glidein_106809_551162949@....&#58; STARTER at 169.228.131.99 failed to send file(s) to &#60;130.207.168.190&#58;9615&#62;&#58; error reading from /data1/condor_local/execute/dir_106776/glide_UxvAzk/execute/dir_112467/test_dev_post/output &#58; (errno 2) No such file or directory; SHADOW failed to receive file(s) from &#60;169.228.131.99&#58;41951&#62;
Code 13 Subcode 2
...

From my naive reading, this looks like a filesystem problem on the UCSB machine (&#34;error reading from /data1/condor_local/execute/dir_106776/glide_UxvAzk/execute/dir_112467/test_dev_post/output &#58; (errno 2) No such file or directory”).

Can someone help us debug this?

Thanks!

-Peter

by Peter Couvares (guest)</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F26560">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 26560});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
