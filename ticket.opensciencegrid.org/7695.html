<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[7695] Resource Specific Issue on UConn-OSG_SE</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=7695" method="post">
<div class="page-header">
    <h3><span class="muted">7695</span> / Resource Specific Issue on UConn-OSG_SE</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Richard T. Jones</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2009-12-22</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">RSV-Ops <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/7695", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/7695?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/7695?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Resource%20Specific%20Issue%20on%20UConn-OSG_SE%20ISSUE%3D7695%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='7695#1261495251'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-22T15:20:51+00:00">Dec 22, 2009 03:20 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1261495251">&nbsp;</a></div><pre>Thank you for informing us that this issue has been resolved. I will close this ticket.

Please submit problems, requests, and questions at&#58;
<a href='http&#58;//oim.grid.iu.edu/gocticket' target='_blank' rel='nofollow'>http&#58;//oim.grid.iu.edu/gocticket</a>

OSG Grid Operations Center
goc@...., 317-278-9699
Visit the OSG Support Page&#58;
<a href='http&#58;//www.opensciencegrid.org/ops' target='_blank' rel='nofollow'>http&#58;//www.opensciencegrid.org/ops</a>
RSS&#58; <a href='http&#58;//www.grid.iu.edu/news' target='_blank' rel='nofollow'>http&#58;//www.grid.iu.edu/news</a></pre></div><div class='update_description'><i onclick="document.location='7695#1261495239'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-22T15:20:39+00:00">Dec 22, 2009 03:20 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1261495239">&nbsp;</a></div><pre>Richard,

Thanks for replying.  Hopefully that will work out for you and hopefully there will be a probe to take care of the issue soon.

Kyle</pre></div><div class='update_description'><i onclick="document.location='7695#1260911649'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-15T21:14:09+00:00">Dec 15, 2009 09:14 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1260911649">&nbsp;</a></div><pre>Kyle,

Yes he did.  Our configuration is the one he described, with the GUMS
and VOMS/VOMRS services running on a separate host from the CE.  This is
the recommended configuration according to the installation docs, so it
looks like this is the normal behavior at the moment.

My plan is to leave the GUMS, VOMS, and VOMRS resources defined in the
central RSV listing, and ignore the fact that my site shows up as a gray
question mark on the status map.  Perhaps in the near future a RSV probe
to monitor these services will be added to the set of configurable
probes in config.ini, and if not I suppose I could write a probe of my
own, using an existing one as a template.

-Richard J.</pre></div><div class='update_description'><i onclick="document.location='7695#1260904264'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-15T19:11:04+00:00">Dec 15, 2009 07:11 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1260904264">&nbsp;</a></div><pre>Richard,

I believe Arvind addressed this for you in the Ops meeting yesterday.  Do you have a plan as to what you&#39;re going to do to achieve your desired results?

Kyle</pre></div><div class='update_description'><i onclick="document.location='7695#1260812107'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-14T17:35:07+00:00">Dec 14, 2009 05:35 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1260812107">&nbsp;</a></div><pre>Scot,

Ok, that sounds good. For the moment I can make it work patching the scripts by hand after every configure-osg.

I still have the problem, however, that my GUMS, VOMS, and VOMRS servers still show up with a question mark on the RSV status map (viewed on the myosg web site). Looking around I see a number of these resources listed for various sites, all showing a question mark. Should these services not be declared to the OIM at the moment? It seems that no RSV reports are being generated that are recognized at the RSV aggregator to validate these services, only ones that test related functionality on the CE. Nor can I see any probe scripts that seem ready-made to generate reports for the gums/voms host.

-Richard J.

Open Science Grid FootPrints wrote&#58;  [Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='7695#1260809947'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-14T16:59:07+00:00">Dec 14, 2009 04:59 PM UTC</time> by <b>Scott Kronenfeld</b><a class="anchor" name="1260809947">&nbsp;</a></div><pre>Hi Richard,
In the near future we&#39;ll be releasing a new RSV tool for simpler
configuration that should help you address the issue of monitoring two
different SEs.  In the meantime, how much effort is it for you to
manually modify the necessary files after you run configure-osg?  Any
work we put into configure_osg_rsv now will be lost as we transition
to the new RSV tool.

Thanks,
scot

On Mon, Dec 14, 2009 at 10&#58;14 AM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7695#1260807256'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-14T16:14:16+00:00">Dec 14, 2009 04:14 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1260807256">&nbsp;</a></div><pre>Scot (& Suchandra),

I tried my best to pitch in on this one, and my patch seemed to work on my end but apparently it does not work for Richard when he tries to patch his configure_osg_rsv, and then calls it via configure-osg. I am not sure where the problem is, and whether configure_osg_rsv needs further fixes. Additionally, as I noted on my email dated Dec 3rd, my patch does not cover all the corner cases. I am going to let you take over from here on in, I don&#39;t have time dedicated any longer to site-level RSV client work as you may already know.

Kyle, removing myself as an assignee. I will continue to get emails from this ticket because rsv-ops is assigned, just in case my input is needed some time later.

Cheers,
-ag</pre></div><div class='update_description'><i onclick="document.location='7695#1260473360'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-10T19:29:20+00:00">Dec 10, 2009 07:29 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1260473360">&nbsp;</a></div><pre>adding arvind to this</pre></div><div class='update_description'><i onclick="document.location='7695#1260214324'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-07T19:32:04+00:00">Dec 7, 2009 07:32 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1260214324">&nbsp;</a></div><pre>Richard,

Sorry about the mix up - about 2 minutes ago, I accidentally sent a response to another ticket to this ticket, please accept my apologies for that.

-ag</pre></div><div class='update_description'><i onclick="document.location='7695#1260214146'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-07T19:29:06+00:00">Dec 7, 2009 07:29 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1260214146">&nbsp;</a></div><pre>Ummmm, can&#39;t say that I&#39;ve ever seen &#34;Unknown&#34; reported before?

bob

-------- Original Message --------
Subject&#58; 	[Usatlas-grid-l] ATLAS RSV Daily report for 12/05/09.
Date&#58; 	Sun, 6 Dec 2009 07&#58;02&#58;38 +0000 (UTC)
From&#58; 	RSV Reporting System &#60;goc@....&#62;
To&#58; 	Arvind Gopu &#60;agopu@....&#62;, OSG GOC &#60;goc@....&#62;,
USATLAS Grid Mailing List &#60;usatlas-grid-l@....&#62;

ATLAS RSV Daily report for 12/05/09.

This report uses the LCG algorithm for computing availability and reliability.  This algorithm is documented at&#58;

<a href='https&#58;//twiki.grid.iu.edu/pub/Operations/RSVPeriodicReporting/Gridview_Service_Availability_Computation-1.pdf' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/pub/Operations/RSVPeriodicReporting/Gridview_Service_Availability_Computation-1.pdf</a>

The algorithm states that availability is the percent of time the resource was in the &#34;UP&#34; state.  &#34;UP&#34; is defined to be the percent of time when the last-run of all the critical test returned &#34;OK&#34;.

The other states a resource may be in are &#34;UNKNOWN&#34; and &#34;DOWN&#34;.  &#34;UNKNOWN&#34; is the percent of time when the last run of at least one critical test returns &#34;UNKNOWN&#34;.  &#34;DOWN&#34; is the percent of time when the last run of at least one critical is a failure.

The resource status is computed continuously; if test X has a failure at 12&#58;05, and has a success at 12&#58;08, then the resource&#39;s maximum availability for the time interval 12&#58;00 to 1&#58;00 is (60-3)/60=95%.  There is no &#34;minimum granularity&#34;.

A resource&#39;s availability is determined by the status of all the registered services.  If they are all UP, the resource is UP.  If just one service is UNKNOWN, the resource is UNKNOWN.  If just one service is DOWN, the resource is DOWN.

A resource&#39;s reliability is&#58;

(Availability) / (Scheduled Availability)

where the Scheduled Availability is

100% - Scheduled Downtime - Percent of time in state UNKNOWN

The following CE tests are marked as critical&#58;
* cacert
<div id='show_875381612' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_875381612'>* ce-perm
* osg-version
* ping
* gram

The following SRMv2 tests are marked as critical&#58;
* srmcp
* srmping

All values in the below table are percentages; if no tests were run, it is
marked with NT.

Metric Results Summary for Resources of type CE
------------------------------------------------------------------------------------------------------------------
|    | Resource Name  |    Daily     | Change from  |    Daily    | cacert | ce-perm | osg-version | ping | gram |
|    |                | Availability | Previous Day | Reliability |        |         |             |      |      |
------------------------------------------------------------------------------------------------------------------
|  1 | AGLT2          | Unknown      | Unknown      | Unknown     |    100 |     100 | NT          |  100 |  100 |
|  2 | AGLT2_CE_2     | Unknown      | Unknown      | Unknown     |    100 |     100 | NT          |  100 |  100 |
. . .
------------------------------------------------------------------------------------------------------------------

Metric Results Summary for Resources of type SRMv2
------------------------------------------------------------------------------------
|   | Resource Name  |    Daily     | Change from  |    Daily    | srmcp | srmping |
|   |                | Availability | Previous Day | Reliability |       |         |
------------------------------------------------------------------------------------
| 1 | AGLT2_SE       |          100 |            0 |         100 |   100 |     100 |
. . .
------------------------------------------------------------------------------------
</div><script type='text/javascript'>
        $('#show_875381612').click(function() {
            $('#detail_875381612').slideDown("normal");
            $('#show_875381612').hide();
            $('#hide_875381612').show();
        });
        $('#hide_875381612').click(function() {
            $('#detail_875381612').slideUp();
            $('#hide_875381612').hide();
            $('#show_875381612').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='7695#1259996526'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-05T07:02:06+00:00">Dec 5, 2009 07:02 AM UTC</time> by <b>GLUEX</b><a class="anchor" name="1259996526">&nbsp;</a></div><pre>Arvind,

I applied the patch that you supplied, but the result was the same.  My
gridftp_dir setting in config.ini is %(default)s.  It seems that
$OPT_GRIDFTP_DIR in configure_osg_rsv is somehow getting set, even
though it is undef&#39;ed at line 276.

-Richard J.</pre></div><div class='update_description'><i onclick="document.location='7695#1259867666'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-03T19:14:26+00:00">Dec 3, 2009 07:14 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1259867666">&nbsp;</a></div><pre>All,

I found out that the configure_osg_rsv script was the culprit - it was passing the default parameter value (/tmp) even if --gridftp-destination-dir is not passed to the configure script. I&#39;ve patched the configure script, and checked it into trunk. NOTE&#58; This patch still does not deal with a situation where in --gridftp-destination-dir  is passed to configure_osg_rsv AND an admin specifies the parameter in their .spec file. Given rsv-control is around the corner, I am choosing not to do any further fixing that would be more involved.

Scot/RSV-dev, please let us know if you&#39;d like us to release this to the ITB for testing, and when you&#39;d like to release it to production, how, etc.

Suchandra, please work with RSV-OPS about ITB testing, etc. referenced above.

Richard, it looks like you&#39;ve created a temporary fix on your end but if you&#39;d like to patch your configure_osg_rsv script locally before this patch is released by the OSG, then feel free to use <a href='https&#58;//dev.grid.iu.edu/' target='_blank' rel='nofollow'>https&#58;//dev.grid.iu.edu/</a>~agopu/tmp/configure_osg_rsv-2009-12-03.patch

I am removing myself off this ticket now. (I&#39;ll continue to get emails anyway because RSV-OPS is assigned - but I consider my part of the work done.

Cheers,
-ag</pre></div><div class='update_description'><i onclick="document.location='7695#1259861105'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-03T17:25:05+00:00">Dec 3, 2009 05:25 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1259861105">&nbsp;</a></div><pre>Suchandra,

Arvind is not on this ticket, so I&#39;m adding him with this update.

kyle</pre></div><div class='update_description'><i onclick="document.location='7695#1259703727'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-01T21:42:07+00:00">Dec 1, 2009 09:42 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1259703727">&nbsp;</a></div><pre>I went through the configure_osg_rsv script and it&#39;s doing the translation between the two option names.  However, I&#39;m not sure that it allows more than one directory to be specified.   If that&#39;s the case, you&#39;ll need to manually do the configuration.  Arvind, do you know if the gridftp probe can recognize multiple gridftp directories being passed to it?

Suchandra

On Dec 1, 2009, at 3&#58;30 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; FootPrints Ticket Description&#58;</font>
<font color='#7F7E6F'>&#62; Ok, please find the tail -n $VDT_LOCATION/vdt-install.log output at the link below.  I only see the option --gridftp-dir in this listing, but in the submission file this option is not seen.  It seems to be translated into gridftp-destination-dir somewhere on the way to the submission file.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//zeus.phys.uconn.edu/' target='_blank' rel='nofollow'>http&#58;//zeus.phys.uconn.edu/</a>~jonesrt/outbox/vdt-install-tail-n1000.log</font>
<font color='#7F7E6F'>&#62;</font>

---
Suchandra Thapa
sthapa@....
Computation Institute
Searle Chemistry Laboratory #201A
5735 South Ellis Avenue
Chicago, IL 60637</pre></div><div class='update_description'><i onclick="document.location='7695#1259703006'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-01T21:30:06+00:00">Dec 1, 2009 09:30 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1259703006">&nbsp;</a></div><pre>Ok, please find the tail -n $VDT_LOCATION/vdt-install.log output at the link below.  I only see the option --gridftp-dir in this listing, but in the submission file this option is not seen.  It seems to be translated into gridftp-destination-dir somewhere on the way to the submission file.

<a href='http&#58;//zeus.phys.uconn.edu/' target='_blank' rel='nofollow'>http&#58;//zeus.phys.uconn.edu/</a>~jonesrt/outbox/vdt-install-tail-n1000.log

-Richard Jones

Open Science Grid FootPrints wrote&#58;  [Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='7695#1259689866'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-01T17:51:06+00:00">Dec 1, 2009 05:51 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1259689866">&nbsp;</a></div><pre>Hi,

--gridftp-dir is passed to configure_osg_rsv but not --gridftp-destination-dir by configure-osg.  Richard, if you rerun configure-osg with -d in addition to -c, the vdt-install.log will have output from configure-osg detailing what options are being passed to configuration scripts.  Could you run this and send me the last 1000 lines from the file?

Suchandra

On Dec 1, 2009, at 9&#58;32 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7695#1259681536'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-01T15:32:16+00:00">Dec 1, 2009 03:32 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1259681536">&nbsp;</a></div><pre>Richard,

Good catch - sorry you had to debug this on your end. I have added Suchandra Thapa, the developer of configure-osg.

Suchandra, what exact options do you pass to configure_osg_rsv? Do you pass --gridftp-destination-dir even if it is set to default?

-ag</pre></div><div class='update_description'><i onclick="document.location='7695#1259680866'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-01T15:21:06+00:00">Dec 1, 2009 03:21 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1259680866">&nbsp;</a></div><pre>I have made some progress debugging this issue.  The
--gridftp-destination-dir option that I added to the specs file was
indeed showing up in the $VDT_LOCATION/osg-rsv/submissions/probes submit
file, but the argument list had a second --gridftp-destination-dir
option later on in the argument list that overrode my value, setting it
back to /tmp.  Here is what is generated in the submit file by running
configure-osg&#58;
<font color='#7F7E6F'>&#62; Arguments =</font>
<font color='#7F7E6F'>&#62; /usr/local/osg-1.2/osg-rsv/bin/probes/gridftp-simple-probe</font>
<font color='#7F7E6F'>&#62; --gridftp-destination-dir /test --generate-text-file --text-file-loc</font>
<font color='#7F7E6F'>&#62; /usr/local/osg-1.2/osg-rsv/output/probes  -m</font>
<font color='#7F7E6F'>&#62; org.osg.globus.gridftp-simple --verbose -gridftp-destination-dir /tmp</font>
<font color='#7F7E6F'>&#62; --ggs --gsl /usr/local/osg-1.2/osg-rsv/output/gratia --python-loc</font>
<font color='#7F7E6F'>&#62; /usr/bin/python --uri grinch.phys.uconn.edu --proxy /tmp/rsvproxy</font>

I don&#39;t want that repeated option.  For the moment, I will just edit the
submit file by hand every time I have to rerun configure-osg, but
eventually it should be fixed in the configure scripts.</pre></div><div class='update_description'><i onclick="document.location='7695#1259593387'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-30T15:03:07+00:00">Nov 30, 2009 03:03 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1259593387">&nbsp;</a></div><pre>Thanks for your help.  I implemented your solution exactly as stated,
and the new probe appeared in my condor_cron_q after restarting
osg-rsv.  However the probe to my second gridftp host ignores the
gridftp-destination-dir and tries to write to /tmp.  Listings are below.

[configuration check on my CE grendl.phys.uconn.edu]

[root@grendl ~]# ls -l $VDT_LOCATION/osg-rsv/specs/grinch.phys.uconn.edu
total 4
-rw-r--r-- 1 root root 57 Nov 30 09&#58;37
gridftp-simple-probe@....
-rw-r--r-- 1 root root  0 Nov 22 22&#58;55
srm-ping-probe@....
-rw-r--r-- 1 root root  0 Nov 22 22&#58;55
srmcp-srm-probe@....
[root@grendl ~]# cat
$VDT_LOCATION/osg-rsv/specs/grinch.phys.uconn.edu/gridftp-simple-probe&#92;@org.osg.globus.gridftp-simple.spec
--gridftp-destination-dir /pnfs/phys.uconn.edu/data/test[root@grendl ~]#
[root@grendl ~]# grep ^gridftp_host $VDT_LOCATION/osg/etc/config.ini
gridftp_hosts = grendl.phys.uconn.edu,grinch.phys.uconn.edu

[output from probe]

metricName&#58; org.osg.globus.gridftp-simple
metricType&#58; status
timestamp&#58; 2009-11-30T14&#58;52&#58;40Z
metricStatus&#58; CRITICAL
serviceType&#58; OSG-GridFtp
serviceURI&#58; grinch.phys.uconn.edu
gatheredAt&#58; grendl.phys.uconn.edu
summaryData&#58; CRITICAL
detailsData&#58; ERROR&#58; Cannot copy file&#58; file&#58;////usr/local/osg-1.2/osg-rsv/bin/probes//gridftp-probe-test-file to
<a href='gsiftp&#58;//grinch.phys.uconn.edu&#58;2811//tmp/1259592760-gridftp-probe-test-file-remote.16387' target='_blank' rel='nofollow'>gsiftp&#58;//grinch.phys.uconn.edu&#58;2811//tmp/1259592760-gridftp-probe-test-file-remote.16387</a> ... Bailing now. Actual error message was&#58;
EOT

<div id='show_247672001' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_247672001'>Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_247672001').click(function() {
            $('#detail_247672001').slideDown("normal");
            $('#show_247672001').hide();
            $('#hide_247672001').show();
        });
        $('#hide_247672001').click(function() {
            $('#detail_247672001').slideUp();
            $('#hide_247672001').hide();
            $('#show_247672001').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='7695#1259590304'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-30T14:11:44+00:00">Nov 30, 2009 02:11 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1259590304">&nbsp;</a></div><pre>Richard,

I was hoping Scot or someone else in rsv-ops would pick this up ... I will go ahead and try to help.

You are trying to configure additional specification for one metric (gridftp) for one host. Let&#39;s say your SRM&#39;s gridftp door&#39;s fqdn is &#34;foo.grid.iu.edu&#34;, running on the default port and allows test files to be written to /path/test

1) mkdir -p ${VDT_LOCATION}/osg-rsv/specs/foo.grid.iu.edu/
2) echo -n &#34; --gridftp-destination-dir /path/test&#34; &#92;
<font color='#7F7E6F'>&#62;&#62; ${VDT_LOCATION}/osg-rsv/specs/foo.grid.iu.edu/gridftp-simple-probe@....ftp-simple</font>
3) Ensure, you add &#34;foo.grid.iu.edu&#34; to gridftp_hosts in config.ini; Run configure-osg (or configure_osg_rsv) as you would normally do, and restart osg-rsv (vdt-control --off osg-rsv; vdt-control --on osg-rsv).

This will cause test files to be written to /path/test on the gridftp running on your SRM head node while continuing to write test files to /tmp on your GRAM gatekeeper node.

Hope this helps.

RSV-OPS, for future reference, this kind of an operation is documented here&#58; <a href='https&#58;//twiki.grid.iu.edu/bin/view/MonitoringInformation/InstallAndConfigureRsvAdvanced#Adding_custom_specifications_to' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/MonitoringInformation/InstallAndConfigureRsvAdvanced#Adding_custom_specifications_to</a> -- please feel free to update it if you see any holes in the documentation.

-ag</pre></div><div class='update_description'><i onclick="document.location='7695#1259589607'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-30T14:00:07+00:00">Nov 30, 2009 02:00 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1259589607">&nbsp;</a></div><pre>Can I get an update on this?  Last indication was that it was being
redirected to the RSV working group.  Anyone know who that contact is?</pre></div><div class='update_description'><i onclick="document.location='7695#1259079666'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-24T16:21:06+00:00">Nov 24, 2009 04:21 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1259079666">&nbsp;</a></div><pre>Hello,

There is a way to customize RSV so the probe will write test files to different filesystems/directories - someone else in RSV-OPS should be able to help you with that. We (GOC) try to deal with basic issues and/or collector side issues.   Ok, that would be great.  Can you help me with routing this ticket to the correct expert?

thanks,
Richard

Open Science Grid FootPrints wrote&#58;  [Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='7695#1259078227'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-24T15:57:07+00:00">Nov 24, 2009 03:57 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1259078227">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; some.  That is why I wanted both.</font>
<font color='#7F7E6F'>&#62;</font>

Fair enough.

<font color='#7F7E6F'>&#62;&#62; gridftp_hosts = my.ce.iu.edu, my.se-gridftp.iu.edu</font>
<font color='#7F7E6F'>&#62;&#62;  . . .</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Does this make sense? Or, am I misreading your question?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62; I don&#39;t believe this works, does it?  Configuring multiple gridftp_hosts</font>
<font color='#7F7E6F'>&#62; in config.ini forces them all to expose the same directories for the</font>
<font color='#7F7E6F'>&#62; probes.  This does not work because my CE exposes a very different file</font>
<font color='#7F7E6F'>&#62; base (linux filesystems) than my SE (dcache filesystems).  The</font>
<font color='#7F7E6F'>&#62; config.ini configuration seems to require that all gridftp_hosts expose</font>
<font color='#7F7E6F'>&#62; the same filesystems.</font>
<font color='#7F7E6F'>&#62;</font>

There is a way to customize RSV so the probe will write test files to
different filesystems/directories - someone else in RSV-OPS should be
able to help you with that. We (GOC) try to deal with basic issues
and/or collector side issues.

-ag</pre></div><div class='update_description'><i onclick="document.location='7695#1259076608'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-24T15:30:08+00:00">Nov 24, 2009 03:30 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1259076608">&nbsp;</a></div><pre>Hello,

<font color='#7F7E6F'>&#62; you can configure SRM probes against your SE; and remove the gridftp service mapping on OIM ... then you should be all set</font>
In some sense srm is a superset of gridftp, so this suggestion makes
sense.  But having the srm service running does not imply that port 2811
is open and accepting connections, does it?  Some of my collaborators
are more comfortable with the semantics of gridftp than with srm, and
having port 2811 advertised (and monitored) might enhance usability for
some.  That is why I wanted both.

<font color='#7F7E6F'>&#62; gridftp_hosts = my.ce.iu.edu, my.se-gridftp.iu.edu</font>
<font color='#7F7E6F'>&#62;  . . .</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Does this make sense? Or, am I misreading your question?</font>
I don&#39;t believe this works, does it?  Configuring multiple gridftp_hosts
in config.ini forces them all to expose the same directories for the
probes.  This does not work because my CE exposes a very different file
base (linux filesystems) than my SE (dcache filesystems).  The
config.ini configuration seems to require that all gridftp_hosts expose
the same filesystems.

-Richard Jones

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7695#1259075558'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-24T15:12:38+00:00">Nov 24, 2009 03:12 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1259075558">&nbsp;</a></div><pre>Richard,

If you configure your RSV client to do SRM tests on your SE, then it should test gridftp as part of that since the SRM client depends on GridFTP -- is this not an accurate statement? If it is, then you can configure SRM probes against your SE; and remove the gridftp service mapping on OIM ... then you should be all set.

Additionally, if your SE allows direct gridftp transfers from external hosts, and you feel it would be best to retain the OIM registration of gridftp on the SE resource, then you can feel free to configure the GridFtp probes against it as well.

. . .
gridftp_hosts = my.ce.iu.edu, my.se-gridftp.iu.edu
. . .

Does this make sense? Or, am I misreading your question?

Of course, the gridftp probe assumes it can write to /tmp on the remote host. If that needs to be changed, then you need to set custom parameters for that probe. RSV-OPS should be able to help you with that.

-ag</pre></div><div class='update_description'><i onclick="document.location='7695#1259075074'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-24T15:04:34+00:00">Nov 24, 2009 03:04 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1259075074">&nbsp;</a></div><pre>Arvind,

Passing this to you to see if you can help out.  I thought it was a storage issue initially, but I was wrong.

Kyle</pre></div><div class='update_description'><i onclick="document.location='7695#1258409168'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-16T22:06:08+00:00">Nov 16, 2009 10:06 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1258409168">&nbsp;</a></div><pre>Hi Kyle
I wish I could be of some help, but this looks like a RSV
configuration issue.
If I understand correctly, there is a CE node and a SE node (2
different nodes) and the question is how to configure RSV to monitor
the gridftp server running on the SE node.

Arvind would be a better person to ask this. If Arvind cannot help,
let me know and I will find someone who can.

-Neha
On Nov 16, 2009, at 10&#58;32 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7695#1258389157'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-16T16:32:37+00:00">Nov 16, 2009 04:32 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1258389157">&nbsp;</a></div><pre>I&#39;m adding Neha to this as it is dealing with a Storage Element.  Perhaps she can help.</pre></div><div class='update_description'><i onclick="document.location='7695#1257262792'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-03T15:39:52+00:00">Nov 3, 2009 03:39 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1257262792">&nbsp;</a></div><pre>RSV Ops,

Could you please help Richard with sorting this out?

Kyle</pre></div><div class='update_description'><i onclick="document.location='7695#1257205293'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-02T23:41:33+00:00">Nov 2, 2009 11:41 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1257205293">&nbsp;</a></div><pre>The RSV status of my UConn-OSG_SE resource group is UNKNOWN because RSV reports are not being made for the GridFTP service on my SE.  My SE is a dcache head node with both SRM and GridFTP (among others) doors running.  My problem is that my site uses GridFTP in two different ways.

1. On the CE, to provide access to the $APP and $DATA areas, so jobs can stage their data and application files in and out.
2. On the SE, as one supported access protocol to the dcache file store.

The probe for #1 is configured in my config.ini, and is reporting success.  The SRM probe for my SE is also reporting success.  But I cannot see how in config.ini to set up a probe for #2 (Gridftp on the SE, not CE) unless I first disable the SRM probe to the SE.  See <a href='http&#58;//gryphn.phys.uconn.edu/' target='_blank' rel='nofollow'>http&#58;//gryphn.phys.uconn.edu/</a>~jonesrt/outbox/config.ini for a posting of my config.ini on my RSV host.

What should I do?  Run a second RSV instance on the SE?  Report only one or the other (SRM or GridFTP) SE resource to OIM, but not both?  Another option?</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F7695">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
