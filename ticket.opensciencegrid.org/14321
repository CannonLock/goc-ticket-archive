<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[14321] Possible condor misconfiguration at earth.crc.nd.edu</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=14321" method="post">
<div class="page-header">
    <h3><span class="muted">14321</span> / Possible condor misconfiguration at earth.crc.nd.edu</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Steve Timm</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">NWICG_Earth</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">NWICG</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Steve Timm</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">NWICG</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Wait for user response</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-06-07</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">NWICG <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Matyas Selmeci <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/14321", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/14321?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/14321?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Possible%20condor%20misconfiguration%20at%20earth.crc.nd.edu%20ISSUE%3D14321%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='14321#1370297588'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-03T22:13:08+00:00">Jun 3, 2013 10:13 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1370297588">&nbsp;</a></div><pre>Ok. I&#39;ll close the ticket then.</pre></div><div class='update_description'><i onclick="document.location='14321#1370284677'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-03T18:37:57+00:00">Jun 3, 2013 06:37 PM UTC</time><a class="anchor" name="1370284677">&nbsp;</a></div><pre>Sorry  I thought I had made the notation in this ticket as well.
In ticket 15200 which was about this very same problem, Serguei already made the configuration fix and this ticket can be closed.  The unknown VO records have stopped.

Steve Timm

by /DC=org/DC=doegrids/OU=People/CN=Steven Timm 74183</pre></div><div class='update_description'><i onclick="document.location='14321#1370284297'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-03T18:31:37+00:00">Jun 3, 2013 06:31 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1370284297">&nbsp;</a></div><pre>Steve, thanks for all the info!

Kevin, can you try one of the solutions that Steve listed?

-Mat</pre></div><div class='update_description'><i onclick="document.location='14321#1369318566'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-23T14:16:06+00:00">May 23, 2013 02:16 PM UTC</time><a class="anchor" name="1369318566">&nbsp;</a></div><pre>Here is the tail end of the query&#58;

mysql&#62; select LocalUserID,CommonName,ReportableVOName,VOName,ProbeName  from JobUsageRecord J , JobUsageRecord_Meta M  where ProbeName=&#39;condor&#58;earth.crc.nd.edu&#39; and M.dbid=J.dbid and EndTime&#62;=&#39;2013-05-23 00&#58;00&#58;00&#39;;

| mwolf3      | Unknown                          | NULL             | Unknown                        | condor&#58;earth.crc.nd.edu |
| mwolf3      | Unknown                          | NULL             | Unknown                        | condor&#58;earth.crc.nd.edu |
| mwolf3      | Unknown                          | NULL             | Unknown                        | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| mwolf3      | Unknown                          | NULL             | Unknown                        | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997          | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| mwolf3      | Unknown                          | NULL             | Unknown                        | condor&#58;earth.crc.nd.edu |
| mwolf3      | Unknown                          | NULL             | Unknown                        | condor&#58;earth.crc.nd.edu |
| mwolf3      | Unknown                          | NULL             | Unknown                        | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| mwolf3      | Unknown                          | NULL             | Unknown                        | condor&#58;earth.crc.nd.edu |
| mwolf3      | Unknown                          | NULL             | Unknown                        | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
<div id='show_979386483' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_979386483'>| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997          | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
| awoodard    | /CN=Anna Woodard 859997/CN=proxy | cms              | /cms/Role=NULL/Capability=NULL | condor&#58;earth.crc.nd.edu |
+-------------+----------------------------------+------------------+--------------------------------+-------------------------+
2431 rows in set (2 min 56.30 sec)

What this query is telling me is that some of the local CMS users do run with proxies (awoodard) and others
mwolf3 or tpearso4, do not.

PER_JOB_HISTORY_DIR is set correctly.  certificate-based usage whether local or grid is also OK.
There are three options remaining that you can do to fix the problem.

1) you can create a file called /etc/osg/local-user-vo-map
that adds individual user id&#39;s such as mwolf3, tpearso4 to the user-vo-map and
declares them as CMS.  If they are really CMS usage that is what you should do.

Details here  <a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/Edg-mkgridmap' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/Edg-mkgridmap</a>

2) You could require all your users to always have a grid certificate to submit, even if the submit is local.
that can  be done by setting SEC_DEFAULT_AUTHENTICATION_METHODS in the condor_config to GSI

3) Or you could change your /etc/gratia/condor/ProbeConfig to have
SuppressUnknownVORecords=&#34;1&#34;
SuppressNoDNRecords=&#34;1&#34;
and this problem will go away and we will stop bugging you.

Steve Timm

by /DC=org/DC=doegrids/OU=People/CN=Steven Timm 74183
</div><script type='text/javascript'>
        $('#show_979386483').click(function() {
            $('#detail_979386483').slideDown("normal");
            $('#show_979386483').hide();
            $('#hide_979386483').show();
        });
        $('#hide_979386483').click(function() {
            $('#detail_979386483').slideUp();
            $('#hide_979386483').hide();
            $('#show_979386483').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='14321#1368660370'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-15T23:26:10+00:00">May 15, 2013 11:26 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1368660370">&nbsp;</a></div><pre>Mat—what I can get you is dumps of the JobUsageRecord from the gratia database, it’s not the xml but it
Has all the same info in a sql dump format.  Tomorrow sometime.  Remind me if you don’ t hear from me.

Steve</pre></div><div class='update_description'><i onclick="document.location='14321#1368660189'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-15T23:23:09+00:00">May 15, 2013 11:23 PM UTC</time> by <b>kevin.lannon.1@....</b><a class="anchor" name="1368660189">&nbsp;</a></div><pre>There are users who submit jobs directly via condor without using any
aspects of the grid.  Presumably these are the ones that show up as VO
unknown.  These are CMS jobs (as in, they are jobs run by people working
on CMS).  Is it important that they be labeled as such.  Basically any
locally submitted job from earth will be a CMS job.  Is there some way
just to automatically count them as such?

On 5/15/13 7&#58;13 PM, Serguei Fedorov wrote&#58;
<font color='#7F7E6F'>&#62; Hi Kevin,</font>
<font color='#7F7E6F'>&#62; Could you tell them how are you running jobs ?</font>
<font color='#7F7E6F'>&#62; their e-mail&#58; osg@....</font>
<font color='#7F7E6F'>&#62; &#60;mailto&#58;osg@....&#62; (do not change subject)</font>
<font color='#7F7E6F'>&#62; Thanks</font>
<font color='#7F7E6F'>&#62; -Serguei</font>
<font color='#7F7E6F'>&#62; ------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; *From&#58;* Open Science Grid FootPrints [osg@....]</font>
<font color='#7F7E6F'>&#62; *Sent&#58;* Wednesday, May 15, 2013 6&#58;11 PM</font>
<font color='#7F7E6F'>&#62; *To&#58;* Serguei Fedorov</font>
<font color='#7F7E6F'>&#62; *Subject&#58;* Open Science Grid&#58; Possible condor misconfiguration at</font>
<font color='#7F7E6F'>&#62; earth.crc.nd.edu ISSUE=14321 PROJ=71</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='14321#1368655917'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-15T22:11:57+00:00">May 15, 2013 10:11 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1368655917">&nbsp;</a></div><pre>Hi Serguei,
From the gratia source code it looks like the VO that gets reported will be Unknown if none of the X509UserProxy attributes are defined. How are users running their jobs? Are they running voms-proxy-init or grid-proxy-init first?

Also, Steve, is there any way I can look at any of the raw records that the probe sends out?
-Mat</pre></div><div class='update_description'><i onclick="document.location='14321#1368195470'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-10T14:17:50+00:00">May 10, 2013 02:17 PM UTC</time><a class="anchor" name="1368195470">&nbsp;</a></div><pre>You must see osg-profile.txt.gz attached now.
BTW&#58;  condor_q -l |grep x509UserProxy returns nothing for local users

-Serguei

by /DC=org/DC=doegrids/OU=People/CN=Serguei Fedorov 736165</pre></div><div class='update_description'><i onclick="document.location='14321#1368146663'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-10T00:44:23+00:00">May 10, 2013 12:44 AM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1368146663">&nbsp;</a></div><pre>I don&#39;t see an attachment. You might have to attach the file via the web interface instead of by email.
-Mat</pre></div><div class='update_description'><i onclick="document.location='14321#1368120011'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-09T17:20:11+00:00">May 9, 2013 05:20 PM UTC</time> by <b>serguei.fedorov.1@....</b><a class="anchor" name="1368120011">&nbsp;</a></div><pre>The attached file is the profiler

-Serguei

From&#58; Open Science Grid FootPrints [mailto&#58;osg@....]
Sent&#58; Thursday, May 09, 2013 1&#58;03 PM
To&#58; Serguei Fedorov
Subject&#58; Open Science Grid&#58; Possible condor misconfiguration at
earth.crc.nd.edu ISSUE=14321 PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='14321#1368118988'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-09T17:03:08+00:00">May 9, 2013 05:03 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1368118988">&nbsp;</a></div><pre>So are _all_ jobs from those users being reported as having an unknown VO, or just some of them?

Also, can you attach the output of osg-system-profiler on the machine running gratia?

Thanks,
-Mat</pre></div><div class='update_description'><i onclick="document.location='14321#1367962028'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-07T21:27:08+00:00">May 7, 2013 09:27 PM UTC</time> by <b>serguei.fedorov.1@....</b><a class="anchor" name="1367962028">&nbsp;</a></div><pre>I am running those commands when there are couple users from CMS

condor_q

condor_q&#58;
/pscratch/ndcms/gLite/gLite-UI/globus/lib/libglobus_gssapi_gsi_gcc64dbg.so.0&#58;
no version information available (required by
/opt/osg/condor-7.8.7/bin/../lib/libcondor_utils_7_8_7.so)

-- Submitter&#58; ndcms.crc.nd.edu &#58; &#60;129.74.85.4&#58;10187&#62; &#58; ndcms.crc.nd.edu

ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD

48718.0   uscms01         4/23 07&#58;26   0+03&#58;37&#58;13 I  0   2929.7 data

54831.0   uscms01         5/7  15&#58;19   0+02&#58;04&#58;36 R  0   2197.3 data

54833.0   uscms01         5/7  15&#58;19   0+02&#58;04&#58;35 R  0   2197.3 data

3 jobs; 0 completed, 0 removed, 1 idle, 2 running, 0 held, 0 suspended

condor_q -l|grep x509UserProxy

condor_q&#58;
/pscratch/ndcms/gLite/gLite-UI/globus/lib/libglobus_gssapi_gsi_gcc64dbg.so.0&#58;
no version information available (required by
/opt/osg/condor-7.8.7/bin/../lib/libcondor_utils_7_8_7.so)

x509UserProxyEmail = &#34;tmartin@....&#34;

x509UserProxyVOName = &#34;cms&#34;

x509UserProxyFQAN =
&#34;/DC=org/DC=doegrids/OU=Services/CN=uscmspilot49/glidein-1.t2.ucsd.edu,/cms/Role=pilot/Capability=NULL,/cms/Role=NULL/Capability=NULL,/cms/TEAM/Role=NULL/Capability=NULL,/cms/uscms/Role=NULL/Capability=NULL&#34;

<div id='show_2130133847' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2130133847'>x509UserProxyFirstFQAN = &#34;/cms/Role=pilot/Capability=NULL&#34;

x509UserProxyExpiration = 1366973028

x509UserProxyEmail = &#34;tmartin@....&#34;

x509UserProxyVOName = &#34;cms&#34;

x509UserProxyFQAN =
&#34;/DC=org/DC=doegrids/OU=Services/CN=uscmspilot07/glidein-1.t2.ucsd.edu,/cms/Role=pilot/Capability=NULL,/cms/Role=NULL/Capability=NULL,/cms/TEAM/Role=NULL/Capability=NULL,/cms/uscms/Role=NULL/Capability=NULL&#34;

x509UserProxyFirstFQAN = &#34;/cms/Role=pilot/Capability=NULL&#34;

x509UserProxyExpiration = 1368204194

x509UserProxyEmail = &#34;tmartin@....&#34;

x509UserProxyVOName = &#34;cms&#34;

x509UserProxyFQAN =
&#34;/DC=org/DC=doegrids/OU=Services/CN=uscmspilot06/glidein-1.t2.ucsd.edu,/cms/Role=pilot/Capability=NULL,/cms/Role=NULL/Capability=NULL,/cms/TEAM/Role=NULL/Capability=NULL,/cms/uscms/Role=NULL/Capability=NULL&#34;

x509UserProxyFirstFQAN = &#34;/cms/Role=pilot/Capability=NULL&#34;

x509UserProxyExpiration = 1368204190

From&#58; Open Science Grid FootPrints [mailto&#58;osg@....]
Sent&#58; Tuesday, May 07, 2013 5&#58;06 PM
To&#58; Serguei Fedorov
Subject&#58; Open Science Grid&#58; Possible condor misconfiguration at
earth.crc.nd.edu ISSUE=14321 PROJ=71

[Duplicate message snipped]
</div><script type='text/javascript'>
        $('#show_2130133847').click(function() {
            $('#detail_2130133847').slideDown("normal");
            $('#show_2130133847').hide();
            $('#hide_2130133847').show();
        });
        $('#hide_2130133847').click(function() {
            $('#detail_2130133847').slideUp();
            $('#hide_2130133847').hide();
            $('#show_2130133847').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='14321#1367960808'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-07T21:06:48+00:00">May 7, 2013 09:06 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1367960808">&nbsp;</a></div><pre>Hi Serguei,

Can you run a condor_q on some of the jobs from those users and tell me what the &#34;x509UserProxyFirstFQAN&#34; and &#34;x509UserProxyVOName&#34; fields in the job classads are, if they exist?

-Mat</pre></div><div class='update_description'><i onclick="document.location='14321#1367865051'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-06T18:30:51+00:00">May 6, 2013 06:30 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1367865051">&nbsp;</a></div><pre>Hi Mat, Serguei,

Any updates on this?

Suchandra</pre></div><div class='update_description'><i onclick="document.location='14321#1367264227'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-29T19:37:07+00:00">Apr 29, 2013 07:37 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1367264227">&nbsp;</a></div><pre>Maybe Serguei Fedorov of Notre Dame will actually be at condor week too?
He goes there sometimes.. look for him.  If not, maybe other Notre Dame
staff can help.

Steve Timm

On Mon, 29 Apr 2013, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='14321#1367263969'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-29T19:32:49+00:00">Apr 29, 2013 07:32 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1367263969">&nbsp;</a></div><pre>I&#39;ll ask the condor team for help with this; however, HTCondor week starts tomorrow so we may be slow to respond.
-Mat</pre></div><div class='update_description'><i onclick="document.location='14321#1366320317'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-18T21:25:17+00:00">Apr 18, 2013 09:25 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1366320317">&nbsp;</a></div><pre>I&#39;ll take a look.
-Mat</pre></div><div class='update_description'><i onclick="document.location='14321#1366138664'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-16T18:57:44+00:00">Apr 16, 2013 06:57 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1366138664">&nbsp;</a></div><pre>OSG Software,

Steve Timm has requested that you take a look at this.  Could you please look into this and assign someone to the ticket?

Thanks!

Kyle</pre></div><div class='update_description'><i onclick="document.location='14321#1366125670'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-16T15:21:10+00:00">Apr 16, 2013 03:21 PM UTC</time> by <b>serguei.fedorov.1@....</b><a class="anchor" name="1366125670">&nbsp;</a></div><pre>I can provide any information from my site in order to have that fixed.

We have condor version 7.8.7 and OSG 3.1.16

Since that condor version we started to have warning for any condor command
like&#58;

[root@ndcms ~]# condor_version

condor_version&#58;
/pscratch/ndcms/gLite/gLite-UI/globus/lib/libglobus_gssapi_gsi_gcc64dbg.so.0&#58;
no version information available (required by
/opt/osg/condor-7.8.7/bin/../lib/libcondor_utils_7_8_7.so)

$CondorVersion&#58; 7.8.7 Dec 12 2012 BuildID&#58; 86173 $

$CondorPlatform&#58; x86_64_rhap_5.8 $

I believe that since version of 7.8.7 condor started to use its own libraries.

I was able to have that fixed by changing LD_LIBRARY_PATH, but that fix caused
the problem for grid-proxy-init authentication and CRAB software usage for CMS
group

So I rolled back the changes.  I am not sure if that or something else is
causing the problem

-Serguei

From&#58; Open Science Grid FootPrints [mailto&#58;osg@....]
Sent&#58; Tuesday, April 16, 2013 11&#58;02 AM
To&#58; Serguei Fedorov
Subject&#58; Open Science Grid&#58; Possible condor misconfiguration at
earth.crc.nd.edu ISSUE=14321 PROJ=71

<div id='show_240239971' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_240239971'>[Duplicate message snipped]
</div><script type='text/javascript'>
        $('#show_240239971').click(function() {
            $('#detail_240239971').slideDown("normal");
            $('#show_240239971').hide();
            $('#hide_240239971').show();
        });
        $('#hide_240239971').click(function() {
            $('#detail_240239971').slideUp();
            $('#hide_240239971').hide();
            $('#show_240239971').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='14321#1366124568'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-16T15:02:48+00:00">Apr 16, 2013 03:02 PM UTC</time><a class="anchor" name="1366124568">&nbsp;</a></div><pre>This site continues to report unknown VO records on a regular basis.  At this point I would ask the OSG Software team to help triage this as I have never seen a condor-based site that had a problem quite like this before.  (usually the failure mode of the condor probe is to grab some garbage VO name
and to send that out.)  This could be some strange condor topology in the site or it could be a misconfigured PER_JOB_HISTORY_DIR but
I have not been able to figure out by probing externally.

Steve Timm

by /DC=org/DC=doegrids/OU=People/CN=Steven Timm 74183</pre></div><div class='update_description'><i onclick="document.location='14321#1366117216'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-16T13:00:16+00:00">Apr 16, 2013 01:00 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1366117216">&nbsp;</a></div><pre>Not yet.  Please hold the ticket open a while longer.

Steve Timm</pre></div><div class='update_description'><i onclick="document.location='14321#1366115754'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-16T12:35:54+00:00">Apr 16, 2013 12:35 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1366115754">&nbsp;</a></div><pre>Steve/All,

Has anything more been found after more probing on the site?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='14321#1364354943'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-27T03:29:03+00:00">Mar 27, 2013 03:29 AM UTC</time><a class="anchor" name="1364354943">&nbsp;</a></div><pre>This is a very strange situation.  Normally for users who do not have VO information, the condor probe should grab  their group id and list that as the VO.
I will try to probe your site a bit more and see what I can find.

Steve

by /DC=org/DC=doegrids/OU=People/CN=Steven Timm 74183</pre></div><div class='update_description'><i onclick="document.location='14321#1363987928'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-22T21:32:08+00:00">Mar 22, 2013 09:32 PM UTC</time> by <b>kevin.lannon.1@....</b><a class="anchor" name="1363987928">&nbsp;</a></div><pre>Hello Steve, Serguei,

Just to clarify&#58;  Our users have a mixture of certificates from CERN or
DOEGrids (although I guess the latter are going away...) and all belong
to the CMS VO.

However, perhaps the issue is that, as Serguei pointed out, most of the
users are local, meaning they submit directly to the condor queue
without using any of the grid machinery.  (In other words, they use
directly condor_submit.)  Would that explain what you&#39;re seeing?  What
is the preferred way to address that?

Kevin

On 3/22/13 11&#58;05 AM, Serguei Fedorov wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Steve,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; They are our local users and my understanding is that all of them have</font>
<font color='#7F7E6F'>&#62; CMS VO.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; As far as I know they have CERN certificates.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I am forwarding this email to their manager Prof. Kevin Lannon, he may</font>
<font color='#7F7E6F'>&#62; correct me.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -Serguei</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *From&#58;*Open Science Grid FootPrints [mailto&#58;osg@....]</font>
<font color='#7F7E6F'>&#62; *Sent&#58;* Friday, March 22, 2013 10&#58;47 AM</font>
<font color='#7F7E6F'>&#62; *To&#58;* Serguei Fedorov</font>
<font color='#7F7E6F'>&#62; *Subject&#58;* Open Science Grid&#58; Possible condor misconfiguration at</font>
<font color='#7F7E6F'>&#62; earth.crc.nd.edu ISSUE=14321 PROJ=71</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='14321#1363980496'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-22T19:28:16+00:00">Mar 22, 2013 07:28 PM UTC</time><a class="anchor" name="1363980496">&nbsp;</a></div><pre>Hi Serguei

Usually when a condor probe is running on a site it will try to pick the name of the group ID as the virtual organization, if there is no other information
available.  Do these users submit jobs on the same condor_schedd that the grid jobs do?
You can tag the users as CMS users by modifying your /var/lib/osg/user-vo-map to list them as part of cms and then it should work.

Steve Timm

by /DC=org/DC=doegrids/OU=People/CN=Steven Timm 74183</pre></div><div class='update_description'><i onclick="document.location='14321#1363964888'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-22T15:08:08+00:00">Mar 22, 2013 03:08 PM UTC</time> by <b>serguei.fedorov.1@....</b><a class="anchor" name="1363964888">&nbsp;</a></div><pre>Steve,

They are our local users and my understanding is that all of them have CMS VO.

As far as I know they have CERN certificates.

I am forwarding this email to their manager Prof. Kevin Lannon, he may correct
me.

-Serguei

From&#58; Open Science Grid FootPrints [mailto&#58;osg@....]
Sent&#58; Friday, March 22, 2013 10&#58;47 AM
To&#58; Serguei Fedorov
Subject&#58; Open Science Grid&#58; Possible condor misconfiguration at
earth.crc.nd.edu ISSUE=14321 PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='14321#1363963634'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-22T14:47:14+00:00">Mar 22, 2013 02:47 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1363963634">&nbsp;</a></div><pre>We are seeing a large number of wall hours being reported from your site to the &#34;Unknown&#34; VO.   The user names include
abrinkel, awoodard,jkolb,klannon, mwolf3,tpearso4, wluo1

Should any of this usage be considered as Open Science Grid usage?  If so, we need to figure out what if anything
is wrong with your configuration so that the usage will be reported to the correct VO.
If not, then we need to change the configuration of your Gratia probe to have SuppressUnknownVORecords=&#34;1&#34;
and SuppressNoDNRecords=&#34;1&#34;.  It is fairly unusual to see this problem on a site that is running Condor, that is
why we want to be sure about it.

Steve Timm
Gratia operations

by /DC=org/DC=doegrids/OU=People/CN=Steven Timm 74183</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F14321">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 14321});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
