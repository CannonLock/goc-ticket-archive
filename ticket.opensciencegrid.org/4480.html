<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[4480] LIGO work-flow problem at TTU-ANTAEUS</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=4480" method="post">
<div class="page-header">
    <h3><span class="muted">4480</span> / LIGO work-flow problem at TTU-ANTAEUS</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Britta Daudert</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Closing this ticket - Customer unable to pursue this issue for now; will open a new ticket when customer wants us to</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-02-27</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">TIGRE <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Troubleshooting <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/4480", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/4480?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/4480?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20LIGO%20work-flow%20problem%20at%20TTU-ANTAEUS%20ISSUE%3D4480%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='4480#1203962436'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-25T18:00:36+00:00">Feb 25, 2008 06:00 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1203962436">&nbsp;</a></div><pre>Hi Britta,

Ok, I am closing this GOC ticket for now -- I appreciate your letting us know. When
you&#39;re ready to start working on this issue again, please drop us a line, and I will
open a new ticket which will be linked to this one (for reference).

Cheers,

Arvind</pre></div><div class='update_description'><i onclick="document.location='4480#1203961149'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-25T17:39:09+00:00">Feb 25, 2008 05:39 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1203961149">&nbsp;</a></div><pre>Dear Alan,
thank you very much for your help.
I would be interested to try direct login for debugging purposes.

Dear all,
However, I am not able to devote any time to it this week, the following
week I will be at the All Hands meeting and the two weeks that follow
the meeting, I will be on vacation in Germany.
Since there are timelines on trouble ticket solving for GOC, I suggest
that we close this ticket unresolved for now and re-open it when I
return on March 24.
Please let me know what you think.

Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1203958392'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-25T16:53:12+00:00">Feb 25, 2008 04:53 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1203958392">&nbsp;</a></div><pre>This ticket has seen active discussion between Britta and Alan in the past week or
so. Giving Britta till Wednesday 27th to respond before I check with her.

Arvind</pre></div><div class='update_description'><i onclick="document.location='4480#1203717068'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-22T21:51:08+00:00">Feb 22, 2008 09:51 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1203717068">&nbsp;</a></div><pre>This has been a long thread, but we are committed to getting to the
bottom of it and working with you.  If there is something wrong with
either our OSG gatekeeper installation or our worker node setup, we
are committed to helping try to find it.

<font color='#7F7E6F'>&#62; I thought I check first that there is nfs (which apparently is</font>
<font color='#7F7E6F'>&#62; necessary</font>
<font color='#7F7E6F'>&#62; for our work-flows to run properly) at TTU before consulting LIGO</font>
<font color='#7F7E6F'>&#62; scientist about where FrGenerateCache looks for the gwf files.</font>

RIght.  As I mentioned, we use Lustre, which works like nfs in the
sense that you are using it.  IN other words, it is like a disk that
appears the same on the head node and each of the worker nodes.
Plain POSIX I/O should be fine, although I suppose there might always
be issues.

<font color='#7F7E6F'>&#62; It also did not make sense that when I ran the EXACT same workflow</font>
<font color='#7F7E6F'>&#62; at a</font>
<font color='#7F7E6F'>&#62; different site, I did not see this error.</font>

We support *direct* login to antaeus and, from there, to its worker
nodes if that will help you in the debugging process.  Simply set up
any OSG installation that includes the usual (interactive, not worker-
node) client, get a proxy and then log in using

gsissh antaeus.hpcc.ttu.edu -p 49922

To see the list of available worker nodes, you can look in the /etc/
hosts file.  The one you were using before was compute-10-30, for
example, which also has the alias c10-30, so you would be able to get
to it on a passwordless basis from the head node by regular ssh once
on the head node&#58;

ssh c10-30

<div id='show_1168304880' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1168304880'>You can then interactively set up the worker node client by issuing&#58;

. /mnt/lustre/antaeus/wn-client/setup.sh

May I suggest that you or someone there write a simple test program
based on this routine and run it interactively to isolate the problem?

Thanks and have a nice weekend,
Alan

Alan Sill, Ph.D
TIGRE Senior Scientist, High Performance Computing Center
Adjunct Professor of Physics
TTU

====================================================================
&#58;  Alan Sill, Texas Tech University  Office&#58; Admin 233, MS 4-1167  &#58;
&#58;  e-mail&#58; Alan.Sill@....   ph. 806-742-4350  fax 806-742-4358  &#58;
====================================================================
</div><script type='text/javascript'>
        $('#show_1168304880').click(function() {
            $('#detail_1168304880').slideDown("normal");
            $('#show_1168304880').hide();
            $('#hide_1168304880').show();
        });
        $('#hide_1168304880').click(function() {
            $('#detail_1168304880').slideUp();
            $('#hide_1168304880').hide();
            $('#show_1168304880').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4480#1203712748'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-22T20:39:08+00:00">Feb 22, 2008 08:39 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1203712748">&nbsp;</a></div><pre>Hi all,
this was actually my first attempt at answering the question that Alan
had asked.
I thought I check first that there is nfs (which apparently is necessary
for our work-flows to run properly) at TTU before consulting LIGO
scientist about where .

FrGenerateCache lools for the gwf files.

It also did not make sense that when I ran the EXACT same workflow at a
different site, I did not see this error.
So, I am sorry if it seemed that I did not try and answer Alan&#39;s
question. I should have mentioned that I do not understand the inner
workings of our LIGO software to a sufficient level as to answer the
question straight of the bet.

However, I just sent  a message to a couple of LIGO scientists concerning

XLALFrGenerateCache&#58;

and I am waiting to hear back. Hopefully the response will enable me to answer Alan&#39;s question.
Thank you.
Britta

Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1203705368'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-22T18:36:08+00:00">Feb 22, 2008 06:36 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1203705368">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Please clarify&#58;</font>
<font color='#7F7E6F'>&#62; IS $OSG_DATA in nfs?</font>

It is a Lustre-mounted shared user space that is visible with the
same ownership and permissions from the head node and all worker nodes.</pre></div><div class='update_description'><i onclick="document.location='4480#1203705270'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-22T18:34:30+00:00">Feb 22, 2008 06:34 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1203705270">&nbsp;</a></div><pre>OK, I&#39;ve removed Kent from the CC list on this ticket.

I will let Alan answer your query about OSG_DATA and NFS but you might want to, in
turn, address his questions he asked yesterday&#58;

------

XLAL Error - XLALFrGenerateCache&#58; no frame files found in ./*.gwf

So itr is looking in its present directory for *.gwf files. Earlier
in the output file, I see that it is changing directories to the
proper one&#58;

&#60;cwd&#62;/mnt/hep/osg/bdaudert/pegasus/inspiral/run0001&#60;/cwd&#62;

The code around that error message is available apparently online at&#58;

<a href='http&#58;//www.lsc-group.phys.uwm.edu/daswg/projects/lal/nightly/docs/' target='_blank' rel='nofollow'>http&#58;//www.lsc-group.phys.uwm.edu/daswg/projects/lal/nightly/docs/</a>
html/FrameCache_8c-source.html

It says&#58;

00359 FrCache * XLALFrGenerateCache( const CHAR *dirstr, const CHAR
*fnptrn )
00360 {
00361 static const char *func = &#34;XLALFrGenerateCache&#34;;
00362 FrCache *cache;
00363 glob_t g;
00364 int globflags = 0;
00365 int i;
00366
00367 fnptrn = fnptrn ? fnptrn &#58; &#34;*.gwf&#34;;
00368 dirstr = dirstr ? dirstr &#58; &#34;.&#34;;
00369
00370 if ( fnptrn[0] &amp;&amp;
<div id='show_1451466455' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1451466455'>00371 ( fnptrn[0] == &#39;/&#39;
00372 || ( fnptrn[0] == &#39;.&#39; &amp;&amp; fnptrn[1] &amp;&amp;
00373 ( fnptrn[1] == &#39;/&#39; || ( fnptrn[1] == &#39;.&#39; &amp;&amp; fnptrn[2]
== &#39;/&#39; ) ) )
00374 )
00375 )
00376 glob( fnptrn, globflags, NULL, &amp;g );
00377 else /* prepend path from dirname */
00378 {
00379 CHAR path[MAXPATHLEN];
00380 CHAR dirname[MAXPATHLEN];
00381 CHAR *nextdir;
00382 strncpy( dirname, dirstr, sizeof( dirname ) - 1 );
00383 do
00384 {
00385 nextdir = strchr( dirname, &#39;&#58;&#39; );
00386 if ( nextdir )
00387 *nextdir++ = 0;
00388 LALSnprintf( path, sizeof( path ) - 1, &#34;%s/%s&#34;,
00389 *dirname ? dirname &#58; &#34;.&#34;, fnptrn );
00390 glob( path, globflags, NULL, &amp;g );
00391 fnptrn = path;
00392 globflags |= GLOB_APPEND;
00393 }
00394 while ( nextdir );
00395 }
00396
00397 if ( ! g.gl_pathc )
00398 {
00399 XLALPrintError( &#34;XLAL Error - %s&#58; no frame files found in %s&#34;,
00400 func, fnptrn );
00401 XLAL_ERROR_NULL( func, XLAL_EIO );
00402 }

It is hard to jump into someone else&#39;s code - but are the glob steps
exceeding the maximum path lengths? Perhaps some diagnostic print
statements could be put into the code.

We can also support an interactive login if needed to the worker node
if you want to debug more intensively.

--- End of Alan&#39;s note-----------

thanks,
Arvind
</div><script type='text/javascript'>
        $('#show_1451466455').click(function() {
            $('#detail_1451466455').slideDown("normal");
            $('#show_1451466455').hide();
            $('#hide_1451466455').show();
        });
        $('#hide_1451466455').click(function() {
            $('#detail_1451466455').slideUp();
            $('#hide_1451466455').hide();
            $('#show_1451466455').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4480#1203705009'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-22T18:30:09+00:00">Feb 22, 2008 06:30 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1203705009">&nbsp;</a></div><pre>Hello,
First, I would like to request that Kent Blackburn is taken off the cc
list concerning ANY GOC tickets that I have open. He seems to be copied
on them and would prefer not to.

Second, I would like to ask a question about TTU_ANTAEUS.
I have run the same work-flow at CIT_CMS_T2 and it succeeded. I am
guessing that the following is the problem. Please clarify&#58;
IS $OSG_DATA in nfs?

I have asked Gaurang some questions about pegasus to clarify things. He
says&#58;

&#34;the  jobs will run in $OSG_DATA or whatever is set as the workflow
directory in the site catalog and it has to be shared via NFS with the
head node&#34;

Could this be our problem?

Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1203640388'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-22T00:33:08+00:00">Feb 22, 2008 12:33 AM UTC</time> by <b>TIGRE</b><a class="anchor" name="1203640388">&nbsp;</a></div><pre>Sorry - I see that the actual error message is

XLAL Error - XLALFrGenerateCache&#58; no frame files found in ./*.gwf

So itr is looking in its present directory for *.gwf files.  Earlier
in the output file, I see that it is changing directories to the
proper one&#58;

&#60;cwd&#62;/mnt/hep/osg/bdaudert/pegasus/inspiral/run0001&#60;/cwd&#62;

The code around that error message is available apparently online at&#58;

<a href='http&#58;//www.lsc-group.phys.uwm.edu/daswg/projects/lal/nightly/docs/' target='_blank' rel='nofollow'>http&#58;//www.lsc-group.phys.uwm.edu/daswg/projects/lal/nightly/docs/</a>
html/FrameCache_8c-source.html

It says&#58;

00359 FrCache * XLALFrGenerateCache( const CHAR *dirstr, const CHAR
*fnptrn )
00360 {
00361   static const char *func = &#34;XLALFrGenerateCache&#34;;
00362   FrCache *cache;
00363   glob_t g;
00364   int globflags = 0;
00365   int i;
00366
00367   fnptrn = fnptrn ? fnptrn &#58; &#34;*.gwf&#34;;
00368   dirstr = dirstr ? dirstr &#58; &#34;.&#34;;
00369
00370   if ( fnptrn[0] &&
00371       ( fnptrn[0] == &#39;/&#39;
00372         || ( fnptrn[0] == &#39;.&#39; && fnptrn[1] &&
00373           ( fnptrn[1] == &#39;/&#39; || ( fnptrn[1] == &#39;.&#39; && fnptrn[2]
== &#39;/&#39; ) ) )
00374       )
<div id='show_1970823055' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1970823055'>00375      )
00376     glob( fnptrn, globflags, NULL, &g );
00377   else /* prepend path from dirname */
00378   {
00379     CHAR  path[MAXPATHLEN];
00380     CHAR  dirname[MAXPATHLEN];
00381     CHAR *nextdir;
00382     strncpy( dirname, dirstr,  sizeof( dirname ) - 1 );
00383     do
00384     {
00385       nextdir = strchr( dirname, &#39;&#58;&#39; );
00386       if ( nextdir )
00387         *nextdir++ = 0;
00388       LALSnprintf( path, sizeof( path ) - 1, &#34;%s/%s&#34;,
00389           *dirname ? dirname &#58; &#34;.&#34;, fnptrn );
00390       glob( path, globflags, NULL, &g );
00391       fnptrn = path;
00392       globflags |= GLOB_APPEND;
00393     }
00394     while ( nextdir );
00395   }
00396
00397   if ( ! g.gl_pathc )
00398   {
00399     XLALPrintError( &#34;XLAL Error - %s&#58; no frame files found in %s&#34;,
00400         func, fnptrn );
00401     XLAL_ERROR_NULL( func, XLAL_EIO );
00402   }

It is hard to jump into someone else&#39;s code - but are the glob steps
exceeding the maximum path lengths?  Perhaps some diagnostic print
statements could be put into the code.

We can also support an interactive login if needed to the worker node
if you want to debug more intensively.

Hope this helps,
Alan
</div><script type='text/javascript'>
        $('#show_1970823055').click(function() {
            $('#detail_1970823055').slideDown("normal");
            $('#show_1970823055').hide();
            $('#hide_1970823055').show();
        });
        $('#hide_1970823055').click(function() {
            $('#detail_1970823055').slideUp();
            $('#hide_1970823055').hide();
            $('#show_1970823055').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4480#1203639128'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-22T00:12:08+00:00">Feb 22, 2008 12:12 AM UTC</time> by <b>TIGRE</b><a class="anchor" name="1203639128">&nbsp;</a></div><pre>This is very odd.  There appears to be nothing wrong with the user
environment, and I can verify that a large number of appropriate-
looking files are in fact in the indicated area, with proper
ownership, and visible from the worker nodes.  The most recent of
these files are&#58;

[root@compute-10-30 ~]# ls -Altr /mnt/hep/osg/bdaudert/pegasus/
inspiral/run0001/ | tail
-rw-r--r--  1 ligo tigre 16049945 Feb 21 16&#58;16 H-
H2_RDS_C03_L2-816402424-128.gwf
-rw-r--r--  1 ligo tigre 16050714 Feb 21 16&#58;17 H-
H2_RDS_C03_L2-816402808-128.gwf
-rw-r--r--  1 ligo tigre 16051624 Feb 21 16&#58;18 H-
H2_RDS_C03_L2-816402168-128.gwf
-rw-r--r--  1 ligo tigre 16052601 Feb 21 16&#58;19 H-
H2_RDS_C03_L2-816401656-128.gwf
-rw-r--r--  1 ligo tigre 16053801 Feb 21 16&#58;19 H-
H2_RDS_C03_L2-816402680-128.gwf
-rw-r--r--  1 ligo tigre 16052946 Feb 21 16&#58;20 H-
H2_RDS_C03_L2-816402936-128.gwf
-rw-r--r--  1 ligo tigre 16051146 Feb 21 16&#58;21 H-
H2_RDS_C03_L2-816401528-128.gwf
-rwxr-xr-x  1 ligo tigre  7259231 Feb 21 16&#58;21 ligo-lalapps_inspiral-1.0
-rwxr-xr-x  1 ligo tigre  3002574 Feb 21 16&#58;21 ligo-lalapps_thinca-1.0
-rwxr-xr-x  1 ligo tigre  1917472 Feb 21 16&#58;21 ligo-lalapps_trigbank-1.0

What does &#34;no frame files found in ./*.gwfXLAL&#34; mean?  Is it changing
directories to the above area before executing, so that &#34;./&#34; would be
the proper directory?  (It appears so from the .out file...)  Why is
it looking for &#34;.gwfXLAL&#34; rather than &#34;.gwf&#34; files?

One would have to look at FrameCache.c&#58; line 382 to learn more.  It
is giving an error indicating problems reading files that are
definitely there, and that should be readable!</pre></div><div class='update_description'><i onclick="document.location='4480#1203637149'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-21T23:39:09+00:00">Feb 21, 2008 11:39 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1203637149">&nbsp;</a></div><pre>Hi all,
we have resolved our submit host issues here and are now able to
successfully submit work-flows again (the box needed a VDT upgrade).

This morning I successfully ran a work-flow at CIT_CMS_T2. I then
submitted the SAME work-flow to TTU_ANTAEUS and, again, it failed at the
first scheduled jobs. I am attaching the .sub and .out of one of the
failed jobs.

I, again, see this in the .out&#58;

XLAL Error - XLALFrGenerateCache&#58; no frame files found in ./*.gwfXLAL
Error - XLALFrGenerateCache (FrameCache.c&#58;382)&#58; I/O error

which looks like the WN cannot see the frame files stored in $OSG_DATA

The .err is empty and my work-flow log looks normal.
The dagman.out states&#58;
Node Name&#58; lalapps_tmpltbank_ID000027
2/21 14&#58;27&#58;33          NodeID&#58; 26
2/21 14&#58;27&#58;33     Node Status&#58; STATUS_ERROR
2/21 14&#58;27&#58;33 Node return val&#58; 1
2/21 14&#58;27&#58;33           Error&#58; Job failed due to DAGMAN error 0 and POST
Script failed with status 1
2/21 14&#58;27&#58;33 Job Submit File&#58; lalapps_tmpltbank_ID000027.sub
2/21 14&#58;27&#58;33     POST Script&#58;
/home/bdaudert/osg-client/pegasus/bin/exitcode
-Dpegasus.user.properties=/usr2/bdaudert/TTU_ANTAEUS/bdaudert/pegasus/inspiral/run0001/pegasus.17909.properties
-e
/usr2/bdaudert/TTU_ANTAEUS/bdaudert/pegasus/inspiral/run0001/lalapps_tmpltbank_ID000027.out

Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1203629411'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-21T21:30:11+00:00">Feb 21, 2008 09:30 PM UTC</time> by <b>anand-padmanabhan-1@....</b><a class="anchor" name="1203629411">&nbsp;</a></div><pre>Britta,

This is an interesting. What makes you think that you are seeing the
same issue as identified in the bugzilla. I think you are referring to
<a href='http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=3845' target='_blank' rel='nofollow'>http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=3845</a>, but the ticket
has not been touched for some time, let me know if that is not the case.

Could you try doing globus-url-copy with the debug (-dbg) and verbose
(-vb) option turned on and send us the details.

Thanks
Anand
Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1203368593'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-18T21:03:13+00:00">Feb 18, 2008 09:03 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1203368593">&nbsp;</a></div><pre>Dear all,
I currently can not test any work-flow due to what I believe is a globus
bug that occures during the file transfer state. I have attached my
report on the issue and would really appreciate if someone could have a
look at it and give there input so that I can get to the bottom of this
faster and then take care of TTU_ANTAEUS.
Thank you. Britta

Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1203341605'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-18T13:33:25+00:00">Feb 18, 2008 01:33 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1203341605">&nbsp;</a></div><pre>Thanks for the reminder Anand.

Britta, I will assume this issue is resolved if we don&#39;t hear back from you by the
end of this week.

Thanks,
Arvind</pre></div><div class='update_description'><i onclick="document.location='4480#1203313148'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-18T05:39:08+00:00">Feb 18, 2008 05:39 AM UTC</time> by <b>anand-padmanabhan-1@....</b><a class="anchor" name="1203313148">&nbsp;</a></div><pre>Hi Britta,

Did you have a chance to rerun your workflow on TTU-ANTAEUS with the
workaround Alan suggested.

Thanks
Anand
Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1202757789'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-11T19:23:09+00:00">Feb 11, 2008 07:23 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1202757789">&nbsp;</a></div><pre>I am at a meeting until Wednesday and wil look into it then.
Thank you.
Britta
Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1202742668'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-11T15:11:08+00:00">Feb 11, 2008 03:11 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1202742668">&nbsp;</a></div><pre>At this point, it appears to me most likely that LIGO as well as
other VO workflows are experiencing problems of a generic nature due
to the behavior of the OSG lsf.pm script that incorrectly passes on
all environmental variables from the head node to the worker node
jobs.  We have filed separate requests for help with this problem
with the GOC and with the VDT team.

As a workaround and test, it might be useful to try sourcing the
worker-node client setup.sh or setup.csh script as appropriate at the
beginning of each worker node job.  These setup scripts are located
at $OSG_GRID, which should already be defined as

OSG_GRID=/mnt/lustre/antaeus/wn-client

for each worker node job.

Note that the location of the OSG worker node client installation is
different on the worker nodes than that of the OSG CE installation,
which is only defined on the head node.

Hope this helps,
Alan</pre></div><div class='update_description'><i onclick="document.location='4480#1202741871'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-11T14:57:51+00:00">Feb 11, 2008 02:57 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1202741871">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; the work-flows still fail at the same jobs with the message can&#39;t find frame files</font>
in ./gwf
<font color='#7F7E6F'>&#62; It looks like the worker nodes cannot see the files in $DATA. I double checked all</font>
set up
<font color='#7F7E6F'>&#62; files on my end.</font>

HI Britta,

Alan Sill said the following a couple of weeks ago&#58;

&#34;OK, we should learn more about this. In OSG, there is no longer any $DATA
environmental variable. Perhaps the one you want is $OSG_DATA -- can you check what
pegasus tries to use?  Our setup here is pretty much OSG-standard.&#34;

Are you still using $DATA? Or, are you using $OSG_DATA?

Please confirm you&#39;re using accurate parameters and environment variables, and then I
could ping Alan/Trouble shooters again.

Thanks,

Arvind</pre></div><div class='update_description'><i onclick="document.location='4480#1202167749'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-04T23:29:09+00:00">Feb 4, 2008 11:29 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1202167749">&nbsp;</a></div><pre>Hi all,
the work-flows still fail at the same jobs with the message
can&#39;t find frame files in ./gwf
It looks like the worker nodes cannot see the files in $DATA.
I double checked all set up files on my end.
Thank you.
Britta
rid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1202163968'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-04T22:26:08+00:00">Feb 4, 2008 10:26 PM UTC</time> by <b>anand-padmanabhan-1@....</b><a class="anchor" name="1202163968">&nbsp;</a></div><pre>Britta,

Were your workflows at TTU-ANTAEUS successful?

Thanks
Anand
Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1201905308'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-02-01T22:35:08+00:00">Feb 1, 2008 10:35 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1201905308">&nbsp;</a></div><pre>So is this resolved now?

On Jan 30, 2008, at 3&#58;11 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; On VORS for TTU ANTAEUS, I see&#58;</font>
<font color='#7F7E6F'>&#62; $DATA Location  /mnt/hep/osg</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; This is what I was talking about and this is where Pegasus puts the</font>
<font color='#7F7E6F'>&#62; data</font>
<font color='#7F7E6F'>&#62; and it is what Pegasus sets as my workdir.</font>
<font color='#7F7E6F'>&#62; Thank you.</font></pre></div><div class='update_description'><i onclick="document.location='4480#1201727469'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-30T21:11:09+00:00">Jan 30, 2008 09:11 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1201727469">&nbsp;</a></div><pre>On VORS for TTU ANTAEUS, I see&#58;
$DATA Location  /mnt/hep/osg

This is what I was talking about and this is where Pegasus puts the data
and it is what Pegasus sets as my workdir.
Thank you.
Britta

Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1201724768'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-30T20:26:08+00:00">Jan 30, 2008 08:26 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1201724768">&nbsp;</a></div><pre>OK, we should learn more about this.  In OSG, there is no longer any
$DATA environmental variable.  Perhaps the one you want is $OSG_DATA
-- can you check what pegasus tries to use?

Our setup here is pretty much OSG-standard.

<font color='#7F7E6F'>&#62; I thought that the workdir is the $DATA dir, where the data are staged</font>
<font color='#7F7E6F'>&#62; to by the Pegasus workflow planner</font></pre></div><div class='update_description'><i onclick="document.location='4480#1201723148'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-30T19:59:08+00:00">Jan 30, 2008 07:59 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1201723148">&nbsp;</a></div><pre>I thought that the workdir is the $DATA dir, where the data are staged
to by the Pegasus workflow planner. At least that is what the planner
sets it to when it queries VORS.
And it looks like tmpltbank.c looks  for the wave files *.gwf in the
current directory&#58;

no frame files found in ./*.gwfXLAL Error

Britta

Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1201720448'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-30T19:14:08+00:00">Jan 30, 2008 07:14 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1201720448">&nbsp;</a></div><pre>On Jan 30, 2008, at 12&#58;32 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; I tested with the updated LIGO software but I still get the same error</font>
<font color='#7F7E6F'>&#62; message&#58; the program tmpltbank.c cannot see the frame files.</font>

Are the frame files supposed to be staged to the OSG_DATA area?  If
so, these will show up on our system at that location, which is /mnt/
hep/osg

I suggest that you always stage your data files to their location in
a ligo directory under OSG_DATA (or OSG_SITE_READ and _SG_SITE_WRITE
for those sites that make a distinction).

Please let us know what, if anything, we can do to help you resolve
this problem.

Alan</pre></div><div class='update_description'><i onclick="document.location='4480#1201719008'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-30T18:50:08+00:00">Jan 30, 2008 06:50 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1201719008">&nbsp;</a></div><pre>What do you expect the work dir to be?  What is it at other sites?

I checked that /home/ligo does exist.  This may be something due to
the way that LSF passes environmental variables from the head to
worker nodes.

<font color='#7F7E6F'>&#62; I noticed in the .out file that the work dir is set to /home/ligo&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Job was executed on host(s) &#60;compute-10-27.local&#62;, in queue</font>
<font color='#7F7E6F'>&#62; &#60;serial&#62;, as</font>
<font color='#7F7E6F'>&#62; user &#60;ligo&#62;.</font>
<font color='#7F7E6F'>&#62; &#60;/home/ligo&#62; was used as the home directory.</font>
<font color='#7F7E6F'>&#62; &#60;/home/ligo&#62; was used as the working directory.</font></pre></div><div class='update_description'><i onclick="document.location='4480#1201717929'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-30T18:32:09+00:00">Jan 30, 2008 06:32 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1201717929">&nbsp;</a></div><pre>Hi again,
I tested with the updated LIGO software but I still get the same error
message&#58; the program tmpltbank.c cannot see the frame files. And I am
running the same workflow on other sites fine. I double checked all my
settings and can&#39;t find anything wrong here.
Then I noticed in the .out file that the work dir is set to /home/ligo&#58;

Job was executed on host(s) &#60;compute-10-27.local&#62;, in queue &#60;serial&#62;, as
user &#60;ligo&#62;.
&#60;/home/ligo&#62; was used as the home directory.
&#60;/home/ligo&#62; was used as the working directory.

Is that correct?
Thank you.
Britta

Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1201627027'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-29T17:17:07+00:00">Jan 29, 2008 05:17 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1201627027">&nbsp;</a></div><pre>Hi all,
yes, I did,
the scheduled tmplate bank jobs fail with this message&#58;

XLAL Error - XLALFrGenerateCache&#58; no frame files found in ./*.gwfXLAL
Error - XLALFrGenerateCache (FrameCache.c&#58;382)&#58; I/O error
Error[1] 32&#58; function LALFrCacheGenerate, file FrameCache.c, line 676,
$Id&#58; FrameCache.c,v 1.13 2006/11/08 14&#58;49&#58;01 mpitkin Exp $
ABORT&#58; Unable to glob frame files to build cache
Error[0]&#58; file tmpltbank.c, line 384, $Id&#58; tmpltbank.c,v 1.73.2.1
2007/06/21 22&#58;18&#58;05 dkeppel Exp $
LAL_CALL&#58; Function call &#96;LALFrCacheGenerate( &amp;status,
&amp;frGlobCache, NULL, NULL )&apos; failed.

i.e., looks like the  program tmpltbank.c can&#39;t dfind the frame files it
needs.
I did some additional testing,  too&#58;
I picked one of the frame files in my workdir

globus-job-run antaeus.hpcc.ttu.edu /bin/ls -las
/mnt/hep/osg/bdaudert/pegasus/inspiral/run0002/L-L1_RDS_C03_L2-816432641-128.gwf
15668 -rw-r--r--  1 ligo tigre 16042714 Jan 28 18&#58;43
/mnt/hep/osg/bdaudert/pegasus/inspiral/run0002/L-L1_RDS_C03_L2-816432641-128.gwf

Then I ran two simple /bin/ls job on the file via condor_submit, one
using fork and one with the lsf scheduler.
Both worked fine.

I also ran with the same /bin/ls job with our pegasus executble
kickstart, again, successfully.

Lastly, I tried to condor_submit the failed tmpltbank job. It returned
the same error in the .out file as above. It looks like a problem on our
side. As I am writing this, I am getting new versions of our analysis
code and I will test with the new software on the local cluster this
<div id='show_359861251' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_359861251'>afternoon.  Then I will test on the OSG
I should have results within a couple of days.
Thank you.
Britta

Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_359861251').click(function() {
            $('#detail_359861251').slideDown("normal");
            $('#show_359861251').hide();
            $('#hide_359861251').show();
        });
        $('#hide_359861251').click(function() {
            $('#detail_359861251').slideUp();
            $('#hide_359861251').hide();
            $('#show_359861251').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4480#1201545849'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-28T18:44:09+00:00">Jan 28, 2008 06:44 PM UTC</time> by <b>anand-padmanabhan-1@....</b><a class="anchor" name="1201545849">&nbsp;</a></div><pre>Hi Britta,

Did you have a chance to rerun your workflows at TTU-ANTAEUS?

Thanks
Anand
Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1200684667'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-18T19:31:07+00:00">Jan 18, 2008 07:31 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1200684667">&nbsp;</a></div><pre>Hi Britta,

<font color='#7F7E6F'>&#62; I have a question concerning port ranges&#58;</font>
<font color='#7F7E6F'>&#62; Currently I have not set a port range. However, in the past we had set</font>
<font color='#7F7E6F'>&#62; it to</font>
<font color='#7F7E6F'>&#62; GLOBUS_TCP_SOURCE_RANGE=50000,51000</font>
<font color='#7F7E6F'>&#62; Is that a resonable range for most sites?</font>

This is not a question about a reasonable range on other sites, but
the question is, what kind of firewall situation do you have on YOUR site --
i.e., the machine from which you are submitting your Condor-G jobs.

So you need to find out what the open port range is on your submit machine,
and then add that as GLOBUS_TCP_SOURCE_RANGE into the
$VDT_LOCATION/vdt/etc/vdt-local-setup.*sh of your VDT client installation.

Hope this helps,

Horst</pre></div><div class='update_description'><i onclick="document.location='4480#1200684127'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-18T19:22:07+00:00">Jan 18, 2008 07:22 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1200684127">&nbsp;</a></div><pre>On Jan 18, 2008, at 12&#58;58 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; Currently I have not set a port range.</font>

If you have a firewall at your site, this could be a problem.

The number of such ports should be controlled by the number of
simultaneous jobs you need to submit.  In the far past, this was one
callback port per job; it may be higher with current GRAM software.
If you are not running a large number of jobs at once, you are
probably not running out of globus ports.

The callback range should be set to correspond to the open range in
your campus or system firewall, if any.  If you do not have a campus
or site-wide firewall, then only the iptables settings on your system
matter.  If you furthermore do not have any local iptables
restrictions, then it is probably not necessary to set the
GLOBUS_TCP_PORT_RANGE and GLOBUS_TCP_SOURCE_RANGE as I have done.
Doing this in the vdt-localsetup.(c)sh is the cleanest way I have
found to handle the local range configuration.  As I said, it has to
match the range open through the sum of all applicable firewalls on
your side in the way.

These ports are used for callbacks, so they usually do not have to be
coordinated among sites.

In suggesting this, I am hunting for things that might affect your
ability to submit to other OSG sites as well as our own, since that
was a feature of your original report.</pre></div><div class='update_description'><i onclick="document.location='4480#1200682688'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-18T18:58:08+00:00">Jan 18, 2008 06:58 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1200682688">&nbsp;</a></div><pre>I have a question concerning port ranges&#58;
Currently I have not set a port range. However, in the past we had set
it to
GLOBUS_TCP_SOURCE_RANGE=50000,51000
Is that a resonable range for most sites?
Or, how do I find out what range I should use?
Thank you.
Britta

Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1200681967'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-18T18:46:07+00:00">Jan 18, 2008 06:46 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1200681967">&nbsp;</a></div><pre>We have gone through an LSF batch system version update recently.  As
a consequence, I believe some of our globus scripts were set up
incorrectly to point to the old version.

I have gone through all of the $VDT_LOCATION/globus... scripts by
hand to correct the references to point to the new LSF version.
Batch jobs now work cleanly for me trying from two different VO
accounts (CMS and TIGRE pool accounts).  I have also opened a ticket
with the VDT team to ask them to clarify the procedure for updating
the VDT setup in the event of such an upgrade.  (The current VDT
installation appears to hardwire the paths to the batch scheduler
scripts in a number of locations, and these are not updated if one
follows their published procedure for updating the rvf files upon a
queue configuration change, for example.)

Can Britta please try the procedure one more time?  Also, with
respect to ports, Condor-G should be able to respect the settings of
GLOBUS_TCP_PORT_RANGE and GLOBUS_TCP_SOURCE_RANGE that are active on
a given resource.  If Britta is having this problem with multiple OSG
sites and not just ours, it might be the case that she needs to set
these two environmental variables properly in the $VDT_LOCATION/vdt/
etc/vdt-local-setup.(c)sh files to correspond to the proper open port
range that is active at her site.  Locally at TTU, these two scripts
look as follows&#58;

[root@antaeus grid]# cat vdt/etc/vdt-local-setup.sh
export GLOBUS_TCP_PORT_RANGE=&#34;40000,50000&#34;
export GLOBUS_TCP_SOURCE_RANGE=&#34;40000,50000&#34;

[root@antaeus grid]# cat vdt/etc/vdt-local-setup.csh
setenv GLOBUS_TCP_PORT_RANGE &#34;40000,50000&#34;
setenv GLOBUS_TCP_SOURCE_RANGE &#34;40000,50000&#34;

Please let me know if we can do anything else to respond.</pre></div><div class='update_description'><i onclick="document.location='4480#1200676748'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-18T17:19:08+00:00">Jan 18, 2008 05:19 PM UTC</time> by <b>anand-padmanabhan-1@....</b><a class="anchor" name="1200676748">&nbsp;</a></div><pre>Alan,

Britta can correct me if I am wrong, but I think the Hold code she is
quoting is coming from Condor-G, and has nothing to do with your batch
scheduler. But the indication that the job cannot open stdout could
still be true. Could you check the gram logs to see if there is any
indication there.

Thanks
Anand
Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1200674947'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-18T16:49:07+00:00">Jan 18, 2008 04:49 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1200674947">&nbsp;</a></div><pre>Why is your job making any reference to Condor?

The batch scheduler on TTU-ANTAEUS is LSF, not Condor.  We do not run
Condor on this system (except for any internal VDT tasks, not
intended for use by users).</pre></div><div class='update_description'><i onclick="document.location='4480#1200674588'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-18T16:43:08+00:00">Jan 18, 2008 04:43 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1200674588">&nbsp;</a></div><pre>Here are some more news on my porblems at TTU&#58;
This is what the trouble shooting page tells me about the error code
that I find in my log file&#58;

Condor Hold Code 7

Syntax

|Code 7 subcode &#60;unix_errno&#62;|

Known causes&#58;

Hold Code 7 indicates that condor could not open the standard output file.

Recommendations&#58;

Check your firewall settings and see Condor ports
&#60;<a href='https&#58;//twiki.grid.iu.edu/twiki/bin/view/Troubleshooting/CondorFirewalls&#62' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/twiki/bin/view/Troubleshooting/CondorFirewalls&#62</a>;.

Check file/folder permissions to be sure that Condor can write the
output file.

-- AnandPadmanabhan
&#60;<a href='https&#58;//twiki.grid.iu.edu/twiki/bin/view/Main/AnandPadmanabhan&#62' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/twiki/bin/view/Main/AnandPadmanabhan&#62</a>; - 05
Dec 2006

Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1200524827'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-16T23:07:07+00:00">Jan 16, 2008 11:07 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1200524827">&nbsp;</a></div><pre>Antaeus uses LSF as its batch scheduler.  It does not run Condor.  Is
there some aspect of your work that is dependent on Condor?  (There
should not be, I believe.)

The OSG version on the gatekeeper (head) node and on the worker nodes
is the same.

On Jan 16, 2008, at 4&#58;58 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;  I contacted Koranda at UWM. Scott believes that  there is a</font>
<font color='#7F7E6F'>&#62; comaptability issue between tthe condor versions on the head node  and</font>
<font color='#7F7E6F'>&#62; the WNs. Could this be causing my troubles at  TTU?</font></pre></div><div class='update_description'><i onclick="document.location='4480#1200524287'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-16T22:58:07+00:00">Jan 16, 2008 10:58 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1200524287">&nbsp;</a></div><pre>I don&#39;t think my workflow needs glexec.
However, I have seen a similar problem when running my work-flow at
UWMilwaukee. I contacted Koranda at UWM. Scott believes that  there is a
comaptability issue between tthe condor versions on the head node  and
the WNs. Could this be causing my troubles at  TTU? Here is the e-mail I
sent to Scott and his response&#58;

Hi,

<font color='#7F7E6F'>&#62;&#62;  Hi Scott,</font>
<font color='#7F7E6F'>&#62;&#62;  can you explain to me why the Condor upgrade at UWM is needed.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>

The OSG head node is the node that receives the jobs via
Globus. It is running a version of Condor that is much more
recent than the version that runs on the worker nodes. This
happened because the Condor running on the OSG head node came
with the latest OSG software stack, whereas the Condor on the
nodes is the one we have to install on the cluster ourselves.

Cheers,

Scott

Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1200519609'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-16T21:40:09+00:00">Jan 16, 2008 09:40 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1200519609">&nbsp;</a></div><pre>I checked that the files in the indicated directory are in fact
visible from every worker node in the cluster.

We do not have glexec installed or configured, though.  Does your
workflow need it?</pre></div><div class='update_description'><i onclick="document.location='4480#1200518527'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-16T21:22:07+00:00">Jan 16, 2008 09:22 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1200518527">&nbsp;</a></div><pre>Hi Alan, Goc,

I tried running a LIGO workflow with the Pegasus work-flow planner.
The first 7 fork jobs run fine. However, all lsf jobs fail.
The .err files are empty. In my .out,
I find this&#58;

Condor&#58; Notice&#58; Remote system calls disabled.
XLAL Error - XLALFrGenerateCache&#58; no frame files found in ./*.gwfXLAL
Error - XLALFrGenerateCache (FrameCache.c&#58;382)&#58; I/O error
Error[1] 32&#58; function LALFrCacheGenerate, file FrameCache.c, line 676,
$Id&#58; FrameCache.c,v 1.13 2006/11/08 14&#58;49&#58;01 mpitkin Exp $
ABORT&#58; Unable to glob frame files to build cache

I have attached the .out of a failed job for your viewing pleasure &#58;-)

It seems that the WN cannot see the  gravitational wave files  it needs
even though they were transfered correctly into my workdir
/mnt/hep/osg/LIGO/BRITTA/bdaudert/pegasus/inspiral/run0001?

My work-flow log looks normal.

I also found this strange line in the .out of a failed job and wanted to
double check if that is correct?

OSG_GLEXEC_LOCATION=&#34;/mnt/lustre/antaeus/wn-client/fill/this/in/later&#34;;
export OSG_GLEXEC_LOCATION

Thank you. Britta

Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1200498008'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-16T15:40:08+00:00">Jan 16, 2008 03:40 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1200498008">&nbsp;</a></div><pre>Thanks for the report.  We have updated the wn-client installation on
antaeus to the latest version and resolved a problem with the
certificate CRL update procedure.  (Information on the latter problem
has been forwarded to the docs and integration test bed groups for
reference.)

Please resume testing and/or using antaeus, and let me know if there
is anything else we can do to help.

Alan

Alan Sill, Ph.D
TIGRE Senior Scientist, High Performance Computing Center
Adjunct Professor of Physics
TTU

====================================================================
&#58;  Alan Sill, Texas Tech University  Office&#58; Admin 233, MS 4-1167  &#58;
&#58;  e-mail&#58; Alan.Sill@....   ph. 806-742-4350  fax 806-742-4358  &#58;
====================================================================</pre></div><div class='update_description'><i onclick="document.location='4480#1200351487'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-14T22:58:07+00:00">Jan 14, 2008 10:58 PM UTC</time> by <b>Britta Daudert</b><a class="anchor" name="1200351487">&nbsp;</a></div><pre>Hi all,
I just did another test run at TTU_ANTAEUS.
My work-flow log tells me that the first job is being held because the
executable can not be found.

executable = /mnt/lustre/antaeus/wn-client/pegasus/bin/kickstart

Pegasus wf planner created the submission file. It pulls its information
from VORS. If TTU_ANTAEUS hasd upgraded to 0.8.0 as stated on VORS, the
kickstart application should be in the above location.
Thank you. Britta

Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4480#1200005347'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-10T22:49:07+00:00">Jan 10, 2008 10:49 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1200005347">&nbsp;</a></div><pre>On Jan 10, 2008, at 4&#58;42 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; Open Science Grid ticket 4480 &#34;LIGO work-flow problem at TTU-</font>
<font color='#7F7E6F'>&#62; ANTAEUS&#34; is assigned to you</font>

I saw the request, but need more information to diagnose or follow
up.  The report is too general in its present form.

Alan Sill, Ph.D
TIGRE Senior Scientist, High Performance Computing Center
Adjunct Professor of Physics
TTU

====================================================================
&#58;  Alan Sill, Texas Tech University  Office&#58; Admin 233, MS 4-1167  &#58;
&#58;  e-mail&#58; Alan.Sill@....   ph. 806-742-4350  fax 806-742-4358  &#58;
====================================================================</pre></div><div class='update_description'><i onclick="document.location='4480#1200004932'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-10T22:42:12+00:00">Jan 10, 2008 10:42 PM UTC</time> by <b>Thomas Wang</b><a class="anchor" name="1200004932">&nbsp;</a></div><pre>TIGRE Support Center,

Please see the below problem request from LIGO regarding workflow issues at TTU-ANTAEUS.
Thanks.

regards,
Tom

=========================
From&#58; 	  rana@....
Subject&#58; 	Wrt LIGO work-flow encountering problem at select sites
Date&#58; 	January 9, 2008 6&#58;58&#58;44 PM EST
To&#58; 	  goc@...., OSG-TROUBLESHOOTING@....
Cc&#58; 	  kent@...., bdaudert@...., sthapa@...., rana@...., osg-
int@....

Dear GOC and Troubleshooting Groups, can you please help us with
resolving this problem. -- Thanks, User Group and LIGO team.

___________________________________________________________________

Problem summary -- LIGO work-flow encountering problem at select
sites. Failure at a subset of sites (OSG 0.8.0&#58; 2 of 7 sites,
previously ITB 0.7&#58; 1 of 5 sites). Based on our previous experience,
with ITB 0.7, our assumption was that problem may be related to PBS.
However, the 2/7 production sites that now fail have Condor and LSF.
Notably, 5/7 sites that succeed have Condor.

Problem description (from Britta Daudert) --

I am currently testing some LIGO work-flows on sites that have
upgraded to OSG 0.8.0. I think I have encountered the same problem
that I have seen at UC_ITB when testing ITB 0.7.0 at, at least, two
OSG production sites&#58; STAR_BNL and TTU_ANTAEUS. The workflow gets
stuck at the first job for a long time, then fails with DAGman error 0
<div id='show_1234808036' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1234808036'>and PS error -1002. The .out and .err for the failed job are empty. I
just recently discovered that PS error -1002 means that the job was
removed externally (by something other than DAGman).

The same work-flow succeeded at following OSG 0.8.0 sites&#58;
BNL_ATLAS_2, GLOW, OSG_LIGO_MIT, FERMIGRID, CIT_CMS_T2. All are Condor
sites.
___________________________________________________________________
</div><script type='text/javascript'>
        $('#show_1234808036').click(function() {
            $('#detail_1234808036').slideDown("normal");
            $('#show_1234808036').hide();
            $('#hide_1234808036').show();
        });
        $('#hide_1234808036').click(function() {
            $('#detail_1234808036').slideUp();
            $('#hide_1234808036').hide();
            $('#show_1234808036').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F4480">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
