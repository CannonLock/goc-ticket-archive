<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[27348] Gratia accounting for site FIU_HPCOSG_CE</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=27348" method="post">
<div class="page-header">
    <h3><span class="muted">27348</span> / Gratia accounting for site FIU_HPCOSG_CE</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Mengxing Cheng</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Mengxing Cheng</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">GRATIA Ops</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Resolved</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-11-13</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000622215">INC000000622215</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=27348", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/27348?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/27348?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Gratia%20accounting%20for%20site%20FIU_HPCOSG_CE%20ISSUE%3D27348%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='27348#1447429747'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-13T15:49:07+00:00">Nov 13, 2015 03:49 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1447429747">&nbsp;</a></div><pre>Thank you for informing us that this issue has been resolved. I will close this ticket.
Please submit problems, requests, and questions at&#58; <a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a> OSG Grid Operations Center goc@...., 317-278-9699 Visit the OSG Operations Page&#58; <a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='27348#1447338178'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-12T14:22:58+00:00">Nov 12, 2015 02:22 PM UTC</time><a class="anchor" name="1447338178">&nbsp;</a></div><pre>OK, the gratia site is now updating my Daily Wall Hours. I guess the reason that the wall hours don&#39;t match exactly 32*24 is because gratia parses only finished jobs and not yet those still running.  So let&#39;s give it some time to see how it works. But I would suggest gratia developer team to review the source code to see if there is way to enhance the accounting probes. Parsing the entire lsb.acct to extract a lot of information not relevant to OSG is not resource and time efficient any way.

Bo, to your concern, those records dated back to Oct 15 were MIS testing jobs. See this link for the clear picture.

<a href='http&#58;//myosg.grid.iu.edu/rgaccount/index?summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=daily_hours_byvo&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=30daysago&start_date=11%2F10%2F2015&end_type=now&end_date=11%2F10%2F2015&facility=on&facility_sel' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/rgaccount/index?summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=daily_hours_byvo&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=30daysago&start_date=11%2F10%2F2015&end_type=now&end_date=11%2F10%2F2015&facility=on&facility_sel</a>[]=10008&gridtype=on&gridtype_1=on&active=on&active_value=1&disable_value=1

You may close this ticket. Thank you very much for help!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='27348#1447262178'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-11T17:16:18+00:00">Nov 11, 2015 05:16 PM UTC</time><a class="anchor" name="1447262178">&nbsp;</a></div><pre>Additionally it looks like Gratia shows records going back to month ago when I don&#39;t see that OSG glideins were going to the site until just under two weeks ago&#58;

<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/bysite?starttime=time.time%28%29-1209600&endtime=time.time%28%29&span=86400&relativetime=2592000&facility=%5EFIU_HPCOSG_CE%24&exclude-facility=&vo=&exclude-vo=&user=&exclude-dn=' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/bysite?starttime=time.time%28%29-1209600&endtime=time.time%28%29&span=86400&relativetime=2592000&facility=%5EFIU_HPCOSG_CE%24&exclude-facility=&vo=&exclude-vo=&user=&exclude-dn=</a>

glideins&#58; <a href='http&#58;//osg-flock.grid.iu.edu/monitoring/condor/sites/FIU_HPCOSG_CE_31day.png' target='_blank' rel='nofollow'>http&#58;//osg-flock.grid.iu.edu/monitoring/condor/sites/FIU_HPCOSG_CE_31day.png</a>

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='27348#1447185207'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-10T19:53:27+00:00">Nov 10, 2015 07:53 PM UTC</time><a class="anchor" name="1447185207">&nbsp;</a></div><pre>Carl, I need more help on gratia.

In my configuration, all osg jobs will be mapped to a local user account &#34;osg&#34; so it should be very easy to identify them. Actually, I notice that /var/lib/gratia/data/gratia_certinfo_batch.&#60;JobID&#62; tracks which job is osg job. So, isn&#39;t it very easy for urCollector.pl to process those jobs identified by gratia_certinfo_batch.&#60;JobID&#62;?  Instead, gratia processes all the jobs in lsb.acct and generate more than 37000 xml files under /var/lib/gratia/data/quarantine/subdir.lsf_hpcosgce.fiu.edu_gratia-osg-prod.opensciencegrid.org_80/, most of which are non-osg jobs submitted by our local user.

[root@hpcosgce ~]# ls -al /var/lib/gratia/data/quarantine/subdir.lsf_hpcosgce.fiu.edu_gratia-osg-prod.opensciencegrid.org_80/ | wc
37871  340832 2885480

By the way, Gratia accouting webpage on myosg is not updating my usage though gratia-probes-cron is enabled at FIU site. In addition, the stats from Oct 28 to Nov 6 look incorrect to me. We currently have 32 cores running OSG jobs 24 hours every day. But the plot indicates that daily contribution is less than 20 CPUhours.

This link will take you to FIU gratia accouting
<a href='http&#58;//myosg.grid.iu.edu/rgaccount/index?summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=daily_hours_byvo&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=30daysago&start_date=11%2F10%2F2015&end_type=now&end_date=11%2F10%2F2015&facility=on&facility_sel' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/rgaccount/index?summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=daily_hours_byvo&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=30daysago&start_date=11%2F10%2F2015&end_type=now&end_date=11%2F10%2F2015&facility=on&facility_sel</a>[]=10008&gridtype=on&gridtype_1=on&active=on&active_value=1&disable_value=1

Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='27348#1447164187'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-10T14:03:07+00:00">Nov 10, 2015 02:03 PM UTC</time><a class="anchor" name="1447164187">&nbsp;</a></div><pre>Carl, I think the patch will solve this issue. Thank you for help!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='27348#1447106376'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-09T21:59:36+00:00">Nov 9, 2015 09:59 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1447106376">&nbsp;</a></div><pre>Hi Mengxing,

Do I understand correctly that you would like to be able to hide the unix username for your jobs?

If so, I don&#39;t think we implemented a configuration option for that.  But once we made a custom version with that kind of feature, in <a href='https&#58;//jira.opensciencegrid.org/browse/GRATIA-142' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/GRATIA-142</a> ... For that we just patched /usr/share/gratia/pbs-lsf/urCollector.pl to record &#34;Unknown&#34; for the unix id field.  I&#39;m attaching the patch for urCollector.pl in case this is what you are looking for.  But let us know either way.

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='27348#1447081451'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-09T15:04:11+00:00">Nov 9, 2015 03:04 PM UTC</time><a class="anchor" name="1447081451">&nbsp;</a></div><pre>Do you have a update about this ticket? Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='27348#1446829191'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-06T16:59:51+00:00">Nov 6, 2015 04:59 PM UTC</time><a class="anchor" name="1446829191">&nbsp;</a></div><pre>I figured out what is wrong. Basically, variable  &#34;lsfAcctLogDir&#34; in /usr/share/gratia/pbs-lsf/urCollector.conf was pointing to a wrong direction so that gratia couldn&#39;t find the lsb.acct file to parse. I have fixed the problem.

HOWEVER, gratia is parsing the entire lsb.acct files including sensitive information such as username of FIU students and faculty who has nothing to do with OSG. This is NOT a good security practice and I request you to instruct me to modify the gratia collector source code to collect only OSG relevant job information.

Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='27348#1446751983'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-05T19:33:03+00:00">Nov 5, 2015 07:33 PM UTC</time><a class="anchor" name="1446751983">&nbsp;</a></div><pre>Tanya, do you have any suggestion? how about reset &#34;gratia_probes = metric, lsf&#34; in 30-rsv.ini and/or probes = DEFAULT in 30-gratia.ini?
Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='27348#1446738256'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-05T15:44:16+00:00">Nov 5, 2015 03:44 PM UTC</time><a class="anchor" name="1446738256">&nbsp;</a></div><pre>This is a message in /var/log/gratia in a typical cycle.
10&#58;41&#58;29 EST Gratia&#58; Using config file&#58; /etc/gratia/pbs-lsf/ProbeConfig
10&#58;41&#58;29 EST Gratia&#58; Initializing Gratia with /etc/gratia/pbs-lsf/ProbeConfig
10&#58;41&#58;29 EST Gratia&#58; Creating a Record 2015-11-05T15&#58;41&#58;29Z
10&#58;41&#58;29 EST Gratia&#58; Creating a ProbeDetails record 2015-11-05T15&#58;41&#58;29Z
10&#58;41&#58;29 EST Gratia&#58; ***********************************************************
10&#58;41&#58;29 EST Gratia&#58; UsageXml&#58;  &#60;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&#62;&#60;ProbeDetails&#62;
&#60;RecordIdentity createTime=&#34;2015-11-05T15&#58;41&#58;29Z&#34; recordId=&#34;hpcosgce.fiu.edu&#58;187804.0&#34;/&#62;
&#60;ProbeName&#62;lsf&#58;hpcosgce.fiu.edu&#60;/ProbeName&#62;
&#60;SiteName&#62;FIU_HPCOSG_CE&#60;/SiteName&#62;
&#60;Grid&#62;OSG&#60;/Grid&#62;
&#60;ReporterLibrary version=&#34;3997&#34;&#62;Gratia&#60;/ReporterLibrary&#62;
&#60;/ProbeDetails&#62;
10&#58;41&#58;29 EST Gratia&#58; OK - Handshake added to bundle (1/100)
10&#58;41&#58;29 EST Gratia&#58; ***********************************************************
10&#58;41&#58;29 EST Gratia&#58; List of backup directories&#58; [u&#39;/var/lib/gratia/tmp&#39;]
10&#58;41&#58;29 EST Gratia&#58; Reprocessing response&#58; OK - Reprocessing 0 record(s) uploaded, 0 bundled, 0 failed
10&#58;41&#58;29 EST Gratia&#58; After reprocessing&#58; 0 in outbox 0 in staged outbox 0 tar files
10&#58;41&#58;29 EST Gratia&#58; Thu Nov  5 10&#58;41&#58;29 2015&#58; Daemon started. Lock file succesfully created.
10&#58;41&#58;29 EST Gratia&#58; Warning&#58; Not using the CE&#39;s job map log file for retrieving grid-related
10&#58;41&#58;29 EST Gratia&#58; information. All jobs treated as local jobs!
10&#58;41&#58;29 EST Gratia&#58; Files in &#39;/var/lib/gratia/tmp/urCollector&#39; will be written in the GGF UR format (XML)!
10&#58;41&#58;29 EST Gratia&#58; Thu Nov  5 10&#58;41&#58;29 2015&#58; Not run as a daemon. Executing a single iteration!
10&#58;41&#58;29 EST Gratia&#58; Thu Nov  5 10&#58;41&#58;29 2015&#58; Trying to get GLUE benchmarks from LDIF file&#58;
10&#58;41&#58;29 EST Gratia&#58; Warning&#58; could not open the LDIF file ... skipping!
10&#58;41&#58;29 EST Gratia&#58; Thu Nov  5 10&#58;41&#58;29 2015&#58; Warning&#58; No GLUE attributes will be added to usage records (reason&#58; no valid entries in LDIF file(s))!
10&#58;41&#58;29 EST Gratia&#58; Thu Nov  5 10&#58;41&#58;29 2015&#58; Not run as a daemon. Single iteration completed!
10&#58;41&#58;29 EST Gratia&#58; Exiting...
10&#58;41&#58;29 EST Gratia&#58; Lock file removed.
10&#58;41&#58;29 EST Gratia&#58; Thu Nov  5 10&#58;41&#58;29 2015&#58; Exit.
10&#58;41&#58;29 EST Gratia&#58; Processing bundle file&#58;
10&#58;41&#58;32 EST Gratia&#58; Connection via HTTP to&#58; gratia-osg-prod.opensciencegrid.org&#58;80
10&#58;41&#58;32 EST Gratia&#58; TransactionId&#58;  lsf&#58;hpcosgce.fiu.edu2015-11-05T154132Z
10&#58;41&#58;33 EST Gratia&#58; Response&#58; (SUCCESS, OK)
10&#58;41&#58;33 EST Gratia&#58; Processing bundle Response code&#58;  0
<div id='show_1247266502' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1247266502'>10&#58;41&#58;33 EST Gratia&#58; Processing bundle Response message&#58;  OK
10&#58;41&#58;33 EST Gratia&#58; OK - Processed bundle with 1 records&#58;  OK
10&#58;41&#58;33 EST Gratia&#58; ***********************************************************
10&#58;41&#58;33 EST Gratia&#58; Removing log files older than 31 days from /var/log/gratia
10&#58;41&#58;33 EST Gratia&#58;  Will check the files&#58; [u&#39;/var/log/gratia/2015-11-01.log&#39;, u&#39;/var/log/gratia/2015-10-27.log&#39;, u&#39;/var/log/gratia/2015-10-28.log&#39;, u&#39;/var/log/gratia/2015-11-04.log&#39;, u&#39;/var/log/gratia/2015-11-03.log&#39;, u&#39;/var/log/gratia/2015-10-31.log&#39;, u&#39;/var/log/gratia/2015-10-29.log&#39;, u&#39;/var/log/gratia/2015-11-02.log&#39;, u&#39;/var/log/gratia/2015-10-30.log&#39;, u&#39;/var/log/gratia/2015-11-05.log&#39;]
10&#58;41&#58;33 EST Gratia&#58; /var/log/gratia uses 0.003% and there is 77% free
10&#58;41&#58;33 EST Gratia&#58; Removing incomplete data files older than 31 days from /var/lib/gratia/data/
10&#58;41&#58;33 EST Gratia&#58; Removing quarantines data files older than 31 days from /var/lib/gratia/data/quarantine
10&#58;41&#58;33 EST Gratia&#58; End of execution summary&#58; new records sent successfully&#58; 0
10&#58;41&#58;33 EST Gratia&#58;                           new records suppressed&#58; 0
10&#58;41&#58;33 EST Gratia&#58;                           new records failed&#58; 0
10&#58;41&#58;33 EST Gratia&#58;                           records reprocessed successfully&#58; 0
10&#58;41&#58;33 EST Gratia&#58;                           reprocessed records failed&#58; 0
10&#58;41&#58;33 EST Gratia&#58;                           handshake records sent successfully&#58; 1
10&#58;41&#58;33 EST Gratia&#58;                           handshake records failed&#58; 0
10&#58;41&#58;33 EST Gratia&#58;                           outstanding records&#58; 0
10&#58;41&#58;33 EST Gratia&#58;                           outstanding staged records&#58; 0
10&#58;41&#58;33 EST Gratia&#58;                           outstanding records tar files&#58; 0
10&#58;41&#58;33 EST Gratia&#58; End-of-execution disconnect ...

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977
</div><script type='text/javascript'>
        $('#show_1247266502').click(function() {
            $('#detail_1247266502').slideDown("normal");
            $('#show_1247266502').hide();
            $('#hide_1247266502').show();
        });
        $('#hide_1247266502').click(function() {
            $('#detail_1247266502').slideUp();
            $('#hide_1247266502').hide();
            $('#show_1247266502').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27348#1446738084'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-05T15:41:24+00:00">Nov 5, 2015 03:41 PM UTC</time><a class="anchor" name="1446738084">&nbsp;</a></div><pre>/var/lib/gratia/data/quarantine/ directory has nothing. What particular information should I look for in /var/log/gratia?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='27348#1446737463'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-05T15:31:03+00:00">Nov 5, 2015 03:31 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1446737463">&nbsp;</a></div><pre>Hi,

It looks like you are sending ONLY heartbeats (lsf&#58;hpcosgce.fiu.edu)  but no records. Could you please check logs in /var/log/gratia and also check quarantine directory under /var/lib/gratia/data.
Thanks,
Tanya</pre></div><div class='update_description'><i onclick="document.location='27348#1446673908'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-04T21:51:48+00:00">Nov 4, 2015 09:51 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1446673908">&nbsp;</a></div><pre>hpcosgce.fiu.edu is a new production CE recently launched to receive OSG VO jobs. We are able to configure Gratia properly to send status report to myosg. However, Gratia accounting shows no utilization stats. I need instruction how to configure Gratia to send accounting data to myosg.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F27348">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 27348});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
