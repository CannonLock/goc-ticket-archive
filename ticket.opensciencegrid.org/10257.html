<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[10257] Resource Specific Issue on Purdue-RCAC</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=10257" method="post">
<div class="page-header">
    <h3><span class="muted">10257</span> / Resource Specific Issue on Purdue-RCAC</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Robert Engel</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">Purdue-RCAC</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/resource</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Robert Engel</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Check for updates</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2011-06-13</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG RA <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">USCMS <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/10257", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='10257#1307759227'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-11T02:27:07+00:00">Jun 11, 2011 02:27 AM UTC</time> by <b>GRATIA</b><a class="anchor" name="1307759227">&nbsp;</a></div><pre>The Fermi/Remedy ticket has been resolved with the following solution.  Please resolve your ticket.

Resolution Categorization Tier 1 &#58;
Resolution Categorization Tier 2 &#58;
Resolution Categorization Tier 3 &#58;
Resolution                       &#58; Resolved by GOC
Resolution Method                &#58;

Fermi National Accelerator Laboratory Service DeskService Desk&#58; 630.840.2345</pre></div><div class='update_description'><i onclick="document.location='10257#1307734927'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-10T19:42:07+00:00">Jun 10, 2011 07:42 PM UTC</time> by <b>engel_r@....</b><a class="anchor" name="1307734927">&nbsp;</a></div><pre>Hello,

I can see my jobs successfully entering suspended state after TERM
has been received. The error rate dropped as well. I think the ticket
can be closed.

Thanks!
Robert

On 6/10/11 3&#58;30 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10257#1307734209'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-10T19:30:09+00:00">Jun 10, 2011 07:30 PM UTC</time> by <b>bcotton@....</b><a class="anchor" name="1307734209">&nbsp;</a></div><pre>Alain,

Sorry for the delayed response. I&#39;m out of the office currently. The
KILLING_TIMEOUT has been increased to 5 minutes.

On Fri, Jun 10, 2011 at 3&#58;22 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10257#1307733738'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-10T19:22:18+00:00">Jun 10, 2011 07:22 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1307733738">&nbsp;</a></div><pre>Ben,

Can you please provide an update from your end?

Thanks,

-Alain</pre></div><div class='update_description'><i onclick="document.location='10257#1307125840'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-03T18:30:40+00:00">Jun 3, 2011 06:30 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1307125840">&nbsp;</a></div><pre>Ben,

Have you been able to apply Robert&#39;s recommendations?

Thanks,

-Alain</pre></div><div class='update_description'><i onclick="document.location='10257#1306335427'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-05-25T14:57:07+00:00">May 25, 2011 02:57 PM UTC</time> by <b>engel_r@....</b><a class="anchor" name="1306335427">&nbsp;</a></div><pre>Hi,

the situation improved a bit. I can at least see jobs being
suspended. However, the error probability is still high. Please increase
the KILLING_TIMEOUT further. I would recommend to set it to at least 5
minutes. Other resources in the OSG have it set at 15min and some at
30min. An increase doesn&#39;t waste CPU hours, since the majority of jobs
will finish the suspend much sooner.

Thanks,
Robert

On 5/24/11 10&#58;46 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10257#1306248359'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-05-24T14:45:59+00:00">May 24, 2011 02:45 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1306248359">&nbsp;</a></div><pre>Robert,

Did the change fix anything for you?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='10257#1305660428'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-05-17T19:27:08+00:00">May 17, 2011 07:27 PM UTC</time> by <b>bcotton@....</b><a class="anchor" name="1305660428">&nbsp;</a></div><pre>Robert,

I&#39;ve changed the KILLING_TIMEOUT on our systems to 180 seconds. Please
let us know if this seems to reduce the rate of violent job death.

Thanks,
BC

--
Ben Cotton
Systems Research Engineer
IT Research Systems
Purdue University</pre></div><div class='update_description'><i onclick="document.location='10257#1305069307'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-05-10T23:15:07+00:00">May 10, 2011 11:15 PM UTC</time> by <b>bcotton@....</b><a class="anchor" name="1305069307">&nbsp;</a></div><pre>I&#39;ll bring it up to our Change Advisory Board. I can&#39;t make the change unilaterally because it may impact the performance of the local PBS jobs. The next meeting is Tuesday morning, so I&#39;ll report back after that. Simply changing the timeout may not provide much relief in our current environment as our process culler may still axe the job while it&#39;s in the process of vacating. However...

Independent of this ticket, I&#39;m working on some changes to our PBS/Condor interaction that should reduce the number of vacates on the clusters. This should obviate the need for the aforementioned process culler and provide for increased throughput on our clusters in the coming weeks.

----- Original message -----
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10257#1305067867'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-05-10T22:51:07+00:00">May 10, 2011 10:51 PM UTC</time> by <b>engel_r@....</b><a class="anchor" name="1305067867">&nbsp;</a></div><pre>Hi,

yes and this is much too small for two reasons&#58;

1) upon signal TERM each application potentially has to write its memory
content (~1GB) to the local disk (~10MB/s) and stage-out the resulting
file over the network to a remote storage resource (~10MB/s). This
yields 200s already.

2) job preemption times increase linearly with the number of jobs being
preempted at the same time, because they all share the same network to
stage-out to an external storage resource.

OSG resources set KILLING_TIMEOUT between 5 and 30 minutes. There is no
risk in setting it to a high value, because jobs will usually complete
the process quickly under good conditions. Setting it too low will just
increase the error rate on preemption. Do you think you could increase
the timeout? The majority of my jobs does not currently survive preemption.

Thanks,
Robert

On 5/10/11 3&#58;18 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10257#1305065887'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-05-10T22:18:07+00:00">May 10, 2011 10:18 PM UTC</time> by <b>bcotton@....</b><a class="anchor" name="1305065887">&nbsp;</a></div><pre>KILLING_TIMEOUT is set to the default value of 30 (seconds)
----- Original message -----
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10257#1305063366'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-05-10T21:36:06+00:00">May 10, 2011 09:36 PM UTC</time> by <b>engel_r@....</b><a class="anchor" name="1305063366">&nbsp;</a></div><pre>Hi,

unfortunately I don&#39;t see an improvement. What is KILLING_TIMEOUT
set to?

Thanks,
Robert

On 5/5/11 3&#58;33 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10257#1304634787'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-05-05T22:33:07+00:00">May 5, 2011 10:33 PM UTC</time> by <b>bcotton@....</b><a class="anchor" name="1304634787">&nbsp;</a></div><pre>Robert,

It looks like we intended to have the kill interval for Condor set to
5 minutes, but I suspect a syntax error caused it to actually be set
to 5 seconds. I&#39;ve committed a fix that should address this. It will
go out to our nodes over the next few hours. Please let us know if you
see an improvement.

Thanks,
BC

Purdue, reference SVN commit 12323

--
Ben Cotton
Systems Research Engineer
IT Research Systems
Purdue University</pre></div><div class='update_description'><i onclick="document.location='10257#1304630646'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-05-05T21:24:06+00:00">May 5, 2011 09:24 PM UTC</time> by <b>engel_r@....</b><a class="anchor" name="1304630646">&nbsp;</a></div><pre>Hi,

from the logs of the application it looks, that TERM was sent to
the parent application. The parent then stopped the boinc client and
tried to create the job archive from the working directory.
Unfortunately the time was not sufficient&#58;

drwxr-xr-x 4 robert robert 4.0K May  4 04&#58;46 34680
-rw-rw-r-- 1 robert robert 179M May  5 14&#58;19 34680.new.tar
-rw-r--r-- 1 robert robert 9.7M May  4 06&#58;06 34680.tar

The archive that was created on cms-190 has only a size of 9.7MB, while
the full archive should have been 179MB in size. This indicates that the
the TERM was followed by KILL within a short amount of time (&#60;1Min) -
which is too short to create the archive and stage it out to a storage
resource.

Could you please increase the grace time between TERM and KILL to 5
minutes perhaps?

Thanks,
Robert

On 5/5/11 6&#58;45 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10257#1304603107'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-05-05T13:45:07+00:00">May 5, 2011 01:45 PM UTC</time> by <b>Fengping Hu</b><a class="anchor" name="1304603107">&nbsp;</a></div><pre>It&#39;s available at $OSG_DATA/ligo/rengel/tasks/tasks.cms-190.tgz.

Thanks,
Fengping

On Wed, May 4, 2011 at 8&#58;12 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10257#1304554327'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-05-05T00:12:07+00:00">May 5, 2011 12:12 AM UTC</time> by <b>engel_r@....</b><a class="anchor" name="1304554327">&nbsp;</a></div><pre>Hello,

I carefully debugged a small number of test applications running on the
resource during the past 24 hours, which were preempted by the queue I
believe&#58;

CondorId 4895775, started at 07&#58;43&#58;33 on cms-190.rcac.purdue.edu and
again at 09&#58;07&#58;28 on cms-001.rcac.purdue.edu
CondorId 4895776, started at 07&#58;43&#58;47 on cms-190.rcac.purdue.edu and
again at 09&#58;07&#58;34 on cms-001.rcac.purdue.edu
CondorId 4895777, started at 07&#58;43&#58;53 on cms-190.rcac.purdue.edu and
again at 09&#58;07&#58;37 on cms-200.rcac.purdue.edu

Unfortunately none of the applications survived the process, because the
grace time seems to be too short. Can you please check on
cms-190.rcac.purdue.edu if $OSG_WN_TMP/ligo/rengel/tasks is present. If
so, please tar the result and make it available in
$OSG_DATA/ligo/rengel/tasks/ so I can have a look at the working
directory of the jobs.

Thanks,
Robert

On 5/2/11 5&#58;54 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10257#1304340894'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-05-02T12:54:54+00:00">May 2, 2011 12:54 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1304340894">&nbsp;</a></div><pre>Purdue,

Is there a response to the few points Robert had provided in the last entry?

Thanks,

-Alain</pre></div><div class='update_description'><i onclick="document.location='10257#1303180987'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-04-19T02:43:07+00:00">Apr 19, 2011 02:43 AM UTC</time> by <b>engel_r@....</b><a class="anchor" name="1303180987">&nbsp;</a></div><pre>Hi,

there are two issues&#58;

1) On some nodes the jobs receive the TERM signal on suspend&#58;

2011/04/14 18&#58;07&#58;57 INFO main&#58;&#58;&#62; GEO600 starting task = &#39;58061&#39; on
&#39;steele-b139.rcac.purdue.edu&#39;!
...
2011/04/14 18&#58;16&#58;47 INFO main&#58;&#58;application_stop&#62; signal = &#39;TERM&#39;
2011/04/14 18&#58;16&#58;48 INFO main&#58;&#58;react_to_signal&#62; application exited on
signal = &#39;TERM&#39;!

but the grace time between TERM and KILL (1s) is too short for my jobs
to finish cleanly and the restart some time later fails for that reason.

2) On other nodes the job does not receive the TERM signal _or_ is
issued the KILL signal at the same time, such that the job ends abruptly
without a message in log, stdout or stderr&#58;

2011/04/15 18&#58;02&#58;01 INFO main&#58;&#58;&#62; GEO600 starting task = &#39;58061&#39; on
&#39;steele-a463.rcac.purdue.edu&#39;!
...
2011/04/15 18&#58;07&#58;13 INFO main&#58;&#58;get_storage_locations&#62;
GEO600&#58;&#58;Storage&#58;&#58;Prot = &#39;file&#58;///scratch/osg/ligo/rengel/monitoring&#39;
&#60;crash&#62;

Robert

On 4/18/11 3&#58;19 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10257#1303154348'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-04-18T19:19:08+00:00">Apr 18, 2011 07:19 PM UTC</time> by <b>bcotton@....</b><a class="anchor" name="1303154348">&nbsp;</a></div><pre>On Mon, Apr 18, 2011 at 1&#58;13 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; it seems that when my jobs are being suspended by the queue, they do not receive the TERM signal, making the job crash rather than suspend when the queue tries to evict a job. I installed a signal handler to all Unix signals except kill, only CHLD fires occasionally.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Can you confirm, that eviction through the queue works for other users and that signal TERM is sent under this circumstances?</font>
<font color='#7F7E6F'>&#62;</font>
TERM is the default signal for jobs that are evicted. I can run some
tests, but I haven&#39;t heard of any problems with evictions. Is there a
pattern to the nodes that the jobs are being evicted from?

It makes sense that jobs would not receive TERM when being suspended,
since Condor&#39;s idea of suspend is to keep a job matched to the execute
host, but not currently running.

Does this help?

Thanks,
BC

--
Ben Cotton
Systems Research Engineer
IT Research Systems
Purdue University</pre></div><div class='update_description'><i onclick="document.location='10257#1303146428'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-04-18T17:07:08+00:00">Apr 18, 2011 05:07 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1303146428">&nbsp;</a></div><pre>[by Robert Engel]

Hello,

it seems that when my jobs are being suspended by the queue, they do not receive the TERM signal, making the job crash rather than suspend when the queue tries to evict a job. I installed a signal handler to all Unix signals except kill, only CHLD fires occasionally.

Can you confirm, that eviction through the queue works for other users and that signal TERM is sent under this circumstances?

Thanks,
Robert</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F10257">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
