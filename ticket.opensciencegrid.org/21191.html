<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[21191] RSV records show up as unknown VO records, resulting in quarantine by gratia probes</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=21191" method="post">
<div class="page-header">
    <h3><span class="muted">21191</span> / RSV records show up as unknown VO records, resulting in quarantine by gratia probes</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Horst Severini</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Carl Edquist</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Resolved/Close on NAD</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-08-05</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">GRATIA <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Carl Edquist <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/21191", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/21191?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/21191?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20RSV%20records%20show%20up%20as%20unknown%20VO%20records%2C%20resulting%20in%20quarantine%20by%20gratia%20probes%20ISSUE%3D21191%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='21191#1407182353'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-04T19:59:13+00:00">Aug 4, 2014 07:59 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1407182353">&nbsp;</a></div><pre>Yes, I think we can close this again.

Thanks all,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='21191#1407181707'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-04T19:48:27+00:00">Aug 4, 2014 07:48 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1407181707">&nbsp;</a></div><pre>Unless anyone objects I am going to mark this as resolved.
Thanks to everyone for all the work.

Vince</pre></div><div class='update_description'><i onclick="document.location='21191#1407181631'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-04T19:47:11+00:00">Aug 4, 2014 07:47 PM UTC</time> by <b>marcom@....</b><a class="anchor" name="1407181631">&nbsp;</a></div><pre>Great, then I think the ticket can be closed.
Thank you,
Marco

On Aug 4, 2014, at 2&#58;09 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='21191#1407179356'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-04T19:09:16+00:00">Aug 4, 2014 07:09 PM UTC</time><a class="anchor" name="1407179356">&nbsp;</a></div><pre>HI again,

I just checked again, and all the formerly quarantined records have been processed, and none showed up in the quarantine folder, so I think we&#39;re good!

Thanks again,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='21191#1407168403'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-04T16:06:43+00:00">Aug 4, 2014 04:06 PM UTC</time><a class="anchor" name="1407168403">&nbsp;</a></div><pre>Hi Marco,

yes, it&#39;s quite possible that the real problem was the bug in the condor probe. We certainly haven&#39;t changed anything on our end -- and we have never changed the default of ignoring local records on any of our sites, so I don&#39;t think that was it, either.

I have moved the old quarantined records back into /var/lib/gratia/data/, hopefully they will all be processed now, and won&#39;t be quarantined again.

Thanks,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='21191#1407002239'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-02T17:57:19+00:00">Aug 2, 2014 05:57 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1407002239">&nbsp;</a></div><pre>There was a bug in the condor probe, that was quarantining all the records (not only RSV ones) if you had set the to dispose of local records. This has been fixed recently (see <a href='https&#58;//ticket.grid.iu.edu/21696' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/21696</a>). Maybe we have been following a red herring and because the records observed were RSV, while it was the other problem and all records were quarantined. Otherwise the RSV configuration somehow has been fixed. If you are curious you can check in the 500 files if the history records are all for RSV or also for other jobs.

For the remaining files in the tmp directory or the quarantine one, move them in /var/lib/gratia&#58; some will be processed (if they are regular records), some quarantined if they have to.
Then you can delete the quarantined one or let the cleaning routine do it after 30 days.

Thank you,
Marco</pre></div><div class='update_description'><i onclick="document.location='21191#1406920573'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-01T19:16:13+00:00">Aug 1, 2014 07:16 PM UTC</time> by <b>Joel Snow</b><a class="anchor" name="1406920573">&nbsp;</a></div><pre>Hi Horst,

I don&#39;t know what fixed the problem or when. The date on the
directories may be an indication.  I did not delete any quarantined
records. I did not remove any history files.  Thanks,

joel

On Fri, 1 Aug 2014, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='21191#1406920038'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-01T19:07:18+00:00">Aug 1, 2014 07:07 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1406920038">&nbsp;</a></div><pre>Hi Joel,

thanks, good to know there haven&#39;t been any more quarantined records!
I wonder what fixed the problem finally, and when?

What happened to the old ones, though? Did they get re-processed
automatically, or did you delete them, or ...?

I see there are about 5800 history.x.0 files in
/var/lib/gratia/data/tmp/, which I believe I moved there from
/var/lib/gratia/data/quarantine/ during one of the previous tests we did
-- or did you move more in there at some point? Can&#39;t remember now when
I did that.

Marco&#58; should we go ahead and move these files back into
/var/lib/gratia/data/, and see if they get processed now, to make sure
everything is working properly now?

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1406915496'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-01T17:51:36+00:00">Aug 1, 2014 05:51 PM UTC</time><a class="anchor" name="1406915496">&nbsp;</a></div><pre>I don&#39;t see any new files quarantined&#58;

[root@lutgw1 ~]# ls -ld &#96;locate quarantine|grep -v backup&#96;
drwxr-xr-x 4 root root  315392 Jul 24 08&#58;44 /var/lib/gratia/data/quarantine
drwxr-xr-x 2 root root 2146304 Jul 17 10&#58;18 /var/lib/gratia/data/quarantine/subdir.condor_lutgw1.lunet.edu_gratia-osg-prod.opensciencegrid.org_80
drwxr-xr-x 2 root root  815104 Jul 17 10&#58;31 /var/lib/gratia/data/quarantine/subdir.gridftp-transfer_lutgw1.lunet.edu_gratia-osg-prod.opensciencegrid.org_80
[root@lutgw1 ~]# ls -l &#96;locate quarantine|grep -v backup&#96;
/var/lib/gratia/data/quarantine&#58;
total 2900
drwxr-xr-x 2 root root 2146304 Jul 17 10&#58;18 subdir.condor_lutgw1.lunet.edu_gratia-osg-prod.opensciencegrid.org_80
drwxr-xr-x 2 root root  815104 Jul 17 10&#58;31 subdir.gridftp-transfer_lutgw1.lunet.edu_gratia-osg-prod.opensciencegrid.org_80

/var/lib/gratia/data/quarantine/subdir.condor_lutgw1.lunet.edu_gratia-osg-prod.opensciencegrid.org_80&#58;
total 0

/var/lib/gratia/data/quarantine/subdir.gridftp-transfer_lutgw1.lunet.edu_gratia-osg-prod.opensciencegrid.org_80&#58;
total 0

The ticket can be closed.  thanks,

joel

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Joel Snow 36</pre></div><div class='update_description'><i onclick="document.location='21191#1406912515'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-01T17:01:55+00:00">Aug 1, 2014 05:01 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1406912515">&nbsp;</a></div><pre>Horst, all,
the rsv entries are not reported separately from lutgw1.lunet.edu (see below).
This is the same behavior of other ou.edu probes (oscer, tier2-1).
They could be either discarded or lumped with some VO

If you still see quarantined RSV record on lutgw1 and not in the other clusters it could be&#58;
1. you use different proxies (on the other clusters they are mapper to a user belonging to a VO)
2. on the other clusters you choose to discard the records while on lutgw1 you are quarantining them (this is selected in the ProbeConfig file)

If you con&#39;t see new quarantined files any more you can close the ticket.
I you still see then let me know which of the 2 it is (which user are mapped RSV jobs to, if there is any difference in the ProbeConfig files)
Thank you,
Marco

+---------------------------------+------------------------------------------------+------------------+----------------+-------------+--------+-----------+--------+-----------+
| CommonName                      | VOName                                         | ReportableVOName | GlobalUserName | LocalUserId | JobNum | CpuUser   | CpuSys | WallT     |
+---------------------------------+------------------------------------------------+------------------+----------------+-------------+--------+-----------+--------+-----------+
| /CN=John Hover                  | /atlas/usatlas/Role=production/Capability=NULL | atlas            | usatlas1@local | usatlas1    |  30918 | 234346734 | 211805 | 245565944 |
| /CN=Jose Caballero 649          | /atlas/usatlas/Role=production/Capability=NULL | atlas            | mis@local      | mis         |   2831 |   2031694 |   1391 |   2847692 |
| /CN=Jose Caballero 649          | /atlas/usatlas/Role=production/Capability=NULL | atlas            | usatlas1@local | usatlas1    |  37917 | 696287194 | 645097 | 720077008 |
| /CN=wguan/CN=667815/CN=Wen Guan | /atlas/usatlas/Role=production/Capability=NULL | atlas            | usatlas1@local | usatlas1    |      3 |         0 |      0 |       201 |
+---------------------------------+------------------------------------------------+------------------+----------------+-------------+--------+-----------+--------+-----------+</pre></div><div class='update_description'><i onclick="document.location='21191#1406580424'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-28T20:47:04+00:00">Jul 28, 2014 08:47 PM UTC</time><a class="anchor" name="1406580424">&nbsp;</a></div><pre>I pinged Marco about this because I am also running out of ideas.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='21191#1406138291'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-23T17:58:11+00:00">Jul 23, 2014 05:58 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1406138291">&nbsp;</a></div><pre>Thanks Joel.

So this other ticket is resolved? Right, I see it now that that was
updated a few hours ago. I missed that earlier, sorry ...

Can you check whether the number of quarantined RSV records is still
growing, or if this magically fixed that, too?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1406137579'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-23T17:46:19+00:00">Jul 23, 2014 05:46 PM UTC</time> by <b>Joel Snow</b><a class="anchor" name="1406137579">&nbsp;</a></div><pre>I installed the empty-condor package from the osg-empty repository and
upgraded the site to OSG 3.2.13 with no known problems so far.  The
3.2.13 rsv packages are installed&#58;
[root@lutgw1 etc]# yum --quiet --disablerepo=* --enablerepo=osg list
installed &#34;*rsv*&#34;|grep -v Rocks
Installed Packages
osg-configure-rsv.noarch              1.0.56-1.osg32.el6              @osg
rsv.noarch                            3.7.16-2.osg32.el6              @osg
rsv-consumers.noarch                  3.7.16-2.osg32.el6              @osg
rsv-core.noarch                       3.7.16-2.osg32.el6              @osg
rsv-metrics.noarch                    3.7.16-2.osg32.el6              @osg

joel

On Wed, 23 Jul 2014, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='21191#1406135594'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-23T17:13:14+00:00">Jul 23, 2014 05:13 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1406135594">&nbsp;</a></div><pre>Thanks Vince!

Oh, could it be that this RSV VO issue is related to the osg-3.2 upgrade
issue on this site?

<a href='https&#58;//ticket.grid.iu.edu/21532' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/21532</a>

----
I&#39;m upgrading my site from 3.1.30 to 3.2.11.  I have a non-OSG condor
installation.  Unfortunately a yum update requires a specific condor
version as a dependency.  The dependency version does not match the condor
version I have installed.  As a result the package
rsv-metrics-3.7.16-2.osg32.el6.noarch will not install.
----

This is a long shot, and I&#39;m also not sure whether this VO reporting
broke around the same time that Joel did the upgrade, but I thought I&#39;d
ask, since I think it&#39;s at least conceivable that the two are related.

In other words, does the rsv-metrics RPM have anything to do with the
RSV VO mapping?

Just an idea,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1406132247'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-23T16:17:27+00:00">Jul 23, 2014 04:17 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1406132247">&nbsp;</a></div><pre>Horst,

I have added the Gratia Support Center to this ticket to assist with your request.

Thanks!</pre></div><div class='update_description'><i onclick="document.location='21191#1405113892'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-11T21:24:52+00:00">Jul 11, 2014 09:24 PM UTC</time><a class="anchor" name="1405113892">&nbsp;</a></div><pre>Hi Kyle,

that&#39;s a good question. So I did what Marco had asked, but we&#39;re still not seeing the voi/VOc entries in our local-user-vo-map file.
But of course we still have no idea whether that has anything to do with the problem of why the RSV records on Lucille aren&#39;t recognized as belonging to the RSV VO in Gratia.

I&#39;d still like to hear from a Gratia expert where this rsv user to RSV VO mapping is actually done in Gratia, since on all other sites beside Lucille, there is NO manual mapping from the rsv user to the RSV VO anywhere, yet the records are &#39;magically&#39; mapped. I still claim that once we can find where this &#39;magic&#39; happens, that would bring us one step closer to why it&#39;s not working at Lucille.

Thanks a lot,
have a good weekend,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='21191#1405112371'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-11T20:59:31+00:00">Jul 11, 2014 08:59 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1405112371">&nbsp;</a></div><pre>Hi all,

Just doing due diligence and checking in to see what the status of this issue might be.

Thanks!

-Kyle</pre></div><div class='update_description'><i onclick="document.location='21191#1403894646'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-27T18:44:06+00:00">Jun 27, 2014 06:44 PM UTC</time><a class="anchor" name="1403894646">&nbsp;</a></div><pre>Hi Edgar,

right -- we don&#39;t know if the missing VOc/voi lines have anything to do with the problem or not ...

The Lucille RSV certificate is in the grid-mapfile&#58;

----
&#34;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=rsv/CN=661801/CN=Rami Sesha Vanguri&#34; usatlas1
&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=rsv/lutgw1.lunet.edu&#34; rsv
&#34;/DC=gov/DC=fnal/O=Fermilab/OU=Robots/CN=rsv1.fnal.gov/CN=cron/CN=Steven C. Timm/CN=UID&#58;timm&#34; samgrid
&#34;/DC=gov/DC=fnal/O=Fermilab/OU=Robots/CN=rsv2.fnal.gov/CN=cron/CN=Steven C. Timm/CN=UID&#58;timm&#34; samgrid
----

But we already know that that&#39;s not the problem, since otherwise the RSV page,

<a href='https&#58;//lutgw1.lunet.edu/rsv/' target='_blank' rel='nofollow'>https&#58;//lutgw1.lunet.edu/rsv/</a>

wouldn&#39;t be green. Well, right now it&#39;s partially red because Lucille is in maintenance, but it&#39;s usually completely green.

So the problem isn&#39;t with the mapping of the RSV service cert DN to the local unix user, but with the local unix user to the RSV VO -- and apparently nobody has any idea how that is supposed to be done, and it just magically works for most sites, but not for this one! &#58;)

Thanks a lot,
have a good weekend,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='21191#1403893681'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-27T18:28:01+00:00">Jun 27, 2014 06:28 PM UTC</time><a class="anchor" name="1403893681">&nbsp;</a></div><pre>Hi Horst,

WHat I meant is that I followed Marco&#39;s instructions and I don&#39;t get the

rsv
RSV

line in the Voc Voi lines.

I didn&#39;t know that was needed. What happens if you do&#58;

cat /etc/grid-security/grid-mapfile | grep rsv

Marco,

Do you have any ideas?

Cheers,

Edgar

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='21191#1403893674'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-27T18:27:54+00:00">Jun 27, 2014 06:27 PM UTC</time><a class="anchor" name="1403893674">&nbsp;</a></div><pre>Hi Horst,

WHat I meant is that I followed Marco&#39;s instructions and I don&#39;t get the

rsv
RSV

line in the Voc Voi lines.

I didn&#39;t know that was needed. What happens if you do&#58;

cat /etc/grid-security/grid-mapfile | grep rsv
&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020&#34; rsv

Marco,

Do you have any ideas?

Cheers,

Edgar

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='21191#1403806092'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-26T18:08:12+00:00">Jun 26, 2014 06:08 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1403806092">&nbsp;</a></div><pre>Hi again,

okay, I just added the #--- before the USER-VO-MAP line, and re-ran
edg-mkgridmap, but I don&#39;t think that changed anything.

Could you please check on your end whether you&#39;re now receiving RSV records
as RSV VO?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1403800499'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-26T16:34:59+00:00">Jun 26, 2014 04:34 PM UTC</time><a class="anchor" name="1403800499">&nbsp;</a></div><pre>Hi Horst,

Well I used your same files except I added a line like this before the USER-VO-MAP

#-------------------

And I was able to get the rsv RSV line on the user-vo-map file.

Marco, do you have any other idea?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='21191#1403774772'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-26T09:26:12+00:00">Jun 26, 2014 09:26 AM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1403774772">&nbsp;</a></div><pre>Hi Edgar,

I&#39;m not completely following. Our /etc/edg-mkgridmap.conf file does look
like you propose&#58;

----
# USER-VO-MAP rsv RSV - 101 - Horst Severini (hs@....)
gmf_local   /etc/grid-security/grid-mapfile-local
----

Or do I have a small typo which I can&#39;t see?

And as far as I know, /etc/osg/local-user-vo-map just needs to have
local unix user and the lower case VO -- at least that&#39;s what we have
on OU_OSCER_ATLAS, with entries like this&#58;

ftalotta dosar

And that definitely works, otherwise we&#39;d see unknown records there, too,
which we don&#39;t.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1403722367'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-25T18:52:47+00:00">Jun 25, 2014 06:52 PM UTC</time><a class="anchor" name="1403722367">&nbsp;</a></div><pre>Ok,

So there are two things that might be going wrong,

I think your local-user-vo-map should say something like&#58;

rsv RSV

And in your conf file like this&#58;

#-------------------
# USER-VO-MAP rsv RSV - 101 - Horst Severini (hs@....)
gmf_local   /etc/grid-security/grid-mapfile-local

If I do it like this basically with other things being equal to what you sent I get this user vo map&#58;

# User-VO map
# Generated by generate-vo-map
# The voi line is used by MonaLISA, and is the lower-case version of all VO names
# The VOc line is used by MonaLISA, and is the proper-case version of all VO names
# Other lines are of the form &#60;account&#62; &#60;VO&#62;

#voi star mis
#VOc STAR MIS

efajardo star
rsv RSV

Marco, do you think of anything else that might be a problem?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='21191#1403720784'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-25T18:26:24+00:00">Jun 25, 2014 06:26 PM UTC</time><a class="anchor" name="1403720784">&nbsp;</a></div><pre>Okay, I attached that as well. Good luck! &#58;)
Thanks a lot, Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='21191#1403720329'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-25T18:18:49+00:00">Jun 25, 2014 06:18 PM UTC</time><a class="anchor" name="1403720329">&nbsp;</a></div><pre>Hi Horst,

I try to reproduce your problem, but I am missing one piece. Can you also send me your /etc/osg/local-user-vo-map ?

Sorry for not mentioning this before,

Edgar
OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='21191#1403612278'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-24T12:17:58+00:00">Jun 24, 2014 12:17 PM UTC</time><a class="anchor" name="1403612278">&nbsp;</a></div><pre>Hi Edgar,

okay, I&#39;ve attached the two files. Let me know if there&#39;s anything else I can do to help.

Thanks a lot,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='21191#1403546354'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-23T17:59:14+00:00">Jun 23, 2014 05:59 PM UTC</time><a class="anchor" name="1403546354">&nbsp;</a></div><pre>Hi Marco,

Did you got any chance to look at the log provided by Horst?

Horst,

Would it be possible for you to also attach your&#58;

1. /etc/edg-mkgridmap.conf

2. /etc/grid-security/grid-mapfile-local

I don&#39;t see anything special on the log. So I will try to reproduce  your problem.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='21191#1403021749'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-17T16:15:49+00:00">Jun 17, 2014 04:15 PM UTC</time><a class="anchor" name="1403021749">&nbsp;</a></div><pre>Okay, I just attached the log to this ticket. Hope it helps!
Thanks, Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='21191#1403018864'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-17T15:27:44+00:00">Jun 17, 2014 03:27 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1403018864">&nbsp;</a></div><pre>I meant the edg-mkgridmap log file.</pre></div><div class='update_description'><i onclick="document.location='21191#1403015111'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-17T14:25:11+00:00">Jun 17, 2014 02:25 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1403015111">&nbsp;</a></div><pre>Somehow my message got cut by the system.

I had already run that, it didn&#39;t add the voi/voc lines.

I&#39;ll send a new log in a little while, I have to take
care of something else first.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1403014394'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-17T14:13:14+00:00">Jun 17, 2014 02:13 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1403014394">&nbsp;</a></div><pre>Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='21191#1403013152'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-17T13:52:32+00:00">Jun 17, 2014 01:52 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1403013152">&nbsp;</a></div><pre>Hi Horst,
did you run edg-mkgridmap after changing /etc/edg-mkgridmap.conf?
I checked the code and it should pick the # USER-VO-MAP line and add it to VOc/voi.
Please run it and attach the log file.
Thank you,
Marco</pre></div><div class='update_description'><i onclick="document.location='21191#1403008999'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-17T12:43:19+00:00">Jun 17, 2014 12:43 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1403008999">&nbsp;</a></div><pre>HI Marco,

okay, I tried moving the quarantined files back, and they were quarantined
again, so adding the &#39;mis&#39; account didn&#39;t help.

So I tried your recipe of adding rsv entries to /etc/edg-mkgridmap.conf
/etc/grid-security/grid-mapfile-local, and /etc/osg/local-user-vo-map,
but that didn&#39;t add the VOc/voi entries to /var/lib/osg/user-vo-map.
It added the &#39;rsv rsv&#39; line, but we&#39;d already tried that, and we know
that that alone doesn&#39;t help.

So why does the entry to /etc/edg-mkgridmap.conf not add the VOc/voi entry?
I added this&#58;

-----
# USER-VO-MAP rsv RSV - 101 - Horst Severini (hs@....)
gmf_local   /etc/grid-security/grid-mapfile-local
-----

But it still looks like this&#58;

----
#voi mis atlas atlas atlas dzero dzero dosar osg suragrid
#VOc MIS ATLAS ATLAS ATLAS DZERO DZERO DOSAR OSG SURAGrid

mis mis
usatlas1 atlas
samgrid dzero
dosar dosar
osg osg
suragrid suragrid
rsv rsv
----

Hmm, I&#39;m thinking this didn&#39;t work because the VOMS entry line
<div id='show_1518740394' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1518740394'>is missing, which usually maps the VO to a local unix account --
but of course we can&#39;t do this here, since there is no RSV VOMS server.

So what else can we try?

And I still maintain that we need to figure out where Gratia knows
to map rsv to RSV on all other sites magically, since I&#39;m pretty sure
that that holds at least one key to this mystery.

Thanks,

Horst
</div><script type='text/javascript'>
        $('#show_1518740394').click(function() {
            $('#detail_1518740394').slideDown("normal");
            $('#show_1518740394').hide();
            $('#hide_1518740394').show();
        });
        $('#hide_1518740394').click(function() {
            $('#detail_1518740394').slideUp();
            $('#hide_1518740394').hide();
            $('#show_1518740394').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='21191#1402951875'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-16T20:51:15+00:00">Jun 16, 2014 08:51 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1402951875">&nbsp;</a></div><pre>Hi Marco,

ahh, I see. I didn&#39;t do step 2 in your first option, that&#39;s why
we didn&#39;t get the VOc/voi lines.

But that still doesn&#39;t explain why this is working on all other sites,
just not Lucille!

Joel added the &#39;mis&#39; user earlier today, so I would like to wait
till tomorrow to see whether that fixes it, before introducing any
other changes and confusing things again.

Could you please have another look later today whether you are now
seeing RSV records reporting to Gratia with the correct VO?

Again, we still don&#39;t understand where/how Gratia knows to map
rsv user records to the RSV VO, and before we don&#39;t understand this,
we won&#39;t really know what&#39;s going on.

So who can tell us where/how/why Gratia knows or does this mapping
on all other sites where there&#39;s NO mention of this mapping ANYWHERE?
There&#39;s got to be SOMEWHERE that tells Gratia that, but WHERE?

Some expert please resolve this mystery for us, and then we should
be able to figure out what&#39;s going wrong with Lucille. Before that,
we&#39;re just randomly trying to hack things into place, and I really
don&#39;t like that, since there&#39;s no guarantee that others won&#39;t
see the same problem, and we still don&#39;t know why ...

Thanks,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<div id='show_1953209119' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1953209119'><font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1953209119').click(function() {
            $('#detail_1953209119').slideDown("normal");
            $('#show_1953209119').hide();
            $('#hide_1953209119').show();
        });
        $('#hide_1953209119').click(function() {
            $('#detail_1953209119').slideUp();
            $('#hide_1953209119').hide();
            $('#show_1953209119').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='21191#1402947278'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-16T19:34:38+00:00">Jun 16, 2014 07:34 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1402947278">&nbsp;</a></div><pre>Hi Horst,
You don&#39;t have to edit the user-vo-map file directly.
The correct way would be&#58;
1. add a line to /etc/grid-security/local-grid-mapfile with the DN mapping, e.g.&#58;
&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=rsv/lutgw1.lunet.edu&#34; rsv

2. add a line to /etc/osg/local-user-vo-map with the username for RSV jobs and the VO to use, e.g. rsv&#58;
rsv rsv

3. add 2 lines in /etc/edg-mkgridmap.conf for the VO naming and the local grid-mapfile, like&#58;
# USER-VO-MAP rsv RSV -- 101 -- Horst Severini (your@email)
gmf_local /etc/grid-security/local-grid-mapfile

This will give you the user-vo-mapfile of option 1 with RSV jobs mapped to the rsv VO, separate from regular jobs. Some sites do so.

Alternatively map RSV jobs to an existing VO, by using this /etc/grid-security/local-grid-mapfile&#58;
&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=rsv/lutgw1.lunet.edu&#34; dosar

and have in /etc/edg-mkgridmap.conf the line&#58;
gmf_local /etc/grid-security/local-grid-mapfile

Some sites map RSV jobs to the VO owner of the site.

Please do one of these 2 alternatives. Both should solve the problem of the quarantined files. Mixed solutions (where you follow only partially the instructions) will likely not solve the problem.
I updated the twiki to be more clear&#58; <a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/Edg-mkgridmap#3_0_Configuration' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/Edg-mkgridmap#3_0_Configuration</a>

Thanks,
Marco</pre></div><div class='update_description'><i onclick="document.location='21191#1402928336'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-16T14:18:56+00:00">Jun 16, 2014 02:18 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1402928336">&nbsp;</a></div><pre>Hi Marco,

but there is no mapping of any kind, or no reference to rsv,
in the user-vo-map at any of our other sites! So that can&#39;t be the problem!

I think we first need to understand how/where in the Gratia code
the rsv user is mapped to the RSV VO on the other sites, without having
any manual mapping -- and then we need to figure out why this &#39;automagic&#39;
mapping isn&#39;t working at Lucille.

I could add RSV to the voi/VOc lines at Lucille manually,
but that would get wiped out again the next time edg-mkgridmap runs,
so even if that were to &#39;solve&#39; the problem -- and it&#39;s not a real sulution,
since it should work out of the box like it does at all other sites --
then we would have no way to make that permanent. Or would we?

So are there any RSV records uploaded to Gratia at all from any other sites?
If so, under which VO? And how does Gratia know the mapping, since
that&#39;s not in the user-vo-map file?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1402927026'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-16T13:57:06+00:00">Jun 16, 2014 01:57 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1402927026">&nbsp;</a></div><pre>Hi Horst,
I would leave the line with rsv since you are running RSV jobs under that acount but I would add the mapping I suggested. Option 2 is to add RSV jobs to some other VO.
If there is no rsv user shose jobs will for sure not be reported to Gratia and quarantined (or ignored depending on the configuration).
So I&#39;d suggest one of the 2 options below for Lucille&#58;
- Option1&#58;
#voi rsv mis atlas dzero dosar osg suragrid
#VOc RSV MIS ATLAS DZERO DOSAR OSG SURAGrid
usatlas1 atlas
samgrid dzero
dosar dosar
osg osg
suragrid suragrid
rsv rsv

Option2 (I chose dosar for the RSV jobs but any other VO is technically fine)&#58;
#voi mis atlas dzero dosar osg suragrid
#VOc MIS ATLAS DZERO DOSAR OSG SURAGrid
usatlas1 atlas
samgrid dzero
dosar dosar
osg osg
suragrid suragrid
rsv dosar

Then the warning are in your Gratia log file (I saw them in the attached one). You&#39;ll have to check or attach a new one.
Thanks,
Marco</pre></div><div class='update_description'><i onclick="document.location='21191#1402924889'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-16T13:21:29+00:00">Jun 16, 2014 01:21 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1402924889">&nbsp;</a></div><pre>Oh,

and I just removed the &#39;rsv rsv&#39; line again, since that obviously
didn&#39;t fix the problem. Could you please have another look to see whether
you&#39;re still seeing these voi/VOc warnings again? I&#39;m thinking
that these might&#39;ve been caused by the inconsistency of having rsv
at the bottom but not at the top?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1402924578'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-16T13:16:18+00:00">Jun 16, 2014 01:16 PM UTC</time><a class="anchor" name="1402924578">&nbsp;</a></div><pre>Hi Marco,

I&#39;ll leave adding the mis account to Joel, since it&#39;s his cluster. I have added him to the CC of this ticket.

I don&#39;t think the rsv entries to the MonaLisa lines can&#39;t be the reason for this problem, though, since none of our other clusters (OU_OCHEP_SWT2, OU_OSCER_ATLAS, OUHEP_ITB) contain any reference to RSV in their user-vo-map files. And I had added the &#39;rsv rsv&#39; line by hand as a test, to see whether that would fix the problem, but obviously it didn&#39;t.

So we need to look somewhere else for the problem -- but where?

Have we ever determined definitively which VO the RSV records are mapped to at other clusters? I.e., could you please look through the gratia records of OUHEP_ITB and OU_OCHEP_SWT2, and compare these records with the ones you sent on Friday?

By the way, you mentioned that you only saw RSV records from Lucille with the old DOEGrids RSV service certificate, but not the new DigiCert certificate, did I remember that correctly? If so, then maybe the problem is with that? I&#39;m not sure why/how, though, since we run plenty of jobs on Lucille with other DigiCert user certificates, which get mapped just fine (to ATLAS, for example), so I can&#39;t imagine why or how there could be a problem with the RSV certificate. And obviously it works in principle, otherwise the RSV page would be red, right?

So what are we missing?

Thanks,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='21191#1402923637'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-16T13:00:37+00:00">Jun 16, 2014 01:00 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1402923637">&nbsp;</a></div><pre>Hi Horst,
it may be good to add the mis account to have a mapping for it as grid user, but it should not be a problem for RSV jobs since they run under rsv.

The rsv account though is in the line &#34;rsv rsv&#34; but is missing form the voi VOc lines which are used for monitoring (including Gratia). This may cause the error.
On Lucille you can use the lines below (I added rsv and removed the duplicates)&#58;
#voi rsv mis atlas dzero osg suragrid
#VOc RSV MIS ATLAS DZERO OSG SURAGrid

Try this and let me know id the error below disappears form the
gratia log file.

Thanks,
Marco</pre></div><div class='update_description'><i onclick="document.location='21191#1402913349'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-16T10:09:09+00:00">Jun 16, 2014 10:09 AM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1402913349">&nbsp;</a></div><pre>Hi again,

I just noticed that the &#39;mis&#39; account doesn&#39;t exist on Lucille, so that
would explain why the &#39;mis mis&#39; line isn&#39;t there.

The question is, could this cause the RSV issues we&#39;re seeing?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1402909488'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-16T09:04:48+00:00">Jun 16, 2014 09:04 AM UTC</time><a class="anchor" name="1402909488">&nbsp;</a></div><pre>Hi Marco,

okay, I&#39;ve attached the user-vo-map files for both Lucille and OCHEP.

I don&#39;t see anything obviously wrong with the MonaLisa lines, but I do notice that Lucille&#39;s is much shorter, and I think that&#39;s because Joel decided to comment out all the VOs he doesn&#39;t support from his /etc/edg-mkgridmap.conf . That in and of itself shouldn&#39;t be a problem, though. I also noticed that the &#39;mis mis&#39; line is missing from his, which I don&#39;t understand, because that VO is not commented out, and it does show up in the MonaLisa lines, too. The &#39;rsv rsv&#39; line was added by me, by adding it to /etc/osg/local-user-vo-map , but that was done as a test, so I don&#39;t think it has anything to do with the problem, since the problem was there before.

Do you suppose that could have something to do with the Gratia warning? Let us know where else we can look for more details.

Thanks,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='21191#1402679883'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-13T17:18:03+00:00">Jun 13, 2014 05:18 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1402679883">&nbsp;</a></div><pre>Hi Horst,
I think you have a malformed user-vo-mapfile, could you attach it to the ticket?
In the log file I saw the line&#58; &#34;00&#58;12&#58;53 CDT Gratia&#58; WARNING&#58; no VOc match for voi &#34;&#34;&#58; not entering in (voi, VOc) table.&#34;

Then here a summary of the jobs reported by the probe on lutgw1.lunet.edu, grouped by user/vo in the last 3 months.
I see some jobs mapped to rsv user but I don&#39;t see any job using the proxy I see in the history file you uploaded (see below).
x509userproxysubject = &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=rsv/lutgw1.lunet.edu&#34;
should show up as CommonName /CN=rsv/lutgw1.lunet.edu
In a different table I see 5 records with that CN but dated back to 2013.
Initially I was suspecting a certificate mapping problem but the error above may mean that the user-vo-map file has some inconsistency.

+----------------+------------------------------------------------+-------------+--------------------------------------------------------+--------+
| GlobalUsername | VOName                                         | LocalUserId | CommonName                                             | Num    |
+----------------+------------------------------------------------+-------------+--------------------------------------------------------+--------+
| NULL           | /atlas/Role=lcgadmin/Capability=NULL           | rsv         | /CN=ddmadmin/CN=531497/CN=Robot&#58; ATLAS Data Management |     21 |
| NULL           | /atlas/Role=NULL/Capability=NULL               | rsv         | /CN=ddmadmin/CN=531497/CN=Robot&#58; ATLAS Data Management |     11 |
| NULL           | /atlas/Role=pilot/Capability=NULL              | rsv         | /CN=ddmadmin/CN=531497/CN=Robot&#58; ATLAS Data Management |     29 |
| NULL           | /atlas/usatlas/Role=production/Capability=NULL | rsv         | /CN=John Hover                                         |      1 |
| NULL           | /dzero/users/Role=NULL/Capability=NULL         | rsv         | /CN=Joel Snow 36                                       |      1 |
| samgrid@local  | /atlas/Role=NULL/Capability=NULL               | samgrid     | /CN=Horst Severini 27                                  |     22 |
| samgrid@local  | /atlas/Role=production/Capability=NULL         | samgrid     | /CN=Horst Severini 27                                  |      9 |
| samgrid@local  | /dosar/Role=VO-Admin/Capability=NULL           | samgrid     | /CN=Horst Severini 27                                  |     10 |
| samgrid@local  | /dzero/users/Role=NULL/Capability=NULL         | samgrid     | /CN=Joel Snow 36                                       |      2 |
| samgrid@local  | dzero                                          | samgrid     | /CN=Joel Snow 36                                       |      3 |
| usatlas1@local | /atlas/Role=lcgadmin/Capability=NULL           | usatlas1    | /CN=ddmadmin/CN=531497/CN=Robot&#58; ATLAS Data Management |   3604 |
| usatlas1@local | /atlas/Role=NULL/Capability=NULL               | usatlas1    | /CN=ddmadmin/CN=531497/CN=Robot&#58; ATLAS Data Management |    483 |
| usatlas1@local | /atlas/Role=NULL/Capability=NULL               | usatlas1    | /CN=Saul Youssef 93                                    |      4 |
| usatlas1@local | /atlas/Role=pilot/Capability=NULL              | usatlas1    | /CN=ddmadmin/CN=531497/CN=Robot&#58; ATLAS Data Management |   4103 |
| usatlas1@local | /atlas/usatlas/Role=production/Capability=NULL | usatlas1    | /CN=John Hover                                         | 211857 |
| usatlas1@local | /atlas/usatlas/Role=production/Capability=NULL | usatlas1    | /CN=John Hover 241                                     |  32352 |
| usatlas1@local | /atlas/usatlas/Role=production/Capability=NULL | usatlas1    | /CN=wguan/CN=667815/CN=Wen Guan                        |      2 |
| usatlas1@local | /mis/Role=NULL/Capability=NULL                 | usatlas1    | /CN=Jose Caballero 649                                 |      1 |
| usatlas1@local | /mis/Role=software/Capability=NULL             | usatlas1    | /CN=Jose Caballero 649                                 |      1 |
+----------------+------------------------------------------------+-------------+--------------------------------------------------------+--------+</pre></div><div class='update_description'><i onclick="document.location='21191#1402670165'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-13T14:36:05+00:00">Jun 13, 2014 02:36 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1402670165">&nbsp;</a></div><pre>Marco/Carl&#58; Have you had the chance to look at the history file that Horst has uploaded?</pre></div><div class='update_description'><i onclick="document.location='21191#1402003932'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-05T21:32:12+00:00">Jun 5, 2014 09:32 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1402003932">&nbsp;</a></div><pre>Hi Marco,

okay, I just uploaded the latest one. I had to rename it to *.txt,
since *.0 wasn&#39;t an allowed filename to upload for some reason.

Let me know if there&#39;s anything else you need.

Thanks,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='21191#1402001489'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-05T20:51:29+00:00">Jun 5, 2014 08:51 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1402001489">&nbsp;</a></div><pre>Horst,
could you also reattach one of the files that have been quarantined?
Thank you,
Marco</pre></div><div class='update_description'><i onclick="document.location='21191#1401910669'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-04T19:37:49+00:00">Jun 4, 2014 07:37 PM UTC</time><a class="anchor" name="1401910669">&nbsp;</a></div><pre>Hi Marco and Carl,

okay, I tried this, and moved a handful of history files back into the /data/ directory (after moving them all into a temporary directory), but they were put back into the /quarantine/ directory, so apparently the problem is not solved. I&#39;m going to attach the latest gridftpTransfer.log and 2014-06-04.log to this ticket, which should contain info about these latest quarantines, so hopefully that&#39;ll help you figure out what&#39;s going on!

Thanks a lot,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='21191#1401898507'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-04T16:15:07+00:00">Jun 4, 2014 04:15 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1401898507">&nbsp;</a></div><pre>By the way, regarding Horst&#39;s attachments -- it appears I deleted them from the other ticket somehow before transferring the rsv thread over to this one...  Horst, if you happen to have them still, maybe you can reattach here?  Sorry for the trouble.

Carl</pre></div><div class='update_description'><i onclick="document.location='21191#1401897490'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-04T15:58:10+00:00">Jun 4, 2014 03:58 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1401897490">&nbsp;</a></div><pre>Hi Horst,
I still do not see records about the RSV jobs in the Gratia DB.

Reprocessing of quarantined jobs is not automatic but manual, you have to move them back to the data directory.
You can do it if it seems that there are no mew quarantined files&#58;
1. mkdir /var/lib/gratia/data/toreprocess (choose a name)
2. mv /var/lib/gratia/data/quarantine/* /var/lib/gratia/data/toreprocess/
3. copy some files from /var/lib/gratia/data/toreprocess subdirectories in /var/lib/gratia/data/  (start with 1000 or less, to see how things are going)
If they are put back in /var/lib/gratia/data/quarantine/ then the problem is not solved.

Cheers,
Marco</pre></div><div class='update_description'><i onclick="document.location='21191#1401893119'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-04T14:45:19+00:00">Jun 4, 2014 02:45 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1401893119">&nbsp;</a></div><pre>Hi again,

I just looked at Lucille&#39;s RSV page again,

<a href='https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.gratia.condor' target='_blank' rel='nofollow'>https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.gratia.condor</a>

and the number of quarantined files hasn&#39;t changed yet. So I guess one
question is, would Gratia even be able in principle to match up RSV jobs
with the RSV VO after the fact now that we have that mapping in user-vo-map,
or is that mapping made right when or after the jobs run, and these
quarantined files are &#39;lost&#39; now and will never be able to find the right
VO, even after this change?

The number of quarantined records hasn&#39;t increased yet, either, though,
so do you now see RSV jobs being uploaded to Gratia?

Thanks,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='21191#1401869907'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-04T08:18:27+00:00">Jun 4, 2014 08:18 AM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1401869907">&nbsp;</a></div><pre>Hi Marco,

the files were actually attached to the other ticket, before it was split.
So they should be here&#58;

<a href='https&#58;//ticket.grid.iu.edu/20828' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/20828</a>

I can&#39;t see them there, but I know I had attached them, so maybe I just
don&#39;t know where or how to find them.

If you can&#39;t find them there, either, then I&#39;ll have to dig them up again,
since I didn&#39;t save these files ...

No, we don&#39;t have this line &#39;rsv rsv&#39; in any of our user-vo-mapfile files,
so I still don&#39;t understand why this works on some sites, but not other.

And yes, the rsv jobs are mapped to the rsv user on all sites, so that
can&#39;t be the difference, either.

I just added &#39;rsv rsv&#39; to /etc/osg/local-user-vo-map on Lucille,
so that should  get added to the user-vo-map file soon,
and then we&#39;ll see if that fixes the problem. Let&#39;s check back at

<a href='https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.gratia.condor' target='_blank' rel='nofollow'>https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.gratia.condor</a>

later today.

But we still need to understand this, since this has to work out of the box,
without having to add manual mapping steps.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1401835336'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-03T22:42:16+00:00">Jun 3, 2014 10:42 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1401835336">&nbsp;</a></div><pre>A clarification.
Some CE prefer to map RSV users to the owner&#39;s VO. That&#39;s acceptable but the rsv VO is preferred.
Marco</pre></div><div class='update_description'><i onclick="document.location='21191#1401834746'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-03T22:32:26+00:00">Jun 3, 2014 10:32 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1401834746">&nbsp;</a></div><pre>Hi Horst,
I don&#39;t see the attached files. Can you re-attach to the ticket&#58; one of the records quarantined, the probe configuration (/etc/gratia/condor/ProbeConfig)?

If I understood correctly in the grid map file the probe is mapped to the rsv user and that is confirmed by the Globus log files.
Anyway the rsv user is not in the user-vo-mapfile.

The normal configuration (what is coming form the RPMs if I remember correctly) is that&#58;
1. The probe should be mapped to the rsv user.
2. The rsv user is mapped to the rsv VO, e.g.&#58;
#---- accounts for vo&#58; rsv ----#
rsv rsv
3. The unknown VO records are quarantined and not ignored (this seems also your configuration)

I think adding rsv rsv to the user-vo-mapfile should solve the problem.

Now I&#39;m wondering why you don&#39;t see the problem on the other CEs. Are you mapping rsv jobs (DN used by the probe) to a different user that is in the user-vo-mapfile?
Can you check if that&#39;s the case?

Thanks,
Marco</pre></div><div class='update_description'><i onclick="document.location='21191#1401729739'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-02T17:22:19+00:00">Jun 2, 2014 05:22 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1401729739">&nbsp;</a></div><pre>Hi Carl,

no, these are all standard default RSV installations on the CE machine
on each site, so no multiple RSV hosts or DNs or anything; all vanilla.

So the RSV cert is properly mapped in the grid-mapfile, and everything
runs fine; otherwise the RSV pages would be red, right?
But everything&#39;s green&#58;

<a href='https&#58;//osgitb1.nhn.ou.edu/rsv/' target='_blank' rel='nofollow'>https&#58;//osgitb1.nhn.ou.edu/rsv/</a>
<a href='https&#58;//grid1.oscer.ou.edu/rsv/' target='_blank' rel='nofollow'>https&#58;//grid1.oscer.ou.edu/rsv/</a>
<a href='https&#58;//tier2-01.ochep.ou.edu/rsv/' target='_blank' rel='nofollow'>https&#58;//tier2-01.ochep.ou.edu/rsv/</a>
<a href='https&#58;//lutgw1.lunet.edu/rsv/' target='_blank' rel='nofollow'>https&#58;//lutgw1.lunet.edu/rsv/</a>

So why does only the last one have quarantined or unknown VO RSV records?

And before I mess with the auto-generated user-vo-map, I think we first
need to find out under what VO the RSV jobs show up for the first three
sites, and where that&#39;s set -- and then hopefully we can figure out why
that&#39;s not working on the last one! So who can tell us these secrets? =)

And yes, we would be fine with having RSV records being ignored
all together -- but it has to be done in such a way that that works
straight out of the box for a default installation, and doesn&#39;t require
any hacking of the scripts or config files after the fact. &#58;)

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1401472426'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-30T17:53:46+00:00">May 30, 2014 05:53 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1401472426">&nbsp;</a></div><pre>Hi Horst,

I talked with Mat to get his thoughts about this... To get the DN that is actually getting used to submit the jobs, you can run

openssl x509 -in /etc/grid-security/rsv/rsvcert.pem -noout -subject

(or whatever cert file is listed for &#34;service-cert&#34; in /etc/rsv/rsv.conf) on your rsv host or hosts... If you have more than one rsv host and the DNs are different, then maybe that could explain why some get mapped to VOs and some don&#39;t.  (Not that I&#39;m getting my hopes up, but it&#39;s something to check)

Other thoughts... I&#39;m not familiar with the voi / VOc lines, but yeah the comments make it sound specific to MonaLISA (not sure what that is either!).

You could try making both user-vo-map files the same, with the superset, and see if that changes anything&#58;

dosar dosar
mis mis
osg osg
samgrid dzero
suragrid suragrid
usatlas1 atlas

... Also, it sounds like if the desired state is to have the records get mapped to null/unknown VOs on all sites, then if we get that working you&#39;d want to use the SuppressUnknownVORecords option instead of QuarantineUnknownVORecords, right?

Carl</pre></div><div class='update_description'><i onclick="document.location='21191#1401296056'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-28T16:54:16+00:00">May 28, 2014 04:54 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1401296056">&nbsp;</a></div><pre>Hi Elizabeth,

that&#39;s a good point. But I&#39;d still like to figure out the differences between
these sites, and why one of them sees them as Unknown, whereas all the others
process them just fine -- and as which VO?

And, we need to make sure that a default installation does the right thing
and does not quarantine any records, but either processes them or discards
them properly.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1401295534'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-28T16:45:34+00:00">May 28, 2014 04:45 PM UTC</time> by <b>echism</b><a class="anchor" name="1401295534">&nbsp;</a></div><pre>Hey there,

If I may offer an opinion, I think unknown VO is the right designation for RSV jobs. They do not represent any VO&#39;s work, per sé, and I think it&#39;s quite appropriate to suppress those records as you would local usage, etc.

Thanks!</pre></div><div class='update_description'><i onclick="document.location='21191#1400858325'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-23T15:18:45+00:00">May 23, 2014 03:18 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1400858325">&nbsp;</a></div><pre>Hi Suchandra,

that just tells me that the RSV service certificate is mapped to the user &#39;rsv&#39;,
but we already know that, since that&#39;s the way it&#39;s mapped in the grid-mapfile.
(on all sites)

What we need to figure out is what VO that is supposed to mapped to in Gratia,
and I can&#39;t figure out where to look that up.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1400857226'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-23T15:00:26+00:00">May 23, 2014 03:00 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1400857226">&nbsp;</a></div><pre>Could you check the globus jobmanager logs on the systems?  They should tell you which user the rsv probes are being mapped to.

Suchandra</pre></div><div class='update_description'><i onclick="document.location='21191#1400792590'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-22T21:03:10+00:00">May 22, 2014 09:03 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1400792590">&nbsp;</a></div><pre>Hi Suchandra,

well, we need to figure out which VO the rsv user is mapped to
automagically behind the scenes. Once we know that, then we will see if
that VO is in the top section of /var/lib/osg/user-vo-map on Lucille. If
it isn&#39;t, then I think we found the problem ...

Oh wait -- the first two lines talk about voi and VOc being used for
MonaLISA. Are they ONLY used for MonaLISA? If so, then that might be a
red herring, too ...

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1400792217'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-22T20:56:57+00:00">May 22, 2014 08:56 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1400792217">&nbsp;</a></div><pre>Okay, I was just guessing about who the RSV user was mapped to.  It sounds like the user is mapped to the same account on the all the machines and the user vo map doesn&#39;t have any differences there.  Not sure why there&#39;s the difference then.

Suchandra</pre></div><div class='update_description'><i onclick="document.location='21191#1400781253'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-22T17:54:13+00:00">May 22, 2014 05:54 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1400781253">&nbsp;</a></div><pre>Hi Suchandra,

well, the OSG VO is in /var/lib/osg/user-vo-map on Lucille (and all OU sites),
and the RSV service certificate is mapped to the user &#39;rsv&#39; on Lucille
and all OU sites. We&#39;re not using GUMS, but it&#39;s mapped that way
in the grid-mapfile.

So how does Gratia know to map the rsv user to the OSG VO, since that&#39;s
not specifically mentioned in /var/lib/osg/user-vo-map? But it&#39;s not
in ANY of them, so that can&#39;t be the reason why it&#39;s not known on Lucille ...

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1400780709'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-22T17:45:09+00:00">May 22, 2014 05:45 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1400780709">&nbsp;</a></div><pre>It might be osg.  Could you check on your gums server to see what user the RSV certs get mapped to?

Suchandra</pre></div><div class='update_description'><i onclick="document.location='21191#1400773331'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-22T15:42:11+00:00">May 22, 2014 03:42 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1400773331">&nbsp;</a></div><pre>Hi Suchandra,

<font color='#7F7E6F'>&#62; Is the /var/lib/osg/user-vo-map file the same between the machines?</font>
<font color='#7F7E6F'>&#62; If there&#39;s an entry for rsv on the other machines, the rsv account</font>
<font color='#7F7E6F'>&#62; might be mapped to a known VO by gratia and therefore the records</font>
<font color='#7F7E6F'>&#62; aren&#39;t being quarantined.</font>

Hmm, there are some differences, but I&#39;m not exactly sure if they matter.
On Lucille, we have this&#58;

----
# User-VO map
# Generated by generate-vo-map
# The voi line is used by MonaLISA, and is the lower-case version of all VO names
# The VOc line is used by MonaLISA, and is the proper-case version of all VO names
# Other lines are of the form &#60;account&#62; &#60;VO&#62;

#voi mis atlas atlas atlas dzero dzero dosar osg suragrid
#VOc MIS ATLAS ATLAS ATLAS DZERO DZERO DOSAR OSG SURAGrid

usatlas1 atlas
samgrid dzero
dosar dosar
osg osg
suragrid suragrid
----

On OCHEP, we have this&#58;

----
# User-VO map
# Generated by generate-vo-map
# The voi line is used by MonaLISA, and is the lower-case version of all VO names
# The VOc line is used by MonaLISA, and is the proper-case version of all VO names
# Other lines are of the form &#60;account&#62; &#60;VO&#62;
<div id='show_1993808386' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1993808386'>
#voi cdf fermilab mis atlas atlas atlas star cms ligo dzero dzero dosar des glow nanohub geant4 i2u2 osg osgedu ops gpn compbiogrid engage ilc nysgrid sbgrid cigi icecube alice gluex gridunesp dayabay hcc belle csiu suragrid nees gcvo gcvo superb.org dream lbne lsst uc3 mcdrd lqcd auger glast.org enmr
#VOc CDF FERMILAB MIS ATLAS ATLAS ATLAS STAR CMS LIGO DZERO DZERO DOSAR DES GLOW NANOHUB GEANT4 I2U2 OSG OSGEDU OPS gpn CompBioGrid Engage ILC NYSGRID SBGrid CIGI IceCube ALICE Gluex GridUNESP DayaBay HCC belle csiu SURAGrid NEES GCVO GCEDU SuperB DREAM LBNE LSST UC3 MCDRD LQCD Auger glast.org ENMR

mis mis
usatlas1 atlas
samgrid dzero
dosar dosar
----

Which VO are RSV records supposed to be? mis, osg, ops, or ...?
They run as user &#39;rsv&#39;, which is not listed in either, so I&#39;m confused ...

We&#39;re running gridmap on all of them, so no GUMS mapping involved ...

I&#39;m not sure why OCHEP has so many more than Lucille, by the way.
These are the versions&#58;

----
[hs@lutgw1 ~]$ rpm -qf /var/lib/osg/user-vo-map
gums-client-1.3.18.009-20.osg.el6.noarch
----
[hs@tier2-01 ~]$ rpm -qf /var/lib/osg/user-vo-map
gums-client-1.3.18.009-17.osg.el6.noarch
----

I know that on OCHEP (tier2-01) we have some old ones which have since
been discontinued, but what about all the other new ones?

I don&#39;t know if Joel did something by hand to modify that, though,
so let&#39;s not get hung up on that, but figure out the RSV VO issue first.

Unless it&#39;s OSG or OPS, then that would explain the problem ...

Thanks,

Horst
</div><script type='text/javascript'>
        $('#show_1993808386').click(function() {
            $('#detail_1993808386').slideDown("normal");
            $('#show_1993808386').hide();
            $('#hide_1993808386').show();
        });
        $('#hide_1993808386').click(function() {
            $('#detail_1993808386').slideUp();
            $('#hide_1993808386').hide();
            $('#show_1993808386').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='21191#1400701780'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T19:49:40+00:00">May 21, 2014 07:49 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400701780">&nbsp;</a></div><pre>Hi Horst,

Is the /var/lib/osg/user-vo-map file the same between the machines?    If there&#39;s an entry for rsv on the other machines, the rsv account might be mapped to a known VO by gratia and therefore the records aren&#39;t being quarantined.

Suchandra</pre></div><div class='update_description'><i onclick="document.location='21191#1400699711'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T19:15:11+00:00">May 21, 2014 07:15 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1400699711">&nbsp;</a></div><pre>Thanks Carl!

If you want to be nit-picky about it, the subject of this new one should
be that RSV records show up as unknown VO records, though. That unknown
VO records are quarantined I think is not unexpected. &#58;)

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1400698948'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T19:02:28+00:00">May 21, 2014 07:02 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698948">&nbsp;</a></div><pre>Hi again,

nope, all these settings are the same in the ProbeConfig files on all
these machines&#58;

SuppressUnknownVORecords=&#34;0&#34;
SuppressNoDNRecords=&#34;0&#34;
SuppressGridLocalRecords=&#34;0&#34;
QuarantineUnknownVORecords=&#34;1&#34;

And the Gratia and RSV versions of Lucille are in between what we have
on OCHEP and on our ITB, so I can&#39;t imagine how that would could explain
the differences, either&#58;

Lucille&#58;
-------
gratia-probe-common-1.13.18-1.osg.el6.noarch
gratia-probe-condor-1.13.18-1.osg.el6.noarch
gratia-probe-gram-1.13.18-1.osg.el6.noarch
gratia-probe-gridftp-transfer-1.13.18-1.osg.el6.noarch
gratia-probe-metric-1.13.18-1.osg.el6.noarch
osg-configure-gratia-1.0.47-1.osg.el6.noarch
osg-configure-rsv-1.0.47-1.osg.el6.noarch
rsv-3.7.14-1.osg31.el6.noarch
rsv-consumers-3.7.14-1.osg31.el6.noarch
rsv-core-3.7.14-1.osg31.el6.noarch
rsv-metrics-3.7.14-1.osg31.el6.noarch

OU_OCHEP_SWT2&#58;
-------------
gratia-probe-common-1.13.15-1.osg.el6.noarch
gratia-probe-condor-1.13.15-1.osg.el6.noarch
gratia-probe-gram-1.13.15-1.osg.el6.noarch
gratia-probe-gridftp-transfer-1.13.15-1.osg.el6.noarch
gratia-probe-metric-1.13.15-1.osg.el6.noarch
<div id='show_239965189' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_239965189'>osg-configure-gratia-1.0.45-1.osg.el6.noarch
osg-configure-rsv-1.0.45-1.osg.el6.noarch
rsv-3.7.9-1.osg.el6.noarch
rsv-consumers-3.7.9-1.osg.el6.noarch
rsv-core-3.7.9-1.osg.el6.noarch
rsv-metrics-3.7.9-1.osg.el6.noarch

OUHEP_ITB&#58;
---------
gratia-probe-common-1.13.26-1.osg31.el6.noarch
gratia-probe-condor-1.13.26-1.osg31.el6.noarch
gratia-probe-gram-1.13.26-1.osg31.el6.noarch
gratia-probe-gridftp-transfer-1.13.26-1.osg31.el6.noarch
gratia-probe-metric-1.13.26-1.osg31.el6.noarch
osg-configure-gratia-1.0.54-1.osg31.el6.noarch
osg-configure-rsv-1.0.54-1.osg31.el6.noarch
rsv-3.7.16-1.osg31.el6.noarch
rsv-consumers-3.7.16-1.osg31.el6.noarch
rsv-core-3.7.16-1.osg31.el6.noarch
rsv-metrics-3.7.16-1.osg31.el6.noarch

Where else can we look why RSV records on Lucille seem to be from an
unknown VO?

[...]

Thanks,

Horst
</div><script type='text/javascript'>
        $('#show_239965189').click(function() {
            $('#detail_239965189').slideDown("normal");
            $('#show_239965189').hide();
            $('#hide_239965189').show();
        });
        $('#hide_239965189').click(function() {
            $('#detail_239965189').slideUp();
            $('#hide_239965189').hide();
            $('#show_239965189').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='21191#1400698794'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:59:54+00:00">May 21, 2014 06:59 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698794">&nbsp;</a></div><pre>Yeah, it looks like the ProbeConfig options for unkown VO mappings are SuppressUnknownVORecords and QuarantineUnknownVORecords ... the quarantine one in particular seems likely to be causing this.  Maybe the sites aren&#39;t configured exactly the same?  Or else maybe they are running different versions of the probes?

[...]

<font color='#7F7E6F'>&#62; Do you know where else we can look in the VO mapping</font>
<font color='#7F7E6F'>&#62; process to figure out why this is happening?</font>

I don&#39;t know off hand -- Tanya, do you know?

Thanks!
Carl</pre></div><div class='update_description'><i onclick="document.location='21191#1400698755'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:59:15+00:00">May 21, 2014 06:59 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698755">&nbsp;</a></div><pre>Hi Horst,

What are the contents of the gratia configs on Lucille and your ITB hosts?  I believe there&#39;s an option in the config file to ignore records with unknown VO mappings that might be enabled on the other hosts but not on Lucille.

Suchandra</pre></div><div class='update_description'><i onclick="document.location='21191#1400698738'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:58:58+00:00">May 21, 2014 06:58 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698738">&nbsp;</a></div><pre>Hi Carl,

thanks for digging deeper here. I looked at that job, and it turns out
that it&#39;s an RSV job, so I&#39;m not sure why that would cause a problem
like that.

I guess I&#39;ve never looked at the VO mapping of RSV jobs, or whether they
even have one. The question is, why does this cause problems on Lucille,
while it&#39;s not causing any problems at OU, where we have very similar
&#39;default&#39; setups at OU_OCHEP_SWT2 and OUHEP_ITB, and therefore the VO
mapping of RSV jobs should be done the same way (or not at all), and
therefore Gratia should see them the same way, too.

Do you know where else we can look in the VO mapping process to figure
out why this is happening?

[...]

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1400698662'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:57:42+00:00">May 21, 2014 06:57 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698662">&nbsp;</a></div><pre>Thanks Chris!

Horst, looking at the attached 2014-05-09.log, I see a bunch of messages like this&#58;

12&#58;37&#58;36 CDT Gratia&#58; ***********************************************************
12&#58;37&#58;36 CDT Gratia&#58; Info&#58; suppressing record with GlobalJobId condor.lutgw1.lunet.edu#188062.0#1399656608 due to unknown or null VOName, will be quarantined in /var/lib/gratia/data/quarantine
12&#58;37&#58;36 CDT Gratia&#58; Moving transient input file&#58; /var/lib/gratia/data/history.188062.0 to quarantine in /var/lib/gratia/data/quarantine
12&#58;37&#58;36 CDT Gratia&#58; OK&#58; No unsuppressed usage records in this packet&#58; not sending
12&#58;37&#58;36 CDT Gratia&#58; ***********************************************************

So it looks like they&#39;re getting quarantined for not having a valid VOName.  I know there is a ProbeConfig option QuarantineUnknownVORecords=&#34;1&#34; which is on by default now (I don&#39;t remember off hand which version that behavior changed).

I guess you could try setting QuarantineUnknownVORecords=&#34;0&#34; if it&#39;s expected for the records not to have a valid VO.  Otherwise if they are supposed to have a valid VO, then I guess we have to find out why the probe doesn&#39;t think they do...  I&#39;m CC&#39;ing Tanya on this too as I think she is familiar with how the QuarantineUnknownVORecords option works.

As for the first question brought up in the ticket about multiple instances of probes stomping on each other -- yes, it&#39;s apparently just the next instance from cron trying to start.  Mat had actually opened a jira ticket to look into it&#58; <a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1476' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1476</a> ... But after taking a closer look, the error message&#58;

File &#34;/usr/lib/python2.6/site-packages/gratia/common/GratiaWrapper.py&#34;, line 141, in ExclusiveLock
raise Exception(&#34;Unable to acquire lock&#34;)

appears to just be doing what it&#39;s supposed to -- the probe uses GratiaWrapper.py to acquire a lock to prevent other instances from running at the same time, so you get the error message when a second one tries to run at the same time.  If anything, we should probably have it print a nicer error message instead of the scary backtrace...

Carl</pre></div><div class='update_description'><i onclick="document.location='21191#1400698646'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:57:26+00:00">May 21, 2014 06:57 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698646">&nbsp;</a></div><pre>Hi Carl and Mat,

Is there any new information on this? I know that GRATIA is still under investigation so let me know if I can help with anything.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21191#1400698634'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:57:14+00:00">May 21, 2014 06:57 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698634">&nbsp;</a></div><pre>Oh wait,

I finally saw the big green button that says &#39;Attach files...&#39;! ;)

I wouldn&#39;t allow me to attach gzipped files, so I unzipped them again
and attached them.

Let me know if that helps, or if there&#39;s anything else we can do to help
figure this out.

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1400698622'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:57:02+00:00">May 21, 2014 06:57 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698622">&nbsp;</a></div><pre>Well,

I can&#39;t find the attachments on the ticket web page, nor did it get
through in the email I just got, so I&#39;ve copied the two log files here&#58;

<a href='http&#58;//www.nhn.ou.edu/' target='_blank' rel='nofollow'>http&#58;//www.nhn.ou.edu/</a>~hs/tmp/

Let me know when you got them, so I can delete them again.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1400698606'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:56:46+00:00">May 21, 2014 06:56 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698606">&nbsp;</a></div><pre>Hi Mat,

okay, I gzipped and attached the latest gratia log files
gridftpTransfer.log.gz and 2014-05-09.log to this email.

Will these attachments got through Footprints, or do I need to
specifically upload them? Looking at the ticket web page it&#39;s not
obvious to me how to do that.

Or I can just put it on my web page somewhere and you can get it from
there, whichever is easier.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1400698575'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:56:15+00:00">May 21, 2014 06:56 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698575">&nbsp;</a></div><pre>Hi Horst,

Out of those links, I only see one that has a huge number of quarantine files&#58;
<a href='https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.gratia.condor' target='_blank' rel='nofollow'>https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.gratia.condor</a>
Can you attach the recent Gratia logs for that site? (The files in /var/log/gratia).
I&#39;ve also added Carl to the ticket; he&#39;s worked more with Gratia recently.

-Mat</pre></div><div class='update_description'><i onclick="document.location='21191#1400698564'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:56:04+00:00">May 21, 2014 06:56 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698564">&nbsp;</a></div><pre>Hi Edgar,

<font color='#7F7E6F'>&#62; I am pretty sure that is expected.</font>

I could see that the odd unsent record is expected, but one of our sites
has over 9000 quarantine files, which I don&#39;t think should be there. We
should figure out what&#39;s wrong with them, and either get them to send,
or delete them if they&#39;re unsendable for some reason.

<font color='#7F7E6F'>&#62; However, Mat is the expert here. Mat,</font>
<font color='#7F7E6F'>&#62; I remember you answered a similar thing in the past? Can you enlighten</font>
<font color='#7F7E6F'>&#62; us again?</font>

That&#39;d be great, thanks!

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1400698550'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:55:50+00:00">May 21, 2014 06:55 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698550">&nbsp;</a></div><pre>Hi Horst,

I am pretty sure that is expected. However, Mat is the expert here. Mat, I remember you answered a similar thing in the past? Can you enlighten us again?

Edgar</pre></div><div class='update_description'><i onclick="document.location='21191#1400698530'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:55:30+00:00">May 21, 2014 06:55 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698530">&nbsp;</a></div><pre>Hi Edgar,

I think Chris was referring to my question about the unsent and
quarantined files or records here&#58;

<a href='https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.gratia.metric' target='_blank' rel='nofollow'>https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.gratia.metric</a>
<a href='https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.gratia.condor' target='_blank' rel='nofollow'>https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.gratia.condor</a>
<a href='https&#58;//grid1.oscer.ou.edu/rsv/grid1.oscer.ou.edu.html#org.osg.gratia.metric' target='_blank' rel='nofollow'>https&#58;//grid1.oscer.ou.edu/rsv/grid1.oscer.ou.edu.html#org.osg.gratia.metric</a>
<a href='https&#58;//grid1.oscer.ou.edu/rsv/grid1.oscer.ou.edu.html#org.osg.gratia.lsf' target='_blank' rel='nofollow'>https&#58;//grid1.oscer.ou.edu/rsv/grid1.oscer.ou.edu.html#org.osg.gratia.lsf</a>
<a href='https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb1.nhn.ou.edu.html#org.osg.gratia.metric' target='_blank' rel='nofollow'>https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb1.nhn.ou.edu.html#org.osg.gratia.metric</a>
<a href='https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb1.nhn.ou.edu.html#org.osg.gratia.condor' target='_blank' rel='nofollow'>https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb1.nhn.ou.edu.html#org.osg.gratia.condor</a>
<a href='https&#58;//tier2-01.ochep.ou.edu/rsv/tier2-01.ochep.ou.edu.html#org.osg.gratia.metric' target='_blank' rel='nofollow'>https&#58;//tier2-01.ochep.ou.edu/rsv/tier2-01.ochep.ou.edu.html#org.osg.gratia.metric</a>
<a href='https&#58;//tier2-01.ochep.ou.edu/rsv/tier2-01.ochep.ou.edu.html#org.osg.gratia.condor' target='_blank' rel='nofollow'>https&#58;//tier2-01.ochep.ou.edu/rsv/tier2-01.ochep.ou.edu.html#org.osg.gratia.condor</a>

Could someone please tell us if that&#39;s a problem, or to be expected, or
if there&#39;s a way to get rid of them?

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1400698515'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:55:15+00:00">May 21, 2014 06:55 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698515">&nbsp;</a></div><pre>Hi Chris,

I am somehow lost regarding the ticket, since it looks fixed.

Which was the problem? and what should be looking forward to isolate?

Edgar</pre></div><div class='update_description'><i onclick="document.location='21191#1400698492'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:54:52+00:00">May 21, 2014 06:54 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698492">&nbsp;</a></div><pre>Hello Software Team,

Could you please take a look at this and help isolate where or what the problem might be here?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='21191#1400698427'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:53:47+00:00">May 21, 2014 06:53 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698427">&nbsp;</a></div><pre>Hi Chris,

I think it looks good! There&#39;s no more backlog anywhere.

I&#39;m still seeing some (very few) quarantined and unsent records, though,
which are probably a different issue, though. Could you please have a
look at these links and tell me why you think these may still be lying
around?

<a href='https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.gratia.metric' target='_blank' rel='nofollow'>https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.gratia.metric</a>
<a href='https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.gratia.condor' target='_blank' rel='nofollow'>https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.gratia.condor</a>
<a href='https&#58;//grid1.oscer.ou.edu/rsv/grid1.oscer.ou.edu.html#org.osg.gratia.metric' target='_blank' rel='nofollow'>https&#58;//grid1.oscer.ou.edu/rsv/grid1.oscer.ou.edu.html#org.osg.gratia.metric</a>
<a href='https&#58;//grid1.oscer.ou.edu/rsv/grid1.oscer.ou.edu.html#org.osg.gratia.lsf' target='_blank' rel='nofollow'>https&#58;//grid1.oscer.ou.edu/rsv/grid1.oscer.ou.edu.html#org.osg.gratia.lsf</a>
<a href='https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb1.nhn.ou.edu.html#org.osg.gratia.metric' target='_blank' rel='nofollow'>https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb1.nhn.ou.edu.html#org.osg.gratia.metric</a>
<a href='https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb1.nhn.ou.edu.html#org.osg.gratia.condor' target='_blank' rel='nofollow'>https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb1.nhn.ou.edu.html#org.osg.gratia.condor</a>
<a href='https&#58;//tier2-01.ochep.ou.edu/rsv/tier2-01.ochep.ou.edu.html#org.osg.gratia.metric' target='_blank' rel='nofollow'>https&#58;//tier2-01.ochep.ou.edu/rsv/tier2-01.ochep.ou.edu.html#org.osg.gratia.metric</a>
<a href='https&#58;//tier2-01.ochep.ou.edu/rsv/tier2-01.ochep.ou.edu.html#org.osg.gratia.condor' target='_blank' rel='nofollow'>https&#58;//tier2-01.ochep.ou.edu/rsv/tier2-01.ochep.ou.edu.html#org.osg.gratia.condor</a>

We may want to open a different ticket for this, though, since I&#39;m
pretty sure it&#39;s not related to the original problem.

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='21191#1400698318'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:51:58+00:00">May 21, 2014 06:51 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698318">&nbsp;</a></div><pre>(I&#39;m going to copy the relevant comments from <a href='https&#58;//ticket.grid.iu.edu/20828' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/20828</a> into this ticket)</pre></div><div class='update_description'><i onclick="document.location='21191#1400698042'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:47:22+00:00">May 21, 2014 06:47 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400698042">&nbsp;</a></div><pre><a href='https&#58;//ticket.grid.iu.edu/20828' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/20828</a> has diverged into two separate issues.

I&#39;m opening this ticket for the second issue, about many gratia probe records getting unexpectedly quarantined as having an unknown VO.</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F21191">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
