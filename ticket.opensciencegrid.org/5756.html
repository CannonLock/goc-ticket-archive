<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[5756] VOMS failures -- MARIACHI</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="robots" content="noindex, nofollow" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=5756" method="post">
<div class="page-header">
    <h3><span class="muted">5756</span> / VOMS failures -- MARIACHI</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">John Hover</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Followup w/Customer</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-11-27</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Mariachi <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">OSG-GOC <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/5756", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='5756#1227640396'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-11-25T19:13:16+00:00">Nov 25, 2008 07:13 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1227640396">&nbsp;</a></div><pre>I talked to John on the phone, this is working now. But he&#39;d like to get VDT involved
if this happens again to dig into the cause. Closing ticket.</pre></div><div class='update_description'><i onclick="document.location='5756#1227203216'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-11-20T17:46:56+00:00">Nov 20, 2008 05:46 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1227203216">&nbsp;</a></div><pre>John,

According to <a href='http&#58;//voms-monitor.grid.iu.edu/cgi-bin/index.cgi' target='_blank' rel='nofollow'>http&#58;//voms-monitor.grid.iu.edu/cgi-bin/index.cgi</a> , it seems that your
VOMS server is still failing.  Have there been any updates to this problem?</pre></div><div class='update_description'><i onclick="document.location='5756#1226584357'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-11-13T13:52:37+00:00">Nov 13, 2008 01:52 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1226584357">&nbsp;</a></div><pre>John,

My last day with the GOC is tomorrow; I have accepted a system administrator position within the
University. Kyle will assist you further with this ticket.

Best wishes,

Tim</pre></div><div class='update_description'><i onclick="document.location='5756#1226324604'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-11-10T13:43:24+00:00">Nov 10, 2008 01:43 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1226324604">&nbsp;</a></div><pre>Hi John,

That&#39;s good. Still, we can&#39;t retrieve your VO members. Can you actually query the VOMS server? For
instance, if you aren&#39;t utilizing GUMS and you run edg-mkgridmap, does it pull a list of members from
the MARIACHI VOMS?

Tim</pre></div><div class='update_description'><i onclick="document.location='5756#1226095749'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-11-07T22:09:09+00:00">Nov 7, 2008 10:09 PM UTC</time> by <b>Mariachi</b><a class="anchor" name="1226095749">&nbsp;</a></div><pre>I *think* I may have solved it. The hostname set via the hostname
command was different than that in DNS. There was also a mismatch
between the local host name and that in the
/etc/grid-security/http/httpcert.pem that Tomcat seems to be picking up
automatically.

Before re-doing an install I made sure all three were identical, and
Tomcat doesn&#39;t seem to be crashing.

We&#39;ll have to watch it and see.

Cheers,

--john

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5756#1225982373'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-11-06T14:39:33+00:00">Nov 6, 2008 02:39 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1225982373">&nbsp;</a></div><pre>Awaiting further updates from John.</pre></div><div class='update_description'><i onclick="document.location='5756#1225483841'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-31T20:10:41+00:00">Oct 31, 2008 08:10 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1225483841">&nbsp;</a></div><pre>John,

Maybe we can punt this to the VDT or osg-sites? Could you run vdt-system-profiler and post the
results for us somewhere (it&#39;s going to be too large to send via email, I think)?

There&#39;s a tool that comes with the vdt called vdt-system-profiler. It only exists if at least some of
your installation has succeeded, but for those cases it can offer some useful help.

The program creates a file called vdt-profile.txt in the current directory. This file contains all sorts
of information that might be useful in debugging your problem. For example, it contains the OS,
hostname, disk space, network interfaces, contents of /etc/grid-security, and the vdt-install.log,
among other things.

The program is a straightforward Bourne shell script, in case you&#39;re curious to see it.

The program requires VDT_LOCATION to be set, but has no other interesting requirements. If your
setup file doesn&#39;t exist, you have to set VDT_LOCATION manually.

If you have a problem, submitting this file might help us shorten the debugging time a bit. Instead
of us going back and forth asking questions like, &#34;What OS are you running? What version of
Pacman did you use? Are you out of disk space? Is your host multi-homed? What&#39;s in your vdt-
install.log?&#34; we can answer many of those questions up front.

Thanks,

Tim</pre></div><div class='update_description'><i onclick="document.location='5756#1225482490'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-31T19:48:10+00:00">Oct 31, 2008 07:48 PM UTC</time> by <b>Mariachi</b><a class="anchor" name="1225482490">&nbsp;</a></div><pre>Hi Tim,

Looks like I won&#39;t get it up today, either. Even installing VOMS in
isolation is exhibiting similar behavior.

Yes, I am very carefully following the instructions...

pacman -get OSG&#58;voms
(enable CA certs and update)
vdt-control --on
configure_voms --server y --vo mariachi
(restart tomcat-55)

voms-admin --nousercert --vo mariachi add-ACL-entry  /mariachi  ANYONE
VOMS_CA &#34;CONTAINER_READ,MEMBERSHIP_READ&#34; true

The last command throws an error&#58; &#34;Error deserializing SOAP response&#58;
Response is &#34;text/html&#34;, not &#34;text/xml&#34;. Probably VO inactive.

Browsing to the VDT website has the VOMS&#58;mariachi link, but following it
gets 404.

Stopping and starting tomcat *appears* to work, but afterwards tomcat is
not running.

All tomcat logs except catalina.out are empty.

catalina.out has messages that appear to be a startup, but include a
WARNING about the /voms/mariachi docBase being inside the host appBase
so it will be ignored.

I don&#39;t get it. I&#39;ve set up VOMS (and GUMS) numerous times. I&#39;ll try
again next Friday.

Cheers,
<div id='show_821857766' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_821857766'>
--john

John R. Hover wrote&#58;
<font color='#7F7E6F'>&#62; Hi Tim,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Just no luck with the logs. Both VOMS and GUMS start up and run OK and</font>
<font color='#7F7E6F'>&#62; are contactable. Then, after a bit of time, Tomcat dies without warning</font>
<font color='#7F7E6F'>&#62; or putting out information.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;m going to give up and punt&#58; I&#39;ll run VOMS on our main server and move</font>
<font color='#7F7E6F'>&#62; GUMS to a different system (our cluster head node). I should have VOMS</font>
<font color='#7F7E6F'>&#62; back up today.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks for putting up with the long delays between troubleshooting</font>
<font color='#7F7E6F'>&#62; sessions.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Cheers,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; --john</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Open Science Grid FootPrints wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_821857766').click(function() {
            $('#detail_821857766').slideDown("normal");
            $('#show_821857766').hide();
            $('#hide_821857766').show();
        });
        $('#hide_821857766').click(function() {
            $('#detail_821857766').slideUp();
            $('#hide_821857766').hide();
            $('#show_821857766').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5756#1225474570'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-31T17:36:10+00:00">Oct 31, 2008 05:36 PM UTC</time> by <b>Mariachi</b><a class="anchor" name="1225474570">&nbsp;</a></div><pre>Hi Tim,

Just no luck with the logs. Both VOMS and GUMS start up and run OK and
are contactable. Then, after a bit of time, Tomcat dies without warning
or putting out information.

I&#39;m going to give up and punt&#58; I&#39;ll run VOMS on our main server and move
GUMS to a different system (our cluster head node). I should have VOMS
back up today.

Thanks for putting up with the long delays between troubleshooting
sessions.

Cheers,

--john

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5756#1225303211'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-29T18:00:11+00:00">Oct 29, 2008 06:00 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1225303211">&nbsp;</a></div><pre>John,

What have the logs turned up? Particularly, the apache logs? Can you access the VOMS and GUMS
web links? If you&#39;re having the difficulty that I am also having accessing those pages, could you
perhaps &#39;tail -f&#39; some of those logs so that you can see what is occurring? Also, I presume you went
through the verification after the VOMS installation, however, you might want to go through it
again. Same perhaps for GUMS. But I think the logs should be giving you some indication of the
problem, whether it be a permissions issue or something else. I look forward to your response.

Thank you,

Tim</pre></div><div class='update_description'><i onclick="document.location='5756#1225207329'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-28T15:22:09+00:00">Oct 28, 2008 03:22 PM UTC</time> by <b>Mariachi</b><a class="anchor" name="1225207329">&nbsp;</a></div><pre>Yes, it looks to me like both VOMS and GUMS are running under Tomcat
v5.5, with GUMS using Mysql version 4 as a back-end, and VOMS using
Mysql 5. Isn&#39;t this supposed to be the setup under vdt 1.10.1k?

[root@www osg-1.0.0]# . setup.sh
[root@www osg-1.0.0]# vdt-control --list
Service            | Type   | Desired State
-------------------+--------+--------------
fetch-crl          | cron   | do not enable
vdt-rotate-logs    | cron   | enable
vdt-update-certs   | cron   | enable
apache             | init   | enable
tomcat-55          | init   | enable
mysql              | init   | enable
gums-host-cron     | cron   | do not enable
mysql5             | init   | enable
voms               | init   | enable

[root@www osg-1.0.0]# vdt-version
You have installed a subset of VDT version 1.10.1k&#58;
Software                                                 Status

--------                                                 ------

Apache HTTPD 2.2.9                                       OK

Fetch CRL 2.6.6                                          -

GPT 3.2autotools2004-NMI-9.0                             -

Grid User Management System (GUMS) Client 1.2.16         -

Grid User Management System (GUMS) Service 1.2.16        -

Java 5 SDK 1.5.0_16                                      -
<div id='show_1848883928' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1848883928'>
Logrotate 3.7                                            -

MySQL 4.1.22                                             -

MySQL 5.0.67                                             OK

MySQL Connector/J 5.0.6                                  -

Apache Tomcat 5.5.27                                     OK

vdt-update-certs 2.2                                     -

VOMS 1.8.3p1                                             -

VOMS Admin 2.0.14-1                                      -

Wget 1.11

Cheers,

--john

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1848883928').click(function() {
            $('#detail_1848883928').slideDown("normal");
            $('#show_1848883928').hide();
            $('#hide_1848883928').show();
        });
        $('#hide_1848883928').click(function() {
            $('#detail_1848883928').slideUp();
            $('#hide_1848883928').hide();
            $('#show_1848883928').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5756#1225112382'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-27T12:59:42+00:00">Oct 27, 2008 12:59 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1225112382">&nbsp;</a></div><pre>John,

Here at the GOC we host VOMS and GUMS on the same machine. Both services are run from the
same $VDT_LOCATION. We are using a subset of VDT 1.8.1n. I wonder if both services are trying
to run under the same version of Tomcat and causing a problem? Our instance utilizes two versions
of Tomcat...

[root@jazmine voms-0.6.0]# vdt-control --list
Service            | Type   | Desired State
-------------------+--------+--------------
fetch-crl          | cron   | enable
vdt-rotate-logs    | cron   | enable
mysql              | init   | enable
apache             | init   | enable
tomcat-55          | init   | enable
gums-host-cron     | cron   | enable
tomcat-5           | init   | enable
voms               | init   | enable
vdt-update-certs   | cron   | enable
[root@jazmine voms-0.6.0]# ps aux | grep tomcat
daemon   20134  0.0  3.7 529716 315572 ?     Sl   Sep23  30&#58;36 /usr/local/gums-
1.2.7/jdk1.5/bin/java -server -Xmx256M -
Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -
Djava.util.logging.config.file=/usr/local/gums-1.2.7/tomcat/v55/conf/logging.properties -
Djava.endorsed.dirs=/usr/local/gums-1.2.7/tomcat/v55/common/endorsed -classpath
&#58;/usr/local/gums-1.2.7/tomcat/v55/bin/bootstrap.jar&#58;/usr/local/gums-
1.2.7/tomcat/v55/bin/commons-logging-api.jar -Dcatalina.base=/usr/local/gums-1.2.7/tomcat/v55
-Dcatalina.home=/usr/local/gums-1.2.7/tomcat/v55 -Djava.io.tmpdir=/usr/local/gums-
1.2.7/tomcat/v55/temp org.apache.catalina.startup.Bootstrap start
daemon   20201  0.0  1.2 491052 100160 ?     Sl   Sep23  12&#58;06 /usr/local/gums-
1.2.7/jdk1.4/bin/java -server -Xmx256M -Djava.endorsed.dirs=/usr/local/gums-
1.2.7/tomcat/v5/common/endorsed -classpath /usr/local/gums-
1.2.7/jdk1.4/lib/tools.jar&#58;/usr/local/gums-1.2.7/tomcat/v5/bin/bootstrap.jar&#58;/usr/local/gums-
1.2.7/tomcat/v5/bin/commons-logging-api.jar -Dcatalina.base=/usr/local/gums-1.2.7/tomcat/v5 -
Dcatalina.home=/usr/local/gums-1.2.7/tomcat/v5 -Djava.io.tmpdir=/usr/local/gums-
<div id='show_1035350748' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1035350748'>1.2.7/tomcat/v5/temp org.apache.catalina.startup.Bootstrap start
root     32018  0.0  0.0  3856  652 pts/0    S+   08&#58;51   0&#58;00 grep tomcat

However, they&#39;re both being used by GUMS. It has been a while since I set this up, so I would have
to dig into this more. So you said the logs aren&#39;t really telling you anything? Did you also look at
the system logs?

It might be wise for us to start with the installation documentation just to go through the series of
checks to verify the services. For VOMS&#58;

<a href='https&#58;//twiki.grid.iu.edu/bin/view/ReleaseDocumentation/VomsInstallGuide#Included_topic_Voms_I' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/ReleaseDocumentation/VomsInstallGuide#Included_topic_Voms_I</a>
nstallation

For GUMS&#58;

<a href='https&#58;//twiki.grid.iu.edu/bin/view/ReleaseDocumentation/InstallConfigureAndManageGUMS#Replace' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/ReleaseDocumentation/InstallConfigureAndManageGUMS#Replace</a>
_default_configuration_wi

Tim
</div><script type='text/javascript'>
        $('#show_1035350748').click(function() {
            $('#detail_1035350748').slideDown("normal");
            $('#show_1035350748').hide();
            $('#hide_1035350748').show();
        });
        $('#hide_1035350748').click(function() {
            $('#detail_1035350748').slideUp();
            $('#hide_1035350748').hide();
            $('#show_1035350748').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5756#1224872410'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-24T18:20:10+00:00">Oct 24, 2008 06:20 PM UTC</time> by <b>Mariachi</b><a class="anchor" name="1224872410">&nbsp;</a></div><pre>I worked on it yesterday. It seems that Tomcat works for awhile, but
then crashes. Apache is OK, and returns the &#34;Service Temporarily
Unavailable&#34; message. Restarting Tomcat causes the &#34;pid file found but
no process&#34; message, and then it works again (for awhile).

I don&#39;t see anything useful in catalina.out or

This system was set up using
&#39;pacman -get  OSG&#58;voms OSG&#58;gums&#39;
and VOMS and GUMS are both visible from the root VDT page. They both
appear to work fine. It isn&#39;t clear if GUMS or VOMS is the root cause of
the problem.

[root@www osg-1.0.0]# vdt-version
You have installed a subset of VDT version 1.10.1k&#58;
Software                                                 Status

--------                                                 ------

Apache HTTPD 2.2.9                                       OK

Fetch CRL 2.6.6                                          -

GPT 3.2autotools2004-NMI-9.0                             -

Grid User Management System (GUMS) Client 1.2.16         -

Grid User Management System (GUMS) Service 1.2.16        -

Java 5 SDK 1.5.0_16                                      -

Logrotate 3.7                                            -

MySQL 4.1.22                                             -

<div id='show_1124341309' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1124341309'>MySQL 5.0.67                                             OK

MySQL Connector/J 5.0.6                                  -

Apache Tomcat 5.5.27                                     OK

vdt-update-certs 2.2                                     -

VOMS 1.8.3p1                                             -

VOMS Admin 2.0.14-1                                      -

Wget 1.11                                                -

Any suggestions? Are others running VOMS and GUMS off the same host? I
didn&#39;t think this would be unusual.

--john

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1124341309').click(function() {
            $('#detail_1124341309').slideDown("normal");
            $('#show_1124341309').hide();
            $('#hide_1124341309').show();
        });
        $('#hide_1124341309').click(function() {
            $('#detail_1124341309').slideUp();
            $('#hide_1124341309').hide();
            $('#show_1124341309').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5756#1224871264'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-24T18:01:04+00:00">Oct 24, 2008 06:01 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1224871264">&nbsp;</a></div><pre>Hi Mariachi-Support,

The problem persists. Just following up. Anything new to report?

Thanks,

Tim</pre></div><div class='update_description'><i onclick="document.location='5756#1224260974'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-17T16:29:34+00:00">Oct 17, 2008 04:29 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1224260974">&nbsp;</a></div><pre>John,

There still seems to be a problem. If I go to the following URL I should retrieve a list of members
of the VO (this is what edg-mkgridmap does), and it failes with the error,
&#34;soapenv&#58;Server.userExceptionorg.glite.security.voms.admin.common.VOMSAuthorizationException&#58;
Insufficient privileges to perform &#34;ListMemberNamesOperation&#34;www.mariachi.stonybrook.edu&#34;

<a href='https&#58;//www-mariachi.physics.sunysb.edu&#58;8443/voms/mariachi/services/VOMSCompatibility?method=getGridmapUsers' target='_blank' rel='nofollow'>https&#58;//www-mariachi.physics.sunysb.edu&#58;8443/voms/mariachi/services/VOMSCompatibility?method=getGridmapUsers</a>

Thank you,

Tim</pre></div><div class='update_description'><i onclick="document.location='5756#1224196209'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-16T22:30:09+00:00">Oct 16, 2008 10:30 PM UTC</time> by <b>Mariachi</b><a class="anchor" name="1224196209">&nbsp;</a></div><pre>Hi Tim,

Spoke too soon. Another install from scratch (and post-install
procedure) seems to have done the trick. Weird.

Let me know if you see problems.

Cheers,

--john

John R. Hover wrote&#58;
<font color='#7F7E6F'>&#62; Hi Tim,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; It looks like Mariachi VOMS is going to be down until next week. I did a</font>
<font color='#7F7E6F'>&#62; full VOMS install and got these errors in voms-admin-mariachi.log&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; INFO  2008-10-16 17&#58;45&#58;51,587 [Timer-0] tasks.UpdateCATask - CA update</font>
<font color='#7F7E6F'>&#62; thread started... -</font>
<font color='#7F7E6F'>&#62; INFO  2008-10-16 17&#58;45&#58;59,081 [Timer-0] tasks.UpdateCATask - Updating</font>
<font color='#7F7E6F'>&#62; CAs from&#58; /data/opt/grid/osg-1.0.0/globus/TRUSTED_CA/*.0 -</font>
<font color='#7F7E6F'>&#62; WARN  2008-10-16 17&#58;46&#58;00,463 [Timer-0] util.JDBCExceptionReporter - SQL</font>
<font color='#7F7E6F'>&#62; Error&#58; 1146, SQLState&#58; 42S02 -</font>
<font color='#7F7E6F'>&#62; ERROR 2008-10-16 17&#58;46&#58;00,463 [Timer-0] util.JDBCExceptionReporter -</font>
<font color='#7F7E6F'>&#62; Table &#39;voms_mariachi.ca&#39; doesn&#39;t exist -</font>
<font color='#7F7E6F'>&#62; WARN  2008-10-16 17&#58;48&#58;18,035</font>
<font color='#7F7E6F'>&#62; [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0]</font>
<font color='#7F7E6F'>&#62; resourcepool.BasicResourcePool -</font>
<font color='#7F7E6F'>&#62; com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@3945e2 --</font>
<font color='#7F7E6F'>&#62; Acquisition Attempt Failed!!! Clearing pending acquires. While trying to</font>
<font color='#7F7E6F'>&#62; acquire a needed new resource, we failed to succeed more than the</font>
<font color='#7F7E6F'>&#62; maximum number of allowed acquisition attempts (30). -</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;m going to have to dive back into this next Friday.</font>
<div id='show_1620294386' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1620294386'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Cheers,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; --john</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Open Science Grid FootPrints wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1620294386').click(function() {
            $('#detail_1620294386').slideDown("normal");
            $('#show_1620294386').hide();
            $('#hide_1620294386').show();
        });
        $('#hide_1620294386').click(function() {
            $('#detail_1620294386').slideUp();
            $('#hide_1620294386').hide();
            $('#show_1620294386').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5756#1224194410'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-16T22:00:10+00:00">Oct 16, 2008 10:00 PM UTC</time> by <b>Mariachi</b><a class="anchor" name="1224194410">&nbsp;</a></div><pre>Hi Tim,

It looks like Mariachi VOMS is going to be down until next week. I did a
full VOMS install and got these errors in voms-admin-mariachi.log&#58;

INFO  2008-10-16 17&#58;45&#58;51,587 [Timer-0] tasks.UpdateCATask - CA update
thread started... -
INFO  2008-10-16 17&#58;45&#58;59,081 [Timer-0] tasks.UpdateCATask - Updating
CAs from&#58; /data/opt/grid/osg-1.0.0/globus/TRUSTED_CA/*.0 -
WARN  2008-10-16 17&#58;46&#58;00,463 [Timer-0] util.JDBCExceptionReporter - SQL
Error&#58; 1146, SQLState&#58; 42S02 -
ERROR 2008-10-16 17&#58;46&#58;00,463 [Timer-0] util.JDBCExceptionReporter -
Table &#39;voms_mariachi.ca&#39; doesn&#39;t exist -
WARN  2008-10-16 17&#58;48&#58;18,035
[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0]
resourcepool.BasicResourcePool -
com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@3945e2 --
Acquisition Attempt Failed!!! Clearing pending acquires. While trying to
acquire a needed new resource, we failed to succeed more than the
maximum number of allowed acquisition attempts (30). -

I&#39;m going to have to dive back into this next Friday.

Cheers,

--john

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5756#1224165751'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-16T14:02:31+00:00">Oct 16, 2008 02:02 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1224165751">&nbsp;</a></div><pre>Hi John,

&#34;Prophylactic restart&#34; eh? &#58;) It appears to be working. It was fine until 1800 UTC yesterday, then it
began failing at 0400 UTC today (midnight EDT). Then it somehow recovered for the 0800 hour UTC
before going on a failing streak again. VOMS Monitor currently runs the tests at about 6-8 minutes
after the hour. So that information might give you a window to search the logs if you desire. Given
you&#39;re upgrading, I don&#39;t know that you would want to bother, but I thought I could at least share
this information with you.

Thank you,

Tim</pre></div><div class='update_description'><i onclick="document.location='5756#1224103329'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-15T20:42:09+00:00">Oct 15, 2008 08:42 PM UTC</time> by <b>Mariachi</b><a class="anchor" name="1224103329">&nbsp;</a></div><pre>Hi,

I&#39;ve added a prophylactic daily Tomcat restart. Hopefully whatever is
causing it is cumulative.

Cheers,

--john

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5756#1224103188'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-15T20:39:48+00:00">Oct 15, 2008 08:39 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1224103188">&nbsp;</a></div><pre>Hi John,

Normally you are very responsive to support requests, but this one has lingered. I know you&#39;re
planning the upgrade soon, but in the meantime could you give the services another restart?

Thank you,

Tim</pre></div><div class='update_description'><i onclick="document.location='5756#1223929651'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-13T20:27:31+00:00">Oct 13, 2008 08:27 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1223929651">&nbsp;</a></div><pre>Hi John,

It was good for two hours, then it went south again. Could you check it out?

Thank you,

Tim</pre></div><div class='update_description'><i onclick="document.location='5756#1223922666'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-13T18:31:06+00:00">Oct 13, 2008 06:31 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1223922666">&nbsp;</a></div><pre>Closing ticket.</pre></div><div class='update_description'><i onclick="document.location='5756#1223910969'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-13T15:16:09+00:00">Oct 13, 2008 03:16 PM UTC</time> by <b>Mariachi</b><a class="anchor" name="1223910969">&nbsp;</a></div><pre>Tomcat had crashed. Restart fixed.

This seems to be a recurring problem. I&#39;ll  plan to update VOMS to OSG
1.0 this Friday (currently it is at OSG 0.8.0/VDT1.8.1j ). Hopefully
this will reduce the crashing.

Cheers,

--john

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5756#1223910340'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-13T15:05:40+00:00">Oct 13, 2008 03:05 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1223910340">&nbsp;</a></div><pre>Hi John/Mariachi-Support,

We&#39;ve noticed consecutive VOMS failures for the MARIACHI VO VOMS again. You can see these
failures on VOMS Monitor (<a href='http&#58;//voms-monitor.grid.iu.edu/' target='_blank' rel='nofollow'>http&#58;//voms-monitor.grid.iu.edu/</a>). Please contact us to followup regarding
this issue.

Thank you,

Tim</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F5756">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
