<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[33389] Add DUNE to the supported VOs at Imperial in the ITB factory</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=33389" method="post">
<div class="page-header">
    <h3><span class="muted">33389</span> / Add DUNE to the supported VOs at Imperial in the ITB factory</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Kenneth Herner</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">UCSD glidein</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">MIS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Kenneth Herner</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">osg-glidein-factory</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Ken Please Review</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-05-22</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG Glidein Factory Support <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/33389", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/33389?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/33389?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Add%20DUNE%20to%20the%20supported%20VOs%20at%20Imperial%20in%20the%20ITB%20factory%20ISSUE%3D33389%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='33389#1495738286'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-25T18:51:26+00:00">May 25, 2017 06:51 PM UTC</time><a class="anchor" name="1495738286">&nbsp;</a></div><pre>Hi All,

I&#39;ll go ahead and close this.

Jeff Dost
OSG Glidein Factory Operations

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='33389#1495225150'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-19T20:19:10+00:00">May 19, 2017 08:19 PM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1495225150">&nbsp;</a></div><pre>Hi,

I think we are good.
As long as GridPP is acknowledged, that&#39;s all we need to show the
funding agencies.
I&#39;ve received the monitoring information.
So from my point of view we can close this ticket.
I can then report back to the other UK DUNE sites, to see if they want
to use any information from this.

Regards,
Daniela

On 19 May 2017 at 16&#58;11, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1495206890'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-19T15:14:50+00:00">May 19, 2017 03:14 PM UTC</time><a class="anchor" name="1495206890">&nbsp;</a></div><pre>Hi Vince,

Yes, I followed up separately with Daniela on the monitoring question. I&#39;ll also forward the acknowledgement information to the relevant DUNE parties. Indeed the security discussion will continue past the lifetime of this particular ticket. I&#39;m afraid I will have to punt on the funding question though (I don&#39;t hold any purse strings.)

Regards,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1495206704'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-19T15:11:44+00:00">May 19, 2017 03:11 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1495206704">&nbsp;</a></div><pre>Morning Ken,

Daniela has a few outstanding requests regarding this ticket.  Could you please review and advise?

Thank you,
Vince</pre></div><div class='update_description'><i onclick="document.location='33389#1494587530'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-12T11:12:10+00:00">May 12, 2017 11:12 AM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1494587530">&nbsp;</a></div><pre>Hi All,

I don&#39;t think I&#39;m the right person to close this ticket (I doubt I
can), but in summary&#58;
- production now works, unless someone tells me otherwise
- we don&#39;t use glexec and the security issues have been forwarded (at
least in the UK) to the relevant people and are being discussed
elsewhere
- is there a webpage where *I* can monitor the state of my site wrt
DUNE (note that the site is not part of OSG) ?
- if DUNE is using GridPP resources, DUNE needs to acknowledge GridPP
in their relevant publications&#58;
<a href='https&#58;//www.gridpp.ac.uk/about/acknowledging-gridpp/' target='_blank' rel='nofollow'>https&#58;//www.gridpp.ac.uk/about/acknowledging-gridpp/</a> (We need
funding  too....)

Regards,
Daniela

On 11 May 2017 at 18&#58;52, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1494525168'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-11T17:52:48+00:00">May 11, 2017 05:52 PM UTC</time><a class="anchor" name="1494525168">&nbsp;</a></div><pre>Hello,

The following entries DUNE_T2_UK_London_IC_ceprod07/08 have been moved to production. Kindly let us know if anything else, otherwise please close the ticket.

Thanks
VG
OSG FActory OPS (new)

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=VAIBHAV GUPTA 4273</pre></div><div class='update_description'><i onclick="document.location='33389#1494439480'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-10T18:04:40+00:00">May 10, 2017 06:04 PM UTC</time><a class="anchor" name="1494439480">&nbsp;</a></div><pre>Hi,

Our frontend is also ready to move to production, so go ahead whenever you can.

Daniela, as far as contact goes, I&#39;d say some combination of myself, Steve Timm, and Tom Junk can work on problems. You can also submit a GOC or Fermilab Service Desk ticket.

Cheers,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1494412930'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-10T10:42:10+00:00">May 10, 2017 10:42 AM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1494412930">&nbsp;</a></div><pre>Hi Jeff,

We are quite happy to move to production. Having said this, we are
also transitioning part of the cluster to EL7, please only put
ceprod07 & 08 into production as 05 and 06 will be moved over to EL7
once we are convinced it&#39;s actually working.

On a related note&#58; How should I contact DUNE if I have any problems
with the glideins and/or I need to convey some update to the cluster ?
Usually I would just submit a GGUS ticket.

Regards,

Daniela

On 9 May 2017 at 22&#58;15, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1494364517'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-09T21:15:17+00:00">May 9, 2017 09:15 PM UTC</time><a class="anchor" name="1494364517">&nbsp;</a></div><pre>Hi,

It looks like Marian already made the changes, I&#39;d just like to add for completeness that because DUNE has different requirements than CMS, we created new entries for DUNE only for single core.

These are still on the ITB factory only.  Ken, Daniela, if you are satisfied, let us know and we can push these new entries to production.

Thanks,
Jeff Dost
OSG Glidein Factory Operations

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='33389#1494094872'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-06T18:21:12+00:00">May 6, 2017 06:21 PM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1494094872">&nbsp;</a></div><pre>Yes, that looks correct.

Daniela

On 5 May 2017 at 23&#58;03, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1494021794'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-05T22:03:14+00:00">May 5, 2017 10:03 PM UTC</time><a class="anchor" name="1494021794">&nbsp;</a></div><pre>Hi,

should we do this on all entries? Just making sure we&#39;re talking about CEs&#58; ceprod0{5,6,7,8}.grid.hep.ph.ic.ac.uk, where GLIDEIN_MaxMemMBs=2530 and GLIDEIN_CPUS=1, correct?

Thanks,
Marian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=zvada/CN=684832/CN=Marian Zvada</pre></div><div class='update_description'><i onclick="document.location='33389#1493842631'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-03T20:17:11+00:00">May 3, 2017 08:17 PM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1493842631">&nbsp;</a></div><pre>Hi Ken,

yes, just turn glexec off.

Regards,
Daniela

On 3 May 2017 at 21&#58;14, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1493842472'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-03T20:14:32+00:00">May 3, 2017 08:14 PM UTC</time><a class="anchor" name="1493842472">&nbsp;</a></div><pre>All right, I&#39;m confident that there is a bug on our end during the proxy renewal on the server. Somehow during the renewal the DN changes from the dunegpvm01 to my CILogon Basic DN. I&#39;ll work with our developers to figure out what&#39;s going on.

In the meantime, would you be OK with moving into production with glexec turned off? I want to be sure that&#39;s OK with you before we ask factory ops to change anything.

Thanks,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1493830620'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-03T16:57:00+00:00">May 3, 2017 04:57 PM UTC</time><a class="anchor" name="1493830620">&nbsp;</a></div><pre>Hi Daniela,

Don&#39;t worry about it. I was able to do some more digging on this side, and I think I understand what is happening now. All signs currently point to the subtle bug on our side that I mentioned earlier.

I&#39;ve just sent yet another set of 16 probe jobs. If these succeed, I am confident that I understand the issue. Basically it has to do with how the proxy renewal on our servers is working when the jobs sit in the queue for a while.

Cheers,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1493828771'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-03T16:26:11+00:00">May 3, 2017 04:26 PM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1493828771">&nbsp;</a></div><pre>Hi Ken,

this proves surprisingly difficult. The glidein name (or parts of it) do
not show in the logs, so when the job is gone I can&#39;t map it to any
specific job that ran. Maybe your logs store the cream id (something like
CREAM+a bunch of numbers) or the lrms id (currently hovering around 3494000
in our system, possibly with an &#39;sge&#39; attached to it ?), in the future that
would be helpful.

Having said this, I had a quick look on wj13 and in the glexec logs on the
node  I can see that the frontend cert (frontend_pp) seem to attempt and
succeed in a glexec switch and is mapped to a glexec account, but a second
attempt to change user within the same job fails (this is now from
/var/log/messages, our glexec log doesn&#39;t seem to be too keen to store
failures)

May  3 16&#58;04&#58;43 wj13 python&#58; glexec[162468]&#58; lt2-duneplt409
[&#39;/vols/grid/wn/emi3/v3.15.3-1/emi-wn-3.15.3-1_sl6v1/usr/sbin/glexec&#39;, &#39;/bin/b
ash&#39;, &#39;-c&#39;, &#39;install -m 755 -d
&#34;/srv/localstage/scratch/3492355.1.grid.q/CREAM189703536/glide_M293Lr/execute/dir_162293&#34; && tar -C &#34;/srv/lo
calstage/scratch/3492355.1.grid.q/CREAM189703536/glide_M293Lr/execute/dir_162293&#34;
-x&#39;]
May  3 16&#58;04&#58;43 wj13 python&#58; glexec[162468]&#58; lt2-duneplt409 Target proxy&#58; /srv/localstage/scratch/3492355.1.grid.q/CREAM189703536/glide_M2
93Lr/execute/dir_162293.condor/x509cc_dunepro_Production

I don&#39;t see any reference to the glexec accounts  dunegpvm01 gets mapped to
as noted by argus, so all I can conclude is that it didn&#39;t use that cert,
but because I don&#39;t have the proxy anymore, I can&#39;t tell which user it was
aiming for (i.e. if it&#39;s the correct cert and some problem with our glexec
I can&#39;t tell).
I need to go home now, maybe we can do some coordinated tests so I can look
at the running jobs and/or maybe Simon has a better idea.

Cheers,
Daniela
<div id='show_328957244' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_328957244'>
On 3 May 2017 at 16&#58;35, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_328957244').click(function() {
            $('#detail_328957244').slideDown("normal");
            $('#show_328957244').hide();
            $('#hide_328957244').show();
        });
        $('#hide_328957244').click(function() {
            $('#detail_328957244').slideUp();
            $('#hide_328957244').hide();
            $('#show_328957244').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='33389#1493825712'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-03T15:35:12+00:00">May 3, 2017 03:35 PM UTC</time><a class="anchor" name="1493825712">&nbsp;</a></div><pre>If you have just a few minutes, can you see what DNs these glideins were seeing (this was within the last hour)&#58;

glidein_153631_467904580@....
glidein_23961_164116224@....
glidein_6904_848394386@....

They *should* have all used the dunegpvm01 DN. If it was something else, I&#39;d really like to know. I&#39;m suddenly worried about the possibility of a very subtle bug on our end...

Thanks,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1493823911'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-03T15:05:11+00:00">May 3, 2017 03:05 PM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1493823911">&nbsp;</a></div><pre>I can see the dunegpvm certificate being mapped correctly&#58;
/var/log/argus/pepd/process.log&#58;2017-05-03 02&#58;01&#58;01.151Z - INFO
[DFPMObligationHandler] - ACCOUNTMAPPER_OH&#58; DN&#58; CN=production/
dunegpvm01.fnal.gov,OU=Services,O=Open Science
Grid,DC=opensciencegrid,DC=org pFQAN&#58; /dune/Role=Production FQANs&#58;
[/dune/Role=Production, /dune] mapped to POSIX account&#58;
PosixAccount{user=glx-dune131 group=lt2-dune groups=lt2-dune}

If you look at the time stamps though it looks like the wrong CA certs
(OU=People,O=Fermi National Accelerator Laboratory,C=US,DC=cilogon,DC=org
with your DN) actually show up in the logs later than the correct ones.

Cron job gone rogue ?

On 3 May 2017 at 15&#58;56, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1493823357'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-03T14:55:57+00:00">May 3, 2017 02:55 PM UTC</time><a class="anchor" name="1493823357">&nbsp;</a></div><pre>Well this is really odd... I do indeed see some of the jobs going held with the usual glexec problem, but I also see jobs from the *same cluster* successfully completing. All jobs in that cluster should have been using the same DN, so this is not making much sense to me.

Did you see any successful mappings using &#34;/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=production/dunegpvm01.fnal.gov&#34;?

I sent 16 new jobs just now that I&#39;m 100% sure are using the dunegpvm01 cert. If you see failures there, then I&#39;m *really* confused.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1493808429'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-03T10:47:09+00:00">May 3, 2017 10:47 AM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1493808429">&nbsp;</a></div><pre>I will be away from the lab on business travel May 3-4.
I will have limited access to E-mail, and limited time to respond.
If there are any issues with FermiCloud or any Grid and Cloud Operations services please open a Service Desk ticket.

Steven Timm</pre></div><div class='update_description'><i onclick="document.location='33389#1493808250'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-03T10:44:10+00:00">May 3, 2017 10:44 AM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1493808250">&nbsp;</a></div><pre>I still see&#58;
pepd/process.log&#58;2017-05-03 05&#58;12&#58;36.340Z - ERROR
[TrustStoreValidationErrorLogger] - Validation error&#58; error at position 0
in chain, problematic certificate subject&#58;
CN=1717757645,CN=2160414386,CN=1488398773,CN=1683709237,CN=UID&#58;kherner,CN=Kenneth
Herner,OU=People,O=Fermi National Accelerator
Laboratory,C=US,DC=cilogon,DC=org (category&#58; X509_CHAIN)&#58; Trusted issuer of
this certificate was not established

so it&#39;s still using the &#39;wrong&#39; certificate.

Just turn glexec off.....

On 2 May 2017 at 20&#58;30, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1493753432'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-02T19:30:32+00:00">May 2, 2017 07:30 PM UTC</time><a class="anchor" name="1493753432">&nbsp;</a></div><pre>We have fixed the frontend issue, and we saw some jobs start this morning, but they all went held with a glexec setup error. I was a little surprised to see that since the DN involved in those jobs was supposed to be from an OSG CA-signed cert, not CILogon Basic. I&#39;ve sent a fresh set recently to see if the problem happens again.

Cheers,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1493676259'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-01T22:04:19+00:00">May 1, 2017 10:04 PM UTC</time><a class="anchor" name="1493676259">&nbsp;</a></div><pre>D&#39;oh! Who knew it was case-sensitive... I&#39;ll pass that along to the guy in charge of Puppet on that node.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1493676131'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-01T22:02:11+00:00">May 1, 2017 10:02 PM UTC</time> by <b>simon.fayer05@....</b><a class="anchor" name="1493676131">&nbsp;</a></div><pre>Hi Ken,

The error we see in the glidein client logs within the jobs is&#58;

Mon May 1 22&#58;43&#58;02 BST 2017 Error running
&#39;/srv/localstage/scratch/3469111.1.grid.q/CREAM769959666/glide_JCbcFf/main/glexec_setup.sh&#39;
USE_GLEXEC in VO Frontend configured to be optional.
Accepted values are &#39;NEVER&#39; or &#39;OPTIONAL&#39; or &#39;REQUIRED&#39;.
Mon May 1 22&#58;43&#58;02 BST 2017 Sleeping 256
Mon May 1 22&#58;47&#58;18 BST 2017 Sleeping 268
Mon May 1 22&#58;51&#58;46 BST 2017 Sleeping 274
Mon May 1 22&#58;56&#58;20 BST 2017 Sleeping 327

Regards,
Simon

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1493673567'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-01T21:19:27+00:00">May 1, 2017 09:19 PM UTC</time><a class="anchor" name="1493673567">&nbsp;</a></div><pre>Yes, it looks like the glideins are starting, but they aren&#39;t reporting in to our collectors for some reason, so the jobs never see the slots to match. I&#39;ll investigate on our side.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1493672890'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-01T21:08:10+00:00">May 1, 2017 09:08 PM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1493672890">&nbsp;</a></div><pre>Hi,

I currently see 21 dune jobs running and 21 queueing.

Daniela

On 1 May 2017 at 21&#58;59, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1493672372'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-01T20:59:32+00:00">May 1, 2017 08:59 PM UTC</time><a class="anchor" name="1493672372">&nbsp;</a></div><pre>They didn&#39;t, actually. It looks like they are all still queued.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1493391306'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-28T14:55:06+00:00">Apr 28, 2017 02:55 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1493391306">&nbsp;</a></div><pre>Morning all,

How did the test jobs go?

Vince</pre></div><div class='update_description'><i onclick="document.location='33389#1493229470'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-26T17:57:50+00:00">Apr 26, 2017 05:57 PM UTC</time><a class="anchor" name="1493229470">&nbsp;</a></div><pre>32 jobs are in the queue now.

Cheers,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1493217732'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-26T14:42:12+00:00">Apr 26, 2017 02:42 PM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1493217732">&nbsp;</a></div><pre>Yes, just send a bunch. Or we can try putting it on the production server.

Regards,
Daniela

On 26 April 2017 at 15&#58;15, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1493216154'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-26T14:15:54+00:00">Apr 26, 2017 02:15 PM UTC</time><a class="anchor" name="1493216154">&nbsp;</a></div><pre>Hi Daniela,

Yes, the glideins without glexec enabled seem to be working well. I also sent some test jobs with glexec enabled using a service cert signed by the OSG CA, and I believe those were also fine. I can send some more if you&#39;d like to confirm that.

Cheers,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1493215936'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-26T14:12:16+00:00">Apr 26, 2017 02:12 PM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1493215936">&nbsp;</a></div><pre>Hi,

To get back to the initial topic&#58;
I see a couple of DUNE glideins running at Imperial (without glexec). Are
these tests successful ?

Regards,
Daniela

On 24 April 2017 at 11&#58;44, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1493030683'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-24T10:44:43+00:00">Apr 24, 2017 10:44 AM UTC</time><a class="anchor" name="1493030683">&nbsp;</a></div><pre>Hi Daniela,
there are quite a few different aspects to this ticket, and I&#39;m involved in the background in more than one way, which makes it a bit difficult to reply briefly and to the point. If I say something you don&#39;t understand, or you like to know more about, please just ask.
Some remarks&#58;
- CILogon basic is one of a number of so-called IOTA CAs. These CAs have a lower &#34;level of assurance&#34; than the thus far accepted CAs which fall in the respective categories classic, slcs and mics. IOTA is a 4th category. The difference is that for the other 3, the CA is doing extensive identity vetting (typically via photo ID), or at least it can vouch for someone having done that. For the IOTA CAs that&#39;s not (per se) the case, the CA provides a persistent and unique identifier, but does not per se know the user. That means that that vetting has to be done elsewhere, typically by the VOs. For the 4 CERN experiment VOs that&#39;s indeed the case&#58; only vetted members of the experiments can enroll in the VO, which means that those VOs are ok to be used with IOTA CAs. However, in Europe not all (many?) VOs do such vetting, and hence IOTA CAs should only be accepted for certain VOs and not for others. Which VOs are OK and which are not, is something that is typically decided by the eInfrastructures, such as OSG or EGI.
In short, enabling an IGTF IOTA CA without any further restrictions, is something that should not normally be done and should preferably also be discussed first with the e-infrastructure, in your case I presume EGI, unless this concerns dedicated OSG hardware?

- In order to make these combined CA / VO decisions, new software needs to be installed&#58;
* For LCMAPS I have produced a new plugin, which has been released by the EGI UMD, both 3 and 4, a few months ago already, in the form of lcmaps-plugins-vo-ca-ap. More information can be found in <a href='https&#58;//wiki.nikhef.nl/grid/Lcmaps-plugins-vo-ca-ap' target='_blank' rel='nofollow'>https&#58;//wiki.nikhef.nl/grid/Lcmaps-plugins-vo-ca-ap</a>
* For Argus, I have also produced code to make this work, but there (due to different reasons) the team has unfortunately taken much more time to integrate this. It will hopefully be released in the UMD update, in May I believe. My earlier version of the software is available, which, combined with some adaptations in the policy, can also make a workable and secure setup for Argus.

For a gLExec-on-workernode scenario, even one that does a callout to Argus, you could still run the new lcmaps plugin before doing the Argus callout, which would still protect your resources.
So there are a few options...

Best wishes,
Mischa Salle

by /DC=org/DC=terena/DC=tcs/C=NL/O=Nikhef/CN=Mischa Salle msalle@....</pre></div><div class='update_description'><i onclick="document.location='33389#1492785015'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T14:30:15+00:00">Apr 21, 2017 02:30 PM UTC</time> by <b>Dave Dykstra</b><a class="anchor" name="1492785015">&nbsp;</a></div><pre>I am also adding grid-mw-security@.... and the OSG security officer on the Cc of this ticket.

Daniela,

Thank you for pushing back on the current situation, I agree that it is not good.

First, let me say how important it is to us at Fermilab to be using a CA based on federated identity&#58; it enables us to transparently and automatically create X.509 certificates for users without having to run our own CA as we used to.  The only other significantly sized grid VO that is doing this so far that I am aware of is LIGO, but I expect more projects and/or institutions to be doing something similar in the future.  So it isn&#39;t an option to simply switch to a traditional CA.

In the OSG, all VOs are required to verify that their users are actual members of their VO, so the cilogon-basic CA is accepted by default in the OSG CA cert package.  EGI cannot do that, because they have VOs that allow people to anonymously join.  Since people can also anonymously get cilogon-basic certificates from some supported IdPs, the combination could allow people to anonymously use grid resources, which is clearly not a good idea.  The long term solution planned for EGI for this problem of accepting federated identity CAs is the software that I mentioned from NIKHEF.   Perhaps since you are motivated for there to be a good solution, you could help by being an early adopter.

In addition, glexec is getting replaced by singularity which does not need to verify users&#39; certificates at all. There still may be other use cases for those user certificates however, for example to verify access to storage in Europe or even to start jobs using certificates from a federated CA based in Europe, so NIKHEF has put in the effort to make a solution.

Finally, there is one more solution that could be implemented by OSG that I have been proposing for about a year but which so far has not gotten any traction.   CILogon has a federated identity CA that is already accepted in Europe, the cilogon-silver CA.  My proposal has been to have an agreement between OSG & CILogon to have OSG security confirm which Identity Providers (IdPs) verify all their users, and have CILogon switch those IdPs to cilogon-silver instead of cilogon-basic.  This is something that would be quite doable technically and mainly requires updating the formal document describing cilogon-silver to describe what&#39;s happening.

Dave</pre></div><div class='update_description'><i onclick="document.location='33389#1492783515'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T14:05:15+00:00">Apr 21, 2017 02:05 PM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1492783515">&nbsp;</a></div><pre>Hi Dave,

as far as I can tell, I can only answer this ticket via email, hence I
cc&#39;ed them. Their addresses are&#58;
ian.neilson@...., jeremy.coles@.....

Regards,
Daniela

On 21 April 2017 at 14&#58;58, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1492783513'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T14:05:13+00:00">Apr 21, 2017 02:05 PM UTC</time> by <b>ian.neilson@....</b><a class="anchor" name="1492783513">&nbsp;</a></div><pre>﻿I am away from the office, returning Monday 24th April, 2017.

For anything urgent related to GridPP/EGI security please
make sure your email is copied to ukngi-security@....

Thank You.
Ian Neilson</pre></div><div class='update_description'><i onclick="document.location='33389#1492783452'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T14:04:12+00:00">Apr 21, 2017 02:04 PM UTC</time><a class="anchor" name="1492783452">&nbsp;</a></div><pre>Let me send some test jobs with the DUNE Production account; it uses an OSG CA service cert. It sounds like Dave will write a reply soon that has some more details of why things currently work the way they do.

Cheers,
Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1492783097'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T13:58:17+00:00">Apr 21, 2017 01:58 PM UTC</time> by <b>Dave Dykstra</b><a class="anchor" name="1492783097">&nbsp;</a></div><pre>Before I respond more to your comment, I am attempting to add the people on Cc you said you added but I don&#39;t see there&#58; Ian (I am guessing Ian Neilson) and Jeremy Coles.  Let&#39;s see if this works.</pre></div><div class='update_description'><i onclick="document.location='33389#1492766049'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T09:14:09+00:00">Apr 21, 2017 09:14 AM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1492766049">&nbsp;</a></div><pre>Hi,

I have to admit I am not keen on any of these shenanigans. We have a
perfectly valid way of authorizing users that is accepted all over the grid
and no, I prefer not to download CA certificates of the internet(TM). (I
assume if I would I would get regular crl updates for this ? What about CA
updates ? Anything ? )
Why does DUNE not give users certificates from a recognized authority ? I
realize OSG suffers from a not-invented-here syndrome almost as big as
CERN, but from our point of view it&#39;s a small VO and unlike the LHC VOs who
can throw their weight (and attached funding around) you&#39;ll run into
problems over and over again. Yes, you can turn of glexec, and that will
technically solve your problem for the moment, but that doesn&#39;t mean that
in the future we will find some other way of banning users from
non-recognized CA.

I might sound grouchy here (OK, I am grouchy, and old, but I have also been
around a long time), but I&#39;m actually trying to make this work in the long
term, which I think would be better for all concerned.

I&#39;ve cc&#39;ed the GridPP security person (Ian) on this ticket, maybe he can
shed some lights on my concern. I&#39;ve also put on Jeremy Coles who is the
GridPP technical something important(TM). If possible could they please be
kept on the ticket ?

I still think that for running the test Ken should use his other DN, that
way I can test if glexec actually works in principle, which is something
I&#39;d like to know.

Regards,
Daniela

On 20 April 2017 at 20&#58;33, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<div id='show_376512856' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_376512856'><font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_376512856').click(function() {
            $('#detail_376512856').slideDown("normal");
            $('#show_376512856').hide();
            $('#hide_376512856').show();
        });
        $('#hide_376512856').click(function() {
            $('#detail_376512856').slideUp();
            $('#hide_376512856').hide();
            $('#show_376512856').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='33389#1492716792'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-20T19:33:12+00:00">Apr 20, 2017 07:33 PM UTC</time> by <b>Dave Dykstra</b><a class="anchor" name="1492716792">&nbsp;</a></div><pre>NIKHEF has some new software for accepting Certificate Authorities like cilogon-basic in combination a whitelist of accepted VOs.  I believe the software for lcmaps and argus is available now, but it&#39;s expected to take about a year to roll out.  I think one of the trickiest parts is a method to keep the list of acceptable VOs updated.  If you&#39;re interested in using the new software, contact grid-mw-security@.....

Otherwise as Ken said you can install the cilogon-basic CA files.  The policy file he was talking about modifying to accept only Fermilab is cilogin-basic.signing_policy.</pre></div><div class='update_description'><i onclick="document.location='33389#1492705098'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-20T16:18:18+00:00">Apr 20, 2017 04:18 PM UTC</time><a class="anchor" name="1492705098">&nbsp;</a></div><pre>Right, we have seen this issue at some other EGI sites, because the CILogon Basic CA isn&#39;t supported by default. The CILogon OSG CA is, but most DUNE users aren&#39;t going to have a cert signed by that CA, and it&#39;s extremely impractical to change that.

At a couple of other EGI sites we solved the problem by having the sites add the CI Logon Basic CA files&#58;

<a href='http&#58;//ca.cilogon.org/downloads' target='_blank' rel='nofollow'>http&#58;//ca.cilogon.org/downloads</a>

And installing them in the usual way. The default policy is to accept all CILogon Basic DNs, but for extra security you can change it to accept only DNs from Fermilab. So instead of allowing &#34;/DC=org/DC=cilogon/*&#34; you can do &#34;/DC=org/DC=cilogon/C=US/O=Fermi National Accelerator Laboratory/*&#34; Since Fermilab has additional user validation beyond the minimal requirements of the Basic CA.

Another option would be to not run glexec; since only DUNE is being supported from these factory entires I suppose it is fine. However, if you prefer that we run glexec, we will certainly do so. What do you think?

I&#39;ve added Dave Dykstra to the ticket. At some point CILogon Basic is supposed to be supposed within EGI software, but maybe that doesn&#39;t extend to WLCG rpms. Dave can comment on the roadmap more accurately than I can.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1492696211'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-20T13:50:11+00:00">Apr 20, 2017 01:50 PM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1492696211">&nbsp;</a></div><pre>Hi Ken,

Looking in the argus log, it maps the pilot properly, but you are using a
user certificate for which there exists no approved CA within the LCG rpms
(formatting courtesy of argus)
CN=UID&#58;kherner,CN=Kenneth Herner,OU=People,O=Fermi National Accelerator
Laboratory,C=US,DC=cilogon,DC=org

The certificate you use to e.g. update this ticket (
/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner
1385) should work (or any CERN one).

Would you mind sending the job again with a different DN ?

Regards,
Daniela

On 20 April 2017 at 14&#58;05, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1492693541'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-20T13:05:41+00:00">Apr 20, 2017 01:05 PM UTC</time><a class="anchor" name="1492693541">&nbsp;</a></div><pre>Hi everyone,

The good news&#58; the single-core tests did start correctly.

The bad news&#58; they all immediately went held with a glexec setup error (not surprising.) Can you remind me how you want us to handle glexec? At the moment it is set to &#34;optional&#34; in this particular frontend group, but if you&#39;d prefer us to not run it at all, I will set it to never. I don&#39;t think it matters much to us since I would imagine everything would map to a single account with or without glexec.

Cheers,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1492687689'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-20T11:28:09+00:00">Apr 20, 2017 11:28 AM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1492687689">&nbsp;</a></div><pre>Hi,

I&#39;ve killed the multicore jobs. Could you please submit a single core test
job ?
We&#39;re happy to enable DUNE multicore jobs, once DUNE runs actual multicore
jobs, just let us know.

Regards,
Daniela

On 19 April 2017 at 21&#58;02, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1492632128'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-19T20:02:08+00:00">Apr 19, 2017 08:02 PM UTC</time><a class="anchor" name="1492632128">&nbsp;</a></div><pre>New values applied to CPU and mem, ITB reconfig&#39;d and restarted.

-Marian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=zvada/CN=684832/CN=Marian Zvada</pre></div><div class='update_description'><i onclick="document.location='33389#1492624838'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-19T18:00:38+00:00">Apr 19, 2017 06:00 PM UTC</time> by <b>marian.zvada@....</b><a class="anchor" name="1492624838">&nbsp;</a></div><pre>Alright, thanks for elaborating on this, I&#39;ll update factory entry
accordingly and let you know when done.

-Marian
(gWMS Factory Ops)

On 4/19/17 12&#58;18 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1492624740'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-19T17:59:00+00:00">Apr 19, 2017 05:59 PM UTC</time><a class="anchor" name="1492624740">&nbsp;</a></div><pre>Alright, thanks for elaborating on this, I&#39;ll update factory entry accordingly and let you know when done.

-Marian
(gWMS Factory Ops)

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=zvada/CN=684832/CN=Marian Zvada</pre></div><div class='update_description'><i onclick="document.location='33389#1492622291'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-19T17:18:11+00:00">Apr 19, 2017 05:18 PM UTC</time> by <b>simon.fayer05@....</b><a class="anchor" name="1492622291">&nbsp;</a></div><pre>Hi Ken,

Yes, 2048 MB is fine with us.

Regards,
Simon

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1492621971'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-19T17:12:51+00:00">Apr 19, 2017 05:12 PM UTC</time><a class="anchor" name="1492621971">&nbsp;</a></div><pre>Hi Daniela,

At some point it will be the former, but right now &#62;99% of it is the latter (CMS-like.) The wasted CPU in DUNE&#39;s case comes from jobs requesting &#62; 2GB of memory, and then the &#34;other&#34; CPUs indeed may not get utilized.

As for the memory limit, most people request 2000MB (our default) but some request 2048, getting confused about whether 1 GB = 1000 MB or 1024 MB. Would 2048 MB be all right with you?

Thanks,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1492621031'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-19T16:57:11+00:00">Apr 19, 2017 04:57 PM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1492621031">&nbsp;</a></div><pre>Hi,

It would probably be best to aim for the usual 2GB/core limit wrt memory.
As for multicore jobs&#58; Are DUNE jobs true multicore jobs or are those
single core jobs forced into multicore slots, a la CMS ? Because the latter
causes an unacceptable amount of wasted CPU and I&#39;d be reluctant to add
another VO to this club.

Regards,
Daniela

On 19 April 2017 at 11&#58;51, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1492612742'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-19T14:39:02+00:00">Apr 19, 2017 02:39 PM UTC</time><a class="anchor" name="1492612742">&nbsp;</a></div><pre>Hi,

Ideally, yes, we&#39;d prefer multicore pilots at some point, but we can certainly stick with single-core pilots for now. Ops, please go ahead and change the entry to single-core until we hear otherwise. Are there any other limitations such as memory that we should set?

Thanks,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1492599069'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-19T10:51:09+00:00">Apr 19, 2017 10:51 AM UTC</time> by <b>daniela.bauer.grid@....</b><a class="anchor" name="1492599069">&nbsp;</a></div><pre>Hi,

Not sure I can update the ticket directly.
This looks like a multi-core job to me. You never mentioned multicore jobs
anywhere. Generally we do not support multicore jobs for small VOs  -- we
are obviously technically able to run multicore jobs, as we run them for
the LHC experiments, but this is a much bigger deal than just allowing dune
jobs on the existing infrastructure.
Would you be able to send a single  core test job ?

Regards,
Daniela

On 17 April 2017 at 22&#58;40, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33389#1492465246'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-17T21:40:46+00:00">Apr 17, 2017 09:40 PM UTC</time><a class="anchor" name="1492465246">&nbsp;</a></div><pre>Thanks, Jeff. That&#39;s all I really needed for now. Let&#39;s see what happens once they get a chance to run.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1492464904'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-17T21:35:04+00:00">Apr 17, 2017 09:35 PM UTC</time><a class="anchor" name="1492464904">&nbsp;</a></div><pre>Hi Ken,

I see nothing out of the ordinary from the factory side, it appears pilots have made it to the site batch queue but have been pending for about 3 hours.

It could be there are simply no resources available at the site at the moment, let&#39;s give them a day or two to see what happens (unless the admins CC&#39;d have anything to add).

Thanks,
Jeff Dost
OSG Glidein Factory Operations

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='33389#1492457662'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-17T19:34:22+00:00">Apr 17, 2017 07:34 PM UTC</time><a class="anchor" name="1492457662">&nbsp;</a></div><pre>I couple of days ago sent a few test jobs just to see if we could get lucky. Our frontend shows that we&#39;re requesting glideins and we have some in the idle state and some in the &#34;pending&#34; state. Could someone in ops take a quick peek and make sure we&#39;re not hitting any kind of brick wall in the logs?

Thanks,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33389#1491602621'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-07T22:03:41+00:00">Apr 7, 2017 10:03 PM UTC</time><a class="anchor" name="1491602621">&nbsp;</a></div><pre>Hi Ken,

I just added DUNE to the requested CEs, in ITB only.

Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='33389#1491585654'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-07T17:20:54+00:00">Apr 7, 2017 05:20 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1491585654">&nbsp;</a></div><pre>Hi,

We&#39;d like to try submitting DUNE gmws pilots to the Imperial CEs. They&#39;re already in the factories (the ceprod0[5-8].grid.hep.ph.ic.ac.uk entries) so I think we just need to add DUNE to the supported VOs list along with ATLAS and CMS. Let&#39;s start with the ITB factory only for now.

Thanks,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F33389">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
