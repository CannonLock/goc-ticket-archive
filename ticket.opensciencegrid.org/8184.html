<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[8184] Resource Specific Issue on FNAL_FERMIGRID</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=8184" method="post">
<div class="page-header">
    <h3><span class="muted">8184</span> / Resource Specific Issue on FNAL_FERMIGRID</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Ian Stokes-Rees</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-07-21</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Fermilab <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/8184", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/8184?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/8184?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Resource%20Specific%20Issue%20on%20FNAL_FERMIGRID%20ISSUE%3D8184%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='8184#1279824311'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-07-22T18:45:11+00:00">Jul 22, 2010 06:45 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1279824311">&nbsp;</a></div><pre>I am going to close this ticket.  If it needs to be reopened, please let me know and I will do so.

Kyle</pre></div><div class='update_description'><i onclick="document.location='8184#1279216553'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-07-15T17:55:53+00:00">Jul 15, 2010 05:55 PM UTC</time><a class="anchor" name="1279216553">&nbsp;</a></div><pre>We have now put in a patch to our site job gateway fermigridosg1.fnal.gov which should
solve the problem you were experiencing.  Thanks for calling this problem to our
attention.

Steve Timm</pre></div><div class='update_description'><i onclick="document.location='8184#1279140234'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-07-14T20:43:54+00:00">Jul 14, 2010 08:43 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1279140234">&nbsp;</a></div><pre>Steve,

Has the issue been cleared?

Kyle</pre></div><div class='update_description'><i onclick="document.location='8184#1278000005'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-07-01T16:00:05+00:00">Jul 1, 2010 04:00 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1278000005">&nbsp;</a></div><pre>Steve,

Has the issue been cleared?

Kyle</pre></div><div class='update_description'><i onclick="document.location='8184#1277222708'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-22T16:05:08+00:00">Jun 22, 2010 04:05 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1277222708">&nbsp;</a></div><pre>Yes--we have the fix in test right now--should be clear by next week.

Steve

On Tue, 22 Jun 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1277222439'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-22T16:00:39+00:00">Jun 22, 2010 04:00 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1277222439">&nbsp;</a></div><pre>Steve,

Just pinging again to see if any progress has been made.

Kyle</pre></div><div class='update_description'><i onclick="document.location='8184#1276009927'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-08T15:12:07+00:00">Jun 8, 2010 03:12 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1276009927">&nbsp;</a></div><pre>Yes, it is useful to hold the ticket open.. our developer is now in tests
of the fix
and we expect to have something ready for Ian and Peter to try again in
the next 2 weeks.  The ticket is a good reminder.

Steve

On Tue, 8 Jun 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1276009455'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-08T15:04:15+00:00">Jun 8, 2010 03:04 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1276009455">&nbsp;</a></div><pre>Steve,

Is leaving this ticket open useful at all, since it is being handled in-house for you?

Kyle</pre></div><div class='update_description'><i onclick="document.location='8184#1274717887'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-24T16:18:07+00:00">May 24, 2010 04:18 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1274717887">&nbsp;</a></div><pre>Our developer still working on the fix.  We think we know what it
is, just have to test in integration before putting into production.

Steve

On Mon, 24 May 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1274717272'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-24T16:07:52+00:00">May 24, 2010 04:07 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1274717272">&nbsp;</a></div><pre>Steve,

Are there any updates or progress on this?  Just doing the weekly ping.

Thanks,
Kyle</pre></div><div class='update_description'><i onclick="document.location='8184#1274125329'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-17T19:42:09+00:00">May 17, 2010 07:42 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1274125329">&nbsp;</a></div><pre>Our developer has identified the problem in our code
and we are working on a fix.

Steve

On Mon, 17 May 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1274124388'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-17T19:26:28+00:00">May 17, 2010 07:26 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1274124388">&nbsp;</a></div><pre>Steve,

Have we heard anything about this?

Kyle</pre></div><div class='update_description'><i onclick="document.location='8184#1273507350'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-10T16:02:30+00:00">May 10, 2010 04:02 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1273507350">&nbsp;</a></div><pre>2 hours ago  by Ian Stokes-Rees

Thank you for your email with the subject &#34;Open Science Grid&#58; Resource Specific Issue on FNAL_FERMIGRID ISSUE=8184 PROJ=71&#34;.

I will be travelling on business from Friday April 30th until Tuesday May 11th, following which I will be on vacation until Thursday May 27th.

I will check email intermittently during this period, but may not respond to your message until the end of May.

If you have a grid computing matter to discuss, please contact Peter Doherty (doherty@....), or for support issues please submit a support ticket by email to hpc@.....

Regards,

Ian Stokes-Rees

Internal Activities (2 hours ago)
Internal Activities (2 hours ago)

Created&#58; Away from mail until May 27th.
Initial Customer Impact&#58; 4
Initial Last Name&#58; Stokes-Rees_HISTORY_LINE_BREAK_Initial First Name&#58; Ian_HISTORY_LINE_BREAK_Initial Email address&#58; ijstokes@...._HISTORY_LINE_BREAK_Initial Organization&#58; SBGrid
Incoming mail&#58; From&#58; ijstokes@....; To&#58; osg@....
Added Assignee &#58; Ian Stokes-Rees
Escalated&#58; Ticket Creation Notification
Escalation email sent&#58; ijstokes@....
Notification mail sent&#58; Assignee&#58; Ian Stokes-Rees</pre></div><div class='update_description'><i onclick="document.location='8184#1273500547'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-10T14:09:07+00:00">May 10, 2010 02:09 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1273500547">&nbsp;</a></div><pre>Our developer is looking at the issue of our forwarding gateway, expect to
have another update later this week.
Steve Timm

On Mon, 10 May 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1273498898'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-10T13:41:38+00:00">May 10, 2010 01:41 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1273498898">&nbsp;</a></div><pre>Steve,

Do you have any updates on this?

Kyle</pre></div><div class='update_description'><i onclick="document.location='8184#1272630666'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-30T12:31:06+00:00">Apr 30, 2010 12:31 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1272630666">&nbsp;</a></div><pre>Steve,

Thanks for the update.  I&#39;ll ping in a week if we don&#39;t hear from you before that date.

Thanks,
Kyle</pre></div><div class='update_description'><i onclick="document.location='8184#1272339307'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-27T03:35:07+00:00">Apr 27, 2010 03:35 AM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1272339307">&nbsp;</a></div><pre>We have the developer of our job forwarding gateway looking at this issue.
We&#39;ve reproduced it with our own tests and expect to be able
to fix it eventually.

Steve Timm

On Tue, 27 Apr 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1272333907'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-27T02:05:07+00:00">Apr 27, 2010 02:05 AM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1272333907">&nbsp;</a></div><pre>I&#39;ve had to comment out the GlobusRSL entry that Steve advised using&#58;

globusrsl = (gluerequirements=(requirements &#39;GlueCEInfoContactString =!=
&#92;&#34;cmsosgce3.fnal.gov/jobmanager-condor&#92;&#34;&#39;))

Steve suggested there may be some way to get OSGMM to add this
automatically, but we haven&#39;t heard back, so I&#39;ve had to remove it for
the time being.

I think we&#39;re still getting some failures at&#58; USCMS-FNAL-WC1-CE3
cmsosgce3.fnal.gov, however not many.  In the last few days we had two
big jobs run, and their stats are&#58;

Job A&#58;
failures&#58;
76 USCMS-FNAL-WC1-CE3
success&#58;
1 FNAL_CDFOSG_3
2 FNAL_CDFOSG_1
2 FNAL_CDFOSG_2
3 FNAL_CDFOSG_4
56 FNAL_DZEROOSG_1
81 FNAL_GPGRID_2
91 FNAL_GPGRID_1
2660 USCMS-FNAL-WC1-CE3

Job B&#58;
failures&#58;
16 USCMS-FNAL-WC1-CE3
success&#58;
3 FNAL_CDFOSG_2
4 FNAL_CDFOSG_1
4 FNAL_CDFOSG_3
5 FNAL_CDFOSG_4
85 FNAL_DZEROOSG_1
<div id='show_621471154' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_621471154'>86 FNAL_GPGRID_2
217 FNAL_GPGRID_1
525 FNAL_GPGRID_3
1219 USCMS-FNAL-WC1-CE3

Ian
</div><script type='text/javascript'>
        $('#show_621471154').click(function() {
            $('#detail_621471154').slideDown("normal");
            $('#show_621471154').hide();
            $('#hide_621471154').show();
        });
        $('#hide_621471154').click(function() {
            $('#detail_621471154').slideUp();
            $('#hide_621471154').hide();
            $('#show_621471154').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8184#1271878921'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-21T19:42:01+00:00">Apr 21, 2010 07:42 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1271878921">&nbsp;</a></div><pre>Thanks Ian,

I will push this out a week and we will look for you update on this matter.

Regards,
Christopher P.
GOC</pre></div><div class='update_description'><i onclick="document.location='8184#1271343726'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-15T15:02:06+00:00">Apr 15, 2010 03:02 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1271343726">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Has any progress been made on this issue? Just doing the weekly ping for information.</font>

Steve has confirmed it is a bug in how file staging works with the FNAL
job router.  He has supplied us with some GlobusRSL that we can put into
our ClassAd to avoid jobs going to the router being sent to the
problematic cluster until he has time to fix the issue.

Although we are speaking with Steve outside of the GOC ticket to resolve
this, if it is OK with you to keep this ticket open, that is probably
best -- we monitor our GOC tickets on about a weekly basis and will let
you know when it is resolved.

Ian</pre></div><div class='update_description'><i onclick="document.location='8184#1271337247'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-15T13:14:07+00:00">Apr 15, 2010 01:14 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1271337247">&nbsp;</a></div><pre>Hi
Yes--we have identified the cause of this problem but we do
not have a fix for it yet.  There is something wrong with the
way that FNAL_FERMIGRID forwards jobs that transfer input
files to one of its subclusters (cmsosgce3.fnal.gov).  We have
given Ian a workaround so that inbound sbgrid jobs to
FNAL_FERMIGRID won&#39;t go to this cluster in the meantime, until
we get it fixed.

We  believe there will be a minor change needed to our job
forwarding gateway script, we just have to figure out what.

Steve Timm

On Thu, 15 Apr 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1271335449'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-15T12:44:09+00:00">Apr 15, 2010 12:44 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1271335449">&nbsp;</a></div><pre>This is an automatic reply.
.
I am away from the lab on business travel
If you have any need of help with FermiGrid please
contact the Service Desk at <a href='http&#58;//servicedesk.fnal.gov' target='_blank' rel='nofollow'>http&#58;//servicedesk.fnal.gov</a>,
(630) 840-2345.  If human contact is necessary, please
contact my supervisor, Keith Chadwick.
I will be checking E-mail intermittently during this time.
I will return to the lab on April 16, 2010

Steve Timm</pre></div><div class='update_description'><i onclick="document.location='8184#1271335337'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-15T12:42:17+00:00">Apr 15, 2010 12:42 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1271335337">&nbsp;</a></div><pre>Steve/Ian,

Has any progress been made on this issue? Just doing the weekly ping for information.

Thanks,

Kyle</pre></div><div class='update_description'><i onclick="document.location='8184#1270728234'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-08T12:03:54+00:00">Apr 8, 2010 12:03 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1270728234">&nbsp;</a></div><pre>Steve,

Just doing the weekly ping to see if there have been any updates.

Kyle</pre></div><div class='update_description'><i onclick="document.location='8184#1270182007'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-02T04:20:07+00:00">Apr 2, 2010 04:20 AM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1270182007">&nbsp;</a></div><pre>I&#39;ve had E-mail conversations with Ian today.  We have narrowed down what
is causing the problem, but it is still happening.  We&#39;ll continue to
diagnose.

Steve

On Thu, 1 Apr 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1270160078'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-01T22:14:38+00:00">Apr 1, 2010 10:14 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1270160078">&nbsp;</a></div><pre>Steve, do you have any updates/responses to Peter&#39;s last entry?

Kyle</pre></div><div class='update_description'><i onclick="document.location='8184#1269617346'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-26T15:29:06+00:00">Mar 26, 2010 03:29 PM UTC</time> by <b>doherty@....</b><a class="anchor" name="1269617346">&nbsp;</a></div><pre>Hello,
The last batch of jobs we ran seemed to run successfully at
FNAL_FERMIGRID.
However I don&#39;t have information available as to which subcluster they
got routed to by the Fermi router, as our job script isn&#39;t providing
that fine-grained debugging information to me, so the routing is
happening transparently.

I know USCMS-FNAL-WC1 got restructured in the past week because we can
no longer submit jobs directly there, and it&#39;s now advertising 4 CEs
to ReSS.  So I don&#39;t know if FNAL_FERMIGRID can even route our jobs
there internally, or if we&#39;ve totally lost support at that cluster.

Cheers,
Peter</pre></div><div class='update_description'><i onclick="document.location='8184#1269527166'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-25T14:26:06+00:00">Mar 25, 2010 02:26 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1269527166">&nbsp;</a></div><pre>GOC&#58; Please CC Peter Doherty on this ticket. Peter Doherty
&#60;doherty@....&#62;

Alain,

Peter will have to get back to you on that.  I don&#39;t think we&#39;ve had
this problem recently, but I don&#39;t have the details available about
where our recent jobs have been running, and if they have been routed to
the problematic FNAL cluster.

Ian

On 3/25/10 9&#58;42 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1269524647'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-25T13:44:07+00:00">Mar 25, 2010 01:44 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1269524647">&nbsp;</a></div><pre>This is an automatic reply.

I am away from the lab on vacation.
If you have any need of help with FermiGrid please
contact the Service Desk at <a href='http&#58;//servicedesk.fnal.gov' target='_blank' rel='nofollow'>http&#58;//servicedesk.fnal.gov</a>,
(630) 840-2345.  If human contact is necessary, please
contact my supervisor, Keith Chadwick.
I will be checking E-mail intermittently during this time.
I will return to the lab on JMarch 29, 2010

Steve Timm</pre></div><div class='update_description'><i onclick="document.location='8184#1269524525'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-25T13:42:05+00:00">Mar 25, 2010 01:42 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1269524525">&nbsp;</a></div><pre>Greetings Ian,

I was curious if Peter was able to confirm if the problem resolved itself?  Any current updates you can provide us is greatly appreciated.

Thanks,

-Alain Deximo</pre></div><div class='update_description'><i onclick="document.location='8184#1269022446'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-19T18:14:06+00:00">Mar 19, 2010 06:14 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1269022446">&nbsp;</a></div><pre>I have to turn this one over to Peter.  I&#39;ve pointed him at all my
recent jobs so he can check what kind of success/failure rates we&#39;ve
been getting at the various FNAL clusters.  Please leave the ticket open
until Peter can confirm if the problem has resolved itself.

Ian

On 3/19/10 2&#58;08 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1269022087'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-19T18:08:07+00:00">Mar 19, 2010 06:08 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1269022087">&nbsp;</a></div><pre>No we didn&#39;t get to discuss the problems at the all hands meeting,
but I haven&#39;t seen any of their jobs have the problem described in since
the all hands meeting either.  Probably time to check with Ian and
Peter and see if they still want more help.

Steve

On Fri, 19 Mar 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1269020918'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-19T17:48:38+00:00">Mar 19, 2010 05:48 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1269020918">&nbsp;</a></div><pre>Steve,

Just pinging you again...Did anything come out of the discussion at the AHM?

Kyle</pre></div><div class='update_description'><i onclick="document.location='8184#1268432276'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-12T22:17:56+00:00">Mar 12, 2010 10:17 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1268432276">&nbsp;</a></div><pre>Steve,

Did anything come out of the discussion at the AHM?

Kyle</pre></div><div class='update_description'><i onclick="document.location='8184#1268078706'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-08T20:05:06+00:00">Mar 8, 2010 08:05 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1268078706">&nbsp;</a></div><pre>Ian is at Fermilab for OSG all hands and I am talking to him
and peter during the various breaks to see if we can get this sorted out.

Steve

On Mon, 8 Mar 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1268077977'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-08T19:52:57+00:00">Mar 8, 2010 07:52 PM UTC</time> by <b>echism</b><a class="anchor" name="1268077977">&nbsp;</a></div><pre>Ian,

Would you like to continue testing and investigating this problem, or are you satisfied with the results?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='8184#1267794011'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-05T13:00:11+00:00">Mar 5, 2010 01:00 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1267794011">&nbsp;</a></div><pre>On 3/4/10 7&#58;36 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; I have just submitted 10k jobs.  From previous experience, lots of them</font>
<font color='#7F7E6F'>&#62; will end up at FNAL.  From a grid perspective, they should look</font>
<font color='#7F7E6F'>&#62;</font>

about 2000 running at FNAL right now.    Out of this run, we&#39;ve had
about 3000 jobs finish successfully, and 500 which produced errors.  Out
of the errors, about 100 did not return anything, and the rest were
mostly from BNL&#58;

1 DEBUG NO PROXY FOR SITE [Prairiefire]
10 PROXY using squid [newman.ultralight.org&#58;3128]
10 PROXY using squid [squid.fnal.gov&#58;3128]
382 PROXY using squid [squid.sec.bnl.local&#58;3128]

It looks like whatever you changed has largely solved the problem.  The
10 jobs that failed *mostly* ran properly.  It is possible that the
problem ones may be due to issues on our end, not yours.  I haven&#39;t
looked into the BNL problems, but we have had 500 jobs finish there
successfully (anyway, that doesn&#39;t affect you).

I don&#39;t have time now to look into it in more detail, but inside the
grid job we run a sequence of smaller jobs.  We are currently taking the
status of the last internal job as the status of the job set.  It
appears there are a few cases where the internal job has bad parameters
or input data, and thus results in the entire grid job being marked as
failed, even though earlier sub-jobs ran successfully.  The cause of
these failures are unclear.  If I had to guess, I&#39;d say it is probably
due to some data transfer problem.  Each internal job individually
fetches its input data via curl.  In the few cases where we&#39;ve pushed
for 100% of our 95k &#34;internal&#34; jobs, we&#39;ve always gotten there, so we
don&#39;t have any permanently corrupted data on our end.

Ian</pre></div><div class='update_description'><i onclick="document.location='8184#1267749366'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-05T00:36:06+00:00">Mar 5, 2010 12:36 AM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1267749366">&nbsp;</a></div><pre>I have just submitted 10k jobs.  From previous experience, lots of them
will end up at FNAL.  From a grid perspective, they should look
identical to all the other jobs we&#39;ve been running over the last several
weeks.  You can actually &#34;watch&#34; the jobs from our end, if you like&#58;

<a href='http&#58;//abitibi.sbgrid.org/' target='_blank' rel='nofollow'>http&#58;//abitibi.sbgrid.org/</a>~webportal/phaser/clean/2vlj-2nx5q2/group

The error jobs will be  placed in a directory &#34;error/2vlj-#####-TIMESTAMP&#34;.

If you see running jobs, then the details for them are found in the
&#34;nodes&#34; directory.  Don&#39;t try browsing there -- there are 50k files in
that directory.  Your browser and/or our webserver will get upset.  You
have to &#34;infer&#34; the url.  For 2vlj-01234, you can find files in&#58;

<a href='http&#58;//abitibi.sbgrid.org/' target='_blank' rel='nofollow'>http&#58;//abitibi.sbgrid.org/</a>~webportal/phaser/clean/2vlj-2nx5q2/group/nodes/2vlj-01234.{out,err,output.zip,results.dat}

Logging is aggregated centrally for all nodes in the DAG.  This avoids
having stacks of file handles open, but makes it harder to find details
for one particular job.  If you want DAG details, they are in&#58;

<a href='http&#58;//abitibi.sbgrid.org/' target='_blank' rel='nofollow'>http&#58;//abitibi.sbgrid.org/</a>~webportal/phaser/clean/2vlj-2nx5q2/group/.dag

Ian

On 3/4/10 4&#58;18 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1267737487'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-04T21:18:07+00:00">Mar 4, 2010 09:18 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1267737487">&nbsp;</a></div><pre>Peter and Ian --
I think I know what is happening with the transfer input file,
but to be sure I need you to submit some more jobs of the type
that were sent on 3/3/10, as opposed to the type you sent
today which appeared to not use any transfer_input_files and
appeared to be just fine.

The sequence happens--we receive the sbgrid job on fermigridosg1.fnal.gov,
we forward it to the CMS cluster, the file does not get staged
correctly, the job holds with globus error 155 (internally where
the message doesn&#39;t get sent back to your client) and then we
remove the job, and what you see is that &#34;the system cancelled the job&#34;.

We have been auto-removing these jobs that hold with error 155 so
that no manual intervention is necessary.  I have now suspended this
feature of auto-removal after hold so we can get to the bottom of this.

Let me know when you&#39;ve sent more jobs.

Steve

On Thu, 4 Mar 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1267726327'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-04T18:12:07+00:00">Mar 4, 2010 06:12 PM UTC</time> by <b>Peter Doherty</b><a class="anchor" name="1267726327">&nbsp;</a></div><pre>Hi Steve,

Here&#39;s the info from the condor log file.  One job from last week, and
one from yesterday.

Thanks!
Peter

...
017 (545472.000.000) 02/25 05&#58;36&#58;11 Job submitted to Globus
RM-Contact&#58; fermigridosg1.fnal.gov/jobmanager-condor
JM-Contact&#58; <a href='https&#58;//fermigridosg1.fnal.gov&#58;46913/27459/1267094166/' target='_blank' rel='nofollow'>https&#58;//fermigridosg1.fnal.gov&#58;46913/27459/1267094166/</a>
Can-Restart-JM&#58; 1
...
027 (545472.000.000) 02/25 05&#58;36&#58;11 Job submitted to grid resource
GridResource&#58; gt2 fermigridosg1.fnal.gov/jobmanager-condor
GridJobId&#58; gt2 fermigridosg1.fnal.gov/jobmanager-condor <a href='https&#58;//fermigridosg1.fnal.gov&#58;46913/27459/1267094166/' target='_blank' rel='nofollow'>https&#58;//fermigridosg1.fnal.gov&#58;46913/27459/1267094166/</a>

...
001 (545472.000.000) 02/25 05&#58;39&#58;06 Job executing on host&#58; gt2
fermigridosg1.fnal.gov/jobmanager-condor

...

005 (545472.000.000) 02/25 05&#58;40&#58;05 Job terminated.
(1) Normal termination (return value 0)
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Run Remote Usage
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Run Local Usage
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Total Remote Usage
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Total Local Usage
0  -  Run Bytes Sent By Job
0  -  Run Bytes Received By Job
0  -  Total Bytes Sent By Job
0  -  Total Bytes Received By Job

<div id='show_478142392' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_478142392'>And from yesterday&#58;

...
017 (684680.000.000) 03/03 15&#58;56&#58;51 Job submitted to Globus
RM-Contact&#58; fermigridosg1.fnal.gov/jobmanager-condor
JM-Contact&#58; <a href='https&#58;//fermigridosg1.fnal.gov&#58;46887/22646/1267649806/' target='_blank' rel='nofollow'>https&#58;//fermigridosg1.fnal.gov&#58;46887/22646/1267649806/</a>
Can-Restart-JM&#58; 1

...
027 (684680.000.000) 03/03 15&#58;56&#58;51 Job submitted to grid resource
GridResource&#58; gt2 fermigridosg1.fnal.gov/jobmanager-condor
GridJobId&#58; gt2 fermigridosg1.fnal.gov/jobmanager-condor <a href='https&#58;//fermigridosg1.fnal.gov&#58;46887/22646/1267649806/' target='_blank' rel='nofollow'>https&#58;//fermigridosg1.fnal.gov&#58;46887/22646/1267649806/</a>

...
001 (684680.000.000) 03/03 15&#58;58&#58;45 Job executing on host&#58; gt2
fermigridosg1.fnal.gov/jobmanager-condor

...
005 (684680.000.000) 03/03 15&#58;59&#58;23 Job terminated.
(1) Normal termination (return value 0)
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Run Remote Usage
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Run Local Usage
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Total Remote Usage
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Total Local Usage
0  -  Run Bytes Sent By Job
0  -  Run Bytes Received By Job
0  -  Total Bytes Sent By Job
0  -  Total Bytes Received By Job
</div><script type='text/javascript'>
        $('#show_478142392').click(function() {
            $('#detail_478142392').slideDown("normal");
            $('#show_478142392').hide();
            $('#hide_478142392').show();
        });
        $('#hide_478142392').click(function() {
            $('#detail_478142392').slideUp();
            $('#hide_478142392').hide();
            $('#show_478142392').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8184#1267723807'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-04T17:30:07+00:00">Mar 4, 2010 05:30 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1267723807">&nbsp;</a></div><pre>I had asked Ian for timestamps previously, and he gave them.
But what I really wanted in addition to the timestamp was also
the GridJobID from a condor-g submission log of the job that
failed, as well as the time.  Would it be possible to supply
that for a recent failure?

There could be something wrong with the input file getting transferred
too in addition to the problems with APP

Steve

On Thu, 4 Mar 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1267723448'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-04T17:24:08+00:00">Mar 4, 2010 05:24 PM UTC</time> by <b>Peter Doherty</b><a class="anchor" name="1267723448">&nbsp;</a></div><pre>Hi Steve,

That doesn&#39;t match with what we&#39;re seeing.  The wrapper script Ian is
using is capturing some info for us to debug things, and after the
script runs, it does an &#96;ls&#96; of the directory it&#39;s in, and the input
file isn&#39;t there.  It seems to be getting lost somewhere in between.
But if Condor knew that the file didn&#39;t transfer, it should generate
an error before the executable script runs, but it isn&#39;t doing that.

Thanks,
Peter</pre></div><div class='update_description'><i onclick="document.location='8184#1267715528'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-04T15:12:08+00:00">Mar 4, 2010 03:12 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1267715528">&nbsp;</a></div><pre>I have attached a sample script--if you include the globusrsl
line that is in this script, your jobs that you submit to
FNAL_FERMIGRID will only run on the nodes which have access to
the shared $OSG_APP.

Or, as I mentioned previously, you can also pre-load your
application into the $OSG_APP on cmsosgce3.fnal.gov
and then your application will be visible from all nodes of FermiGrid
including the 8000-some slots that are behind cmsosgce3.fnal.gov.

To be clear--the problem is not a input file missing a transfer,
but the files in OSG_APP not being where you expect them to be.

Does this answer your question?

Steve Timm

On Thu, 4 Mar 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8184#1267714626'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-04T14:57:06+00:00">Mar 4, 2010 02:57 PM UTC</time> by <b>Peter Doherty</b><a class="anchor" name="1267714626">&nbsp;</a></div><pre>Hi Steve,

Do you have a suggested fix or workaround for why the Condor input
file is being lost en route?

Thanks,
Peter</pre></div><div class='update_description'><i onclick="document.location='8184#1267200784'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-02-26T16:13:04+00:00">Feb 26, 2010 04:13 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1267200784">&nbsp;</a></div><pre>From&#58; owner-goc@.... [mailto&#58;owner-goc@....] On Behalf Of Ian Stokes-Rees
Sent&#58; Friday, February 26, 2010 11&#58;00 AM
To&#58; Fermilab Service Desk
Cc&#58; fermigrid-help@....; cd-srv-bridge@....; Grid Operations Center
Subject&#58; Re&#58; INC000000026709 Open Science Grid&#58; Resource Specific Issue on FNAL_FERMIGRID ISSUE=8184 PROJ=71

Steve,

On 2/25/10 10&#58;48 AM, Fermilab Service Desk wrote&#58;
<font color='#7F7E6F'>&#62; If you can give us timestamp of some of the jobs that got held with</font>
<font color='#7F7E6F'>&#62; the missing input stage file we could figure out for sure.</font>

Here are some timestamps in EST&#58;

2vlj-00029_20100225T05h40
2vlj-00046_20100224T20h16
2vlj-00051_20100225T09h48
2vlj-00097_20100224T21h24
2vlj-00100_20100224T20h16
2vlj-00104_20100225T06h35
2vlj-00107_20100225T06h24
2vlj-00117_20100224T21h38
2vlj-00160_20100225T00h26
2vlj-00168_20100224T21h24
2vlj-00234_20100224T21h38
2vlj-00261_20100225T05h40
2vlj-00264_20100224T20h22
2vlj-00277_20100224T20h22

These are generated once the failed job is reported back to our submit node, so subtract a few minutes to get the timestamp for the job start.

Or if you are OK with seconds since the epoch, the time stamps from within the jobs themselves can be found in this list&#58;

SKIPPING RSYNC latest&#58; 1267092892 cmsosgce3.fnal.gov USCMS-FNAL-WC1 DONE 1267094211 SKIPPING RSYNC latest&#58; 1267060219 cmsosgce3.fnal.gov USCMS-FNAL-WC1 DONE 1267060222 SKIPPING RSYNC latest&#58; 1267108693 cmsosgce3.fnal.gov USCMS-FNAL-WC1 DONE 1267109057 SKIPPING RSYNC latest&#58; 1267063849 cmsosgce3.fnal.gov USCMS-FNAL-WC1 DONE 1267064456 SKIPPING RSYNC latest&#58; 1267060219 cmsosgce3.fnal.gov USCMS-FNAL-WC1 DONE 1267060274 SKIPPING RSYNC latest&#58; 1267096507 cmsosgce3.fnal.gov USCMS-FNAL-WC1 DONE 1267097514 SKIPPING RSYNC latest&#58; 1267096507 cmsosgce3.fnal.gov USCMS-FNAL-WC1 DONE 1267096827 SKIPPING RSYNC latest&#58; 1267063849 cmsosgce3.fnal.gov USCMS-FNAL-WC1 DONE 1267065295 SKIPPING RSYNC latest&#58; 1267074707 cmsosgce3.fnal.gov USCMS-FNAL-WC1 DONE 1267075395 SKIPPING RSYNC latest&#58; 1267063849 cmsosgce3.fnal.gov USCMS-FNAL-WC1 DONE 1267064456 SKIPPING RSYNC latest&#58; 1267063849 cmsosgce3.fnal.gov USCMS-FNAL-WC1 DONE 1267065295 SKIPPING RSYNC latest&#58; 1267092892 cmsosgce3.fnal.gov USCMS-FNAL-WC1 DONE 1267094211 SKIPPING RSYNC latest&#58; 1267060219 cmsosgce3.fnal.gov USCMS-FNAL-WC1 DONE 1267060575 SKIPPING RSYNC latest&#58; 1267060219 cmsosgce3.fnal.gov USCMS-FNAL-WC1 DONE 1267060575

<div id='show_1550292592' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1550292592'><font color='#7F7E6F'>&#62; In order of likelihood here are the likely problems&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 1) It appears that once your jobs get to FNAL_FERMIGRID about half of</font>
<font color='#7F7E6F'>&#62; them are getting forwarded on to our cmsosgce3.fnal.gov (CMS Tier 1)</font>
<font color='#7F7E6F'>&#62; cluster. This does NOT share OSG_APP with the rest of FermiGrid.</font>
<font color='#7F7E6F'>&#62; However, it does have a different OSG_APP which you can load directly</font>
<font color='#7F7E6F'>&#62; from the outside by submitting fork jobs or gridftp&#39;s to</font>
<font color='#7F7E6F'>&#62; cmsosgce3.fnal.gov. That is probably what happened to most of the jobs</font>
<font color='#7F7E6F'>&#62; that failed.</font>
<font color='#7F7E6F'>&#62; I show that most of those jobs failed after one second.</font>
<font color='#7F7E6F'>&#62; Alternatively you can add a globusrsl argument to your job so that</font>
<font color='#7F7E6F'>&#62; jobs will not match to the CMS tier 1 from FermiGrid, let us know if</font>
<font color='#7F7E6F'>&#62; you need details on that.</font>

That is good to know.  Our pre-staging system runs rsync in $OSG_APP and $OSG_DATA for each of the following FNAL &#34;resources&#34;&#58;

cmsosgce3.fnal.gov&#58;2119/jobmanager-condor
fermigridosg1.fnal.gov&#58;2119/jobmanager-condor
fnpcosg1.fnal.gov&#58;2119/jobmanager-condor

but using the &#34;fork&#34; job manager instead, in order to run on the CE.

The issue is that the file that is missing is not taken from $OSG_APP or $OSG_DATA.  It is a file that is pulled in by merging this classad line&#58;

Transfer_input_files    = $(varInFiles)

with this VARS entry in the DAG node descriptor&#58;

VARS        2vlj-00028 varInFiles=&#34;2vlj-00029&#34;

I have confirmed the file 2vlj-00028 exists and is readable.  And as I said, over 3000 other jobs from the same job set (of about 10k jobs) ran successfully and got their &#34;Transfer_input_file&#34; file.

<font color='#7F7E6F'>&#62; 2) It can also happen that your submit node got overloaded. If that</font>
<font color='#7F7E6F'>&#62; was the case you would be seeing globus error 10, 17, or 43 when the</font>
<font color='#7F7E6F'>&#62; job got held.</font>

We&#39;re not seeing these errors at FNAL.

<font color='#7F7E6F'>&#62; Does this answer your question?</font>

It is still unclear to me why jobs which get routed to cmsosgce3.fnal.gov fail to transfer the input file.  Within our job script, we do move to a scratch directory, but we copy all files from the &#34;job start&#34; directory to the scratch directory, and we also have logging enabled that shows us what files are in various directories and various points.  The listing for the &#34;initial start directory&#34; for the first job in the list above is&#58;

INITIAL START DIR [/storage/local/data1/condor/execute/dir_18031]total
144            drwxr-xr-x  3 sbgrid sbgrid  4096 Feb 25 04&#58;36
./drwxrwxrwt 10 root   root    4096 Feb 25 04&#58;36 ../
lrwxrwxrwx  1 sbgrid sbgrid    67 Feb 25 04&#58;36 2vlj-00029.tmp_dir -&#62;
/storage/local/data1/condor/execute/dir_18031/job-sbgrid-2vlj-00029/
-rwxr-xr-x  1 sbgrid sbgrid 47047 Feb 25 04&#58;33
condor_exec.exe*-rw-r--r--  1 sbgrid sbgrid  1403 Feb 25 04&#58;36
_condor_stderr -rw-r--r--  1 sbgrid sbgrid     0 Feb 25 04&#58;36 _condor_stdout
-rw-r--r--  1 sbgrid sbgrid  5865 Feb 25 04&#58;36 .job.ad drwxr-xr-x  3 sbgrid sbgrid  4096 Feb 25 04&#58;36 job-sbgrid-2vlj-00029/
-rw-r--r--  1 sbgrid sbgrid  5600 Feb 25 04&#58;36 .machine.ad -rwxr-xr-x  1 sbgrid sbgrid 47047 Feb 25 04&#58;36 osg_wrap1*
-rw-------  1 sbgrid sbgrid 10855 Feb 25 04&#58;33 x509_up

Here are the other details which may help pinpoint this specific job&#58;

START 1267094211
START_HUMAN Thu Feb 25 04&#58;36&#58;51 CST 2010 WHO
sbgrid@....&#58;/storage/local/data1/condor/execute/dir_18031/job-sbgrid-2vlj-00029
OSG_HOSTNAME cmsosgce3.fnal.gov

It looks like you must custom-set OSG_WN_TMP to the directory where the job starts.  I hadn&#39;t considered that possibility -- I had assumed either OSG_WN_TMP would be somewhere other than the initial directory for the job, or not be defined, in which case we create a local scratch directory for the job in /tmp/job-sbgrid-XXXXX.  It is possible that is confusing things.  Again, strange that this only happens at the cmsosgce3.fnal.gov site.

I&#39;ll continue to monitor the jobs and see where we get errors.  We previously had been at &#60;10% error rate at FNAL, so when it suddenly jumped to 50% I immediately looked into it.  We haven&#39;t had this problem before, so I&#39;m certainly open to the possibility that it is something we are doing differently (our run scripts and wrapper script are constantly evolving).

Ian

--
Ian Stokes-Rees, PhD                       W&#58; <a href='http&#58;//hkl.hms.harvard.edu' target='_blank' rel='nofollow'>http&#58;//hkl.hms.harvard.edu</a>
ijstokes@....               T&#58; +1 617 432-5608 x75
NEBioGrid, Harvard Medical School          C&#58; +1 617 331-5993
</div><script type='text/javascript'>
        $('#show_1550292592').click(function() {
            $('#detail_1550292592').slideDown("normal");
            $('#show_1550292592').hide();
            $('#hide_1550292592').show();
        });
        $('#hide_1550292592').click(function() {
            $('#detail_1550292592').slideUp();
            $('#hide_1550292592').hide();
            $('#show_1550292592').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8184#1267123958'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-02-25T18:52:38+00:00">Feb 25, 2010 06:52 PM UTC</time> by <b>echism</b><a class="anchor" name="1267123958">&nbsp;</a></div><pre>Steve,

Alain is  a new-ish staffer here. The assignees GRATIA and Fermilab have the same email address (to get to footprints remedy)... if you will notice no assignees have been deleted throughout this ticket, but the footprints remedy assignee will sometimes display as USCMS, Fermilab, GRATIA, FermilabMu2e, ad nauseam. It doesn&#39;t affect the ticket exchange, only the destination VO should. Not to divert from the issue here, just clarifying.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='8184#1267116072'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-02-25T16:41:12+00:00">Feb 25, 2010 04:41 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1267116072">&nbsp;</a></div><pre>I responded to this ticket from within our Remedy interface but somehow
the reply didn&#39;t get there.  Here&#39;s my reply again directly

Ian--there could be two or three things going on.
If you can give us timestamp of some of the jobs that
got held with the missing input stage file we could figure out
for sure.

In order of likelihood here are the likely problems&#58;

1) It appears that once your jobs get to FNAL_FERMIGRID
about half of them are getting forwarded on to our
cmsosgce3.fnal.gov (CMS Tier 1) cluster. This does
NOT share OSG_APP with the rest of FermiGrid.
However, it does have a different OSG_APP which
you can load directly from the outside by submitting
fork jobs or gridftp&#39;s to cmsosgce3.fnal.gov. That is
probably what happened to most of the jobs that failed.
I show that most of those jobs failed after one second.
Alternatively you can add a globusrsl argument to your job so that
jobs will not match to the CMS tier 1 from FermiGrid, let
us know if you need details on that.

2) It can also happen that your submit node got overloaded. If
that was the case you would be seeing globus error 10, 17, or 43
when the job got held.

Does this answer your question?

Steve Timm

----------------------------------

PS--I see that &#34;Alain Deximo&#34; whomever he is reassigned the ticket
to GRATIA, that does not make any sense at all. The ticket
<div id='show_2091993117' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2091993117'>was correctly assigned to Fermilab SC in the first place.

Steve Timm

On Thu, 25 Feb 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_2091993117').click(function() {
            $('#detail_2091993117').slideDown("normal");
            $('#show_2091993117').hide();
            $('#hide_2091993117').show();
        });
        $('#hide_2091993117').click(function() {
            $('#detail_2091993117').slideUp();
            $('#hide_2091993117').hide();
            $('#show_2091993117').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8184#1267114946'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-02-25T16:22:26+00:00">Feb 25, 2010 04:22 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1267114946">&nbsp;</a></div><pre>Ticket has been routed to the proper contacts.  Updating the Next Action Deadline and awaiting for further updates.</pre></div><div class='update_description'><i onclick="document.location='8184#1267111598'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-02-25T15:26:38+00:00">Feb 25, 2010 03:26 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1267111598">&nbsp;</a></div><pre>For the past 12 hours we have been running around 3000 concurrent jobs at about a dozen sites, each lasting on the order of 3-5 hours (if they run properly).  In total we&#39;ve had about 3500 successful jobs at 10 sites, however there have also been about 6200 failed jobs in total.  These jobs do rely on pre-staged binaries in $OSG_APP.

We have submitted about 4000 jobs to FNAL, half the jobs have run fine, and the other half have failed because one of the &#34;stage in&#34; files has not, apparently, been present.  Is this due to a problem at FNAL, or is it a problem with the Condor &#34;transfer_input_files&#34; mechanism, possibly with our submit node being overwhelmed?

I am assuming all FNAL sites are equivalent for OSG-based submission, and to the best of my knowledge, FNAL_FERMIGRID is getting most of the jobs we submit, however it appears some are also going to FNAL_GPGRID_1.  It is a fair bit of work to get the exact site name, but let me know if you need these stats broken down by submission site.</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F8184">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 8184});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
