<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[9245] MyOSG Bugs / Requests</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=9245" method="post">
<div class="page-header">
    <h3><span class="muted">9245</span> / MyOSG Bugs / Requests</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Will Maier</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Waiting for user comment / release</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2011-08-23</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Scott Teige <span class="muted"> / OSG Operations Infrastructure</span></div><div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/9245", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/9245?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/9245?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20MyOSG%20Bugs%20%2F%20Requests%20ISSUE%3D9245%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='9245#1314367129'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-26T13:58:49+00:00">Aug 26, 2011 01:58 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1314367129">&nbsp;</a></div><pre>the update has been released. closing this ticket.</pre></div><div class='update_description'><i onclick="document.location='9245#1313514925'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-16T17:15:25+00:00">Aug 16, 2011 05:15 PM UTC</time><a class="anchor" name="1313514925">&nbsp;</a></div><pre>I just released a new version 1.0.2-4 with the changes.
It will be available at <a href='http&#58;//t2.unl.edu/store/repos/nebraska/5/nebraska/x86_64/' target='_blank' rel='nofollow'>http&#58;//t2.unl.edu/store/repos/nebraska/5/nebraska/x86_64/</a> by next hour.
Thanks,
Ashu

-- by Ashu Guru</pre></div><div class='update_description'><i onclick="document.location='9245#1313511275'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-16T16:14:35+00:00">Aug 16, 2011 04:14 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1313511275">&nbsp;</a></div><pre>Ashu, were you able to make this change? (extending NAD to next week)</pre></div><div class='update_description'><i onclick="document.location='9245#1312311872'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-02T19:04:32+00:00">Aug 2, 2011 07:04 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1312311872">&nbsp;</a></div><pre>I have made requested changes.

Ashu, can you update the RPM (OSG_Display_Data) so that its default /etc/cron.d/osg_display.cron will use */15 instead of */10? Also, for /etc/osg_display/osg_display.conf, update the timeout value to 600 seconds.

Thanks,
Soichi</pre></div><div class='update_description'><i onclick="document.location='9245#1312228011'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-01T19:46:51+00:00">Aug 1, 2011 07:46 PM UTC</time><a class="anchor" name="1312228011">&nbsp;</a></div><pre>Looks fine to me.  Go for it.

-- by Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='9245#1312227909'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-01T19:45:09+00:00">Aug 1, 2011 07:45 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1312227909">&nbsp;</a></div><pre>Brian,

Scott brought this up to the change management and following is the suggested values. Will you sign off this change, and I will make it happen on our next release.

[Current]
Refresh every 10 minutes
Script time out in 5 minutes
RSV status freshness threshold 15 minutes

[New]
Refresh every 15 minutes
Script timeout in 10 minutes
RSV status freshness threshold 30 minutes

Soichi</pre></div><div class='update_description'><i onclick="document.location='9245#1311695860'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-07-26T15:57:40+00:00">Jul 26, 2011 03:57 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1311695860">&nbsp;</a></div><pre>(CC-ing Scott / Rob)

Scott,

With no objection from Ashu, Brian, please propose following change to display.grid.iu.edu&#39;s update frequencies.

[Current]
Refresh every 10 minutes
Script time out in 5 minutes

[New]
Refresh every 60 minutes
Script timeout in 45 minutes

Thanks,
soichi</pre></div><div class='update_description'><i onclick="document.location='9245#1309889927'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-07-05T18:18:47+00:00">Jul 5, 2011 06:18 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1309889927">&nbsp;</a></div><pre>I still haven&#39;t found any solution to this issue. At this point, I&#39;d like to suggest updating our OSG graph every 1 hour, and set the SQL timeout to be 45 minutes in order to *live with* the type of environment that we are in currently.

Any objections?</pre></div><div class='update_description'><i onclick="document.location='9245#1305571272'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-05-16T18:41:12+00:00">May 16, 2011 06:41 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1305571272">&nbsp;</a></div><pre>Extending NAD to end of June - hoping that Ashu could take a look at this issue by then.</pre></div><div class='update_description'><i onclick="document.location='9245#1303497490'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-04-22T18:38:10+00:00">Apr 22, 2011 06:38 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1303497490">&nbsp;</a></div><pre>(Removing some assignees)

I&#39;ve chatted with Ashu on this issue (display alert), and asked if he could take a fresh look.</pre></div><div class='update_description'><i onclick="document.location='9245#1298472739'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-23T14:52:19+00:00">Feb 23, 2011 02:52 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1298472739">&nbsp;</a></div><pre>I&#39;ve removed the &#34;FORCE INDEX&#34; on display1.grid.iu.edu as part of yesterday&#39;s upgrade..

However, it looks like it didn&#39;t make enough difference to prevent the same old timeout issue
<font color='#7F7E6F'>&#62; <a href='http&#58;//tinyurl.com/4pkcqwd' target='_blank' rel='nofollow'>http&#58;//tinyurl.com/4pkcqwd</a></font>

I guess I have to keep working on this..</pre></div><div class='update_description'><i onclick="document.location='9245#1298388907'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-22T15:35:07+00:00">Feb 22, 2011 03:35 PM UTC</time> by <b>aguru2@....</b><a class="anchor" name="1298388907">&nbsp;</a></div><pre>After discussion with Soichi and a couple of tests the force indexes
referring to the column VOcorrid were removed for two queries (fileL
gratia_datasource.py, line number 323 and 473 ).
The new version is now released via koji as OSG_Display_Data-1.0.2-3
Thanks,
Ashu

From&#58;
Open Science Grid FootPrints &#60;osg@....&#62;
To&#58;
&#60;aguru2@....&#62;
Date&#58;
02/21/2011 08&#58;33 AM
Subject&#58;
Open Science Grid&#58; MyOSG Bugs / Requests ISSUE=9245 PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='9245#1298298733'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-21T14:32:13+00:00">Feb 21, 2011 02:32 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1298298733">&nbsp;</a></div><pre>I&#39;ve seen display-itb still timing out, however, the occurrence is much lower than display1.grid.iu.edu.

Ashu, Brian, can you confirm that the &#34;FORCE INDEX(index02)&#34; is indeed invalid and causing the performance issue? (If so, I will release this update tomorrow).

Thanks,
Soichi</pre></div><div class='update_description'><i onclick="document.location='9245#1297787436'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-15T16:30:36+00:00">Feb 15, 2011 04:30 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1297787436">&nbsp;</a></div><pre>Another interesting observation. If I comment out &#34;FORCE INDEX(index02)&#34;, it actually *uses* various indexes available and performance improves.

[ &#34;FROM  MasterTransferSummary R FORCE INDEX(index02)&#34; ]
2011-02-15 16&#58;27&#58;05 UTC [hayashis@soichi&#58;~/dev/test/gratia]$ ./run.sh
id      select_type     table   type    possible_keys   key     key_len ref     rows    Extra
1       SIMPLE  R       ALL     NULL    NULL    NULL    NULL    11704624        Using where; Using temporary; Using filesort
1       SIMPLE  P       ref     index02,FK49CD790E1AC33EA       index02 258     gratia_osg_transfer.R.ProbeName 1       Using where
1       SIMPLE  S       eq_ref  PRIMARY,index02 PRIMARY 4       gratia_osg_transfer.P.siteid    1       Using where
1       SIMPLE  SizeUnits       eq_ref  PRIMARY PRIMARY 10      gratia_osg_transfer.R.StorageUnit       1       Using where

real    0m2.385s
user    0m0.010s
sys     0m0.038s

[ &#34;FROM  MasterTransferSummary /*R FORCE INDEX(index02)*/&#34; ]

2011-02-15 16&#58;27&#58;38 UTC [hayashis@soichi&#58;~/dev/test/gratia]$ ./run.sh
id      select_type     table   type    possible_keys   key     key_len ref     rows    Extra
1       SIMPLE  R       range   index10,index01,index03,index09 index01 8       NULL    796068  Using where; Using temporary; Using filesort
1       SIMPLE  P       ref     index02,FK49CD790E1AC33EA       index02 258     gratia_osg_transfer.R.ProbeName 1       Using where
1       SIMPLE  S       eq_ref  PRIMARY,index02 PRIMARY 4       gratia_osg_transfer.P.siteid    1       Using where
1       SIMPLE  SizeUnits       eq_ref  PRIMARY PRIMARY 10      gratia_osg_transfer.R.StorageUnit       1       Using where

real    0m0.794s
user    0m0.008s
sys     0m0.022s

I&#39;ve commented out &#34;FORCE INDEX(index02)&#34; on all osg_display queries installed in soichi.grid.iu.edu and currently testing to see if it performs better.

Can you check if &#34;FORCE INDEX(index02)&#34; really needs to be removed?</pre></div><div class='update_description'><i onclick="document.location='9245#1297734657'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-15T01:50:57+00:00">Feb 15, 2011 01:50 AM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1297734657">&nbsp;</a></div><pre>(CC-ing Tom)

Now I just found that our puppet server might be to blame (usual timeout still caused by the mysql bug, I hope..)

I just tried to manually run osg_display script on display1.grid.iu.edu. Got following error.

2011-02-15 01&#58;38&#58;23 UTC [hayashis@display1&#58;/var/log/osg_display]$ sudo -u apache osg_display
2011-02-15 01&#58;38&#58;35,073 - INFO - Reading from log file /etc/osg_display/osg_display.conf.
2011-02-15 01&#58;38&#58;36,599 - INFO - Successfully connected to Gratia database
2011-02-15 01&#58;39&#58;02,145 - INFO - Gratia returned 2116 results for jobs
2011-02-15 01&#58;42&#58;05,561 - INFO - Successfully loaded transfer data from cache; 61 cache entries.
2011-02-15 01&#58;42&#58;05,567 - WARNING - Unable to load cache; it may not exist. Error&#58; datetime.datetime(2011, 2, 14, 20, 0)
2011-02-15 01&#58;42&#58;05,571 - INFO - Querying 8 missing data entries.
2011-02-15 01&#58;42&#58;05,572 - INFO - Querying Gratia Transfer DB for transfers from 2011-02-12 18&#58;00&#58;00 to 2011-02-12 19&#58;00&#58;00.
2011-02-15 01&#58;42&#58;05,884 - INFO - Querying Gratia Transfer DB for transfers from 2011-02-12 21&#58;00&#58;00 to 2011-02-12 22&#58;00&#58;00.
2011-02-15 01&#58;42&#58;06,021 - INFO - Querying Gratia Transfer DB for transfers from 2011-02-12 15&#58;00&#58;00 to 2011-02-12 16&#58;00&#58;00.
2011-02-15 01&#58;42&#58;06,204 - INFO - Querying Gratia Transfer DB for transfers from 2011-02-14 23&#58;00&#58;00 to 2011-02-15 00&#58;00&#58;00.
2011-02-15 01&#58;42&#58;06,624 - INFO - Querying Gratia Transfer DB for transfers from 2011-02-15 01&#58;00&#58;00 to 2011-02-15 02&#58;00&#58;00.
2011-02-15 01&#58;42&#58;06,693 - INFO - Querying Gratia Transfer DB for transfers from 2011-02-14 20&#58;00&#58;00 to 2011-02-14 21&#58;00&#58;00.
2011-02-15 01&#58;42&#58;06,755 - INFO - Querying Gratia Transfer DB for transfers from 2011-02-15 00&#58;00&#58;00 to 2011-02-15 01&#58;00&#58;00.
2011-02-15 01&#58;42&#58;06,815 - INFO - Querying Gratia Transfer DB for transfers from 2011-02-14 22&#58;00&#58;00 to 2011-02-14 23&#58;00&#58;00.
2011-02-15 01&#58;43&#58;29,709 - INFO - Successfully connected to Gratia database
2011-02-15 01&#58;43&#58;31,394 - INFO - Gratia returned 45 results for daily jobs
2011-02-15 01&#58;43&#58;31,452 - ERROR - [Errno 12] Cannot allocate memory
2011-02-15 01&#58;43&#58;31,455 - ERROR - [Errno 12] Cannot allocate memory
Traceback (most recent call last)&#58;
File &#34;/usr/lib/python2.4/site-packages/osg_display/osg_display.py&#34;, line 221, in main
main_unwrapped()
File &#34;/usr/lib/python2.4/site-packages/osg_display/osg_display.py&#34;, line 119, in main
dg = DisplayGraph(cp, &#34;jobs_daily&#34;)
File &#34;/usr/lib/python2.4/site-packages/osg_display/display_graph.py&#34;, line 39, in __init__
fm = matplotlib.font_manager.FontManager()
File &#34;/usr/lib64/python2.4/site-packages/matplotlib/font_manager.py&#34;, line 984, in __init__
self.ttffiles = findSystemFonts(paths) + findSystemFonts()
File &#34;/usr/lib64/python2.4/site-packages/matplotlib/font_manager.py&#34;, line 341, in findSystemFonts
<div id='show_1576769345' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1576769345'>for f in get_fontconfig_fonts(fontext)&#58;
File &#34;/usr/lib64/python2.4/site-packages/matplotlib/font_manager.py&#34;, line 303, in get_fontconfig_fonts
status, output = commands.getstatusoutput(&#34;fc-list file&#34;)
File &#34;/usr/lib64/python2.4/commands.py&#34;, line 53, in getstatusoutput
pipe = os.popen(&#39;{ &#39; + cmd + &#39;; } 2&#62;&1&#39;, &#39;r&#39;)
OSError&#58; [Errno 12] Cannot allocate memory
Traceback (most recent call last)&#58;
File &#34;/usr/bin/osg_display&#34;, line 13, in ?
osg_display.osg_display.main()
File &#34;/usr/lib/python2.4/site-packages/osg_display/osg_display.py&#34;, line 221, in main
main_unwrapped()
File &#34;/usr/lib/python2.4/site-packages/osg_display/osg_display.py&#34;, line 119, in main
dg = DisplayGraph(cp, &#34;jobs_daily&#34;)
File &#34;/usr/lib/python2.4/site-packages/osg_display/display_graph.py&#34;, line 39, in __init__
fm = matplotlib.font_manager.FontManager()
File &#34;/usr/lib64/python2.4/site-packages/matplotlib/font_manager.py&#34;, line 984, in __init__
self.ttffiles = findSystemFonts(paths) + findSystemFonts()
File &#34;/usr/lib64/python2.4/site-packages/matplotlib/font_manager.py&#34;, line 341, in findSystemFonts
for f in get_fontconfig_fonts(fontext)&#58;
File &#34;/usr/lib64/python2.4/site-packages/matplotlib/font_manager.py&#34;, line 303, in get_fontconfig_fonts
status, output = commands.getstatusoutput(&#34;fc-list file&#34;)
File &#34;/usr/lib64/python2.4/commands.py&#34;, line 53, in getstatusoutput
pipe = os.popen(&#39;{ &#39; + cmd + &#39;; } 2&#62;&1&#39;, &#39;r&#39;)
OSError&#58; [Errno 12] Cannot allocate memory

When I looked at what&#39;s going on here... I&#39;ve noticed

PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
20272 root      18   0  967m 413m   20 R  3.8 41.2   4&#58;53.40 puppetd
20887 root      18   0  967m 404m   20 D  2.8 40.3   4&#58;50.97 puppetd
19540 root      18   0  967m 384m   20 D  3.1 38.3   5&#58;52.98 puppetd
2509 root      15   0  967m 178m   76 S  0.0 17.8   1645&#58;23 puppetd

I&#39;ve done &#34;/etc/init.d/puppetd stop&#34;, and I was able to re-run osg_display. The recent display failure could have been caused by our puppet server.

Tom, this is the second time I&#39;ve noticed puppetd causing trouble. Can you take look?
</div><script type='text/javascript'>
        $('#show_1576769345').click(function() {
            $('#detail_1576769345').slideDown("normal");
            $('#show_1576769345').hide();
            $('#hide_1576769345').show();
        });
        $('#hide_1576769345').click(function() {
            $('#detail_1576769345').slideUp();
            $('#hide_1576769345').hide();
            $('#show_1576769345').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='9245#1297733098'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-15T01:24:58+00:00">Feb 15, 2011 01:24 AM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1297733098">&nbsp;</a></div><pre>I&#39;ve looked into the problem query a bit further, and found something interesting...

For example, following query takes 5 - 6 seconds to complete..

explain SELECT * FROM (SELECT ProbeName, StartTime FROM MasterTransferSummary R FORCE INDEX(index02)
WHERE
StartTime &#62;= &#34;2011-01-27 00&#58;00&#34; AND
StartTime &#60; &#34;2011-02-01 00&#58;00&#34;
GROUP BY StartTime, ProbeName
) R

2011-02-15 01&#58;13&#58;36 UTC [hayashis@soichi&#58;~/dev/test/gratia]$ ./run.sh
id      select_type     table   type    possible_keys   key     key_len ref     rows    Extra
1       PRIMARY &#60;derived2&#62;      ALL     NULL    NULL    NULL    NULL    625
2       DERIVED R       ALL     NULL    NULL    NULL    NULL    11358275        Using where; Using temporary; Using filesort

real    0m5.443s
user    0m0.014s
sys     0m0.014s

But if I just &#34;un-wrap&#34; the query I get..

explain SELECT
ProbeName,
StartTime
FROM MasterTransferSummary R FORCE INDEX(index02)
WHERE
StartTime &#62;= &#34;2011-01-27 00&#58;00&#34; AND
StartTime &#60; &#34;2011-02-01 00&#58;00&#34;
GROUP BY StartTime, ProbeName

2011-02-15 01&#58;15&#58;19 UTC [hayashis@soichi&#58;~/dev/test/gratia]$ ./run.sh
id      select_type     table   type    possible_keys   key     key_len ref     rows    Extra
1       SIMPLE  R       ALL     NULL    NULL    NULL    NULL    11358276        Using where; Using temporary; Using filesort

<div id='show_1076048417' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1076048417'>real    0m0.265s
user    0m0.008s
sys     0m0.021s

This behavior seems to match following MySQL bug reported which is currently set with &#34;Critical&#34;.
<font color='#7F7E6F'>&#62; <a href='http&#58;//bugs.mysql.com/bug.php?id=59203' target='_blank' rel='nofollow'>http&#58;//bugs.mysql.com/bug.php?id=59203</a></font>

Even if this bug is at play here, I am not sure if this is ultimately causing the timeout issue with OSG_Display script.. But, I think it&#39;s worth investigating. I have subscribed to the MySQL bug.

Meanwhile, is there anyway that we can un-wrap the internal query (to go around this issue)?

Soichi
</div><script type='text/javascript'>
        $('#show_1076048417').click(function() {
            $('#detail_1076048417').slideDown("normal");
            $('#show_1076048417').hide();
            $('#hide_1076048417').show();
        });
        $('#hide_1076048417').click(function() {
            $('#detail_1076048417').slideUp();
            $('#hide_1076048417').hide();
            $('#show_1076048417').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='9245#1297089136'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-07T14:32:16+00:00">Feb 7, 2011 02:32 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1297089136">&nbsp;</a></div><pre>We had several of display timeout again this morning

2011-02-07 14&#58;19&#58;50,140 - INFO - -------- Gratia returned 37 results for transfers----------------
2011-02-07 14&#58;19&#58;53,706 - INFO - Successfully connected to Gratia database
2011-02-07 14&#58;19&#58;56,592 - INFO - Gratia returned 15 results for jobs
2011-02-07 14&#58;20&#58;02,032 - INFO - Successfully connected to Gratia database
ERROR&#58; OSG Display updater exited with code 142

By the way, I remember Brian mentioned that once we update the OSG_Display script it will run more efficient version of the query thus it should not cause this problem.. Does the persistence of issue mean that the fix did not work, or did not improve enough to eliminate this issue completely?

Soichi</pre></div><div class='update_description'><i onclick="document.location='9245#1296839322'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-04T17:08:42+00:00">Feb 4, 2011 05:08 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1296839322">&nbsp;</a></div><pre>FYI..

This query is running smoothly today..

2011-02-04 17&#58;07&#58;46 UTC [hayashis@soichi&#58;~/dev/test/gratia]$ ./run.sh
Enter password&#58;
Date    Records MB
2011-01-27      600271  541340264.640198
2011-01-28      482914  695825316.484217
2011-01-29      477404  429187526.861922
2011-01-30      288269  261752653.094735
2011-01-31      365325  258999715.872619

real    0m6.688s
user    0m0.012s
sys     0m0.023s

Extending NAD</pre></div><div class='update_description'><i onclick="document.location='9245#1296573865'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-01T15:24:25+00:00">Feb 1, 2011 03:24 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1296573865">&nbsp;</a></div><pre>By the way, following is the query that runs fast most of the time, and sometimes runs so slow that causes timeout (like today)

SELECT
Date,
SUM(Records) as Records,
SUM(TransferSize*SizeUnits.Multiplier) AS MB
FROM (
SELECT
ProbeName,
SUM(Njobs) AS Records,
sum(TransferSize) AS TransferSize,
R.StorageUnit,
DATE(StartTime) as Date
FROM MasterTransferSummary R FORCE INDEX(index02)
WHERE
StartTime &#62;= %(starttime)s AND
StartTime &#60; %(endtime)s
GROUP BY Date, R.StorageUnit, ProbeName
) as R
JOIN Probe P ON R.ProbeName = P.probename
JOIN Site S ON S.siteid = P.siteid
JOIN SizeUnits on (SizeUnits.Unit = R.StorageUnit)
WHERE
S.SiteName NOT IN (&#39;NONE&#39;, &#39;Generic&#39;, &#39;Obsolete&#39;)
GROUP BY Date
ORDER BY Date ASC

2011-02-01 15&#58;18&#58;47,663 - DEBUG - {&#39;endtime&#39;&#58; datetime.datetime(2011, 2, 1, 0, 0), &#39;starttime&#39;&#58; datetime.datetime(2011, 1, 27, 0, 0)}</pre></div><div class='update_description'><i onclick="document.location='9245#1296152695'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-01-27T18:24:55+00:00">Jan 27, 2011 06:24 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1296152695">&nbsp;</a></div><pre>(Extending NAD & CC-ing Ashu)

Ashu, Brian,

Please comment.

Thanks,
Soichi</pre></div><div class='update_description'><i onclick="document.location='9245#1295624181'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-01-21T15:36:21+00:00">Jan 21, 2011 03:36 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1295624181">&nbsp;</a></div><pre>Brian,

Do you want me to give it a shot at the SQL query used for disk-space graphs? Is there a sample query that I can take a look?</pre></div><div class='update_description'><i onclick="document.location='9245#1294155909'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-01-04T15:45:09+00:00">Jan 4, 2011 03:45 PM UTC</time> by <b>wcmaier@....</b><a class="anchor" name="1294155909">&nbsp;</a></div><pre>Hi-

I&#39;m complaining. ;) If the Gratia plots aren&#39;t provided (either at UNL or via
MyOSG), we&#39;ll have to implement a similar visualization at our site. Most (all?)
sites with large SEs will need *some* sort of view into their storage usage over
time, so I expect that other sites will also have to reimplement this feature if
they haven&#39;t already. In our case, we were able to deprecate a local
visualization service in favor of the one provided by MyOSG, saving time and
effort.

Of course, we can certainly re-integrate storage use into our local plots, so
it&#39;s certainly not the end of the world if you decide to drop the Gratia charts.
Still, I think that finding a way to fix and keep them will benefit a good chunk
of the OSG community, even if they don&#39;t already know the plots are (were)
there.

As always, please let me know if there are action items on this issue that we
can help with.

Thanks!

On Tue, Jan 04, 2011 at 03&#58;35&#58;00PM +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9245#1294155796'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-01-04T15:43:16+00:00">Jan 4, 2011 03:43 PM UTC</time><a class="anchor" name="1294155796">&nbsp;</a></div><pre>The issue here is the optimizations on the Gratia DB - this specific query currently triggers a full-table scan.  I&#39;ve tried various tweaks, but haven&#39;t found a good replacement query with reasonably-similar semantics.

However, its limited to just these disk-space-related graphs.  I know folks who use the job and transfer accounting via MyOSG (particularly, some of CMS management).  We can probably just remove the disk-space ones.

-- by Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='9245#1294155328'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-01-04T15:35:28+00:00">Jan 4, 2011 03:35 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1294155328">&nbsp;</a></div><pre>OK... now that we are in year 2011, let&#39;s decide what we need to do with this.

I think the most obvious thing to do is to try to see if someone at UNL can fix this web service. We also need to pursuit the route of hosting this web service at GOC (Brian and I tried this last year). I am not sure if we should do that while we fix the web service itself..

Or, we can remove the functionality on MyOSG to interface with Gratia graph all together - since nobody is complaining about this and it doesn&#39;t look like OSG community is interested in this..

Thoughts?</pre></div><div class='update_description'><i onclick="document.location='9245#1290545665'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-23T20:54:25+00:00">Nov 23, 2010 08:54 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1290545665">&nbsp;</a></div><pre>Extending NAD to the next year.</pre></div><div class='update_description'><i onclick="document.location='9245#1289919228'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-16T14:53:48+00:00">Nov 16, 2010 02:53 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1289919228">&nbsp;</a></div><pre>Extending NAD to 11/23 (our next production release). I am hoping we can resolve this issue in next 7 days.

Brian, can you answer my previous question?</pre></div><div class='update_description'><i onclick="document.location='9245#1289257039'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-08T22:57:19+00:00">Nov 8, 2010 10:57 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1289257039">&nbsp;</a></div><pre>Brian, somebody, please respond.

Extending NAD again.</pre></div><div class='update_description'><i onclick="document.location='9245#1288645972'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-01T21:12:52+00:00">Nov 1, 2010 09:12 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1288645972">&nbsp;</a></div><pre>The URL I&#39;ve referenced previously now returns &#34;No data returned by DB query&#34; image. Brian, is MyOSG generating broken URL? Extending NAD</pre></div><div class='update_description'><i onclick="document.location='9245#1287752871'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-22T13:07:51+00:00">Oct 22, 2010 01:07 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1287752871">&nbsp;</a></div><pre>Will, that&#39;s odd. I am glad you got it though.

Brian,

I am still having trouble connecting to following URL
<font color='#7F7E6F'>&#62; <a href='http&#58;//t2.unl.edu/gratia/status_graphs/status_se_free_bar?facility=GLOW|GLOW_SUBMIT1|GLOW_SUBMIT2|GLOW_SUBMIT3|GLOW_SUBMIT4|GLOW-CMS|GLOW-CMS-SE&title=&ylabel=GB&starttime=2010-10-08%2012&#58' target='_blank' rel='nofollow'>http&#58;//t2.unl.edu/gratia/status_graphs/status_se_free_bar?facility=GLOW|GLOW_SUBMIT1|GLOW_SUBMIT2|GLOW_SUBMIT3|GLOW_SUBMIT4|GLOW-CMS|GLOW-CMS-SE&title=&ylabel=GB&starttime=2010-10-08%2012&#58</a>;00&#58;00&endtime=2010-10-15%2005&#58;52&#58;36&legend=False&width=600&height=400&text_size=10&title_size=0&text_padding=3&figure_padding=60&group=resource_group</font>

I get message saying

<font color='#7F7E6F'>&#62; Service Temporarily Unavailable -- The server is temporarily unable to service your request due to maintenance downtime or capacity problems. Please try again later.</font>

Can you help?

Extending NAD to 10/29</pre></div><div class='update_description'><i onclick="document.location='9245#1287165726'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-15T18:02:06+00:00">Oct 15, 2010 06:02 PM UTC</time> by <b>wcmaier@....</b><a class="anchor" name="1287165726">&nbsp;</a></div><pre>Hi Soichi-

I did receive an email just now; thanks!

On Fri, Oct 15, 2010 at 05&#58;56&#58;00PM +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9245#1287165373'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-15T17:56:13+00:00">Oct 15, 2010 05:56 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1287165373">&nbsp;</a></div><pre>CC-ing Brian, and re-opening this ticket.

Will,

Thank you for the info. I&#39;ve updated it on the GOC Ticket interface, so you should have received a notification email from the Footprint server (not a direct email from me). Can you check?

For the broken MyOSG page, the page generates following URL for the Gratia image

<a href='http&#58;//t2.unl.edu/gratia/status_graphs/status_se_free_bar?facility=GLOW|GLOW_SUBMIT1|GLOW_SUBMIT2|GLOW_SUBMIT3|GLOW_SUBMIT4|GLOW-CMS|GLOW-CMS-SE&amp' target='_blank' rel='nofollow'>http&#58;//t2.unl.edu/gratia/status_graphs/status_se_free_bar?facility=GLOW|GLOW_SUBMIT1|GLOW_SUBMIT2|GLOW_SUBMIT3|GLOW_SUBMIT4|GLOW-CMS|GLOW-CMS-SE&amp</a>;title=&amp;ylabel=GB&amp;starttime=2010-10-08 12&#58;00&#58;00&amp;endtime=2010-10-15 05&#58;52&#58;36&amp;legend=False&amp;width=600&amp;height=400&amp;text_size=10&amp;title_size=0&amp;text_padding=3&amp;figure_padding=60&amp;group=resource_group

I can see that this URL fails to load the Gratia graph.

Brian,

Is there something wrong with above URL?

Thanks,
Soichi</pre></div><div class='update_description'><i onclick="document.location='9245#1287164696'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-15T17:44:56+00:00">Oct 15, 2010 05:44 PM UTC</time><a class="anchor" name="1287164696">&nbsp;</a></div><pre>(Hm -- somehow I didn&#39;t get Soichi&#39;s last email; I only just noticed it here in the web interface.)

This is the SE plot that I&#39;ve been checking&#58;

<a href='http&#58;//myosg.grid.iu.edu/rgse/index?datasource=se&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=daily_hours_byvo&ce_account_type=gip_vo&se_account_type=se_space_free&bdiitree_type=total_jobs&start_type=7daysago&start_date=10%2F11%2F2010&end_type=now&end_date=10%2F11%2F2010&site=on&site_10026=on&rg=on&rg_24=on&gridtype=on&gridtype_1=on&service_central_value=0&service_hidden_value=0&active=on&active_value=1&disable_value=1' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/rgse/index?datasource=se&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=daily_hours_byvo&ce_account_type=gip_vo&se_account_type=se_space_free&bdiitree_type=total_jobs&start_type=7daysago&start_date=10%2F11%2F2010&end_type=now&end_date=10%2F11%2F2010&site=on&site_10026=on&rg=on&rg_24=on&gridtype=on&gridtype_1=on&service_central_value=0&service_hidden_value=0&active=on&active_value=1&disable_value=1</a>

Currently, it shows &#34;no data returned by DB query.&#34;

The URL that we used to use returns 404 now, for what it&#39;s worth&#58;

<a href='http&#58;//myosg.grid.iu.edu/wizardse/index?datasource=se&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&gip_status_attrs_showfqdn=on&account_type=daily_hours_byusername&ce_account_type=gip_vo&se_account_type=se_space_free&start_type=7daysago&start_date=04%2F08%2F2009&end_type=now&end_date=04%2F15%2F2009&facility_10017=on&site=on&site_10026=on&site_10063=on&gridtype=on&gridtype_1=on&voown_3=on&active_value=1&disable_value=1' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/wizardse/index?datasource=se&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&gip_status_attrs_showfqdn=on&account_type=daily_hours_byusername&ce_account_type=gip_vo&se_account_type=se_space_free&start_type=7daysago&start_date=04%2F08%2F2009&end_type=now&end_date=04%2F15%2F2009&facility_10017=on&site=on&site_10026=on&site_10063=on&gridtype=on&gridtype_1=on&voown_3=on&active_value=1&disable_value=1</a>

I&#39;m not sure whether that behavior is expected or not.

Thanks!

-- by Will Maier</pre></div><div class='update_description'><i onclick="document.location='9245#1286287117'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-05T13:58:37+00:00">Oct 5, 2010 01:58 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1286287117">&nbsp;</a></div><pre>Sorry, I am confused. I thought I&#39;ve fixed *all* issues that was broken. Is there something else still broke? If so, can you give me a list of MyOSG URLS that you see are broken? Then I will re-open this ticket.</pre></div><div class='update_description'><i onclick="document.location='9245#1286286819'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-05T13:53:39+00:00">Oct 5, 2010 01:53 PM UTC</time><a class="anchor" name="1286286819">&nbsp;</a></div><pre>Hi all-

Thanks for pushing this update. I originally opened the ticket because I noticed that the Total and Free disk space plots were broken. Soichi&#39;s last update acknowledged that this was still the case (due to t2.unl.edu timeouts). Are there plans to fix this functionality?

Thanks!</pre></div><div class='update_description'><i onclick="document.location='9245#1285729573'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-29T03:06:13+00:00">Sep 29, 2010 03:06 AM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1285729573">&nbsp;</a></div><pre>The update has been released. Closing this ticket.</pre></div><div class='update_description'><i onclick="document.location='9245#1285605860'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-27T16:44:20+00:00">Sep 27, 2010 04:44 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1285605860">&nbsp;</a></div><pre>Just FYI. This update is scheduled to be released tomorrow.

I&#39;ve briefly tested all CE / SE Gratia Graphs and they all seem to work .. except the &#34;Total disk space&#34; and &#34;Free disk space&#34; graphs which seems to timeout at t2.unl.edu.</pre></div><div class='update_description'><i onclick="document.location='9245#1285081114'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-21T14:58:34+00:00">Sep 21, 2010 02:58 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1285081114">&nbsp;</a></div><pre>The URLs has been updated and changes has been released to myosg-itb. Please test.</pre></div><div class='update_description'><i onclick="document.location='9245#1284989492'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-20T13:31:32+00:00">Sep 20, 2010 01:31 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1284989492">&nbsp;</a></div><pre>Brian has provided me a list of new URLs that needs to replaced. I will work on this this afternoon.</pre></div><div class='update_description'><i onclick="document.location='9245#1284745834'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-17T17:50:34+00:00">Sep 17, 2010 05:50 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1284745834">&nbsp;</a></div><pre>Have forwarded the information herein to Brian Bockleman. Await response.
SWT</pre></div><div class='update_description'><i onclick="document.location='9245#1284730215'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-17T13:30:15+00:00">Sep 17, 2010 01:30 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1284730215">&nbsp;</a></div><pre>MyOSG is generating following URL for the Gratia Graph

<a href='http&#58;//t2.unl.edu/gratia/gip_graphs/se_space_free?facility=GLOW|GLOW-CMS|GLOW-CMS-SE|GLOW_SUBMIT1|GLOW_SUBMIT2|GLOW_SUBMIT3|GLOW_SUBMIT4&title=&ylabel=GB&starttime=2010-09-10%2012&#58' target='_blank' rel='nofollow'>http&#58;//t2.unl.edu/gratia/gip_graphs/se_space_free?facility=GLOW|GLOW-CMS|GLOW-CMS-SE|GLOW_SUBMIT1|GLOW_SUBMIT2|GLOW_SUBMIT3|GLOW_SUBMIT4&title=&ylabel=GB&starttime=2010-09-10%2012&#58</a>;00&#58;00&endtime=2010-09-17%2001&#58;28&#58;22&legend=False&width=600&height=400&text_size=10&title_size=0&text_padding=3&figure_padding=60

When I access this URL, I get following error message.

500 Internal Server Error

The server encountered an unexpected condition which prevented it from fulfilling the request.

Traceback (most recent call last)&#58;
File &#34;/usr/lib/python2.4/site-packages/cherrypy/_cprequest.py&#34;, line 606, in respond
cherrypy.response.body = self.handler()
File &#34;/usr/lib/python2.4/site-packages/cherrypy/_cpdispatch.py&#34;, line 24, in __call__
return self.callable(*self.args, **self.kwargs)
File &#34;/usr/lib/python2.4/site-packages/graphtool/web/__init__.py&#34;, line 77, in content_func
results = func( *args, **kw )
File &#34;/usr/lib/python2.4/site-packages/graphtool/base/iterator.py&#34;, line 69, in run
results, metadata = cmd_func( *cmd_args, **kw )
File &#34;/usr/lib/python2.4/site-packages/graphtool/database/queries.py&#34;, line 74, in __call__
return self.query( *args, **kw )
File &#34;/usr/lib/python2.4/site-packages/graphtool/database/queries.py&#34;, line 144, in query
results, metadata = function(results, **vars)
File &#34;/usr/lib/python2.4/site-packages/graphtool/database/query_handler.py&#34;, line 165, in results_parser
parsed_results[my_pivot][my_group] = add_data( parsed_results[my_pivot][my_group], row, results_cols )
File &#34;/usr/lib/python2.4/site-packages/graphtool/database/query_handler.py&#34;, line 83, in add_data
old_data += row[results_cols[0]]
TypeError&#58; unsupported operand type(s) for +=&#58; &#39;float&#39; and &#39;Decimal&#39;

Is this because MyOSG is generating a bad URL, or is there something wrong within <a href='http&#58;//t2.unl.edu/gratia/gip_graphs' target='_blank' rel='nofollow'>http&#58;//t2.unl.edu/gratia/gip_graphs</a> ?</pre></div><div class='update_description'><i onclick="document.location='9245#1284725396'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-17T12:09:56+00:00">Sep 17, 2010 12:09 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1284725396">&nbsp;</a></div><pre>Hi all-

I&#39;m a big fan of the Gratia SE plots and noticed the other day that (at least) the one for our site was no longer showing data (see shortened and full links below). Brian Bockelman asked me to file a GOC ticket for this issue; here you go. ;)

Thanks!

<a href='http&#58;//bit.ly/4I13TG' target='_blank' rel='nofollow'>http&#58;//bit.ly/4I13TG</a>

<a href='http&#58;//myosg.grid.iu.edu/wizardse/index?datasource=se&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&gip_status_attrs_showfqdn=on&account_type=daily_hours_byusername&ce_account_type=gip_vo&se_account_type=se_space_free&start_type=7daysago&start_date=04%2F08%2F2009&end_type=now&end_date=04%2F15%2F2009&facility_10017=on&site=on&site_10026=on&site_10063=on&gridtype=on&gridtype_1=on&voown_3=on&active_value=1&disable_value=1' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/wizardse/index?datasource=se&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&gip_status_attrs_showfqdn=on&account_type=daily_hours_byusername&ce_account_type=gip_vo&se_account_type=se_space_free&start_type=7daysago&start_date=04%2F08%2F2009&end_type=now&end_date=04%2F15%2F2009&facility_10017=on&site=on&site_10026=on&site_10063=on&gridtype=on&gridtype_1=on&voown_3=on&active_value=1&disable_value=1</a></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F9245">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 9245});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
