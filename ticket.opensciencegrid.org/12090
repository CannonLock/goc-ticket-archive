<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[12090] new srm copy error</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=12090" method="post">
<div class="page-header">
    <h3><span class="muted">12090</span> / new srm copy error</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Jack Fowler</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Jack Fowler</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Check for updates</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-05-18</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG RA <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Doug Strain <span class="muted"> / OSG Storage Team</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=12090", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/12090?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/12090?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20new%20srm%20copy%20error%20ISSUE%3D12090%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='12090#1337010959'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-14T15:55:59+00:00">May 14, 2012 03:55 PM UTC</time><a class="anchor" name="1337010959">&nbsp;</a></div><pre>Thank you for informing us that this issue has been resolved. I will close this ticket.  Please submit problems, requests, and questions at&#58; <a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a> OSG Grid Operations Center goc@...., 317-278-9699 Visit the OSG Operations Page&#58; <a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a>

-- by Douglas Strain</pre></div><div class='update_description'><i onclick="document.location='12090#1336765403'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T19:43:23+00:00">May 11, 2012 07:43 PM UTC</time><a class="anchor" name="1336765403">&nbsp;</a></div><pre>Success!

[fowler@brux3 ~]$ srm-copy file&#58;///home/fowler/testlcgfile <a href='srm&#58;//srm.hep.brown.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/store/test_srm_copy_11may_test3' target='_blank' rel='nofollow'>srm&#58;//srm.hep.brown.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/store/test_srm_copy_11may_test3</a>
srm-copy   2.2.2.2.0  Wed Dec 14 11&#58;45&#58;28 PST 2011
BeStMan and SRM-Clients Copyright(c) 2007-2011,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>

Built on koji-hub at 01/31/2012 14&#58;04&#58;29 CST

SRM-CLIENT&#58; Fri May 11 15&#58;41&#58;20 EDT 2012 Connecting to httpg&#58;//srm.hep.brown.edu&#58;8443/srm/v2/server

SRM-CLIENT&#58; Fri May 11 15&#58;41&#58;20 EDT 2012 Calling SrmPrepareToPutRequest now ...
request.token= put&#58;111
Request.status=SRM_SUCCESS
explanation=null

SRM-CLIENT&#58; RequestFileStatus for SURL=file&#58;///home/fowler/testlcgfile is Ready.
SRM-CLIENT&#58; received TURL=<a href='gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/test_srm_copy_11may_test3' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/test_srm_copy_11may_test3</a>

SRM-CLIENT&#58; Fri May 11 15&#58;41&#58;25 EDT 2012 start file transfer
SRM-CLIENT&#58;Source=file&#58;////home/fowler/testlcgfile
SRM-CLIENT&#58;Target=<a href='gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/test_srm_copy_11may_test3' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/test_srm_copy_11may_test3</a>

SRM-CLIENT&#58; Fri May 11 15&#58;41&#58;27 EDT 2012 end file transfer for file&#58;///home/fowler/testlcgfile

SRM-CLIENT&#58; Fri May 11 15&#58;41&#58;27 EDT 2012 Calling putDone for <a href='srm&#58;//srm.hep.brown.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/store/test_srm_copy_11may_test3' target='_blank' rel='nofollow'>srm&#58;//srm.hep.brown.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/store/test_srm_copy_11may_test3</a>
Result.status=SRM_SUCCESS
Result.Explanation=null

SRM-CLIENT&#58; Request completed with success

SRM-CLIENT&#58; Printing text report now ...

SRM-CLIENT*REQUESTTYPE=put
<div id='show_1711758879' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1711758879'>SRM-CLIENT*TOTALFILES=1
SRM-CLIENT*TOTAL_SUCCESS=1
SRM-CLIENT*TOTAL_FAILED=0
SRM-CLIENT*REQUEST_TOKEN=put&#58;111
SRM-CLIENT*REQUEST_STATUS=SRM_SUCCESS
SRM-CLIENT*SOURCEURL[0]=file&#58;///home/fowler/testlcgfile
SRM-CLIENT*TARGETURL[0]=<a href='srm&#58;//srm.hep.brown.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/store/test_srm_copy_11may_test3' target='_blank' rel='nofollow'>srm&#58;//srm.hep.brown.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/store/test_srm_copy_11may_test3</a>
SRM-CLIENT*TRANSFERURL[0]=<a href='gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/test_srm_copy_11may_test3' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/test_srm_copy_11may_test3</a>
SRM-CLIENT*ACTUALSIZE[0]=386
SRM-CLIENT*FILE_STATUS[0]=SRM_SPACE_AVAILABLE
SRM-CLIENT*EXPLANATION[0]=SRM-CLIENT&#58; PutDone is called successfully
[fowler@brux3 ~]$

It must have been the &#34;disable=yes&#34; now set to no ?

thanks,
Jack

-- by Jack Fowler

</div><script type='text/javascript'>
        $('#show_1711758879').click(function() {
            $('#detail_1711758879').slideDown("normal");
            $('#show_1711758879').hide();
            $('#hide_1711758879').show();
        });
        $('#hide_1711758879').click(function() {
            $('#detail_1711758879').slideUp();
            $('#hide_1711758879').hide();
            $('#show_1711758879').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12090#1336765011'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T19:36:51+00:00">May 11, 2012 07:36 PM UTC</time><a class="anchor" name="1336765011">&nbsp;</a></div><pre>Sorry, I was assuming it was done the way the globus-gatekeeper is done; I see now it&#39;s done differently in gridftp-hdfs.  It&#39;s done with a set of files under /etc/sysconfig/gridftp.conf.d/, one of which is gridftp-hdfs-environment-bootstrap which sources /usr/share/gridftp-hdfs/gridftp-hdfs-environment which is where the LCMAPS variables are being set.  Ok, the gridftp-hdfs-environment you have uploaded already has the new variables for LCMAPS.  I recommend setting LCMAPS_DEBUG_LEVEL=2.  You no longer need any of those LCAS or LCMAPS variables except the four in /etc/sysconfig/globus-gatekeeper&#58; LLGT_LOG_IDENT, LCMAPS_DB_FILE, LCMAPS_POLICY_NAME, and LCMAPS_DEBUG_LEVEL.

-- by Dave Dykstra</pre></div><div class='update_description'><i onclick="document.location='12090#1336764583'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T19:29:43+00:00">May 11, 2012 07:29 PM UTC</time><a class="anchor" name="1336764583">&nbsp;</a></div><pre>Hi Doug,
<font color='#7F7E6F'>&#62; Are using daemon mode or xinetd mode?</font>
I don&#39;t know, but must be xinetd because&#58;

<font color='#7F7E6F'>&#62;  make sure that /etc/xinetd.d/gridftp-hdfs is set to &#34;disable=no&#34; and that you restart xinetd</font>

It&#39;s &#34;no&#34; now and I restarted xinetd. globus_url_copy with port 2811 worked&#58;

[fowler@brux3 ~]$ globus-url-copy -v -vb file&#58;///home/fowler/testlcgfile <a href='gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/test11may2' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/test11may2</a>
Source&#58; file&#58;///home/fowler/
Dest&#58;   <a href='gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/</a>
testlcgfile  -&#62;  test11may2

386 bytes         0.00 MB/sec avg         0.00 MB/sec inst
[fowler@brux3 ~]$

Does the standalone server support srm_copy?

thanks,
Jack

-- by Jack Fowler</pre></div><div class='update_description'><i onclick="document.location='12090#1336763990'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T19:19:50+00:00">May 11, 2012 07:19 PM UTC</time><a class="anchor" name="1336763990">&nbsp;</a></div><pre>Hi Dave,
That file doesn&#39;t exist&#58;

[root@brux4 ~]# ls -l /etc/sysconfig/gridftp-hdfs
ls&#58; /etc/sysconfig/gridftp-hdfs&#58; No such file or directory
[root@brux4 ~]#

And I added the addresses to the CC.

thanks,
Jack

-- by Jack Fowler</pre></div><div class='update_description'><i onclick="document.location='12090#1336763040'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T19:04:00+00:00">May 11, 2012 07:04 PM UTC</time><a class="anchor" name="1336763040">&nbsp;</a></div><pre>Ok, it looks like we are making progress.  The difference between the globus-url-copy and the typical srm is that it using port 5002 (the test standalone server) and the SRM is using port 2811.  Try&#58;

globus-url-copy -v -vb file&#58;///home/fowler/testlcgfile <a href='gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/test11may2' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/test11may2</a>

It says &#34;connection refused&#34;.  Are using daemon mode or xinetd mode?  If daemon mode, make sure the server is started.  If xinetd mode (I think that is the default for hdfs), make sure that /etc/xinetd.d/gridftp-hdfs is set to &#34;disable=no&#34; and that you restart xinetd.
If it is started, then it must be some sort of environment variable problem.

-- by Douglas Strain</pre></div><div class='update_description'><i onclick="document.location='12090#1336762394'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T18:53:14+00:00">May 11, 2012 06:53 PM UTC</time><a class="anchor" name="1336762394">&nbsp;</a></div><pre>Yes that worked. Sorry I hadn&#39;t noticed it was going to the ../tmp directory. And uscms3000 is my gums mapping. Using a writable directory works&#58;

[fowler@brux3 ~]$ globus-url-copy -v -vb file&#58;///home/fowler/testlcgfile <a href='gsiftp&#58;//brux4.hep.brown.edu&#58;5002//mnt/hadoop/store/test11may' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu&#58;5002//mnt/hadoop/store/test11may</a>
Source&#58; file&#58;///home/fowler/
Dest&#58;   <a href='gsiftp&#58;//brux4.hep.brown.edu&#58;5002//mnt/hadoop/store/' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu&#58;5002//mnt/hadoop/store/</a>
testlcgfile  -&#62;  test11may

386 bytes         0.00 MB/sec avg         0.00 MB/sec inst
[fowler@brux3 ~]$

But srm-copy to same directory fails&#58;

[fowler@brux3 ~]$ srm-copy file&#58;///home/fowler/testlcgfile <a href='srm&#58;//srm.hep.brown.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/store/testfile11may12' target='_blank' rel='nofollow'>srm&#58;//srm.hep.brown.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/store/testfile11may12</a>
srm-copy   2.2.2.2.0  Wed Dec 14 11&#58;45&#58;28 PST 2011
BeStMan and SRM-Clients Copyright(c) 2007-2011,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>

Built on koji-hub at 01/31/2012 14&#58;04&#58;29 CST

SRM-CLIENT&#58; Fri May 11 14&#58;52&#58;17 EDT 2012 Connecting to httpg&#58;//srm.hep.brown.edu&#58;8443/srm/v2/server

SRM-CLIENT&#58; Fri May 11 14&#58;52&#58;17 EDT 2012 Calling SrmPrepareToPutRequest now ...
request.token= put&#58;100
Request.status=SRM_SUCCESS
explanation=null

SRM-CLIENT&#58; RequestFileStatus for SURL=file&#58;///home/fowler/testlcgfile is Ready.
SRM-CLIENT&#58; received TURL=<a href='gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/testfile11may12' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/testfile11may12</a>

SRM-CLIENT&#58; Fri May 11 14&#58;52&#58;21 EDT 2012 start file transfer
SRM-CLIENT&#58;Source=file&#58;////home/fowler/testlcgfile
SRM-CLIENT&#58;Target=<a href='gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/testfile11may12' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/testfile11may12</a>
java.net.ConnectException&#58; Connection refused
java.net.ConnectException&#58; Connection refused
<div id='show_1646633505' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1646633505'>at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java&#58;351)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java&#58;213)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java&#58;200)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java&#58;366)
at java.net.Socket.connect(Socket.java&#58;529)
at org.globus.ftp.vanilla.FTPControlChannel.open(FTPControlChannel.java&#58;178)
at org.globus.ftp.GridFTPClient.&#60;init&#62;(GridFTPClient.java&#58;76)
at gov.lbl.srm.client.transfer.globus.SRMGridFTP.put(SRMGridFTP.java&#58;931)
at gov.lbl.srm.client.transfer.globus.SRMGridFTP.transferSync(SRMGridFTP.java&#58;562)
at gov.lbl.srm.client.transfer.globus.SRMFileTransfer.transferSync(SRMFileTransfer.java&#58;270)
at gov.lbl.srm.client.transfer.globus.SRMFileTransfer.run(SRMFileTransfer.java&#58;217)
SRM-CLIENT&#58; Fri May 11 14&#58;52&#58;23 EDT 2012 gsiftp transfer failed and error occured

SRM-CLIENT&#58; Retrying now again file 0 in 60 seconds for 1 times.

thanks,
Jack

-- by Jack Fowler

</div><script type='text/javascript'>
        $('#show_1646633505').click(function() {
            $('#detail_1646633505').slideDown("normal");
            $('#show_1646633505').hide();
            $('#hide_1646633505').show();
        });
        $('#hide_1646633505').click(function() {
            $('#detail_1646633505').slideUp();
            $('#hide_1646633505').hide();
            $('#show_1646633505').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12090#1336762058'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T18:47:38+00:00">May 11, 2012 06:47 PM UTC</time><a class="anchor" name="1336762058">&nbsp;</a></div><pre>Jack, if you&#39;re getting further then I presume you updated /etc/sysconfig/gridftp-hdfs?  Please attach the current contents

-- by Dave Dykstra</pre></div><div class='update_description'><i onclick="document.location='12090#1336761942'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T18:45:42+00:00">May 11, 2012 06:45 PM UTC</time><a class="anchor" name="1336761942">&nbsp;</a></div><pre>Trying again to update CC.  This interface isn&#39;t very friendly ....

If any of you see just &#34;Brian&#34; as Cc, please change that to bbockelm@.... and add dwd@....

-- by Dave Dykstra</pre></div><div class='update_description'><i onclick="document.location='12090#1336761715'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T18:41:55+00:00">May 11, 2012 06:41 PM UTC</time><a class="anchor" name="1336761715">&nbsp;</a></div><pre>Aha!  Ok, it looks like this is no longer an LCMAPS issue&#58;

System error in opening file; permission error in HDFS. (host=brux4.hep.brown.edu, user=uscms3000, path=/tmp/test11may)&#58; Permission denied
A system call failed&#58; Permission denied

It is mapping the certificate to &#34;uscms3000&#34; so it seems that LCMAPS is working (this is the correct user, right?).  It looks like the problem is with the permissions on the hadoop mount.  Is &#34;/mnt/hadoop/tmp&#34; writable for the uscms3000 user?  Try creating a directory that is owned by uscms3000, and try doing a globus-url-copy into that directory.  I bet it will work now.

Doug Strain
OSG Software

-- by Douglas Strain</pre></div><div class='update_description'><i onclick="document.location='12090#1336761598'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T18:39:58+00:00">May 11, 2012 06:39 PM UTC</time><a class="anchor" name="1336761598">&nbsp;</a></div><pre>Hi Dave,

Yep, this is all I see in /var/log/messages on my SE, brux4.hep.brown.edu&#58;

[root@brux4 ~]# tail -f /var/log/messages
May 11 10&#58;28&#58;05 brux4 gridftp-server-llgt[8524]&#58; Execution of LCMAPS failed.
May 11 11&#58;08&#58;00 brux4 gridftp-server-llgt[10017]&#58; Execution of LCMAPS failed.
May 11 11&#58;28&#58;06 brux4 gridftp-server-llgt[10762]&#58; Execution of LCMAPS failed.
May 11 11&#58;29&#58;10 brux4 gridftp-server-llgt[10798]&#58; Execution of LCMAPS failed.
May 11 11&#58;29&#58;59 brux4 gridftp-server-llgt[10880]&#58; Execution of LCMAPS failed.
May 11 11&#58;30&#58;50 brux4 gridftp-server-llgt[10958]&#58; Execution of LCMAPS failed.
May 11 12&#58;08&#58;01 brux4 gridftp-server-llgt[12826]&#58; Execution of LCMAPS failed.
May 11 12&#58;28&#58;06 brux4 gridftp-server-llgt[20363]&#58; Execution of LCMAPS failed.
May 11 13&#58;08&#58;00 brux4 gridftp-server-llgt[21832]&#58; Execution of LCMAPS failed.
May 11 13&#58;28&#58;05 brux4 gridftp-server-llgt[22589]&#58; Execution of LCMAPS failed.

thanks,
Jack

-- by Jack Fowler</pre></div><div class='update_description'><i onclick="document.location='12090#1336761422'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T18:37:02+00:00">May 11, 2012 06:37 PM UTC</time><a class="anchor" name="1336761422">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; You will need to add the rest of the URL to globus-url-copy</font>

Ah, OK. That produced a lot more output&#58;

[root@brux4 ~]# /usr/bin/gridftp-hdfs-standalone
[24957] Fri May 11 14&#58;31&#58;34 2012 &#58;&#58; GFork functionality not enabled.&#58;
globus_gfork&#58; GFork error&#58; Env not set

[24957] Fri May 11 14&#58;31&#58;34 2012 &#58;&#58; Configuration read from /etc/gridftp-hdfs/gridftp-debug.conf.
[24957] Fri May 11 14&#58;31&#58;34 2012 &#58;&#58; Server started in daemon mode.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; New connection from&#58; brux3.hep.brown.edu&#58;54471
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [CLIENT]&#58; USER &#58;globus-mapping&#58;
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [SERVER]&#58; 331 Password required for &#58;globus-mapping&#58;.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [CLIENT]&#58; PASS
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; Max memory buffer count&#58; 200.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; Max file buffer count&#58; 1500.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; Checking current load on the server.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; Detected system load 0.01.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; Start gridftp server; hadoop nameserver hadoop-name, port 9000, replicas 3.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; DN /DC=org/DC=doegrids/OU=People/CN=Jack Fowler 1528 successfully authorized.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; User uscms3000 successfully authorized.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [CLIENT]&#58; PASS
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [SERVER]&#58; 230 User uscms3000 logged in.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [CLIENT]&#58; SITE HELP
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [SERVER]&#58; 214-The following commands are recognized&#58;
ALLO    APPE    REST    CWD     CDUP    DCAU    EPSV    FEAT
ERET    MDTM    STAT    ESTO    HELP    LIST    MODE    NLST
MLSC    MLSD    PASV    RNFR    MLSR    MLST    NOOP    OPTS
STOR    PASS    PBSZ    PORT    PROT    SITE    EPRT    RETR
SPOR    SCKS    TREV    PWD     QUIT    SBUF    SIZE    SPAS
STRU    SYST    RNTO    TYPE    USER    LANG    MKD     RMD
DELE    CKSM    DCSC
214 End
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [CLIENT]&#58; FEAT
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [SERVER]&#58; 211-Extensions supported
<div id='show_872363632' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_872363632'>DCSC P,D
AUTHZ_ASSERT
MLSR
UTF8
LANG EN
DCAU
PARALLEL
SIZE
MLST Type*;Size*;Modify*;Perm*;Charset;UNIX.mode*;UNIX.owner*;UNIX.uid*;UNIX.group*;UNIX.gid*;Unique*;UNIX.slink*;X.count;
ERET
ESTO
SPAS
SPOR
REST STREAM
MDTM
PASV AllowDelayed;
211 End.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [CLIENT]&#58; SITE CLIENTINFO scheme=gsiftp;appname=&#34;globus-url-copy&#34;;appver=&#34;8.2 (gcc64, 1323102900-1) [unknown]&#34;;
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [SERVER]&#58; 250 OK.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [CLIENT]&#58; TYPE I
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [SERVER]&#58; 200 Type set to I.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [CLIENT]&#58; PBSZ 1048576
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [SERVER]&#58; 200 PBSZ=1048576
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [CLIENT]&#58; PASV
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [SERVER]&#58; 227 Entering Passive Mode (128,148,63,151,215,221)
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [CLIENT]&#58; ALLO 386
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [SERVER]&#58; 200 ALLO command successful.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [CLIENT]&#58; STOR //mnt/hadoop/tmp/test11may
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; Going to do stat on file /tmp/test11may.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; We are going to open file /tmp/test11may.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; Open file /tmp/test11may with 3 replicas.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; opening file; permission error in HDFS. (host=brux4.hep.brown.edu, user=uscms3000, path=/tmp/test11may)
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; Failure attempting to transfer &#34;/mnt/hadoop/tmp/test11may&#34;.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; Transfer failure&#58;
System error in opening file; permission error in HDFS. (host=brux4.hep.brown.edu, user=uscms3000, path=/tmp/test11may)&#58; Permission denied
A system call failed&#58; Permission denied

[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; brux3.hep.brown.edu&#58;54471&#58; [SERVER]&#58; 500-Command failed. &#58; System error in opening file; permission error in HDFS. (host=brux4.hep.brown.edu, user=uscms3000, path=/tmp/test11may)&#58; Permission denied
500-A system call failed&#58; Permission denied
500 End.
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; Closed connection from brux3.hep.brown.edu&#58;54471
[24957] Fri May 11 14&#58;31&#58;43 2012 &#58;&#58; Destroying the HDFS connection.
[root@brux4 ~]#

-- by Jack Fowler

</div><script type='text/javascript'>
        $('#show_872363632').click(function() {
            $('#detail_872363632').slideDown("normal");
            $('#show_872363632').hide();
            $('#hide_872363632').show();
        });
        $('#hide_872363632').click(function() {
            $('#detail_872363632').slideUp();
            $('#hide_872363632').hide();
            $('#show_872363632').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12090#1336761215'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T18:33:35+00:00">May 11, 2012 06:33 PM UTC</time><a class="anchor" name="1336761215">&nbsp;</a></div><pre>This update is just for the Cc (I tried once before but it must have gotten overwritten)

-- by Dave Dykstra</pre></div><div class='update_description'><i onclick="document.location='12090#1336761085'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T18:31:25+00:00">May 11, 2012 06:31 PM UTC</time><a class="anchor" name="1336761085">&nbsp;</a></div><pre>Jack,

Ok I now see you commented out the line &#34;gumsclient -&#62; glexectracking&#34;.  So I presume you&#39;re no longer getting the message in messages-except regarding &#34;plugin glexectracking not found&#34;

-- by Dave Dykstra</pre></div><div class='update_description'><i onclick="document.location='12090#1336760976'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T18:29:36+00:00">May 11, 2012 06:29 PM UTC</time><a class="anchor" name="1336760976">&nbsp;</a></div><pre>Jack,

You will need to add the rest of the URL to globus-url-copy, probably something like this&#58;

globus-url-copy -v -vb -dbg file&#58;///home/fowler/testlcgfile <a href='gsiftp&#58;//brux4.hep.brown.edu&#58;5002//mnt/hadoop/tmp/test11may' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu&#58;5002//mnt/hadoop/tmp/test11may</a>

The gridftp-hdfs-standalone starts up a one-time GridFTP server on port 5002 and prints out output to stdout, so it is useful for debugging since you can quickly see if it is printing out errors that are not going to logs.

Doug Strain
OSG Software

-- by Douglas Strain</pre></div><div class='update_description'><i onclick="document.location='12090#1336760592'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T18:23:12+00:00">May 11, 2012 06:23 PM UTC</time> by <b>fowler@....</b><a class="anchor" name="1336760592">&nbsp;</a></div><pre>Hi Dave,
That was an old lcmaps.db before I did some edits. Just posted the latest.
thanks,
Jack

On 05/11/2012 02&#58;12 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12090#1336760408'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T18:20:08+00:00">May 11, 2012 06:20 PM UTC</time> by <b>fowler@....</b><a class="anchor" name="1336760408">&nbsp;</a></div><pre>Hi Dave,

<font color='#7F7E6F'>&#62; ...instead of the ones that were there.</font>

I&#39;m not sure what you mean here?

I&#39;ve posted /etc/lcmaps.db to the GOC ticket site.

thanks,
Jack

On 05/11/2012 02&#58;06 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12090#1336760279'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T18:17:59+00:00">May 11, 2012 06:17 PM UTC</time><a class="anchor" name="1336760279">&nbsp;</a></div><pre>-- by Jack Fowler</pre></div><div class='update_description'><i onclick="document.location='12090#1336759974'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T18:12:54+00:00">May 11, 2012 06:12 PM UTC</time><a class="anchor" name="1336759974">&nbsp;</a></div><pre>Sorry, now I see your lcmaps.db and the messages-except attached.  I think the problem is the uncommented line under &#34;glexec&#58;&#34; because you didn&#39;t uncomment the glexectracking module.  Anyway you shouldn&#39;t need either and probably it wouldn&#39;t work anyway because the module is probably not installed.  I think the warning about &#34;glexec&#58;&#34; being empty was just a warning that you can ignore, and if you don&#39;t like it you can comment out the &#34;glexec&#58;&#34; line.  That&#39;s probably something I should have done by default but I didn&#39;t notice the warning messages.

-- by Dave Dykstra</pre></div><div class='update_description'><i onclick="document.location='12090#1336759867'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T18:11:07+00:00">May 11, 2012 06:11 PM UTC</time> by <b>fowler@....</b><a class="anchor" name="1336759867">&nbsp;</a></div><pre>Hi Doug,

[root@brux4 ~]# ls -l /etc/sysconfig/gridftp-hdfs
ls&#58; /etc/sysconfig/gridftp-hdfs&#58; No such file or directory
[root@brux4 ~]# ls -l /etc/gridftp-hdfs/gridftp-hdfs-local.conf
ls&#58; /etc/gridftp-hdfs/gridftp-hdfs-local.conf&#58; No such file or directory
[root@brux4 ~]#

Nothing out from gridftp-hdfs-standalone&#58;

[23590] Fri May 11 13&#58;55&#58;26 2012 &#58;&#58; Configuration read from
/etc/gridftp-hdfs/gridftp-debug.conf.
[23590] Fri May 11 13&#58;55&#58;26 2012 &#58;&#58; Server started in daemon mode.

Am I doing the globus-url-copy correctly?

[fowler@brux3 ~]$ globus-url-copy -v -vb -dbg
file&#58;///home/fowler/testlcgfile gsiftp&#58;///brux4.hep.brown.edu&#58;5002
Source&#58; file&#58;///home/fowler/
Dest&#58;   gsiftp&#58;///
testlcgfile  -&#62;  brux4.hep.brown.edu&#58;5002

error&#58; [globus_gass_copy_get_url_mode]&#58; globus_url_parse returned error
code&#58; -7 for url&#58; gsiftp&#58;///brux4.hep.brown.edu&#58;5002
[fowler@brux3 ~]$

thanks,
Jack

On 05/11/2012 12&#58;48 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12090#1336759569'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T18:06:09+00:00">May 11, 2012 06:06 PM UTC</time><a class="anchor" name="1336759569">&nbsp;</a></div><pre>I&#39;m pretty sure that Brian Bockelman has got this working, he&#39;d be the best help.

Start by copying all the LCMAPS and LLGT environment variable settings from /etc/sysconfig/globus-gatekeeper instead of the ones that were there.  Also please attach your lcmaps.db.

-- by Dave Dykstra</pre></div><div class='update_description'><i onclick="document.location='12090#1336754926'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T16:48:46+00:00">May 11, 2012 04:48 PM UTC</time><a class="anchor" name="1336754926">&nbsp;</a></div><pre>That&#39;s puzzling.  Do you have any files in the following locations?
/etc/sysconfig/gridftp-hdfs
/etc/gridftp-hdfs/gridftp-hdfs-local.conf

Can you try this?  Run &#34;/usr/bin/gridftp-hdfs-standalone&#34; and then try a globus-url-copy to gsiftp&#58;///brux4.hep.brown.edu&#58;5002.  Send the stdout of the standalone test server.  Maybe it will have more output.

-- by Douglas Strain</pre></div><div class='update_description'><i onclick="document.location='12090#1336750507'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T15:35:07+00:00">May 11, 2012 03:35 PM UTC</time> by <b>fowler@....</b><a class="anchor" name="1336750507">&nbsp;</a></div><pre>Hi Doug,
Sorry, but I tried both level 4 and 5 and still /var/log/messages has
nothing more than&#58;

May 11 11&#58;29&#58;10 brux4 gridftp-server-llgt[10798]&#58; Execution of LCMAPS
failed.
May 11 11&#58;29&#58;59 brux4 gridftp-server-llgt[10880]&#58; Execution of LCMAPS
failed.
May 11 11&#58;30&#58;50 brux4 gridftp-server-llgt[10958]&#58; Execution of LCMAPS
failed.

??

thanks,
Jack

On 05/11/2012 11&#58;10 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12090#1336749024'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T15:10:24+00:00">May 11, 2012 03:10 PM UTC</time><a class="anchor" name="1336749024">&nbsp;</a></div><pre>Downgrading is a bit tricky.  You would probably have to downgrade package by package.
&#34;yum downgrade lcmaps&#34; will downgrade to the previous version or &#34;yum downgrade lcmaps-1.4.28-20.osg&#34; (e.g.) for a specific version.
However, I am not sure if there are other dependencies.  For this reason, I probably wouldn&#39;t recommend this unless we can&#39;t fix this.

It looks like the change to glexec did change the error message, but there is not much detail to go on.
You can change the log levels of LCMAPS in /usr/share/gridftp-hdfs/gridftp-hdfs-environment
The log levels go from 0 to 5, and can be changed on these lines&#58;
export LCMAPS_LOG_LEVEL=${LCMAPS_LOG_LEVEL&#58;=0}
export LCMAPS_DEBUG_LEVEL=${LCMAPS_DEBUG_LEVEL&#58;=0}
I would recommend switching to log level 4 and retrying the test.  You should get a lot more information in /var/log/messages that should make the problem clearer.  If you send this, I think we can still fix this.

Doug Strain
OSG Software

-- by Douglas Strain</pre></div><div class='update_description'><i onclick="document.location='12090#1336745504'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-11T14:11:44+00:00">May 11, 2012 02:11 PM UTC</time><a class="anchor" name="1336745504">&nbsp;</a></div><pre>Hi Doug,
I wonder if there&#39;s any way I can go back to the previous version of OSG? I guess that would be 3.0? Would that fix my issue? If so, how would you recommend I do that?

thanks,
Jack

-- by Jack Fowler</pre></div><div class='update_description'><i onclick="document.location='12090#1336674731'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-10T18:32:11+00:00">May 10, 2012 06:32 PM UTC</time> by <b>fowler@....</b><a class="anchor" name="1336674731">&nbsp;</a></div><pre>Hi Doug,
Sorry I haven&#39;t replied sooner. I commented &#34;glexec&#34; in lcmaps.db and
gridftp is only on my SE, brux4.hep.brown.edu.  Still doesn&#39;t work
though. Below is a tail of /var/log/messages. The last line is the most
recent srm-copy attempt. I assume the others are from RSV probes. Both
gridftp-simple and srmcp-readwrite are failing.

thanks,
Jack

[root@brux4 ~]# cat lcmap-except
May 10 10&#58;08&#58;00 brux4 gridftp-server-llgt[19776]&#58; Execution of LCMAPS
failed.
May 10 10&#58;28&#58;06 brux4 gridftp-server-llgt[20517]&#58; Execution of LCMAPS
failed.
May 10 11&#58;08&#58;00 brux4 gridftp-server-llgt[22003]&#58; Execution of LCMAPS
failed.
May 10 11&#58;28&#58;06 brux4 gridftp-server-llgt[22744]&#58; Execution of LCMAPS
failed.
May 10 12&#58;08&#58;00 brux4 gridftp-server-llgt[24700]&#58; Execution of LCMAPS
failed.
May 10 12&#58;28&#58;06 brux4 gridftp-server-llgt[25444]&#58; Execution of LCMAPS
failed.
May 10 13&#58;08&#58;01 brux4 gridftp-server-llgt[1176]&#58; Execution of LCMAPS
failed.
May 10 13&#58;28&#58;05 brux4 gridftp-server-llgt[1954]&#58; Execution of LCMAPS
failed.
May 10 14&#58;08&#58;00 brux4 gridftp-server-llgt[3430]&#58; Execution of LCMAPS
failed.
May 10 14&#58;19&#58;51 brux4 gridftp-server-llgt[3861]&#58; Execution of LCMAPS
failed.
[root@brux4 ~]#

On 05/09/2012 04&#58;30 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12090#1336602760'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-09T22:32:40+00:00">May 9, 2012 10:32 PM UTC</time> by <b>Alain Roy</b><a class="anchor" name="1336602760">&nbsp;</a></div><pre>Thanks for diving in, Doug. I&#39;m assigning the ticket to you to make it official.
-alain</pre></div><div class='update_description'><i onclick="document.location='12090#1336595456'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-09T20:30:56+00:00">May 9, 2012 08:30 PM UTC</time><a class="anchor" name="1336595456">&nbsp;</a></div><pre>Since you are running a storage element, you should be able to comment out the &#34;glexec&#58;&#34; line as well as the subsequent &#34;gumsclient -&#62; glexectracking&#34; line, since you probably don&#39;t have the glexectracking plugin.  See if that works.

Note&#58; you may have to actually fix this rather than just comment it out if you have this gridftp server running on your worker nodes.

Doug Strain
OSG Software

-- by Douglas Strain</pre></div><div class='update_description'><i onclick="document.location='12090#1336594657'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-09T20:17:37+00:00">May 9, 2012 08:17 PM UTC</time><a class="anchor" name="1336594657">&nbsp;</a></div><pre>Hi Doug,
It&#39;s still broken. I&#39;ve attached three files. The messages-except show a couple of srm-copy tries. The last entries are after I uncommented &#34;gumsclient -&#62; glexectracking&#34; in lcmaps.db.
Note, I haven&#39;t knowingly installed glexec.
thanks,
Jack

-- by Jack Fowler</pre></div><div class='update_description'><i onclick="document.location='12090#1336591617'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-09T19:26:57+00:00">May 9, 2012 07:26 PM UTC</time><a class="anchor" name="1336591617">&nbsp;</a></div><pre>Hi, gridftp-hdfs is broken in the latest version of OSG 3.1.0 due to changes in lcmaps in this version.  I am working on this for the next version.  In the meantime, you can modify /usr/share/gridftp-hdfs/gridftp-hdfs-environment to the following&#58;

export LCMAPS_POLICY_NAME=${LCMAPS_POLICY_NAME&#58;=globus_gridftp_mapping&#58;osg_default}
export LLGT_LOG_IDENT=gridftp-server-llgt

Depending on your installation, you may also have to edit the glexec option in /etc/lcmaps.db if it is empty.

If this does not fix the issue, then send an excerpt of /var/log/messages with the LCMAPS error that is returning.

Hope this helps,
Doug Strain
OSG Software

-- by Douglas Strain</pre></div><div class='update_description'><i onclick="document.location='12090#1336590750'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-09T19:12:30+00:00">May 9, 2012 07:12 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1336590750">&nbsp;</a></div><pre>Kyle Gross attempted to replicate and he got the same error.  I&#39;m assigning OSG Software Team to the ticket.

-Alain D</pre></div><div class='update_description'><i onclick="document.location='12090#1336498411'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-08T17:33:31+00:00">May 8, 2012 05:33 PM UTC</time><a class="anchor" name="1336498411">&nbsp;</a></div><pre>Hi,
Has anyone been able to look at this yet? I&#39;m desperate to get this working. Please help as soon as you can.
thanks,
Jack

-- by Jack Fowler</pre></div><div class='update_description'><i onclick="document.location='12090#1336420679'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-07T19:57:59+00:00">May 7, 2012 07:57 PM UTC</time><a class="anchor" name="1336420679">&nbsp;</a></div><pre>This fail too. I suspect they&#39;re related.

[fowler@brux3 ~]$ globus-url-copy -v -vb -dbg file&#58;///home/fowler/testlcgfile <a href='gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/test7may' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/test7may</a>
Source&#58; file&#58;///home/fowler/
Dest&#58;   <a href='gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/</a>
testlcgfile  -&#62;  test7may
debug&#58; starting to put <a href='gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/test7may' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/test7may</a>
debug&#58; connecting to <a href='gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/test7may' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/test7may</a>

debug&#58; response from <a href='gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/test7may&#58' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/test7may&#58</a>;
220 brux4.hep.brown.edu GridFTP Server 6.5 (gcc64, 1323378368-83) [unknown] ready.

debug&#58; authenticating with <a href='gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/test7may' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/test7may</a>
debug&#58; response from <a href='gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/test7may&#58' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/test7may&#58</a>;
530-Login incorrect. &#58; globus_gss_assist&#58; Error invoking callout
530-globus_callout_module&#58; The callout returned an error
530-an unknown error occurred
530 End.

debug&#58; fault on connection to <a href='gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/test7may' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu//mnt/hadoop/tmp/test7may</a>
debug&#58; data callback, error globus_ftp_client&#58; the server responded with an error, buffer 0x2b7fa5db5010, length 0, offset=0, eof=true
debug&#58; operation complete

error&#58; globus_ftp_client&#58; the server responded with an error
530 530-Login incorrect. &#58; globus_gss_assist&#58; Error invoking callout
530-globus_callout_module&#58; The callout returned an error
530-an unknown error occurred
530 End.

-- by Jack Fowler</pre></div><div class='update_description'><i onclick="document.location='12090#1336419891'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-07T19:44:51+00:00">May 7, 2012 07:44 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1336419891">&nbsp;</a></div><pre>[by Jack Fowler]

Srm copy fails with the error below. I&#39;ve had no success trouble shooting so far.
thanks,
Jack

[fowler@brux3 ~]$ srm-copy file&#58;///home/fowler/testlcgfile <a href='srm&#58;//srm.hep.brown.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/store/testfile7may12' target='_blank' rel='nofollow'>srm&#58;//srm.hep.brown.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/store/testfile7may12</a>
srm-copy   2.2.2.2.0  Wed Dec 14 11&#58;45&#58;28 PST 2011
BeStMan and SRM-Clients Copyright(c) 2007-2011,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>

Built on koji-hub at 01/31/2012 14&#58;04&#58;29 CST

SRM-CLIENT&#58; Mon May 07 14&#58;51&#58;15 EDT 2012 Connecting to httpg&#58;//srm.hep.brown.edu&#58;8443/srm/v2/server

SRM-CLIENT&#58; Mon May 07 14&#58;51&#58;15 EDT 2012 Calling SrmPrepareToPutRequest now ...
request.token= put&#58;1
Request.status=SRM_SUCCESS
explanation=null

SRM-CLIENT&#58; RequestFileStatus for SURL=file&#58;///home/fowler/testlcgfile is Ready.
SRM-CLIENT&#58; received TURL=<a href='gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/testfile7may12' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/testfile7may12</a>

SRM-CLIENT&#58; Mon May 07 14&#58;51&#58;20 EDT 2012 start file transfer
SRM-CLIENT&#58;Source=file&#58;////home/fowler/testlcgfile
SRM-CLIENT&#58;Target=<a href='gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/testfile7may12' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/testfile7may12</a>
org.globus.ftp.exception.ServerException&#58; Server refused performing the request. Custom message&#58; Bad password. (error code 1) [Nested exception message&#58;  Custom message&#58; Unexpected reply&#58; 530-Login incorrect. &#58; globus_gss_assist&#58; Error invoking callout
530-globus_callout_module&#58; The callout returned an error
530-an unknown error occurred
530 End.] [Nested exception is org.globus.ftp.exception.UnexpectedReplyCodeException&#58;  Custom message&#58; Unexpected reply&#58; 530-Login incorrect. &#58; globus_gss_assist&#58; Error invoking callout
530-globus_callout_module&#58; The callout returned an error
530-an unknown error occurred
530 End.]
org.globus.ftp.exception.ServerException&#58; Server refused performing the request. Custom message&#58; Bad password. (error code 1) [Nested exception message&#58;  Custom message&#58; Unexpected reply&#58; 530-Login incorrect. &#58; globus_gss_assist&#58; Error invoking callout
<div id='show_1143395610' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1143395610'>530-globus_callout_module&#58; The callout returned an error
530-an unknown error occurred
530 End.].  Nested exception is org.globus.ftp.exception.UnexpectedReplyCodeException&#58;  Custom message&#58; Unexpected reply&#58; 530-Login incorrect. &#58; globus_gss_assist&#58; Error invoking callout
530-globus_callout_module&#58; The callout returned an error
530-an unknown error occurred
530 End.
at org.globus.ftp.extended.GridFTPControlChannel.authenticate(GridFTPControlChannel.java&#58;294)
at org.globus.ftp.GridFTPClient.authenticate(GridFTPClient.java&#58;120)
at org.globus.ftp.GridFTPClient.authenticate(GridFTPClient.java&#58;96)
at gov.lbl.srm.client.transfer.globus.SRMGridFTP.put(SRMGridFTP.java&#58;936)
at gov.lbl.srm.client.transfer.globus.SRMGridFTP.transferSync(SRMGridFTP.java&#58;562)
at gov.lbl.srm.client.transfer.globus.SRMFileTransfer.transferSync(SRMFileTransfer.java&#58;270)
at gov.lbl.srm.client.transfer.globus.SRMFileTransfer.run(SRMFileTransfer.java&#58;217)
SRM-CLIENT&#58; Mon May 07 14&#58;51&#58;21 EDT 2012 gsiftp transfer failed and error occured

SRM-CLIENT&#58; Mon May 07 14&#58;51&#58;21 EDT 2012 Calling abortFiles

SRM-CLIENT&#58; ### Output of SRM ###
status=SRM_NOT_SUPPORTED
explanation=Gateway mode does not support this function

SRM-CLIENT&#58; Request completed with failure

SRM-CLIENT&#58; Printing text report now ...

SRM-CLIENT*REQUESTTYPE=put
SRM-CLIENT*TOTALFILES=1
SRM-CLIENT*TOTAL_SUCCESS=0
SRM-CLIENT*TOTAL_FAILED=1
SRM-CLIENT*REQUEST_TOKEN=put&#58;1
SRM-CLIENT*REQUEST_STATUS=SRM_FAILURE
SRM-CLIENT*SOURCEURL[0]=file&#58;///home/fowler/testlcgfile
SRM-CLIENT*TARGETURL[0]=<a href='srm&#58;//srm.hep.brown.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/store/testfile7may12' target='_blank' rel='nofollow'>srm&#58;//srm.hep.brown.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/store/testfile7may12</a>
SRM-CLIENT*TRANSFERURL[0]=<a href='gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/testfile7may12' target='_blank' rel='nofollow'>gsiftp&#58;//brux4.hep.brown.edu&#58;2811//mnt/hadoop/store/testfile7may12</a>
SRM-CLIENT*ACTUALSIZE[0]=386
SRM-CLIENT*FILE_STATUS[0]=SRM_SPACE_AVAILABLE
SRM-CLIENT*MESSAGE[0]=org.globus.ftp.exception.ServerException&#58; Server refused performing the request. Custom message&#58; Bad password. (error code 1) [Nested exception message&#58;  Custom message&#58; Unexpected reply&#58; 530-Login incorrect. &#58; globus_gss_assist&#58; Error invoking callout
530-globus_callout_module&#58; The callout returned an error
530-an unknown error occurred
530 End.] [Nested exception is org.globus.ftp.exception.UnexpectedReplyCodeException&#58;  Custom message&#58; Unexpected reply&#58; 530-Login incorrect. &#58; globus_gss_assist&#58; Error invoking callout
530-globus_callout_module&#58; The callout returned an error
530-an unknown error occurred
530 End.]
</div><script type='text/javascript'>
        $('#show_1143395610').click(function() {
            $('#detail_1143395610').slideDown("normal");
            $('#show_1143395610').hide();
            $('#hide_1143395610').show();
        });
        $('#hide_1143395610').click(function() {
            $('#detail_1143395610').slideUp();
            $('#hide_1143395610').hide();
            $('#show_1143395610').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F12090">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 12090});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
