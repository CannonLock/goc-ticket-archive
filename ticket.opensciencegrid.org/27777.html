<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[27777] Enable UNIBE-LHEP in ITB factory</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=27777" method="post">
<div class="page-header">
    <h3><span class="muted">27777</span> / Enable UNIBE-LHEP in ITB factory</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Bodhitha Jayatilaka</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">UCSD glidein</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">MIS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Bodhitha Jayatilaka</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">osg-glidein-factory</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">WIP</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-01-26</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG Glidein Factory Support <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/27777", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/27777?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/27777?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Enable%20UNIBE-LHEP%20in%20ITB%20factory%20ISSUE%3D27777%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='27777#1458759076'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-23T18:51:16+00:00">Mar 23, 2016 06:51 PM UTC</time> by <b>kirby@....</b><a class="anchor" name="1458759076">&nbsp;</a></div><pre>yes, please close the ticket.

- Kirby

<font color='#7F7E6F'>&#62; On Mar 23, 2016, at 12&#58;04 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27777#1458751050'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-23T16:37:30+00:00">Mar 23, 2016 04:37 PM UTC</time><a class="anchor" name="1458751050">&nbsp;</a></div><pre>The site is in production from the uboone perspective so I do think we can close the ticket.

Bo

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='27777#1458750719'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-23T16:31:59+00:00">Mar 23, 2016 04:31 PM UTC</time><a class="anchor" name="1458750719">&nbsp;</a></div><pre>Hi all,

It looks like this is a dangling ticket. Can we close it?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27777#1453843260'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-26T21:21:00+00:00">Jan 26, 2016 09:21 PM UTC</time><a class="anchor" name="1453843260">&nbsp;</a></div><pre>Kirby et al.,

I&#39;ve been able to confirm glideins are able to run user jobs through ce02 as well. However, I confirmed this from jobs that came from joelam@.....

There are some relatively large blocks of missing glidein logs on both the GOC and SDSC factories for both the ce01 and ce02 entries, which I assume are associated with the test jobs you sent through the other day, but did not make it back to us for some reason. This usually occurs when the glideins don&#39;t properly clean themselves up for whatever reason when they shutdown. I&#39;m not sure if this is worth investigating further at this time since it may only be particular to your test jobs, which you say completed fine on your end. But I&#39;m curious if and/or what you might have changed in this last batch of test jobs from the original ones that would cause this change in behavior?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27777#1453494370'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-22T20:26:10+00:00">Jan 22, 2016 08:26 PM UTC</time> by <b>kirby@....</b><a class="anchor" name="1453494370">&nbsp;</a></div><pre>I wanted to say that of the 200 job sections that I submitted yesterday, 199 of them have completed successfully. Not sure about the 200th, but I’m willing to ignore that if you had a chance to see successful glideins on ce02.

Cheers,
Kirby

<font color='#7F7E6F'>&#62; On Jan 20, 2016, at 4&#58;43 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27777#1453415359'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-21T22:29:19+00:00">Jan 21, 2016 10:29 PM UTC</time><a class="anchor" name="1453415359">&nbsp;</a></div><pre>Kirby,

Yeah, that should be more than enough as long as the Fermilab frontend routes the jobs to glideins submitted to both CEs. I assume it will, but that&#39;s what we want to confirm. Let us know when you see this next batch of test jobs complete on your end. We&#39;ll then check the glidein logs again. If all looks good, we can probably close out the ticket then.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27777#1453409232'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-21T20:47:12+00:00">Jan 21, 2016 08:47 PM UTC</time> by <b>kirby@....</b><a class="anchor" name="1453409232">&nbsp;</a></div><pre>Hi Marty,

Thanks for confirmation that ce01 is working. If I submit about 200 similar sections do you think that is enough to have one of the sections end up on ce02?

Cheers,
Kirby

<font color='#7F7E6F'>&#62; On Jan 21, 2016, at 2&#58;39 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27777#1453408777'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-21T20:39:37+00:00">Jan 21, 2016 08:39 PM UTC</time><a class="anchor" name="1453408777">&nbsp;</a></div><pre>Michael,

I was able to confirm two of your jobs ran through ce01.lhep.unibe.ch, one on a glidein from the GOC factory (glidein.grid.iu.edu) and one on a glidein from the SDSC factory (gfactory-1.t2.ucsd.edu). Is there anyway you can force a batch of test jobs through ce02.lhep.unibe.ch as well? If not, maybe simply send a larger batch of jobs through so they land on glideins submitted through both gatekeepers? Just want to make sure we&#39;ve got everything working on both systems.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27777#1453349650'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-21T04:14:10+00:00">Jan 21, 2016 04:14 AM UTC</time><a class="anchor" name="1453349650">&nbsp;</a></div><pre>I submitted a test job with two sections this evening. One of the sections completed successfully and the other section is still running. If there is a problem with the second section, I&#39;ll update, but from the initial run it seems that things are fine.

- Kirby

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Michael Kirby 1892</pre></div><div class='update_description'><i onclick="document.location='27777#1453329825'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-20T22:43:45+00:00">Jan 20, 2016 10:43 PM UTC</time><a class="anchor" name="1453329825">&nbsp;</a></div><pre>Ken or Kirby, can you send a uboone test job the way of Bern again?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='27777#1453233095'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-19T19:51:35+00:00">Jan 19, 2016 07:51 PM UTC</time><a class="anchor" name="1453233095">&nbsp;</a></div><pre>Bo,

Can you resubmit some uboone test jobs for us when you get a chance?

Thanks,

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27777#1453220950'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-19T16:29:10+00:00">Jan 19, 2016 04:29 PM UTC</time> by <b>Bern</b><a class="anchor" name="1453220950">&nbsp;</a></div><pre>Hi Marty,

earlier today I have spotted a typo in a config file that would results in uboone jobs being rejected by ce02. I have now corrected it, so all should finally be fine. Apologies for the inconvenience.

cheers
Gianfranco

<font color='#7F7E6F'>&#62; On 13 Jan 2016, at 19&#58;23, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27777#1452709399'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-13T18:23:19+00:00">Jan 13, 2016 06:23 PM UTC</time><a class="anchor" name="1452709399">&nbsp;</a></div><pre>Gianfranco,

Thanks for the information. I think we&#39;re just missing the cert directory in the factory config for ce02. Let me just check in with Jeff since he was trying out some thing with the ce02 config, but I think that&#39;s the issue. We&#39;ll get back to you once we have another go at it.

Thanks,

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27777#1452701118'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-13T16:05:18+00:00">Jan 13, 2016 04:05 PM UTC</time> by <b>Bern</b><a class="anchor" name="1452701118">&nbsp;</a></div><pre>Hi Marty,

for ce02.lhep.unibe.ch &#60;<a href='http&#58;//ce02.lhep.unibe.ch/&#62' target='_blank' rel='nofollow'>http&#58;//ce02.lhep.unibe.ch/&#62</a>;, the configuration is the same as for ce01.lhep.unibe.ch &#60;<a href='http&#58;//ce01.lhep.unibe.ch/&#62' target='_blank' rel='nofollow'>http&#58;//ce01.lhep.unibe.ch/&#62</a>;&#58;

<font color='#7F7E6F'>&#62; 1. Are you also expecting (runtimeenvironment=APPS/HEP/UBOONE-OSG-WN-CLIENT-3.3) to be in the RSL here as well?</font>
<font color='#7F7E6F'>&#62;</font>
yes, I have placed the RTE in the same location

<font color='#7F7E6F'>&#62; 2. Where do you have the glideins landing? In this case, I&#39;m wondering now if we actually need to use TMPDIR instead of . as the work_dir.</font>
<font color='#7F7E6F'>&#62;</font>
as on ce01.lhep, . is suitable as work_dir. The glideins land on the shared file system, in directories named according to this scheme&#58;
/grid/lustre/session/&#60;arc jobid&#62;

TMPDIR resolves to /tmp and is not suitable to hold the work_dir (limited size partition).

<font color='#7F7E6F'>&#62; 3. Where are the certs located? Should we also explicitly set X509_CERT_DIR = /etc/grid-security/certificates here for the time being as well?</font>
<font color='#7F7E6F'>&#62;</font>
yes, /etc/grid-security/certificates is available on all nodes.

Let me know what the outstanding issues are. From my checks all seems to be in place, but there might be something I am not thinking of  right now.

Cheers
Gianfranco

<font color='#7F7E6F'>&#62; On 12 Jan 2016, at 21&#58;13, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27777#1452630141'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-12T20:22:21+00:00">Jan 12, 2016 08:22 PM UTC</time><a class="anchor" name="1452630141">&nbsp;</a></div><pre>Hi,

Yes, if the OSG software stack isn&#39;t getting set up for jobs that come through ce02, the uboone jobs will fail.

Ken

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='27777#1452629616'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-12T20:13:36+00:00">Jan 12, 2016 08:13 PM UTC</time><a class="anchor" name="1452629616">&nbsp;</a></div><pre>Gianfranco,

A few quick questions regarding the configuration for the ce02.lhep.unibe.ch gatekeeper ...

1. Are you also expecting (runtimeenvironment=APPS/HEP/UBOONE-OSG-WN-CLIENT-3.3) to be in the RSL here as well?
2. Where do you have the glideins landing? In this case, I&#39;m wondering now if we actually need to use TMPDIR instead of . as the work_dir.
3. Where are the certs located? Should we also explicitly set X509_CERT_DIR = /etc/grid-security/certificates here for the time being as well?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27777#1452629108'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-12T20:05:08+00:00">Jan 12, 2016 08:05 PM UTC</time><a class="anchor" name="1452629108">&nbsp;</a></div><pre>Ken,

It looks like you may have some Fermilab/microboone jobs waiting to run on glideins at both ce01 and ce02. Please let us know if these user jobs are successful. We&#39;ve been seeing nearly all glideins reporting they are going unmatched with user jobs at ce01 and all glideins simply waiting at the factories to be submitted to the ce02 gatekeeper.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27777#1452534437'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-11T17:47:17+00:00">Jan 11, 2016 05:47 PM UTC</time><a class="anchor" name="1452534437">&nbsp;</a></div><pre>Hi,

Yes, I think we&#39;re very close. I have just one more question and that is what the settings are for how long a glidein will wait for new jobs before giving up and shutting down. Is that set or will the glidein sit around waiting until its lifetime expires?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='27777#1452524802'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-11T15:06:42+00:00">Jan 11, 2016 03:06 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1452524802">&nbsp;</a></div><pre>Greetings all,

It appears all items have been resolved.  Please advise.

Thank you,</pre></div><div class='update_description'><i onclick="document.location='27777#1452158048'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-07T09:14:08+00:00">Jan 7, 2016 09:14 AM UTC</time> by <b>Bern</b><a class="anchor" name="1452158048">&nbsp;</a></div><pre>Hi, both service are up and running jobs. There has been no interruption to the services in the recent days.

Cheers
Gianfranco

<font color='#7F7E6F'>&#62; On 07 Jan 2016, at 07&#58;49, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27777#1452149358'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-07T06:49:18+00:00">Jan 7, 2016 06:49 AM UTC</time><a class="anchor" name="1452149358">&nbsp;</a></div><pre>I&#39;ve been checking on Jeff&#39;s tests throughout the day, but it looks like something happened to the CEs as the factory is currently reporting them as being down [1][2]. Is the site currently experiencing an outage?

Brendan Dennis
UCSD Glidein Factory Operations

[1]
020 (205872.000.000) 01/07 00&#58;22&#58;43 Detected Down Globus Resource
RM-Contact&#58; ce01.lhep.unibe.ch
...
026 (205872.000.000) 01/07 00&#58;22&#58;43 Detected Down Grid Resource
GridResource&#58; nordugrid ce01.lhep.unibe.ch

[2]
020 (238249.000.000) 01/07 00&#58;22&#58;44 Detected Down Globus Resource
RM-Contact&#58; ce02.lhep.unibe.ch
...
026 (238249.000.000) 01/07 00&#58;22&#58;44 Detected Down Grid Resource
GridResource&#58; nordugrid ce02.lhep.unibe.ch

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='27777#1452105264'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-06T18:34:24+00:00">Jan 6, 2016 06:34 PM UTC</time><a class="anchor" name="1452105264">&nbsp;</a></div><pre>Hi,

I&#39;m not really sure who the best person would be (Bo is on vacation right now.) My uneducated guess is that it might be because it&#39;s a symlink&#58;

$ ls -l /cvmfs/oasis.opensciencegrid.org/mis/osg-wn-client/3.3/3.3.7/el6-x86_64/etc/grid-security/certificates/74a04bb6.signing_policy
lrwxrwxrwx 1 cvmfs cvmfs 38 Dec  8 12&#58;21 /cvmfs/oasis.opensciencegrid.org/mis/osg-wn-client/3.3/3.3.7/el6-x86_64/etc/grid-security/certificates/74a04bb6.signing_policy -&#62; DigiCertGridRootCA-Root.signing_policy

I see Vince is assigned to this ticket; maybe he has an idea?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='27777#1452104970'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-06T18:29:30+00:00">Jan 6, 2016 06:29 PM UTC</time><a class="anchor" name="1452104970">&nbsp;</a></div><pre>Hi Ken, Gianfranco,

This is great news. I&#39;ll update our ce02 entry with our recent changes as well and after a quick test, will push these entries to the production factories.

Keep in mind however we stil have the issue with the mis cvmfs path, and I have a workaround in our config I&#39;d like to remove, but someone from OSG will have to help us understand why this path appeared to be mangled&#58;

/cvmfs/oasis.opensciencegrid.org/mis/osg-wn-client/3.3/3.3.7/el6-x86_64/etc/grid-security/certificates/74a04bb6.signing_policy

Ken or Bo, do you know who can help us with this?

Thanks,
Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='27777#1451987229'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-05T09:47:09+00:00">Jan 5, 2016 09:47 AM UTC</time> by <b>Bern</b><a class="anchor" name="1451987229">&nbsp;</a></div><pre>Hi,

in the meanwhile, also ce02.lhep.unibe.ch is enabled following re-installation. Please run some tests first in case it needs some tweaking.

Thanks and cheers
Gianfranco

<font color='#7F7E6F'>&#62; On 30 Dec 2015, at 18&#58;09, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27777#1451495361'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-30T17:09:21+00:00">Dec 30, 2015 05:09 PM UTC</time><a class="anchor" name="1451495361">&nbsp;</a></div><pre>Hi everyone,

My latest test from yesterday appears to have worked! I&#39;m asking some other uboone users to submit somewhat more realistic jobs now to see what happens.

Ken

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='27777#1450910238'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-23T22:37:18+00:00">Dec 23, 2015 10:37 PM UTC</time><a class="anchor" name="1450910238">&nbsp;</a></div><pre>That is strange, it&#39;s like a circular symlink.  I&#39;m thinking someone from OSG who has access to the mis cvmfs will have to check, maybe the certs dir got corrupted somehow from the origin server. Bo or Ken do you know who maintains this?

In the meantime I&#39;m temporarily overwriting the X509_CERT_DIR env var in the pilots to point directly to /etc/grid-security/certificates.

Hopefully this workaround will get us farther.

Thanks,
Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='27777#1450901710'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-23T20:15:10+00:00">Dec 23, 2015 08:15 PM UTC</time> by <b>Bern</b><a class="anchor" name="1450901710">&nbsp;</a></div><pre>Hi Jeff,

if the pilot moves the proxy, then I agree that is not the issue. Looking at the “certificates” directory off cvmfs, I see something weird [1] Do you understand it? I have also checked on a pristine cache to rule out unexpected side issues due to e.g. cache near full.

In case it helps or simplifies the setup, on these systems we do actually mount a shared certificates directory on
/etc/grid-security/certificates

so we can have e.g. [2].

cheers
Gianfranco

[1]
[root@wn-2-1 ~]# cd /cvmfs/oasis.opensciencegrid.org/mis/osg-wn-client/3.3/3.3.7/el6-x86_64/etc/grid-security/certificates
[root@wn-2-1 certificates]# ll -alrt
total 16
-rw-r--r--  1 cvmfs cvmfs 1772 Jun 30 02&#58;27 gsi.conf
drwxr-xr-x 49 cvmfs cvmfs 4096 Dec 11 20&#58;45 vomsdir
drwxr-xr-x 11 cvmfs cvmfs 4096 Dec 15 15&#58;58 ..
drwxr-xr-x  3 cvmfs cvmfs 4096 Dec 15 15&#58;58 .
lrwxrwxrwx  1 cvmfs cvmfs    0 Dec 23 19&#58;26 certificates -&#62;
[root@wn-2-1 certificates]# cd certificates/
[root@wn-2-1 certificates]# ll
total 7
lrwxrwxrwx  1 cvmfs cvmfs    0 Dec 23 19&#58;26 certificates -&#62;
-rw-r--r--  1 cvmfs cvmfs 1772 Jun 30 02&#58;27 gsi.conf
drwxr-xr-x 49 cvmfs cvmfs 4096 Dec 11 20&#58;45 vomsdir
[root@wn-2-1 certificates]# pwd
/cvmfs/oasis.opensciencegrid.org/mis/osg-wn-client/3.3/3.3.7/el6-x86_64/etc/grid-security/certificates/certificates
[root@wn-2-1 certificates]# cd certificates/
[root@wn-2-1 certificates]# ll
total 7
lrwxrwxrwx  1 cvmfs cvmfs    0 Dec 23 19&#58;26 certificates -&#62;
-rw-r--r--  1 cvmfs cvmfs 1772 Jun 30 02&#58;27 gsi.conf
drwxr-xr-x 49 cvmfs cvmfs 4096 Dec 11 20&#58;45 vomsdir
<div id='show_189519109' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_189519109'>[root@wn-2-1 certificates]# pwd
/cvmfs/oasis.opensciencegrid.org/mis/osg-wn-client/3.3/3.3.7/el6-x86_64/etc/grid-security/certificates/certificates/certificates
[root@wn-2-1 certificates]# file certificates
certificates&#58; unreadable symlink &#96;certificates&#39; (No such file or directory)
[root@wn-2-1 certificates]#

[root@wn-2-1 certificates]# ll /cvmfs/oasis.opensciencegrid.org/mis/osg-wn-client/3.3/3.3.7/el6-x86_64/etc/grid-security/certificates/74a04bb6.signing_policy
ls&#58; cannot access /cvmfs/oasis.opensciencegrid.org/mis/osg-wn-client/3.3/3.3.7/el6-x86_64/etc/grid-security/certificates/74a04bb6.signing_policy&#58; No such file or directory

[2]
[root@wn-2-105 certificates]# pwd
/etc/grid-security/certificates
[root@wn-2-105 certificates]# ll *74a04bb6*
lrwxrwxrwx 1 root root  27 Dec  4 10&#58;27 74a04bb6.0 -&#62; DigiCertGridRootCA-Root.pem
lrwxrwxrwx 1 root root  34 Dec  4 10&#58;27 74a04bb6.namespaces -&#62; DigiCertGridRootCA-Root.namespaces
-rw-r--r-- 1 root root 784 Dec 23 18&#58;45 74a04bb6.r0
lrwxrwxrwx 1 root root  38 Dec  4 10&#58;27 74a04bb6.signing_policy -&#62; DigiCertGridRootCA-Root.signing_policy

<font color='#7F7E6F'>&#62; On 23 Dec 2015, at 18&#58;49, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_189519109').click(function() {
            $('#detail_189519109').slideDown("normal");
            $('#show_189519109').hide();
            $('#hide_189519109').show();
        });
        $('#hide_189519109').click(function() {
            $('#detail_189519109').slideUp();
            $('#hide_189519109').hide();
            $('#show_189519109').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27777#1450892961'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-23T17:49:21+00:00">Dec 23, 2015 05:49 PM UTC</time><a class="anchor" name="1450892961">&nbsp;</a></div><pre>Hi,

Actually today is looking much better, our pilots are able to start condor now. However now condor is failing due to what looks like missing ca certs [1]

Gianfranco, this is what I see for the ca cert location environment variable, it&#39;s using cvmfs.  Is this correct?
X509_CERT_DIR=/cvmfs/oasis.opensciencegrid.org/mis/osg-wn-client/3.3/3.3.7/el6-x86_64/etc/grid-security/certificates

Can you please check the path our pilots are complaining about?  Maybe the certs need updating, or perhaps a file permission issue?

Thanks,
Jeff

p.s. our pilots move the X509 proxy to the current working dir, and from a previous comment it looks like this is the correct location for running our jobs?
PWD=/grid/lustre/session/t3YLDm8T2VnnIpaMunWlKAupABFKDmABFKDmPILKDmABFKDmNnBmhn

I don&#39;t think I can manually override the location for X509_USER_PROXY, that part of the glidein code is not configurable. In any case I don&#39;t think this is causing us problems, its more the CA cert issue above at this point.

[1]
12/23/15 18&#58;35&#58;00 (pid&#58;23118) DaemonCore&#58; private command socket at &#60;10.1.255.91&#58;46680&#62;
12/23/15 18&#58;35&#58;00 (pid&#58;23118) Condor GSI authentication failure
GSS Major Status&#58; Authentication Failed
GSS Minor Status Error Chain&#58;
globus_gss_assist&#58; Error during context initialization
globus_gsi_callback_module&#58; Error with signing policy
globus_sysconfig&#58; Error getting signing policy file
globus_sysconfig&#58; File does not exist&#58; /cvmfs/oasis.opensciencegrid.org/mis/osg-wn-client/3.3/3.3.7/el6-x86_64/etc/grid-security/certificates/74a04bb6.signing_policy is not a valid file

12/23/15 18&#58;35&#58;00 (pid&#58;23118) SECMAN&#58; required authentication with collector fermicloud122.fnal.gov&#58;9629 failed, so aborting command CCB_REGISTER.
12/23/15 18&#58;35&#58;00 (pid&#58;23118) ERROR&#58; AUTHENTICATE&#58;1003&#58;Failed to authenticate with any method|AUTHENTICATE&#58;1004&#58;Failed to authenticate using GSI|GSI&#58;5004&#58;Failed to authenticate.  Globus is reporting error (655360&#58;15)
12/23/15 18&#58;35&#58;00 (pid&#58;23118) CCBListener&#58; connection to CCB server fermicloud122.fnal.gov&#58;9629 failed; will try to reconnect in 60 seconds.
12/23/15 18&#58;35&#58;01 (pid&#58;23118) Condor GSI authentication failure
GSS Major Status&#58; Authentication Failed
GSS Minor Status Error Chain&#58;
globus_gss_assist&#58; Error during context initialization
globus_gsi_callback_module&#58; Error with signing policy
<div id='show_1122446234' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1122446234'>globus_sysconfig&#58; Error getting signing policy file
globus_sysconfig&#58; File does not exist&#58; /cvmfs/oasis.opensciencegrid.org/mis/osg-wn-client/3.3/3.3.7/el6-x86_64/etc/grid-security/certificates/74a04bb6.signing_policy is not a valid file

12/23/15 18&#58;35&#58;01 (pid&#58;23118) SECMAN&#58; required authentication with collector fermicloud089.fnal.gov&#58;9629 failed, so aborting command CCB_REGISTER.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost
</div><script type='text/javascript'>
        $('#show_1122446234').click(function() {
            $('#detail_1122446234').slideDown("normal");
            $('#show_1122446234').hide();
            $('#hide_1122446234').show();
        });
        $('#hide_1122446234').click(function() {
            $('#detail_1122446234').slideUp();
            $('#hide_1122446234').hide();
            $('#show_1122446234').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27777#1450883711'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-23T15:15:11+00:00">Dec 23, 2015 03:15 PM UTC</time> by <b>Bern</b><a class="anchor" name="1450883711">&nbsp;</a></div><pre>Hi Jeff, Ken,

It turns out that my modification to the RTE last night resulted in broken job submission tot he LRMS. sorry about this. Earlier I have restored the RTE version that I believe is the correct one and I see jobs running on the LRMS now. I have noticed that the proxy location is not correct. Right now it is set to&#58;

X509_USER_PROXY=/grid/lustre/session/&#60;GridJobId&#62;/user.proxy

It should be the following&#58;
X509_USER_PROXY=/var/spool/nordugrid/jobstatus/job.&#60;GridJobId&#62;.proxy

I would suggest to change this and check whether this has a positive effect.

Also the runtimeenvironment declaration seems sane&#58; (&#34;runtimeenvironment&#34; = &#34;APPS/HEP/UBOONE-OSG-WN-CLIENT-3.3&#34; )

I have also noticed that one more RTE is requested in the job description&#58; (&#34;runtimeenvironment&#34; = &#34;ENV/PROXY&#34; )

I am not sure about this, I  ask since I only see a handful of other jobs specifying it, which seem to be automated test jobs, which I have no idea whether they succeed or not.

Cheers
Gianfranco

[1]
[root@ce01 arc]# grep nYPNDmsSmVnnIpaMunWlKAupABFKDmABFKDmk5HKDmABFKDm4niRgm grid-manager.log*
grid-manager.log-20151223&#58;[2015-12-23 01&#58;28&#58;07] [Arc] [INFO] [10093/3] nYPNDmsSmVnnIpaMunWlKAupABFKDmABFKDmk5HKDmABFKDm4niRgm&#58; State&#58; ACCEPTED&#58; parsing job description
grid-manager.log-20151223&#58;[2015-12-23 01&#58;28&#58;07] [Arc] [INFO] [10093/3] nYPNDmsSmVnnIpaMunWlKAupABFKDmABFKDmk5HKDmABFKDm4niRgm&#58; State&#58; ACCEPTED&#58; moving to PREPARING

grid-manager.log-20151223&#58;[2015-12-23 01&#58;28&#58;07] [Arc] [INFO] [10093/3] nYPNDmsSmVnnIpaMunWlKAupABFKDmABFKDmk5HKDmABFKDm4niRgm&#58; State&#58; PREPARING from ACCEPTED
grid-manager.log-20151223&#58;[2015-12-23 01&#58;28&#58;10] [Arc] [INFO] [10093/3] nYPNDmsSmVnnIpaMunWlKAupABFKDmABFKDmk5HKDmABFKDm4niRgm&#58; State&#58; SUBMIT from PREPARING
grid-manager.log-20151223&#58;[2015-12-23 01&#58;28&#58;10] [Arc] [INFO] [10093/3] nYPNDmsSmVnnIpaMunWlKAupABFKDmABFKDmk5HKDmABFKDm4niRgm&#58; state SUBMIT&#58; starting child&#58; /usr/share/arc/submit-SLURM-job
grid-manager.log-20151223&#58;[2015-12-23 01&#58;28&#58;14] [Arc] [INFO] [10093/3] nYPNDmsSmVnnIpaMunWlKAupABFKDmABFKDmk5HKDmABFKDm4niRgm&#58; state SUBMIT&#58; child exited with code 1
grid-manager.log-20151223&#58;[2015-12-23 01&#58;28&#58;14] [Arc] [ERROR] [10093/3] nYPNDmsSmVnnIpaMunWlKAupABFKDmABFKDmk5HKDmABFKDm4niRgm&#58; Job submission to LRMS failed
grid-manager.log-20151223&#58;[2015-12-23 01&#58;28&#58;14] [Arc] [ERROR] [10093/3] nYPNDmsSmVnnIpaMunWlKAupABFKDmABFKDmk5HKDmABFKDm4niRgm&#58; Job failure detected
grid-manager.log-20151223&#58;[2015-12-23 01&#58;28&#58;14] [Arc] [INFO] [10093/3] nYPNDmsSmVnnIpaMunWlKAupABFKDmABFKDmk5HKDmABFKDm4niRgm&#58; State&#58; FINISHING from SUBMIT
grid-manager.log-20151223&#58;[2015-12-23 01&#58;28&#58;18] [Arc] [ERROR] [10093/3] nYPNDmsSmVnnIpaMunWlKAupABFKDmABFKDmk5HKDmABFKDm4niRgm&#58; Job failure detected
grid-manager.log-20151223&#58;[2015-12-23 01&#58;28&#58;18] [Arc] [INFO] [10093/3] nYPNDmsSmVnnIpaMunWlKAupABFKDmABFKDmk5HKDmABFKDm4niRgm&#58; State&#58; FINISHED from FINISHING

<div id='show_9279805' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_9279805'>[2]
grid-manager.log-20151223&#58;[2015-12-22 22&#58;37&#58;55] [Arc] [ERROR] [10093/3] FX7NDm3njVnnIpaMunWlKAupABFKDmABFKDmaGLKDmABFKDmO1UVfn&#58; Job submission to LRMS failed

[3]
[root@ce01 arc]# cat /tmp/job.yieMDmdznVnnIpaMunWlKAupABFKDmABFKDm2AJKDmABFKDmVLyRZm.failed
User file&#58; /.gahp_complete - Timeout waiting
User file&#58; /glidein_startup.sh - Timeout waiting

<font color='#7F7E6F'>&#62; On 23 Dec 2015, at 02&#58;02, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_9279805').click(function() {
            $('#detail_9279805').slideDown("normal");
            $('#show_9279805').hide();
            $('#hide_9279805').show();
        });
        $('#hide_9279805').click(function() {
            $('#detail_9279805').slideUp();
            $('#hide_9279805').hide();
            $('#show_9279805').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27777#1450832550'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-23T01:02:30+00:00">Dec 23, 2015 01:02 AM UTC</time><a class="anchor" name="1450832550">&nbsp;</a></div><pre>Unfortunately it looks like gildeins are failing on the order of seconds, and we don&#39;t get any logs back.

I suspect something is still wrong with
runtimeenvironment = &#34;APPS/HEP/UBOONE-OSG-WN-CLIENT-3.3&#34;

now that the factory is configured to use this in the rsl.  Gianfranco, can you please track any of our pilots on your CE side, maybe you get some interesting log info on your end?  It looks like our pilots keep getting assigned a new grid id each time it fails, below [1] is what our failures look like.

Below [2] are a few more grid job id&#39;s this job was assigned to, if that helps track it down, times are in UTC.  Also for completeness, the proxy we use to submit [3].

Thanks,
Jeff

[1]
027 (109153.000.000) 12/22 23&#58;53&#58;12 Job submitted to grid resource
GridResource&#58; nordugrid ce01.lhep.unibe.ch
GridJobId&#58; nordugrid ce01.lhep.unibe.ch XMBNDm5ulVnnIpaMunWlKAupABFKDmABFKDmujHKDmABFKDmGNZ7Ym
...
001 (109153.000.000) 12/22 23&#58;56&#58;10 Job executing on host&#58; nordugrid ce01.lhep.unibe.ch
...
004 (109153.000.000) 12/22 23&#58;56&#58;13 Job was evicted.
(0) Job was not checkpointed.
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Run Remote Usage
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Run Local Usage
0  -  Run Bytes Sent By Job
0  -  Run Bytes Received By Job
...
012 (109153.000.000) 12/22 23&#58;56&#58;15 Job was held.
Unspecified gridmanager error
Code 0 Subcode 0
...
013 (109153.000.000) 12/23 00&#58;27&#58;59 Job was released.
via condor_release (by user gfactory)
...
027 (109153.000.000) 12/23 00&#58;28&#58;07 Job submitted to grid resource
GridResource&#58; nordugrid ce01.lhep.unibe.ch
<div id='show_1057081703' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1057081703'>GridJobId&#58; nordugrid ce01.lhep.unibe.ch nYPNDmsSmVnnIpaMunWlKAupABFKDmABFKDmk5HKDmABFKDm4niRgm
...

[2]
027 (109153.000.000) 12/22 22&#58;30&#58;48 Job submitted to grid resource
GridResource&#58; nordugrid ce01.lhep.unibe.ch
GridJobId&#58; nordugrid ce01.lhep.unibe.ch KsVMDmLdkVnnIpaMunWlKAupABFKDmABFKDmptMKDmABFKDmDqlWFm

027 (109153.000.000) 12/22 22&#58;51&#58;15 Job submitted to grid resource
GridResource&#58; nordugrid ce01.lhep.unibe.ch
GridJobId&#58; nordugrid ce01.lhep.unibe.ch 1a1KDm8wkVnnIpaMunWlKAupABFKDmABFKDmAgNKDmABFKDm4cIrTm

027 (109153.000.000) 12/22 23&#58;19&#58;09 Job submitted to grid resource
GridResource&#58; nordugrid ce01.lhep.unibe.ch
GridJobId&#58; nordugrid ce01.lhep.unibe.ch 623KDm8NlVnnIpaMunWlKAupABFKDmABFKDme2JKDmABFKDmZLWSam

[3]
subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov/CN=proxy
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov
identity  &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /var/lib/gwms-factory/client-proxies/user_fefermifife/glidein_gfactory_instance/credential_gwmsfrontend1-pp_OSG_gWMSFrontend.OSG_uboone_769663
timeleft  &#58; 263&#58;25&#58;00
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO fermilab extension information ===
VO        &#58; fermilab
subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=voms1.fnal.gov
attribute &#58; /fermilab/uboone/Role=pilot/Capability=NULL
attribute &#58; /fermilab/accelerator/Role=NULL/Capability=NULL
attribute &#58; /fermilab/annie/Role=NULL/Capability=NULL
attribute &#58; /fermilab/argoneut/Role=NULL/Capability=NULL
attribute &#58; /fermilab/cdms/Role=NULL/Capability=NULL
attribute &#58; /fermilab/chips/Role=NULL/Capability=NULL
attribute &#58; /fermilab/coupp/Role=NULL/Capability=NULL
attribute &#58; /fermilab/darkside/Role=NULL/Capability=NULL
attribute &#58; /fermilab/des/Role=NULL/Capability=NULL
attribute &#58; /fermilab/dune/Role=NULL/Capability=NULL
attribute &#58; /fermilab/genie/Role=NULL/Capability=NULL
attribute &#58; /fermilab/gm2/Role=NULL/Capability=NULL
attribute &#58; /fermilab/grid/Role=NULL/Capability=NULL
attribute &#58; /fermilab/lar1/Role=NULL/Capability=NULL
attribute &#58; /fermilab/lar1nd/Role=NULL/Capability=NULL
attribute &#58; /fermilab/lariat/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/accel/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/gm2/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/lbne/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/mu2e/Role=NULL/Capability=NULL
attribute &#58; /fermilab/minerva/Role=NULL/Capability=NULL
attribute &#58; /fermilab/miniboone/Role=NULL/Capability=NULL
attribute &#58; /fermilab/minos/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mu2e/Role=NULL/Capability=NULL
attribute &#58; /fermilab/nova/Role=NULL/Capability=NULL
attribute &#58; /fermilab/numix/Role=NULL/Capability=NULL
attribute &#58; /fermilab/patriot/Role=NULL/Capability=NULL
attribute &#58; /fermilab/seaquest/Role=NULL/Capability=NULL
attribute &#58; /fermilab/uboone/Role=NULL/Capability=NULL
attribute &#58; /fermilab/Role=NULL/Capability=NULL
timeleft  &#58; 19&#58;25&#58;00
uri       &#58; voms1.fnal.gov&#58;15001

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost
</div><script type='text/javascript'>
        $('#show_1057081703').click(function() {
            $('#detail_1057081703').slideDown("normal");
            $('#show_1057081703').hide();
            $('#hide_1057081703').show();
        });
        $('#hide_1057081703').click(function() {
            $('#detail_1057081703').slideUp();
            $('#hide_1057081703').hide();
            $('#show_1057081703').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27777#1450824405'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-22T22:46:45+00:00">Dec 22, 2015 10:46 PM UTC</time><a class="anchor" name="1450824405">&nbsp;</a></div><pre>Hi,

We don&#39;t see any glideins coming from UNIBE-LHEP right now. I&#39;m not sure if that is because something is now broken, or the cluster is just busy with other jobs.

Ken

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='27777#1450819988'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-22T21:33:08+00:00">Dec 22, 2015 09:33 PM UTC</time> by <b>Bern</b><a class="anchor" name="1450819988">&nbsp;</a></div><pre>Hi Ken,

[ runtimeenvironment = &#34;APPS/HEP/UBOONE-OSG-WN-CLIENT-3.3” ] seems sane to me. It might be the case it is not sourced at the right time. I have modified it slightly now, please report whether something has changed.

cheers
Gianfranco

<font color='#7F7E6F'>&#62; On 22 Dec 2015, at 22&#58;08, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27777#1450819828'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-22T21:30:28+00:00">Dec 22, 2015 09:30 PM UTC</time><a class="anchor" name="1450819828">&nbsp;</a></div><pre>runtimeenvironment = &#34;APPS/HEP/UBOONE-OSG-WN-CLIENT-3.3&#34; looks like something that instead we&#39;re supposed to put in the arc CE submission arguments on the factory side.

Ken, I just tried adding it to the entry config in the factory.  Please try submitting again.

Thanks,
Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='27777#1450818490'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-22T21:08:10+00:00">Dec 22, 2015 09:08 PM UTC</time><a class="anchor" name="1450818490">&nbsp;</a></div><pre>Hi

It turns out the problem was that it couldn&#39;t find globus-url-copy in the path. Either I messed something up in the condor command file when I put runtimeenvironment = &#34;APPS/HEP/UBOONE-OSG-WN-CLIENT-3.3&#34;, or it&#39;s simply the case that what that script does isn&#39;t also transferred into the environment of the user script. Gianfranco, can you verify that the string above is correct and contains no typos?

Thanks,

Ken

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='27777#1450818034'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-22T21:00:34+00:00">Dec 22, 2015 09:00 PM UTC</time> by <b>Bern</b><a class="anchor" name="1450818034">&nbsp;</a></div><pre>Hi Ken,

outbound traffic is unconstrained from our networks. Unless there is some campus-wide rule I am not aware of. Can you grab a log of a failed/stuck transfer? That way I will be able to investigate further.

Cheers
Gianfranco

<font color='#7F7E6F'>&#62; On 22 Dec 2015, at 20&#58;43, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27777#1450813410'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-22T19:43:30+00:00">Dec 22, 2015 07:43 PM UTC</time><a class="anchor" name="1450813410">&nbsp;</a></div><pre>Hi,

We are able to get some test jobs through successfully now. We have some other jobs that appear stuck. Without looking at the logs I would guess that they are most likely trying to copy their test output back to the Fermilab dCache area and running into problems, and then are going through various retry stages now. We have seen this before at some other sites and the problem was usually with outbound traffic being blocked. What port ranges are available to outbound traffic? Most of the uboone jobs will use Fermilab&#39;s &#34;ifdh&#34; program to copy their output back, which calls globus-url-copy and/or srmcp behind the scenes (mostly the former.)

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='27777#1450807389'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-22T18:03:09+00:00">Dec 22, 2015 06:03 PM UTC</time><a class="anchor" name="1450807389">&nbsp;</a></div><pre>Hi Jeff,

It looks like we were doing stuff at the same time. I changed my disk request down to 500 MB. I do see jobs running now, so this is good progress! I am not sure what the effect of the factory reconfig will be, so once this set of 500 MB jobs is done I&#39;ll send some new jobs with a more realistic (few tens of GB) disk request.

Ken

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='27777#1450807072'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-22T17:57:52+00:00">Dec 22, 2015 05:57 PM UTC</time><a class="anchor" name="1450807072">&nbsp;</a></div><pre>Hi,

Ken, right now we have the glideins starting in the wrong place, originally it looks like factory ops made the mistake of setting it to $OSG_WN_TMP which of course won&#39;t work because this is a WLCG resource rather than OSG.  So Brendan changed it to $TMPDIR which should have been a last resort.  Normally for European sites we try &#34;.&#34; (cwd of wherever the pilot landed).

Based on Gianfranco&#39;s last reply this looks like the correct place so I&#39;m reconfiguring the factory now.

Sorry for the misconfig on our end!

Thanks,
Jeff Dost
OSG Glidein Factory Operations

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='27777#1450806901'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-22T17:55:01+00:00">Dec 22, 2015 05:55 PM UTC</time><a class="anchor" name="1450806901">&nbsp;</a></div><pre>Hi again,

So I think the critical piece is what controls the value of the &#34;Disk&#34; attribute in the glidein. That is what the frontend matching is looking at.  Is that set by available space in /grid/lustre or by something else?

At any rate what I am going to do right now is manually set a couple of jobs down to a very small disk request, just to be sure that we can get something running. That will also show us if there are any other problems.

Ken

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='27777#1450781228'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-22T10:47:08+00:00">Dec 22, 2015 10:47 AM UTC</time> by <b>Bern</b><a class="anchor" name="1450781228">&nbsp;</a></div><pre>Hi Ken,

most of the nodes on ce01 have in fact 5GB in /root. It is true that on the system TMPDIR resolves to /tmp, but the system is setup so that jobs are run on a shared scratch area which in our system is in /grid/lustre. This includes input and output files, as well as job temporary files. There is a very limited amount of stuff that is written to /tmp on the nodes.

When I run a dummy job to test the environment, I get the following three variables showing the rundir of the job itself&#58;

PWD=/grid/lustre/session/E0IODmiPZVnnIpaMunWlKAupABFKDmABFKDm1CNKDmABFKDmdFH6Pn
SLURM_SUBMIT_DIR=/grid/lustre/session/E0IODmiPZVnnIpaMunWlKAupABFKDmABFKDm1CNKDmABFKDmdFH6Pn
HOME=/grid/lustre/session/E0IODmiPZVnnIpaMunWlKAupABFKDmABFKDm1CNKDmABFKDmdFH6Pn

The long string is the jobid in ARC (assigned by the ARC grid-manager).

The setup will likely be different on ce02, where all nodes have local disk, but from the point of view of the user, the above variables should always point to the job rundir.

Cheers
Gianfranco

<font color='#7F7E6F'>&#62; On 22 Dec 2015, at 00&#58;57, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27777#1450742226'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-21T23:57:06+00:00">Dec 21, 2015 11:57 PM UTC</time><a class="anchor" name="1450742226">&nbsp;</a></div><pre>Hi everyone,

Indeed we are seeing glideins on our (Fermilab) side now, which we weren&#39;t before. So that&#39;s good progress. I looked at what we are seeing and all of our CVMFS checks are passing now. Unfortunately it also appears that the available disk on the slots we are getting is very small, less than 1 GB in fact. If I do

#  for glidein in &#96;condor_status -af name -pool gwmsfrontend1-pp.fnal.gov -constraint &#39;stringlistImember(&#34;UNIBE-LHEP&#34;,GLIDEIN_Site)&#39; &#96; ; do condor_status  -pool gwmsfrontend1-pp.fnal.gov  -format &#34;%d&#92;n&#34; Disk $glidein ; done

I see

595756
700076
594500
594508

And in my test jobs I request 10 GB. Sure enough a condor_q -better-analyze spots the problem&#58;

(output truncated)
Your job defines the following attributes&#58;

DESIRED_Sites = &#34;UNIBE-LHEP&#34;
DESIRED_usage_model = &#34;OFFSITE&#34;
DesiredOS = &#34;SL6&#34;
JobUniverse = 5
RequestCpus = 1
RequestDisk = 10240000
RequestMemory = 1900

The Requirements expression for your job reduces to these conditions&#58;

Slots
Step    Matched  Condition
-----  --------  ---------
[0]         504  Arch == &#34;X86_64&#34;
[3]         504  target.IS_Glidein == true
[5]           5  stringListIMember(target.GLIDEIN_Site,my.DESIRED_Sites)
[8]         504  stringlistimember(Target.IFOS_installed,DesiredOS)
<div id='show_698761905' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_698761905'>[15]        491  TARGET.Disk &#62;= RequestDisk
[16]          0  [5] && [15]

...

Suggestions&#58;

Condition                         Machines Matched    Suggestion
---------                         ----------------    ----------
1   ( ( Arch == &#34;X86_64&#34; ) || ( Arch == &#34;INTEL&#34; ) )
0                   REMOVE
2   ( stringListIMember(target.GLIDEIN_Site,&#34;UNIBE-LHEP&#34;) )
5
3   ( TARGET.Disk &#62;= 10240000 )       491                 MODIFY TO 699448
4   ( stringListsIntersect(toUpper(target.HAS_usage_model),&#34;OFFSITE&#34;) )

...

So that&#39;s definitely why we are not matching. Gianfranco, how big are the local disk partitions supposed to be on ce01? I think if we get this solved we&#39;re good to go.

Cheers,

Ken

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385
</div><script type='text/javascript'>
        $('#show_698761905').click(function() {
            $('#detail_698761905').slideDown("normal");
            $('#show_698761905').hide();
            $('#hide_698761905').show();
        });
        $('#hide_698761905').click(function() {
            $('#detail_698761905').slideUp();
            $('#hide_698761905').hide();
            $('#show_698761905').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27777#1450739675'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-21T23:14:35+00:00">Dec 21, 2015 11:14 PM UTC</time><a class="anchor" name="1450739675">&nbsp;</a></div><pre>I&#39;m not sure if the inability to find those binaries actually matters in terms of getting the glidein to run; I actually went ahead and added (runtimeenvironment=ENV/PROXY) to the rsl for the entry in the factory config after my last update, and I&#39;m now seeing glideins starting up and running to completion (with a different location for X509_USER_PROXY [1]). However, it appears as if all of the Fermilab jobs are currently going unmatched [2], so the glideins aren&#39;t actually running any user jobs.

Could someone check from the Fermilab frontend side of things and see what&#39;s causing them to go unmatched?

Brendan Dennis
UCSD Glidein Factory Operations

[1]
X509_USER_PROXY=/grid/lustre/session/aYbLDmAIOVnnIpaMunWlKAupABFKDmABFKDm5fNKDmABFKDm7Kjubm/user.proxy

[2]
The yellow line in the graph below represents unmatched&#58;
<a href='http&#58;//glidein-itb.grid.iu.edu/factory/monitor/factoryStatus.html?entry=OSG_CH_UNIBE_LHEP_ce01&frontend=total&infoGroup=running&elements=StatusRunning' target='_blank' rel='nofollow'>http&#58;//glidein-itb.grid.iu.edu/factory/monitor/factoryStatus.html?entry=OSG_CH_UNIBE_LHEP_ce01&frontend=total&infoGroup=running&elements=StatusRunning</a>,ClientGlideRunning,ClientGlideIdle,&rra=0&window_min=1450702212231.7598&window_max=1450710300000&timezone=-8

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='27777#1450730864'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-21T20:47:44+00:00">Dec 21, 2015 08:47 PM UTC</time><a class="anchor" name="1450730864">&nbsp;</a></div><pre>Hi,

I&#39;m not sure if this is really the cause, but I see the script is complaining about not being able to find grid-proxy-init and voms-proxy-init. Both of those are available in the OSG CVMFS repo. Would it help to source the OSG setup script that I sent yesterday before this check script runs?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='27777#1450729733'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-21T20:28:53+00:00">Dec 21, 2015 08:28 PM UTC</time><a class="anchor" name="1450729733">&nbsp;</a></div><pre>From the factory perspective, it looks like setting the work_dir to TMPDIR did fix the validation failure from not being able to find the startup directory for the glidein. However, I&#39;m now seeing glideins failing validation with a new error [1] due to being unable to find the user proxy file. I haven&#39;t seen this error before, so I&#39;m not sure what the cause could be.

By chance, do you require &#34;(runtimeenvironment=ENV/PROXY)&#34; as well?

Brendan Dennis
UCSD Glidein Factory Operations

[1]
Signature OK for main&#58;setup_x509.fcliPx.sh.
grid-proxy-init command not found in path!
voms-proxy-init command not found in path!
Not all x509 commands found in path (2 missing)!
ls&#58; cannot access /var/spool/nordugrid/jobstatus/job.4KENDmymKVnnIpaMunWlKAupABFKDmABFKDmVoFKDmCBFKDmo7m3Rm.proxy&#58; No such file or directory
=== Validation error in /tmp/glide_mELOEO/main/setup_x509.sh ===
Mon Dec 21 19&#58;55&#58;19 CET 2015 Error running &#39;/tmp/glide_mELOEO/main/setup_x509.sh&#39;
Could not find user proxy!Looked in X509_USER_PROXY=&#39;/var/spool/nordugrid/jobstatus/job.4KENDmymKVnnIpaMunWlKAupABFKDmABFKDmVoFKDmCBFKDmo7m3Rm.proxy&#39;

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='27777#1450715619'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-21T16:33:39+00:00">Dec 21, 2015 04:33 PM UTC</time><a class="anchor" name="1450715619">&nbsp;</a></div><pre>Hi everyone,

There is one other thing I forgot to ask about&#58; is /cvmfs/grid.cern.ch/util/ mounted on the worker nodes? Our glidein init scripts check for the /cvmfs/grid.cern.ch/util/cvmfs-uptodate utility and run it to be sure that the fermilab CVMFS areas are up to date on each worker node. If the utility isn&#39;t present, the glidein init script will fail and the Microboone jobs won&#39;t start.

Cheers,

Ken

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='27777#1450690688'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-21T09:38:08+00:00">Dec 21, 2015 09:38 AM UTC</time> by <b>Bern</b><a class="anchor" name="1450690688">&nbsp;</a></div><pre>Hi Ken,

I have added the RTE script on ce01. To call it, the following should be added to the job description&#58;

( runtimeenvironment = &#34;APPS/HEP/UBOONE-OSG-WN-CLIENT-3.3” )

Cheers
Gianfranco

<font color='#7F7E6F'>&#62; On 21 Dec 2015, at 00&#58;31, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27777#1450654295'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-20T23:31:35+00:00">Dec 20, 2015 11:31 PM UTC</time><a class="anchor" name="1450654295">&nbsp;</a></div><pre>Hi Gianfranco,

From our perspective it is probably better if you can source the script on your end at the beginning of the job, at least for the Microboone jobs. I tend to find it better to not rely on the users to get that kind of thing right if things can be done for them. For easy reference, this one should be enough&#58;

/cvmfs/oasis.opensciencegrid.org/osg-software/osg-wn-client/3.3/current/el6-x86_64/setup.sh

Cheers,

Ken

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='27777#1450558346'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-19T20:52:26+00:00">Dec 19, 2015 08:52 PM UTC</time><a class="anchor" name="1450558346">&nbsp;</a></div><pre>Hi guys,

Ken&#58; What you&#39;re seeing for the gatekeeper string is normal. The UCSD entries are all using HTCondor-CE or GRAM, which is why they have additional information like port numbers. For ARC CEs (which are grid_type=&#34;nordugrid&#34; in the factory config), only the hostname is provided for the gatekeeper string and nothing else.

Gianfranco&#58; I can now see glideins landing on ce01 and attempting to run. They&#39;re currently failing validation because they can&#39;t identify the startup directory to use [1], but I&#39;m pretty sure that&#39;s a configuration issue in the factory. I&#39;ve tried setting the work_dir option on the factory to TMPDIR, and will let you know if glideins still fail validation.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='27777#1450523468'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-19T11:11:08+00:00">Dec 19, 2015 11:11 AM UTC</time> by <b>Bern</b><a class="anchor" name="1450523468">&nbsp;</a></div><pre>Hi again,

just a short node to confirm that I have fixed cvmfs on all nodes on ce01.

Just to come back to some earlier discussion&#58; it was pointed out that the WN clients e.g. globus-url-copy I think (whose installation is a bit problematic  on these systems) could be sourced from CVMFS. To that end the jobs will need to have that PATH setup properly. It can be done via an RTE script to source on our system before the job starts, or this can be done within the job itself.

On our system side, cvmfs automounts on&#58;

/cvmfs/fermilab.opensciencegrid.org &#60;<a href='http&#58;//fermilab.opensciencegrid.org/&#62' target='_blank' rel='nofollow'>http&#58;//fermilab.opensciencegrid.org/&#62</a>;
/cvmfs/uboone.opensciencegrid.org

cheers
Giaanfranco

<font color='#7F7E6F'>&#62; On 19 Dec 2015, at 11&#58;50, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27777#1450522209'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-19T10:50:09+00:00">Dec 19, 2015 10:50 AM UTC</time> by <b>Bern</b><a class="anchor" name="1450522209">&nbsp;</a></div><pre>Hi,

I had a couple of things to fix in the configuration on ce01 (please remember ce02 is still not back from the downtime for re-installation) and now I see some jobs queued in the batch system, and running actually. Let’s see the outcome of these. Although I have just noticed there is a cvmfs issue on the node on which these are running.

Please note that since today, for the entire duration of the CERN holidays (up to 3rd January) the site runs unattended with only best effort support. However, I will try to cut myself some time for minor interventions to try and get the uboone to run on the cluster. Minor changes will be possible, if big changes are needed, they might not happen until  after the holidays.

One more note&#58; the batch system is currently configured with no default walltime. This is under the provision that all our users pass to it a walltime request. It woudl be nice if the uboone jobs could also do that.

thanks and cheers
Gianfranco

<font color='#7F7E6F'>&#62; On 19 Dec 2015, at 07&#58;48, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27777#1450507719'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-19T06:48:39+00:00">Dec 19, 2015 06:48 AM UTC</time><a class="anchor" name="1450507719">&nbsp;</a></div><pre>Hi,

Just for the record there has been no change. Forgive my naive question, but I looked at the factory entry again and I see that it looks different from some of the others. If I do something like this&#58;

$ condor_status -any -pool glidein-itb.grid.iu.edu -constraint &#39;glideinmytype==&#34;glidefactory&#34;&#39; -constraint &#39;stringlistimember(&#34;UNIBE-LHEP&#34;,GLIDEIN_Site)&#39;   -format &#34;%s&#92;n&#34; GLIDEIN_Gatekeeper

I get

ce01.lhep.unibe.ch
ce02.lhep.unibe.ch

Compare that with doing the same for UCSD&#58;

$ condor_status -any -pool glidein-itb.grid.iu.edu -constraint &#39;glideinmytype==&#34;glidefactory&#34;&#39; -constraint &#39;stringlistimember(&#34;UCSD&#34;,GLIDEIN_Site)&#39;   -format &#34;%s&#92;n&#34; GLIDEIN_Gatekeeper

osg-gw-2.t2.ucsd.edu&#58;2119/jobmanager-condor
osg-gw-4.t2.ucsd.edu osg-gw-4.t2.ucsd.edu&#58;9619
osg-gw-6.t2.ucsd.edu osg-gw-6.t2.ucsd.edu&#58;9619
osg-gw-7.t2.ucsd.edu&#58;2119/jobmanager-condor
osg-gw-2.t2.ucsd.edu&#58;2119/jobmanager-condor
osg-gw-4.t2.ucsd.edu osg-gw-4.t2.ucsd.edu&#58;9619

For the Bern entries there is only one field, while for UCSD there are two, including one with ports. So then if I try something simple while having a Microboone VOMS proxy&#58;

$ condor_ce_ping -verbose -name osg-gw-4.t2.ucsd.edu -pool osg-gw-4.t2.ucsd.edu&#58;9619 WRITE
Remote Version&#58;              $CondorVersion&#58; 8.2.7 Feb 05 2015 $
Local  Version&#58;              $CondorVersion&#58; 8.4.2 Nov 24 2015 $
Session ID&#58;                  osg-gw-4&#58;20930&#58;1450507241&#58;223
Instruction&#58;                 WRITE
Command&#58;                     60021
Encryption&#58;                  none
Integrity&#58;                   MD5
Authenticated using&#58;         GSI
All authentication methods&#58;  FS,GSI
Remote Mapping&#58;              fnalgrid@....
<div id='show_980747803' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_980747803'>Authorized&#58;                  TRUE

But the same fails for Bern&#58;

$ condor_ce_ping -verbose  -pool ce01.lhep.unibe.ch&#58;9619 -name ce01.lhep.unibe.ch WRITE
ERROR&#58; couldn&#39;t locate ce01.lhep.unibe.ch!

Perhaps I should not expect this to work, but on the other hand maybe this is related to our difficulties?

Ken

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385
</div><script type='text/javascript'>
        $('#show_980747803').click(function() {
            $('#detail_980747803').slideDown("normal");
            $('#show_980747803').hide();
            $('#hide_980747803').show();
        });
        $('#hide_980747803').click(function() {
            $('#detail_980747803').slideUp();
            $('#hide_980747803').hide();
            $('#show_980747803').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27777#1450469245'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-18T20:07:25+00:00">Dec 18, 2015 08:07 PM UTC</time><a class="anchor" name="1450469245">&nbsp;</a></div><pre>I&#39;ve cleaned out the stale Idle/Waiting glideins from a day or two ago that had reported ce1 as being down (likely from before Gianfranco had finalized the build). Hopefully now new glideins will be able to land on the site and start running user jobs. I&#39;ll check back in on it later today and see.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='27777#1450464770'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-18T18:52:50+00:00">Dec 18, 2015 06:52 PM UTC</time><a class="anchor" name="1450464770">&nbsp;</a></div><pre>OK, I confirmed in our logs that the glidein requests are going out. Something is rejecting them, or there just aren&#39;t any slots available on the cluster. Gianfranco, just let us know what you see coming in from us on your side, please.

Thanks,

Ken

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='27777#1450463413'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-18T18:30:13+00:00">Dec 18, 2015 06:30 PM UTC</time><a class="anchor" name="1450463413">&nbsp;</a></div><pre>Hi Marty,

We&#39;ve sent test jobs but we haven&#39;t been getting any glideins at Bern yet. We&#39;re not sure why. Gianfranco, are you seeing requests coming from Fermilab on your end?

Ken and Bo

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='27777#1450212969'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-15T20:56:09+00:00">Dec 15, 2015 08:56 PM UTC</time><a class="anchor" name="1450212969">&nbsp;</a></div><pre>Bo, Ken,

We&#39;ll probably need you to submit some test jobs to these new entries on the GOC-ITB factory. I&#39;m not sure we&#39;ll be able to run our own test jobs under the MIS VO proxy at this site.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27777#1450185976'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-15T13:26:16+00:00">Dec 15, 2015 01:26 PM UTC</time> by <b>Bern</b><a class="anchor" name="1450185976">&nbsp;</a></div><pre>Hi again,

I believe I have the configuration in place on ce01.lhep.unibe.ch &#60;<a href='http&#58;//ce01.lhep.unibe.ch/&#62' target='_blank' rel='nofollow'>http&#58;//ce01.lhep.unibe.ch/&#62</a>;. I have the following DNs mapped to uboone and authorised against voms.fnal.gov &#60;<a href='http&#58;//voms.fnal.gov/&#62' target='_blank' rel='nofollow'>http&#58;//voms.fnal.gov/&#62</a>;, VO fermilab, group uboone&#58;

&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=gfrontend/fifebatch1.fnal.gov&#34; uboone001
&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov&#34; uboone001

For the multicore functionality, this should be called by adding to the job description the call to the corresponding RTE and specifying the number of cores requested, e.g.&#58;

( runtimeenvironment = &#34;APPS/HEP/UBOONE-MULTICORE-1.0” ) ( count = &#34;8&#34; )

-bash-4.1$ ldapsearch -x -h ce01.lhep.unibe.ch  -p 2135 -b &#39;Mds-Vo-name=resource,o=grid&#39;|grep MULTICORE
GlueHostApplicationSoftwareRunTimeEnvironment&#58; APPS/HEP/ATLAS-MULTICORE-1.0
GlueHostApplicationSoftwareRunTimeEnvironment&#58; APPS/HEP/UBOONE-MULTICORE-1.0

Let me know when you try some submission, so I can follow up on debugging if needed.

Thanks
Gianfranco

<font color='#7F7E6F'>&#62; On 15 Dec 2015, at 09&#58;53, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27777#1450169594'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-15T08:53:14+00:00">Dec 15, 2015 08:53 AM UTC</time> by <b>Bern</b><a class="anchor" name="1450169594">&nbsp;</a></div><pre>Hi Brendan,

the configuration od ce01 is not final yet, also for accepting jobs. I should be able to finalise it later today. Multicore will be configured for singlenode, so jobs will not spawn more nodes. 8-core jobs are most common. Most nodes are 16-core, but there are also a few 8,24 and 32 core nodes.

The ce02 cluster is in downtime for re-installation right now. When finalised, it will have the same configuration as ce01. With 8 and 16 core nodes.

cheers
Gianfranco

<font color='#7F7E6F'>&#62; On 15 Dec 2015, at 09&#58;42, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27777#1450168939'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-15T08:42:19+00:00">Dec 15, 2015 08:42 AM UTC</time><a class="anchor" name="1450168939">&nbsp;</a></div><pre>Hi Bo,

I&#39;ve created two new entries [1] for these CEs on GOC ITB, and submitted some test jobs to them (assuming our testing VO can get to the site). When you say the site will accept multicore jobs, do you have the core count for the nodes? Right now, it&#39;s configured for single core only.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='27777#1450102091'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-14T14:08:11+00:00">Dec 14, 2015 02:08 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1450102091">&nbsp;</a></div><pre>Please enable the University of Bern site (UNIBE-LHEP) in the ITB factory for testing.

• The type of CE (GRAM vs HTCondor CE)&#58; ARC CE
• The CE&#39;s hostname&#58; ce01.lhep.unibe.ch - ce02.lhep.unibe.ch
• Resource/WLCG name&#58; UNIBE-LHEP
• Distro version of your worker nodes i.e., EL5, EL6, or a mix of both? EL6
• Do your worker nodes use glexec? No
• Do you accept multicore jobs? Yes
• Maxmimum job walltime&#58; Currently unlimited
• Maximum job memory usage&#58; 2GB is default. Can request up to 4GB via ARC

Please note that from an OSG perspective, this site will only support the microboone VO.

thanks,
Bo

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F27777">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 27777});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
