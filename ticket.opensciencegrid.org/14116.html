<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[14116] OSG supplied bestman2 2.3.0 failing</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=14116" method="post">
<div class="page-header">
    <h3><span class="muted">14116</span> / OSG supplied bestman2 2.3.0 failing</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Paul T. Keener</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Paul T. Keener</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Wait for next production release before closing</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-05-15</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Neha Sharma <span class="muted"> / OSG Storage Team</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/14116", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='14116#1368632478'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-15T15:41:18+00:00">May 15, 2013 03:41 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1368632478">&nbsp;</a></div><pre>Closing this ticket since production release happened yesterday

-Neha</pre></div><div class='update_description'><i onclick="document.location='14116#1368110195'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-09T14:36:35+00:00">May 9, 2013 02:36 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1368110195">&nbsp;</a></div><pre>Suchandra
2.0.5-1 is not the version with the fix. We need to wait for 2.0.5-2 or 2.0.05-3 to make it in to production before we can close this ticket
-neha</pre></div><div class='update_description'><i onclick="document.location='14116#1367871942'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-06T20:25:42+00:00">May 6, 2013 08:25 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1367871942">&nbsp;</a></div><pre>Can this ticket be closed since it looks like a fixed version of jGlobus is in the production repo.

Suchandra Thapa</pre></div><div class='update_description'><i onclick="document.location='14116#1367618513'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-03T22:01:53+00:00">May 3, 2013 10:01 PM UTC</time> by <b>echism</b><a class="anchor" name="1367618513">&nbsp;</a></div><pre>Ah, my mistake! Some new version of jglobus went out with the last release. I erroneously assumed it was the referenced version.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='14116#1367617411'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-03T21:43:31+00:00">May 3, 2013 09:43 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1367617411">&nbsp;</a></div><pre>elizabeth, the latest build is  tagged only for development. so, not in production yet
<a href='https&#58;//koji-hub.batlab.org/koji/buildinfo?buildID=3335' target='_blank' rel='nofollow'>https&#58;//koji-hub.batlab.org/koji/buildinfo?buildID=3335</a>

-neha</pre></div><div class='update_description'><i onclick="document.location='14116#1367613128'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-03T20:32:08+00:00">May 3, 2013 08:32 PM UTC</time> by <b>echism</b><a class="anchor" name="1367613128">&nbsp;</a></div><pre>I believe this went out.

Elizabeth</pre></div><div class='update_description'><i onclick="document.location='14116#1367426378'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-01T16:39:38+00:00">May 1, 2013 04:39 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1367426378">&nbsp;</a></div><pre>Hi Kevin
I will keep the ticket open until the the fixed version of jglobus makes it  in to the production release.

Thanks
-Neha</pre></div><div class='update_description'><i onclick="document.location='14116#1367244593'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-29T14:09:53+00:00">Apr 29, 2013 02:09 PM UTC</time><a class="anchor" name="1367244593">&nbsp;</a></div><pre>Updating to jglobus-2.0.5-2.osg.el5.noarch seems to have solved the problem.  Bestman has now been running for about 6 days without failure.

This ticket can be closed.  Thanks.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Paul T. Keener 699</pre></div><div class='update_description'><i onclick="document.location='14116#1366209362'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-17T14:36:02+00:00">Apr 17, 2013 02:36 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1366209362">&nbsp;</a></div><pre>Hi Elizabeth
Turns out the problem still persists. So, the new version 2.0.5-1 of jglobus did not seem to have fixed it.
-Neha</pre></div><div class='update_description'><i onclick="document.location='14116#1366205695'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-17T13:34:55+00:00">Apr 17, 2013 01:34 PM UTC</time> by <b>echism</b><a class="anchor" name="1366205695">&nbsp;</a></div><pre>Hi Neha,

Has the fix worked?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='14116#1365640150'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-11T00:29:10+00:00">Apr 11, 2013 12:29 AM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1365640150">&nbsp;</a></div><pre>Yes.
With help from Brian, the user has deployed the release of jglobus that will hopefully fix the problem. We will know in 3-4 days if it has been resolved
-Neha

I am copy/pasting some of the email exchange below.

Hi Brian,
Thanks for your explanation. It makes sense now.
Lets wait for the outcome.

J. Eduardo

On 04/10/2013 11&#58;20 AM, Brian Bockelman wrote&#58;
Hi Juan,

bestman2-2.3 was the first version to use the jglobus 2.x series.  In JGlobus 2.x, they switched from a homegrown SSL implementation to the SSL implementation built-in to Java.

So, this version of jglobus featured a lot of new authentication code.  We squashed many bugs before release, but it appears this one slipped through.

Brian

On Apr 10, 2013, at 10&#58;18 AM, Juan Eduardo Ramirez &#60;juaneduardo.ramirez@....&#62; wrote&#58;

Thanks, for the explanation.  I installed the jglobus 2.0.5.
Just one more question,
why this problem was not triggered in the previous bestman production version
(2.2.1-4)? Does it uses a different tool?

Eduardo

On 04/10/2013 08&#58;11 AM, Brian Bockelman wrote&#58;
Hi Juan,

That object only holds the CA certificates and signing policies - not the CRLs.  The CRLs are held by a different object.

<div id='show_1624350274' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1624350274'>Anyhow, here&#39;s the commit I think fixed the problem&#58;

<a href='https&#58;//github.com/jglobus/JGlobus/pull/64' target='_blank' rel='nofollow'>https&#58;//github.com/jglobus/JGlobus/pull/64</a>

I believe you should be able to fix it by trying jglobus-2.0.5 from osg-development.

Brian

On Apr 10, 2013, at 12&#58;26 AM, Juan Eduardo Ramirez Vargas &#60;juaneduardo.ramirez@....&#62; wrote&#58;

Hi,
I think, I found where may be the problem.
Digging around the source code for JettyGSIConnector7.java, there is a
line in the function public void open() that load the trusted ca certs
like this&#58;
_trustedCerts = TrustedCertificates.load(_caCertDir);

this may explain bestman starting fine!
however in the function void run()
there is not a similar line, and this is in agreement with not
reloading CRL theory of Brian.
I am assuming that the TrustedCertificates.load() function get the
latest CRLs, but of course I am not an expert on bestman code it self.
Could someone check if this comment make sense?

I hope this helps to fix this annoying feature of restarting bestman very often.

Eduardo
</div><script type='text/javascript'>
        $('#show_1624350274').click(function() {
            $('#detail_1624350274').slideDown("normal");
            $('#show_1624350274').hide();
            $('#hide_1624350274').show();
        });
        $('#hide_1624350274').click(function() {
            $('#detail_1624350274').slideUp();
            $('#hide_1624350274').hide();
            $('#show_1624350274').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='14116#1365629824'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-10T21:37:04+00:00">Apr 10, 2013 09:37 PM UTC</time> by <b>echism</b><a class="anchor" name="1365629824">&nbsp;</a></div><pre>Hello,

Has there been work on this outside of the ticket?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='14116#1364837650'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-01T17:34:10+00:00">Apr 1, 2013 05:34 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1364837650">&nbsp;</a></div><pre>Paul
Ca you give my DN the access.

/DC=org/DC=doegrids/OU=People/CN=Neha Sharma 315562

Keep the server in failing state.
------------------------------------------------
Neha Sharma
Fermilab/FermiGrid/OSG Software
WH8E/630-840-6791
-------------------------------------------------

On Mar 28, 2013, at 3&#58;58 PM, Open Science Grid FootPrints wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='14116#1364837128'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-01T17:25:28+00:00">Apr 1, 2013 05:25 PM UTC</time><a class="anchor" name="1364837128">&nbsp;</a></div><pre>Unfortunately these changes have not solved the problem.  The authentication failures have come back.  I don&#39;t know if it is relevant, but fetch-crl3-cron has been failing with

ERROR Cannot find any CA for Grid-Ireland in /etc/grid-security/certificates
ERROR CRL retrieval for SWITCHslcs failed. 24h grace expired. CRL not updated
ERROR Cannot find any CA for UKeScienceCA-2007 in /etc/grid-security/certificates
ERROR CRL verification failed for 98ef0ee5/0 (UKeScienceRoot-2007)
ERROR CRL verification failed for 9b59ecad/0 (CESNET)
ERROR CRL verification failed for d1b603c3/0 (ESnet)
ERROR CRL verification failed for HIAST/0 (HIAST)

by /DC=org/DC=doegrids/OU=People/CN=Paul T Keener 239636</pre></div><div class='update_description'><i onclick="document.location='14116#1364514966'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-28T23:56:06+00:00">Mar 28, 2013 11:56 PM UTC</time><a class="anchor" name="1364514966">&nbsp;</a></div><pre>It has been working for about three days.  The MTTF has been 3-4 days.  Unfortunately, I had to restart bestman for other reasons this evening.  We should revisit Monday or Tuesday evening.

by /DC=org/DC=doegrids/OU=People/CN=Paul T Keener 239636</pre></div><div class='update_description'><i onclick="document.location='14116#1364504282'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-28T20:58:02+00:00">Mar 28, 2013 08:58 PM UTC</time> by <b>echism</b><a class="anchor" name="1364504282">&nbsp;</a></div><pre>Hi Paul,

Please update this when you get a chance.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='14116#1364420722'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-27T21:45:22+00:00">Mar 27, 2013 09:45 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1364420722">&nbsp;</a></div><pre>So far so good, no failures.</pre></div><div class='update_description'><i onclick="document.location='14116#1364231458'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-25T17:10:58+00:00">Mar 25, 2013 05:10 PM UTC</time> by <b>echism</b><a class="anchor" name="1364231458">&nbsp;</a></div><pre>I&#39;m putting in a note to check on this Thursday,

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='14116#1364227749'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-25T16:09:09+00:00">Mar 25, 2013 04:09 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1364227749">&nbsp;</a></div><pre>Hi Paul
I checked the logs and do not see any authentication errors over the weekend. So updating the crl/sCA files does seem to have fixed the intermittent authentication failures. This is good news. I realize you are on vacation until Thursday. I will keep an eye on the server/logs and ticket open in the meantime.

-Neha

Neha,
OK.  I will be away on vacation from Monday morning until sometime Thursday.  I hope to have (limited) email access, but will be unable to do anything.  Someone will be watching bestman to restart it if it craps out.
-paul

On 3/22/2013 5&#58;55 PM, Neha Sharma wrote&#58;
Ah, I see.

928619 [qtp424167941-48] WARN gov.lbl.srm.server.JettyGSIConnector7 - org.globus.common.ChainedIOException&#58; Authentication failed [Caused by&#58; Failure unspecified at GSS-API level [Caused by&#58; Failure unspecified at GSS-API level [Caused by&#58; null cert chain]]]

Null certificate chain...I need to understand what triggers this. Let&#39;s see how server behaves over the weekend.

------------------------------------------------
Neha Sharma
Fermilab/FermiGrid/OSG Software
WH8E/630-840-6791
-------------------------------------------------

On Mar 22, 2013, at 4&#58;48 PM, Paul T. Keener wrote&#58;

Neha,

It is line 324263.  I have seen a singleton error once before, and it may have been more common.

-paul

On 3/22/2013 5&#58;42 PM, Neha Sharma wrote&#58;
Paul
Can you point this warning to me in the bestman2.log. I searched for &#39;SSL&#39; and did not find anything.

Thanks
<div id='show_731154807' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_731154807'>------------------------------------------------
Neha Sharma
Fermilab/FermiGrid/OSG Software
WH8E/630-840-6791
-------------------------------------------------

On Mar 22, 2013, at 3&#58;10 PM, Paul T. Keener wrote&#58;

Neha,

I just restarted, because I didn&#39;t want to disrupt ongoing transfers.  I have already noticed a singleton authentication failure warning.  It is not obvious that this will lead to a hard failure, but I want to warn you that this may not have solved the problems.

Thanks.
</div><script type='text/javascript'>
        $('#show_731154807').click(function() {
            $('#detail_731154807').slideDown("normal");
            $('#show_731154807').hide();
            $('#hide_731154807').show();
        });
        $('#hide_731154807').click(function() {
            $('#detail_731154807').slideUp();
            $('#hide_731154807').hide();
            $('#show_731154807').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='14116#1363963104'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-22T14:38:24+00:00">Mar 22, 2013 02:38 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1363963104">&nbsp;</a></div><pre>Yes. Thats what I have aswell. Great. Please restart bestman when you can. Hopefully this should fix it.

Neha,

OK, I have done it.  The youngest crl_url files are now dated 28 Jan.  Is that expected?

-paul

On 3/21/2013 5&#58;52 PM, Neha Sharma wrote&#58;
Paul
As I am looking in to this, I am beginning to understand little more. I also confirmed with Steve Timm, who is our grid expert here.

So, the fetch-crl3 is indeed working - the files it updates are the *.r0 files, not the *crl_url files.
The *crl_url files come from the osg-ca-certs package. One of the ways to keep these up to date, is mentioned here
<a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/OsgCaCertsUpdater' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/OsgCaCertsUpdater</a>

Looking at your node, the crl_url files do seem older (atleast when I compare their timestamp to one of our production nodes here)

[root@srm certificates]# ls -hlt *crl_url* | head -10
-rw-r--r-- 1 root root  50 Dec  3 16&#58;13 PurdueTeragridRA.crl_url
-rw-r--r-- 1 root root  50 Dec  3 16&#58;13 PurdueCA.crl_url
-rw-r--r-- 1 root root  51 Dec  3 16&#58;13 AAACertificateServices.crl_url
-rw-r--r-- 1 root root  52 Dec  3 16&#58;13 AddTrust-External-CA-Root.crl_url
-rw-r--r-- 1 root root  52 Dec  3 16&#58;13 AEGIS.crl_url
-rw-r--r-- 1 root root  40 Dec  3 16&#58;13 AIST.crl_url
-rw-r--r-- 1 root root  42 Dec  3 16&#58;13 ANSPGrid.crl_url
-rw-r--r-- 1 root root  40 Dec  3 16&#58;13 APAC.crl_url
-rw-r--r-- 1 root root  36 Dec  3 16&#58;13 ArmeSFo.crl_url
-rw-r--r-- 1 root root  60 Dec  3 16&#58;13 ASGCCA-2007.crl_url
[root@srm certificates]#

Could you please follow the instructions mentioned in the document above?

Thanks

<div id='show_1317624385' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1317624385'>On Mar 21, 2013, at 3&#58;58 PM, Neha Sharma wrote&#58;

Yes, it didn&#39;t update. I am looking as to why. In the meantime, yes, please remove the older rpm

On Mar 21, 2013, at 3&#58;27 PM, Paul T. Keener wrote&#58;

Neha,

Thanks.  I have taken care of it, however, the new fetch-crl gives errors and doesn&#39;t seem to update the crl files.

Also, should the old fetch-crl be removed?

-paul

On 3/21/2013 3&#58;12 PM, Neha Sharma wrote&#58;
Since you are in meeting, I can do it if you want.

Commands to run would be -

yum install fetch-crl3
/usr/sbin/fetch-crl3
/sbin/service fetch-crl3-boot start
/sbin/service fetch-crl3-cron start
/sbin/chkconfig fetch-crl3-boot
on
/sbin/chkconfig fetch-crl3-cron
on

On Mar 21, 2013, at 2&#58;02 PM, Neha Sharma wrote&#58;

Paul

The crl files in /etc/grid-security/certificates directory are not being updated.

[root@srm certificates]# ls -hlt *crl* | head -10
-rw-r--r-- 1 root root  50 Dec  3 16&#58;13 PurdueTeragridRA.crl_url
-rw-r--r-- 1 root root  50 Dec  3 16&#58;13 PurdueCA.crl_url
-rw-r--r-- 1 root root  51 Dec  3 16&#58;13 AAACertificateServices.crl_url
-rw-r--r-- 1 root root  52 Dec  3 16&#58;13 AddTrust-External-CA-Root.crl_url
-rw-r--r-- 1 root root  52 Dec  3 16&#58;13 AEGIS.crl_url
-rw-r--r-- 1 root root  40 Dec  3 16&#58;13 AIST.crl_url
-rw-r--r-- 1 root root  42 Dec  3 16&#58;13 ANSPGrid.crl_url
-rw-r--r-- 1 root root  40 Dec  3 16&#58;13 APAC.crl_url
-rw-r--r-- 1 root root  36 Dec  3 16&#58;13 ArmeSFo.crl_url
-rw-r--r-- 1 root root  60 Dec  3 16&#58;13 ASGCCA-2007.crl_url
[root@srm certificates]# pwd
/etc/grid-security/certificates
[root@srm certificates]#

Could you upgrade fetch-crl on this node?

For SL5 nodes,there is the fetch-crl3 package.

[root@srm certificates]# yum list *fetch-crl*
Loaded plugins&#58; dellsysid, kernel-module, priorities
167 packages excluded due to repository priority protections
Installed Packages
fetch-crl.noarch                                                                               2.8.5-1.el5                                                                               installed
Available Packages
fetch-crl3.noarch                                                                              3.0.7-1.el5                                                                               epel
[root@srm certificates]#

On Mar 21, 2013, at 1&#58;17 PM, Paul T. Keener wrote&#58;

Neha,

I think I got all of the settings.  Most of the scalability parameters were already done.

I have not remapped the grid users away from bestman yet.  I am very concerned about making sure I don&#39;t break the permissions on the data store.  I am at FNAL for LBNE meetings this week and am on vacation next week.  I will work on that when I return to the office at the beginning of April.

I believe the checksum issues are due to bandwidth limitations on our xrootd implementation.  I hadn&#39;t seen the errors in the logs before, but I had noticed the large number of xrdadler32 commands hanging around.  I thought I had solved that, but apparently not.  I believe it is independent of the main authentication problem in bestman.

-paul

On 3/21/2013 12&#58;46 PM, Neha Sharma wrote&#58;
Hi Paul
Were you able to tune Bestman server for better scalability? How about mapping the grid users to a non-bestman user?

-Neha

That would be the maxThreads setting in file
/etc/bestman2/conf/WEB-INF/jetty.xml

Other settings to change in /etc/sysconfig/bestman2 would be

BESTMAN_CONNECTOR_QUEUESIZE=512
BESTMAN_CONNECTION_ACCEPTORSIZE=16
MAX_JAVA_HEAP  to 4096

Also, it is good to configure some system level settings like following

ulimit - 65535
/proc/sys/net/core/netdev_max_backlog - 3000
/proc/sys/net/core/somaxconn - 256

On Mar 19, 2013, at 2&#58;57 PM, Paul T. Keener wrote&#58;

Neha,

OK.  I don&#39;t understand the &#34;Jetty web server control values&#34; section though.  Where is this done?

Thanks.

-paul

On 03/19/2013 03&#58;54 PM, Neha Sharma wrote&#58;
Paul
One other thing to try would be to tune Bestman for better scalability
Could you go through
<a href='https&#58;//sdm.lbl.gov/twiki/bin/view/Software/BeStMan/BeStMan2Guide/ScalabilityNotes' target='_blank' rel='nofollow'>https&#58;//sdm.lbl.gov/twiki/bin/view/Software/BeStMan/BeStMan2Guide/ScalabilityNotes</a>
and make appropriate changes ?

Thanks
</div><script type='text/javascript'>
        $('#show_1317624385').click(function() {
            $('#detail_1317624385').slideDown("normal");
            $('#show_1317624385').hide();
            $('#hide_1317624385').show();
        });
        $('#hide_1317624385').click(function() {
            $('#detail_1317624385').slideUp();
            $('#hide_1317624385').hide();
            $('#show_1317624385').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='14116#1363807296'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-20T19:21:36+00:00">Mar 20, 2013 07:21 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1363807296">&nbsp;</a></div><pre>Paul
From the logs, looks like we are still seeing the failures. I have requested help on this on osg-software mailing list.
-Neha


Paul
From the logs, looks like we are still seeing the failures. I have requested help on this on osg-software mailing list.
-Neha</pre></div><div class='update_description'><i onclick="document.location='14116#1363719195'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-19T18:53:15+00:00">Mar 19, 2013 06:53 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1363719195">&nbsp;</a></div><pre>Neha wrote&#58;
I am going to bring this up on osg software list. We have found several datapoints and I am sure at this point we can use input from  users with more bestman/xrootd production level experience.

When possible, please restart Bestman so we can have the right log file and also because you made changes to sudoers file.

Only thing left that I am aware of that needs to be changed is grid-mapfile. It is currently mapping various grid users to user &#39;bestman&#39;. Please change that aswell.

Paul wrote&#58;
I haven&#39;t seen the checksum failure before, but I wouldn&#39;t necessarily have.

I think I had convinced myself that the sudoers entry wasn&#39;t doing anything useful, so I didn&#39;t update it.  I have taken care of it now.

I forget what exactly the python script was doing, but I know is read the file and calculated the checksum itself.  I don&#39;t remember if it stored the result as an xattr.  If the storage is xrootd based, it is much more efficient to use the xroot built in support for adler32 checksums.  My script essentially just makes the appropriate translations and calls the xrootd adler32 executable.

Neha wrote&#58;
With this latest failure, I was able to locate one additional error in bestman2.log.1 that I had not seen before. Its related to checksum computation. Have you seen these type of errors before?

### [srmLs] tid =qtp1197515375-113533
java.lang.NullPointerException
at gov.lbl.srm.util.Checksum.compute(Checksum.java&#58;181)
at gov.lbl.srm.util.Checksum.handle(Checksum.java&#58;199)
at gov.lbl.srm.server.TSRMFileAccessDefault.listAttr(TSupportedURLWithFILE.java&#58;1249)
at gov.lbl.srm.server.TSupportedURLWithFILE.listCurrent(TSupportedURLWithFILE.java&#58;691)
at gov.lbl.srm.server.TSupportedURLWithFILE.listMe(TSupportedURLWithFILE.java&#58;704)
at gov.lbl.srm.server.TSupportedURLWithFILE.ls(TSupportedURLWithFILE.java&#58;657)
at gov.lbl.srm.server.SRMGateway.callXrootdLs(SRMGateway.java&#58;786)
at gov.lbl.srm.server.SRMGateway.doLs(SRMGateway.java&#58;747)
at gov.lbl.srm.server.SRMGateway.srmLs(SRMGateway.java&#58;696)
at gov.lbl.srm.impl.TSRMService.srmLs(TSRMService.java&#58;510)
at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java&#58;25)
...
...
at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java&#58;900)
at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java&#58;954)
<div id='show_745976507' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_745976507'>at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java&#58;851)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java&#58;235)
at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java&#58;66)
at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java&#58;254)
at gov.lbl.srm.server.JettyGSIConnector7$GsiConnection.run(JettyGSIConnector7.java&#58;532)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java&#58;603)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java&#58;538)
at java.lang.Thread.run(Thread.java&#58;662)

Just going through
<a href='https&#58;//www.opensciencegrid.org/bin/view/Storage/BestmanAdler32Checksum' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Storage/BestmanAdler32Checksum</a>

and comparing if with what I see on your node, look like you have 2 different checksum computation scripts

[root@srm ~]# cat /etc/sudoers | grep adler
#bestman ALL=(root) NOPASSWD&#58; /opt/osg-v1.2/bestman_apps/adler32/adler32.sh
bestman ALL=(SRM_USR) NOPASSWD&#58; /opt/osg-v1.2/bestman_apps/adler32/adler32.sh
#daemon     ALL=(root) NOPASSWD&#58; /opt/osg-v1.2/bestman_apps/adler32/adler32.py

[root@srm ~]# cat /etc/bestman2/conf/bestman2.rc | grep adler
### defaultChecksumType supports adler32, md5, crc32
defaultChecksumType=adler32
### defaultChecksumType should be adler32 in hex
### e.g. hexChecksumCommand=/usr/local/mychecksum -adler32
hexChecksumCommand=/usr/local/bestman/adler32/adler32int.sh
[root@srm ~]#

From what I see in the document, they should be the same. Is there a reason you have 2 different ones?

Also, the script mentioned on document is a python one and I see you are using a shell. This, I believe is because you may have some customization, is that right?

Paul wrote&#58;

Neha,

It just started failing again...

Neha wrote&#58;

Hi Paul

I can see the errors now. While looking around, noticed two more things

1) In the gridmap file, all grid users are being mapped to local user
&#39;bestman&#39;.  User bestman is a special user under which the server itself
runs. I have never seen anyone do this before. Is there a reason you
have it set this way?

2) The /etc/sudoers file is missing the cp command

Cmnd_Alias SRM_CMD = /bin/rm, /bin/mkdir, /bin/rmdir, /bin/mv, /bin/ls

should be changed to

Cmnd_Alias SRM_CMD = /bin/rm, /bin/mkdir, /bin/rmdir, /bin/mv, /bin/cp,
/bin/ls

Paul wrote&#58;

Neha,

Thanks.  I was pulled away for other things this afternoon.  I have
inlined my responses.

Neha wrote&#58;

Hi Paul

I am looking at there seem to be couple of odd things..

1) Even though you have

[root@srm ~]# rpm -qa | grep osg-ca-certs
osg-ca-certs-1.32-3.osg.el5.noarch
[root@srm ~]#

The symlink seems to point to old directory

[root@srm ~]# ls -hlt /etc/grid-security/certificates
lrwxrwxrwx 1 root root 17 Aug 30  2011
/etc/grid-security/certificates -&#62; certificates-1.21
[root@srm ~]#

On my node, it looks like

[root@fnpc11x8 ~]# ls -hlt /etc/grid-security/certificates
lrwxrwxrwx 1 root root 20 Jan 20 20&#58;34
/etc/grid-security/certificates -&#62; certificates-1.32NEW
[root@fnpc11x8 ~]#

Right.  It looks like whatever (or whoever) was suppose to manage the
certificates-XXX directory didn&#39;t do it.  The
osg-ca-certs-1.32-3.osg.el5.noarch rpm dumps into
/etc/grid-security/certificates -- and the certs there are new -- so
unless some process is checking the name of the physical directory, it
shouldn&#39;t be an issue.

2) The bestman log file rotation seems to be a bit weird.
bestman2.log file has older timestamp than bestman2.log.1

[root@srm ~]# ls -hlt /var/log/bestman2/bestman2.log*
-rw-r--r-- 1 bestman bestman 11M Mar 18 16&#58;21
/var/log/bestman2/bestman2.log.1
-rw-r--r-- 1 bestman bestman   0 Mar 17 04&#58;02
/var/log/bestman2/bestman2.log
[root@srm ~]#

Ah...  I never understood why it was doing that.  I saw the mail about
your fix.

3) Third, could you point me to the exact error message (in one of
the event.srm.log files). I see failures related to duplicate files
etc but cannot locate a authentication error so far.

The directories, and tar&#39;ed directories in /var/log/bestman2 are old
log files that show the errors.

4) Once the error happens, does Bestman continue to work for some
client requests and fail for others?

It is hard to tell.  Typically we get a large number of files
transferred from the same source.  Once that source has been granted
permission to transfer, it keeps it until all the files are
transferred (more or less...).  It is possible that it is some subset
of sources, but the problem is clearly time dependent, because the
transfers that were failing start working when bestman restarts.

5) You should chkconfig on various services

[root@srm ~]# /sbin/chkconfig edg-mkgridmap --list
edg-mkgridmap 0&#58;off1&#58;off2&#58;off3&#58;off4&#58;off5&#58;off6&#58;off
[root@srm ~]#

This is OK.  We only have a small set of the VO members that are
allowed access.

[root@srm ~]# /sbin/chkconfig globus-gridftp-server --list
globus-gridftp-server0&#58;off1&#58;off2&#58;off3&#58;off4&#58;off5&#58;off6&#58;off
[root@srm ~]#

Our configuration starts gridftp from xinetd.

6) I also noticed your gridmap file is relatively old. This is ok in
principle, but you may want to keep this up to date to support new users.

See the first part of [5]...

We&#39;ll keep working on this and get fixed for you soon. Thanks!

Thanks for all your help.

Paul wrote&#58;
Neha,

Thanks.  The host is srm.hep.upenn.edu &#60;<a href='http&#58;//srm.hep.upenn.edu/&#62' target='_blank' rel='nofollow'>http&#58;//srm.hep.upenn.edu/&#62</a>;
&#60;<a href='http&#58;//srm.hep.upenn.edu' target='_blank' rel='nofollow'>http&#58;//srm.hep.upenn.edu</a> &#60;<a href='http&#58;//srm.hep.upenn.edu/&#62' target='_blank' rel='nofollow'>http&#58;//srm.hep.upenn.edu/&#62</a>;&#62;.

After the successful transactions, I did see another failure.  Is it
possible that it is sensitive to the originating host?
</div><script type='text/javascript'>
        $('#show_745976507').click(function() {
            $('#detail_745976507').slideDown("normal");
            $('#show_745976507').hide();
            $('#hide_745976507').show();
        });
        $('#hide_745976507').click(function() {
            $('#detail_745976507').slideUp();
            $('#hide_745976507').hide();
            $('#show_745976507').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='14116#1363713946'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-19T17:25:46+00:00">Mar 19, 2013 05:25 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1363713946">&nbsp;</a></div><pre>Just an update here - Paul and I are handling this offline for now and will update the ticket with all  details later today.</pre></div><div class='update_description'><i onclick="document.location='14116#1363621166'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-18T15:39:26+00:00">Mar 18, 2013 03:39 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1363621166">&nbsp;</a></div><pre>I am aware of this and will be looking in to this today</pre></div><div class='update_description'><i onclick="document.location='14116#1363374946'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-15T19:15:46+00:00">Mar 15, 2013 07:15 PM UTC</time><a class="anchor" name="1363374946">&nbsp;</a></div><pre>No.  In fact, it just started failing...

by /DC=org/DC=doegrids/OU=People/CN=Paul T Keener 239636</pre></div><div class='update_description'><i onclick="document.location='14116#1363372233'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-15T18:30:33+00:00">Mar 15, 2013 06:30 PM UTC</time> by <b>echism</b><a class="anchor" name="1363372233">&nbsp;</a></div><pre>Paul,

Is this still working?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='14116#1363034975'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-11T20:49:35+00:00">Mar 11, 2013 08:49 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1363034975">&nbsp;</a></div><pre>Neha,

It seems to be working, but it also does after a restart.  We will need to wait several days to see if the errors come back.

Thanks.

-paul

On 03/11/2013 02&#58;05 PM, Neha Sharma wrote&#58;
Its definitely one of the things we need to fix.

Please go through
<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallOSGBestmanSE' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallOSGBestmanSE</a>
and see that you have the necessary conf to support gridmap file based
authentication mechanism

/-/-----------------------------------------------
Neha Sharma
Fermilab/FermiGrid/OSG Software
WH8E/630-840-6791
-------------------------------------------------

On Mar 11, 2013, at 1&#58;02 PM, Neha Sharma wrote&#58;

Yes, if you are not using GUMS, please set it to no and restart
Bestman server
/-/-----------------------------------------------
Neha Sharma
Fermilab/FermiGrid/OSG Software
WH8E/630-840-6791
-------------------------------------------------

On Mar 11, 2013, at 12&#58;59 PM, Paul T. Keener wrote&#58;

Neha,
<div id='show_587246322' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_587246322'>
Sorry, I got called away.  As far as I understand, we are not using
GUMS, so the BESTMAN_GUMS_ENABLED=yes is suspicious.  I thought that
the authentication for ATLAS data was done through FTS and used
&#34;CN=Robot&#58; ATLAS Data Management&#34;.  That DN and the some individual
requests (mostly file deletion) were authenticated through a hard
coded grid-mapfile.

Is it likely that changing the bestman2rc to
BESTMAN_GUMS_ENABLED=no
will work?

-paul

On 03/11/2013 01&#58;08 PM, Neha Sharma wrote&#58;
Hi Paul
Let&#39;s start troubleshooting here and update details in OSG GOC later.

I logged in as root and see

[root@srm certificates]# cat /etc/sysconfig/bestman2 | grep GUMS_ENABLED
BESTMAN_GUMS_ENABLED=yes
[root@srm certificates]#
[root@srm certificates]# cat /etc/bestman2/conf/bestman2.rc | grep GUMS
## e.g.
SUMGserviceURL=<a href='https&#58;//gums.lbl.gov&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort' target='_blank' rel='nofollow'>https&#58;//gums.lbl.gov&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort</a>
## e.g.
GUMSCurrHostDN=/DC=org/DC=doegrids/OU=Services/CN=gumsclient.lbl.gov
### GUMSserviceURL=
### GUMSCurrHostDN=
[root@srm certificates]#

So, looks like the setting that specifies the GUMS server details is
missing from the /etc/bestman2/conf/bestman2.rc file. I don&#39;t know of
any other config file where Bestman server will look for this , so that
is definitely the first thing we need to fix.

On my SE, it looks like

[root@fnpc11x8 ~]# cat /etc/bestman2/conf/bestman2.rc | grep GUMS
## e.g.
SUMGserviceURL=<a href='https&#58;//gums.lbl.gov&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort' target='_blank' rel='nofollow'>https&#58;//gums.lbl.gov&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort</a>
## e.g.
GUMSCurrHostDN=/DC=org/DC=doegrids/OU=Services/CN=gumsclient.lbl.gov
GUMSserviceURL=<a href='https&#58;//gums.fnal.gov&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort' target='_blank' rel='nofollow'>https&#58;//gums.fnal.gov&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort</a>
### GUMSCurrHostDN=
[root@fnpc11x8 ~]#
</div><script type='text/javascript'>
        $('#show_587246322').click(function() {
            $('#detail_587246322').slideDown("normal");
            $('#show_587246322').hide();
            $('#hide_587246322').show();
        });
        $('#hide_587246322').click(function() {
            $('#detail_587246322').slideUp();
            $('#hide_587246322').hide();
            $('#show_587246322').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='14116#1363011856'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-11T14:24:16+00:00">Mar 11, 2013 02:24 PM UTC</time><a class="anchor" name="1363011856">&nbsp;</a></div><pre>Interestingly, after getting about 6 of these failure messages, there have been a number of successful transactions.

Neha, can you sent me your ssh public key?

by /DC=org/DC=doegrids/OU=People/CN=Paul T Keener 239636</pre></div><div class='update_description'><i onclick="document.location='14116#1363011616'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-11T14:20:16+00:00">Mar 11, 2013 02:20 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1363011616">&nbsp;</a></div><pre>Hi
Is there a way for me to get root access on this bestman server node?

Thanks
-Neha</pre></div><div class='update_description'><i onclick="document.location='14116#1363009471'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-11T13:44:31+00:00">Mar 11, 2013 01:44 PM UTC</time><a class="anchor" name="1363009471">&nbsp;</a></div><pre>bestman2 is currently in a failure mode.  If there is anything that can be done to diagnose this while it is failing, now would be a good time.  There don&#39;t seem to be a lot of transfer requests, so I can leave it failing for a while.

by /DC=org/DC=doegrids/OU=People/CN=Paul T Keener 239636</pre></div><div class='update_description'><i onclick="document.location='14116#1362756204'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-08T15:23:24+00:00">Mar 8, 2013 03:23 PM UTC</time> by <b>echism</b><a class="anchor" name="1362756204">&nbsp;</a></div><pre>setting a date for reminder.</pre></div><div class='update_description'><i onclick="document.location='14116#1362670138'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-07T15:28:58+00:00">Mar 7, 2013 03:28 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1362670138">&nbsp;</a></div><pre>Paul&#58;

The OSG Software team will take a look at these issues soon. Thanks for the heads up on the failures.

-- Tim</pre></div><div class='update_description'><i onclick="document.location='14116#1362591566'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-06T17:39:26+00:00">Mar 6, 2013 05:39 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1362591566">&nbsp;</a></div><pre>I am member of the ATLAS VO.  My bestman2 server fails every 3 to 4 days with authentication failures&#58;

323391734 [qtp1197515375-97850] WARN gov.lbl.srm.server.JettyGSIConnector7 - org.globus.common.ChainedIOException&#58; Authentication failed [Caused by&#58; Failure unspecified at GSS-API level [Caused by&#58; Failure unspecified at GSS-API level [Caused by&#58; General SSLEngine problem]]]

This started shortly after the upgrade to 2.3.0.

The OSG ticket that has been tracking the transfer failures is 13575.

by /DC=org/DC=doegrids/OU=People/CN=Paul T Keener 239636</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F14116">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
