<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[8451] BDII Issue</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=8451" method="post">
<div class="page-header">
    <h3><span class="muted">8451</span> / BDII Issue</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Xin Zhao</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">High</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-04-30</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=57403">57403</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/8451", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/8451?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/8451?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20BDII%20Issue%20ISSUE%3D8451%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='8451#1272371502'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-27T12:31:42+00:00">Apr 27, 2010 12:31 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1272371502">&nbsp;</a></div><pre>I&#39;m going to close this ticket as Xin reports successful addition of the BNL_ATLAS_$ resource. We can take up the related issues with ReSS in another ticket.</pre></div><div class='update_description'><i onclick="document.location='8451#1272297729'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-26T16:02:09+00:00">Apr 26, 2010 04:02 PM UTC</time> by <b>Xin zhao</b><a class="anchor" name="1272297729">&nbsp;</a></div><pre>Hello,

I add BNL_ATLAS_4 resource to WLCG BDII this morning, so far so good.
Looks like the main issue for this ticket is solved now.

As far as dropping GlueLocation records is concerned, I think the OSG
GIP group can check it out?

Thanks,
Xin

On 4/26/2010 11&#58;22 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8451#1272295326'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-26T15:22:06+00:00">Apr 26, 2010 03:22 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1272295326">&nbsp;</a></div><pre>Hi all,
there still is the question whether those GlueLocation records
could simply be dropped altogether...

[GGUS Internal Fields]
AffectedSite&#58; null
ConcernedVO&#58; none

-- by Maarten Litmaath at Mon Apr 26 15&#58;20&#58;42 UTC 2010

The limit is not arbitrary, it was set at 5Mb as this seemed like a sensible value at the time. As sites has scaled up, they have increased the amount of information that is published and hence the valued needed to be revised. An update was available but was not rolled out in time.  The new limit is 10Mb.
-- by Laurence Field at Mon Apr 26 14&#58;39&#58;21 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8451#1272292762'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-26T14:39:22+00:00">Apr 26, 2010 02:39 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1272292762">&nbsp;</a></div><pre>The limit is not arbitrary, it was set at 5Mb as this seemed like a sensible value at the time. As sites has scaled up, they have increased the amount of information that is published and hence the valued needed to be revised. An update was available but was not rolled out in time.  The new limit is 10Mb.

[GGUS Internal Fields]
AffectedSite&#58; null
ConcernedVO&#58; none

-- by Laurence Field at Mon Apr 26 14&#58;38&#58;13 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8451#1272292742'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-26T14:39:02+00:00">Apr 26, 2010 02:39 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1272292742">&nbsp;</a></div><pre>I&#39;ll bring this up again on today&#39;s Ops meeting and tomorrow&#39;s Prod meeting and see if it can be closed.</pre></div><div class='update_description'><i onclick="document.location='8451#1272289026'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-26T13:37:06+00:00">Apr 26, 2010 01:37 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1272289026">&nbsp;</a></div><pre>Xin, et al.,

I suspect this ticket is ready to be closed given you&#39;ve applied GIP updates, and that has caused the size of the data to shrink considerably -- correct?

Presumably Rob/management will work with WLCG management board and/or EGEE to set a policy for the data size limit, etc. which I suspect is arbitrary right now.

Please let me know, thanks!

-ag</pre></div><div class='update_description'><i onclick="document.location='8451#1272288774'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-26T13:32:54+00:00">Apr 26, 2010 01:32 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1272288774">&nbsp;</a></div><pre>Is see this update <a href='8451.html#1271791413' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=8451#1271791413</a> from Dan Fraser on April 20th. Was this intentional? I ask because the update itself is empty except Dan&#39;s signature. -ag</pre></div><div class='update_description'><i onclick="document.location='8451#1271791413'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-20T19:23:33+00:00">Apr 20, 2010 07:23 PM UTC</time><a class="anchor" name="1271791413">&nbsp;</a></div><pre>-- by Dan Fraser</pre></div><div class='update_description'><i onclick="document.location='8451#1271772682'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-20T14:11:22+00:00">Apr 20, 2010 02:11 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1271772682">&nbsp;</a></div><pre>Ongoing discussion between Maarten and Xin; will ping later in the week. -ag</pre></div><div class='update_description'><i onclick="document.location='8451#1271751333'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-20T08:15:33+00:00">Apr 20, 2010 08:15 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1271751333">&nbsp;</a></div><pre>Hi Xin,
sure, the ATLAS SW needs to be published, but maybe it is sufficient
to have GlueHostApplicationSoftwareRunTimeEnvironment attributes
in GlueSubCluster records?
Are the GlueLocation records actually used by something?

[GGUS Internal Fields]
AffectedSite&#58; null
ConcernedVO&#58; none

-- by Maarten Litmaath at Tue Apr 20 08&#58;13&#58;44 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8451#1271723946'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-20T00:39:06+00:00">Apr 20, 2010 12:39 AM UTC</time> by <b>Xin zhao</b><a class="anchor" name="1271723946">&nbsp;</a></div><pre>Hello,

The atlas software releases is one of the critical information we need
BDII for.
Brian noticed some duplicated information from the several BNL CEs,
after correcting them, we should
be well under the current limit.

Thanks,
Xin

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8451#1271711816'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-19T21:16:56+00:00">Apr 19, 2010 09:16 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1271711816">&nbsp;</a></div><pre>Hi Burt, all,
indeed it appears that most of the stuff published by BNL_ATLAS
consists of GlueLocationLocalID records.

As of the time of writing, there are 2852 of them,
with a combined size of 1748136 bytes.

Friday evening when BNL_ATLAS got published again,
there even were 4252 such records making up 2613296 bytes.

Are those records actually used by something?
Maybe we just can drop them altogether...

[GGUS Internal Fields]
AffectedSite&#58; null
ConcernedVO&#58; none

-- by Maarten Litmaath at Mon Apr 19 21&#58;15&#58;47 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8451#1271689748'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-19T15:09:08+00:00">Apr 19, 2010 03:09 PM UTC</time> by <b>Burt Holzman</b><a class="anchor" name="1271689748">&nbsp;</a></div><pre>I just got back from Madison, sorry I didn&#39;t see this ticket.
One possible workaround to reduce the size of the GIP output is to
remove the advertisement for any deprecated software releases if
possible.  Each software release generates stanzas for each subcluster
(at least one per CE).

- B

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8451#1271689746'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-19T15:09:06+00:00">Apr 19, 2010 03:09 PM UTC</time> by <b>Xin zhao</b><a class="anchor" name="1271689746">&nbsp;</a></div><pre>There is another ticket we are working on, correcting one misconfigured
BDII info from our CE, which might help reducing the site
for the overall BNL-ATLAS site, we will see ...

Xin

On 4/19/2010 10&#58;26 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8451#1271687218'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-19T14:26:58+00:00">Apr 19, 2010 02:26 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1271687218">&nbsp;</a></div><pre>As discussed at today&#39;s WLCG daily meeting, this is a BDII mw problem, not a site one&#58;
<a href='https&#58;//twiki.cern.ch/twiki/bin/view/LCG/WLCGDailyMeetingsWeek100419#Monday' target='_blank' rel='nofollow'>https&#58;//twiki.cern.ch/twiki/bin/view/LCG/WLCGDailyMeetingsWeek100419#Monday</a>

If there is any workaround to be applied by the sites (including CERN production BDII) while a fix is released, please, let us know asap.

[GGUS Internal Fields]
AffectedSite&#58; null
ConcernedVO&#58; none

-- by Maite Barroso at Mon Apr 19 14&#58;24&#58;41 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8451#1271661663'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-19T07:21:03+00:00">Apr 19, 2010 07:21 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1271661663">&nbsp;</a></div><pre>CERN ID CT0000000677305  &#58;

[GGUS Internal Fields]
AffectedSite&#58; null
ConcernedVO&#58; none

-- by mailer at Mon Apr 19 07&#58;19&#58;02 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8451#1271454246'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T21:44:06+00:00">Apr 16, 2010 09:44 PM UTC</time> by <b>maarten.litmaath@....</b><a class="anchor" name="1271454246">&nbsp;</a></div><pre>Earlier today BNL_ATLAS exceeded the limit and was thus rejected&#58;

=== 2010-04-16 22&#58;11&#58;07 START
=== 2010-04-16 22&#58;12&#58;23 END - elapsed&#58;   76
[...]
ERROR&#58; OSG_BNL-ATLAS_BNL_ATLAS_1 is producing too much data!
ERROR&#58; OSG_BNL-ATLAS_BNL_ATLAS_2 is producing too much data!
ERROR&#58; OSG_BNL-ATLAS_BNL_ATLAS_5 is producing too much data!
ERROR&#58; OSG_BNL-ATLAS_BNL_ATLAS_SE is producing too much data!</pre></div><div class='update_description'><i onclick="document.location='8451#1271454066'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T21:41:06+00:00">Apr 16, 2010 09:41 PM UTC</time> by <b>maarten.litmaath@....</b><a class="anchor" name="1271454066">&nbsp;</a></div><pre>Hi,
an EGEE/WLCG top-level BDII currently has a limit of 5 MB per source&#58;
if a site produces more, it is rejected as a protection against
misconfigured sites.  An update is expected to be released soon
that will increase the limit to 10 MB.  In the meantime sites will
have to comply with the 5 MB limit to avoid problems.</pre></div><div class='update_description'><i onclick="document.location='8451#1271450340'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T20:39:00+00:00">Apr 16, 2010 08:39 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1271450340">&nbsp;</a></div><pre>Things are back to normal. I&#39;ll leave this ticket opened but lower the priority from &#39;Critical&#39; to &#39;High&#39; so we can get some details about what happened on the CERN end.

ldapsearch -h lcg-bdii.cern.ch -p 2170 -x -b mds-vo-name=BNL-ATLAS,mds-vo-name=local,o=grid &#34;(&(objectClass=GlueService)(objectClass=GlueKey)(GlueForeignKey=GlueSiteUniqueID=BNL-ATLAS))&#34; GlueServiceUniqueID
# extended LDIF
#
# LDAPv3
# base &#60;mds-vo-name=BNL-ATLAS,mds-vo-name=local,o=grid&#62; with scope subtree
# filter&#58; (&(objectClass=GlueService)(objectClass=GlueKey)(GlueForeignKey=GlueSiteUniqueID=BNL-ATLAS))
# requesting&#58; GlueServiceUniqueID
#

# myproxy.usatlas.bnl.gov&#58;7512, BNL-ATLAS, local, grid
dn&#58; GlueServiceUniqueID=myproxy.usatlas.bnl.gov&#58;7512,Mds-Vo-name=BNL-ATLAS,Mds
-Vo-name=local,o=grid
GlueServiceUniqueID&#58; myproxy.usatlas.bnl.gov&#58;7512

# httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv1, BNL-ATLAS, local, grid
dn&#58; GlueServiceUniqueID=httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv1,Mds-V
o-name=BNL-ATLAS,Mds-Vo-name=local,o=grid
GlueServiceUniqueID&#58; httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv1

# httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2, BNL-ATLAS, local, grid
dn&#58; GlueServiceUniqueID=httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2,Mds-V
o-name=BNL-ATLAS,Mds-Vo-name=local,o=grid
GlueServiceUniqueID&#58; httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2

# search result
search&#58; 2
result&#58; 0 Success

# numResponses&#58; 4
# numEntries&#58; 3</pre></div><div class='update_description'><i onclick="document.location='8451#1271449387'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T20:23:07+00:00">Apr 16, 2010 08:23 PM UTC</time> by <b>Xin zhao</b><a class="anchor" name="1271449387">&nbsp;</a></div><pre>I see it&#39;s working now.

Xin

On 4/16/2010 4&#58;12 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8451#1271448731'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T20:12:11+00:00">Apr 16, 2010 08:12 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1271448731">&nbsp;</a></div><pre>I&#39;ve heard back from Laurence he&#39;ll check into things on the CERN side when he gets to a connection. Our early theory is that BNL_ATLAS_3 was recently added to the BDII Interop Monitoring, this made 5 CEs and 1 SE reporting as the BNL-ATLAS Resource Group. This may have triggered a size limit in the transfer from the OSG BDII to the CERN BDII. At this point this is just and hunch and we&#39;ll have to get final word of the problem from Laurence.

Xin has removed BNL_ATLAS_3 and BNL_ATLAS_4 from the BDII Interoperability Reporting to see if this solves the problem.</pre></div><div class='update_description'><i onclick="document.location='8451#1271444924'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T19:08:44+00:00">Apr 16, 2010 07:08 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1271444924">&nbsp;</a></div><pre>Adding GGUS (TX) so they can redirect to anyone that may have answers to this; Added Tony Tiradani, Burt Holzman, Brian Bockelman, Hiro Ito, John Hover, and Michael Ernst to ticket&#39;s CC; Removed Soichi from the ticket.

GGUS - Rob Quick and I have tried various ldap queries, and find that resource_group (site) BNL-ATLAS is missing in its entirety from all the top level WLCG BDIIs though it is being provided by our feeder BDII (is.grid.iu.edu&#58;2180); I checked the OIM topology configuration presented by MyOSG, and BNL-ATLAS resource_group, and its CEs/SEs appear to be configured properly (For example&#58; see <a href='http&#58;//tinyurl.com/y8xfqtw' target='_blank' rel='nofollow'>http&#58;//tinyurl.com/y8xfqtw</a>). The equivalent CMS resource_group is showing up fine on all the top level WLCG BDIIs.

Please look into this, and redirect this ticket to the relevant parties. Note this is considered extremely high priority by ATLAS.

Thanks,
-ag

More debugging information below&#58;

#### Check for resource_groups on all top level WLCG BDIIs ####
# echo $RGB
BNL-ATLAS

# for H1 in &#96;host lcg-bdii.cern.ch | cut -f4 -d&#92; &#96; ; do echo ${H1}; H1=${H1}&#58;2170; ldapsearch -xLLL -h ${H1} -b mds-vo-name=${RGB},mds-vo-name=local,o=grid |wc; done
128.142.143.183
No such object (32)
Matched DN&#58; Mds-Vo-name=local,o=grid
0       0       0
128.142.198.40
No such object (32)
Matched DN&#58; Mds-Vo-name=local,o=grid
0       0       0
128.142.198.41
No such object (32)
Matched DN&#58; Mds-Vo-name=local,o=grid
0       0       0
128.142.205.144
No such object (32)
Matched DN&#58; Mds-Vo-name=local,o=grid
0       0       0
128.142.142.161
No such object (32)
Matched DN&#58; Mds-Vo-name=local,o=grid
<div id='show_1329761185' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1329761185'>0       0       0

However, a similar ldapsearch on the USCMS-TI resource_group (site)&#58; USCMS-FNAL-WC1 yields results that we expect.

# echo $RGU
USCMS-FNAL-WC1

# for H1 in &#96;host lcg-bdii.cern.ch | cut -f4 -d&#92; &#96; ; do echo ${H1}; H1=${H1}&#58;2170; ldapsearch -xLLL -h ${H1} -b mds-vo-name=${RGU},mds-vo-name=local,o=grid |wc; done
128.142.142.161
15171   27306  582172
128.142.205.144
15171   27306  582172
128.142.198.41
15171   27306  582172
128.142.198.40
15171   27306  582172
128.142.143.183
15171   27306  582172

#### Check for resource_groups on all GOC Feeder BDIIs (considered site level)

for H1 in &#96;host is.grid.iu.edu| cut -f4 -d&#92; &#96; ; do echo ${H1}; H1=${H1}&#58;2180; ldapsearch -xLLL -h ${H1} -b mds-vo-name=${RGB},o=grid |wc; done
129.79.14.135
131172  227843 5491273
134.68.22.133
131172  227843 5491273

# echo $RGU
USCMS-FNAL-WC1

# for H1 in &#96;host is.grid.iu.edu| cut -f4 -d&#92; &#96; ; do echo ${H1}; H1=${H1}&#58;2180; ldapsearch -xLLL -h ${H1} -b mds-vo-name=${RGU},o=grid |wc; done
134.68.22.133
15084   27232  567387
129.79.14.135
15084   27232  567387
</div><script type='text/javascript'>
        $('#show_1329761185').click(function() {
            $('#detail_1329761185').slideDown("normal");
            $('#show_1329761185').hide();
            $('#hide_1329761185').show();
        });
        $('#hide_1329761185').click(function() {
            $('#detail_1329761185').slideUp();
            $('#hide_1329761185').hide();
            $('#show_1329761185').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8451#1271443494'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T18:44:54+00:00">Apr 16, 2010 06:44 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1271443494">&nbsp;</a></div><pre>Added James Casey to my attempts to contact Ops people at CERN. James is on vacation and referred me to Laurence.</pre></div><div class='update_description'><i onclick="document.location='8451#1271442791'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T18:33:11+00:00">Apr 16, 2010 06:33 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1271442791">&nbsp;</a></div><pre>I definitely see the OSG BDII Info...

ldapsearch -xLLL -h is.grid.iu.edu&#58;2180 -b mds-vo-name=BNL-ATLAS,o=grid &#34;(&(objectClass=GlueService)(objectClass=GlueKey)(GlueForeignKey=GlueSiteUniqueID=BNL-ATLAS))&#34; GlueServiceUniqueID
dn&#58; GlueServiceUniqueID=myproxy.usatlas.bnl.gov&#58;7512,Mds-Vo-name=BNL-ATLAS,o=g
rid
GlueServiceUniqueID&#58; myproxy.usatlas.bnl.gov&#58;7512

dn&#58; GlueServiceUniqueID=httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv1,Mds-V
o-name=BNL-ATLAS,o=grid
GlueServiceUniqueID&#58; httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv1

dn&#58; GlueServiceUniqueID=httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2,Mds-V
o-name=BNL-ATLAS,o=grid
GlueServiceUniqueID&#58; httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2

But nothing from the same query to the CERN BDII...

ldapsearch -xLLL -h lcg-bdii.cern.ch&#58;2170 -b mds-vo-name=BNL-ATLAS,o=grid &#34;(&(objectClass=GlueService)(objectClass=GlueKey)(GlueForeignKey=GlueSiteUniqueID=BNL-ATLAS))&#34; GlueServiceUniqueID
No such object (32)
Matched DN&#58; o=grid</pre></div><div class='update_description'><i onclick="document.location='8451#1271442050'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T18:20:50+00:00">Apr 16, 2010 06:20 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1271442050">&nbsp;</a></div><pre>I&#39;ve attempted to contact Laurence at CERN, I&#39;m waiting for a callback. Making this ticket critical in status.</pre></div><div class='update_description'><i onclick="document.location='8451#1271441999'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T18:19:59+00:00">Apr 16, 2010 06:19 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1271441999">&nbsp;</a></div><pre>Using Xin&#39;s message to open a ticket.

Hello all,

Starting this morning, the BNL SE information can&#39;t be retrieved from
the cern BDII&#58;

export LCG_GFAL_INFOSYS=lcg-bdii.cern.ch&#58;2170
glite-sd-query -t srm -s BNL-ATLAS
R-GMA API reported error (Can&#39;t connect to servlet (check URL).).

It&#39;s still available from the OSG BDII&#58;

export LCG_GFAL_INFOSYS=is.grid.iu.edu&#58;2180
glite-sd-query -t srm -s BNL-ATLAS

Name&#58; httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv1
Type&#58; SRM
Endpoint&#58; httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv1
Version&#58; 1.1.0

Name&#58; httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2
Type&#58; SRM
Endpoint&#58; httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2
Version&#58; 2.2.0

Could you help track where the problem is? We need to restore the info
asap, since it&#39;s critical to
our production.

Thanks,
Xin</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F8451">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 8451});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
