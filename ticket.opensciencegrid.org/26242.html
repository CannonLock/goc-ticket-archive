<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[26242] OUHEP_ITB SRM RSV issue</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="robots" content="noindex, nofollow" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=26242" method="post">
<div class="page-header">
    <h3><span class="muted">26242</span> / OUHEP_ITB SRM RSV issue</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Horst Severini</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Horst Severini</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">close</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-09-21</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Carl Edquist <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Matyas Selmeci <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/26242", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='26242#1442613203'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T21:53:23+00:00">Sep 18, 2015 09:53 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442613203">&nbsp;</a></div><pre>Yay!!!  Glad we could get this fixed!

<font color='#7F7E6F'>&#62; Oh wait, I found it, it&#39;s /etc/rsv/metrics/org.osg.srm.srmcp-readwrite.conf</font>

Yup.  You can disable it by setting verbose = 0 or just removing the verbose line.  (But it looks like you got that already!)

<font color='#7F7E6F'>&#62; By the way, &#39;service rsv status&#39; returned more than 2800 jobs.</font>
<font color='#7F7E6F'>&#62; Apparently every time it gets restarted, it just adds 18 more jobs,</font>
<font color='#7F7E6F'>&#62; but never removes the old ones? Is that normal?</font>

Hmm, I don&#39;t remember hearing about that before.  If it comes back, please open up a new ticket and we&#39;ll look more into it.

Thanks and have a good weekend!  &#58;)

Carl</pre></div><div class='update_description'><i onclick="document.location='26242#1442612302'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T21:38:22+00:00">Sep 18, 2015 09:38 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1442612302">&nbsp;</a></div><pre>Hi Carl,

nope, still doesn&#39;t work, even after another &#39;yum clean all&#39;&#58;

----
[root@osgitb1 hs]# yum --enablerepo=osg-development update rsv&#92;*
Loaded plugins&#58; priorities, product-id, refresh-packagekit, rhnplugin, security,
&#58; subscription-manager
This system is receiving updates from RHN Classic or RHN Satellite.
Setting up Update Process
27 packages excluded due to repository priority protections
No Packages marked for Update
----
[root@osgitb1 hs]# yum --enablerepo=osg-development repolist
Loaded plugins&#58; priorities, product-id, refresh-packagekit, rhnplugin, security,
&#58; subscription-manager
This system is receiving updates from RHN Classic or RHN Satellite.
27 packages excluded due to repository priority protections
repo id                            repo name                            status
Rocks-6.1                          Rocks 6.1                             4,016+8
osg                                OSG Software for Enterprise Linux 6     3,132
osg-development                    OSG Software for Enterprise Linux 6       764
rhel-x86_64-server-6               Red Hat Enterprise Linux Server (v.  16,064+7
rhel-x86_64-server-6-debuginfo     RHEL Server Debuginfo (v.6 for x86_6    6,457
rhel-x86_64-server-fastrack-6      RHEL Server FasTrack (v. 6 64-bit x8      191
rhel-x86_64-server-optional-6      RHEL Server Optional (v. 6 64-bit x8 9,003+13
rhel-x86_64-server-supplementary-6 RHEL Server Supplementary (v. 6 64-b      547
repolist&#58; 40,174
----

It&#39;s in osg-minefield, though, so I just updated it from there.

I&#39;m running by hand now, and it&#39;s sitting there, so I think that&#39;s
a good sign, since it&#39;s not erroring out immediately! &#58;)

<div id='show_1484178393' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1484178393'>And it seems to have succeeded after a while, great!

Oh, so now I can take out the debug statement again -- but I can&#39;t
remember in which file we set that. Can you please remind me?
We had originally hacked /usr/libexec/rsv/probes/srmtester-probe,
which was wiped out again with the update. Then we put something
in a config file after the previous update, but I can&#39;t find
that anymore now.

Oh wait, I found it, it&#39;s /etc/rsv/metrics/org.osg.srm.srmcp-readwrite.conf;
there are entirely too many config files in this operation!!! ;)

By the way, &#39;service rsv status&#39; returned more than 2800 jobs.
Apparently every time it gets restarted, it just adds 18 more jobs,
but never removes the old ones? Is that normal?

I just did a &#39;condor_cron_rm rsv&#39; to get rid of them,
and am now restarting both condor-cron and rsv, hopefully
that&#39;ll normalize things again!

Yup, the RSV web page looks good again now, yay!

<a href='https&#58;//osgitb1.nhn.ou.edu/rsv/' target='_blank' rel='nofollow'>https&#58;//osgitb1.nhn.ou.edu/rsv/</a>

So I think we can close this ticket again now!

Thanks a lot,
have a good weekend,

Horst
</div><script type='text/javascript'>
        $('#show_1484178393').click(function() {
            $('#detail_1484178393').slideDown("normal");
            $('#show_1484178393').hide();
            $('#hide_1484178393').show();
        });
        $('#hide_1484178393').click(function() {
            $('#detail_1484178393').slideUp();
            $('#hide_1484178393').hide();
            $('#show_1484178393').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='26242#1442610156'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T21:02:36+00:00">Sep 18, 2015 09:02 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442610156">&nbsp;</a></div><pre>Hmm, it worked for me when I tried it earlier... If you try again and it still doesn&#39;t work, let us know (because it would be unexpected).  But in any case you should also be able to install directly from koji from osg-minefield

yum ---enablerepo=osg-minefield update rsv&#92;*

Carl</pre></div><div class='update_description'><i onclick="document.location='26242#1442606896'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T20:08:16+00:00">Sep 18, 2015 08:08 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1442606896">&nbsp;</a></div><pre>Nope, not yet.

I&#39;ll try again later tonight.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='26242#1442604101'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T19:21:41+00:00">Sep 18, 2015 07:21 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442604101">&nbsp;</a></div><pre>Ah, sorry Horst!  I probably should have waited a bit to announce it -- I think it was just propagation delay to the main repo.grid.iu.edu server and the mirrors.  I think it should work now if you try again...

Carl</pre></div><div class='update_description'><i onclick="document.location='26242#1442602231'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T18:50:31+00:00">Sep 18, 2015 06:50 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1442602231">&nbsp;</a></div><pre>Hi Carl,

hmm, I can&#39;t find that. I did a &#39;yum clean all&#39; for good measure, but
&#39;yum ---enablerepo=osg-development update rsv&#39; doesn&#39;t show a new
version. I even tried osg-testing, osg-upcoming-development and
-testing, but nothing there, either. We have rsv-3.10.3-1.

What am I missing? &#58;)

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='26242#1442599641'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T18:07:21+00:00">Sep 18, 2015 06:07 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442599641">&nbsp;</a></div><pre>I&#39;ve built rsv-3.10.4-1, feel free to try it out from osg-development.

Carl</pre></div><div class='update_description'><i onclick="document.location='26242#1442580621'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T12:50:21+00:00">Sep 18, 2015 12:50 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1442580621">&nbsp;</a></div><pre>Thanks Carl!

Yes, I can certainly install the RPM as soon as it&#39;s available.
That&#39;s what this ITB is really there for in the first place! &#58;)

It&#39;s still strange that there&#39;s such a long time delay, though.
But I guess that&#39;s perfectly &#39;normal&#39; with NFS?

You were saying that the reason this didn&#39;t bite us with srm-copy was
that srm-copy didn&#39;t do an srm-ls before the first copy,
and therefore there was nothing cached which could be incorrectly
interpreted after the first copy? Or did I not understand that correctly?

I guess what I&#39;m wondering is whether this NFS caching &#39;feature&#39;
is causing problems in other areas as well ...

Thanks again,

Horst</pre></div><div class='update_description'><i onclick="document.location='26242#1442544025'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T02:40:25+00:00">Sep 18, 2015 02:40 AM UTC</time><a class="anchor" name="1442544025">&nbsp;</a></div><pre>Great!  Thanks!

Once the fix is in osg-development, can Horst try deploying the new RPM (it&#39;ll be great to close out the ticket!)?

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26242#1442543469'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T02:31:09+00:00">Sep 18, 2015 02:31 AM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442543469">&nbsp;</a></div><pre>I added the retry mechanism for &#34;No such file or directory&#34; errors -- works consistently now.

Interesting to note it does actually seem to take 40-60s in many (most?) cases, only succeeding on the 4th try (that is, it still fails after 40s but succeeds after 60s).

This should make it into the October release.

Carl</pre></div><div class='update_description'><i onclick="document.location='26242#1442510307'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-17T17:18:27+00:00">Sep 17, 2015 05:18 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442510307">&nbsp;</a></div><pre>Sure that works.

Carl</pre></div><div class='update_description'><i onclick="document.location='26242#1442510288'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-17T17:18:08+00:00">Sep 17, 2015 05:18 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1442510288">&nbsp;</a></div><pre>Thanks Carl!

Horst</pre></div><div class='update_description'><i onclick="document.location='26242#1442510238'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-17T17:17:18+00:00">Sep 17, 2015 05:17 PM UTC</time><a class="anchor" name="1442510238">&nbsp;</a></div><pre>Hi,

This behavior has mostly to do with peculiarities of the NFS client.  I don&#39;t think it&#39;s really that common of a setup (most SRM endpoints are attached to a cluster or distributed file system - those tend to have different cache coherency semantics).

*However* - we should still gracefully handle this setup.  I just don&#39;t want to impose performance penalties at other sites.

How about, when we get a &#34;file not found&#34; back from the last gfal-copy, we retry once every 20 seconds for up to 4 times?  If the last try succeeds, we return OK.

Brian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26242#1442510075'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-17T17:14:35+00:00">Sep 17, 2015 05:14 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442510075">&nbsp;</a></div><pre>I&#39;ve opened <a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2043' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2043</a> to track the probe update.

Carl</pre></div><div class='update_description'><i onclick="document.location='26242#1442507996'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-17T16:39:56+00:00">Sep 17, 2015 04:39 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442507996">&nbsp;</a></div><pre>When I was playing around with it, first I added a 1 and 3 second sleep in between the gfal-copy calls, and that was still failing; and doing a { sleep 1; retry; } loop sometimes took over 10s before it would work, as I remember it.  But that definitely falls within the 3-60s ranged Brian cited from the nfs man page.

So, I think we can work around this by putting a &#62;= 60s sleep (maybe 65s just to be safe!).  That should always avoid the nfs cache issue.  (I&#39;ve tried it a handful of times and it seems to work consistently.)

Probably you could get around the issue with the &#39;noac&#39; mount option or minimize the issue with acregmin/acregmax (if this cache delay might actually break people&#39;s jobs with gfal-copy), so that&#39;s something to consider.  But as you said, it&#39;s the vanilla configuration, so unless we are going to recommend everybody change that in the install docs, the probe should accommodate the default config. ... I can update the probe.

Carl</pre></div><div class='update_description'><i onclick="document.location='26242#1442453879'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-17T01:37:59+00:00">Sep 17, 2015 01:37 AM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1442453879">&nbsp;</a></div><pre>Hi Carl,

thanks for all this detailed work! Yes, this does sound like an NFS related
issue, no question. That&#39;s quite disconcerting, though, since this is
a perfectly &#39;vanilla&#39; default NFS auto-mount setup, so we&#39;re seeing
these failures here, I can only imagine that they would show up
at other sites as well ...

No idea why they never appeared with srm-copy, but only since RSV was
upgraded to use gfal-copy. I hope someone has an explanation for that. &#58;)

In the mean time, is there anything we can do to make this RSV probe
less error prone? Maybe add a second or so delay between the two
copy commands?

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='26242#1442453415'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-17T01:30:15+00:00">Sep 17, 2015 01:30 AM UTC</time><a class="anchor" name="1442453415">&nbsp;</a></div><pre>Hi Carl,

Another important piece of information is that the gridftp server is on osgitb1.  So, I think the sequence of events is&#58;

srm-copy&#58;
- Client does SRM-PUT to osgitb2.  osgitb2 stat&#39;s the parent directory and returns gridftp server name (osgitb1).
- Client does a gridftp transfer with osgitb1.
- Client finishes successfully.
- Next client does a SRM-GET to osgitb2.  osgitb2 stats file and returns gridftp server name.

gfal-copy
- Client does SRM-LS on osgitb2 for the _file_.  osgitb2 sees the file does not exist and this goes into the cache.
- Client does SRM-PUT on osgitb2.  Stats the parent directory and returns gridftp server (osgitb1)
- GridFTP transfer with osgitb1.
- Client finishes.
- Next client does a SRM-LS to osgitb2.  However, since there was a cached negative lookup in the first step, you get a file-not-found.

So, I&#39;m pretty sure the underlying issue is the fact gfal-copy does a &#39;srm-ls&#39; web service call on the file prior to the first copy and gfal-copy does not.  You may be able to replicate the failure with srm-* tools by adding a &#34;srm-ls&#34; CLI invocation before the srm-copy.

Reading &#39;man nfs&#39;&#58;
- File attribute caching is enabled by default.  Defaults are for the cache to remain valid for at least 3s and at most 60s.
- File attribute caching can be disabled with passing the &#39;noac&#39; option.

So, I&#39;d be quite curious if the problem goes away with either a shorter cache time / added &#34;sleep&#34; statement or remounting with the &#34;noac&#34; option.

Brian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26242#1442447975'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-16T23:59:35+00:00">Sep 16, 2015 11:59 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442447975">&nbsp;</a></div><pre>Horst,  (...and also Brian...)

I&#39;ve been playing around with this as the rsv user (to try to mimic the probe behavior as closely as possible).

I can confirm that I see the problem you were seeing, but I&#39;ll add some details.

SOMETIMES doing the gfal-copy commands manually succeeds both ways.

But sometimes --and nearly always if done in quick succession-- the transfer back fails with &#34;No such file or directory&#34;.  Sometimes I can do several repeat attempts of the transfer back gfal-copy command and see that failure, and then eventually it succeeds.

Here I put both gfal-copy commands in a subshell (...) so that they run together; but even the manually run gfal-copy commands after that fail.  Although doing an ssh to osgitb2 and then an &#39;ls&#39; of the file in question seems to &#34;refresh&#34; things somehow, and the return gfal-copy command seems to work immediately after that&#58;

[rsv@osgitb1 ~]$ ( set -x;
rm -f /tmp/storage-probe-test-file.1442444113.16165.copy /share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165;
gfal-copy &#39;file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file&#39; &#39;<a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39</a>;;
&#58; &#34;[exit=$?]&#34; &#58;;
gfal-copy &#39;<a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39</a>; &#39;file&#58;///tmp/storage-probe-test-file.1442444113.16165.copy&#39;;
&#58; &#34;[exit=$?]&#34; &#58;;
)
+ rm -f /tmp/storage-probe-test-file.1442444113.16165.copy /share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165
+ gfal-copy file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file &#39;<a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39</a>;
Copying file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file   [DONE]  after 0s
+ &#58; &#39;[exit=0]&#39; &#58;
+ gfal-copy &#39;<a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39</a>; file&#58;///tmp/storage-probe-test-file.1442444113.16165.copy
gfal-copy error&#58; 2 (No such file or directory) - Could not stat the source&#58; Error reported from srm_ifce &#58; 2 [SE][Ls][SRM_INVALID_PATH] No such file or directory.
+ &#58; &#39;[exit=2]&#39; &#58;
[rsv@osgitb1 ~]$ gfal-copy &#39;<a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39</a>; file&#58;///tmp/storage-probe-test-file.1442444113.16165.copy
gfal-copy error&#58; 2 (No such file or directory) - Could not stat the source&#58; Error reported from srm_ifce &#58; 2 [SE][Ls][SRM_INVALID_PATH] No such file or directory.
[rsv@osgitb1 ~]$ gfal-copy &#39;<a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39</a>; file&#58;///tmp/storage-probe-test-file.1442444113.16165.copy
gfal-copy error&#58; 2 (No such file or directory) - Could not stat the source&#58; Error reported from srm_ifce &#58; 2 [SE][Ls][SRM_INVALID_PATH] No such file or directory.
[rsv@osgitb1 ~]$ gfal-copy &#39;<a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39</a>; file&#58;///tmp/storage-probe-test-file.1442444113.16165.copy
gfal-copy error&#58; 2 (No such file or directory) - Could not stat the source&#58; Error reported from srm_ifce &#58; 2 [SE][Ls][SRM_INVALID_PATH] No such file or directory.
[rsv@osgitb1 ~]$ gfal-copy &#39;<a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39</a>; file&#58;///tmp/storage-probe-test-file.1442444113.16165.copy
gfal-copy error&#58; 2 (No such file or directory) - Could not stat the source&#58; Error reported from srm_ifce &#58; 2 [SE][Ls][SRM_INVALID_PATH] No such file or directory.
[rsv@osgitb1 ~]$ gfal-copy &#39;<a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39</a>; file&#58;///tmp/storage-probe-test-file.1442444113.16165.copy
<div id='show_1728465329' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1728465329'>gfal-copy error&#58; 2 (No such file or directory) - Could not stat the source&#58; Error reported from srm_ifce &#58; 2 [SE][Ls][SRM_INVALID_PATH] No such file or directory.
[rsv@osgitb1 ~]$ gfal-copy &#39;<a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39</a>; file&#58;///tmp/storage-probe-test-file.1442444113.16165.copy
gfal-copy error&#58; 2 (No such file or directory) - Could not stat the source&#58; Error reported from srm_ifce &#58; 2 [SE][Ls][SRM_INVALID_PATH] No such file or directory.
[rsv@osgitb1 ~]$ ssh osgitb2 ls /share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165
Could not chdir to home directory /var/rsv&#58; No such file or directory
/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165
[rsv@osgitb1 ~]$ gfal-copy &#39;<a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#39</a>; file&#58;///tmp/storage-probe-test-file.1442444113.16165.copy
Copying <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165</a>   [DONE]  after 0s

The &#34;ssh osgitb2 ls /share/apps/osg/osg_data/storage-probe-test-file.1442444113.16165&#34; trick to &#34;refresh&#34; it seems to work fairly consistently, even when put in the (...) subshell so that there aren&#39;t delays between the commands.  (*)

One other failure I sometimes notice, if I run this a lot, is sometimes the copy out fails, saying the dest file already exists, even though it was just deleted -- though a subsequent gfal-copy out succeeds.  Seems to just be another example of a stale picture of things.

A review of the setup here (for the sake of having it in the ticket),

- the probe is running from osgitb1.nhn.ou.edu
- srm-destination-dir is set to /share/apps/osg/osg_data, which is a local disk on osgitb1.nhn.ou.edu
- the probe is being run against osgitb2.nhn.ou.edu, which has /share/apps as an nsf automount of osgitb1.local&#58;/export/apps
- /export/apps on osgitb1(via a symlink and bind-mount) resolves to the same path as /share/apps

By everything I&#39;ve seen, there just appears to be some kind of nfs propagation delay for osgitb2&#39;s picture of the osgitb1 mount.

Now, why is it that this only comes up with the gfal2 utils, but never before with srm-copy?  Is it just luck / a timing thing, or is there something that srm-copy is doing differently that is causing the nfs picture on osgitb2 to get &#34;refreshed&#34; that gfal-copy is not doing?  I want to suspect the latter but I can&#39;t really say with any confidence.

Brian, do you have any thoughts about this?

Thanks,
Carl

(*) PS&#58; actually now I seem to be able to &#34;trick it&#34; even with interleaved ssh+ls commands, so I am not sure there is any guaranteed way to &#34;refresh&#34; the nfs picture on osgitb2...
</div><script type='text/javascript'>
        $('#show_1728465329').click(function() {
            $('#detail_1728465329').slideDown("normal");
            $('#show_1728465329').hide();
            $('#hide_1728465329').show();
        });
        $('#hide_1728465329').click(function() {
            $('#detail_1728465329').slideUp();
            $('#hide_1728465329').hide();
            $('#show_1728465329').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='26242#1442358345'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T23:05:45+00:00">Sep 15, 2015 11:05 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442358345">&nbsp;</a></div><pre>Thanks Horst, I can get in now.

Carl</pre></div><div class='update_description'><i onclick="document.location='26242#1442356573'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T22:36:13+00:00">Sep 15, 2015 10:36 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1442356573">&nbsp;</a></div><pre>Hi Carl,

ah, you&#39;re probably right -- that happened because rsv is in the group rsv,
and that triggers the umask to be group writeable by default. I never
understood that stupid default!

I changed it, please try again!

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='26242#1442355164'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T22:12:44+00:00">Sep 15, 2015 10:12 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442355164">&nbsp;</a></div><pre>Thanks Horst!

But it looks like I can&#39;t get in due to the permissions on ~rsv/.ssh&#58;

[mis@osgitb1 ~]$ ls -ld ~rsv/.ssh/
drwxrwxr-x 2 rsv rsv 4096 Sep 15 16&#58;40 /var/rsv/.ssh/

(I think it needs a &#34;chmod g-w ~rsv/.ssh&#34;)

Carl</pre></div><div class='update_description'><i onclick="document.location='26242#1442353520'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T21:45:20+00:00">Sep 15, 2015 09:45 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1442353520">&nbsp;</a></div><pre>Hi Carl,

okay, I just copied your ssh key into the rsv area, give it a try to see
if it works.

I doubt that the automounter is the problem, since that would cause the
same problem for other users, right? Also, it stays mounted for a while,
so it&#39;s very unlikely that it would always be unmounted every time RSV runs.

I gotta run to south campus, be back online in a little while!

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='26242#1442352594'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T21:29:54+00:00">Sep 15, 2015 09:29 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442352594">&nbsp;</a></div><pre>Hi Horst,

Sorry for the drop off of attention to this ticket for a while...

Just to recap the problem, doing gfal-copy as a normal user or as the rsv user works fine, but when the rsv probe runs, it successfully copies out the file to the remote server, but fails trying to copy it back with &#34;No such file or directory&#34;.

Then, at some point the error changed, and both transfers succeeded but the gfal-rm failed.

But apparently now, with the verbose output enabled, we see &#34;Successful transfer to remote server. Failed to transfer file from remote server.&#34; and then nothing really useful in the failed gfal-copy debugging output.

Is that all correct?

Horst, would it be possible to get access to the rsv user so I can try running the probe directly?  (My ssh public key is in ~mis/.ssh/authorized_keys on osgitb1)

The other theory we had when Mat and I were looking into this was that it had something to do with /share/apps on osgitb2 being an nfs automount of osgitb1... (For instance, /share/apps doesn&#39;t appear at all on osgitb2 until accessed.)  Maybe that&#39;s not it but it may be worth keeping in mind in case it comes up somehow.

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='26242#1442263705'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-14T20:48:25+00:00">Sep 14, 2015 08:48 PM UTC</time><a class="anchor" name="1442263705">&nbsp;</a></div><pre>Hi Chris,

I don&#39;t -- but I&#39;d like to ... ;)

Thanks,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='26242#1442259501'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-14T19:38:21+00:00">Sep 14, 2015 07:38 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1442259501">&nbsp;</a></div><pre>Hello Software,

I&#39;ve just returned form PTO. Does anyone have any new information on this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='26242#1441214138'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T17:15:38+00:00">Sep 2, 2015 05:15 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1441214138">&nbsp;</a></div><pre>Well,

since I can&#39;t attach it, let me paste it here, since the email interface
seems to still work ....

Cheers,

Horst

-----
Running metric org.osg.srm.srmcp-readwrite&#58;

metricName&#58; org.osg.srm.srmcp-readwrite
metricType&#58; status
timestamp&#58; 2015-09-02 11&#58;37&#58;49 CDT
metricStatus&#58; Successful transfer to remote server.
serviceType&#58; OSG-SRM
serviceURI&#58; osgitb2.nhn.ou.edu&#58;8443
gatheredAt&#58; osgitb1.nhn.ou.edu
summaryData&#58; Successful transfer to remote server.
detailsData&#58; Command&#58; gfal-copy -vvv &#39;file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file&#39; &#39;<a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088&#39' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088&#39</a>; 2&#62;&1
Output from gfal-copy&#58;
DEBUG  no GFAL_CONFIG_DIR env var found, try to load configuration from default directory /etc/gfal2.d/
DEBUG  try to load configuration file /etc/gfal2.d//bdii.conf ...
DEBUG  try to load configuration file /etc/gfal2.d//gfal2_core.conf ...
DEBUG  try to load configuration file /etc/gfal2.d//gsiftp_plugin.conf ...
DEBUG  try to load configuration file /etc/gfal2.d//srm_plugin.conf ...
DEBUG  try to load configuration file /etc/gfal2.d//xrootd_plugin.conf ...
INFO ... no GFAL_PLUGIN_DIR environment variable specified, try to load plugins in the default directory &#58; /usr/lib64/gfal2-plugins/
DEBUG  [gfal_list_directory_plugins] add plugin to list to load /usr/lib64/gfal2-plugins//libgfal_plugin_file.so
DEBUG  [gfal_list_directory_plugins] add plugin to list to load /usr/lib64/gfal2-plugins//libgfal_plugin_srm.so
DEBUG  [gfal_list_directory_plugins] add plugin to list to load /usr/lib64/gfal2-plugins//libgfal_plugin_gridftp.so
DEBUG  [gfal_list_directory_plugins] add plugin to list to load /usr/lib64/gfal2-plugins//libgfal_plugin_xrootd.so
INFO [gfal_module_load] plugin /usr/lib64/gfal2-plugins//libgfal_plugin_file.so loaded with success
INFO  gfal_plugin loaded succesfully &#58; /usr/lib64/gfal2-plugins//libgfal_plugin_file.so
<div id='show_1830387747' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1830387747'>INFO [gfal_module_load] plugin /usr/lib64/gfal2-plugins//libgfal_plugin_srm.so loaded with success
INFO  gfal_plugin loaded succesfully &#58; /usr/lib64/gfal2-plugins//libgfal_plugin_srm.so
DEBUG  -&#62; [gridftp_plugin] try to load ..
DEBUG  define GSIFTP session re-use to TRUE
DEBUG  -&#62; [gridftp_plugin] loaded ..
INFO [gfal_module_load] plugin /usr/lib64/gfal2-plugins//libgfal_plugin_gridftp.so loaded with success
INFO  gfal_plugin loaded succesfully &#58; /usr/lib64/gfal2-plugins//libgfal_plugin_gridftp.so
INFO [gfal_module_load] plugin /usr/lib64/gfal2-plugins//libgfal_plugin_xrootd.so loaded with success
INFO  gfal_plugin loaded succesfully &#58; /usr/lib64/gfal2-plugins//libgfal_plugin_xrootd.so
DEBUG  plugin priority order&#58; file-2.9.1 -&#62; srm-2.9.1 -&#62; gridftp-2.9.1 -&#62; xrootd -&#62;
DEBUG Service endpoint resolution, resolved from FULL SURL <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a> -&#62; httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
INFO SRM context not available
DEBUG  SRM connection keep-alive 1
DEBUG  SRM operation timeout 180
DEBUG  SRM connection timeout 60
INFO    [gfal_srm_statG] try to stat file <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a>
DEBUG Service endpoint resolution, resolved from FULL SURL <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a> -&#62; httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
INFO SRM context recycled for httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
INFO    [gfal_srm_statG] try to stat file <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a>
DEBUG  -&#62; Gfal&#58;&#58;Transfer&#58;&#58;FileCopy
INFO Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY LIST&#58;ENTER
INFO Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY LIST&#58;ITEM file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file =&#62; <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a>
INFO Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY LIST&#58;EXIT
INFO Endpoint not SRM&#58; file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file
DEBUG Service endpoint resolution, resolved from FULL SURL <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a> -&#62; httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
INFO SRM context recycled for httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
INFO Endpoint of type BeStMan&#58; <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a>
INFO No Castor endpoint. Honor configuration for SESSION_REUSE
INFO Event triggered&#58; BOTH SRM PREPARE&#58;ENTER
INFO 		Checksum check enabled&#58; 0
DEBUG 		No SRM resolution needed on file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file
DEBUG 		PUT surl -&#62; turl resolution start
DEBUG Service endpoint resolution, resolved from FULL SURL <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a> -&#62; httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
INFO SRM context recycled for httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
INFO Got PUT token for <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088&#58' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088&#58</a>; put&#58;476
DEBUG 		PUT surl -&#62; turl resolution ended &#58; <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a> -&#62; <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a> (put&#58;476)
INFO Event triggered&#58; DESTINATION GFAL2&#58;&#58;PLUGINS&#58;&#58;SRM SRM&#58;PUT Got TURL <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a> =&#62; <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a>
INFO Event triggered&#58; BOTH SRM PREPARE&#58;EXIT
DEBUG  -&#62; Gfal&#58;&#58;Transfer&#58;&#58;FileCopy
INFO Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY LIST&#58;ENTER
INFO Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY LIST&#58;ITEM file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file =&#62; <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a>
INFO Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY LIST&#58;EXIT
DEBUG  -&#62; Gfal&#58;&#58;Transfer&#58;&#58;start_local_copy
INFO Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY&#58;LOCAL TRANSFER&#58;ENTER file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file =&#62; <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a>
DEBUG  open src file &#58; file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file
DEBUG  gfal_plugin_openG -&#62;
DEBUG  gfal_plugin_openG -&#62;
DEBUG   -&#62; [gfal_gridftp_openG]
DEBUG no session associated with this hostname, try find generic one ....
DEBUG no session found in cache for osgitb1.nhn.ou.edu!
DEBUG create descriptor for <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a>
DEBUG  -&#62; [GridFTPModule&#58;&#58;open]
DEBUG  -&#62; initialize FTP PUT global operations ...
DEBUG  &#60;- [GridFTPModule&#58;&#58;open]
DEBUG   [gfal_gridftp_openG]&#60;-
DEBUG   begin local transfer file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file -&#62;  <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a> with buffer size 4000000
DEBUG   -&#62; [gfal_gridftp_writeG]
DEBUG  write in the PUT main flow ...
DEBUG   -&#62; [gridftp_write_stream]
DEBUG    [GridFTP_Request_state&#58;&#58;wait_callback] setup gsiftp timeout to 300 seconds
DEBUG   [gfal_gridftp_writeG] &#60;-
DEBUG  &#60;- gfal_plugin_closeG
DEBUG   -&#62; [gfal_gridftp_closeG]
DEBUG Commit change for the current stream PUT ...
DEBUG   -&#62; [gridftp_write_stream]
DEBUG    [GridFTP_Request_state&#58;&#58;wait_callback] setup gsiftp timeout to 300 seconds
DEBUG Committed with success ...
DEBUG    [GridFTP_Request_state&#58;&#58;wait_callback] setup gsiftp timeout to 300 seconds
DEBUG  gridFTP operation done
DEBUG destroy descriptor for <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a>
DEBUG insert gridftp session for osgitb1.nhn.ou.edu in cache ...
DEBUG   [gfal_gridftp_closeG]&#60;-
DEBUG  &#60;- gfal_plugin_closeG
INFO Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY&#58;LOCAL TRANSFER&#58;EXIT file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file =&#62; <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a>
DEBUG  &#60;- Gfal&#58;&#58;Transfer&#58;&#58;start_local_copy
DEBUG  &#60;- Gfal&#58;&#58;Transfer&#58;&#58;FileCopy
INFO Event triggered&#58; DESTINATION SRM CLOSE&#58;ENTER <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a>
DEBUG    -&#62; [gfal_srm_putdone]
DEBUG Service endpoint resolution, resolved from FULL SURL <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a> -&#62; httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
INFO SRM context recycled for httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
DEBUG     [gfal_srm_putdone_srmv2_internal] start srm put done on <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a>
INFO Event triggered&#58; DESTINATION SRM CLOSE&#58;EXIT <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a>
DEBUG  &#60;- Gfal&#58;&#58;Transfer&#58;&#58;FileCopy
DEBUG gridftp session cache garbage collection ...
Copying 306 bytes file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file =&#62; <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088</a>

CRITICAL
Successful transfer to remote server.
Failed to transfer file from remote server.
Command&#58; gfal-copy -vvv &#39;<a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088&#39' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1441211867.10088&#39</a>; &#39;file&#58;///tmp/storage-probe-test-file.1441211867.10088.copy&#39; 2&#62;&1
Output from gfal-copy&#58;
DEBUG  no GFAL_CONFIG_DIR env var found, try to load configuration from default directory /etc/gfal2.d/
DEBUG  try to load configuration file /etc/gfal2.d//bdii.conf ...
DEBUG  try to load configuration file /etc/gfal2.d//gfal2_core.conf ...
DEBUG  try to load configuration file /etc/gfal2.d//gsiftp_plugin.conf ...
DEBUG  try to load configuration file /etc/gfal2.d//srm_plugin.conf ...
DEBUG  try to load configuration file /etc/gfal2.d//xrootd_plugin.conf ...
INFO ... no GFAL_PLUGIN_DIR environment variable sp
EOT
</div><script type='text/javascript'>
        $('#show_1830387747').click(function() {
            $('#detail_1830387747').slideDown("normal");
            $('#show_1830387747').hide();
            $('#hide_1830387747').show();
        });
        $('#hide_1830387747').click(function() {
            $('#detail_1830387747').slideUp();
            $('#hide_1830387747').hide();
            $('#show_1830387747').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='26242#1441213254'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T17:00:54+00:00">Sep 2, 2015 05:00 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1441213254">&nbsp;</a></div><pre>Well,

I&#39;m trying to attach the output, but the ticket system seems to be
EXTREMELY slow, and it never even finishes loading the ticket page,
let alone allow me to upload a file. Anyone know what&#39;s going on there?

Thanks,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26242#1441212330'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T16:45:30+00:00">Sep 2, 2015 04:45 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1441212330">&nbsp;</a></div><pre>Hi Edgar,

rsv-control --run org.osg.srm.srmcp-readwrite --host osgitb1.nhn.ou.edu -v 3

won&#39;t run. I think you mean this instead&#58;

rsv-control --run org.osg.srm.srmcp-readwrite -u osgitb2.nhn.ou.edu&#58;8443 -v 3

That gives you the same output as you see on the RSV page.
I&#39;ll attach it to the ticket, though.

I don&#39;t think there&#39;s a permission problem, since everything else works
perfectly fine. I can do srm copy commands as myself and as the rsv user,
and I&#39;m getting no errors whatsoever. So there must be some kind of
race condition going on, since it first claims that the transfer was
successful, but then it can&#39;t delete the file, and then it claims
that the file isn&#39;t there. These files are NOT deleted, by the way,
they keep piling up until I delete them by hand ...

Thanks,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26242#1441211286'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T16:28:06+00:00">Sep 2, 2015 04:28 PM UTC</time><a class="anchor" name="1441211286">&nbsp;</a></div><pre>Hi Chris,

I just checked it and it looks fine.

Horst,

Can you also run this&#58;

rsv-control --run org.osg.srm.srmcp-readwrite --host osgitb1.nhn.ou.edu -v 3

?

It looks like a permissions problem, or I do not know. Carl, you got any ideas?

Cheers,

Edgar
OSG software Suppport

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='26242#1441206287'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T15:04:47+00:00">Sep 2, 2015 03:04 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1441206287">&nbsp;</a></div><pre>Hi Edgar,

Have you had time to review the rsv profiler?

Regards,
Chris</pre></div><div class='update_description'><i onclick="document.location='26242#1440782444'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-28T17:20:44+00:00">Aug 28, 2015 05:20 PM UTC</time><a class="anchor" name="1440782444">&nbsp;</a></div><pre>Hi Edgar,

I just tried to attach the output, but it wouldn&#39;t let me (even after changing the name to *.txt), since it&#39;s too large (2.2 MB).

So I put it here for now&#58;

<a href='https&#58;//www.nhn.ou.edu/' target='_blank' rel='nofollow'>https&#58;//www.nhn.ou.edu/</a>~hs/tmp/rsv/rsv-profiler.tar.gz

Please let me know when you have downloaded it, so I can remove it again.

Thanks,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='26242#1440780949'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-28T16:55:49+00:00">Aug 28, 2015 04:55 PM UTC</time><a class="anchor" name="1440780949">&nbsp;</a></div><pre>Can you run rsv-control --profile

and attach the output so we can try to understand the problem?

Cheers,

Edgar

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='26242#1440603688'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-26T15:41:28+00:00">Aug 26, 2015 03:41 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1440603688">&nbsp;</a></div><pre>Sorry Horst,

I looked through the RSV Troubleshooting Guide and specifially the page for the RSV SRM (srmcp) Read-Write Probe. I wasn&#39;t able to find any information about this probe truncating results. Hopefully Carl, can explain what is happening.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='26242#1440452653'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-24T21:44:13+00:00">Aug 24, 2015 09:44 PM UTC</time><a class="anchor" name="1440452653">&nbsp;</a></div><pre>Hi Carl,

okay, I added that and restarted RSV, and now I&#39;m rerunning all probes. Looks like it&#39;s working&#58;

<a href='https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb2.nhn.ou.edu_8443.html#org.osg.srm.srmcp-readwrite' target='_blank' rel='nofollow'>https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb2.nhn.ou.edu_8443.html#org.osg.srm.srmcp-readwrite</a>

The output of the first transfer looks the same as the second one I just ran by hand, but the second one in the probe output seems to be truncated, not sure why ...

Let me know what you think,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='26242#1440451830'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-24T21:30:30+00:00">Aug 24, 2015 09:30 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1440451830">&nbsp;</a></div><pre>Yeah; as of rsv 3.10.2-1, you can add a &#34;verbose =&#34; line to the &#34;[org.osg.srm.srmcp-readwrite args]&#34; section of /etc/rsv/metrics/org.osg.srm.srmcp-readwrite.conf

Carl</pre></div><div class='update_description'><i onclick="document.location='26242#1440451775'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-24T21:29:35+00:00">Aug 24, 2015 09:29 PM UTC</time><a class="anchor" name="1440451775">&nbsp;</a></div><pre>Hi Brian,

okay, I just ran this command as the rsv user, and it ran fine, see below. All I had to do to get it working was to copy /tmp/rsvproxy to /tmp/x509up_u5014, so that it was properly recognized as such without the full rsv probe environment. So there&#39;s definitely nothing wrong with any individual gfal command, it just seems like something thinks there is a problem even though there isn&#39;t ...

Thanks,

Horst

----
-sh-4.1$ hostname
osgitb1.nhn.ou.edu
-sh-4.1$ id
uid=5014(rsv) gid=5014(rsv) groups=5014(rsv),426(google-otp)

-sh-4.1$ gfal-copy -vvv &#39;<a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1&#39' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1&#39</a>; &#39;file&#58;///tmp/storage-probe-test-file.1440448081.7411.copy&#39;
DEBUG     no GFAL_CONFIG_DIR env var found, try to load configuration from default directory /etc/gfal2.d/
DEBUG     try to load configuration file /etc/gfal2.d//bdii.conf ...
DEBUG     try to load configuration file /etc/gfal2.d//gfal2_core.conf ...
DEBUG     try to load configuration file /etc/gfal2.d//gsiftp_plugin.conf ...
DEBUG     try to load configuration file /etc/gfal2.d//srm_plugin.conf ...
DEBUG     try to load configuration file /etc/gfal2.d//xrootd_plugin.conf ...
INFO     ... no GFAL_PLUGIN_DIR environment variable specified, try to load plugins in the default directory &#58; /usr/lib64/gfal2-plugins/
DEBUG     [gfal_list_directory_plugins] add plugin to list to load /usr/lib64/gfal2-plugins//libgfal_plugin_file.so
DEBUG     [gfal_list_directory_plugins] add plugin to list to load /usr/lib64/gfal2-plugins//libgfal_plugin_srm.so
DEBUG     [gfal_list_directory_plugins] add plugin to list to load /usr/lib64/gfal2-plugins//libgfal_plugin_gridftp.so
DEBUG     [gfal_list_directory_plugins] add plugin to list to load /usr/lib64/gfal2-plugins//libgfal_plugin_xrootd.so
INFO     [gfal_module_load] plugin /usr/lib64/gfal2-plugins//libgfal_plugin_file.so loaded with success
INFO      gfal_plugin loaded succesfully &#58; /usr/lib64/gfal2-plugins//libgfal_plugin_file.so
INFO     [gfal_module_load] plugin /usr/lib64/gfal2-plugins//libgfal_plugin_srm.so loaded with success
INFO      gfal_plugin loaded succesfully &#58; /usr/lib64/gfal2-plugins//libgfal_plugin_srm.so
DEBUG     -&#62; [gridftp_plugin] try to load ..
DEBUG     define GSIFTP session re-use to TRUE
DEBUG     -&#62; [gridftp_plugin] loaded ..
INFO     [gfal_module_load] plugin /usr/lib64/gfal2-plugins//libgfal_plugin_gridftp.so loaded with success
INFO      gfal_plugin loaded succesfully &#58; /usr/lib64/gfal2-plugins//libgfal_plugin_gridftp.so
<div id='show_1364677311' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1364677311'>INFO     [gfal_module_load] plugin /usr/lib64/gfal2-plugins//libgfal_plugin_xrootd.so loaded with success
INFO      gfal_plugin loaded succesfully &#58; /usr/lib64/gfal2-plugins//libgfal_plugin_xrootd.so
DEBUG     plugin priority order&#58; file-2.9.1 -&#62; srm-2.9.1 -&#62; gridftp-2.9.1 -&#62; xrootd -&#62;
DEBUG    Service endpoint resolution, resolved from FULL SURL <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1</a> -&#62; httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
INFO     SRM context not available
DEBUG     SRM connection keep-alive 1
DEBUG     SRM operation timeout 180
DEBUG     SRM connection timeout 60
INFO        [gfal_srm_statG] try to stat file <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1</a>
DEBUG       [gfal_srm_statG] store <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1</a> stat info in cache
Copying 124 bytes <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1</a> =&#62; file&#58;///tmp/storage-probe-test-file.1440448081.7411.copy
DEBUG     -&#62; Gfal&#58;&#58;Transfer&#58;&#58;FileCopy
INFO     Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY LIST&#58;ENTER
INFO     Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY LIST&#58;ITEM <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1</a> =&#62; file&#58;///tmp/storage-probe-test-file.1440448081.7411.copy
INFO     Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY LIST&#58;EXIT
DEBUG    Service endpoint resolution, resolved from FULL SURL <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1</a> -&#62; httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
INFO     SRM context recycled for httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
INFO     Endpoint of type BeStMan&#58; <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1</a>
INFO     Endpoint not SRM&#58; file&#58;///tmp/storage-probe-test-file.1440448081.7411.copy
INFO     No Castor endpoint. Honor configuration for SESSION_REUSE
INFO     Event triggered&#58; BOTH SRM PREPARE&#58;ENTER
INFO                    Checksum check enabled&#58; 0
DEBUG     srm_statG -&#62; value taken from the cache
DEBUG                   GET surl -&#62; turl resolution start
DEBUG    Service endpoint resolution, resolved from FULL SURL <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1</a> -&#62; httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
INFO     SRM context recycled for httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
INFO     Got GET token for <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1&#58' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1&#58</a>; get&#58;262
DEBUG                   GET surl -&#62; turl resolution finished&#58; <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1</a> -&#62; <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1</a> (get&#58;262)
INFO     Event triggered&#58; SOURCE GFAL2&#58;&#58;PLUGINS&#58;&#58;SRM SRM&#58;GET Got TURL <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1</a> =&#62; <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1</a>
DEBUG                   No SRM resolution needed on file&#58;///tmp/storage-probe-test-file.1440448081.7411.copy
INFO     Event triggered&#58; BOTH SRM PREPARE&#58;EXIT
DEBUG     -&#62; Gfal&#58;&#58;Transfer&#58;&#58;FileCopy
INFO     Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY LIST&#58;ENTER
INFO     Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY LIST&#58;ITEM <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1</a> =&#62; file&#58;///tmp/storage-probe-test-file.1440448081.7411.copy
INFO     Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY LIST&#58;EXIT
DEBUG     -&#62; Gfal&#58;&#58;Transfer&#58;&#58;start_local_copy
INFO     Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY&#58;LOCAL TRANSFER&#58;ENTER <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1</a> =&#62; file&#58;///tmp/storage-probe-test-file.1440448081.7411.copy
DEBUG     open src file &#58; <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1</a>
DEBUG     gfal_plugin_openG -&#62;
DEBUG      -&#62; [gfal_gridftp_openG]
DEBUG    no session associated with this hostname, try find generic one ....
DEBUG    no session found in cache for osgitb1.nhn.ou.edu!
DEBUG    create descriptor for <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1</a>
DEBUG     -&#62; [GridFTPModule&#58;&#58;open]
DEBUG     impossible to get boolean parameter GRIDFTP PLUGIN&#58;STAT_ON_OPEN, set to default value TRUE, err  Configuration Error &#58; No configuration parameter with this value found
DEBUG     -&#62; [Gridftp_stat_module&#58;&#58;globus_gass_stat]
DEBUG    no session associated with this hostname, try find generic one ....
DEBUG    no session found in cache for osgitb1.nhn.ou.edu!
DEBUG       [GridFTP_Request_state&#58;&#58;wait_callback] setup gsiftp timeout to 300 seconds
DEBUG     gridFTP operation done
DEBUG       &#60;- [Gridftp_stat_module&#58;&#58;internal_globus_gass_stat] Got &#39;Type=file;Modify=20150406190820;Size=124;Perm=r;UNIX.mode=0644;UNIX.owner=hs;UNIX.uid=1502;UNIX.group=skubic;UNIX.gid=1500;Unique=803-880b3b; //share/apps/osg/osg_data/test1&#39;
DEBUG     &#60;- [Gridftp_stat_module&#58;&#58;internal_globus_gass_stat]
DEBUG    insert gridftp session for osgitb1.nhn.ou.edu in cache ...
DEBUG     -&#62; initialize FTP GET global operations...
DEBUG     &#60;- [GridFTPModule&#58;&#58;open]
DEBUG      [gfal_gridftp_openG]&#60;-
DEBUG     gfal_plugin_openG -&#62;
DEBUG      begin local transfer <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1</a> -&#62;  file&#58;///tmp/storage-probe-test-file.1440448081.7411.copy with buffer size 4000000
DEBUG      -&#62; [gfal_gridftp_readG]
DEBUG     read in the GET main flow ...
DEBUG      -&#62; [gridftp_read_stream]
DEBUG       [GridFTP_Request_state&#58;&#58;wait_callback] setup gsiftp timeout to 300 seconds
DEBUG     gridFTP operation done
DEBUG      [gfal_gridftp_readG]&#60;-
DEBUG      -&#62; [gfal_gridftp_readG]
DEBUG     read in the GET main flow ...
DEBUG      -&#62; [gridftp_read_stream]
DEBUG      [gfal_gridftp_readG]&#60;-
DEBUG     &#60;- gfal_plugin_closeG
DEBUG     &#60;- gfal_plugin_closeG
DEBUG      -&#62; [gfal_gridftp_closeG]
DEBUG       [GridFTP_Request_state&#58;&#58;wait_callback] setup gsiftp timeout to 300 seconds
DEBUG    destroy descriptor for <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1</a>
DEBUG    insert gridftp session for osgitb1.nhn.ou.edu in cache ...
DEBUG      [gfal_gridftp_closeG]&#60;-
INFO     Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY&#58;LOCAL TRANSFER&#58;EXIT <a href='gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu//share/apps/osg/osg_data/test1</a> =&#62; file&#58;///tmp/storage-probe-test-file.1440448081.7411.copy
DEBUG     &#60;- Gfal&#58;&#58;Transfer&#58;&#58;start_local_copy
DEBUG     &#60;- Gfal&#58;&#58;Transfer&#58;&#58;FileCopy
INFO     Event triggered&#58; DESTINATION SRM CLOSE&#58;ENTER file&#58;///tmp/storage-probe-test-file.1440448081.7411.copy
INFO     Event triggered&#58; DESTINATION SRM CLOSE&#58;EXIT file&#58;///tmp/storage-probe-test-file.1440448081.7411.copy
INFO     Rolling back GET
DEBUG    Service endpoint resolution, resolved from FULL SURL <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/test1</a> -&#62; httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
INFO     SRM context recycled for httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server
INFO     Released file with token get&#58;262
DEBUG     &#60;- Gfal&#58;&#58;Transfer&#58;&#58;FileCopy
DEBUG    gridftp session cache garbage collection ...

-sh-4.1$ ls -ao /tmp/storage-probe-test-file.1440448081.7411.copy
-rwxr-xr-x 1 rsv 124 Aug 24 16&#58;22 /tmp/storage-probe-test-file.1440448081.7411.copy
-sh-4.1$ ls -ao /share/apps/osg/osg_data/test1
-rw-r--r-- 1 hs 124 Apr  6 14&#58;08 /share/apps/osg/osg_data/test1

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27
</div><script type='text/javascript'>
        $('#show_1364677311').click(function() {
            $('#detail_1364677311').slideDown("normal");
            $('#show_1364677311').hide();
            $('#hide_1364677311').show();
        });
        $('#hide_1364677311').click(function() {
            $('#detail_1364677311').slideUp();
            $('#hide_1364677311').hide();
            $('#show_1364677311').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='26242#1440449862'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-24T20:57:42+00:00">Aug 24, 2015 08:57 PM UTC</time><a class="anchor" name="1440449862">&nbsp;</a></div><pre>@Carl - I forget, do we have a way to re-run the entire RSV test with a &#39;verbose&#39; flag?  I recall something along those lines recently.

Carl or Horst -it&#39;d be interesting to see the output of the quoted gfal-copy command with &#34;-vvv&#34; added.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26242#1439912656'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-18T15:44:16+00:00">Aug 18, 2015 03:44 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1439912656">&nbsp;</a></div><pre>Hi Chris,

sure, we can try that. But I&#39;m this VSCSE performance tuning workshop
all week, so we can have a phone conversation early next week,
and hopefully we can finally figure this out then!

Thanks,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26242#1439912302'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-18T15:38:22+00:00">Aug 18, 2015 03:38 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1439912302">&nbsp;</a></div><pre>Hi Horst,

It may be easier for you to give Mat or Brian a call. You may be able to get the information you are looking for quicker. Or if you want I can give them a call and ask them to update the ticket or get in touch with you via phone or email.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='26242#1439821038'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-17T14:17:18+00:00">Aug 17, 2015 02:17 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1439821038">&nbsp;</a></div><pre>Hi Chris,

right, it&#39;s still broken&#58;

<a href='https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb2.nhn.ou.edu_8443.html#org.osg.srm.srmcp-readwrite' target='_blank' rel='nofollow'>https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb2.nhn.ou.edu_8443.html#org.osg.srm.srmcp-readwrite</a>

And I still don&#39;t understand why it first claims it can&#39;t copy the file
from the remote server, then it claims that both transfers were successful,
then it claims that it couldn&#39;t delete the file, and then again it claims
that the remote file is missing. That can&#39;t all be true at the same time ...

Thanks a lot,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26242#1439820505'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-17T14:08:25+00:00">Aug 17, 2015 02:08 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1439820505">&nbsp;</a></div><pre>Hi All,

Has there been any updates to this? Is OUHEP_ITB&#39;s RSV is still broken? It looks like it still is.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='26242#1439313834'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-11T17:23:54+00:00">Aug 11, 2015 05:23 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1439313834">&nbsp;</a></div><pre>I have emailed Mat and Brian.</pre></div><div class='update_description'><i onclick="document.location='26242#1438871200'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-06T14:26:40+00:00">Aug 6, 2015 02:26 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1438871200">&nbsp;</a></div><pre>Hello All,

Does anyone have anything new to add to this? Has anyone heard from Mat or Brian?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='26242#1438604857'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-03T12:27:37+00:00">Aug 3, 2015 12:27 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1438604857">&nbsp;</a></div><pre>Hello Mat and Brian,

When either you get time, could you please review this and provide feedback for Carl?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='26242#1438264872'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-30T14:01:12+00:00">Jul 30, 2015 02:01 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1438264872">&nbsp;</a></div><pre>I don&#39;t expect a reply this week as its User School this week. Bumping to Monday.</pre></div><div class='update_description'><i onclick="document.location='26242#1438006478'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-27T14:14:38+00:00">Jul 27, 2015 02:14 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1438006478">&nbsp;</a></div><pre>Hello Mat and Brian,

Carl CC&#39;d you on this ticket last week hoping that someone would be able to provide assistance. Could you please review this and provide an update?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='26242#1437596516'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-22T20:21:56+00:00">Jul 22, 2015 08:21 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1437596516">&nbsp;</a></div><pre>Adding Mat and Brian B.

Carl</pre></div><div class='update_description'><i onclick="document.location='26242#1437500525'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-21T17:42:05+00:00">Jul 21, 2015 05:42 PM UTC</time><a class="anchor" name="1437500525">&nbsp;</a></div><pre>Hi Chris,

yes, I was referring to Brian B. and Brian Lin. But Carl probably has a better idea of who should be involved with this.

Thanks,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='26242#1437494555'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-21T16:02:35+00:00">Jul 21, 2015 04:02 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1437494555">&nbsp;</a></div><pre>Carl,

Do I need to add anyone else to this? I&#39;m not sure which Brian&#39;s Horst is referring to, maybe Brian B ? Please feel free to add whoever you need.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='26242#1437426385'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-20T21:06:25+00:00">Jul 20, 2015 09:06 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1437426385">&nbsp;</a></div><pre>Thanks Chris!

I don&#39;t know, maybe Brian and Brian? Not sure who&#39;s the current reigning
expert on RSV and/or gfal2.

Thanks a lot,

Horst

On 07/20/2015 03&#58;50 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26242#1437425429'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-20T20:50:29+00:00">Jul 20, 2015 08:50 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1437425429">&nbsp;</a></div><pre>Adding Carl to this. Is there anyone else that needs to be on this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='26242#1437424978'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-20T20:42:58+00:00">Jul 20, 2015 08:42 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1437424978">&nbsp;</a></div><pre>Hi again,

should we open a GOC ticket on this? I&#39;m worried that this may affect us once we upgrade our production cluster, so I&#39;d really like to figure out what&#39;s going on here before potentially breaking our production resource ...

Thanks,

Horst

On 07/17/2015 12&#58;17 PM, Horst Severini wrote&#58;
<font color='#7F7E6F'>&#62; Hi all,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; has there been any updates to this? OUHEP_ITB&#39;s RSV is still broken. &#58;)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Are we the only ones who were hit by this problem? This was a production</font>
<font color='#7F7E6F'>&#62; update, not an ITB update, so I would have assumed that this might have</font>
<font color='#7F7E6F'>&#62; bitten others as well? But maybe this is just an interaction between our</font>
<font color='#7F7E6F'>&#62; ITB setup and this production update that is specific to OUHEP_ITB?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Wait -- since the latest OSG update this week, the error is now different&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb2.nhn.ou.edu_8443.html#org.osg.srm.srmcp-readwrite' target='_blank' rel='nofollow'>https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb2.nhn.ou.edu_8443.html#org.osg.srm.srmcp-readwrite</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ----</font>
<font color='#7F7E6F'>&#62; metricName&#58; org.osg.srm.srmcp-readwrite</font>
<font color='#7F7E6F'>&#62; metricType&#58; status</font>
<font color='#7F7E6F'>&#62; timestamp&#58; 2015-07-17 11&#58;28&#58;03 CDT</font>
<font color='#7F7E6F'>&#62; metricStatus&#58; CRITICAL</font>
<font color='#7F7E6F'>&#62; serviceType&#58; OSG-SRM</font>
<font color='#7F7E6F'>&#62; serviceURI&#58; osgitb2.nhn.ou.edu&#58;8443</font>
<font color='#7F7E6F'>&#62; gatheredAt&#58; osgitb1.nhn.ou.edu</font>
<font color='#7F7E6F'>&#62; summaryData&#58; CRITICAL</font>
<font color='#7F7E6F'>&#62; detailsData&#58; Successful transfer to remote server.</font>
<font color='#7F7E6F'>&#62; Failed to transfer file from remote server.</font>
<font color='#7F7E6F'>&#62; Command&#58; gfal-copy</font>
<font color='#7F7E6F'>&#62; &#39;<a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1437150480.17394&#39' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1437150480.17394&#39</a>;</font>
<div id='show_181473527' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_181473527'><font color='#7F7E6F'>&#62; &#39;file&#58;///tmp/storage-probe-test-file.1437150480.17394.copy&#39; 2&#62;&1</font>
<font color='#7F7E6F'>&#62; Output from gfal-copy&#58;</font>
<font color='#7F7E6F'>&#62; gfal-copy error&#58; 2 (No such file or directory) - Could not stat the</font>
<font color='#7F7E6F'>&#62; source&#58; Error reported from srm_ifce &#58; 2 [SE][Ls][SRM_INVALID_PATH] No</font>
<font color='#7F7E6F'>&#62; such file or directory.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; WARNING</font>
<font color='#7F7E6F'>&#62; Successful transfer to remote server.</font>
<font color='#7F7E6F'>&#62; Successful transfer from remote server.</font>
<font color='#7F7E6F'>&#62; Original file and received file are identical.</font>
<font color='#7F7E6F'>&#62; However, remote file could not be deleted correctly.</font>
<font color='#7F7E6F'>&#62; Command&#58; gfal-rm</font>
<font color='#7F7E6F'>&#62; <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1437150480.17394' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1437150480.17394</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Output&#58;</font>
<font color='#7F7E6F'>&#62; <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1437150480.17394' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server?SFN=/share/apps/osg/osg_data/storage-probe-test-file.1437150480.17394</a></font>
<font color='#7F7E6F'>&#62; MISSING</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; EOT</font>
<font color='#7F7E6F'>&#62; ----</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; So the update wiped out the debug flags we had put in, which is fine,</font>
<font color='#7F7E6F'>&#62; but now on the one hand it still claims that the file isn&#39;t there, but</font>
<font color='#7F7E6F'>&#62; then it also claims that both transfers were successful, but the file</font>
<font color='#7F7E6F'>&#62; couldn&#39;t be deleted. That can&#39;t both be true. Which one is correct? ;)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;      Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On 06/30/2015 02&#58;30 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks Carl!</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; So what should we do to track down the problem now, and fix it?&#58;)</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;     Horst</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Carl Edquist&#60;edquist@....&#62;  wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; &#62; &#62;Can you open a JIRA ticket to add a ???verbose??? configuration</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; option for</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; &#62; &#62;this probe?</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#62;Sure, just opened<a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1962' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1962</a></font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#62;Carl</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#62;On Mon, 29 Jun 2015, Brian Bockelman wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; &#62; &#62;Hi Carl,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; &#62; &#62;Can you open a JIRA ticket to add a ???verbose??? configuration</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; option for this probe?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; &#62; &#62;Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; &#62; &#62;Brian</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;On Jun 24, 2015, at 7&#58;22 PM, Carl Edquist&#60;edquist@....&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;I think I need your help; I&#39;d like to try adding &#34;-vvv&#34; to the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; gfal-copy command lines in /usr/libexec/rsv/probes/srmcp-srm-probe,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; like so&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;    -$srm_copy_cmd = shellquote(&#34;gfal-copy&#34;, $remote_uri,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; $new_local_uri) . &#34; 2&#62;&1&#34;;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;    +$srm_copy_cmd = shellquote(&#34;gfal-copy&#34;, &#34;-vvv&#34;,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; $remote_uri, $new_local_uri) . &#34; 2&#62;&1&#34;;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;I have an updated copy in /home/mis/srmcp-srm-probe .</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;Then I&#39;d like to try running the metric, either waiting till</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; the next run or running by hand with</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;    rsv-control --run --host osgitb2.nhn.ou.edu&#58;8443</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; org.osg.srm.srmcp-readwrite</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;trouble is you need to be root or the rsv user to do this,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; which I am not.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;Then I&#39;d be interested to see the debugging output from</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; gfal-copy...</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;Carl</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;On Tue, 23 Jun 2015, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;Hi Carl,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;yes, I can use gfal-copy to copy files both ways by hand as</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; myself</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;into the same directories as the probe is trying to do, so there</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;doesn&#39;t seem to be problem with gfal-copy itself.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;But downgrading rsv to 3.8.0-2 definitely fixes the problem,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;so something did get messed up in this latest version.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;One possibility is that the test file is getting deleted by</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; the script</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;before it&#39;s being copied back, which would explain the error</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; message.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;I don&#39;t have time right now to investigate further, maybe</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; tomorrow</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;morning before I take off for the airport, not sure yet ...</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;I&#39;d be happy to give you access to the rsv or mis account if</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; you have time</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;and want to send me your ssh public key.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;    Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;Carl Edquist&#60;edquist@....&#62;  wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;The srmcp-readwrite probe lives here</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;    /usr/libexec/rsv/metrics/org.osg.srm.srmcp-readwrite</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;which is a symlink to</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;    /usr/libexec/rsv/probes/srmcp-srm-probe</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;We did recently update it to use the gfal2-util commands</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; (gfal-*) instead</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;of the bestman2-client commands (srm-*), this happened in</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; rsv-3.9.0-1 ...</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;If a &#34;yum downgrade rsv-metrics-3.8.0-2.osg32.el6&#34; makes</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; the problem go</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;away, that would at least narrow down for us that the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; problem is with the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;gfal changes.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;I think all the rsv logs are under /var/log/rsv, but I</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; think all the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;details for the probe output are actually in your rsv</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; output already</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; <a href='https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb2.nhn.ou.edu_8443.html#org.osg.srm.srmcp-readwrite' target='_blank' rel='nofollow'>https&#58;//osgitb1.nhn.ou.edu/rsv/osgitb2.nhn.ou.edu_8443.html#org.osg.srm.srmcp-readwrite</a></font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;The error messages look sparse but apparently &#34;gfal-copy&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; error&#58; No such</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;file or directory&#34; is really the only error message</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; gfal-copy is</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;outputting...</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;I tried to follow what&#39;s going on, and the transfer to</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; the remote server</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;works fine, I can see the file there. But then the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; transfer from the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;remote server fails, and I&#39;m not sure why. Maybe</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; something deletes the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;file there before it can get copied back? I tried a</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; gfal-copy by hand,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;and that works perfectly fine, so there&#39;s nothing wrong</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; with our SRM in</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;principle.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;That&#39;s interesting, so you are able to gfal-copy a file</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; both ways by hand?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;Carl</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;On Tue, 23 Jun 2015, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;Hi all,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;I just noticed that OUHEP_ITB&#39;s srmcp-readwrite probe is</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; now red&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;<a href='https&#58;//osgitb1.nhn.ou.edu/rsv/' target='_blank' rel='nofollow'>https&#58;//osgitb1.nhn.ou.edu/rsv/</a></font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;Presumably since the last OSG 3.2 update (production, not</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; osg-testing),</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;but I&#39;m not 100% sure, since I haven&#39;t looked at it in a</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; few weeks, just</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;got back from a two week vacation last night.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;I tried to follow what&#39;s going on, and the transfer to</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; the remote server</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;works fine, I can see the file there. But then the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; transfer from the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;remote server fails, and I&#39;m not sure why. Maybe</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; something deletes the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;file there before it can get copied back? I tried a</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; gfal-copy by hand,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;and that works perfectly fine, so there&#39;s nothing wrong</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; with our SRM in</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;principle.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;Where can I figure out what&#39;s going on exactly? I keep</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; forgetting where</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;the underlying RSV scripts are, and I don&#39;t have time to</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; look at it</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;right this minute, because I&#39;m leaving again tomorrow for</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; the ATLAS</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;Software Week, and I still have to finish some stuff up,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; so if an expert</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;could have a look at this and remind me where the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; detailed logs are,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;that would be greatly appreciated!</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;Thanks a lot,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;    Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_181473527').click(function() {
            $('#detail_181473527').slideDown("normal");
            $('#show_181473527').hide();
            $('#hide_181473527').show();
        });
        $('#hide_181473527').click(function() {
            $('#detail_181473527').slideUp();
            $('#hide_181473527').hide();
            $('#show_181473527').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F26242">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
