<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[34506] Some pilots are being submitted with expired VOMS credentials</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=34506" method="post">
<div class="page-header">
    <h3><span class="muted">34506</span> / Some pilots are being submitted with expired VOMS credentials</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Brian Lin</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Brian Lin</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-11-29</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG Glidein Factory Support <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/34506", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/34506?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/34506?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Some%20pilots%20are%20being%20submitted%20with%20expired%20VOMS%20credentials%20ISSUE%3D34506%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='34506#1511805267'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-27T17:54:27+00:00">Nov 27, 2017 05:54 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1511805267">&nbsp;</a></div><pre>Yea, sorry. I spoke with the admin and we can&#39;t reproduce the problem so I&#39;ll just close this.</pre></div><div class='update_description'><i onclick="document.location='34506#1511800093'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-27T16:28:13+00:00">Nov 27, 2017 04:28 PM UTC</time> by <b>echism</b><a class="anchor" name="1511800093">&nbsp;</a></div><pre>Should this be closed?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1510936895'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-17T16:41:35+00:00">Nov 17, 2017 04:41 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1510936895">&nbsp;</a></div><pre>There wasn&#39;t anything of interesting in UConn&#39;s SchedLog so I messaged the admin to see if there are any errors in /var/log/messages. If there aren&#39;t, we can close this ticket because we can&#39;t reproduce the problem.</pre></div><div class='update_description'><i onclick="document.location='34506#1510868389'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-16T21:39:49+00:00">Nov 16, 2017 09:39 PM UTC</time> by <b>echism</b><a class="anchor" name="1510868389">&nbsp;</a></div><pre>Brian,

Did the jobs reveal anything?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1510685575'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-14T18:52:55+00:00">Nov 14, 2017 06:52 PM UTC</time> by <b>echism</b><a class="anchor" name="1510685575">&nbsp;</a></div><pre>Hey Brian,

What&#39;s the status of this one?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1510341652'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-10T19:20:52+00:00">Nov 10, 2017 07:20 PM UTC</time> by <b>echism</b><a class="anchor" name="1510341652">&nbsp;</a></div><pre>How did the jobs turn out, Brian?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1510094033'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-07T22:33:53+00:00">Nov 7, 2017 10:33 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1510094033">&nbsp;</a></div><pre>Sorry this is in my court. I&#39;m going to try and submit some local universe jobs to UConn&#39;s CE to tease out their SchedLog and if that doesn&#39;t yield anything speak to the admin about it.</pre></div><div class='update_description'><i onclick="document.location='34506#1509468953'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-31T16:55:53+00:00">Oct 31, 2017 04:55 PM UTC</time> by <b>echism</b><a class="anchor" name="1509468953">&nbsp;</a></div><pre>Hey Brian,

What is happening with this one?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1508961799'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-25T20:03:19+00:00">Oct 25, 2017 08:03 PM UTC</time> by <b>echism</b><a class="anchor" name="1508961799">&nbsp;</a></div><pre>Hey Brian,

Any news on this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1508351418'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-18T18:30:18+00:00">Oct 18, 2017 06:30 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1508351418">&nbsp;</a></div><pre>Sorry, it&#39;s in my court to plan a good way to investigate options 3 and 4.</pre></div><div class='update_description'><i onclick="document.location='34506#1508348421'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-18T17:40:21+00:00">Oct 18, 2017 05:40 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1508348421">&nbsp;</a></div><pre>Any updates here?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='34506#1507738999'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-11T16:23:19+00:00">Oct 11, 2017 04:23 PM UTC</time> by <b>echism</b><a class="anchor" name="1507738999">&nbsp;</a></div><pre>Hey Brian,

Could you revisit this one?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1507579731'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-09T20:08:51+00:00">Oct 9, 2017 08:08 PM UTC</time> by <b>echism</b><a class="anchor" name="1507579731">&nbsp;</a></div><pre>Hey Brian,

Any suggestions?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1507037758'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-03T13:35:58+00:00">Oct 3, 2017 01:35 PM UTC</time> by <b>echism</b><a class="anchor" name="1507037758">&nbsp;</a></div><pre>Hey Brian,

Is there any movement on the following investigations&#58;
3) the gridmanager at the factories are failing to pass on the voms expiry time
4) a bug in the LCMAPS VOMS expiry time validation.

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1506717556'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-29T20:39:16+00:00">Sep 29, 2017 08:39 PM UTC</time> by <b>echism</b><a class="anchor" name="1506717556">&nbsp;</a></div><pre>Thanks, Jeff.</pre></div><div class='update_description'><i onclick="document.location='34506#1506691227'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-29T13:20:27+00:00">Sep 29, 2017 01:20 PM UTC</time><a class="anchor" name="1506691227">&nbsp;</a></div><pre>Sorry I thought I answered it.

Yes, the FEs are updating their proxies frequently enough their VOMS extensions aren&#39;t expiring, so I think it&#39;s safe to investigate 3 or 4.

To be clear, I see glow updates every hour, and each time the VOMS extension is renewed with 24h, so it never falls below 23h.
OSG renews every 4h, and every time it renews the VOMS extension has 168h on it.

Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='34506#1506436185'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-26T14:29:45+00:00">Sep 26, 2017 02:29 PM UTC</time> by <b>echism</b><a class="anchor" name="1506436185">&nbsp;</a></div><pre>Hey Jeff,

Did you see Brian&#39;s question?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1506029555'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-21T21:32:35+00:00">Sep 21, 2017 09:32 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1506029555">&nbsp;</a></div><pre>Jeff,

This ticket is about pilots being rejected at a few CEs because the pilot certs seem to have expired VOMS attributes, which shouldn&#39;t have anything to do with the CE -&#62; workernode connection. So either 1) the frontends are not regenerating the VOMS attributes on their proxies frequently enough, 2) the frontends are not properly passing on refreshed VOMS attributes, 3) the gridmanager at the factories are failing to pass on the voms expiry time, or 4) a bug in the LCMAPS VOMS expiry time validation.

Just checking GLOW&#39;s frontend, it looks like we&#39;re regenerating our proxy frequently enough and if you can verify that when you say that none of the proxies are expired in the factory, you&#39;re talking about the VOMS expiration time, then we can start looking at options 3 and 4.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='34506#1506025028'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-21T20:17:08+00:00">Sep 21, 2017 08:17 PM UTC</time><a class="anchor" name="1506025028">&nbsp;</a></div><pre>Hi Brian,

It looks like glow has 8 proxies and OSG has 12.  There is usually one pilot proxy per frontend group in their config.

NONE of them are expired in the factory, and in general that almost never happens, unless a frontend admin forgets to update a grid cert on their end, or a cron job gets stuck. Examples of the main group for glow [1] and OSG [2] below.

Can you remind me what this thread is about, is there a real problem we are trying to debug somewhere?  If any pilot proxies are going expired I expect the problem is between delegation from the CE -&#62; workernode.  Unless Condor-G is not picking up our updated certs then I guess it could be between factory -&#62; CE. But we&#39;ll need more concrete examples if you want factory ops to help you debug.

Thanks,
Jeff
[1]
subject   &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu/CN=4158135494
issuer    &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu
identity  &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu
type      &#58; RFC compliant proxy
strength  &#58; 1024 bits
path      &#58; /var/lib/gwms-factory/client-proxies/user_feglow/glidein_gfactory_instance/credential_chtc2.main_745540
timeleft  &#58; 6066&#58;53&#58;03
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO GLOW extension information ===
VO        &#58; GLOW
subject   &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu
issuer    &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=glow-voms.cs.wisc.edu
attribute &#58; /GLOW/Role=htpc/Capability=NULL
attribute &#58; /GLOW/Role=NULL/Capability=NULL
timeleft  &#58; 70&#58;58&#58;29
uri       &#58; glow-voms.cs.wisc.edu&#58;15001

[2]
subject   &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu/CN=3948216252
issuer    &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu
identity  &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu
type      &#58; RFC compliant proxy
strength  &#58; 1024 bits
path      &#58; /var/lib/gwms-factory/client-proxies/user_feosgflock/glidein_gfactory_instance/credential_osg-flock-grid-iu-edu_OSG_gWMSFrontend.main_357570
<div id='show_728628577' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_728628577'>timeleft  &#58; 164&#58;11&#58;56
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO osg extension information ===
VO        &#58; osg
subject   &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu
issuer    &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=voms1.opensciencegrid.org
attribute &#58; /osg/Role=NULL/Capability=NULL
attribute &#58; /osg/ams/Role=NULL/Capability=NULL
timeleft  &#58; 164&#58;11&#58;56

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost
</div><script type='text/javascript'>
        $('#show_728628577').click(function() {
            $('#detail_728628577').slideDown("normal");
            $('#show_728628577').hide();
            $('#hide_728628577').show();
        });
        $('#hide_728628577').click(function() {
            $('#detail_728628577').slideUp();
            $('#hide_728628577').hide();
            $('#show_728628577').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='34506#1505842080'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-19T17:28:00+00:00">Sep 19, 2017 05:28 PM UTC</time> by <b>echism</b><a class="anchor" name="1505842080">&nbsp;</a></div><pre>Glidein Ops is presently shortstaffed but have said they will get to this and other tickets.</pre></div><div class='update_description'><i onclick="document.location='34506#1505155631'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-11T18:47:11+00:00">Sep 11, 2017 06:47 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1505155631">&nbsp;</a></div><pre>Ok, I just learned that frontends use condor_advertise to push the proxies to the factories. Does that mean that there&#39;s a single classad for each frontend&#39;s proxy? Can we at least verify that the expiry times of the ads match the expiry times of the proxies on the frontends?</pre></div><div class='update_description'><i onclick="document.location='34506#1504902721'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-08T20:32:01+00:00">Sep 8, 2017 08:32 PM UTC</time><a class="anchor" name="1504902721">&nbsp;</a></div><pre>To be clear -- it just seems to me bit wild operation task go over every and each entry and check on proxies for the running glideins. But probably I just misunderstand origin of the question?

Thanks,
Marian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=zvada/CN=684832/CN=Marian Zvada</pre></div><div class='update_description'><i onclick="document.location='34506#1504898073'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-08T19:14:33+00:00">Sep 8, 2017 07:14 PM UTC</time><a class="anchor" name="1504898073">&nbsp;</a></div><pre>Hi Brian,

maybe I don&#39;t undestand the part of the question &#34;across the entries of the OSG nad GLOW VOs&#34;? Check proxy lifetime on every and entry which supports both VOs and glidein running there?
Could you help me understand better what are you refering to?

Thanks,
Marian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=zvada/CN=684832/CN=Marian Zvada</pre></div><div class='update_description'><i onclick="document.location='34506#1504813100'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-07T19:38:20+00:00">Sep 7, 2017 07:38 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1504813100">&nbsp;</a></div><pre>Factory ops,

Did you see my last question about verifying proxy and VOMS AC expiration times across the entries of the OSG and GLOW VOs?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='34506#1504717138'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-06T16:58:58+00:00">Sep 6, 2017 04:58 PM UTC</time> by <b>echism</b><a class="anchor" name="1504717138">&nbsp;</a></div><pre>Who has an update on this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1504109110'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-30T16:05:10+00:00">Aug 30, 2017 04:05 PM UTC</time> by <b>echism</b><a class="anchor" name="1504109110">&nbsp;</a></div><pre>Hey all,

Who has an update on this one?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1503933830'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-28T15:23:50+00:00">Aug 28, 2017 03:23 PM UTC</time> by <b>echism</b><a class="anchor" name="1503933830">&nbsp;</a></div><pre>Is there anything new on this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1503675730'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-25T15:42:10+00:00">Aug 25, 2017 03:42 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1503675730">&nbsp;</a></div><pre>Good point, I got confused because the frontend I was working on hosted
the collector as well as the schedd. Could we verify that all of the
OSG/GLOW proxies on all factories share the same expiration time? If
there are any outliers, then we can start drilling down to why those
proxies aren&#39;t being refreshed properly. If that&#39;s all kosher, then the
failure to refresh proxies lies in the factories.</pre></div><div class='update_description'><i onclick="document.location='34506#1503526135'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-23T22:08:55+00:00">Aug 23, 2017 10:08 PM UTC</time><a class="anchor" name="1503526135">&nbsp;</a></div><pre>Schedds are running a range of version in both the 8.4 and 8.6 release series. But what does the schedds have to do with credential refreshing?

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='34506#1503519241'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-23T20:14:01+00:00">Aug 23, 2017 08:14 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1503519241">&nbsp;</a></div><pre>Is that just the collector version or all OSG VO schedd&#39;s running 8.6.5?</pre></div><div class='update_description'><i onclick="document.location='34506#1503518354'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-23T19:59:14+00:00">Aug 23, 2017 07:59 PM UTC</time><a class="anchor" name="1503518354">&nbsp;</a></div><pre>OSG VO frontend is refreshing proxies every 4 hours. The frontend is running HTCondor 8.6.5.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='34506#1503515367'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-23T19:09:27+00:00">Aug 23, 2017 07:09 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1503515367">&nbsp;</a></div><pre>I worked with Marian to verify that the proxy from GLOW test frontend were being refreshed properly on the GOC ITB factory. The GLOW frontends are on condor 8.4.7 and 8.4.11, how about the OSG frontends? How frequently is the OSG frontend refreshing the pilot proxies?</pre></div><div class='update_description'><i onclick="document.location='34506#1503407067'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-22T13:04:27+00:00">Aug 22, 2017 01:04 PM UTC</time> by <b>echism</b><a class="anchor" name="1503407067">&nbsp;</a></div><pre>Welcome  back, Brian! Can you check in on this ticket?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1503074839'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-18T16:47:19+00:00">Aug 18, 2017 04:47 PM UTC</time> by <b>echism</b><a class="anchor" name="1503074839">&nbsp;</a></div><pre>Thanks Aaron!</pre></div><div class='update_description'><i onclick="document.location='34506#1502896512'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-16T15:15:12+00:00">Aug 16, 2017 03:15 PM UTC</time> by <b>wiscmoate@....</b><a class="anchor" name="1502896512">&nbsp;</a></div><pre>Hi Elizabeth,

Brian is on vacation;  He&#39;s due to be back in the office on
2017-08-22.

-Aaron Moate

On Wed, Aug 16, 2017 at 03&#58;10&#58;00PM +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62;    [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='34506#1502896218'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-16T15:10:18+00:00">Aug 16, 2017 03:10 PM UTC</time> by <b>echism</b><a class="anchor" name="1502896218">&nbsp;</a></div><pre>Brian,

Is this still a work in progress?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1502723232'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-14T15:07:12+00:00">Aug 14, 2017 03:07 PM UTC</time> by <b>echism</b><a class="anchor" name="1502723232">&nbsp;</a></div><pre>Are there any updates on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='34506#1501858411'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-04T14:53:31+00:00">Aug 4, 2017 02:53 PM UTC</time> by <b>echism</b><a class="anchor" name="1501858411">&nbsp;</a></div><pre>Are there any updates on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='34506#1501684349'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-02T14:32:29+00:00">Aug 2, 2017 02:32 PM UTC</time> by <b>echism</b><a class="anchor" name="1501684349">&nbsp;</a></div><pre>Brian,

Where are we on this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1501272132'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-28T20:02:12+00:00">Jul 28, 2017 08:02 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1501272132">&nbsp;</a></div><pre>Hi,

I am out of the office until August 1, 2017. For OSG software related matters, you can contact the software team at osg-software@..... If your matter is urgent, please contact goc@.....

Cheers,

Brian</pre></div><div class='update_description'><i onclick="document.location='34506#1501272040'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-28T20:00:40+00:00">Jul 28, 2017 08:00 PM UTC</time> by <b>echism</b><a class="anchor" name="1501272040">&nbsp;</a></div><pre>So what is our next step?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34506#1501098727'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-26T19:52:07+00:00">Jul 26, 2017 07:52 PM UTC</time><a class="anchor" name="1501098727">&nbsp;</a></div><pre>Good, let&#39;s go with your understanding. I&#39;m probably wrong, and have no evidence that it is broken.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='34506#1501098460'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-26T19:47:40+00:00">Jul 26, 2017 07:47 PM UTC</time><a class="anchor" name="1501098460">&nbsp;</a></div><pre>Mats this sounds like a broken behavior then.  The FE is supposed to pass the new credential every time it notices it has been updated on the frontend side independent of reconfigs, and then on the factory side, receiving the new proxy should trigger a refresh inside condor-g.

At least that&#39;s the way I always remember it working..

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='34506#1501098086'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-26T19:41:26+00:00">Jul 26, 2017 07:41 PM UTC</time><a class="anchor" name="1501098086">&nbsp;</a></div><pre>Verified - OSG VO now generates proxies with 7 days on both the proxy and extension.

Re the factory side - IIRC factory does not refresh credentials on glidens submitted before a frontend reconfig. Until recently we have had problems of old (configs from several revisions ago) glideins starting up at sites. The change we have recently applied which have solved a lot of those issues is the idle lifetime limit on glideins, which we have set to 4 days. This limit will also help, as 4 + a few days for the job to execute should come in under the 7 day lifetime, even if a proxy refresh does not take place.

Regardless, I feel better now when the proxy and extension time limits match.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='34506#1501097703'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-26T19:35:03+00:00">Jul 26, 2017 07:35 PM UTC</time><a class="anchor" name="1501097703">&nbsp;</a></div><pre>@Jeff - HTCondor should be pushing updated attributes, end-to-end.  Even if the site is shortening the proxy delegation lifetime, we should be continuously pushing updates forward.

One thing I&#39;m worried is that something in HTCondor itself is strangely not pushing things forward.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='34506#1501097416'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-26T19:30:16+00:00">Jul 26, 2017 07:30 PM UTC</time><a class="anchor" name="1501097416">&nbsp;</a></div><pre>Just my opinion from the factory side of things..

In general we should never see VOMS extension lifetimes go to zero, even for VOs that limit to 24h.  This is because its common practice for the frontend cron scripts to run at least once every 6 hours, some FEs are even more aggressive.  (Factory ops do NOT control this policy it is up to the VO frontend admin).

So in the end sites should never see the VOMS lifetime of a pilot credential expire.

In any case hasn&#39;t it been shown from the original ticket that this was a site issue on shortening lifetime on proxy delegation?
<a href='34366' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/34366</a>

Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='34506#1501097112'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-26T19:25:12+00:00">Jul 26, 2017 07:25 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1501097112">&nbsp;</a></div><pre>It is now at 7 days. Please verify.
S</pre></div><div class='update_description'><i onclick="document.location='34506#1501080872'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-26T14:54:32+00:00">Jul 26, 2017 02:54 PM UTC</time><a class="anchor" name="1501080872">&nbsp;</a></div><pre>I don&#39;t see a problem with a voms extension being valid for longer. We use the extension mostly for membership information, and that is not time sensitive. The main authentication is the proxy, on which we do not enforce an upper time limit. Until the proxy lifetime is enforced, I don&#39;t think it makes sense to limit the extension.

My preference would be for the voms extension limit to be raised to 2 weeks.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='34506#1501080314'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-26T14:45:14+00:00">Jul 26, 2017 02:45 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1501080314">&nbsp;</a></div><pre>7 days worries me, the purpose is that these expire relatively quickly so anything untoward cannot go on too long.
I&#39;m standing by on Mats input.</pre></div><div class='update_description'><i onclick="document.location='34506#1501079294'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-26T14:28:14+00:00">Jul 26, 2017 02:28 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1501079294">&nbsp;</a></div><pre>Scott, can we extend that to 168 hours? Mats, alternatively, can we only issue pilot proxies with a two day expiry time? The two expiry times should be the same.</pre></div><div class='update_description'><i onclick="document.location='34506#1501077997'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-26T14:06:37+00:00">Jul 26, 2017 02:06 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1501077997">&nbsp;</a></div><pre>I believe I have doubled the lifetime to two days. The documentation is not terribly clear or complete but I think I got it.
Please test and let me know what you find.

S</pre></div><div class='update_description'><i onclick="document.location='34506#1500924372'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-24T19:26:12+00:00">Jul 24, 2017 07:26 PM UTC</time> by <b>wiscmoate@....</b><a class="anchor" name="1500924372">&nbsp;</a></div><pre>[moate@glidein2 ~]$ sudo voms-proxy-info -all -file /etc/condor/certs/glidein.proxy
subject   &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=glidein/glidein2.chtc.wisc.edu/CN=3207016913
issuer    &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=glidein/glidein2.chtc.wisc.edu
identity  &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=glidein/glidein2.chtc.wisc.edu
type      &#58; RFC compliant proxy
strength  &#58; 1024 bits
path      &#58; /etc/condor/certs/glidein.proxy
timeleft  &#58; 7483&#58;33&#58;04
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment

[moate@glidein2 ~]$ sudo voms-proxy-info -all -file /etc/condor/certs/pilot.proxy
subject   &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu/CN=3433928114
issuer    &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu
identity  &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu
type      &#58; RFC compliant proxy
strength  &#58; 1024 bits
path      &#58; /etc/condor/certs/pilot.proxy
timeleft  &#58; 7483&#58;33&#58;15
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO GLOW extension information ===
VO        &#58; GLOW
subject   &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu
issuer    &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=glow-voms.cs.wisc.edu
attribute &#58; /GLOW/Role=htpc/Capability=NULL
attribute &#58; /GLOW/Role=NULL/Capability=NULL
timeleft  &#58; 71&#58;38&#58;41
uri       &#58; glow-voms.cs.wisc.edu&#58;15001

On Mon, Jul 24, 2017 at 06&#58;32&#58;00PM +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62;    [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='34506#1500922819'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-24T19:00:19+00:00">Jul 24, 2017 07:00 PM UTC</time><a class="anchor" name="1500922819">&nbsp;</a></div><pre>OSG VO is using voms.opensciencegrid.org, so the question on how to configure it should be redirected to the GOC.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='34506#1500921132'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-24T18:32:12+00:00">Jul 24, 2017 06:32 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1500921132">&nbsp;</a></div><pre>Mats,

Can we extend the expiration limit of the voms server? With the
transition to the LCMAPS VOMS plugin, mapping at the site will generally
be based off the VOMS attributes and will therefore fail to map if the
jobs sit idle in the factory for &#62; 24 hours.

Aaron,

Can you check the VOMS attribute expiry time? It should be available if
you pass the &#39;-all&#39; flag to &#39;voms-proxy-info&#39;

- Brian</pre></div><div class='update_description'><i onclick="document.location='34506#1500920772'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-24T18:26:12+00:00">Jul 24, 2017 06:26 PM UTC</time> by <b>wiscmoate@....</b><a class="anchor" name="1500920772">&nbsp;</a></div><pre>We ask for expiration times of a year at CHTC (not sure if this
is causing issues) by using this voms-proxy-init flag&#58;
-valid 8760&#58;00

Below are exceprts from our pilot and glidein proxy x509 certs&#58;

Subject&#58; DC=org, DC=opensciencegrid, O=Open Science Grid, OU=Services, CN=glidein/glidein2.chtc.wisc.edu, CN=1944302284
Validity
Not Before&#58; Jul 24 17&#58;56&#58;01 2017 GMT
Not After &#58; Jun  1 14&#58;55&#58;37 2018 GMT

Subject&#58; DC=org, DC=opensciencegrid, O=Open Science Grid, OU=Services, CN=pilot/glidein2.chtc.wisc.edu, CN=3220195607
Validity
Not Before&#58; Jul 24 17&#58;56&#58;01 2017 GMT
Not After &#58; Jun  1 14&#58;55&#58;36 2018 GMT

-Aaron Moate</pre></div><div class='update_description'><i onclick="document.location='34506#1500918334'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-24T17:45:34+00:00">Jul 24, 2017 05:45 PM UTC</time><a class="anchor" name="1500918334">&nbsp;</a></div><pre>I think this has always been the way we have done things. Proxies are created by the frontend, passed to the factory, and then to the site. The reason they are expiring is that the glideins can site in queues for a while.

By default, osg-flock creates 168 hour proxies, but the voms extension is limited to 24 hours by the voms server&#58;

Warning&#58; voms1.opensciencegrid.org&#58;15027&#58; The validity of this VOMS AC in your proxy is shortened to 86400 seconds!voms1.opensciencegrid.org&#58;15027&#58; The validity of this VOMS AC in your proxy is shortened to 86400 seconds!

Do we even have vomses which allows longer than 24 hour voms extensions?

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='34506#1500916441'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-24T17:14:01+00:00">Jul 24, 2017 05:14 PM UTC</time> by <b>echism</b><a class="anchor" name="1500916441">&nbsp;</a></div><pre>I&#39;m not sure if this is right, but Mats and Aaron Moate are my best guesses for who these proxies belong to and I&#39;ve cc&#39;d them.</pre></div><div class='update_description'><i onclick="document.location='34506#1500674844'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-21T22:07:24+00:00">Jul 21, 2017 10:07 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1500674844">&nbsp;</a></div><pre>Alright, looks like all those VOMS attributes are set to expire before the proxy itself. Kyle, can we get the frontend admins added to this ticket so we can go over how the proxies are being generated?</pre></div><div class='update_description'><i onclick="document.location='34506#1500674667'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-21T22:04:27+00:00">Jul 21, 2017 10:04 PM UTC</time><a class="anchor" name="1500674667">&nbsp;</a></div><pre>Here actual info for the three proxies in question (of currently running job)&#58;

subject   &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu/CN=141893150
issuer    &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu
identity  &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu
type      &#58; RFC compliant proxy
strength  &#58; 1024 bits
path      &#58; /var/lib/gwms-factory/client-proxies/user_feglow/glidein_gfactory_instance/credential_chtc2.main_745540
timeleft  &#58; 7552&#58;57&#58;01
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO GLOW extension information ===
VO        &#58; GLOW
subject   &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu
issuer    &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=glow-voms.cs.wisc.edu
attribute &#58; /GLOW/Role=htpc/Capability=NULL
attribute &#58; /GLOW/Role=NULL/Capability=NULL
timeleft  &#58; 71&#58;02&#58;26
uri       &#58; glow-voms.cs.wisc.edu&#58;15001

subject   &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu/CN=2493395000
issuer    &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu
identity  &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu
type      &#58; RFC compliant proxy
strength  &#58; 1024 bits
path      &#58; /var/lib/gwms-factory/client-proxies/user_feosgflock/glidein_gfactory_instance/credential_osg-flock-grid-iu-edu_OSG_gWMSFrontend.main_357570
timeleft  &#58; 166&#58;19&#58;04
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO osg extension information ===
VO        &#58; osg
subject   &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu
issuer    &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=voms1.opensciencegrid.org
attribute &#58; /osg/Role=NULL/Capability=NULL
attribute &#58; /osg/ams/Role=NULL/Capability=NULL
timeleft  &#58; 22&#58;19&#58;04
uri       &#58; voms1.opensciencegrid.org&#58;15027
<div id='show_1256527581' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1256527581'>
subject   &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/uclhc-fe-1.t2.ucsd.edu/CN=proxy
issuer    &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/uclhc-fe-1.t2.ucsd.edu
identity  &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/uclhc-fe-1.t2.ucsd.edu
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /var/lib/gwms-factory/client-proxies/user_feuclhc/glidein_gfactory_instance/credential_uclhc-fe-1-t2-ucsd-edu_OSG_gWMSFrontend.osg_384946
timeleft  &#58; 66&#58;36&#58;05
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO osg extension information ===
VO        &#58; osg
subject   &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/uclhc-fe-1.t2.ucsd.edu
issuer    &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=voms1.opensciencegrid.org
attribute &#58; /osg/uclhc/Role=NULL/Capability=NULL
attribute &#58; /osg/ligo/Role=NULL/Capability=NULL
attribute &#58; /osg/Role=NULL/Capability=NULL
timeleft  &#58; 18&#58;36&#58;05
uri       &#58; voms1.opensciencegrid.org&#58;15027

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=zvada/CN=684832/CN=Marian Zvada
</div><script type='text/javascript'>
        $('#show_1256527581').click(function() {
            $('#detail_1256527581').slideDown("normal");
            $('#show_1256527581').hide();
            $('#hide_1256527581').show();
        });
        $('#hide_1256527581').click(function() {
            $('#detail_1256527581').slideUp();
            $('#hide_1256527581').hide();
            $('#show_1256527581').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='34506#1500672585'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-21T21:29:45+00:00">Jul 21, 2017 09:29 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1500672585">&nbsp;</a></div><pre>Alright, let&#39;s focus on those 3 proxies for now. Can you verify that on all of the factories that all of the proxies that you&#39;re using have a VOMS attribute expiry time of at least the overall proxy expiry time? If they aren&#39;t, then we&#39;ll rope in the frontend VO admins to see how they&#39;re generating their proxies.</pre></div><div class='update_description'><i onclick="document.location='34506#1500672292'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-21T21:24:52+00:00">Jul 21, 2017 09:24 PM UTC</time><a class="anchor" name="1500672292">&nbsp;</a></div><pre>Hi,

I don&#39;t think this is a factory problem. Brian, can you elaborate more on what you&#39;re asking?

If I understand correclty the proxy subjects below should be the ones which are created by Frontend (admins) and used for glidein submission requests. Factory just delegates whatever it receives within Frontend glidein request. However, I&#39;ve grepped through our mapfile but it looks that none of the mentioned we&#39;re actually accepting by Factory. We have slightly different DNs in our condor map file, though&#58;

/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=glidein/glidein2.chtc.wisc.edu       # (see &#39;CN=glidein/&#39; vs &#39;CN=pilot/&#39;)
/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=glideinwms/osg-flock.grid.iu.edu  # (see &#39;CN=glideinwns&#39; vs &#39;CN=pilot/&#39;)
/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=uclhc-fe-1.t2.ucsd.edu                  # (see &#39;CN=&#39; vs &#39;CN=pilot/&#39;)

The other three are not in our map list at all and with CN difference I mentioned there is no sign that Factory should accept these at all.

Do I mistunderstand what I suppose to have checked or what&#39;s the actual problem, please?

Thanks,
Marian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=zvada/CN=684832/CN=Marian Zvada</pre></div><div class='update_description'><i onclick="document.location='34506#1500663484'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-21T18:58:04+00:00">Jul 21, 2017 06:58 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1500663484">&nbsp;</a></div><pre>Glidein Support,

Do you have any ideas as to the best way to tackle this problem?  Should we contact the VOs or the actual machine admins?

Just looking for thoughts here.  Also the UCLHC one isn&#39;t in OIM, so I wasn&#39;t sure what to go with there.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='34506#1500661699'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-21T18:28:19+00:00">Jul 21, 2017 06:28 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1500661699">&nbsp;</a></div><pre>After troubleshooting UConn&#39;s CE (<a href='34366' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/34366</a>) we saw that some jobs were rejected because the AC credentials expired. Here&#39;s a list&#58;

&#34;/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu/CN=3935027072&#34;
&#34;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jcaballe/CN=620333/CN=Jose Caballero Bejar&#34;
&#34;/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=glidein.unl.edu&#34;
&#34;/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu&#34;
&#34;/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu&#34;
&#34;/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/uclhc-fe-1.t2.ucsd.edu&#34;

Can we ensure that VOs are generating their pilot proxies with the same VOMS attribute expiration time as the proxy expiration itself?

Thanks,
Brian</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F34506">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 34506});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
