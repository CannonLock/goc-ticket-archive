<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[20224] Friendlyname not correct on on renewed DigiCert certificate</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=20224" method="post">
<div class="page-header">
    <h3><span class="muted">20224</span> / Friendlyname not correct on on renewed DigiCert certificate</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Frederick Luehring</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Frederick Luehring</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Soichi to address Fred&#39;s concerns</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-04-21</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG RA <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/20224", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/20224?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/20224?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Friendlyname%20not%20correct%20on%20on%20renewed%20DigiCert%20certificate%20ISSUE%3D20224%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='20224#1398694810'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-04-28T14:20:10+00:00">Apr 28, 2014 02:20 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1398694810">&nbsp;</a></div><pre>Closing this ticket as it can now be tracked in jira. <a href='https&#58;//jira.grid.iu.edu/browse/OIM-87' target='_blank' rel='nofollow'>https&#58;//jira.grid.iu.edu/browse/OIM-87</a></pre></div><div class='update_description'><i onclick="document.location='20224#1397490354'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-04-14T15:45:54+00:00">Apr 14, 2014 03:45 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1397490354">&nbsp;</a></div><pre>Since this isn&#39;t a problem specifically with the osg-pki-tools, I&#39;m removing software from the ticket.

@Soichi&#58; Maybe openssl/the libraries that you&#39;re using got updated? Or as Von said, maybe DigiCert&#39;s generating the friendlyName you&#39;re seeing.</pre></div><div class='update_description'><i onclick="document.location='20224#1397046529'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-04-09T12:28:49+00:00">Apr 9, 2014 12:28 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1397046529">&nbsp;</a></div><pre>I found following code in OIM when it initially construct the pkcs12 object with the OIM generated private key and pkcs7 chain sent from DigiCert.

<font color='#7F7E6F'>&#62; KeyStore p12 = KeyStore.getInstance(&#34;PKCS12&#34;);</font>
<font color='#7F7E6F'>&#62; p12.load(null, null);  //not sure what this does.</font>
<font color='#7F7E6F'>&#62; PrivateKey private_key = getPrivateKey(rec.id);</font>
<font color='#7F7E6F'>&#62; p12.setKeyEntry(&#34;USER&#34;+rec.id, private_key, password.toCharArray(), chain);</font>
<font color='#7F7E6F'>&#62; return p12;</font>

This part of code hasn&#39;t been touched since 10/18/2012 (probably since our original prototype) and I don&#39;t know why &#34;USER&#34; gets translated to &#34;user&#34;, but  I am guessing this is ultimately responsible for setting the &#34;friendlyName&#34;. This doesn&#39;t explain why we *started* seeing this on the pkcs12 file output by OSG PKI tool recently.</pre></div><div class='update_description'><i onclick="document.location='20224#1396997670'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-04-08T22:54:30+00:00">Apr 8, 2014 10:54 PM UTC</time><a class="anchor" name="1396997670">&nbsp;</a></div><pre>I dug into this and consulted with Basney&#58;

First, to clarify, &#34;friendlyName&#34; is not an attribute of the certificate, it is an attribute of the PKCS12 container that is used to deliver the certificate and private key to the user. Quoting from <a href='https&#58;//www.openssl.org/docs/apps/pkcs12.html&#58' target='_blank' rel='nofollow'>https&#58;//www.openssl.org/docs/apps/pkcs12.html&#58</a>;

<font color='#7F7E6F'>&#62;This specifies the &#96;&#96;friendly name&#39;&#39; for the certificate and private key. This name is typically displayed in list boxes by software importing the file.</font>

Given the above clarification, let me ask if DigiCert is generating the PKCS12 or if OIM is?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Von Welch 793</pre></div><div class='update_description'><i onclick="document.location='20224#1396976213'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-04-08T16:56:53+00:00">Apr 8, 2014 04:56 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1396976213">&nbsp;</a></div><pre>I still haven&#39;t heard anyone saying that those bag attributes are causing any real issue. I might be out of loop, but until then, I assume that those attributes are sorely for human use and there is no reason we need to report this to DigiCert.</pre></div><div class='update_description'><i onclick="document.location='20224#1396904175'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-04-07T20:56:15+00:00">Apr 7, 2014 08:56 PM UTC</time> by <b>vwelch@....</b><a class="anchor" name="1396904175">&nbsp;</a></div><pre>I believe it’s Soichi’s call though I’m happy to consult.

Von

On Apr 7, 2014, at 10&#58;20 AM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20224#1396880410'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-04-07T14:20:10+00:00">Apr 7, 2014 02:20 PM UTC</time> by <b>Fred Luehring</b><a class="anchor" name="1396880410">&nbsp;</a></div><pre>Hi Chris,

It seems to me that Scott/Soichi/Von should make that call...

Fred

On 4/7/14, 6&#58;53 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20224#1396878800'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-04-07T13:53:20+00:00">Apr 7, 2014 01:53 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1396878800">&nbsp;</a></div><pre>Fred do you want to escalate this up to DigiCert?

~Chris</pre></div><div class='update_description'><i onclick="document.location='20224#1395857539'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-26T18:12:19+00:00">Mar 26, 2014 06:12 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1395857539">&nbsp;</a></div><pre>I just renewed my cert on OIM-ITB and I&#39;m getting the bad friendly name so it looks like a server-side issue to me&#58;

$ ls -l user_certificate_and_key.U213.p12
-rw-------. 1 blin blin 5694 Mar 26 13&#58;09 user_certificate_and_key.U213.p12
$ openssl pkcs12 -in user_certificate_and_key.U213.p12 -nokeys -info
Enter Import Password&#58;
MAC Iteration 1024
MAC verified OK
PKCS7 Data
Shrouded Keybag&#58; pbeWithSHA1And3-KeyTripleDES-CBC, Iteration 1024
PKCS7 Encrypted data&#58; pbeWithSHA1And40BitRC2-CBC, Iteration 1024
Certificate bag
Bag Attributes
friendlyName&#58; user213</pre></div><div class='update_description'><i onclick="document.location='20224#1395849191'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-26T15:53:11+00:00">Mar 26, 2014 03:53 PM UTC</time> by <b>wbhurst@....</b><a class="anchor" name="1395849191">&nbsp;</a></div><pre>I just tried the -name &#34;friendly name&#34; with my new certificate file and
found that it made no difference&#58;

<font color='#7F7E6F'>&#62; openssl pkcs12 -in user_certificate_and_key_wbhurst_2014Mar26.U350.p12 -name &#34;CN=William B Hurst 1156,OU=People,O=Open Science Grid,DC=DigiCert-Grid,DC=com&#34; -nokeys -info</font>
<font color='#7F7E6F'>&#62; Enter Import Password&#58;</font>
<font color='#7F7E6F'>&#62; MAC Iteration 1024</font>
<font color='#7F7E6F'>&#62; MAC verified OK</font>
<font color='#7F7E6F'>&#62; PKCS7 Data</font>
<font color='#7F7E6F'>&#62; Shrouded Keybag&#58; pbeWithSHA1And3-KeyTripleDES-CBC, Iteration 1024</font>
<font color='#7F7E6F'>&#62; PKCS7 Encrypted data&#58; pbeWithSHA1And40BitRC2-CBC, Iteration 1024</font>
<font color='#7F7E6F'>&#62; Certificate bag</font>
<font color='#7F7E6F'>&#62; Bag Attributes</font>
<font color='#7F7E6F'>&#62;     friendlyName&#58; user350</font>

I then tried it using a shorter version of &#34;friendly name&#34;

<font color='#7F7E6F'>&#62; openssl pkcs12 -in user_certificate_and_key_wbhurst_2014Mar26.U350.p12 -name &#34;CN=William B Hurst 1156&#34; -nokeys -info</font>
<font color='#7F7E6F'>&#62; Enter Import Password&#58;</font>
<font color='#7F7E6F'>&#62; MAC Iteration 1024</font>
<font color='#7F7E6F'>&#62; MAC verified OK</font>
<font color='#7F7E6F'>&#62; PKCS7 Data</font>
<font color='#7F7E6F'>&#62; Shrouded Keybag&#58; pbeWithSHA1And3-KeyTripleDES-CBC, Iteration 1024</font>
<font color='#7F7E6F'>&#62; PKCS7 Encrypted data&#58; pbeWithSHA1And40BitRC2-CBC, Iteration 1024</font>
<font color='#7F7E6F'>&#62; Certificate bag</font>
<font color='#7F7E6F'>&#62; Bag Attributes</font>
<font color='#7F7E6F'>&#62;     friendlyName&#58; user350</font>

No matter what I try, the results are still &#34;unfriendly&#34;. &#58;)

Best Regards,
Brad Hurst

On Wed, 2014-03-26 at 15&#58;00 +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20224#1395846020'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-26T15:00:20+00:00">Mar 26, 2014 03:00 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1395846020">&nbsp;</a></div><pre>It looks to me like the p12 file that we&#39;re getting from OIM has the friendly name already defined so I&#39;m not convinced it&#39;s the PKI tools themselves. If you renew via the web interface, what&#39;s the friendly name of the cert you get from there?

blin@cs-wifiopen-92&#58;~/certs$ openssl pkcs12 -in user_certificate_and_key.U213.p12 -nokeys -info
Enter Import Password&#58;
MAC Iteration 1024
MAC verified OK
PKCS7 Data
Shrouded Keybag&#58; pbeWithSHA1And3-KeyTripleDES-CBC, Iteration 1024
PKCS7 Encrypted data&#58; pbeWithSHA1And40BitRC2-CBC, Iteration 1024
Certificate bag
Bag Attributes
friendlyName&#58; user213

I&#39;m not sure how the certs are generated on the OIM side but there is a &#39;-name&#39; option you can pass to assign the friendly name for the openssl pkcs12 command&#58;

-name friendlyname
This specifies the &#34;friendly name&#34; for the certificate and private key. This name is typically displayed in list boxes by software
importing the file.

Maybe the instructions (<a href='https&#58;//confluence.grid.iu.edu/display/CENTRAL/Importing+User+Certificate+for+Command+Line+Use' target='_blank' rel='nofollow'>https&#58;//confluence.grid.iu.edu/display/CENTRAL/Importing+User+Certificate+for+Command+Line+Use</a>) need to be updated to specify a friendly name? That would be awfully confusing though.</pre></div><div class='update_description'><i onclick="document.location='20224#1395844694'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-26T14:38:14+00:00">Mar 26, 2014 02:38 PM UTC</time> by <b>Fred Luehring</b><a class="anchor" name="1395844694">&nbsp;</a></div><pre>Hi Tim,

The header in public key for my first (2013) DigiCert reads&#58;

Bag Attributes
friendlyName&#58; CN=Frederick Luehring 153,OU=People,O=Open Science
Grid,DC=DigiCert-Grid,DC=com
localKeyID&#58; 54 69 6D 65 20 31 33 36 33 32 32 39 35 39 36 38 35 34
subject=/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Frederick
Luehring 153
issuer=/DC=com/DC=DigiCert-Grid/O=DigiCert Grid/CN=DigiCert Grid CA-1

and thus contains a meaningful friendlyName. When I renewed, I got this header
in this year&#39;s (2014) public key&#58;

Bag Attributes
friendlyName&#58; user276
localKeyID&#58; 54 69 6D 65 20 31 33 39 35 30 34 39 31 30 39 32 33 33
subject=/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Frederick
Luehring 153
issuer=/DC=com/DC=DigiCert-Grid/O=DigiCert Grid/CN=DigiCert Grid CA-1

Note even though it&#39;s not obvious from this there was real change to the
certificate with new one being SHA2 compliant while the old was SHA1.

Fred

On 3/26/14, 9&#58;59 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20224#1395842340'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-26T13:59:00+00:00">Mar 26, 2014 01:59 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1395842340">&nbsp;</a></div><pre>Adding Brian Lin to this ticket, because he owns the OSG PKI CLI tools now (not Brad Hurst).

So to summarize, there is a concern that the OSG PKI tools are setting a certificate attribute called “friendlyName” to a non-desired value? What is the exact tool in question? Can someone provide a detailed log of the invocation of that tool and its output? If friendlyName should not set the value “User276”, what was the expected behavior instead?</pre></div><div class='update_description'><i onclick="document.location='20224#1395718409'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-25T03:33:29+00:00">Mar 25, 2014 03:33 AM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1395718409">&nbsp;</a></div><pre>For 1) Why the friendlyName is set User276
I believe this is added by the OSG PKI client tool, so CC-ing Brad Hurst for comment. I am guessing something changed with osg-pki CLI, or openssl tool itself? I am also not aware of any significant to these attributes.

For 2) Why when you click on the renewal email, you are pointed at the issue a new certificate tab instead of the renew tab.
I have opened a Jira ticket for this item, and I will update OIM / and notification email to point to the correct tab in the future.
<font color='#7F7E6F'>&#62; <a href='https&#58;//jira.opensciencegrid.org/browse/OIM-83' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/OIM-83</a></font>

Thanks,</pre></div><div class='update_description'><i onclick="document.location='20224#1395716908'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-25T03:08:28+00:00">Mar 25, 2014 03:08 AM UTC</time><a class="anchor" name="1395716908">&nbsp;</a></div><pre>Before we close this out we should make sure we don&#39;t drop the following. With regards to frendlyName, I have no reason to believe it is uses anywhere, but it&#39;s still concerning it changed.

1) Why the friendlyName is set User276.
2)  Why when you click on the renewal email, you are pointed at the issue a new certificate tab instead of the renew tab.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Von Welch 793</pre></div><div class='update_description'><i onclick="document.location='20224#1395715712'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-25T02:48:32+00:00">Mar 25, 2014 02:48 AM UTC</time> by <b>Wei Yang</b><a class="anchor" name="1395715712">&nbsp;</a></div><pre>Hi Rob,

the problem regarding Fred&#39;s SHA2 certificate with dCache xrootd door is resolved. It was due to accidentally using an old ATLAS plugin to dCache xrootd door. We fixed the problem.</pre></div><div class='update_description'><i onclick="document.location='20224#1395685062'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-24T18:17:42+00:00">Mar 24, 2014 06:17 PM UTC</time> by <b>Fred Luehring</b><a class="anchor" name="1395685062">&nbsp;</a></div><pre>Hi Rob,

OK I just compared doing this xrdcp command&#58;

xrdcp -d 1 -f
root&#58;//fax.mwt2.org//atlas/rucio/data12_8TeV&#58;NTUP_SMWZ.01128241._000042.root.1
/dev/null

with proxies generated with my old and new certificates. The old certificate
works and the new certificate fails. I am using the current xrdcp client
(version 3.3.6). Sarah Williams tells the that the servers behind fax.mwt2.org
have been upgraded to dCache 2.6.23. So there is a real problem here.

I strongly suggest consulting with Wei Yang who I previously have added as
a cc on this ticket. He is the real expert on this sort of issue.

Fred

On 3/24/14, 1&#58;35 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20224#1395682555'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-24T17:35:55+00:00">Mar 24, 2014 05:35 PM UTC</time><a class="anchor" name="1395682555">&nbsp;</a></div><pre>Yes, 2.6.16 is the latest released in EMI for dcache-server, dcache-client is 2.6.12 so you are current there. Please let me know if your retry works.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Robert Quick 62</pre></div><div class='update_description'><i onclick="document.location='20224#1395682150'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-24T17:29:10+00:00">Mar 24, 2014 05:29 PM UTC</time> by <b>Fred Luehring</b><a class="anchor" name="1395682150">&nbsp;</a></div><pre>Hi Rob,

Sarah tells me we were using dCache version 2.6.16 but they have upgraded
very recently 2.6.23 on the xrootd servers. I will retry my test.

Fred

On 3/24/14, 1&#58;21 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20224#1395681704'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-24T17:21:44+00:00">Mar 24, 2014 05:21 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1395681704">&nbsp;</a></div><pre>assigning Rob.</pre></div><div class='update_description'><i onclick="document.location='20224#1395419529'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-21T16:32:09+00:00">Mar 21, 2014 04:32 PM UTC</time> by <b>Wei Yang</b><a class="anchor" name="1395419529">&nbsp;</a></div><pre>Hi, the client we tested are xrootd 3.2.7 and 3.3.6, with openssl 0.9.8e (on rhel5) and openssl 1.0.1e (on rhel6). the server is an xrootd door of dCache 2.6. We also reported this problem to the dCache team since we believe they are the own of the issue.

Wei Yang  |  yangw@....  |  1-650-926-3338

On Mar 20, 2014, at 2&#58;22 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20224#1395396308'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-21T10:05:08+00:00">Mar 21, 2014 10:05 AM UTC</time> by <b>Fred Luehring</b><a class="anchor" name="1395396308">&nbsp;</a></div><pre>Hi Edgar,

Wei Yang who is a cc on this ticket should be able to provide this information.

Fred

On 3/20/14, 5&#58;22 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20224#1395350555'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-20T21:22:35+00:00">Mar 20, 2014 09:22 PM UTC</time><a class="anchor" name="1395350555">&nbsp;</a></div><pre>Hi,

Can get info on the xrootd and openssl version of both the client and the server?.

Edgar Fajardo
OSG Software Team

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='20224#1395347170'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-20T20:26:10+00:00">Mar 20, 2014 08:26 PM UTC</time> by <b>Fred Luehring</b><a class="anchor" name="1395347170">&nbsp;</a></div><pre>Hi Soichi,

I just completed further tests following instructions from Ilija Vukotic.
Both my old (sha1WithRSAEncryption) and my new (sha256WithRSAEncryption)
certificate work correctly with dCache. This strongly points at a problem in
xrootd and/or openssl. Wei should be in the best position to explain.

Fred

On 3/20/14, 3&#58;50 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20224#1395345025'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-20T19:50:25+00:00">Mar 20, 2014 07:50 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1395345025">&nbsp;</a></div><pre>Thanks.

I am CC-ing software team also - in case if they are aware of any SHA-2 related issue with dCache xrootd.</pre></div><div class='update_description'><i onclick="document.location='20224#1395310163'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-20T10:09:23+00:00">Mar 20, 2014 10:09 AM UTC</time><a class="anchor" name="1395310163">&nbsp;</a></div><pre>Hi Soichi,

I add Wei Yang of SLAC to this ticket who has reproduced the xrdcp problem. He told me this about the problem&#58;

I just renewed my certificate and I can repeat the problem Fred reported. This looks like a SHA2 compliance problem of dCache xrootd door. I am surprised since dCache’s SRM and GridFTP don’t have this problem.

If I understand Wei correctly this is not a problem with the certificate. Wei should comment if I have this wrong.

If I recall correctly there still are two issues related to the new certificate and certificate issuing&#58;

1) Why the friendlyName is set User276.
2)  Why when you click on the renewal email, you are pointed at the issue a new certificate tab instead of the renew tab.

Fred

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Frederick Luehring 153</pre></div><div class='update_description'><i onclick="document.location='20224#1395273008'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-19T23:50:08+00:00">Mar 19, 2014 11:50 PM UTC</time> by <b>Fred Luehring</b><a class="anchor" name="1395273008">&nbsp;</a></div><pre>Hi Soichi,

I am working with Wei Yang of SLAC to isolate the problem. Wei suspects an
openssl library problem based on previous experience. The operating theory
appears to be a problem with the EL6 version of openssl. I have to make some
tests for him which I will do tonight. I will keep you informed as to what his
findings are.

Fred

On 3/19/14, 5&#58;18 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20224#1395263904'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-19T21:18:24+00:00">Mar 19, 2014 09:18 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1395263904">&nbsp;</a></div><pre>Fred,

Thanks for the dump. I can&#39;t spot anything obviously wrong with it, however.

I am wondering if your issue is caused by some xrootd servers that is out-dated and maybe not properly handling your new SHA-2 certificate (??)

Which xrootd server are you trying to copy data from? Also, which version of xrdcp command are you using, and do you happen to know the version of the xrootd server that you are copying your files from/to?

Thanks!</pre></div><div class='update_description'><i onclick="document.location='20224#1395262323'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-19T20:52:03+00:00">Mar 19, 2014 08:52 PM UTC</time><a class="anchor" name="1395262323">&nbsp;</a></div><pre>Hi Soichi,

xrdcp is the grid-enabled copy command for the xrootd file system. Something in the new certificate an internal server error for the xrootd server. I post the openssl output for the public certificate below.

Fred

PS I apologize for not adding you as a cc to the ticket - I accidentally hit enter when I was trying to add you after adding Scott and Von.

Certificate&#58;
Data&#58;
Version&#58; 3 (0x2)
Serial Number&#58;
0d&#58;8c&#58;37&#58;54&#58;91&#58;ab&#58;7d&#58;e3&#58;b2&#58;72&#58;1a&#58;cd&#58;12&#58;c7&#58;25&#58;6c
Signature Algorithm&#58; sha256WithRSAEncryption
Issuer&#58; DC=com, DC=DigiCert-Grid, O=DigiCert Grid, CN=DigiCert Grid CA-1
Validity
Not Before&#58; Mar 17 00&#58;00&#58;00 2014 GMT
Not After &#58; Apr 17 12&#58;00&#58;00 2015 GMT
Subject&#58; DC=com, DC=DigiCert-Grid, O=Open Science Grid, OU=People, CN=Frederick Luehring 153
Subject Public Key Info&#58;
Public Key Algorithm&#58; rsaEncryption
Public-Key&#58; (2048 bit)
Modulus&#58;
00&#58;89&#58;2e&#58;7d&#58;06&#58;28&#58;08&#58;ed&#58;07&#58;a2&#58;11&#58;82&#58;3e&#58;90&#58;cf&#58;
21&#58;a9&#58;87&#58;fb&#58;b2&#58;50&#58;9a&#58;ba&#58;b8&#58;f1&#58;5e&#58;ea&#58;26&#58;4e&#58;31&#58;
3b&#58;ab&#58;d2&#58;24&#58;e0&#58;e2&#58;9d&#58;2e&#58;ae&#58;bd&#58;a3&#58;52&#58;29&#58;0e&#58;9f&#58;
6d&#58;c6&#58;bd&#58;83&#58;29&#58;66&#58;e2&#58;8e&#58;ea&#58;2f&#58;63&#58;28&#58;c2&#58;d9&#58;2c&#58;
63&#58;00&#58;d1&#58;01&#58;39&#58;48&#58;31&#58;f2&#58;12&#58;33&#58;b9&#58;ba&#58;2c&#58;8f&#58;97&#58;
d0&#58;95&#58;55&#58;a5&#58;1c&#58;04&#58;d7&#58;09&#58;75&#58;6f&#58;f4&#58;fe&#58;5f&#58;8d&#58;79&#58;
68&#58;a7&#58;f1&#58;4f&#58;c7&#58;58&#58;f0&#58;c4&#58;02&#58;4b&#58;71&#58;03&#58;b1&#58;f0&#58;14&#58;
aa&#58;8f&#58;55&#58;0e&#58;5d&#58;30&#58;f6&#58;30&#58;ea&#58;b4&#58;9c&#58;ad&#58;35&#58;04&#58;e4&#58;
0e&#58;0c&#58;b9&#58;85&#58;a2&#58;18&#58;75&#58;ec&#58;fd&#58;a7&#58;c3&#58;b0&#58;14&#58;26&#58;95&#58;
1f&#58;c9&#58;42&#58;c3&#58;37&#58;55&#58;d2&#58;43&#58;82&#58;7e&#58;0d&#58;f1&#58;56&#58;91&#58;14&#58;
28&#58;a2&#58;73&#58;6e&#58;5b&#58;ca&#58;b2&#58;b7&#58;d9&#58;92&#58;9e&#58;85&#58;b8&#58;d7&#58;ce&#58;
f5&#58;d7&#58;19&#58;23&#58;bb&#58;05&#58;e5&#58;e0&#58;ea&#58;2c&#58;58&#58;6f&#58;5d&#58;dc&#58;44&#58;
<div id='show_1547021732' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1547021732'>b1&#58;89&#58;25&#58;83&#58;1e&#58;c1&#58;c4&#58;15&#58;b7&#58;5d&#58;a8&#58;8d&#58;85&#58;c6&#58;6e&#58;
ef&#58;20&#58;71&#58;12&#58;14&#58;58&#58;4e&#58;d2&#58;0d&#58;17&#58;fd&#58;8e&#58;f5&#58;3d&#58;5e&#58;
b9&#58;56&#58;b7&#58;31&#58;60&#58;df&#58;1c&#58;ca&#58;93&#58;76&#58;95&#58;46&#58;7a&#58;66&#58;b1&#58;
8d&#58;c8&#58;fb&#58;f5&#58;56&#58;8e&#58;82&#58;53&#58;03&#58;1e&#58;6c&#58;ad&#58;6e&#58;79&#58;40&#58;
b4&#58;c4&#58;47&#58;bf&#58;2e&#58;48&#58;ae&#58;e6&#58;8b&#58;8f&#58;57&#58;5b&#58;bd&#58;e7&#58;88&#58;
3c&#58;2f
Exponent&#58; 65537 (0x10001)
X509v3 extensions&#58;
X509v3 Authority Key Identifier&#58;
keyid&#58;EF&#58;B0&#58;75&#58;9D&#58;68&#58;31&#58;D1&#58;E4&#58;F7&#58;2A&#58;89&#58;82&#58;53&#58;9D&#58;39&#58;77&#58;68&#58;2E&#58;20&#58;51

X509v3 Subject Key Identifier&#58;
17&#58;6F&#58;18&#58;62&#58;02&#58;FB&#58;77&#58;85&#58;CF&#58;9A&#58;77&#58;43&#58;6B&#58;24&#58;32&#58;9D&#58;01&#58;F2&#58;45&#58;33
X509v3 Subject Alternative Name&#58;
email&#58;luehring@....
X509v3 Key Usage&#58; critical
Digital Signature, Key Encipherment, Data Encipherment
X509v3 Extended Key Usage&#58;
E-mail Protection, TLS Web Client Authentication
X509v3 CRL Distribution Points&#58;

Full Name&#58;
URI&#58;<a href='http&#58;//crl3.digicert.com/DigiCertGridCA-1.crl' target='_blank' rel='nofollow'>http&#58;//crl3.digicert.com/DigiCertGridCA-1.crl</a>

Full Name&#58;
URI&#58;<a href='http&#58;//crl4.digicert.com/DigiCertGridCA-1.crl' target='_blank' rel='nofollow'>http&#58;//crl4.digicert.com/DigiCertGridCA-1.crl</a>

X509v3 Certificate Policies&#58;
Policy&#58; 1.2.840.113612.5.2.2.1
Policy&#58; 2.16.840.1.114412.31.4.1.1
Policy&#58; 1.2.840.113612.5.2.3.3.3

Authority Information Access&#58;
OCSP - URI&#58;<a href='http&#58;//ocsp.digicert.com' target='_blank' rel='nofollow'>http&#58;//ocsp.digicert.com</a>
CA Issuers - URI&#58;<a href='http&#58;//cacerts.digicert.com/DigiCertGridCA-1.crt' target='_blank' rel='nofollow'>http&#58;//cacerts.digicert.com/DigiCertGridCA-1.crt</a>

X509v3 Basic Constraints&#58; critical
CA&#58;FALSE
Signature Algorithm&#58; sha256WithRSAEncryption
28&#58;c7&#58;f3&#58;f9&#58;c9&#58;68&#58;1a&#58;2d&#58;2b&#58;ae&#58;8d&#58;a4&#58;df&#58;30&#58;ef&#58;e8&#58;c8&#58;b1&#58;
69&#58;f3&#58;7d&#58;e0&#58;5f&#58;ff&#58;6d&#58;56&#58;27&#58;2d&#58;a7&#58;a8&#58;30&#58;68&#58;cf&#58;7e&#58;5b&#58;80&#58;
37&#58;fd&#58;a4&#58;c1&#58;ea&#58;0c&#58;0c&#58;4d&#58;6e&#58;da&#58;23&#58;7b&#58;6f&#58;ee&#58;9d&#58;c1&#58;f9&#58;91&#58;
e4&#58;25&#58;13&#58;44&#58;a8&#58;8f&#58;cb&#58;6e&#58;d5&#58;7b&#58;18&#58;6f&#58;a1&#58;9f&#58;b0&#58;98&#58;a6&#58;53&#58;
4b&#58;11&#58;6f&#58;72&#58;f0&#58;dc&#58;1a&#58;14&#58;73&#58;9d&#58;12&#58;62&#58;ef&#58;32&#58;7e&#58;6e&#58;74&#58;4d&#58;
0d&#58;3a&#58;12&#58;64&#58;c4&#58;b2&#58;dc&#58;fe&#58;4e&#58;a5&#58;2e&#58;20&#58;22&#58;80&#58;5a&#58;59&#58;4a&#58;d6&#58;
fd&#58;0b&#58;ae&#58;e7&#58;bb&#58;18&#58;6a&#58;6c&#58;e7&#58;c4&#58;80&#58;58&#58;c8&#58;03&#58;40&#58;f7&#58;58&#58;72&#58;
10&#58;55&#58;e5&#58;76&#58;4b&#58;b2&#58;ca&#58;f6&#58;48&#58;43&#58;f5&#58;01&#58;1a&#58;26&#58;b4&#58;d2&#58;93&#58;9f&#58;
21&#58;5e&#58;ec&#58;0d&#58;74&#58;92&#58;c2&#58;0b&#58;5d&#58;19&#58;1b&#58;68&#58;6b&#58;cb&#58;d5&#58;64&#58;d8&#58;04&#58;
a1&#58;94&#58;1f&#58;4b&#58;e6&#58;99&#58;e9&#58;d8&#58;a4&#58;af&#58;d4&#58;fe&#58;2a&#58;03&#58;48&#58;ae&#58;f6&#58;8a&#58;
07&#58;60&#58;4f&#58;aa&#58;3c&#58;bc&#58;dc&#58;48&#58;50&#58;2c&#58;9e&#58;44&#58;18&#58;73&#58;6d&#58;36&#58;43&#58;61&#58;
b6&#58;dd&#58;95&#58;6c&#58;9f&#58;f8&#58;8b&#58;60&#58;64&#58;bf&#58;fd&#58;9b&#58;7a&#58;48&#58;f4&#58;87&#58;62&#58;b6&#58;
d7&#58;eb&#58;27&#58;78&#58;a5&#58;b8&#58;86&#58;8c&#58;27&#58;9a&#58;44&#58;59&#58;2c&#58;36&#58;36&#58;b6&#58;e1&#58;af&#58;
a6&#58;cc&#58;31&#58;03&#58;ef&#58;2c&#58;fd&#58;65&#58;ba&#58;4a&#58;60&#58;a4&#58;b6&#58;75&#58;1b&#58;15&#58;43&#58;fe&#58;
4f&#58;e1&#58;63&#58;4b

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Frederick Luehring 153
</div><script type='text/javascript'>
        $('#show_1547021732').click(function() {
            $('#detail_1547021732').slideDown("normal");
            $('#show_1547021732').hide();
            $('#hide_1547021732').show();
        });
        $('#hide_1547021732').click(function() {
            $('#detail_1547021732').slideUp();
            $('#hide_1547021732').hide();
            $('#show_1547021732').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='20224#1395261594'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-19T20:39:54+00:00">Mar 19, 2014 08:39 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1395261594">&nbsp;</a></div><pre>I am not familiar with xrdcp, but can you post (or send me an email containing the openssl dump of your new certificate?)

By running something like
<font color='#7F7E6F'>&#62; openssl x509 -in usercert.pem -noout -text</font>

Soichi</pre></div><div class='update_description'><i onclick="document.location='20224#1395261394'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-19T20:36:34+00:00">Mar 19, 2014 08:36 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1395261394">&nbsp;</a></div><pre>Soichi,

Can you please look into Fred&#39;s concern within this ticket and maybe follow up with DigiCert if needed?

Thanks,
-Alain</pre></div><div class='update_description'><i onclick="document.location='20224#1395261087'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-19T20:31:27+00:00">Mar 19, 2014 08:31 PM UTC</time><a class="anchor" name="1395261087">&nbsp;</a></div><pre>I was a real hurry when I renewed the certificate  and I don&#39;t remember exactly what happened. I may of actually seen user276 and overlooked it. I do point out that I am user 153 (CN=Frederick Luehring 153) so I have no idea where user276 came from. One do remember is that when clicked on the link to email to renew the certificate, I ended up at the &#34;Issue a new certificate&#34; tab and I had to click on the renew tab. This should be fixed. I guess if you don&#39;t many users will issue a new certificate and then be mystified by why their grid jobs fail when DN is different.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Frederick Luehring 153</pre></div><div class='update_description'><i onclick="document.location='20224#1395260709'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-19T20:25:09+00:00">Mar 19, 2014 08:25 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1395260709">&nbsp;</a></div><pre>Hi Alain,

You may want to take a look at this. When Kyle took a look as his cert he said that his doesn&#39;t resemble this at all. That may be indicative of an issue. I will ping you in the morning for the next course of action. I&#39;m assuming that we will probably need to issue a new cert. However, you may want to determine what caused this to happen.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='20224#1395257129'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-19T19:25:29+00:00">Mar 19, 2014 07:25 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1395257129">&nbsp;</a></div><pre>I used the renewal function to renew my DigiCert OSG grid certificate. Where my old usercert.pem has&#58;

Bag Attributes
friendlyName&#58; CN=Frederick Luehring 153,OU=People,O=Open Science Grid,DC=DigiCert-Grid,DC=com
localKeyID&#58; 54 69 6D 65 20 31 33 36 33 32 32 39 35 39 36 38 35 34
subject=/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Frederick Luehring 153
issuer=/DC=com/DC=DigiCert-Grid/O=DigiCert Grid/CN=DigiCert Grid CA-1

My new certificate has&#58;

Bag Attributes
friendlyName&#58; user276
localKeyID&#58; 54 69 6D 65 20 31 33 39 35 30 34 39 31 30 39 32 33 33
subject=/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Frederick Luehring 153
issuer=/DC=com/DC=DigiCert-Grid/O=DigiCert Grid/CN=DigiCert Grid CA-1

Notice that it has the friendly name completely messed. I am also getting an internal server error from xrdcp when I use it to copy files. I am slightly worried that this certificate is not correct.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Frederick Luehring 153</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F20224">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 20224});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
