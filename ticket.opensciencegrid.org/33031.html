<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[33031] Problem Receiving Jobs from OSG</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=33031" method="post">
<div class="page-header">
    <h3><span class="muted">33031</span> / Problem Receiving Jobs from OSG</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Ryan Wojtyla</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Ryan Wojtyla</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-04-06</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Edgar Fajardo <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/33031", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/33031?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/33031?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Problem%20Receiving%20Jobs%20from%20OSG%20ISSUE%3D33031%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='33031#1491332256'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-04T18:57:36+00:00">Apr 4, 2017 06:57 PM UTC</time><a class="anchor" name="1491332256">&nbsp;</a></div><pre>That sounds good to me. Thanks!

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Ryan Wojtyla 3538</pre></div><div class='update_description'><i onclick="document.location='33031#1491329495'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-04T18:11:35+00:00">Apr 4, 2017 06:11 PM UTC</time><a class="anchor" name="1491329495">&nbsp;</a></div><pre>Hi Ryan,

Would you like to close this ticket and open a new one if you have problems upgrading your CE?

Thanks,

Edgar

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='33031#1491309669'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-04T12:41:09+00:00">Apr 4, 2017 12:41 PM UTC</time><a class="anchor" name="1491309669">&nbsp;</a></div><pre>All,

We are receiving jobs again. There was a mysqld misconfiguration that prevented GUMS from working. The CE SAM tests, however, are still failing because I have to complete the upgrade to HTCondor-CE. Thank you all for your help!

Ryan

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Ryan Wojtyla 3538</pre></div><div class='update_description'><i onclick="document.location='33031#1491240327'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-03T17:25:27+00:00">Apr 3, 2017 05:25 PM UTC</time> by <b>Derek Weitzel</b><a class="anchor" name="1491240327">&nbsp;</a></div><pre>Hi Ryan,

I wouldn&#39;t worry too much about the fetch-crl issues.  To configure RSV to use HTCondor-CE&#39;s rather than GRAM, read this documentation&#58;
<a href='https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/ConfigureRsv#Changing_the_default_CE_type_tha' target='_blank' rel='nofollow'>https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/ConfigureRsv#Changing_the_default_CE_type_tha</a></pre></div><div class='update_description'><i onclick="document.location='33031#1490817063'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-29T19:51:03+00:00">Mar 29, 2017 07:51 PM UTC</time><a class="anchor" name="1490817063">&nbsp;</a></div><pre>Hmm something feels wrong. I do not think both should be enabled. And I guess RSV then must be reconfigured.

Brian,

What do you think?

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='33031#1490816171'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-29T19:36:11+00:00">Mar 29, 2017 07:36 PM UTC</time><a class="anchor" name="1490816171">&nbsp;</a></div><pre>Brain and Edgar,

Both the GRAM gateway and the HTCondor gateway are enabled in &#34;/etc/osg/confid.d/10-gateway.ini&#34;. When the GRAM gateway is disabled (as recommended by the linked instructions), however, the RSV tests complain that the Globus resource goes down. When the GRAM gateway is enabled again, the tests merely complain of authentication failures. Are there other configuration files that need to be changed to make Globus happy with the new HTCondor-only setup?

The problem does appear to be due to certificates. The output of &#96;fetch-crl&#96; reports some verification failures for some CRLs. Do you have any ideas as to what might be causing these failures?

Thank You,
Ryan

$ fetch-crl
ERROR verify called on empty data blob
ERROR CRL verification failed for BEGrid2008/0 (BEGrid2008)
VERBOSE(0) BEGrid2008/0&#58; 0
VERBOSE(0) BEGrid2008/0&#58; downloaded CRL lastUpdate could not be derived
ERROR CRL verification failed for FNAL-SLCS/0 (FNAL-SLCS)
VERBOSE(0) FNAL-SLCS/0&#58; CRL has nextUpdate time in the past
ERROR CRL verification failed for NECTEC/0 (NECTEC)
VERBOSE(0) NECTEC/0&#58; CRL has nextUpdate time in the past
ERROR CRL verification failed for UKeScienceCA-2A/0 (UKeScienceCA-2A)
VERBOSE(0) UKeScienceCA-2A/0&#58; downloaded CRL lastUpdate predates installed CRL,
VERBOSE(0) UKeScienceCA-2A/0&#58; and current version has sane timestamp
ERROR CRL retrieval for UniandesCA failed. 24h grace expired. CRL not updated

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Ryan Wojtyla 3538</pre></div><div class='update_description'><i onclick="document.location='33031#1490808316'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-29T17:25:16+00:00">Mar 29, 2017 05:25 PM UTC</time><a class="anchor" name="1490808316">&nbsp;</a></div><pre>Hi Ryan,

I agree with Brian. The first thing to do is for you to upgrade the GRAM (GLOBUS CE) to HTCondor-CE&#58;

<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallHTCondorCE' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallHTCondorCE</a>

And you are right I see some consumption from jobs at your site&#58;

<a href='https&#58;//gracc.opensciencegrid.org/dashboard/db/payload-jobs-summary?from=now-14d&to=now&orgId=1&var-VOName=All&var-Project=All&var-Facility=FLTECH&var-User=All&var-ExitCode=All&var-Probe=All&var-interval=1d' target='_blank' rel='nofollow'>https&#58;//gracc.opensciencegrid.org/dashboard/db/payload-jobs-summary?from=now-14d&to=now&orgId=1&var-VOName=All&var-Project=All&var-Facility=FLTECH&var-User=All&var-ExitCode=All&var-Probe=All&var-interval=1d</a>

Given the error. I think the problem might be at either old certs at your CE. Do&#58;

yum update osg-ca-certs

or fetch-crl

Run&#58; fetch-crl

Cheers,

Edgar

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='33031#1490807408'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-29T17:10:08+00:00">Mar 29, 2017 05:10 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1490807408">&nbsp;</a></div><pre>Ryan,

I&#39;m not sure if I read the thread correctly but are you still running a Globus GRAM gatekeeper? If so, I highly recommend updating to HTCondor-CE as GRAM support in the OSG ended last August.

Cheers,
Brian</pre></div><div class='update_description'><i onclick="document.location='33031#1490804935'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-29T16:28:55+00:00">Mar 29, 2017 04:28 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1490804935">&nbsp;</a></div><pre>Edgar, would you be able to help assist with this ticket?

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='33031#1490656313'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-27T23:11:53+00:00">Mar 27, 2017 11:11 PM UTC</time><a class="anchor" name="1490656313">&nbsp;</a></div><pre>According to Gratia, they were jobs from CMS, OSG, and GLOW (our normal three job submitters) and they all completed successfully.

Thanks,
Ryan

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Ryan Wojtyla 3538</pre></div><div class='update_description'><i onclick="document.location='33031#1490650995'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-27T21:43:15+00:00">Mar 27, 2017 09:43 PM UTC</time> by <b>echism</b><a class="anchor" name="1490650995">&nbsp;</a></div><pre>More specifically, did the jobs run to completion? And they were non-local?

Thanks</pre></div><div class='update_description'><i onclick="document.location='33031#1490625992'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-27T14:46:32+00:00">Mar 27, 2017 02:46 PM UTC</time><a class="anchor" name="1490625992">&nbsp;</a></div><pre>Our site, for the first time in a week or so, received a small number of jobs over the weekend even though the tests still fail.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Ryan Wojtyla 3538</pre></div><div class='update_description'><i onclick="document.location='33031#1490392065'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-24T21:47:45+00:00">Mar 24, 2017 09:47 PM UTC</time><a class="anchor" name="1490392065">&nbsp;</a></div><pre>Elizabeth,

According to the linked instructions, the rsv settings on GUMS appeared to be fine, with the exception of the permissions in the &#34;User Groups&#34; section (I changed it from &#34;read self&#34; to &#34;read all&#34;). However, I&#39;m having trouble bringing GUMS back online (the configuration is not begin read correctly), so, at the moment, I am unable to verify if that was the problem.

Thank you,
Ryan

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Ryan Wojtyla 3538</pre></div><div class='update_description'><i onclick="document.location='33031#1490297111'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-23T19:25:11+00:00">Mar 23, 2017 07:25 PM UTC</time> by <b>echism</b><a class="anchor" name="1490297111">&nbsp;</a></div><pre>Hey Ryan,

Has the DN of your certs changed? If so, re-add using the procedure I&#39;ve linked.

<a href='https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/MapServiceCertToRsvUser' target='_blank' rel='nofollow'>https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/MapServiceCertToRsvUser</a>

Thank you</pre></div><div class='update_description'><i onclick="document.location='33031#1490288551'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-23T17:02:31+00:00">Mar 23, 2017 05:02 PM UTC</time><a class="anchor" name="1490288551">&nbsp;</a></div><pre>Elizabeth,

The output of &#96;osg-system-profiler&#96; was very enlightening. All of the certificates seemed to be up to date, with the exception of a vomscert.pem certificate we didn&#39;t appear to have any support for (there was no &#34;voms&#34; directory in &#34;grid-security&#34;), which leads me to believe we were operating fine without it unless something has changed. What was alarming, however, was that our SE seemed to not be configured at all in the OSG configuration files, so I added support for the SE in &#34;/etc/osg/config.d/30-gip.ini&#34;. I also saw that &#34;osg-configure.log&#34; was complaining that the &#39;worker_node_temp&#39; variable in &#34;10-storage.ini&#34; was not set, so I edited some variables in that file that were incorrect. I verified the changes I made with &#96;osg-configure -v&#96; and saved those changes with &#96;osg-configure -c&#96;.

I also realized that I had incorrectly obtained the site&#39;s new hostcerts (which recently expired). So I issued myself proper ones and distributed the certificates throughout our site, and restarted the appropriate services.

Unfortunately, nothing seems to have changed; RSV tests still fail with the same GSS authentication errors. Can you provide any insight?

Thank you,
Ryan

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Ryan Wojtyla 3538</pre></div><div class='update_description'><i onclick="document.location='33031#1490120941'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-21T18:29:01+00:00">Mar 21, 2017 06:29 PM UTC</time> by <b>echism</b><a class="anchor" name="1490120941">&nbsp;</a></div><pre>Hey Ryan,

You can run osg-system-profiler and get a long printout of everything osg, but it&#39;s probably easier and quicker to just go to /etc/grid-security and look. RSV also does this, but RSV is probably something you want to do after the simple stuff.

If you go the osg-system-profiler route, search for &#34;Certificate&#58;&#34; in the output file. It will tell you locations and expiries.

Thanks</pre></div><div class='update_description'><i onclick="document.location='33031#1490018995'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T14:09:55+00:00">Mar 20, 2017 02:09 PM UTC</time><a class="anchor" name="1490018995">&nbsp;</a></div><pre>Elizabeth,

I suspect the issue may be due to expired certificates. Do you know of any tools that can assist me in locating, and checking the status of, all of the required OSG certificates?

Thank you,
Ryan

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Ryan Wojtyla 3538</pre></div><div class='update_description'><i onclick="document.location='33031#1489780467'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-17T19:54:27+00:00">Mar 17, 2017 07:54 PM UTC</time> by <b>echism</b><a class="anchor" name="1489780467">&nbsp;</a></div><pre>FIT,

Do you have an update?

Thank you</pre></div><div class='update_description'><i onclick="document.location='33031#1489608659'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-15T20:10:59+00:00">Mar 15, 2017 08:10 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1489608659">&nbsp;</a></div><pre>Site&#58; T3_US_FIT
CE&#58; uscms1.fltech-grid3.fit.edu
SE&#58; uscms1-se.fltech-grid3.fit.edu

On January 31, the &#34;Flavor&#34; of the CE SAM tests had changed from &#34;CE&#34; to &#34;GLOBUS&#34;, and all of the SAM tests except for 6, 9, 13 (all CE job submission), 5, 12, and 16 disappeared; they were no longer viewable on the CMS dashboard. However, even with most of the SAM tests gone, and all but 5 (green) and 16 (warning) critical, jobs were still running and everything appeared to be functioning normally, so while it was an issue, I did not treat it like an emergency.

CMS Dashboard&#58; <a href='http&#58;//wlcg-sam-cms.cern.ch/templates/ember/#/plot?group=AllGroups&profile=CMS_CRITICAL_FULL&sites=T3_US_FIT' target='_blank' rel='nofollow'>http&#58;//wlcg-sam-cms.cern.ch/templates/ember/#/plot?group=AllGroups&profile=CMS_CRITICAL_FULL&sites=T3_US_FIT</a>

On March 5, the three CE SAM tests went into warning, the CE status became unknown, and jobs stopped running; they had all become idle.

I am getting GSS authentication failures in globus-gatekeeper.log whenever a connection is attempted&#58;

TIME&#58; Wed Mar 15 16&#58;03&#58;29 2017
PID&#58; 10867 -- Notice&#58; 6&#58; Got connection &#58;&#58;ffff&#58;10.1.255.233 at Wed Mar 15 16&#58;03&#58;29 2017

GSS authentication failure
GSS Major Status&#58; General failure
GSS Minor Status Error Chain&#58;
globus_gsi_gssapi&#58; Error during delegation&#58; Delegation protocol violation
Failure&#58; GSS failed Major&#58;000d0000 Minor&#58;00000005 Token&#58;00000000

TIME&#58; Wed Mar 15 16&#58;03&#58;29 2017
PID&#58; 10867 -- Failure&#58; GSS failed Major&#58;000d0000 Minor&#58;00000005 Token&#58;00000000

I can produce this error by running&#58;
$ openssl s_client -showcerts -cert /etc/grid-security/hostcert.pem -key /etc/grid-security/hostkey.pem -CApath /etc/grid-security/certificates/ -debug -connect uscms1.fltech-grid3.fit.edu&#58;2119
from the SE.

by Ryan Wojtyla (guest)</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F33031">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 33031});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
