<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[21949] transfer to Bristol</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=21949" method="post">
<div class="page-header">
    <h3><span class="muted">21949</span> / transfer to Bristol</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Monica Vazquez</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Monica Vazquez Acosta</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-07-29</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000429927">INC000000429927</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=21949", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/21949?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/21949?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20transfer%20to%20Bristol%20ISSUE%3D21949%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='21949#1406661162'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-29T19:12:42+00:00">Jul 29, 2014 07:12 PM UTC</time> by <b>echism</b><a class="anchor" name="1406661162">&nbsp;</a></div><pre>I&#39;m unlinking and closing the OSG tickets.</pre></div><div class='update_description'><i onclick="document.location='21949#1406656452'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-29T17:54:12+00:00">Jul 29, 2014 05:54 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406656452">&nbsp;</a></div><pre>[GOC-TX Warning]
Source GGUS Ticket ID&#58; 106554 specifies affected site name of  UKI-SOUTHGRID-BRIS-HEP which does not exist in OIM(resource/name) and it is ignored.
-- by Monica Vazquez Acosta at Tue Jul 29 17&#58;53&#58;41 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106554' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106554</a></pre></div><div class='update_description'><i onclick="document.location='21949#1406656390'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-29T17:53:10+00:00">Jul 29, 2014 05:53 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406656390">&nbsp;</a></div><pre>I have total faith that the transfers from FNAL_Disk to good sites work, I see that happening all the time for other UK sites. But our Bristol friends want to blame the failed transfers on the FNAL side, so I went and checked the quality. If you say things are good on your side, then Bristol needs to keep debugging.
Thanks,
Monica

-- by Monica Vazquez Acosta at Tue Jul 29 17&#58;52&#58;23 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106554' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106554</a></pre></div><div class='update_description'><i onclick="document.location='21949#1406646246'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-29T15:04:06+00:00">Jul 29, 2014 03:04 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406646246">&nbsp;</a></div><pre>Hi Monica -- I think you guys are convolving a few issues.

Don&#39;t read too much into that quality map for T1_US_FNAL_Disk. The demand is low and quite a few of the destination sites have problems; for the others we did have two storage pools with issues (out of hundreds) that I just restarted.

I suspect nearly all of the files that appear to be stuck routing on T1_US_FNAL_Buffer are ones that were actually not staged (or were unpinned and purged) from Buffer and need to be restaged from MSS.

-- by Burt Holzman at Tue Jul 29 15&#58;03&#58;17 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106554' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106554</a></pre></div><div class='update_description'><i onclick="document.location='21949#1406634491'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-29T11:48:11+00:00">Jul 29, 2014 11:48 AM UTC</time> by <b>catalind@....</b><a class="anchor" name="1406634491">&nbsp;</a></div><pre>Hi,

The link in the ticket shows 0 routed files and &#34;No results available.” … the following page also is empty&#58;

<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;TransferDetails?tofilter=.*Bristol&andor=and&fromfilter=

Were the transfer completed though?

On Jul 29, 2014, at 5&#58;45 AM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='21949#1406630751'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-29T10:45:51+00:00">Jul 29, 2014 10:45 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406630751">&nbsp;</a></div><pre>Hi,
There is a 6 day backlog transferring from FNAL to Bristol&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Routing?tofilter=T2_UK_SGrid_Bristol&fromfilter=.*&priority=any&blockfilter=.*

Can you please take a look?

Cheers,
Monica

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106554' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106554</a>

[Ticket History]
Subject&#58; transfer to Bristol
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-transfer-team@....
-- by Monica Vazquez Acosta at Sun Jun 29 19&#58;34&#58;30 UTC 2014

Has to be taken care of by Dr Kreczko, s/b back fro CERN this week

-- by Winnie Lacesso at Mon Jun 30 09&#58;26&#58;15 UTC 2014

Minor update&#58; assuming I&#39;m right & it&#39;s just the bc-mail update needing pending, there are known fixes required after installing the new version.
It doesn&#39;t seem prudent to do any of that Friday afternoon. Regards, site-admin (tired)

-- by Winnie Lacesso at Fri Jul 04 14&#58;06&#58;16 UTC 2014

Whups - updated wrong ticket. That s/b on another ticket, sorry.

-- by Winnie Lacesso at Fri Jul 04 14&#58;07&#58;38 UTC 2014

Hi,

The underlying issue has been solved. For some reason our StoRM backend was convinced that there is no free space left for CMS although we still have 33 TB free.
Winnie has fixed this now and the CMS space token looks all-right&#58;
<div id='show_1478671179' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1478671179'>
lcg-stmd -be lcgse02.phy.bris.ac.uk&#58;8444 -s CMS_TOKEN
+ Space Token&#58; 3E62C88C-4801-6E24-89DE-AB2492CCC59B
- Owner&#58; /DC=it/DC=infngrid/OU=Services/CN=storm
- Total Size&#58; 128025530204160
- Guaranteed Size&#58; 128025530204160
- Unused Size&#58; 38269091100951
- Assigned Lifetime&#58; -1
- Left Lifetime&#58; -1
- Retention Policy&#58; UNKNOWN
- Access Latency&#58; UNKNOWN

I have not seen any recent errors (<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;ErrorInfo?tofilter=.*Bristol&fromfilter=.*&report_code=.*&xfer_code=.*&to_pfn=.*&from_pfn=.*&log_detail=.*&log_validate=.*&.submit=Update#) so hopefully the transfer will pick up soon.

Cheers,
Luke

-- by Lukasz Kreczko at Tue Jul 08 14&#58;03&#58;41 UTC 2014

Hi Luke,
The problem is that PhEDEx stops retrying after a while. One has to suspend the transfers -&#62; wait 30 mins -&#62; unsuspend.
I will do it for you.
Ciao,
Monica

-- by Monica Vazquez Acosta at Tue Jul 08 14&#58;15&#58;49 UTC 2014

Hi Monica,

Thanks, I did not know.

Cheers,
Luke

-- by Lukasz Kreczko at Tue Jul 08 14&#58;34&#58;33 UTC 2014

Hi,
The kick did not work. It retried again a few times without success&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Routing?tofilter=T2_UK_SGrid_Bristol&fromfilter=.*&priority=any&blockfilter=.*

Transfers are timing out&#58;
TRANSFER gfal gridftp internal operation timeout, operation canceled, operation timeout

Cheers,
Monica

-- by Monica Vazquez Acosta at Wed Jul 09 09&#58;27&#58;29 UTC 2014

Good morning,

Just got the email about the ticket change. A 6 day delay? Anyhow, it seems that the NFS mount on the RAL phedex box got unmounted once again. Surely this is not helping. I will contact Chris Brew, as this is the second time this happened within a week.
Debug transfers before this incident (yesterday 20&#58;00 BST) look healthy.

Do you recon that it would be better to invalidate the transfer and start from fresh?

Of course, only once the phedex box is working again.

Cheers,
Luke

-- by Lukasz Kreczko at Tue Jul 15 07&#58;21&#58;38 UTC 2014

I am ready to suspend and re-start the transfer. Anyway, please re-start your PhEDEx agents first and let me know when you are ready.
Thanks,
Monica

-- by Monica Vazquez Acosta at Tue Jul 15 08&#58;26&#58;56 UTC 2014

Hi,

The agents are restarted and seem operational. Please give it a go.

Cheers,
Luke

-- by Lukasz Kreczko at Tue Jul 15 08&#58;33&#58;24 UTC 2014

One transfer try so far&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Routing?tofilter=T2_UK_SGrid_Bristol&fromfilter=.*&priority=any&blockfilter=.*

Monica

-- by Monica Vazquez Acosta at Tue Jul 15 12&#58;02&#58;17 UTC 2014

Transfers are happening&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;RatePlots?graph=quantity_rates&entity=dest&src_filter=&dest_filter=T2_UK_SGrid_Bristol&no_mss=true&period=l12h&upto=

One block is complete&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Data&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Data&#58</a>;&#58;Subscriptions#state=create_since%3D1402834119%3Bnode%3D25%3Brequest%3D417425

And no recent errors (last one from 4 hours ago)&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;ErrorInfo?tofilter=.*Bristol&fromfilter=.*&report_code=.*&xfer_code=.*&to_pfn=.*&from_pfn=.*&log_detail=.*&log_validate=.*&.submit=Update#

Looks good, let&#39;s hope it continues this way.

Luke

-- by Lukasz Kreczko at Tue Jul 15 12&#58;09&#58;27 UTC 2014

Hi Luke,

It seems problem hasn&#39;t been resolved yet. CRAB3 jobs running at Bristol also give &#34;not enough space&#34; error&#58;

<a href='https&#58;//ggus.eu/?mode=ticket_info&ticket_id=107013' target='_blank' rel='nofollow'>https&#58;//ggus.eu/?mode=ticket_info&ticket_id=107013</a>

Regards,
Meric

-- by Meric Taze at Fri Jul 18 12&#58;10&#58;31 UTC 2014

Hi,

I am pretty sure I&#39;ve updated this ticket last week, but it seems I did not press the submit button.
Let&#39;s try and put thing together from memory.

First of all, there are currently no recent errors for the Bristol production instance&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;ErrorInfo?tofilter=.*Bristol&fromfilter=.*&report_code=.*&xfer_code=.*&to_pfn=.*&from_pfn=.*&log_detail=.*&log_validate=.*&.submit=Update#

However, the transfers are still not succeeding&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Routing?tofilter=T2_UK_SGrid_Bristol&fromfilter=.*&priority=any&blockfilter=.*&.submit=Update#

Looking at the rates, we are nowhere near saturation on the network&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;RatePlots?graph=quantity_rates&entity=dest&src_filter=&dest_filter=T2_UK_SGrid_Bristol&no_mss=true&period=l12h&upto=&.submit=Update

And slowly but surely the transfer IS completing&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Data&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Data&#58</a>;&#58;Subscriptions#state=create_since%3D1403360781%3Bnode%3D25%3Brequest%3D417425

So let&#39;s dig deeper&#58;
Last week I&#39;ve found some transfers that timed out. I cannot see them now.

Instead I can see on the phedex box&#58;
httpg&#58;//cmssrmdisk.fnal.gov&#58;8443/srm/managerv2&#58; CGSI-gSOAP running on lcgfts01.gridpp.rl.ac.uk reports could not open connection to cmssrmdisk.fnal.gov )

It seems there are problems contacting one of FNAL&#39;s servers. So I tried to copy one of the files by hand&#58;
srmcp <a href='srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/11/store/data/Run2011A/SingleElectron/AOD/12Oct2013-v1/20000/968799B5-A23D-E311-9220-003048F0E1F6.root' target='_blank' rel='nofollow'>srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/11/store/data/Run2011A/SingleElectron/AOD/12Oct2013-v1/20000/968799B5-A23D-E311-9220-003048F0E1F6.root</a> file&#58;///storage/TopQuarkGroup/test/trasnfer-test.root -debug -2
[...]
RMClientV2 &#58; connecting to srm at httpg&#58;//cmssrmtemp.fnal.gov&#58;8443/srm/managerv2
Mon Jul 21 15&#58;32&#58;38 BST 2014&#58; calling srmPrepareToGet
SRMClientV2 &#58; srmPrepareToGet , contacting service httpg&#58;//cmssrmtemp.fnal.gov&#58;8443/srm/managerv2
copy_jobs is empty
SRMClientV2 &#58; srmPrepareToGet&#58; try # 0 failed with error
SRMClientV2 &#58; ; nested exception is&#58;
java.lang.NullPointerException
SRMClientV2 &#58; srmPrepareToGet&#58; try again
SRMClientV2 &#58; sleeping for 10000 milliseconds before retrying

And it is doing that in an infinite loop. So what is going on? It seems like there is something wrong between FNAL and RAL/Bristol.

Cheers,
Luke

-- by Lukasz Kreczko at Mon Jul 21 14&#58;40&#58;22 UTC 2014

Hi Luke,

Please suspend and unsuspend yourself one of the transfers so you can debug your site. At some point PhEDEx will stop trying.
You might also want to subscribe something from RAL to exclude a particular problem with FNAL.

Timeouts are usually related to network problems ?

Monica

-- by Monica Vazquez Acosta at Mon Jul 21 14&#58;51&#58;33 UTC 2014

Hi Monica,

I&#39;ve tried suspending the transfers on
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Data&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Data&#58</a>;&#58;Subscriptions#state=create_since%3D1403360781%3Bnode%3D25%3Brequest%3D417425
but the change does not seem permanent (when I refresh the page it is gone).
Is there another way to suspend a transfer?

I&#39;ve started a new transfer that comes from RAL/FNAL/T3_KR_KISTI as it would be useful not only for the transfer test&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Data&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Data&#58</a>;&#58;Subscriptions#state=create_since%3D1403363108%3Bnode%3D25%3Brequest%3D419581
It would be interesting to see if the files from RAL fail at all (it should be a nice mixture).

Cheers,
Luke

-- by Lukasz Kreczko at Mon Jul 21 15&#58;06&#58;53 UTC 2014

Although it is not showing correctly on the subscription page the suspension/unsuspension worked&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Routing?tofilter=T2_UK_SGrid_Bristol&fromfilter=.*&priority=any&blockfilter=.*&.submit=Update#

-- by Lukasz Kreczko at Mon Jul 21 16&#58;37&#58;42 UTC 2014

The test transfer completed without problems&#58;

with moderate transfer rates from RAL&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;RatePlots?graph=quantity_rates&entity=dest&src_filter=T2_UK_*&dest_filter=T2_UK_SGrid_Bristol&no_mss=true&period=l24h&upto=&.submit=Update
The total rate went up to 20 MB/s&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;RatePlots?graph=quantity_rates&entity=dest&src_filter=&dest_filter=T2_UK_SGrid_Bristol&no_mss=true&period=l24h&upto=

So what else is going on. I&#39;ve checked the transfer rates on Debug, and they are quite high&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/debug/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/debug/Activity&#58</a>;&#58;RatePlots?graph=quantity_rates&entity=dest&src_filter=&dest_filter=T2_UK_SGrid_Bristol&no_mss=true&period=l24h&upto=&.submit=Update
Since there are many transfers going on, is Debug interfering with Production?
I wish I could correlate events between the logs fro production and debug.

At the moment production works with the following parameters&#58;
-batch-files           20 #number of files per transfer batch (SRM, FTS; default&#58; 30)
-max-active-files      10 #limit to the total number of files allowed to be in the &#34;active&#34; state
-link-pending-files    10 #limit to the number of files allowed to be in the &#34;pending&#34; state per link
-jobs                  20 #maximum number of concurrent transfer jobs (default&#58; SRM=5; FTS=0 (infinite))

For Debug all these values are 5, hence I would expect always lower rated for debug (unless production is not busy).
Either it is just a slow transfer from FNAL (connection itself and/or number of connections).

So how it looks for ALL transfers from FNAL disk?
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Routing?tofilter=.*&fromfilter=T1_US_FNAL_Buffer&priority=any&blockfilter=.*&.submit=Update#
It is difficult to come to a definite conclusion, but most transfers look stuck. I am still reluctant to say that it is a problem with FNAL as the same dataset transferred without problems to T2 IPFN.

Any ideas how to proceed?

-- by Lukasz Kreczko at Tue Jul 22 08&#58;58&#58;27 UTC 2014

Hi

Has there been any further progress with the ticket?

Thanks

Sam Worley

-- by Sam Worley at Mon Jul 28 15&#58;01&#58;33 UTC 2014

The ticket ended with a question back to the submitter but the status was not changed to &#39;waiting for reply&#39;. I am updating the status.

Jeremy

-- by Jeremy Coles at Mon Jul 28 23&#58;06&#58;57 UTC 2014

Changed status to Waiting for Reply

-- by Winnie Lacesso at Tue Jul 29 07&#58;53&#58;14 UTC 2014

The transfer has completed&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Data&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Data&#58</a>;&#58;Subscriptions#state=create_since%3D1403425823%3Bnode%3D25%3Brequest%3D417425

There are still problems from FNAL&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Routing?tofilter=.*&fromfilter=T1_US_FNAL_Buffer&priority=any&blockfilter=.*&.submit=Update#
but this is not related to us. Since the test transfer from RAL went perfectly, I can only assume there is something wrong between Bristol &#60;-&#62; FNAL or FNAL (tape) is overloaded.

Cheers,
Luke

-- by Lukasz Kreczko at Tue Jul 29 09&#58;31&#58;41 UTC 2014

The transfer quality from FNAL_Disk is terrible&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=dest&src_filter=T1_US_FNAL_Disk&dest_filter=&no_mss=true&period=l96h&upto=&.submit=Update

Monica

-- by Monica Vazquez Acosta at Tue Jul 29 10&#58;45&#58;39 UTC 2014
</div><script type='text/javascript'>
        $('#show_1478671179').click(function() {
            $('#detail_1478671179').slideDown("normal");
            $('#show_1478671179').hide();
            $('#hide_1478671179').show();
        });
        $('#hide_1478671179').click(function() {
            $('#detail_1478671179').slideUp();
            $('#hide_1478671179').hide();
            $('#show_1478671179').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F21949">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 21949});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
