<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[31257] Update perfSONAR event-types that the OSG RSV probes will gather</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=31257" method="post">
<div class="page-header">
    <h3><span class="muted">31257</span> / Update perfSONAR event-types that the OSG RSV probes will gather</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Shawn McKee</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Shawn McKee</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Scott to update production (psds0) on next update window</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-02-28</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Thomas Lee <span class="muted"> / OSG Operations Infrastructure</span></div><div class="assignee" style="width: 60%">Scott Teige <span class="muted"> / OSG Operations Infrastructure</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Edgar Fajardo <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/31257", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/31257?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/31257?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Update%20perfSONAR%20event-types%20that%20the%20OSG%20RSV%20probes%20will%20gather%20ISSUE%3D31257%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='31257#1489509373'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-14T16:36:13+00:00">Mar 14, 2017 04:36 PM UTC</time> by <b>Tim Theisen</b><a class="anchor" name="1489509373">&nbsp;</a></div><pre>Thank you, will close the ticket.</pre></div><div class='update_description'><i onclick="document.location='31257#1489505827'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-14T15:37:07+00:00">Mar 14, 2017 03:37 PM UTC</time><a class="anchor" name="1489505827">&nbsp;</a></div><pre>I believe Edgar already updated the (previous) production instances so we can close this ticket.

Thanks,

Shawn

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mckee/CN=500323/CN=Shawn Mc Kee</pre></div><div class='update_description'><i onclick="document.location='31257#1489505825'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-14T15:37:05+00:00">Mar 14, 2017 03:37 PM UTC</time><a class="anchor" name="1489505825">&nbsp;</a></div><pre>I believe Edgar already updated the (previous) production instances so we can close this ticket.

Thanks,

Shawn

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mckee/CN=500323/CN=Shawn Mc Kee</pre></div><div class='update_description'><i onclick="document.location='31257#1489504193'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-14T15:09:53+00:00">Mar 14, 2017 03:09 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1489504193">&nbsp;</a></div><pre>All perfsonar components have been temporarily changed to &#34;development status&#34;, there is currently no need for me to be involved in this.
Shawn, if you&#39;d like this done, feel free to proceed at any time.
S</pre></div><div class='update_description'><i onclick="document.location='31257#1489502284'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-14T14:38:04+00:00">Mar 14, 2017 02:38 PM UTC</time> by <b>Tim Theisen</b><a class="anchor" name="1489502284">&nbsp;</a></div><pre>Hey Scott,

Did this get done? Can we close this ticket?</pre></div><div class='update_description'><i onclick="document.location='31257#1487079550'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-14T13:39:10+00:00">Feb 14, 2017 01:39 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1487079550">&nbsp;</a></div><pre>Already on my schedule for next cycle.
S

Scott Teige PhD
Grid Operations Center Manager
Indiana University Research Technologies
steige@....
Office&#58; +1 812 856 7331

On Feb 13, 2017, at 12&#58;24 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='31257#1487006642'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-13T17:24:02+00:00">Feb 13, 2017 05:24 PM UTC</time><a class="anchor" name="1487006642">&nbsp;</a></div><pre>Hi Marian,

Great news.

Scott,

This new version of rsv-perfsonar should be released on tomorrow&#39;s OSG Feb release. Could you update production on psds0 in the next production update window please?

Thanks,

Edgar

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='31257#1486983154'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-13T10:52:34+00:00">Feb 13, 2017 10:52 AM UTC</time><a class="anchor" name="1486983154">&nbsp;</a></div><pre>Hi All,
sorry for delay, I had a look at ITB and it looks good to me, there are new topics/types being published, so it works as expected. I think it&#39;s ok to go production at the next possible date.

Marian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mbabik/CN=555091/CN=Marian Babik</pre></div><div class='update_description'><i onclick="document.location='31257#1486754986'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-10T19:29:46+00:00">Feb 10, 2017 07:29 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1486754986">&nbsp;</a></div><pre>Hello All,

We need verification that the change worked as expected.
I will schedule this change for the release of 28/Feb along with any other
changes that are implemented and documented before 21/Feb (the next ITB freeze)

S</pre></div><div class='update_description'><i onclick="document.location='31257#1486750253'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-10T18:10:53+00:00">Feb 10, 2017 06:10 PM UTC</time><a class="anchor" name="1486750253">&nbsp;</a></div><pre>Hi Lionel, Marian,

I think we should be publishing all the event types (if present).   Do you see any problems on the ActiveMQ instance at CERN?

If not, we should be good to close this.  Thanks,

Shawn

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mckee/CN=500323/CN=Shawn Mc Kee</pre></div><div class='update_description'><i onclick="document.location='31257#1486739304'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-10T15:08:24+00:00">Feb 10, 2017 03:08 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1486739304">&nbsp;</a></div><pre>Marian,

Have you seen Edgar&#39;s message below? How do things look on your end?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31257#1486413238'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-06T20:33:58+00:00">Feb 6, 2017 08:33 PM UTC</time><a class="anchor" name="1486413238">&nbsp;</a></div><pre>Well it looks from ITB the cron&#58;

/etc/cron.d/bandaid

is removed. Which is good. ANd I see things to work as supposed to. So I guess now is only up to Marian to tell us if on the other side of the MQ the right types are being sent.

Thanks,

Edgar OSG Software Support

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='31257#1486047556'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-02T14:59:16+00:00">Feb 2, 2017 02:59 PM UTC</time><a class="anchor" name="1486047556">&nbsp;</a></div><pre>Thanks Scott,

Assuming we see no problems on the ITB it should be setup for use on psds0 (the perfSONAR RSV probe host for production) on Tuesday, Feb 14th.
Edgar, Marian and I need to watch the ITB instance to verify it is OK.

Thanks,

Shawn

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mckee/CN=500323/CN=Shawn Mc Kee</pre></div><div class='update_description'><i onclick="document.location='31257#1486043675'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-02T13:54:35+00:00">Feb 2, 2017 01:54 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1486043675">&nbsp;</a></div><pre>Done. Please advise if you&#39;d like this run on one or more of
psds0, psds1 or psds2 on production Tuesday (14/Feb)

S</pre></div><div class='update_description'><i onclick="document.location='31257#1485880826'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-31T16:40:26+00:00">Jan 31, 2017 04:40 PM UTC</time><a class="anchor" name="1485880826">&nbsp;</a></div><pre>In&#58;

psds-itb.grid.iu.edu

Thanks,

Edgar

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='31257#1485868231'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-31T13:10:31+00:00">Jan 31, 2017 01:10 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1485868231">&nbsp;</a></div><pre>on what machine(s) do you want us to do this?</pre></div><div class='update_description'><i onclick="document.location='31257#1485460208'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-26T19:50:08+00:00">Jan 26, 2017 07:50 PM UTC</time><a class="anchor" name="1485460208">&nbsp;</a></div><pre>Hi Tom,

The new version of rsv-perfsonar is on osg-testing. So in the next ITB upgdrade window could you run&#58;

yum update rsv-perfsonar --enablerepo=osg-testing

And update the following file&#58;

/etc/rsv/metrics/org.osg.general.perfsonar-simple.conf

And add the following knobs&#58;

allowedMQEvents = ntp-delay,ntp-dispersion,ntp-jitter,ntp-offset,ntp-stratum,time-error-estimates,packet-duplicates,packet-reorders,packet-loss-rate,packet-trace,packet-retransmits,throughput,throughput-subintervals,path-mtu,failures,packet-count-sent,packet-count-lost,histogram-owdelay,histogram-ttl
mq-max-message-size = 10000

And then run service rsv restart

Thanks,

Edgar
OSG Software Support

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='31257#1485383099'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-25T22:24:59+00:00">Jan 25, 2017 10:24 PM UTC</time><a class="anchor" name="1485383099">&nbsp;</a></div><pre>HI Vince,

Actually the software is already in the osg-development repo&#58;

<a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2574' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2574</a>

So I am just waiting to try move it to osg-testing and then test it in the next ITB update window at the GOC.

Edgar

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='31257#1485382880'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-25T22:21:20+00:00">Jan 25, 2017 10:21 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1485382880">&nbsp;</a></div><pre>Hi Edgar,

Is there a timeline for publishing/adding the metrics below?  Please advise.

Thank you,
Vince</pre></div><div class='update_description'><i onclick="document.location='31257#1482937409'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-28T15:03:29+00:00">Dec 28, 2016 03:03 PM UTC</time><a class="anchor" name="1482937409">&nbsp;</a></div><pre>I believe the action item is for Edgar to support publishing all the  possible metrics listed in the ticket below.  The  message queue at CERN should be able to support them all at this point so we can proceed with enabling it in the perfSONAR RSV probe.

Thanks,

Shawn

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mckee/CN=500323/CN=Shawn Mc Kee</pre></div><div class='update_description'><i onclick="document.location='31257#1482936176'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-28T14:42:56+00:00">Dec 28, 2016 02:42 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1482936176">&nbsp;</a></div><pre>Good morning,

Checking in on the status of this request.  If there is any action required by the GOC please advise and we will make whatever changes are necessary.

Thank you,
Vince</pre></div><div class='update_description'><i onclick="document.location='31257#1481624011'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-13T10:13:31+00:00">Dec 13, 2016 10:13 AM UTC</time><a class="anchor" name="1481624011">&nbsp;</a></div><pre>Just to let you know that Lionel has re-configured all CERN brokers to accept the event types listed in my previous comment. So wrt. brokers, changes can be tested and deployed to production anytime.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mbabik/CN=555091/CN=Marian Babik</pre></div><div class='update_description'><i onclick="document.location='31257#1480697044'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-02T16:44:04+00:00">Dec 2, 2016 04:44 PM UTC</time><a class="anchor" name="1480697044">&nbsp;</a></div><pre>Hi Marian, Shawn,

I will make it a parameter.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='31257#1480684139'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-02T13:08:59+00:00">Dec 2, 2016 01:08 PM UTC</time><a class="anchor" name="1480684139">&nbsp;</a></div><pre>Hi Everyone,

Thanks Edgar.  Regarding Edgar&#39;s patch, Scott had provided the file size counts previously in /usr/local/rsv-perfsonar

It contained 1.89 million files, of which&#58;
23 larger than 100 MB
113 larger than 10 MB
492 larger than 1 MB

As I understand the stompctl  setup, it will choke on any message bigger than 100 MB.   The current code has 10MB but it would be better if this line&#58;
+        size_limit = 10000000
Was a parameter we could change rather than hard-coded.   My worry is that there may be occasional legitimate reasons for larger messages and I don&#39;t want to loss data if we can help it.   As noted Marian and I discussed 30MB as a max and I would feel more comfortable using the larger value.    If it were a parameter we could change it via configuration.

As Marian noted we should also allow all the event types he listed.   Again we don&#39;t know how the testing will evolve and we want to be able to support the range of perfSONAR metrics.

Once this change is in place we can remove the bandaid Scot provided in this ticket&#58;

&#34;<a href='31964' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/31964</a>

Description&#58;
files larger than 10 MB are now automatically deleted once per hour at 40 minutes after the hour.
the simplevisor is restarted automatically at 45 minutes after every hour.

/etc/cron.d/bandaid is the crontab entry that handles this.&#34;

Thanks,

Shawn

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mckee/CN=500323/CN=Shawn Mc Kee</pre></div><div class='update_description'><i onclick="document.location='31257#1480673054'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-02T10:04:14+00:00">Dec 2, 2016 10:04 AM UTC</time><a class="anchor" name="1480673054">&nbsp;</a></div><pre>Looks good to me, concerning message limit, Shawn could you please comment what exact limit we want to have ? The proposed patch has 10MB limit on the total size of the python object representing the message.

Concerning list of topics, following our discussion with Shawn, we want to add some additional event-types to support e.g. pinger, but we need to see how much workload this is going to generate.

So the proposed final list is as below, i.e. all event-types except for those with subintervals which I think we won&#39;t need (e.g. packet-retransmits-subintervals)&#58;
ntp-delay
ntp-dispersion
ntp-jitter
ntp-offset
ntp-stratum
time-error-estimates
packet-duplicates
packet-reorders
packet-loss-rate
packet-trace
packet-retransmits
throughput
throughput-subintervals
path-mtu
failures
packet-count-sent
packet-count-lost
histogram-owdelay
histogram-ttl
histogram-ttl-reverse
histogram-rtt
packet-loss-rate-bidir
packet-count-lost-bidir
packet-reorders-bidir
packet-duplicates-bidir
streams-packet-retransmits
streams-throughput

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mbabik/CN=555091/CN=Marian Babik</pre></div><div class='update_description'><i onclick="document.location='31257#1480634032'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-01T23:13:52+00:00">Dec 1, 2016 11:13 PM UTC</time><a class="anchor" name="1480634032">&nbsp;</a></div><pre>I created a pull request&#58;

<a href='https&#58;//github.com/opensciencegrid/rsv-perfsonar/pull/6' target='_blank' rel='nofollow'>https&#58;//github.com/opensciencegrid/rsv-perfsonar/pull/6</a>

Can you review it? I tested it and it works fine. And also fixing the message limit problem.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='31257#1479198354'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-15T08:25:54+00:00">Nov 15, 2016 08:25 AM UTC</time><a class="anchor" name="1479198354">&nbsp;</a></div><pre><a href='https&#58;//github.com/opensciencegrid/rsv-perfsonar/issues/5' target='_blank' rel='nofollow'>https&#58;//github.com/opensciencegrid/rsv-perfsonar/issues/5</a>

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mbabik/CN=555091/CN=Marian Babik</pre></div><div class='update_description'><i onclick="document.location='31257#1479164270'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-14T22:57:50+00:00">Nov 14, 2016 10:57 PM UTC</time><a class="anchor" name="1479164270">&nbsp;</a></div><pre>Fair enough. Marian can you open a github issue about it and I will try to find sometime to schedule it.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='31257#1478621031'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-08T16:03:51+00:00">Nov 8, 2016 04:03 PM UTC</time><a class="anchor" name="1478621031">&nbsp;</a></div><pre>I think the best approach would be to change the code such that if  --mq-events argument is not defined, we&#39;ll be using the same events as for the datastore (and we start with the list I proposed below). To explain, I&#39;m fine with merging, but we should keep some fallback mechanism since whether or not we can have a common set of event types depends on how much traffic the events defined are going to generate, which is not easy to predict as it depends on size of meshes, frequency of testing, etc.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mbabik/CN=555091/CN=Marian Babik</pre></div><div class='update_description'><i onclick="document.location='31257#1478620355'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-08T15:52:35+00:00">Nov 8, 2016 03:52 PM UTC</time><a class="anchor" name="1478620355">&nbsp;</a></div><pre>Hi Marian,

Well it is fine for me. But maybe I should have asked my question in a better way&#58;

Are we ok with changing the code so both the CERN AMQ and the datastore use the data types defined in the configuration and use the same set?

If yes then I will have to make the code change and create a new version.

Cheers,

Edgar

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='31257#1478595846'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-08T09:04:06+00:00">Nov 8, 2016 09:04 AM UTC</time><a class="anchor" name="1478595846">&nbsp;</a></div><pre>I propose that we merge the two and keep the following event types (removing all *bidir and streams*)&#58;
ntp-delay
ntp-dispersion
ntp-jitter
ntp-offset
ntp-stratum
time-error-estimates
packet-duplicates
packet-reorders
packet-loss-rate
packet-trace
packet-retransmits
throughput
throughput-subintervals
path-mtu
failures
packet-count-sent
packet-count-lost
histogram-owdelay
histogram-ttl

Please let me know if this is ok and I will ask Lionel to update the broker configurations.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mbabik/CN=555091/CN=Marian Babik</pre></div><div class='update_description'><i onclick="document.location='31257#1478559248'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-07T22:54:08+00:00">Nov 7, 2016 10:54 PM UTC</time><a class="anchor" name="1478559248">&nbsp;</a></div><pre>Hi Marian,

Should we merge the event types for both the CERN broker and the data storage?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='31257#1478014781'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-01T15:39:41+00:00">Nov 1, 2016 03:39 PM UTC</time><a class="anchor" name="1478014781">&nbsp;</a></div><pre>I think we&#39;re not measuring bidir metrics and we also don&#39;t run throughput tests with multiple streams (streams-*), so I would guess those are empty anyway. Would be good to double-check, we already have packet-loss-rate-bidir, packet-count-lost-bidir in the list, are they getting populated in psds ?

Note that before making any changes in OSG, we&#39;ll need to configure new topics at CERN as otherwise messages will get rejected (there is authorization per topic and we have a topic per event type).

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mbabik/CN=555091/CN=Marian Babik</pre></div><div class='update_description'><i onclick="document.location='31257#1478012721'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-01T15:05:21+00:00">Nov 1, 2016 03:05 PM UTC</time><a class="anchor" name="1478012721">&nbsp;</a></div><pre>Hi Everyone,

I propose we add the following types to our existing list of perfSONAR metrics we send to the message bus&#58;

ntp-delay
ntp-dispersion
ntp-jitter
ntp-offset
ntp-stratum
packet-duplicates
packet-duplicates-bidir
packet-reorders
packet-reorders-bidir
path-mtu
streams-packet-retransmits
streams-packet-retransmits-subintervals
streams-throughput
streams-throughput-subintervals
time-error-estimates

Any concerns or comments?

Thanks,

Shawn

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mckee/CN=500323/CN=Shawn Mc Kee</pre></div><div class='update_description'><i onclick="document.location='31257#1474048494'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-16T17:54:54+00:00">Sep 16, 2016 05:54 PM UTC</time><a class="anchor" name="1474048494">&nbsp;</a></div><pre>I think it should be fine to add all of them. We have to be cautious with adding more histogram-* cause those put more pressure on the data store. Regarding the AMQ since those are hardcoded we will need a software update if we want to update more of those.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='31257#1474040221'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-16T15:37:01+00:00">Sep 16, 2016 03:37 PM UTC</time> by <b>Thomas Lee</b><a class="anchor" name="1474040221">&nbsp;</a></div><pre>For our part, just let us know what you need done once the revised list of event types is decided upon.</pre></div><div class='update_description'><i onclick="document.location='31257#1474040160'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-16T15:36:00+00:00">Sep 16, 2016 03:36 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1474040160">&nbsp;</a></div><pre>Adding Tom and Scott.</pre></div><div class='update_description'><i onclick="document.location='31257#1474040081'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-16T15:34:41+00:00">Sep 16, 2016 03:34 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1474040081">&nbsp;</a></div><pre>The perfSONAR RSV probes are currently configured to gather the following perfSONAR data event-types&#58;

allowedEvents = packet-loss-rate,packet-trace,packet-retransmits,throughput,throughput-subintervals,failures,packet-count-sent,packet-count-lost, histogram-owdelay,histogram-ttl,packet-retransmits-subintervals,packet-loss-rate-bidir,packet-count-lost-bidir

However perfSONAR supports a much larger number of event types (as shown here <a href='http&#58;//software.es.net/esmond/perfsonar_client_rest.html#full-list-of-event-types' target='_blank' rel='nofollow'>http&#58;//software.es.net/esmond/perfsonar_client_rest.html#full-list-of-event-types</a> ) and we need to update the types of events we are gathering.   This ticket is being setup to track the discussion and associated work to enable the change.

We have to also consider corresponding changes in the stompctl configuration as well as the ActiveMQ bus at CERN.

At a minimum I assume we want the path-mtu added as well as the associated ntp-* event types.

Shawn

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mckee/CN=500323/CN=Shawn Mc Kee</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F31257">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 31257});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
