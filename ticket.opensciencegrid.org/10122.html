<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[10122] a user cannot download files from AGLT2_USERDISK</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=10122" method="post">
<div class="page-header">
    <h3><span class="muted">10122</span> / a user cannot download files from AGLT2_USERDISK</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Elena.OliverGarcia </div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">ATLAS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Elena.OliverGarcia</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USATLAS</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Check for updates</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2011-03-30</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG RA <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Tanya Levshina <span class="muted"> / OSG Storage Team</span></div><div class="assignee" style="width: 60%">Neha Sharma <span class="muted"> / OSG Storage Team</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=68892">68892</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">USATLAS (BNL Prod)&nbsp;<a target="_blank" href="https://rt.racf.bnl.gov/rt/Ticket/Display.html?id=19618">19618</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/10122", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/10122?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/10122?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20a%20user%20cannot%20download%20files%20from%20AGLT2_USERDISK%20ISSUE%3D10122%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='10122#1301653280'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-04-01T10:21:20+00:00">Apr 1, 2011 10:21 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1301653280">&nbsp;</a></div><pre>VOMS missing group added to the /etc/grid-security/grid-volrolemap and user can now access his data. Resolving.
-- by Alessandra Forti at Fri Apr 01 10&#58;19&#58;13 UTC 2011</pre></div><div class='update_description'><i onclick="document.location='10122#1300983419'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-24T16:16:59+00:00">Mar 24, 2011 04:16 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1300983419">&nbsp;</a></div><pre>Thanks, Dennis.

So, this confirms that some kind of AND is being done on attributes, not
an OR.

bob

On 3/24/2011 12&#58;09 PM, OSG GOC TX via RT wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;    *Ticket URL&#58;*  <a href='https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=19618' target='_blank' rel='nofollow'>https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=19618</a></font>
<font color='#7F7E6F'>&#62;    *Requestors&#58;*  tx+rtbnlprod_fp71@....</font>
<font color='#7F7E6F'>&#62;           *Ccs&#58;*  (None)</font>
<font color='#7F7E6F'>&#62;         *Queue&#58;*  GLTier2</font>
<font color='#7F7E6F'>&#62;         *Owner&#58;*  Shawn Mckee</font>
<font color='#7F7E6F'>&#62;        *Status&#58;*  /open/</font>
<font color='#7F7E6F'>&#62;      *Priority&#58;*  /Low/</font>
<font color='#7F7E6F'>&#62;   *Transaction&#58;*  Correspondence added by osg-goc-rest</font>
<font color='#7F7E6F'>&#62;       *Subject&#58;*  a user cannot download files from AGLT2_USERDISK</font>
<font color='#7F7E6F'>&#62;               *GGUS Ticket&#58;*  68892</font>
&#60;<a href='https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=68892&#62' target='_blank' rel='nofollow'>https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=68892&#62</a>;
<font color='#7F7E6F'>&#62;            *OSG GOC Ticket&#58;*  10122</font>
&#60;<a href='10122.html' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=10122&#62</a>;
<font color='#7F7E6F'>&#62;          *GGUS Ticket Type&#58;*  TEAM</font>
<font color='#7F7E6F'>&#62;       *Resource Group Name&#58;*  AGLT2</font>
<font color='#7F7E6F'>&#62;                   *VO Name&#58;*  ATLAS</font>
<font color='#7F7E6F'>&#62;         *GGUS Problem Type&#58;*  Other</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Hi Bob,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#62;  It would be interesting now to hear if you can get this using the</font>
<font color='#7F7E6F'>&#62; &#62;  &#34;voms-proxy-init&#34; that you initially used, and that failed.  Can you</font>
<font color='#7F7E6F'>&#62; &#62;  do so?</font>
<div id='show_89590097' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_89590097'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; yes, it works also with my initial command. Everything seems to be fine</font>
<font color='#7F7E6F'>&#62; now.</font>
<font color='#7F7E6F'>&#62;   -- by dennis.petschull@.... at Thu Mar 24 16&#58;05&#58;15 UTC 2011</font>
<font color='#7F7E6F'>&#62;   -- by OSG-GOC at Thu Mar 24 16&#58;08&#58;32 UTC 2011</font>
-- by ball@.... at Thu Mar 24 16&#58;16&#58;50 UTC 2011
</div><script type='text/javascript'>
        $('#show_89590097').click(function() {
            $('#detail_89590097').slideDown("normal");
            $('#show_89590097').hide();
            $('#hide_89590097').show();
        });
        $('#hide_89590097').click(function() {
            $('#detail_89590097').slideUp();
            $('#hide_89590097').hide();
            $('#show_89590097').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10122#1300982912'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-24T16:08:32+00:00">Mar 24, 2011 04:08 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1300982912">&nbsp;</a></div><pre>Hi Bob,

<font color='#7F7E6F'>&#62; It would be interesting now to hear if you can get this using the</font>
<font color='#7F7E6F'>&#62; &#34;voms-proxy-init&#34; that you initially used, and that failed.  Can you</font>
<font color='#7F7E6F'>&#62; do so?</font>

yes, it works also with my initial command. Everything seems to be fine now.
-- by dennis.petschull@.... at Thu Mar 24 16&#58;05&#58;15 UTC 2011</pre></div><div class='update_description'><i onclick="document.location='10122#1300982347'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-24T15:59:07+00:00">Mar 24, 2011 03:59 PM UTC</time> by <b>Shawn McKee</b><a class="anchor" name="1300982347">&nbsp;</a></div><pre>Great...Dennis I am glad it is working for you now.

Neha, do you know how this should be working?    It seems like the fact that the user had one VOMS attribute (out of 4) that didn&#39;t exist in our /etc/grid-security/grid-volrolemap prevented access?

The attributes are&#58;

attribute &#58; /atlas/Role=NULL/Capability=NULL
attribute &#58; /atlas/de/Role=NULL/Capability=NULL
attribute &#58; /atlas/det-alfa/Role=NULL/Capability=NULL
attribute &#58; /atlas/lcg1/Role=NULL/Capability=NULL

The one which didn&#39;t exist was /atlas/det-alfa.   Adding it to grid-vorolemap allowed things to work.

This is a problem waiting to happen in the future.  Is gPlazma authorization an &#34;AND&#34; rather than an &#34;OR&#34; for VOMS attributes?  I will look into the dCache book to see if I can figure out what should be happening.

FYI, here is our dcachesrm-gplazma.policy file&#58;
-----------------------
xacml-vo-mapping=&#34;ON&#34;
saml-vo-mapping=&#34;ON&#34;
kpwd=&#34;OFF&#34;
grid-mapfile=&#34;OFF&#34;
gplazmalite-vorole-mapping=&#34;ON&#34;

gplazmalite-vorole-mapping-priority=&#34;1&#34;
xacml-vo-mapping-priority=&#34;2&#34;
saml-vo-mapping-priority=&#34;3&#34;
kpwd-priority=&#34;4&#34;
grid-mapfile-priority=&#34;5&#34;

kpwdPath=&#34;/opt/d-cache/etc/dcache.kpwd&#34;

gridMapFilePath=&#34;/etc/grid-security/grid-mapfile&#34;
storageAuthzPath=&#34;/etc/grid-security/storage-authzdb&#34;

XACMLmappingServiceUrl=&#34;<a href='https&#58;//linat02.grid.umich.edu&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort&#34' target='_blank' rel='nofollow'>https&#58;//linat02.grid.umich.edu&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort&#34</a>;
<div id='show_266236414' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_266236414'>xacml-vo-mapping-cache-lifetime=&#34;180&#34;

mappingServiceUrl=&#34;<a href='https&#58;//linat02.grid.umich.edu&#58;8443/gums/services/GUMSAuthorizationServicePort&#34' target='_blank' rel='nofollow'>https&#58;//linat02.grid.umich.edu&#58;8443/gums/services/GUMSAuthorizationServicePort&#34</a>;
saml-vo-mapping-cache-lifetime=&#34;180&#34;

gridVoRolemapPath=&#34;/etc/grid-security/grid-vorolemap&#34;
gridVoRoleStorageAuthzPath=&#34;/etc/grid-security/storage-authzdb&#34;
vomsValidation=&#34;true&#34;

saz-client=&#34;OFF&#34;
SAZ_SERVER_HOST=&#34;saz-server.oursite.edu&#34;
SAZ_SERVER_PORT=&#34;8888&#34;
------------------

Thanks,

Shawn
</div><script type='text/javascript'>
        $('#show_266236414').click(function() {
            $('#detail_266236414').slideDown("normal");
            $('#show_266236414').hide();
            $('#hide_266236414').show();
        });
        $('#hide_266236414').click(function() {
            $('#detail_266236414').slideUp();
            $('#hide_266236414').hide();
            $('#show_266236414').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10122#1300981768'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-24T15:49:28+00:00">Mar 24, 2011 03:49 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1300981768">&nbsp;</a></div><pre>Dennis,

It would be interesting now to hear if you can get this using the
&#34;voms-proxy-init&#34; that you initially used, and that failed.  Can you do so?

bob

On 3/24/2011 11&#58;45 AM, OSG GOC TX via RT wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;    *Ticket URL&#58;*  <a href='https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=19618' target='_blank' rel='nofollow'>https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=19618</a></font>
<font color='#7F7E6F'>&#62;    *Requestors&#58;*  tx+rtbnlprod_fp71@....</font>
<font color='#7F7E6F'>&#62;           *Ccs&#58;*  (None)</font>
<font color='#7F7E6F'>&#62;         *Queue&#58;*  GLTier2</font>
<font color='#7F7E6F'>&#62;         *Owner&#58;*  Shawn Mckee</font>
<font color='#7F7E6F'>&#62;        *Status&#58;*  /open/</font>
<font color='#7F7E6F'>&#62;      *Priority&#58;*  /Low/</font>
<font color='#7F7E6F'>&#62;   *Transaction&#58;*  Correspondence added by osg-goc-rest</font>
<font color='#7F7E6F'>&#62;       *Subject&#58;*  a user cannot download files from AGLT2_USERDISK</font>
<font color='#7F7E6F'>&#62;               *GGUS Ticket&#58;*  68892</font>
&#60;<a href='https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=68892&#62' target='_blank' rel='nofollow'>https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=68892&#62</a>;
<font color='#7F7E6F'>&#62;            *OSG GOC Ticket&#58;*  10122</font>
&#60;<a href='10122.html' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=10122&#62</a>;
<font color='#7F7E6F'>&#62;          *GGUS Ticket Type&#58;*  TEAM</font>
<font color='#7F7E6F'>&#62;       *Resource Group Name&#58;*  AGLT2</font>
<font color='#7F7E6F'>&#62;                   *VO Name&#58;*  ATLAS</font>
<font color='#7F7E6F'>&#62;         *GGUS Problem Type&#58;*  Other</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Yes, works now!</font>
<font color='#7F7E6F'>&#62; Thanks alot for your help.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Cheers,</font>
<font color='#7F7E6F'>&#62; Dennis</font>
<div id='show_1930370636' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1930370636'><font color='#7F7E6F'>&#62;   -- by dennis.petschull@.... at Thu Mar 24 15&#58;43&#58;09 UTC 2011</font>
<font color='#7F7E6F'>&#62;   -- by OSG-GOC at Thu Mar 24 15&#58;44&#58;57 UTC 2011</font>
-- by ball@.... at Thu Mar 24 15&#58;49&#58;20 UTC 2011
</div><script type='text/javascript'>
        $('#show_1930370636').click(function() {
            $('#detail_1930370636').slideDown("normal");
            $('#show_1930370636').hide();
            $('#hide_1930370636').show();
        });
        $('#hide_1930370636').click(function() {
            $('#detail_1930370636').slideUp();
            $('#hide_1930370636').hide();
            $('#show_1930370636').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10122#1300981497'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-24T15:44:57+00:00">Mar 24, 2011 03:44 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1300981497">&nbsp;</a></div><pre>Yes, works now!
Thanks alot for your help.

Cheers,
Dennis
-- by dennis.petschull@.... at Thu Mar 24 15&#58;43&#58;09 UTC 2011</pre></div><div class='update_description'><i onclick="document.location='10122#1300981127'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-24T15:38:47+00:00">Mar 24, 2011 03:38 PM UTC</time><a class="anchor" name="1300981127">&nbsp;</a></div><pre>I checked our GUMS here.  Elena and Dennis both map to &#39;usatlas4&#39; (which is correct at our site)&#58;

On &#39;/DC=org/DC=doegrids/OU=Services/CN=gate01.aglt2.org&#39;, &#39;/C=DE/O=GermanGrid/OU=DESY/CN=Dennis Petschull&#39; is mapped to&#58;
usatlas4

On &#39;/DC=org/DC=doegrids/OU=Services/CN=gate01.aglt2.org&#39;, &#39;/DC=es/DC=irisgrid/O=ific/CN=Elena.OliverGarcia&#39; is mapped to&#58;
usatlas4

I tried with all combinations of VOMS attributes&#58; /atlas, /atlas/de and /atlas/es and all of them map to &#39;usatlas4&#39;

I&#39;m not sure why Dennis would have a problem while Elena (and others) don&#39;t.  Looking again at the gPlazma logs I see this&#58;

24 Mar 2011 11&#58;22&#58;40 (gPlazma) [v2&#58;srmLs&#58;52011209 SRM-head01 Login] Permission Denied&#58; Cannot determine Username from grid-vorolemap for DN /C=DE/O=GermanGrid/OU=DESY/CN=Dennis Petschull and role /atlas/det-alfa

We are running dCache 1.9.10-4.  I just checked out /etc/grid-security/grid-vorolemap and there was no entry for &#34;/atlas/det-alfa&#34;.  I have added one here.   I&#39;m not sure  this is the problem.  Surely gPlazma doesn&#39;t require that ALL VOMS attributes map before proceeding?

Dennis can you try again?

Shawn

-- by Shawn McKee</pre></div><div class='update_description'><i onclick="document.location='10122#1300980834'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-24T15:33:54+00:00">Mar 24, 2011 03:33 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1300980834">&nbsp;</a></div><pre>Added attachment mailbody.Thu._24_Mar_2011_16.31.52_.0100.txt
-- by dennis.petschull@.... at Thu Mar 24 15&#58;32&#58;06 UTC 2011

----------- e-mail with large body ------

added in total as mailbody.Thu._24_Mar_2011_16.31.52_.0100.txt

------------ e-mail with large body ------

-- by dennis.petschull@.... at Thu Mar 24 15&#58;32&#58;06 UTC 2011

About point 1)

---

dpetsch@lxplus410 % voms-proxy-init -voms atlas&#58;/atlas

Enter GRID pass phrase&#58;
Your identity&#58; /C=DE/O=GermanGrid/OU=DESY/CN=Dennis Petschull
Creating temporary proxy
................................................... Done
Contacting  voms.cern.ch&#58;15001
[/DC=ch/DC=cern/OU=computers/CN=voms.cern.ch] &#34;atlas&#34; Done
Creating proxy
................................................................................
Done
Your proxy is valid until Fri Mar 25 04&#58;21&#58;25 2011
dpetsch@lxplus410 % cd /tmp

dpetsch@lxplus410 % voms-proxy-info -all

subject   &#58; /C=DE/O=GermanGrid/OU=DESY/CN=Dennis Petschull/CN=proxy
issuer    &#58; /C=DE/O=GermanGrid/OU=DESY/CN=Dennis Petschull
identity  &#58; /C=DE/O=GermanGrid/OU=DESY/CN=Dennis Petschull
type      &#58; proxy
<div id='show_333016743' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_333016743'>strength  &#58; 1024 bits
path      &#58; /tmp/x509up_u28070
timeleft  &#58; 11&#58;59&#58;33
=== VO atlas extension information ===
VO        &#58; atlas
subject   &#58; /C=DE/O=GermanGrid/OU=DESY/CN=Dennis Petschull
issuer    &#58; /DC=ch/DC=cern/OU=computers/CN=voms.cern.ch
attribute &#58; /atlas/Role=NULL/Capability=NULL
attribute &#58; /atlas/de/Role=NULL/Capability=NULL
attribute &#58; /atlas/det-alfa/Role=NULL/Capability=NULL
attribute &#58; /atlas/lcg1/Role=NULL/Capability=NULL
attribute &#58; nickname = dpetsch (atlas)
timeleft  &#58; 11&#58;59&#58;33
uri       &#58; voms.cern.ch&#58;15001
dpetsch@lxplus410 % dq2-get -f
user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root
user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034
/tmp
Querying DQ2 central catalogues to resolve datasetname
user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034
Datasets found&#58; 1
user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034&#58;
Querying DQ2 central catalogues for replicas...
Querying DQ2 central catalogues for files in dataset...
user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034&#58;
Complete replica available
user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034&#58;
Using site AGLT2_USERDISK
user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034&#58;
Querying local file catalogue of site AGLT2_USERDISK...
user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034/user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root&#58;
Getting SRM metadata for
<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasuserdisk/user.dpetsch/user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034_sub017906154/user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasuserdisk/user.dpetsch/user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034_sub017906154/user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root</a>
user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034/user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root&#58;
no SRM size information available. No transfer progress display.
user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034/user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root&#58;
no SRM caching information available. Are you using a local protocol?
user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034/user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root&#58;
Starting transfer&#58; lcg-cp -v --vo atlas -b -D srmv2
<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasuserdisk/user.dpetsch/user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034_sub017906154/user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasuserdisk/user.dpetsch/user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034_sub017906154/user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root</a>
file&#58;///tmp/user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034/user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root

user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034/user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root&#58;
external failed&#58;
stdout&#58;

stderr&#58;Using grid catalog type&#58; UNKNOWN
U...
...
--- body truncated, see attachment mailbody.Thu._24_Mar_2011_16.31.52_.0100.txt for full text ---
-- by dennis.petschull@.... at Thu Mar 24 15&#58;32&#58;06 UTC 2011
</div><script type='text/javascript'>
        $('#show_333016743').click(function() {
            $('#detail_333016743').slideDown("normal");
            $('#show_333016743').hide();
            $('#hide_333016743').show();
        });
        $('#hide_333016743').click(function() {
            $('#detail_333016743').slideUp();
            $('#hide_333016743').hide();
            $('#show_333016743').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10122#1300979913'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-24T15:18:33+00:00">Mar 24, 2011 03:18 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1300979913">&nbsp;</a></div><pre>About point 3) &#34;Which user is allowed to access the dataset in question&#34;

I can download the Dennis&#39; dataset. You can see my proxy info in the ticket. Today I&#39;s checked with &#39;voms-proxy-init -voms=atlas&#58;/atlas/es&#39; and it works!!!

Other case was Magda, different dataset but in this site and LMU&#58;
<a href='https&#58;//groups.cern.ch/group/hn-atlas-dist-analysis-help/Lists/Archive/Flat.aspx?RootFolder=https%3a%2f%2fgroups.cern.ch%2fgroup%2fhn-atlas-dist-analysis-help%2fLists%2fArchive%2fcannot%20download%20datasets%20from%20LRZ-LMU%20' target='_blank' rel='nofollow'>https&#58;//groups.cern.ch/group/hn-atlas-dist-analysis-help/Lists/Archive/Flat.aspx?RootFolder=https%3a%2f%2fgroups.cern.ch%2fgroup%2fhn-atlas-dist-analysis-help%2fLists%2fArchive%2fcannot%20download%20datasets%20from%20LRZ-LMU%20</a>(and%20AGLT2)&FolderCTID=0x01200200FB8F64B0E343CB4680DEAC546A9DF813

She couldn&#39;t download the dataset when using Production Role. So, she change to altas only and she got it.

About point 1 and 2, waiting Dennis reply.

I hope this helps, thank for looking it.

Elena
-- by  Elena.OliverGarcia at Thu Mar 24 15&#58;16&#58;41 UTC 2011</pre></div><div class='update_description'><i onclick="document.location='10122#1300977666'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-24T14:41:06+00:00">Mar 24, 2011 02:41 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1300977666">&nbsp;</a></div><pre>Please provide the following information -

1) What happens when Dennis generates his proxy using command &#34;&#39;voms-proxy-init -voms atlas&#58;/atlas&#39;&#34;
2) What local user does GUMS return for Dennis in this case
3) Which user is allowed to access the dataset in question

I believe the solution is simple.

-Neha
On Mar 24, 2011, at 6&#58;44 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10122#1300967088'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-24T11:44:48+00:00">Mar 24, 2011 11:44 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1300967088">&nbsp;</a></div><pre>Hi,

Thinking how Dennis can change the order of attributes and /atlas/Role=NULL  be the first, I tried &#39;voms-proxy-init -voms atlas&#58;/atlas&#39; and the proxy info is the same as my &#39;voms-proxy-init -voms atlas&#39;&#58;

subject   &#58; /DC=es/DC=irisgrid/O=ific/CN=Elena.OliverGarcia/CN=proxy
issuer    &#58; /DC=es/DC=irisgrid/O=ific/CN=Elena.OliverGarcia
identity  &#58; /DC=es/DC=irisgrid/O=ific/CN=Elena.OliverGarcia
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /tmp/x509up_u23160
timeleft  &#58; 11&#58;54&#58;18
=== VO atlas extension information ===
VO        &#58; atlas
subject   &#58; /DC=es/DC=irisgrid/O=ific/CN=Elena.OliverGarcia
issuer    &#58; /DC=org/DC=doegrids/OU=Services/CN=vo.racf.bnl.gov
attribute &#58; /atlas/Role=NULL/Capability=NULL
attribute &#58; /atlas/es/Role=NULL/Capability=NULL
attribute &#58; /atlas/lcg1/Role=NULL/Capability=NULL
attribute &#58; /atlas/team/Role=NULL/Capability=NULL
attribute &#58; nickname = elenao (atlas)
timeleft  &#58; 11&#58;54&#58;18
uri       &#58; vo.racf.bnl.gov&#58;15003

Can this simple thing work???

@Dennis&#58; if you really need the dataset soon, you can ask to your institute colleages if they can download it and give it to you. The &#39;last solution&#39; is to make a request with DaTri (it can be slowly)&#58;
<a href='http&#58;//panda.cern.ch/server/pandamon/query?mode=ddm_req' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch/server/pandamon/query?mode=ddm_req</a>

Cheers,

Elena
-- by  Elena.OliverGarcia at Thu Mar 24 11&#58;40&#58;45 UTC 2011</pre></div><div class='update_description'><i onclick="document.location='10122#1300963411'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-24T10:43:31+00:00">Mar 24, 2011 10:43 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1300963411">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Public Diary      &#58; I added in cc two users more. (Tulay and Anna) it</font>
<font color='#7F7E6F'>&#62; happened to them the same but it was &#39;resolved&#39; changing proxy role  &#62;</font>
doing &#39;voms-proxy-init -voms=atlas&#39; or asking for getting the dataset &#62;
files to another person.
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I hope they can follow this and test everything you need.</font>
<font color='#7F7E6F'>&#62;</font>

Is there anything that I (as a user) can help you with to solve this? I
really need access to my files soon.

Cheers,
Dennis
-- by dennis.petschull@.... at Thu Mar 24 10&#58;40&#58;45 UTC 2011</pre></div><div class='update_description'><i onclick="document.location='10122#1300897770'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-23T16:29:30+00:00">Mar 23, 2011 04:29 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1300897770">&nbsp;</a></div><pre>I added in cc two users more. (Tulay and Anna) it happened to them the same but it was &#39;resolved&#39; changing proxy role doing &#39;voms-proxy-init -voms=atlas&#39; or asking for getting the dataset files to another person.

I hope they can follow this and test everything you need.

Elena Oliver
-- by  Elena.OliverGarcia at Wed Mar 23 16&#58;27&#58;21 UTC 2011

Changed CC to atlasdast@....;dennis.petschull@....;tcuhadar@....;magda.anna.chelstowska@....
-- by  Elena.OliverGarcia at Wed Mar 23 16&#58;27&#58;21 UTC 2011</pre></div><div class='update_description'><i onclick="document.location='10122#1300897567'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-23T16:26:07+00:00">Mar 23, 2011 04:26 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1300897567">&nbsp;</a></div><pre>Which version of dCache is being used? I know starting 1.9.9-2, transfers through gridftp doors do support all the FQANs in the proxy. Versions before that honor only the first FQAN.

Why doesn&#39;t the user just generate his crendentials such that the  /atlas/Role=NULL  is the first FQAN?

-Neha
On Mar 23, 2011, at 10&#58;35 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10122#1300894507'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-23T15:35:07+00:00">Mar 23, 2011 03:35 PM UTC</time> by <b>Shawn McKee</b><a class="anchor" name="1300894507">&nbsp;</a></div><pre>Hi Neha,

To be clear I am not the one having the problem.  A user in Germany is having the problem and I assumed it was like the previously mentioned ticket.  The users first VOMS attribute was not /atlas/Role=NULL but was /atlas/de/Role=NULL.  I assumed the problem the user had was due to that (and how dCache interacts with a VOMS attribute list).

To debug this may be problematic for me since I don&#39;t have access to this users VOMS proxy.

Do you think there is something we can explore at AGLT2 that may help fix the problem?  I am certainly willing to work on it.

Thanks!

Shawn</pre></div><div class='update_description'><i onclick="document.location='10122#1300894028'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-23T15:27:08+00:00">Mar 23, 2011 03:27 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1300894028">&nbsp;</a></div><pre>Shawn
I can help you with this issue. I wasn&#39;t aware of this since I am not in CC list for this ticket.
I have read the description - so problem is that you cannot retrieve the data even though you have the right voms credentials? What authorization modules are enabled on the SE and what do you get mapped to?

-Neha</pre></div><div class='update_description'><i onclick="document.location='10122#1300881584'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-23T11:59:44+00:00">Mar 23, 2011 11:59 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1300881584">&nbsp;</a></div><pre>Hi,

This seems to be the same problem as in GGUS ticket 67550 mentioned below. If I
look at the users VOMS attributes the first one is&#58;

attribute &#58; /atlas/de/Role=NULL/Capability=NULL

Maybe this is causing the problem? If I run &#39;voms-proxy-init -voms atlas&#39; I get
the following&#58;

smckee@umt3int02 ~$ voms-proxy-info -all
subject &#58; /DC=org/DC=doegrids/OU=People/CN=Shawn McKee 83467/CN=proxy
issuer &#58; /DC=org/DC=doegrids/OU=People/CN=Shawn McKee 83467
identity &#58; /DC=org/DC=doegrids/OU=People/CN=Shawn McKee 83467
type &#58; proxy
strength &#58; 1024 bits
path &#58; /tmp/x509up_u10048
timeleft &#58; 11&#58;59&#58;55
=== VO atlas extension information ===
VO &#58; atlas
subject &#58; /DC=org/DC=doegrids/OU=People/CN=Shawn McKee 83467
issuer &#58; /DC=ch/DC=cern/OU=computers/CN=lcg-voms.cern.ch
attribute &#58; /atlas/Role=NULL/Capability=NULL
attribute &#58; /atlas/lcg1/Role=NULL/Capability=NULL
attribute &#58; /atlas/usatlas/Role=NULL/Capability=NULL
attribute &#58; nickname = ShawnMcKee (atlas)
timeleft &#58; 11&#58;59&#58;54
uri &#58; lcg-voms.cern.ch&#58;15001

Note that the first attribute is just &#39;/atlas/Role=NULL&#39;.

I will poke around our logs for dCache/gPlazma and see if anything else is
showing up.

Shawn
<div id='show_616369962' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_616369962'>
On Wed Mar 23 07&#58;49&#58;12 2011, osg-goc-rest wrote&#58;
<font color='#7F7E6F'>&#62; A user has this error message trying to download the dataset</font>
<font color='#7F7E6F'>&#62; &#39;user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-</font>
<font color='#7F7E6F'>&#62; Rel16_BkgEst.prun.110322002034&#39;&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; dq2-get -f</font>
<font color='#7F7E6F'>&#62; user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root</font>
<font color='#7F7E6F'>&#62; user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-</font>
<font color='#7F7E6F'>&#62; Rel16_BkgEst.prun.110322002034</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; .........</font>
<font color='#7F7E6F'>&#62; Trying SURL</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasuserdisk/user.dpetsch/user.dpetsch.20110321-' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasuserdisk/user.dpetsch/user.dpetsch.20110321-</a>
<font color='#7F7E6F'>&#62; AODPeriodEtoI-LooseLoose-</font>
<font color='#7F7E6F'>&#62;</font>
Rel16_BkgEst.prun.110322002034_sub017906154/user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root
<font color='#7F7E6F'>&#62; ...</font>
<font color='#7F7E6F'>&#62; [SE][Ls][SRM_AUTHENTICATION_FAILURE]</font>
<font color='#7F7E6F'>&#62; httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2&#58; SRM Authentication failed</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; lcg_cp&#58; Invalid argument</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ..................</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; the user&#39;s proxy is&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; subject &#58; /C=DE/O=GermanGrid/OU=DESY/CN=Dennis</font>
<font color='#7F7E6F'>&#62; Petschull/CN=proxy/CN=proxy/CN=proxy/CN=proxy</font>
<font color='#7F7E6F'>&#62; issuer &#58; /C=DE/O=GermanGrid/OU=DESY/CN=Dennis</font>
<font color='#7F7E6F'>&#62; Petschull/CN=proxy/CN=proxy/CN=proxy</font>
<font color='#7F7E6F'>&#62; identity &#58; /C=DE/O=GermanGrid/OU=DESY/CN=Dennis</font>
<font color='#7F7E6F'>&#62; Petschull/CN=proxy/CN=proxy/CN=proxy</font>
<font color='#7F7E6F'>&#62; type &#58; proxy</font>
<font color='#7F7E6F'>&#62; strength &#58; 1024 bits</font>
<font color='#7F7E6F'>&#62; path &#58; /afs/naf.desy.de/user/d/dpetsch/.globus/autoproxy.pem</font>
<font color='#7F7E6F'>&#62; timeleft &#58; 90&#58;50&#58;30</font>
<font color='#7F7E6F'>&#62; === VO atlas extension information ===</font>
<font color='#7F7E6F'>&#62; VO &#58; atlas</font>
<font color='#7F7E6F'>&#62; subject &#58; /C=DE/O=GermanGrid/OU=DESY/CN=Dennis Petschull</font>
<font color='#7F7E6F'>&#62; issuer &#58; /DC=ch/DC=cern/OU=computers/CN=lcg-voms.cern.ch</font>
<font color='#7F7E6F'>&#62; attribute &#58; /atlas/de/Role=NULL/Capability=NULL</font>
<font color='#7F7E6F'>&#62; attribute &#58; /atlas/Role=NULL/Capability=NULL</font>
<font color='#7F7E6F'>&#62; attribute &#58; /atlas/det-alfa/Role=NULL/Capability=NULL</font>
<font color='#7F7E6F'>&#62; attribute &#58; /atlas/lcg1/Role=NULL/Capability=NULL</font>
<font color='#7F7E6F'>&#62; attribute &#58; nickname = dpetsch (atlas)</font>
<font color='#7F7E6F'>&#62; timeleft &#58; 90&#58;50&#58;30</font>
<font color='#7F7E6F'>&#62; uri &#58; lcg-voms.cern.ch&#58;15001</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I see in this GGUS ticket a similar problem but I&#39;m not sure if the</font>
<font color='#7F7E6F'>&#62; dCache bug is the reason because the user cannot download in anycase&#58;</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//gus.fzk.de/dmsu/dmsu_ticket.php?ticket=67550' target='_blank' rel='nofollow'>https&#58;//gus.fzk.de/dmsu/dmsu_ticket.php?ticket=67550</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; In the GGUS ticket 67550, user could download the dataset if the proxy</font>
<font color='#7F7E6F'>&#62; is created only with atlas role, but in this case, user has executed</font>
<font color='#7F7E6F'>&#62; &#39;voms-proxy-init -voms atlas&#39; exactly.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Could you check this, please? thanks</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Elena Oliver (EU DAST shifter this week)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Ticket Origin]</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=68892' target='_blank' rel='nofollow'>https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=68892</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Ticket History]</font>
<font color='#7F7E6F'>&#62; Changed CC to atlasdast@....;dennis.petschull@....</font>
<font color='#7F7E6F'>&#62; -- by Elena.OliverGarcia at Wed Mar 23 11&#58;43&#58;04 UTC 2011</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Sent TEAM notification mail to mail address</font>
<font color='#7F7E6F'>&#62; ball@....;rockwell@....;smckee@....;</font>
<font color='#7F7E6F'>&#62; -- by Elena.OliverGarcia at Wed Mar 23 11&#58;43&#58;04 UTC 2011</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Ticket Origin]</font>
<font color='#7F7E6F'>&#62; <a href='10122.html#1300880910' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=10122#1300880910</a></font>
-- by smckee@.... at Wed Mar 23 11&#58;59&#58;37 UTC 2011
</div><script type='text/javascript'>
        $('#show_616369962').click(function() {
            $('#detail_616369962').slideDown("normal");
            $('#show_616369962').hide();
            $('#hide_616369962').show();
        });
        $('#hide_616369962').click(function() {
            $('#detail_616369962').slideUp();
            $('#hide_616369962').hide();
            $('#show_616369962').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10122#1300880910'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-23T11:48:30+00:00">Mar 23, 2011 11:48 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1300880910">&nbsp;</a></div><pre>A user has this error message trying to download the dataset &#39;user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034&#39;&#58;

dq2-get -f user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034

.........
Trying SURL
<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasuserdisk/user.dpetsch/user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034_sub017906154/user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasuserdisk/user.dpetsch/user.dpetsch.20110321-AODPeriodEtoI-LooseLoose-Rel16_BkgEst.prun.110322002034_sub017906154/user.dpetsch.001045._01408.ZeeBkgEstARACycle.data.AODRel16.root</a>
...
[SE][Ls][SRM_AUTHENTICATION_FAILURE]
httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2&#58; SRM Authentication failed

lcg_cp&#58; Invalid argument

..................

the user&#39;s proxy is&#58;

subject   &#58; /C=DE/O=GermanGrid/OU=DESY/CN=Dennis
Petschull/CN=proxy/CN=proxy/CN=proxy/CN=proxy
issuer    &#58; /C=DE/O=GermanGrid/OU=DESY/CN=Dennis
Petschull/CN=proxy/CN=proxy/CN=proxy
identity  &#58; /C=DE/O=GermanGrid/OU=DESY/CN=Dennis
Petschull/CN=proxy/CN=proxy/CN=proxy
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /afs/naf.desy.de/user/d/dpetsch/.globus/autoproxy.pem
timeleft  &#58; 90&#58;50&#58;30
=== VO atlas extension information ===
VO        &#58; atlas
subject   &#58; /C=DE/O=GermanGrid/OU=DESY/CN=Dennis Petschull
issuer    &#58; /DC=ch/DC=cern/OU=computers/CN=lcg-voms.cern.ch
attribute &#58; /atlas/de/Role=NULL/Capability=NULL
attribute &#58; /atlas/Role=NULL/Capability=NULL
attribute &#58; /atlas/det-alfa/Role=NULL/Capability=NULL
attribute &#58; /atlas/lcg1/Role=NULL/Capability=NULL
<div id='show_116928157' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_116928157'>attribute &#58; nickname = dpetsch (atlas)
timeleft  &#58; 90&#58;50&#58;30
uri       &#58; lcg-voms.cern.ch&#58;15001

I see in this GGUS ticket a similar problem but I&#39;m not sure if the dCache bug  is the reason because the user cannot download in anycase&#58;
<a href='https&#58;//gus.fzk.de/dmsu/dmsu_ticket.php?ticket=67550' target='_blank' rel='nofollow'>https&#58;//gus.fzk.de/dmsu/dmsu_ticket.php?ticket=67550</a>

In the GGUS ticket 67550, user could download the dataset if the proxy is created only with atlas role, but in this case, user has executed &#39;voms-proxy-init -voms atlas&#39; exactly.

Could you check this, please? thanks

Elena Oliver (EU DAST shifter this week)

[Ticket Origin]
<a href='https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=68892' target='_blank' rel='nofollow'>https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=68892</a>

[Ticket History]
Changed CC to atlasdast@....;dennis.petschull@....
-- by Elena.OliverGarcia at Wed Mar 23 11&#58;43&#58;04 UTC 2011

Sent TEAM notification mail to mail address ball@....;rockwell@....;smckee@....;
-- by Elena.OliverGarcia at Wed Mar 23 11&#58;43&#58;04 UTC 2011
</div><script type='text/javascript'>
        $('#show_116928157').click(function() {
            $('#detail_116928157').slideDown("normal");
            $('#show_116928157').hide();
            $('#hide_116928157').show();
        });
        $('#hide_116928157').click(function() {
            $('#detail_116928157').slideUp();
            $('#hide_116928157').hide();
            $('#show_116928157').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F10122">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 10122});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
