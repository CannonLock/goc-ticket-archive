<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[26391] Glidein parameters for vanderbilt.edu</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=26391" method="post">
<div class="page-header">
    <h3><span class="muted">26391</span> / Glidein parameters for vanderbilt.edu</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Andrew Melo</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Andrew Melo</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier2</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Check for Status update</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-09-08</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USCMS Tier 2 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=115459">115459</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/26391", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26391?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26391?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Glidein%20parameters%20for%20vanderbilt.edu%20ISSUE%3D26391%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='26391#1442239856'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-14T14:10:56+00:00">Sep 14, 2015 02:10 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1442239856">&nbsp;</a></div><pre>-- by Andrew Melo at Mon Sep 14 14&#58;10&#58;33 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1441736387'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-08T18:19:47+00:00">Sep 8, 2015 06:19 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441736387">&nbsp;</a></div><pre>Hah, well, part of this whole exercise was to put all the knobs on your side. All of the jobs across all users go into the same queue here. Now directly pass through xcount and maxMemory. We need to update the CE software and then we can pass wallTime and the ad for disk space needed. Once those last two things are done, we&#39;re agnostic, you&#39;re just sending random jobs and we&#39;re throwing them in.

I do get that you don&#39;t want a combinatorial explosion of entries, so I&#39;ll keep that in mind. I see us bumping up the mcore requirements and then keeping the singlecore entry as-is to fill in where the mcore jobs won&#39;t fit (half our cores are on 12-core nodes, so 8-core jobs leave gaps that need to be filled in). Hopefully I can figure out the knobs on our end to tell the scheduler to only run single-core jobs if there&#39;s no way to get the mcore jobs to run. This fall we&#39;re going to run a workflow that is almost 100% multicore, so I&#39;m thinking ahead and trying to figure out how to get that going with the least amount of latency.

Anyway, too many words. I&#39;ve either had too much coffee or not enough (I forget how it works).

Thanks again,
Andrew

-- by Andrew Melo at Tue Sep 08 18&#58;19&#58;00 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1441735803'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-08T18:10:03+00:00">Sep 8, 2015 06:10 PM UTC</time><a class="anchor" name="1441735803">&nbsp;</a></div><pre>No problem, Andrew.

Yes, this is a pretty typical configuration for sites that have started to offer multicore glideins --- i.e., they keep both the single core entry and simply add the multicore entry as well. In some cases, we do something similar for high memory entries and/or extra long wall clock limits. But you&#39;re correct. There&#39;s typically just a bit more manual maintenance on your end and our end to keep our settings aligned as the number of entries increases.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1441735369'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-08T18:02:49+00:00">Sep 8, 2015 06:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441735369">&nbsp;</a></div><pre>Will do. Thanks for sticking around while what we were actually asking for migrated around. That&#39;s on me, I&#39;m super hazy about the specifics of how gWMS does its magic.

Just for my own knowledge, 2 entries X 2 endpoints (single,multi X ce1,ce2) is about normal? We might be able to get better occupancy and grab more fairshare if we can have some entries that make things a bit more granular. From what I understand though, there&#39;s a cost (at least human-wise) for additional entries, so I don&#39;t want to get too crazy. The other option I was mulling over was to have long pilots, but when the weekend is up, blasting SIGTERM to some of the glidein condor_masters to get them to gracefully shutdown and make room for the other users of the cluster.

Thanks again,
Andrew

-- by Andrew Melo at Tue Sep 08 18&#58;01&#58;41 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1441734516'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-08T17:48:36+00:00">Sep 8, 2015 05:48 PM UTC</time><a class="anchor" name="1441734516">&nbsp;</a></div><pre>Awesome. Thanks, Krista!

Andrew,

Glad to hear things are working well for y&#39;all now. Things look good on our end too. I&#39;m going to go ahead and close out this ticket for us. If you&#39;d like to up the wall clock limits at some time in the future, you can either reopen this ticket then or just shoot us a quick email at osg-gfactory-support@.....

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1441724862'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-08T15:07:42+00:00">Sep 8, 2015 03:07 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441724862">&nbsp;</a></div><pre>On our (Vanderbilt) end, things look great. I&#39;m going to try and tweak things locally so we&#39;ll preferentially schedule mcore over single core slots. The only other change I foresee is perhaps extending the walltime of the pilots out. CMS has to compete with other users, but hopefully I can get permission to extend the pilots out to a week or so.

Thanks for everyone&#39;s help,
Andrew

-- by Andrew Melo at Tue Sep 08 15&#58;06&#58;34 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1441724409'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-08T15:00:09+00:00">Sep 8, 2015 03:00 PM UTC</time><a class="anchor" name="1441724409">&nbsp;</a></div><pre>Hi Marty, all,

I&#39;ve updated the FNAL factory (cloned the latest from SDSC).  I see the entries up and some requests.  Let me know if you need anything else.

Thanks,
Krista

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=klarson1/CN=704070/CN=Krista Larson</pre></div><div class='update_description'><i onclick="document.location='26391#1441389483'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-04T17:58:03+00:00">Sep 4, 2015 05:58 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1441389483">&nbsp;</a></div><pre>Hi Krista,

Could you please let us know once you have made the changes at the FNAL factory?

Marty,

Once those changes are made will there be anything else to this ticket?

Regards,
Chris</pre></div><div class='update_description'><i onclick="document.location='26391#1441214919'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T17:28:39+00:00">Sep 2, 2015 05:28 PM UTC</time><a class="anchor" name="1441214919">&nbsp;</a></div><pre>Hi Andrew,

The 4 day wall clock time must be an old setting. I&#39;ll set the wall clock times down to 2 days on all entries [1] for both gatekeepers [2]. In addition, I&#39;ll up the max memory on the ce2.accre.vanderbilt.edu entries now that we&#39;ve sorted out the configuration with ce1.accre.vanderbilt.edu. If for whatever reason you don&#39;t see the attributes mirrored after today, let us know.

Also, we -- UCSD -- don&#39;t control the FNAL factory directly. But I&#39;ve cc&#39;d Krista @ FNAL on this ticket. She&#39;ll take care of the changes there.

[1]

CMS_T2_US_Vanderbilt_ce1_mcore
CMS_T2_US_Vanderbilt_ce2_mcore
CMS_T2_US_Vanderbilt_ce1
CMS_T2_US_Vanderbilt_ce2

[2]

ce1.accre.vanderbilt.edu
ce2.accre.vanderbilt.edu

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1441212268'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T16:44:28+00:00">Sep 2, 2015 04:44 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441212268">&nbsp;</a></div><pre>Hi Again,

One thing I noticed poking around was that it appears the factory thinks it&#39;s getting 5730 minutes (4 days) of walltime, but we&#39;re only giving you 2days. Additionally, not all of the entries are consistent across the frontends&#58; ce1 @ FNAL&#39;s factory is asking for 5GB of memory compared to the others requesting 4, but ce2&#39;s entries all request 3GB.

-Andrew

-- by Andrew Melo at Wed Sep 02 16&#58;43&#58;25 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1441210710'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T16:18:30+00:00">Sep 2, 2015 04:18 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441210710">&nbsp;</a></div><pre>Hi all,

Is everything looking on the up-and-up on your side? We&#39;s seeing some weirdness with aborted jobs on another ticket, so i&#39;m wanting to see if the two are correlated.

Cheers,
Andrew

-- by Andrew Melo at Wed Sep 02 16&#58;17&#58;35 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1441148576'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-01T23:02:56+00:00">Sep 1, 2015 11:02 PM UTC</time><a class="anchor" name="1441148576">&nbsp;</a></div><pre>No problem, Andrew. Yeah, let us know if you see any issues come up. We&#39;ll try and monitor the glidein performance for the new entries as best we can.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1441147806'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-01T22:50:06+00:00">Sep 1, 2015 10:50 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441147806">&nbsp;</a></div><pre>Sounds great, Marty. Thanks for the help. I&#39;ll keep an eye on it over the next few days.

-- by Andrew Melo at Tue Sep 01 22&#58;49&#58;00 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1441147586'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-01T22:46:26+00:00">Sep 1, 2015 10:46 PM UTC</time><a class="anchor" name="1441147586">&nbsp;</a></div><pre>Andrew,

I&#39;ve pushed the new multicore entries out to production factories. Since we now have these large memory multicore entries for Vanderbilt, I&#39;ve gone ahead and backed off the GLIDEIN_MaxMemMBs for CMS_T2_US_Vanderbilt_ce1 from 5000 to 4000 to now match the submit attribute +maxMemory = 4000. I&#39;m not sure how well this hack worked out while in place, but I figured we should normalize the entry before we forgot about it.

Also, let us know if you want to disable the single core entries sometime this fall if you&#39;re planning on going fully multicore at some point.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1441144683'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-01T21:58:03+00:00">Sep 1, 2015 09:58 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441144683">&nbsp;</a></div><pre>Works for me. Let&#39;s hit it and see how it goes.

-- by Andrew Melo at Tue Sep 01 21&#58;56&#58;47 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1441144316'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-01T21:51:56+00:00">Sep 1, 2015 09:51 PM UTC</time><a class="anchor" name="1441144316">&nbsp;</a></div><pre>Hi Andrew,

The test jobs ran successfully through these new multicore entries. If you are ready, we can push the entries out to the production factories.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1441119598'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-01T14:59:58+00:00">Sep 1, 2015 02:59 PM UTC</time><a class="anchor" name="1441119598">&nbsp;</a></div><pre>I&#39;ve disabled the ce2_mcore_8GB entry and created two replacement generic mcore entries for ce1 & ce2&#58;
CMS_T2_US_Vanderbilt_ce1_mcore
CMS_T2_US_Vanderbilt_ce2_mcore

Each have xcount=8, maxMemory=56000, GLIDEIN_CPUS=8, and GLIDEIN_MaxMemMBs=56000. I&#39;ll submit another round of test jobs to each, although I doubt there&#39;ll be any problems since things worked fine with the mcore_8GB entry previously. Once that&#39;s done with, we can push them to production when you&#39;re ready.

In regards to the draining pilots, it does seem like there&#39;s been an overall drop in submitted jobs from CMS over the last day. It&#39;s happening on all sites, so I wouldn&#39;t worry about it too much on your end of things.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='26391#1441053918'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-31T20:45:18+00:00">Aug 31, 2015 08:45 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441053918">&nbsp;</a></div><pre>FWIW, do you see any errors on your side? We appear to be draining running pilots...

-- by Andrew Melo at Mon Aug 31 20&#58;44&#58;34 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1441046108'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-31T18:35:08+00:00">Aug 31, 2015 06:35 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441046108">&nbsp;</a></div><pre>Hi Brendan,

Considering we have preposterously high-memory worker nodes, let&#39;s make a multicore queue for xcount = 8, maxMemory= 56000 (7GB/core), that&#39;s around the sweet spot for grabbing multiple cores on any of our hardware (*).   If I understand things right, the dynamic partitioning will make it so people who request a lot of memory will be able to match to some portion of the mcore slots, and we can leave the single core slots as-is (and our local scheduler can use them to fill in holes in whole nodes).

Thanks,
Andrew

* We have 7 256GB 12-core nodes, (252 GB accessible), 225 128GB 12-core nodes (123GB). Our 8-core nodes have 128GB (123GB accessible). They&#39;re overprovisioned for CMS since we share with other groups who use the memory.

-- by Andrew Melo at Mon Aug 31 18&#58;34&#58;00 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1441045207'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-31T18:20:07+00:00">Aug 31, 2015 06:20 PM UTC</time><a class="anchor" name="1441045207">&nbsp;</a></div><pre>The majority of our CMS mcore sites are xcount = 8, maxMemory = 16000 (2GB/core). We have a few that are 8/32000 or 8/24000 as well.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='26391#1441043887'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-31T17:58:07+00:00">Aug 31, 2015 05:58 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441043887">&nbsp;</a></div><pre>Hi Brendan,

I guess a good starting spot would be to figure out what settings other CMS sites are using and emulate them? Thinking out loud, I see there being one singlecore entry and one multicore entry where xcount for the multicore entry is what other sites in CMS use. From what I remember, CMS did decide on a &#39;standard&#39; size for mcore jobs, but I don&#39;t know what that size is. (I think it&#39;s 8?)

Cheers,
Andrew

-- by Andrew Melo at Mon Aug 31 17&#58;57&#58;35 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1441043538'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-31T17:52:18+00:00">Aug 31, 2015 05:52 PM UTC</time><a class="anchor" name="1441043538">&nbsp;</a></div><pre>Hey Andrew,

It sounds like now would be a good time to clarify on what memory queues we should setup. I&#39;m guessing that we should keep the current production entries set to 4GB score, and add in these new queues for 8GB 2core. Going by previous posts, it looks like that&#39;s how these entries are going to scale- adding 4GB and an extra core (so a 12GB 3core, or a 16GB 4core).

It&#39;ll be up to you for how many additional queues we setup in this manner, although we can keep it at the current 4GB and 8GB ones for now if you wish to decide at a later date. This will likely end up with quite a few entries for each CE, but it&#39;ll likely have to do as I&#39;m still not sure of a better way of routing from the factory to your end when the worker nodes are a mixed configuration of cores and memory sizes.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='26391#1440882389'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-29T21:06:29+00:00">Aug 29, 2015 09:06 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1440882389">&nbsp;</a></div><pre>Hi Brendan,

It appears the jobs are making it successfully to the other side using your ITB jobs.

I was hoping to pass through the walltiime through, but we need to update the CE to a newer version for that.

The changes have been propagated to CE1 as well. I guess all that&#39;s left is deciding on what queues make the most sense for CMS and enabling them?

Cheers,
Andrew

-- by Andrew Melo at Sat Aug 29 21&#58;05&#58;11 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1440809930'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-29T00:58:50+00:00">Aug 29, 2015 12:58 AM UTC</time><a class="anchor" name="1440809930">&nbsp;</a></div><pre>Hey Andrew,

I&#39;ve gone ahead and created a new entry on the GOC ITB testing factory to test this. I&#39;ve set the entry name as follows, although this may change in the future when put into production and to take into consideration other entries for different memory sizes&#58;
CMS_T2_US_Vanderbilt_ce2_mcore_8GB

I&#39;ve set submit attributes for xcount=2 and maxMemory=8192, along with glidein attributes for GLIDEIN_CPUS=2 and GLIDEIN_MaxMemMBs=8192. This should make it good to go for testing multicore as well, although the test jobs we send aren&#39;t really multicore optimized. I&#39;ll get some submitted to see how they fare, regardless.

Also, just to check, is the maxWallTime you specify only for testing purposes?

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='26391#1440781984'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-28T17:13:04+00:00">Aug 28, 2015 05:13 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1440781984">&nbsp;</a></div><pre>Hi Again,

I went ahead and got this fixed on ce2.accre.vanderbilt.edu. Now we pass through xcount and maxMemory to the scheduler. Ex&#58;

+xcount = 2
+maxMemory = 8192

Makes a SLURM job that wants two cores and 8192MB of memory. I tested jobs through condor_submit and verified that they did the right thing. If you don&#39;t put those variables into the ad, we default to 1 core and 4096MB of memory.

I guess the next step is to add the different entry for high(er) memory jobs and set the other entry to request the a &#39;regular&#39; amount? I don&#39;t think we&#39;ll need multicore slots for another month or so, so we can just punt on that if you&#39;d like.

Thanks
Andrew

-- by Andrew Melo at Fri Aug 28 17&#58;12&#58;48 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1440776281'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-28T15:38:01+00:00">Aug 28, 2015 03:38 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1440776281">&nbsp;</a></div><pre>Hello al,

Haven&#39;t forgotten about this, just mutitasking aggressively.

In a way, it&#39;s good that this took so long. Now it&#39;s been decided that we&#39;re going to need to run multicore pilots/jobs at some point this fall, so I might as well roll all the changes up into one sitting.

I&#39;m going to stab real at updating the job router + BLAHP bits to accept the xcount/maxMemory/walltime (if I&#39;m already mucking around, why not). While I&#39;m making the changes, would this be sufficient to test out non-default options?

# Required for remote HTCondor CE submission
universe = grid
use_x509userproxy = true
grid_resource = condor condorce.example.com condorce.example.com&#58;9619

# Files
executable = ce_test.sh
output = ce_test.out
error = ce_test.err
log = ce_test.log

# File transfer behavior
ShouldTransferFiles = YES
WhenToTransferOutput = ON_EXIT

# options
+xcount = 2
+maxMemory = 8192
+maxWalltime = 420

# Run job once
queue

To try and keep from blowing everything up, I&#39;m going to (attempt to) set a jobrouter rule to match only on my personal grid cert.

Once I get things fixed on my end, that should free your hand to add the additional entries and change them in the future.

<div id='show_1213520571' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1213520571'>Thanks!
Andrew

-- by Andrew Melo at Fri Aug 28 15&#58;37&#58;21 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a>
</div><script type='text/javascript'>
        $('#show_1213520571').click(function() {
            $('#detail_1213520571').slideDown("normal");
            $('#show_1213520571').hide();
            $('#hide_1213520571').show();
        });
        $('#hide_1213520571').click(function() {
            $('#detail_1213520571').slideUp();
            $('#hide_1213520571').hide();
            $('#show_1213520571').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='26391#1440520472'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-25T16:34:32+00:00">Aug 25, 2015 04:34 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1440520472">&nbsp;</a></div><pre>Hi Again,

The docs are confusing. The example it gives is passing the walltime from the CE to the scheduler. It gives different job router examples but one blahp configuration.

# router 1
JOB_ROUTER_ENTRIES = [ &#92;
GridResource = &#34;batch pbs&#34;; &#92;
TargetUniverse = 9; &#92;
name = &#34;Setting WallTime&#34;; &#92;
/* Set the max walltime to 1 hr */ &#92;
set_default_maxWallTime = 60; &#92;
]

# router 2
JOB_ROUTER_ENTRIES = [ &#92;
GridResource = &#34;batch pbs&#34;; &#92;
TargetUniverse = 9; &#92;
name = &#34;Setting job submit variables&#34;; &#92;
eval_set_remote_cerequirements = strcat(&#34;Walltime == 3600 && AccountingGroup == &#92;&#34;&#34;, TARGET.x509UserProxyFirstFQAN, &#34;&#92;&#34;&#34;); &#92;
]

# blahp

#!/bin/bash
echo &#34;#PBS -l walltime=$Walltime&#34;
echo &#34;#PBS -A $AccountingGroup&#34;

But if I look at <a href='https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/SubmittingHTCondorCE#Job_attributes' target='_blank' rel='nofollow'>https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/SubmittingHTCondorCE#Job_attributes</a>, the attribute is allegedly &#34;maxWalltime&#34;. I don&#39;t mind poking around and making changes, but I also want to be pretty sure that whatever I put in won&#39;t cause a bunch of new pilots to have 1GB/12Hour resource limits from the scheduler.

-- by Andrew Melo at Tue Aug 25 16&#58;34&#58;02 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1440519565'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-25T16:19:25+00:00">Aug 25, 2015 04:19 PM UTC</time><a class="anchor" name="1440519565">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; what is the command you used for slurm?</font>

Did I mention this was quick and dirty? &#58;)

squeue | awk &#39;/uscms/ { print $1 }&#39; &#62; uscms.jobids
while read JOBID; do echo &#34;$JOBID $(rtracejob $JOBID | grep &#39;Requested Memory&#39;); done &#60; uscms.jobids

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Sean Johnson 2789</pre></div><div class='update_description'><i onclick="document.location='26391#1440518975'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-25T16:09:35+00:00">Aug 25, 2015 04:09 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1440518975">&nbsp;</a></div><pre>Hi Sean,

Yeah, that&#39;s the case. What pops up in our scheduler is the the pilot. So, something&#39;s boned with either the jobrouter or the blahp stuff. (p.s. what is the command you used for slurm? All of my easy guesses were wrong)

Christopher/Brian, can you confirm what attribute on the job you&#39;re sending to us to pass the memory request? It would also be totally rad if you had an example configuration from another site that we could crib off of. I could (ab)use either a SLURM or PBS site&#39;s configuration.

-Andrew

-- by Andrew Melo at Tue Aug 25 16&#58;08&#58;48 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1440518522'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-25T16:02:02+00:00">Aug 25, 2015 04:02 PM UTC</time><a class="anchor" name="1440518522">&nbsp;</a></div><pre>According to quick and dirty squeue looping over all currently running uscms* jobs, the Requested Memory value is 4G. I&#39;m assuming the job we see on the local slurm scheduler side is the pilot.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Sean Johnson 2789</pre></div><div class='update_description'><i onclick="document.location='26391#1440515371'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-25T15:09:31+00:00">Aug 25, 2015 03:09 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1440515371">&nbsp;</a></div><pre>Hi,

Sorry! I actually had to cancel my defense because some things weren&#39;t done in time, so I&#39;m scrambling trying to fix it.

Sean, you don&#39;t happen to have a sec to take a peek at this? At this point, we need to see if there&#39;s any uscms jobs that are requesting 5GB in SLURM

-andrew

-- by Andrew Melo at Tue Aug 25 15&#58;08&#58;22 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1440515064'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-25T15:04:24+00:00">Aug 25, 2015 03:04 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1440515064">&nbsp;</a></div><pre>Hello Andrew,

Have you had time to review this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='26391#1439991683'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-19T13:41:23+00:00">Aug 19, 2015 01:41 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1439991683">&nbsp;</a></div><pre>Good luck Andrew!</pre></div><div class='update_description'><i onclick="document.location='26391#1439936571'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-18T22:22:51+00:00">Aug 18, 2015 10:22 PM UTC</time><a class="anchor" name="1439936571">&nbsp;</a></div><pre>No worries. Totally understandable. When you get a chance. Best of luck.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1439936414'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-18T22:20:14+00:00">Aug 18, 2015 10:20 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1439936414">&nbsp;</a></div><pre>Let me get back to you on that. I&#39;m defending my PhD on Friday, so I&#39;m a
little swamped &#58;)

-- by Andrew Melo at Tue Aug 18 22&#58;19&#58;22 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1439934795'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-18T21:53:15+00:00">Aug 18, 2015 09:53 PM UTC</time><a class="anchor" name="1439934795">&nbsp;</a></div><pre>Hi Andrew,

Have you noticed any issues on your end since Brendan implemented the changes to the factory config yesterday? e.g., Are you starting to see higher memory jobs on site?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1439789413'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-17T05:30:13+00:00">Aug 17, 2015 05:30 AM UTC</time><a class="anchor" name="1439789413">&nbsp;</a></div><pre>I&#39;m going to go ahead and give Marty&#39;s idea a try with ce1.accre.vanderbilt.edu, wherein we set GLIDEIN_MaxMemMBs=5GB but set a submit attribute of maxMemory=4GB. We can see how that looks and if it doesn&#39;t seem to be working, we can try going with a second entry for a bigmem queue.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='26391#1439576597'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-14T18:23:17+00:00">Aug 14, 2015 06:23 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1439576597">&nbsp;</a></div><pre>Maybe. Currently all of the pilots end up with 4GB of memory on the local
batch system. I want to be careful about implementing changes -- if no
memory is explicitly requested, we default to 1GB, which will obviously not
work

--
Sent from Gmail Mobile

-- by Andrew Melo at Fri Aug 14 18&#58;22&#58;50 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1439572700'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-14T17:18:20+00:00">Aug 14, 2015 05:18 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1439572700">&nbsp;</a></div><pre>Seems correct to me except you may not even have to change your configuration, depending on how changes are implemented factory-side.

- Brian</pre></div><div class='update_description'><i onclick="document.location='26391#1439572335'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-14T17:12:15+00:00">Aug 14, 2015 05:12 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1439572335">&nbsp;</a></div><pre>Hi all

It looks like we&#39;re converging on a solution.!if I understand right, we
need to configure our endpoint to pass through the memory attribute from
your side to our local scheduler. Then whatever changes you implement on
your side should show up when new pilots come. When different sized user
jobs show up, gWMS will handle getting appropriately-sized pilots to our
site.

Is that about right?
Andrew

--
Sent from Gmail Mobile

-- by Andrew Melo at Fri Aug 14 17&#58;11&#58;32 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1439569684'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-14T16:28:04+00:00">Aug 14, 2015 04:28 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1439569684">&nbsp;</a></div><pre>Sorry for the spam but&#58;

Marty,

How are you guys requesting memory in the pilots? You should be using +maxMemory <a href='https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/SubmittingHTCondorCE#Job_attributes.' target='_blank' rel='nofollow'>https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/SubmittingHTCondorCE#Job_attributes.</a>

- Brian</pre></div><div class='update_description'><i onclick="document.location='26391#1439569425'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-14T16:23:45+00:00">Aug 14, 2015 04:23 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1439569425">&nbsp;</a></div><pre>Andrew,

One thing about your memory snippet from your pbs_local_submit_attributes.sh. You should be able to replace it with default_maxMemory in your routes (<a href='https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/JobRouterRecipes#Maximum_memory' target='_blank' rel='nofollow'>https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/JobRouterRecipes#Maximum_memory</a>)

- Brian</pre></div><div class='update_description'><i onclick="document.location='26391#1439566297'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-14T15:31:37+00:00">Aug 14, 2015 03:31 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1439566297">&nbsp;</a></div><pre>From the sounds of it, separate queues would definitely be the way to go. Since it&#39;s so standard, it would also be easier to troubleshoot in the future!</pre></div><div class='update_description'><i onclick="document.location='26391#1439504617'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T22:23:37+00:00">Aug 13, 2015 10:23 PM UTC</time><a class="anchor" name="1439504617">&nbsp;</a></div><pre>Typically, I believe other sites have separate queues. Then we create separate entries for these queues with the fixed amounts of memory available to user jobs.

Marty Kandes
UCSD Glidein Factory Operations
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1439504450'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T22:20:50+00:00">Aug 13, 2015 10:20 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1439504450">&nbsp;</a></div><pre>Well, I&#39;m not trying to make it more complicated than it needs to be. How are high-memory jobs handled at other sites?

-- by Andrew Melo at Thu Aug 13 22&#58;19&#58;52 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1439504449'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T22:20:49+00:00">Aug 13, 2015 10:20 PM UTC</time><a class="anchor" name="1439504449">&nbsp;</a></div><pre>Let me correct that. That is, I can&#39;t see any other way to do this with out you creating a separate high memory job queue. If it&#39;s all got to be in a single queue, then this is what might work.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1439504123'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T22:15:23+00:00">Aug 13, 2015 10:15 PM UTC</time><a class="anchor" name="1439504123">&nbsp;</a></div><pre>Andrew,

Okay, there may be a way to do this, but I&#39;m not sure how well this will work. We can try keeping $maxMemory = 4 GB (either with your default, or we can explicitly request it from the factory as well), but then we can simultaneously advertise to the frontend GLIDEIN_MaxMemMBs = 5 GB. In this case, I think the frontend will think it can send jobs requiring up to 5 GB your way regardless of whether or not SLURM thinks we asked for 4GB. As long as none of the software along the way is checking to make sure this is all internally consistency, which I would bet it isn&#39;t, then we might get away with this. Of course, on the rare occasion a node might get too many high memory jobs all at once, but that&#39;s the risk.

Anyhow, let me know what you guys want to do. I can&#39;t think of any other options to do what you&#39;re asking.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1439500872'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T21:21:12+00:00">Aug 13, 2015 09:21 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1439500872">&nbsp;</a></div><pre>Hi Marty -

FWIW, I don&#39;t want each pilot itself to be dynamic (I don&#39;t think it would work anyway). The jobs that run at our site are basically 90% &#60; 3GB with the remainder of the time there are jobs with higher-memory requests. We don&#39;t want to simply allocate 5GB of ram for every pilot because there&#39;s less cores available that can fulfill that request. Most of the time the site would be full of pilots requesting little ram, but if a user requests to run a larger job, a new pilot would need to be sent down asking for more ram than the default

-Andrew

-- by Andrew Melo at Thu Aug 13 21&#58;20&#58;38 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1439500819'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T21:20:19+00:00">Aug 13, 2015 09:20 PM UTC</time><a class="anchor" name="1439500819">&nbsp;</a></div><pre>Sean,

No, I don&#39;t think it will map a value into $maxMemory. GLIDEIN_MaxMemMBs_Estimate is a boolean value set on the factory. It&#39;s value should only be advertised to the frontend. It is telling the frontend that glideins will determine the memory available on a worker node once it&#39;s up and running --- or so that is my understanding. That is, when the glidein startups up it checks how much memory is available for user jobs and then advertises this number back to the frontend. What I don&#39;t understand is how you&#39;d properly setup HTCondor-CE for this ... you may not have to do anything, except up your &#34;#PBS -l mem=4096m&#34; echo &#34;#PBS -l pmem=4096m&#34; to the 5 GB limit Andrew was discussing since we don&#39;t currently make any $maxMemory request from the factory.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1439500178'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T21:09:38+00:00">Aug 13, 2015 09:09 PM UTC</time><a class="anchor" name="1439500178">&nbsp;</a></div><pre>The following is in our blahp pbs_local_submit_attributes.sh file on our CEs&#58;

=====
if [ -n &#34;$maxMemory&#34; ]; then
echo &#34;#PBS -l mem=$maxMemory&#34;
echo &#34;#PBS -l pmem=$maxMemory&#34;
else
echo &#34;#PBS -l mem=4096m&#34;
echo &#34;#PBS -l pmem=4096m&#34;
fi
=====

Does the GLIDEIN_MaxMemMBs_Estimate map to the $maxMemory value in blahp? If it does, then it appears like that value will be set, unless it&#39;s blank, at which point we default to 4GB.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Sean Johnson 2789</pre></div><div class='update_description'><i onclick="document.location='26391#1439499961'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T21:06:01+00:00">Aug 13, 2015 09:06 PM UTC</time><a class="anchor" name="1439499961">&nbsp;</a></div><pre>Hi Brian,

Thanks for the quick reply.

Yes, we can definitely make use of the &#39;RequestMemory&#39; submit attribute here if that&#39;s the right solution for what Andrew is trying to accomplish. But I think he wants glideins to dynamically adjust memory usage (up to a max of 5 GB) depending on user jobs running at the site, if possible. However, (1) I&#39;m not sure how to tell Andrew how to do this from the HTCondor-CE side and/or (2) how any of this is related to or affected by the &#39;hardcoded&#39; 4 GB memory allocation request they currently make to SLURM when passing glideins into the local batch queue. I was thinking we should try and use the GLIDEIN_MaxMemMBs_Estimate attribute on the factory [1] so the glideins will figure out how much memory is available when they startup on a worker node, but I&#39;m not sure what Andrew will have to do on his side to set the 5 GB max limit on this.

Marty Kandes
UCSD Glidein Factory Operations

[1]

<a href='http&#58;//www.uscms.org/SoftwareComputing/Grid/WMS/glideinWMS/doc.prd/factory/custom_vars.html' target='_blank' rel='nofollow'>http&#58;//www.uscms.org/SoftwareComputing/Grid/WMS/glideinWMS/doc.prd/factory/custom_vars.html</a>

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1439499174'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T20:52:54+00:00">Aug 13, 2015 08:52 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1439499174">&nbsp;</a></div><pre>Marty,

I&#39;m not sure if there&#39;s anything that needs to be done on the CE end since as I understand it, pilots from the factory set &#39;RequestMemory&#39;, which HTCondor CE automatically passes onto a site&#39;s batch system. Granted, I haven&#39;t read this entire thread, so is that not sufficient?

- Brian</pre></div><div class='update_description'><i onclick="document.location='26391#1439498581'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T20:43:01+00:00">Aug 13, 2015 08:43 PM UTC</time><a class="anchor" name="1439498581">&nbsp;</a></div><pre>Brian,

Maybe you can help us with the HTCondor-CE side of things here since I&#39;m not familiar with it?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1439498412'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T20:40:12+00:00">Aug 13, 2015 08:40 PM UTC</time><a class="anchor" name="1439498412">&nbsp;</a></div><pre>Hi Andrew,

Well, check on the hardcoded 4 GB setting as to why it is configured like that. Here is some clarification on how glideins and user jobs work ...

A glideinWMS frontend handles user jobs submissions. The frontend makes requests to the factory for glideins to be sent to a site like Vanderbilt. The factory submits glideins for the frontend to the site&#39;s gatekeeper, which in turn submits the glideins to its local batch system. Once a glidein is running on a worker node at the site, it communications back to the frontend and asks for user jobs to be submitted to it.

By default, the glideins from the factory don&#39;t request any specific memory requirements from a site upon submission. Instead, the default is to simply advertise to the frontend how much memory you have available per core so they know which jobs can run at your site. So they&#39;ll only send jobs requesting less than GLIDEIN_MaxMemMBs to the glideins already running at the site.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1439494847'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T19:40:47+00:00">Aug 13, 2015 07:40 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1439494847">&nbsp;</a></div><pre>Hi Marty,

I see two somewhat independent things that need to be done&#58;

1) We need to implement and make sure that memory requests from the factory to our CE our propagated to the scheduler. Currently it&#39;s hardcoded to 4G, but I don&#39;t know why. I want to be real careful and not break the current (working) configuration though.

2) We want to let the gWMS factory know that it can request up to 5G of memory per core and we&#39;ll schedule the job. Ideally a CMS user could send jobs to the factory and it would handle (if needed) sending in higher-memory pilots to service their requests.

Cheers,
Andrew

-- by Andrew Melo at Thu Aug 13 19&#58;40&#58;17 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1439491750'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T18:49:10+00:00">Aug 13, 2015 06:49 PM UTC</time><a class="anchor" name="1439491750">&nbsp;</a></div><pre>Hi Andrew,

Thanks for your responses. And no worries about the glideinWMS confusion, we often don&#39;t have a clear idea how things work on your end either. Now, with that said, I&#39;m still a bit confused how things are configured on your end.

In your first reply, it sounds like you&#39;re saying that when we submit a glidein from the factory to the gatekeeper, it then submits the glidein to SLURM with a request for an allocation of 4GB of memory. Is this correct? If so, I&#39;m not sure how to square that with your second reply, which seems to suggest SLURM will allow some sort of dynamic memory allocation. Can you clarify?

Anyhow, I think our best option may be to try and employ the GLIDEIN_MaxMemMBs_Estimate attribute. Have a read here [1]. However, if you do have a hardcoded memory limit on glideins when they are passed to SLURM, then we should probably simply advertise this as the hard upper memory limit on jobs as well and not try anything dynamic. i.e., we&#39;ll just set the GLIDEIN_MaxMemMBs attribute to this hardcoded number.

Marty Kandes
UCSD Glidein Factory Operations

[1]

<a href='http&#58;//www.uscms.org/SoftwareComputing/Grid/WMS/glideinWMS/doc.prd/factory/custom_vars.html' target='_blank' rel='nofollow'>http&#58;//www.uscms.org/SoftwareComputing/Grid/WMS/glideinWMS/doc.prd/factory/custom_vars.html</a>

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1439484942'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T16:55:42+00:00">Aug 13, 2015 04:55 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1439484942">&nbsp;</a></div><pre>Hi Brendan,

Sorry, I reread your mail and have one thing to add&#58;

SLURM will internally handle making sure that if a job asks for 4GB (or 8 or 16, even), the worker node it lands on will have those resources available. But, if you have two jobs with the same priority, it&#39;s possible that the 4GB job will have to queue longer than the 2GB job because nothing is available to serve the request. That&#39;s part of the reason we don&#39;t want to just unilaterally have all pilots run w/5GB/core, not all of our hardware has that much memory per core, so the only place our scheduler could place the jobs would be in either a) hardware that has enough memory or b) hardware that doesn&#39;t have enough memory, but the other jobs on the node aren&#39;t using all theirs.

Sorry for the long explanation. I have a glancing understanding of how gWMS works and I&#39;m don&#39;t really have the language to express this request in a shorter way.

-Andrew

-- by Andrew Melo at Thu Aug 13 16&#58;55&#58;09 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1439483865'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T16:37:45+00:00">Aug 13, 2015 04:37 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1439483865">&nbsp;</a></div><pre>Hi all,

Sorry for the delay, I&#39;m defending my PhD next week, so I&#39;m spread a bit thin.

I&#39;m not sure how to express it properly, but have one queue with all our nodes. We would like to accept glidein pilots with up to 5GB/core, but less if possible (eg if there&#39;s only jobs requesting 2GB/core waiting to run here, we don&#39;t want to burn 3GB by having a 5GB pilot service it).

The other hitch is that we currently hardcode the memory request internally to 4GB/core when we pass it to the scheduler, so we&#39;d need to configure/test the job router on our end to pass the memory request through.

Cheers,
Andrew

-- by Andrew Melo at Thu Aug 13 16&#58;37&#58;22 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1439314833'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-11T17:40:33+00:00">Aug 11, 2015 05:40 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1439314833">&nbsp;</a></div><pre>Hello Andrew,

Have you reviewed in the information from Brendan&#39;s last post? Have you decided how you would like to proceed?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='26391#1438838191'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-06T05:16:31+00:00">Aug 6, 2015 05:16 AM UTC</time><a class="anchor" name="1438838191">&nbsp;</a></div><pre>Hi Andrew,

From the factory side, we have two attributes we can change that affect the max memory available for a glidein&#58;
1.) Adding the maxMemory CE submit attribute with a specific value (not necessarily required to be set)
2.) Changing the GLIDEIN_MaxMemMBs attribute to a certain value to influence matching (set by default factory wide to 2500, changed on a per-entry basis as needed)

We currently don&#39;t have maxMemory set at all for either Vanderbilt CE, but we do have GLIDEIN_MaxMemMBs set to 3000 for both. If I&#39;m reading everything in this thread so far correctly, I think all that we&#39;ll need to do is bump that MaxMemMBs attribute up to 4500, and we should be good from there. However, this only applies if all worker nodes are going to have 4.5GB/core available. If not, the ones below 4.5GB will not pass the matching tests, as MaxMemMBs is the amount of memory that will always be requested. If you&#39;re going to have nodes with various memory sizes available, then our best bet would probably be having to create two queues- one with MaxMemMBs kept at 3000, and another with it set to 4500.

I should stress the &#34;I think&#34; portion of that paragraph though- I&#39;m not 100% certain on if this will get what you&#39;re aiming for either.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='26391#1438799752'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-05T18:35:52+00:00">Aug 5, 2015 06:35 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1438799752">&nbsp;</a></div><pre>Sorry for two posts -- to answer your question, we just have a single queue, so as long as we can somehow get a number of MB you want to our CE, we can pass it inside. (same for running w/multiple cores, whenever that&#39;s supposed to be implemented)

-Andrew

-- by Andrew Melo at Wed Aug 05 18&#58;35&#58;21 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1438799568'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-05T18:32:48+00:00">Aug 5, 2015 06:32 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1438799568">&nbsp;</a></div><pre>Hi Marty,

Cool, got it all squared away with the people locally. Forgive my not understanding 100% how this works -- ideally we&#39;d like to give you a maximum amount of memory/core, and the factory will make pilots that request pilots with at most that amount of memory. If those pilots have the maxmemory attribute set when they come to our HTCondor CEs, we should be able to use blahp to convert that attribute into a PBS request. On your side, it should all look like one queue, correct?

thanks,
Andrew

-- by Andrew Melo at Wed Aug 05 18&#58;30&#58;34 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1438726222'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-04T22:10:22+00:00">Aug 4, 2015 10:10 PM UTC</time><a class="anchor" name="1438726222">&nbsp;</a></div><pre>Hi Andrew,

Yeah, check with your admins if they have any memory-specific limits on the queues we submit glideins to. If there isn&#39;t any, I don&#39;t think there should be much to change on your end. But I&#39;m not too familiar with gatekeeper configuration.

In terms of the factory config, our preference would probably be to just increase the memory limits for your current gatekeeper entries. It&#39;s simply easier for us to manage fewer entries. But sometimes sites have specific reasons for multiple entries into their gatekeepers. Anyhow, let us know what works for you and we&#39;ll make the necessary changes on our end.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1438725654'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-04T22:00:54+00:00">Aug 4, 2015 10:00 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1438725654">&nbsp;</a></div><pre>Hi Marty,

Let me double-check with the admins here. We run SLURM as our scheduler, so in theory we could just pass through whatever arbitrary memory request you send our way, right?

-Andrew

-- by Andrew Melo at Tue Aug 04 22&#58;00&#58;38 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a></pre></div><div class='update_description'><i onclick="document.location='26391#1438724703'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-04T21:45:03+00:00">Aug 4, 2015 09:45 PM UTC</time><a class="anchor" name="1438724703">&nbsp;</a></div><pre>Hi Andrew,

Would you like us to create a separate &#39;high memory&#39; entry for these gatekeepers? Or can we simply bump up their current memory limits in the factory config? We can push either change whenever you&#39;re ready since it will only affect new glideins submitted to Vanderbilt.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26391#1438709579'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-04T17:32:59+00:00">Aug 4, 2015 05:32 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1438709579">&nbsp;</a></div><pre>I have added OSG Glidein support to this for review.</pre></div><div class='update_description'><i onclick="document.location='26391#1438637883'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-03T21:38:03+00:00">Aug 3, 2015 09:38 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1438637883">&nbsp;</a></div><pre>Hello, glidein factory operators,

We (vanderbilt.edu) would like to change it so that users can use 4.5GB/core. If I understand correctly, we&#39;ll need to make changes on our end as well as on the factory side. Could we begin that process for ce1.accre.vanderbilt.edu and ce2.accre.vanderbilt.edu?

Thanks
Andrew
Affected Site&#58; Vanderbilt

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115459</a>

[Ticket History]
Subject&#58; Glidein parameters for vanderbilt.edu
Ticket Type&#58; USER
CC&#58;
-- by Andrew Melo at Mon Aug 03 21&#58;37&#58;30 UTC 2015</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F26391">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
