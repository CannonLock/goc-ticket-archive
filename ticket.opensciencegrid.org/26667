<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[26667] Problems connecting to VOMS Admin instance at Indiana</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=26667" method="post">
<div class="page-header">
    <h3><span class="muted">26667</span> / Problems connecting to VOMS Admin instance at Indiana</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Tim Cartwright</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Tim Cartwright</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Tom Please Review</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-09-21</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Thomas Lee <span class="muted"> / OSG Operations Infrastructure</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=26667", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26667?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26667?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Problems%20connecting%20to%20VOMS%20Admin%20instance%20at%20Indiana%20ISSUE%3D26667%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='26667#1443635563'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-30T17:52:43+00:00">Sep 30, 2015 05:52 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1443635563">&nbsp;</a></div><pre>Talked to Tom, based on that and Tim&#39;s last update, I will close this. If there are any issues. Please let me know and we can reopen this.

Regards,
Chris</pre></div><div class='update_description'><i onclick="document.location='26667#1442610021'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T21:00:21+00:00">Sep 18, 2015 09:00 PM UTC</time> by <b>Thomas Lee</b><a class="anchor" name="1442610021">&nbsp;</a></div><pre>Excellent news!

For the record, /etc/tomcat5/server.xml now looks like this (sans comments)&#58;

&#60;Server port=&#34;8005&#34; shutdown=&#34;SHUTDOWN&#34;&#62;
&#60;Service name=&#34;Catalina&#34;&#62;

&#60;Connector port=&#34;8443&#34;
SSLEnabled=&#34;true&#34;
maxThreads=&#34;150&#34;
minSpareThreads=&#34;25&#34;
maxSpareThreads=&#34;75&#34;
enableLookups=&#34;false&#34;
disableUploadTimeout=&#34;true&#34;
acceptCount=&#34;100&#34;
debug=&#34;0&#34;
scheme=&#34;https&#34;
secure=&#34;true&#34;
sSLImplementation=&#34;org.glite.security.trustmanager.tomcat.TMSSLImplementation&#34;
trustStoreDir=&#34;/etc/grid-security/certificates&#34;
sslCertFile=&#34;/etc/grid-security/http/httpcert.pem&#34;
sslKey=&#34;/etc/grid-security/http/httpkey.pem&#34;
crlUpdateInterval=&#34;2h&#34;
log4jConfFile=&#34;/usr/share/tomcat5/conf/log4j-trustmanager.properties&#34;
clientAuth=&#34;true&#34;
sslProtocol=&#34;TLS&#34;
crlEnabled=&#34;true&#34;
crlRequired=&#34;true&#34;
sslEnabledProtocols=&#34;TLSv1,TLSv1.1,TLSv1.2&#34;
ciphers=&#34;SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA,SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA,SSL_DHE_DSS_WITH_DES_CBC_SHA,SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA,SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA,SSL_DHE_RSA_WITH_DES_CBC_SHA,SSL_RSA_EXPORT_WITH_DES40_CBC_SHA,SSL_RSA_EXPORT_WITH_RC4_40_MD5,SSL_RSA_WITH_3DES_EDE_CBC_SHA,SSL_RSA_WITH_DES_CBC_SHA,SSL_RSA_WITH_RC4_128_MD5,SSL_RSA_WITH_RC4_128_SHA,TLS_DHE_DSS_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_128_CBC_SHA&#34;
/&#62;

I will now return logging to a higher level than DEBUG so the logs don&#39;t get too huge.</pre></div><div class='update_description'><i onclick="document.location='26667#1442609580'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T20:53:00+00:00">Sep 18, 2015 08:53 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1442609580">&nbsp;</a></div><pre>Works great for me using the same software that led to the creation of this ticket!</pre></div><div class='update_description'><i onclick="document.location='26667#1442608855'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T20:40:55+00:00">Sep 18, 2015 08:40 PM UTC</time> by <b>Thomas Lee</b><a class="anchor" name="1442608855">&nbsp;</a></div><pre>I found a way to list the supported ciphers in an installation of Java and used it on Tomcat 5 on voms.grid -- I added a &#39;ciphers=&#34;...&#34;&#39; attribute to the connector in /etc/tomcat/server.xml.  Then I experimented with leaving ciphers out of that list.  Mostly this resulted in the same error, though, until I found a page suggesting that I leave out only TLS_DHE_RSA_WITH_AES_128_CBC_SHA.  I have done this, and now the error has gone away for me.  Please let me know whether this has had a similar effect for anyone else.</pre></div><div class='update_description'><i onclick="document.location='26667#1442511743'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-17T17:42:23+00:00">Sep 17, 2015 05:42 PM UTC</time> by <b>Thomas Lee</b><a class="anchor" name="1442511743">&nbsp;</a></div><pre>The relatively small amount of use of Apache Tomcat as compared to Apache httpd makes it difficult to find solutions to this, especially since Tomcat 5 is not the most recent version of Tomcat, and most users of it have switched to more recent versions.  It doesn&#39;t help that when I add the recommended fix, the server completely stops responding with no log messages explaining why.  Do we know anyone who knows more about Tomcat than I do (I know very little)?</pre></div><div class='update_description'><i onclick="document.location='26667#1442247703'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-14T16:21:43+00:00">Sep 14, 2015 04:21 PM UTC</time> by <b>Thomas Lee</b><a class="anchor" name="1442247703">&nbsp;</a></div><pre>From what I&#39;m seeing, this is occurring because more recent browser versions are trying to protect users from servers that are susceptible to the Logjam vulnerability&#58; <a href='https&#58;//weakdh.org/' target='_blank' rel='nofollow'>https&#58;//weakdh.org/</a>

To strengthen servers against this vulnerability&#58; <a href='https&#58;//weakdh.org/sysadmin.html' target='_blank' rel='nofollow'>https&#58;//weakdh.org/sysadmin.html</a> -- this has directions for various types of server that use SSL, including Apache Tomcat.

After following the directions, I no longer get the &#34;weak ephemeral Diffie-Hellman key&#34; error when I go to <a href='https&#58;//voms.grid.iu.edu&#58;8443/voms/osgedu/admin/home.action' target='_blank' rel='nofollow'>https&#58;//voms.grid.iu.edu&#58;8443/voms/osgedu/admin/home.action</a> .  However, I get no response from the server at all anymore.  Logging seems not to be fully enabled.  I&#39;m not sure what&#39;s wrong.  Returned it to how I found it.</pre></div><div class='update_description'><i onclick="document.location='26667#1442244904'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-14T15:35:04+00:00">Sep 14, 2015 03:35 PM UTC</time> by <b>Thomas Lee</b><a class="anchor" name="1442244904">&nbsp;</a></div><pre>I see this same issue when I go there using Firefox (v40.0.3 for Mac OS, if that makes a difference).

I&#39;m not sure what certificate is actually in use.  Firefox won&#39;t let me see the certificate it thinks it&#39;s getting.  I used &#34;openssl s_client&#34; to get the server certificate, and it is a DigiCert-Grid certificate using a 2048-bit RSA key created on May 6, 2015.  This is not the source of the weak ephemeral Diffie-Hellman key mentioned in the error message.  This key must be generated by the server as part of the handshaking process.  I don&#39;t know enough about the VOMS software, which appears to use Java and Tomcat5, to know where one configures the sort of temporary key used during handshaking.

Googling for this tells me there is something one must do to the /etc/tomcatX/server.xml config file to tell it not to use particular ciphers (or to tell it to use only certain ciphers, excluding the vulnerable one(s)), but exactly what value(s) to use I am not sure.</pre></div><div class='update_description'><i onclick="document.location='26667#1441205760'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T14:56:00+00:00">Sep 2, 2015 02:56 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1441205760">&nbsp;</a></div><pre>Thanks, Tim.  We&#39;ll see what can be done with Chrome and Firefox.

Adding Tom L. to this ticket to review.</pre></div><div class='update_description'><i onclick="document.location='26667#1441202372'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T13:59:32+00:00">Sep 2, 2015 01:59 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1441202372">&nbsp;</a></div><pre>OK, weird. For a long time, I used Chrome just for the VOMS Admin site because Safari did not work with it. Now Safari works (I just used it to reinstate Elizabeth into the VO), but Chrome does not. Yay, software!</pre></div><div class='update_description'><i onclick="document.location='26667#1441201963'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T13:52:43+00:00">Sep 2, 2015 01:52 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1441201963">&nbsp;</a></div><pre>Hi Tim,

We are taking a look at this.  Chrome 45 (and up) and Firefox are seeing the same error.
We are able to access the page using Safari on OS X.

Thanks!
Vince</pre></div><div class='update_description'><i onclick="document.location='26667#1441201465'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T13:44:25+00:00">Sep 2, 2015 01:44 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1441201465">&nbsp;</a></div><pre>This morning, I tried connecting to the VOMS Admin instance at Indiana for the OSGEDU VO using this URL&#58;
<a href='https&#58;//voms.grid.iu.edu&#58;8443/voms/osgedu/admin/home.action' target='_blank' rel='nofollow'>https&#58;//voms.grid.iu.edu&#58;8443/voms/osgedu/admin/home.action</a>

I got the following error message from the Chrome web browser (running on OS X)&#58;

Server has a weak ephemeral Diffie-Hellman public key
ERR_SSL_WEAK_SERVER_EPHEMERAL_DH_KEY
Hide details

This error can occur when connecting to a secure (HTTPS) server. It means that the server is trying to set up a secure connection but, due to a disastrous misconfiguration, the connection wouldn&#39;t be secure at all!
In this case the server needs to be fixed. Google Chrome won&#39;t use insecure connections in order to protect your privacy.
Learn more about this problem

I think that I have heard about this issue, but forget the root cause and possible fixes. Do you guys remember?

— Tim</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F26667">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 26667});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
