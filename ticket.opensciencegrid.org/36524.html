<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[36524] Low HCxrootd - SAM xrootd-access success rates at US Sites</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=36524" method="post">
<div class="page-header">
    <h3><span class="muted">36524</span> / Low HCxrootd - SAM xrootd-access success rates at US Sites</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Sebastian Pulido</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Sebastian Pulido</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">High</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2018-04-07</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Sarah Schmiechen <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Sarah Schmiechen <span class="muted"> / OSG Operations Infrastructure</span></div><div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000936443">INC000000936443</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=134238">134238</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/36524", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='36524#1522672895'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-04-02T12:41:35+00:00">Apr 2, 2018 12:41 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1522672895">&nbsp;</a></div><pre>Situation looks way better [1] and corrections for yesterday SAM metric were made for all sites involved.

Thanks everyone!

Maria

[1] <a href='http&#58;//dashb-cms-job.cern.ch/dashboard/templates/task-analysis/#user=Andrea+Sciaba&refresh=0&table=Jobs&p=1&records=-1&activemenu=2&status=&site=&tid=180327_074056%3Asciaba_crab_HC-162-AnySite-59186-20180327093902-T1_US_FNALGlobal' target='_blank' rel='nofollow'>http&#58;//dashb-cms-job.cern.ch/dashboard/templates/task-analysis/#user=Andrea+Sciaba&refresh=0&table=Jobs&p=1&records=-1&activemenu=2&status=&site=&tid=180327_074056%3Asciaba_crab_HC-162-AnySite-59186-20180327093902-T1_US_FNALGlobal</a> redirector was restarted but no apparent root cause was identified.&#13;

-- by Maria Acosta at Tue Mar 27 16&#58;12&#58;02 UTC 2018

<font color='#7F7E6F'>&#62; <a href='https&#58;//cmssst.web.cern.ch/cmssst/aaa/T1_US_FNAL_report.html' target='_blank' rel='nofollow'>https&#58;//cmssst.web.cern.ch/cmssst/aaa/T1_US_FNAL_report.html</a></font>

...from the test it self (even it&#39;s two week summary) of you hover with mouse over bar the issues started sometime on 23rd. Same from the dashboard. But I guess you&#39;ve noticed it. I&#39;m still not unsure to judge what could be root cause and if it&#39;s common, though.&#13;

-- by Marian Zvada at Mon Mar 26 21&#58;12&#58;24 UTC 2018

I&#39;m not sure this is correlated with the original source of the ticket -- which is still red.  Not sure what purpose the monitoring here has&#58;

<a href='https&#58;//cmssst.web.cern.ch/cmssst/aaa/T1_US_FNAL_report.html' target='_blank' rel='nofollow'>https&#58;//cmssst.web.cern.ch/cmssst/aaa/T1_US_FNAL_report.html</a>

Other than to say that there apparently was something wrong in the tests in the last two weeks (I think?).  Looking at the time series in dashboard you can see when these tests began there must have been problems  early on.

<a href='http&#58;//dashb-cms-jobsmry.cern.ch/dashboard/request.py/terminatedjobsstatus_individual?sites=T1_US_FNAL&activities=hcxrootd&sitesSort=1&start=null&end=null&timeRange=lastWeek&sortBy=0&granularity=Hourly&generic=0&series=All&type=ebsf' target='_blank' rel='nofollow'>http&#58;//dashb-cms-jobsmry.cern.ch/dashboard/request.py/terminatedjobsstatus_individual?sites=T1_US_FNAL&activities=hcxrootd&sitesSort=1&start=null&end=null&timeRange=lastWeek&sortBy=0&granularity=Hourly&generic=0&series=All&type=ebsf</a>

Expanding that across US sites seems to show it was common.  I&#39;d close the ticket once we&#39;re satisfied with the SAM tests, and offer not to open new ones on the HC xrootd tests without a lot of additional evidence!&#13;

-- by David Mason at Mon Mar 26 20&#58;49&#58;34 UTC 2018

The issue looked serious enough to really cause more troubles, I think. I&#39;m very curious as well what triggered such an effect! I&#39;m afraid we won&#39;t find anything unless somebody at CERN saw anything wide-network related. Still, if this peculiar thing targeted only xrootd service on on the half of the WAN, I&#39;m puzzled... As I said, I had no issues transfering from my VM in US over global redirectors, even individually. I have tested quite some cases. Anyway, let&#39;s see how the things go. Thanks for alarming me and others!

-Marian&#13;

-- by Marian Zvada at Mon Mar 26 20&#58;13&#58;26 UTC 2018

Thanks Marian,
<div id='show_253512645' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_253512645'>
I&#39;m curious on what triggered this misbehavior since it could&#39;ve easily escalated to a much bigger issue... so please if you find anything, keep us posted.

SAM tests are slowly going back to normal... I&#39;ll give it a few hours, make corrections and close the ticket later today.

Maria&#13;

-- by Maria Acosta at Mon Mar 26 20&#58;06&#58;16 UTC 2018

Hi,

I just did just a random restart of one of the CERN redirectors after 1hr of finding nothing, no evidence at least from the logs on CERN side, but obviously non of the clients were able to fetch the files from the EU side while on the US side things worked. I can&#39;t explain what happened, but I suspect some routing on the CERN end or some some other network glitch causing xrootd get into the funky state. Only partially, though.

See also my comment in the hypernews log about it&#58; <a href='https&#58;//hypernews.cern.ch/HyperNews/CMS/get/wanaccess/552/1/1.html' target='_blank' rel='nofollow'>https&#58;//hypernews.cern.ch/HyperNews/CMS/get/wanaccess/552/1/1.html</a>

-Marian&#13;

-- by Marian Zvada at Mon Mar 26 19&#58;59&#58;33 UTC 2018

Hi Dave,

I think Marian did a cmsd/xrootd restart on xrdcmsglobal01.cern.ch.

Regards,
Yujun
On 03/26/2018 02&#58;51 PM, helpdesk@.... wrote&#58;
<font color='#7F7E6F'>&#62; Hello,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GGUS Ticket #134238 was updated.</font>
<font color='#7F7E6F'>&#62; You receive this mail in CC for your information.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; REFERENCE LINK&#58; <a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=134238' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=134238</a></font>
<font color='#7F7E6F'>&#62; SUBJECT&#58; Low HCxrootd - SAM xrootd-access success rates at US Sites</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; =====================</font>
<font color='#7F7E6F'>&#62; LATEST MODIFICATIONS&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; LAST MODIFIER -&#62; David Mason</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; PUBLIC DIARY -&#62;</font>
<font color='#7F7E6F'>&#62; Now some of these are working.  Did somebody do something on the CERN end?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>
<font color='#7F7E6F'>&#62;   This is an automated mail. When replying don&#39;t change the subject line!</font>
<font color='#7F7E6F'>&#62;   S T R I P  P R E V I O U S  M A I L S please!!</font>
<font color='#7F7E6F'>&#62; *********************************************************************************&#13;</font>

-- by Yujun Wu at Mon Mar 26 19&#58;58&#58;07 UTC 2018

Now some of these are working.  Did somebody do something on the CERN end?&#13;

-- by David Mason at Mon Mar 26 19&#58;50&#58;59 UTC 2018

Is there any DNS issue (or mix up) at Cern side? Maybe somebody can
traceroute to FNAL or UNL from CERN or KIT using either IPv4 or IPv6
protocol?

Regards,
Yujun

On 03/26/2018 02&#58;41 PM, helpdesk@.... wrote&#58;
<font color='#7F7E6F'>&#62; Hello,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GGUS ticket #134238 was updated.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; REFERENCE LINK&#58; <a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=134238' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=134238</a></font>
<font color='#7F7E6F'>&#62; SUBJECT&#58; Low HCxrootd - SAM xrootd-access success rates at US Sites</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; =====================</font>
<font color='#7F7E6F'>&#62; LATEST MODIFICATIONS&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; LAST MODIFIER -&#62; David Mason</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; PUBLIC DIARY -&#62;</font>
<font color='#7F7E6F'>&#62; Yujun tried resstarting the FNAL piece of the US regional redirector -- it does not seem to be making a difference in this test -- I also fail trying to pull down the test file&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [2018-03-26 19&#58;24&#58;12.531877 +0000][Debug  ][File              ] [0xf77c20@root&#58;//cms-xrd-global.cern.ch&#58;1094//store/test/xrootd/T1_US_FNAL_Disk//store/mc/SAM/GenericTTbar/AODSIM/CMSSW_9_0_0_90X_mcRun1_realistic_v4-v1/10000/28B9D1FB-8B31-E711-AA4E-0025905B85B2.root] Error while opening at cms-xrd-global.cern.ch&#58;1094&#58; [ERROR] Server responded with an error&#58; [3011] No servers are reachable via public IPv4 network to read the file.</font>
<font color='#7F7E6F'>&#62; [0B/0B][100%][==================================================][0B/s]</font>
<font color='#7F7E6F'>&#62; Run&#58; [ERROR] Server responded with an error&#58; [3011] No servers are reachable via public IPv4 network to read the file.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [2018-03-26 19&#58;27&#58;34.880049 +0000][Debug  ][File              ] [0x2479c20@root&#58;//cms-xrd-global.cern.ch&#58;1094//store/test/xrootd/T2_US_Nebraska//store/mc/SAM/GenericTTbar/AODSIM/CMSSW_9_0_0_90X_mcRun1_realistic_v4-v1/10000/28B9D1FB-8B31-E711-AA4E-0025905B85B2.root] Error while opening at cms-xrd-global.cern.ch&#58;1094&#58; [ERROR] Server responded with an error&#58; [3011] No servers are reachable via public IPv4 network to read the file.</font>
<font color='#7F7E6F'>&#62; [0B/0B][100%][==================================================][0B/s]</font>
<font color='#7F7E6F'>&#62; Run&#58; [ERROR] Server responded with an error&#58; [3011] No servers are reachable via public IPv4 network to read the file.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Works in both cases direct with either of the regional redirector hosts -- FNAL or UNL.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>
<font color='#7F7E6F'>&#62;   This is an automated mail. When replying don&#39;t change the subject line!</font>
<font color='#7F7E6F'>&#62;   S T R I P  P R E V I O U S  M A I L S please!!</font>
<font color='#7F7E6F'>&#62; *********************************************************************************&#13;</font>

-- by Yujun Wu at Mon Mar 26 19&#58;48&#58;28 UTC 2018

Error is different depending on which network stack is used...

When using IPv6&#58; Network unreachable [1] and when using IPv4&#58; No servers are reachable via public IPv4 network to read the file.

[1]
[21&#58;33][macostaf@lxplus043&#58;~]$ XRD_NETWORKSTACK=IPv6 xrdcp -d 2 -f root&#58;//cms-xrd-global.cern.ch&#58;1094//store/test/xrootd/T1_US_FNAL_Disk/store/mc/HC/GenericTTbar/GEN-SIM-RECO/CMSSW_7_0_4_START70_V7-v1/00000/001736F8-DFCC-E311-AA71-02163E00E7C0.root /dev/null
[2018-03-26 21&#58;33&#58;06.030133 +0200][Error  ][XRootD            ] [cms-xrd-global.cern.ch&#58;1094] Unable to send the message kXR_open (file&#58; /store/test/xrootd/T1_US_FNAL_Disk/store/mc/HC/GenericTTbar/GEN-SIM-RECO/CMSSW_7_0_4_START70_V7-v1/00000/001736F8-DFCC-E311-AA71-02163E00E7C0.root, mode&#58; 00, flags&#58; kXR_open_read kXR_async kXR_retstat )&#58; [FATAL] Socket error&#58; Network is unreachable
[0B/0B][100%][==================================================][0B/s]
Run&#58; [FATAL] Socket error&#58; Network is unreachable

[2] [21&#58;31][macostaf@lxplus043&#58;~]$ XRD_NETWORKSTACK=IPv4 xrdcp -d 2 -f root&#58;//cms-xrd-global.cern.ch&#58;1094//store/test/xrootd/T1_US_FNAL_Disk/store/mc/HC/GenericTTbar/GEN-SIM-RECO/CMSSW_7_0_4_START70_V7-v1/00000/001736F8-DFCC-E311-AA71-02163E00E7C0.root /dev/null
[2018-03-26 21&#58;31&#58;44.032390 +0200][Debug  ][File              ] [0x1518330@root&#58;//cms-xrd-global.cern.ch&#58;1094//store/test/xrootd/T1_US_FNAL_Disk/store/mc/HC/GenericTTbar/GEN-SIM-RECO/CMSSW_7_0_4_START70_V7-v1/00000/001736F8-DFCC-E311-AA71-02163E00E7C0.root] Error while opening at cms-xrd-global.cern.ch&#58;1094&#58; [ERROR] Server responded with an error&#58; [3011] No servers are reachable via public IPv4 network to read the file.&#13;

-- by Maria Acosta at Mon Mar 26 19&#58;45&#58;51 UTC 2018

Yujun tried resstarting the FNAL piece of the US regional redirector -- it does not seem to be making a difference in this test -- I also fail trying to pull down the test file&#58;

[2018-03-26 19&#58;24&#58;12.531877 +0000][Debug  ][File              ] [0xf77c20@root&#58;//cms-xrd-global.cern.ch&#58;1094//store/test/xrootd/T1_US_FNAL_Disk//store/mc/SAM/GenericTTbar/AODSIM/CMSSW_9_0_0_90X_mcRun1_realistic_v4-v1/10000/28B9D1FB-8B31-E711-AA4E-0025905B85B2.root] Error while opening at cms-xrd-global.cern.ch&#58;1094&#58; [ERROR] Server responded with an error&#58; [3011] No servers are reachable via public IPv4 network to read the file.
[0B/0B][100%][==================================================][0B/s]
Run&#58; [ERROR] Server responded with an error&#58; [3011] No servers are reachable via public IPv4 network to read the file.

[2018-03-26 19&#58;27&#58;34.880049 +0000][Debug  ][File              ] [0x2479c20@root&#58;//cms-xrd-global.cern.ch&#58;1094//store/test/xrootd/T2_US_Nebraska//store/mc/SAM/GenericTTbar/AODSIM/CMSSW_9_0_0_90X_mcRun1_realistic_v4-v1/10000/28B9D1FB-8B31-E711-AA4E-0025905B85B2.root] Error while opening at cms-xrd-global.cern.ch&#58;1094&#58; [ERROR] Server responded with an error&#58; [3011] No servers are reachable via public IPv4 network to read the file.
[0B/0B][100%][==================================================][0B/s]
Run&#58; [ERROR] Server responded with an error&#58; [3011] No servers are reachable via public IPv4 network to read the file.

Works in both cases direct with either of the regional redirector hosts -- FNAL or UNL.&#13;

-- by David Mason at Mon Mar 26 19&#58;41&#58;55 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238</a>
</div><script type='text/javascript'>
        $('#show_253512645').click(function() {
            $('#detail_253512645').slideDown("normal");
            $('#show_253512645').hide();
            $('#hide_253512645').show();
        });
        $('#hide_253512645').click(function() {
            $('#detail_253512645').slideUp();
            $('#hide_253512645').hide();
            $('#show_253512645').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='36524#1522672874'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-04-02T12:41:14+00:00">Apr 2, 2018 12:41 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1522672874">&nbsp;</a></div><pre>[Resolved with Request]
The original ggus ticket was closed, so closing this -- the global redirector at CERN was restarted to fix.
-- by  at Sat Mar 31 05&#58;00&#58;17 UTC 2018

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000936443' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000936443</a></pre></div><div class='update_description'><i onclick="document.location='36524#1522672785'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-04-02T12:39:45+00:00">Apr 2, 2018 12:39 PM UTC</time> by <b>Sarah Schmiechen</b><a class="anchor" name="1522672785">&nbsp;</a></div><pre>Hello,

Any updates on this?

Thanks,
Sarah</pre></div><div class='update_description'><i onclick="document.location='36524#1522091445'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-26T19:10:45+00:00">Mar 26, 2018 07:10 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1522091445">&nbsp;</a></div><pre>Notified CMS AAA - WAN Access team of this ticket.Maria Acosta has subscribed to this ticket.

Priority has been changed from urgent to top priority.
Dear AAA team,

We noticed some US sites getting completely isolated from the AAA infrastructure since around 16&#58;00 Geneva time. Namely T1_US_FNAL, T2_US_Caltech, T2_US_MIT, T2_US_Nebraska, T2_US_Vanderbilt and T2_US_UCSD.

The issue seems to be related with IPv6/IPv4 as logged in SAM xrootd access test [1], plus a strange IP showing up at job logs&#58;

Connect&#58; can&#39;t open connection to [[&#58;&#58;131.225.184.17]&#58;1094]

Can you please take a look? This is a top priority issue.

Thanks,

Maria A.

[1]     [b] XrdCl&#58;&#58;File&#58;&#58;Open(name=&#39;root&#58;//cms-xrd-global.cern.ch//store/test/xrootd/T1_US_FNAL_Disk/store/mc/SAM/GenericTTbar/AODSIM/CMSSW_9_0_0_90X_mcRun1_realistic_v4-v1/10000/28B9D1FB-8B31-E711-AA4E-0025905B85B2.root&#39;, flags=0x10, permissions=0660) =&#62; error &#39;[ERROR] Server responded with an error&#58; [3011] No servers are reachable via public IPv4 network to read the file.&#13;
Flushed field &#39;Notify Site&#39;&#13;
Subject has been changed to [Low HCxrootd - SAM xrootd-access success rates at US Sites]&#13;

-- by Maria Acosta at Mon Mar 26 19&#58;10&#58;02 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238</a></pre></div><div class='update_description'><i onclick="document.location='36524#1522088202'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-26T18:16:42+00:00">Mar 26, 2018 06:16 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1522088202">&nbsp;</a></div><pre>Am now seeing SAM xrootd-access tests fail for US sites -- the checks succeed if I test against cmsxrootd.fnal.gov, but fail if I try the CERN redirector like the test uses.&#13;

-- by David Mason at Mon Mar 26 18&#58;16&#58;50 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238</a></pre></div><div class='update_description'><i onclick="document.location='36524#1522082867'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-26T16:47:47+00:00">Mar 26, 2018 04:47 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1522082867">&nbsp;</a></div><pre>[2018-03-26 18&#58;39&#58;45.092317 +0200][Debug  ][File              ] [0x1275330@root&#58;//cms-xrd-global.cern.ch&#58;1094//store/test/xrootd/T1_US_FNAL_Disk/store/mc/HC/GenericTTbar/GEN-SIM-RECO/CMSSW_7_0_4_START70_V7-v1/00000/001736F8-DFCC-E311-AA71-02163E00E7C0.root] Open has returned with status [ERROR] Server responded with an error&#58; [3011] No servers are reachable via public IPv4 network to read the file.&#13;

-- by Maria Acosta at Mon Mar 26 16&#58;47&#58;28 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238</a></pre></div><div class='update_description'><i onclick="document.location='36524#1522081235'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-26T16:20:35+00:00">Mar 26, 2018 04:20 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1522081235">&nbsp;</a></div><pre>Yes, you are getting 131.225.184.17 in both cases, in one case
from an IPv6 DNS server in the other case from an IPv4 DNS server
but the result, 131.225.184.17 is the same.
cheers,  Stephan&#13;

-- by Stephan Lammel at Mon Mar 26 16&#58;19&#58;46 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238</a></pre></div><div class='update_description'><i onclick="document.location='36524#1522081116'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-26T16:18:36+00:00">Mar 26, 2018 04:18 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1522081116">&nbsp;</a></div><pre>cmsxrootd2 should be dual stack, so I think your nslookup results reflect that -- FNAL or probably normal lxplus would be IPV4.  I think what you see is expected.

If the test hosts were somehow locked to IPv6 though the tests will fail since FNAL dCache is not yet IPv6.  Shouldn&#39;t see errors connecting to cmsxrootd2 though.&#13;

-- by David Mason at Mon Mar 26 16&#58;18&#58;25 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238</a></pre></div><div class='update_description'><i onclick="document.location='36524#1522080875'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-26T16:14:35+00:00">Mar 26, 2018 04:14 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1522080875">&nbsp;</a></div><pre>Also, from vocms077 @ CERN, I got&#58;

[18&#58;10][macostaf@vocms077&#58;~]$ nslookup cmsxrootd2.fnal.gov
Server&#58;		2001&#58;1458&#58;301&#58;1000&#58;&#58;100&#58;5
Address&#58;	2001&#58;1458&#58;301&#58;1000&#58;&#58;100&#58;5#53

Non-authoritative answer&#58;
Name&#58;	cmsxrootd2.fnal.gov
Address&#58; 131.225.184.17

But, from LXPLUS and my FNAL PC&#58;

[11&#58;11][macosta@mac-127102&#58;~]$ nslookup cmsxrootd2.fnal.gov
Server&#58;		131.225.0.254
Address&#58;	131.225.0.254#53

Name&#58;	cmsxrootd2.fnal.gov
Address&#58; 131.225.184.17

Is this expected?&#13;

-- by Maria Acosta at Mon Mar 26 16&#58;14&#58;03 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238</a></pre></div><div class='update_description'><i onclick="document.location='36524#1522080213'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-26T16:03:33+00:00">Mar 26, 2018 04:03 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1522080213">&nbsp;</a></div><pre>I tried telnet and tracerouting [1] from lxplus and it worked fine... but correct me if I&#39;m wrong but the IP address ([[&#58;&#58;131.225.184.17]&#58;1094]) in those job logs looks very IPv6-y to me..

[1]
[17&#58;30][macostaf@lxplus049&#58;~]$ traceroute 131.225.184.17 1094
traceroute to 131.225.184.17 (131.225.184.17), 30 hops max, 1094 byte packets
1  k513-c-rbrmx-v4-ip33.cern.ch (10.116.36.1)  0.265 ms  0.260 ms  0.405 ms
2  k513-b-rbrmx-v2-cb8.cern.ch (172.24.160.17)  0.431 ms  0.419 ms  0.407 ms
3  b513-b-rbrml-2-cd3.cern.ch (172.24.112.97)  0.363 ms b513-b-rbrml-2-cd2.cern.ch (172.24.112.93)  0.310 ms  0.301 ms
4  g513-a-rci65-2-sg2.cern.ch (192.65.196.37)  0.306 ms  0.454 ms  0.437 ms
5  g513-a-rci65-2-fe2.cern.ch (192.65.184.177)  0.464 ms  0.562 ms  0.345 ms
6  e513-e-rbrxl-2-se1.cern.ch (192.65.184.169)  0.629 ms  0.546 ms  0.532 ms
7  cern-272-cr5.cern.ch (192.65.184.194)  0.757 ms  1.062 ms  1.375 ms
8  cern513cr5-ip-a-cern272cr5.es.net (134.55.220.46)  1.198 ms  1.189 ms  1.600 ms
9  londcr5-ip-a-cern513cr5.es.net (134.55.42.57)  15.437 ms  15.984 ms  15.396 ms
10  * * *
11  washcr5-ip-a-aofacr5.es.net (134.55.36.34)  89.542 ms  89.284 ms  89.475 ms
12  chiccr5-ip-a-washcr5.es.net (134.55.36.45)  106.732 ms  106.804 ms  106.762 ms
13  fnal-ip-o-chiccr5.es.net (198.124.216.18)  106.557 ms  106.546 ms  107.183 ms
14  sx-fcc2-transit-bdr-gccb.fnal.gov (131.225.102.8)  108.859 ms  108.384 ms  108.735 ms
15  r-s-edge-1-vlan1275.fnal.gov (131.225.102.88)  107.984 ms  108.216 ms  107.485 ms
16  r-s-core-fcc-244.fnal.gov (131.225.15.246)  107.042 ms  107.138 ms  106.951 ms
17  r-dist-fcc2-1-228.fnal.gov (131.225.23.229)  107.346 ms  106.991 ms  107.196 ms
18  r-cms-fcc2-1-po302.fnal.gov (131.225.15.193)  108.393 ms  107.710 ms  108&#13;

-- by Maria Acosta at Mon Mar 26 16&#58;03&#58;18 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238</a></pre></div><div class='update_description'><i onclick="document.location='36524#1522079974'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-26T15:59:34+00:00">Mar 26, 2018 03:59 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1522079974">&nbsp;</a></div><pre>Apparently SNOW and GGUS integration is not working so I&#39;ll try to summarize what&#39;s been happening&#58;

- FNAL didn&#39;t see any related errors from xrootd logs, cmsd/xrootd were restarterd and task/job
- Logs were provided by site support&#58;

<a href='http&#58;//dashb-cms-job.cern.ch/dashboard/templates/task-analysis/#user=Andrea+Sciaba&refresh=0&table=Jobs&p=1&records=-1&activemenu=2&status=&site=&tid=180326_113233%3Asciaba_crab_HC-162-AnySite-59121-20180325133302-T1_US_FNAL' target='_blank' rel='nofollow'>http&#58;//dashb-cms-job.cern.ch/dashboard/templates/task-analysis/#user=Andrea+Sciaba&refresh=0&table=Jobs&p=1&records=-1&activemenu=2&status=&site=&tid=180326_113233%3Asciaba_crab_HC-162-AnySite-59121-20180325133302-T1_US_FNAL</a>

<a href='https&#58;//cmsweb.cern.ch/scheddmon/0119/cmsprd/180326_113233&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/scheddmon/0119/cmsprd/180326_113233&#58</a>;sciaba_crab_HC-162-AnySite-59121-20180325133302-T1_US_FNAL/job_out.71.2.txt

- Yujun from FNAL storage&#58;

Clearly, the cause was due to&#58;

Connect&#58; can&#39;t open connection to [[&#58;&#58;131.225.184.17]&#58;1094]

Is it possible for you to test if you can reach 131.225.184.17&#58;1094 from KIT? Either a telnet or xrdcp should give the resultChanged CC to ;cms-comp-ops-transfer-team@....;cms-comp-ops-site-support-team@....&#13;

-- by Maria Acosta at Mon Mar 26 15&#58;59&#58;27 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238</a></pre></div><div class='update_description'><i onclick="document.location='36524#1522055527'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-26T09:12:07+00:00">Mar 26, 2018 09:12 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1522055527">&nbsp;</a></div><pre>Dear FNAL admins,
Currently, both the HC XRootD success rates in the last 24 hours (~30%) and the 2-weeks average (~69% and decreasing) are a bit below the 70% threshold [1,2].
Just in case there are missing files, we have locally invalidated all files at the site belonging the dataset /GenericTTbar/HC-CMSSW_7_0_4_START70_V7-v1/GEN-SIM-RECO.

Can you please take a look at AAA services running at the site? if stuck or under high load, restarting cmsd daemon might help.

Thanks,
Sebastian.
Transfer Team

[1] <a href='http&#58;//dashb-cms-job.cern.ch/dashboard/templates/web-job2/#user=&refresh=0&table=Jobs&p=1&records=25&activemenu=1&usr=&site=&submissiontool=&application=&activity=hcxrootd&status=&check=terminated&tier=&date1=2018-03-25+10%3A28&date2=2018-03-26+10%3A28&sortby=activity&scale=linear&bars=20&ce=&rb=&grid=&jobtype=&submissionui=&dataset=&submissiontype=&task=&subtoolver=&genactivity=&outputse=&appexitcode=&accesstype=&inputse=T1_US_FNAL&cores=' target='_blank' rel='nofollow'>http&#58;//dashb-cms-job.cern.ch/dashboard/templates/web-job2/#user=&refresh=0&table=Jobs&p=1&records=25&activemenu=1&usr=&site=&submissiontool=&application=&activity=hcxrootd&status=&check=terminated&tier=&date1=2018-03-25+10%3A28&date2=2018-03-26+10%3A28&sortby=activity&scale=linear&bars=20&ce=&rb=&grid=&jobtype=&submissionui=&dataset=&submissiontype=&task=&subtoolver=&genactivity=&outputse=&appexitcode=&accesstype=&inputse=T1_US_FNAL&cores=</a>
[2] <a href='https&#58;//cmssst.web.cern.ch/cmssst/aaa/T1_US_FNAL_report.html' target='_blank' rel='nofollow'>https&#58;//cmssst.web.cern.ch/cmssst/aaa/T1_US_FNAL_report.html</a>

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=134238</a>

[Ticket History]
Subject&#58; Low HC xrootd success rates at T1_US_FNAL
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-transfer-team@....
-- by Sebastian Pulido at Mon Mar 26 09&#58;11&#58;44 UTC 2018</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F36524">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
