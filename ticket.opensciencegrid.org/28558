<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[28558] Moving T2_US_Wisconsin to multicore</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=28558" method="post">
<div class="page-header">
    <h3><span class="muted">28558</span> / Moving T2_US_Wisconsin to multicore</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Antonio Perez-Calero</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Antonio Perez-Calero Yzquierdo</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier2</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Gliden Support to update</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-04-07</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG Glidein Factory Support <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=119643">119643</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=28558", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/28558?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/28558?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Moving%20T2_US_Wisconsin%20to%20multicore%20ISSUE%3D28558%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='28558#1459886589'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-05T20:03:09+00:00">Apr 5, 2016 08:03 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459886589">&nbsp;</a></div><pre>Transition to multicore pilots achieved.

-- by Antonio Perez-Calero Yzquierdo at Mon Apr 04 22&#58;31&#58;22 UTC 2016

Hi Chris,

The transition to multicore has been completed, so I&#39;ll now close the ticket. Thanks everyone for their support.

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Mon Apr 04 22&#58;30&#58;47 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643</a></pre></div><div class='update_description'><i onclick="document.location='28558#1459799836'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-04T19:57:16+00:00">Apr 4, 2016 07:57 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459799836">&nbsp;</a></div><pre>Hi Jeff,

Thanks for the note. It&#39;s fine with us if you set the pilot lifetime to 60h.

Thanks,
- Ajit

On 04/03/2016 10&#58;06 PM, helpdesk@.... wrote&#58;
<font color='#7F7E6F'>&#62; Hello,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GGUS ticket #119643 was updated.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; REFERENCE LINK&#58; <a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=119643</a></font>
<font color='#7F7E6F'>&#62; SUBJECT&#58; Moving T2_US_Wisconsin to multicore</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; =====================</font>
<font color='#7F7E6F'>&#62; LATEST MODIFICATIONS&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; LAST MODIFIER -&#62; Jeffrey Dost</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; PUBLIC DIARY -&#62;</font>
<font color='#7F7E6F'>&#62; Hi Ajit,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; A separate issue caught my attention. It appears that CMS increased the max walltime of the glideins at Wisconsin to 216000 (60h) without first communicating it to you. The single core entries however were set low, 114840 (~32h). However, I understand correctly the CMS VO card requires at least 48h walltime. Before we close this, what would you like us to set the pilot lifetime to?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; Jeff Dost</font>
<font color='#7F7E6F'>&#62; OSG Glidein Factory Operations</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>
<font color='#7F7E6F'>&#62;   This is an automated mail. When replying don&#39;t change the subject line!</font>
<font color='#7F7E6F'>&#62;   S T R I P  P R E V I O U S  M A I L S please!!</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>

<div id='show_1930665632' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1930665632'>-- by Ajit Mohapatra at Mon Apr 04 19&#58;33&#58;44 UTC 2016

Hi Ajit,

A separate issue caught my attention. It appears that CMS increased the max walltime of the glideins at Wisconsin to 216000 (60h) without first communicating it to you. The single core entries however were set low, 114840 (~32h). However, I understand correctly the CMS VO card requires at least 48h walltime. Before we close this, what would you like us to set the pilot lifetime to?

Thanks,
Jeff Dost
OSG Glidein Factory Operations

-- by Jeffrey Dost at Mon Apr 04 03&#58;06&#58;25 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643</a>
</div><script type='text/javascript'>
        $('#show_1930665632').click(function() {
            $('#detail_1930665632').slideDown("normal");
            $('#show_1930665632').hide();
            $('#hide_1930665632').show();
        });
        $('#hide_1930665632').click(function() {
            $('#detail_1930665632').slideUp();
            $('#hide_1930665632').hide();
            $('#show_1930665632').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28558#1459799661'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-04T19:54:21+00:00">Apr 4, 2016 07:54 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1459799661">&nbsp;</a></div><pre>Hi Antonio,

How is everything going?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='28558#1459537322'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-01T19:02:02+00:00">Apr 1, 2016 07:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459537322">&nbsp;</a></div><pre>Thanks Marty. I think we are closer to declaring this ticket as done. I&#39;ll keep it open at least for 24h to check that everything goes according to what we expect.

Cheers,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Thu Mar 31 22&#58;31&#58;06 UTC 2016

Antonio, Vassil,

I&#39;ve disabled all of the single core entries

CMS_T2_US_Wisconsin_cms01_bigmem_6GB
CMS_T2_US_Wisconsin_cms01_bigmem_12GB
CMS_T2_US_Wisconsin_cms02_bigmem_6GB
CMS_T2_US_Wisconsin_cms02_bigmem_12GB
CMS_T2_US_Wisconsin_cms03_bigmem_6GB
CMS_T2_US_Wisconsin_cms03_bigmem_12GB

across all factories and created and put into production the entry

CMSHTPC_T2_US_Wisconsin_cmsgrid03

Marty Kandes
UCSD Glidein Factory Operations

-- by Marty Kandes at Thu Mar 31 21&#58;58&#58;30 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643</a></pre></div><div class='update_description'><i onclick="document.location='28558#1459455706'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-31T20:21:46+00:00">Mar 31, 2016 08:21 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459455706">&nbsp;</a></div><pre>Hi guys,

Ajit, thanks for the feedback. In the situation you described, yes it is definitely an advantage to disable single core completely asap to allow mcore a faster ramp up. Please continue moving nodes to partitionable slots, and keep us updated on how this proceeds while we switch pilot submittion pattern as well.

Vassil, Marty&#58; let&#39;s continue disabling single core&#58; as I understand, the nodes really do have 2-3 GB/core, not 6 GB or 12. So basically this is just the default for us. I think having multiple high mem entries or even setting up a configuration to dynamically discover the amount of available memory, like Marty described, are not really that interesting for CMS at this point.

The reason is that once we have transitioned to multicore, we can also do this kind of dynamic resource allocation arrangements inside a partitionable pilot, instead of a partitionable WN.

a) So,in conclusion, let&#39;s disable also all &#34;bigmem&#34; single core entries as well&#58;

CMS_T2_US_Wisconsin_cms01_bigmem_6GB
CMS_T2_US_Wisconsin_cms01_bigmem_12GB
CMS_T2_US_Wisconsin_cms02_bigmem_6GB
CMS_T2_US_Wisconsin_cms02_bigmem_12GB
CMS_T2_US_Wisconsin_cms03_bigmem_6GB
CMS_T2_US_Wisconsin_cms03_bigmem_12GB

b) Finally, we still need to add a third mcore entry, for cmsgrid03.hep.wisc.edu, can you please implement that?

Thanks a lot,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Thu Mar 31 02&#58;41&#58;04 UTC 2016

Hi Marty,

The CE osggrid01.hep.wisc.edu is specifically setup as the gateway for OSG VOs, and yes, it will
stay in use for as long as needed.

Thanks,
- Ajit

On 03/30/2016 04&#58;44 PM, helpdesk@.... wrote&#58;
<font color='#7F7E6F'>&#62; Hello,</font>
<div id='show_688007190' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_688007190'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GGUS ticket #119643 was updated.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; REFERENCE LINK&#58; <a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=119643</a></font>
<font color='#7F7E6F'>&#62; SUBJECT&#58; Moving T2_US_Wisconsin to multicore</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; =====================</font>
<font color='#7F7E6F'>&#62; LATEST MODIFICATIONS&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; LAST MODIFIER -&#62; Marty Kandes</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; PUBLIC DIARY -&#62;</font>
<font color='#7F7E6F'>&#62; Ajit,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Can you clarify the status of osggrid01.hep.wisc.edu? Will this gatekeeper stay in use moving forward?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Marty Kandes</font>
<font color='#7F7E6F'>&#62; UCSD Glidein Factory Operations</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>
<font color='#7F7E6F'>&#62;   This is an automated mail. When replying don&#39;t change the subject line!</font>
<font color='#7F7E6F'>&#62;   S T R I P  P R E V I O U S  M A I L S please!!</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>

-- by Ajit Mohapatra at Wed Mar 30 22&#58;00&#58;31 UTC 2016

Ajit,

Can you clarify the status of osggrid01.hep.wisc.edu? Will this gatekeeper stay in use moving forward?

Marty Kandes
UCSD Glidein Factory Operations

-- by Marty Kandes at Wed Mar 30 21&#58;43&#58;40 UTC 2016

Antonio, Ajit,

FYI - Vassil disabled the single core entries

CMS_T2_US_Wisconsin_cms01
CMS_T2_US_Wisconsin_cms02, and
CMS_T2_US_Wisconsin_cms03.

I forget why we setup the &#34;bigmem&#34; single core entries back in August. But it was probably done simply to use the resources as explicitly as possible. If we want to give it a try, I&#39;m fairly certain we can auto discover the amount of memory per core when the glideins startup on the various nodes. This would allow us to use one single entry in the factory for the different amounts of memory available per core on the worker nodes. We have been using a similar multicore glidein configuration at another OSG HTCondor-CE site for most of the last year.

Marty Kandes
UCSD Glidein Factory Operations

-- by Marty Kandes at Wed Mar 30 21&#58;41&#58;21 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643</a>
</div><script type='text/javascript'>
        $('#show_688007190').click(function() {
            $('#detail_688007190').slideDown("normal");
            $('#show_688007190').hide();
            $('#hide_688007190').show();
        });
        $('#hide_688007190').click(function() {
            $('#detail_688007190').slideUp();
            $('#hide_688007190').hide();
            $('#show_688007190').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28558#1459357793'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-30T17:09:53+00:00">Mar 30, 2016 05:09 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459357793">&nbsp;</a></div><pre>Hi Antonio,

Answering your questions &#58;

- Currently, only 65 nodes (2400 cores) are configured as multicore nodes/partitionable slots.
Remaining 5000 cores need to be configured as partitionable slots.

- Defragmentation is already ON in the 65 nodes that are configured as partitionable slots. Right
now CMS single core requests are interfering with CMS multicore requests, delaying the
defragmentation process due to the fact that the single core jobs/pilots have a set retirement time.
Disabling single core pilots completely to the site will help with this i.e. faster defragmentation
until the site receives only multicore pilots.

- T2_Wisconsin resources are fully dedicated to CMS VO. The site supports other VOs, but they are
able to use the T2 dedicated resources only in the absence of any CMS jobs in the cluster. Any
non-CMS VO jobs are immediately pre-empted when CMS jobs arrive at the site, and need to run with
the highest priority.

Thanks,
- Ajt

On 03/29/2016 04&#58;03 PM, helpdesk@.... wrote&#58;
<font color='#7F7E6F'>&#62; Hello,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GGUS ticket #119643 was updated.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; REFERENCE LINK&#58; <a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=119643</a></font>
<font color='#7F7E6F'>&#62; SUBJECT&#58; Moving T2_US_Wisconsin to multicore</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; =====================</font>
<font color='#7F7E6F'>&#62; LATEST MODIFICATIONS&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; LAST MODIFIER -&#62; Antonio Perez-Calero Yzquierdo</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<div id='show_1142826712' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1142826712'><font color='#7F7E6F'>&#62; PUBLIC DIARY -&#62;</font>
<font color='#7F7E6F'>&#62; Hi Ajit,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -Can you please update oh the site situation? How many nodes are currently capable of running multicore requests, i.e. how many are setup as partitionable slots?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -Also, are you finally considering to use defragmentation(*)? CMS intention is to change touse full multicore, so defragmentation will not be needed just to mix single and multicore pilots from CMS, as we can and intend to disable single core completely. However, can you please also comment on the situation regarding other VOs? What is the CMS share?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Antonio.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; (*) In case it may be of use, here are some slides concerning the Condor defrag daemon configuration&#58;</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//indico.cern.ch/event/509869/contribution/0/attachments/1245416/1833866/HTCondorDefragT0_SI_20160317.pdf' target='_blank' rel='nofollow'>https&#58;//indico.cern.ch/event/509869/contribution/0/attachments/1245416/1833866/HTCondorDefragT0_SI_20160317.pdf</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>
<font color='#7F7E6F'>&#62;   This is an automated mail. When replying don&#39;t change the subject line!</font>
<font color='#7F7E6F'>&#62;   S T R I P  P R E V I O U S  M A I L S please!!</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>

-- by Ajit Mohapatra at Wed Mar 30 15&#58;25&#58;03 UTC 2016

Update&#58; several hours later, the number of cores used in multicore mode has increased to about 150... but we continue running most of the cores as single core.

Therefore, in order to help mcore grow, I&#39;d say we need to

a) as multicore is coming via cmsgrid01 and cmsgrid02, let&#39;s also add another entry for the cmsgrid03 endpoint.

b) I&#39;d say we also start disabling the regular single core entries
CMS_T2_US_Wisconsin_cms01
CMS_T2_US_Wisconsin_cms02
CMS_T2_US_Wisconsin_cms03

Let&#39;s keep the high mem entries, at least for now. We can discuss them later on.

Vassil, Marty, can you please implement that?

Thanks,

Antonio.

PS. Still we need feedback from Ajit on my questions on update#28

-- by Antonio Perez-Calero Yzquierdo at Wed Mar 30 04&#58;18&#58;10 UTC 2016

Hi Ajit,

-Can you please update oh the site situation? How many nodes are currently capable of running multicore requests, i.e. how many are setup as partitionable slots?

-Also, are you finally considering to use defragmentation(*)? CMS intention is to change touse full multicore, so defragmentation will not be needed just to mix single and multicore pilots from CMS, as we can and intend to disable single core completely. However, can you please also comment on the situation regarding other VOs? What is the CMS share?

Thanks,

Antonio.

(*) In case it may be of use, here are some slides concerning the Condor defrag daemon configuration&#58;
<a href='https&#58;//indico.cern.ch/event/509869/contribution/0/attachments/1245416/1833866/HTCondorDefragT0_SI_20160317.pdf' target='_blank' rel='nofollow'>https&#58;//indico.cern.ch/event/509869/contribution/0/attachments/1245416/1833866/HTCondorDefragT0_SI_20160317.pdf</a>

-- by Antonio Perez-Calero Yzquierdo at Tue Mar 29 21&#58;02&#58;58 UTC 2016

Hi Chris,

Can you please elaborate on what is needed from osg factory support?

Right now we have 48 cores taken by 6 multicore pilots, which are apparently running jobs, see

<a href='http&#58;//submit-3.t2.ucsd.edu/CSstoragePath/aperez/T2s/multicore_usage_t2s_6h.html' target='_blank' rel='nofollow'>http&#58;//submit-3.t2.ucsd.edu/CSstoragePath/aperez/T2s/multicore_usage_t2s_6h.html</a>
<a href='http&#58;//submit-3.t2.ucsd.edu/CSstoragePath/aperez/T2s/status_mcore_T2_US_Wisconsin.html' target='_blank' rel='nofollow'>http&#58;//submit-3.t2.ucsd.edu/CSstoragePath/aperez/T2s/status_mcore_T2_US_Wisconsin.html</a>

I think it&#39;s now a matter of growing the amount of resources which are available for multicore.

Thanks,

Antonio.
Changed problem type to&#58; CMS_Submission Infrastructure

-- by Antonio Perez-Calero Yzquierdo at Tue Mar 29 20&#58;59&#58;06 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643</a>
</div><script type='text/javascript'>
        $('#show_1142826712').click(function() {
            $('#detail_1142826712').slideDown("normal");
            $('#show_1142826712').hide();
            $('#hide_1142826712').show();
        });
        $('#hide_1142826712').click(function() {
            $('#detail_1142826712').slideUp();
            $('#hide_1142826712').hide();
            $('#show_1142826712').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28558#1459273211'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-29T17:40:11+00:00">Mar 29, 2016 05:40 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459273211">&nbsp;</a></div><pre>Hi Antonio,

I added the entries [1], [2]  to CERN, GOC and SDSC production factories.

Cheers,
Vassil

[1] CMSHTPC_T2_US_Wisconsin_cmsgrid01
[2] CMSHTPC_T2_US_Wisconsin_cmsgrid02

-- by Vassil Verguilov at Tue Mar 29 14&#58;19&#58;27 UTC 2016

Thanks Vassil,

It seems this time the configuration is correct, as I was able to run some test jobs at the site. Let&#39;s waste no time and continue by adding both entries to the production factories.

Cheers,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Tue Mar 29 13&#58;48&#58;12 UTC 2016

Hi Brian, Ajit, Antonio,

I changed the CEs and added the submit attributes to site entries in CERN ITB factory.

Regards,
Vassil

-- by Vassil Verguilov at Tue Mar 29 11&#58;59&#58;05 UTC 2016

Hi,

To restate Ajit’s email -

<div id='show_1964344987' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1964344987'>The configurations in the ITB factory are completely wrong.  Try taking the existing production entry (the entry currently in ITB is based on a decommissioned CE using a different technology) and add the following submit attributes&#58;

&#60;submit_attr name=&#34;+maxMemory&#34; value=&#34;20000&#34;/&#62;
&#60;submit_attr name=&#34;+xcount&#34; value=&#34;8”/&#62;

-- by Brian Bockelman at Tue Mar 29 01&#58;10&#58;54 UTC 2016

Hi Antonio,

Looks like there was a copy/paste error (sorry about that !) in the CE entries. Given that these are
condor-ces, the correct CE entries should be &#58;

CMSHTPC_T2_US_Wisconsin_cmsgrid01  ( cmsgrid01.hep.wisc.edu cmsgrid01.hep.wisc.edu&#58;9619 )
CMSHTPC_T2_US_Wisconsin_cmsgrid02  ( cmsgrid02.hep.wisc.edu cmsgrid02.hep.wisc.edu&#58;9619 )

NOTE &#58; The production glideinfactory at ucsd
(<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryEntryStatusNow.htmlcorrect' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryEntryStatusNow.htmlcorrect</a>) has the correct
entries setup/used for the above CEs for a while. The exact same &#34;GLIDEIN_Gatekeeper&#34; (attributes)
and/or &#34;Gatekeeper&#34; (Descript) entries should be used in the ITB factory settings.

Please try the above, and let us know if the problem remains.

Thanks,
- Ajit

On 03/28/2016 05&#58;55 PM, helpdesk@.... wrote&#58;
<font color='#7F7E6F'>&#62; Hello,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GGUS ticket #119643 was updated.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; REFERENCE LINK&#58; <a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=119643</a></font>
<font color='#7F7E6F'>&#62; SUBJECT&#58; Moving T2_US_Wisconsin to multicore</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; =====================</font>
<font color='#7F7E6F'>&#62; LATEST MODIFICATIONS&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; LAST MODIFIER -&#62; Antonio Perez-Calero Yzquierdo</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; PUBLIC DIARY -&#62;</font>
<font color='#7F7E6F'>&#62; Hi everyone,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I think we need to review both the entries setup in the ITB and possibly the setup of the CEs. The test jobs I submitted made the ITB FE request multicore pilots from both entries,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; CMSHTPC_T2_US_Wisconsin_cmsgrid01  (cmsgrid01.hep.wisc.edu&#58;9619/htcondorce-condor-default)</font>
<font color='#7F7E6F'>&#62; CMSHTPC_T2_US_Wisconsin_cmsgrid02  (cmsgrid02.hep.wisc.edu&#58;9619/htcondorce-condor-default)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; the ITB factories, but apparently they are stuck in held status.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -Sites admins, can you please confirm that these two CEs are the ones to be used and are ready to receive multicore requests?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -Factory Ops team, can you please review the entries in case there is any misconfig? Can you also try to look for pilots logs in the CERN ITB factory, and post here the reason for held status?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I feel we have not advanced much in this, so let&#39;s try to push a bit so that we can really understand why this is not working.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Antonio.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>
<font color='#7F7E6F'>&#62;   This is an automated mail. When replying don&#39;t change the subject line!</font>
<font color='#7F7E6F'>&#62;   S T R I P  P R E V I O U S  M A I L S please!!</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>

-- by Ajit Mohapatra at Mon Mar 28 23&#58;34&#58;59 UTC 2016

Hi everyone,

I think we need to review both the entries setup in the ITB and possibly the setup of the CEs. The test jobs I submitted made the ITB FE request multicore pilots from both entries,

CMSHTPC_T2_US_Wisconsin_cmsgrid01  (cmsgrid01.hep.wisc.edu&#58;9619/htcondorce-condor-default)
CMSHTPC_T2_US_Wisconsin_cmsgrid02  (cmsgrid02.hep.wisc.edu&#58;9619/htcondorce-condor-default)

the ITB factories, but apparently they are stuck in held status.

-Sites admins, can you please confirm that these two CEs are the ones to be used and are ready to receive multicore requests?

-Factory Ops team, can you please review the entries in case there is any misconfig? Can you also try to look for pilots logs in the CERN ITB factory, and post here the reason for held status?

I feel we have not advanced much in this, so let&#39;s try to push a bit so that we can really understand why this is not working.

Thanks,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Mon Mar 28 22&#58;55&#58;14 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643</a>
</div><script type='text/javascript'>
        $('#show_1964344987').click(function() {
            $('#detail_1964344987').slideDown("normal");
            $('#show_1964344987').hide();
            $('#hide_1964344987').show();
        });
        $('#hide_1964344987').click(function() {
            $('#detail_1964344987').slideUp();
            $('#hide_1964344987').hide();
            $('#show_1964344987').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28558#1459273147'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-29T17:39:07+00:00">Mar 29, 2016 05:39 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1459273147">&nbsp;</a></div><pre>I spoke with Tony. He said that this needed to go to osg-factory support. I have added them in the CC list and assigned them as the SC.</pre></div><div class='update_description'><i onclick="document.location='28558#1459185505'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-28T17:18:25+00:00">Mar 28, 2016 05:18 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1459185505">&nbsp;</a></div><pre>I have added Tony Triadani to this.

Tony can you assist with this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='28558#1458825069'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-24T13:11:09+00:00">Mar 24, 2016 01:11 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1458825069">&nbsp;</a></div><pre>Notified CMS Glidein Factory team of this ticket.Hi Chris,

My tests have not been successful yet, so I think we need to review the entry in the ITB factory.

Factory Ops team, can you please make sure the entry is using the gatekeepers indicated earlier on this ticket? Otherwise, we should configure a standard mcore entry, as for the rest of (condor) sites.

Thanks,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Thu Mar 24 13&#58;10&#58;45 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643</a></pre></div><div class='update_description'><i onclick="document.location='28558#1458749191'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-23T16:06:31+00:00">Mar 23, 2016 04:06 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1458749191">&nbsp;</a></div><pre>Hello Antonio,

Do you have an update on this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='28558#1458325511'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-18T18:25:11+00:00">Mar 18, 2016 06:25 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1458325511">&nbsp;</a></div><pre>Thanks for the update, Antonio. Let us know what you are able to determine.

~Chris</pre></div><div class='update_description'><i onclick="document.location='28558#1458029864'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-15T08:17:44+00:00">Mar 15, 2016 08:17 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1458029864">&nbsp;</a></div><pre>Hi Chris, Ajit,

Apologies for the delay. I submitted a few test jobs days ago and they did not get to run. Let me review the situation in terms of pilot factory configuration for the site, then reply with more info.

Thanks,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Tue Mar 15 08&#58;16&#58;33 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643</a></pre></div><div class='update_description'><i onclick="document.location='28558#1457981055'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-14T18:44:15+00:00">Mar 14, 2016 06:44 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1457981055">&nbsp;</a></div><pre>Hello All,

Is there any new on this or can this be closed?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='28558#1457127128'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-04T21:32:08+00:00">Mar 4, 2016 09:32 PM UTC</time> by <b>ajit@....</b><a class="anchor" name="1457127128">&nbsp;</a></div><pre>Hi Vassil,

Thanks for the note. Wisconsin has fully transitioned to htcondor-ce from GRAM-CE. So I believe the entries should be

[2] CMSHTPC_T2_US_Wisconsin_cms01- cmsgrid01.hep.wisc.edu&#58;9619/htcondorce-condor-default
[3] CMSHTPC_T2_US_Wisconsin_cms02 - cmsgrid02.hep.wisc.edu&#58;9619/htcondorce-condor-default

instead. (osggrid01 is also htcondor-ce based).

Thanks,
- Ajit

On 03/03/2016 10&#58;11 AM, Open Science Grid FootPrints wrote&#58;
[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='28558#1457021501'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-03T16:11:41+00:00">Mar 3, 2016 04:11 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1457021501">&nbsp;</a></div><pre>Hello,

I added one entry (CMSHTPC_T2_US_Wisconsin_osggrid01) to the CERN ITB factory [1].
There were two multicore entries [2],[3] for T2_US_Wisconsin  which were disabled last February.
Those two entries had very particular settings which I copied to the new one.
Please let me know if I have to change something for this entry.

Regards,
Vassil Verguilov
CERN CMS Glidein Factory Operations

[1] <a href='http&#58;//vocms054.cern.ch/monitor/factoryEntryStatusNow.html?entry=CMSHTPC_T2_US_Wisconsin_osggrid01' target='_blank' rel='nofollow'>http&#58;//vocms054.cern.ch/monitor/factoryEntryStatusNow.html?entry=CMSHTPC_T2_US_Wisconsin_osggrid01</a>
[2] CMSHTPC_T2_US_Wisconsin_cms01- cmsgrid01.hep.wisc.edu&#58;2119/jobmanager-condor
[3] CMSHTPC_T2_US_Wisconsin_cms02 - cmsgrid02.hep.wisc.edu&#58;2119/jobmanager-condor

-- by Vassil Verguilov at Thu Mar 03 16&#58;11&#58;08 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643</a></pre></div><div class='update_description'><i onclick="document.location='28558#1456938946'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-02T17:15:46+00:00">Mar 2, 2016 05:15 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1456938946">&nbsp;</a></div><pre>Hi Dan, Chris,

Apologies for the delay in the response. CMS will be using 8-core pilots.

We should setup the test entry in ITB, then move it to production factories when tested ok.

Cheers,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Wed Mar 02 17&#58;15&#58;28 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643</a></pre></div><div class='update_description'><i onclick="document.location='28558#1456934739'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-02T16:05:39+00:00">Mar 2, 2016 04:05 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1456934739">&nbsp;</a></div><pre>Hello Antonio,

Do you have an update on this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='28558#1456502890'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-26T16:08:10+00:00">Feb 26, 2016 04:08 PM UTC</time> by <b>GLOW-TECH</b><a class="anchor" name="1456502890">&nbsp;</a></div><pre>Yes, partitionable slot defragmentation will be implemented.  There will
likely be a mixed singlecore + multicore workload on the cluster for the
foreseeable future.

How many cores per job are envisioned for the multicore CMS jobs? Do you
plan to request whole machines or some smaller unit?

--Dan

On 2/25/16 11&#58;01 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='28558#1456462913'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-26T05:01:53+00:00">Feb 26, 2016 05:01 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1456462913">&nbsp;</a></div><pre>Thanks for all the details, Dan.

Getting Vassil, who can setup the test mcore entry, involved. Yes a single machine is enough for the purely technical step we first need to test.

I understand then that dedicated nodes will be progressively configured as partitionable slots. But, when CMS switches to fully multicore, will they need to mix single and multicore loads? Are there other VOs submitting  any significant number of single core jobs to those same reasources? This may be true also specially to those opportunistic nodes. So, in both cases, is there any partitionable slot defragmentation enabled? Othewise, it can be really difficult to get mcore jobs started.

Thanks,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Fri Feb 26 05&#58;01&#58;15 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643</a></pre></div><div class='update_description'><i onclick="document.location='28558#1456461894'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-26T04:44:54+00:00">Feb 26, 2016 04:44 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1456461894">&nbsp;</a></div><pre>Involve person(s) has been changed to letts@....; vassil.verguilov@.....

-- by Antonio Perez-Calero Yzquierdo at Fri Feb 26 04&#58;44&#58;21 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643</a></pre></div><div class='update_description'><i onclick="document.location='28558#1456441703'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-25T23:08:23+00:00">Feb 25, 2016 11:08 PM UTC</time> by <b>GLOW-TECH</b><a class="anchor" name="1456441703">&nbsp;</a></div><pre>Hi Antonio,

<font color='#7F7E6F'>&#62; -Batch system and CE technologies</font>
Condor, HTCondor CE
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -Cores per node in your cluster</font>

Dedicated T2 hardware&#58;

83 x 8 core nodes
39 x 16 core nodes
92 x 24 core nodes
30 x 32 core nodes
94 x 40 core nodes

Currently, most T2 nodes are configured for single-core access only.  We
have a multi-core configuration enabled on a 24 core machine.  This
configuration uses HTCondor partitionable slots.  We will expand this
configuration to more nodes soon, but is what we have sufficient for you
to run tests?

In addition, we have opportunistic campus resources available to run CMS
jobs.  These are all configured for multi-core access using HTCondor
partitionable slots.  These have the following number of cores&#58;

1159 x 8 core nodes
579 x 12 core nodes
140 x 16 core nodes
142 x 20 core nodes
1578 x 24 core nodes
664 x 32 core nodes
5620 x 40 core nodes

<font color='#7F7E6F'>&#62; -Memory per core in your cluster</font>
2GB-3GB
<div id='show_1757869648' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1757869648'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -Gatekeeper to be used for multicore pilot submission</font>

osggrid01.hep.wisc.edu

--Dan

On 2/19/16 4&#58;12 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1757869648').click(function() {
            $('#detail_1757869648').slideDown("normal");
            $('#show_1757869648').hide();
            $('#hide_1757869648').show();
        });
        $('#hide_1757869648').click(function() {
            $('#detail_1757869648').slideUp();
            $('#hide_1757869648').hide();
            $('#show_1757869648').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28558#1456328826'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-24T15:47:06+00:00">Feb 24, 2016 03:47 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1456328826">&nbsp;</a></div><pre>Thanks for the update, Ajit. I&#39;ll check back at the end of the week for any new info and will ping next week if there isn&#39;t.

Regards,
Chris</pre></div><div class='update_description'><i onclick="document.location='28558#1456266550'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-23T22:29:10+00:00">Feb 23, 2016 10:29 PM UTC</time> by <b>ajit@....</b><a class="anchor" name="1456266550">&nbsp;</a></div><pre>Hi Chris,

Thanks for the note. We are reviewing the ticket, and in the process of addressing the issue. Will update when we have a solution.

Thanks,
- Ajit

On 02/23/2016 11&#58;19 AM, Open Science Grid FootPrints wrote&#58;
[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='28558#1456247992'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-23T17:19:52+00:00">Feb 23, 2016 05:19 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1456247992">&nbsp;</a></div><pre>Hello Wisconsin Admins,

Have any of you had time to review this? Please let us know if you have questions or if there is anything we can do to help.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='28558#1455919949'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-19T22:12:29+00:00">Feb 19, 2016 10:12 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1455919949">&nbsp;</a></div><pre>Dear T2 Wisconsin site admins,

As you may know, CMS requires the deployment of multicore CPU resources at their supporting T2 sites for the upcoming Spring and Summer MC production campaigns. For that, CMS will switch to submitting multi-core pilots to your site, instead of the current single-core.

You can find more information about the project at&#58;
<a href='https&#58;//twiki.cern.ch/twiki/bin/view/CMSPublic/CMSMulticoreSchedulingProject' target='_blank' rel='nofollow'>https&#58;//twiki.cern.ch/twiki/bin/view/CMSPublic/CMSMulticoreSchedulingProject</a>

with specific details to the deployment at T2s at&#58;
<a href='https&#58;//twiki.cern.ch/twiki/bin/view/CMSPublic/MulticoreDeploymentToT2s' target='_blank' rel='nofollow'>https&#58;//twiki.cern.ch/twiki/bin/view/CMSPublic/MulticoreDeploymentToT2s</a>

The proposed plan is to first setup a test multicore entry for your site in the testbed (ITB) glideinWMS pilot factories, submitting a few pilots to verify that the request is correctly passed to the local CE and batch systems. For that, we need that you provide the following information&#58;

-Batch system and CE technologies

-Cores per node in your cluster

-Memory per core in your cluster

-Gatekeeper to be used for multicore pilot submission

Thank you,

Antonio,
CMS Submission Infrastructure team.

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119643</a>

[Ticket History]
Subject&#58; Moving T2_US_Wisconsin to multicore
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-site-support-team@....
-- by Antonio Perez-Calero Yzquierdo at Fri Feb 19 22&#58;10&#58;37 UTC 2016

Ticket has been tagged &#34;VO specific&#34;.
<div id='show_958717455' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_958717455'>
-- by Antonio Perez-Calero Yzquierdo at Fri Feb 19 22&#58;11&#58;20 UTC 2016
</div><script type='text/javascript'>
        $('#show_958717455').click(function() {
            $('#detail_958717455').slideDown("normal");
            $('#show_958717455').hide();
            $('#hide_958717455').show();
        });
        $('#hide_958717455').click(function() {
            $('#detail_958717455').slideUp();
            $('#hide_958717455').hide();
            $('#show_958717455').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F28558">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 28558});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
