<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[26295] SAM tests idle</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="robots" content="noindex, nofollow" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=26295" method="post">
<div class="page-header">
    <h3><span class="muted">26295</span> / SAM tests idle</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">kcollett </div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">kcollett</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-09-29</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=115235">115235</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/26295", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='26295#1443560765'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-29T21:06:05+00:00">Sep 29, 2015 09:06 PM UTC</time> by <b>echism</b><a class="anchor" name="1443560765">&nbsp;</a></div><pre>Closing as advised.</pre></div><div class='update_description'><i onclick="document.location='26295#1443214721'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-25T20:58:41+00:00">Sep 25, 2015 08:58 PM UTC</time> by <b>echism</b><a class="anchor" name="1443214721">&nbsp;</a></div><pre>Hey Katrina,

I&#39;m going to assume everything is ok and close this ticket if I don&#39;t hear anything by Tuesday.

Thank you,</pre></div><div class='update_description'><i onclick="document.location='26295#1443205424'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-25T18:23:44+00:00">Sep 25, 2015 06:23 PM UTC</time> by <b>echism</b><a class="anchor" name="1443205424">&nbsp;</a></div><pre>Katrina,

Have you seen the updates to this ticket? How are things going on your end?

Thank you</pre></div><div class='update_description'><i onclick="document.location='26295#1442928709'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-22T13:31:49+00:00">Sep 22, 2015 01:31 PM UTC</time> by <b>echism</b><a class="anchor" name="1442928709">&nbsp;</a></div><pre>Katrina,

Have you seen the updates to this ticket? How are things going on your end?

Thank you</pre></div><div class='update_description'><i onclick="document.location='26295#1442366682'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-16T01:24:42+00:00">Sep 16, 2015 01:24 AM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1442366682">&nbsp;</a></div><pre>Katrina,

Could you provide the output of &#96;condor_ce_q -l&#96; on a stuck job without piping it into condor_ce_job_router_info? Also, BrianB&#39;s suggestions sound reasonable to me, the first one to try and diagnose the cause of the problem and the second so that you don&#39;t have to manually go about removing the &#39;stuck&#39; jobs. Let me know if you need help writing the expression for #2.

- Brian</pre></div><div class='update_description'><i onclick="document.location='26295#1442349089'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T20:31:29+00:00">Sep 15, 2015 08:31 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1442349089">&nbsp;</a></div><pre>Hi,

I believe I addressed all of his questions with my previous response. Was there something I missed?

Thanks,
Katrina

-- by kcollett at Tue Sep 15 01&#58;29&#58;31 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235</a></pre></div><div class='update_description'><i onclick="document.location='26295#1442349014'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T20:30:14+00:00">Sep 15, 2015 08:30 PM UTC</time><a class="anchor" name="1442349014">&nbsp;</a></div><pre>Hi Katrina,

I talked to Trey a bit and have the following recommendations&#58;
- Monitor the value of RecentDaemonCoreDutyCycle within Zabbix to see if your CE is becoming unresponsive periodically (which could cause this).
- Set SYSTEM_PERIODIC_REMOVE to remove jobs from cms1014 that are in H or C state after a much smaller amount of time (maybe 30 minutes?).

Brian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26295#1442259498'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-14T19:38:18+00:00">Sep 14, 2015 07:38 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1442259498">&nbsp;</a></div><pre>Added attachment commands_output.tar
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT105608' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT105608</a>

-- by Katrina Colletti at Mon Sep 14 14&#58;52&#58;23 UTC 2015

Hi,

Attached is the tarred file. SAM tests are run by user &#34;cms1014&#34; on our
site. That account only runs SAM jobs, and no other accounts run any SAM
jobs, so that&#39;s how we tell which jobs are SAM tests. The sys admin for our
site has said that the DN &#39;/DC=com/DC=DigiCert-Grid/O=Open Science
Grid/OU=People/CN=Brian Lin 1047&#39; is mapped to the account &#39;ext-blin&#39;. Is
that what you need?

Thanks for looking into this,
Katrina

-- by Katrina Colletti at Mon Sep 14 14&#58;52&#58;23 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235</a></pre></div><div class='update_description'><i onclick="document.location='26295#1442259474'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-14T19:37:54+00:00">Sep 14, 2015 07:37 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1442259474">&nbsp;</a></div><pre>Katrina,

Have you had time to look in to Brian&#39;s questions?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26295#1441904539'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-10T17:02:19+00:00">Sep 10, 2015 05:02 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1441904539">&nbsp;</a></div><pre>Katrina,

Sorry for the delay but I&#39;ve finally found the time to look at this ticket. If jobs stay stuck in the &#39;C&#39; state, it means that the job finished successfully but for whatever reason, the submitter has not retrieved the output. A few things&#58;

1) I don&#39;t see the osg-profile output or the output of &#39;condor_q -l&#39; in either of the uploaded files. Try running them again, tar&#39;ing the files, and attaching them again please.

2) Could you add my DN (I belong to the osg VO) to your auth system? It&#39;ll help me do some hands-on troubleshooting

3) How do you tell which jobs are the SAM tests?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='26295#1441741451'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-08T19:44:11+00:00">Sep 8, 2015 07:44 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441741451">&nbsp;</a></div><pre>Added attachment condorconfig_condorq_osgprofile.txt
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT105595' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT105595</a>

-- by Katrina Colletti at Tue Sep 08 14&#58;54&#58;27 UTC 2015

Hi,

Sorry that was the wrong information, and I had attached three files but it
appears only one of them got attached to the ticket, so I&#39;m putting all of
the information in one file now. Please ignore the previous information I
sent.

$ condor_ce_q -long 116030.0 | condor_ce_job_router_info -match-jobs
-ignore-prior-routing -jobads -

Matching jobs against routes to find candidate jobs.

Checking for candidate jobs. routing table is&#58;
Route Name             Submitted/Max        Idle/Max     Throttle
Local_PBS                      0/  10000       0/   2000     none
Local_PILOT                    0/  10000       0/   2000     none
Local_SAM                      0/  10000       0/   2000     none

Umbrella constraint&#58; ((target.x509userproxysubject =!= UNDEFINED) &&
(target.x509UserProxyExpiration =!= UNDEFINED) && (time() &#60;
target.x509UserProxyExpiration) && (target.JobUniverse =?= 5 ||
target.JobUniverse =?= 1)) && ( (( TARGET.Owner isnt &#34;cms1014&#34; ) && ( (
TARGET.x509UserProxyFirstFQAN is undefined ) || (
regexp(&#34;/Role=pilot&#34;,TARGET.x509UserProxyFirstFQAN) == false ) )) || ((
TARGET.Owner isnt &#34;cms1014&#34; &&
regexp(&#34;/Role=pilot&#34;,TARGET.x509UserProxyFirstFQAN) )) || (( TARGET.Owner
is &#34;cms1014&#34; )) ) && (target.ProcId &#62;= 0 && target.JobStatus == 1 &&
(target.StageInStart is undefined || target.StageInFinish isnt undefined)
&& target.Managed isnt &#34;ScheddDone&#34; && target.Managed isnt &#34;External&#34; &&
target.Owner isnt Undefined && target.RoutedBy isnt &#34;htcondor-ce&#34;)
<div id='show_1994508669' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1994508669'>Checking Job src=116030,0 against all routes
Route Matches&#58; Local_SAM
Found candidate job src=116030,0,route=Local_SAM
1 candidate jobs found

Thanks,
Katrina

-- by Katrina Colletti at Tue Sep 08 14&#58;54&#58;27 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235</a>
</div><script type='text/javascript'>
        $('#show_1994508669').click(function() {
            $('#detail_1994508669').slideDown("normal");
            $('#show_1994508669').hide();
            $('#hide_1994508669').show();
        });
        $('#hide_1994508669').click(function() {
            $('#detail_1994508669').slideUp();
            $('#hide_1994508669').hide();
            $('#show_1994508669').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='26295#1441392127'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-04T18:42:07+00:00">Sep 4, 2015 06:42 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441392127">&nbsp;</a></div><pre>Added attachment condor_ce_config_val_dump.txt
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT105587' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT105587</a>

-- by Katrina Colletti at Thu Sep 03 16&#58;51&#58;02 UTC 2015

Hi,

Ok I have the outputs to those commands (below and attached). Well, we
don&#39;t have an &#34;osg-profile&#34; command but we do have an &#34;osg-system-profiler&#34;
command so I ran that and got an &#34;osg-profile.txt&#34; file, I assume that is
what you are looking for?

Note the job that is currently &#34;stuck&#34; is in the &#34;completed&#34; status in the
condor queue, and it&#39;s been there since ~2pm CT yesterday, Thursday 9/2
(currently that&#39;s a little less than 24 hours). It being &#34;stuck&#34; in the
queue has caused subsequent SAM tests that depend on it to stop being sent,
see the white slots in the attached image.

Thanks,
Katrina

[1]&#58;
[kcolletti1@login01 ~]$ condor_ce_q -l 116030 | condor_ce_job_router_info
-match-jobs -ignore-prior-routing -jobads -

Matching jobs against routes to find candidate jobs.

Checking for candidate jobs. routing table is&#58;
Route Name             Submitted/Max        Idle/Max     Throttle
Local_PBS                      0/  10000       0/   2000     none

Umbrella constraint&#58; ((target.x509userproxysubject =!= UNDEFINED) &&
(target.x509UserProxyExpiration =!= UNDEFINED) && (time() &#60;
target.x509UserProxyExpiration) && (target.JobUniverse =?= 5 ||
target.JobUniverse =?= 1)) && ( (true) ) && (target.ProcId &#62;= 0 &&
<div id='show_243789303' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_243789303'>target.JobStatus == 1 && (target.StageInStart is undefined ||
target.StageInFinish isnt undefined) && target.Managed isnt &#34;ScheddDone&#34; &&
target.Managed isnt &#34;External&#34; && target.Owner isnt Undefined &&
target.RoutedBy isnt &#34;htcondor-ce&#34;) && (target.Owner == &#34;kcolletti1&#34;)
0 candidate jobs found

-- by Katrina Colletti at Thu Sep 03 16&#58;51&#58;02 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235</a>
</div><script type='text/javascript'>
        $('#show_243789303').click(function() {
            $('#detail_243789303').slideDown("normal");
            $('#show_243789303').hide();
            $('#hide_243789303').show();
        });
        $('#hide_243789303').click(function() {
            $('#detail_243789303').slideUp();
            $('#hide_243789303').hide();
            $('#show_243789303').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='26295#1441225645'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T20:27:25+00:00">Sep 2, 2015 08:27 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1441225645">&nbsp;</a></div><pre>Katrina,

Per Edgar&#58;

Can you run three things please&#58;

1. osg-profile

2. condor_ce_config_val -dump and attach the output.

3. condor_ce_q -l of one the &#34;stuck&#34; sam tests, that way we can help on debugging and understanthign the isssue.</pre></div><div class='update_description'><i onclick="document.location='26295#1440430845'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-24T15:40:45+00:00">Aug 24, 2015 03:40 PM UTC</time><a class="anchor" name="1440430845">&nbsp;</a></div><pre>Hi Katrina,

Can you run three things please&#58;

1. osg-profile

2. condor_ce_config_val -dump and attach the output.

3. condor_ce_q -l of one the &#34;stuck&#34; sam tests, that way we can help on debugging and understanthign the isssue.

Cheers,

Edgar

OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='26295#1440101601'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-20T20:13:21+00:00">Aug 20, 2015 08:13 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1440101601">&nbsp;</a></div><pre>Ok. We will wait for the next time this happens and look at the log files and the job limits per route info to see if we can get any insight from that.

-- by kcollett at Wed Aug 19 17&#58;59&#58;13 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235</a></pre></div><div class='update_description'><i onclick="document.location='26295#1440101560'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-20T20:12:40+00:00">Aug 20, 2015 08:12 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1440101560">&nbsp;</a></div><pre>Katrina,

I am stumped on this.  I have added the OSG Software team to see if they have an idea.  Any insight woudl be helpful.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26295#1439920443'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-18T17:54:03+00:00">Aug 18, 2015 05:54 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1439920443">&nbsp;</a></div><pre>I think the only viable option is to solve the stuck job problem. Otherwise also other submission kinds will get in trouble.

-- by stefano.belforte at Tue Aug 18 16&#58;35&#58;36 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235</a></pre></div><div class='update_description'><i onclick="document.location='26295#1439911022'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-18T15:17:02+00:00">Aug 18, 2015 03:17 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1439911022">&nbsp;</a></div><pre>Notified CMS SAM team of this ticket.Let me assign this case to the CMS SAM unit. Note that the main expert for SAM from CMS is on vacation right now.

Nevertheless let me state already, that it is quite unlikely that the time out of 24h hours will be changed for SAM tests. A SAM job might well be (properly) queued at a site for several hours. In that case there is no reason to &#39;hard kill&#39; it and report it failed.

Anyway let&#39;s wait for the expert to give some more input.

Christoph (CMS CRC this week)

-- by Christoph Wissing at Tue Aug 18 15&#58;16&#58;08 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235</a></pre></div><div class='update_description'><i onclick="document.location='26295#1439838695'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-17T19:11:35+00:00">Aug 17, 2015 07:11 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1439838695">&nbsp;</a></div><pre>Could someone on the GGUS side give Katrina some insight into reducing the hard time limit?

Thanks,
Kyle</pre></div><div class='update_description'><i onclick="document.location='26295#1439656893'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-15T16:41:33+00:00">Aug 15, 2015 04:41 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1439656893">&nbsp;</a></div><pre>Hi,

Thanks for the info. We have ALL_DEBUG turned up, so we can look at that next time this happens.

Our solutions so far have been either to manually kill/remove stuck jobs ourselves or wait for the SAM side to forcibly remove them and restart sending tests (it does this after 24 hours it seems). When the jobs that are causing more SAM jobs not to be sent are removed, it clears the problem and tests start showing up as green again. So we are wondering if it is possible on the SAM side to reduce this &#34;hard time limit&#34; so that we wouldn&#39;t have to wait a whole day with missing tests. I&#39;m not completely sure who the right person to ask about this is.

Thanks!
Katrina

-- by kcollett at Sat Aug 15 16&#58;40&#58;48 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235</a></pre></div><div class='update_description'><i onclick="document.location='26295#1439492050'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T18:54:10+00:00">Aug 13, 2015 06:54 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1439492050">&nbsp;</a></div><pre>Sorry... forgot to add this....

If the limit of jobs per route has been reached, then look to here&#58;

<a href='https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/JobRouterRecipes#Maximum_number_of_jobs' target='_blank' rel='nofollow'>https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/JobRouterRecipes#Maximum_number_of_jobs</a>

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26295#1439491968'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-13T18:52:48+00:00">Aug 13, 2015 06:52 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1439491968">&nbsp;</a></div><pre>Katrina,

I think you might try this on one or more of the stuck jobs.

<a href='https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/TroubleshootingHTCondorCE#condor_ce_job_router_info' target='_blank' rel='nofollow'>https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/TroubleshootingHTCondorCE#condor_ce_job_router_info</a>

$ condor_ce_q -l &#60;Job ID&#62; | condor_ce_job_router_info -match-jobs -ignore-prior-routing -jobads -

Try to see if the jobs match any routes. If it tells you the job matches, it may be that the job limits per route have been matched.

If nothing after that, you&#39;ll want to turn up debugging &#39;ALL_DEBUG=D_FULLDEBUG&#39; and check out the job router log.

Let me know if that turns up anything.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26295#1439308520'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-11T15:55:20+00:00">Aug 11, 2015 03:55 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1439308520">&nbsp;</a></div><pre>Hi,

Just to provide some more information, we see this issue happening on our site at the moment. This time, there are three SAM jobs in the condor queue that say they are completed, but they are from yesterday and don&#39;t seem to be exiting the condor queue correctly. Having jobs &#34;stuck&#34; in the condor queue like this seem to cause more SAM tests not to be sent to us, so I guess the question is why do jobs get &#34;stuck&#34; in the condor queue.

-Katrina

-- by kcollett at Tue Aug 11 15&#58;54&#58;30 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235</a></pre></div><div class='update_description'><i onclick="document.location='26295#1439237318'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-10T20:08:38+00:00">Aug 10, 2015 08:08 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1439237318">&nbsp;</a></div><pre>Hi,

The glexec test failing is a known issue for our site, and we think it is a separate issue to the tests going idle for some periods of time. The problem with the idle tests is intermittent and only occurs every now and then, when it seems that some tests stay idle in the condor queue which cause further SAM tests not to be sent until they no longer see idle jobs in the queue (we&#39;ve had to forcibly remove them to get around this problem when it occurs).

-Katrina

-- by kcollett at Mon Aug 10 20&#58;08&#58;17 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235</a></pre></div><div class='update_description'><i onclick="document.location='26295#1439236083'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-10T19:48:03+00:00">Aug 10, 2015 07:48 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1439236083">&nbsp;</a></div><pre>Katrina,

Are jobs still staying idle or do you see them failing because glexec is missing?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26295#1438714836'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-04T19:00:36+00:00">Aug 4, 2015 07:00 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1438714836">&nbsp;</a></div><pre>Katrina,

Are jobs still staying idle or do you see them failing because glexec is missing?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26295#1438272470'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-30T16:07:50+00:00">Jul 30, 2015 04:07 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1438272470">&nbsp;</a></div><pre>Hello,
I really don&#39;t know why the SAM jobs should stay idle in the Condor queue of the site. I would suppose that some proper local troubleshooting is needed, to find out the cause. Then it might be that the cause is somehow due to how SAM submits the jobs, but until the cause is found, I cannot help.

Concerning the glexec test, it fails simply because it cannot find glexec in this path&#58;

glexec=${OSG_GLEXEC_LOCATION&#58;-${GLEXEC_LOCATION&#58;-${GLITE_LOCATION&#58;-/usr}}/sbin/glexec}

Andrea

-- by Andrea Sciaba at Thu Jul 30 16&#58;06&#58;44 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235</a></pre></div><div class='update_description'><i onclick="document.location='26295#1438200690'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-29T20:11:30+00:00">Jul 29, 2015 08:11 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1438200690">&nbsp;</a></div><pre>Katrina,

Right now you have both and OSG ticket (<a href='https&#58;//ticket.grid.iu.edu/26295' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/26295</a>) and a GGUS ticket (<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235</a>) open.

With regards to your problem, I have not heard of this happening to other sites.  I only see the glexec tests failing when I look at the test results. (<a href='http&#58;//wlcg-sam-cms.cern.ch/templates/ember/#/plot?group=AllGroups&profile=CMS_CRITICAL&sites=T3_US_TAMU' target='_blank' rel='nofollow'>http&#58;//wlcg-sam-cms.cern.ch/templates/ember/#/plot?group=AllGroups&profile=CMS_CRITICAL&sites=T3_US_TAMU</a>)

Perhaps someone on the SAM team could look in to this since they will know what will make SAM test jobs different than other jobs.  Could someone on the GGUS side bring in someone for the SAM team?

I have also added Andrea to this as it seems that&#39;s who the failing jobs are coming from. (<a href='http&#58;//wlcg-sam-cms.cern.ch/dashboard/request.py/metricOutput?host=ce01.brazos.tamu.edu&metricfqan=org.cms.glexec.WN-gLExec%20' target='_blank' rel='nofollow'>http&#58;//wlcg-sam-cms.cern.ch/dashboard/request.py/metricOutput?host=ce01.brazos.tamu.edu&metricfqan=org.cms.glexec.WN-gLExec%20</a>(/cms/Role_pilot)&time=2015-07-29T19&#58;18&#58;26Z)

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26295#1437992012'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-27T10:13:32+00:00">Jul 27, 2015 10:13 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1437992012">&nbsp;</a></div><pre>Hi,

We seem to be having a recurring problem at our site in which SAM tests just sit idle in the condor queue and never begin running. This causes our SAM tests to start showing up missing and they won&#39;t start running again until we manually kill the jobs that get &#34;stuck&#34; in the queue. They aren&#39;t held, they just get submitted and never start running in the first place. We are trying to figure out why this is happening. Does this problem occur at other sites as well? Is this a ggus issue, or do you think we should open an OSG ticket? Any hints are appreciated!

Thanks,
Katrina
Affected Site&#58; TAMU_BRAZOS

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=115235</a>

[Ticket History]
Subject&#58; SAM tests idle
Ticket Type&#58; USER
CC&#58; toback@....; georgemm01@....;
-- by kcollett at Fri Jul 24 16&#58;50&#58;43 UTC 2015

-- by Ondrej Ferdan at Mon Jul 27 10&#58;13&#58;17 UTC 2015</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F26295">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
