<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[34965] how do I update Oasis froma cron job</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=34965" method="post">
<div class="page-header">
    <h3><span class="muted">34965</span> / how do I update Oasis froma cron job</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Mark Ito</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls"> Mark Ito</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-10-06</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Scott Teige <span class="muted"> / OSG Operations Infrastructure</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/34965", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/34965?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/34965?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20how%20do%20I%20update%20Oasis%20froma%20cron%20job%20ISSUE%3D34965%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='34965#1507411031'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-07T21:17:11+00:00">Oct 7, 2017 09:17 PM UTC</time> by <b>marki@....</b><a class="anchor" name="1507411031">&nbsp;</a></div><pre>OK. If passphrase-less keys are allowed, that totally solves the cron
job problem. Control on both ends a definite advantage from my point of
view. And if we go that route, I myself would feel better if both host
and command restrictions are in the authorized key files. Thanks for
closing the loop on that idea.

For the record, this ticket is closed should remain so.

On 10/06/2017 05&#58;20 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='34965#1507324887'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-06T21:21:27+00:00">Oct 6, 2017 09:21 PM UTC</time> by <b>Dave Dykstra</b><a class="anchor" name="1507324887">&nbsp;</a></div><pre>Yes I was assuming a passphrase-less key.  You&#39;d have to keep the key secure exactly like you&#39;d have to keep a passphrase-less service certificate&#39;s key secure.  The difference is that you&#39;ve got complete control over both ends, unlike with the service certificate, where you have to ask the GOC to add it for you.  You could use an authorized_keys file entry that restricts the command if you want, which is better than what you can do with a service certificate.

Anyway, as you requested, I am closing this ticket.</pre></div><div class='update_description'><i onclick="document.location='34965#1507251730'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-06T01:02:10+00:00">Oct 6, 2017 01:02 AM UTC</time> by <b>marki@....</b><a class="anchor" name="1507251730">&nbsp;</a></div><pre>That&#39;s a good suggestion, but the issue from a cron job is that you
still need to provide a passphrase for the key. There is no ssh-agent to
provide one. In similar situations, I have used passphrase-less keys,
but always with a specific &#34;command&#34; and &#34;host&#34; qualifier in the
authorized_keys file. That limits the damage if the private key gets
compromised.

But folks, I talked to Richard Jones and we are going to work on a
solution where we expose the JLab files we need to http and then run a
pull cron job on the OSG side. We may revisit the service certificate
thing at a later date, but for now you can close this ticket. Thanks for
all the help! &#58;-)

On 10/05/2017 12&#58;56 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='34965#1507222635'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-05T16:57:15+00:00">Oct 5, 2017 04:57 PM UTC</time> by <b>Dave Dykstra</b><a class="anchor" name="1507222635">&nbsp;</a></div><pre>Hey, I just discovered something simpler that you can do yourself, Mark.  Regular ssh also works.  Once you&#39;re logged in interactively with gsissh, you can set up a .ssh/authorized_keys file and use the ordinary mechanisms for that.  Does that sound good?</pre></div><div class='update_description'><i onclick="document.location='34965#1507064375'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-03T20:59:35+00:00">Oct 3, 2017 08:59 PM UTC</time> by <b>Dave Dykstra</b><a class="anchor" name="1507064375">&nbsp;</a></div><pre>Elizabeth&#58; I was thinking that since gsissh does not need to send credentials to another machine that a proxy would not be necessary, the cert & key could be used directly.  I think that gsissh can just work with X509_USER_CERT and X509_USER_KEY environment variables, but we&#39;d have to try it.</pre></div><div class='update_description'><i onclick="document.location='34965#1507054752'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-03T18:19:12+00:00">Oct 3, 2017 06:19 PM UTC</time> by <b>echism</b><a class="anchor" name="1507054752">&nbsp;</a></div><pre>Yes, and also for the proxy you want to specify the cert key and length, i.e. -valid 24&#58;0 -key /etc/grid-security/(key location) cert /etc/grid-security/(cert location)

Thanks</pre></div><div class='update_description'><i onclick="document.location='34965#1507054626'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-03T18:17:06+00:00">Oct 3, 2017 06:17 PM UTC</time> by <b>Dave Dykstra</b><a class="anchor" name="1507054626">&nbsp;</a></div><pre>This will be up to GOC staff to add, but please confirm the DN of the service certificate you want added.</pre></div><div class='update_description'><i onclick="document.location='34965#1506555552'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-27T23:39:12+00:00">Sep 27, 2017 11:39 PM UTC</time> by <b>marki@....</b><a class="anchor" name="1506555552">&nbsp;</a></div><pre>So sounds like this service certificate is distinct from a personal
certificate and allows password-less (passphrase-less?) access via
gsissh. If so, perfect. Yes, please.

On 09/27/2017 06&#58;01 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='34965#1506549751'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-27T22:02:31+00:00">Sep 27, 2017 10:02 PM UTC</time> by <b>Dave Dykstra</b><a class="anchor" name="1506549751">&nbsp;</a></div><pre>Stash-cache is intended for data files, not for code.  Scott may be thinking about the OSG VO&#39;s interface to oasis, which does indeed use a different mechanism.  There are many smaller projects that go through the OSG VO interface, which is called OSG Connect.  I don&#39;t know the details, but projects can install files into their server which OSG Connect copies to oasis-login.

If you have a service certificate DN registered to you, and you have read access to the key, you should be able to set X509_USER_CERT and X509_USER_KEY environment variables pointing to them and then gsissh should allow you to log in to oasis-login.</pre></div><div class='update_description'><i onclick="document.location='34965#1506543850'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-27T20:24:10+00:00">Sep 27, 2017 08:24 PM UTC</time> by <b>marki@....</b><a class="anchor" name="1506543850">&nbsp;</a></div><pre>A DN for me (us?) sounds good, but not sure how to use it once we have it.

And another question&#58; how does stash-cache differ from dumping files on
OASIS? Does it use a different mechanism?

On 09/25/2017 10&#58;43 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='34965#1506350692'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-25T14:44:52+00:00">Sep 25, 2017 02:44 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1506350692">&nbsp;</a></div><pre>Sure, we can add a DN for you, just let us know what you want, we&#39;ll get after it.

You might want to consider stash-cache as another solution.

S</pre></div><div class='update_description'><i onclick="document.location='34965#1506348732'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-25T14:12:12+00:00">Sep 25, 2017 02:12 PM UTC</time> by <b>marki@....</b><a class="anchor" name="1506348732">&nbsp;</a></div><pre>Yes. We are trying to push to oasis-login since the files are not
available without password authentication from outside JLab, i. e.,
problem in reverse.

There are other work-arounds that I can try, but this method offers a
lot of flexibility for us.

On 09/22/2017 05&#58;06 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='34965#1506114415'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-22T21:06:55+00:00">Sep 22, 2017 09:06 PM UTC</time> by <b>Dave Dykstra</b><a class="anchor" name="1506114415">&nbsp;</a></div><pre>Yes, a cron is one way to do it, if it is convenient to initiate from oasis-login.  Maybe that account does not have access to the source files on another machine, however, and he&#39;ll have the same problem in reverse.  Alternatively couldn&#39;t anyone at the GOC register the service certificate DN as an additional DN for him?  If I login to oim.opensciencegrid.org and click on &#34;My Profile&#34; I can see the DNs associated with me but I can&#39;t add any more, so I assume a GOC person has to add additional DNs.</pre></div><div class='update_description'><i onclick="document.location='34965#1506113346'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-22T20:49:06+00:00">Sep 22, 2017 08:49 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1506113346">&nbsp;</a></div><pre>The VO manager should be able to gsissh into oasis-login.opensciencegrid.org
Once there an ordinary crontab entry should do the job.
It&#39;s been a very long time since I did this and Dave Dykstra has taken over
the development effort, if there are problems, let me know, I&#39;ll see what I can do.

S</pre></div><div class='update_description'><i onclick="document.location='34965#1506110941'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-22T20:09:01+00:00">Sep 22, 2017 08:09 PM UTC</time> by <b>echism</b><a class="anchor" name="1506110941">&nbsp;</a></div><pre>Scott,

Can you peek at this one?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34965#1506099982'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-22T17:06:22+00:00">Sep 22, 2017 05:06 PM UTC</time><a class="anchor" name="1506099982">&nbsp;</a></div><pre>OK. Turns out we already seem to have certificates installed on the submit host we are using a JLab. I /etc/grid-security looks like&#58;

<font color='#7F7E6F'>&#62; ls -l</font>
total 84
drwxr-xr-x  2 root root 45056 Apr 13 08&#58;33 certificates
-rw-r--r--  1 root root  2460 Dec 25  2016 gsi.conf
-rw-r--r--  1 root root  1524 Mar 21  2017 hostcert.pem
-rw-------  1 root root  1704 Mar 21  2017 hostkey.pem
drwxr-xr-x 42 root root  4096 Apr 13 08&#58;32 vomsdir

And openssl seems to be able to read it&#58;

<font color='#7F7E6F'>&#62; openssl x509 -in /etc/grid-security/hostcert.pem -subject -issuer -dates -noout</font>
subject= /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=scosg16.jlab.org
issuer= /DC=org/DC=cilogon/C=US/O=CILogon/CN=CILogon OSG CA 1
notBefore=Mar 21 17&#58;36&#58;19 2017 GMT
notAfter=Apr 20 17&#58;41&#58;19 2018 GMT

So how do I use this thing in a cron job?

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Mark Ito 1104</pre></div><div class='update_description'><i onclick="document.location='34965#1505925911'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-20T16:45:11+00:00">Sep 20, 2017 04:45 PM UTC</time> by <b>Dave Dykstra</b><a class="anchor" name="1505925911">&nbsp;</a></div><pre>I agree with Suchandra except I don&#39;t think that a proxy should even be needed once you have a service certificate registered.  gsissh doesn&#39;t care about voms proxy information so the service certificate itself should be sufficient.

Do take a lot of care to protect that service certificate, however, putting it only on a local disk on a secure machine, because anyone who has it will be able to log in as you.</pre></div><div class='update_description'><i onclick="document.location='34965#1505920322'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-20T15:12:02+00:00">Sep 20, 2017 03:12 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1505920322">&nbsp;</a></div><pre>Hi Mark,

You&#39;ll need to get the service cert registered with Scott or someone at the GOC so that it can be used to login.  Once that&#39;s done, I have a script that you can use to generate a proxy using the service cert in a cron to generate a proxy.  Using the proxy, you should be able to gsissh as normal and run the appropriate commands on the osg host to update OASIS.

Suchandra</pre></div><div class='update_description'><i onclick="document.location='34965#1505918529'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-20T14:42:09+00:00">Sep 20, 2017 02:42 PM UTC</time> by <b>echism</b><a class="anchor" name="1505918529">&nbsp;</a></div><pre>Mark,

I think this script is along the lines of what you want <a href='https&#58;//raw.githubusercontent.com/DHTC-Tools/OSG-Connect/master/gwms-frontend/make-proxy.sh' target='_blank' rel='nofollow'>https&#58;//raw.githubusercontent.com/DHTC-Tools/OSG-Connect/master/gwms-frontend/make-proxy.sh</a>

I&#39;m CCing Dave who is our oasis expert.

Thanks</pre></div><div class='update_description'><i onclick="document.location='34965#1505917453'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-20T14:24:13+00:00">Sep 20, 2017 02:24 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1505917453">&nbsp;</a></div><pre>I would like to run a cron job to update our OASIS area periodically. right now. I need a way to have the job authenticate without generating a proxy, which requires a passphrase.

I have heard of a mechanism involving &#34;service certificates&#34;. I found a page describing how to get one, but it did not tell me what they are good for, so I don&#39;t know if that has anything to do with my use case.

Help appreciated.

by  Mark Ito (guest)</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F34965">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
