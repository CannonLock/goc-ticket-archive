<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="/">
    <title>[13516] Support for GLOW VO</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="//netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="https://ticket.opensciencegrid.org/images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="https://ticket.opensciencegrid.org/lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=13516" method="post">
<div class="page-header">
    <h3><span class="muted">13516</span> / Support for GLOW VO</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Daniel Bradley</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">MIT_CMS</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">GLOW</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Daniel Bradley</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">GLOW-TECH</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Brian/Neha actively working on this</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-09-13</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USCMS Tier 2 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GLOW-TECH <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Neha Sharma <span class="muted"> / OSG Storage Team</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=13516", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="/13516?sort=up&"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="/13516?expandall=true&">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Support%20for%20GLOW%20VO%20ISSUE%3D13516%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='13516#1379517252'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-18T15:14:12+00:00">Sep 18, 2013 03:14 PM UTC</time><a class="anchor" name="1379517252">&nbsp;</a></div><pre>Well, I did look what this field is for other grids, and did set it to &#39;/NEBioGrid&#39; to begin with, so I think we are good and scan close the ticket.
Thank you all for all the help, now long standing mystery is solved.

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1379516120'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-18T14:55:20+00:00">Sep 18, 2013 02:55 PM UTC</time><a class="anchor" name="1379516120">&nbsp;</a></div><pre>No objections from me for closing this ticket.  It sounds like Brian has one last suggestion to Max that is pending.  --Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley</pre></div><div class='update_description'><i onclick="document.location='13516#1379515333'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-18T14:42:13+00:00">Sep 18, 2013 02:42 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1379515333">&nbsp;</a></div><pre>Great job Brian!!!
------------------------------------------------
Neha Sharma
Fermilab/FermiGrid/OSG Software
WH8E/630-840-6791
-------------------------------------------------

On Sep 17, 2013, at 5&#58;09 PM, Open Science Grid FootPrints wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='13516#1379515153'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-18T14:39:13+00:00">Sep 18, 2013 02:39 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1379515153">&nbsp;</a></div><pre>Max,

I think you actually need to set the VO group to &#39;/NEBioGrid&#39; for it to match members from that VO. Once you set that and revert the logging levels back to default, let us know so we can close this ticket.</pre></div><div class='update_description'><i onclick="document.location='13516#1379458437'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-17T22:53:57+00:00">Sep 17, 2013 10:53 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1379458437">&nbsp;</a></div><pre>Hi Dan,

Can we close this ticket since it looks like it&#39;s been fixed?

Suchandra</pre></div><div class='update_description'><i onclick="document.location='13516#1379455741'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-17T22:09:01+00:00">Sep 17, 2013 10:09 PM UTC</time><a class="anchor" name="1379455741">&nbsp;</a></div><pre>I confirm that I can now authenticate to the MIT CE using a GLOW proxy.  You rock, Brian!!  Thanks to everyone who pitched in on this.  It certainly was not obvious to me what was going wrong.

--Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley</pre></div><div class='update_description'><i onclick="document.location='13516#1379448027'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-17T20:00:27+00:00">Sep 17, 2013 08:00 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1379448027">&nbsp;</a></div><pre>I ran a test job successfully with a GLOW VO after Max made the changes. Dan, could you try a job from you&#39;re end? if that succeeds, we can go about closing this ticket.</pre></div><div class='update_description'><i onclick="document.location='13516#1379439638'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-17T17:40:38+00:00">Sep 17, 2013 05:40 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1379439638">&nbsp;</a></div><pre>Max,

I think I&#39;ve found the source of the problem. You&#39;re missing the voGroup in the vomsUserGroup, &#39;NEBioGrid&#39; and since that user group is set to check the VO, it barfs. That&#39;s relevant here because the &#39;sbgrid&#39; occurs before &#39;GLOW&#39; in all of your hostToGroupMappings, so it will try to map the DN using the &#39;NEBioGrid&#39; before &#39;GLOW&#39; and fail miserably. If you go to your GUMS webui -&#62; User Groups -&#62; edit NEBioGrid and set VO/Group to &#39;NEBioGrid&#39;, restart gums and I think that should work.

P.S. I removed your gums.config since it had your GUMS mysql database password in it. Sorry about that oversight but you may want to change that password and the value in gums.config.

- Brian</pre></div><div class='update_description'><i onclick="document.location='13516#1379373555'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-16T23:19:15+00:00">Sep 16, 2013 11:19 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1379373555">&nbsp;</a></div><pre>I created a TWiki document on what I&#39;ve found today, <a href='https&#58;//twiki.opensciencegrid.org/bin/view/Main/MitGums.' target='_blank' rel='nofollow'>https&#58;//twiki.opensciencegrid.org/bin/view/Main/MitGums.</a> Max, I will ping you tomorrow about upping the logging further.</pre></div><div class='update_description'><i onclick="document.location='13516#1379351798'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-16T17:16:38+00:00">Sep 16, 2013 05:16 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1379351798">&nbsp;</a></div><pre>Brian,

Please keep us updated on your progress and let us know what you are able to find out.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='13516#1379100741'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-13T19:32:21+00:00">Sep 13, 2013 07:32 PM UTC</time><a class="anchor" name="1379100741">&nbsp;</a></div><pre>Hi Brian,
Sure thing, please find me on aim at maximg72 and then I will set you up

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1379099771'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-13T19:16:11+00:00">Sep 13, 2013 07:16 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1379099771">&nbsp;</a></div><pre>Hey Max,

I&#39;m sorry that this is taking so long but I should be able to dedicate a lot more time to troubleshooting this issue and pull in other resources if need be. If possible, could I get access to one of your CE&#39;s (a test one should be ok as long as it reproduces the original problem) and your GUMS server?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='13516#1378753012'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T18:56:52+00:00">Sep 9, 2013 06:56 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1378753012">&nbsp;</a></div><pre>Hello,
Brian and Neha ,

Are there any updates on this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='13516#1377822024'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-30T00:20:24+00:00">Aug 30, 2013 12:20 AM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1377822024">&nbsp;</a></div><pre>Hello,
Brian and Neha ,

Are there any updates on this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='13516#1377018440'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-20T17:07:20+00:00">Aug 20, 2013 05:07 PM UTC</time><a class="anchor" name="1377018440">&nbsp;</a></div><pre>Yes, the file you asked for is attached to this ticket.

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1377011014'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-20T15:03:34+00:00">Aug 20, 2013 03:03 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1377011014">&nbsp;</a></div><pre>Max, have you had a chance to get the output/files I requested?</pre></div><div class='update_description'><i onclick="document.location='13516#1376401417'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-13T13:43:37+00:00">Aug 13, 2013 01:43 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1376401417">&nbsp;</a></div><pre>Max,

Could you run osg-system-profiler on your production CE and attach the output? Do you have an /etc/osg/osg-update-certs.conf? If so, attach that as well.

- Brian</pre></div><div class='update_description'><i onclick="document.location='13516#1376328948'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-12T17:35:48+00:00">Aug 12, 2013 05:35 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1376328948">&nbsp;</a></div><pre>Hello All,

Are there any new updates on this issue?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='13516#1374598927'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-23T17:02:07+00:00">Jul 23, 2013 05:02 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1374598927">&nbsp;</a></div><pre>Initial problem was reported to be in the GUMS configuration (since it failed to map users coming in with GLOW VO based proxies)

This was ruled out because the same GUMS server worked just fine when a test CE at fermilab was configured to use it (yes, with the GLOW VO based proxies)
This test also ruled out that failure was related to NULL values for email address in GUMS database

Next, the focus shifted on how the production MIT CE was configured to make callout to MIT GUMS.
This is also fine since those callouts happen just fine when jobs come in under other VOs
As part of this, various lcas/lcmaps packages were updated. log levels for lcmaps were increased aswell but no luck figuring out what is wrong.

Next, we started looking in to what could be different with set of the &#39;glow&#39; user on the production MIT CE.
Everything looked fine - the uid/gid/home dir and permissions on it

Next, we thought of using a test CE to see if problem could be reproduced there, so that if it does, there is more flexibility to try things - perform upgrades of anything etc etc
Current status is that problem can be reproduced , the set up of glow user seems just fine to me, however , even a simple globus-job-run coming in with a &#39;GLOW&#39; proxy does not work - infact job seems to be ending up in a black hole - with nothing showing up in gatekeeper logs.
This needs to be solved first

- when a test CE at fermilab was configured to use MIT GUMS server, everything worked just fine.
The problem is also not that CE is not configured correctly to make callout to GUMS server - this is because jobs coming in under VOs besides glow, work just fine
To me, the issue seems to be how local user &#39;glow&#39; is set up, both on production and test CE</pre></div><div class='update_description'><i onclick="document.location='13516#1374595636'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-23T16:07:16+00:00">Jul 23, 2013 04:07 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1374595636">&nbsp;</a></div><pre>I am confused about the state of this ticket. Could someone summarize? My reading is that, initially, all of the focus was on a GUMS mapping failure for Dan Bradley (and possibly others) coming from the GLOW VO. It may or may not have had something to do with NULL values for email addresses in the GUMS database, although I see no record of an explicit check for that. But then, suddenly, the focus shifted to an alternate CE and its problems.

I understand the value of reproducing a problem, but I am not convinced that we thought hard enough about the GUMS problems on the original CE. Do the same failures occur for GLOW VO users with a blank (but not NULL) email address in the database? How about users with a valid email address in the database?</pre></div><div class='update_description'><i onclick="document.location='13516#1374517043'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-22T18:17:23+00:00">Jul 22, 2013 06:17 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1374517043">&nbsp;</a></div><pre>We need to figure out what is wrong with the setup of glow user . I am running out of options and this ticket has been open for a long time. Could we please request some gatekeeper expert to jump in and help us figure out why globus job submissions would work for &#39;fermilab&#39; VO but not glow&#39; VO. The user &#39;glow&#39; exists and home area is set up correctly, nothing with this users setup seems suspicious to me.

Once the globus job submission works for the glow user, and if the issue with the GUMS configuration still persists, I will be happy to further help on this
-Neha</pre></div><div class='update_description'><i onclick="document.location='13516#1374247281'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-19T15:21:21+00:00">Jul 19, 2013 03:21 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1374247281">&nbsp;</a></div><pre>Max and I worked on this yesterday. With my fermilab VO based user proxy, I could submit fork job to the test gatekeeper and it finished successfully. The condor job (even though server side logs indicated was successful), failed on my end with following error message

-bash-3.2$ globus-job-run t2bat0210.cmsaf.mit.edu&#58;2119/jobmanager-condor /usr/bin/id
GRAM Job submission failed because the connection to the server failed (check host and port) (error code 12)
-bash-3.2$

With GLOW VO based user proxy, neither fork nor condor job worked - infact there was nothing in the gatekeeper log or /var/log/messages corresponding to these job submissions. The LCMAPS_DEBUG_LEVEL is set to 5 in the /etc/sysconfig/globus-gatekeeper file.</pre></div><div class='update_description'><i onclick="document.location='13516#1373983347'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-16T14:02:27+00:00">Jul 16, 2013 02:02 PM UTC</time><a class="anchor" name="1373983347">&nbsp;</a></div><pre>Yes, we are online.

I normally do not turn on test CE, only when there is work to be done. So Neha, please aim before you start tests so that I can make sure that CE is functioning.

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1373981928'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-16T13:38:48+00:00">Jul 16, 2013 01:38 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1373981928">&nbsp;</a></div><pre>Max&#58; Is the cluster back up yet?
Neha&#58; Have you had a chance to poke at this recently?</pre></div><div class='update_description'><i onclick="document.location='13516#1373052716'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-05T19:31:56+00:00">Jul 5, 2013 07:31 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1373052716">&nbsp;</a></div><pre>Hi
Have the nodes recovered from power failure? I still see the same error
-Neha</pre></div><div class='update_description'><i onclick="document.location='13516#1373052602'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-05T19:30:02+00:00">Jul 5, 2013 07:30 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1373052602">&nbsp;</a></div><pre>Hi
Have the nodes recovered from power failure? I still see the same error
-Neha</pre></div><div class='update_description'><i onclick="document.location='13516#1372869353'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-03T16:35:53+00:00">Jul 3, 2013 04:35 PM UTC</time><a class="anchor" name="1372869353">&nbsp;</a></div><pre>Hi Neha,

~ 1 hour ago we had a power failure, the cluster is offline

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1372868977'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-03T16:29:37+00:00">Jul 3, 2013 04:29 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1372868977">&nbsp;</a></div><pre>I just tested and it has not been created
-bash-3.2$
globus-job-run t2bat0210.cmsaf.mit.edu&#58;2119/jobmanager-fork /usr/bin/id
GRAM Job submission failed because the connection to the server failed (check host and port) (error code 12)
-bash-3.2$</pre></div><div class='update_description'><i onclick="document.location='13516#1372724208'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-02T00:16:48+00:00">Jul 2, 2013 12:16 AM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1372724208">&nbsp;</a></div><pre>Neha,

Do you know if the &#39;fermilab&#39; user was created yet, have you been able to retry?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='13516#1371845077'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-21T20:04:37+00:00">Jun 21, 2013 08:04 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1371845077">&nbsp;</a></div><pre>Could you create the &#39;fermilab&#39; user on this gatekeeper?
I also tried with my GLOW proxy and get connection failure.

-bash-3.2$ voms-proxy-info -all
subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/CN=UID&#58;neha/CN=proxy
issuer    &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/CN=UID&#58;neha
identity  &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/CN=UID&#58;neha
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /tmp/x509up_u60158
timeleft  &#58; 11&#58;59&#58;55
key usage &#58; Digital Signature, Key Encipherment
=== VO GLOW extension information ===
VO        &#58; GLOW
subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/CN=UID&#58;neha
issuer    &#58; /DC=org/DC=doegrids/OU=Services/CN=glow-voms.cs.wisc.edu
attribute &#58; /GLOW/Role=NULL/Capability=NULL
timeleft  &#58; 11&#58;59&#58;55
uri       &#58; glow-voms.cs.wisc.edu&#58;15001

-bash-3.2$
-bash-3.2$ globus-job-run t2bat0210.cmsaf.mit.edu&#58;2119/jobmanager-fork /usr/bin/id
GRAM Job submission failed because the connection to the server failed (check host and port) (error code 12)
-bash-3.2$</pre></div><div class='update_description'><i onclick="document.location='13516#1371577251'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-18T17:40:51+00:00">Jun 18, 2013 05:40 PM UTC</time><a class="anchor" name="1371577251">&nbsp;</a></div><pre>I think it dimly means there there is not fermilab user on our system

It all works for me&#58;

[maksiks@t2bat0210 ~]$ voms-proxy-init -voms cmsEnter GRID pass phrase&#58;
Your identity&#58; /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643
Creating temporary proxy .............................................................. Done
Contacting  lcg-voms.cern.ch&#58;15002 [/DC=ch/DC=cern/OU=computers/CN=lcg-voms.cern.ch] &#34;cms&#34; Done
Creating proxy ....................................... Done

Your proxy is valid until Wed Jun 19 01&#58;33&#58;35 2013
[maksiks@t2bat0210 ~]$ globus-job-run t2bat0210.cmsaf.mit.edu&#58;2119/jobmanager-fork /usr/bin/id
uid=12047(cmsu1043) gid=12047(cmsu1043) groups=10040(cmswrite),12047(cmsu1043)
[maksiks@t2bat0210 ~]$ globus-job-run t2bat0210.cmsaf.mit.edu&#58;2119/jobmanager-condor -x &#39;(minMemory=2400)&#39;  /bin/sh -c &#34;hostname&#34;
hibat0089.cmsaf.mit.edu

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1371573568'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-18T16:39:28+00:00">Jun 18, 2013 04:39 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1371573568">&nbsp;</a></div><pre>Going against the test CE, I still cannot submit any job successfully

-bash-3.2$ voms-proxy-init -voms fermilab&#58;/fermilab
Enter GRID pass phrase&#58;
Your identity&#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/CN=UID&#58;neha
Creating temporary proxy ...................................................................... Done
Contacting  voms.fnal.gov&#58;15001 [/DC=org/DC=doegrids/OU=Services/CN=http/voms.fnal.gov] &#34;fermilab&#34; Done
Creating proxy ................................................................................ Done

Your proxy is valid until Tue Jun 18 23&#58;36&#58;25 2013
-bash-3.2$ globus-job-run t2bat0210.cmsaf.mit.edu&#58;2119/jobmanager-fork /usr/bin/id

This simply hangs..

The gatekeeper log has not been touched since Jun 13

[maksiks@t2bat0210 ~]$ ls -hlt /var/log/globus-gatekeeper.log*
-rw-r--r-- 1 root root    0 Jun 13 04&#58;02 /var/log/globus-gatekeeper.log
-rw-r--r-- 1 root root  962 Jun 13 04&#58;02 /var/log/globus-gatekeeper.log.1.gz
-rw-r--r-- 1 root root 1.5K May 23 04&#58;02 /var/log/globus-gatekeeper.log.2.gz
-rw-r--r-- 1 root root 1.4K May 22 04&#58;02 /var/log/globus-gatekeeper.log.3.gz
-rw-r--r-- 1 root root  219 Nov 27  2012 /var/log/globus-gatekeeper.log.4.gz
[maksiks@t2bat0210 ~]$

Same when I submit job to condor job manager
-Neha</pre></div><div class='update_description'><i onclick="document.location='13516#1371566747'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-18T14:45:47+00:00">Jun 18, 2013 02:45 PM UTC</time><a class="anchor" name="1371566747">&nbsp;</a></div><pre>Hi Neha, I turned on test CE on t2bat0210 and tested that I can submit from there. Would you try now?

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1371136970'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-13T15:22:50+00:00">Jun 13, 2013 03:22 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1371136970">&nbsp;</a></div><pre>Hi Maxim
Since we cannot/should not upgrade things on production CE without testing them first on test CE, it is important we get it to work on test CE.
I am hoping you can get back to me on this today.

Thanks
-Neha</pre></div><div class='update_description'><i onclick="document.location='13516#1371054220'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-12T16:23:40+00:00">Jun 12, 2013 04:23 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1371054220">&nbsp;</a></div><pre>Hi Maxim
On your test CE, I upgraded various lcmaps rpms so they changed from

[maksiks@t2bat0210 ~]$ rpm -qa | grep lcmaps
lcmaps-plugins-saz-client-0.3.4-1.1.osg.el5
lcmaps-plugins-basic-1.5.0-3.2.osg.el5
lcmaps-plugins-gums-client-0.0.2-3.osg
lcmaps-plugins-glexec-tracking-0.1.4-1.2.osg.el5
lcmaps-1.5.7-1.4.osg.el5
lcmaps-plugins-verify-proxy-1.5.2-1.2.osg.el5
lcas-lcmaps-gt4-interface-0.2.4-1.3.osg.el5
lcmaps-plugins-scas-client-0.3.4-1.1.osg.el5
[maksiks@t2bat0210 ~]$

to
[maksiks@t2bat0210 ~]$ rpm -qa | grep lcmaps
lcas-lcmaps-gt4-interface-0.2.6-1.1.osg.el5
lcmaps-plugins-verify-proxy-1.5.4-1.1.osg.el5
lcmaps-plugins-glexec-tracking-0.1.4-1.2.osg.el5
lcmaps-1.5.7-1.4.osg.el5
lcmaps-plugins-basic-1.5.1-2.1.osg.el5
lcmaps-plugins-scas-client-0.3.4-1.2.osg.el5
lcmaps-plugins-saz-client-0.3.4-1.2.osg.el5
lcmaps-plugins-gums-client-0.0.2-4.osg.el5
[maksiks@t2bat0210 ~]$

I then made /etc/lcmaps.db look like what I have on a local CE install. Set LCMAPS_DEBUG_LEVEL=5 in /etc/sysconfig/globus-gatekeeper file, restarted the gatekeeper

However, looks like something is going on on this node. The gatekeeper process comes up but for a globus-job-run attempt (with either &#39;fermilab&#39; or GLOW proxy) I do not see anything in the logs at all. Could you check for me if any firewalls have been set up or anything else that would prevent gatekeeper from working on this node.

Thanks</pre></div><div class='update_description'><i onclick="document.location='13516#1370273469'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-03T15:31:09+00:00">Jun 3, 2013 03:31 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1370273469">&nbsp;</a></div><pre>Hi
When we configure a test CE at fermi to use MIT&#39;s GUMS server, everything works
So, we believe the problem is with the CE node itself. Max setup another test CE and we could reproduce  the problem.
This test CE install at MIT is unfortunately not a production release from scratch (as we found older lcmaps was installed) so I need to login there and figure out what could be wrong.

I am in class tue/wed/thu this week so friday is the latest I can work on this.

-Neha</pre></div><div class='update_description'><i onclick="document.location='13516#1368740671'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-16T21:44:31+00:00">May 16, 2013 09:44 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1368740671">&nbsp;</a></div><pre>I worked on this with Max yesterday. Tried changing the VO mapping rule and name of the voSubGroup to match with what I have on a local production node (where GLOW mappings work finr) but that did not fix the problem. I plan to troubleshoot this later evening today.

-Neha</pre></div><div class='update_description'><i onclick="document.location='13516#1368541613'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-14T14:26:53+00:00">May 14, 2013 02:26 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1368541613">&nbsp;</a></div><pre>MIT_CMS has a planned downtime for today, hence Maxim and I have decided to work on this first thing tomorrow.

-Neha</pre></div><div class='update_description'><i onclick="document.location='13516#1368478743'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-13T20:59:03+00:00">May 13, 2013 08:59 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1368478743">&nbsp;</a></div><pre>Hi
I am so sorry to have dropped the ball on this one. I have contacted Maxim, expect an update from me on this tomorrow
-Neha</pre></div><div class='update_description'><i onclick="document.location='13516#1368477960'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-13T20:46:00+00:00">May 13, 2013 08:46 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1368477960">&nbsp;</a></div><pre>Hello,

Does anyone have any new information on this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='13516#1367529446'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-02T21:17:26+00:00">May 2, 2013 09:17 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1367529446">&nbsp;</a></div><pre>Thanks Dan and Max.
Max can you please also provide me login to your GUMS server node? I already sent you my public key.

-Neha</pre></div><div class='update_description'><i onclick="document.location='13516#1367519809'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-02T18:36:49+00:00">May 2, 2013 06:36 PM UTC</time><a class="anchor" name="1367519809">&nbsp;</a></div><pre>Neha, I added you

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1367519544'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-02T18:32:24+00:00">May 2, 2013 06:32 PM UTC</time><a class="anchor" name="1367519544">&nbsp;</a></div><pre>Neha,

In case it helps, I also added you to the GLOW VO.

<a href='https&#58;//glow-voms.cs.wisc.edu&#58;8443/voms/GLOW/' target='_blank' rel='nofollow'>https&#58;//glow-voms.cs.wisc.edu&#58;8443/voms/GLOW/</a>

--Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley</pre></div><div class='update_description'><i onclick="document.location='13516#1367512821'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-02T16:40:21+00:00">May 2, 2013 04:40 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1367512821">&nbsp;</a></div><pre>Max
Can you give my DN (temporarily) the GUMS admin access rights?
&#34;/DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/CN=UID&#58;neha&#34;

Also, can I have a login on your gums node. I will send you my public key in email

Thanks</pre></div><div class='update_description'><i onclick="document.location='13516#1367509484'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-02T15:44:44+00:00">May 2, 2013 03:44 PM UTC</time><a class="anchor" name="1367509484">&nbsp;</a></div><pre>After I clicked on &#39;Map User&#39; it returned me&#58;
Error mapping grid identity&#58; null

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1367507574'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-02T15:12:54+00:00">May 2, 2013 03:12 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1367507574">&nbsp;</a></div><pre>As far as GUMS configuration is concerned, it looks ok to me.

Max, you can double check by going to your web interface <a href='https&#58;//t2srv0006.cmsaf.mit.edu&#58;8443/gums' target='_blank' rel='nofollow'>https&#58;//t2srv0006.cmsaf.mit.edu&#58;8443/gums</a>, clicking on View Mappings/Map Grid Identity to Account and entering following in the 3 text fields in the form that comes up

/DC=org/DC=doegrids/OU=Services/CN=ce01.cmsaf.mit.edu
/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley
/GLOW/Role=NULL

Then click on &#39;Map User&#39;. It should return &#39;glow&#39; as the user to which Dan is mapped to.

This would confirm if the request were to reach GUMS, it would be handled correctly and thus rules out that as the culprit here. Moreover, the users are getting pulled in to the GUMS database just fine, so we are good there.

Now, we need to figure out what happens between when job is submitted to the gatekeeper and gatekeeper makes a callout to GUMS server. For that, as Dan asked, it would help to know what (if anything) is logged in /var/log/tomcat5/catalina.out, /var/log/tomcat5/gums-service-admin.log, /var/log/tomcat5/trustmanager.log on the GUMS side and globus-gatekeeper.log on the gatekeeper node for this one request that Dan sent in this morning.

-Neha</pre></div><div class='update_description'><i onclick="document.location='13516#1367506219'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-02T14:50:19+00:00">May 2, 2013 02:50 PM UTC</time><a class="anchor" name="1367506219">&nbsp;</a></div><pre>Max,

Are the exceptions in catalina.out still happening?

The problem is not specific to my certificate.  Here is an example using the GLOW glidein certificate&#58;

[dan@login01&#58;~]$ export X509_USER_PROXY=/tmp/pilot.proxy
[dan@login01&#58;~]$ globus-job-run ce01.cmsaf.mit.edu /usr/bin/whoami
GRAM Job submission failed because authentication with the remote server failed (error code 7)
[dan@login01&#58;~]$ voms-proxy-info -all
subject   &#58; /DC=org/DC=doegrids/OU=Services/CN=pilot/glidein.chtc.wisc.edu/CN=proxy
issuer    &#58; /DC=org/DC=doegrids/OU=Services/CN=pilot/glidein.chtc.wisc.edu
identity  &#58; /DC=org/DC=doegrids/OU=Services/CN=pilot/glidein.chtc.wisc.edu
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /tmp/pilot.proxy
timeleft  &#58; 71&#58;18&#58;42
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO GLOW extension information ===
VO        &#58; GLOW
subject   &#58; /DC=org/DC=doegrids/OU=Services/CN=pilot/glidein.chtc.wisc.edu
issuer    &#58; /DC=org/DC=doegrids/OU=Services/CN=glow-voms.cs.wisc.edu
attribute &#58; /GLOW/Role=NULL/Capability=NULL
timeleft  &#58; 23&#58;18&#58;42
uri       &#58; glow-voms.cs.wisc.edu&#58;15001

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley</pre></div><div class='update_description'><i onclick="document.location='13516#1367505742'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-02T14:42:22+00:00">May 2, 2013 02:42 PM UTC</time><a class="anchor" name="1367505742">&nbsp;</a></div><pre>I would add that now e-mails would be sent, I enabled this ability for the whole cluster.

Dan, out of curiosity, what would happen if, for example, Ajit sends the job for glow?

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1367505525'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-02T14:38:45+00:00">May 2, 2013 02:38 PM UTC</time><a class="anchor" name="1367505525">&nbsp;</a></div><pre>A couple months ago when Max and I looked at this together, we observed the following&#58; when I try to authenticate to MIT using a GLOW proxy, nothing at all is logged in gums-service-admin.log, but an exception is logged in catalina.out every time I make an attempt.  The exception refers to a problem sending email.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley</pre></div><div class='update_description'><i onclick="document.location='13516#1367503668'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-02T14:07:48+00:00">May 2, 2013 02:07 PM UTC</time><a class="anchor" name="1367503668">&nbsp;</a></div><pre>Hi,

below is the sql command. Also attaching updated gums.config file

select * from USERS where FQAN like &#39;%glow%&#39;;
+-------+------------+------------------------------------------------------------------------------------------+-------+------------------------------+
| ID    | GROUP_NAME | DN                                                                                       | FQAN  | EMAIL                        |
+-------+------------+------------------------------------------------------------------------------------------+-------+------------------------------+
|  6488 | glow       | /DC=org/DC=doegrids/OU=People/CN=Dan Bradley 268953                                      | /GLOW | NULL                         |
| 13041 | glow       | /DC=org/DC=doegrids/OU=People/CN=William B Quayle 38994                                  | /GLOW | NULL                         |
| 13102 | glow       | /DC=org/DC=doegrids/OU=People/CN=Kenneth Hahn 347614                                     | /GLOW | NULL                         |
| 45077 | glow       | /DC=org/DC=doegrids/OU=People/CN=James Frey 259919                                       | /GLOW | NULL                         |
| 49963 | glow       | /DC=org/DC=doegrids/OU=People/CN=Julio Cesar Goez-Gutierrez 33734                        | /GLOW | NULL                         |
| 53166 | glow       | /DC=org/DC=doegrids/OU=People/CN=jagannath Mondal 552391                                 | /GLOW | NULL                         |
| 54223 | glow       | /DC=org/DC=doegrids/OU=People/CN=Michael P McGovern 113725                               | /GLOW |                              |
| 54224 | glow       | /DC=org/DC=doegrids/OU=People/CN=Gregory Toepperwein 139086                              | /GLOW |                              |
| 54225 | glow       | /DC=org/DC=doegrids/OU=People/CN=Sadanand Singh 965820                                   | /GLOW |                              |
| 54674 | glow       | /DC=org/DC=doegrids/OU=People/CN=Daniel Hinckley 835574                                  | /GLOW | dhinckley@....           |
| 55261 | glow       | /DC=org/DC=doegrids/OU=People/CN=Jose A Moreno-Razo 216703                               | /GLOW | morenorazo@....          |
| 56843 | glow       | /DC=org/DC=doegrids/OU=People/CN=Shuo Yang 883207                                        | /GLOW |                              |
| 56965 | glow       | /DC=org/DC=doegrids/OU=People/CN=Yang Yang 270312                                        | /GLOW |                              |
| 56981 | glow       | /DC=org/DC=doegrids/OU=People/CN=Zhe Wu 226783                                           | /GLOW |                              |
| 57003 | glow       | /DC=org/DC=doegrids/OU=People/CN=Puja Goyal 622141                                       | /GLOW |                              |
| 57528 | glow       | /DC=org/DC=doegrids/OU=People/CN=Michael Douglas Daily 324214                            | /GLOW |                              |
| 57529 | glow       | /DC=org/DC=doegrids/OU=People/CN=Gordon Samuel Freeman 636383                            | /GLOW |                              |
| 57559 | glow       | /DC=org/DC=doegrids/OU=People/CN=Umang Nagpal 539520                                     | /GLOW |                              |
| 58324 | glow       | /DC=org/DC=doegrids/OU=People/CN=William M Taylor 842177                                 | /GLOW |                              |
| 58487 | glow       | /DC=org/DC=doegrids/OU=Services/CN=pilot/glidein.chtc.wisc.edu                           | /GLOW |                              |
| 59052 | glow       | /DC=org/DC=doegrids/OU=People/CN=Todd L Miller 511107                                    | /GLOW |                              |
| 59066 | glow       | /DC=org/DC=doegrids/OU=People/CN=Mark Silberstein 550942                                 | /GLOW |                              |
| 61539 | glow       | /C=UK/O=eScience/OU=Durham/L=eScience/CN=daniel maitre                                   | /GLOW |                              |
| 61999 | glow       | /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dmaitre/CN=698662/CN=Daniel Maitre           | /GLOW | daniel.maitre@....        |
| 62175 | glow       | /DC=org/DC=doegrids/OU=People/CN=Timothy A. Cartwright 949973                            | /GLOW | cat@....              |
| 64139 | glow       | /DC=org/DC=doegrids/OU=People/CN=Zach Miller 84007                                       | /GLOW | zmiller@....          |
| 64254 | glow       | /DC=org/DC=doegrids/OU=People/CN=Wen Guan 882186                                         | /GLOW | wguan.icedew@....       |
<div id='show_1414796302' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1414796302'>| 64312 | glow       | /DC=org/DC=doegrids/OU=People/CN=Jonathan Wedell 220633                                  | /GLOW | condor@....         |
| 65300 | glow       | /DC=org/DC=doegrids/OU=People/CN=Brooklin Gore 514601                                    | /GLOW | BGore@.... |
| 66447 | glow       | /DC=org/DC=doegrids/OU=People/CN=Matyas Selmeci 564109                                   | /GLOW | matyas@....           |
| 67154 | glow       | /DC=org/DC=doegrids/OU=People/CN=Erik Sipsma 389429                                      | /GLOW | sipsma@....          |
| 67428 | glow       | /DC=org/DC=doegrids/OU=People/CN=Greg Thain 407183                                       | /GLOW | gthain@....           |
| 67604 | glow       | /DC=org/DC=doegrids/OU=People/CN=Aaron Moate 717557                                      | /GLOW | moate@....            |
| 67680 | glow       | /DC=org/DC=doegrids/OU=People/CN=Nathan Yehle 893906                                     | /GLOW | nyehle@....           |
| 67789 | glow       | /DC=org/DC=doegrids/OU=People/CN=Ajit Kumar Mohapatra 867118                             | /GLOW | ajit@....            |
| 69622 | glow       | /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Aaron Moate 894                | /GLOW | NULL                         |
| 70125 | glow       | /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Jaime Frey 1100                | /GLOW | NULL                         |
| 70126 | glow       | /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley | /GLOW | NULL                         |
| 70487 | glow       | /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Gonzalo Merino 1270            | /GLOW | NULL                         |
+-------+------------+------------------------------------------------------------------------------------------+-------+------------------------------+
39 rows in set (0.02 sec)

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643
</div><script type='text/javascript'>
        $('#show_1414796302').click(function() {
            $('#detail_1414796302').slideDown("normal");
            $('#show_1414796302').hide();
            $('#hide_1414796302').show();
        });
        $('#hide_1414796302').click(function() {
            $('#detail_1414796302').slideUp();
            $('#hide_1414796302').hide();
            $('#show_1414796302').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='13516#1367460495'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-02T02:08:15+00:00">May 2, 2013 02:08 AM UTC</time><a class="anchor" name="1367460495">&nbsp;</a></div><pre>The reason you see log entries mapping me to CMS is that I tested with a CMS proxy as well as a GLOW proxy.

Here are the commands and output I got when I did a fresh test just now, first with a GLOW proxy and then with a CMS proxy&#58;

[dan@login01&#58;~]$ voms-proxy-init --voms=GLOW
Enter GRID pass phrase&#58;
Your identity&#58; /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley
Creating temporary proxy ................................ Done
Contacting  glow-voms.cs.wisc.edu&#58;15001 [/DC=org/DC=doegrids/OU=Services/CN=glow-voms.cs.wisc.edu] &#34;GLOW&#34; Done
Creating proxy .................................................. Done

Your proxy is valid until Thu May  2 09&#58;05&#58;45 2013
[dan@login01&#58;~]$ date
Wed May  1 21&#58;05&#58;52 CDT 2013
[dan@login01&#58;~]$ globus-job-run ce01.cmsaf.mit.edu /usr/bin/whoamiGRAM Job submission failed because authentication with the remote server failed (error code 7)
[dan@login01&#58;~]$ voms-proxy-info -all
subject   &#58; /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley/CN=proxy
issuer    &#58; /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley
identity  &#58; /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /tmp/x509up_u275
timeleft  &#58; 11&#58;59&#58;35
key usage &#58; Digital Signature, Key Encipherment
=== VO GLOW extension information ===
VO        &#58; GLOW
subject   &#58; /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley
issuer    &#58; /DC=org/DC=doegrids/OU=Services/CN=glow-voms.cs.wisc.edu
attribute &#58; /GLOW/Role=NULL/Capability=NULL
timeleft  &#58; 11&#58;59&#58;35
uri       &#58; glow-voms.cs.wisc.edu&#58;15001
[dan@login01&#58;~]$
[dan@login01&#58;~]$
[dan@login01&#58;~]$ voms-proxy-init --voms=cms
Enter GRID pass phrase&#58;
<div id='show_1357275976' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1357275976'>Your identity&#58; /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley
Creating temporary proxy ............................................. Done
Contacting  lcg-voms.cern.ch&#58;15002 [/DC=ch/DC=cern/OU=computers/CN=lcg-voms.cern.ch] &#34;cms&#34; Done
Creating proxy ....................... Done

Your proxy is valid until Thu May  2 09&#58;06&#58;23 2013
[dan@login01&#58;~]$ globus-job-run ce01.cmsaf.mit.edu /usr/bin/whoami
cmsuxxxx

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley
</div><script type='text/javascript'>
        $('#show_1357275976').click(function() {
            $('#detail_1357275976').slideDown("normal");
            $('#show_1357275976').hide();
            $('#hide_1357275976').show();
        });
        $('#hide_1357275976').click(function() {
            $('#detail_1357275976').slideUp();
            $('#hide_1357275976').hide();
            $('#show_1357275976').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='13516#1367445613'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-01T22:00:13+00:00">May 1, 2013 10:00 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1367445613">&nbsp;</a></div><pre>Dan
Could you send me the &#39;voms-proxy-init&#39; command that you ran and also the output of &#39;voms-proxy-info -all&#39; command that you are using to generate proxy under glow VO?

Max
Going through the gums.config file and looking at the gums logs that Max posted&#58;
- it seems to me that the proxy (corresponding to logs below) has been generated using the &#39;cms&#39; VO and not the glow VO. Mapping in this case is happening just as configured.
- can you send me the output of following command when run against your GUMS database.
select * from USERS where FQAN like &#39;%glow%&#39;;

- also please upload your latest gums.config. I would like to look at it

Thanks
-Neha

Thanks
-Neha</pre></div><div class='update_description'><i onclick="document.location='13516#1367440701'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-01T20:38:21+00:00">May 1, 2013 08:38 PM UTC</time><a class="anchor" name="1367440701">&nbsp;</a></div><pre>Hi Neha,

here is what I can find in the log related to Dan (when I grep on Bradley)

01 May 2013 00&#58;00&#58;10,359 [WARN ]&#58; Could not assign user &#39;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley&#39; to account within pool account mapper &#39;cmsuPool&#39;.
01 May 2013 06&#58;00&#58;10,740 [WARN ]&#58; Could not assign user &#39;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley&#39; to account within pool account mapper &#39;cmsuPool&#39;.
01 May 2013 11&#58;38&#58;51,661 [WARN ]&#58; Could not assign user &#39;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley&#39; to account within pool account mapper &#39;cmsuPool&#39;.
01 May 2013 11&#58;38&#58;51,661 [INFO ]&#58; GridID[/DC=org/DC=doegrids/OU=Services/CN=ce01.cmsaf.mit.edu] - Mapped on host &#39;/DC=org/DC=doegrids/OU=Services/CN=ce01.cmsaf.mit.edu&#39; the user &#39;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley&#39; / &#39;/cms/Role=NULL/Capability=NULL&#39; to &#39;cmsuxxxx&#39;
01 May 2013 12&#58;00&#58;10,396 [WARN ]&#58; Could not assign user &#39;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley&#39; to account within pool account mapper &#39;cmsuPool&#39;.

... and here is what I get when I grep -i on glow&#58;
01 May 2013 10&#58;24&#58;13,379 [INFO ]&#58; User group update for glow (38 users).

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1367427085'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-01T16:51:25+00:00">May 1, 2013 04:51 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1367427085">&nbsp;</a></div><pre>Max,

Did you update the VO members after making changes to your gums.config (<a href='https&#58;//twiki.grid.iu.edu/bin/view/Integration/GUMSTroubleshootingGuide#gums_config' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Integration/GUMSTroubleshootingGuide#gums_config</a>)?

- Brian</pre></div><div class='update_description'><i onclick="document.location='13516#1367426689'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-01T16:44:49+00:00">May 1, 2013 04:44 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1367426689">&nbsp;</a></div><pre>Max
What did you see in your GUMS server log (/var/log/tomcat5/gums-service-admin.log) for this recent attempt by Dan?
Did you see any logs that mentioned an update of members from this VO?
Do you see entries for GLOW VO users in GUMS mysql database?

-Neha</pre></div><div class='update_description'><i onclick="document.location='13516#1367422829'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-01T15:40:29+00:00">May 1, 2013 03:40 PM UTC</time><a class="anchor" name="1367422829">&nbsp;</a></div><pre>Unfortunately, GLOW still gets &#34;authentication with the remote server&#34; from ce01.cmsaf.mit.edu.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley</pre></div><div class='update_description'><i onclick="document.location='13516#1367418917'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-01T14:35:17+00:00">May 1, 2013 02:35 PM UTC</time><a class="anchor" name="1367418917">&nbsp;</a></div><pre>Done

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1367417575'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-01T14:12:55+00:00">May 1, 2013 02:12 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1367417575">&nbsp;</a></div><pre>Max,

I noticed that you&#39;re using the old GLOW URL, try this one <a href='https&#58;//glow-voms.cs.wisc.edu&#58;8443/voms/GLOW/.' target='_blank' rel='nofollow'>https&#58;//glow-voms.cs.wisc.edu&#58;8443/voms/GLOW/.</a>

(Relevant GOC ticket&#58; <a href='http&#58;//ticket.grid.iu.edu/goc/11072' target='_blank' rel='nofollow'>http&#58;//ticket.grid.iu.edu/goc/11072</a>)

- Brian</pre></div><div class='update_description'><i onclick="document.location='13516#1367335767'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-30T15:29:27+00:00">Apr 30, 2013 03:29 PM UTC</time><a class="anchor" name="1367335767">&nbsp;</a></div><pre>We just updated GUMs to the latest and greatest version gums-1.3.18.009-15.2.osg.el5.

Attaching gums.conf file.

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1366733625'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-23T16:13:45+00:00">Apr 23, 2013 04:13 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1366733625">&nbsp;</a></div><pre>Max,

By config I meant your /etc/gums/gums.conf, you can either detach it or check that the GLOW configuration in that file is correct, especially for&#58;

vomsServer, vomsUserGroup, groupAccountMapper, groupToAccountMapping

If those are correct, there should be something in the GUM logs saying that it was able to retrieve members of the VO&#58;

19 Apr 2013 13&#58;18&#58;44,105 [INFO ]&#58; User group update for GLOW (38 users).

- Brian</pre></div><div class='update_description'><i onclick="document.location='13516#1366383924'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-19T15:05:24+00:00">Apr 19, 2013 03:05 PM UTC</time><a class="anchor" name="1366383924">&nbsp;</a></div><pre>Hi Brian, I would happy to, but how do you want me to do that? Is there an sql command I could run that will give you a snapshot of what we have for glow?

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1366383303'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-19T14:55:03+00:00">Apr 19, 2013 02:55 PM UTC</time><a class="anchor" name="1366383303">&nbsp;</a></div><pre>Hi Brian,

The email exceptions that were logged in the MIT GUMS catalina.out are not generated by the job.  They are generated by the MIT GUMS server whenever GLOW attempts to submit a job to MIT.

Yes, jobs submitted to MIT with a GLOW VO proxy fail whereas jobs submitted with a CMS VO proxy succeed.  Everything is the same except the VOMS attributes in the proxy.

--Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley</pre></div><div class='update_description'><i onclick="document.location='13516#1366382437'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-19T14:40:37+00:00">Apr 19, 2013 02:40 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1366382437">&nbsp;</a></div><pre>Dan&#58;
About the e-mail exceptions you saw in catalina out, are the notification e-mails part of the job itself?
Just to verify, jobs submitted to MIT with a GLOW VO proxy fail whereas jobs submitted with a CMS VO proxy succeed?

Max&#58;
Could you attach your server-side, GLOW-specific GUMS configuration?
Just to verify, does GUMS log anything during these failed job submissions?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='13516#1366140710'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-16T19:31:50+00:00">Apr 16, 2013 07:31 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1366140710">&nbsp;</a></div><pre>Software Team,

Have you had time to review this ticket?

Thanks,

Chris</pre></div><div class='update_description'><i onclick="document.location='13516#1365532696'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-09T18:38:16+00:00">Apr 9, 2013 06:38 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1365532696">&nbsp;</a></div><pre>Software Team,

Have you had time to review this ticket?

Thanks,

Chris</pre></div><div class='update_description'><i onclick="document.location='13516#1365100672'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-04T18:37:52+00:00">Apr 4, 2013 06:37 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1365100672">&nbsp;</a></div><pre>I have assigned the software team to review this. Sorry for the late reply..

Thanks,

Chris</pre></div><div class='update_description'><i onclick="document.location='13516#1364303973'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-26T13:19:33+00:00">Mar 26, 2013 01:19 PM UTC</time><a class="anchor" name="1364303973">&nbsp;</a></div><pre>Not since the last update. I am afraid we would need help from a GUMs expert.

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1363911996'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-22T00:26:36+00:00">Mar 22, 2013 12:26 AM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1363911996">&nbsp;</a></div><pre>Hello,

Are there any new updates on this issue ?

Thanks,

Chris</pre></div><div class='update_description'><i onclick="document.location='13516#1363117462'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-12T19:44:22+00:00">Mar 12, 2013 07:44 PM UTC</time><a class="anchor" name="1363117462">&nbsp;</a></div><pre>In the GUMS logs at MIT, we observed a java exception in catalina.out whenever a GLOW job was submitted to MIT.  The exception was reporting a failure when trying to send email.  There is no indication to whom it is trying to send email or what message it is trying to send, but the message, whatever it is, may shed some light on the mapping failure.  Perhaps the GUMS configuration could be changed to make this message visible.

As requested by Max, I have just now submitted some Condor-G jobs using a GLOW proxy to ce01.cmsaf.mit.edu.  These are failing in the same way as previous tests with globus-job-run.

--Dan

by /DC=org/DC=doegrids/OU=People/CN=Dan Bradley 268953</pre></div><div class='update_description'><i onclick="document.location='13516#1363093303'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-12T13:01:43+00:00">Mar 12, 2013 01:01 PM UTC</time><a class="anchor" name="1363093303">&nbsp;</a></div><pre>We sat down with Dan and here is what we found in /var/log/messages on the gatekeeper (CE01)

Mar 12 08&#58;39&#58;09 t2srv0007 GRAM-gatekeeper[31589]&#58; Authenticated globus user&#58; /DC=org/DC=doegrids/OU=
People/CN=Dan Bradley 268953
Mar 12 08&#58;39&#58;09 t2srv0007 GRAM-gatekeeper-llgt[31589]&#58; lcmaps&#58; /etc/lcmaps.db&#58;183&#58; [warning] expecti
ng rule definitions.
Mar 12 08&#58;39&#58;09 t2srv0007 GRAM-gatekeeper-llgt[31589]&#58; lcmaps&#58; /etc/lcmaps.db&#58;183&#58; [warning] no rule
s specified for policy&#58; &#39;glexec&#39; at line 166.
Mar 12 08&#58;39&#58;19 t2srv0007 GRAM-gatekeeper-llgt[31589]&#58; lcmaps&#58; xacmlqueryscas()&#58; XACML&#58; Interaction
failed&#58; TCP/IP, SSL or SOAP Error with endpoint&#58; &#34;<a href='https&#58;//t2srv0006.cmsaf.mit.edu&#58;8443/gums/services' target='_blank' rel='nofollow'>https&#58;//t2srv0006.cmsaf.mit.edu&#58;8443/gums/services</a>
/GUMSXACMLAuthorizationServicePort&#34;
Mar 12 08&#58;39&#58;26 t2srv0007 xinetd[7032]&#58; START&#58; nrpe pid=31590 from=18.12.1.1
Mar 12 08&#58;39&#58;27 t2srv0007 nrpe[31590]&#58; INFO&#58; SSL/TLS initialized. All network traffic will be encryp
ted.
Mar 12 08&#58;39&#58;27 t2srv0007 xinetd[7032]&#58; EXIT&#58; nrpe status=0 pid=31590 duration=1(sec)
Mar 12 08&#58;39&#58;30 t2srv0007 GRAM-gatekeeper-llgt[31589]&#58; lcmaps&#58; xacmlqueryscas()&#58; XACML&#58; Interaction
failed&#58; TCP/IP, SSL or SOAP Error with endpoint&#58; &#34;<a href='https&#58;//t2srv0006.cmsaf.mit.edu&#58;8443/gums/services' target='_blank' rel='nofollow'>https&#58;//t2srv0006.cmsaf.mit.edu&#58;8443/gums/services</a>
/GUMSXACMLAuthorizationServicePort&#34;
Mar 12 08&#58;39&#58;30 t2srv0007 GRAM-gatekeeper-llgt[31589]&#58; Warning&#58; failed mapping. LCMAPS returned&#58; 1
Mar 12 08&#58;39&#58;30 t2srv0007 GRAM-gatekeeper-llgt[31589]&#58; Execution of LCMAPS failed.
Mar 12 08&#58;39&#58;30 t2srv0007 GRAM-gatekeeper-llgt[31589]&#58; globus_gss_assist_gridmap() failed authorizat
ion. globus_gss_assist&#58; Error invoking callout globus_callout_module&#58; The callout returned an error
an unknown error occurred

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1362428635'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-04T20:23:55+00:00">Mar 4, 2013 08:23 PM UTC</time><a class="anchor" name="1362428635">&nbsp;</a></div><pre>I submitted test jobs to MIT with a GLOW VO proxy.  They fail to be authenticated.  Example&#58;

$ globus-job-run ce01.cmsaf.mit.edu /usr/bin/whoami
GRAM Job submission failed because authentication with the remote server failed (error code 7)

The same operation succeeds if I use a CMS VO proxy.  Max was not able to find any record of the failed attempt in the CE or GUMS logs.  We haven&#39;t been able to explain why that would be.

--Dan

by /DC=org/DC=doegrids/OU=People/CN=Dan Bradley 268953</pre></div><div class='update_description'><i onclick="document.location='13516#1362425401'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-04T19:30:01+00:00">Mar 4, 2013 07:30 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1362425401">&nbsp;</a></div><pre>Hi Daniel,

Were you able to submit a set of jobs?

Regards,
Chris</pre></div><div class='update_description'><i onclick="document.location='13516#1362014481'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-28T01:21:21+00:00">Feb 28, 2013 01:21 AM UTC</time><a class="anchor" name="1362014481">&nbsp;</a></div><pre>Could you please submit a set of jobs to us?

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1360868167'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-14T18:56:07+00:00">Feb 14, 2013 06:56 PM UTC</time><a class="anchor" name="1360868167">&nbsp;</a></div><pre>Sorry, I ran into problem with new GUMs, need help from an expert, so I will try to get it done after other more urgent items are dealt with.

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1360866921'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-14T18:35:21+00:00">Feb 14, 2013 06:35 PM UTC</time> by <b>echism</b><a class="anchor" name="1360866921">&nbsp;</a></div><pre>changing nai/nad</pre></div><div class='update_description'><i onclick="document.location='13516#1360375954'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-09T02:12:34+00:00">Feb 9, 2013 02:12 AM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1360375954">&nbsp;</a></div><pre>Hi Max,

Do you have an update on this request? Please let us know.

Thanks,

Chris</pre></div><div class='update_description'><i onclick="document.location='13516#1359577784'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-01-30T20:29:44+00:00">Jan 30, 2013 08:29 PM UTC</time><a class="anchor" name="1359577784">&nbsp;</a></div><pre>Hi Dan,
Your request is in our to-do list, might take a couple of days to make it happen.

--Max

by /DC=org/DC=doegrids/OU=People/CN=Max Goncharov 504643</pre></div><div class='update_description'><i onclick="document.location='13516#1359499990'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-01-29T22:53:10+00:00">Jan 29, 2013 10:53 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1359499990">&nbsp;</a></div><pre>MIT_CMS does not currently authenticate the GLOW VO.  The GLOW VO supports a diverse mixture of scientists at the University of Wisconsin.  If GLOW could be allowed to run opportunistically at MIT, that would be greatly appreciated.

The OSG GUMS template contains the needed information for accessing the GLOW VOMS.  If there is any other information that we can provide, please don&#39;t hesitate to ask.

Thanks,
Dan Bradley

by /DC=org/DC=doegrids/OU=People/CN=Dan Bradley 268953</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F13516">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="/images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 13516});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
