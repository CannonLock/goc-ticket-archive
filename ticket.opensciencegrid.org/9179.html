<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[9179] OSG Purdue-Steele Gratia Reporting Issue</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=9179" method="post">
<div class="page-header">
    <h3><span class="muted">9179</span> / OSG Purdue-Steele Gratia Reporting Issue</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">OSG GOC</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Check for a reply</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-09-14</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/9179", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='9179#1284034144'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-09T12:09:04+00:00">Sep 9, 2010 12:09 PM UTC</time><a class="anchor" name="1284034144">&nbsp;</a></div><pre>Verified this morning that Purdue-Steele is all caught up.
This ticket can be closed.

John Weigand</pre></div><div class='update_description'><i onclick="document.location='9179#1283962269'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-08T16:11:09+00:00">Sep 8, 2010 04:11 PM UTC</time> by <b>Preston Smith</b><a class="anchor" name="1283962269">&nbsp;</a></div><pre>Ok, I think we got it figured out - changes that came with our PBS
upgrade required a path change in gratia.

On Wed, Sep 8, 2010 at 11&#58;17 AM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9179#1283959027'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-08T15:17:07+00:00">Sep 8, 2010 03:17 PM UTC</time> by <b>Preston Smith</b><a class="anchor" name="1283959027">&nbsp;</a></div><pre>you may just not have seen any successful usage uploads..
We fixed an issue yesterday with PBS/globus interaction that started
at last week&#39;s maintenance that prevented PBS jobs from exiting
correctly.

We are still investigating, though.

On Wed, Sep 8, 2010 at 11&#58;08 AM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9179#1283958487'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-08T15:08:07+00:00">Sep 8, 2010 03:08 PM UTC</time><a class="anchor" name="1283958487">&nbsp;</a></div><pre>Purdue folks,

Should we be adding gratia operations on this one or are you still investigating?
This is just Purdue-Steele with the problem.  Purdue-RCAC is current in its reporting.

John Weigand</pre></div><div class='update_description'><i onclick="document.location='9179#1283876114'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-07T16:15:14+00:00">Sep 7, 2010 04:15 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1283876114">&nbsp;</a></div><pre>Begin forwarded message&#58;

From&#58; John Weigand &#60;weigand@....&#62;
Date&#58; September 7, 2010 11&#58;04&#58;55 AM EDT
To&#58; Karthik Arunachalam &#60;karunach@....&#62;
Cc&#58; goc@...., Brian Bockelman &#60;bbockelm@....&#62;
Subject&#58; Re&#58; Purdue-Steele not reporting to Gratia
Reply-To&#58; weigand@....

oops.... now we have 2 tickets... Kyle saw my reply to you and immediately put Purdue-Steele on the ticket.

John

On 9/7/2010 9&#58;06 AM, Karthik Arunachalam wrote&#58;
Hi John,

Thanks for the reminding about the new system (about which I forgot). I have submitted a ticket through that means.

-Karthik

On Tue, 7 Sep 2010, John Weigand wrote&#58;

Karthik,

The ticket created is going to go no where.

<a href='9179.html' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=9179</a>
2 issues I see...
1. other than this cc, I never got a notification of the ticket creation
2. Purdue-Steele isn&#39;t seeing this

This is the same problem we had the last time when we just sent an email to the goc and came up with a new procedure as a result.

The procedure we need to follow is to create the ticket ourselves starting here
<a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a>
<div id='show_784137686' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_784137686'>
.. then selecting &#34;Problem on OSG Resource&#34;
.. for the &#34;virtual organization that this contact belongs to&#34;, select &#34;I don&#39;t know&#34;
.. the &#34;Resource Name&#34; selection is the key to getting it to the site.

On the current ticket, there is no way I know of unless you specifically know who is responsible which is &#34;iffy&#34; at best.

John Weigand

On 9/5/2010 9&#58;53 PM, Karthik Arunachalam wrote&#58;
Purdue-Steele has not been reporting to Gratia for more than 2 days&#58;
[&#39;2010-09-01&#39;, &#39;2010-09-02&#39;, &#39;2010-09-03&#39;, &#39;2010-09-04&#39;, &#39;2010-09-05&#39;]

You could verify this by looking at the chart at
<a href='http&#58;//gratia-osg-prod-reports.opensciencegrid.org/gratia-reporting/frameset?__report=/data/tomcat-gratia/webapps/gratia-reports/reports/UsageBySiteByDate-ranked.rptdesign&__title&ReportTitle=Daily%20Usage%20by%20Site&DisplayMetric=WallDuration&StartDate=2010-08-25&EndDate=2010-09-06&GroupsPerChart=15&SelType=IN&mySites=Purdue-Steele&SelectSites=Purdue-Steele&__title' target='_blank' rel='nofollow'>http&#58;//gratia-osg-prod-reports.opensciencegrid.org/gratia-reporting/frameset?__report=/data/tomcat-gratia/webapps/gratia-reports/reports/UsageBySiteByDate-ranked.rptdesign&__title&ReportTitle=Daily%20Usage%20by%20Site&DisplayMetric=WallDuration&StartDate=2010-08-25&EndDate=2010-09-06&GroupsPerChart=15&SelType=IN&mySites=Purdue-Steele&SelectSites=Purdue-Steele&__title</a>

This is affecting the data that is being reported to WLCG for MOU
purposes. We want to clarify if this is part of a planned downtime and not
a real problem before it gets too difficult to catch up.

The Gratia-APEL interface checks for sites not reporting any data in a
given day and validates that against MyOsg planned downtime before raising
a warning flag.

So, if this is part of the planned downtime period, it would help if
OIM is updated for these days.  If not, then we need to
troubleshoot the problem with Gratia reporting.
</div><script type='text/javascript'>
        $('#show_784137686').click(function() {
            $('#detail_784137686').slideDown("normal");
            $('#show_784137686').hide();
            $('#hide_784137686').show();
        });
        $('#hide_784137686').click(function() {
            $('#detail_784137686').slideUp();
            $('#hide_784137686').hide();
            $('#show_784137686').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='9179#1283872551'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-07T15:15:51+00:00">Sep 7, 2010 03:15 PM UTC</time><a class="anchor" name="1283872551">&nbsp;</a></div><pre>Preston,

Just Purdue-Steele.  Purdue-RCAC is current in its reporting to Gratia.  These are the only 2 resources at Purdue that we keep track of as they are a part of the WLCG reporting interface.  If there are others, we are ignorant of their state.

John Weigand</pre></div><div class='update_description'><i onclick="document.location='9179#1283868493'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-07T14:08:13+00:00">Sep 7, 2010 02:08 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1283868493">&nbsp;</a></div><pre>I&#39;m adding Karthik to this ticket since he created a duplicate ticket with <a href='9187.html' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=9187.</a></pre></div><div class='update_description'><i onclick="document.location='9179#1283864886'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-07T13:08:06+00:00">Sep 7, 2010 01:08 PM UTC</time> by <b>Preston Smith</b><a class="anchor" name="1283864886">&nbsp;</a></div><pre>Only Purdue-Steele? Not all Purdue resources?

On Tue, Sep 7, 2010 at 8&#58;38 AM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9179#1283863107'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-07T12:38:27+00:00">Sep 7, 2010 12:38 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1283863107">&nbsp;</a></div><pre>I have added the Purdue Grid Systems Team to this ticket.  Hopefully they can help get to the bottom of this issue.</pre></div><div class='update_description'><i onclick="document.location='9179#1283742874'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-06T03:14:34+00:00">Sep 6, 2010 03:14 AM UTC</time> by <b>binelson</b><a class="anchor" name="1283742874">&nbsp;</a></div><pre>From&#58; Karthik Arunachalam &#60;karunach@....&#62;
To&#58; goc@....
cc&#58; John Weigand &#60;weigand@....&#62;, Brian Bockelman &#60;bbockelm@....&#62;
Subject&#58; Purdue-Steele not reporting to Gratia
Date-Sent&#58; Sunday, September 05, 2010 9&#58;53 PM -0500

Purdue-Steele has not been reporting to Gratia for more than 2 days&#58;
[&#39;2010-09-01&#39;, &#39;2010-09-02&#39;, &#39;2010-09-03&#39;, &#39;2010-09-04&#39;, &#39;2010-09-05&#39;]

You could verify this by looking at the chart at
<a href='http&#58;//gratia-osg-prod-reports.opensciencegrid.org/gratia-reporting/frameset?__report=/data/tomcat-gratia/webapps/gratia-reports/reports/UsageBySiteByDate-ranked.rptdesign&amp' target='_blank' rel='nofollow'>http&#58;//gratia-osg-prod-reports.opensciencegrid.org/gratia-reporting/frameset?__report=/data/tomcat-gratia/webapps/gratia-reports/reports/UsageBySiteByDate-ranked.rptdesign&amp</a>;__title&amp;ReportTitle=Daily%20Usage%20by%20Site&amp;DisplayMetric=WallDuration&amp;StartDate=2010-08-25&amp;EndDate=2010-09-06&amp;GroupsPerChart=15&amp;SelType=IN&amp;mySites=Purdue-Steele&amp;SelectSites=Purdue-Steele&amp;__title

This is affecting the data that is being reported to WLCG for MOU purposes. We want to clarify if this is part of a planned downtime and not a real problem before it gets too difficult to catch up.

The Gratia-APEL interface checks for sites not reporting any data in a
given day and validates that against MyOsg planned downtime before raising a warning flag.

So, if this is part of the planned downtime period, it would help if
OIM is updated for these days.  If not, then we need to
troubleshoot the problem with Gratia reporting.</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F9179">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
