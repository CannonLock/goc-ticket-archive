<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[13103] setting up Gluex glideinWMS frontend with GOC factory</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=13103" method="post">
<div class="page-header">
    <h3><span class="muted">13103</span> / setting up Gluex glideinWMS frontend with GOC factory</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Richard T. Jones</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">GOC glidein</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">MIS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Richard T. Jones</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">osg-glidein-factory</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">review</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-12-26</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">OSG Glidein Factory Support <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/13103", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/13103?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/13103?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20setting%20up%20Gluex%20glideinWMS%20frontend%20with%20GOC%20factory%20ISSUE%3D13103%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='13103#1356635228'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-27T19:07:08+00:00">Dec 27, 2012 07:07 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1356635228">&nbsp;</a></div><pre>CLosing this based on Richard&#39;s update.</pre></div><div class='update_description'><i onclick="document.location='13103#1355945592'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-19T19:33:12+00:00">Dec 19, 2012 07:33 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1355945592">&nbsp;</a></div><pre>Elizabeth,

Yes, this is resolved.

-Richard J.

On 12/19/2012 12&#58;15 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='13103#1355944438'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-19T19:13:58+00:00">Dec 19, 2012 07:13 PM UTC</time><a class="anchor" name="1355944438">&nbsp;</a></div><pre>Gluex pilots are still starting up successfully.  Unless Richard (et al.) have no more comments I think this is resolved.
--Alex

by /DC=org/DC=doegrids/OU=People/CN=Alexander Georges 435073</pre></div><div class='update_description'><i onclick="document.location='13103#1355937330'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-19T17:15:30+00:00">Dec 19, 2012 05:15 PM UTC</time> by <b>echism</b><a class="anchor" name="1355937330">&nbsp;</a></div><pre>May I close this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='13103#1355453287'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-14T02:48:07+00:00">Dec 14, 2012 02:48 AM UTC</time> by <b>GLUEX</b><a class="anchor" name="1355453287">&nbsp;</a></div><pre>Alex,

In fact, I saw it a couple minutes after I pressed return on my previous message.  I should have waited another few minutes and checked again before reporting.  Like the weather in New England.

-Richard J.

On 12/13/2012 4&#58;59 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='13103#1355435957'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-13T21:59:17+00:00">Dec 13, 2012 09:59 PM UTC</time><a class="anchor" name="1355435957">&nbsp;</a></div><pre>Richard, pilots have started up at both UCSD factories within the last hour.  If you check again, you should see these.

Best,
Alex

by /DC=org/DC=doegrids/OU=People/CN=Alexander Georges 435073</pre></div><div class='update_description'><i onclick="document.location='13103#1355432773'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-13T21:06:13+00:00">Dec 13, 2012 09:06 PM UTC</time><a class="anchor" name="1355432773">&nbsp;</a></div><pre>Burt,

Ok, yes that is clear in hindsight.  So I removed the 3.0 install and rolled in the version 2.6.2.  It was not compatible with my older condor 7.4.4 so first I upgraded to condor 7.8.6 on my gwms collector host, then reinstalled vofrontend 2.6.2 and configured it.  Something surprised me in this process.  I used to believe that any time I stop and restart condor on my gwms userpool collector, I would lose all of my running glideins.  However I shut down the 7.4.4 version of condor and started up the 7.8.6 collectors, and they immediately began to reconnect to the running glideins that were started by the old collector.  This was unexpected, and very nice.  I had to copy the old condor spool directory to the new one, so the reconnect files would be seen by the new daemon.

That aside, I am now up and running with my new frontend, and I now see glideins being issued by the GOC factory.  On the other hand, none are being issued by either of the two UCSD factories.  Is there still a configuration issue to be worked out?

by /DC=org/DC=doegrids/OU=People/CN=Richard T. Jones 975420</pre></div><div class='update_description'><i onclick="document.location='13103#1355420403'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-13T17:40:03+00:00">Dec 13, 2012 05:40 PM UTC</time> by <b>Igor Sfiligoi</b><a class="anchor" name="1355420403">&nbsp;</a></div><pre>From Burt Holzman&#58;
Hi Richard,

v3 is still the dev version and not backwards-compatible with the v2
factories that OSG runs -- sorry, did the gWMS documentation not make
that clear?

The latest production FE release is 2.6.2, please use that.  (2.6.3
should be out &#34;soon&#34;, but we&#39;re still testing and polishing).

- B</pre></div><div class='update_description'><i onclick="document.location='13103#1355402738'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-13T12:45:38+00:00">Dec 13, 2012 12:45 PM UTC</time><a class="anchor" name="1355402738">&nbsp;</a></div><pre>As an update on this issue, I have now installed the glideinWMS frontend version 3.0 on my user collector node.  The old (still works) and new (gets lists of target sites, but no pilots ever show up.  I have posted the frontend.xml files for the old and new installs in the following web directory.

<a href='http&#58;//zeus.phys.uconn.edu/UConn-OSG/diatnose' target='_blank' rel='nofollow'>http&#58;//zeus.phys.uconn.edu/UConn-OSG/diatnose</a> (frontend.xml-old and frontend.xml-new)

The reconfig command works without any error, and either version of the frontend python scipt will start up without errors, but then the old on makes pilots and the new one doesn&#39;t  Any help would be appreciated.

-Richard J.

by /DC=org/DC=doegrids/OU=People/CN=Richard T. Jones 975420</pre></div><div class='update_description'><i onclick="document.location='13103#1355260868'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-11T21:21:08+00:00">Dec 11, 2012 09:21 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1355260868">&nbsp;</a></div><pre>Igor,

It is the version that you helped me install back when we first set up the frontend with the UCSD factory.  Neither of these two attributes are present in my frontend tag.  Would you recommend that I upgrade immediately?  If so, can I use the rpm install this time, instead of the tarballs?

-Richard J.

On 12/11/2012 12&#58;01 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='13103#1355259116'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-11T20:51:56+00:00">Dec 11, 2012 08:51 PM UTC</time><a class="anchor" name="1355259116">&nbsp;</a></div><pre>Hi Richard,

I believe since you don&#39;t have those options you are using an old version of the glideinWMS Frontend that only talks to the factory collector using UDP.  Over the past year we have encountered increased load issues on our factories and have requested all Frontends to change their communication with our collectors to use TCP to reduce the load.  For this reason we made TCP communication a requirement on the newer GOC and SDSC Factories.

We highly recommend you upgrade your Frontend as soon as possible.

Thanks,
Jeff

by /DC=org/DC=doegrids/OU=People/CN=Jeffrey M. Dost 948199</pre></div><div class='update_description'><i onclick="document.location='13103#1355202106'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-11T05:01:46+00:00">Dec 11, 2012 05:01 AM UTC</time> by <b>Igor Sfiligoi</b><a class="anchor" name="1355202106">&nbsp;</a></div><pre>Hi Richard.

What version of glideinWMS are you using?
If you are using a modern version, the first line should look like
&#60;frontend ... advertise_with_multiple=&#34;True&#34; advertise_with_tcp=&#34;True&#34;  ...&#62;

Cheers,
Igor</pre></div><div class='update_description'><i onclick="document.location='13103#1355197508'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-11T03:45:08+00:00">Dec 11, 2012 03:45 AM UTC</time> by <b>GLUEX</b><a class="anchor" name="1355197508">&nbsp;</a></div><pre>Hello,
I had to change back and remove the new &#34;advertise_with&#34; attributes that were recommended because there were warnings about recognized attributes that were printed when I tried to do reconfig with them present.  So now I am back to the original configuration.  The info.log file does say &#34;advertised 25 requests&#34; (see below) indicating that the advertisements are being sent.  I don&#39;t know if they are being received or not.
-Richard J.

-------------snippet from info.log---------------
[2012-12-10T22&#58;41&#58;26-04&#58;00 918481] Iteration at Mon Dec 10 22&#58;41&#58;26 2012
[2012-12-10T22&#58;41&#58;35-04&#58;00 918481] Jobs found total 39247 idle 38460 (old 38460) running 747
[2012-12-10T22&#58;41&#58;35-04&#58;00 918481] Glideins found total 817 idle 10 running 785
[2012-12-10T22&#58;41&#58;35-04&#58;00 918481] Using 3 proxies
[2012-12-10T22&#58;41&#58;35-04&#58;00 918481] Match
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] Total matching idle 38500 (old 38460) running 747 limit 10000
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481]      Jobs in schedd queues      |      Glideins     |   Request
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] Idle ( eff   old )  Run ( max ) | Total Idle   Run  | Idle MaxRun Down Factory
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up CMS_T2_US_Purdue_osg@v1_0@SDSC@.....e
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up HCC_US_Cornell_nys1@v1_0@SDSC@....
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up HCC_US_Fermigridosg1@v1_0@SDSC@.....e
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |    15     0    15 |   100 45135 Up CMS_T2_US_UCSD_gw2@Production_v4_3@UCSD@glidein-1.t
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up HCC_BR_UNESP@v1_0@SDSC@....
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up HCC_US_UConn_gluskap@v1_2@OSGGOC@....
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up HCC_BR_UNESP@Production_v4_3@UCSD@....
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up HCC_BR_UNESP@v1_2@OSGGOC@....
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up CMS_T2_US_UCSD_gw4@v1_2@OSGGOC@....
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up HCC_US_UConn_gluskap@v1_0@SDSC@.....e
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |   161     0   161 |   100 45135 Up HCC_US_Fermigridosg1@Production_v4_3@UCSD@glidein-1
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up CMS_T2_US_UCSD_gw2@v1_2@OSGGOC@....
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38490 38460) 747(10000) |   238    10   206 |    50 45135 Up CMS_T2_US_Purdue_osg@Production_v4_3@UCSD@glidein-1
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up CMS_T2_US_UCSD_gw4@v1_0@SDSC@....
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up CMS_T1_US_FNAL_ce3@v1_0@SDSC@....
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up CMS_T2_BR_SPRACE@v1_0@SDSC@....
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up CMS_T2_US_UCSD_gw2@v1_0@SDSC@....
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up CMS_T1_US_FNAL_ce3@v1_2@OSGGOC@....
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |    20     0    20 |   100 45135 Up CMS_T2_BR_SPRACE@Production_v4_3@UCSD@glidein-1.t2.
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up CMS_T2_BR_SPRACE@v1_2@OSGGOC@....
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |    69     0    69 |   100 45135 Up HCC_US_Cornell_nys1@Production_v4_3@UCSD@glidein-1.
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up CMS_T2_US_Purdue_osg@v1_2@OSGGOC@....
<div id='show_1516768915' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1516768915'>[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up HCC_US_Fermigridosg1@v1_2@OSGGOC@....
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     7     0     7 |   100 45135 Up CMS_T2_US_UCSD_gw4@Production_v4_3@UCSD@glidein-1.t
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |   307     0   307 |   100 45135 Up HCC_US_UConn_gluskap@Production_v4_3@UCSD@glidein-1
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 38500(38500 38460) 747(10000) |     0     0     0 |   100 45135 Up HCC_US_Cornell_nys1@v1_2@OSGGOC@....
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481]      Jobs in schedd queues      |      Glideins     |   Request
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] Idle ( eff   old )  Run ( max ) | Total Idle   Run  | Idle MaxRun Down Factory
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] 1001k(1000k  999k) 19422( 260k) |   817    10   785 |  2550 1173k Up   Sum of useful factories
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481]     0(    0     0) 0(    0) |     0     0     0 |     0     0 Down Sum of down factories
[2012-12-10T22&#58;41&#58;37-04&#58;00 918481] Advertizing 26 requests
[2012-12-10T22&#58;42&#58;31-04&#58;00 918481] Done advertizing
[2012-12-10T22&#58;42&#58;31-04&#58;00 918481] Writing stats
[2012-12-10T22&#58;42&#58;31-04&#58;00 918481] Sleep

On 12/10/2012 9&#58;36 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1516768915').click(function() {
            $('#detail_1516768915').slideDown("normal");
            $('#show_1516768915').hide();
            $('#hide_1516768915').show();
        });
        $('#hide_1516768915').click(function() {
            $('#detail_1516768915').slideUp();
            $('#hide_1516768915').hide();
            $('#show_1516768915').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='13103#1355193368'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-11T02:36:08+00:00">Dec 11, 2012 02:36 AM UTC</time> by <b>GLUEX</b><a class="anchor" name="1355193368">&nbsp;</a></div><pre>Hello,

I did not have either of these &#34;advertise_with&#34; attributes that you listed in my frontend tag.  I added them and restarted the service.  Let&#39;s see what happens.  I also changed the order of the collectors in the &#60;collectors&#62; tag, in case it is just using whichever one is first in the list.

The debug.log and the err.log exist, but there are only messages related to when I stopped and started services.  There are no messages related to communication with the factories.

-Richard J.

On 12/10/2012 8&#58;06 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='13103#1355187978'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-11T01:06:18+00:00">Dec 11, 2012 01:06 AM UTC</time><a class="anchor" name="1355187978">&nbsp;</a></div><pre>Thanks, Richard.

Everything you&#39;ve sent looks correct.  I have one other question about your frontend config, can you let us know what you have for the following at the top of your frontend.xml&#58;
advertise_with_multiple=&#34;True&#34; advertise_with_tcp=&#34;True&#34;

These should both be set to &#34;True&#34;

Other than that, do you have any interesting errors written to your frontend err or debug logs that will help us figure out where the communication is failing?

Thanks,
Jeff

by /DC=org/DC=doegrids/OU=People/CN=Jeffrey M. Dost 948199</pre></div><div class='update_description'><i onclick="document.location='13103#1355180949'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-10T23:09:09+00:00">Dec 10, 2012 11:09 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1355180949">&nbsp;</a></div><pre>Alex,

Besides the collector lines, there is also the factory query_expr which may need to be looked at.  Here it is, from my frontend.xml&#58;

&#60;factory query_expr=&#39;stringListMember(&#34;GLUEX&#34;,GLIDEIN_Supported_VOs)&#39;&#62;

-Richard J.

On 12/10/2012 6&#58;03 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='13103#1355180591'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-10T23:03:11+00:00">Dec 10, 2012 11:03 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1355180591">&nbsp;</a></div><pre>Alex,

Here are the collector lines from frontend.xml .  Do I need some new identities in my VOMS?  I see the my_identity line, but I never took any action to actually create these new identities.

&#60;collectors&#62;
&#60;collector DN=&#34;/DC=org/DC=doegrids/OU=Services/CN=glidein-1.t2.ucsd.edu&#34; comment=&#34;Define factory collector globally for simplicity&#34; factory_identity=&#34;gfactory@....&#34; my_identity=&#34;fegluex@....&#34; node=&#34;glidein-1.t2.ucsd.edu&#34;/&#62;
&#60;collector DN=&#34;/DC=org/DC=doegrids/OU=Services/CN=gfactory-1.t2.ucsd.edu&#34; factory_identity=&#34;gfactory@....&#34; my_identity=&#34;fegluex@....&#34; node=&#34;gfactory-1.t2.ucsd.edu&#34;/&#62;
&#60;collector DN=&#34;/DC=org/DC=doegrids/OU=Services/CN=glidein.grid.iu.edu&#34; factory_identity=&#34;gfactory@....&#34; my_identity=&#34;fegluex@....&#34; node=&#34;glidein.grid.iu.edu&#34;/&#62;
&#60;/collectors&#62;

-Richard J.

On 12/10/2012 4&#58;34 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='13103#1355175279'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-10T21:34:39+00:00">Dec 10, 2012 09:34 PM UTC</time><a class="anchor" name="1355175279">&nbsp;</a></div><pre>Richard, what are the factory collector lines in your xml.  We see the frontend talking to our collector but it isn&#39;t advertising requests.

Alex

by /DC=org/DC=doegrids/OU=People/CN=Alexander Georges 435073</pre></div><div class='update_description'><i onclick="document.location='13103#1355168576'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-10T19:42:56+00:00">Dec 10, 2012 07:42 PM UTC</time><a class="anchor" name="1355168576">&nbsp;</a></div><pre>Can I request assistance getting the GOC glideinWMS factory and the new UCSD gfactory to recognize my frontend?  I have configured them in my frontend, and they now show in the info logs on my frontend process, but none of them are actually generating pilots for me.  I assume that I need to be validated on these factories.  I am still getting pilots distributed from the UCSD glidein-1 factory, so I am in business for the moment, but that factory is going down in a few days, as I understand it.

by /DC=org/DC=doegrids/OU=People/CN=Richard T. Jones 975420</pre></div><div class='update_description'><i onclick="document.location='13103#1354937428'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-08T03:30:28+00:00">Dec 8, 2012 03:30 AM UTC</time><a class="anchor" name="1354937428">&nbsp;</a></div><pre>I installed the new collector tags in frontend.xml, stopped the frontend script, ran frontend reconfig, and then started it again.  The info log now shows the additional sites that accept jobs from my VO, listed separately for each factory.

However, only the glidein-1.t2.ucsd.edu factory that I have been using over the past two years is actually seeing my jobs.  I suspect that the factory admins need to install my identities in the factory config.  In case it is at all relevant, I include below the security tag in my frontend.xml file.

&#60;security classad_proxy=&#34;/home/fegluex/x509_proxy&#34; proxy_DN=&#34;/DC=org/DC=doegrids/OU=Services/CN=glideinwms/gluex.phys.uconn.edu&#34; proxy_selection_plugin=&#34;ProxyAll&#34; security_name=&#34;GluexVO&#34; sym_key=&#34;aes_256_cbc&#34;&#62;
&#60;proxies&#62;
&#60;proxy absfname=&#34;/home/fegluex/x509_pilot1_proxy&#34; security_class=&#34;frontend&#34;/&#62;
&#60;proxy absfname=&#34;/home/fegluex/x509_pilot2_proxy&#34; security_class=&#34;frontend&#34;/&#62;
&#60;proxy absfname=&#34;/home/fegluex/x509_pilot3_proxy&#34; security_class=&#34;frontend&#34;/&#62;
&#60;/proxies&#62;
&#60;/security&#62;

by /DC=org/DC=doegrids/OU=People/CN=Richard T. Jones 975420</pre></div><div class='update_description'><i onclick="document.location='13103#1354655443'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-04T21:10:43+00:00">Dec 4, 2012 09:10 PM UTC</time> by <b>echism</b><a class="anchor" name="1354655443">&nbsp;</a></div><pre>setting out for review</pre></div><div class='update_description'><i onclick="document.location='13103#1354651071'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-04T19:57:51+00:00">Dec 4, 2012 07:57 PM UTC</time><a class="anchor" name="1354651071">&nbsp;</a></div><pre>Hi Richard,

FYI I emailed you instructions on how to add both GOC and the new SDSC Factories to your frontend.

Let us know if you have any questions,
Jeff

by /DC=org/DC=doegrids/OU=People/CN=Jeffrey M. Dost 948199</pre></div><div class='update_description'><i onclick="document.location='13103#1354645822'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-04T18:30:22+00:00">Dec 4, 2012 06:30 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354645822">&nbsp;</a></div><pre>I wonder if I could get some help configuring our Gluex glideinWMS frontend to talk to the GOC factory.  So far we have been using the UCSD factory, but they are upgrading their service right now so it seemed like a good time for us to get configured to use the GOC factory service as well.  Does this make sense?

by /DC=org/DC=doegrids/OU=People/CN=Richard T. Jones 975420</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F13103">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
