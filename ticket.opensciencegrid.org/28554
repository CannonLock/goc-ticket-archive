<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[28554] Moving T2_US_UCSD to multicore</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=28554" method="post">
<div class="page-header">
    <h3><span class="muted">28554</span> / Moving T2_US_UCSD to multicore</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Antonio Perez-Calero</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Antonio Perez-Calero Yzquierdo</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier2</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">WIP</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-04-06</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USCMS Tier 2 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=119639">119639</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/28554", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/28554?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/28554?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Moving%20T2_US_UCSD%20to%20multicore%20ISSUE%3D28554%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='28554#1461110482'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-20T00:01:22+00:00">Apr 20, 2016 12:01 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1461110482">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.

-- by GGUS SYSTEM at Wed Apr 20 00&#58;00&#58;38 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1459808986'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-04T22:29:46+00:00">Apr 4, 2016 10:29 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459808986">&nbsp;</a></div><pre>Closing the ticket as the site transition to running multicore pilots has been achieved.

-- by Antonio Perez-Calero Yzquierdo at Mon Apr 04 22&#58;28&#58;43 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1459808867'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-04T22:27:47+00:00">Apr 4, 2016 10:27 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459808867">&nbsp;</a></div><pre>Hi Edgar, Terrence,

CMS was happy with max_walltime = 60h, plus retire_time=30h for the pilots (so not really trying to run for 60h, as the mcore pilots start draining at 30h...). It&#39;s the config we are using (have been using for a couple of years almost) for the T1s with no problem, and now also for most T2s. So we have not changed minds. It&#39;s more that Factory Ops (Jeff) does not feel that this is a proper configuration (only for OSG sites apparently).

My only concern is for CMS multicore to run at UCSD, as well as for the rest of CMS sites (OSG or not), so do as you prefer, of course respecting the minimum VO agreed value of 48h.

Thanks,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Mon Apr 04 22&#58;27&#58;33 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1459792272'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-04T17:51:12+00:00">Apr 4, 2016 05:51 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1459792272">&nbsp;</a></div><pre>You are probably safe enough to switch to 60, but I am not sure it will
be the last change.

On 4/4/2016 8&#58;17 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='28554#1459783051'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-04T15:17:31+00:00">Apr 4, 2016 03:17 PM UTC</time><a class="anchor" name="1459783051">&nbsp;</a></div><pre>Hi Terrence,

I would like to keep the Comet configs as close to yours as possible. In the config file I have&#58;

MaxWallTime = (48*$(HOUR))

WANT_VACATE=TRUE
#KILL=$(ActivityTimer) &#62; 600

SUSPEND=FALSE

MaxJobRetirementTime = (72*$(HOUR))

Does this mean that I have to change the MaxWallTime to&#58;

(60*$(HOUR)).

Has CMS made up its mind yet in 60? Or in a week it will be 72? Is this just for UCSD or all T2 sites?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='28554#1459752309'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-04T06:45:09+00:00">Apr 4, 2016 06:45 AM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1459752309">&nbsp;</a></div><pre>That is fine. If CMS wants more time that is ok, and with pilots, they
could take 120 hours. That old limit was to protect the site from single
jobs that ran too long, not pilots that run many jobs. &#58;)

Terrence

On 4/3/2016 8&#58;05 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='28554#1459739136'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-04T03:05:36+00:00">Apr 4, 2016 03:05 AM UTC</time><a class="anchor" name="1459739136">&nbsp;</a></div><pre>Hi Terrence,

It appears that CMS increased the max walltime of the glideins at UCSD to 216000 (60h) without first communicating it to you. The single core entries were set to 48h. I&#39;d just like to be sure you are ok with this change before closing the ticket out.

Thanks,
Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='28554#1459466318'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-31T23:18:38+00:00">Mar 31, 2016 11:18 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459466318">&nbsp;</a></div><pre>Thanks, Marty,

Yes, I see that in the factory monitoring pages. Great.

We still have single core running, but that should drain in the following hours, now that we&#39;ll only submit multicore. And we have been ramping up multicore today, up to about 1800 cores right now. So I&#39;d say we are really close to declare this done.

We&#39;ll keep the ticket open for about 24h, then close it.

Cheers,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Thu Mar 31 23&#58;17&#58;32 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1459450716'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-31T18:58:36+00:00">Mar 31, 2016 06:58 PM UTC</time><a class="anchor" name="1459450716">&nbsp;</a></div><pre>Antonio,

All single core entries at UCSD have been disabled across all factories. Site should be multicore only now.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='28554#1459382679'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-31T00:04:39+00:00">Mar 31, 2016 12:04 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459382679">&nbsp;</a></div><pre>Thanks for the feedback, Marty.

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Thu Mar 31 00&#58;04&#58;05 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1459371680'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-30T21:01:20+00:00">Mar 30, 2016 09:01 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459371680">&nbsp;</a></div><pre>Antonio,

FYI - You may be seeing 800 cores from multicore glideins, but the problem is currently that some fraction of those 8-&#34;core&#34; glideins are actually only running on one single physical core in the local condor batch system. We&#39;ll get back to you when this situation is resolved.

Marty Kandes
UCSD Glidein Factory Operations

-- by Marty Kandes at Wed Mar 30 21&#58;00&#58;27 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1459357081'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-30T16:58:01+00:00">Mar 30, 2016 04:58 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459357081">&nbsp;</a></div><pre>Antonio,

It is a site configuration issue.

Marty Kandes
UCSD Glidein Factory Operations

-- by Marty Kandes at Wed Mar 30 16&#58;57&#58;41 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1459356659'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-30T16:50:59+00:00">Mar 30, 2016 04:50 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459356659">&nbsp;</a></div><pre>Hi,

Do we have the correct submit attrs in the entries? Or is it a site issue?

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Wed Mar 30 16&#58;50&#58;46 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1459354133'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-30T16:08:53+00:00">Mar 30, 2016 04:08 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459354133">&nbsp;</a></div><pre>Antonio,

FYI - You may be seeing 800 cores from multicore glideins, but the problem is currently that some fraction of those 8-&#34;core&#34; glideins are actually only running on one single physical core in the local condor batch system. We&#39;ll get back to you when this situation is resolved.

Marty Kandes
UCSD Glidein Factory Operations

-- by Marty Kandes at Wed Mar 30 16&#58;08&#58;34 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1459308095'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-30T03:21:35+00:00">Mar 30, 2016 03:21 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459308095">&nbsp;</a></div><pre>Hi Edgar, Marty,

Thanks for the updates. I currently see close to 800 cores being used by multicore, while single core pilots still running at UCSD&#58;

aperez@submit-3 ~$ condor_status -pool cmssrv221.fnal.gov -af GLIDEIN_CMSSite SlotType GLIDEIN_Entry_Name|sort |uniq -c | grep UCSD
8 T2_US_UCSD Dynamic CMSHTPC_T2_US_UCSD_gw2
31 T2_US_UCSD Dynamic CMSHTPC_T2_US_UCSD_gw4
416 T2_US_UCSD Dynamic CMSHTPC_T2_US_UCSD_gw6
324 T2_US_UCSD Dynamic CMSHTPC_T2_US_UCSD_gw7
1 T2_US_UCSD Partitionable CMSHTPC_T2_US_UCSD_gw2
4 T2_US_UCSD Partitionable CMSHTPC_T2_US_UCSD_gw4
53 T2_US_UCSD Partitionable CMSHTPC_T2_US_UCSD_gw6
41 T2_US_UCSD Partitionable CMSHTPC_T2_US_UCSD_gw7
229 T2_US_UCSD Static CMS_T2_US_UCSD_gw2
268 T2_US_UCSD Static CMS_T2_US_UCSD_gw2_bigmem
286 T2_US_UCSD Static CMS_T2_US_UCSD_gw6
270 T2_US_UCSD Static CMS_T2_US_UCSD_gw6_bigmem
459 T2_US_UCSD Static CMS_T2_US_UCSD_gw7

Please let me know when the local config has been revisited so that we can continue disabling the single core entries.

Cheers,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Wed Mar 30 03&#58;20&#58;33 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1459292247'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-29T22:57:27+00:00">Mar 29, 2016 10:57 PM UTC</time><a class="anchor" name="1459292247">&nbsp;</a></div><pre>Antonio, Vassil,

Please hold off on any changes to all UCSD entires -- both multicore and single core --- on the glidein factories until further notice. Terrance and Edgar need to work out the issues with the batch condor configuration for some nodes that are still not ready for multicore. I will revisit the issue with them tomorrow.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='28554#1459291893'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-29T22:51:33+00:00">Mar 29, 2016 10:51 PM UTC</time><a class="anchor" name="1459291893">&nbsp;</a></div><pre>Hi Terrence,

It looks there are some missconfigured nodes that receive multicore pilots in single core slots&#58;

root@osg-gw-6 /etc/grid-security/certificates# condor_q -const &#39;RequestCpus&#62;1 && JobStatus=?=2&#39; -af RemoteHost
slot9@....
slot7@....
slot11@....
slot19@....
slot1@....
slot1@....

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='28554#1459271933'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-29T17:18:53+00:00">Mar 29, 2016 05:18 PM UTC</time><a class="anchor" name="1459271933">&nbsp;</a></div><pre>Antonio, Vassil,

I&#39;ve corrected mistakes in the new multicore entries

CMSHTPC_T2_US_UCSD_gw2,
CMSHTPC_T2_US_UCSD_gw4,
CMSHTPC_T2_US_UCSD_gw6, and
CMSHTPC_T2_US_UCSD_gw7.

In addition, I&#39;ve gone ahead and disabled the single core entries

CMS_T2_US_UCSD_gw2,
CMS_T2_US_UCSD_gw2_bigmem,
CMS_T2_US_UCSD_gw4,
CMS_T2_US_UCSD_gw4_bigmem,
CMS_T2_US_UCSD_gw6,
CMS_T2_US_UCSD_gw6_bigmem, and
CMS_T2_US_UCSD_gw7

on the CERN and GOC-ITB factory.

After speaking with Terrence and Edgar, they confirmed we can move directly to multicore glideins for all VOs and disable the single core entries. Note, however, I want to confirm the corrected multicore entries are working before we completely disable the single core entries on the GOC and SDSC factories.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='28554#1459265015'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-29T15:23:35+00:00">Mar 29, 2016 03:23 PM UTC</time><a class="anchor" name="1459265015">&nbsp;</a></div><pre>Terrence,

I just want to make sure we confirm this with you&#58; Instead disabling the UCSD single core entries once CMS multicore glideins are confirmed to be running successfully, should we only remove CMS from the supported VO list? i.e., We still have to support the other VOs with single core glideins, correct?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='28554#1459258605'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-29T13:36:45+00:00">Mar 29, 2016 01:36 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459258605">&nbsp;</a></div><pre>Hi Terrence,

Let&#39;s see how it runs for a while, then we can start disabling regular single core entries.

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Tue Mar 29 13&#58;35&#58;59 UTC 2016

Thanks Vassil,

I see the entries are already running pilots and apparently pulling work, see&#58;

<a href='http&#58;//submit-3.t2.ucsd.edu/CSstoragePath/aperez/T2s/multicore_usage_t2s_6h.html' target='_blank' rel='nofollow'>http&#58;//submit-3.t2.ucsd.edu/CSstoragePath/aperez/T2s/multicore_usage_t2s_6h.html</a>

I see right now&#58;

aperez@submit-3 ~/entries$ condor_status -pool cmssrv221.fnal.gov -af GLIDEIN_CMSSite SlotType GLIDEIN_Entry_Name|sort |uniq -c | grep UCSD
32 T2_US_UCSD Dynamic CMSHTPC_T2_US_UCSD_gw4
88 T2_US_UCSD Dynamic CMSHTPC_T2_US_UCSD_gw6
39 T2_US_UCSD Dynamic CMSHTPC_T2_US_UCSD_gw7
4 T2_US_UCSD Partitionable CMSHTPC_T2_US_UCSD_gw4
14 T2_US_UCSD Partitionable CMSHTPC_T2_US_UCSD_gw6
5 T2_US_UCSD Partitionable CMSHTPC_T2_US_UCSD_gw7
127 T2_US_UCSD Static CMS_T2_US_UCSD_gw2
181 T2_US_UCSD Static CMS_T2_US_UCSD_gw2_bigmem
160 T2_US_UCSD Static CMS_T2_US_UCSD_gw6
160 T2_US_UCSD Static CMS_T2_US_UCSD_gw6_bigmem
174 T2_US_UCSD Static CMS_T2_US_UCSD_gw7

so already taking about 180 cores by multicore pilots and growing.

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Tue Mar 29 13&#58;23&#58;09 UTC 2016

<div id='show_1663001326' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1663001326'>Hi Antonio, Terrence,

I copied the entries [1], [2], [3] and [4] from CERN ITB factory to CERN, GOC and SDSC production factories.

Vassil

[1] CMSHTPC_T2_US_UCSD_gw2
[2] CMSHTPC_T2_US_UCSD_gw4
[3] CMSHTPC_T2_US_UCSD_gw6
[4] CMSHTPC_T2_US_UCSD_gw7

-- by Vassil Verguilov at Tue Mar 29 12&#58;34&#58;38 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a>
</div><script type='text/javascript'>
        $('#show_1663001326').click(function() {
            $('#detail_1663001326').slideDown("normal");
            $('#show_1663001326').hide();
            $('#hide_1663001326').show();
        });
        $('#hide_1663001326').click(function() {
            $('#detail_1663001326').slideUp();
            $('#hide_1663001326').hide();
            $('#show_1663001326').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28554#1459203208'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-28T22:13:28+00:00">Mar 28, 2016 10:13 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459203208">&nbsp;</a></div><pre>Notified CMS Glidein Factory team of this ticket.Dear Factory Ops team,

Can you please copy the multicore entries for UCSD from the ITB to the production factories?

Thanks,

Antonio.
Flushed field &#39;Notify Site&#39;

-- by Antonio Perez-Calero Yzquierdo at Mon Mar 28 22&#58;12&#58;34 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1459191249'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-28T18:54:09+00:00">Mar 28, 2016 06:54 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1459191249">&nbsp;</a></div><pre>I wanted to give the long weekend to let things shake out. Sure lets see
how this goes.

Terrence

On 3/24/2016 10&#58;34 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='28554#1458840872'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-24T17:34:32+00:00">Mar 24, 2016 05:34 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1458840872">&nbsp;</a></div><pre>Should we add the entry to production then? &#58;)

-- by Antonio Perez-Calero Yzquierdo at Thu Mar 24 17&#58;33&#58;59 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1458839710'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-24T17:15:10+00:00">Mar 24, 2016 05:15 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1458839710">&nbsp;</a></div><pre>Yup, it is configured to run multi-cpu too.

Terrence

On 3/24/2016 7&#58;35 AM, James Letts wrote&#58;
<font color='#7F7E6F'>&#62; That is a worker node, yes.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; James</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Mar 24, 2016, at 06&#58;37, Open Science Grid FootPrints</font>
<font color='#7F7E6F'>&#62; &#60;osg@.... &#60;mailto&#58;osg@....&#62;&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='28554#1458830170'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-24T14:36:10+00:00">Mar 24, 2016 02:36 PM UTC</time> by <b>letts@....</b><a class="anchor" name="1458830170">&nbsp;</a></div><pre>That is a worker node, yes.

James

<font color='#7F7E6F'>&#62; On Mar 24, 2016, at 06&#58;37, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='28554#1458826636'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-24T13:37:16+00:00">Mar 24, 2016 01:37 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1458826636">&nbsp;</a></div><pre>Hi, some test jobs just finished, shortly after submitting them, example&#58;

[aperezca@vocms055 aperezca]$ cat out/sleep.out.242.9
I slept for 300 seconds on&#58;
cabinet-0-0-26.t2.ucsd.edu
Thu Mar 24 06&#58;34&#58;10 PDT 2016

is that not a WN?

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Thu Mar 24 13&#58;36&#58;39 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1458826332'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-24T13:32:12+00:00">Mar 24, 2016 01:32 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1458826332">&nbsp;</a></div><pre>Hi Terrence,

I even learned yesterday that the factory can simple send us 8 core
pilots from now on. This reduces the need for site de fragmentation and
makes the RAL configuration pretty much unnecessary.

-Of course! This is what we are trying to setup here. And yes, if the site is just going to be running multicore, then there is no need for defrag. That&#39;s only needed if the site has to support a variety of requests at the same time.

-With respect to the configuration of RAL, that is not an ATLAS example, but precisely the example of a site supporting a variety of requests from a variety of VOs, including CMS. That should provide guidelines for the hardest situation. We have not even discussed what the situation for UCSD is in terms of mix of requests.

In summary, I think we are over-complicating the situation&#58; the pilot factory entries for a condor site should be straight forward to configure; in fact we do have that already for UCSD and I sent jobs and run. Why don&#39;t we just try to plug it to the prod factories? Are the endpoints you provided not connected to the resources?

Cheers,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Thu Mar 24 13&#58;31&#58;38 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1458765729'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-23T20:42:09+00:00">Mar 23, 2016 08:42 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1458765729">&nbsp;</a></div><pre>Unfortunately the RAL document was a bit of a trap. It kind of took me
down a rabbit hole for a daemon configuration that is not strictly
necessary at a CMS T2.

Add to that some out of date documentation using older condor versions
flying around and things get a bit confusing.

I even learned yesterday that the factory can simple send us 8 core
pilots from now on. This reduces the need for site de fragmentation and
makes the RAL configuration pretty much unnecessary.

CMS does not need to provide a drop in config for sites, that would
ignore how different the sites are and their specific requirements.
However CMS could ask for configurations of CMS sites as examples and
not just link to an Atlas example.

Yes we should ask FNAL for CMS advice. I may even be able to post a
shortened example of how we approached this here at UCSD once I make
sure it works to my satisfaction.

Terrence

On 3/22/2016 11&#58;22 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='28554#1458670975'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-22T18:22:55+00:00">Mar 22, 2016 06:22 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1458670975">&nbsp;</a></div><pre>Hi Terrence,

Like I said, it is not CMS who should provide full configs as it is the site&#39;s choice/responsibility how to configure their batch system. However, there&#39;s the RAL setup link, and we could ask them for further advice if needed. Also, FNAL has been running condor with partitionable slots for long time as well, so we can also ask them. And finally here is some more recent documentation on the different defrag daemon parameters, from the tests Farrukh has been doing for the T0&#58;

<a href='https&#58;//indico.cern.ch/event/509869/contribution/0/attachments/1245416/1833866/HTCondorDefragT0_SI_20160317.pdf' target='_blank' rel='nofollow'>https&#58;//indico.cern.ch/event/509869/contribution/0/attachments/1245416/1833866/HTCondorDefragT0_SI_20160317.pdf</a>

I hope that helps.

Cheers,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Tue Mar 22 18&#58;21&#58;52 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1458586824'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-21T19:00:24+00:00">Mar 21, 2016 07:00 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1458586824">&nbsp;</a></div><pre>Actually there is clearly something not working. The Defrag daemon keeps
trying to defrag nodes that will never run jobs, or should not.

Has no one put together some front to back multi-core documentation,
that takes advantage of this defrag daemon feature in condor?

Job Router
Condor Central Manager configuration
Worker node configuration

Terrence

On 3/21/2016 11&#58;00 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='28554#1458583218'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-21T18:00:18+00:00">Mar 21, 2016 06:00 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1458583218">&nbsp;</a></div><pre>Do you know where they ran?

Terrence

On 3/21/2016 6&#58;26 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='28554#1458566777'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-21T13:26:17+00:00">Mar 21, 2016 01:26 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1458566777">&nbsp;</a></div><pre>Hi guys,

I just sent some test jobs to UCSD and they run with no problem and in short time. I think we should try the new entries in the prod factories, see how they run, don&#39;t you think?

Thanks,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Mon Mar 21 13&#58;25&#58;51 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1458287193'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-18T07:46:33+00:00">Mar 18, 2016 07:46 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1458287193">&nbsp;</a></div><pre>Thanks for your tests Marty. Should we try to include the entries in prod and see what results we get?

For Terrence, are you configuring the nodes as partitionable slots? do you have defragmentation enabled?

I think we can just plug the test entry at least in one of the prod factories and see how it goes, and improve and expand from that.

Thanks,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Fri Mar 18 07&#58;42&#58;41 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1458152467'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-16T18:21:07+00:00">Mar 16, 2016 06:21 PM UTC</time><a class="anchor" name="1458152467">&nbsp;</a></div><pre>Terrence,

I was able to confirm my test jobs ran on a multicore glidein submitted to the CMSHTPC_T2_US_UCSD_gw6 test entry. Have you worked out all the details on your end? Should we proceed and create additional entries for the other HTCondor-CEs?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='28554#1458031365'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-15T08:42:45+00:00">Mar 15, 2016 08:42 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1458031365">&nbsp;</a></div><pre>Hi guys,

Any good news yet?

Cheers,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Tue Mar 15 08&#58;42&#58;05 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1457488622'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-09T01:57:02+00:00">Mar 9, 2016 01:57 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1457488622">&nbsp;</a></div><pre>Thanks Terrence and Marty for the updates,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Wed Mar 09 01&#58;56&#58;03 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1457474812'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-08T22:06:52+00:00">Mar 8, 2016 10:06 PM UTC</time><a class="anchor" name="1457474812">&nbsp;</a></div><pre>Antonio,

We&#39;ve created a multicore entry for osg-gw-6.t2.ucsd.edu named CMSHTPC_T2_US_UCSD_gw6 on the GOC-ITB factory. Terrence and I are in communication with each other and working on testing the entry. We will report back once we&#39;ve got the configuration correct here at UCSD. We can proceed with the other entries then.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='28554#1457459409'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-08T17:50:09+00:00">Mar 8, 2016 05:50 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1457459409">&nbsp;</a></div><pre>I can guarantee it will not go at all. I was sending the information
requested, not to open the submission of said jobs.

Lets see if we can even get the configuration up on a node first.

On 3/8/2016 4&#58;39 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='28554#1457440779'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-08T12:39:39+00:00">Mar 8, 2016 12:39 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1457440779">&nbsp;</a></div><pre>Involve person(s) has been changed to letts@....;vassil.verguilov@....  .
Thanks, Terrence.

As a first step, let&#39;s configure test entries for each of the three available gatekeepers

osg-gw-2.t2.ucsd.edu
osg-gw-6.t2.ucsd.edu
osg-gw-7.t2.ucsd.edu

in the ITB factory (CERN for instance) so that we can start submitting 8-core glideins to UCSD and see how it goes.

Vassil could you please take care of that?

Thanks and cheers,

Antonio.
Changed problem type to&#58; CMS_Submission Infrastructure

-- by Antonio Perez-Calero Yzquierdo at Tue Mar 08 12&#58;38&#58;39 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1457406458'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-08T03:07:38+00:00">Mar 8, 2016 03:07 AM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1457406458">&nbsp;</a></div><pre>Hi Terrence,

Thank you for the update.

Vince</pre></div><div class='update_description'><i onclick="document.location='28554#1457134621'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-04T23:37:01+00:00">Mar 4, 2016 11:37 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1457134621">&nbsp;</a></div><pre>-Batch system and CE technologies
Condor and Condor

-Cores per node in your cluster
Depends, 16-48

-Memory per core in your cluster
Depends, 2 - 4GB

-Gatekeeper to be used for multicore pilot submission
osg-gw-2.t2.ucsd.edu, osg-gw-6.t2.ucsd.edu and osg-gw-7.t2.ucsd.edu,
eventually osg-gw-4.t2.ucsd.edu would be added</pre></div><div class='update_description'><i onclick="document.location='28554#1457128975'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-04T22:02:55+00:00">Mar 4, 2016 10:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1457128975">&nbsp;</a></div><pre>Hi Terrence,

What is the info that you find missing? What are your concerns?

Also, could you please provide the info first requested on this ticket?

Thanks,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Fri Mar 04 22&#58;02&#58;17 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1457119419'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-04T19:23:39+00:00">Mar 4, 2016 07:23 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1457119419">&nbsp;</a></div><pre>Has there been any better documentation produced on this yet? The RAL stuff is pretty, well, RAL. The other links do not go anywhere.</pre></div><div class='update_description'><i onclick="document.location='28554#1457118049'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-04T19:00:49+00:00">Mar 4, 2016 07:00 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1457118049">&nbsp;</a></div><pre>Thanks, Marty,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Fri Mar 04 19&#58;00&#58;31 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1457117845'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-04T18:57:25+00:00">Mar 4, 2016 06:57 PM UTC</time><a class="anchor" name="1457117845">&nbsp;</a></div><pre>Antonio,

After speaking with Edgar yesterday, I don&#39;t think we&#39;re quite ready for multicore submission at UCSD yet. But I&#39;ll let Terrance comment on what his timeline for multicore support looks like.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='28554#1457117568'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-04T18:52:48+00:00">Mar 4, 2016 06:52 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1457117568">&nbsp;</a></div><pre>Hello,

Any updates on this? We should setup a test entry in a ITB factory with the parameters you provide, then submit few test jobs before moving it to production.

Thanks,

Antonio.

-- by Antonio Perez-Calero Yzquierdo at Fri Mar 04 18&#58;52&#58;09 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1456955522'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-02T21:52:02+00:00">Mar 2, 2016 09:52 PM UTC</time><a class="anchor" name="1456955522">&nbsp;</a></div><pre>Terrance,

Are we ready for this? If so, I can make the necessary changes on to the factory entry configs.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='28554#1456955387'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-02T21:49:47+00:00">Mar 2, 2016 09:49 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1456955387">&nbsp;</a></div><pre>Has anyone at UCSD had an opportunity to review this request?  If I may assist please let me know.

Thank you,</pre></div><div class='update_description'><i onclick="document.location='28554#1456152604'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-22T14:50:04+00:00">Feb 22, 2016 02:50 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1456152604">&nbsp;</a></div><pre>Ticket has been tagged &#34;VO specific&#34;.

-- by Antonio Perez-Calero Yzquierdo at Fri Feb 19 21&#58;39&#58;11 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a></pre></div><div class='update_description'><i onclick="document.location='28554#1455917843'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-19T21:37:23+00:00">Feb 19, 2016 09:37 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1455917843">&nbsp;</a></div><pre>Dear UCSD site admins,

As you may know, CMS requires the deployment of multicore CPU resources at their supporting T2 sites for the upcoming Spring and Summer MC production campaigns. For that, CMS will switch to submitting multi-core pilots to your site, instead of the current single-core.

You can find more information about the project at&#58;
<a href='https&#58;//twiki.cern.ch/twiki/bin/view/CMSPublic/CMSMulticoreSchedulingProject' target='_blank' rel='nofollow'>https&#58;//twiki.cern.ch/twiki/bin/view/CMSPublic/CMSMulticoreSchedulingProject</a>

with specific details to the deployment at T2s at&#58;
<a href='https&#58;//twiki.cern.ch/twiki/bin/view/CMSPublic/MulticoreDeploymentToT2s' target='_blank' rel='nofollow'>https&#58;//twiki.cern.ch/twiki/bin/view/CMSPublic/MulticoreDeploymentToT2s</a>

The proposed plan is to first setup a test multicore entry for your site in the testbed (ITB) glideinWMS pilot factories, submitting a few pilots to verify that the request is correctly passed to the local CE and batch systems. For that, we need that you provide the following information&#58;

-Batch system and CE technologies

-Cores per node in your cluster

-Memory per core in your cluster

-Gatekeeper to be used for multicore pilot submission

Thank you,

Antonio,
CMS Submission Infrastructure team.

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=119639</a>

[Ticket History]
Subject&#58; Moving T2_US_UCSD to multicore
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-site-support-team@....
-- by Antonio Perez-Calero Yzquierdo at Fri Feb 19 21&#58;36&#58;19 UTC 2016</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F28554">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 28554});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
