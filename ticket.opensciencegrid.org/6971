<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[6971] dCache - Problem with pnfs register command</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=6971" method="post">
<div class="page-header">
    <h3><span class="muted">6971</span> / dCache - Problem with pnfs register command</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">neha sharma</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-02-24</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Tanya Levshina <span class="muted"> / OSG Storage Team</span></div><div class="assignee" style="width: 60%">Neha Sharma <span class="muted"> / OSG Storage Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=6971", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/6971?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/6971?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20dCache%20-%20Problem%20with%20pnfs%20register%20command%20ISSUE%3D6971%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='6971#1266606601'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-02-19T19:10:01+00:00">Feb 19, 2010 07:10 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1266606601">&nbsp;</a></div><pre>This is being tracked in the developer tickets. Closing the OSG ticket.</pre></div><div class='update_description'><i onclick="document.location='6971#1266004265'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-02-12T19:51:05+00:00">Feb 12, 2010 07:51 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1266004265">&nbsp;</a></div><pre>Neha,

Can we close this? Should this be tracked in the Storage queue of Footprints.

Rob</pre></div><div class='update_description'><i onclick="document.location='6971#1260503994'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-11T03:59:54+00:00">Dec 11, 2009 03:59 AM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1260503994">&nbsp;</a></div><pre>hi rob

this ticket reuslted in 2 developer tickets in desy, out of which 1 has been resolved but other one is still open
-neha</pre></div><div class='update_description'><i onclick="document.location='6971#1260375581'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-09T16:19:41+00:00">Dec 9, 2009 04:19 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1260375581">&nbsp;</a></div><pre>Neha,

Has there been any movement here? I&#39;m looking back at extremely old tickets and trying to get updates, please let me know.

Thanks,
Rob</pre></div><div class='update_description'><i onclick="document.location='6971#1250717143'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-08-19T21:25:43+00:00">Aug 19, 2009 09:25 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1250717143">&nbsp;</a></div><pre>I spoke to Paul about this ticket 4555

He states that this is low priority too. and created two trac bugs to track the corresponding
development work and placed the bug in suspected state.

He doubts anyone will look at this before October (at the earliest).

Regards</pre></div><div class='update_description'><i onclick="document.location='6971#1244649569'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-06-10T15:59:29+00:00">Jun 10, 2009 03:59 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1244649569">&nbsp;</a></div><pre>&#39;pnfs register&#39; command is not a normal operation and a result of admins to
fix dCache bugs.

I understand that, but it still seems wrong that using this command
generates so many Postgres errors.  The log is filling up with
literally hundreds of thousands of messages like this&#58;

WARNING&#58;  nonstandard use of &#92;&#92; in a string literal at character 99
HINT&#58;  Use the escape string syntax for backslashes, e.g., E&#39;&#92;&#92;&#39;.
ERROR&#58;  duplicate key value violates unique constraint &#34;cacheinfo_pnfsid_key&#34;

This is quite ugly, I think these errors should be cleaned up.
Is it impossible to fix the &#92;&#92;&#39;s?

More important -- is cacheinfo_pnfsid_key supposed to be unique key or
not?  I&#39;ve found repeated values in the database.   If as you say

the schema of companion database is single entry per pnfsid+pool
pair.

then it seems incorrect to have a constraint that cacheinfo_pnfsid_key
be unique.

To avoid it you may use
&#39;add file cache location &#60;pnfsid&#62; &#60;pool name&#62;&#39; in PnfsManager.

I have to do this for thousands of files, I&#39;m not going to do that
through the admin interface.  It&#39;s easier to just avoid the Java
layer and update the &#39;companion&#39; DB directly.

We are of course prefer to fix pools accounting. Could you provide more
information on how often companion information does not match pools data?
is there any correlation between transfers (protocol) and mismatch?

I&#39;m not sure how it got out of sync, but below are some numbers.
<div id='show_884375011' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_884375011'>The first column is the number of files in the pool (according to
&#39;ls&#39;), and the second column is the number of rows in the &#39;companion&#39;
db for that pool.  As you can see there are more files than pools, in
some cases by a large amount (332189 vs 71411).

Final question&#58;  if a file is not listed in companion DB, isn&#39;t there
supposed to be a &#39;broadcast&#39; to the pools to see if anybody has it?
The behaviour we&#39;re seeing is that if a file is not in companion, then
it is totally inaccessible - making this a bit non-resilient.  Other
than admin action (&#39;pnfs register&#39; or &#39;add file location&#39;), what are
the built-in mechanisms in dCache to keep the companion DB up-to-date?

Thanks,

- Charles

files  rows   pool
13212  717    uct2-c001_1
13031  770    uct2-c002_1
9139   8602   uct2-c003_1
9497   9072   uct2-c004_1
11881  11212  uct2-c005_1
13011  12937  uct2-c006_1
12376  11954  uct2-c007_1
10258  9885   uct2-c008_1
13662  13267  uct2-c009_1
13603  13275  uct2-c010_1
63878  61415  uct2-c011_1
61923  61328  uct2-c012_1
62115  61901  uct2-c013_1
63825  61509  uct2-c014_1
105104 101323 uct2-c015_1
162785 99941  uct2-c016_1
58706  56641  uct2-c017_1
68921  66849  uct2-c018_1
6288   6190   uct2-c019_1
6460   6363   uct2-c020_1
5849   5759   uct2-c021_1
6984   6880   uct2-c022_1
0      0      uct2-c023_1
16562  4187   uct2-c024_1
15521  3264   uct2-c025_1
5889   3512   uct2-c026_1
5736   3348   uct2-c027_1
10165  6506   uct2-c028_1
11986  8178   uct2-c029_1
25185  4678   uct2-c030_1
68429  5640   uct2-c031_1
71766  5572   uct2-c032_1
32768  4147   uct2-c033_1
48500  47800  uct2-c034_1
1811   1821   uct2-c034_2
176628 176344 uct2-s1_1
177616 177414 uct2-s1_2
332189 71411  uct2-s1_3
333918 73601  uct2-s1_4
78584  78577  uct2-s1_5
76181  76175  uct2-s1_6
119015 118895 uct2-s2_1
119004 118888 uct2-s2_2
122054 121911 uct2-s2_3
105072 97373  uct2-s2_4
57215  57215  uct2-s2_5
55354  55351  uct2-s2_6
6605   6594   uct2-s3_1
7347   7340   uct2-s3_2
6900   6889   uct2-s3_3
7392   7385   uct2-s3_4
</div><script type='text/javascript'>
        $('#show_884375011').click(function() {
            $('#detail_884375011').slideDown("normal");
            $('#show_884375011').hide();
            $('#hide_884375011').show();
        });
        $('#hide_884375011').click(function() {
            $('#detail_884375011').slideUp();
            $('#hide_884375011').hide();
            $('#show_884375011').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='6971#1244132970'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-06-04T16:29:30+00:00">Jun 4, 2009 04:29 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1244132970">&nbsp;</a></div><pre>FYI, I see lots of these in the Chimera version (1.9.2.5) as well&#58;

postgres chimera 127.0.0.1(38347) 5388 2009-06-03 10&#58;48&#58;12 EDT ERROR&#58;  current transaction is aborted,
commands ignored until end of transaction block
postgres chimera 127.0.0.1(38347) 5388 2009-06-03 10&#58;48&#58;12 EDT STATEMENT&#58;  SELECT NULL AS
TABLE_CAT, n.nspname AS TABLE_SCHEM, c.relname AS TABLE_NAME,  CASE n.nspname LIKE &#39;pg&#92;&#92;_%&#39; OR
n.nspname = &#39;information_schema&#39;  WHEN true THEN CASE  WHEN n.nspname = &#39;pg_catalog&#39; OR n.nspname =
&#39;information_schema&#39; THEN CASE c.relkind   WHEN &#39;r&#39; THEN &#39;SYSTEM TABLE&#39; WHEN &#39;v&#39; THEN &#39;SYSTEM VIEW&#39;
WHEN &#39;i&#39; THEN &#39;SYSTEM INDEX&#39;   ELSE NULL   END  WHEN n.nspname = &#39;pg_toast&#39; THEN CASE c.relkind
WHEN &#39;r&#39; THEN &#39;SYSTEM TOAST TABLE&#39;   WHEN &#39;i&#39; THEN &#39;SYSTEM TOAST INDEX&#39;   ELSE NULL   END  ELSE
CASE c.relkind   WHEN &#39;r&#39; THEN &#39;TEMPORARY TABLE&#39;   WHEN &#39;i&#39; THEN &#39;TEMPORARY INDEX&#39;   ELSE NULL   END
END  WHEN false THEN CASE c.relkind  WHEN &#39;r&#39; THEN &#39;TABLE&#39;  WHEN &#39;i&#39; THEN &#39;INDEX&#39;  WHEN &#39;S&#39; THEN
&#39;SEQUENCE&#39;  WHEN &#39;v&#39; THEN &#39;VIEW&#39;  ELSE NULL  END  ELSE NULL  END  AS TABLE_TYPE, d.description AS
REMARKS FROM pg_catalog.pg_namespace n, pg_catalog.pg_class c  LEFT JOIN pg_catalog.pg_description d
ON (c.oid = d.objoid AND d.objsubid = 0)  LEFT JOIN pg_catalog.pg_class dc ON (d.classoid=dc.oid AND
dc.relname=&#39;pg_class&#39;)  LEFT JOIN pg_catalog.pg_namespace dn ON (dn.oid=dc.relnamespace AND
dn.nspname=&#39;pg_catalog&#39;)  WHERE c.relnamespace = n.oid  AND c.relname LIKE &#39;PROBABLYNOT&#39;  AND (false
OR ( c.relkind = &#39;r&#39; AND n.nspname NOT LIKE &#39;pg&#92;&#92;_%&#39; AND n.nspname &#60;&#62; &#39;information_schema&#39; ) )  ORDER BY
TABLE_TYPE,TABLE_SCHEM,TABLE_NAME
postgres chimera 127.0.0.1(38175) 5213 2009-06-03 10&#58;48&#58;12 EDT ERROR&#58;  duplicate key value violates
unique constraint &#34;t_locationinfo_pkey&#34;
postgres chimera 127.0.0.1(38175) 5213 2009-06-03 10&#58;48&#58;12 EDT STATEMENT&#58;  INSERT INTO
t_locationinfo VALUES($1,$2,$3,$4,$5,$6,$7)
postgres chimera 127.0.0.1(38175) 5213 2009-06-03 10&#58;48&#58;12 EDT WARNING&#58;  nonstandard use of &#92;&#92; in a
string literal at character 99
postgres chimera 127.0.0.1(38175) 5213 2009-06-03 10&#58;48&#58;12 EDT HINT&#58;  Use the escape string syntax for
backslashes, e.g., E&#39;&#92;&#92;&#39;.
postgres chimera 127.0.0.1(38175) 5213 2009-06-03 10&#58;48&#58;12 EDT WARNING&#58;  nonstandard use of &#92;&#92; in a
string literal at character 1247
postgres chimera 127.0.0.1(38175) 5213 2009-06-03 10&#58;48&#58;12 EDT HINT&#58;  Use the escape string syntax for
backslashes, e.g., E&#39;&#92;&#92;&#39;.

Shawn

-----Original Message-----
<div id='show_1564255087' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1564255087'>From&#58; owner-osg-storage@.... [mailto&#58;owner-osg-storage@....] On Behalf Of
Charles Waldman
Sent&#58; Wednesday, June 03, 2009 10&#58;44 AM
To&#58; osg-storage@....
Cc&#58; mwt2-core-l@....
Subject&#58; problem with &#39;pnfs register&#39;

Running &#39;pnfs register&#39; on dCache 1.9.2.5 results in the following
errors in the Posgres log&#58;

WARNING&#58;  nonstandard use of &#92;&#92; in a string literal at character 99
HINT&#58;  Use the escape string syntax for backslashes, e.g., E&#39;&#92;&#92;&#39;.
WARNING&#58;  nonstandard use of &#92;&#92; in a string literal at character 1247
HINT&#58;  Use the escape string syntax for backslashes, e.g., E&#39;&#92;&#92;&#39;.
ERROR&#58;  duplicate key value violates unique constraint &#34;cacheinfo_pnfsid_key&#34;
STATEMENT&#58;  INSERT INTO cacheinfo VALUES($1,$2,$3)

Seems like there are 2 problems here - the incorrect use of
backslashes, and an SQL &#39;INSERT&#39; which should probably be
an &#34;UPDATE&#34; (companion DB can have multiple pool locations
for a file, as a comma-separated list in &#39;cacheinfo&#39;).

- Charles
</div><script type='text/javascript'>
        $('#show_1564255087').click(function() {
            $('#detail_1564255087').slideDown("normal");
            $('#show_1564255087').hide();
            $('#hide_1564255087').show();
        });
        $('#hide_1564255087').click(function() {
            $('#detail_1564255087').slideUp();
            $('#hide_1564255087').hide();
            $('#show_1564255087').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F6971">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 6971});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
