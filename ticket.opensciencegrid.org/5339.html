<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[5339] Patch request for Globus 4.0x</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=5339" method="post">
<div class="page-header">
    <h3><span class="muted">5339</span> / Patch request for Globus 4.0x</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Steven Timm</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">followup</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-10-07</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/5339", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/5339?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/5339?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Patch%20request%20for%20Globus%204.0x%20ISSUE%3D5339%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='5339#1224698271'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-22T17:57:51+00:00">Oct 22, 2008 05:57 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1224698271">&nbsp;</a></div><pre>Neha,

Since this patch is being handled by the Globus group, and OSG will update via the
VDT when an update is ready, I&#39;m going to close this ticket.

Rob</pre></div><div class='update_description'><i onclick="document.location='5339#1222974552'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-02T19:09:12+00:00">Oct 2, 2008 07:09 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1222974552">&nbsp;</a></div><pre>You can track the update on <a href='http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=6355' target='_blank' rel='nofollow'>http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=6355</a>

-Neha
On Oct 2, 2008, at 2&#58;04 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5339#1222974255'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-02T19:04:15+00:00">Oct 2, 2008 07:04 PM UTC</time> by <b>echism</b><a class="anchor" name="1222974255">&nbsp;</a></div><pre>Neha,

Are there any updates on this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='5339#1222446250'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-26T16:24:10+00:00">Sep 26, 2008 04:24 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1222446250">&nbsp;</a></div><pre>No. No update. Rachana is occupied with other things.

-Neha
On Sep 24, 2008, at 7&#58;47 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5339#1222303638'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-25T00:47:18+00:00">Sep 25, 2008 12:47 AM UTC</time> by <b>echism</b><a class="anchor" name="1222303638">&nbsp;</a></div><pre>Are there any updates on this?</pre></div><div class='update_description'><i onclick="document.location='5339#1221588551'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-16T18:09:11+00:00">Sep 16, 2008 06:09 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1221588551">&nbsp;</a></div><pre>Hi Alain

Yes. You can track the status at <a href='http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=6355' target='_blank' rel='nofollow'>http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=6355</a>
At the moment, I have supplied Rachana with some debugger output and
am waiting for her response.

-Neha
On Sep 16, 2008, at 12&#58;36 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5339#1221586570'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-16T17:36:10+00:00">Sep 16, 2008 05:36 PM UTC</time> by <b>VDT</b><a class="anchor" name="1221586570">&nbsp;</a></div><pre>Neha wrote&#58;
<font color='#7F7E6F'>&#62; We are debugging this with help from Globus Team.</font>

Neha--

I was following this discussion on the Globus mailing list (perhaps it
was gt-user?), but I haven&#39;t seen anything lately. Are you debugging
it off-list? Is it making progress?

Thanks,
-alain

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='5339#1221504852'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-15T18:54:12+00:00">Sep 15, 2008 06:54 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1221504852">&nbsp;</a></div><pre>My confusion--I confused this with a different ticket where globus
has given us a patch for the web services container.  Neha&#39;s comment is
right, we are still debugging with globus team.

Steve Timm

On Mon, 15 Sep 2008, Steven Timm wrote&#58;

<font color='#7F7E6F'>&#62; We still have not had a chance to test the patch. Hope to do so later</font>
<font color='#7F7E6F'>&#62; this week.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Steve Timm</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Mon, 15 Sep 2008, Open Science Grid FootPrints wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5339#1221504494'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-15T18:48:14+00:00">Sep 15, 2008 06:48 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1221504494">&nbsp;</a></div><pre>We still have not had a chance to test the patch. Hope to do so later
this week.

Steve Timm

On Mon, 15 Sep 2008, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5339#1221504491'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-15T18:48:11+00:00">Sep 15, 2008 06:48 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1221504491">&nbsp;</a></div><pre>We are debugging this with help from Globus Team.

-Neha
On Sep 15, 2008, at 1&#58;44 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5339#1221504290'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-15T18:44:50+00:00">Sep 15, 2008 06:44 PM UTC</time> by <b>echism</b><a class="anchor" name="1221504290">&nbsp;</a></div><pre>Are there any updates on this issue?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='5339#1220845150'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-08T03:39:10+00:00">Sep 8, 2008 03:39 AM UTC</time> by <b>VDT</b><a class="anchor" name="1220845150">&nbsp;</a></div><pre>No, I think that Neha is still debugging the problem in SAZ. While I
think this patch is okay, it&#39;s not clear if it&#39;s sufficient. So we
haven&#39;t released it yet.

-alain

-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='5339#1220466718'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-03T18:31:58+00:00">Sep 3, 2008 06:31 PM UTC</time> by <b>echism</b><a class="anchor" name="1220466718">&nbsp;</a></div><pre>Alain,

Did that last VDT release resolve this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='5339#1219426239'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-22T17:30:39+00:00">Aug 22, 2008 05:30 PM UTC</time> by <b>echism</b><a class="anchor" name="1219426239">&nbsp;</a></div><pre>I am bumping out the next action date per Alain&#39;s response.</pre></div><div class='update_description'><i onclick="document.location='5339#1218820150'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-15T17:09:10+00:00">Aug 15, 2008 05:09 PM UTC</time> by <b>VDT</b><a class="anchor" name="1218820150">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Are there any updates on this? If this is being settled outside of the</font>
<font color='#7F7E6F'>&#62; ticket, please</font>
<font color='#7F7E6F'>&#62; either tell us the results or have us close this ticket.</font>

We&#39;ve patched a test version of Globus from the VDT, but it has not been
released because it&#39;s not clear if it fixes the problem for Neha, or if
she needs further patches. She is in direct communication with the
Globus team trying to find the source of the problem.

We don&#39;t have results, but I&#39;m still tracking progress on this, so I
want to keep the ticket open. That said, I expect it may be a while
before there are updates on this ticket.

-alain

-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='5339#1218755374'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-14T23:09:34+00:00">Aug 14, 2008 11:09 PM UTC</time> by <b>echism</b><a class="anchor" name="1218755374">&nbsp;</a></div><pre>Are there any updates on this? If this is being settled outside of the ticket, please
either tell us the results or have us close this ticket.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='5339#1218225788'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-08T20:03:08+00:00">Aug 8, 2008 08:03 PM UTC</time> by <b>VDT</b><a class="anchor" name="1218225788">&nbsp;</a></div><pre>One note&#58; since you&#39;re working with VDT 1.10.1 now, I&#39;m not going to
bother rebuilding for VDT 1.8.1, unless you still think you need it.

Thanks,
-alain

-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='5339#1218211928'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-08T16:12:08+00:00">Aug 8, 2008 04:12 PM UTC</time> by <b>VDT</b><a class="anchor" name="1218211928">&nbsp;</a></div><pre>On Aug 8, 2008, at 8&#58;56 AM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62; Steve, Neha, may I ask you to subscribe to csec-dev@.... via</font>
<font color='#7F7E6F'>&#62; majordomo and post the code+error message there?  That will get you</font>
<font color='#7F7E6F'>&#62; the GSI experts who can explain exactly what&#39;s going wrong given that</font>
<font color='#7F7E6F'>&#62; the depth 9-&#62;100 patch didn&#39;t fix it.</font>

I probably won&#39;t join that mailing list, so let me know what if I need
to make further patches.

-alain
s

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='5339#1218210669'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-08T15:51:09+00:00">Aug 8, 2008 03:51 PM UTC</time> by <b>Charles Bacon</b><a class="anchor" name="1218210669">&nbsp;</a></div><pre>Okay - from bug 4994, I see that the user who reported the original
bug says the limit on the java side is 20, not 9, so it is most likely
the C code that&#39;s the limit here.

Steve, Neha, may I ask you to subscribe to csec-dev@.... via
majordomo and post the code+error message there?  That will get you
the GSI experts who can explain exactly what&#39;s going wrong given that
the depth 9-&#62;100 patch didn&#39;t fix it.

Thanks,

Charles

On Aug 7, 2008, at 11&#58;45 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5339#1218170709'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-08T04:45:09+00:00">Aug 8, 2008 04:45 AM UTC</time> by <b>Charles Bacon</b><a class="anchor" name="1218170709">&nbsp;</a></div><pre>Dunno, I&#39;ll ask tomorrow.  What I do know is that the code that needs
to be upgraded is going to be on the side that is receiving the
credential that exceeds the depth limit.  The depth limit 9 is openssl
specific, so I do not think that cog-jglobus is going to be the
limiting factor.  But I think I should probably talk to Steve and Neha
tomorrow to get a better understanding of what their code is doing so
we can be sure of what pieces are involved and what their limits are.

-c

On Aug 7, 2008, at 11&#58;39 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5339#1218170349'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-08T04:39:09+00:00">Aug 8, 2008 04:39 AM UTC</time> by <b>VDT</b><a class="anchor" name="1218170349">&nbsp;</a></div><pre>On Aug 7, 2008, at 8&#58;52 PM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62; Our current cog-jglobus.jar dates from 2004 so we probably need to</font>
<font color='#7F7E6F'>&#62; update it.  We could grab the new one from the globus/lib that</font>
<font color='#7F7E6F'>&#62; ships with vdt 1.10.1.  but the question is, does that need</font>
<font color='#7F7E6F'>&#62; to be patched too?</font>

I have no clue. Charles?

-alain

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='5339#1218167289'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-08T03:48:09+00:00">Aug 8, 2008 03:48 AM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1218167289">&nbsp;</a></div><pre>Our current cog-jglobus.jar dates from 2004 so we probably need to
update it.  We could grab the new one from the globus/lib that
ships with vdt 1.10.1.  but the question is, does that need
to be patched too?

It appears that the java methods we are calling from that jar are

org.globus.gsi.GlobusCredential
org.globus.gsi.bc.X509NameHelper
org.globus.gsi.gssapi.GSSConstants

Steve

------------------------------------------------------------------
Steven C. Timm, Ph.D  (630) 840-8525
timm@....  <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~timm/
Fermilab Computing Division, Scientific Computing Facilities,
Grid Facilities Department, FermiGrid Services Group, Assistant Group Leader.

On Fri, 8 Aug 2008, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5339#1218163150'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-08T02:39:10+00:00">Aug 8, 2008 02:39 AM UTC</time> by <b>VDT</b><a class="anchor" name="1218163150">&nbsp;</a></div><pre>On Aug 7, 2008, at 5&#58;15 PM, osg@.... via RT wrote&#58;

<font color='#7F7E6F'>&#62; Alain - did you only apply the patch listed in mesage 000000, or did</font>
<font color='#7F7E6F'>&#62; you also apply the two other patches that go with it (from the whole</font>
<font color='#7F7E6F'>&#62; thread which you can see at <a href='http&#58;//www.globus.org/mail_archive/csec-commit/2007/06/threads.html' target='_blank' rel='nofollow'>http&#58;//www.globus.org/mail_archive/csec-commit/2007/06/threads.html</a>)</font>

I applied patches to three files, not just one. You can see the full
patch here&#58;

<a href='http&#58;//vdt.cs.wisc.edu/patches/1.10.1/124__proxy_chain_length.diff' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/patches/1.10.1/124__proxy_chain_length.diff</a>

It patched&#58;

globus_gsi_callback_constants.h
globus_gsi_cred_handle.c
globus_i_gsi_gss_utils.c

I&#39;m pretty sure that&#39;s the full set of patches, right?

-alain

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='5339#1218163149'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-08T02:39:09+00:00">Aug 8, 2008 02:39 AM UTC</time> by <b>VDT</b><a class="anchor" name="1218163149">&nbsp;</a></div><pre>On Aug 7, 2008, at 6&#58;32 PM, timm@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62;&#62; 1) Do all of the components involved have access to the new library?</font>
<font color='#7F7E6F'>&#62;&#62; One problem we had with the EGEE testing was that they upgraded one</font>
<font color='#7F7E6F'>&#62;&#62; end (GRAM) and not the other (the client). Is that a possibility?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; In this case, we have effectively upgraded the client, which</font>
<font color='#7F7E6F'>&#62; uses the globus C libraries, but not the server, which is</font>
<font color='#7F7E6F'>&#62; using a fairly old Java-based globus library.  We should look and</font>
<font color='#7F7E6F'>&#62; see if an updated Globus jar is available for the server.</font>
<font color='#7F7E6F'>&#62;&#62;</font>

I have absolutely no idea if the same problem applies to the server or
not, and if it needs patching. Charles, do you know about it?

-alain

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='5339#1218159191'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-08T01:33:11+00:00">Aug 8, 2008 01:33 AM UTC</time> by <b>VDT</b><a class="anchor" name="1218159191">&nbsp;</a></div><pre>------------------------------------------------------------------
Steven C. Timm, Ph.D  (630) 840-8525
timm@....  <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~timm/
Fermilab Computing Division, Scientific Computing Facilities,
Grid Facilities Department, FermiGrid Services Group, Assistant Group Leader.

On Thu, 7 Aug 2008, Alain Roy via RT wrote&#58;

<font color='#7F7E6F'>&#62; On Aug 7, 2008, at 2&#58;50 PM, osg@.... via RT wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; I upgraded my test machine to 1.10.1 and after applying the patch, we</font>
<font color='#7F7E6F'>&#62;&#62; still see the same problem. After 5th proxy delegation, the clients</font>
<font color='#7F7E6F'>&#62;&#62; hangs on handshake (same globus function as before)</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Can you mention some detail on what the patch exactly did and why you</font>
<font color='#7F7E6F'>&#62;&#62; think it should have solved the problem?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; As I said before, I didn&#39;t think it should solve the problem, but you</font>
<font color='#7F7E6F'>&#62; and Steve asked for this patch to try it, because you thought it would</font>
<font color='#7F7E6F'>&#62; solve it. &#58;)</font>

I don&#39;t know enough of the details to know if it is the same patch
that Charles Bacon was recommending or not. We&#39;ll check the url and see.

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Details on the patch can be found at&#58;</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=4994' target='_blank' rel='nofollow'>http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=4994</a></font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//www.globus.org/mail_archive/csec-commit/2007/06/msg00000.html' target='_blank' rel='nofollow'>http&#58;//www.globus.org/mail_archive/csec-commit/2007/06/msg00000.html</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The result of the patch should be that having a long certificate chain</font>
<font color='#7F7E6F'>&#62; should no longer cause an error, but should work. Given that you were</font>
<font color='#7F7E6F'>&#62; seeing a hang and not an error, it&#39;s not clear to me that this is the</font>
<font color='#7F7E6F'>&#62; complete answer for you. However, I do believe the patch does what it</font>
<font color='#7F7E6F'>&#62; says, because EGEE has tested the patch successfully, and long</font>
<font color='#7F7E6F'>&#62; certificate chains no longer cause errors. So I suspect there is more</font>
<font color='#7F7E6F'>&#62; to your problem.</font>
<div id='show_923165275' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_923165275'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Things that come to mind&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 1) Do all of the components involved have access to the new library?</font>
<font color='#7F7E6F'>&#62; One problem we had with the EGEE testing was that they upgraded one</font>
<font color='#7F7E6F'>&#62; end (GRAM) and not the other (the client). Is that a possibility?</font>

In this case, we have effectively upgraded the client, which
uses the globus C libraries, but not the server, which is
using a fairly old Java-based globus library.  We should look and
see if an updated Globus jar is available for the server.
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 2) You&#39;re sure you&#39;re dynamically linking against the libraries, not</font>
<font color='#7F7E6F'>&#62; statically linking?</font>

Yes.  ldd doesn&#39;t lie.  (but we are investigating switching
to a static linking for other reasons.)
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 3) You restarted any services that are running so that they pick up</font>
<font color='#7F7E6F'>&#62; the new libraries?</font>
<font color='#7F7E6F'>&#62;</font>
See above.

<font color='#7F7E6F'>&#62; I&#39;m not an expert in the internals of GSI, so if this patch doesn&#39;t</font>
<font color='#7F7E6F'>&#62; solve your problem, we probably need to do two things&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; a) You need to double-check that there no errors in your relevant code.</font>
<font color='#7F7E6F'>&#62; b) We need to get help from a GSI expert in Globus.</font>

Charles Bacon was already copied--he can point us to who the gsi
expert is, if it&#39;s not him.

Steve Timm

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -alain</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; --</font>
<font color='#7F7E6F'>&#62; View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;</font>
<font color='#7F7E6F'>&#62; VDT Support, vdt-support@....</font>
<font color='#7F7E6F'>&#62;</font>

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....
</div><script type='text/javascript'>
        $('#show_923165275').click(function() {
            $('#detail_923165275').slideDown("normal");
            $('#show_923165275').hide();
            $('#hide_923165275').show();
        });
        $('#hide_923165275').click(function() {
            $('#detail_923165275').slideUp();
            $('#hide_923165275').hide();
            $('#show_923165275').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5339#1218159189'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-08T01:33:09+00:00">Aug 8, 2008 01:33 AM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1218159189">&nbsp;</a></div><pre>------------------------------------------------------------------
Steven C. Timm, Ph.D  (630) 840-8525
timm@....  <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~timm/
Fermilab Computing Division, Scientific Computing Facilities,
Grid Facilities Department, FermiGrid Services Group, Assistant Group Leader.

On Thu, 7 Aug 2008, Alain Roy via RT wrote&#58;

<font color='#7F7E6F'>&#62; On Aug 7, 2008, at 2&#58;50 PM, osg@.... via RT wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; I upgraded my test machine to 1.10.1 and after applying the patch, we</font>
<font color='#7F7E6F'>&#62;&#62; still see the same problem. After 5th proxy delegation, the clients</font>
<font color='#7F7E6F'>&#62;&#62; hangs on handshake (same globus function as before)</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Can you mention some detail on what the patch exactly did and why you</font>
<font color='#7F7E6F'>&#62;&#62; think it should have solved the problem?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; As I said before, I didn&#39;t think it should solve the problem, but you</font>
<font color='#7F7E6F'>&#62; and Steve asked for this patch to try it, because you thought it would</font>
<font color='#7F7E6F'>&#62; solve it. &#58;)</font>

I don&#39;t know enough of the details to know if it is the same patch
that Charles Bacon was recommending or not. We&#39;ll check the url and see.

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Details on the patch can be found at&#58;</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=4994' target='_blank' rel='nofollow'>http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=4994</a></font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//www.globus.org/mail_archive/csec-commit/2007/06/msg00000.html' target='_blank' rel='nofollow'>http&#58;//www.globus.org/mail_archive/csec-commit/2007/06/msg00000.html</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The result of the patch should be that having a long certificate chain</font>
<font color='#7F7E6F'>&#62; should no longer cause an error, but should work. Given that you were</font>
<font color='#7F7E6F'>&#62; seeing a hang and not an error, it&#39;s not clear to me that this is the</font>
<font color='#7F7E6F'>&#62; complete answer for you. However, I do believe the patch does what it</font>
<font color='#7F7E6F'>&#62; says, because EGEE has tested the patch successfully, and long</font>
<font color='#7F7E6F'>&#62; certificate chains no longer cause errors. So I suspect there is more</font>
<font color='#7F7E6F'>&#62; to your problem.</font>
<div id='show_1937116501' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1937116501'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Things that come to mind&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 1) Do all of the components involved have access to the new library?</font>
<font color='#7F7E6F'>&#62; One problem we had with the EGEE testing was that they upgraded one</font>
<font color='#7F7E6F'>&#62; end (GRAM) and not the other (the client). Is that a possibility?</font>

In this case, we have effectively upgraded the client, which
uses the globus C libraries, but not the server, which is
using a fairly old Java-based globus library.  We should look and
see if an updated Globus jar is available for the server.
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 2) You&#39;re sure you&#39;re dynamically linking against the libraries, not</font>
<font color='#7F7E6F'>&#62; statically linking?</font>

Yes.  ldd doesn&#39;t lie.  (but we are investigating switching
to a static linking for other reasons.)
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 3) You restarted any services that are running so that they pick up</font>
<font color='#7F7E6F'>&#62; the new libraries?</font>
<font color='#7F7E6F'>&#62;</font>
See above.

<font color='#7F7E6F'>&#62; I&#39;m not an expert in the internals of GSI, so if this patch doesn&#39;t</font>
<font color='#7F7E6F'>&#62; solve your problem, we probably need to do two things&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; a) You need to double-check that there no errors in your relevant code.</font>
<font color='#7F7E6F'>&#62; b) We need to get help from a GSI expert in Globus.</font>

Charles Bacon was already copied--he can point us to who the gsi
expert is, if it&#39;s not him.

Steve Timm

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -alain</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; --</font>
<font color='#7F7E6F'>&#62; View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;</font>
<font color='#7F7E6F'>&#62; VDT Support, vdt-support@....</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_1937116501').click(function() {
            $('#detail_1937116501').slideDown("normal");
            $('#show_1937116501').hide();
            $('#hide_1937116501').show();
        });
        $('#hide_1937116501').click(function() {
            $('#detail_1937116501').slideUp();
            $('#hide_1937116501').hide();
            $('#show_1937116501').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5339#1218154329'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-08T00:12:09+00:00">Aug 8, 2008 12:12 AM UTC</time> by <b>Charles Bacon</b><a class="anchor" name="1218154329">&nbsp;</a></div><pre>Alain - did you only apply the patch listed in mesage 000000, or did
you also apply the two other patches that go with it (from the whole
thread which you can see at <a href='http&#58;//www.globus.org/mail_archive/csec-commit/2007/06/threads.html' target='_blank' rel='nofollow'>http&#58;//www.globus.org/mail_archive/csec-commit/2007/06/threads.html</a>)

By itself, that one patch does nothing.  You need the other two
patches to make it have an effect.

Charles

On Aug 7, 2008, at 5&#58;21 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5339#1218147668'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-07T22:21:08+00:00">Aug 7, 2008 10:21 PM UTC</time> by <b>VDT</b><a class="anchor" name="1218147668">&nbsp;</a></div><pre>On Aug 7, 2008, at 2&#58;50 PM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62; I upgraded my test machine to 1.10.1 and after applying the patch, we</font>
<font color='#7F7E6F'>&#62; still see the same problem. After 5th proxy delegation, the clients</font>
<font color='#7F7E6F'>&#62; hangs on handshake (same globus function as before)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Can you mention some detail on what the patch exactly did and why you</font>
<font color='#7F7E6F'>&#62; think it should have solved the problem?</font>

As I said before, I didn&#39;t think it should solve the problem, but you
and Steve asked for this patch to try it, because you thought it would
solve it. &#58;)

Details on the patch can be found at&#58;
<a href='http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=4994' target='_blank' rel='nofollow'>http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=4994</a>
<a href='http&#58;//www.globus.org/mail_archive/csec-commit/2007/06/msg00000.html' target='_blank' rel='nofollow'>http&#58;//www.globus.org/mail_archive/csec-commit/2007/06/msg00000.html</a>

The result of the patch should be that having a long certificate chain
should no longer cause an error, but should work. Given that you were
seeing a hang and not an error, it&#39;s not clear to me that this is the
complete answer for you. However, I do believe the patch does what it
says, because EGEE has tested the patch successfully, and long
certificate chains no longer cause errors. So I suspect there is more
to your problem.

Things that come to mind&#58;

1) Do all of the components involved have access to the new library?
One problem we had with the EGEE testing was that they upgraded one
end (GRAM) and not the other (the client). Is that a possibility?

2) You&#39;re sure you&#39;re dynamically linking against the libraries, not
statically linking?

3) You restarted any services that are running so that they pick up
the new libraries?
<div id='show_964069741' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_964069741'>
I&#39;m not an expert in the internals of GSI, so if this patch doesn&#39;t
solve your problem, we probably need to do two things&#58;

a) You need to double-check that there no errors in your relevant code.
b) We need to get help from a GSI expert in Globus.

-alain

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....
</div><script type='text/javascript'>
        $('#show_964069741').click(function() {
            $('#detail_964069741').slideDown("normal");
            $('#show_964069741').hide();
            $('#hide_964069741').show();
        });
        $('#hide_964069741').click(function() {
            $('#detail_964069741').slideUp();
            $('#hide_964069741').hide();
            $('#show_964069741').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5339#1218145329'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-07T21:42:09+00:00">Aug 7, 2008 09:42 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1218145329">&nbsp;</a></div><pre>Alain

I upgraded my test machine to 1.10.1 and after applying the patch, we
still see the same problem. After 5th proxy delegation, the clients
hangs on handshake (same globus function as before)

Can you mention some detail on what the patch exactly did and why you
think it should have solved the problem?

Thanks
-Neha
On Aug 7, 2008, at 1&#58;54 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5339#1218130030'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-07T17:27:10+00:00">Aug 7, 2008 05:27 PM UTC</time> by <b>VDT</b><a class="anchor" name="1218130030">&nbsp;</a></div><pre>Neha contacted me via instant mesaging. To summarize&#58;

1) By flavor names, I meant Globus flavors (like gcc32dbg) not VDT
versions. Those libraries never have VDT versions in them.

2) The libraries were built for VDT 1.10.1. Due to changes in how we
link against OpenSSL, it&#39;s not surprising that they segfaulted when
she put them into a VDT 1.8.1 installation.

3) I&#39;ll try to get a rebuild of VDT 1.8.1 done soon. I&#39;m quite busy at
the moment, so it may be a few days before it&#39;s ready.

-alain

-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='5339#1218122829'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-07T15:27:09+00:00">Aug 7, 2008 03:27 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1218122829">&nbsp;</a></div><pre>Alain

This tarball does not have any flavor specific names..the libraries
have generic names
Also, are these for VDT 1.10.1 or VDT 1.8.1?

-Neha
On Aug 6, 2008, at 2&#58;21 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5339#1218122109'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-07T15:15:09+00:00">Aug 7, 2008 03:15 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1218122109">&nbsp;</a></div><pre>Alain

I copied the *so* libraries and compiled the code again..now I get seg
faults when trying to do a voms-proxy-init

kx509
kxlist -p
[neha@fgtest6 saz]$ voms-proxy-init -noregen -voms fermilab&#58;/fermilab
Cannot find file or dir&#58; /home/condor/execute/dir_11128/userdir/glite/
etc/vomses
Your identity&#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/
CN=UID&#58;neha
Cannot find file or dir&#58; /home/condor/execute/dir_11128/userdir/glite/
etc/vomses
Contacting  voms.fnal.gov&#58;15001 [/DC=org/DC=doegrids/OU=Services/
CN=http/voms.fnal.gov] &#34;fermilab&#34;Segmentation fault
[neha@fgtest6 saz]$
[neha@fgtest6 saz]$
[neha@fgtest6 saz]$
[neha@fgtest6 saz]$ voms-proxy-info -all
WARNING&#58; Unable to verify signature! Server certificate possibly not
installed.
Error&#58; VOMS extension not found!
subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/
CN=UID&#58;neha
issuer    &#58; /DC=gov/DC=fnal/O=Fermilab/OU=Certificate Authorities/
CN=Kerberized CA
identity  &#58; /DC=gov/DC=fnal/O=Fermilab/OU=Certificate Authorities/
CN=Kerberized CA
type      &#58; unknown
strength  &#58; 512 bits
path      &#58; /tmp/x509up_u60158
timeleft  &#58; 167&#58;49&#58;16
[neha@fgtest6 saz]$

<div id='show_1053891428' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1053891428'>-Neha
On Aug 6, 2008, at 3&#58;30 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1053891428').click(function() {
            $('#detail_1053891428').slideDown("normal");
            $('#show_1053891428').hide();
            $('#hide_1053891428').show();
        });
        $('#hide_1053891428').click(function() {
            $('#detail_1053891428').slideUp();
            $('#hide_1053891428').hide();
            $('#show_1053891428').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5339#1218054609'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-06T20:30:09+00:00">Aug 6, 2008 08:30 PM UTC</time> by <b>VDT</b><a class="anchor" name="1218054609">&nbsp;</a></div><pre>Hi Alain--thanks.. yes we should test either this afternoon
or tomorrow.

Steve Timm

On Wed, 6 Aug 2008, Alain Roy via RT wrote&#58;

<font color='#7F7E6F'>&#62; OK, I did a build with the patch you requested. I&#39;m pretty sure I</font>
<font color='#7F7E6F'>&#62; selected the right set of libraries, and you can download them from</font>
<font color='#7F7E6F'>&#62; here&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//vdt.cs.wisc.edu/tmp/libraries-vdt-support-3710.tar.gz' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/tmp/libraries-vdt-support-3710.tar.gz</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The included libraries are libglobus_gsi_credential* and</font>
<font color='#7F7E6F'>&#62; libglobus_gssapi_gsi*. I included all of the flavors. I&#39;m guessing you</font>
<font color='#7F7E6F'>&#62; just need to drop in some of the shared libraries, and you&#39;re good to</font>
<font color='#7F7E6F'>&#62; go, unless you statically linked. In that case, you&#39;ll need to relink.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Please let me know if this patch helps or not. If it does, I would</font>
<font color='#7F7E6F'>&#62; like to release this update to Globus in the next week. Do you think</font>
<font color='#7F7E6F'>&#62; you can test before then?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; -alain</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -----------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; Alain Roy                         vdt-support@....</font>
<font color='#7F7E6F'>&#62; VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>

--
------------------------------------------------------------------
Steven C. Timm, Ph.D  (630) 840-8525
<div id='show_1787889560' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1787889560'>timm@....  <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~timm/
Fermilab Computing Division, Scientific Computing Facilities,
Grid Facilities Department, FermiGrid Services Group, Assistant Group Leader.

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....
</div><script type='text/javascript'>
        $('#show_1787889560').click(function() {
            $('#detail_1787889560').slideDown("normal");
            $('#show_1787889560').hide();
            $('#hide_1787889560').show();
        });
        $('#hide_1787889560').click(function() {
            $('#detail_1787889560').slideUp();
            $('#hide_1787889560').hide();
            $('#show_1787889560').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5339#1218051189'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-06T19:33:09+00:00">Aug 6, 2008 07:33 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1218051189">&nbsp;</a></div><pre>Yes, I should be able to test by then
Thanks Alain
-Neha
On Aug 6, 2008, at 2&#58;21 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5339#1218050649'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-06T19:24:09+00:00">Aug 6, 2008 07:24 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1218050649">&nbsp;</a></div><pre>Hi Alain--thanks.. yes we should test either this afternoon
or tomorrow.

Steve Timm

On Wed, 6 Aug 2008, Alain Roy via RT wrote&#58;

<font color='#7F7E6F'>&#62; OK, I did a build with the patch you requested. I&#39;m pretty sure I</font>
<font color='#7F7E6F'>&#62; selected the right set of libraries, and you can download them from</font>
<font color='#7F7E6F'>&#62; here&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//vdt.cs.wisc.edu/tmp/libraries-vdt-support-3710.tar.gz' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/tmp/libraries-vdt-support-3710.tar.gz</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The included libraries are libglobus_gsi_credential* and</font>
<font color='#7F7E6F'>&#62; libglobus_gssapi_gsi*. I included all of the flavors. I&#39;m guessing you</font>
<font color='#7F7E6F'>&#62; just need to drop in some of the shared libraries, and you&#39;re good to</font>
<font color='#7F7E6F'>&#62; go, unless you statically linked. In that case, you&#39;ll need to relink.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Please let me know if this patch helps or not. If it does, I would</font>
<font color='#7F7E6F'>&#62; like to release this update to Globus in the next week. Do you think</font>
<font color='#7F7E6F'>&#62; you can test before then?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; -alain</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -----------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; Alain Roy                         vdt-support@....</font>
<font color='#7F7E6F'>&#62; VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>

--
------------------------------------------------------------------
Steven C. Timm, Ph.D  (630) 840-8525
<div id='show_736384633' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_736384633'>timm@....  <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~timm/
Fermilab Computing Division, Scientific Computing Facilities,
Grid Facilities Department, FermiGrid Services Group, Assistant Group Leader.
</div><script type='text/javascript'>
        $('#show_736384633').click(function() {
            $('#detail_736384633').slideDown("normal");
            $('#show_736384633').hide();
            $('#hide_736384633').show();
        });
        $('#hide_736384633').click(function() {
            $('#detail_736384633').slideUp();
            $('#hide_736384633').hide();
            $('#show_736384633').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5339#1218050468'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-06T19:21:08+00:00">Aug 6, 2008 07:21 PM UTC</time> by <b>VDT</b><a class="anchor" name="1218050468">&nbsp;</a></div><pre>OK, I did a build with the patch you requested. I&#39;m pretty sure I
selected the right set of libraries, and you can download them from
here&#58;

<a href='http&#58;//vdt.cs.wisc.edu/tmp/libraries-vdt-support-3710.tar.gz' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/tmp/libraries-vdt-support-3710.tar.gz</a>

The included libraries are libglobus_gsi_credential* and
libglobus_gssapi_gsi*. I included all of the flavors. I&#39;m guessing you
just need to drop in some of the shared libraries, and you&#39;re good to
go, unless you statically linked. In that case, you&#39;ll need to relink.

Please let me know if this patch helps or not. If it does, I would
like to release this update to Globus in the next week. Do you think
you can test before then?

Thanks,
-alain

-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='5339#1217969648'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-05T20:54:08+00:00">Aug 5, 2008 08:54 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1217969648">&nbsp;</a></div><pre>Thanks Alain

[neha@fgtest6 saz]$ cat /etc/redhat-release
Scientific Linux Fermi LTS release 4.4 (Wilson)
[neha@fgtest6 saz]$ uname -a
Linux fgtest6.fnal.gov 2.6.9-42.0.10.ELsmp #1 SMP Tue Feb 27 08&#58;38&#58;56
CST 2007 i686 i686 i386 GNU/Linux
[neha@fgtest6 saz]$

-Neha

On Aug 5, 2008, at 3&#58;45 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5339#1217969470'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-05T20:51:10+00:00">Aug 5, 2008 08:51 PM UTC</time> by <b>VDT</b><a class="anchor" name="1217969470">&nbsp;</a></div><pre>On Aug 5, 2008, at 12&#58;14 PM, timm@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62;&#62;&#62; We request VDT to make and release this patch against</font>
<font color='#7F7E6F'>&#62;&#62;&#62; all currently supported VDT-distributed globuses. The vdt 1.10.1/</font>
<font color='#7F7E6F'>&#62;&#62;&#62; globus</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 4.0.7 patch is most urgent but the vdt.1.8.1 and vdt 1.6.1 are</font>
<font color='#7F7E6F'>&#62;&#62;&#62; important</font>
<font color='#7F7E6F'>&#62;&#62;&#62; too.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I don&#39;t have a good understanding for why it is urgent to update</font>
<font color='#7F7E6F'>&#62;&#62; three</font>
<font color='#7F7E6F'>&#62;&#62; versions of the VDT. VDT 1.6.1 is no longer supported except in RPM</font>
<font color='#7F7E6F'>&#62;&#62; form</font>
<font color='#7F7E6F'>&#62;&#62; for EGEE. If it is urgent I&#39;m willing to make the effort, but I would</font>
<font color='#7F7E6F'>&#62;&#62; like to understand the details of the urgency so I can balance this</font>
<font color='#7F7E6F'>&#62;&#62; work</font>
<font color='#7F7E6F'>&#62;&#62; with other high priority work we have. Can you help me understand?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62; We requested vdt 1.6.1 as well just for completeness.  vdt 1.10.1 is</font>
<font color='#7F7E6F'>&#62; most important, followed by vdt 1.8.1.</font>

I&#39;m trying to understand the reasoning behind your decision of
importance. Can you help me understand, so I can balance this work
with other high-priority tasks the VDT has?

If the only thing this affects is Fermilab&#39;s servers (no one else is
using SAZ, to my knowledge), does it suggest that you deploying VDT
1.6.1, 1.8.1, and 1.10.1 at Fermilab?

-alain

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='5339#1217969469'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-05T20:51:09+00:00">Aug 5, 2008 08:51 PM UTC</time> by <b>VDT</b><a class="anchor" name="1217969469">&nbsp;</a></div><pre>Alain--please start with OS SL4, 32-bit so we can test the patch.

Steve Timm

On Tue, 5 Aug 2008, Alain Roy via RT wrote&#58;

<font color='#7F7E6F'>&#62; On Aug 5, 2008, at 11&#58;29 AM, osg@.... via RT</font>
<font color='#7F7E6F'>&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; W.r.t question 1 - The authentication server is SAZ</font>
<font color='#7F7E6F'>&#62;&#62; The exact place where client is hanging right now is when globus</font>
<font color='#7F7E6F'>&#62;&#62; function &#34;globus_gss_assist_init_sec_context&#34; is invoked</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Fair enough.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;m worried this result (hanging) is different from other problems</font>
<font color='#7F7E6F'>&#62; I&#39;ve seen, so this won&#39;t be the right fix. But there is one way to</font>
<font color='#7F7E6F'>&#62; find out, right?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;ll get a rebuild of Globus going this afternoon. I can send you a</font>
<font color='#7F7E6F'>&#62; new library soon and you can see if it fixes the problem. What OS and</font>
<font color='#7F7E6F'>&#62; architecture are you running on?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks Neha,</font>
<font color='#7F7E6F'>&#62; -alain</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -----------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; Alain Roy                         vdt-support@....</font>
<font color='#7F7E6F'>&#62; VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>

--
------------------------------------------------------------------
Steven C. Timm, Ph.D  (630) 840-8525
<div id='show_318239069' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_318239069'>timm@....  <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~timm/
Fermilab Computing Division, Scientific Computing Facilities,
Grid Facilities Department, FermiGrid Services Group, Assistant Group Leader.

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....
</div><script type='text/javascript'>
        $('#show_318239069').click(function() {
            $('#detail_318239069').slideDown("normal");
            $('#show_318239069').hide();
            $('#hide_318239069').show();
        });
        $('#hide_318239069').click(function() {
            $('#detail_318239069').slideUp();
            $('#hide_318239069').hide();
            $('#show_318239069').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5339#1217969288'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-05T20:48:08+00:00">Aug 5, 2008 08:48 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1217969288">&nbsp;</a></div><pre>Alain--please start with OS SL4, 32-bit so we can test the patch.

Steve Timm

On Tue, 5 Aug 2008, Alain Roy via RT wrote&#58;

<font color='#7F7E6F'>&#62; On Aug 5, 2008, at 11&#58;29 AM, osg@.... via RT</font>
<font color='#7F7E6F'>&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; W.r.t question 1 - The authentication server is SAZ</font>
<font color='#7F7E6F'>&#62;&#62; The exact place where client is hanging right now is when globus</font>
<font color='#7F7E6F'>&#62;&#62; function &#34;globus_gss_assist_init_sec_context&#34; is invoked</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Fair enough.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;m worried this result (hanging) is different from other problems</font>
<font color='#7F7E6F'>&#62; I&#39;ve seen, so this won&#39;t be the right fix. But there is one way to</font>
<font color='#7F7E6F'>&#62; find out, right?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;ll get a rebuild of Globus going this afternoon. I can send you a</font>
<font color='#7F7E6F'>&#62; new library soon and you can see if it fixes the problem. What OS and</font>
<font color='#7F7E6F'>&#62; architecture are you running on?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks Neha,</font>
<font color='#7F7E6F'>&#62; -alain</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -----------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; Alain Roy                         vdt-support@....</font>
<font color='#7F7E6F'>&#62; VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>

--
------------------------------------------------------------------
Steven C. Timm, Ph.D  (630) 840-8525
<div id='show_632113232' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_632113232'>timm@....  <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~timm/
Fermilab Computing Division, Scientific Computing Facilities,
Grid Facilities Department, FermiGrid Services Group, Assistant Group Leader.
</div><script type='text/javascript'>
        $('#show_632113232').click(function() {
            $('#detail_632113232').slideDown("normal");
            $('#show_632113232').hide();
            $('#hide_632113232').show();
        });
        $('#hide_632113232').click(function() {
            $('#detail_632113232').slideUp();
            $('#hide_632113232').hide();
            $('#show_632113232').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5339#1217969109'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-05T20:45:09+00:00">Aug 5, 2008 08:45 PM UTC</time> by <b>VDT</b><a class="anchor" name="1217969109">&nbsp;</a></div><pre>On Aug 5, 2008, at 11&#58;29 AM, osg@.... via RT
wrote&#58;
<font color='#7F7E6F'>&#62; W.r.t question 1 - The authentication server is SAZ</font>
<font color='#7F7E6F'>&#62; The exact place where client is hanging right now is when globus</font>
<font color='#7F7E6F'>&#62; function &#34;globus_gss_assist_init_sec_context&#34; is invoked</font>

Fair enough.

I&#39;m worried this result (hanging) is different from other problems
I&#39;ve seen, so this won&#39;t be the right fix. But there is one way to
find out, right?

I&#39;ll get a rebuild of Globus going this afternoon. I can send you a
new library soon and you can see if it fixes the problem. What OS and
architecture are you running on?

Thanks Neha,
-alain

-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='5339#1217963708'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-05T19:15:08+00:00">Aug 5, 2008 07:15 PM UTC</time> by <b>VDT</b><a class="anchor" name="1217963708">&nbsp;</a></div><pre>On Tue, 5 Aug 2008, osg@.... via RT wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5339#1217960649'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-05T18:24:09+00:00">Aug 5, 2008 06:24 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1217960649">&nbsp;</a></div><pre>Hi

W.r.t question 1 - The authentication server is SAZ
The exact place where client is hanging right now is when globus
function &#34;globus_gss_assist_init_sec_context&#34; is invoked

Also, as you can see below, if the major_status code returned by this
function is anything other than GSS_S_COMPLETE, the code returns with
an error.

So, if this function was returning anything at all, code would not
hang, but instead exit.

Exact problem that we are seeing is below&#58;

<font color='#7F7E6F'>&#62;&#62; We observed that as long as the proxy is delegated up to 4 times,</font>
<font color='#7F7E6F'>&#62;&#62; so that the DN is of form &#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/</font>
<font color='#7F7E6F'>&#62;&#62; CN=UID&#58;neha</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; or</font>
<font color='#7F7E6F'>&#62;&#62; subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/</font>
<font color='#7F7E6F'>&#62;&#62; CN=UID&#58;neha/CN=proxy</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; or</font>
<font color='#7F7E6F'>&#62;&#62; subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/</font>
<font color='#7F7E6F'>&#62;&#62; CN=UID&#58;neha/CN=proxy/CN=proxy</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; or</font>
<font color='#7F7E6F'>&#62;&#62; subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/</font>
<font color='#7F7E6F'>&#62;&#62; CN=UID&#58;neha/CN=proxy/CN=proxy/CN=proxy</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; or</font>
<font color='#7F7E6F'>&#62;&#62; subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/</font>
<div id='show_1456383635' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1456383635'><font color='#7F7E6F'>&#62;&#62; CN=UID&#58;neha/CN=proxy/CN=proxy/CN=proxy/CN=proxy</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; everything works fine.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; However, if it is delegated 5th time and above, so that the DN in</font>
<font color='#7F7E6F'>&#62;&#62; the proxy now has an extra &#34;CN=proxy&#34; , the client hangs on the</font>
<font color='#7F7E6F'>&#62;&#62; handshake.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; (The DN looks like&#58;</font>
<font color='#7F7E6F'>&#62;&#62; subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/</font>
<font color='#7F7E6F'>&#62;&#62; CN=UID&#58;neha/CN=proxy/CN=proxy/CN=proxy/CN=proxy/CN=proxy)</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; The complete handshake function that is being used is below.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; As you can see, all it does is invoke the globus function</font>
<font color='#7F7E6F'>&#62;&#62; &#34;lobus_gss_assist_init_sec_context&#34;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; So, I am wondering if there is some kind of limitation in this</font>
<font color='#7F7E6F'>&#62;&#62; globus function, such as maximum length of user proxy or DN</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; int handshake(gss_cred_id_t credential_handle){</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;     OM_uint32 ret_flags=0;</font>
<font color='#7F7E6F'>&#62;&#62;      major_status = globus_gss_assist_init_sec_context(&minor_status,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; credential_handle,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; &global_context_handle,</font>
<font color='#7F7E6F'>&#62;&#62;                                                      &#34;GSI-NO-TARGET&#34;,</font>
<font color='#7F7E6F'>&#62;&#62;                                                      //</font>
<font color='#7F7E6F'>&#62;&#62; GSS_C_DELEG_FLAG|GSS_C_MUTUAL_FLAG,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; GSS_C_MUTUAL_FLAG,</font>
<font color='#7F7E6F'>&#62;&#62;                                                      &ret_flags,</font>
<font color='#7F7E6F'>&#62;&#62;                                                      &token_status,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; globus_gss_assist_token_get_fd,</font>
<font color='#7F7E6F'>&#62;&#62;                                                      (void *)</font>
<font color='#7F7E6F'>&#62;&#62; socket_in_out_file,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; globus_gss_assist_token_send_fd,</font>
<font color='#7F7E6F'>&#62;&#62;                                                      (void *)</font>
<font color='#7F7E6F'>&#62;&#62; socket_in_out_file);</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;      if(major_status != GSS_S_COMPLETE){</font>
<font color='#7F7E6F'>&#62;&#62;              logerr(&#34;Handshake Failed... major_status !=</font>
<font color='#7F7E6F'>&#62;&#62; GSS_S_COMPLETE&#34;);</font>
<font color='#7F7E6F'>&#62;&#62;              return(GSS_FAILED_HANDSHAKE);</font>
<font color='#7F7E6F'>&#62;&#62;      }</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;      return(GSS_SUCCESS);</font>
<font color='#7F7E6F'>&#62;&#62; }</font>
<font color='#7F7E6F'>&#62;</font>

Thanks
-Neha
On Aug 5, 2008, at 11&#58;39 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1456383635').click(function() {
            $('#detail_1456383635').slideDown("normal");
            $('#show_1456383635').hide();
            $('#hide_1456383635').show();
        });
        $('#hide_1456383635').click(function() {
            $('#detail_1456383635').slideUp();
            $('#hide_1456383635').hide();
            $('#show_1456383635').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5339#1217954351'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-05T16:39:11+00:00">Aug 5, 2008 04:39 PM UTC</time> by <b>VDT</b><a class="anchor" name="1217954351">&nbsp;</a></div><pre>Yesterday I wrote&#58;
<font color='#7F7E6F'>&#62; EGEE requested this patch against VDT 1.6.1 in June. I built it for</font>
<font color='#7F7E6F'>&#62; them, but they just told me (at the end of last week) that the patch</font>
<font color='#7F7E6F'>&#62; appears not to be working. I&#39;m not yet sure why it&#39;s not working.</font>

I have resolved this problem and will begin work on it for VDT 1.10.1 today.

I have two questions about your request&#58;

1) You wrote&#58;

<font color='#7F7E6F'>&#62; The patch is necessary because if the existing globus libraries</font>
<font color='#7F7E6F'>&#62; are called with a chain that has too many certificates in</font>
<font color='#7F7E6F'>&#62; the delegation chain, they just hang. This can and has caused a</font>
<font color='#7F7E6F'>&#62; denial of service against our authentication server, and eventually</font>
<font color='#7F7E6F'>&#62; the authentication servers crash.</font>

By authentication server, do you mean SAZ? GUMS? Something else?

In my testing with Globus GRAM and GridFTP, the Globus libraries
returned errors instead of hanging. It&#39;s possible I didn&#39;t exercise the
same APIs as the authentication servers. But I&#39;m worried that the hang
you are seeing is not caused by this limitation, so I wonder if we need
to focus debugging elsewhere.

2) You wrote&#58;

<font color='#7F7E6F'>&#62; We request VDT to make and release this patch against</font>
<font color='#7F7E6F'>&#62; all currently supported VDT-distributed globuses. The vdt 1.10.1/globus</font>
<font color='#7F7E6F'>&#62; 4.0.7 patch is most urgent but the vdt.1.8.1 and vdt 1.6.1 are important</font>
<font color='#7F7E6F'>&#62; too.</font>

I don&#39;t have a good understanding for why it is urgent to update three
versions of the VDT. VDT 1.6.1 is no longer supported except in RPM form
for EGEE. If it is urgent I&#39;m willing to make the effort, but I would
<div id='show_2094202194' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2094202194'>like to understand the details of the urgency so I can balance this work
with other high priority work we have. Can you help me understand?

Thanks,
-alain

-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....
</div><script type='text/javascript'>
        $('#show_2094202194').click(function() {
            $('#detail_2094202194').slideDown("normal");
            $('#show_2094202194').hide();
            $('#hide_2094202194').show();
        });
        $('#hide_2094202194').click(function() {
            $('#detail_2094202194').slideUp();
            $('#hide_2094202194').hide();
            $('#show_2094202194').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5339#1217889009'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-04T22:30:09+00:00">Aug 4, 2008 10:30 PM UTC</time> by <b>VDT</b><a class="anchor" name="1217889009">&nbsp;</a></div><pre>Hi Steve

<font color='#7F7E6F'>&#62; The E-mail thread below from Charles Bacon details</font>
<font color='#7F7E6F'>&#62; a limitation in  GLOBUS_GSI_CALLBACK_VERIFY_DEPTH in globus 4.0.x.</font>

<font color='#7F7E6F'>&#62; We request VDT to make and release this patch against</font>
<font color='#7F7E6F'>&#62; all currently supported VDT-distributed globuses.  The vdt 1.10.1/globus</font>
<font color='#7F7E6F'>&#62; 4.0.7 patch is most urgent but the vdt.1.8.1 and vdt 1.6.1 are important</font>
<font color='#7F7E6F'>&#62; too.</font>

EGEE requested this patch against VDT 1.6.1 in June. I built it for
them, but they just told me (at the end of last week) that the patch
appears not to be working. I&#39;m not yet sure why it&#39;s not work.

My goal will be to solve the problem within VDT 1.6.1 for EGEE and once
it is solved, to propagate the solution to VDT 1.10.1. Is that okay with
you? I&#39;ll try to keep you informed as we make progress. However, you can
also look in VDT ticket #3584,
<a href='http&#58;//vdt.cs.wisc.edu/rt/index.html?user=guest&pass=guest&q=3584' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/index.html?user=guest&pass=guest&q=3584</a>

Thanks,
-alain

-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710&#62</a>;
VDT Support, vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='5339#1217611088'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-01T17:18:08+00:00">Aug 1, 2008 05:18 PM UTC</time> by <b>VDT</b><a class="anchor" name="1217611088">&nbsp;</a></div><pre>Greetings from the VDT support system!

This message was generated automatically in response to the creation of a
ticket regarding&#58;

Open Science Grid&#58; Patch request for Globus 4.0x ISSUE=5339 PROJ=71

Your original request is copied below for reference.

There is no need to reply to this message right now -- someone from the VDT
team will respond to you as soon as possible.  If you wish to view your
support ticket online, visit&#58;

<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3710</a>

Your ticket has been assigned an ID as follows&#58;

[vdt-support #3710]

Please include the ticket ID in the subject line of all future email about
this issue.  To do so, you may reply to this message.

Thank you for your interest in the VDT.

-------------------------------------------------------------------------
[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='5339#1217610178'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-01T17:02:58+00:00">Aug 1, 2008 05:02 PM UTC</time> by <b>echism</b><a class="anchor" name="1217610178">&nbsp;</a></div><pre>The E-mail thread below from Charles Bacon details
a limitation in  GLOBUS_GSI_CALLBACK_VERIFY_DEPTH in globus 4.0.x.
FermiGrid recently ran into this limitation when a user
mistakely submitted jobs with a voms proxy on which he had
done six simultaneous voms-proxy-inits.  We noticed this
in a glexec call (which in turn calls sazclient)  but any other feature of globus
that does delegation is also vulnerable.  The default
depth is nine.  Instructions are below on how to patch globus 4.0.x
to make the depth 100.

The patch is necessary because if the existing globus libraries
are called with a chain that has too many certificates in
the delegation chain, they just hang.  This can and has caused a
denial of service against our authentication server, and eventually
the authentication servers crash.

We request VDT to make and release this patch against
all currently supported VDT-distributed globuses.  The vdt 1.10.1/globus 4.0.7 patch
is most urgent but the vdt.1.8.1 and vdt 1.6.1 are important too.

Thanks

Steve Timm

--
------------------------------------------------------------------
Steven C. Timm, Ph.D  (630) 840-8525
timm@....  <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~timm/
Fermilab Computing Division, Scientific Computing Facilities,
Grid Facilities Department, FermiGrid Services Group, Assistant Group Leader.

---------- Forwarded message ----------
Date&#58; Thu, 31 Jul 2008 11&#58;40&#58;00 -0500
From&#58; Charles Bacon &#60;bacon@....&#62;
To&#58; Neha Sharma &#60;neha@....&#62;
<div id='show_1449464195' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1449464195'>Cc&#58; gt-user@....
Subject&#58; Re&#58; [gt-user] Any known limitation
in&#34;globus_gss_assist_init_sec_context&#34; ??

Though the bug references just one commit, it was part of a larger set of commits&#58;
<a href='http&#58;//www.globus.org/mail_archive/csec-commit/2007/06/threads.html' target='_blank' rel='nofollow'>http&#58;//www.globus.org/mail_archive/csec-commit/2007/06/threads.html</a>

You&#39;ll need all three - the first one just adds the constant, but the next two are
what actually pass the constant into the openssl commands to set the verify depth.

Charles

On Jul 31, 2008, at 11&#58;24 AM, Neha Sharma wrote&#58;

<font color='#7F7E6F'>&#62; Thanks Charles.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Looks like I should be able to test this fix by defining</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; #define GLOBUS_GSI_CALLBACK_VERIFY_DEPTH 100</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; in the globus_gsi_callback_constants.h file</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; and rebuilding globus</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I will try it out and let you know how it goes..</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -Neha</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Jul 31, 2008, at 10&#58;26 AM, Charles Bacon wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Openssl comes with a default &#34;maximum depth&#34; of a PKI chain it supports.</font>
<font color='#7F7E6F'>&#62;&#62; That includes the CA and RA (if applicable).  I suspect you might be hitting</font>
<font color='#7F7E6F'>&#62;&#62; GT4.0.x&#39;s depth limit of 9.  If you&#39;re using a CA+RA+Usercert+5 proxy, you</font>
<font color='#7F7E6F'>&#62;&#62; might not be allowed to submit with delegation anymore because the</font>
<font color='#7F7E6F'>&#62;&#62; delegation would take you to the depth limit.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; It&#39;s a compiled-in limit that you can change.  I believe we had a bug open</font>
<font color='#7F7E6F'>&#62;&#62; about the max depth ... yep, it&#39;s</font>
<font color='#7F7E6F'>&#62;&#62; <a href='http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=4994.' target='_blank' rel='nofollow'>http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=4994.</a>  It should be</font>
<font color='#7F7E6F'>&#62;&#62; fixed in 4.2 to be 100 instead.  You can probably take that patch back to</font>
<font color='#7F7E6F'>&#62;&#62; 4.0.x if you need the limit increased there too.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Charles</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; On Jul 31, 2008, at 9&#58;52 AM, Neha Sharma wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hi All</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; I am wondering if someone can provide me with some information about the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Globus function &#34;globus_gss_assist_init_sec_context&#34;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; We have an authorization service and this globus function is used for</font>
<font color='#7F7E6F'>&#62;&#62;&#62; performing handshake between the service and the client.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; We observed that as long as the proxy is delegated up to 4 times, so that</font>
<font color='#7F7E6F'>&#62;&#62;&#62; the DN is of form &#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/CN=UID&#58;neha</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; or</font>
<font color='#7F7E6F'>&#62;&#62;&#62; subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Sharma/CN=UID&#58;neha/CN=proxy</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; or</font>
<font color='#7F7E6F'>&#62;&#62;&#62; subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Sharma/CN=UID&#58;neha/CN=proxy/CN=proxy</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; or</font>
<font color='#7F7E6F'>&#62;&#62;&#62; subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Sharma/CN=UID&#58;neha/CN=proxy/CN=proxy/CN=proxy</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; or</font>
<font color='#7F7E6F'>&#62;&#62;&#62; subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Sharma/CN=UID&#58;neha/CN=proxy/CN=proxy/CN=proxy/CN=proxy</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; everything works fine.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; However, if it is delegated 5th time and above, so that the DN in the proxy</font>
<font color='#7F7E6F'>&#62;&#62;&#62; now has an extra &#34;CN=proxy&#34; , the client hangs on the handshake.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; (The DN looks like&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Sharma/CN=UID&#58;neha/CN=proxy/CN=proxy/CN=proxy/CN=proxy/CN=proxy)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; The complete handshake function that is being used is below.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; As you can see, all it does is invoke the globus function</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#34;lobus_gss_assist_init_sec_context&#34;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; So, I am wondering if there is some kind of limitation in this globus</font>
<font color='#7F7E6F'>&#62;&#62;&#62; function, such as maximum length of user proxy or DN</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; int handshake(gss_cred_id_t credential_handle){</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;    OM_uint32 ret_flags=0;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;     major_status = globus_gss_assist_init_sec_context(&amp;minor_status,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;                                                     credential_handle,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;                                                     &amp;global_context_handle,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;                                                     &#34;GSI-NO-TARGET&#34;,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
//GSS_C_DELEG_FLAG|GSS_C_MUTUAL_FLAG,
<font color='#7F7E6F'>&#62;&#62;&#62;                                                     GSS_C_MUTUAL_FLAG,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;                                                     &amp;ret_flags,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;                                                     &amp;token_status,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;                                                     globus_gss_assist_token_get_fd,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;                                                     (void *)</font>
<font color='#7F7E6F'>&#62;&#62;&#62; socket_in_out_file,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;                                                     globus_gss_assist_token_send_fd,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;                                                     (void *)</font>
<font color='#7F7E6F'>&#62;&#62;&#62; socket_in_out_file);</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;     if(major_status != GSS_S_COMPLETE){</font>
<font color='#7F7E6F'>&#62;&#62;&#62;             logerr(&#34;Handshake Failed... major_status != GSS_S_COMPLETE&#34;);</font>
<font color='#7F7E6F'>&#62;&#62;&#62;             return(GSS_FAILED_HANDSHAKE);</font>
<font color='#7F7E6F'>&#62;&#62;&#62;     }</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;     return(GSS_SUCCESS);</font>
<font color='#7F7E6F'>&#62;&#62;&#62; }</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks</font>
<font color='#7F7E6F'>&#62;&#62;&#62; -Neha</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_1449464195').click(function() {
            $('#detail_1449464195').slideDown("normal");
            $('#show_1449464195').hide();
            $('#hide_1449464195').show();
        });
        $('#hide_1449464195').click(function() {
            $('#detail_1449464195').slideUp();
            $('#hide_1449464195').hide();
            $('#show_1449464195').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F5339">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
