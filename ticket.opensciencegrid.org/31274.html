<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[31274] High failure rate for CMS ASO user data transfers to FNAL EOS</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=31274" method="post">
<div class="page-header">
    <h3><span class="muted">31274</span> / High failure rate for CMS ASO user data transfers to FNAL EOS</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Nicolo.Magini </div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Nicolo.Magini</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Resolved</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-09-21</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000757986">INC000000757986</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=123983">123983</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/31274", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/31274?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/31274?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20High%20failure%20rate%20for%20CMS%20ASO%20user%20data%20transfers%20to%20FNAL%20EOS%20ISSUE%3D31274%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='31274#1476144057'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-11T00:00:57+00:00">Oct 11, 2016 12:00 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1476144057">&nbsp;</a></div><pre>[Permanent Solution]
Original ticket in GGUS and in GOC  has been solved/closed. See <a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=123983' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=123983</a> and <a href='https&#58;//ticket.grid.iu.edu/viewer?id=31274#1474299312' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=31274#1474299312</a>
-- by  at Mon Oct 10 16&#58;09&#58;04 UTC 2016

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000757986' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000757986</a></pre></div><div class='update_description'><i onclick="document.location='31274#1476143994'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-10T23:59:54+00:00">Oct 10, 2016 11:59 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1476143994">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.

-- by GGUS SYSTEM at Mon Oct 10 23&#58;59&#58;05 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983</a></pre></div><div class='update_description'><i onclick="document.location='31274#1474647298'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-23T16:14:58+00:00">Sep 23, 2016 04:14 PM UTC</time> by <b>echism</b><a class="anchor" name="1474647298">&nbsp;</a></div><pre>Closed as requested.</pre></div><div class='update_description'><i onclick="document.location='31274#1474446327'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-21T08:25:27+00:00">Sep 21, 2016 08:25 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1474446327">&nbsp;</a></div><pre>i don&#39;t see anymore failures ( apart from errors due to network) , I think we can close this ticket

-- by Andrea Manzi at Wed Sep 21 08&#58;24&#58;17 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983</a></pre></div><div class='update_description'><i onclick="document.location='31274#1474395371'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-20T18:16:11+00:00">Sep 20, 2016 06:16 PM UTC</time> by <b>Lisa Giacchetti</b><a class="anchor" name="1474395371">&nbsp;</a></div><pre>i didn&#39;t see anything wrong but restarted the gridftp daemon on it. It
looks like transfers are completing ok.

lisa

On 9/20/16 12&#58;54 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='31274#1474394046'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-20T17:54:06+00:00">Sep 20, 2016 05:54 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1474394046">&nbsp;</a></div><pre>much better now (95% succes rate)

<a href='https&#58;//fts3.cern.ch/fts3/ftsmon/#/?dest_se=srm&#58' target='_blank' rel='nofollow'>https&#58;//fts3.cern.ch/fts3/ftsmon/#/?dest_se=srm&#58</a>;%2F%2Fcmseos.fnal.gov

but i now see some transfers failing with

TRANSFER globus_xio&#58; Unable to connect to cmseos11.fnal.gov&#58;2811 globus_xio&#58; System error in connect&#58; Connection refused globus_xio&#58; A system call failed&#58; Connection refused

is there an issue with that host?
cheers
Andrea

-- by Andrea Manzi at Tue Sep 20 17&#58;53&#58;08 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983</a></pre></div><div class='update_description'><i onclick="document.location='31274#1474390511'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-20T16:55:11+00:00">Sep 20, 2016 04:55 PM UTC</time> by <b>Lisa Giacchetti</b><a class="anchor" name="1474390511">&nbsp;</a></div><pre>I have made this change on the machine that is bestman server (which is
also the production mgm). Please let us know if this fixes the issues
that we have been seeing.

lisa

On 9/20/16 2&#58;57 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='31274#1474358255'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-20T07:57:35+00:00">Sep 20, 2016 07:57 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1474358255">&nbsp;</a></div><pre>Hello,
this is what Andreas is suggesting&#58;

The BestMan FUSE mount in Fermilab needs to change one setting in /etc/sysconfig/eos

export EOS_FUSE_NEG_ENTRY_CACHE_TIME=0

and restart eosd.

Otherwise files which have been looked up via BestMan, written via gridFTP and looked up again via BestMan might be invisble for 30 seconds.

cheers
Andrea

-- by Andrea Manzi at Tue Sep 20 07&#58;56&#58;32 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983</a></pre></div><div class='update_description'><i onclick="document.location='31274#1474302436'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-19T16:27:16+00:00">Sep 19, 2016 04:27 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1474302436">&nbsp;</a></div><pre>FTS tries to remove the destination if the transfer fails, this is what you see from the logs. As said i&#39;m thinking about a possible delay to get the namespace update via fuse mount, maybe something to check also with EOS devs tomorrow. I don&#39;t think the issue is FTS side or due to the network problems at CERN of this afternoon which are now gone.Changed CC to ;andrea.manzi@....;cms-comp-ops-transfer-team@....;

-- by Andrea Manzi at Mon Sep 19 16&#58;26&#58;26 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983</a></pre></div><div class='update_description'><i onclick="document.location='31274#1474301350'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-19T16:09:10+00:00">Sep 19, 2016 04:09 PM UTC</time> by <b>Lisa Giacchetti</b><a class="anchor" name="1474301350">&nbsp;</a></div><pre>the bestman log says that file does not exist. but it clearly does.

[root@cmssrv222 bestman2]# grep
&#34;/store/user/gwalia/SingleMuon/crab_2016Bv2SingleMuon_promptreco/160919_114909/0000/output_Test_645.root&#34;
bestman2.log
invokeSudo=[sudo -u gwalia  /bin/rm
/eos/uscms/store/user/gwalia/SingleMuon/crab_2016Bv2SingleMuon_promptreco/160919_114909/0000/output_Test_645.root]
ERROR&#62;/bin/rm&#58; cannot remove
&#96;/eos/uscms/store/user/gwalia/SingleMuon/crab_2016Bv2SingleMuon_promptreco/160919_114909/0000/output_Test_645.root&#39;&#58;
No such file or directory

[root@cmssrv222 bestman2]# eos fileinfo
/eos/uscms/store/user/gwalia/SingleMuon/crab_2016Bv2SingleMuon_promptreco/160919_114909/0000/output_Test_645.root
File&#58;
&#39;/eos/uscms/store/user/gwalia/SingleMuon/crab_2016Bv2SingleMuon_promptreco/160919_114909/0000/output_Test_645.root&#39;
Flags&#58; 0644
Size&#58; 4575164
Modify&#58; Mon Sep 19 08&#58;49&#58;27 2016 Timestamp&#58; 1474292967.23079000
Change&#58; Mon Sep 19 08&#58;49&#58;26 2016 Timestamp&#58; 1474292966.69593536
CUid&#58; 49889 CGid&#58; 5063  Fxid&#58; 0f5315fc Fid&#58; 257103356    Pid&#58;
4926587   Pxid&#58; 004b2c7b
XStype&#58; adler    XS&#58; 20 1f 9e 0b     ETAG&#58; 69015656606990336&#58;201f9e0b
replica Stripes&#58; 2 Blocksize&#58; 4k LayoutId&#58; 00100112
#Rep&#58; 2
#   fs-id
#...................................................................................................................................
#                   host  #     schedgroup # path #
boot # configstatus #      drain # active #                 geotag
#...................................................................................................................................
0     126        cmseos33.fnal.gov         default.3
/storage/data2     booted             rw      nodrain online
1     135        cmseos39.fnal.gov         default.3
/storage/data2     booted             rw      nodrain online
*******

<div id='show_418180080' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_418180080'>On 9/19/16 11&#58;01 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_418180080').click(function() {
            $('#detail_418180080').slideDown("normal");
            $('#show_418180080').hide();
            $('#hide_418180080').show();
        });
        $('#hide_418180080').click(function() {
            $('#detail_418180080').slideUp();
            $('#hide_418180080').hide();
            $('#show_418180080').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='31274#1474300881'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-19T16:01:21+00:00">Sep 19, 2016 04:01 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1474300881">&nbsp;</a></div><pre>is it possible to check the SRM logs related to one of the files having issues, like the one listed by Nicolo&#39;?

-- by Andrea Manzi at Mon Sep 19 16&#58;00&#58;05 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983</a></pre></div><div class='update_description'><i onclick="document.location='31274#1474300822'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-19T16:00:22+00:00">Sep 19, 2016 04:00 PM UTC</time> by <b>Lisa Giacchetti</b><a class="anchor" name="1474300822">&nbsp;</a></div><pre>Yes i am using bestman + EOS

I did do a restart on the bestman service even though it was running.
Just in case it needed a kick.

lisa

On 9/19/16 10&#58;52 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='31274#1474300638'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-19T15:57:18+00:00">Sep 19, 2016 03:57 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1474300638">&nbsp;</a></div><pre>Also SAM gfal tests look green&#58;

<a href='http&#58;//wlcg-sam-cms.cern.ch/templates/ember/#/historicalsmry/heatMap?flavours=OSG-SRMv2&hostname=cmseos.fnal.gov&profile=CMS_CRITICAL_FULL&site=T1_US_FNAL&time=48h&view=Test%20History' target='_blank' rel='nofollow'>http&#58;//wlcg-sam-cms.cern.ch/templates/ember/#/historicalsmry/heatMap?flavours=OSG-SRMv2&hostname=cmseos.fnal.gov&profile=CMS_CRITICAL_FULL&site=T1_US_FNAL&time=48h&view=Test%20History</a>

-- by David Mason at Mon Sep 19 15&#58;56&#58;50 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983</a></pre></div><div class='update_description'><i onclick="document.location='31274#1474300574'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-19T15:56:14+00:00">Sep 19, 2016 03:56 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1474300574">&nbsp;</a></div><pre>Also am wondering to what extent this is a user or CERN network issue?  I actually see incoming PhEDEx transfers successful in the debug instance&#58;

<a href='https&#58;//cmsweb.cern.ch/phedex/debug/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/debug/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=src&src_filter=&dest_filter=T3_US_FNALLPC&no_mss=true&period=l7d&upto=

-- by David Mason at Mon Sep 19 15&#58;55&#58;16 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983</a></pre></div><div class='update_description'><i onclick="document.location='31274#1474300341'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-19T15:52:21+00:00">Sep 19, 2016 03:52 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1474300341">&nbsp;</a></div><pre>Hi,
from the logs looks like the transfers is ok but then the stat via SRM fails. Are you using Bestman + EOS mounted right? could be that for some reason the namespace update after the end of the transfer is not immediately seen by the SRM server?
cheers
Andrea

-- by Andrea Manzi at Mon Sep 19 15&#58;51&#58;27 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983</a></pre></div><div class='update_description'><i onclick="document.location='31274#1474300272'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-19T15:51:12+00:00">Sep 19, 2016 03:51 PM UTC</time> by <b>Lisa Giacchetti</b><a class="anchor" name="1474300272">&nbsp;</a></div><pre>i am checking on eos on this side. so far it all looks ok from a service
running perspective but do see this&#58;

[58743] Mon Sep 19 10&#58;40&#58;45 2016 &#58;&#58; Starting to transfer
&#34;//eos/uscms/store/user/gwalia/SingleMuon/crab_2016Dv2SingleMuon_promptreco/160919_115035/0000/output_Test_823.root&#34;.
[58741] Mon Sep 19 10&#58;40&#58;39 2016 &#58;&#58; Server started in inetd mode.
[58741] Mon Sep 19 10&#58;40&#58;39 2016 &#58;&#58; New connection from&#58;
fts417.cern.ch&#58;38415
[58741] Mon Sep 19 10&#58;40&#58;40 2016 &#58;&#58; DN /DC=ch/DC=cern/OU=Organic
Units/OU=Users/CN=gwalia/CN=745089/CN=Genius Walia successfully authorized.
[58741] Mon Sep 19 10&#58;40&#58;40 2016 &#58;&#58; User gwalia successfully authorized.
[58741] Mon Sep 19 10&#58;40&#58;40 2016 &#58;&#58; fts417.cern.ch&#58;38415&#58; [CLIENT
ERROR]&#58; SITE CLIENTINFO
scheme=gsiftp;appname=&#34;fts_url_copy&#34;;appver=&#34;3.4.7 (gfal2
2.11.1)&#34;;job-id=65894784-7e7f-11e6-9dab-02163e018a2a;file-id=1010573230;retry=0

we are also looking to see if transfers from locations other than CERN
are working seeing as CERN is having network issues.

lisa

On 9/19/16 10&#58;35 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='31274#1474299312'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-19T15:35:12+00:00">Sep 19, 2016 03:35 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1474299312">&nbsp;</a></div><pre>Dear all,

the majority of ASO user transfers to FNAL cmseos.fnal.gov are failing with
DESTINATION Failed to get dest file size&#58; Error reported from srm_ifce &#58; 2 [SE][Ls][SRM_INVALID_PATH] No such file or directory.

<a href='https&#58;//fts3.cern.ch/fts3/ftsmon/#/?dest_se=srm&#58' target='_blank' rel='nofollow'>https&#58;//fts3.cern.ch/fts3/ftsmon/#/?dest_se=srm&#58</a>;%2F%2Fcmseos.fnal.gov

I checked one failed transfer at random, and it seems that actually the file arrived safely at FNAL (note the timestamps), but was reported as missing when FTS checked with &#39;stat&#39; on EOS&#58;

<a href='https&#58;//fts421.cern.ch&#58;8449/var/log/fts3/transfers/2016-09-19/srm.rcac.purdue.edu__cmseos.fnal.gov/2016-09-19-1349__srm.rcac.purdue.edu__cmseos.fnal.gov__1010222224__4716b6c0-7e60-11e6-9794-02163e0182a7' target='_blank' rel='nofollow'>https&#58;//fts421.cern.ch&#58;8449/var/log/fts3/transfers/2016-09-19/srm.rcac.purdue.edu__cmseos.fnal.gov/2016-09-19-1349__srm.rcac.purdue.edu__cmseos.fnal.gov__1010222224__4716b6c0-7e60-11e6-9794-02163e0182a7</a>

gfal-ls -l <a href='srm&#58;//cmseos.fnal.gov&#58;8443/srm/v2/server?SFN=/eos/uscms/store/user/gwalia/SingleMuon/crab_2016Bv2SingleMuon_promptreco/160919_114909/0000/output_Test_645.root' target='_blank' rel='nofollow'>srm&#58;//cmseos.fnal.gov&#58;8443/srm/v2/server?SFN=/eos/uscms/store/user/gwalia/SingleMuon/crab_2016Bv2SingleMuon_promptreco/160919_114909/0000/output_Test_645.root</a>
-rwxr-xr-x   1 46    45      4575164 Sep 19 15&#58;49 <a href='srm&#58;//cmseos.fnal.gov&#58;8443/srm/v2/server?SFN=/eos/uscms/store/user/gwalia/SingleMuon/crab_2016Bv2SingleMuon_promptreco/160919_114909/0000/output_Test_645.root' target='_blank' rel='nofollow'>srm&#58;//cmseos.fnal.gov&#58;8443/srm/v2/server?SFN=/eos/uscms/store/user/gwalia/SingleMuon/crab_2016Bv2SingleMuon_promptreco/160919_114909/0000/output_Test_645.root</a>

This error rate is still an issue however, since FTS will throttle down the user transfers to FNAL...

Involving the Transfer Team, FNAL and the FTS team since probably this will require some debugging both on the FTS side and on the EOS FNAL side...

Cheers
N.

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=123983</a>

[Ticket History]
Subject&#58; High failure rate for CMS ASO user data transfers to FNAL EOS
Ticket Type&#58; USER
CC&#58; ;andrea.manzi@....;cms-comp-ops-transfer-team@....
-- by Nicolo.Magini at Mon Sep 19 15&#58;34&#58;16 UTC 2016</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F31274">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 31274});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
