<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="/">
    <title>[5458] RSV failures</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="//netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="https://ticket.opensciencegrid.org/images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="https://ticket.opensciencegrid.org/lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=5458" method="post">
<div class="page-header">
    <h3><span class="muted">5458</span> / RSV failures</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">frank wurthwein</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">review</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-08-22</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
        <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=5458", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="/5458?sort=up&"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="/5458?expandall=true&">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20RSV%20failures%20ISSUE%3D5458%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='5458#1219677748'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-25T15:22:28+00:00">Aug 25, 2008 03:22 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1219677748">&nbsp;</a></div><pre>Issue has been resolved per submitter.</pre></div><div class='update_description'><i onclick="document.location='5458#1219506601'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-23T15:50:01+00:00">Aug 23, 2008 03:50 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1219506601">&nbsp;</a></div><pre>Dear GOC,

To close this loop.
The last changes we made at UCSD resolved the problem temporarily.

We are now still executing the srm probes twice, once on osg-gw-2 and once on
osg-gw-4 but we no longer write twice
the same filename.

We successfully changed the filename that is being written by osg-gw-4 by appending
-fkw to it.
It&#39;s a hack, but it works.

So this is no longer a time critical problem.

Thanks, frank

On Aug 22, 2008, at 11&#58;52 PM, frank Wuerthwein wrote&#58;

<font color='#7F7E6F'>&#62; Well, nothing ever works on first try, does it&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Made the wrong modification in OSG_RSV_Probe_Base.pm</font>
<font color='#7F7E6F'>&#62; I think this is now the right one&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;    ## File that&#39;&#39;ll be created ON remote host</font>
<font color='#7F7E6F'>&#62;    ## fkw modified the next line adding -fkw to the filename</font>
<font color='#7F7E6F'>&#62;    $h_tmp{&#39;srmcpsrmRemoteTestfileUri&#39;} =</font>
<font color='#7F7E6F'>&#62;        &#34; srm&#58;//$h_srm_tmp_hash{&#39;hostName&#39;}&#58;8443/&#34;.</font>
<font color='#7F7E6F'>&#62; $h_tmp{&#39;srmWebservicePath&#39;} .</font>
<font color='#7F7E6F'>&#62;        &#34;?SFN=&#34;.$h_tmp{&#39;srmcpDestinationDir&#39;}. &#34;/&#34;.</font>
<font color='#7F7E6F'>&#62;        ${&amp;Get_Timestamp(&#92;%h_tmp,&#34;UTC&#34;)}.</font>
<font color='#7F7E6F'>&#62;        &#34;-storage-probe-test-file-remote-fkw&#34;;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Maybe this will work now.</font>
<font color='#7F7E6F'>&#62;</font>
<div id='show_941733276' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_941733276'><font color='#7F7E6F'>&#62; Thanks</font>
<font color='#7F7E6F'>&#62; -frank</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Aug 22, 2008, at 11&#58;42 PM, frank Wuerthwein wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Anthony,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I tried to follow your steps. However, when it came to step 4.</font>
<font color='#7F7E6F'>&#62;&#62; rerun RSV configure script I was completely lost.</font>
<font color='#7F7E6F'>&#62;&#62; I ran the script with no argument and it did nothing. Looked inside</font>
<font color='#7F7E6F'>&#62;&#62; the script, and seemed too complicated for my simple mind.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Too many parameters for me to guess to risk doing it wrong.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; So instead, I poked around looking for a brute force solution.</font>
<font color='#7F7E6F'>&#62;&#62; I found&#58;</font>
<font color='#7F7E6F'>&#62;&#62; osg-rsv/bin/probes</font>
<font color='#7F7E6F'>&#62;&#62; If I understand the comments in the various files I looked at then</font>
<font color='#7F7E6F'>&#62;&#62; these are the probes that actually get run.</font>
<font color='#7F7E6F'>&#62;&#62; By modifying the probes myself, I ought to get whatever effect I</font>
<font color='#7F7E6F'>&#62;&#62; want.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; After reading the probe code, I made two changes&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; In OSG_RSV_Probe_Base.pm I changed&#58;</font>
<font color='#7F7E6F'>&#62;&#62; ...</font>
<font color='#7F7E6F'>&#62;&#62;   ## First below, file that&#39;ll be copied TO remote host</font>
<font color='#7F7E6F'>&#62;&#62;   ## fkw modified the next line by adding -fkw to the filename</font>
<font color='#7F7E6F'>&#62;&#62;   $h_tmp{&#39;srmcpsrmTestfile&#39;}    =</font>
<font color='#7F7E6F'>&#62;&#62; &#34;$h_tmp{&#39;PROBE_DIR_LOCAL&#39;}&#34;.&#34;storage-probe-test-file-fkw&#34;</font>
<font color='#7F7E6F'>&#62;&#62; ...</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I then made this file &#34;storage-probe-test-file-fkw&#34; by copying it</font>
<font color='#7F7E6F'>&#62;&#62; from the default one.</font>
<font color='#7F7E6F'>&#62;&#62; This should change the filename that is being written by one of our</font>
<font color='#7F7E6F'>&#62;&#62; two CEs such that it is different from the other.</font>
<font color='#7F7E6F'>&#62;&#62; If life was just then this would do the trick.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; In addition, I changed&#58; srmcp-srm-probe</font>
<font color='#7F7E6F'>&#62;&#62; ...</font>
<font color='#7F7E6F'>&#62;&#62;   $m_srmcpsrm{&#39;metricInterval&#39;} = &#34;58 * * * *&#34;;</font>
<font color='#7F7E6F'>&#62;&#62; ...</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; If life was just then this would change the time when the srmcp</font>
<font color='#7F7E6F'>&#62;&#62; test is run. I.e. it would do what I could have done</font>
<font color='#7F7E6F'>&#62;&#62; by changing the config file, and then rerunning the RSV configure</font>
<font color='#7F7E6F'>&#62;&#62; script.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; We&#39;ll know by tomorrow if either of these modifications were</font>
<font color='#7F7E6F'>&#62;&#62; successful.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks for your help.</font>
<font color='#7F7E6F'>&#62;&#62; -frank</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; On Aug 22, 2008, at 7&#58;00 AM, Anthony Tiradani wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hi Frank,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; I couldn&#39;t find any documentation on this, but here is how I did</font>
<font color='#7F7E6F'>&#62;&#62;&#62; this for the USCMS Tier-1.  $VDT_LOCATION/osg-rsv/config contains</font>
<font color='#7F7E6F'>&#62;&#62;&#62; *.conf files for every server that RSV is configured to monitor.</font>
<font color='#7F7E6F'>&#62;&#62;&#62; The files have the following format&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Enable | Probe@Metric | Cron Minute | Cron Hour | Cron Day of</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Month | Cron Month | Cron Day of Week</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; The timing is controlled similar to cron jobs.  So, the procedure</font>
<font color='#7F7E6F'>&#62;&#62;&#62; I followed was&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 1. vdt-control --off osg-rsv</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 2. vdt-control --off condor-cron</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 3. make my modifications to the conf files</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 4. re-run the RSV configure script</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 5. vdt-control --on condor-cron</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 6. vdt-control --off osg-rsv</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hope this helps.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Anthony Tiradani</font>
<font color='#7F7E6F'>&#62;&#62;&#62; tiradani@....</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; frank Wuerthwein wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Terrence is on vacation until Tuesday, and neither Abhishek nor I</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; have a clue how RSV works.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Can somebody point me to documentation for how one would change</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; the timing for condor cron.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; You&#39;ve got to assume I know nothing, I&#39;m afraid.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Thanks, Frank</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; On Aug 21, 2008, at 5&#58;06 PM, Brian Bockelman wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Hey Frank, all,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; In the meantime, you should be able to change when the condor</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; cron jobs run at UCSD.  It looks like the name of the file is</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; based on the start time of the probe.  Change the start time,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; and you should be able to avoid this for now.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Brian</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; On Aug 21, 2008, at 4&#58;47 PM, frank Wuerthwein wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Dear OSG GOC, (cc to cms-t2 and Steve Timm as fyi)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; asr and fkw noticed that all our SE RSV failures during 8/20</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; are actually failures of the RSV system as a whole.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; At least it looks that way.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Brian pointed us to&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<a href='http&#58;//t2.unl.edu/gratia/xml/rsv_results?status=.*&amp' target='_blank' rel='nofollow'>http&#58;//t2.unl.edu/gratia/xml/rsv_results?status=.*&amp</a>;limit=300&amp;starttime=2008-08-17+19%3A55%3A35&amp;facility=ucsd&amp;metric=.*srm.*&amp;endtime=2008-08-21+19%3A55%3A35
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; To understand RSV errors. We selected all srm relates tests. We</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; then looked for &#34;critical&#34; in the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; status field.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; We notice that we always get 2 read-write RSV tests in rapid</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; succession. Those tests are typically 10seconds</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; apart. However, sometimes, they are 0 seconds apart.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; As the file that is being written is always of the form&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#60;timestamp&#62;-storage-probe-test-file-remote</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; This leads to &#34;file exists&#34; errors every time that the test is</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; executed twice at the same time.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; You see this quite clearly in the listing at the URL above.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Each failed read-write test is accompagnied by a successful</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; read-write test at the same time, and with the same filename.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; We&#39;d like to request&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; 1) that the RSV read-write probe is changed to include a random</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; string in the filename to prevent this from happening in the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; future.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; 2) The RSV accounting gets corrected for this mistake before it</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; is sent to WLCG. This is clearly not a malfunction of our site,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; but of the system that tests our site.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; As an aside, we hypothesize that you are testing us twice in</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; rapid succession because we have 2 CEs, ucsdt2 and ucsdt2-b.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; This is thus possibly a side effect of OSG not being able to</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; handle sites with multiple CEs. Nor multiple clusters with the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; same SE,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; as in Florida. We checked Caltech as a counter example, and</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Caltech does not get tested twice in rapid succesion,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; but only once. Fermigrid gets 9 nearly simultaneous read-write</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; tests. Well, sounds like a &#34;smoking gun&#34; to us!</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Many thanks, Abhishek and Frank</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; P.s. Bockjoo might want to check if Florida sees similar</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; problems. After all, Florida has multiple clusters with the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; same SE, we think.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;    We checked briefly at&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<a href='http&#58;//t2.unl.edu/gratia/xml/rsv_results?status=.*&amp' target='_blank' rel='nofollow'>http&#58;//t2.unl.edu/gratia/xml/rsv_results?status=.*&amp</a>;limit=300&amp;starttime=2008-08-17+19%3A55%3A35&amp;facility=ufl&amp;metric=.*srm.*&amp;endtime=2008-08-21+19%3A55%3A35
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; and found immediately one case for the same kind of RSV</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; malfunction in Florida as in UCSD.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; We did not look further for Florida.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_941733276').click(function() {
            $('#detail_941733276').slideDown("normal");
            $('#show_941733276').hide();
            $('#hide_941733276').show();
        });
        $('#hide_941733276').click(function() {
            $('#detail_941733276').slideUp();
            $('#hide_941733276').hide();
            $('#show_941733276').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5458#1219360138'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-21T23:08:58+00:00">Aug 21, 2008 11:08 PM UTC</time> by <b>echism</b><a class="anchor" name="1219360138">&nbsp;</a></div><pre>From&#58; frank Wuerthwein &#60;fkw@....&#62;
To&#58; Grid Operations Center &#60;goc@....&#62;
cc&#58; T2 Organization List &#60;CMS-T2@....&#62;,
Steven Timm &#60;timm@....&#62;
Subject&#58; Question regarding RSV
Date-Sent&#58; Thursday, August 21, 2008 2&#58;47 PM -0700

Dear OSG GOC, (cc to cms-t2 and Steve Timm as fyi)

asr and fkw noticed that all our SE RSV failures during 8/20 are actually failures of
the RSV system as a whole.
At least it looks that way.

Brian pointed us to&#58;

<a href='http&#58;//t2.unl.edu/gratia/xml/rsv_results?status=.*&amp' target='_blank' rel='nofollow'>http&#58;//t2.unl.edu/gratia/xml/rsv_results?status=.*&amp</a>;limit=300&amp;starttime=2008-08-17+19%3A55%3A35&amp;facility=ucsd&amp;metric=.*srm.*&amp;endtime=2008-08-21+19%3A55%3A35

To understand RSV errors. We selected all srm relates tests. We then looked for
&#34;critical&#34; in the
status field.

We notice that we always get 2 read-write RSV tests in rapid succession. Those tests
are typically 10seconds
apart. However, sometimes, they are 0 seconds apart.

As the file that is being written is always of the form&#58;
&#60;timestamp&#62;-storage-probe-test-file-remote

This leads to &#34;file exists&#34; errors every time that the test is executed twice at the
same time.

You see this quite clearly in the listing at the URL above. Each failed read-write
test is accompagnied by a successful
read-write test at the same time, and with the same filename.

<div id='show_1564528152' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1564528152'>We&#39;d like to request&#58;

1) that the RSV read-write probe is changed to include a random string in the
filename to prevent this from happening in the future.
2) The RSV accounting gets corrected for this mistake before it is sent to WLCG. This
is clearly not a malfunction of our site,
but of the system that tests our site.

As an aside, we hypothesize that you are testing us twice in rapid succession because
we have 2 CEs, ucsdt2 and ucsdt2-b.
This is thus possibly a side effect of OSG not being able to handle sites with
multiple CEs. Nor multiple clusters with the same SE,
as in Florida. We checked Caltech as a counter example, and Caltech does not get
tested twice in rapid succesion,
but only once. Fermigrid gets 9 nearly simultaneous read-write tests. Well, sounds
like a &#34;smoking gun&#34; to us!

Many thanks, Abhishek and Frank

P.s. Bockjoo might want to check if Florida sees similar problems. After all, Florida
has multiple clusters with the same SE, we think.
We checked briefly at&#58;
<a href='http&#58;//t2.unl.edu/gratia/xml/rsv_results?status=.*&amp' target='_blank' rel='nofollow'>http&#58;//t2.unl.edu/gratia/xml/rsv_results?status=.*&amp</a>;limit=300&amp;starttime=2008-08-17+19%3A55%3A35&amp;facility=ufl&amp;metric=.*srm.*&amp;endtime=2008-08-21+19%3A55%3A35
and found immediately one case for the same kind of RSV malfunction in Florida as in
UCSD.
We did not look further for Florida.
</div><script type='text/javascript'>
        $('#show_1564528152').click(function() {
            $('#detail_1564528152').slideDown("normal");
            $('#show_1564528152').hide();
            $('#hide_1564528152').show();
        });
        $('#hide_1564528152').click(function() {
            $('#detail_1564528152').slideUp();
            $('#hide_1564528152').hide();
            $('#show_1564528152').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F5458">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="/images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 5458});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
