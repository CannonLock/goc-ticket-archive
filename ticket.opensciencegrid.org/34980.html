<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[34980] condor-ce-trace error</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=34980" method="post">
<div class="page-header">
    <h3><span class="muted">34980</span> / condor-ce-trace error</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Wu Edward</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Assess ticket/Determine NAI</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-11-30</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/34980", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/34980?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/34980?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20condor-ce-trace%20error%20ISSUE%3D34980%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='34980#1513051031'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-12-12T03:57:11+00:00">Dec 12, 2017 03:57 AM UTC</time><a class="anchor" name="1513051031">&nbsp;</a></div><pre>Thank you. It works now.
But I have some other questions.
When installing condor-ce, it will create /etc/condor. What should I configure it? Should I configure it as a Sched of my condor cluster ? Or this is the Sched for condor-ce ?
What is the relationship between /etc/condor and /etc/condor-ce ?
Another question is that I found osg-configure will  check  /var/lib/osg/user-vo-map for vo names. What is this file and the differences between the mapfiles in /etc/grid-security ?

by /C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu 266135</pre></div><div class='update_description'><i onclick="document.location='34980#1512589808'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-12-06T19:50:08+00:00">Dec 6, 2017 07:50 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1512589808">&nbsp;</a></div><pre>When submitting against the CE, remember that your local batch scheduler is not available directly&#58; you need to submit to your CE schedd. So the problem is in your submit file&#58;

grid_resource  =  condor test_queue@....

Should be

grid_resource = condor condor-ce-chihsun2.twgrid.org condor-ce-chihsun2.twgrid.org&#58;9619</pre></div><div class='update_description'><i onclick="document.location='34980#1512550272'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-12-06T08:51:12+00:00">Dec 6, 2017 08:51 AM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1512550272">&nbsp;</a></div><pre>Hi Brian,
Sorry to bother you again. Now I try to submit pilot job
(AutoPyFactory&#58; apf2-tw01.grid.sinica.edu.tw) to my CE. But it seems
authentication failed. Should I set anything for other node submitting to
my CE (I only set grid-mapfile, should I set condor-mapefile ? I also set
&#34;allowwrite = *&#34; in /etc/condor/condor_config.local in CE)

I get this in job log&#58;
000 (4159538.000.000) 12/06 08&#58;32&#58;39 Job submitted from host&#58; &#60;
117.103.104.44&#58;35661&#62;
...
012 (4159538.000.000) 12/06 08&#58;33&#58;23 Job was held.
Error connecting to schedd test_queue@....&#58;
SECMAN&#58;2007&#58;could not receive post_auth_info.|AUTHENTICATE&#58;1004&#58;Failed to
authenticate using KERBEROS|AUTHENTICATE&#58;1004&#58;Failed to authenticate using
FS
Code 0 Subcode 0

And here is the description file&#58;
should_transfer_files = IF_NEEDED
universe  =  grid
executable = /etc/apf/runpilot3-wrapper-JEDIAMSTaiwanPicard.sh
+WantJobRouter  =  True
use_x509userproxy  =  true
log = $(Dir)/$(Cluster).$(Process).log
transfer_executable = True
+MATCH_APF_QUEUE = &#34;ANALY_TAIWAN_TWGRID_CHI&#34;
universe = grid
stream_output = False
+TransferOutput = &#34;&#34;
stream_error = False
environment = &#34;PANDA_JSID=ASGC-TW-APF2-01 GTAG=
<a href='http&#58;//apf2-tw01.grid.sinica.edu.tw&#58;25880/2017-12-06/ANALY_TAIWAN_TWGRID_CHI/' target='_blank' rel='nofollow'>http&#58;//apf2-tw01.grid.sinica.edu.tw&#58;25880/2017-12-06/ANALY_TAIWAN_TWGRID_CHI/</a>$(Cluster).$(Process).out
APFCID=$(Cluster).$(Process) APFFID=ASGC-TW-APF2-01 APFMON=
<a href='http&#58;//apfmon-tw.twgrid.org/api' target='_blank' rel='nofollow'>http&#58;//apfmon-tw.twgrid.org/api</a> FACTORYQUEUE=ANALY_TAIWAN_TWGRID_CHI
<div id='show_2112688852' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2112688852'>FACTORYUSER=apf PILOT_HTTP_SOURCES=
<a href='http&#58;//apf2-tw01.grid.sinica.edu.tw/factory/pilotcode-PicardTW-170823.tar.gz' target='_blank' rel='nofollow'>http&#58;//apf2-tw01.grid.sinica.edu.tw/factory/pilotcode-PicardTW-170823.tar.gz</a>
&#34;
grid_resource  =  condor test_queue@....
condor-ce-chihsun.twgrid.org
arguments = -s ANALY_TAIWAN_TWGRID_CHI -h ANALY_TAIWAN_TWGRID_CHI -p 25443
-w <a href='https&#58;//panda-testbed-server2.grid.sinica.edu.tw' target='_blank' rel='nofollow'>https&#58;//panda-testbed-server2.grid.sinica.edu.tw</a> -I
<a href='http&#58;//panda-testbed-server2.grid.sinica.edu.tw' target='_blank' rel='nofollow'>http&#58;//panda-testbed-server2.grid.sinica.edu.tw</a> -j false  -k 0 -o tw -u
user -F AMSTaiwan
x509userproxy = /tmp/x509up_u500_twgridpil_rfc
error = $(Dir)/$(Cluster).$(Process).err
output = $(Dir)/$(Cluster).$(Process).out
notify_user = larry.cheng@....
Dir = /home/apf/factory/logs/2017-12-06/ANALY_TAIWAN_TWGRID_CHI/
notification = Error
queue 1

I also add /tmp/x509up_u500_twgridpil_rfc into grid-map
[root@apf2-tw01 ANALY_TAIWAN_TWGRID_CHI]# openssl x509 -in
/tmp/x509up_u500_twgridpil_rfc -noout -subject
subject= /C=TW/O=AS/OU=GRID/CN=ShoaTingTwgrid Cheng 496283/CN=4217863297

[root@condor-ce-chihsun ~]# cat /etc/grid-security/grid-mapfile
&#34;/C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu 266135&#34; localuser
&#34;/C=TW/O=AS/OU=GRID/CN=ShoaTingTwgrid Cheng 496283&#34; localuser

[localuser@condor-ce-chihsun2 ~]$ cat /etc/grid-security/grid-mapfile

&#34;/C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu 266135&#34; localuser
&#34;/C=TW/O=AS/OU=GRID/CN=ShoaTingTwgrid Cheng 496283&#34; localuser

Thank you very much.

Best Regard
Edward Wu
ASGC

2017-11-28 5&#58;47 GMT+08&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_2112688852').click(function() {
            $('#detail_2112688852').slideDown("normal");
            $('#show_2112688852').hide();
            $('#hide_2112688852').show();
        });
        $('#hide_2112688852').click(function() {
            $('#detail_2112688852').slideUp();
            $('#hide_2112688852').hide();
            $('#show_2112688852').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='34980#1511819276'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-27T21:47:56+00:00">Nov 27, 2017 09:47 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1511819276">&nbsp;</a></div><pre>Glad we got this sorted out! Sorry it took so long. Let us know if you have any other issues in the future.

- Brian</pre></div><div class='update_description'><i onclick="document.location='34980#1511819113'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-27T21:45:13+00:00">Nov 27, 2017 09:45 PM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1511819113">&nbsp;</a></div><pre>Hi Brian,
The job is finished. Thank you very much for the help. Then I will do
more tests. Maybe, it can be closed for this ticket about trace error.

Best Regard
Edward Wu
ASGC

2017-11-27 20&#58;46 GMT+01&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='34980#1511811963'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-27T19:46:03+00:00">Nov 27, 2017 07:46 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1511811963">&nbsp;</a></div><pre>Edward,

Sorry, I made an error in the configuration. You&#39;ll want to use this&#58;

JOB_ROUTER_SCHEDD2_NAME=test_queue@....
JOB_ROUTER_SCHEDD2_POOL=condor-ce-chihsun.twgrid.org&#58;9618

- Brian</pre></div><div class='update_description'><i onclick="document.location='34980#1511530331'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-24T13:32:11+00:00">Nov 24, 2017 01:32 PM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1511530331">&nbsp;</a></div><pre>Hi Brian&#58;
Thanks I used the configure.

condor_ce_trace&#58;
SECMAN&#58;2007&#58;Failed to received post-auth ClassAd
AUTHENTICATE&#58;1004&#58;Failed to authenticate using FS
11/24/17 13&#58;16&#58;15 JobRouter failure (src=21.0,route=Local_Condor)&#58; failed
to submit job

In condor-ce-chihsun.twgrid.org
/var/log/condor/SchedLog&#58;
11/24/17 13&#58;18&#58;26 (pid&#58;1494320) DC_AUTHENTICATE&#58; authentication of &#60;
117.103.105.238&#58;20283&#62; did not result in a valid mapped user name, which is
required for this command (1112 QMGMT_WRITE_CMD), so aborting.
[root@condor-ce-chihsun ~]# host 117.103.105.238
238.105.103.117.in-addr.arpa domain name pointer
condor-ce-chihsun2.twgrid.org

It seems CE indeed try to router jobs to condor-ce-chihsun.twgrid.org, but
the map of user is failed.

[root@condor-ce-chihsun ~]# ll /etc/grid-security/*map*
-rw-r--r-- 1 root root   0 Sep 21 18&#58;36 /etc/grid-security/ban-mapfile
-rw-r--r-- 1 root root 234 May 24  2017
/etc/grid-security/ban-mapfile.rpmnew
-rw-r--r-- 1 root root   0 Sep 21 18&#58;36 /etc/grid-security/ban-voms-mapfile
-rw-r--r-- 1 root root 200 May 24  2017
/etc/grid-security/ban-voms-mapfile.rpmnew
-rw-r--r-- 1 root root  53 Nov  3 07&#58;53 /etc/grid-security/grid-mapfile
-rw-r--r-- 1 root root  22 Sep 21 18&#58;47 /etc/grid-security/voms-mapfile

[root@condor-ce-chihsun ~]# cat /etc/grid-security/grid-mapfile
&#34;/C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu 266135&#34; localuser

Compare with the proxy I used&#58;
<div id='show_1867079841' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1867079841'>[root@condor-ce-chihsun2 ~]# openssl x509 -in /tmp/x509up_u1001 -noout
-subject
subject= /C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu 266135/CN=1778410578
[root@condor-ce-chihsun2 ~]# ll /tmp/x509up_u1001
-rw-------. 1 localuser localuser 3616 Nov 24 13&#58;15 /tmp/x509up_u1001

But it seems I have defined the map file.

Best Regard
Edward Wu
ASGC

2017-11-22 22&#58;57 GMT+01&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1867079841').click(function() {
            $('#detail_1867079841').slideDown("normal");
            $('#show_1867079841').hide();
            $('#hide_1867079841').show();
        });
        $('#hide_1867079841').click(function() {
            $('#detail_1867079841').slideUp();
            $('#hide_1867079841').hide();
            $('#show_1867079841').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='34980#1511387852'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-22T21:57:32+00:00">Nov 22, 2017 09:57 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1511387852">&nbsp;</a></div><pre>Edward,

Yup, I figured that was your setup from your previous comment. The CE job router needs to know the location of your batch system central manager, specifically your collector daemon (JOB_ROUTER_SCHEDD2_POOL), as well as the schedd on your CE that is associated with that collector (JOB_ROUTER_SCHEDD2_NAME). I did not the output of your condor_status command closely enough to see that the schedd name is not actually the CE hostname, it&#39;s &#34;test_queue@....&#34;. So your config should be&#58;

JOB_ROUTER_SCHEDD2_NAME=test_queue@....
JOB_ROUTER_SCHEDD2_POOL=condor-ce-chihsun.twgrid.org&#58;9618

Try that config, run condor_ce_reconfig, re-run condor_ce_trace, and double check your job router logs.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='34980#1511365455'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-22T15:44:15+00:00">Nov 22, 2017 03:44 PM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1511365455">&nbsp;</a></div><pre>Hi Brian,
Let me clarify my setup.
I plan to use condor-ce-chihsun.twgrid.org as center manager and
condor-ce-chihsun2.twgrid.org &#60;<a href='http&#58;//condor-ce-chihsun.twgrid.org/&#62' target='_blank' rel='nofollow'>http&#58;//condor-ce-chihsun.twgrid.org/&#62</a>; as
submitter and CE. But now I also enable submitter (Sched) on
condor-ce-chihsun.twgrid.org for testing.
So JOB_ROUTER_SCHEDD2_POOL set to machine running condor Sched ?

I do what you said&#58;
[root@condor-ce-chihsun2 ~]# cat /etc/condor-ce/config.d/99-local.conf

JOB_ROUTER_SCHEDD2_NAME=$(FULL_HOSTNAME)
JOB_ROUTER_SCHEDD2_POOL=condor-ce-chihsun.twgrid.org&#58;9618
[root@condor-ce-chihsun2 ~]# service condor-ce restart
Redirecting to /bin/systemctl restart condor-ce.service
[root@condor-ce-chihsun2 ~]# su - localuser
Last login&#58; Wed Nov 22 15&#58;24&#58;57 UTC 2017 on pts/1
[localuser@condor-ce-chihsun2 ~]$
_condor_SEC_CLIENT_AUTHENTICATION_METHODS=GSI condor_ce_trace -d
condor-ce-chihsun2.twgrid.org
.......
.......
11/22/17 15&#58;40&#58;56 SharedPortClient&#58; sent connection request to schedd at &#60;
117.103.105.238&#58;9619&#62; for shared port id 330720_d12e_3
Job status&#58; Idle
Querying job status (10/600)
11/22/17 15&#58;40&#58;57 SharedPortClient&#58; sent connection request to schedd at &#60;
117.103.105.238&#58;9619&#62; for shared port id 330720_d12e_3
Job status&#58; Idle
Querying job status (11/600)
11/22/17 15&#58;40&#58;58 SharedPortClient&#58; sent connection request to schedd at &#60;
117.103.105.238&#58;9619&#62; for shared port id 330720_d12e_3
Job status&#58; Idle
.......

<div id='show_705441689' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_705441689'>In JobRouterLog&#58;
11/22/17 15&#58;42&#58;06 Can&#39;t find address for schedd
condor-ce-chihsun2.twgrid.org
11/22/17 15&#58;42&#58;06 ERROR (pool condor-ce-chihsun.twgrid.org&#58;9618) Can&#39;t find
address of schedd
11/22/17 15&#58;42&#58;06 JobRouter failure (src=20.0,route=Local_Condor)&#58; failed
to submit job

Thank you for spend so much time on this.

Best Regard
Edward Wu
ASGC

2017-11-17 1&#58;12 GMT+01&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_705441689').click(function() {
            $('#detail_705441689').slideDown("normal");
            $('#show_705441689').hide();
            $('#hide_705441689').show();
        });
        $('#hide_705441689').click(function() {
            $('#detail_705441689').slideUp();
            $('#hide_705441689').hide();
            $('#show_705441689').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='34980#1510877568'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-17T00:12:48+00:00">Nov 17, 2017 12:12 AM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1510877568">&nbsp;</a></div><pre>Edward,

You shouldn&#39;t configure 50-osg-configure.conf since it&#39;s overwritten by osg-configure. Instead you&#39;ll want to write 99-local.conf in that same directory. You should add these contents to the end of it&#58;

JOB_ROUTER_SCHEDD2_NAME=$(FULL_HOSTNAME)
JOB_ROUTER_SCHEDD2_POOL=condor-ce-chihsun.twgrid.org&#58;9618

After that&#39;s done, restart the condor-ce service and re-submit your condor_ce_trace

N.B. the collector name in the &#96;condor_status -any&#96; output refers to condor-ce-chihsun.twgrid.org, not condor-ce-chihsun2.twgrid.org

- Brian</pre></div><div class='update_description'><i onclick="document.location='34980#1510871712'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-16T22:35:12+00:00">Nov 16, 2017 10:35 PM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1510871712">&nbsp;</a></div><pre>Hi Brian,
I have updated osg-config and condor-ce-trace via webui. And I see
some error in JobrouterLog&#58;
11/16/17 22&#58;12&#58;28 Can&#39;t find address for schedd
11/16/17 22&#58;12&#58;28 ERROR (pool condor-ce-chihsun.twgrid.org&#58;9618) Can&#39;t find
address of schedd
11/16/17 22&#58;12&#58;28 JobRouter failure (src=15.0,route=Local_Condor)&#58; failed
to submit job
Troubleshooting guide only said&#58;
*HTCondor batch systems only*&#58; The following error occurs when the job
router daemon cannot submit the routed job
And by &#39;condor_ce_job_router_info -config&#39; I see&#58;
set_CondorCECollectorHost = ifThenElse(regexp(&#34;&#58;&#34;,&#34;
condor-ce-chihsun2.twgrid.org&#58;9619&#34;),&#34;condor-ce-chihsun2.twgrid.org&#58;9619
&#34;,strcat(&#34;condor-ce-chihsun2.twgrid.org&#58;9619&#34;,&#34;&#58;&#34;,9619));

I show my condor status first&#58;
[localuser@condor-ce-chihsun2 ~]$ condor_status -any
MyType             TargetType         Name

Collector          None               HPC_tt@....
Negotiator         None               NEGOTIATOR
DaemonMaster       None               condor-ce-chihsun.twgrid.org
Submitter          None               localuser@....
Machine            Job                slot1@....
Machine            Job                slot2@....
Scheduler          None
test_queue@....
DaemonMaster       None               condor-ce-chihsun2.twgrid.org
Submitter          None               localuser@....
Scheduler          None
test_queue@....
Accounting         none               &#60;none&#62;
Accounting         none               localuser@....

<div id='show_130883170' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_130883170'>I have both scheduler in condor-ce-chihsun.twgrid.org and
ondor-ce-chihsun2.twgrid.org.

I tried set JOB_ROUTER_SCHEDD2_POOL=condor-ce-chihsun2.twgrid.org&#58;9618
in/etc/condor-ce/config.d/50-osg-configure.conf

11/16/17 22&#58;23&#58;33 ERROR&#58; SECMAN&#58;2007&#58;Failed to end classad message.
11/16/17 22&#58;23&#58;33 ERROR (pool condor-ce-chihsun2.twgrid.org&#58;9618) Can&#39;t
find address of schedd
11/16/17 22&#58;23&#58;33 JobRouter failure (src=15.0,route=Local_Condor)&#58; failed
to submit job
11/16/17 22&#58;23&#58;33 condor_read() failed&#58; recv(fd=8) returned -1, errno = 104
Connection reset by peer, reading 5 bytes from collector at &#60;
117.103.105.238&#58;9618&#62;.
11/16/17 22&#58;23&#58;33 IO&#58; Failed to read packet header
11/16/17 22&#58;23&#58;33 SECMAN&#58; no classad from server, failing

But I can submit locally&#58;
[localuser@condor-ce-chihsun2 ~]$ condor_submit test.jdl
Submitting job(s).
1 job(s) submitted to cluster 10.

[localuser@condor-ce-chihsun2 ~]$ condor_config_val
QUEUE_SUPER_USER_MAY_IMPERSONATE
.*
root@condor-ce-chihsun2 ~]#  condor_ce_config_val JOB_ROUTER_SCHEDD2_NAME
test_queue
[root@condor-ce-chihsun2 ~]#  condor_ce_config_val JOB_ROUTER_SCHEDD2_POOL
condor-ce-chihsun2.twgrid.org&#58;9618
[root@condor-ce-chihsun2 ~]#  condor_ce_config_val JOB_ROUTER_SCHEDD2_SPOOL
/var/lib/condor/spool

Best Regard
Edward Wu
ASGC

2017-11-15 16&#58;35 GMT+01&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_130883170').click(function() {
            $('#detail_130883170').slideDown("normal");
            $('#show_130883170').hide();
            $('#hide_130883170').show();
        });
        $('#hide_130883170').click(function() {
            $('#detail_130883170').slideUp();
            $('#hide_130883170').hide();
            $('#show_130883170').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='34980#1510760119'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-15T15:35:19+00:00">Nov 15, 2017 03:35 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1510760119">&nbsp;</a></div><pre>Edward,

HTCondor-CE should not be running a negotiator since it doesn&#39;t manage
any worker nodes directly (see documentation [1]).

I don&#39;t see any attachments, you&#39;ll have to attach them via the web UI
but if condor_ce_trace is sitting idle, that could mean many things&#58; try
the troubleshooting guide [2].

Most of the osg-configure warnings don&#39;t seem like they&#39;d break your CE
but you should enable your batch system (e.g. 20-condor.ini if you&#39;re
running a condor batch system). Are you associated with an OSG VO?
Because if so, then you&#39;ll also want to fill out 40-siteinfo.ini

- Brian

[1]
<a href='http&#58;//opensciencegrid.github.io/docs/compute-element/troubleshoot-htcondor-ce/#what-to-look-for_1' target='_blank' rel='nofollow'>http&#58;//opensciencegrid.github.io/docs/compute-element/troubleshoot-htcondor-ce/#what-to-look-for_1</a>
[2]
<a href='http&#58;//opensciencegrid.github.io/docs/compute-element/troubleshoot-htcondor-ce/#jobs-stay-idle-on-the-ce' target='_blank' rel='nofollow'>http&#58;//opensciencegrid.github.io/docs/compute-element/troubleshoot-htcondor-ce/#jobs-stay-idle-on-the-ce</a>

On 11/15/2017 04&#58;38 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='34980#1510742291'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-15T10:38:11+00:00">Nov 15, 2017 10:38 AM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1510742291">&nbsp;</a></div><pre>Hi Brian,
After touch some files&#58;

[root@condor-ce-chihsun2 ~]# ll  /etc/grid-security
total 96
-rw-r--r--.  1 root root   234 Nov 15 08&#58;52 ban-mapfile
-rw-r--r--.  1 root root   200 Nov 15 08&#58;52 ban-voms-mapfile
drwxr-xr-x.  2 root root 40960 Oct 16 12&#58;15 certificates
-rw-r--r--.  1 root root    53 Oct 25 13&#58;25 grid-mapfile
-rw-r--r--.  1 root root    60 Nov 15 10&#58;05 gsi-authz.conf
-rw-r--r--.  1 root root  2739 Sep  9 17&#58;55 gsi.conf
-rw-r--r--.  1 root root  1693 Oct 19 12&#58;08 hostcert.pem
-r--------.  1 root root  1704 Oct 19 12&#58;14 hostkey.pem
drwxr-xr-x. 42 root root  4096 Oct 16 12&#58;05 vomsdir
-rw-r--r--.  1 root root     0 Nov 15 10&#58;05 voms-mapfile

Now I can submit job by condor_ce_trace by localuser. But it is idle.

In /var/log/condor-ce/SchedLog&#58;
11/15/17 10&#58;26&#58;07 Job 11.0 released from hold&#58; Data files spooled
11/15/17 10&#58;26&#58;07 Number of Active Workers 0
11/15/17 10&#58;26&#58;08 Number of Active Workers 0
11/15/17 10&#58;26&#58;09 Number of Active Workers 0
11/15/17 10&#58;26&#58;10 Number of Active Workers 0
11/15/17 10&#58;26&#58;11 Number of Active Workers 0
11/15/17 10&#58;26&#58;12 Number of Active Workers 0
11/15/17 10&#58;26&#58;12 TransferQueueManager stats&#58; active up=0/10 down=0/10;
waiting up=0 down=0; wait time up=0s down=0s
11/15/17 10&#58;26&#58;12 TransferQueueManager upload 1m I/O load&#58; 0 bytes/s  0.000
disk load  0.000 net load
11/15/17 10&#58;26&#58;12 TransferQueueManager download 1m I/O load&#58; 0 bytes/s
0.000 disk load  0.000 net load
11/15/17 10&#58;26&#58;12 Can&#39;t find address for negotiator
11/15/17 10&#58;26&#58;12 Failed to send RESCHEDULE to unknown daemon&#58;

<div id='show_1821863907' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1821863907'>Should I define negotiator in /etc/condor-ce ?

I also see a line in /var/log/message&#58;

Nov 15 09&#58;31&#58;48 condor-ce-chihsun2 systemd&#58; Starting HTCondor CE...
Nov 15 09&#58;31&#58;48 condor-ce-chihsun2 condor_ce_startup&#58; WARNING&#58;
osg-configure has not been run, degrading the functionality of the CE.
Please run &#39;osg-configure -c&#39; and restart condor-ce.

So, I do

[root@condor-ce-chihsun2 ~]# osg-configure -c
WARNING  No max_wall_time specified for some sections; defaulting to 1440.
Add &#39;max_wall_time=1440&#39; to the following section(s) to clear this warning&#58;
&#39;Subcluster testCE&#39;
WARNING  Option &#39;sponsor&#39; in section &#39;Site Information&#39; located in
/etc/osg/config.d/40-siteinfo.ini&#58; Can&#39;t currently check VOs in sponsor
setting because the /var/lib/osg/user-vo-map is empty. If you are
configuring osg components, this may be resolved when osg-configure runs
the appropriate script to generate this file later in the configuration
process
WARNING  Squid location is set to UNAVAILABLE.  Although this is
allowed, most jobs function better and use less bandwidth
when a squid proxy is available
WARNING  OSG_APP (&#34;app_dir&#34; in the [Storage]) section is not configured. If
it is not available, explicitly set it to UNSET. Otherwise, point it to the
directory VO software can be obtained from.
WARNING  Option &#39;worker_node_temp&#39; in section &#39;Storage&#39; located in
/etc/osg/config.d/10-storage.ini&#58; worker_node_temp is blank, this is okay
if you&#39;ve set your job manager to set this dynamically, otherwise jobs may
fail to run
CRLs exist, skipping fetch-crl invocation
WARNING  Could not determine default allowed VOs for subclusters/resource
entries.
WARNING  Install vo-client-lcmaps-voms to obtain default mappings for VOs,
and/or create your own mapfile at /etc/grid-security/voms-mapfile.
WARNING  No max_wall_time specified for some sections; defaulting to 1440.
Add &#39;max_wall_time=1440&#39; to the following section(s) to clear this warning&#58;
&#39;Subcluster testCE&#39;
WARNING  CE install detected, but no batch systems are enabled in any of
the *.ini files. osg-configure will not configure any of the batch systems.
This may lead to your CE being unable to run jobs.
/usr/sbin/osg-configure completed

Are there any warnings which may cause failure for CE ?
I also attach the osg-profiles and condor-ce-tracer.

Best Regard
Edward Wu
ASGC

2017-11-14 20&#58;23 GMT+01&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1821863907').click(function() {
            $('#detail_1821863907').slideDown("normal");
            $('#show_1821863907').hide();
            $('#hide_1821863907').show();
        });
        $('#hide_1821863907').click(function() {
            $('#detail_1821863907').slideUp();
            $('#hide_1821863907').hide();
            $('#show_1821863907').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='34980#1510687397'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-14T19:23:17+00:00">Nov 14, 2017 07:23 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1510687397">&nbsp;</a></div><pre>Do you see any errors in journalctl related to lcmaps? It looks like I
missed that you also don&#39;t have a /etc/grid-security/ban-voms-mapfile.
Can you touch that, restart the CE, and re-run condor_ce_trace?

Could you provide an updated osg-system-profiler? Those files should
have been placed with our packaging.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='34980#1510685952'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-14T18:59:12+00:00">Nov 14, 2017 06:59 PM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1510685952">&nbsp;</a></div><pre>Hi Brian,
Ok, I did it.
[localuser@condor-ce-chihsun2 ~]$ ll /etc/grid-security/ban-mapfile
-rw-r--r--. 1 root root 234 Nov 14 18&#58;54 /etc/grid-security/ban-mapfile

[localuser@condor-ce-chihsun2 ~]$
_condor_SEC_CLIENT_AUTHENTICATION_METHODS=GSI condor_ce_trace -d
condor-ce-chihsun2.twgrid.org
11/14/17 18&#58;55&#58;07 Result of reading /etc/issue&#58;  &#92;S

11/14/17 18&#58;55&#58;07 Result of reading /etc/redhat-release&#58;  CentOS Linux
release 7.4.1708 (Core)

11/14/17 18&#58;55&#58;07 Using processor count&#58; 1 processors, 1 CPUs, 0 HTs
11/14/17 18&#58;55&#58;07 Enumerating interfaces&#58; lo 127.0.0.1 up
11/14/17 18&#58;55&#58;07 Enumerating interfaces&#58; eth0 117.103.105.238 up
11/14/17 18&#58;55&#58;07 Enumerating interfaces&#58; lo &#58;&#58;1 up
11/14/17 18&#58;55&#58;07 Enumerating interfaces&#58; eth0 fe80&#58;&#58;f816&#58;3eff&#58;fedc&#58;d423 up
Testing HTCondor-CE collector connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Session ID&#58;                  condor-ce-chihsun2&#58;226358&#58;1510685707&#58;3
Instruction&#58;                 READ
Command&#58;                     60020
Encryption&#58;                  none
Integrity&#58;                   none
Authentication&#58;              none
Remote Mapping&#58;              unauthenticated@unmapped
Authorized&#58;                  TRUE

********************
- Successful ping of collector on &#60;117.103.105.238&#58;9619&#62;.

11/14/17 18&#58;55&#58;07 Will use TCP to update collector
<div id='show_2139762690' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2139762690'>condor-ce-chihsun2.twgrid.org &#60;117.103.105.238&#58;9619&#62;
11/14/17 18&#58;55&#58;07 Trying to query collector &#60;117.103.105.238&#58;9619&#62;
Testing HTCondor-CE schedd connectivity.
***** condor_ping output *****
WRITE failed!
SECMAN&#58;2010&#58;Received &#34;DENIED&#34; from server for user gsi@unmapped using
method GSI.

********************
- Failed ping of schedd on &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9619+[--1]-9619&noUDP&sock=226304_2045_3
<font color='#7F7E6F'>&#62;.</font>

********************************************************************************
2017-11-14 18&#58;55&#58;07 Failed to ping &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9
619+[--1]-9619&noUDP&sock=226304_2045_3&#62;; authorization check exited with
code
1.
********************************************************************************

Best Regard
Edward Wu
ASGC

2017-11-14 18&#58;08 GMT+01&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_2139762690').click(function() {
            $('#detail_2139762690').slideDown("normal");
            $('#show_2139762690').hide();
            $('#hide_2139762690').show();
        });
        $('#hide_2139762690').click(function() {
            $('#detail_2139762690').slideUp();
            $('#hide_2139762690').hide();
            $('#show_2139762690').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='34980#1510679280'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-14T17:08:00+00:00">Nov 14, 2017 05:08 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1510679280">&nbsp;</a></div><pre>I just noticed this error in your osg-profile&#58;

2017-09-21 18&#58;36&#58;13,249 INFO Writing /etc/lcmaps.db
2017-09-21 18&#58;36&#58;13,292 ERROR vomsmap authorization requested but /etc/grid-security/ban-mapfile was not found.
This will cause all mappings to fail.
Please reinstall lcmaps &#62;= 1.6.6-1.3 or create a blank /etc/grid-security/ban-mapfile yourself.
2017-09-21 18&#58;36&#58;13,292 ERROR vomsmap authorization requested but /etc/grid-security/ban-voms-mapfile was not found.
This will cause all mappings to fail.
Please reinstall lcmaps &#62;= 1.6.6-1.3 or create a blank /etc/grid-security/ban-voms-mapfile yourself.
2017-09-21 18&#58;36&#58;13,373 INFO condor-ce is not running -- skipping reconfigure

Could you &#96;touch /etc/grid-security/ban-mapfile&#96; as root, restart the condor-ce service, then re-run that condor_ce_trace command  as localuser?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='34980#1510678755'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-14T16:59:15+00:00">Nov 14, 2017 04:59 PM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1510678755">&nbsp;</a></div><pre>Hi Brian,
It is &#39;-d&#39; but &#39;-r&#39; right? it seems my authentication is failed.

[localuser@condor-ce-chihsun2 ~]$
_condor_SEC_CLIENT_AUTHENTICATION_METHODS=GSI condor_ce_trace -d
condor-ce-chihsun2.twgrid.org
11/14/17 16&#58;54&#58;27 Result of reading /etc/issue&#58;  &#92;S

11/14/17 16&#58;54&#58;27 Result of reading /etc/redhat-release&#58;  CentOS Linux
release 7.4.1708 (Core)

11/14/17 16&#58;54&#58;27 Using processor count&#58; 1 processors, 1 CPUs, 0 HTs
11/14/17 16&#58;54&#58;27 Enumerating interfaces&#58; lo 127.0.0.1 up
11/14/17 16&#58;54&#58;27 Enumerating interfaces&#58; eth0 117.103.105.238 up
11/14/17 16&#58;54&#58;27 Enumerating interfaces&#58; lo &#58;&#58;1 up
11/14/17 16&#58;54&#58;27 Enumerating interfaces&#58; eth0 fe80&#58;&#58;f816&#58;3eff&#58;fedc&#58;d423 up
Testing HTCondor-CE collector connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Session ID&#58;                  condor-ce-chihsun2&#58;221749&#58;1510678467&#58;115
Instruction&#58;                 READ
Command&#58;                     60020
Encryption&#58;                  none
Integrity&#58;                   none
Authentication&#58;              none
Remote Mapping&#58;              unauthenticated@unmapped
Authorized&#58;                  TRUE

********************
- Successful ping of collector on &#60;117.103.105.238&#58;9619&#62;.

11/14/17 16&#58;54&#58;27 Will use TCP to update collector
condor-ce-chihsun2.twgrid.org &#60;117.103.105.238&#58;9619&#62;
11/14/17 16&#58;54&#58;27 Trying to query collector &#60;117.103.105.238&#58;9619&#62;
<div id='show_1817946482' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1817946482'>Testing HTCondor-CE schedd connectivity.
***** condor_ping output *****
WRITE failed!
SECMAN&#58;2010&#58;Received &#34;DENIED&#34; from server for user gsi@unmapped using
method GSI.

********************
- Failed ping of schedd on &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9619+[--1]-9619&noUDP&sock=221695_bc44_3
<font color='#7F7E6F'>&#62;.</font>

********************************************************************************
2017-11-14 16&#58;54&#58;27 Failed to ping &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9
619+[--1]-9619&noUDP&sock=221695_bc44_3&#62;; authorization check exited with
code
1.
********************************************************************************
[localuser@condor-ce-chihsun2 ~]$
_condor_SEC_CLIENT_AUTHENTICATION_METHODS=GSI condor_ce_trace -d
condor-ce-chihsun2.twgrid.org
11/14/17 16&#58;55&#58;21 Result of reading /etc/issue&#58;  &#92;S

11/14/17 16&#58;55&#58;21 Result of reading /etc/redhat-release&#58;  CentOS Linux
release 7.4.1708 (Core)

11/14/17 16&#58;55&#58;21 Using processor count&#58; 1 processors, 1 CPUs, 0 HTs
11/14/17 16&#58;55&#58;21 Enumerating interfaces&#58; lo 127.0.0.1 up
11/14/17 16&#58;55&#58;21 Enumerating interfaces&#58; eth0 117.103.105.238 up
11/14/17 16&#58;55&#58;21 Enumerating interfaces&#58; lo &#58;&#58;1 up
11/14/17 16&#58;55&#58;21 Enumerating interfaces&#58; eth0 fe80&#58;&#58;f816&#58;3eff&#58;fedc&#58;d423 up
Testing HTCondor-CE collector connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Session ID&#58;                  condor-ce-chihsun2&#58;221749&#58;1510678521&#58;118
Instruction&#58;                 READ
Command&#58;                     60020
Encryption&#58;                  none
Integrity&#58;                   none
Authentication&#58;              none
Remote Mapping&#58;              unauthenticated@unmapped
Authorized&#58;                  TRUE

********************
- Successful ping of collector on &#60;117.103.105.238&#58;9619&#62;.

11/14/17 16&#58;55&#58;21 Will use TCP to update collector
condor-ce-chihsun2.twgrid.org &#60;117.103.105.238&#58;9619&#62;
11/14/17 16&#58;55&#58;21 Trying to query collector &#60;117.103.105.238&#58;9619&#62;
Testing HTCondor-CE schedd connectivity.
***** condor_ping output *****
WRITE failed!
SECMAN&#58;2010&#58;Received &#34;DENIED&#34; from server for user gsi@unmapped using
method GSI.

********************
- Failed ping of schedd on &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9619+[--1]-9619&noUDP&sock=221695_bc44_3
<font color='#7F7E6F'>&#62;.</font>

********************************************************************************
2017-11-14 16&#58;55&#58;21 Failed to ping &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9
619+[--1]-9619&noUDP&sock=221695_bc44_3&#62;; authorization check exited with
code
1.
********************************************************************************

Best Regard
Edward Wu
ASGC

2017-11-14 17&#58;26 GMT+01&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1817946482').click(function() {
            $('#detail_1817946482').slideDown("normal");
            $('#show_1817946482').hide();
            $('#hide_1817946482').show();
        });
        $('#hide_1817946482').click(function() {
            $('#detail_1817946482').slideUp();
            $('#hide_1817946482').hide();
            $('#show_1817946482').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='34980#1510676772'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-14T16:26:12+00:00">Nov 14, 2017 04:26 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1510676772">&nbsp;</a></div><pre>Edward,

That&#39;s correct, when querying the collector (and the schedd for that
matter) authentication isn&#39;t performed. However, we test the ability to
WRITE (see the instruction line) to the schedd because WRITE permission
is required for submitting jobs. You&#39;ll notice that it is also
performing file system (FS) authentication, which isn&#39;t actually what we
want since we&#39;ll want to be testing the certificate authentication
chain. So instead, run the following as localuser&#58;

_condor_SEC_CLIENT_AUTHENTICATION_METHODS=GSI condor_ce_trace -r $(hostname)

As for there being no machines, that&#39;s expected. The CE doesn&#39;t manage
any worker nodes directly, instead it acts as a public interface to
accept incoming jobs then route them to the underlying batch system that
manages the worker nodes.

- Brian</pre></div><div class='update_description'><i onclick="document.location='34980#1510656611'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-14T10:50:11+00:00">Nov 14, 2017 10:50 AM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1510656611">&nbsp;</a></div><pre>Hi Brian,
I can submit job by condor_ce_trace, but it seems the authentication
of condor_ce collector is not mapped, while sched is mapped.

By voms proxy info&#58;

[root@condor-ce-chihsun2 ~]# su - localuser
Last login&#58; Tue Nov 14 08&#58;37&#58;42 UTC 2017 on pts/1
[localuser@condor-ce-chihsun2 ~]$ voms-proxy-info
subject   &#58; /C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu 266135/CN=1123363983
issuer    &#58; /C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu 266135
identity  &#58; /C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu 266135
type      &#58; RFC compliant proxy
strength  &#58; 1024 bits
path      &#58; /tmp/x509up_u1001
timeleft  &#58; 9&#58;41&#58;00

The whole part of condor_ce_trrace is attached.

Testing HTCondor-CE collector connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Session ID&#58;                  condor-ce-chihsun2&#58;221749&#58;1510649435&#58;10
Instruction&#58;                 READ
Command&#58;                     60020
Encryption&#58;                  none
Integrity&#58;                   none
Authentication&#58;              none
Remote Mapping&#58;              unauthenticated@unmapped
Authorized&#58;                  TRUE

********************
- Successful ping of collector on &#60;117.103.105.238&#58;9619&#62;.

<div id='show_131188294' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_131188294'>11/14/17 08&#58;50&#58;35 Will use TCP to update collector
condor-ce-chihsun2.twgrid.org &#60;117.103.105.238&#58;9619&#62;
11/14/17 08&#58;50&#58;35 Trying to query collector &#60;117.103.105.238&#58;9619&#62;
Testing HTCondor-CE schedd connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Session ID&#58;                  condor-ce-chihsun2&#58;221774&#58;1510649435&#58;5
Instruction&#58;                 WRITE
Command&#58;                     60021
Encryption&#58;                  none
Integrity&#58;                   MD5
Authenticated using&#58;         FS
All authentication methods&#58;  FS,GSI
Remote Mapping&#58;              localuser@....
Authorized&#58;                  TRUE

I can not condr_ce_q by normal user as well.

[localuser@condor-ce-chihsun2 ~]$ condor_ce_q

-- Failed to fetch ads from&#58; &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9619+[--1]-9619&noUDP&sock=221695_bc44_3&#62;
&#58; condor-ce-chihsun2.twgrid.org
SECMAN&#58;2007&#58;Failed to received post-auth ClassAd

But I can do it by root&#58;

[root@condor-ce-chihsun2 ~]# condor_ce_q

-- Schedd&#58; condor-ce-chihsun2.twgrid.org &#58; &#60;117.103.105.238&#58;13866&#62; @
11/14/17 10&#58;43&#58;19
OWNER     BATCH_NAME    SUBMITTED   DONE   RUN    IDLE   HOLD  TOTAL JOB_IDS
localuser CMD&#58; env    11/14 08&#58;26      _      _      _      3      3 7.0
... 9.

3 jobs; 0 completed, 0 removed, 0 idle, 0 running, 3 held, 0 suspended

But it said there are no machines.

[root@condor-ce-chihsun2 ~]# condor_ce_q 7 -be

-- Schedd&#58; condor-ce-chihsun2.twgrid.org &#58; &#60;117.103.105.238&#58;13866&#62;
The Requirements expression for job 7.000 is

true && TARGET.OPSYS == &#34;LINUX&#34; && TARGET.ARCH == &#34;X86_64&#34; &&
TARGET.HasFileTransfer && TARGET.Disk &#62;= RequestDisk &&
TARGET.Memory &#62;= RequestMemory

Job 7.000 defines the following attributes&#58;

DiskUsage = 1
ImageSize = 100
RequestDisk = DiskUsage
RequestMemory = ifthenelse(MemoryUsage =!= undefined,MemoryUsage,(
ImageSize + 1023 ) / 1024)

The Requirements expression for job 7.000 reduces to these conditions&#58;

Slots
Step    Matched  Condition
-----  --------  ---------
[1]           0  TARGET.OPSYS == &#34;LINUX&#34;
[3]           0  TARGET.ARCH == &#34;X86_64&#34;
[5]           0  TARGET.HasFileTransfer
[7]           0  TARGET.Disk &#62;= RequestDisk
[9]           0  TARGET.Memory &#62;= RequestMemory

007.000&#58;  Job is held.

Hold reason&#58; HTCondor-CE held job due to no matching routes, route job
limit, or route failure threshold; see &#39;HTCondor-CE Troubleshooting Guide&#39;

007.000&#58;  Run analysis summary ignoring user priority.  Of 0 machines,
0 are rejected by your job&#39;s requirements
0 reject your job because of their own requirements
0 match and are already running your jobs
0 match but are serving other users
0 are available to run your job

WARNING&#58;  Be advised&#58;
No machines matched the jobs&#39;s constraints

Best Regard
Edward Wu
ASGC

2017-11-13 18&#58;41 GMT+01&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_131188294').click(function() {
            $('#detail_131188294').slideDown("normal");
            $('#show_131188294').hide();
            $('#hide_131188294').show();
        });
        $('#hide_131188294').click(function() {
            $('#detail_131188294').slideUp();
            $('#hide_131188294').hide();
            $('#show_131188294').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='34980#1510594874'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-13T17:41:14+00:00">Nov 13, 2017 05:41 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1510594874">&nbsp;</a></div><pre>Edward,

The condor_mapfile is consulted first and if the proxy associated with
the request doesn&#39;t match any of the DNs listed before the
GSS_ASSIST_GRIDMAP line, HTCondor-CE uses the LCMAPS VOMS library to do
the authentication, which uses the grid-mapfile if one exists.

I wouldn&#39;t expect condor_ce_reconfig to work as a normal user since only
root and the condor users should be able to administer htcondor-ce. It&#39;s
a little strange that you&#39;re not being mapped, could you run
&#96;voms-proxy-info&#96; as the regular user? It may be a cache issue since
credentials are cached for 30 min by default -- restart the condor-ce
service to clear the cache then trying submitting another job (try
&#96;condor_ce_trace -d $(hostname)&#96;) instead of condor_ce_run.

- Brian</pre></div><div class='update_description'><i onclick="document.location='34980#1510563913'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-13T09:05:13+00:00">Nov 13, 2017 09:05 AM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1510563913">&nbsp;</a></div><pre>Hi Brian,
So what is the difference between /etc/condor-ce/condor_mapfile and
/etc/grid-security/grid-mapfile ? When I am root, it use host certificate
and check condor_mapfile. But when I am normal user (like a use called
&#34;localuser&#34; in my server), did it check grid-mapfile ? I have written
grid-mapfile, but it seems &#34;localuser&#34; is not mapped via GSI.
[localuser@condor-ce-chihsun2 ~]$ cat /etc/grid-security/grid-mapfile
&#34;/C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu 266135&#34; localuser

[localuser@condor-ce-chihsun2 ~]$ grid-proxy-init
Your identity&#58; /C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu 266135
Enter GRID pass phrase for this identity&#58;
Creating proxy
.........................................................................
Done
Your proxy is valid until&#58; Mon Nov 13 21&#58;03&#58;13 2017
[localuser@condor-ce-chihsun2 ~]$ condor_ce_run -r
condor-ce-chihsun2.twgrid.org&#58;9619 /bin/env
********************************************************************************
2017-11-13 09&#58;00&#58;33 Could not parse job cluster from condor_submit output.
STDOUT&#58; Submitting job(s) STDERR&#58; ERROR&#58; Failed to connect to queue manager
condor-ce-chihsun2.twgrid.org SECMAN&#58;2007&#58;Failed to received post-auth
ClassAd
********************************************************************************
[localuser@condor-ce-chihsun2 ~]$ condor_ce_reconfig ERROR
SECMAN&#58;2010&#58;Received &#34;DENIED&#34; from server for user gsi@unmapped using
method GSI. Can&#39;t send Reconfig command to local master

Best Regard
Edward Wu
ASGC

2017-11-09 20&#58;53 GMT+01&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<div id='show_1641239637' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1641239637'><font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1641239637').click(function() {
            $('#detail_1641239637').slideDown("normal");
            $('#show_1641239637').hide();
            $('#hide_1641239637').show();
        });
        $('#hide_1641239637').click(function() {
            $('#detail_1641239637').slideUp();
            $('#hide_1641239637').hide();
            $('#show_1641239637').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='34980#1510257191'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-09T19:53:11+00:00">Nov 9, 2017 07:53 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1510257191">&nbsp;</a></div><pre>This configuration&#58;
<a href='https&#58;//github.com/opensciencegrid/htcondor-ce/blob/master/config/01-ce-auth.conf#L15-L16' target='_blank' rel='nofollow'>https&#58;//github.com/opensciencegrid/htcondor-ce/blob/master/config/01-ce-auth.conf#L15-L16</a>

Combined with this configuration&#58;
<a href='https&#58;//github.com/opensciencegrid/htcondor-ce/blob/master/config/01-ce-auth.conf#L25-L33' target='_blank' rel='nofollow'>https&#58;//github.com/opensciencegrid/htcondor-ce/blob/master/config/01-ce-auth.conf#L25-L33</a>

Means that the root user is considered a condor administrator and that
the CE daemons located on the host can communicate and register with
other daemons.

- Brian</pre></div><div class='update_description'><i onclick="document.location='34980#1510256114'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-09T19:35:14+00:00">Nov 9, 2017 07:35 PM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1510256114">&nbsp;</a></div><pre>Hi Brain,
Thanks, now I can condor_ce_reconfig. But can you explain why it should
be daemon.opensciencegrid.org &#60;2@....&#62; ???

Best Regard
Edward Wu
ASGC

2017-11-09 20&#58;23 GMT+01&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='34980#1510255415'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-09T19:23:35+00:00">Nov 9, 2017 07:23 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1510255415">&nbsp;</a></div><pre>Ah, I see the problem and it&#39;s my fault for posting an incorrect configuration line earlier. Instead of this top line in your condor_mapfile&#58;

GSI &#34;^&#92;/C=TW&#92;/O&#92;=AS&#92;/OU&#92;=GRID&#92;/CN&#92;=(host&#92;/)?([A-Za-z0-9.&#92;-]*)$&#34; &#92;2@....

It should read&#58;

GSI &#34;^&#92;/C=TW&#92;/O&#92;=AS&#92;/OU&#92;=GRID&#92;/CN&#92;=(host&#92;/)?([A-Za-z0-9.&#92;-]*)$&#34; &#92;2@....</pre></div><div class='update_description'><i onclick="document.location='34980#1510253251'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-09T18:47:31+00:00">Nov 9, 2017 06:47 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1510253251">&nbsp;</a></div><pre>Brian, I&#39;ve added the ZIP files, but I had to do the .txt extension.  You should be able to change the extension back to just ZIP and it will be ok.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='34980#1510243387'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-09T16:03:07+00:00">Nov 9, 2017 04:03 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1510243387">&nbsp;</a></div><pre>Edward,

I don&#39;t see the attachments, could you attach them via the web UI?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='34980#1510241892'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-09T15:38:12+00:00">Nov 9, 2017 03:38 PM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1510241892">&nbsp;</a></div><pre>Hi Brian,
I already restart.
[root@condor-ce-chihsun2 ~]# service condor-ce restart
Redirecting to /bin/systemctl restart condor-ce.service
[root@condor-ce-chihsun2 ~]# condor_ce_reconfig
ERROR
SECMAN&#58;2010&#58;Received &#34;DENIED&#34; from server for user
condor-ce-chihsun2.twgrid.org@.... using method GSI.
Can&#39;t send Reconfig command to local master

I also attach all my condor and condor-ce config.

Best Regard
Edward Wu
ASGC

2017-11-08 17&#58;57 GMT+01&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='34980#1510160226'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-08T16:57:06+00:00">Nov 8, 2017 04:57 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1510160226">&nbsp;</a></div><pre>Edward,

No, you do not need to modify /etc/condor-ce/config.d/01-ce-auth.conf since the condor_mapfile should map your host certificate to condor-ce-chihsun2.twgrid.org@..... Did you make sure to restart your CE? Could you give me the contents of /etc/condor-ce/condor_mapfile?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='34980#1510120390'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-08T05:53:10+00:00">Nov 8, 2017 05:53 AM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1510120390">&nbsp;</a></div><pre>Hi Brian,
I got this&#58;
[root@condor-ce-chihsun2 ~]# condor_ce_reconfig
ERROR
SECMAN&#58;2010&#58;Received &#34;DENIED&#34; from server for user
condor-ce-chihsun2.twgrid.org@.... using method GSI.
Can&#39;t send Reconfig command to local master
[root@condor-ce-chihsun2 ~]# openssl x509 -in
/etc/grid-security/hostcert.pem -noout -subject
subject= /C=TW/O=AS/OU=GRID/CN=condor-ce-chihsun2.twgrid.org

Because we do not have any domain name like opensciencegrid.org in these
testbed. Should I also modify something
in /etc/condor-ce/config.d/01-ce-auth.conf ?

Best Regard
Edward Wu
ASGC

2017-11-07 23&#58;09 GMT+01&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='34980#1510092595'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-07T22:09:55+00:00">Nov 7, 2017 10:09 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1510092595">&nbsp;</a></div><pre>Edward,

I&#39;m sorry, I didn&#39;t realize you were running as root. In this case, you&#39;ll want to insert a line like this (<a href='https&#58;//github.com/opensciencegrid/htcondor-ce/blob/master/config/condor_mapfile#L1' target='_blank' rel='nofollow'>https&#58;//github.com/opensciencegrid/htcondor-ce/blob/master/config/condor_mapfile#L1</a>) to /etc/condor-ce/condor_mapfile to the top of the file. The middle field is a regex that matches your host certificate, which you should be able to find with &#96;openssl x509 -in /etc/grid-security/hostcert.pem -noout -subject&#96;. If you haven&#39;t changed your hostcert since 10/03 (corresponding to the line in your osg-profile), the line should look something like this&#58;

GSI &#34;^&#92;/C=TW&#92;/O&#92;=AS&#92;/OU&#92;=GRID&#92;/CN&#92;=(host&#92;/)?([A-Za-z0-9.&#92;-]*)$&#34; &#92;2@....

After that, restart condor-ce and try again.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='34980#1509695590'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-03T07:53:10+00:00">Nov 3, 2017 07:53 AM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1509695590">&nbsp;</a></div><pre>Sorry I try to solve it but I still can not pass authentication.

[root@condor-ce-chihsun2 ~]# voms-proxy-init -key .globus/userkey.pem -cert
.globus/usercert.pem
Enter GRID pass phrase&#58;
Your identity&#58; /C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu 266135
Creating proxy .......................... Done

Your proxy is valid until Fri Nov  3 19&#58;50&#58;41 2017
[root@condor-ce-chihsun2 ~]# cat /etc/grid-security/grid-mapfile
&#34;/C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu 266135&#34; localuser
[root@condor-ce-chihsun2 ~]# condor_ce_reconfig
ERROR
SECMAN&#58;2010&#58;Received &#34;DENIED&#34; from server for user gsi@unmapped using
method GSI.
Can&#39;t send Reconfig command to local master

Best Regard
Edward Wu
ASGC

2017-11-02 14&#58;59 GMT+01&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='34980#1509631178'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-02T13:59:38+00:00">Nov 2, 2017 01:59 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1509631178">&nbsp;</a></div><pre>Edward,

Do you have a response for Brian&#39;s last set of questions?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='34980#1509028361'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T14:32:41+00:00">Oct 26, 2017 02:32 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1509028361">&nbsp;</a></div><pre>Edward,

Have you created a proxy with voms-proxy-init? Do you have a certificate associated with a VO? If not, you&#39;ll have to add your cert DN to /etc/grid-security/grid-mapfile (see this section&#58; <a href='http&#58;//opensciencegrid.github.io/docs/security/lcmaps-voms-authentication/#mapping-users' target='_blank' rel='nofollow'>http&#58;//opensciencegrid.github.io/docs/security/lcmaps-voms-authentication/#mapping-users</a>). As for the missing subcluster, see this section&#58; <a href='http&#58;//opensciencegrid.github.io/docs/other/configuration-with-osg-configure/#subcluster-resource-entry.' target='_blank' rel='nofollow'>http&#58;//opensciencegrid.github.io/docs/other/configuration-with-osg-configure/#subcluster-resource-entry.</a>

- Brian</pre></div><div class='update_description'><i onclick="document.location='34980#1509009791'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T09:23:11+00:00">Oct 26, 2017 09:23 AM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1509009791">&nbsp;</a></div><pre>Hi Brian,
I think my authentication setting is not done. I get this&#58;
[root@condor-ce-chihsun2 ~]# condor_ce_reconfig
ERROR
SECMAN&#58;2010&#58;Received &#34;DENIED&#34; from server for user gsi@unmapped using
method GSI.
Can&#39;t send Reconfig command to local master

I have install LCMAPS VOMS plugin
<a href='http&#58;//opensciencegrid.github.io/docs/security/lcmaps-voms-authentication/' target='_blank' rel='nofollow'>http&#58;//opensciencegrid.github.io/docs/security/lcmaps-voms-authentication/</a>
and add vo to /usr/share/osg/voms-mapfile-default
But when I osg-configure -v
[root@condor-ce-chihsun2 ~]# osg-configure -v
ERROR    On a CE but no valid &#39;Subcluster&#39; or &#39;Resource Entry&#39; sections
defined. This is required to advertise the capabilities of your cluster to
the central collector. Jobs may not be sent to this CE.
CRITICAL Error in InfoServicesConfiguration while parsing configuration
CRITICAL Exception&#58; No Subcluster or Resource Entry sections
Error in InfoServicesConfiguration while parsing configuration
You may be able to get more details rerunning /usr/sbin/osg-configure with
the -d option and/or by examining /var/log/osg/osg-configure.log

Where to define &#39;Subcluster&#39; or &#39;Resource Entry&#39; ? And what else I should
set for authentication ?Thank you.

Best Regard
Edward Wu
ASGC

2017-10-25 17&#58;30 GMT+02&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='34980#1508431120'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-19T16:38:40+00:00">Oct 19, 2017 04:38 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1508431120">&nbsp;</a></div><pre>Edward,

The condor_ce_trace output looks incomplete and/or repeated. Could you just post the output of a single condor_ce_trace run? The condor_ce_run error looks like it may indicate a down schedd. Could you attach /var/log/condor-ce/SchedLog?

Also if you haven&#39;t already, increase the debug level of the CE&#58; <a href='https&#58;//opensciencegrid.github.io/docs/compute-element/troubleshoot-htcondor-ce/#htcondor-ce-troubleshooting-items' target='_blank' rel='nofollow'>https&#58;//opensciencegrid.github.io/docs/compute-element/troubleshoot-htcondor-ce/#htcondor-ce-troubleshooting-items</a>

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='34980#1508419210'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-19T13:20:10+00:00">Oct 19, 2017 01:20 PM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1508419210">&nbsp;</a></div><pre>Hi Kyle and Brian,
Sorry for late response. I have been dealing with another issue.
I reinstalled it and there is no error in trace now. But I got another
error on condor_ce_run, and I am trying to understand it. It seems the
Authorized are true in condor-ce-ping or trace. And the local schedd  can
submit and run jobs. . Do you have any hints?

[localuser@condor-ce-chihsun2 ~]$ condor_ce_run -r
condor-ce-chihsun2.twgrid.org&#58;9619 /bin/env
********************************************************************************
2017-10-19 12&#58;57&#58;07 Could not parse job cluster from condor_submit output.
STDOUT&#58; Submitting job(s)
STDERR&#58;
ERROR&#58; Failed to connect to queue manager condor-ce-chihsun2.twgrid.org
SECMAN&#58;2007&#58;Failed to received post-auth ClassAd

********************************************************************************

[localuser@condor-ce-chihsun2 ~]$ condor_ce_q

-- Failed to fetch ads from&#58; &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9619+[--1]-9619&noUDP&sock=24668_498f_3&#62;
&#58; condor-ce-chihsun2.twgrid.org
SECMAN&#58;2007&#58;Failed to received post-auth ClassAd

[localuser@condor-ce-chihsun2 ~]$ condor_ce_ping -verbose -name
condor-ce-chihsun2.twgrid.org -pool condor-ce-chihsun2.twgrid.org&#58;9619 WRITE
Remote Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Session ID&#58;                  condor-ce-chihsun2&#58;24725&#58;1508417795&#58;21
Instruction&#58;                 WRITE
Command&#58;                     60021
Encryption&#58;                  none
Integrity&#58;                   MD5
Authenticated using&#58;         FS
<div id='show_106003072' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_106003072'>All authentication methods&#58;  FS,GSI
Remote Mapping&#58;              localuser@....
Authorized&#58;                  TRUE

condor_ce_trace&#58;

Testing HTCondor-CE collector connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Session ID&#58;                  condor-ce-chihsun2&#58;24722&#58;1508416512&#58;12
Instruction&#58;                 READ
Command&#58;                     60020
Encryption&#58;                  none
Integrity&#58;                   none
Authentication&#58;              none
Remote Mapping&#58;              unauthenticated@unmapped
Authorized&#58;                  TRUE

********************
- Successful ping of collector on &#60;117.103.105.238&#58;9619&#62;.

Testing HTCondor-CE schedd connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Session ID&#58;                  condor-ce-chihsun2&#58;24725&#58;1508416512&#58;8
Instruction&#58;                 WRITE
Command&#58;                     60021
Encryption&#58;                  none
Integrity&#58;                   MD5
Authenticated using&#58;         FS
All authentication methods&#58;  FS,GSI
Remote Mapping&#58;              localuser@....
Authorized&#58;                  TRUE

********************
- Successful ping of schedd on &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9619+[--1]-9619&noUDP&sock=24668_498f_3
<font color='#7F7E6F'>&#62;.</font>

Job ad, pre-submit&#58;
[
x509UserProxyFQAN = &#34;/C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu
266135/CN=125447844&#34;;
x509UserProxyExpiration = 1508459275;
x509userproxysubject = &#34;/C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu
266135/CN=125447844&#34;;
x509userproxy = &#34;/tmp/x509up_u1001&#34;;
LeaveJobInQueue = ( StageOutFinish &#62; 0 ) isnt true;
Log = &#34;/home/localuser/.log_24824_9oCzSq&#34;;
Err = &#34;/home/localuser/.stderr_24824_svM5fk&#34;;
Out = &#34;/home/localuser/.stdout_24824_EQwizU&#34;;
Args = &#34;&#34;;
Cmd = &#34;/bin/env&#34;
]
Submitting job to schedd &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9619+[--1]-9619&noUDP&sock=24668_498f_3
<font color='#7F7E6F'>&#62;</font>
- Successful submission; cluster ID 3
Resulting job ad&#58;
[
ClusterId = 3;
PeriodicRemove = false;
LocalUserCpu = 0.0;
RemoteUserCpu = 0.0;
StreamErr = false;
HoldReason = &#34;Spooling input data files&#34;;
ExitStatus = 0;
ShouldTransferFiles = &#34;YES&#34;;
LastSuspensionTime = 0;
NumJobStarts = 0;
NumCkpts = 0;
WhenToTransferOutput = &#34;ON_EXIT&#34;;
TargetType = &#34;Machine&#34;;
RemoteWallClockTime = 0.0;
WantCheckpoint = false;
Cmd = &#34;/bin/env&#34;;
CommittedTime = 0;
WantRemoteSyscalls = false;
CurrentHosts = 0;
JobPrio = 0;
RootDir = &#34;/&#34;;
In = &#34;/dev/null&#34;;
DiskUsage = 1;
CommittedSuspensionTime = 0;
ProcId = 0;
PeriodicHold = false;
Log = &#34;/home/localuser/.log_24824_9oCzSq&#34;;
OnExitRemove = true;
PeriodicRelease = false;
CompletionDate = 0;
NumSystemHolds = 0;
CumulativeSuspensionTime = 0;
QDate = 1508416512;
EnteredCurrentStatus = 1508416512;
x509userproxy = &#34;/tmp/x509up_u1001&#34;;
TransferOutputRemaps =
&#34;_condor_stdout=/home/localuser/.stdout_24824_EQwizU;_condor_stderr=/home/localuser/.stderr_24824_svM5fk&#34;;
x509UserProxyExpiration = 1508459275;
CondorVersion = &#34;$CondorVersion&#58; 8.6.6 Sep 18 2017 $&#34;;
MyType = &#34;Job&#34;;
Owner = undefined;
ExitBySignal = false;
JobUniverse = 5;
BufferBlockSize = 32768;
Err = &#34;_condor_stderr&#34;;
NiceUser = false;
CoreSize = -1;
CumulativeSlotTime = 0;
OnExitHold = false;
WantRemoteIO = true;
StreamOut = false;
CommittedSlotTime = 0;
TotalSuspensions = 0;
LocalSysCpu = 0.0;
RemoteSysCpu = 0.0;
LeaveJobInQueue = JobStatus == 4 && ( CompletionDate is UNDDEFINED
|| CompletionDate == 0 || ( ( time() - CompletionDate ) &#60; 864000 ) );
Out = &#34;_condor_stdout&#34;;
RequestCpus = 1;
RequestDisk = DiskUsage;
MinHosts = 1;
Requirements = true && TARGET.OPSYS == &#34;LINUX&#34; && TARGET.ARCH ==
&#34;X86_64&#34; && TARGET.HasFileTransfer && TARGET.Disk &#62;= RequestDisk &&
TARGET.Memory &#62;= RequestMemory;
RequestMemory = ifthenelse(MemoryUsage isnt undefined,MemoryUsage,(
ImageSize + 1023 ) / 1024);
Args = &#34;&#34;;
MaxHosts = 1;
JobStatus = 5;
JobNotification = 0;
BufferSize = 524288;
ImageSize = 100;
NumRestarts = 0;
Iwd = &#34;/home/localuser&#34;;
NumJobCompletions = 0;
HoldReasonCode = 16;
x509UserProxyFQAN = &#34;/C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu
266135/CN=125447844&#34;;
x509userproxysubject = &#34;/C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu
266135/CN=125447844&#34;;
CondorPlatform = &#34;$CondorPlatform&#58; X86_64-CentOS_7.3 $&#34;
]
Spooling cluster 3 files to schedd &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9619+[--1]-9619&noUDP&sock=24668_498f_3
<font color='#7F7E6F'>&#62;</font>
- Successful spooling
Querying job status (1/600)
Job status&#58; Held
Querying job status (2/600)
Job status&#58; Idle
Querying job status (3/600)
Job status&#58; Idle
Querying job status (4/600)
Job status&#58; Idle
Testing HTCondor-CE collector connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Session ID&#58;                  condor-ce-chihsun2&#58;24722&#58;1508416535&#58;15
Instruction&#58;                 READ
Command&#58;                     60020
Encryption&#58;                  none
Integrity&#58;                   none
Authentication&#58;              none
Remote Mapping&#58;              unauthenticated@unmapped
Authorized&#58;                  TRUE

********************
- Successful ping of collector on &#60;117.103.105.238&#58;9619&#62;.

Testing HTCondor-CE schedd connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Session ID&#58;                  condor-ce-chihsun2&#58;24725&#58;1508416535&#58;10
Instruction&#58;                 WRITE
Command&#58;                     60021
Encryption&#58;                  none
Integrity&#58;                   MD5
Authenticated using&#58;         FS
All authentication methods&#58;  FS,GSI
Remote Mapping&#58;              localuser@....
Authorized&#58;                  TRUE

********************
- Successful ping of schedd on &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9619+[--1]-9619&noUDP&sock=24668_498f_3
<font color='#7F7E6F'>&#62;.</font>

Job ad, pre-submit&#58;
[
x509UserProxyFQAN = &#34;/C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu
266135/CN=125447844&#34;;
x509UserProxyExpiration = 1508459275;
x509userproxysubject = &#34;/C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu
266135/CN=125447844&#34;;
x509userproxy = &#34;/tmp/x509up_u1001&#34;;
LeaveJobInQueue = ( StageOutFinish &#62; 0 ) isnt true;
Log = &#34;/home/localuser/.log_24844_nkKq30&#34;;
Err = &#34;/home/localuser/.stderr_24844_FQO43o&#34;;
Out = &#34;/home/localuser/.stdout_24844_5tXcC9&#34;;
Args = &#34;&#34;;
Cmd = &#34;/bin/env&#34;
]
Submitting job to schedd &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9619+[--1]-9619&noUDP&sock=24668_498f_3
<font color='#7F7E6F'>&#62;</font>
- Successful submission; cluster ID 4
Resulting job ad&#58;
[
ClusterId = 4;
PeriodicRemove = false;
LocalUserCpu = 0.0;
RemoteUserCpu = 0.0;
StreamErr = false;
HoldReason = &#34;Spooling input data files&#34;;
ExitStatus = 0;
ShouldTransferFiles = &#34;YES&#34;;
LastSuspensionTime = 0;
NumJobStarts = 0;
NumCkpts = 0;
WhenToTransferOutput = &#34;ON_EXIT&#34;;
TargetType = &#34;Machine&#34;;
RemoteWallClockTime = 0.0;
WantCheckpoint = false;
Cmd = &#34;/bin/env&#34;;
CommittedTime = 0;
WantRemoteSyscalls = false;
CurrentHosts = 0;
JobPrio = 0;
RootDir = &#34;/&#34;;
In = &#34;/dev/null&#34;;
DiskUsage = 1;
CommittedSuspensionTime = 0;
ProcId = 0;
PeriodicHold = false;
Log = &#34;/home/localuser/.log_24844_nkKq30&#34;;
OnExitRemove = true;
PeriodicRelease = false;
CompletionDate = 0;
NumSystemHolds = 0;
CumulativeSuspensionTime = 0;
QDate = 1508416535;
EnteredCurrentStatus = 1508416535;
x509userproxy = &#34;/tmp/x509up_u1001&#34;;
TransferOutputRemaps =
&#34;_condor_stdout=/home/localuser/.stdout_24844_5tXcC9;_condor_stderr=/home/localuser/.stderr_24844_FQO43o&#34;;
x509UserProxyExpiration = 1508459275;
CondorVersion = &#34;$CondorVersion&#58; 8.6.6 Sep 18 2017 $&#34;;
MyType = &#34;Job&#34;;
Owner = undefined;
ExitBySignal = false;
JobUniverse = 5;
BufferBlockSize = 32768;
Err = &#34;_condor_stderr&#34;;
NiceUser = false;
CoreSize = -1;
CumulativeSlotTime = 0;
OnExitHold = false;
WantRemoteIO = true;
StreamOut = false;
CommittedSlotTime = 0;
TotalSuspensions = 0;
LocalSysCpu = 0.0;
RemoteSysCpu = 0.0;
LeaveJobInQueue = JobStatus == 4 && ( CompletionDate is UNDDEFINED
|| CompletionDate == 0 || ( ( time() - CompletionDate ) &#60; 864000 ) );
Out = &#34;_condor_stdout&#34;;
RequestCpus = 1;
RequestDisk = DiskUsage;
MinHosts = 1;
Requirements = true && TARGET.OPSYS == &#34;LINUX&#34; && TARGET.ARCH ==
&#34;X86_64&#34; && TARGET.HasFileTransfer && TARGET.Disk &#62;= RequestDisk &&
TARGET.Memory &#62;= RequestMemory;
RequestMemory = ifthenelse(MemoryUsage isnt undefined,MemoryUsage,(
ImageSize + 1023 ) / 1024);
Args = &#34;&#34;;
MaxHosts = 1;
JobStatus = 5;
JobNotification = 0;
BufferSize = 524288;
ImageSize = 100;
NumRestarts = 0;
Iwd = &#34;/home/localuser&#34;;
NumJobCompletions = 0;
HoldReasonCode = 16;
x509UserProxyFQAN = &#34;/C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu
266135/CN=125447844&#34;;
x509userproxysubject = &#34;/C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu
266135/CN=125447844&#34;;
CondorPlatform = &#34;$CondorPlatform&#58; X86_64-CentOS_7.3 $&#34;
]
Spooling cluster 4 files to schedd &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9619+[--1]-9619&noUDP&sock=24668_498f_3
<font color='#7F7E6F'>&#62;</font>
- Successful spooling
Querying job status (1/600)
Job status&#58; Held
Querying job status (2/600)
Job status&#58; Idle
Querying job status (3/600)
Job status&#58; Idle
Querying job status (4/600)
Job status&#58; Idle
10/19/17 12&#58;36&#58;34 Result of reading /etc/issue&#58;  &#92;S

10/19/17 12&#58;36&#58;34 Result of reading /etc/redhat-release&#58;  CentOS Linux
release 7.4.1708 (Core)

10/19/17 12&#58;36&#58;34 Using processor count&#58; 1 processors, 1 CPUs, 0 HTs
10/19/17 12&#58;36&#58;34 Enumerating interfaces&#58; lo 127.0.0.1 up
10/19/17 12&#58;36&#58;34 Enumerating interfaces&#58; eth0 117.103.105.238 up
10/19/17 12&#58;36&#58;34 Enumerating interfaces&#58; lo &#58;&#58;1 up
10/19/17 12&#58;36&#58;34 Enumerating interfaces&#58; eth0 fe80&#58;&#58;f816&#58;3eff&#58;fedc&#58;d423 up
10/19/17 12&#58;36&#58;34 Will use TCP to update collector
condor-ce-chihsun2.twgrid.org &#60;117.103.105.238&#58;9619&#62;
10/19/17 12&#58;36&#58;34 Trying to query collector &#60;117.103.105.238&#58;9619&#62;
10/19/17 12&#58;36&#58;34 SharedPortClient&#58; sent connection request to schedd at &#60;
117.103.105.238&#58;9619&#62; for shared port id 24668_498f_3
10/19/17 12&#58;36&#58;34 SharedPortClient&#58; sent connection request to schedd at &#60;
117.103.105.238&#58;9619&#62; for shared port id 24668_498f_3
Testing HTCondor-CE collector connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Session ID&#58;                  condor-ce-chihsun2&#58;24722&#58;1508416594&#58;17
Instruction&#58;                 READ
Command&#58;                     60020
Encryption&#58;                  none
Integrity&#58;                   none
Authentication&#58;              none
Remote Mapping&#58;              unauthenticated@unmapped
Authorized&#58;                  TRUE

********************
- Successful ping of collector on &#60;117.103.105.238&#58;9619&#62;.

Testing HTCondor-CE schedd connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.6.6 Sep 18 2017 $
Session ID&#58;                  condor-ce-chihsun2&#58;24725&#58;1508416594&#58;12
Instruction&#58;                 WRITE
Command&#58;                     60021
Encryption&#58;                  none
Integrity&#58;                   MD5
Authenticated using&#58;         FS
All authentication methods&#58;  FS,GSI
Remote Mapping&#58;              localuser@....
Authorized&#58;                  TRUE

********************
- Successful ping of schedd on &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9619+[--1]-9619&noUDP&sock=24668_498f_3
<font color='#7F7E6F'>&#62;.</font>

Job ad, pre-submit&#58;
[
x509UserProxyFQAN = &#34;/C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu
266135/CN=125447844&#34;;
x509UserProxyExpiration = 1508459275;
x509userproxysubject = &#34;/C=TW/O=AS/OU=GRID/CN=Chi Hsun Wu
266135/CN=125447844&#34;;
x509userproxy = &#34;/tmp/x509up_u1001&#34;;
LeaveJobInQueue = ( StageOutFinish &#62; 0 ) isnt true;
Log = &#34;/home/localuser/.log_24864_mhPSEl&#34;;
Err = &#34;/home/localuser/.stderr_24864_SDOnX1&#34;;
Out = &#34;/home/localuser/.stdout_24864_o10ElD&#34;;
Args = &#34;&#34;;
Cmd = &#34;/bin/env&#34;
]
Submitting job to schedd &#60;
117.103.105.238&#58;9619?addrs=117.103.105.238-9619+[--1]-9619&noUDP&sock=24668_498f_3
<font color='#7F7E6F'>&#62;</font>
- Successful submission; cluster ID 5
Resulting job ad&#58;
[
ClusterId = 5;
PeriodicRemove = false;
LocalUserCpu = 0.0;
RemoteUserCpu = 0.0;
StreamErr = false;
HoldReason = &#34;Spooling input data files&#34;;
ExitStatus = 0;
ShouldTransferFiles = &#34;YES&#34;;
LastSuspensionTime = 0;
NumJobStarts = 0;
NumCkpts = 0;
WhenToTransferOutput = &#34;ON_EXIT&#34;;
TargetType = &#34;Machine&#34;;
RemoteWallClockTime = 0.0;
WantCheckpoint = false;
Cmd = &#34;/bin/env&#34;;
CommittedTime = 0;
WantRemoteSyscalls = false;
CurrentHosts = 0;
JobPrio = 0;
RootDir = &#34;/&#34;;
In = &#34;/dev/null&#34;;
DiskUsage = 1;
CommittedSuspensionTime = 0;
ProcId = 0;
PeriodicHold = false;
Log = &#34;/home/localuser/.log_24864_mhPSEl&#34;;
OnExitRemove = true;
PeriodicRelease = false;
CompletionDate = 0;
NumSystemHolds = 0;
CumulativeSuspensionTime = 0;
QDate = 1508416594;
EnteredCurrentStatus = 1508416594;
x509userproxy = &#34;/tmp/x509up_u1001&#34;;
TransferOutputRemaps =
&#34;_condor_stdout=/home/localuser/.stdout_24864_o10ElD;_condor_stderr=/home/localuser/.stderr_24864_SDOnX1&#34;;
x509UserProxyExpiration = 1508459275;
CondorVersion = &#34;$CondorVersion&#58; 8.6.6 Sep 18 2017 $&#34;;
MyType = &#34;Job&#34;;
Owner = undefined;
ExitBySignal = false;
JobUniverse = 5;
BufferBlockSize = 32768;
Err = &#34;_condor_stderr&#34;;
NiceUser = false;
CoreSize = -1;
CumulativeSlotTime = 0;
OnExitHold = false;
WantRemoteIO = true;
StreamOut = false;
CommittedSlotTime = 0;
TotalSuspensions = 0;
LocalSysCpu = 0.0;
RemoteSysCpu = 0.0;
LeaveJobInQueue = JobStatus == 4 && ( CompletionDate is UNDDEFINED
|| CompletionDate == 0 || ( ( time() - CompletionDate ) &#60; 864000 ) );
Out = &#34;_condor_stdout&#34;;
10/19/17 12&#58;36&#58;34 SharedPortClient&#58; sent connection request to &#60;
117.103.105.238&#58;9619&#62; for shared port id 24668_498f_3
10/19/17 12&#58;36&#58;34 entering FileTransfer&#58;&#58;SimpleInit
10/19/17 12&#58;36&#58;34 Input files&#58;
10/19/17 12&#58;36&#58;34 FILETRANSFER&#58; protocol &#34;http&#34; handled by
&#34;/usr/libexec/condor/curl_plugin&#34;
10/19/17 12&#58;36&#58;34 FILETRANSFER&#58; protocol &#34;ftp&#34; handled by
&#34;/usr/libexec/condor/curl_plugin&#34;
10/19/17 12&#58;36&#58;34 FILETRANSFER&#58; protocol &#34;file&#34; handled by
&#34;/usr/libexec/condor/curl_plugin&#34;
10/19/17 12&#58;36&#58;34 FILETRANSFER&#58; protocol &#34;data&#34; handled by
&#34;/usr/libexec/condor/data_plugin&#34;
10/19/17 12&#58;36&#58;34 entering FileTransfer&#58;&#58;UploadFiles (final_transfer=0)
10/19/17 12&#58;36&#58;34 entering FileTransfer&#58;&#58;Upload
10/19/17 12&#58;36&#58;34 entering FileTransfer&#58;&#58;DoUpload
10/19/17 12&#58;36&#58;34 DoUpload&#58; sending file /tmp/x509up_u1001
10/19/17 12&#58;36&#58;34 FILETRANSFER&#58; outgoing file_command is 4 for
/tmp/x509up_u1001
10/19/17 12&#58;36&#58;34 Received GoAhead from peer to send /tmp/x509up_u1001 and
all further files.
10/19/17 12&#58;36&#58;34 Sending GoAhead for 117.103.105.238 to receive
/tmp/x509up_u1001 and all further files.
10/19/17 12&#58;36&#58;34 DoUpload&#58; put_x509_delegation() returned 0
10/19/17 12&#58;36&#58;34 DoUpload&#58; sending file /bin/env
10/19/17 12&#58;36&#58;34 FILETRANSFER&#58; outgoing file_command is 1 for /bin/env
10/19/17 12&#58;36&#58;34 ReliSock&#58;&#58;put_file_with_permissions()&#58; going to send
permissions 100755
10/19/17 12&#58;36&#58;34 put_file&#58; going to send from filename /bin/env
10/19/17 12&#58;36&#58;34 put_file&#58; Found file size 28992
10/19/17 12&#58;36&#58;34 put_file&#58; sending 28992 bytes
10/19/17 12&#58;36&#58;34 ReliSock&#58; put_file&#58; sent 28992 bytes
10/19/17 12&#58;36&#58;34 DoUpload&#58; exiting at 3413
10/19/17 12&#58;36&#58;34 SharedPortClient&#58; sent connection request to schedd at &#60;
117.103.105.238&#58;9619&#62; for shared port id 24668_498f_3
10/19/17 12&#58;36&#58;35 SharedPortClient&#58; sent connection request to schedd at &#60;
117.103.105.238&#58;9619&#62; for shared port id 24668_498f_3
10/19/17 12&#58;36&#58;36 SharedPortClient&#58; sent connection request to schedd at &#60;
117.103.105.238&#58;9619&#62; for shared port id 24668_498f_3
10/19/17 12&#58;36&#58;37 SharedPortClient&#58; sent connection request to schedd at &#60;
117.103.105.238&#58;9619&#62; for shared port id 24668_498f_3
10/19/17 12&#58;36&#58;38 SharedPortClient&#58; sent connection request to schedd at &#60;
117.103.105.238&#58;9619&#62; for shared port id 24668_498f_3
10/19/17 12&#58;36&#58;39 SharedPortClient&#58; sent connection request to schedd at &#60;
117.103.105.238&#58;9619&#62; for shared port id 24668_498f_3

Best Regard
Edward Wu
ASGC

2017-10-18 19&#58;02 GMT+02&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_106003072').click(function() {
            $('#detail_106003072').slideDown("normal");
            $('#show_106003072').hide();
            $('#hide_106003072').show();
        });
        $('#hide_106003072').click(function() {
            $('#detail_106003072').slideUp();
            $('#hide_106003072').hide();
            $('#show_106003072').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='34980#1508346136'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-18T17:02:16+00:00">Oct 18, 2017 05:02 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1508346136">&nbsp;</a></div><pre>Edward,

Have you been able to look into this request for Brian?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='34980#1507573962'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-09T18:32:42+00:00">Oct 9, 2017 06:32 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1507573962">&nbsp;</a></div><pre>Edward,

Regarding the condor-ce-trace error, run the command from a directory where you have write access. I haven&#39;t seen the LCAS errors before but it looks like you don&#39;t have the OSG version of lcmaps-plugins-basic installed. Could you make sure that the OSG repositories have better priority than your other repos (<a href='https&#58;//opensciencegrid.github.io/docs/common/yum/#priorities' target='_blank' rel='nofollow'>https&#58;//opensciencegrid.github.io/docs/common/yum/#priorities</a>) and do a reinstallation?</pre></div><div class='update_description'><i onclick="document.location='34980#1507563604'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-09T15:40:04+00:00">Oct 9, 2017 03:40 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1507563604">&nbsp;</a></div><pre>I have transferred the osg-profile.  My apologies for taking so long, I was traveling last week.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='34980#1507059855'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-03T19:44:15+00:00">Oct 3, 2017 07:44 PM UTC</time> by <b>edwardwufast@....</b><a class="anchor" name="1507059855">&nbsp;</a></div><pre>Thank you, here is the profile.

Best Regard
Edward Wu
ASGC

2017-09-28 23&#58;39 GMT+02&#58;00 Open Science Grid FootPrints &#60;
osg@....&#62;&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='34980#1506634771'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-28T21:39:31+00:00">Sep 28, 2017 09:39 PM UTC</time> by <b>Tim Theisen</b><a class="anchor" name="1506634771">&nbsp;</a></div><pre>Please send us the output of osg-system-profiler to help us with troubleshooting.</pre></div><div class='update_description'><i onclick="document.location='34980#1506618727'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-28T17:12:07+00:00">Sep 28, 2017 05:12 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1506618727">&nbsp;</a></div><pre>Adding the software team to this to see if they can help.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='34980#1506033423'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-21T22:37:03+00:00">Sep 21, 2017 10:37 PM UTC</time> by <b>Raynor Moore</b><a class="anchor" name="1506033423">&nbsp;</a></div><pre>From&#58; Wu Edward &#60;edwardwufast@....&#62;
To&#58; goc@....
Subject&#58; condor-ce-trace error
Date-Sent&#58; Thursday, September 21, 2017 11&#58;42 PM +0200

Dear OSG,
      I am Wu Chi Hsun, from ASGC, Taiwan grid site. When I test my new condor-ce, I use condor-ce-trace and there is an error saying I should send
mail to you.

[root@condor-ce-chihsun .globus]# condor_ce_trace --debug condor-ce-chihsun.twgrid.org
09/21/17 21&#58;34&#58;05 Result of reading /etc/issue&#58;  &#92;S

09/21/17 21&#58;34&#58;05 Result of reading /etc/redhat-release&#58;  CentOS Linux release 7.4.1708 (Core)

09/21/17 21&#58;34&#58;05 Using processor count&#58; 2 processors, 2 CPUs, 0 HTs
09/21/17 21&#58;34&#58;05 Enumerating interfaces&#58; lo 127.0.0.1 up
09/21/17 21&#58;34&#58;05 Enumerating interfaces&#58; eth0 117.103.105.242 up
09/21/17 21&#58;34&#58;05 Enumerating interfaces&#58; docker0 172.17.0.1 up
09/21/17 21&#58;34&#58;05 Enumerating interfaces&#58; lo &#58;&#58;1 up
09/21/17 21&#58;34&#58;05 Enumerating interfaces&#58; eth0 fe80&#58;&#58;f816&#58;3eff&#58;fe8a&#58;bcf7 up
09/21/17 21&#58;34&#58;05 Enumerating interfaces&#58; docker0 fe80&#58;&#58;42&#58;8fff&#58;fee5&#58;597 up
09/21/17 21&#58;34&#58;05 Enumerating interfaces&#58; vethba1e166 fe80&#58;&#58;f4f0&#58;89ff&#58;fe70&#58;4e3f up
Testing HTCondor-CE collector connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.6.5 Aug 07 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.6.5 Aug 07 2017 $
Session ID&#58;                  condor-ce-chihsun&#58;1470273&#58;1506029645&#58;10
Instruction&#58;                 READ
Command&#58;                     60020
Encryption&#58;                  none
Integrity&#58;                   none
Authentication&#58;              none
Remote Mapping&#58;              unauthenticated@unmapped
Authorized&#58;                  TRUE

<div id='show_1329811414' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1329811414'>********************
- Successful ping of collector on &#60;117.103.105.242&#58;9619&#62;.

09/21/17 21&#58;34&#58;05 Will use TCP to update collector condor-ce-chihsun.twgrid.org &#60;117.103.105.242&#58;9619&#62;
09/21/17 21&#58;34&#58;05 Trying to query collector &#60;117.103.105.242&#58;9619&#62;
Testing HTCondor-CE schedd connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.6.5 Aug 07 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.6.5 Aug 07 2017 $
Session ID&#58;                  condor-ce-chihsun&#58;1470276&#58;1506029645&#58;8
Instruction&#58;                 WRITE
Command&#58;                     60021
Encryption&#58;                  none
Integrity&#58;                   MD5
Authenticated using&#58;         FS
All authentication methods&#58;  FS,GSI
Remote Mapping&#58;              condor@....
Authorized&#58;                  TRUE

********************
- Successful ping of schedd on &#60;117.103.105.242&#58;9619?addrs=117.103.105.242-9619+[--1]-9619&amp;noUDP&amp;sock=1470214_9ba5_3&#62;.

********************************************************************************
Uncaught exception, please send the following error to goc@....
with a description of the issue&#58;
Traceback (most recent call last)&#58;
  File &#34;/usr/bin/condor_ce_trace&#34;, line 350, in &#60;module&#62;
    main()
  File &#34;/usr/bin/condor_ce_trace&#34;, line 342, in main
    generate_run_script(job_info)
  File &#34;/usr/bin/condor_ce_trace&#34;, line 175, in generate_run_script
    job_info.update(ce.generate_job_files())
  File &#34;/usr/lib/python2.7/site-packages/htcondorce/tools.py&#34;, line 45, in
generate_job_files
    fd, job_info[filetype + &#39;_file&#39;] = tempfile.mkstemp(dir=&#34;.&#34;,
prefix=&#34;.%s_%d_&#34; % (filetype, pid))
  File &#34;/usr/lib64/python2.7/tempfile.py&#34;, line 304, in mkstemp
    return _mkstemp_inner(dir, prefix, suffix, flags)
  File &#34;/usr/lib64/python2.7/tempfile.py&#34;, line 239, in _mkstemp_inner
    fd = _os.open(file, flags, 0600)
OSError&#58; [Errno 13] Permission denied&#58; &#39;./.stdout_1470557_zGKuD3&#39;

*******************************************************************************

By the way, there are also errors on my condor-ce service&#58;

Sep 21 21&#58;12&#58;17 condor-ce-chihsun.twgrid.org htcondor-ce[1470276]&#58; lcas.mod-lcas_init()&#58; Reading LCAS database /etc/lcas/lcas.db
Sep 21 21&#58;12&#58;17 condor-ce-chihsun.twgrid.org htcondor-ce[1470276]&#58; lcas.mod-lcas_init()&#58; Failed to read LCAS database /etc/lcas/lcas.db
Sep 21 21&#58;12&#58;17 condor-ce-chihsun.twgrid.org htcondor-ce[1470276]&#58; LCAS initialization failure.

At the beginning, there is even no lcas. After I installed, it become this error. In fact, I do not what is lcas. Could you please help me on this issue?
Thank you.

Best Regard
Edward Wu
ASGC
</div><script type='text/javascript'>
        $('#show_1329811414').click(function() {
            $('#detail_1329811414').slideDown("normal");
            $('#show_1329811414').hide();
            $('#hide_1329811414').show();
        });
        $('#hide_1329811414').click(function() {
            $('#detail_1329811414').slideUp();
            $('#hide_1329811414').hide();
            $('#show_1329811414').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F34980">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
