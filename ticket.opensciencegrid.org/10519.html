<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[10519] OSG globus_tcp_port_range Inquiry</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=10519" method="post">
<div class="page-header">
    <h3><span class="muted">10519</span> / OSG globus_tcp_port_range Inquiry</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Bob Ball</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Routing to VDT</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2011-10-13</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/10519", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/10519?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/10519?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20OSG%20globus_tcp_port_range%20Inquiry%20ISSUE%3D10519%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='10519#1318528213'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-10-13T17:50:13+00:00">Oct 13, 2011 05:50 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1318528213">&nbsp;</a></div><pre>Since this is now in the hands of Documentation, I will close this ticket.  It can be reopened if needed.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='10519#1317996797'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-10-07T14:13:17+00:00">Oct 7, 2011 02:13 PM UTC</time><a class="anchor" name="1317996797">&nbsp;</a></div><pre>On reading the comments on this issue, no one knows, for sure, the number of ports required.  But the actual counts of &#60;1/job, the upper bound of 2/job, and the actual working case of 10,000 ports open for 4000+ jobs would indicate that 2/job is adequate.  I changed the ComputeElementInstall#Define_Globus_Port_Ranges document to state 2 ports.  (This will be rewritten for Release3.)

-- by James Weichel</pre></div><div class='update_description'><i onclick="document.location='10519#1317911973'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-10-06T14:39:33+00:00">Oct 6, 2011 02:39 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1317911973">&nbsp;</a></div><pre>Jim,

Robert never responded on this ticket and the document needs to be taken by someone, so I&#39;ll assign you to this ticket.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='10519#1316613731'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-09-21T14:02:11+00:00">Sep 21, 2011 02:02 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1316613731">&nbsp;</a></div><pre>Robert,

I&#39;ve not heard a response from you and I know you&#39;re leaving soon.  Is someone else going to take over this document for you?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='10519#1315319884'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-09-06T14:38:04+00:00">Sep 6, 2011 02:38 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1315319884">&nbsp;</a></div><pre>I have added Robert Engel to this ticket.  Robert, since you are the owner of this document in the twiki, could you please look over this ticket and perhaps edit the documentation if that&#39;s the action that is needed?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='10519#1314283507'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-25T14:45:07+00:00">Aug 25, 2011 02:45 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1314283507">&nbsp;</a></div><pre>I guess I leave it to Alain Roy how to dispose of it.  Clearly, the
&#34;guidelines&#34; are far from correct, and, in my view, it would be better
to have reasonable guidelines posted, perhaps something in the range of
1-2 ports per job slot.

bob

On 8/25/2011 8&#58;50 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10519#1314276620'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-25T12:50:20+00:00">Aug 25, 2011 12:50 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1314276620">&nbsp;</a></div><pre>Sorry to be a bother, but I&#39;m not sure what the final resolution to this ticket will be.  If someone could advise me on that, I would appreciate it.

Thanks!

-Kyle</pre></div><div class='update_description'><i onclick="document.location='10519#1312982602'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-10T13:23:22+00:00">Aug 10, 2011 01:23 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1312982602">&nbsp;</a></div><pre>Sorry to be a bother, but I&#39;m not sure what the final resolution to this ticket will be.  If someone could advise me on that, I would appreciate it.

Thanks!

-Kyle</pre></div><div class='update_description'><i onclick="document.location='10519#1312312514'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-02T19:15:14+00:00">Aug 2, 2011 07:15 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1312312514">&nbsp;</a></div><pre>On Aug 2, 2011, at 10&#58;29 AM, via RT wrote&#58;
<font color='#7F7E6F'>&#62; <a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?id=9349' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?id=9349</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Just now, I found&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [gate01&#58;~]# netstat -a | grep &#39;[5][0-9][0-9][0-9][0-9]&#39; | wc -l</font>
<font color='#7F7E6F'>&#62; 1881</font>
<font color='#7F7E6F'>&#62; [gate01&#58;~]# condor_q|tail -3</font>
<font color='#7F7E6F'>&#62; 8213746.0   usatlas1        8/2  13&#58;23   0+00&#58;00&#58;00 I  5   97.7 data</font>
<font color='#7F7E6F'>&#62; --site=ANALY_</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 4524 jobs; 311 idle, 4211 running, 2 held</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Is this a reasonable way to count these?  That is less than one port</font>
<font color='#7F7E6F'>&#62; per</font>
<font color='#7F7E6F'>&#62; two running jobs, a far cry from 8 per running job.</font>

That looks like a reasonable count to me.

One of the confusions is due to the use of the grid_monitor. Condor-G uses it to kill running job managers (which decreases the port count) but restarts the job managers when the job finishes and needs to stage back data. So while you may be using less than 1 port per job, it&#39;s because you&#39;re using the grid_monitor and it won&#39;t be true across the full lifetime of your system.

That said, I think that 8 ports per job is way wrong, but I&#39;m not sure what the right number is.

-alain
-- by roy at Tue Aug 02 19&#58;15&#58;03 UTC 2011

GOCTX Source&#58; VDT Ticket&#58; Queue=vdt-support ID=9349</pre></div><div class='update_description'><i onclick="document.location='10519#1312306087'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-02T17:28:07+00:00">Aug 2, 2011 05:28 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1312306087">&nbsp;</a></div><pre>Just now, I found&#58;

[gate01&#58;~]# netstat -a | grep &#39;[5][0-9][0-9][0-9][0-9]&#39; | wc -l
1881
[gate01&#58;~]# condor_q|tail -3
8213746.0   usatlas1        8/2  13&#58;23   0+00&#58;00&#58;00 I  5   97.7 data
--site=ANALY_

4524 jobs; 311 idle, 4211 running, 2 held

Is this a reasonable way to count these?  That is less than one port per
two running jobs, a far cry from 8 per running job.

bob

On 8/2/2011 12&#58;54 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10519#1312304065'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-02T16:54:25+00:00">Aug 2, 2011 04:54 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1312304065">&nbsp;</a></div><pre>Bob,

Are there any updates on this issue?   Did you have a chance to do a count?

Please submit problems, requests, and questions at&#58;
<a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a>

Thank You,
OSG Grid Operations Center
goc@...., 317-278-9699
Visit the Open Science Grid Operations Page&#58;
<a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='10519#1311601319'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-07-25T13:41:59+00:00">Jul 25, 2011 01:41 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1311601319">&nbsp;</a></div><pre>Bob,

Are there any updates on this issue?   Did you have a chance to do a count?

Please submit problems, requests, and questions at&#58;
<a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a>

Thank You,
OSG Grid Operations Center
goc@...., 317-278-9699
Visit the Open Science Grid Operations Page&#58;
<a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='10519#1310057409'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-07-07T16:50:09+00:00">Jul 7, 2011 04:50 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1310057409">&nbsp;</a></div><pre>When I have some time I will do a count on our gatekeeper of ports
actually in use.

bob

On 7/7/2011 12&#58;28 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10519#1310056081'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-07-07T16:28:01+00:00">Jul 7, 2011 04:28 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1310056081">&nbsp;</a></div><pre>Where is this standing currently?  I saw an email thread about this.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='10519#1309092747'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-26T12:52:27+00:00">Jun 26, 2011 12:52 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1309092747">&nbsp;</a></div><pre>On Jun 24, 2011, at 1&#58;38 PM, via RT wrote&#58;
<font color='#7F7E6F'>&#62; Have you heard anything more on this?</font>

No, sorry.

-alain

------------------------------------
Alain Roy
VDT Support
vdt-support@....
<a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>
-- by roy at Sun Jun 26 12&#58;52&#58;18 UTC 2011

GOCTX Source&#58; VDT Ticket&#58; Queue=vdt-support ID=9349</pre></div><div class='update_description'><i onclick="document.location='10519#1308940656'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-24T18:37:36+00:00">Jun 24, 2011 06:37 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1308940656">&nbsp;</a></div><pre>Alain,

Have you heard anything more on this?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='10519#1308940654'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-24T18:37:34+00:00">Jun 24, 2011 06:37 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1308940654">&nbsp;</a></div><pre>Alain,

Have you heard anything more on this?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='10519#1307968228'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-13T12:30:28+00:00">Jun 13, 2011 12:30 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1307968228">&nbsp;</a></div><pre>I&#39;ve asked around about the # of ports needed. I still think it&#39;s less than 8 per job slot, but haven&#39;t succeeded in getting anyone else to comment on it. I&#39;m on vacation this week...

-alain
-- by roy at Mon Jun 13 12&#58;30&#58;20 UTC 2011

GOCTX Source&#58; VDT Ticket&#58; Queue=vdt-support ID=9349</pre></div><div class='update_description'><i onclick="document.location='10519#1307725729'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-10T17:08:49+00:00">Jun 10, 2011 05:08 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1307725729">&nbsp;</a></div><pre>Are there any updates on this issue?

Please submit problems, requests, and questions at&#58;
<a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a>

Thank You,
OSG Grid Operations Center
goc@...., 317-278-9699
Visit the Open Science Grid Operations Page&#58;
<a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='10519#1307138804'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-03T22:06:44+00:00">Jun 3, 2011 10:06 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1307138804">&nbsp;</a></div><pre>On Jun 3, 2011, at 7&#58;44 AM, via RT wrote&#58;
<font color='#7F7E6F'>&#62; I was looking over our gatekeepers at AGLT2.  The globus_tcp_port_range</font>
<font color='#7F7E6F'>&#62; drew my attention.  It has not been looked at since we set up</font>
<font color='#7F7E6F'>&#62; our gate keeper maybe 5 years ago.  Then I found this page&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//twiki.grid.iu.edu/bin/view/ReleaseDocumentation/ComputeElementInstall#Define_Globus_Port_Ranges' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/ReleaseDocumentation/ComputeElementInstall#Define_Globus_Port_Ranges</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; It seems we are supposed to have 8 ports open per job slot, and with</font>
<font color='#7F7E6F'>&#62; 4000+ jobs on gate01.aglt2.org, that is 32000 ports out of a max</font>
<font color='#7F7E6F'>&#62; of 65k!  Right now, we have&#58;</font>
<font color='#7F7E6F'>&#62; GLOBUS_TCP_PORT_RANGE=50001,60000</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Am I reading this correctly?  Should I really have 32000 ports</font>
<font color='#7F7E6F'>&#62; available?</font>

I read that the other day, and it surprised me too. It sounds too large to me. Let me ask around to see who wrote it and why.

I looked at the documentation from Globus, and it tells me&#58;

<a href='http&#58;//dev.globus.org/wiki/FirewallHowTo' target='_blank' rel='nofollow'>http&#58;//dev.globus.org/wiki/FirewallHowTo</a>
<font color='#7F7E6F'>&#62; Pre-WS GRAM Protocol (found in GT2, GT3, GT4)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The Pre-WS GRAM protocol has two components&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	��� Clients first connect to the Globus Gatekeeper to initiate a Job Manager (JM) and user job.</font>
<font color='#7F7E6F'>&#62; 	��� Communications then take place from the client and the JM to manage the job, stage data and/or executables, and return job output to the client. These connections are initiated in both directions.</font>
<font color='#7F7E6F'>&#62; This results in three traffic components that should be allowed by firewall policy&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	��� A connection from a controllable ephemeral port on the client to the well-known static port of 2119/tcp to initiate a Job Manager (JM).</font>
<font color='#7F7E6F'>&#62; 	��� The JM listens on a controllable ephemeral port for management requests from the client (which come from ephemeral ports).</font>
<font color='#7F7E6F'>&#62; 	��� The JM may connect back from a controllable ephemeral port to a controllable ephemeral port on the client to response to management request, return job output, or stage input data or executables as requested by the client.</font>

So I count two ports for job slot for GRAM. That&#39;s a big difference from 8.

I&#39;ll ask around and see if other people understand why it says 8.
<div id='show_1701113946' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1701113946'>
Thanks,
-alain
------------------------------------
Alain Roy
VDT Support
vdt-support@....
<a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>
-- by roy at Fri Jun 03 22&#58;06&#58;37 UTC 2011

GOCTX Source&#58; VDT Ticket&#58; Queue=vdt-support ID=9349
</div><script type='text/javascript'>
        $('#show_1701113946').click(function() {
            $('#detail_1701113946').slideDown("normal");
            $('#show_1701113946').hide();
            $('#hide_1701113946').show();
        });
        $('#hide_1701113946').click(function() {
            $('#detail_1701113946').slideUp();
            $('#hide_1701113946').hide();
            $('#show_1701113946').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10519#1307105000'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-03T12:43:20+00:00">Jun 3, 2011 12:43 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1307105000">&nbsp;</a></div><pre>VDT, could you please address Bob&#39;s inquiry?

===================

I was looking over our gatekeepers at AGLT2.  The globus_tcp_port_range drew my attention.  It has not been looked at since we set up
our gate keeper maybe 5 years ago.  Then I found this page&#58;
<a href='https&#58;//twiki.grid.iu.edu/bin/view/ReleaseDocumentation/ComputeElementInstall#Define_Globus_Port_Ranges' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/ReleaseDocumentation/ComputeElementInstall#Define_Globus_Port_Ranges</a>

It seems we are supposed to have 8 ports open per job slot, and with 4000+ jobs on gate01.aglt2.org, that is 32000 ports out of a max
of 65k!  Right now, we have&#58;
GLOBUS_TCP_PORT_RANGE=50001,60000

Am I reading this correctly?  Should I really have 32000 ports available?  So, there is a rocks/hard place situation here, as
/etc/services defines tcp ports all the way up to 48619, so unless these overlap, there isn&#39;t enough space here.

Do you have any suggestions in regard to this situation?  We do not seem to be in serious stress, AFAIK, over this.

Thanks,
bob

===================</pre></div><div class='update_description'><i onclick="document.location='10519#1307070619'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-03T03:10:19+00:00">Jun 3, 2011 03:10 AM UTC</time> by <b>Matt Skinner</b><a class="anchor" name="1307070619">&nbsp;</a></div><pre>From&#58; OSG- Grid Operations Center &#60;goc@....&#62;
To&#58; Bob Ball &#60;ball@....&#62;
Subject&#58; Re&#58; globus_tcp_port_range question
Date-Sent&#58; Thursday, June 02, 2011 11&#58;09 PM -0400

Greetings-
Your Inquiry has been received and will be addressed during normal business hours. If you need immediate assistance please let us know.
Thank you,
Matthew S.</pre></div><div class='update_description'><i onclick="document.location='10519#1307070410'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-03T03:06:50+00:00">Jun 3, 2011 03:06 AM UTC</time> by <b>Matt Skinner</b><a class="anchor" name="1307070410">&nbsp;</a></div><pre>From&#58; Bob Ball &#60;ball@....&#62;
To&#58; OSG Operations Center &#60;goc@....&#62;
cc&#58; Bob Ball &#60;ball@....&#62;
Subject&#58; globus_tcp_port_range question
Date-Sent&#58; Thursday, June 02, 2011 10&#58;59 PM -0400

I was looking over our gatekeepers at AGLT2.  The globus_tcp_port_range drew my attention.  It has not been looked at since we set up
our gate keeper maybe 5 years ago.  Then I found this page&#58;
<a href='https&#58;//twiki.grid.iu.edu/bin/view/ReleaseDocumentation/ComputeElementInstall#Define_Globus_Port_Ranges' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/ReleaseDocumentation/ComputeElementInstall#Define_Globus_Port_Ranges</a>

It seems we are supposed to have 8 ports open per job slot, and with 4000+ jobs on gate01.aglt2.org, that is 32000 ports out of a max
of 65k!  Right now, we have&#58;
GLOBUS_TCP_PORT_RANGE=50001,60000

Am I reading this correctly?  Should I really have 32000 ports available?  So, there is a rocks/hard place situation here, as
/etc/services defines tcp ports all the way up to 48619, so unless these overlap, there isn&#39;t enough space here.

Do you have any suggestions in regard to this situation?  We do not seem to be in serious stress, AFAIK, over this.

Thanks,
bob</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F10519">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
