<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[33565] Migration of OSC_OSG_CE - seeking advice</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=33565" method="post">
<div class="page-header">
    <h3><span class="muted">33565</span> / Migration of OSC_OSG_CE - seeking advice</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">John Dockendorf</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">OSC_OSG_CE</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">Nova</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">John Dockendorf</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">SUPERB-SC</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">WIP</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-10-16</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">SUPERB-SC <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/33565", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='33565#1507920861'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-13T18:54:21+00:00">Oct 13, 2017 06:54 PM UTC</time><a class="anchor" name="1507920861">&nbsp;</a></div><pre>I&#39;ve created a new ticket, <a href='35110.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/35110.</a>  Feel free to close this one.

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1507919970'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-13T18:39:30+00:00">Oct 13, 2017 06:39 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1507919970">&nbsp;</a></div><pre>Trey,

I think that opening a new ticket might be the best plan of action since we&#39;ve had some scope creep.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='33565#1507564032'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-09T15:47:12+00:00">Oct 9, 2017 03:47 PM UTC</time> by <b>tdockendorf@....</b><a class="anchor" name="1507564032">&nbsp;</a></div><pre>This ticket has sort of diverged from original purpose so I can open a new one if that&#39;s desired.  I think right now the only issue is getting nova jobs sent to the OSC_OSG_CE.  Right now we are not receiving and jobs.  I think the plan was to send us RHEL6 jobs via Singularity.  I&#39;ve updated our CE to put singularity in a job&#39;s PATH.

Thanks,
- Trey

--
Trey Dockendorf
HPC Systems Engineer
Ohio Supercomputer Center</pre></div><div class='update_description'><i onclick="document.location='33565#1507563498'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-09T15:38:18+00:00">Oct 9, 2017 03:38 PM UTC</time> by <b>LQCD</b><a class="anchor" name="1507563498">&nbsp;</a></div><pre>I&#39;m on vacation</pre></div><div class='update_description'><i onclick="document.location='33565#1507563331'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-09T15:35:31+00:00">Oct 9, 2017 03:35 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1507563331">&nbsp;</a></div><pre>Is anything else needed on this ticket?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='33565#1506619478'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-28T17:24:38+00:00">Sep 28, 2017 05:24 PM UTC</time><a class="anchor" name="1506619478">&nbsp;</a></div><pre>I&#39;m fine with going the Singularity route.  I&#39;ve set our CE to add singularity to PATH [1].  Let me know if anything else is needed on my end.

Also, don&#39;t know if it&#39;s expected but we appear to no longer be receiving any nova jobs at all.  At one point it was reduced so we only got maybe 3 or 4 at a time, but it&#39;s been 0 for a while now.

Thanks,
- Trey

[1]&#58;
[root@osg-ce ~]# cat /etc/osg/config.d/99-local-site-settings.ini | tail -n 2
[Local Settings]
PATH = /opt/singularity/bin&#58;$PATH

[root@osg-ce ~]# grep PATH /var/lib/osg/osg-local-job-environment.conf
PATH=&#34;/opt/singularity/bin&#58;$PATH&#34;
export PATH

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1506618400'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-28T17:06:40+00:00">Sep 28, 2017 05:06 PM UTC</time><a class="anchor" name="1506618400">&nbsp;</a></div><pre>Sorry, at a conference this week plus other work. If you&#39;re OK with doing so, I&#39;d probably suggest going to Singularity at this point. The other advantage is now that we&#39;re rolling containers out at FNAL too, you&#39;d be (or could be) running essentially the same thing we are on-site. As far as I know NOvA has still not made a major push to validate things in SL7.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1506618234'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-28T17:03:54+00:00">Sep 28, 2017 05:03 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1506618234">&nbsp;</a></div><pre>Jeff,

Any success with pinging Ken?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='33565#1506023176'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-21T19:46:16+00:00">Sep 21, 2017 07:46 PM UTC</time><a class="anchor" name="1506023176">&nbsp;</a></div><pre>Hi,

I think we are still waiting on a response from Ken about running with singulatrity vs rhel7. I&#39;ll try pinging him out of band.

Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='33565#1505852970'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-19T20:29:30+00:00">Sep 19, 2017 08:29 PM UTC</time><a class="anchor" name="1505852970">&nbsp;</a></div><pre>I may have answered my own question WRT getting a special PATH added to CE jobs, <a href='https&#58;//opensciencegrid.github.io/docs/other/configuration-with-osg-configure/#local-settings.' target='_blank' rel='nofollow'>https&#58;//opensciencegrid.github.io/docs/other/configuration-with-osg-configure/#local-settings.</a>

The question about supporting RHEL 7 with nova still remains unless using singularity is the preferred path.  If singularity is the route we should take, please advise what&#39;s needed for us to begin supporting singularity jobs, besides me updating the local-settings on our CE.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1505835659'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-19T15:40:59+00:00">Sep 19, 2017 03:40 PM UTC</time><a class="anchor" name="1505835659">&nbsp;</a></div><pre>What&#39;s the status of supporting RHEL 7 with nova?

For singularity, could nova jobs request a specific module be loaded or is there a sane way to force a specific PATH for jobs coming into our CE?  We are evaluating whether to have singularity available generally in default PATH or to put it into a module in some non-standard location.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1505410934'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-14T17:42:14+00:00">Sep 14, 2017 05:42 PM UTC</time> by <b>anorman@....</b><a class="anchor" name="1505410934">&nbsp;</a></div><pre>I am currently out of the office and unable to reply to your inquiry.  I will contact you as soon as I am able with any information you may require.</pre></div><div class='update_description'><i onclick="document.location='33565#1505410905'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-14T17:41:45+00:00">Sep 14, 2017 05:41 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1505410905">&nbsp;</a></div><pre>Ken,

Have you had a chance to look at Trey&#39;s response?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='33565#1504904293'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-08T20:58:13+00:00">Sep 8, 2017 08:58 PM UTC</time><a class="anchor" name="1504904293">&nbsp;</a></div><pre>Having straight RHEL7 jobs seems simpler but we do support singularity.  On our system singularity is NOT in PATH by default, it has to be loaded via a module.  The module for singularity is not yet public so it&#39;s in a weird path on our system.  I don&#39;t know how that would work for nova jobs.

$ module use /usr/local/share/lmodfiles/project/osc
$ module load singularity
$ which singularity
/opt/singularity/bin/singularity

- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1504903933'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-08T20:52:13+00:00">Sep 8, 2017 08:52 PM UTC</time><a class="anchor" name="1504903933">&nbsp;</a></div><pre>Hi guys,

What kind of container support (Dicker, Singularity, etc.) does OSC have now? NOvA could presumably run in an SL6 container even if the host machine were SL7.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1504903659'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-08T20:47:39+00:00">Sep 8, 2017 08:47 PM UTC</time><a class="anchor" name="1504903659">&nbsp;</a></div><pre>I don&#39;t think I need anything routed differently.  All jobs go to a RHEL7 cluster.  Let me know if I need to do anything on my end.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1504903454'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-08T20:44:14+00:00">Sep 8, 2017 08:44 PM UTC</time> by <b>anorman@....</b><a class="anchor" name="1504903454">&nbsp;</a></div><pre>I am currently out of the office and unable to reply to your inquiry.  I will contact you as soon as I am able with any information you may require.</pre></div><div class='update_description'><i onclick="document.location='33565#1504903428'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-08T20:43:48+00:00">Sep 8, 2017 08:43 PM UTC</time><a class="anchor" name="1504903428">&nbsp;</a></div><pre>Is there anything people are waiting to do on the Factory side or is this on the Frontend now I guess? I just checked that Factory settings support explicitelly use rhe7 condor tarball to land on the worker nodes. That&#39;s regardless of the JOB_ROUTER_ENTRIES set on the CE side, though. Let us know if you need explicitelly routing different and we can add +distro=&#34;RHEL7&#34; on the Factory side.

Thanks,
Marian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=zvada/CN=684832/CN=Marian Zvada</pre></div><div class='update_description'><i onclick="document.location='33565#1504730815'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-09-06T20:46:55+00:00">Sep 6, 2017 08:46 PM UTC</time><a class="anchor" name="1504730815">&nbsp;</a></div><pre>Any update on this?  Is there any progress on getting RHEL7 support with nova?

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1504100310'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-30T13:38:30+00:00">Aug 30, 2017 01:38 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1504100310">&nbsp;</a></div><pre>Has there been any behind the scenes discussion on this ticket?  It hasn&#39;t been updated in a while, and I accidentally overlooked this ticket as it was assigned to a staff member who suddenly left, so my apologies for that.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='33565#1502976382'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-17T13:26:22+00:00">Aug 17, 2017 01:26 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1502976382">&nbsp;</a></div><pre>Does nova support running jobs via singularity?  We are evaluating supporting jobs within containers.  Getting RHEL7 to work seems worth while though.

Thanks
- Trey</pre></div><div class='update_description'><i onclick="document.location='33565#1502407031'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-10T23:17:11+00:00">Aug 10, 2017 11:17 PM UTC</time> by <b>tdockendorf@....</b><a class="anchor" name="1502407031">&nbsp;</a></div><pre>Does nova support running jobs via singularity?  We are evaluating supporting jobs within containers.  Getting RHEL7 to work seems worth while though.

Thanks
- Trey

-------- Original message --------
From&#58; Open Science Grid FootPrints &#60;osg@....&#62;
Date&#58; 8/10/17 7&#58;07 PM (GMT-05&#58;00)
To&#58; &#34;Dockendorf, Trey&#34; &#60;tdockendorf@....&#62;
Subject&#58; Open Science Grid&#58; Migration of OSC_OSG_CE - seeking advice ISSUE=33565 PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='33565#1502406412'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-10T23:06:52+00:00">Aug 10, 2017 11:06 PM UTC</time><a class="anchor" name="1502406412">&nbsp;</a></div><pre>Also, just so everyone is aware, I did manage to get a few small test jobs through at OSC now as the Nova production user. I explicitly requested SL7 as part of the submission, so I think we do indeed understand what&#39;s been happening now.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1502406138'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-10T23:02:18+00:00">Aug 10, 2017 11:02 PM UTC</time><a class="anchor" name="1502406138">&nbsp;</a></div><pre>Trey,

I think their submissions are wired to request only SL6 all the time since basically all sites have been SL6 to this point, or at least within an SL6-like container. They probably could run on SL7 without much difficulty, but I don&#39;t think they have officially validated their releases on it yet. I imagine that they&#39;ll want to do that first before running a lot of production workflows.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1502405591'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-10T22:53:11+00:00">Aug 10, 2017 10:53 PM UTC</time> by <b>tdockendorf@....</b><a class="anchor" name="1502405591">&nbsp;</a></div><pre>Does nova not support RHEL7?

Thanks,
- Trey

-------- Original message --------
From&#58; Open Science Grid FootPrints &#60;osg@....&#62;
Date&#58; 8/10/17 6&#58;35 PM (GMT-05&#58;00)
To&#58; &#34;Dockendorf, Trey&#34; &#60;tdockendorf@....&#62;
Subject&#58; Open Science Grid&#58; Migration of OSC_OSG_CE - seeking advice ISSUE=33565 PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='33565#1502404492'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-10T22:34:52+00:00">Aug 10, 2017 10:34 PM UTC</time><a class="anchor" name="1502404492">&nbsp;</a></div><pre>In that case, in the immediate term I&#39;d suggest that ops remove Nova from the supported VO list for OSC in the production factories. That is probably the fastest way to get the impossible to match glideins from popping up. Let&#39;s keep things enabled in ITB though so that we can test workarounds and new workflows as they come.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1502398650'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-10T20:57:30+00:00">Aug 10, 2017 08:57 PM UTC</time><a class="anchor" name="1502398650">&nbsp;</a></div><pre>We&#39;re fully RHEL7 with regard to our new CE.  The new CE submits to our newest cluster and that cluster is RHEL7.  We do not send OSG or nova jobs to our older clusters which are still RHEL6.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1502398035'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-10T20:47:15+00:00">Aug 10, 2017 08:47 PM UTC</time><a class="anchor" name="1502398035">&nbsp;</a></div><pre>Hi Trey,

I&#39;ve been having a running dialogue with the NOvA production guys today. Per Jeff&#39;s message, can you confirm if you&#39;re fully RHEL7 now? If that&#39;s the case, then it would explain a lot. The NOvA user payloads are all requesting RHEL6. Please confirm that for us and we can adjust our frontend to stop requesting glideins there. If there are still REHL6 resources available, then we need to dig a little deeper.

Thanks,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1502388017'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-10T18:00:17+00:00">Aug 10, 2017 06:00 PM UTC</time><a class="anchor" name="1502388017">&nbsp;</a></div><pre>Hi all,

Apologies this slipped through the cracks in factory ops. We&#39;re dealing with a shortage of personnel.

It looks like the Fermilab frontend is constantly requesting pilots that they are unable to use they go 100% unmatched [1], I suspect maybe because this is a RHEL7 site?  I will try to contact the admins directly to expedite this.

In the meantime I have capped Fermilab pilots to 4 max running, until they can get to the bottom of this.

Sorry for the waste this caused!
Jeff Dost
OSG Glidein Factory Operations

[1]
<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=Nova_US_OSC_osg_condor&frontend=total&infoGroup=running&elements=StatusRunning' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=Nova_US_OSC_osg_condor&frontend=total&infoGroup=running&elements=StatusRunning</a>,ClientGlideRunning,ClientGlideIdle,&rra=0&window_min=0&window_max=0&timezone=-7

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='33565#1502368461'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-10T12:34:21+00:00">Aug 10, 2017 12:34 PM UTC</time><a class="anchor" name="1502368461">&nbsp;</a></div><pre>Still seeing large number of nova jobs doing nothing.  In the last 10 days we&#39;ve had 76,208 nova jobs complete on our cluster and a total CPU hours of 29,350 which comes out to about 23 minutes per job.  That leads me to believe none of the nova jobs hitting our CE are never actually doing real work.

Question still remains, can the number of pilots hitting our CE be reduced when there is no work to be done?  This really needs to be throttled by the glidein system or we&#39;re going to have to further reduce the maximum number of jobs we allow from nova which would be a problem if real work is ever submitted.  Secondly, why are we receiving pilots when they appear to have no jobs to run?  Wasting tens of thousands of CPU hours to do nothing is not going to sit well with folks here.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1502138310'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-08-07T20:38:30+00:00">Aug 7, 2017 08:38 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1502138310">&nbsp;</a></div><pre>Hi Ken,

I think Trey had one outstanding request for this&#58;

As a separate inquiry, is it possible to have fewer pilot jobs submitted to our CE if there is no work to be done?  It looks like the jobs running on our cluster are doing no actual work yet we keep getting new pilots.  Our system is running over a hundred jobs that are essentially doing nothing.

Please advise.

Vince</pre></div><div class='update_description'><i onclick="document.location='33565#1501091495'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-26T17:51:35+00:00">Jul 26, 2017 05:51 PM UTC</time><a class="anchor" name="1501091495">&nbsp;</a></div><pre>Are there currently no nova jobs in the condor queue that will get picked up by condor_startd?  The jobs on our cluster look to be ending after 25 minutes but they have condor_startd running.  Is this normal, that we receive pilots even when there&#39;s no work to be done?

As a separate inquiry, is it possible to have fewer pilot jobs submitted to our CE if there is no work to be done?  It looks like the jobs running on our cluster are doing no actual work yet we keep getting new pilots.  Our system is running over a hundred jobs that are essentially doing nothing.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1500997470'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-25T15:44:30+00:00">Jul 25, 2017 03:44 PM UTC</time><a class="anchor" name="1500997470">&nbsp;</a></div><pre>The last production jobs I saw from NOvA at OSC were on the 20th. However, according to the ticket, the old entry was decommissioned on the 17th, so anything that ran once the old glideins ran out would have been on the new CE.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1500996969'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-25T15:36:09+00:00">Jul 25, 2017 03:36 PM UTC</time><a class="anchor" name="1500996969">&nbsp;</a></div><pre>The new CE is all that is online now.  I&#39;ve turned off the old CE.  So my previous update was in reference to our new CE.  I don&#39;t know if the jobs are test or production, I&#39;d assume production based on previous comments.

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1500996876'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-25T15:34:36+00:00">Jul 25, 2017 03:34 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1500996876">&nbsp;</a></div><pre>Test jobs aside are the new jobs running to the new CE?</pre></div><div class='update_description'><i onclick="document.location='33565#1500996793'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-25T15:33:13+00:00">Jul 25, 2017 03:33 PM UTC</time><a class="anchor" name="1500996793">&nbsp;</a></div><pre>Are there currently no nova jobs in the condor queue that will get picked up by condor_startd?  The jobs on our cluster look to be ending after 25 minutes but they have condor_startd running.

As a separate inquiry, is it possible to have fewer pilot jobs submitted to our CE if there is no work to be done?  It looks like the jobs running on our cluster are doing no actual work yet we keep getting new pilots.  Our system is running over a hundred jobs that are essentially doing nothing.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1500577740'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-20T19:09:00+00:00">Jul 20, 2017 07:09 PM UTC</time><a class="anchor" name="1500577740">&nbsp;</a></div><pre>Sorry all, the error in Exp_CVMFS_check.sh is from my (unrelated) tests running from our development cluster.  There were a couple of errors in that script, so the glideins were starting, but never actually running test jobs since that script errored out and the glideins didn&#39;t report back to us.  I&#39;ve fixed this and have verified with glideins at Fermilab that we shouldn&#39;t see any more issues as far as this is concerned.  I&#39;ll make sure to steer further tests of this kind away from OSC so you don&#39;t get extra testing noise from us.

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='33565#1500568180'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-20T16:29:40+00:00">Jul 20, 2017 04:29 PM UTC</time><a class="anchor" name="1500568180">&nbsp;</a></div><pre>Any way to check if the jobs are having issues? Our accounting shows no Nova jobs on our new cluster have run longer than ~25 minutes.  There are just hundreds of 20-25 minute jobs from nova.  Below is some information.  Looks like some bug in Exp_CVMFS_check.sh ?  If I run the script as the nova user on a compute node that runs a nova job, I get dumped to some kind of like man page type screen.

The shows stdout last message&#58;
Executing /tmp/pbstmp.1284224/glide_XtlGh6/client/Exp_CVMFS_check.sh

The stderr&#58;
=== validation OK in /tmp/pbstmp.1284281/glide_6Xj929/client/singularity_validation.sh (0) ===
Exp_CVMFS_check.h7kb64.sh&#58; OK
Signature OK for client&#58;Exp_CVMFS_check.h7kb64.sh.
info&#58; No menu item &#96;Checking for CVMFS availability and attributes for individual experiments...&#39; in node &#96;(dir)Top&#39;.
/tmp/pbstmp.1284281/glide_6Xj929/client/Exp_CVMFS_check.sh&#58; line 68&#58; unexpected EOF while looking for matching &#96;&#34;&#39;
/tmp/pbstmp.1284281/glide_6Xj929/client/Exp_CVMFS_check.sh&#58; line 74&#58; syntax error&#58; unexpected end of file
=== Validation error in /tmp/pbstmp.1284281/glide_6Xj929/client/Exp_CVMFS_check.sh ===
Thu Jul 20 12&#58;14&#58;00 EDT 2017 Error running &#39;/tmp/pbstmp.1284281/glide_6Xj929/client/Exp_CVMFS_check.sh&#39;
The test script did not produce an XML file. No further information available.

[nova@o0325 glide_6Xj929]$ pwd
/tmp/pbstmp.1284281/glide_6Xj929
[nova@o0325 glide_6Xj929]$ ./client/Exp_CVMFS_check.sh glidein_config
&#60;SNIP - some kind of man or info page&#62;
&#60;hit q to exit&#62;
./client/Exp_CVMFS_check.sh&#58; line 68&#58; unexpected EOF while looking for matching &#96;&#34;&#39;
./client/Exp_CVMFS_check.sh&#58; line 74&#58; syntax error&#58; unexpected end of file

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1500328217'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-17T21:50:17+00:00">Jul 17, 2017 09:50 PM UTC</time><a class="anchor" name="1500328217">&nbsp;</a></div><pre>Hi,

I just decommissioned the old CE entries in the factory.  I left the running pilots in the queues, but cleared out the rest.  Once those go away no new pilots will be submitted to the old CE.

Jeff Dost
OSG Glidein Factory Operations

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='33565#1500302706'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-17T14:45:06+00:00">Jul 17, 2017 02:45 PM UTC</time><a class="anchor" name="1500302706">&nbsp;</a></div><pre>We&#39;re still seeing nova jobs hit our old cluster through our old CE.  On Thursday this week we will be having maintenance on that cluster and removing much of legacy OSG software from that system in favor of using the new CE which submits to our new cluster.  Ideally we&#39;d get nova jobs migrated off the old OSC CE to the new OSC CE soon.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1500070511'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-14T22:15:11+00:00">Jul 14, 2017 10:15 PM UTC</time> by <b>tdockendorf@....</b><a class="anchor" name="1500070511">&nbsp;</a></div><pre>I&#39;m fine with draining of osg.osc.edu.

Thanks,
- Trey

-------- Original message --------
From&#58; Open Science Grid FootPrints &#60;osg@....&#62;
Date&#58; 7/14/17 5&#58;35 PM (GMT-05&#58;00)
To&#58; &#34;Dockendorf, Trey&#34; &#60;tdockendorf@....&#62;
Subject&#58; Open Science Grid&#58; Migration of OSC_OSG_CE - seeking advice ISSUE=33565 PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='33565#1500068078'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-14T21:34:38+00:00">Jul 14, 2017 09:34 PM UTC</time><a class="anchor" name="1500068078">&nbsp;</a></div><pre>Hi Trey,

I moved the new entry into production factories. Can we start to drain ols osg.osc.edu resource, please?

Thanks,
Marian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=zvada/CN=684832/CN=Marian Zvada</pre></div><div class='update_description'><i onclick="document.location='33565#1500062185'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-14T19:56:25+00:00">Jul 14, 2017 07:56 PM UTC</time><a class="anchor" name="1500062185">&nbsp;</a></div><pre>Any update on moving our new CE to production status?  We&#39;d like to be able to decommission the old CE (osg.osc.edu).

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1499980195'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-13T21:09:55+00:00">Jul 13, 2017 09:09 PM UTC</time><a class="anchor" name="1499980195">&nbsp;</a></div><pre>Since the ITB test jobs were successful, we&#39;d like to try out production factories on the new CE.  Let me know if anything is needed on my end to move the new CE as production replacement for the old CE.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1499977196'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-13T20:19:56+00:00">Jul 13, 2017 08:19 PM UTC</time> by <b>Derek Weitzel</b><a class="anchor" name="1499977196">&nbsp;</a></div><pre>Hi,

The links below do not show if the nova jobs are successful, they only show if the glideins are successful.  Ken (or anyone else from FNAL?) should have a nova link, if one exists.</pre></div><div class='update_description'><i onclick="document.location='33565#1499954213'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-13T13:56:53+00:00">Jul 13, 2017 01:56 PM UTC</time><a class="anchor" name="1499954213">&nbsp;</a></div><pre>Will trying out production factories mean production jobs are going to the new CE?  I&#39;d like to hold off on this till I can consult with the rest of my team to be sure we&#39;re ready.

For the factory status URLs a few comments ago [1], will these show success / failure of the actual nova job?  I have worked with CMS in the past where they had web interfaces that showed success/failure of CRAB jobs.  Does something like that exist for nova?  I&#39;d be interested in seeing for myself if jobs are succeeding or failing.

Thanks,
- Trey

[1]&#58;
<a href='http&#58;//glidein-itb.grid.iu.edu/factory/monitor/factoryStatusNow.html' target='_blank' rel='nofollow'>http&#58;//glidein-itb.grid.iu.edu/factory/monitor/factoryStatusNow.html</a>
<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatusNow.html' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatusNow.html</a>

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1499904458'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-13T00:07:38+00:00">Jul 13, 2017 12:07 AM UTC</time><a class="anchor" name="1499904458">&nbsp;</a></div><pre>Quick update&#58; all of my NOvA tests have now succeeded and output looks OK. I&#39;m happy to try it out in the production factories once OSC gives the word.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1499894574'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-12T21:22:54+00:00">Jul 12, 2017 09:22 PM UTC</time><a class="anchor" name="1499894574">&nbsp;</a></div><pre>You can see ITB activity status for all entries (on left) using the following monitoring link below. Kindly note, that there is considerable lag (15-20 mins) between actual status and web monitoring links below.

<a href='http&#58;//glidein-itb.grid.iu.edu/factory/monitor/factoryStatusNow.html' target='_blank' rel='nofollow'>http&#58;//glidein-itb.grid.iu.edu/factory/monitor/factoryStatusNow.html</a>

for production factory (SDSC)

<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatusNow.html' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatusNow.html</a>

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=VAIBHAV GUPTA 4273</pre></div><div class='update_description'><i onclick="document.location='33565#1499894172'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-12T21:16:12+00:00">Jul 12, 2017 09:16 PM UTC</time><a class="anchor" name="1499894172">&nbsp;</a></div><pre>If you meant how long it takes to re-config the factory reflecting new changes, then its almost immediate.

The time frame required for the new glideins to kickin is actually quite unpredictable, but is in order of minutes (1-2 for empty site to 20+ for a busy one).The overall system is asynchronous. So we usually suggest to wait ~20 mins.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=VAIBHAV GUPTA 4273</pre></div><div class='update_description'><i onclick="document.location='33565#1499893852'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-12T21:10:52+00:00">Jul 12, 2017 09:10 PM UTC</time><a class="anchor" name="1499893852">&nbsp;</a></div><pre>Trey is right; I do see some of my test jobs running now. There are requesting rhel6, so I think we are in business as long as the outputs look OK.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1499893582'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-12T21:06:22+00:00">Jul 12, 2017 09:06 PM UTC</time><a class="anchor" name="1499893582">&nbsp;</a></div><pre>It usually takes ~20 mins to kick in new glideins, once user submits a fresh request.

I would suggest to clear old glideins and then submit fresh test jobs.

Let me know, if I can clear all running/current glideins.

Thanks
Vaibhav

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=VAIBHAV GUPTA 4273</pre></div><div class='update_description'><i onclick="document.location='33565#1499893491'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-12T21:04:51+00:00">Jul 12, 2017 09:04 PM UTC</time><a class="anchor" name="1499893491">&nbsp;</a></div><pre>I should have waited for next set of jobs.  Ones hitting my CE at 16&#58;59 EST show they are validating and condor is starting in the jobs.  Let me know if these jobs are successful or where I can go to view job success/failure for nova.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1499893340'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-12T21:02:20+00:00">Jul 12, 2017 09:02 PM UTC</time><a class="anchor" name="1499893340">&nbsp;</a></div><pre>I can send a test batch asking for SL7 if you want, just to verify that things work. Note than essentially all NOvA jobs ask for SL6 though.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1499893212'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-12T21:00:12+00:00">Jul 12, 2017 09:00 PM UTC</time><a class="anchor" name="1499893212">&nbsp;</a></div><pre>Vaibhav,

How long should it take for the change in the factory to affect jobs hitting my CE?  I saw jobs hit my CE at 16&#58;54 EST and they are still asking for RHEL6.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1499892800'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-12T20:53:20+00:00">Jul 12, 2017 08:53 PM UTC</time><a class="anchor" name="1499892800">&nbsp;</a></div><pre>Is there somewhere I can go to view the success / failure rates or statuses of nova jobs submitted to both production and ITB instances?  I have the following URL in my notes but wasn&#39;t sure if it&#39;d show ITB or the actual success or failure of a job.

<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=Nova_US_OSC_osg&frontend=total&infoGroup=other&elements=StatusHeld' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=Nova_US_OSC_osg&frontend=total&infoGroup=other&elements=StatusHeld</a>,&rra=0&window_min=0&window_max=0&timezone=-7

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1499892180'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-12T20:43:00+00:00">Jul 12, 2017 08:43 PM UTC</time><a class="anchor" name="1499892180">&nbsp;</a></div><pre>The distro attribute is set to RHEL7 in the factory (ITB) entry.
Kindly test and let us know.

Thanks
Vaibhav

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=VAIBHAV GUPTA 4273</pre></div><div class='update_description'><i onclick="document.location='33565#1499888894'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-12T19:48:14+00:00">Jul 12, 2017 07:48 PM UTC</time> by <b>Derek Weitzel</b><a class="anchor" name="1499888894">&nbsp;</a></div><pre>Ah, yes.  that’s a factory issue.  Factory-ops&#58; Set the expected flavor to rhel7

-Derek

<font color='#7F7E6F'>&#62; On Jul 12, 2017, at 1&#58;43 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33565#1499884983'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-12T18:43:03+00:00">Jul 12, 2017 06:43 PM UTC</time><a class="anchor" name="1499884983">&nbsp;</a></div><pre>I see nova jobs on the new CE hitting Torque and completing.  They are only running for ~25 minutes.  Looks like the glideins are failing because they expect RHEL6 and the cluster for this new CE runs RHEL7.  Found this in condor stdout in SPOOL&#58;

Executing /tmp/pbstmp.1211288/glide_Aju5V4/main/test_os.sh
Requesting RHEL variant &#39;rhel6&#39;
RHEL Linux flavor found
Red Hat Enterprise Linux Server release 7.3 (Maipo)
Failed OS test for rhel6

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1499880678'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-12T17:31:18+00:00">Jul 12, 2017 05:31 PM UTC</time><a class="anchor" name="1499880678">&nbsp;</a></div><pre>Derek,

Thanks for the debugging steps.  I opened 34424 also since I was hitting many issues related to HTCondor-CE and BLAHP.  The AccountingGroup was in remote_cerequirements

remote_cerequirements = &#34;AccountingGroup == &#92;&#34;PES0665&#92;&#34; && Walltime == 86400 && CondorCE == 1&#34;

In 34424 I mention some debugging I did by dumping bash variables to a file in pbs_local_submit_attributes.sh.  It looks like the value for AccountingGroup actually contains the double quotes which upsets our submit filter.  Even once I used some bash to remove the double quotes, the -A was never getting passed.  After some looking I had misspelled $AccountingGroup in the if statement *face palm*.  The issue of double quotes is still slightly annoying but something I can work around.

I&#39;ll remove the held nova jobs and saw several eventually hit our Torque environment but they didn&#39;t last long and they aren&#39;t showing up in condor_ce_history.  The only nova jobs I see in condor_ce_history have X state, since they are ones I deleted to try and get new pilots coming in when fixing things.  Could more jobs be sent to my new CE?  I want to make sure the last few jobs I saw weren&#39;t some odd behavior from me doing condor_ce_rm.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1499793023'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-11T17:10:23+00:00">Jul 11, 2017 05:10 PM UTC</time> by <b>Derek Weitzel</b><a class="anchor" name="1499793023">&nbsp;</a></div><pre>Indeed John, that blahp configuration looks good.  The pbs_local_submit_attributes.sh looks good.  I&#39;m surprised that it isn&#39;t working.

A few things I would do to debug this&#58;
1. Make sure that remote_cerequirements is being set correctly (with the Accounting Group) in the routed jobs.  You should be able to run something like&#58;
$ condor_ce_q -l | grep -i cerequirements

It should give you a list of the cerequirements.

2. To view the submit file before it&#39;s actually submitted, you will have to crack open a bash file real quick.  In /usr/libexec/blahp/pbs_submit.sh , search for the &#34;qsub&#34; command.  It should look like&#58;
jobID=&#96;${pbs_binpath}/qsub $bls_tmp_file&#96; # actual submission

Just before that qsub command, could you add&#58;
cp $bls_tmp_file /tmp/pbs.out

That should give you the pbs submission.  The file will be overwritten each time a new job is submitted, but you could get fancy by adding .$$ to the pbs.out file name.

Hopefully you can get some debugging information from this.</pre></div><div class='update_description'><i onclick="document.location='33565#1499698981'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-10T15:03:01+00:00">Jul 10, 2017 03:03 PM UTC</time><a class="anchor" name="1499698981">&nbsp;</a></div><pre>They are mapping.  I see the jobs with &#34;x509userproxysubject = &#34;/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=frontend_pp/fifebatch.fnal.gov&#34;&#34; in condor-ce and they are assigned the nova UID.  I map all /fermilab/nova/Role=pilot x509s to the nova UID.  The issue I&#39;m seeing now is our batch environment requires -A be passed to Torque jobs and the OSG documented way of doing this is not working.  The documented way to debug blahp is also not working except for my locally run condor-ce jobs.

I saw a few nova jobs come in and get held with different errors [1] but the majority are getting held because they don&#39;t specify an -A, which I thought I setup in condor-ce and blahp.

[1]&#58;
07/10/17 09&#58;52&#58;14 [955180] Failed to get expiration time of proxy /users/osg_data/spool/994/0/cluster994.proc0.subproc0/credential_FIFE-ITB-FNAL-GWMSFrontend.OSG_nova_73168&#58; unable to read proxy file
07/10/17 09&#58;52&#58;14 [955180] (998.0) blah_job_submit() failed&#58; submission command failed (exit code = 1) (stdout&#58;Error-) (stderr&#58;/usr/libexec/blahp/blah_common_submit_functions.sh&#58; line 746&#58; cd&#58; /users/osg_data/spool/994/0/cluster994.proc0.subproc0&#58; No such file or directory-Failed to CD to Initial Working Directory.-)

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1499698360'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-10T14:52:40+00:00">Jul 10, 2017 02:52 PM UTC</time><a class="anchor" name="1499698360">&nbsp;</a></div><pre>Is there any chance there is a credential mapping issue? When we send jobs from our ITB frontend, as we are doing now, the DN is slightly different&#58;

/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=frontend_pp/fifebatch.fnal.gov

The standard production DN has frontend in it as opposed to fontend_pp. Can you verify that both DNs are accepted?

Thanks,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1499692588'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-10T13:16:28+00:00">Jul 10, 2017 01:16 PM UTC</time><a class="anchor" name="1499692588">&nbsp;</a></div><pre>The nova jobs hit my new CE but failed to submit to Torque because no account was specified.  I setup the router for nova to set default_remote_cerequirements variable that sets account and setup necessary file in blahp.  The debugging I have in place for blahp didn&#39;t seem to get used though.  I see no nova owened blahp submit scripts in /tmp.  Only ones I see in /tmp from blahp are ones from when I submitted jobs.  Is there a different way to et default accounting group?

JOB_ROUTER_ENTRIES = &#92;
[ &#92;
GridResource = &#34;batch pbs&#34;; &#92;
TargetUniverse = 9; &#92;
name = &#34;Local_PBS_nova&#34;; &#92;
Requirements = (TARGET.Owner =?= &#34;nova&#34;); &#92;
set_default_remote_cerequirements = AccountingGroup == &#34;PES0665&#34;; &#92;
] &#92;
[ &#92;
GridResource = &#34;batch pbs&#34;; &#92;
TargetUniverse = 9; &#92;
name = &#34;Local_PBS&#34;; &#92;
Requirements = (TARGET.Owner =!= &#34;nova&#34;); &#92;
]

[root@osg-ce config.d]# cat /etc/blahp/pbs_local_submit_attributes.sh
if [ -n &#34;$Walltime&#34; ]; then
echo &#34;#PBS -l walltime=$Walltime&#34;
else
echo &#34;#PBS -l walltime=24&#58;00&#58;00&#34;
fi

if [ -n &#34;$AccoutingGroup&#34; ]; then
echo &#34;#PBS -A $AccountingGroup&#34;
fi

[root@osg-ce config.d]# tail -n 2 /etc/blah.config

blah_debug_save_submit_info=/tmp

[root@osg-ce config.d]# cat /var/log/condor-ce/GridmanagerLog.nova
&#60;SNIP&#62;
07/10/17 04&#58;15&#58;28 [931080] (953.0) blah_job_submit() failed&#58; submission command failed (exit code = 1) (stdout&#58;) (stderr&#58;ERROR&#58;  Your job has not been submitted to Owens for the following reason&#58;-- You have not specified an account and have more than one available.- Please specify an account.- - Available accounts&#58;  PES0656 PES0665--Please review the Owens documentation&#58;-- <a href='https&#58;//www.osc.edu/supercomputing/computing/owens--Feel' target='_blank' rel='nofollow'>https&#58;//www.osc.edu/supercomputing/computing/owens--Feel</a> free to contact oschelp@.... if you have any questions.--qsub&#58; Your job has been administratively rejected by the queueing system.-qsub&#58; There may be a more detailed explanation prior to this notice.-Error from qsub&#58; -)
<div id='show_1293544143' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1293544143'>&#60;SNIP&#62;

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696
</div><script type='text/javascript'>
        $('#show_1293544143').click(function() {
            $('#detail_1293544143').slideDown("normal");
            $('#show_1293544143').hide();
            $('#hide_1293544143').show();
        });
        $('#hide_1293544143').click(function() {
            $('#detail_1293544143').slideUp();
            $('#hide_1293544143').hide();
            $('#show_1293544143').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='33565#1499485760'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-08T03:49:20+00:00">Jul 8, 2017 03:49 AM UTC</time><a class="anchor" name="1499485760">&nbsp;</a></div><pre>Thanks Jeff,

For now I think it&#39;s OK to leave the old entry in production. I&#39;m forcing these tests to go through our ITB frontend, so as long as the new CE is the only OSC entry in the ITB factory, we should be fine for testing.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1499463326'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-07T21:35:26+00:00">Jul 7, 2017 09:35 PM UTC</time><a class="anchor" name="1499463326">&nbsp;</a></div><pre>Hi guys sorry for the late reply, I just put the old Nova_US_OSC_osg entry in downtime in the ITB factory. Ken, let me know if you prefer to have it down in all the production factories as well, or if you can target the ITB factory specifically.

Thanks,
Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='33565#1499435748'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-07T13:55:48+00:00">Jul 7, 2017 01:55 PM UTC</time><a class="anchor" name="1499435748">&nbsp;</a></div><pre>Is it not possible to submit ITB jobs to my site and have them only go to the ITB instance at osg-ce.hpc.osc.edu?  I still see no external condor jobs hitting my new CE.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1499353255'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-06T15:00:55+00:00">Jul 6, 2017 03:00 PM UTC</time><a class="anchor" name="1499353255">&nbsp;</a></div><pre>While we&#39;re debugging, it might make sense to temporarily disable the old (non-Condor CE) OSC entry in the ITB factory, and that will force the jobs to the new CE. Could factory ops do that?

Thanks,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1499352977'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-06T14:56:17+00:00">Jul 6, 2017 02:56 PM UTC</time><a class="anchor" name="1499352977">&nbsp;</a></div><pre>Sure; I will send more now. Indeed the jobs ran, but they might have gone to the old CE ( osg.osc.edu&#58;2119/jobmanager-pbs).

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1499352458'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-06T14:47:38+00:00">Jul 6, 2017 02:47 PM UTC</time><a class="anchor" name="1499352458">&nbsp;</a></div><pre>I don&#39;t think the test jobs worked our new CE.  I don&#39;t see anything in condor_ce_q or condor_ce_history that doesn&#39;t belong to myself or rsv.  I think there was an issue with my GUMS mapping, as my logs showed /fermilab/nova/Role=pilot jobs getting set to null.  Can more tests please be submitted?

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1499351837'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-06T14:37:17+00:00">Jul 6, 2017 02:37 PM UTC</time><a class="anchor" name="1499351837">&nbsp;</a></div><pre>I have submitted some tests; are you seeing the jobs on the new CE? I show two out of 17 complete.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1499345650'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-06T12:54:10+00:00">Jul 6, 2017 12:54 PM UTC</time><a class="anchor" name="1499345650">&nbsp;</a></div><pre>Can someone from nova submit jobs that will hit our site&#39;s new CE?  I have run local jobs submitted via condor_ce_run and condor_ce_submit and all have worked but I&#39;d very much like to verify nova jobs are working.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1499301265'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-06T00:34:25+00:00">Jul 6, 2017 12:34 AM UTC</time><a class="anchor" name="1499301265">&nbsp;</a></div><pre>Alright then , the entry should work as configured. Kindly test and let us know.

Thanks
Vaibhav
UCSD

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=VAIBHAV GUPTA 4273</pre></div><div class='update_description'><i onclick="document.location='33565#1499301136'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-06T00:32:16+00:00">Jul 6, 2017 12:32 AM UTC</time> by <b>tdockendorf@....</b><a class="anchor" name="1499301136">&nbsp;</a></div><pre>We do set TMPDIR for jobs running under torque.  It would be preferred to continue using TMPDIR.

Thanks,
- Trey

-------- Original message --------
From&#58; Open Science Grid FootPrints &#60;osg@....&#62;
Date&#58; 7/5/17 7&#58;40 PM (GMT-05&#58;00)
To&#58; &#34;Dockendorf, Trey&#34; &#60;tdockendorf@....&#62;
Subject&#58; Open Science Grid&#58; Migration of OSC_OSG_CE - seeking advice ISSUE=33565 PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='33565#1499297978'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-05T23:39:38+00:00">Jul 5, 2017 11:39 PM UTC</time><a class="anchor" name="1499297978">&nbsp;</a></div><pre>Hello,

As requested, we are configuring a new test entry ( Nova_US_OSC_osg_condor) in the ITB . Your previous entry used TMPDIR as working directory for PBS. Could you please confirm the working directory for your condor (I left it as TMPDIR for now) . Kindly let us know.

Thanks
Vaibhav
UCSD Factory Ops

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=VAIBHAV GUPTA 4273</pre></div><div class='update_description'><i onclick="document.location='33565#1498946530'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-01T22:02:10+00:00">Jul 1, 2017 10:02 PM UTC</time> by <b>tdockendorf@....</b><a class="anchor" name="1498946530">&nbsp;</a></div><pre>I now remember I need a squid proxy for cvmfs.  The other questions I&#39;m still curious about.

Also I send email to factory support as our new CE is online as osg-ce.hpc.osc.edu.

Thanks,
- Trey
-------- Original message --------
From&#58; Open Science Grid FootPrints &#60;osg@....&#62;
Date&#58; 7/1/17 12&#58;33 PM (GMT-05&#58;00)
To&#58; &#34;Dockendorf, Trey&#34; &#60;tdockendorf@....&#62;
Subject&#58; Open Science Grid&#58; Migration of OSC_OSG_CE - seeking advice ISSUE=33565 PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='33565#1498926766'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-01T16:32:46+00:00">Jul 1, 2017 04:32 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1498926766">&nbsp;</a></div><pre>Hi Ken,

John had a few additional questions&#58;

For supporting Nova and maybe Microboone in the future, does my site need to run the squid service?

Also can we operate without a SE?  For Nova in particular, is having GridFTP on the CE enough to get data in/out? I presume somewhere in stack I have to specify a shared filesystem path, would that be in the INI file like data_dir or would that be SPOOL for HTCondor-CE?

Vince</pre></div><div class='update_description'><i onclick="document.location='33565#1496430192'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-02T19:03:12+00:00">Jun 2, 2017 07:03 PM UTC</time><a class="anchor" name="1496430192">&nbsp;</a></div><pre>For supporting Nova and maybe Microboone in the future, does my site need to run the squid service?

Also can we operate without a SE?  For Nova in particular, is having GridFTP on the CE enough to get data in/out? I presume somewhere in stack I have to specify a shared filesystem path, would that be in the INI file like data_dir or would that be SPOOL for HTCondor-CE?

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1496351158'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-01T21:05:58+00:00">Jun 1, 2017 09:05 PM UTC</time><a class="anchor" name="1496351158">&nbsp;</a></div><pre>Hi,

Yes, you&#39;ve pretty much got it. When you&#39;re ready for Microboone, you&#39;d just add additional voms groups and account mappers like these, but replace &#34;nova&#34; with &#34;uboone&#34;. You only need the single VOMS server entry.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1496347716'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-01T20:08:36+00:00">Jun 1, 2017 08:08 PM UTC</time><a class="anchor" name="1496347716">&nbsp;</a></div><pre>I may have answered my previous question, please advise if the following looks like the correct GUMS config to match nova and allowing OSC to support additional fermilab VOs in the future.  The big requirement for additional VOs is that we be able to map each VO to a specific account, for accounting purposes.

&#60;vomsServers&#62;

&#60;vomsServer
name=&#39;fermilab&#39;
description=&#39;&#39;
persistenceFactory=&#39;mysql&#39;
baseUrl=&#39;<a href='https&#58;//voms.fnal.gov&#58;8443/voms/fermilab&#39' target='_blank' rel='nofollow'>https&#58;//voms.fnal.gov&#58;8443/voms/fermilab&#39</a>;
sslKey=&#39;/etc/grid-security/http/httpkey.pem&#39;
sslCertfile=&#39;/etc/grid-security/http/httpcert.pem&#39;
sslKeyPasswd=&#39;&#39;
sslCAFiles=&#39;/etc/grid-security/certificates/*.0&#39;/&#62;

&#60;/vomsServers&#62;

&#60;userGroups&#62;

&#60;vomsUserGroup
name=&#39;Nova&#39;
access=&#39;read self&#39;
description=&#39;&#39;
vomsServer=&#39;fermilab&#39;
matchFQAN=&#39;exact&#39;
acceptProxyWithoutFQAN=&#39;false&#39;
voGroup=&#39;/fermilab/nova&#39;/&#62;

&#60;manualUserGroup
name=&#39;admins&#39;
access=&#39;write&#39;
description=&#39;&#39;
persistenceFactory=&#39;mysql&#39;
membersUri=&#39;&#39;
nonMembersUri=&#39;&#39;/&#62;

<div id='show_526858041' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_526858041'>&#60;manualUserGroup
name=&#39;gums-banned&#39;
access=&#39;read self&#39;
description=&#39;Default group for banned users&#39;
persistenceFactory=&#39;mysql&#39;
membersUri=&#39;&#39;
nonMembersUri=&#39;&#39;/&#62;

&#60;manualUserGroup
name=&#39;local&#39;
access=&#39;write&#39;
description=&#39;Local Users for OSC&#39;
persistenceFactory=&#39;mysql&#39;
membersUri=&#39;&#39;
nonMembersUri=&#39;&#39;/&#62;

&#60;/userGroups&#62;

&#60;accountMappers&#62;

&#60;groupAccountMapper
name=&#39;NovaAccountMapper&#39;
description=&#39;&#39;
accountName=&#39;nova&#39;
groupName=&#39;nova&#39;/&#62;

&#60;manualAccountMapper
name=&#39;localMapper&#39;
description=&#39;Mapper for local accounts&#39;
persistenceFactory=&#39;mysql&#39;/&#62;

&#60;/accountMappers&#62;

&#60;groupToAccountMappings&#62;

&#60;groupToAccountMapping
name=&#39;NovaGroupToAccountMapping&#39;
description=&#39;&#39;
accountingVoSubgroup=&#39;nova&#39;
accountingVo=&#39;fermilab&#39;
userGroups=&#39;Nova&#39;
accountMappers=&#39;NovaAccountMapper&#39;/&#62;

&#60;groupToAccountMapping
name=&#39;local&#39;
description=&#39;Local Group to Account Mapping for OSC&#39;
accountingVoSubgroup=&#39;&#39;
accountingVo=&#39;&#39;
userGroups=&#39;local&#39;
accountMappers=&#39;localMapper&#39;/&#62;

&#60;/groupToAccountMappings&#62;

&#60;hostToGroupMappings&#62;

&#60;hostToGroupMapping
groupToAccountMappings=&#39;local, NovaGroupToAccountMapping&#39;
description=&#39;&#39;
cn=&#39;*/?*.osc.edu, */?*.hpc.osc.edu, */?*.ten.osc.edu&#39;/&#62;

&#60;/hostToGroupMappings&#62;

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696
</div><script type='text/javascript'>
        $('#show_526858041').click(function() {
            $('#detail_526858041').slideDown("normal");
            $('#show_526858041').hide();
            $('#hide_526858041').show();
        });
        $('#hide_526858041').click(function() {
            $('#detail_526858041').slideUp();
            $('#hide_526858041').hide();
            $('#show_526858041').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='33565#1496335792'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-01T16:49:52+00:00">Jun 1, 2017 04:49 PM UTC</time><a class="anchor" name="1496335792">&nbsp;</a></div><pre>How would that work if we were to support another Fermilab VO?  We have had clients ask us to support MicroBooNE, and we&#39;d have to ensure that nova jobs are assigned nova UID and microboone jobs are assigned a separate UID.  Do all fermilab jobs use the same DN or is there a way to distinguish a nova job from another fermilab job from a different VO?

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1496332823'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-01T16:00:23+00:00">Jun 1, 2017 04:00 PM UTC</time><a class="anchor" name="1496332823">&nbsp;</a></div><pre>Hi,

You can just use the one in the example for Fermilab, since nova is a subgroup of the Fermilab VO.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1496234733'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-31T12:45:33+00:00">May 31, 2017 12:45 PM UTC</time><a class="anchor" name="1496234733">&nbsp;</a></div><pre>Is there a VOMS servers for GUMS I can point at for nova?  I see no mention of &#34;nova&#34; in the gums.config.template distributed by OSG.  XML config examples would be helpful but just knowing the VOMS server would be enough.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1496161034'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-30T16:17:14+00:00">May 30, 2017 04:17 PM UTC</time><a class="anchor" name="1496161034">&nbsp;</a></div><pre>The DN of pilots submitted through ITB is

/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=frontend_pp/fifebatch.fnal.gov

It&#39;s slightly different than the production one; it has CN=frontend_pp instead of CN=frontend like the production DN.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1496155335'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-30T14:42:15+00:00">May 30, 2017 02:42 PM UTC</time> by <b>LQCD</b><a class="anchor" name="1496155335">&nbsp;</a></div><pre>I&#39;m on vacation</pre></div><div class='update_description'><i onclick="document.location='33565#1495825300'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-26T19:01:40+00:00">May 26, 2017 07:01 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1495825300">&nbsp;</a></div><pre>Ken,

It looks like Jeff is looking for an answer to the below question&#58;

&#34;Ken, when Nova submits through the ITB factory, is it using the same credential or a different one? I defer to you to inform Trey of what your credential for testing is.&#34;

Thank you,
Vince</pre></div><div class='update_description'><i onclick="document.location='33565#1495129154'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-18T17:39:14+00:00">May 18, 2017 05:39 PM UTC</time><a class="anchor" name="1495129154">&nbsp;</a></div><pre>Thanks John, Trey,

We can adjust the walltime, and I recommend we stay with single core for the time being until we ensure your new CE is working, then revisit multicore later.

Ken, when Nova submits through the ITB factory, is it using the same credential or a different one? I defer to you to inform Trey of what your credential for testing is.

Thanks,
Jeff Dost
OSG Glidein Factory Operations

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='33565#1494943128'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-16T13:58:48+00:00">May 16, 2017 01:58 PM UTC</time><a class="anchor" name="1494943128">&nbsp;</a></div><pre>After talking it over a bit with my team, we&#39;d prefer the walltime be reduced to 24 hours.  It appears only about 10% of the nova jobs run for more than 24 hours and having a shorter walltime would make backfill easier.

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1494941774'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-16T13:36:14+00:00">May 16, 2017 01:36 PM UTC</time><a class="anchor" name="1494941774">&nbsp;</a></div><pre>The walltime and queue are still correct, we will still be sending jobs to the same batch system.

We can support multicore jobs though single core jobs are better for backfill.  The backfill would be a bit more useful if jobs didn&#39;t always request 48 hours but I&#39;m guessing the length of a job can&#39;t be determined at submit time.  The cluster we send nova jobs to has 12 cores per node and 4GB of memory per core (48GB per node).

It won&#39;t be till early June that we begin work on the new CE.  I first have to setup GUMS and do away with our gridmap file.  Knowing what DN of both production and ITB jobs would look like for nova would help me map all the DNs to the nova user account.  I think the FQAN (correct nomenclature ?) would be part I&#39;m interested in.  I only want to map pilot DNs for nova to the nova user.  Past GUMS servers I&#39;ve setup against CMS would have a vomsUserGroup matching voGroup /cms and role of pilot, I&#39;d like to do something similar here as long I can match both production and ITB.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1494886181'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-15T22:09:41+00:00">May 15, 2017 10:09 PM UTC</time><a class="anchor" name="1494886181">&nbsp;</a></div><pre>Hi Trey,

Since factory ops is now added to the ticket, once you have the new host up and are ready for us to submit tests form ITB we just need some info so we can properly configure the factory.

First, we&#39;ll need the hostname.

Next, will this be pointing to the same pbs batch system? The old entry we have has the current settings,
maxWallTime=2880 (48h)
queue=batch

Will the walltime and queue name still be relevant for the new CE?

Finally, the old entry was configured for single core pilots only, if you are interested in supporting multicore for Nova, we&#39;ll need to know the core count of your nodes and memory / core.

When you&#39;re ready, feel free to reply here, or email us directly at osg-gfactory-support@....

Thanks,
Jeff Dost
OSG Glidein Factory Operations

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='33565#1494885238'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-15T21:53:58+00:00">May 15, 2017 09:53 PM UTC</time><a class="anchor" name="1494885238">&nbsp;</a></div><pre>OSC is moving to a new CE and they&#39;re trying to get it configured. You (Andrew/Alex) don&#39;t have to do anything right now.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='33565#1494884710'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-15T21:45:10+00:00">May 15, 2017 09:45 PM UTC</time> by <b>anorman@....</b><a class="anchor" name="1494884710">&nbsp;</a></div><pre>I&#34;m sitting with Alex Sousa now discussing this.  We&#39;re not actually sure what these tickets are about.

Can you advise?

--

Andrew J. Norman

Scientist I

Assistant Head, Science Workflows and Operations

Scientific Computing Division and NOvA Experiment

Fermi National Accelerator Laboratory

630 840 4016 office

www.fnal.gov&#60;<a href='http&#58;//www.fnal.gov/&#62' target='_blank' rel='nofollow'>http&#58;//www.fnal.gov/&#62</a>;

anorman@....&#60;http&#58;//person@....&#62;</pre></div><div class='update_description'><i onclick="document.location='33565#1494881787'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-15T20:56:27+00:00">May 15, 2017 08:56 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1494881787">&nbsp;</a></div><pre>Added factory support to this ticket for ITB testing.  Please let me know if I can assist.

Thank you,
Vince</pre></div><div class='update_description'><i onclick="document.location='33565#1494015066'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-05T20:11:06+00:00">May 5, 2017 08:11 PM UTC</time><a class="anchor" name="1494015066">&nbsp;</a></div><pre>Going with ITB for testing sounds ideal.  The system is not yet provisioned.  What is the best way to get the new host in ITB once it is setup, who do I contact?

Is there any issue with me building the new CE and getting it into OIM?  The registration in OIM and data sent by osg-info-services won&#39;t affect the factory entries, correct?

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1494012476'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-05T19:27:56+00:00">May 5, 2017 07:27 PM UTC</time><a class="anchor" name="1494012476">&nbsp;</a></div><pre>We get to

GLIDEIN_Gatekeeper = &#34;osg.osc.edu&#58;2119/jobmanager-pbs&#34;

via the the Nova_US_OSC_osg glidein factory entry.  If you want to deploy another CE in parallel we would submit to it automatically as soon as it was flagged as supporting Nova in the factory GLIDEIN_Supported_VOs attribute.  If you want us to test it first I think the factory folks would be willing (prefer?) to deploy the new entry in ITB first and we could test it from there.

Let us know what you need us to do.  Happy to help in any way.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Joe Boyd 579</pre></div><div class='update_description'><i onclick="document.location='33565#1494004274'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-05T17:11:14+00:00">May 5, 2017 05:11 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1494004274">&nbsp;</a></div><pre>I&#39;ve added Joe Boyd to this as he is the NOVA manager listed in OIM.  Perhaps he can shed some light on this. Also, is servicedesk@.... the correct administrative contact?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='33565#1493914285'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-04T16:11:25+00:00">May 4, 2017 04:11 PM UTC</time><a class="anchor" name="1493914285">&nbsp;</a></div><pre>I could use some input from those at NOVA.  We are planning to deploy a new CE and would like to be able to test this CE before moving production jobs.  Does NOVA support this?  Currently our CE is osg.osc.edu and we&#39;d like to retire this host by May 23rd.  If NOVA supports sending test jobs to a new CE, let me know what on my end would be required.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1493213427'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-26T13:30:27+00:00">Apr 26, 2017 01:30 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1493213427">&nbsp;</a></div><pre>Hi Trey,

I have added NOVA support to this ticket via CC.  I&#39;ll keep an eye out for responses and update the ticket with additional contacts if necessary.</pre></div><div class='update_description'><i onclick="document.location='33565#1493065334'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-24T20:22:14+00:00">Apr 24, 2017 08:22 PM UTC</time><a class="anchor" name="1493065334">&nbsp;</a></div><pre>The two instance approach is what I was thinking but I wasn&#39;t sure how it would work for NOVA.  If we have two CEs, can NOVA jobs be directed to the new CE for testing purposes?  This may be a question for those who run the systems on NOVA side of things and not sure if they can be CC&#39;ed here or if they are already.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div><div class='update_description'><i onclick="document.location='33565#1493064750'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-24T20:12:30+00:00">Apr 24, 2017 08:12 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1493064750">&nbsp;</a></div><pre>Trey,

You can do whatever you&#39;d like.  Some institutions will register a new resource in OIM and have two instances running concurrently for a moment while they decommission the old one.  You can also, just as easily, set a downtime for the resource.  I&#39;ve seen it done both ways plenty of times.  The only reason to pick one over the other is what sorts of local policy each site has that would guide them in the decision.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='33565#1493064291'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-24T20:04:51+00:00">Apr 24, 2017 08:04 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1493064291">&nbsp;</a></div><pre>We at OSC are planning to migrate our aging RHEL6 OSG GRAM CE to a more modern RHEL7 OSG HTCondor-CE.  I wanted to know if those at OSC had any advice about how best to perform such a migration.  Right now everything is associated to osg.osc.edu.  Should we create a new system with a new name and just register a new resource or should we attempt to keep the name and have an outage while the new system is brought online with old name?  Our only support VO is NOVA.  I don&#39;t know if the info services data uploaded by a CE would be enough to update NOVA where to send jobs.

If there is a better source for such questions, like a mailing list, please advise.

Thanks,
- Trey

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=John Dockendorf A59696</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F33565">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
