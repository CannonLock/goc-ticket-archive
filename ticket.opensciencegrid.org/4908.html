<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[4908] dCache - Some questions about Space Reservation</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=4908" method="post">
<div class="page-header">
    <h3><span class="muted">4908</span> / dCache - Some questions about Space Reservation</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Sharma Neha</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-04-30</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Neha Sharma <span class="muted"> / OSG Storage Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/4908", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='4908#1209747395'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-05-02T16:56:35+00:00">May 2, 2008 04:56 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1209747395">&nbsp;</a></div><pre>Thanks very much for your patience  , Neha..
I  think you have answered my big question J

By the way, according to the dcache-support people,  there is no way for dcache to assign space token from a
specific linkgroup from client side..
It would always choose the linkgroup which has the most free space to assign a token.. so to make space
reservations on specific linkgroup,
We need to use the ssh admin interface&#58;  cd SrmSpaceManager ; reserve ……

Thanks

Wenjing

From&#58; Neha Sharma [mailto&#58;neha@....]
Sent&#58; Wednesday, April 30, 2008 6&#58;36 PM
To&#58; wenjing wu
Cc&#58; Neha Sharma; tdh@....; &#39;McKee, Shawn&#39;
Subject&#58; Re&#58; still some questions about space reservation

Hi Wenjing

Please see embedded

On Apr 23, 2008, at 12&#58;43 AM, wenjing wu wrote&#58;

Hi, Neha and Ted

Still I have some questions about the dcache SRM space reservation,
On the wiki page, I see two ways to configure the space reservation,
One is called opportunist space reservation&#58;
<a href='https&#58;//twiki.grid.iu.edu/twiki/bin/view/Storage/OpportunisticStorageUse' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/twiki/bin/view/Storage/OpportunisticStorageUse</a>
the other is called srm server space reservation&#58;
<a href='https&#58;//twiki.grid.iu.edu/twiki/bin/view/Storage/SpaceResServerSetup' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/twiki/bin/view/Storage/SpaceResServerSetup</a>

to me there are 1  difference between them&#58;
<div id='show_376420017' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_376420017'>
Please note that any difference you see is unintentional. I had written the
<a href='https&#58;//twiki.grid.iu.edu/twiki/bin/view/Storage/SpaceResServerSetup' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/twiki/bin/view/Storage/SpaceResServerSetup</a>
document in our early stages of getting familiar with Space Reservation. As we gained more knowledge, Ted put
together a much more comprehensive documentation at
<a href='https&#58;//twiki.grid.iu.edu/twiki/bin/view/Storage/OpportunisticStorageUse.' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/twiki/bin/view/Storage/OpportunisticStorageUse.</a>
You should refer to <a href='https&#58;//twiki.grid.iu.edu/twiki/bin/view/Storage/OpportunisticStorageUse' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/twiki/bin/view/Storage/OpportunisticStorageUse</a>

1 .. the opportunist space needs to specify a store unit for the link, and there is  a tag in the directory in the
pnfs which would make file written to this directory go
To pools attached to this link, while the second one use any-store for the links, I guess this probably mean files
written to any directory could go to pools attached to this link..

But in the wiki page, it is noted that , the files could get deleted by some upcoming tools if the space token
expired in opportunistic space reservation Area..
But From the difference I could see below, I cannot understand how does this happen.. I just want to make
sure, is that true if the administrator doesn&#39;t use any tools, data in opportunistic Area wouldnot be deleted  ?

Yes, in current implementation, the data stored under an expired space reservation (in opportunistic area) does
not get deleted. An expired reservation just means that no more data can be copied under that reservation.

In our site, we have a hybrid way.. better to post the link part of our PoolManager.conf

psu create link sres-link any-protocol sres world-net
psu set link sres-link -readpref=10 -writepref=10 -cachepref=10 -p2ppref=-1
psu add link sres-link SresPools

psu create link resilient-link any-protocol Resilient world-net
psu set link resilient-link -readpref=10 -writepref=10 -cachepref=10 -p2ppref=-1
psu add link resilient-link ResilientPools

psu create link atlas-link any-protocol world-net atlas
psu set link atlas-link -readpref=10 -writepref=10 -cachepref=10 -p2ppref=-1
psu add link atlas-link AtlasPools

psu create link adata-link any-protocol world-net adata
psu set link adata-link -readpref=10 -writepref=10 -cachepref=10 -p2ppref=-1
psu add link adata-link AdataPools
#
# The link Groups ...
#
psu create linkGroup sres-link-group
psu set linkGroup custodialAllowed sres-link-group false
psu set linkGroup replicaAllowed sres-link-group true
psu set linkGroup nearlineAllowed sres-link-group true
psu set linkGroup outputAllowed sres-link-group true
psu set linkGroup onlineAllowed sres-link-group true
psu set linkGroup attribute sres-link-group HSM=none
psu addto linkGroup sres-link-group sres-link

psu create linkGroup atlasmcdisk-link-group
psu set linkGroup custodialAllowed atlasmcdisk-link-group false
psu set linkGroup replicaAllowed atlasmcdisk-link-group true
psu set linkGroup nearlineAllowed atlasmcdisk-link-group true
psu set linkGroup outputAllowed atlasmcdisk-link-group true
psu set linkGroup onlineAllowed atlasmcdisk-link-group true
psu set linkGroup attribute atlasmcdisk-link-group HSM=none
psu addto linkGroup atlasmcdisk-link-group atlas-link

psu create linkGroup atlasdatadisk-link-group
psu set linkGroup custodialAllowed atlasdatadisk-link-group false
psu set linkGroup replicaAllowed atlasdatadisk-link-group true
psu set linkGroup nearlineAllowed atlasdatadisk-link-group true
psu set linkGroup outputAllowed atlasdatadisk-link-group true
psu set linkGroup onlineAllowed atlasdatadisk-link-group true
psu set linkGroup attribute atlasdatadisk-link-group HSM=none
psu addto linkGroup atlasdatadisk-link-group adata-link

so we have 3 linkgroups which are for space reservation,  and links belong to these linkgroup have its specified
store unit (like sres, atlas,adata) instead of any-store,
because, we make these tag to different directories, as in , tag directory /pnfs/aglt2.org/atlasmcdisk/  as
.(tag)(OSMTemplate)&#58;StoreName usatlas
.(tag)(sGroup)&#58;atlas
.(tag)(AccessLatency)&#58;ONLINE
.(tag)(RetentionPolicy)&#58;REPLICA

We are doing this because we want to make files go to designated pools which are attached to this link..

But this seems to be a way for opportunistic space reservation.. of course, we need the data in this directory to
be permanent..

All the data is permanent. As I mentioned earlier, no data gets deleted (until you explicitly run the Space
Reservation Cleaner tool with some specific options)

My another question is &#58; we also enabled the implicit space reservation , thus every srm write request would get
a temporary token from the space manager,
But according to the log , space manager would always choose a linkgroup among the 3 linkgroups based on its
available reservable space, so it would always
Choose the linkgroup which has biggest reservable space,  in our case,  it is atlasdatadisk-lin-group, but the link
belonged to atlasdata-link-group which is data-link
Is configured to have store unit   “adata”  instead of  any-store,  so only implicit srm write request to
/pnfs/aglt2.org/atlasdatadisk would get its right write pools,
Because this dir is tagged with the store unit “adata”..

We think that if directories are tagged properly, then this should work. However, we need to find out to what
level does Space Manager honor this..we will get back to you..

So my question is &#58; could dcache assign temporary space tokens based on the target dir you want to write?
For example,
If I want to write to /pnfs/aglt2.org/atlasmcdisk/  , it would assign to space token from the atlasmcdisk-link-
group?

And  finally , most important question &#58; can we configure the space reservation this way for our production ?
Because I am not sure if I am configuring it to be a opportunistic way which would result in data deletion after a
period..

No data will get deleted by itself.

And another more question&#58;  is that true, if implicit space reservation is disabled, the client always need to do a
space reservation before any write  in both opportunistic way and traditional space reservation?
Because I just see client usecases  for opportunistic ones, I guess they would apply to both way..

Ted can correct me if I wrong - if implicit space reservation is disabled, then no, client does not need to a space
reservation.

Ted/I will get back to you for any unanswered questions..

-Neha

Thanks

Wenjing
</div><script type='text/javascript'>
        $('#show_376420017').click(function() {
            $('#detail_376420017').slideDown("normal");
            $('#show_376420017').hide();
            $('#hide_376420017').show();
        });
        $('#hide_376420017').click(function() {
            $('#detail_376420017').slideUp();
            $('#hide_376420017').hide();
            $('#show_376420017').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4908#1208971995'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-23T17:33:15+00:00">Apr 23, 2008 05:33 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1208971995">&nbsp;</a></div><pre>Hi, Neha and Ted

Still I have some questions about the dcache SRM space reservation,
On the wiki page, I see two ways to configure the space reservation,
One is called opportunist space reservation&#58;
<a href='https&#58;//twiki.grid.iu.edu/twiki/bin/view/Storage/OpportunisticStorageUse' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/twiki/bin/view/Storage/OpportunisticStorageUse</a>
the other is called srm server space reservation&#58;
<a href='https&#58;//twiki.grid.iu.edu/twiki/bin/view/Storage/SpaceResServerSetup' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/twiki/bin/view/Storage/SpaceResServerSetup</a>

to me there are 1  difference between them&#58;

1 .. the opportunist space needs to specify a store unit for the link, and there is  a tag in the directory in the
pnfs which would make file written to this directory go
To pools attached to this link, while the second one use any-store for the links, I guess this probably mean files
written to any directory could go to pools attached to this link..

But in the wiki page, it is noted that , the files could get deleted by some upcoming tools if the space token
expired in opportunistic space reservation Area..
But From the difference I could see below, I cannot understand how does this happen.. I just want to make
sure, is that true if the administrator doesn&#39;t use any tools, data in opportunistic Area wouldnot be deleted  ?

In our site, we have a hybrid way.. better to post the link part of our PoolManager.conf

psu create link sres-link any-protocol sres world-net
psu set link sres-link -readpref=10 -writepref=10 -cachepref=10 -p2ppref=-1
psu add link sres-link SresPools

psu create link resilient-link any-protocol Resilient world-net
psu set link resilient-link -readpref=10 -writepref=10 -cachepref=10 -p2ppref=-1
psu add link resilient-link ResilientPools

psu create link atlas-link any-protocol world-net atlas
psu set link atlas-link -readpref=10 -writepref=10 -cachepref=10 -p2ppref=-1
psu add link atlas-link AtlasPools

<div id='show_801366309' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_801366309'>psu create link adata-link any-protocol world-net adata
psu set link adata-link -readpref=10 -writepref=10 -cachepref=10 -p2ppref=-1
psu add link adata-link AdataPools
#
# The link Groups ...
#
psu create linkGroup sres-link-group
psu set linkGroup custodialAllowed sres-link-group false
psu set linkGroup replicaAllowed sres-link-group true
psu set linkGroup nearlineAllowed sres-link-group true
psu set linkGroup outputAllowed sres-link-group true
psu set linkGroup onlineAllowed sres-link-group true
psu set linkGroup attribute sres-link-group HSM=none
psu addto linkGroup sres-link-group sres-link

psu create linkGroup atlasmcdisk-link-group
psu set linkGroup custodialAllowed atlasmcdisk-link-group false
psu set linkGroup replicaAllowed atlasmcdisk-link-group true
psu set linkGroup nearlineAllowed atlasmcdisk-link-group true
psu set linkGroup outputAllowed atlasmcdisk-link-group true
psu set linkGroup onlineAllowed atlasmcdisk-link-group true
psu set linkGroup attribute atlasmcdisk-link-group HSM=none
psu addto linkGroup atlasmcdisk-link-group atlas-link

psu create linkGroup atlasdatadisk-link-group
psu set linkGroup custodialAllowed atlasdatadisk-link-group false
psu set linkGroup replicaAllowed atlasdatadisk-link-group true
psu set linkGroup nearlineAllowed atlasdatadisk-link-group true
psu set linkGroup outputAllowed atlasdatadisk-link-group true
psu set linkGroup onlineAllowed atlasdatadisk-link-group true
psu set linkGroup attribute atlasdatadisk-link-group HSM=none
psu addto linkGroup atlasdatadisk-link-group adata-link

so we have 3 linkgroups which are for space reservation,  and links belong to these linkgroup have its specified
store unit (like sres, atlas,adata) instead of any-store,
because, we make these tag to different directories, as in , tag directory /pnfs/aglt2.org/atlasmcdisk/  as
.(tag)(OSMTemplate)&#58;StoreName usatlas
.(tag)(sGroup)&#58;atlas
.(tag)(AccessLatency)&#58;ONLINE
.(tag)(RetentionPolicy)&#58;REPLICA

We are doing this because we want to make files go to designated pools which are attached to this link..

But this seems to be a way for opportunistic space reservation.. of course, we need the data in this directory to
be permanent..

My another question is &#58; we also enabled the implicit space reservation , thus every srm write request would get
a temporary token from the space manager,
But according to the log , space manager would always choose a linkgroup among the 3 linkgroups based on its
available reservable space, so it would always
Choose the linkgroup which has biggest reservable space,  in our case,  it is atlasdatadisk-lin-group, but the link
belonged to atlasdata-link-group which is data-link
Is configured to have store unit   “adata”  instead of  any-store,  so only implicit srm write request to
/pnfs/aglt2.org/atlasdatadisk would get its right write pools,
Because this dir is tagged with the store unit “adata”..

So my question is &#58; could dcache assign temporary space tokens based on the target dir you want to write?
For example,
If I want to write to /pnfs/aglt2.org/atlasmcdisk/  , it would assign to space token from the atlasmcdisk-link-
group?

And  finally , most important question &#58; can we configure the space reservation this way for our production ?
Because I am not sure if I am configuring it to be a opportunistic way which would result in data deletion after a
period..

And another more question&#58;  is that true, if implicit space reservation is disabled, the client always need to do a
space reservation before any write  in both opportunistic way and traditional space reservation?
Because I just see client usecases  for opportunistic ones, I guess they would apply to both way..

Thanks

Wenjing
</div><script type='text/javascript'>
        $('#show_801366309').click(function() {
            $('#detail_801366309').slideDown("normal");
            $('#show_801366309').hide();
            $('#hide_801366309').show();
        });
        $('#hide_801366309').click(function() {
            $('#detail_801366309').slideUp();
            $('#hide_801366309').hide();
            $('#show_801366309').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F4908">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
