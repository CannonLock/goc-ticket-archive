<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[26738] GUMS error</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=26738" method="post">
<div class="page-header">
    <h3><span class="muted">26738</span> / GUMS error</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Teresa Knight</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Teresa Knight</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-09-15</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Carl Edquist <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/26738", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='26738#1442334098'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T16:21:38+00:00">Sep 15, 2015 04:21 PM UTC</time> by <b>echism</b><a class="anchor" name="1442334098">&nbsp;</a></div><pre>Thanks!</pre></div><div class='update_description'><i onclick="document.location='26738#1442004793'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T20:53:13+00:00">Sep 11, 2015 08:53 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1442004793">&nbsp;</a></div><pre>Yes, thanks.

On Fri, Sep 11, 2015 at 1&#58;35 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26738#1442003738'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T20:35:38+00:00">Sep 11, 2015 08:35 PM UTC</time><a class="anchor" name="1442003738">&nbsp;</a></div><pre>Great!  Can we close the ticket?

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26738#1442001268'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T19:54:28+00:00">Sep 11, 2015 07:54 PM UTC</time><a class="anchor" name="1442001268">&nbsp;</a></div><pre>Thank-You!
I&#39;m not sure why localGroupToAccountmapping is there- I inherited the configuration. I also may have messed up the config while debugging. As long as it works I&#39;ll leave it alone.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=tknight/CN=740452/CN=Teresa Lynn Knight</pre></div><div class='update_description'><i onclick="document.location='26738#1442000567'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T19:42:47+00:00">Sep 11, 2015 07:42 PM UTC</time><a class="anchor" name="1442000567">&nbsp;</a></div><pre>Figured it out - it&#39;s a misconfiguration.

Your host-to-group mapper had&#58;

&#60;hostToGroupMapping groupToAccountMappings=&#34;localGrouptoAccountmapping, cmsuser, cmsuser-null, mis, osg, glow, uscmsuser, uscmst2admin, GroupToLocalRSV, rsv, uscmssoft, uscmsprod, uscmsphedex, uscmsfrontier&#34; description=&#34;CMS&#34; dn=&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=cms.tier3.ucdavis.edu&#34;/&#62;

Where &#39;localGrouptoAccountmapping&#39; maps users in the set &#39;localUserGroup&#39; to accounts &#39;localAccountMapper&#39;.

However, &#39;localUserGroup&#39; is a VOMS-based group consisting of all CMS users while &#39;localAccountMapper&#39; only maps &#39;Bockjoo Kim&#39;; that means all other CMS users will not map.

I tried removing localGrouptoAccountmapping from the list for cms.tier3.ucdavis.edu and things work &#39;as expected&#39;.

What&#39;s the intent for &#39;localGrouptoAccountmapping&#39;?  I suspect you may want a user group of type &#39;manual&#39;, not &#39;voms&#39;?

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26738#1441998138'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T19:02:18+00:00">Sep 11, 2015 07:02 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1441998138">&nbsp;</a></div><pre>That one is empty.

-rw-r--r--   1 tomcat tomcat      0 Sep 11 09&#58;22 catalina.2015-09-11.log
-rw-r--r--   1 tomcat tomcat 181680 Sep 11 12&#58;01 catalina.out
-rw-r--r--   1 tomcat tomcat 110046 Sep 11 12&#58;01 gums-service-admin.log
-rw-r--r--   1 tomcat tomcat   2570 Sep 11 11&#58;55
gums-service-cybersecurity.log
-rw-r--r--   1 tomcat tomcat      0 Sep 11 09&#58;22 host-manager.2015-09-11.log
-rw-r--r--   1 tomcat tomcat      0 Sep 11 09&#58;22 localhost.2015-09-11.log
-rw-r--r--   1 tomcat tomcat      0 Sep 11 09&#58;22 manager.2015-09-11.log
-rw-r--r--   1 tomcat tomcat      0 Sep 11 09&#58;22 trustmanager.log

On Fri, Sep 11, 2015 at 12&#58;00 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26738#1441998002'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T19:00:02+00:00">Sep 11, 2015 07:00 PM UTC</time><a class="anchor" name="1441998002">&nbsp;</a></div><pre>Hm - another useful log would be (possibly)&#58;

/var/log/tomcat6/trustmanager.log

Does seem to be a communication issue between your GUMS server and voms2.cern.ch.  Have you checked simple GSI things (is osg-ca-certs installed?  Is fetch-crl installed?  Has fetch-crl been run recently?)?

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26738#1441997794'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T18:56:34+00:00">Sep 11, 2015 06:56 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1441997794">&nbsp;</a></div><pre>Yes, here it is.

On Fri, Sep 11, 2015 at 11&#58;49 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26738#1441997375'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T18:49:35+00:00">Sep 11, 2015 06:49 PM UTC</time><a class="anchor" name="1441997375">&nbsp;</a></div><pre>Hi Teresa,

Now I see no attachments!  I wonder if there&#39;s issues with the ticket system?

Can you send email too?

Brian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26738#1441997266'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T18:47:46+00:00">Sep 11, 2015 06:47 PM UTC</time><a class="anchor" name="1441997266">&nbsp;</a></div><pre>Attached is gums-service-admin.log

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=tknight/CN=740452/CN=Teresa Lynn Knight</pre></div><div class='update_description'><i onclick="document.location='26738#1441996930'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T18:42:10+00:00">Sep 11, 2015 06:42 PM UTC</time><a class="anchor" name="1441996930">&nbsp;</a></div><pre>Teresa,

When I try to replicate, I get more detailed messages from /var/log/tomcat6/gums-service-admin.log.  Can you post that too?

Brian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26738#1441996525'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T18:35:25+00:00">Sep 11, 2015 06:35 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1441996525">&nbsp;</a></div><pre>much appreciated!

On Fri, Sep 11, 2015 at 11&#58;31 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26738#1441996295'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T18:31:35+00:00">Sep 11, 2015 06:31 PM UTC</time><a class="anchor" name="1441996295">&nbsp;</a></div><pre>So, the issue from the catalina.out is this&#58;

11 Sep 2015 18&#58;22&#58;41,200 [ERROR]&#58; gov.bnl.gums.userGroup.VOMSUserGroup Couldn&#39;t retrieve users&#58;
java.lang.NullPointerException
at gov.bnl.gums.userGroup.VOMSUserGroup.retrieveMembers(VOMSUserGroup.java&#58;435)
at gov.bnl.gums.userGroup.VOMSUserGroup.updateMembers(VOMSUserGroup.java&#58;362)
at gov.bnl.gums.CoreLogic.updateGroupsImpl(CoreLogic.java&#58;459)
at gov.bnl.gums.CoreLogic.updateGroups(CoreLogic.java&#58;213)
at gov.bnl.gums.GUMS$1.run(GUMS.java&#58;93)
at java.util.TimerThread.mainLoop(Timer.java&#58;555)
at java.util.TimerThread.run(Timer.java&#58;505)
11 Sep 2015 18&#58;22&#58;41,200 [WARN]&#58; gums.gumsAdmin User group update for cmssoft failed&#58; Couldn&#39;t retrieve users&#58; null

I&#39;m a bit stumped.  Researching possible causes / trying to reproduce right now.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26738#1441994168'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T17:56:08+00:00">Sep 11, 2015 05:56 PM UTC</time><a class="anchor" name="1441994168">&nbsp;</a></div><pre>I&#39;ve added Brian to group ADMIN in GUMS. I couldn&#39;t find the DN for Carl in the GUMS mysql database or would have added him too.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=tknight/CN=740452/CN=Teresa Lynn Knight</pre></div><div class='update_description'><i onclick="document.location='26738#1441989570'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T16:39:30+00:00">Sep 11, 2015 04:39 PM UTC</time><a class="anchor" name="1441989570">&nbsp;</a></div><pre>I&#39;ve attached catalina.out. Except for glow and rsv everything is mapped to NULL.

$ hostname -f
agent.tier3.ucdavis.edu

$ ls -la /etc/grid-security/http
total 44
drwxrwxr-x. 2 tomcat tomcat 4096 Sep 11 08&#58;16 .
drwxr-xr-x. 5 root   root   4096 Sep 10 18&#58;15 ..
-rw-r--r--  1 root   root   2957 Sep  8 15&#58;18 certificate.pfx
-rw-r--r--  1 root   root   1874 Sep 11 08&#58;16 cmscert.pem
-r--------  1 root   root   1704 Sep 11 08&#58;16 cmskey.pem
-rw-r--r--. 1 tomcat tomcat 1887 Aug 28 15&#58;45 hostcert.pem
-rw-------. 1 tomcat tomcat 1679 Aug 28 15&#58;45 hostkey.pem
-rw-r--r--. 1 tomcat tomcat 1887 Sep 11 08&#58;27 httpcert.pem
-rw-r--r--  1 root   root   1887 Sep 11 08&#58;14 httpcert.pem.sav
-rw-------. 1 tomcat tomcat 1679 Sep 11 08&#58;27 httpkey.pem
-rw-------  1 root   root   1679 Sep 11 08&#58;14 httpkey.pem.sav

$  openssl x509 -in httpcert.pem -text -noout
Certificate&#58;
Data&#58;
Version&#58; 3 (0x2)
Serial Number&#58;
0e&#58;96&#58;7e&#58;f4&#58;c1&#58;b0&#58;05&#58;5d&#58;5b&#58;06&#58;ff&#58;97&#58;70&#58;8e&#58;87&#58;5a
Signature Algorithm&#58; sha256WithRSAEncryption
Issuer&#58; DC=com, DC=DigiCert-Grid, O=DigiCert Grid, CN=DigiCert Grid CA-1
Validity
Not Before&#58; Jul  6 00&#58;00&#58;00 2015 GMT
Not After &#58; Aug 22 12&#58;00&#58;00 2016 GMT
Subject&#58; DC=com, DC=DigiCert-Grid, O=Open Science Grid, OU=Services, CN=http/agent.tier3.ucdavis.edu
Subject Public Key Info&#58;
Public Key Algorithm&#58; rsaEncryption
Public-Key&#58; (2048 bit)

<div id='show_1939442395' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1939442395'>by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=tknight/CN=740452/CN=Teresa Lynn Knight
</div><script type='text/javascript'>
        $('#show_1939442395').click(function() {
            $('#detail_1939442395').slideDown("normal");
            $('#show_1939442395').hide();
            $('#hide_1939442395').show();
        });
        $('#hide_1939442395').click(function() {
            $('#detail_1939442395').slideUp();
            $('#hide_1939442395').hide();
            $('#show_1939442395').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='26738#1441936135'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T01:48:55+00:00">Sep 11, 2015 01:48 AM UTC</time><a class="anchor" name="1441936135">&nbsp;</a></div><pre>Thanks, I did upgrade to GUMS 1.5 and the problem persists. I have attached gums.config.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=tknight/CN=740452/CN=Teresa Lynn Knight</pre></div><div class='update_description'><i onclick="document.location='26738#1441933660'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-11T01:07:40+00:00">Sep 11, 2015 01:07 AM UTC</time><a class="anchor" name="1441933660">&nbsp;</a></div><pre>Hi Terri,

What precise fields did you enter into the web form?  This particular message&#58;

Cannot map user for host &#39;&#39; - it is not defined in any host to group mapping.

Indicates that no hostname was given to GUMS (which means that none of the host-to-group rules you posted could be applied).  That said, I can confirm that when I manually use the webpage, I also get null.

As I can&#39;t access most functionality in the GUMS web interface for debugging, could you please post the gums.config?  PLEASE BE CAREFUL to remove the password and MySQL login details if you do!

Thanks,

Brian

PS - Carl, I don&#39;t think this is the same issue as 24707.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26738#1441927530'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-10T23:25:30+00:00">Sep 10, 2015 11:25 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1441927530">&nbsp;</a></div><pre>Hi Terri,

It&#39;s possible this is the same mapAccount issue as <a href='24707.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/24707</a>, now tracked in <a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2028' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2028</a> .

There is a fix in place for that in gums-1.5.0-2, currently available from osg-development.  You could try updating to the development version (yum update --enablerepo=osg-development gums&#92;*), otherwise it should go out with the October OSG release.

Carl</pre></div><div class='update_description'><i onclick="document.location='26738#1441923198'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-10T22:13:18+00:00">Sep 10, 2015 10:13 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1441923198">&nbsp;</a></div><pre>Carl, could you take a look at this?</pre></div><div class='update_description'><i onclick="document.location='26738#1441914787'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-10T19:53:07+00:00">Sep 10, 2015 07:53 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1441914787">&nbsp;</a></div><pre>I am assigning this to the software team as they will have the most insight on gums errors. Software, can you please look in to this.  Thanks!

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26738#1441839632'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-09T23:00:32+00:00">Sep 9, 2015 11:00 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441839632">&nbsp;</a></div><pre>Sorry, I&#39;m back.

I&#39;ve installed GUMS 1.4.4,OSG 3.2 on SLC 6.7. I restored the previous mysql database. When I map any grid identity to account I get the error,
Error mapping grid identity&#58; java.lang.RuntimeException&#58; Cannot map user for host &#39;&#39; - it is not defined in any host to group mapping.
When I map an account to grid identity it returns null.  In gums.config&#58;
&#60;hostToGroupMapping
groupToAccountMappings=&#39;localGrouptoAccountmapping, cmsuser, cmsuser-null, mis, osg, glow, uscmsuser, uscmst2admin, GroupToLocalRSV, rsv, uscmssoft, uscmsprod, uscmsphedex, uscmsfrontier&#39;
description=&#39;CMS&#39;
dn=&#39;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=cms.tier3.ucdavis.edu&#39;/&#62;

&#60;hostToGroupMapping
groupToAccountMappings=&#39;uscmsfrontier, uscmsphedex, uscmsprod, uscmssoft, uscmst2admin, uscmsuser, osg, cmsuser, cmsuser-null, mis, ops, phedex&#39;
description=&#39;&#39;
cn=&#39;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=srm/se.tier3.ucdavis.edu&#39;/&#62;

&#60;hostToGroupMapping
groupToAccountMappings=&#39;_test&#39;
description=&#39;&#39;
dn=&#39;/DC=com/DC=example/OU=Services/CN=example.site.com&#39;/&#62;

&#60;hostToGroupMapping
groupToAccountMappings=&#39;localGrouptoAccountmapping, phedex, cmsuser, gums-test, mis, osg, ops, uscmsuser, uscmssoft, uscmsprod, uscmsphedex&#39;
description=&#39;&#39;
dn=&#39;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=agent.tier3.ucdavis.edu&#39;/&#62;

&#60;hostToGroupMapping
groupToAccountMappings=&#39;cmsuser, cmsuser-null, fermilab, fermilab-production, fermilab-test, glow, localGrouptoAccountmapping, ops, osg, uscmsuser, uscmssoft, uscmsprod&#39;
description=&#39;UCSD Frankiac&#39;
cn=&#39;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=uclhc-fe-1.t2.ucsd.edu&#39;/&#62;

I see osg, glow, and rsv jobs running on the cluster but others aren&#39;t getting authenticated. Please advise.

Thanks,
Terri

<div id='show_205432482' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_205432482'>by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=tknight/CN=740452/CN=Teresa Lynn Knight

</div><script type='text/javascript'>
        $('#show_205432482').click(function() {
            $('#detail_205432482').slideDown("normal");
            $('#show_205432482').hide();
            $('#hide_205432482').show();
        });
        $('#hide_205432482').click(function() {
            $('#detail_205432482').slideUp();
            $('#hide_205432482').hide();
            $('#show_205432482').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F26738">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
