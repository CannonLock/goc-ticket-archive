<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[26948] Frontend not able to request glideins from ITB GOC Factory</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=26948" method="post">
<div class="page-header">
    <h3><span class="muted">26948</span> / Frontend not able to request glideins from ITB GOC Factory</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Neha Sharma</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Neha Sharma</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-10-20</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">OSG Glidein Factory Support <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/26948", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26948?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26948?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Frontend%20not%20able%20to%20request%20glideins%20from%20ITB%20GOC%20Factory%20ISSUE%3D26948%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='26948#1445375741'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-20T21:15:41+00:00">Oct 20, 2015 09:15 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1445375741">&nbsp;</a></div><pre>Closing this ticket per the last update.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26948#1445361717'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-20T17:21:57+00:00">Oct 20, 2015 05:21 PM UTC</time><a class="anchor" name="1445361717">&nbsp;</a></div><pre>Brendan,

No problem, I&#39;m sure I missed it before too. The question now is probably&#58; why do we even allow a hostname here that does not match the host the config is on? At the very least, it should probably be a tests upon a reconfig. I&#39;ll mention it to Jeff. Maybe he can include a test somewhere in his factory config rewrite.

Neha,

Please let us know if you have any further issues with the GOC-ITB factory.

Thanks.

Closing ticket.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26948#1445038100'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-16T23:28:20+00:00">Oct 16, 2015 11:28 PM UTC</time><a class="anchor" name="1445038100">&nbsp;</a></div><pre>Thanks for spotting that Marty, I can&#39;t believe I missed it after all the times I went over the factory config. I guess those grid.iu.edu addresses are starting to blur together too much.

I can confirm that we saw the Fermilab jobs make it to the ITB factory and run on a few sites, so it looks like this issue is resolved and this ticket can likely be closed. Sorry for how long it took to fix this, Neha.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='26948#1444946174'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-15T21:56:14+00:00">Oct 15, 2015 09:56 PM UTC</time><a class="anchor" name="1444946174">&nbsp;</a></div><pre>Hi Neha,

The typo was at the top of the factory config where your frontend is registered. It had

identity=&#34;fefermifife@....&#34;

instead of

identity=&#34;fefermifife@....&#34;

in it. Looks like a copy and paste error from whenever we were originally trying to register the frontend on the GOC-ITB.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26948#1444935794'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-15T19:03:14+00:00">Oct 15, 2015 07:03 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1444935794">&nbsp;</a></div><pre>Change that you made, fixed the issue! Several of my OFFSITE jobs have finished successfully.
I am curious as to what the change was. Can you share?
Thanks!</pre></div><div class='update_description'><i onclick="document.location='26948#1444775901'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-13T22:38:21+00:00">Oct 13, 2015 10:38 PM UTC</time><a class="anchor" name="1444775901">&nbsp;</a></div><pre>Neha,

I may have found a typo in the GOC-ITB factory config that may have been preventing us from seeing the Fermilab VO frontend. Can you resubmit another batch of test jobs?

Thanks,

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26948#1444767349'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-13T20:15:49+00:00">Oct 13, 2015 08:15 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1444767349">&nbsp;</a></div><pre>Brendan,

Do you have any new information with regards to what Neha posted last week?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26948#1444246389'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-07T19:33:09+00:00">Oct 7, 2015 07:33 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1444246389">&nbsp;</a></div><pre>I submitted 100 jobs under &#39;fermilab&#39; VO about an hour ago.

They are all idle.

Here is what I see in frontend logs

[2015-10-07 14&#58;27&#58;26,680] INFO&#58;             Jobs in schedd queues                 |      Glideins     |   Request
[2015-10-07 14&#58;27&#58;26,680] INFO&#58; Idle (match  eff   old  uniq )  Run ( here  max ) | Total Idle   Run  | Idle MaxRun Down Factory
[2015-10-07 14&#58;27&#58;26,681] INFO&#58;   123( 4100   123   123     0)     0(    0  410k) |     0     0     0 |    41   164 Up   Sum of useful factories
[2015-10-07 14&#58;27&#58;26,681] INFO&#58;     0(    0     0     0     0)     0(    0     0) |     0     0     0 |     0     0 Down Sum of down factories
[2015-10-07 14&#58;27&#58;26,681] INFO&#58;     0(    0     0     0     0)     0(    0     0) |     0     0     0 |     0     0 Down Unmatched
[2015-10-07 14&#58;27&#58;26,722] INFO&#58; Advertising global and singular requests for factory glidein-itb.grid.iu.edu
[2015-10-07 14&#58;27&#58;26,905] INFO&#58; Advertising 41 glideresource classads to the user pool
[2015-10-07 14&#58;27&#58;26,917] INFO&#58; There are 41 classads to advertise
[2015-10-07 14&#58;27&#58;27,433] INFO&#58; Done advertising
[2015-10-07 14&#58;27&#58;27,435] INFO&#58; iterate_one status&#58; None
[2015-10-07 14&#58;27&#58;27,435] INFO&#58; Writing stats

Let me know if I can provide any other info

thanks!</pre></div><div class='update_description'><i onclick="document.location='26948#1444082725'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-05T22:05:25+00:00">Oct 5, 2015 10:05 PM UTC</time><a class="anchor" name="1444082725">&nbsp;</a></div><pre>I&#39;ve gone over the frontend.xml that Neha sent us again, as well as triple checked all of the relevant factory frontend configuration settings, but I still can&#39;t see anything that would point to why this problem is occurring. The only failure notices that are reported in the collector logs are for non-FNAL IPs, so I can&#39;t see anything on the factory-side that could point me in the right direction for troubleshooting this.

Neha, can you submit another large round of test jobs aimed at GOC ITB, so we can see if anything shows up on our end this time?

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='26948#1444074544'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-05T19:49:04+00:00">Oct 5, 2015 07:49 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1444074544">&nbsp;</a></div><pre>I am sending this to the glidein factory for support.  Could you please look into this?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26948#1443808484'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-02T17:54:44+00:00">Oct 2, 2015 05:54 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1443808484">&nbsp;</a></div><pre>Hi Martin,

Our preprod frontend is still unable to request glideins from ITB GOC factory.
For background reference, I am copying/pasting entire email exchange here.

I have sent the frontend config in email thread. Let me know if I should attach it in ticket aswell.

thanks,

On Sep 3, 2015, at 3&#58;58 PM, Kandes, Martin &#60;mkandes@....&#62; wrote&#58;
Neha,
Two requests&#58; (1) Can you resend your frontend.xml file to us? (2) Can you send a large request of test jobs via the GOC-ITB factory? Right now, I can&#39;t find any sign of the Fermilab frontend talking to the GOC-ITB factory.

From&#58; osg-gfactory-support-bounces@.... [osg-gfactory-support-bounces@....] on behalf of Neha Sharma [neha@....]
Sent&#58; Thursday, September 03, 2015 12&#58;57 PM
To&#58; Brendan Dennis
Cc&#58; Kenneth Richard Herner; Neha Sharma; osg-gfactory-support@....; Joseph B Boyd; Bo Jayatilaka
Subject&#58; Re&#58; [Osg-gfactory-support] Request access to ITB GOC Factory

Hi Brendan,
We are still unable to use ITB GOC factory.

Here is the most recent failure we see&#58;

From our
frontend log (column 17 is saying it&#39;s requesting a glidein)&#58;

[root@gwmsfrontend1-pp group_OSG_cdf]# vi OSG_cdf.info.log
[root@gwmsfrontend1-pp group_OSG_cdf]# pwd
/var/log/gwms-frontend/group_OSG_cdf

[2015-09-03 14&#58;25&#58;45,712] INFO&#58; 1( 1 1 1 0) 0( 0 10000) | 0 0 0 | 1 2 Up
CDF_IT_CNAF_ce01@gfactory_instance@ITBGOC@....
[2015-09-03 14&#58;25&#58;45,716] INFO&#58; 1( 1 1 1 0) 0( 0 10000) | 0 0 0 | 1 2 Up
CDF_IT_CNAF_ce04@gfactory_instance@ITBGOC@....
<div id='show_1134882825' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1134882825'>[2015-09-03 14&#58;25&#58;45,716] INFO&#58; 1( 1 1 1 0) 0( 0 10000) | 0 0 0 | 1 2 Up
CDF_IT_CNAF_ce07@gfactory_instance@ITBGOC@....

But if I go here I do not see a glidein actually being sent for that entry point.

<a href='http&#58;//glidein-itb.grid.iu.edu/factory/monitor/factoryStatusNow.html' target='_blank' rel='nofollow'>http&#58;//glidein-itb.grid.iu.edu/factory/monitor/factoryStatusNow.html</a>

It&#39;s troublesome that in the drop down list on that page I don&#39;t see a
&#34;Fermilab-fifebatch_frontend&#34; entry like I do if I go to the production factory&#58;

<a href='http&#58;//glidein.grid.iu.edu/factory/monitor/factoryStatusNow.html' target='_blank' rel='nofollow'>http&#58;//glidein.grid.iu.edu/factory/monitor/factoryStatusNow.html</a>

- Neha

On Aug 11, 2015, at 1&#58;07 AM, Brendan Dennis &#60;bmdennis@....&#62; wrote&#58;

So far, I haven&#39;t been able to find anything in the logs on ITB that would point to the problem. All of the errors I can find are coming from non-FNAL IPs and thus don&#39;t seem to be relevant. I&#39;ve also gone over the frontend.xml you sent me, along with all of the frontend configuration files on the ITB factory, and I still can&#39;t figure out why you&#39;re only seeing the SDSC factory (which is especially weird since SDSC isn&#39;t even mentioned anywhere in the xml).

So, in other words, I&#39;m at a loss for what the problem could be. I&#39;ll try and give it another look over during my shift on Wednesday.

--
Brendan Dennis
UCSD Glidein Factory Operations

On Mon, Aug 10, 2015 at 2&#58;41 PM, Neha Sharma &#60;neha@....&#62; wrote&#58;
I have just emailed you the config Brendan.

Also, do you now see anything in factory logs ? ( I have just submitted couple of test jobs )

thanks,
-Neha

On Aug 10, 2015, at 12&#58;55 PM, Brendan Dennis &#60;bmdennis@....&#62; wrote&#58;

Hey Neha,

There was a misconfiguration on the ITB factory which was preventing the collector frontend logs from updating properly, so I actually can&#39;t check them right now to see if we can see anything from our end. It&#39;s fixed now, but I&#39;ll have to give it another hour or two to wait for them to fill up before I can see if there&#39;s anything on our end that might be helpful.

Could you do me a favor and attach the frontend.xml you&#39;re using? I can give it another set of eyes to make sure there&#39;s not something hiding in there that&#39;s causing trouble.

As for access to the ITB factory, I&#39;ve asked Thomas Lee to get you an account on the &#34;jump&#34; server that&#39;ll allow you to then get to the ITB factory. Once that happens, all I&#39;ll need from you is the ssh pubkey you&#39;d like to use to get into ITB and you should be good to go.

--
Brendan Dennis
UCSD Glidein Factory Operations

On Sat, Aug 8, 2015 at 1&#58;48 PM, Neha Sharma &#60;neha@....&#62; wrote&#58;
Hi Brendan,

On Jul 30, 2015, at 10&#58;18 AM, Neha Sharma &#60;neha@....&#62; wrote&#58;

On Jul 29, 2015, at 7&#58;38 PM, Brendan Dennis &#60;bdennis@....&#62; wrote&#58;

Hey Neha,

It looks like the Fermilab frontend with that DN is already added and setup on the GOC ITB factory, so you should be good to go. Here&#39;s the info you may need for your frontend config for the ITB factory&#58;
DN=/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=glidein-itb.grid.iu.edu
factory_identity=&#34;gfactory@....&#34;
my_identity=&#34;fefermifife@....&#34;
node=&#34;glidein-itb.grid.iu.edu&#34;

I need some help getting this to work.

I configured one of the groups (OSG_nova) in my pre prod VO Frontend config to use

&#60;collectors&#62;
&#60;collector DN=&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=glidein-itb.grid.iu.edu&#34; factory_identity=&#34;gfactory@....&#34; my_identity=&#34;fefermifife@....&#34; node=&#34;glidein-itb.grid.iu.edu&#34;/&#62;
&#60;/collectors&#62;

and reconfigured it.

I then submit jobs OFFSITE so this OSG_nova group will get used -  jobs finish successfully, however VO Frontend logs show no sign of requesting glideins from this ITB GOC factory

[root@gwmsfrontend2-pp group_OSG_nova]# grep itb OSG_nova.info.log
[root@gwmsfrontend2-pp group_OSG_nova]#

It seems to be still using the production one

[2015-08-08 15&#58;38&#58;59,296] INFO&#58;     1(    2     1     1     0)     0(    0 10000) |     0     0     0 |     1     2 Up   OSG_US_MWT2_mwt2@gfactory_instance@SDSC@....
[2015-08-08 15&#58;38&#58;59,296] INFO&#58;     1(    2     1     1     0)     0(    0 10000) |     0     0     0 |     1     2 Up   OSG_US_SMU_mfosgce@gfactory_instance@SDSC@....
[2015-08-08 15&#58;38&#58;59,297] INFO&#58;     1(    2     1     1     0)     0(    0 10000) |     0     0     0 |     1     2 Up   OSG_US_SMU_smuosg1@gfactory_instance@SDSC@....
[2015-08-08 15&#58;38&#58;59,297] INFO&#58;

I cleaned out the job queues, restarted HTCondor on VO Frontend node and the VO Frontend itself, but that didn’t fix it..

I am probably doing something very stupid or missing a step somewhere..

Do you see any related activity on the ITB factory node ( yesterday or today ) ?

As for getting login access to the GOC ITB factory, I&#39;ll need to talk to Jeff about it, as I&#39;m not sure what the access policies are for it.

Yes, please check. Igor S. had mentioned earlier to us that getting login access for ITB GOC factory is possible.

Also, any update on this?

thanks,
- Neha

The only DN I can find that corresponds to a security name of &#34;Fermilab&#34; is&#58;
/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=gfrontend/sngpvm02.fnal.gov

I can&#39;t find anything for gpsn01.fnal.gov, so it looks like that was already removed at some point.

Great. Please remove this one (gfrontend/sngpvm02.fnal.gov) as well - it’s an old VO Frontend that should no longer be used.

Thanks Brendan!
- Neha

On Wed, Jul 29, 2015 at 3&#58;43 PM, Neha Sharma &#60;neha@....&#62;wrote&#58;
Hi Factory Support,

I have following 2 requests

1. I would like to configure our preprod (ITB) VOFrontend instances to use the ITB GOC factory ( at present, they are using production factory)

These VOFrontends will identify themselves with following DN

/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov

Symbolic name of user community is ‘Fermilab’
Security name to use is &#39;Fermilab-fifebatch&#39;
Contact person - Neha Sharma  - neha@.... - 630-840-6791 ( though, I prefer if you can use fife-support@.... )

Could this access be setup? and could we get login access to ITB factory nodes ( to debug issues ourselves and help expedite testing of new OSG sites)?

Let me know if you need any more information about this.

2. Do you have access set up for another VOFrontend at Fermilab that uses ‘Fermilab’ as security name? If you do, could you provide me it’s DN? We have shut down an old VO Frontend (running ongpsn01.fnal.gov) and I just to make sure we do the necessary cleanup in Production/ITB factory configs.

Thanks!
- Neha
</div><script type='text/javascript'>
        $('#show_1134882825').click(function() {
            $('#detail_1134882825').slideDown("normal");
            $('#show_1134882825').hide();
            $('#hide_1134882825').show();
        });
        $('#hide_1134882825').click(function() {
            $('#detail_1134882825').slideUp();
            $('#hide_1134882825').hide();
            $('#show_1134882825').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F26948">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 26948});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
