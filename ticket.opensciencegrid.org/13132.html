<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[13132] UCSD glideinWMS factory pilots crashing on UConn-OSG site</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=13132" method="post">
<div class="page-header">
    <h3><span class="muted">13132</span> / UCSD glideinWMS factory pilots crashing on UConn-OSG site</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Richard T. Jones</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">UCSD_glidein_glidein_2</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Richard T. Jones</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier2</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Verify Issue is Resolved</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-01-22</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG Glidein Factory Support <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/13132", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/13132?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/13132?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20UCSD%20glideinWMS%20factory%20pilots%20crashing%20on%20UConn-OSG%20site%20ISSUE%3D13132%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='13132#1360374282'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-09T01:44:42+00:00">Feb 9, 2013 01:44 AM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1360374282">&nbsp;</a></div><pre>Thank you for informing us that this issue has been resolved. I will close this ticket.  Please submit problems, requests, and questions at&#58; <a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a> OSG Grid Operations Center goc@...., 317-278-9699 Visit the OSG Operations Page&#58; <a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='13132#1358206604'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-01-14T23:36:44+00:00">Jan 14, 2013 11:36 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1358206604">&nbsp;</a></div><pre>Richard and Jeff,

Could someone please confirm this issue is resolved after its deployed.

Thanks,

Chris</pre></div><div class='update_description'><i onclick="document.location='13132#1357762514'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-01-09T20:15:14+00:00">Jan 9, 2013 08:15 PM UTC</time><a class="anchor" name="1357762514">&nbsp;</a></div><pre>Jeff,

Ok, sounds good.

-Richard J.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Richard T. Jones 594</pre></div><div class='update_description'><i onclick="document.location='13132#1357760794'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-01-09T19:46:34+00:00">Jan 9, 2013 07:46 PM UTC</time><a class="anchor" name="1357760794">&nbsp;</a></div><pre>Hi,

As an update I will comment that this will no longer be a problem when we ship 7.8 Condor as the default with the glideins.  We are planning to make this switch on the next production window, Jan 22nd.

Jeff

by /DC=org/DC=doegrids/OU=People/CN=Jeffrey M. Dost 948199</pre></div><div class='update_description'><i onclick="document.location='13132#1357706349'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-01-09T04:39:09+00:00">Jan 9, 2013 04:39 AM UTC</time> by <b>GLUEX</b><a class="anchor" name="1357706349">&nbsp;</a></div><pre>Chris,

I am not sure if anyone in Glow actually saw it.  Did you see any response?

-Richard J.

On 1/8/2013 8&#58;24 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='13132#1357694686'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-01-09T01:24:46+00:00">Jan 9, 2013 01:24 AM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1357694686">&nbsp;</a></div><pre>Glidein support,

Do you have anything further to add to this or can we consider this issue resolved?

Thanks,

Chris</pre></div><div class='update_description'><i onclick="document.location='13132#1355538461'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-15T02:27:41+00:00">Dec 15, 2012 02:27 AM UTC</time><a class="anchor" name="1355538461">&nbsp;</a></div><pre>No progress, as far as I know.  The work-around has me back in business.  If the GlideinWMS team wants to investigate further I can provide debug logs.  The crashes are inside the condor daemon, and I am not a condor developer.  I did read on the lists that the condor developers decided that the ipv6 section was too buggy and so went back and rewrote it in a later version beyond what we are currently running on the OSG.  Might be the simplest to just wait and try again after the next major condor update, and see if the problem has been resolved.

by /DC=org/DC=doegrids/OU=People/CN=Richard T. Jones 975420</pre></div><div class='update_description'><i onclick="document.location='13132#1355502528'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-14T16:28:48+00:00">Dec 14, 2012 04:28 PM UTC</time> by <b>echism</b><a class="anchor" name="1355502528">&nbsp;</a></div><pre>Glidein support,

Do you have anything further on this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='13132#1355168275'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-10T19:37:55+00:00">Dec 10, 2012 07:37 PM UTC</time><a class="anchor" name="1355168275">&nbsp;</a></div><pre>I found a temporary work-around for the problem of crashing pilots on my site.  I went into /etc/hosts on all of my worker nodes and made explicit entries for the VO frontend glideinWMS schedd host and the frontend glideinWMS collector host.  After this, the daemon stopped going to the DNS for this information and the crashes stopped.  I think it would still be useful to solve the problem, but I have a work-around in place for the moment.

by /DC=org/DC=doegrids/OU=People/CN=Richard T. Jones 975420</pre></div><div class='update_description'><i onclick="document.location='13132#1355166549'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-10T19:09:09+00:00">Dec 10, 2012 07:09 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1355166549">&nbsp;</a></div><pre>Hello Dan,

Over the weekend, by trial and error I was able to make the problem go away by adding explicit entries in my /etc/hosts file on all of the worker nodes for the frontend schedd and collector hosts.  Any any point I can remove those entries and let it fall back to DNS again, which might be useful to test any solutions that are put forward.

-Richard J.

On 12/10/2012 11&#58;24 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='13132#1355156670'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-10T16:24:30+00:00">Dec 10, 2012 04:24 PM UTC</time><a class="anchor" name="1355156670">&nbsp;</a></div><pre>Thanks for the debugging info.  I believe we have identified the source of trouble in Condor 7.6.10.

--Dan

by /DC=org/DC=doegrids/OU=People/CN=Dan Bradley 268953</pre></div><div class='update_description'><i onclick="document.location='13132#1354960597'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-08T09:56:37+00:00">Dec 8, 2012 09:56 AM UTC</time><a class="anchor" name="1354960597">&nbsp;</a></div><pre>Following suggestion by James, forwarding to osg-gfactory-support.

by /DC=org/DC=doegrids/OU=People/CN=Richard T. Jones 975420</pre></div><div class='update_description'><i onclick="document.location='13132#1354957568'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-08T09:06:08+00:00">Dec 8, 2012 09:06 AM UTC</time> by <b>jletts@....</b><a class="anchor" name="1354957568">&nbsp;</a></div><pre>forwarding to factory support list. cms-wms-support can do nothing
about pilots. please copy osg-gfactory-support@....

James

On Dec 7, 2012, at 9&#58;59 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='13132#1354946388'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-08T05:59:48+00:00">Dec 8, 2012 05:59 AM UTC</time><a class="anchor" name="1354946388">&nbsp;</a></div><pre>I was mistaken, the condor_startd daemons in the glidein pilots from glidein-1.t2.ucsd.edu are still crashing.  I was able to pkill -STOP one before it crashed and watch the calls to gethostbyname() as they occur by debugging with gdb.  Here is the sequence&#58; (1) gethostbyname(&#34;gluex.phys.uconn.edu&#34;), (2) gethostbyname(&#34;gluex.phys.uconn.edu&#34;) but this time called from a different function, (3) gethostbyname(&#34;gluex&#34;), and (4) gethostbyname(INVALID_POINTER).  Details of the debug sequence follow below.  I made core dumps at the doomed entry#4 to gethostbyname (core.23681-before) and after the segfault (core.23681-after) and saved them in <a href='http&#58;//gryphn.phys.uconn.edu/UConn-OSG/diagnose' target='_blank' rel='nofollow'>http&#58;//gryphn.phys.uconn.edu/UConn-OSG/diagnose</a>, please access them there.

1) called as gethostbyname(&#34;gluex.phys.uconn.edu&#34;), returns without problem, call stack was&#58;
#0  0x558041a5 in gethostbyname () from /lib/libc.so.6
#1  0x081e3efd in condor_gethostbyname_ipv6(char const*) ()
#2  0x081e40a5 in condor_gethostbyaddr_ipv6(char const*, unsigned int, int) ()
#3  0x081db4a9 in sin_to_hostname ()
#4  0x081951ca in IpVerify&#58;&#58;Verify(DCpermission, sockaddr_in const*, char const*, MyString*, MyString*) ()
#5  0x0817c41d in SecMan&#58;&#58;Verify(DCpermission, sockaddr_in const*, char const*, MyString*, MyString*) ()
#6  0x0812efa2 in DaemonCore&#58;&#58;Verify(char const*, DCpermission, sockaddr_in const*, char const*) ()
#7  0x08138722 in DaemonCore&#58;&#58;HandleReq(Stream*, Stream*) ()
#8  0x0813bf09 in DaemonCore&#58;&#58;HandleReqSocketHandler(Stream*) ()
#9  0x0813c417 in DaemonCore&#58;&#58;CallSocketHandler_worker(int, bool, Stream*) ()
#10 0x0813c84c in DaemonCore&#58;&#58;CallSocketHandler_worker_demarshall(void*) ()
#11 0x081fb783 in CondorThreads&#58;&#58;pool_add(void (*)(void*), void*, int*, char const*) ()
#12 0x08134864 in DaemonCore&#58;&#58;CallSocketHandler(int&, bool) ()
#13 0x08136bf0 in DaemonCore&#58;&#58;Driver() ()
#14 0x0814d3ff in main ()

2) called again as gethostbyname(&#34;gluex.phys.uconn.edu&#34;), returns without problem, call stack was
#0  0x558041a5 in gethostbyname () from /lib/libc.so.6
#1  0x08192c6b in verify_name_has_ip(char*, in_addr) ()
#2  0x0819524c in IpVerify&#58;&#58;Verify(DCpermission, sockaddr_in const*, char const*, MyString*, MyString*) ()
#3  0x0817c41d in SecMan&#58;&#58;Verify(DCpermission, sockaddr_in const*, char const*, MyString*, MyString*) ()
#4  0x0812efa2 in DaemonCore&#58;&#58;Verify(char const*, DCpermission, sockaddr_in const*, char const*) ()
#5  0x08138722 in DaemonCore&#58;&#58;HandleReq(Stream*, Stream*) ()
#6  0x0813bf09 in DaemonCore&#58;&#58;HandleReqSocketHandler(Stream*) ()
#7  0x0813c417 in DaemonCore&#58;&#58;CallSocketHandler_worker(int, bool, Stream*) ()
#8  0x0813c84c in DaemonCore&#58;&#58;CallSocketHandler_worker_demarshall(void*) ()
#9  0x081fb783 in CondorThreads&#58;&#58;pool_add(void (*)(void*), void*, int*, char const*) ()
#10 0x08134864 in DaemonCore&#58;&#58;CallSocketHandler(int&, bool) ()
#11 0x08136bf0 in DaemonCore&#58;&#58;Driver() ()
#12 0x0814d3ff in main ()

3) called again as gethostbyname(&#34;gluex&#34;), returns without problem, call stack was
<div id='show_1339365067' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1339365067'>#0  0x558041a5 in gethostbyname () from /lib/libc.so.6
#1  0x08192c6b in verify_name_has_ip(char*, in_addr) ()
#2  0x0819524c in IpVerify&#58;&#58;Verify(DCpermission, sockaddr_in const*, char const*, MyString*, MyString*) ()
#3  0x0817c41d in SecMan&#58;&#58;Verify(DCpermission, sockaddr_in const*, char const*, MyString*, MyString*) ()
#4  0x0812efa2 in DaemonCore&#58;&#58;Verify(char const*, DCpermission, sockaddr_in const*, char const*) ()
#5  0x08138722 in DaemonCore&#58;&#58;HandleReq(Stream*, Stream*) ()
#6  0x0813bf09 in DaemonCore&#58;&#58;HandleReqSocketHandler(Stream*) ()
#7  0x0813c417 in DaemonCore&#58;&#58;CallSocketHandler_worker(int, bool, Stream*) ()
#8  0x0813c84c in DaemonCore&#58;&#58;CallSocketHandler_worker_demarshall(void*) ()
#9  0x081fb783 in CondorThreads&#58;&#58;pool_add(void (*)(void*), void*, int*, char const*) ()
#10 0x08134864 in DaemonCore&#58;&#58;CallSocketHandler(int&, bool) ()
#11 0x08136bf0 in DaemonCore&#58;&#58;Driver() ()
#12 0x0814d3ff in main ()

4) call to gethostbyname() with argument char* pointing to an invalid address, this one segfaults
#0  0x558041a5 in gethostbyname () from /lib/libc.so.6
#1  0x08192c6b in verify_name_has_ip(char*, in_addr) ()
#2  0x0819524c in IpVerify&#58;&#58;Verify(DCpermission, sockaddr_in const*, char const*, MyString*, MyString*) ()
#3  0x0817c41d in SecMan&#58;&#58;Verify(DCpermission, sockaddr_in const*, char const*, MyString*, MyString*) ()
#4  0x0812efa2 in DaemonCore&#58;&#58;Verify(char const*, DCpermission, sockaddr_in const*, char const*) ()
#5  0x08138722 in DaemonCore&#58;&#58;HandleReq(Stream*, Stream*) ()
#6  0x0813bf09 in DaemonCore&#58;&#58;HandleReqSocketHandler(Stream*) ()
#7  0x0813c417 in DaemonCore&#58;&#58;CallSocketHandler_worker(int, bool, Stream*) ()
#8  0x0813c84c in DaemonCore&#58;&#58;CallSocketHandler_worker_demarshall(void*) ()
#9  0x081fb783 in CondorThreads&#58;&#58;pool_add(void (*)(void*), void*, int*, char const*) ()
#10 0x08134864 in DaemonCore&#58;&#58;CallSocketHandler(int&, bool) ()
#11 0x08136bf0 in DaemonCore&#58;&#58;Driver() ()
#12 0x0814d3ff in main ()

by /DC=org/DC=doegrids/OU=People/CN=Richard T. Jones 975420
</div><script type='text/javascript'>
        $('#show_1339365067').click(function() {
            $('#detail_1339365067').slideDown("normal");
            $('#show_1339365067').hide();
            $('#hide_1339365067').show();
        });
        $('#hide_1339365067').click(function() {
            $('#detail_1339365067').slideUp();
            $('#hide_1339365067').hide();
            $('#show_1339365067').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='13132#1354922341'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-07T23:19:01+00:00">Dec 7, 2012 11:19 PM UTC</time><a class="anchor" name="1354922341">&nbsp;</a></div><pre>Just to catch up this ticket to an email exchange&#58;

The following were requested by factory admins, to help with debugging&#58;
1) condor logs from the failed the glidein startd
2) copy of /etc/hosts from a worker node where pilots are crashing

I collected both of these things, and put them in the web folder <a href='http&#58;//gryphn.phys.uconn.edu/UConn-OSG/diagnose' target='_blank' rel='nofollow'>http&#58;//gryphn.phys.uconn.edu/UConn-OSG/diagnose</a>

Then I noticed something odd about my configuration&#58; the CE was at level condor 7.8.6 but the worker nodes were still running 7.8.4.  The upgrade had been done on the workers but the service had not been restarted.  I restarted condor on all of the worker nodes.  Now everyone is running 7.8.6, both the CE and the workers.  That was one of the first questions asked, and I naively replied with the output from condor_version.  Unfortunately this output does not test the version of the daemons themselves, but the version installed in the PATH.

I believe that the pilots are running again now.  The error was on my site.

by /DC=org/DC=doegrids/OU=People/CN=Richard T. Jones 975420</pre></div><div class='update_description'><i onclick="document.location='13132#1354895274'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-07T15:47:54+00:00">Dec 7, 2012 03:47 PM UTC</time> by <b>Igor Sfiligoi</b><a class="anchor" name="1354895274">&nbsp;</a></div><pre>Redirecting to the osg- gfactroy teaml they will have to diagnose and fix it.</pre></div><div class='update_description'><i onclick="document.location='13132#1354892463'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-07T15:01:03+00:00">Dec 7, 2012 03:01 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354892463">&nbsp;</a></div><pre>glideinWMS pilots from the UCSD factory are crashing (segfault) on our site UConn-OSG.  The crash is occurring in the startd daemon that starts inside the pilot job.  glideinWMS pilots from the GOC factory continue to run fine, so I suspect the configuration at the UCSD factory has changed.  I noticed that jobs (my own jobs, in fact) were not getting started on my site.  I could see pilots from the UCSD factory were starting on my CE, then exiting after about 70 seconds.  This gave me enough time to log in on a worker node and capture the pilot condor logs before the job was evacuated.

From the MasterLog&#58;
12/07/12 09&#58;44&#58;56 (pid&#58;8556) The STARTD (pid 8559) died due to signal 11 (Segmentation fault)
12/07/12 09&#58;44&#58;56 (pid&#58;8556) Sending obituary for &#34;/local/execute/dir_4727/glide_LE4782/main/condor/sbin/condor_startd&#34;
12/07/12 09&#58;44&#58;56 (pid&#58;8556) restarting /local/execute/dir_4727/glide_LE4782/main/condor/sbin/condor_startd in 10 seconds
12/07/12 09&#58;44&#58;56 (pid&#58;8556) The DaemonShutdown expression &#34;(STARTD_StartTime =?= 0)&#34; evaluated to TRUE&#58; starting graceful shutdown
12/07/12 09&#58;44&#58;56 (pid&#58;8556) Got SIGTERM. Performing graceful shutdown.
12/07/12 09&#58;44&#58;56 (pid&#58;8556) All daemons are gone.  Exiting.
12/07/12 09&#58;44&#58;56 (pid&#58;8556) **** condor_master (condor_MASTER) pid 8556 EXITING WITH STATUS 99

... and from the StartdLog&#58;
12/07/12 09&#58;44&#58;21 (pid&#58;8559) BenchMgr&#58;StartBenchmarks()
12/07/12 09&#58;44&#58;21 (pid&#58;8559) ZKM&#58; 1&#58; attempting to map &#39;/DC=org/DC=doegrids/OU=Services/CN=pilot2/gluex.phys.uconn.edu&#39;
12/07/12 09&#58;44&#58;21 (pid&#58;8559) ZKM&#58; 2&#58; mapret&#58; 0 included_voms&#58; 0 canonical_user&#58; condor
12/07/12 09&#58;44&#58;21 (pid&#58;8559) ZKM&#58; successful mapping to condor
12/07/12 09&#58;44&#58;25 (pid&#58;8559) ZKM&#58; 1&#58; attempting to map &#39;/DC=org/DC=doegrids/OU=Services/CN=collector/gremlin.phys.uconn.edu&#39;
12/07/12 09&#58;44&#58;25 (pid&#58;8559) ZKM&#58; 2&#58; mapret&#58; 0 included_voms&#58; 0 canonical_user&#58; collector1
12/07/12 09&#58;44&#58;25 (pid&#58;8559) ZKM&#58; successful mapping to collector1
12/07/12 09&#58;44&#58;42 (pid&#58;8559) State change&#58; benchmarks completed
12/07/12 09&#58;44&#58;42 (pid&#58;8559) Changing activity&#58; Benchmarking -&#62; Idle
12/07/12 09&#58;44&#58;56 (pid&#58;8559) WARNING&#58; forward resolution of 1 doesn&#39;t match 21136389!
Stack dump for process 8559 at timestamp 1354891496 (19 frames)
condor_startd(dprintf_dump_stack+0x4a)[0x81cf93a]
condor_startd[0x81fedd6]
[0xffffe500]
/lib/libc.so.6(__nss_hostname_digits_dots+0x39)[0x557ffd69]
/lib/libc.so.6(gethostbyname+0x9a)[0x5580423a]
condor_startd(_Z18verify_name_has_ipPc7in_addr+0x3b)[0x8192c6b]
condor_startd(_ZN8IpVerify6VerifyE12DCpermissionPK11sockaddr_inPKcP8MyStringS7_+0x5ec)[0x819524c]
condor_startd(_ZN6SecMan6VerifyE12DCpermissionPK11sockaddr_inPKcP8MyStringS7_+0x3d)[0x817c41d]
condor_startd(_ZN10DaemonCore6VerifyEPKc12DCpermissionPK11sockaddr_inS1_+0x72)[0x812efa2]
condor_startd(_ZN10DaemonCore9HandleReqEP6StreamS1_+0x7f2)[0x8138722]
condor_startd(_ZN10DaemonCore22HandleReqSocketHandlerEP6Stream+0x59)[0x813bf09]
condor_startd(_ZN10DaemonCore24CallSocketHandler_workerEibP6Stream+0x3c7)[0x813c417]
<div id='show_1728594488' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1728594488'>condor_startd(_ZN10DaemonCore35CallSocketHandler_worker_demarshallEPv+0x2c)[0x813c84c]
condor_startd(_ZN13CondorThreads8pool_addEPFvPvES0_PiPKc+0x53)[0x81fb783]
condor_startd(_ZN10DaemonCore17CallSocketHandlerERib+0x104)[0x8134864]
condor_startd(_ZN10DaemonCore6DriverEv+0x1ba0)[0x8136bf0]
condor_startd(main+0x116f)[0x814d3ff]
/lib/libc.so.6(__libc_start_main+0xdc)[0x5572fe9c]
condor_startd(realloc+0xa9)[0x80f7231]

by /DC=org/DC=doegrids/OU=People/CN=Richard T. Jones 975420

</div><script type='text/javascript'>
        $('#show_1728594488').click(function() {
            $('#detail_1728594488').slideDown("normal");
            $('#show_1728594488').hide();
            $('#hide_1728594488').show();
        });
        $('#hide_1728594488').click(function() {
            $('#detail_1728594488').slideUp();
            $('#hide_1728594488').hide();
            $('#show_1728594488').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F13132">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 13132});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
