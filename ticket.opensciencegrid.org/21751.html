<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[21751] Network problems at T3_US_PuertoRico?</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=21751" method="post">
<div class="page-header">
    <h3><span class="muted">21751</span> / Network problems at T3_US_PuertoRico?</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Daniel Klein</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Daniel Klein</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier3</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Resolved</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-07-28</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USCMS_Tier3 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=106824">106824</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/21751", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/21751?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/21751?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Network%20problems%20at%20T3_US_PuertoRico%3F%20ISSUE%3D21751%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='21751#1408060794'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-14T23:59:54+00:00">Aug 14, 2014 11:59 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1408060794">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.

-- by SYSTEM at Thu Aug 14 23&#58;59&#58;04 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824</a></pre></div><div class='update_description'><i onclick="document.location='21751#1406768919'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-31T01:08:39+00:00">Jul 31, 2014 01:08 AM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1406768919">&nbsp;</a></div><pre>Thanks, all.  Closing this as resolved.</pre></div><div class='update_description'><i onclick="document.location='21751#1406765519'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-31T00:11:59+00:00">Jul 31, 2014 12:11 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406765519">&nbsp;</a></div><pre>Hello Eduardo,

It looks like we have not seen any more glexec errors since your last reply, so it looks like you&#39;ve fixed it!  Feel free to close this ticket.

Thanks,
Jeff Dost
OSG Glidein Factory Operations

-- by Jeffrey Dost at Thu Jul 31 00&#58;11&#58;20 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824</a></pre></div><div class='update_description'><i onclick="document.location='21751#1406669409'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-29T21:30:09+00:00">Jul 29, 2014 09:30 PM UTC</time> by <b>eduardo@....</b><a class="anchor" name="1406669409">&nbsp;</a></div><pre>Yes,
I found and learn that permissions are important for cron scripts to
work.
Cron does not like executable in /etc/cron.d so I changed permissions
755 -&#62; 644.
This time hostproxies should be updating on worker nodes.
Below are cron log extracts from both behaviors. Could you check again
tomorrow?

Eduardo

these are from /var/log/cron
#with 755 permission (failing)
Jul 28 14&#58;20&#58;01 cms-grid0 crond[1822]&#58; (root) BAD FILE MODE
(/etc/cron.d/update-hostproxy.cron)
#with 644 permssion (working)
Jul 29 16&#58;03&#58;01 cms-grid0 CROND[811]&#58; (root) CMD
(/opt/hostproxy/host_dist 2&#62;&1)

On 07/29/2014 02&#58;03 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='21751#1406656996'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-29T18:03:16+00:00">Jul 29, 2014 06:03 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406656996">&nbsp;</a></div><pre>It appears as if the issue is not actually fixed, unfortunately. Jobs were running fine most of yesterday, but starting at ~10&#58;45PM PST last night (2014-07-28), a very high number began failing validation once again with the same glexec error&#58;

Validation failed in main/glexec_setup.sh.

glexec test failed, nonzero value 203
result&#58;

stderr&#58;
[gLExec]&#58;  LCMAPS failed.
The reason can be found in the syslog.

Here are the worker nodes that were failing&#58;
compute-2-0.local
sandy-0-0.local
sandy-0-2.local
sandy-1-0.local
sandy-1-1.local
sandy-1-2.local

And a pilot proxy&#58;
subject   &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot00/vocms0167.cern.ch/CN=proxy
issuer    &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot00/vocms0167.cern.ch
identity  &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot00/vocms0167.cern.ch
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /var/gfactory/clientproxies/user_fecmsucsd/glidein_v3_0/credential_UCSD-v1_0.main_160364
timeleft  &#58; 66&#58;31&#58;00
key usage &#58; Digital Signature, Key Encipherment
=== VO cms extension information ===
VO        &#58; cms
subject   &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot00/vocms0167.cern.ch
issuer    &#58; /DC=ch/DC=cern/OU=computers/CN=lcg-voms.cern.ch
attribute &#58; /cms/Role=pilot/Capability=NULL
attribute &#58; /cms/Role=NULL/Capability=NULL
attribute &#58; /cms/dcms/Role=NULL/Capability=NULL
<div id='show_1300159514' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1300159514'>attribute &#58; /cms/escms/Role=NULL/Capability=NULL
attribute &#58; /cms/itcms/Role=NULL/Capability=NULL
timeleft  &#58; 66&#58;30&#58;59
uri       &#58; lcg-voms.cern.ch&#58;15002

-- by Brendan Dennis at Tue Jul 29 18&#58;02&#58;49 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824</a>
</div><script type='text/javascript'>
        $('#show_1300159514').click(function() {
            $('#detail_1300159514').slideDown("normal");
            $('#show_1300159514').hide();
            $('#hide_1300159514').show();
        });
        $('#hide_1300159514').click(function() {
            $('#detail_1300159514').slideUp();
            $('#hide_1300159514').hide();
            $('#show_1300159514').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='21751#1406577088'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-28T19:51:28+00:00">Jul 28, 2014 07:51 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406577088">&nbsp;</a></div><pre>I just checked up on the site, and it looks like glideins are running fine now and have been all morning. From a factory ops perspective, it looks like this is fixed. I&#39;ll give it one more day just to be sure, and then mark this solved.

-- by Brendan Dennis at Mon Jul 28 19&#58;50&#58;33 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824</a></pre></div><div class='update_description'><i onclick="document.location='21751#1406212052'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-24T14:27:32+00:00">Jul 24, 2014 02:27 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1406212052">&nbsp;</a></div><pre>Thanks for the update, Eduardo.  I&#39;ll check in on Monday or Tuesday.</pre></div><div class='update_description'><i onclick="document.location='21751#1406211385'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-24T14:16:25+00:00">Jul 24, 2014 02:16 PM UTC</time><a class="anchor" name="1406211385">&nbsp;</a></div><pre>Hi Dan, Brendan and Vince,
Thanks for looking into this. I fixed the problem with glexec.
After the upgrade (last friday 18), I forgot to set the &#39;chkconfig fetch-crl-cron on&#39; and haven&#39;t set the hostproxy cron.
then I took a short vacation and came back yesterday, also yesterday there was a short outage that force a reboot on the CE and nodes,
the reboot showed some services haven&#39;t been set to start at reboot among them fetch-crl cron.
Also, I found that glexec was failing because the hostproxy on nodes were not renewing because forgot to set the cron to renew the proxies.
I think, last night I fixed this and SAM test were GREEN again, however this morning we have again a severe campus wide power outage,
that togeher with the scheduled one for tomorrow (during all weekend), will cause to wait until next week to confirm glexec is fine.

Eduardo

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jramirez/CN=662428/CN=Juan Eduardo Ramirez Vargas</pre></div><div class='update_description'><i onclick="document.location='21751#1406154209'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-23T22:23:29+00:00">Jul 23, 2014 10:23 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406154209">&nbsp;</a></div><pre>Hi Vince,

It&#39;s really tough for us to say. As factory operators, we never use glexec ourselves. We only see when it&#39;s not working properly at a grid site, so we can advise the site admins there&#39;s a problem. If we&#39;re lucky, they&#39;ll tell us in passing what was wrong; if not, they&#39;ll simply let us know it got fixed.

Looking through some old emails, I did find an instance where the NAT settings at Caltech were interfering with requests to their GUMS service, causing glexec/LCMAPS to fail. I have no idea if that&#39;s the case here. Hopefully the logs on Eduardo&#39;s side will be more revealing.

Cheers,
Dan

-- by Daniel Klein at Wed Jul 23 22&#58;22&#58;48 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824</a></pre></div><div class='update_description'><i onclick="document.location='21751#1406151443'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-23T21:37:23+00:00">Jul 23, 2014 09:37 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1406151443">&nbsp;</a></div><pre>Brendan,

In looking through documentation I can find a couple of instances where a 203 error was generated.

1.  32-bit lcmaps and voms packages installed rather than 64-bit.
2.  if you upgraded glexec with YUM you may have old configuration files were used after the install (I believe the old config settings should be merged into the new config file).

Let me know what you think.

Thanks!</pre></div><div class='update_description'><i onclick="document.location='21751#1406139983'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-23T18:26:23+00:00">Jul 23, 2014 06:26 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1406139983">&nbsp;</a></div><pre>It looks like the upgrade to SL6 may have caused glexec issues to pop up. We&#39;re seeing lots of validation errors now with the following output&#58;

Validation failed in main/glexec_setup.sh.

glexec test failed, nonzero value 203
result&#58;

stderr&#58;
[gLExec]&#58;  LCMAPS failed.
The reason can be found in the syslog.

It didn&#39;t seem to be worker node specific, but for reference, here&#39;s a list of nodes that the errors happened on&#58;
compute-0-0.local
compute-0-1.local
compute-0-4.local
compute-1-2.local
compute-1-4.local
compute-2-1.local
compute-2-3.local
compute-2-5.local
sandy-0-0.local
sandy-0-1.local
sandy-0-2.local
sandy-0-3.local
sandy-1-0.local
sandy-1-1.local
sandy-1-2.local
sandy-1-3.local

I&#39;ve also pasted one of the pilot proxies that was used below.

Thanks,
Brendan Dennis
OSG Glideins Factory Operations

<div id='show_587696490' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_587696490'>subject   &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot00/vocms0167.cern.ch/CN=proxy
issuer    &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot00/vocms0167.cern.ch
identity  &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot00/vocms0167.cern.ch
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /var/gfactory/clientproxies/user_fecmsucsd/glidein_v3_0/credential_UCSD-v1_0.main_160364
timeleft  &#58; 66&#58;10&#58;41
key usage &#58; Digital Signature, Key Encipherment
=== VO cms extension information ===
VO        &#58; cms
subject   &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot00/vocms0167.cern.ch
issuer    &#58; /DC=ch/DC=cern/OU=computers/CN=lcg-voms.cern.ch
attribute &#58; /cms/Role=pilot/Capability=NULL
attribute &#58; /cms/Role=NULL/Capability=NULL
attribute &#58; /cms/dcms/Role=NULL/Capability=NULL
attribute &#58; /cms/escms/Role=NULL/Capability=NULL
attribute &#58; /cms/itcms/Role=NULL/Capability=NULL
timeleft  &#58; 66&#58;10&#58;41
uri       &#58; lcg-voms.cern.ch&#58;15002

-- by Brendan Dennis at Wed Jul 23 18&#58;26&#58;07 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824</a>
</div><script type='text/javascript'>
        $('#show_587696490').click(function() {
            $('#detail_587696490').slideDown("normal");
            $('#show_587696490').hide();
            $('#hide_587696490').show();
        });
        $('#hide_587696490').click(function() {
            $('#detail_587696490').slideUp();
            $('#hide_587696490').hide();
            $('#show_587696490').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='21751#1405968892'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-21T18:54:52+00:00">Jul 21, 2014 06:54 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405968892">&nbsp;</a></div><pre>Hello Eduardo,

We have reconfigured the glideins accordingly to expect SL6 at your site.

Thanks,
Jeff Dost
OSG Glidein Factory Operations

-- by Jeffrey Dost at Mon Jul 21 18&#58;53&#58;45 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824</a></pre></div><div class='update_description'><i onclick="document.location='21751#1405786450'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-19T16:14:10+00:00">Jul 19, 2014 04:14 PM UTC</time> by <b>eduardo@....</b><a class="anchor" name="1405786450">&nbsp;</a></div><pre>Hi Dan,
I finished the cluster OS upgrade to SLC6-compatible, could you
reconfigure the glidens accordingly? I noted they currently fail at the OS
test.
For the NAT, settings. I need to get use to this OS, however glidens also
can help to find out problem on NAT config.

Thanks,
Eduardo

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='21751#1405468050'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-15T23:47:30+00:00">Jul 15, 2014 11:47 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405468050">&nbsp;</a></div><pre>Hi Eduardo,

Great, thanks for the update! We&#39;ll need to reconfigure our factories slightly to send SLC6-compatible glideins to your site, so we&#39;ll look forward to hearing from you when the upgrade is finished, and you&#39;ve taken a look at your NAT settings.

Thanks again,
Dan

-- by Daniel Klein at Tue Jul 15 23&#58;47&#58;18 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824</a></pre></div><div class='update_description'><i onclick="document.location='21751#1405450630'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-15T18:57:10+00:00">Jul 15, 2014 06:57 PM UTC</time> by <b>eduardo@....</b><a class="anchor" name="1405450630">&nbsp;</a></div><pre>Hi Dan,
My plan was to upgrade OS on the whole cluster (SL5 -&#62;SL6.5). I am
almost finishing backing up config files. However right know, I just
received a ticket about gratia condor probe bug
(<a href='https&#58;//ticket.grid.iu.edu/goc/21773' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/21773</a>). which could affect our site. I
will search how severe this is this before upgrading, because I could be
affected after the upgrade too.

Eduardo

On 07/15/2014 02&#58;37 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='21751#1405449430'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-15T18:37:10+00:00">Jul 15, 2014 06:37 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405449430">&nbsp;</a></div><pre>Hi Eduardo,

Thanks for letting us know you&#39;re working on improving the bandwidth. It sounds like this will be a work in progress. We&#39;ve definitely also seen NAT-related issues at other sites. Sometimes the glideins will lose their connection with the outside world if the packets are larger than some threshold size. This is maybe something to look for when you work on tuning NAT. Anyway, I hope you&#39;ll keep us informed of any progress!

I&#39;d also like to ask, for clarification&#58; are you upgrading the OS on your gatekeeper, or on your worker nodes? (Or both?)

Thanks,
Dan

-- by Daniel Klein at Tue Jul 15 18&#58;36&#58;32 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824</a></pre></div><div class='update_description'><i onclick="document.location='21751#1405362672'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-14T18:31:12+00:00">Jul 14, 2014 06:31 PM UTC</time> by <b>eduardo@....</b><a class="anchor" name="1405362672">&nbsp;</a></div><pre>Hi,
The main problem for our site (T3_US_PuertoRico) is that is bandwidth
limited.
In the last few weeks, a fraction of gridjobs arriving here are using
the xrootd fallback mechanism to read the data, which in practice jobs
are &#34;streaming&#34; input data while running. This is causing to augment the
bandwidth problem that we already have.
There is a secondary problem which is related with NAT.

To decouple both. We have the sandy-*-* nodes with public ips. In which
the lost of connection should occur mostly because to much xrootd
fallbacks are happening (&#34;streaming&#34;). I think this are coming from CMS
CRAB3 tests jobs. Improving bandwidth will take longer since this is a
campus wide problem and our connection to internet2, but administration
is aware of this and is sorting out a solution.

Also somehow NAT has its own disruption added on, we are working on
tunning this. Regular tunnings did not work, because interference with
Virtual servers running on same hardware.
Best would be to decouple both. Requires hardware reconf and
adquisition. This week, I will be working on upgrading our OS (SL 6.5).
I&#39;ll see if I get a better solution for the NAT problem.

I hope, this explained the issue we have here on our site.
Eduardo

On 07/11/2014 08&#58;31 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='21751#1405125102'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-07-12T00:31:42+00:00">Jul 12, 2014 12:31 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1405125102">&nbsp;</a></div><pre>Hi,

For the past couple of weeks, it appears glideins submitted to Puerto Rico have been having difficulties. Specifically, we&#39;re submitting to cms-grid0.hep.uprm.edu&#58;2119/jobmanager-condor with rsl=&#34;(queue=default)(jobtype=single).

A substantial fraction of the glideins are starting up, and finishing later having run no user jobs. As best I can tell, the glideins are being disrupted due to frequent connection problems between the glideins and their frontends. In the glidein logs, I see an awful lot of messages like the following&#58;

07/11/14 19&#58;23&#58;38 (pid&#58;22673) Remote owner is uscms5317@cmsanalysis
07/11/14 19&#58;23&#58;38 (pid&#58;22673) State change&#58; claiming protocol successful
07/11/14 19&#58;23&#58;38 (pid&#58;22673) Changing state&#58; Unclaimed -&#62; Claimed
07/11/14 19&#58;24&#58;59 (pid&#58;22673) condor_read() failed&#58; recv(fd=12) returned -1, errno = 104 Connection reset by peer, reading 4 bytes from SHADOW &#60;169.228.38.37&#58;9615?sock=7265_9981_1137360&#62; on &#60;169.228.38.37&#58;47434&#62; with reverse connect address &#60;169.228.38.37&#58;9615?sock=101054_6f46_1&#62;.
07/11/14 19&#58;24&#58;59 (pid&#58;22673) DaemonCore&#58; Can&#39;t receive command request from 169.228.38.37 (perhaps a timeout?)
07/11/14 19&#58;25&#58;43 (pid&#58;22673) Called deactivate_claim_forcibly()
07/11/14 19&#58;25&#58;54 (pid&#58;22673) State change&#58; received RELEASE_CLAIM command
07/11/14 19&#58;25&#58;54 (pid&#58;22673) Changing state and activity&#58; Claimed/Idle -&#62; Preempting/Vacating

07/11/14 19&#58;27&#58;43 (pid&#58;22673) attempt to connect to &#60;169.228.38.37&#58;9615&#62; failed&#58; Connection timed out (connect errno = 110).  Will keep trying for 300 total seconds (111 to go).

07/11/14 19&#58;30&#58;15 (pid&#58;22673) CCBListener&#58; failed to create reversed connection for request id 15733 to &#60;169.228.38.37&#58;9615?sock=101054_6f46_2&#62;&#58; failed to connect

etc.

These are the nodes I see the problem on today&#58;
compute-0-0.local
compute-0-1.local
compute-0-2.local
compute-0-3.local
compute-0-4.local
compute-0-5.local
compute-1-0.local
compute-1-1.local
compute-1-2.local
compute-1-3.local
compute-1-4.local
compute-1-5.local
compute-2-0.local
<div id='show_469829626' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_469829626'>compute-2-1.local
compute-2-2.local
compute-2-3.local
compute-2-4.local
compute-2-5.local
sandy-0-0.local
sandy-0-1.local
sandy-0-2.local
sandy-0-3.local
sandy-1-0.local
sandy-1-1.local
sandy-1-2.local
sandy-1-3.local

Could somebody please investigate the issue?

Thanks,
Dan Klein
UCSD Glidein Factory Operations

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=106824</a>

[Ticket History]
Subject&#58; Network problems at T3_US_PuertoRico?
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-site-support-team@....
-- by Daniel Klein at Sat Jul 12 00&#58;30&#58;36 UTC 2014
</div><script type='text/javascript'>
        $('#show_469829626').click(function() {
            $('#detail_469829626').slideDown("normal");
            $('#show_469829626').hide();
            $('#hide_469829626').show();
        });
        $('#hide_469829626').click(function() {
            $('#detail_469829626').slideUp();
            $('#hide_469829626').hide();
            $('#show_469829626').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F21751">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
