<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[3695] GLOW-CMS error on VORS</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=3695" method="post">
<div class="page-header">
    <h3><span class="muted">3695</span> / GLOW-CMS error on VORS</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Will Maier</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2007-11-30</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
        <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/3695", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='3695#1197058568'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-12-07T20:16:08+00:00">Dec 7, 2007 08:16 PM UTC</time> by <b>VDT</b><a class="anchor" name="1197058568">&nbsp;</a></div><pre>Hi everyone,

I&#39;ve put this into the next version of VDT 1.8.1, which I expect to
be released sometime next week.

Thanks for your hard work, Anand!

-alain

On Dec 5, 2007, at 12&#58;27 PM, Anand Padmanabhan wrote&#58;

<font color='#7F7E6F'>&#62; Hi Tim/Alain,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I reviewed the site_verify code this morning and was able to fix</font>
<font color='#7F7E6F'>&#62; the problem. The problem was that when the file system was AFS the</font>
<font color='#7F7E6F'>&#62; site_verify code was trying to form the command string, but it did</font>
<font color='#7F7E6F'>&#62; not have the variables defined correctly in the function, so the</font>
<font color='#7F7E6F'>&#62; contact string was malformed leading to VORS getting an Globus</font>
<font color='#7F7E6F'>&#62; error 96 when it executed the command.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Reviewing the code, I was able to find that the hash recorded the</font>
<font color='#7F7E6F'>&#62; necessary information. I have added the following lines to site</font>
<font color='#7F7E6F'>&#62; verify and I believe this problem should be resolved.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; +         if ( exists $opts-&#62;{&#39;GATEKEEPER_HOST&#39;} )</font>
<font color='#7F7E6F'>&#62; +         {</font>
<font color='#7F7E6F'>&#62; +             $host = $opts-&#62;{&#39;GATEKEEPER_HOST&#39;};</font>
<font color='#7F7E6F'>&#62; +         }else</font>
<font color='#7F7E6F'>&#62; +         {</font>
<font color='#7F7E6F'>&#62; +             return undef</font>
<font color='#7F7E6F'>&#62; +         }</font>
<font color='#7F7E6F'>&#62; +         my $dest = $host;</font>
<font color='#7F7E6F'>&#62; +         if ( exists $opts-&#62;{&#39;GATEKEEPER_PORT&#39;} )</font>
<font color='#7F7E6F'>&#62; +         {</font>
<font color='#7F7E6F'>&#62; +             $port = $opts-&#62;{&#39;GATEKEEPER_PORT&#39;};</font>
<div id='show_1187771719' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1187771719'><font color='#7F7E6F'>&#62; +             $dest .= &#34;&#58;$port&#34;;</font>
<font color='#7F7E6F'>&#62; +         }</font>
<font color='#7F7E6F'>&#62; +</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I am attaching a modified copy of site_verify. Tim could you test</font>
<font color='#7F7E6F'>&#62; and verify that this change resolves the problem. Alain can include</font>
<font color='#7F7E6F'>&#62; the patched version into the VDT, once we have a green signal from</font>
<font color='#7F7E6F'>&#62; Tim.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Let me know if you have questions</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; Anand</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Anand Padmanabhan wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Alain,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; In this case since there is no &#34;current developer&#34; for this this</font>
<font color='#7F7E6F'>&#62;&#62; code, I will fix the current issue and propagate it back to VDT. I</font>
<font color='#7F7E6F'>&#62;&#62; believe with some effort I should be be able to create a patched</font>
<font color='#7F7E6F'>&#62;&#62; version by the end of this week. I will send you more details when</font>
<font color='#7F7E6F'>&#62;&#62; I have a fix.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks</font>
<font color='#7F7E6F'>&#62;&#62; Anand</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Alain Roy wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; I&#39;m not sure there is a &#34;current developer&#34;. It is distributed</font>
<font color='#7F7E6F'>&#62;&#62;&#62; via the VDT though. I don&#39;t fully understand the problem. Anand,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; if we can talk about it a bit, I&#39;m sure we can find a fix and put</font>
<font color='#7F7E6F'>&#62;&#62;&#62; it into the VDT.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; -alain</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; On Nov 29, 2007, at 2&#58;13 PM, Anand Padmanabhan wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Hi Tim,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Sorry the value of $host is not being passed to this function as</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; I thought . I think we should forward this bug to the developer/</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; maintainer of site_verify and have them look at it. In summery</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; the bug is that when filesystem type is afs the script executes</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; line 4460 where it expect the variable $dest to be initialized,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; but it is not. This leads the cmd string to be malformed leading</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; to Globus error 96.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Anand</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Tim Silvers wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Hey Anand,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Here is the output after putting your change before line 4460</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; in the debug script.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Tim</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; On Nov 29, 2007, at 12&#58;58 PM, Anand Padmanabhan wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;  From the debug statement we can clearly see the problem here.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; The</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; command site_verify is trying to run is</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; globus-job-run /jobmanager-fork /bin/sh -c &#34;fs examine -path</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; /afs/hep.wisc.edu/osg/app | awk &#39;{print $4}&#39;; echo &#92;$?&#34;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; it is obviously missing the hostname of the site it is running</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; on. This</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; is a bug in site_verify line 4460 (from OSG0.8.0/VDT 1.8.1.e) the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; variable $dest is not initialized. Try adding the following</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; lines just</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; above line 4460&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;          my $dest = $host;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;          if ( defined $port ) { $dest .= &#34;&#58;$port&#34; }</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; and retry. This should fix the issue assuming host is defined,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; which it</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; seems to be.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Anand</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; --</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Anand Padmanabhan, PhD</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Research Scientist</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; CyberInfrastructure and Geospatial Information Laboratory (CIGI)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; and</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; National Center for Supercomputing Applications (NCSA)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; University of Illinois at Urbana-Champaign</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Telephone&#58; (217) 244-9315</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; <a href='http&#58;//cigi.uiuc.edu' target='_blank' rel='nofollow'>http&#58;//cigi.uiuc.edu</a></font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; --</font>
<font color='#7F7E6F'>&#62; Anand Padmanabhan, PhD</font>
<font color='#7F7E6F'>&#62; Research Scientist</font>
<font color='#7F7E6F'>&#62; CyberInfrastructure and Geospatial Information Laboratory (CIGI)</font>
<font color='#7F7E6F'>&#62; and</font>
<font color='#7F7E6F'>&#62; National Center for Supercomputing Applications (NCSA)</font>
<font color='#7F7E6F'>&#62; University of Illinois at Urbana-Champaign</font>
<font color='#7F7E6F'>&#62; Telephone&#58; (217) 244-9315</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//cigi.uiuc.edu' target='_blank' rel='nofollow'>http&#58;//cigi.uiuc.edu</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#60;site_verify.pl.tar.gz&#62;</font>
</div><script type='text/javascript'>
        $('#show_1187771719').click(function() {
            $('#detail_1187771719').slideDown("normal");
            $('#show_1187771719').hide();
            $('#hide_1187771719').show();
        });
        $('#hide_1187771719').click(function() {
            $('#detail_1187771719').slideUp();
            $('#hide_1187771719').hide();
            $('#show_1187771719').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='3695#1196890735'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-12-05T21:38:55+00:00">Dec 5, 2007 09:38 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1196890735">&nbsp;</a></div><pre>Closing ticket. Finally!! --Tim &#58;-)

From&#58; 	  apadmana@....
Subject&#58; 	Re&#58; Open Science Grid&#58; GLOW-CMS error on VORS ISSUE=3695 PROJ=71
Date&#58; 	December 5, 2007 3&#58;33&#58;30 PM EST
To&#58; 	  tsilver@....
Cc&#58; 	  roy@...., osg-troubleshooting@....
Reply-To&#58; 	  apadmana@....

Great, I guess we can close this ticket now!

Alain, please include the patched version into the VDT and let me know
if you have questions.

Thanks
Anand
Tim Silvers wrote&#58;
Hi Anand,

I tried the new script and it works. I&#39;ll replace the current
site_verify with this update.

Thanks,

Tim</pre></div><div class='update_description'><i onclick="document.location='3695#1196879467'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-12-05T18:31:07+00:00">Dec 5, 2007 06:31 PM UTC</time> by <b>CIGI</b><a class="anchor" name="1196879467">&nbsp;</a></div><pre>Hi Tim/Alain,

I reviewed the site_verify code this morning and was able to fix the
problem. The problem was that when the file system was AFS the
site_verify code was trying to form the command string, but it did not
have the variables defined correctly in the function, so the contact
string was malformed leading to VORS getting an Globus error 96 when it
executed the command.

Reviewing the code, I was able to find that the hash recorded the
necessary information. I have added the following lines to site verify
and I believe this problem should be resolved.

+         if ( exists $opts-&#62;{&#39;GATEKEEPER_HOST&#39;} )
+         {
+             $host = $opts-&#62;{&#39;GATEKEEPER_HOST&#39;};
+         }else
+         {
+             return undef
+         }
+         my $dest = $host;
+         if ( exists $opts-&#62;{&#39;GATEKEEPER_PORT&#39;} )
+         {
+             $port = $opts-&#62;{&#39;GATEKEEPER_PORT&#39;};
+             $dest .= &#34;&#58;$port&#34;;
+         }
+

I am attaching a modified copy of site_verify. Tim could you test and
verify that this change resolves the problem. Alain can include the
patched version into the VDT, once we have a green signal from Tim.

Let me know if you have questions

Thanks,
<div id='show_999347029' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_999347029'>Anand

Anand Padmanabhan wrote&#58;
<font color='#7F7E6F'>&#62; Hi Alain,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; In this case since there is no &#34;current developer&#34; for this this code,</font>
<font color='#7F7E6F'>&#62; I will fix the current issue and propagate it back to VDT. I believe</font>
<font color='#7F7E6F'>&#62; with some effort I should be be able to create a patched version by</font>
<font color='#7F7E6F'>&#62; the end of this week. I will send you more details when I have a fix.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks</font>
<font color='#7F7E6F'>&#62; Anand</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Alain Roy wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; I&#39;m not sure there is a &#34;current developer&#34;. It is distributed via</font>
<font color='#7F7E6F'>&#62;&#62; the VDT though. I don&#39;t fully understand the problem. Anand, if we</font>
<font color='#7F7E6F'>&#62;&#62; can talk about it a bit, I&#39;m sure we can find a fix and put it into</font>
<font color='#7F7E6F'>&#62;&#62; the VDT.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; -alain</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; On Nov 29, 2007, at 2&#58;13 PM, Anand Padmanabhan wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hi Tim,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Sorry the value of $host is not being passed to this function as I</font>
<font color='#7F7E6F'>&#62;&#62;&#62; thought . I think we should forward this bug to the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; developer/maintainer of site_verify and have them look at it. In</font>
<font color='#7F7E6F'>&#62;&#62;&#62; summery the bug is that when filesystem type is afs the script</font>
<font color='#7F7E6F'>&#62;&#62;&#62; executes line 4460 where it expect the variable $dest to be</font>
<font color='#7F7E6F'>&#62;&#62;&#62; initialized, but it is not. This leads the cmd string to be</font>
<font color='#7F7E6F'>&#62;&#62;&#62; malformed leading to Globus error 96.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Anand</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Tim Silvers wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Hey Anand,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Here is the output after putting your change before line 4460 in</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; the debug script.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Tim</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; On Nov 29, 2007, at 12&#58;58 PM, Anand Padmanabhan wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;  From the debug statement we can clearly see the problem here. The</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; command site_verify is trying to run is</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; globus-job-run /jobmanager-fork /bin/sh -c &#34;fs examine -path</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; /afs/hep.wisc.edu/osg/app | awk &#39;{print $4}&#39;; echo &#92;$?&#34;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; it is obviously missing the hostname of the site it is running on.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; This</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; is a bug in site_verify line 4460 (from OSG0.8.0/VDT 1.8.1.e) the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; variable $dest is not initialized. Try adding the following lines</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; just</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; above line 4460&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;          my $dest = $host;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;          if ( defined $port ) { $dest .= &#34;&#58;$port&#34; }</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; and retry. This should fix the issue assuming host is defined,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; which it</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; seems to be.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Anand</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; --</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Anand Padmanabhan, PhD</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Research Scientist</font>
<font color='#7F7E6F'>&#62;&#62;&#62; CyberInfrastructure and Geospatial Information Laboratory (CIGI)</font>
<font color='#7F7E6F'>&#62;&#62;&#62; and</font>
<font color='#7F7E6F'>&#62;&#62;&#62; National Center for Supercomputing Applications (NCSA)</font>
<font color='#7F7E6F'>&#62;&#62;&#62; University of Illinois at Urbana-Champaign</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Telephone&#58; (217) 244-9315</font>
<font color='#7F7E6F'>&#62;&#62;&#62; <a href='http&#58;//cigi.uiuc.edu' target='_blank' rel='nofollow'>http&#58;//cigi.uiuc.edu</a></font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>

--
Anand Padmanabhan, PhD
Research Scientist
CyberInfrastructure and Geospatial Information Laboratory (CIGI)
and
National Center for Supercomputing Applications (NCSA)
University of Illinois at Urbana-Champaign
Telephone&#58; (217) 244-9315
<a href='http&#58;//cigi.uiuc.edu' target='_blank' rel='nofollow'>http&#58;//cigi.uiuc.edu</a>
</div><script type='text/javascript'>
        $('#show_999347029').click(function() {
            $('#detail_999347029').slideDown("normal");
            $('#show_999347029').hide();
            $('#hide_999347029').show();
        });
        $('#hide_999347029').click(function() {
            $('#detail_999347029').slideUp();
            $('#hide_999347029').hide();
            $('#show_999347029').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='3695#1196698928'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-12-03T16:22:08+00:00">Dec 3, 2007 04:22 PM UTC</time> by <b>CIGI</b><a class="anchor" name="1196698928">&nbsp;</a></div><pre>Hi Alain,

In this case since there is no &#34;current developer&#34; for this this code, I
will fix the current issue and propagate it back to VDT. I believe with
some effort I should be be able to create a patched version by the end
of this week. I will send you more details when I have a fix.

Thanks
Anand

Alain Roy wrote&#58;
<font color='#7F7E6F'>&#62; I&#39;m not sure there is a &#34;current developer&#34;. It is distributed via the</font>
<font color='#7F7E6F'>&#62; VDT though. I don&#39;t fully understand the problem. Anand, if we can talk</font>
<font color='#7F7E6F'>&#62; about it a bit, I&#39;m sure we can find a fix and put it into the VDT.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -alain</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Nov 29, 2007, at 2&#58;13 PM, Anand Padmanabhan wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Tim,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Sorry the value of $host is not being passed to this function as I</font>
<font color='#7F7E6F'>&#62;&#62; thought . I think we should forward this bug to the</font>
<font color='#7F7E6F'>&#62;&#62; developer/maintainer of site_verify and have them look at it. In</font>
<font color='#7F7E6F'>&#62;&#62; summery the bug is that when filesystem type is afs the script</font>
<font color='#7F7E6F'>&#62;&#62; executes line 4460 where it expect the variable $dest to be</font>
<font color='#7F7E6F'>&#62;&#62; initialized, but it is not. This leads the cmd string to be malformed</font>
<font color='#7F7E6F'>&#62;&#62; leading to Globus error 96.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62; Anand</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Tim Silvers wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hey Anand,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<div id='show_2126824805' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2126824805'><font color='#7F7E6F'>&#62;&#62;&#62; Here is the output after putting your change before line 4460 in the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; debug script.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Tim</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; On Nov 29, 2007, at 12&#58;58 PM, Anand Padmanabhan wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;  From the debug statement we can clearly see the problem here. The</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; command site_verify is trying to run is</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; globus-job-run /jobmanager-fork /bin/sh -c &#34;fs examine -path</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; /afs/hep.wisc.edu/osg/app | awk &#39;{print $4}&#39;; echo &#92;$?&#34;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; it is obviously missing the hostname of the site it is running on. This</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; is a bug in site_verify line 4460 (from OSG0.8.0/VDT 1.8.1.e) the</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; variable $dest is not initialized. Try adding the following lines just</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; above line 4460&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;          my $dest = $host;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;          if ( defined $port ) { $dest .= &#34;&#58;$port&#34; }</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; and retry. This should fix the issue assuming host is defined, which it</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; seems to be.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Anand</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; --</font>
<font color='#7F7E6F'>&#62;&#62; Anand Padmanabhan, PhD</font>
<font color='#7F7E6F'>&#62;&#62; Research Scientist</font>
<font color='#7F7E6F'>&#62;&#62; CyberInfrastructure and Geospatial Information Laboratory (CIGI)</font>
<font color='#7F7E6F'>&#62;&#62; and</font>
<font color='#7F7E6F'>&#62;&#62; National Center for Supercomputing Applications (NCSA)</font>
<font color='#7F7E6F'>&#62;&#62; University of Illinois at Urbana-Champaign</font>
<font color='#7F7E6F'>&#62;&#62; Telephone&#58; (217) 244-9315</font>
<font color='#7F7E6F'>&#62;&#62; <a href='http&#58;//cigi.uiuc.edu' target='_blank' rel='nofollow'>http&#58;//cigi.uiuc.edu</a></font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>

--
Anand Padmanabhan, PhD
Research Scientist
CyberInfrastructure and Geospatial Information Laboratory (CIGI)
and
National Center for Supercomputing Applications (NCSA)
University of Illinois at Urbana-Champaign
Telephone&#58; (217) 244-9315
<a href='http&#58;//cigi.uiuc.edu' target='_blank' rel='nofollow'>http&#58;//cigi.uiuc.edu</a>
</div><script type='text/javascript'>
        $('#show_2126824805').click(function() {
            $('#detail_2126824805').slideDown("normal");
            $('#show_2126824805').hide();
            $('#hide_2126824805').show();
        });
        $('#hide_2126824805').click(function() {
            $('#detail_2126824805').slideUp();
            $('#hide_2126824805').hide();
            $('#show_2126824805').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='3695#1196567889'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-12-02T03:58:09+00:00">Dec 2, 2007 03:58 AM UTC</time> by <b>VDT</b><a class="anchor" name="1196567889">&nbsp;</a></div><pre>I&#39;m not sure there is a &#34;current developer&#34;. It is distributed via
the VDT though. I don&#39;t fully understand the problem. Anand, if we
can talk about it a bit, I&#39;m sure we can find a fix and put it into
the VDT.

-alain

On Nov 29, 2007, at 2&#58;13 PM, Anand Padmanabhan wrote&#58;

<font color='#7F7E6F'>&#62; Hi Tim,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Sorry the value of $host is not being passed to this function as I</font>
<font color='#7F7E6F'>&#62; thought . I think we should forward this bug to the developer/</font>
<font color='#7F7E6F'>&#62; maintainer of site_verify and have them look at it. In summery the</font>
<font color='#7F7E6F'>&#62; bug is that when filesystem type is afs the script executes line</font>
<font color='#7F7E6F'>&#62; 4460 where it expect the variable $dest to be initialized, but it</font>
<font color='#7F7E6F'>&#62; is not. This leads the cmd string to be malformed leading to Globus</font>
<font color='#7F7E6F'>&#62; error 96.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; Anand</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Tim Silvers wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; Hey Anand,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Here is the output after putting your change before line 4460 in</font>
<font color='#7F7E6F'>&#62;&#62; the debug script.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Tim</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; On Nov 29, 2007, at 12&#58;58 PM, Anand Padmanabhan wrote&#58;</font>
<div id='show_999472513' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_999472513'><font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;  From the debug statement we can clearly see the problem here. The</font>
<font color='#7F7E6F'>&#62;&#62;&#62; command site_verify is trying to run is</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; globus-job-run /jobmanager-fork /bin/sh -c &#34;fs examine -path</font>
<font color='#7F7E6F'>&#62;&#62;&#62; /afs/hep.wisc.edu/osg/app | awk &#39;{print $4}&#39;; echo &#92;$?&#34;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; it is obviously missing the hostname of the site it is running</font>
<font color='#7F7E6F'>&#62;&#62;&#62; on. This</font>
<font color='#7F7E6F'>&#62;&#62;&#62; is a bug in site_verify line 4460 (from OSG0.8.0/VDT 1.8.1.e) the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; variable $dest is not initialized. Try adding the following lines</font>
<font color='#7F7E6F'>&#62;&#62;&#62; just</font>
<font color='#7F7E6F'>&#62;&#62;&#62; above line 4460&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;          my $dest = $host;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;          if ( defined $port ) { $dest .= &#34;&#58;$port&#34; }</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; and retry. This should fix the issue assuming host is defined,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; which it</font>
<font color='#7F7E6F'>&#62;&#62;&#62; seems to be.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Anand</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; --</font>
<font color='#7F7E6F'>&#62; Anand Padmanabhan, PhD</font>
<font color='#7F7E6F'>&#62; Research Scientist</font>
<font color='#7F7E6F'>&#62; CyberInfrastructure and Geospatial Information Laboratory (CIGI)</font>
<font color='#7F7E6F'>&#62; and</font>
<font color='#7F7E6F'>&#62; National Center for Supercomputing Applications (NCSA)</font>
<font color='#7F7E6F'>&#62; University of Illinois at Urbana-Champaign</font>
<font color='#7F7E6F'>&#62; Telephone&#58; (217) 244-9315</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//cigi.uiuc.edu' target='_blank' rel='nofollow'>http&#58;//cigi.uiuc.edu</a></font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_999472513').click(function() {
            $('#detail_999472513').slideDown("normal");
            $('#show_999472513').hide();
            $('#hide_999472513').show();
        });
        $('#hide_999472513').click(function() {
            $('#detail_999472513').slideUp();
            $('#hide_999472513').hide();
            $('#show_999472513').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='3695#1196370675'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-29T21:11:15+00:00">Nov 29, 2007 09:11 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1196370675">&nbsp;</a></div><pre>I spoke with Anand and he believes that this now needs to be given attention by whomever is
responsible for maintaining site_verify. It&#39;s a large script that he doesn&#39;t feel comfortable delving into.
But the author is listed as Craig Prescott, who is, as far as we&#39;re aware, not with OSG or responsible
for maintaining the script currently. We&#39;ll need to track down the owner if we&#39;re to resolve this
problem.</pre></div><div class='update_description'><i onclick="document.location='3695#1196367369'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-29T20:16:09+00:00">Nov 29, 2007 08:16 PM UTC</time> by <b>anand-padmanabhan-1@....</b><a class="anchor" name="1196367369">&nbsp;</a></div><pre>Hi Tim,

Sorry the value of $host is not being passed to this function as I
thought . I think we should forward this bug to the developer/maintainer
of site_verify and have them look at it. In summery the bug is that when
filesystem type is afs the script executes line 4460 where it expect the
variable $dest to be initialized, but it is not. This leads the cmd
string to be malformed leading to Globus error 96.

Thanks,
Anand

Tim Silvers wrote&#58;
<font color='#7F7E6F'>&#62; Hey Anand,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Here is the output after putting your change before line 4460 in the</font>
<font color='#7F7E6F'>&#62; debug script.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Tim</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Nov 29, 2007, at 12&#58;58 PM, Anand Padmanabhan wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62;  From the debug statement we can clearly see the problem here. The</font>
<font color='#7F7E6F'>&#62;&#62; command site_verify is trying to run is</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; globus-job-run /jobmanager-fork /bin/sh -c &#34;fs examine -path</font>
<font color='#7F7E6F'>&#62;&#62; /afs/hep.wisc.edu/osg/app | awk &#39;{print $4}&#39;; echo &#92;$?&#34;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; it is obviously missing the hostname of the site it is running on. This</font>
<font color='#7F7E6F'>&#62;&#62; is a bug in site_verify line 4460 (from OSG0.8.0/VDT 1.8.1.e) the</font>
<font color='#7F7E6F'>&#62;&#62; variable $dest is not initialized. Try adding the following lines just</font>
<div id='show_2082342021' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2082342021'><font color='#7F7E6F'>&#62;&#62; above line 4460&#58;</font>
<font color='#7F7E6F'>&#62;&#62;          my $dest = $host;</font>
<font color='#7F7E6F'>&#62;&#62;          if ( defined $port ) { $dest .= &#34;&#58;$port&#34; }</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; and retry. This should fix the issue assuming host is defined, which it</font>
<font color='#7F7E6F'>&#62;&#62; seems to be.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62; Anand</font>
<font color='#7F7E6F'>&#62;</font>

--
Anand Padmanabhan, PhD
Research Scientist
CyberInfrastructure and Geospatial Information Laboratory (CIGI)
and
National Center for Supercomputing Applications (NCSA)
University of Illinois at Urbana-Champaign
Telephone&#58; (217) 244-9315
<a href='http&#58;//cigi.uiuc.edu' target='_blank' rel='nofollow'>http&#58;//cigi.uiuc.edu</a>
</div><script type='text/javascript'>
        $('#show_2082342021').click(function() {
            $('#detail_2082342021').slideDown("normal");
            $('#show_2082342021').hide();
            $('#hide_2082342021').show();
        });
        $('#hide_2082342021').click(function() {
            $('#detail_2082342021').slideUp();
            $('#hide_2082342021').hide();
            $('#show_2082342021').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='3695#1196363966'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-29T19:19:26+00:00">Nov 29, 2007 07:19 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1196363966">&nbsp;</a></div><pre>Hey Anand,

Here is the output after putting your change before line 4460 in the
debug script. (see attachment)

From&#58; 	  apadmana@....
Subject&#58; 	Re&#58; Open Science Grid&#58; GLOW-CMS error on VORS ISSUE=3695 PROJ=71
Date&#58; 	November 29, 2007 12&#58;58&#58;26 PM EST
To&#58; 	  tsilver@....
Cc&#58; 	  osg@...., osg-troubleshooting@....
Reply-To&#58; 	  apadmana@....

Tim,

From the debug statement we can clearly see the problem here. The
command site_verify is trying to run is

globus-job-run /jobmanager-fork /bin/sh -c &#34;fs examine -path
/afs/hep.wisc.edu/osg/app | awk &#39;{print $4}&#39;; echo &#92;$?&#34;

it is obviously missing the hostname of the site it is running on. This
is a bug in site_verify line 4460 (from OSG0.8.0/VDT 1.8.1.e) the
variable $dest is not initialized. Try adding the following lines just
above line 4460&#58;
my $dest = $host;
if ( defined $port ) { $dest .= &#34;&#58;$port&#34; }

and retry. This should fix the issue assuming host is defined, which it
seems to be.

Thanks,
Anand</pre></div><div class='update_description'><i onclick="document.location='3695#1196363948'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-29T19:19:08+00:00">Nov 29, 2007 07:19 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1196363948">&nbsp;</a></div><pre>Hey Anand,

Here is the output after putting your change before line 4460 in the
debug script.</pre></div><div class='update_description'><i onclick="document.location='3695#1196359267'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-29T18:01:07+00:00">Nov 29, 2007 06:01 PM UTC</time> by <b>CIGI</b><a class="anchor" name="1196359267">&nbsp;</a></div><pre>Tim,

From the debug statement we can clearly see the problem here. The
command site_verify is trying to run is

globus-job-run /jobmanager-fork /bin/sh -c &#34;fs examine -path
/afs/hep.wisc.edu/osg/app | awk &#39;{print $4}&#39;; echo &#92;$?&#34;

it is obviously missing the hostname of the site it is running on. This
is a bug in site_verify line 4460 (from OSG0.8.0/VDT 1.8.1.e) the
variable $dest is not initialized. Try adding the following lines just
above line 4460&#58;
my $dest = $host;
if ( defined $port ) { $dest .= &#34;&#58;$port&#34; }

and retry. This should fix the issue assuming host is defined, which it
seems to be.

Thanks,
Anand
Tim Silvers wrote&#58;
<font color='#7F7E6F'>&#62; Anand,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I ran your debug script. Here is the output (see attachment).</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Tim</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Nov 26, 2007, at 5&#58;10 PM, Anand Padmanabhan wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Tim,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I added a couple of debug statements to site_verify. Since my cert is</font>
<font color='#7F7E6F'>&#62;&#62; not accepted on that site could you please run the test send me the</font>
<font color='#7F7E6F'>&#62;&#62; output between DEBUG-START and DEBUG-STOP. Just run the attached</font>
<div id='show_171396428' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_171396428'><font color='#7F7E6F'>&#62;&#62; site_verify script against GLOW_CMS.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; let me know if you have questions.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks</font>
<font color='#7F7E6F'>&#62;</font>

--
Anand Padmanabhan, PhD
Research Scientist
CyberInfrastructure and Geospatial Information Laboratory (CIGI)
and
National Center for Supercomputing Applications (NCSA)
University of Illinois at Urbana-Champaign
Telephone&#58; (217) 244-9315
<a href='http&#58;//cigi.uiuc.edu' target='_blank' rel='nofollow'>http&#58;//cigi.uiuc.edu</a>
</div><script type='text/javascript'>
        $('#show_171396428').click(function() {
            $('#detail_171396428').slideDown("normal");
            $('#show_171396428').hide();
            $('#hide_171396428').show();
        });
        $('#hide_171396428').click(function() {
            $('#detail_171396428').slideUp();
            $('#hide_171396428').hide();
            $('#show_171396428').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='3695#1196285107'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-28T21:25:07+00:00">Nov 28, 2007 09:25 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1196285107">&nbsp;</a></div><pre>Anand,

I ran your debug script. Here is the output (see attachment).

Tim</pre></div><div class='update_description'><i onclick="document.location='3695#1196284925'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-28T21:22:05+00:00">Nov 28, 2007 09:22 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1196284925">&nbsp;</a></div><pre>Anand,

I ran your debug script and will reply to you via email outside of the ticket in case the attachment
from Footprints doesn&#39;t come through.

Tim</pre></div><div class='update_description'><i onclick="document.location='3695#1196115188'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-26T22:13:08+00:00">Nov 26, 2007 10:13 PM UTC</time> by <b>CIGI</b><a class="anchor" name="1196115188">&nbsp;</a></div><pre>Hi Tim,

I added a couple of debug statements to site_verify. Since my cert is
not accepted on that site could you please run the test send me the
output between DEBUG-START and DEBUG-STOP. Just run the attached
site_verify script against GLOW_CMS.

let me know if you have questions.

Thanks
Anand
Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='3695#1195079228'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-14T22:27:08+00:00">Nov 14, 2007 10:27 PM UTC</time> by <b>CIGI</b><a class="anchor" name="1195079228">&nbsp;</a></div><pre>Thanks for the update! I will look into the matter next week.

Anand
Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='3695#1195076274'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-14T21:37:54+00:00">Nov 14, 2007 09:37 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1195076274">&nbsp;</a></div><pre>Hi Anand,

Waiting until next week is fine; this isn&#39;t a high priority. I will be out next week, so I&#39;ll followup the
week after. The command that is being run is very similar, if not identical is&#58;

globus-job-run cmsgrid02.hep.wisc.edu/jobmanager-fork /bin/sh -c &#34;fs examine
/afs/hep.wisc.edu/osg/data | awk &#39;{print &#92;$4}&#39;;&#34;

I found this in site_verify section...

# check_remote_dir_size
#
# Check remote directory size (in GB)
#
sub check_remote_dir_size($$$)

GLOW-CMS appears to be using AFS, so take note of this section of the script...

# For AFS, we can&#39;t use df output
if ( lc($df{&#39;Type&#39;}) eq &#39;afs&#39; )
{
splice(@f);
$cmd = &#34;globus-job-run $dest/jobmanager-fork /bin/sh -c &#92;&#34;fs examine -path $d | awk
&#39;{print &#92;$4}&#39;; &#34;;
$cmd .= &#39;echo &#92;$?&#34;&#39;;
@f = split &#34;&#92;n&#34;, &#96;$cmd&#96;;

if ( scalar(@f) &#62; 0 &amp;&amp; $f[scalar(@f)-1] == 0 )
{
if ( scalar(@f) &#62; 3 )
{
$f[3] =~ m/(&#92;d+)/;
$size = $1;
}
}
<div id='show_1634111434' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1634111434'>else
{
return undef;
}
}

I ran the following globus commands and received output...

globus-job-run cmsgrid02.hep.wisc.edu/jobmanager-fork /bin/sh -c &#34;fs examine
/afs/hep.wisc.edu/osg/data&#34;
File /afs/hep.wisc.edu/osg/data (536873275.1.1) contained in volume 536873275
Volume status for vid = 536873275 named osg.data
Current disk quota is 209715200
Current blocks used are 18520794
The partition has 559244923 blocks available out of 684462384

ce-scan@grid01 .globus $ globus-job-run cmsgrid02.hep.wisc.edu/jobmanager-fork /bin/sh -c &#34;fs
examine /afs/hep.wisc.edu/osg/data | awk &#39;{print &#92;$4}&#39;;&#34;
contained
vid
is
are
559244900

I think it might be worth looking at globus issues with AFS. I&#39;ve spent some time on this already
and those findings were noted in the ticket already. Maybe you&#39;ll find more.

Thanks,

Tim
</div><script type='text/javascript'>
        $('#show_1634111434').click(function() {
            $('#detail_1634111434').slideDown("normal");
            $('#show_1634111434').hide();
            $('#hide_1634111434').show();
        });
        $('#hide_1634111434').click(function() {
            $('#detail_1634111434').slideUp();
            $('#hide_1634111434').hide();
            $('#show_1634111434').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='3695#1195071848'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-14T20:24:08+00:00">Nov 14, 2007 08:24 PM UTC</time> by <b>CIGI</b><a class="anchor" name="1195071848">&nbsp;</a></div><pre>Hi Tim,

I can help you with this. Please let me know what you have learned from
your investigation. E.g. how did you find the command that is being
executed is of the form %globus-job-run {hostname}/jobmanager-fork
/bin/sh -c &#34;df -Th {path to directory}&#34;,
a line number in site verify where you think this is would help if you
have it. I don&#39;t what to spend time digging around the same things you
have already explored. BTW I am at SC07 this week, so I will try to work
on this early next week.

Thanks
Anand

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='3695#1194982356'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-13T19:32:36+00:00">Nov 13, 2007 07:32 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1194982356">&nbsp;</a></div><pre>Anand,

Can you or someone with the troubleshooting group not do this? I do not mean at all to be rude, but
I&#39;ve spent considerable time on this already and I don&#39;t have the time to dig into it further right now.
My perl skills are okay, but not the best. If you need the exact command (although I feel my
assessment comes pretty close to what it&#39;s doing) then I suggest you see if someone else in the
troubleshooting group has the knowledge and time to parse it from the script.

Thanks,
Tim</pre></div><div class='update_description'><i onclick="document.location='3695#1194970507'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-13T16:15:07+00:00">Nov 13, 2007 04:15 PM UTC</time> by <b>CIGI</b><a class="anchor" name="1194970507">&nbsp;</a></div><pre>Hi Tim,

You will have to modify the relevant portion of the code to print the
command just  before it gets executed.

Thanks,
Anand

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='3695#1194969459'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-13T15:57:39+00:00">Nov 13, 2007 03:57 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1194969459">&nbsp;</a></div><pre>Anand,

Apparently site_verify has no option to output the exact command being run. I did use the debug
flag but that didn&#39;t prove at all helpful. And listing the commands using the show-tests flag as
described in the help doesn&#39;t give us what we want either.

$ ./sv.pl --help

Usage&#58; sv.pl [OPTIONS]

Perfom site verification procedures on a grid computing resource
and display test results.

Options&#58;

--help            Display this message and exit.
--disable-caching Disable the feature that allows running of multiple
tests per authentication.  This is done by default to
speed up the verification.
--debug           Turn on some debugging messages.
--host=...        Only query selected host(s).  Multiple hosts
can be specified in a comma-separated list.
Can query non-official sites in this manner.
--show-tests      Display the tests to be run along with a short
description.
--tmpdir=&#60;dir&#62;    Use &#60;dir&#62; for writing of temporary files.

Using the &#34;show-tests&#34; flag...

grid3_app_dir_size       for OSG $APP available space
grid3_data_dir_size      for OSG $DATA available space
grid3_tmp_dir_size       for OSG $TMP available space

Tim</pre></div><div class='update_description'><i onclick="document.location='3695#1194535627'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-08T15:27:07+00:00">Nov 8, 2007 03:27 PM UTC</time> by <b>CIGI</b><a class="anchor" name="1194535627">&nbsp;</a></div><pre>Hi Tim,

I am ready to help! Could you run site verify by hand and add
instrumentation to get the exact command string that is being invoked. I
understand that this string is of the form
%globus-job-run {hostname}/jobmanager-fork /bin/sh -c &#34;df -Th {path to
directory}&#34;
but I would like to see the exact command string with everything
substituted when you get the Globus 12 error. My understanding is that
this is a client side error occurring mainly due to malformed expression.

Also vors is reporting the site down this morning, seems to be an
unrelated failure.

Thanks,
Anand

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='3695#1194471761'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-07T21:42:41+00:00">Nov 7, 2007 09:42 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1194471761">&nbsp;</a></div><pre>Sorry for the confusion. I had tested on that Resource earlier and got confused myself. &#58;) Anand, will
you be able to look into this further?

Thanks,

Tim</pre></div><div class='update_description'><i onclick="document.location='3695#1194465247'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-07T19:54:07+00:00">Nov 7, 2007 07:54 PM UTC</time> by <b>wcmaier@....</b><a class="anchor" name="1194465247">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; So running the command at GLOW-CMS it can&#39;t locate the $app, $data and $tmp directries...</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ce-scan@grid01 .globus $ globus-job-run gridrocks.hep.fsu.edu/jobmanager-fork /bin/sh -c &#34;df -Th /afs/hep.wisc.edu/osg/data&#34;</font>
<font color='#7F7E6F'>&#62; df&#58; &#96;/afs/hep.wisc.edu/osg/data&#39;&#58; No such file or directory</font>
<font color='#7F7E6F'>&#62; ce-scan@grid01 .globus $ globus-job-run gridrocks.hep.fsu.edu/jobmanager-fork /bin/sh -c &#34;ls -l /afs/&#34;</font>
<font color='#7F7E6F'>&#62; ls&#58; /afs/&#58; No such file or directory</font>

Perhaps I&#39;m confused, but it looks like you&#39;re submitting to
hep.fsu.edu, not hep.wisc.edu. If hep.fsu.edu doesn&#39;t mount AFS, the
job you submitted would fail as above.

Our CE is cmsgrid02.hep.wisc.edu, and when I send your test job
there, I get the expected output&#58;

$ globus-job-run cmsgrid02.hep.wisc.edu/jobmanager-fork /bin/sh -c &#34;ls -l /afs/ | wc -l&#34;
168

The snippet from site_verify that you pasted looks right to me.
Here&#39;s some output from fs examine at our site&#58;

$ globus-job-run cmsgrid02.hep.wisc.edu/jobmanager-fork /bin/sh -c &#34;fs examine /afs/hep.wisc.edu/osg/data&#34;
File /afs/hep.wisc.edu/osg/data (536873275.1.1) contained in volume 536873275
Volume status for vid = 536873275 named osg.data
Current disk quota is 209715200
Current blocks used are 17553034
The partition has 419056299 blocks available out of 684462384

On Wed, Nov 07, 2007 at 07&#58;31&#58;00PM +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='3695#1194463908'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-07T19:31:48+00:00">Nov 7, 2007 07:31 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1194463908">&nbsp;</a></div><pre>Anand and Will,

The command the site_verify is issuing to get the available space for $app, $data and $tmp is
similar to this&#58;

globus-job-run feynman.uits.iupui.edu/jobmanager-fork /bin/sh -c &#34;df -Th /osg/app&#34;
--or--
globus-job-run {hostname}/jobmanager-fork /bin/sh -c &#34;df -Th {path to directory}&#34;

It then grabs the bytes available output from the command. Using the formula {bytes_available} /
(1024*1024) it gives us the space available in GB.

Now, in the site_verify there is a note in that section of the code that states...

# For AFS, we can&#39;t use df output --- and GLOW-CMS appears to be using AFS
if ( lc($df{&#39;Type&#39;}) eq &#39;afs&#39; )
{
splice(@f);
$cmd = &#34;globus-job-run $dest/jobmanager-fork /bin/sh -c &#92;&#34;fs examine -path $d | awk
&#39;{print &#92;$4}&#39;; &#34;;
$cmd .= &#39;echo &#92;$?&#34;&#39;;
@f = split &#34;&#92;n&#34;, &#96;$cmd&#96;;

if ( scalar(@f) &#62; 0 &amp;&amp; $f[scalar(@f)-1] == 0 )
{
if ( scalar(@f) &#62; 3 )
{
$f[3] =~ m/(&#92;d+)/;
$size = $1;
}
}
else
{
return undef;

<div id='show_935286280' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_935286280'>So running the command at GLOW-CMS it can&#39;t locate the $app, $data and $tmp directries...

ce-scan@grid01 .globus $ globus-job-run gridrocks.hep.fsu.edu/jobmanager-fork /bin/sh -c &#34;df -Th
/afs/hep.wisc.edu/osg/data&#34;
df&#58; &#96;/afs/hep.wisc.edu/osg/data&#39;&#58; No such file or directory
ce-scan@grid01 .globus $ globus-job-run gridrocks.hep.fsu.edu/jobmanager-fork /bin/sh -c &#34;ls -l
/afs/&#34;
ls&#58; /afs/&#58; No such file or directory

I do not know much about AFS, so perhaps Bill can help us with debugging this problem (I&#39;ll
presume he knows more about AFS than us &#58;) ).

Tim
OSG GOC
</div><script type='text/javascript'>
        $('#show_935286280').click(function() {
            $('#detail_935286280').slideDown("normal");
            $('#show_935286280').hide();
            $('#hide_935286280').show();
        });
        $('#hide_935286280').click(function() {
            $('#detail_935286280').slideUp();
            $('#hide_935286280').hide();
            $('#show_935286280').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='3695#1192805152'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-10-19T14:45:52+00:00">Oct 19, 2007 02:45 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1192805152">&nbsp;</a></div><pre>Anand wants me to strip out the code from site_verify and run the jobs with my DN.</pre></div><div class='update_description'><i onclick="document.location='3695#1191959187'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-10-09T19:46:27+00:00">Oct 9, 2007 07:46 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1191959187">&nbsp;</a></div><pre>I took this to the troubleshooting group and they agreed it is an issue suitable for their group. Anand
has been included in the CC and he will investigate this issue further.

Tim</pre></div><div class='update_description'><i onclick="document.location='3695#1189455967'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-09-10T20:26:07+00:00">Sep 10, 2007 08:26 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1189455967">&nbsp;</a></div><pre>Rob,

I&#39;d like to see if this can be brought to the attention of the
troubleshooting group. All of the GROW CE&#39;s report the same error
when site_verify is trying to determine the amount of available space
for DATA, TMP, and APP directories&#58;

GRAM Job submission failed because the gatekeeper contact cannot be
parsed (error code 96)

The following TWiki page was the most helpful, but if you look at the
latest update from the ticket, they indicate that all of $VDT_INSTALL
is already local to the system. It&#39;s a low priority issue for them,
but this has been a problem for a while and I&#39;m running out of ideas.
So I&#39;m hoping the troubleshooting team can investigate this further.

Tim</pre></div><div class='update_description'><i onclick="document.location='3695#1189196767'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-09-07T20:26:07+00:00">Sep 7, 2007 08:26 PM UTC</time> by <b>wcmaier@....</b><a class="anchor" name="1189196767">&nbsp;</a></div><pre>Hi, Tim-

Unfortunately, this has remained a low-priority issue, especially
since I can find no indication that there&#39;s anything actually wrong
here. If I remember correctly, the wiki page you mentioned earlier
includes some bits about moving areas under $VDT_INSTALL out of AFS;
here at Wisconsin, all of $VDT_INSTALL is already local to the
system. Was this the part of the wiki you were referring to? If so,
we seem to already be doing that. If not, what part of that page
should I look at?

On Fri, Sep 07, 2007 at 06&#58;36&#58;00PM +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='3695#1189190202'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-09-07T18:36:42+00:00">Sep 7, 2007 06:36 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1189190202">&nbsp;</a></div><pre>Will,

Hi. It has been a while since we&#39;ve heard from you. Back in late August I sent you some information
about these errors. Have you had a chance to look into it?

Thank you,
Tim
OSG Grid Operations Center</pre></div><div class='update_description'><i onclick="document.location='3695#1187709447'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-08-21T15:17:27+00:00">Aug 21, 2007 03:17 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1187709447">&nbsp;</a></div><pre>More info on gssklog at <a href='http&#58;//www.openafs.org/pipermail/openafs-info/2002-April/004268.html' target='_blank' rel='nofollow'>http&#58;//www.openafs.org/pipermail/openafs-info/2002-April/004268.html</a> or
Google for more.</pre></div><div class='update_description'><i onclick="document.location='3695#1187709381'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-08-21T15:16:21+00:00">Aug 21, 2007 03:16 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1187709381">&nbsp;</a></div><pre>Will,

Hi. I took over some of John Rosheck&#39;s old tickets; he resigned from the GOC recently. This one
has been sitting around for a while, so I took a look at what was going on. I found a TWiki page
that you might want to reference because it may prove helpful in resolving the errors. I&#39;ve
contacted the author of the page for more input, and you&#39;ll see my email to him below. It contains
a link to the TWiki page and other information that may be relevant to you. John suspected this
was a problem with the script, and perhaps the script could be modified to deal with sites using
your specific setup, but at this time I would suggest we try to make modifications on your end.
From what I see in the TWiki, it shouldn&#39;t be very complicated, whereas editing the site_verify
script most certainly would be.

I&#39;ll keep the ticket updated with Shawn&#39;s response(s).

Thank you,
Tim
OSG Grid Operations Center

From&#58; Tim Silvers &#60;tsilver@....&#62;
Date&#58; August 21, 2007 11&#58;10&#58;22 AM EDT
To&#58; &#34;McKee, Shawn&#34; &#60;smckee@....&#62;
Subject&#58; Request for assistance with GRAM error code 96

Hi Shawn,

I work at the OSG Grid Operations Center and I&#39;m trying to assist a site with resolving errors with
site_verify. GLOW-CMS administrators noticed that site_verify won&#39;t read locations like
$OSG_DATA, $OSG_TMP, etc. and you can view this information on VORS, <a href='http&#58;//vors.grid.iu.edu' target='_blank' rel='nofollow'>http&#58;//vors.grid.iu.edu</a>
As you can see, the error is identical to what you discovered at your site, which uses AFS, just as
GLOW-CMS does. I came across the following TWiki page where you had done a good job of noting
what you did to correct this error, <a href='https&#58;//hep.pa.msu.edu/twiki/bin/view/AGLT2/OSGInstallGate02' target='_blank' rel='nofollow'>https&#58;//hep.pa.msu.edu/twiki/bin/view/AGLT2/OSGInstallGate02</a>
which is what led me to write you this email. The OSG software stack has changed a bit and there
is no longer a $VDT_LOCATION/MIS-CI/etc/misci/mis-ci-site-info.cfg file, which you noted you had
to edit along with the osg-attributes.conf. Do you know if that will be a problem? I&#39;m not familiar
with the contents of that file. Maybe it&#39;s just on SE nodes, and not CE&#39;s?
<div id='show_1526633583' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1526633583'>
Thanks,

Tim
</div><script type='text/javascript'>
        $('#show_1526633583').click(function() {
            $('#detail_1526633583').slideDown("normal");
            $('#show_1526633583').hide();
            $('#hide_1526633583').show();
        });
        $('#hide_1526633583').click(function() {
            $('#detail_1526633583').slideUp();
            $('#hide_1526633583').hide();
            $('#show_1526633583').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='3695#1187700684'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-08-21T12:51:24+00:00">Aug 21, 2007 12:51 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1187700684">&nbsp;</a></div><pre>Another ticket that did not get reassigned to the team when John left. I&#39;ll review this later today.

Tim</pre></div><div class='update_description'><i onclick="document.location='3695#1185569761'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-07-27T20:56:01+00:00">Jul 27, 2007 08:56 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1185569761">&nbsp;</a></div><pre>Removing John Rosheck from this ticket. Adding another GOC engineer from RR.</pre></div><div class='update_description'><i onclick="document.location='3695#1184696181'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-07-17T18:16:21+00:00">Jul 17, 2007 06:16 PM UTC</time> by <b>John Rosheck</b><a class="anchor" name="1184696181">&nbsp;</a></div><pre>Hello,

Sorry to take so long to get back to you - vacation, etc.

These errors are almost certainly a problem with the site_verify script used to
obtain that information.  It will take quite a bit of work to localize the error
within the script.  I&#39;ll try to have more definitive information by the end of the week.

John</pre></div><div class='update_description'><i onclick="document.location='3695#1182970568'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-06-27T18:56:08+00:00">Jun 27, 2007 06:56 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1182970568">&nbsp;</a></div><pre>From&#58; 	  wcmaier@....
Subject&#58; 	GLOW(-CMS) &#39;Space Available&#39; errors in VORS
Date&#58; 	June 27, 2007 2&#58;42&#58;55 PM EDT
To&#58; 	  goc@....

I&#39;m not sure if this had also been the case before the UWMadisonCMS
-&#62; GLOW switch, but Dan and I noticed that VORS lists the following
errors for our site&#58;

Checking for OSG $APP available space&#58; &#92;
GRAM Job submission failed because the gatekeeper contact cannot be parsed (error code 96)
FAIL
Checking for OSG $DATA available space&#58; &#92;
GRAM Job submission failed because the gatekeeper contact cannot be parsed (error code 96)
FAIL
Checking for OSG $TMP available space&#58; &#92;
GRAM Job submission failed because the gatekeeper contact cannot be parsed (error code 96)
FAIL

$APP, $DATA and $TMP all live on AFS, and we&#39;ve noticed odd AFS
interaction problems with various checks in the past. Since pretty
much everything else appears to be working just fine (and the VORS
main page lists GLOW(-CMS) as &#39;PASS&#39;), we don&#39;t expect anything
significant is wrong.

Is there something we should do to fix this? Or does whatever test
is triggering those failures need some debugging?

Thanks!

--

o--------------------------{ Will Maier }--------------------------o
| jabber&#58;...wcmaier@.... | email&#58;..will.maier@.... |
| office&#58;...........608.263.9692 | cell&#58;..............608.438.6162 |
<div id='show_1879485602' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1879485602'>*--------------------[ UW High Energy Physics ]--------------------*
</div><script type='text/javascript'>
        $('#show_1879485602').click(function() {
            $('#detail_1879485602').slideDown("normal");
            $('#show_1879485602').hide();
            $('#hide_1879485602').show();
        });
        $('#hide_1879485602').click(function() {
            $('#detail_1879485602').slideUp();
            $('#hide_1879485602').hide();
            $('#show_1879485602').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F3695">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
