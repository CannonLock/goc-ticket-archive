<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[9264] Transfer errors at NDGF-T1_SCRATCHDISK</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=9264" method="post">
<div class="page-header">
    <h3><span class="muted">9264</span> / Transfer errors at NDGF-T1_SCRATCHDISK</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">carlos.borrego </div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">RT</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">osg-goc-rest</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-10-06</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Tanya Levshina <span class="muted"> / OSG Storage Team</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=62287">62287</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">USATLAS (BNL Prod)&nbsp;<a target="_blank" href="https://rt.racf.bnl.gov/rt/Ticket/Display.html?id=18231">18231</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/9264", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/9264?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/9264?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Transfer%20errors%20at%20NDGF-T1_SCRATCHDISK%20ISSUE%3D9264%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='9264#1285854546'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-30T13:49:06+00:00">Sep 30, 2010 01:49 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1285854546">&nbsp;</a></div><pre>since this has nothing to do to a problem on the BNL side, I&#39;ve rejected the
ticket on BNL&#39;s RT system.
--
Pedro Salgado
-- by psalgado at Thu Sep 30 13&#58;48&#58;58 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='9264#1285797730'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-29T22:02:10+00:00">Sep 29, 2010 10:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1285797730">&nbsp;</a></div><pre>Nordunet said&#58; &#34;The basic problem seems to be resolved, NDGF will try later tonight with some large transfers.&#34;
-- by Edoardo Martelli at Mon Sep 27 13&#58;05&#58;16 UTC 2010

Checking from our side. Atlas&#58; Can you keep an eye out for these failing transfers too?
-- by Mattias Wadenstein at Mon Sep 27 13&#58;03&#58;00 UTC 2010

The linecard of the CERN router has been reset.
Can NDGF and BNL check if the issue is solved?
-- by Edoardo Martelli at Mon Sep 27 12&#58;42&#58;17 UTC 2010

Added cross reference to GGUS-Ticket-ID&#58; #62436
See additional information there.
-- by Edoardo Martelli at Mon Sep 27 07&#58;14&#58;04 UTC 2010

CERN NOC got involved by Nordunet.
CERN NOC is looking into this issue. It seems the new NDGF prefix has hitten a bug which prevent
the hardware tcam of the CERN router to be updated in some circumstances. The problem
should be fixed with a hardware reset of the module. CERN engineers are  collecting
data for the hardware support, then they&#39;ll reboot the module.
-- by Edoardo Martelli at Mon Sep 27 07&#58;06&#58;37 UTC 2010

A re-iteration of how the problem looks from our side&#58;

FTS sets a gridftp transfer up through the gridftp control channel, a mover starts on the pool and starts listening for the gridftp data connection. Then no connection is made to the mover&#39;s listening port for an hour until the client or the mover times out.

This only happens for some of the transfers, and only to the pools that are on our new OPN IP range. I don&#39;t think it happens to all the transfers from BNL to the new pools either, since it is only a low rate of failures. So a first step I&#39;d look for is places where there is more than one, for instance if the failures are correlated to a particular door or pool at the source side - or if there is multiple routes, that all the routers and firewalls are appropriately configured.
-- by Mattias Wadenstein at Fri Sep 24 11&#58;02&#58;59 UTC 2010

Getting no help by assigning the ticket to BNL.
Putting the cloud support in CC, instead.

-- by I Ueda at Fri Sep 24 08&#58;52&#58;34 UTC 2010

Changed CC recipients&#58; atlas-support-cloud-nd@....;atlas-support-cloud-us@....
-- by I Ueda at Fri Sep 24 08&#58;52&#58;34 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='9264#1285797699'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-29T22:01:39+00:00">Sep 29, 2010 10:01 PM UTC</time> by <b>echism</b><a class="anchor" name="1285797699">&nbsp;</a></div><pre>Are there any updates on this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='9264#1285318220'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-24T08:50:20+00:00">Sep 24, 2010 08:50 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1285318220">&nbsp;</a></div><pre>Sent TEAM notification mail to mail address support@....

[GOC-TX Warning]
Source GGUS Ticket ID&#58; 62287 specifies affected site name of  NDGF-T1 which does not exist in OIM(resource/name) and it is ignored.
-- by I Ueda at Fri Sep 24 08&#58;48&#58;49 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='9264#1285260017'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-23T16:40:17+00:00">Sep 23, 2010 04:40 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1285260017">&nbsp;</a></div><pre>what makes you think this is a problem on our end?
all of the errors seem to be

[FTS] FTS State [Failed] FTS Retries [1] Reason [TRANSFER error during TRANSFER
phase&#58; [GRIDFTP_ERROR] globus_ftp_client&#58; the server responded with an error426
Transfer was killed]

right?

better first investigate why the transfer was killed on the NDGF side and then
after a cause has been found assess where to send the ticket.
other sites were getting data from us so what&#39;s so particular about this site?

--
Pedro Salgado
-- by psalgado at Thu Sep 23 16&#58;40&#58;07 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='9264#1285257049'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-23T15:50:49+00:00">Sep 23, 2010 03:50 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1285257049">&nbsp;</a></div><pre>I am adding tanya to this ticket.</pre></div><div class='update_description'><i onclick="document.location='9264#1285256909'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-23T15:48:29+00:00">Sep 23, 2010 03:48 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1285256909">&nbsp;</a></div><pre>Hello,
There are some transfer jobs failing at  NDGF-T1_SCRATCHDISK. Please look at&#58;

<a href='http&#58;//dashb-atlas-data.cern.ch/dashboard/request.py/file-placement?site=NDGF-T1_SCRATCHDISK&fromDate=2010-09-22%2002&#58' target='_blank' rel='nofollow'>http&#58;//dashb-atlas-data.cern.ch/dashboard/request.py/file-placement?site=NDGF-T1_SCRATCHDISK&fromDate=2010-09-22%2002&#58</a>;30&#58;00&toDate=2010-09-22%2006&#58;30&#58;00&state=FAILED_TRANSFER&errorType=180

Thanks
Carlos

[Ticket Origin]
<a href='https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=62287' target='_blank' rel='nofollow'>https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=62287</a>

[Ticket History]
Sent TEAM notification mail to mail address support@....
-- by carlos.borrego at Wed Sep 22 07&#58;15&#58;06 UTC 2010

Oh, fun. Seems like a recurrance of the RAL-NDGF problem, but this time with BNL as the source instead.

All those failures are to our pools on the new IP range (109.105.124.0/22), which is pretty suspicious given that we only have about half of the available free space in pools in that range.

I can also see successful transfers from BNL, as well as ping hosts at BNL, so it doesn&#39;t seem to be quite as clear cut as the RAL issue. Could we perhaps involve someone from BNL to take a look at their side too?

What it looks like from our side is that we get a gridftp session setup, and then the mover on the pool waits for the connection for the data channel, but that never happens and then it times out.
-- by Mattias Wadenstein at Wed Sep 22 13&#58;32&#58;29 UTC 2010

Added cross reference to GGUS-Ticket-ID&#58; #61942
See additional information there.
-- by I Ueda at Thu Sep 23 15&#58;46&#58;40 UTC 2010</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F9264">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
