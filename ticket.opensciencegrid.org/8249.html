<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[8249] Resource Specific Issue on BNL_ATLAS_1</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=8249" method="post">
<div class="page-header">
    <h3><span class="muted">8249</span> / Resource Specific Issue on BNL_ATLAS_1</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Ian Stokes-Rees</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-05-26</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
        <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/8249", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/8249?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/8249?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Resource%20Specific%20Issue%20on%20BNL_ATLAS_1%20ISSUE%3D8249%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='8249#1274369948'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-20T15:39:08+00:00">May 20, 2010 03:39 PM UTC</time> by <b>Peter Doherty</b><a class="anchor" name="1274369948">&nbsp;</a></div><pre>It looks like jobs are running okay at the moment at BNL
I think this issue can be resolved.
Thanks.

Peter

On May 19, 2010, at 11&#58;11 , Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8249#1274281899'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-19T15:11:39+00:00">May 19, 2010 03:11 PM UTC</time> by <b>echism</b><a class="anchor" name="1274281899">&nbsp;</a></div><pre>Peter and Ian,

Are there any updates on this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='8249#1273843962'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-14T13:32:42+00:00">May 14, 2010 01:32 PM UTC</time> by <b>echism</b><a class="anchor" name="1273843962">&nbsp;</a></div><pre>Peter,

Are there any updates on this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='8249#1272655088'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-30T19:18:08+00:00">Apr 30, 2010 07:18 PM UTC</time> by <b>Xin zhao</b><a class="anchor" name="1272655088">&nbsp;</a></div><pre>Hi Ian,

What&#39;s the error for the jobs now at BNL? Are they taking loong time to
finish? When the ATLAS production is running in full load,
there are not many job slots left for general OSG users. And OSG jobs
will be suspended when a higher priority job comes, that will
make OSG jobs run much longer than usual.

Cheers,
Xin

On 4/30/2010 2&#58;07 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8249#1272650856'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-30T18:07:36+00:00">Apr 30, 2010 06:07 PM UTC</time> by <b>echism</b><a class="anchor" name="1272650856">&nbsp;</a></div><pre>We&#39;re still waiting to hear from Xin in 8475. I&#39;ll try to track both.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='8249#1272046328'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-23T18:12:08+00:00">Apr 23, 2010 06:12 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1272046328">&nbsp;</a></div><pre>See ticket&#58; 8475.  At the moment, jobs at BNL are generally not running
properly.

Ian</pre></div><div class='update_description'><i onclick="document.location='8249#1272045748'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-23T18:02:28+00:00">Apr 23, 2010 06:02 PM UTC</time> by <b>echism</b><a class="anchor" name="1272045748">&nbsp;</a></div><pre>Peter,

Have you had a chance to retry this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='8249#1271965867'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-22T19:51:07+00:00">Apr 22, 2010 07:51 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1271965867">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #15726]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; John R. Hover
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by jhover
Subject&#58; Open Science Grid&#58; Resource Specific Issue on BNL_ATLAS_1 ISSUE=8249 PROJ=71
OSG GOC Ticket&#58; 8249

------------------------------------------------------------------------------

We&#39;ve made more ownership and mode changes in $OSG_APP and $OSG_DATA for
sbgrid. Hopefully this will resolve the rsync issue.

FYI, on the previous attempt, we didn&#39;t make changes to $OSG_DATA, just
$OSG_APP.

Try again and let us know the outcome.

Cheers,

--john

On 04/21/2010 12&#58;13 PM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;    *Ticket URL&#58;*  <a href='https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=15726' target='_blank' rel='nofollow'>https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=15726</a></font>
<font color='#7F7E6F'>&#62;    *Requestors&#58;*  osg@....</font>
<font color='#7F7E6F'>&#62;           *Ccs&#58;*  osg@....</font>
<font color='#7F7E6F'>&#62;         *Queue&#58;*  GridServices</font>
<font color='#7F7E6F'>&#62;         *Owner&#58;*  John R. Hover</font>
<font color='#7F7E6F'>&#62;        *Status&#58;*  /open/</font>
<font color='#7F7E6F'>&#62;      *Priority&#58;*  /None/</font>
<font color='#7F7E6F'>&#62;   *Transaction&#58;*  Correspondence added by osg@....</font>
<div id='show_569041721' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_569041721'><font color='#7F7E6F'>&#62;       *Subject&#58;*  Open Science Grid&#58; Resource Specific Issue on BNL_ATLAS_1</font>
ISSUE=8249 PROJ=71
<font color='#7F7E6F'>&#62;            *OSG GOC Ticket&#58;*  8249</font>
&#60;<a href='8249.html' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=8249&#62</a>;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_569041721').click(function() {
            $('#detail_569041721').slideDown("normal");
            $('#show_569041721').hide();
            $('#hide_569041721').show();
        });
        $('#hide_569041721').click(function() {
            $('#detail_569041721').slideUp();
            $('#hide_569041721').hide();
            $('#show_569041721').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8249#1271866327'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-21T16:12:07+00:00">Apr 21, 2010 04:12 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1271866327">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #15726]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; Xin Zhao
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by xinzhao
Subject&#58; Open Science Grid&#58; Resource Specific Issue on BNL_ATLAS_1 ISSUE=8249 PROJ=71
OSG GOC Ticket&#58; 8249

------------------------------------------------------------------------------

Hello,

I am going to give this ticket to John, who can answer it better.

Xin</pre></div><div class='update_description'><i onclick="document.location='8249#1271866019'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-21T16:06:59+00:00">Apr 21, 2010 04:06 PM UTC</time> by <b>echism</b><a class="anchor" name="1271866019">&nbsp;</a></div><pre>Xin,

Is there anything new on this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='8249#1271454607'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T21:50:07+00:00">Apr 16, 2010 09:50 PM UTC</time> by <b>doherty@....</b><a class="anchor" name="1271454607">&nbsp;</a></div><pre>My OSGMM and Ian&#39;s certs are getting mapped to the sbgrid GID, but my
individual cert is being mapped to nebiogrd
the dirs in OSG_DATA and OSG_APP don&#39;t have group write access.

Is there any more information I can provide that would help with this
ticket?

peter</pre></div><div class='update_description'><i onclick="document.location='8249#1271270291'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-14T18:38:11+00:00">Apr 14, 2010 06:38 PM UTC</time> by <b>Mariachi</b><a class="anchor" name="1271270291">&nbsp;</a></div><pre>Hi all,

I checked and at least Ian&#39;s pool account and Peter&#39;s OSGMM pool account
have both been put in the sbgrid UNIX group now.

Cheers,

--john

On 04/14/2010 12&#58;35 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8249#1271270288'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-14T18:38:08+00:00">Apr 14, 2010 06:38 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1271270288">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Thanks for the info.  Please keep us updated and if the mapping issue is</font>
<font color='#7F7E6F'>&#62; solved, we can close the ticket.</font>

Peter will be able to answer that question tomorrow.

Ian</pre></div><div class='update_description'><i onclick="document.location='8249#1271269747'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-14T18:29:07+00:00">Apr 14, 2010 06:29 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1271269747">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #15726]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; Xin Zhao
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by xinzhao
Subject&#58; Open Science Grid&#58; Resource Specific Issue on BNL_ATLAS_1 ISSUE=8249 PROJ=71
OSG GOC Ticket&#58; 8249

------------------------------------------------------------------------------

Hi Ian,

Thanks for the info.  Please keep us updated and if the mapping issue is
solved, we can close the ticket.

Thanks,
Xin</pre></div><div class='update_description'><i onclick="document.location='8249#1271267947'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-14T17:59:07+00:00">Apr 14, 2010 05:59 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1271267947">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; What&#39;s the error messages of the failed jobs? I wonder if that is related to</font>
<font color='#7F7E6F'>&#62; the mapping issue or something else.</font>

Xin,

Thanks for asking.  I&#39;ve looked into this now, and I see what is
happening.  It is the fault of our own external timeout value being too
close to the job internal timeout.  Details are below if you are
interested.  I will try to update the classad and restart these jobs.

Ian

We have 2 levels of timeout that we impose (of course the site may
timeout/cancel our jobs with their own timeout which we don&#39;t know)&#58;

1. job internal, which allows the job to tidy itself up via a watchdog
when the timeout limit is reached.  In this case, we don&#39;t have problems
-- our current mode of operation is to say &#34;if a job hits its own
internal timeout, then don&#39;t retry it -- it will probably just timeout
again&#34;.

2. job external, which is a back stop to prevent jobs going on much
longer than expected, perhaps due to some internal fault.

These two timeouts are linked, obviously.  The ones currently failing at
BNL only provide a 60 second grace period, and given the time lags with
different timestamps, and where and when the timestamps are collected
for the job internal (inside the running job) and job external (on the
job submit system), 60 seconds was way to short.  I had already bumped
it up to 5 minutes, but the BNL jobs use an old classad with the 1
minute grace period.  On more careful consideration, I&#39;ve decided that
even 5 minutes isn&#39;t enough -- for the &#34;backstop&#34; timeout, I&#39;m now
setting it to 20 minutes.</pre></div><div class='update_description'><i onclick="document.location='8249#1271266515'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-14T17:35:15+00:00">Apr 14, 2010 05:35 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1271266515">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #15726]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; Xin Zhao
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by xinzhao
Subject&#58; Open Science Grid&#58; Resource Specific Issue on BNL_ATLAS_1 ISSUE=8249 PROJ=71
OSG GOC Ticket&#58; 8249

------------------------------------------------------------------------------

Hi Ian,

What&#39;s the error messages of the failed jobs? I wonder if that is related to
the mapping issue or something else.

Cheers,
Xin</pre></div><div class='update_description'><i onclick="document.location='8249#1271265428'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-14T17:17:08+00:00">Apr 14, 2010 05:17 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1271265428">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Please let us know when you&#39;ve had a chance to retry these jobs.</font>

We had 19 jobs successfully run on Saturday April 10th at BNL, but none
since then.  We are currently reporting high job failure rates.

Ian</pre></div><div class='update_description'><i onclick="document.location='8249#1271259975'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-14T15:46:15+00:00">Apr 14, 2010 03:46 PM UTC</time> by <b>echism</b><a class="anchor" name="1271259975">&nbsp;</a></div><pre>Peter,

Please let us know when you&#39;ve had a chance to retry these jobs.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='8249#1271177047'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-13T16:44:07+00:00">Apr 13, 2010 04:44 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1271177047">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #15726]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; Xin Zhao
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by jhover
Subject&#58; Open Science Grid&#58; Resource Specific Issue on BNL_ATLAS_1 ISSUE=8249 PROJ=71
OSG GOC Ticket&#58; 8249

------------------------------------------------------------------------------

Hi Peter,

Please submit an /SBGrid proxy job again and your pool account should be
assigned to the sbgrid group.

By way of explanation, GUMS has a setting concerning whether to check
for UNIX account group membership either 1) the first time an account is
made or 2) for each job that gets submitted. In the past we had LDAP
load issues that made us run with setting #1. So the first time your
pool account was made, it got set to nebiogrid, and isn&#39;t getting
re-checked now.

I&#39;ve just set our GUMS to #2, so the account should be fixed upon the
next job submission.

Please let me know either way. I&#39;d like to confirm that the #2 setting
is working correctly.

Cheers,

--john

--
<div id='show_30304289' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_30304289'>John Hover
Group Leader | Grid Group/Experiment Services
RHIC/ATLAS Computing Facility | Brookhaven National Laboratory
jhover@.... | 631-344-5828 | <a href='http&#58;//www.racf.bnl.gov/Members/jhover' target='_blank' rel='nofollow'>http&#58;//www.racf.bnl.gov/Members/jhover</a>

*** RT-Note&#58; Stripped 77 quoted lines from message body!
</div><script type='text/javascript'>
        $('#show_30304289').click(function() {
            $('#detail_30304289').slideDown("normal");
            $('#show_30304289').hide();
            $('#hide_30304289').show();
        });
        $('#hide_30304289').click(function() {
            $('#detail_30304289').slideUp();
            $('#hide_30304289').hide();
            $('#show_30304289').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8249#1271084346'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-12T14:59:06+00:00">Apr 12, 2010 02:59 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1271084346">&nbsp;</a></div><pre>Subject&#58; AutoReply&#58; Open Science Grid&#58; Resource Specific Issue on BNL_ATLAS_1 ISSUE=8249 PROJ=71

Greetings,

This message has been automatically generated in response to the
creation of a support ticket you submitted regarding&#58;

&#34;Open Science Grid&#58; Resource Specific Issue on BNL_ATLAS_1 ISSUE=8249 PROJ=71&#34;

A summary of your ticket, which has been assigned a request ID of
[rt.racf.bnl.gov #15959], appears below.

To modify your ticket or add follow-ups, simply reply to this email
message.  Please DO NOT change the subject of this e-mail when
replying or you might generate a new ticket.

Thank you,
RT-RACF@....

------------------------------------------------------------------------------

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='8249#1271084166'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-12T14:56:06+00:00">Apr 12, 2010 02:56 PM UTC</time> by <b>doherty@....</b><a class="anchor" name="1271084166">&nbsp;</a></div><pre>John,

Do you have an estimate of when the GUMS mapping issue will be fixed?

Thanks
Peter

$ voms-proxy-info -all -file var/proxy.pem
WARNING&#58; Unable to verify signature! Server certificate possibly not
installed.
Error&#58; Cannot verify AC signature!
subject   &#58; /DC=org/DC=doegrids/OU=People/CN=Peter Doherty (OSGMM)
83457/CN=proxy/CN=proxy/CN=proxy
issuer    &#58; /DC=org/DC=doegrids/OU=People/CN=Peter Doherty (OSGMM)
83457/CN=proxy/CN=proxy
identity  &#58; /DC=org/DC=doegrids/OU=People/CN=Peter Doherty (OSGMM)
83457/CN=proxy/CN=proxy
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; var/proxy.pem
timeleft  &#58; 11&#58;23&#58;17
=== VO SBGrid extension information ===
VO        &#58; SBGrid
subject   &#58; /DC=org/DC=doegrids/OU=People/CN=Peter Doherty (OSGMM) 83457
issuer    &#58; /DC=org/DC=doegrids/OU=Services/CN=hpc.sbgrid.org
attribute &#58; /SBGrid/Role=NULL/Capability=NULL
timeleft  &#58; 0&#58;00&#58;00
uri       &#58; hpc.sbgrid.org&#58;15002

$ globus-job-run gridgk01.racf.bnl.gov /bin/bash -c &#39;id&#39;
uid=95767(grd25767) gid=69954(nebiogrd) groups=69954(nebiogrd)</pre></div><div class='update_description'><i onclick="document.location='8249#1270838466'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-09T18:41:06+00:00">Apr 9, 2010 06:41 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1270838466">&nbsp;</a></div><pre>John,

<font color='#7F7E6F'>&#62; So in the short term, the solution is for us to change ownership of all</font>
<font color='#7F7E6F'>&#62; sbgrid/nebiogrid directories and files in OSG_APP to the sbgrid-group</font>
<font color='#7F7E6F'>&#62; pool account (just as you suggested). But additionally, we will need Ian</font>
<font color='#7F7E6F'>&#62; and Peter to *always* use an sbgrid proxy when writing/installing in</font>
<font color='#7F7E6F'>&#62; OSG_APP, so that the group membership of the files will be consistent.</font>

That should be fine for the next few months.  We had a half-hearted
effort to switch from SBGrid to NEBioGrid back in the autumn, and this
will become more important in June/July, but for now we will always be
running as SBGrid VO users.

<font color='#7F7E6F'>&#62; Another possible approach depends on if Ian and Peter are exclusive</font>
<font color='#7F7E6F'>&#62; members of a &#34;software managers&#34; group in the two VOs. If this is the</font>
<font color='#7F7E6F'>&#62; case, it would be very easy to have them always map to a single software</font>
<font color='#7F7E6F'>&#62; account (e.g. &#34;sbnebiosoft&#34;), rather than a pool account (e.g.</font>
<font color='#7F7E6F'>&#62; &#34;grd24733&#34;). But as I&#39;m not a member of the VO, I couldn&#39;t browse to</font>
<font color='#7F7E6F'>&#62; look at the groups defined. Let us know if that might be a preferred</font>
<font color='#7F7E6F'>&#62; approach ( it is the one that ATLAS and several other VOs use).</font>

&#34;sbnebiosoft&#34; -- I like it.  We need to improve how we do &#34;VO-wide&#34; data
and binary management.  When this happens, we will either start using
VOMS Roles for these actions or we&#39;ll simply create a new certificate
and associate it with that responsibility.  For now, I don&#39;t think this
would help us -- it is best if our jobs look more-or-less the same as
the jobs run by the small group of other users in our VO.  It is already
hard enough to help them setup and debug their grid jobs, we don&#39;t need
the uncertainty of different behavior based on DN to add to this.

So to confirm&#58; at BNL, everything Peter or I have ever touched can be
chown&#39;ed to a the SBGrid group, and we will always submit grid jobs with
the SBGrid VO VOMS AC in the proxy cert.

Thanks,
<div id='show_774826221' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_774826221'>
Ian
</div><script type='text/javascript'>
        $('#show_774826221').click(function() {
            $('#detail_774826221').slideDown("normal");
            $('#show_774826221').hide();
            $('#hide_774826221').show();
        });
        $('#hide_774826221').click(function() {
            $('#detail_774826221').slideUp();
            $('#hide_774826221').hide();
            $('#show_774826221').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8249#1270835137'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-09T17:45:37+00:00">Apr 9, 2010 05:45 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1270835137">&nbsp;</a></div><pre>Ian or Peter,

Do the short term solutions John suggests in his entry on Wednesday sound like they will meet you needs?

Rob</pre></div><div class='update_description'><i onclick="document.location='8249#1270670893'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-07T20:08:13+00:00">Apr 7, 2010 08:08 PM UTC</time> by <b>echism</b><a class="anchor" name="1270670893">&nbsp;</a></div><pre>I am setting the date out for this to check on the issue again.

Thank you,
Elizabeth Chism</pre></div><div class='update_description'><i onclick="document.location='8249#1270653067'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-07T15:11:07+00:00">Apr 7, 2010 03:11 PM UTC</time> by <b>Mariachi</b><a class="anchor" name="1270653067">&nbsp;</a></div><pre>Hi all,

Sorry for the delay on this. This issue has run into 3 separate sources
of trouble&#58;

1) Our group doesn&#39;t have direct root access to the NFS servers where
OSG_APP and OSG_DATA reside. We are currently getting an admin host set
up to let us make ownership changes in NFS as root.

2) There was an outright error in the GUMS configuration of one of the
VO definitions (which I corrected early in the ticket).

3) This situation has hit a gap in the GUMS pool account model. We have
a single pool of accounts for all OSG VOs. When a pool account is
mapped, it is placed (in UNIX) in the primary group for the VO the
initial job is associated with. When the same user DN comes in under
another VO they belong to, they are still mapped to the same account
(because all the target accounts are in the same pool), but the group
membership of that account is switched to the other VO group.

As things are now, to force a different/new account to be used, we would
have to create a distinct pool for every VO (which defeats the entire
purpose of pool accounts).

In the long term, we (the GUMS developers) need to store VOMS proxy
information with the pool account records so a distinct pool account
will be allocated for each DN+VO combination. I&#39;ll add this as a
priority feature for the next release of GUMS. But this will take awhile.

So in the short term, the solution is for us to change ownership of all
sbgrid/nebiogrid directories and files in OSG_APP to the sbgrid-group
pool account (just as you suggested). But additionally, we will need Ian
and Peter to *always* use an sbgrid proxy when writing/installing in
OSG_APP, so that the group membership of the files will be consistent.

<div id='show_2018911644' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2018911644'>Another possible approach depends on if Ian and Peter are exclusive
members of a &#34;software managers&#34; group in the two VOs. If this is the
case, it would be very easy to have them always map to a single software
account (e.g. &#34;sbnebiosoft&#34;), rather than a pool account (e.g.
&#34;grd24733&#34;). But as I&#39;m not a member of the VO, I couldn&#39;t browse to
look at the groups defined. Let us know if that might be a preferred
approach ( it is the one that ATLAS and several other VOs use).

Cheers,

--john

On 04/01/2010 01&#58;32 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_2018911644').click(function() {
            $('#detail_2018911644').slideDown("normal");
            $('#show_2018911644').hide();
            $('#hide_2018911644').show();
        });
        $('#hide_2018911644').click(function() {
            $('#detail_2018911644').slideUp();
            $('#hide_2018911644').hide();
            $('#show_2018911644').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8249#1270143127'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-01T17:32:07+00:00">Apr 1, 2010 05:32 PM UTC</time> by <b>doherty@....</b><a class="anchor" name="1270143127">&nbsp;</a></div><pre>I&#39;m not seeing any change here.  The users are still being mapped to
accounts with non-overlapping group membership. and the directory
ownerships haven&#39;t changed.

Peter

On Mar 31, 2010, at 17&#58;25 , Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8249#1270070722'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-31T21:25:22+00:00">Mar 31, 2010 09:25 PM UTC</time> by <b>echism</b><a class="anchor" name="1270070722">&nbsp;</a></div><pre>Thank you for your thoughtful response. Did John&#39;s fix help your situation?

-Elizabeth</pre></div><div class='update_description'><i onclick="document.location='8249#1269633546'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-26T19:59:06+00:00">Mar 26, 2010 07:59 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1269633546">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; In my invesstigation of the subject, I was told that when the VOMS AC expires, voms-proxy behaves similarly to grid-proxy; ie it loses the VOMS attribute, but my testing was inconclusive, so I will take your word for it Ian. Is this ready to close?</font>

voms-proxy-init and its relationship to grid-proxy-init is a nuanced
issue.  voms-proxy-init with no &#34;-voms&#34; option behaves just like
grid-proxy-init.  What is particularly confounding is that
voms-proxy-init can sometimes &#34;fall back&#34; to behaving like
&#34;grid-proxy-init&#34; even if &#34;-voms&#34; is supplied, but there is some problem
contacting the VOMS server.

If the &#34;-voms&#34; part is there and works, then you get an &#34;extended&#34;
certificate file.  It contains two certs, one of which is a normal proxy
cert, the second of which is an attribute cert (AC) which is
&#34;associated&#34; with the proxy cert.  Both have two timestamps&#58; start and
end time.  For reasons that are beyond me, ACs created by
voms-proxy-init have a 24 hour limit.  You *always* get the annoying
warning message that confuses users the first time they do
&#34;voms-proxy-init&#34; if the requested proxy cert has a lifetime &#62; 24
hours.  Nothing currently checks the time limits on the ACs, so this can
safely be ignored.

A proxy cert is just a base64-encoded binary file.  There is no database
keeping track of anything, so it isn&#39;t exactly correct to suggest the
proxy cert &#34;looses&#34; its VOMS attribute certificate when the proxy cert
expires.  It is simply a matter of whether or not a remote system will
honor the proxy cert.  If it has a clock that is synchronized properly,
it will only honor the proxy cert between the start and end times.  Use
of ACs within OSG are such that AC start and end time are ignored, and
only the &#34;parent&#34; cert start and end time are considered.

I hope that helps to shed some light on how these things work.

Ian</pre></div><div class='update_description'><i onclick="document.location='8249#1269626521'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-26T18:02:01+00:00">Mar 26, 2010 06:02 PM UTC</time> by <b>echism</b><a class="anchor" name="1269626521">&nbsp;</a></div><pre>In my invesstigation of the subject, I was told that when the VOMS AC expires, voms-proxy behaves similarly to grid-proxy; ie it loses the VOMS attribute, but my testing was inconclusive, so I will take your word for it Ian. Is this ready to close?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='8249#1269619687'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-26T16:08:07+00:00">Mar 26, 2010 04:08 PM UTC</time> by <b>Mariachi</b><a class="anchor" name="1269619687">&nbsp;</a></div><pre>As far as I know, no OSG services pay attention to the VOMS attribute
lifetime. They only pay attention to the main proxy lifetime.

--john

On 03/26/2010 11&#58;41 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8249#1269618607'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-26T15:50:07+00:00">Mar 26, 2010 03:50 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1269618607">&nbsp;</a></div><pre>On 3/26/10 11&#58;41 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; Does this mean that after 24 hours, even though my proxy is still</font>
<font color='#7F7E6F'>&#62; valid, it&#39;s loose the VOMS attributes, and I&#39;ll have problems with</font>
<font color='#7F7E6F'>&#62; mappings at BNL?</font>

The timestamp on the AC is ignored.  The only timing information that is
important is the main proxy cert.

Ian</pre></div><div class='update_description'><i onclick="document.location='8249#1269618067'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-26T15:41:07+00:00">Mar 26, 2010 03:41 PM UTC</time> by <b>doherty@....</b><a class="anchor" name="1269618067">&nbsp;</a></div><pre>Hi,

I have a technical question in regards to this&#58;

<font color='#7F7E6F'>&#62;&#62; The only restriction is that all users from these 2 VOs (nebiogrid,</font>
<font color='#7F7E6F'>&#62;&#62; sbgrid) need to use VOMS proxies now.</font>

Our VOMS server seems to limit VOMS ACs to 24 hours.
As shown by this output&#58;

$&#62; voms-proxy-init -voms SBGrid -valid 96&#58;00
Your identity&#58; /DC=org/DC=doegrids/OU=People/CN=Peter Doherty 869198
Creating temporary proxy ............................... Done
Contacting  hpc.sbgrid.org&#58;15002 [/DC=org/DC=doegrids/OU=Services/
CN=hpc.sbgrid.org] &#34;SBGrid&#34; Done

Warning&#58; hpc.sbgrid.org&#58;15002&#58; The validity of this VOMS AC in your
proxy is shortened to 86400 seconds!
Creating proxy ..................................... Done

Does this mean that after 24 hours, even though my proxy is still
valid, it&#39;s loose the VOMS attributes, and I&#39;ll have problems with
mappings at BNL?

Thanks,
Peter

On Mar 25, 2010, at 14&#58;45 , Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8249#1269542747'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-25T18:45:47+00:00">Mar 25, 2010 06:45 PM UTC</time> by <b>echism</b><a class="anchor" name="1269542747">&nbsp;</a></div><pre>I&#39;ll copy John in case he didn&#39;t get the last update through the ATLAS RT.
-----

Hi John,

<font color='#7F7E6F'>&#62; I&#39;ve altered the GUMS configuration to (I hope) fix the issue. What was</font>
<font color='#7F7E6F'>&#62; happening was a user who is in 2 VOs was submitting jobs with a VOMS</font>
<font color='#7F7E6F'>&#62; proxy from one VO, but getting mapped to the incorrect pool account</font>
<font color='#7F7E6F'>&#62; (associated with the other VO).</font>

Thanks.

<font color='#7F7E6F'>&#62; The only restriction is that all users from these 2 VOs (nebiogrid,</font>
<font color='#7F7E6F'>&#62; sbgrid) need to use VOMS proxies now.</font>

That is fine.  We are already only directing users to utilize VOMS proxies.

<font color='#7F7E6F'>&#62; Please test again and let us know if it is working. Also, there may be</font>
<font color='#7F7E6F'>&#62; directories with the wrong ownership. If so, let us know and we can</font>
<font color='#7F7E6F'>&#62; manually switch them.</font>

Peter and I are the only people in either VO (SBGrid or NEBioGrid) who
make use of $OSG_DATA and $OSG_APP.  Please could all files and
directories (recursively) owned by either one of us please be chown&#39;ed
to the sbgrid group.  We put all our files into a subdirectory &#34;sbgrid&#34;,
but there has been some renaming and other tests done to try and
diagnose and work around this problem, so there may be more
files/directories owned by us than simply $OSG_DATA/sbgrid and
$OSG_APP/sbgrid.  That said, the following would work wonders for us at BNL&#58;

for d in $OSG_DATA/*sbgrid* $OSG_APP/*sbgrid*; do
chown -R ANY_SBGRID_POOL_ACCOUNT&#58;sbgrid $d
chmod -R ug+rwX $d
done

<div id='show_849111175' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_849111175'><font color='#7F7E6F'>&#62; If at all possible, we would like to continue using pool accounts, so</font>
<font color='#7F7E6F'>&#62; this will require directories/files to be set group-writable, if that</font>
<font color='#7F7E6F'>&#62; will be needed.</font>

Do we need to set umask inside our jobs, or will this be done
automatically by the default umask and default group?

Ian
</div><script type='text/javascript'>
        $('#show_849111175').click(function() {
            $('#detail_849111175').slideDown("normal");
            $('#show_849111175').hide();
            $('#hide_849111175').show();
        });
        $('#hide_849111175').click(function() {
            $('#detail_849111175').slideUp();
            $('#hide_849111175').hide();
            $('#show_849111175').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8249#1269534186'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-25T16:23:06+00:00">Mar 25, 2010 04:23 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1269534186">&nbsp;</a></div><pre>Hi John,

<font color='#7F7E6F'>&#62; I&#39;ve altered the GUMS configuration to (I hope) fix the issue. What was</font>
<font color='#7F7E6F'>&#62; happening was a user who is in 2 VOs was submitting jobs with a VOMS</font>
<font color='#7F7E6F'>&#62; proxy from one VO, but getting mapped to the incorrect pool account</font>
<font color='#7F7E6F'>&#62; (associated with the other VO).</font>

Thanks.

<font color='#7F7E6F'>&#62; The only restriction is that all users from these 2 VOs (nebiogrid,</font>
<font color='#7F7E6F'>&#62; sbgrid) need to use VOMS proxies now.</font>

That is fine.  We are already only directing users to utilize VOMS proxies.

<font color='#7F7E6F'>&#62; Please test again and let us know if it is working. Also, there may be</font>
<font color='#7F7E6F'>&#62; directories with the wrong ownership. If so, let us know and we can</font>
<font color='#7F7E6F'>&#62; manually switch them.</font>

Peter and I are the only people in either VO (SBGrid or NEBioGrid) who
make use of $OSG_DATA and $OSG_APP.  Please could all files and
directories (recursively) owned by either one of us please be chown&#39;ed
to the sbgrid group.  We put all our files into a subdirectory &#34;sbgrid&#34;,
but there has been some renaming and other tests done to try and
diagnose and work around this problem, so there may be more
files/directories owned by us than simply $OSG_DATA/sbgrid and
$OSG_APP/sbgrid.  That said, the following would work wonders for us at BNL&#58;

for d in $OSG_DATA/*sbgrid* $OSG_APP/*sbgrid*; do
chown -R ANY_SBGRID_POOL_ACCOUNT&#58;sbgrid $d
chmod -R ug+rwX $d
done

<font color='#7F7E6F'>&#62; If at all possible, we would like to continue using pool accounts, so</font>
<font color='#7F7E6F'>&#62; this will require directories/files to be set group-writable, if that</font>
<font color='#7F7E6F'>&#62; will be needed.</font>
<div id='show_1483166207' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1483166207'>
Do we need to set umask inside our jobs, or will this be done
automatically by the default umask and default group?

Ian
</div><script type='text/javascript'>
        $('#show_1483166207').click(function() {
            $('#detail_1483166207').slideDown("normal");
            $('#show_1483166207').hide();
            $('#hide_1483166207').show();
        });
        $('#hide_1483166207').click(function() {
            $('#detail_1483166207').slideUp();
            $('#hide_1483166207').hide();
            $('#show_1483166207').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8249#1269528606'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-25T14:50:06+00:00">Mar 25, 2010 02:50 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1269528606">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #15726]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; Xin Zhao
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by jhover
Subject&#58; Open Science Grid&#58; Resource Specific Issue on BNL_ATLAS_1 ISSUE=8249 PROJ=71
OSG GOC Ticket&#58; ISSUE=8249 PROJ=71

------------------------------------------------------------------------------

Hi all,

There has been some off-ticket communication on this, copied below.

I&#39;ve altered the GUMS configuration to (I hope) fix the issue. What was
happening was a user who is in 2 VOs was submitting jobs with a VOMS
proxy from one VO, but getting mapped to the incorrect pool account
(associated with the other VO).

The only restriction is that all users from these 2 VOs (nebiogrid,
sbgrid) need to use VOMS proxies now.

Please test again and let us know if it is working. Also, there may be
directories with the wrong ownership. If so, let us know and we can
manually switch them.

If at all possible, we would like to continue using pool accounts, so
this will require directories/files to be set group-writable, if that
will be needed.

Cheers,

--john
<div id='show_528446646' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_528446646'>
On 03/23/2010 02&#58;00 PM, Ian Stokes-Rees wrote&#58;
<font color='#7F7E6F'>&#62; Hi John,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On 3/23/10 1&#58;46 PM, John R. Hover wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; This is on our radar, it&#39;s just that I was out sick 2 days last</font>
<font color='#7F7E6F'>&#62;&#62; week and Xin is out sick 2 days so far this week. Our group is also</font>
<font color='#7F7E6F'>&#62;&#62; down 3 members since January. Sorry about the slow response.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; No Problem.  Hope everyone returns to good health.  We have a few</font>
<font color='#7F7E6F'>&#62; team members out as well.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Question&#58; Can we expect that sbgrid and nebiogrid jobs will always</font>
<font color='#7F7E6F'>&#62;&#62; come with a VOMS proxy? If so, there is a pretty straightforward</font>
<font color='#7F7E6F'>&#62;&#62; change that should clear this up.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; We can&#39;t run at FNAL at all if we don&#39;t have a VOMS proxy, so we&#39;re</font>
<font color='#7F7E6F'>&#62; basically only using voms-proxy-init.  In other words, &#34;yes, sbgrid</font>
<font color='#7F7E6F'>&#62; and nebiogrid jobs will always have a VOMS proxy AC associated with</font>
<font color='#7F7E6F'>&#62; them&#34;.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Ian</font>

On 03/22/2010 10&#58;51 PM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *Ticket URL&#58;*</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=15726' target='_blank' rel='nofollow'>https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=15726</a> *Requestors&#58;*</font>
<font color='#7F7E6F'>&#62; osg@.... *Ccs&#58;*  (None) *Queue&#58;*  GridServices</font>
<font color='#7F7E6F'>&#62; *Owner&#58;*  Xin Zhao *Status&#58;*  /open/ *Priority&#58;*  /None/</font>
<font color='#7F7E6F'>&#62; *Transaction&#58;*  Correspondence added by</font>
<font color='#7F7E6F'>&#62; osg@.... *Subject&#58;*  Open Science Grid&#58;</font>
<font color='#7F7E6F'>&#62; Resource Specific Issue on BNL_ATLAS_1 ISSUE=8249 PROJ=71 *OSG GOC</font>
<font color='#7F7E6F'>&#62; Ticket&#58;*  ISSUE=8249 PROJ=71</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ------------------------------------------------------------------------</font>
--
John R. Hover
RHIC/Atlas Computing Facility, Bldg. 510M
Physics Department
Brookhaven National Laboratory
Upton, NY 11973
email&#58; jhover@....
tel&#58; 631-344-2858
</div><script type='text/javascript'>
        $('#show_528446646').click(function() {
            $('#detail_528446646').slideDown("normal");
            $('#show_528446646').hide();
            $('#hide_528446646').show();
        });
        $('#hide_528446646').click(function() {
            $('#detail_528446646').slideUp();
            $('#hide_528446646').hide();
            $('#show_528446646').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8249#1269398467'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-24T02:41:07+00:00">Mar 24, 2010 02:41 AM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1269398467">&nbsp;</a></div><pre>We have jobs that have run successfully at BNL, however I don&#39;t think
the user/group mapping issues has been resolved yet.</pre></div><div class='update_description'><i onclick="document.location='8249#1269312606'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-23T02:50:06+00:00">Mar 23, 2010 02:50 AM UTC</time> by <b>Peter Doherty</b><a class="anchor" name="1269312606">&nbsp;</a></div><pre>But these two users don&#39;t have any unix groups in common.  Wouldn&#39;t I need to set the directory to unix perms 777 to  allow both these users to read and write to the directory?  And I generally try and avoid setting things 777 for obvious reasons.
How do groups get assigned for new users at BNL?

/DC=org/DC=doegrids/OU=People/CN=Peter Doherty (OSGMM) 83457
uid=95767(grd25767) gid=69954(nebiogrd) groups=69954(nebiogrd)

/DC=org/DC=doegrids/OU=People/CN=Peter Doherty 869198
uid=94733(grd24733) gid=69935(sbgrid) groups=8775(stargrid),
69935(sbgrid)

Thanks,
Peter

On Mar 22, 2010, at 20&#58;20 , Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8249#1269303606'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-23T00:20:06+00:00">Mar 23, 2010 12:20 AM UTC</time> by <b>USATLAS</b><a class="anchor" name="1269303606">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #15726]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; Xin Zhao
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by xinzhao
Subject&#58; Open Science Grid&#58; Resource Specific Issue on BNL_ATLAS_1 ISSUE=8249 PROJ=71
OSG GOC Ticket&#58; ISSUE=8249 PROJ=71

------------------------------------------------------------------------------

Hi Peter,

BNL uses GUMS, and it assigns each person in the same VO to different pool
account. Can you change the write permission to group writable for the
directories and files that you want all people from your VO to share ?

Cheers,
Xin</pre></div><div class='update_description'><i onclick="document.location='8249#1269297126'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-22T22:32:06+00:00">Mar 22, 2010 10:32 PM UTC</time> by <b>Peter Doherty</b><a class="anchor" name="1269297126">&nbsp;</a></div><pre>So I&#39;m not clear how BNL is hoping to handle users from our VO.  Is
BNL using GUMS?
Ideally we&#39;d like all of the users who are in the SBGrid VO to get
mapped to the same group account.  That way we can create $OSG_APP/
sbgrid and $OSG_DATA/sbgrid and have all files in there readable and
writtable by users of our VO.
If this isn&#39;t possible than we&#39;d like it handled at the group level.

Currently our OSGMM certificate is being mapped like this&#58;

/DC=org/DC=doegrids/OU=People/CN=Peter Doherty (OSGMM) 83457
grd25767
uid=95767(grd25767) gid=69954(nebiogrd) groups=69954(nebiogrd)

My personal cert like this&#58;

/DC=org/DC=doegrids/OU=People/CN=Peter Doherty 869198
grd24733
uid=94733(grd24733) gid=69935(sbgrid) groups=8775(stargrid),
69935(sbgrid)

And Ian Stokes-Rees&#58;
grd24734
/DC=org/DC=doegrids/OU=People/CN=Ian Stokes-Rees 411174
uid=94734(grd24734) gid=69954(nebiogrd) groups=8775(stargrid),
69954(nebiogrd)

It&#39;s just not consistent, so directories are being created and files
created that aren&#39;t accessible by the other users.
for example, in $OSG_APP&#58;
drwxr-xr-x  12 grd24734   nebiogrd    2048 Feb 21 22&#58;53 sbgrid
drwxrwxr-x  12 grd24733   nebiogrd    2048 Dec 17 10&#58;38 sbgrid-nebiogrd
drwxr-xr-x   2 grd25767   nebiogrd    2048 Oct 27 06&#58;41 nebiogrid

Will I have to check with BNL every time a new user joins the VO to
<div id='show_1001776161' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1001776161'>see if their DN is getting mapped to the right account? I thought GUMS
was supposed to keep us from this headache.

Thanks,
Peter

On Mar 16, 2010, at 11&#58;00 , Ian Stokes-Rees wrote&#58;

<font color='#7F7E6F'>&#62; Elizabeth, OIM entry was wrong.  I&#39;ve updated it.  The correct VOMS</font>
<font color='#7F7E6F'>&#62; address is&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//hpc.sbgrid.org&#58;8443/voms/SBGrid/' target='_blank' rel='nofollow'>https&#58;//hpc.sbgrid.org&#58;8443/voms/SBGrid/</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Hope that helps.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Ian</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On 3/16/10 12&#58;59 AM, Open Science Grid FootPrints wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1001776161').click(function() {
            $('#detail_1001776161').slideDown("normal");
            $('#show_1001776161').hide();
            $('#hide_1001776161').show();
        });
        $('#hide_1001776161').click(function() {
            $('#detail_1001776161').slideUp();
            $('#hide_1001776161').hide();
            $('#show_1001776161').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8249#1268846746'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-17T17:25:46+00:00">Mar 17, 2010 05:25 PM UTC</time> by <b>echism</b><a class="anchor" name="1268846746">&nbsp;</a></div><pre>Ian,

I&#39;ve CC&#39;d Peter in the meantime while I&#39;m working on this. Please feel free to have us CC anyone you like, and yes, in the future you will probably be able to do that yourself, but for now, we are in a change freeze with our production systems.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='8249#1268846406'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-17T17:20:06+00:00">Mar 17, 2010 05:20 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1268846406">&nbsp;</a></div><pre>I&#39;m learning new things about GOC ticketing system all the time.

Please add Peter Doherty &#60;doherty@....&#62; to this ticket as
a CC&#39;er, and if there is any way I can do this automatically (when the
ticket is created, afterwards, by email, or by the web i/f), please let
me know.</pre></div><div class='update_description'><i onclick="document.location='8249#1268844066'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-17T16:41:06+00:00">Mar 17, 2010 04:41 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1268844066">&nbsp;</a></div><pre>Elizabeth,

IIRC, ACs are limited to 24hours, whereas the main proxy cert can have
an arbitrary lifetime (up to the expiry of the source cert).  The
default, if -valid isn&#39;t specified, is 24 hours, in which case both will
have the same expiry time.

Expired ACs aren&#39;t supposed to matter -- the only thing that is
important is that they exist and are associated with/attached to a valid
proxy cert.

But of course you should confirm if my understanding is correct, since
we are clearly having some problem at BNL, and it appears to be tied in
with VO binding of user proxy cert, which is often (but not always)
based on ACs from voms-proxy-init.

Ian</pre></div><div class='update_description'><i onclick="document.location='8249#1268843166'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-17T16:26:06+00:00">Mar 17, 2010 04:26 PM UTC</time> by <b>echism</b><a class="anchor" name="1268843166">&nbsp;</a></div><pre>Ian,

That does look valid, although I will admit it is the first time I&#39;ve
seen differing time stamps in one proxy. I thought the proxy wasn&#39;t
generating properly the first time because the extension timeleft
field had no time left, which I have seen when the proxy failed to
generate properly. Are you seeing the same symptom with this proxy? I
am currently trying a few things to reproduce that scenario, I&#39;ll let
you know what I find out and I&#39;ll get you my public key if I don&#39;t
have any luck with that.

Thank you,
Elizabeth

On Mar 17, 2010, at 11&#58;26 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8249#1268841727'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-17T16:02:07+00:00">Mar 17, 2010 04:02 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1268841727">&nbsp;</a></div><pre>Elizabeth, an additional thought on the theme of&#58;

On 3/17/10 11&#58;26 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; If you want access to our system directly, I can give you</font>
<font color='#7F7E6F'>&#62; ssh access to the osgsupport@.... account.  Just send me a</font>
<font color='#7F7E6F'>&#62; public ssh key.</font>

... you may be able to gsi-ssh on port 1975 if you have a cert with a VO
that we support (although presently I don&#39;t think we support any VOs
except our own on that machine), using&#58;

yourhost $ gsissh -p 1975 voname@....

&#34;voname&#34; would be the lowercase version of whatever VO you belong to
that we support.

Peter --

I don&#39;t suggest you do this now, but is there some not-too-difficult way
to enable gsi-ssh access for users from many VOs but not accept jobs?

A variation on this, since one day we may be able to return to my
original vision for the experimental cluster, is to ask if there is some
way to enable all VOs but require them to include a &#34;magic&#34; token in
their job classads to run at our site.  Something like&#58;

+GridDebug = True

with the idea that users who explicitly wanted to test their jobs could
submit them to our cluster, then gsi-ssh in and watch them run, and we
would provide some scripts to mimic (as closely as possible) the
execution environment prior to the start of a job.

Ian</pre></div><div class='update_description'><i onclick="document.location='8249#1268839566'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-17T15:26:06+00:00">Mar 17, 2010 03:26 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1268839566">&nbsp;</a></div><pre>Elizabeth,

Thanks for your help with this.

On 3/17/10 10&#58;48 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; voms-proxy-init -debug</font>

AFAIK, it generates just fine.  That said, in the past it was true that
we had some version of voms-proxy-init that created ACs that could
confuse some systems.  This was a short-lived bug in a VDT distribution.
This was a year or more ago, however, and I was fairly sure that had
been fixed.

Below is a trace of voms-proxy-init and voms-proxy-info, which you may
find helpful.  If you want access to our system directly, I can give you
ssh access to the osgsupport@.... account.  Just send me a
public ssh key.

Ian

$ voms-proxy-init -debug -valid 300&#58;00 -voms SBGrid&#58;/SBGrid

Detected Globus version&#58; 22
Unspecified proxy version, settling on Globus version&#58; 2
Number of bits in key &#58;1024
Using configuration file /opt/osg-shared/client-1.0/glite/etc/vomses
Using configuration file /opt/osg-shared/client-1.0/glite/etc/vomses
Files being used&#58;
CA certificate file&#58; none
Trusted certificates directory &#58;
/opt/osg-shared/client-1.0/globus/TRUSTED_CA
Proxy certificate file &#58; /tmp/x509up_u9490
User certificate file&#58;
/opt/osg-shared/home/site/webportal/.globus/usercert.pem
User key file&#58; /opt/osg-shared/home/site/webportal/.globus/userkey.pem
<div id='show_1653351037' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1653351037'>Output to /tmp/x509up_u9490
Enter GRID pass phrase&#58;
Your identity&#58; /DC=org/DC=doegrids/OU=People/CN=Ian Stokes-Rees 411174
Using configuration file /opt/osg-shared/client-1.0/glite/etc/vomses
Using configuration file /opt/osg-shared/client-1.0/glite/etc/vomses
Using configuration file /opt/osg-shared/client-1.0/glite/etc/vomses
Using configuration file /opt/osg-shared/client-1.0/glite/etc/vomses
Using configuration file /opt/osg-shared/client-1.0/glite/etc/vomses
Using configuration file /opt/osg-shared/client-1.0/glite/etc/vomses
Creating temporary proxy to /tmp/tmp_x509up_u9490_28931 ......++++++
.++++++
Done
Contacting  hpc.sbgrid.org&#58;15002
[/DC=org/DC=doegrids/OU=Services/CN=hpc.sbgrid.org] &#34;SBGrid&#34; Done

Warning&#58; hpc.sbgrid.org&#58;15002&#58; The validity of this VOMS AC in your
proxy is shortened to 86400 seconds!

Creating proxy to /tmp/x509up_u9490 ..................................++++++
..++++++
Done
Your proxy is valid until Mon Mar 29 23&#58;22&#58;02 2010

$ voms-proxy-info -debug -all

WARNING&#58; Unable to verify signature! Server certificate possibly not
installed.
Error&#58; Cannot verify AC signature!
subject   &#58; /DC=org/DC=doegrids/OU=People/CN=Ian Stokes-Rees 411174/CN=proxy
issuer    &#58; /DC=org/DC=doegrids/OU=People/CN=Ian Stokes-Rees 411174
identity  &#58; /DC=org/DC=doegrids/OU=People/CN=Ian Stokes-Rees 411174
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /tmp/x509up_u9490
timeleft  &#58; 299&#58;59&#58;45
=== VO SBGrid extension information ===
VO        &#58; SBGrid
subject   &#58; /DC=org/DC=doegrids/OU=People/CN=Ian Stokes-Rees 411174
issuer    &#58; /DC=org/DC=doegrids/OU=Services/CN=hpc.sbgrid.org
attribute &#58; /SBGrid/Role=NULL/Capability=NULL
attribute &#58; /SBGrid/CoreTeam/Role=NULL/Capability=NULL
timeleft  &#58; 23&#58;59&#58;45
uri       &#58; hpc.sbgrid.org&#58;15002
</div><script type='text/javascript'>
        $('#show_1653351037').click(function() {
            $('#detail_1653351037').slideDown("normal");
            $('#show_1653351037').hide();
            $('#hide_1653351037').show();
        });
        $('#hide_1653351037').click(function() {
            $('#detail_1653351037').slideUp();
            $('#hide_1653351037').hide();
            $('#show_1653351037').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8249#1268837332'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-17T14:48:52+00:00">Mar 17, 2010 02:48 PM UTC</time> by <b>echism</b><a class="anchor" name="1268837332">&nbsp;</a></div><pre>Ian,

Sorry for the delay, please run voms-proxy-init -debug if your proxy is still not generating properly, that should give us some clues.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='8249#1268751727'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-16T15:02:07+00:00">Mar 16, 2010 03:02 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1268751727">&nbsp;</a></div><pre>Elizabeth, OIM entry was wrong.  I&#39;ve updated it.  The correct VOMS
address is&#58;

<a href='https&#58;//hpc.sbgrid.org&#58;8443/voms/SBGrid/' target='_blank' rel='nofollow'>https&#58;//hpc.sbgrid.org&#58;8443/voms/SBGrid/</a>

Hope that helps.

Ian

On 3/16/10 12&#58;59 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8249#1268715546'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-16T04:59:06+00:00">Mar 16, 2010 04:59 AM UTC</time> by <b>echism</b><a class="anchor" name="1268715546">&nbsp;</a></div><pre>Ian,

Unless the address in OIM is wrong, it is absolutely down. I&#39;d do a
vdt-control --restart for tomcat, apache and voms, make sure they turn
on without errors, and then check the firewall (or firewalls) for
8443/15001 if the restart doesn&#39;t resolve the issue.

Elizabeth

On Mar 16, 2010, at 12&#58;44 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8249#1268714645'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-16T04:44:05+00:00">Mar 16, 2010 04:44 AM UTC</time> by <b>echism</b><a class="anchor" name="1268714645">&nbsp;</a></div><pre>Ian,

I think your voms is refusing connections... I was unable to load the
page. Will try again in a minute.

Elizabeth

On Mar 16, 2010, at 12&#58;23 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8249#1268713387'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-16T04:23:07+00:00">Mar 16, 2010 04:23 AM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1268713387">&nbsp;</a></div><pre>I&#39;ve added in some extra debugging information and I&#39;ve discovered that
BNL is still not respecting VOMS VO mapping .  My most recent rsync job
has run as&#58;

uid=94734(grd24734) gid=69954(nebiogrd)
groups=8775(stargrid),69954(nebiogrd)

This job was run around 11&#58;30pm EDT on 2010-03-15 using jobmanager-fork.

This has now created $OSG_{APP,DATA}/sbgrid (owned by nebiogrid group).
My proxy cert details are below.  Please advise how best to resolve this.

Ian

$ voms-proxy-info --all
WARNING&#58; Unable to verify signature! Server certificate possibly not
installed.
Error&#58; Cannot verify AC signature!
subject   &#58; /DC=org/DC=doegrids/OU=People/CN=Ian Stokes-Rees 411174/CN=proxy
issuer    &#58; /DC=org/DC=doegrids/OU=People/CN=Ian Stokes-Rees 411174
identity  &#58; /DC=org/DC=doegrids/OU=People/CN=Ian Stokes-Rees 411174
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /tmp/x509up_u9490
timeleft  &#58; 121&#58;07&#58;59
=== VO SBGrid extension information ===
VO        &#58; SBGrid
subject   &#58; /DC=org/DC=doegrids/OU=People/CN=Ian Stokes-Rees 411174
issuer    &#58; /DC=org/DC=doegrids/OU=Services/CN=hpc.sbgrid.org
attribute &#58; /SBGrid/Role=NULL/Capability=NULL
attribute &#58; /SBGrid/CoreTeam/Role=NULL/Capability=NULL
timeleft  &#58; 0&#58;00&#58;00
uri       &#58; hpc.sbgrid.org&#58;15002</pre></div><div class='update_description'><i onclick="document.location='8249#1268692506'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-15T22:35:06+00:00">Mar 15, 2010 10:35 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1268692506">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #15726]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; Xin Zhao
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by xinzhao
Subject&#58; Open Science Grid&#58; Resource Specific Issue on BNL_ATLAS_1 ISSUE=8249 PROJ=71
OSG GOC Ticket&#58; ISSUE=8249 PROJ=71

------------------------------------------------------------------------------

The .delme file is removed as well.

Cheers,
Xin</pre></div><div class='update_description'><i onclick="document.location='8249#1268688186'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-15T21:23:06+00:00">Mar 15, 2010 09:23 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1268688186">&nbsp;</a></div><pre>It would help if the .delme file could also be deleted from $OSG_APP and
$OSG_DATA.  I&#39;ll rename this to .delme.sbgrid in the future to avoid
collisions with other VOs that may do the same test to check files can
be written to a shared space.

Ian.</pre></div><div class='update_description'><i onclick="document.location='8249#1268687827'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-15T21:17:07+00:00">Mar 15, 2010 09:17 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1268687827">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #15726]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; Nobody in particular
Status&#58; new
Priority&#58; None
Transaction&#58; Correspondence added by xinzhao
Subject&#58; Open Science Grid&#58; Resource Specific Issue on BNL_ATLAS_1 ISSUE=8249 PROJ=71
OSG GOC Ticket&#58; ISSUE=8249 PROJ=71

------------------------------------------------------------------------------

Hello,

I renamed those sbgrid dirs to sbgrid-nebiogrd, so you can create your own
sbgrid dir again.

Cheers,
Xin</pre></div><div class='update_description'><i onclick="document.location='8249#1268686026'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-15T20:47:06+00:00">Mar 15, 2010 08:47 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1268686026">&nbsp;</a></div><pre>Subject&#58; AutoReply&#58; Open Science Grid&#58; Resource Specific Issue on BNL_ATLAS_1 ISSUE=8249 PROJ=71

Greetings,

This message has been automatically generated in response to the
creation of a support ticket you submitted regarding&#58;

&#34;Open Science Grid&#58; Resource Specific Issue on BNL_ATLAS_1 ISSUE=8249 PROJ=71&#34;

A summary of your ticket, which has been assigned a request ID of
[rt.racf.bnl.gov #15726], appears below.

To modify your ticket or add follow-ups, simply reply to this email
message.  Please DO NOT change the subject of this e-mail when
replying or you might generate a new ticket.

Thank you,
RT-RACF@....

------------------------------------------------------------------------------

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='8249#1268685930'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-15T20:45:30+00:00">Mar 15, 2010 08:45 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1268685930">&nbsp;</a></div><pre>We appear to be having problems again at BNL with authentication.  I think this is related to an old ticket, 7748.  It appears that when the authentication was mixed up, one of our users who is in both SBGrid and NEBioGrid created directories&#58;

$OSG_APP/sbgrid

and

$OSG_DATA/sbgrid

however these are now owned by the nebiogrid group, so when we attempt to rsync data there (see trace below), we get permission denied.  The user doing the rsync is in the sbgrid group and not allowed to write to this directory.

From&#58;
$ ls -Flad /usatlas/OSG/sbgrid /usatlas/prodjob/share/sbgrid
drwxrwxr-x  12 grd24733   nebiogrd    2048 Dec 17 10&#58;38 sbgrid/

ACTION REQUESTED&#58; Please could you either delete these sbgrid directories completely or chown -R them to be in the sbgrid group.

Regards,

Ian

Details on errors&#58;

When attempting to rsync data I get the following errors&#58;

1268672198 gridgk01.racf.bnl.gov BNL-ATLAS
RSYNC 1268672198 Mon Mar 15 12&#58;56&#58;38 EDT 2010
rsync&#58; recv_generator&#58; mkdir &#34;/direct/usatlas+prodjob/share/sbgrid/biodb/scopclean-bz2&#34; failed&#58; Permission denied (13)
rsync&#58; stat &#34;/direct/usatlas+prodjob/share/sbgrid/biodb/scopclean-bz2&#34; failed&#58; No such file or directory (2)
rsync&#58; mkstemp &#34;/direct/usatlas+prodjob/share/sbgrid/..verified.Dj5vvq&#34; failed&#58; Permission denied (13)
rsync&#58; mkstemp &#34;/direct/usatlas+prodjob/share/sbgrid/..verified.wn.s18QAh&#34; failed&#58; Permission denied (13)
rsync&#58; mkstemp &#34;/direct/usatlas+prodjob/share/sbgrid/biodb/scopclean-bz2/.00.tar.bz2.lARiG8&#34; failed&#58; No such file or directory (2)
rsync&#58; mkstemp &#34;/direct/usatlas+prodjob/share/sbgrid/biodb/scopclean-bz2/.01.tar.bz2.M2P9MZ&#34; failed&#58; No such file or directory (2)

&#60;snip&#62;

<div id='show_1446350367' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1446350367'>rsync&#58; mkstemp &#34;/direct/usatlas+prodjob/share/sbgrid/biodb/scopclean100-bz2/.957.tar.bz2.B87VQm&#34; failed&#58; Permission denied (13)
rsync&#58; mkstemp &#34;/direct/usatlas+prodjob/share/sbgrid/biodb/scopclean100-bz2/.958.tar.bz2.YwrqvU&#34; failed&#58; Permission denied (13)
rsync&#58; recv_generator&#58; mkdir &#34;/direct/usatlas+prodjob/share/sbgrid/biodb/scopclean-bz2&#34; failed&#58; Permission denied (13)
rsync&#58; stat &#34;/direct/usatlas+prodjob/share/sbgrid/biodb/scopclean-bz2&#34; failed&#58; No such file or directory (2)
rsync error&#58; some files could not be transferred (code 23) at main.c(1146)

real    2m52.015s
user    0m28.913s
sys 0m16.462s

</div><script type='text/javascript'>
        $('#show_1446350367').click(function() {
            $('#detail_1446350367').slideDown("normal");
            $('#show_1446350367').hide();
            $('#hide_1446350367').show();
        });
        $('#hide_1446350367').click(function() {
            $('#detail_1446350367').slideUp();
            $('#hide_1446350367').hide();
            $('#show_1446350367').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F8249">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
