<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[31860] &#34;job was aborted by the user&#34;</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=31860" method="post">
<div class="page-header">
    <h3><span class="muted">31860</span> / &#34;job was aborted by the user&#34;</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Don Krieger</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Don Krieger</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-11-11</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
        <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=31860", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/31860?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/31860?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20%26%2334%3Bjob%20was%20aborted%20by%20the%20user%26%2334%3B%20ISSUE%3D31860%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='31860#1479739497'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-21T14:44:57+00:00">Nov 21, 2016 02:44 PM UTC</time><a class="anchor" name="1479739497">&nbsp;</a></div><pre>I will talk to the CRUSH admins about this, but in general, OSG allows system owners to set whatever preemption policy they prefer on their own systems. We do have a few other systems configured like this, but they are smaller so they are probably less noticeable.

You can add a few things to your requirements to make sure jobs are not retried on the same site again.  For example&#58;

requirements = TARGET.GLIDEIN_ResourceName =!= MY.MachineAttrGLIDEIN_ResourceName1 && TARGET.GLIDEIN_ResourceName =!= MY.MachineAttrGLIDEIN_ResourceName2 && TARGET.GLIDEIN_ResourceName =!= MY.MachineAttrGLIDEIN_ResourceName3 && TARGET.GLIDEIN_ResourceName =!= MY.MachineAttrGLIDEIN_ResourceName4

That will prevent the job from going back to a site for 4 restarts.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='31860#1479732250'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-21T12:44:10+00:00">Nov 21, 2016 12:44 PM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1479732250">&nbsp;</a></div><pre>I have blocked my jobs from running on CRUSH-OSG cores and the problem has resolved.
I’ve reviewed more of the logs from those failures.
In each of these spot check cases, my job was suspended before completion while running on a CRUSH-OSG, was then restarted 5-25 minutes later on another CRUSH-OSG core, suspended again, …

I have not seen this behavior with any other stakeholder but will look for it now.
I presume it’s the result of repeated preemption as you suggest.
Is there a way to direct condor to avoid restarting a job on a group of IP addresses or machine names if it is preempted on one of them?
Should I post this question to the HTCondor list?

Thanks - Don</pre></div><div class='update_description'><i onclick="document.location='31860#1479338230'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-16T23:17:10+00:00">Nov 16, 2016 11:17 PM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1479338230">&nbsp;</a></div><pre>This problem is continuing.  Below is a log from a jobs which was apparently preempted from one of CRUSH-OSG&#39;s IP addresses, restarted on another, and the preempted from there.  Can you work with them to see if there&#39;s some adjustment they can make so that this problem is reduced.  My jobs typically run in less than an hour so I haven&#39;t seen much preemption, although I do see something on Comet which looks similar.  I wonder if the setup is the same.

000 (65077915.000.000) 11/16 10&#58;43&#58;50 Job submitted from host&#58; &#60;129.79.53.198&#58;9615?addrs=129.79.53.198-9615&noUDP&sock=41870_f3e0&#62;
...
001 (65077915.000.000) 11/16 15&#58;51&#58;31 Job executing on host&#58; &#60;10.5.143.93&#58;28087?CCBID=129.79.53.179&#58;9711%3faddrs%3d129.79.53.179-9711#1337458&addrs=10.5.143.93-28087&noUDP&#62;
...
006 (65077915.000.000) 11/16 15&#58;52&#58;26 Image size of job updated&#58; 914388
126  -  MemoryUsage of job (MB)
128288  -  ResidentSetSize of job (KB)
...
006 (65077915.000.000) 11/16 16&#58;00&#58;17 Image size of job updated&#58; 915368
316  -  MemoryUsage of job (MB)
322564  -  ResidentSetSize of job (KB)
...
022 (65077915.000.000) 11/16 16&#58;14&#58;18 Job disconnected, attempting to reconnect
Socket between submit and execute hosts closed unexpectedly
Trying to reconnect to glidein_2_625064904@CRUSH-OSG-LIGO-10-5-143-93 &#60;10.5.143.93&#58;28087?CCBID=129.79.53.179&#58;9711%3faddrs%3d129.79.53.179-9711#1337458&addrs=10.5.143.93-28087&noUDP&#62;
...
024 (65077915.000.000) 11/16 16&#58;54&#58;18 Job reconnection failed
Job disconnected too long&#58; JobLeaseDuration (2400 seconds) expired
Can not reconnect to glidein_2_625064904@CRUSH-OSG-LIGO-10-5-143-93, rescheduling job
...
001 (65077915.000.000) 11/16 20&#58;07&#58;57 Job executing on host&#58; &#60;10.5.143.166&#58;37986?CCBID=129.79.53.179&#58;9737%3faddrs%3d129.79.53.179-9737#1355254&addrs=10.5.143.166-37986&noUDP&#62;
...
004 (65077915.000.000) 11/16 21&#58;50&#58;18 Job was evicted.
(0) Job was not checkpointed.
Usr 0 00&#58;00&#58;49, Sys 0 00&#58;00&#58;01  -  Run Remote Usage
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Run Local Usage
0  -  Run Bytes Sent By Job
132586  -  Run Bytes Received By Job
Partitionable Resources &#58;    Usage  Request Allocated
Cpus                 &#58;                 1         1
Disk (KB)            &#58;   325000   325000 177666720
Memory (MB)          &#58;      318     1700      2500
...
<div id='show_90158526' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_90158526'>009 (65077915.000.000) 11/16 21&#58;50&#58;18 Job was aborted by the user.
via condor_rm (by user donkri)
________________________________
From&#58; Krieger, Donald N.
Sent&#58; Monday, November 14, 2016 8&#58;06 PM
To&#58; &#39;osg@....&#39;
Subject&#58; RE&#58; Open Science Grid&#58; &#34;job was aborted by the user&#34; ISSUE=31860 PROJ=71

One other detail I’ve noticed.
Since this past Sunday, I’ve seen many of my jobs running on CRUSH-OSG-LIGO-nnn which I presume is a cluster at Syracuse.
This problem does date from about then.
Perhaps there is some parameter they have set which is contributing to this.
</div><script type='text/javascript'>
        $('#show_90158526').click(function() {
            $('#detail_90158526').slideDown("normal");
            $('#show_90158526').hide();
            $('#hide_90158526').show();
        });
        $('#hide_90158526').click(function() {
            $('#detail_90158526').slideUp();
            $('#hide_90158526').hide();
            $('#show_90158526').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='31860#1479209350'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-15T11:29:10+00:00">Nov 15, 2016 11:29 AM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1479209350">&nbsp;</a></div><pre>I see bursts of this problem which ramp up and down rapidly and persist for some hours.
Is it possible that when CRUSH or some other cluster begins preempting jobs to drain cores for something else, it does not stop accepting jobs first?
If that were the case, the cluster would like a sink which rapidly accepted many jobs and immediately preempted them.</pre></div><div class='update_description'><i onclick="document.location='31860#1479188499'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-15T05:41:39+00:00">Nov 15, 2016 05:41 AM UTC</time><a class="anchor" name="1479188499">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; I looks like when jobs restart, the total run time just keeps accumulating rather than resetting that clock to zero.</font>

Yes, that is generally how HTCondor presents run time. There might be other attributes in the classad, but I have to look to be sure.

<font color='#7F7E6F'>&#62; CRUSH-OSG-LIGO-nnn which I presume is a cluster at Syracuse</font>

Yes that is a good sized cluster, which gives us a lot of slots, but also preempts if they need them back. That was the site which preempted in the first graph I posted. I think you are still seeing regular preemption, but notices it more now when you had that many jobs being preempted at the same time.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='31860#1479172090'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-15T01:08:10+00:00">Nov 15, 2016 01:08 AM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1479172090">&nbsp;</a></div><pre>One other detail I’ve noticed.
Since this past Sunday, I’ve seen many of my jobs running on CRUSH-OSG-LIGO-nnn which I presume is a cluster at Syracuse.
This problem does date from about then.
Perhaps there is some parameter they have set which is contributing to this.</pre></div><div class='update_description'><i onclick="document.location='31860#1479171370'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-15T00:56:10+00:00">Nov 15, 2016 12:56 AM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1479171370">&nbsp;</a></div><pre>I run condor_q –wide –name Q2@....&#60;mailto&#58;Q2@....&#62; every 3 minutes and save the results in /dev/shm/donkri/Q2@....&#60;mailto&#58;/dev/shm/donkri/Q2@....&#62; on xd-login .
The entries look like this.  It does look like there are multiple starts, don’t you think?  I use the time stamp, e.g. 02&#58;26&#58;16 for job 65045948.0  .
I looks like when jobs restart, the total run time just keeps accumulating rather than resetting that clock to zero.

65045948.0   donkri         11/14 07&#58;32   0+02&#58;26&#58;16 R  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3p15p83_14 _EOcS1
65045949.0   donkri         11/14 07&#58;32   0+02&#58;26&#58;12 R  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3n33p83_14 _EOcS1
65045950.0   donkri         11/14 07&#58;32   0+02&#58;25&#58;58 R  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3p15p83_17 _EOcS1
65045951.0   donkri         11/14 07&#58;32   0+01&#58;27&#58;51 I  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3n33p83_11 _EOcS1
65045955.0   donkri         11/14 07&#58;32   0+01&#58;28&#58;09 I  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3p39p83_14 _EOcS1
65045956.0   donkri         11/14 07&#58;32   0+01&#58;28&#58;08 I  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3n57p83_14 _EOcS1
65045957.0   donkri         11/14 07&#58;32   0+02&#58;25&#58;50 R  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3p39p83_17 _EOcS1
65045958.0   donkri         11/14 07&#58;32   0+01&#58;27&#58;16 I  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3n57p83_11 _EOcS1
65045959.0   donkri         11/14 07&#58;32   0+02&#58;25&#58;41 R  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3p63p83_11 _EOcS1
65045960.0   donkri         11/14 07&#58;32   0+01&#58;27&#58;09 I  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3p63p83_14 _EOcS1
65045962.0   donkri         11/14 07&#58;32   0+02&#58;25&#58;33 R  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3p87p83_11 _EOcS1
65045963.0   donkri         11/14 07&#58;32   0+01&#58;26&#58;56 I  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3n9p83_23 _EOcS1
65045964.0   donkri         11/14 07&#58;32   0+01&#58;26&#58;56 I  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3n9p83_5 _EOcS1
65045965.0   donkri         11/14 07&#58;32   0+01&#58;26&#58;51 I  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3n9p83_26 _EOcS1
65045966.0   donkri         11/14 07&#58;32   0+01&#58;26&#58;40 I  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3n9p83_20 _EOcS1
65045967.0   donkri         11/14 07&#58;32   0+01&#58;26&#58;54 I  0   73.2 012_206_Start_EOcS1http.csh 012_206 p3n9p83_8 _EOcS1</pre></div><div class='update_description'><i onclick="document.location='31860#1479170253'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-15T00:37:33+00:00">Nov 15, 2016 12:37 AM UTC</time><a class="anchor" name="1479170253">&nbsp;</a></div><pre>How do you calculate the execution time? I looked at the job in your log and found&#58;

$ condor_history -file /var/lib/condor/spool.2/history.20161114T205130 65057469
ID     OWNER          SUBMITTED   RUN_TIME     ST COMPLETED   CMD
65057469.0   donkri         11/14 14&#58;18   0+02&#58;46&#58;16 X         ???  /local-scratch/donkri/012_204_S

Note that run time here is less than 3 hours. I think you are on to something about the multiple starts.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='31860#1479169390'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-15T00:23:10+00:00">Nov 15, 2016 12:23 AM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1479169390">&nbsp;</a></div><pre>I have a script which detects when jobs have run more than 3 hours and removes them.
It also detects jobs on hold every half hour and removes them.
It keeps a log and there is no period over many days when it killed many jobs.
Nevertheless, I’ve just killed it.
The problem, though, has died down dramatically on its own.
I’ve place the text of the log in the message below.
I see the condor_rm by user donkri as you describe.
My daemon detects how long a job has been running with a condor_q command.
I suppose if there’s a lot of preemption going on, the time running could exceed the 3 hours without the job actually getting much time since it’s getting restarted over and over.

???

000 (65057469.000.000) 11/14 14&#58;18&#58;27 Job submitted from host&#58; &#60;129.79.53.198&#58;9615?addrs=129.79.53.198-9615&noUDP&sock=41870_f3e0&#62;
...
001 (65057469.000.000) 11/14 15&#58;51&#58;49 Job executing on host&#58; &#60;10.5.143.42&#58;5855?CCBID=129.79.53.179&#58;9832%3faddrs%3d129.79.53.179-9832#1342849&addrs=10.5.143.42-5855&noUDP&#62;
...
006 (65057469.000.000) 11/14 15&#58;51&#58;58 Image size of job updated&#58; 20384
2  -  MemoryUsage of job (MB)
2048  -  ResidentSetSize of job (KB)
...
006 (65057469.000.000) 11/14 15&#58;56&#58;59 Image size of job updated&#58; 915080
313  -  MemoryUsage of job (MB)
320032  -  ResidentSetSize of job (KB)
...
006 (65057469.000.000) 11/14 16&#58;10&#58;34 Image size of job updated&#58; 938404
313  -  MemoryUsage of job (MB)
320032  -  ResidentSetSize of job (KB)
...
006 (65057469.000.000) 11/14 16&#58;21&#58;31 Image size of job updated&#58; 938404
313  -  MemoryUsage of job (MB)
320120  -  ResidentSetSize of job (KB)
...
006 (65057469.000.000) 11/14 16&#58;36&#58;31 Image size of job updated&#58; 938404
313  -  MemoryUsage of job (MB)
320128  -  ResidentSetSize of job (KB)
<div id='show_391489273' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_391489273'>...
006 (65057469.000.000) 11/14 16&#58;42&#58;01 Image size of job updated&#58; 938404
313  -  MemoryUsage of job (MB)
320140  -  ResidentSetSize of job (KB)
...
022 (65057469.000.000) 11/14 16&#58;55&#58;54 Job disconnected, attempting to reconnect
Socket between submit and execute hosts closed unexpectedly
Trying to reconnect to glidein_2_49851450@CRUSH-OSG-LIGO-10-5-143-42 &#60;10.5.143.42&#58;5855?CCBID=129.79.53.179&#58;9832%3faddrs%3d129.79.53.179-9832#1342849&addrs=10.5.143.42-5855&noUDP&#62;
...
024 (65057469.000.000) 11/14 17&#58;35&#58;54 Job reconnection failed
Job disconnected too long&#58; JobLeaseDuration (2400 seconds) expired
Can not reconnect to glidein_2_49851450@CRUSH-OSG-LIGO-10-5-143-42, rescheduling job
...
001 (65057469.000.000) 11/14 17&#58;36&#58;42 Job executing on host&#58; &#60;10.5.143.109&#58;64855?CCBID=129.79.53.179&#58;9789%3faddrs%3d129.79.53.179-9789#1336375&addrs=10.5.143.109-64855&noUDP&#62;
...
004 (65057469.000.000) 11/14 18&#58;36&#58;41 Job was evicted.
(0) Job was not checkpointed.
Usr 0 00&#58;48&#58;13, Sys 0 00&#58;00&#58;46  -  Run Remote Usage
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Run Local Usage
0  -  Run Bytes Sent By Job
132586  -  Run Bytes Received By Job
Partitionable Resources &#58;    Usage  Request Allocated
Cpus                 &#58;                 1         1
Disk (KB)            &#58;   750000   750000 185288392
Memory (MB)          &#58;      318     1700      2500
...
009 (65057469.000.000) 11/14 18&#58;36&#58;41 Job was aborted by the user.
via condor_rm (by user donkri)
...
</div><script type='text/javascript'>
        $('#show_391489273').click(function() {
            $('#detail_391489273').slideDown("normal");
            $('#show_391489273').hide();
            $('#hide_391489273').show();
        });
        $('#hide_391489273').click(function() {
            $('#detail_391489273').slideUp();
            $('#hide_391489273').hide();
            $('#show_391489273').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='31860#1479166287'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-14T23:31:27+00:00">Nov 14, 2016 11:31 PM UTC</time><a class="anchor" name="1479166287">&nbsp;</a></div><pre>Don,

That file does not exist anymore, but I looked at the other logs in that directory. There are a lot that has the error together with condor_rm, like&#58;

009 (65039935.000.000) 11/14 20&#58;45&#58;22 Job was aborted by the user.
via condor_rm (by user donkri)

That looks like it happened on the submit host and not the execution host. Is this the problem, or did you remove the jobs yourself?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='31860#1479157516'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-14T21:05:16+00:00">Nov 14, 2016 09:05 PM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1479157516">&nbsp;</a></div><pre>/home/donkri/SCR/012_205_Start_EOcS5/n21p39p35_13.log</pre></div><div class='update_description'><i onclick="document.location='31860#1479157251'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-14T21:00:51+00:00">Nov 14, 2016 09:00 PM UTC</time><a class="anchor" name="1479157251">&nbsp;</a></div><pre>Don,

The attachment didn&#39;t make it. Can you point me to one of the logs? A path on the filesystem is enough.

Thanks,
Mats

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='31860#1479156791'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-14T20:53:11+00:00">Nov 14, 2016 08:53 PM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1479156791">&nbsp;</a></div><pre>This problem has reappeared.
I&#39;ve attached a current log file.

Best - Don
 

Don Krieger, Ph.D.
Department of Neurological Surgery
University of Pittsburgh
(412)648-9654 Office
(412)521-4431 Cell/Text

<font color='#7F7E6F'>&#62; -----Original Message-----</font>
<font color='#7F7E6F'>&#62; From&#58; Krieger, Donald N.</font>
<font color='#7F7E6F'>&#62; Sent&#58; Friday, November 11, 2016 4&#58;15 PM</font>
<font color='#7F7E6F'>&#62; To&#58; osg@....</font>
<font color='#7F7E6F'>&#62; Subject&#58; RE&#58; Open Science Grid&#58; &#34;job was aborted by the user&#34; ISSUE=31860</font>
<font color='#7F7E6F'>&#62; PROJ=71</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I see jobs starting up and they appear to be running normally.</font>
<font color='#7F7E6F'>&#62; Is the message I received correct when a job gets pre-empted, i.e. &#34;job was</font>
<font color='#7F7E6F'>&#62; aborted by the user&#34;   ?</font>
<font color='#7F7E6F'>&#62; If it&#39;s all normal, that&#39;s great.</font>
<font color='#7F7E6F'>&#62; Thanks for looking and posting back. - Don</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ________________________________________</font>
<font color='#7F7E6F'>&#62; From&#58; Open Science Grid FootPrints [osg@....]</font>
<font color='#7F7E6F'>&#62; Sent&#58; Friday, November 11, 2016 3&#58;01 PM</font>
<font color='#7F7E6F'>&#62; To&#58; Krieger, Donald N.</font>
<font color='#7F7E6F'>&#62; Subject&#58; Open Science Grid&#58; &#34;job was aborted by the user&#34; ISSUE=31860</font>
<font color='#7F7E6F'>&#62; PROJ=71</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='31860#1479131813'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-14T13:56:53+00:00">Nov 14, 2016 01:56 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1479131813">&nbsp;</a></div><pre>Thank you for informing us that this issue has been resolved. I will close this ticket.  Please submit problems, requests, and questions at&#58; <a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a> OSG Grid Operations Center goc@...., 317-278-9699 Visit the OSG Operations Page&#58; <a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='31860#1478901729'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T22:02:09+00:00">Nov 11, 2016 10:02 PM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1478901729">&nbsp;</a></div><pre>Ok then – end of story – thank you.

Don</pre></div><div class='update_description'><i onclick="document.location='31860#1478900586'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T21:43:06+00:00">Nov 11, 2016 09:43 PM UTC</time><a class="anchor" name="1478900586">&nbsp;</a></div><pre>The error depends on how the site implements preemption. But yeah, I think this was preemption.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='31860#1478899030'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T21:17:10+00:00">Nov 11, 2016 09:17 PM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1478899030">&nbsp;</a></div><pre>I see jobs starting up and they appear to be running normally.
Is the message I received correct when a job gets pre-empted, i.e. &#34;job was aborted by the user&#34;   ?
If it&#39;s all normal, that&#39;s great.
Thanks for looking and posting back. - Don</pre></div><div class='update_description'><i onclick="document.location='31860#1478895740'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T20:22:20+00:00">Nov 11, 2016 08:22 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1478895740">&nbsp;</a></div><pre>Timing is right on the pre-emption event and Don&#39;s mail.
&#34;Just &#39;cause it free doesn&#39;t mean it doesn&#39;t cost anything&#34;
De-assigning myself as I&#39;m off for some vacation.
S</pre></div><div class='update_description'><i onclick="document.location='31860#1478894492'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T20:01:32+00:00">Nov 11, 2016 08:01 PM UTC</time><a class="anchor" name="1478894492">&nbsp;</a></div><pre>Don,

I peeked at a set of your jobs and did not see any problems. Do you still see this? If it happened last night, it was probably a large preemption event in which we lost thousands of slots in a short time. See <a href='http&#58;//osg-flock.grid.iu.edu/monitoring/condor/display.png' target='_blank' rel='nofollow'>http&#58;//osg-flock.grid.iu.edu/monitoring/condor/display.png</a>

Please let me know if I need to look more at this.

Thanks,
Mats

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='31860#1478890500'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T18:55:00+00:00">Nov 11, 2016 06:55 PM UTC</time> by <b>echism</b><a class="anchor" name="1478890500">&nbsp;</a></div><pre>Scott,

Do you have any insights? I&#39;m also re-assigning to Chris as my vacation starts this weekend.

Thank you</pre></div><div class='update_description'><i onclick="document.location='31860#1478887689'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T18:08:09+00:00">Nov 11, 2016 06:08 PM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1478887689">&nbsp;</a></div><pre>This problem is highly reminiscent of problems which have occurred I think twice before.
Mats Rynge and I think Scott Teige were involved in fixing it then if it’s the same.

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='31860#1478859977'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T10:26:17+00:00">Nov 11, 2016 10:26 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1478859977">&nbsp;</a></div><pre>Almost all my jobs running on the OSG are failing with the message &#34;Job was aborted by the user&#34;
This began about 12 hours ago.

by Don Krieger (guest)</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F31860">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 31860});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
