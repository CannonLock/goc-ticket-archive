<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[31952] Merged with ticket 31950</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=31952" method="post">
<div class="page-header">
    <h3><span class="muted">31952</span> / Merged with ticket 31950</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Evgeniy Alexeevich Kuznetsov</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Evgeniy Alexeevich Kuznetsov</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Software Triage</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-12-12</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/31952", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/31952?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/31952?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Merged%20with%20ticket%2031950%20ISSUE%3D31952%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='31952#1481551059'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-12T13:57:39+00:00">Dec 12, 2016 01:57 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1481551059">&nbsp;</a></div><pre>Thank you for informing us that this issue has been resolved. I will close this ticket.  Please submit problems, requests, and questions at&#58; <a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a> OSG Grid Operations Center goc@...., 317-278-9699 Visit the OSG Operations Page&#58; <a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='31952#1481363969'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-10T09:59:29+00:00">Dec 10, 2016 09:59 AM UTC</time><a class="anchor" name="1481363969">&nbsp;</a></div><pre>Brian,
I removed the settings &#39;eval_set_remote_queue = star; &#92;&#39; and &#39;Requirements = target.x509UserProxyVOName =?= &#34;star&#34;; &#92;&#39;
from JOB_ROUTER_ENTRIES and typed option &#39;set_default_queue = &#34;star&#34;; &#92;&#39;

So all jobs come to &#39;star&#39; queue as default. It works and it&#39;s enough for us for a while.
If there will be another VO required to add to the pool I&#39;ll open a new ticket.
For now this ticket can be closed.
Thank you very much for assistance.
Evgeniy.

by /C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov</pre></div><div class='update_description'><i onclick="document.location='31952#1481038871'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-06T15:41:11+00:00">Dec 6, 2016 03:41 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1481038871">&nbsp;</a></div><pre>Evgeniy,

A few things&#58;

- I notice that you&#39;re specifying &#39;-q star@....&#39; but in your
job route, you&#39;re specifying &#39;star&#39;. Could you try submitting the job
with something along the lines of &#39;qsub -q star&#39; as the star0001 user?
- What does &#96;which qsub&#96; return?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31952#1481012853'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-06T08:27:33+00:00">Dec 6, 2016 08:27 AM UTC</time><a class="anchor" name="1481012853">&nbsp;</a></div><pre>Brian,
I use the following command on CE to submit a similar qsub job &#58;
+++++++++++++++
bash-4.1$ qsub -A accounting_star001 -N EK_Test_star -o osgce.jinr.ru&#58;/home/star001 -q star@.... -u star001 check_run.bash
22278444.lxbsrv01.jinr.ru
+++++++++++++++
The command is from this manual <a href='http&#58;//docs.adaptivecomputing.com/torque/4-1-3/help.htm#topics/commands/qsub.htm' target='_blank' rel='nofollow'>http&#58;//docs.adaptivecomputing.com/torque/4-1-3/help.htm#topics/commands/qsub.htm</a>
check_run.bash is a simple script&#58;
bash-4.1$ cat check_run.bash
#!/bin/bash

/bin/env
sleep 10
++++++++++++++++++++
So I&#39;ve got a job id 22278444. Here is log ON pbs server lxbsrv01.jinr.ru&#58;

12/05/2016 17&#58;59&#58;40;0100;PBS_Server;Job;22278444.lxbsrv01.jinr.ru;enqueuing into star, state 1 hop 1
12/05/2016 17&#58;59&#58;40;0008;PBS_Server;Job;22278444.lxbsrv01.jinr.ru;Job Queued at request of star001@...., owner = star001@...., job name = EK_Test_star, queue = star
12/05/2016 18&#58;00&#58;47;0008;PBS_Server;Job;22278444.lxbsrv01.jinr.ru;Job Run at request of root@....
12/05/2016 18&#58;00&#58;47;000d;PBS_Server;Job;22278444.lxbsrv01.jinr.ru;Not sending email&#58; User does not want mail of this type.
12/05/2016 18&#58;00&#58;51;000d;PBS_Server;Job;22278444.lxbsrv01.jinr.ru;Not sending email&#58; User does not want mail of this type.
12/05/2016 18&#58;00&#58;51;0010;PBS_Server;Job;22278444.lxbsrv01.jinr.ru;Exit_status=0 resources_used.cput=00&#58;00&#58;00 resources_used.mem=0kb resources_used.vmem=0kb resources_used.walltime=00&#58;00&#58;04
12/05/2016 18&#58;03&#58;52;0100;PBS_Server;Job;22278444.lxbsrv01.jinr.ru;dequeuing from star, state COMPLETE
++++++++++++++++++++++++++++++++
As I understand it&#39;s all fine in manual submitting. The pbs gets the job form &#34;star001&#34; user and submitts it to &#34;star&#34; queue.
But while using &#39;condor_ce_trace --debug osgce.jinr.ru&#39; command as user &#34;star001&#34; there is
&#39;(stderr&#58;qsub&#58; Unknown queue MSG=cannot locate queue-Error from qsub&#58; -)&#39; in GridmanagerLog.star001.

So the CE has wrong settings for queue somewhere?

by /C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov</pre></div><div class='update_description'><i onclick="document.location='31952#1480693634'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-02T15:47:14+00:00">Dec 2, 2016 03:47 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1480693634">&nbsp;</a></div><pre>Evgeniy,

Good catch on switching the TargetUniverse. The &#34;Unknown queue
MSG=cannot locate queue&#34; is an error that PBS is returning on the CE
itself when trying to submit to your PBS cluster. The CE is just running
qsub as the &#34;star0001&#34; user requesting the &#34;star&#34; queue. Could you try
submitting a similar qsub job manually as the &#34;star0001&#34; user?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31952#1480663653'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-02T07:27:33+00:00">Dec 2, 2016 07:27 AM UTC</time><a class="anchor" name="1480663653">&nbsp;</a></div><pre>Brian,
The /var/log/condor-ce/GridmanagerLog.star001 is attached like GridmanagerLog_star001.txt .
I had to change setting &#39;TargetUniverse = 5;&#39; to &#39;TargetUniverse = 9;&#39; in JOB_ROUTER_ENTRIES so after that the file had appeared.
In PBS logs there are following correspondent messages&#58;

12/02/2016 10&#58;06&#58;52;0080;PBS_Server;Req;req_reject;Reject reply code=15020(Unknown queue MSG=cannot locate queue), aux=0, type=QueueJob, from star001@....
12/02/2016 10&#58;06&#58;55;0080;PBS_Server;Req;req_reject;Reject reply code=15020(Unknown queue MSG=cannot locate queue), aux=0, type=QueueJob, from star001@....
12/02/2016 10&#58;07&#58;04;0080;PBS_Server;Req;req_reject;Reject reply code=15020(Unknown queue MSG=cannot locate queue), aux=0, type=QueueJob, from star001@....

by /C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov</pre></div><div class='update_description'><i onclick="document.location='31952#1480609240'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-01T16:20:40+00:00">Dec 1, 2016 04:20 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1480609240">&nbsp;</a></div><pre>Evgeniy,

You can ignore the source because it looks like a bug after looking at the source. Could you attach /var/log/condor-ce/GridmanagerLog.star0001? That should give us clues about the &#34;Attempts to submit failed&#58;&#34; hold message.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31952#1480591525'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-01T11:25:25+00:00">Dec 1, 2016 11:25 AM UTC</time><a class="anchor" name="1480591525">&nbsp;</a></div><pre>Brian,
I fixed the JOB_ROUTER_ENTRIES,  it in my prevoius update, took off last &#39;&#92;&#39;,  as it now the only route.

bash-4.1$ condor_ping -verbose -name osgce.jinr.ru -pool osgce.jinr.ru&#58;9619 WRITE
Remote Version&#58;              $CondorVersion&#58; 8.4.9 Sep 29 2016 $
Local  Version&#58;              $CondorVersion&#58; 8.4.9 Sep 29 2016 $
Session ID&#58;                  osgce&#58;249082&#58;1480591134&#58;15
Instruction&#58;                 WRITE
Command&#58;                     60021
Encryption&#58;                  none
Integrity&#58;                   MD5
Authenticated using&#58;         FS
All authentication methods&#58;  FS,GSI
Remote Mapping&#58;              star001@....
Authorized&#58;                  TRUE

by /C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov</pre></div><div class='update_description'><i onclick="document.location='31952#1480588358'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-01T10:32:38+00:00">Dec 1, 2016 10:32 AM UTC</time><a class="anchor" name="1480588358">&nbsp;</a></div><pre>Brian,

Yes, I succeeded to manually submit a job to PBS from CE host.
Then I excluded the route for &#39;dteam&#39; queue and now all jobs from command &#39;condor_ce_trace...&#39; goes to &#39;idle&#39; status.
There is only 1 job-router-entry&#58;
JOB_ROUTER_ENTRIES = &#92;
[ &#92;
GridResource = &#34;batch pbs&#34;; &#92;
TargetUniverse = 5; &#92;
name = &#34;Local_PBS_star&#34;; &#92;
eval_set_remote_queue = &#34;star&#34;; &#92;
Requirements = target.x509UserProxyVOName =?= &#34;star&#34;; &#92;
] &#92;

And the output of &#39;condor_ce_q -af x509UserProxyVOName&#39; is &#39;undefined&#39; for all  my held or idled jobs.
Maybe this is a main problem ? But in CE logs I see correct data for x509 proxyies an they are not expired.
Also, when I restarting condor-ce there is a warning
&#34;WARNING&#58; set_remote_queue in the JOB_ROUTER_ENTRIES will be overriden by the JOB_ROUTER DEFAULTS. Use eval_set_remote_queue instead.&#34;
while I am really specified &#34;eval_set_remote_queue&#34;, not &#34;set_remote_queue&#34; as you can see above.

by /C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov</pre></div><div class='update_description'><i onclick="document.location='31952#1480523051'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-30T16:24:11+00:00">Nov 30, 2016 04:24 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1480523051">&nbsp;</a></div><pre>Evgeniy,

Can you manually submit a job to your PBS queue using &#39;qsub&#39; from the
CE? There&#39;s a section in the Troubleshooting Guide
&#60;<a href='https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/TroubleshootingHTCondorCE#Jobs_stay_idle_on_the_CE&#62' target='_blank' rel='nofollow'>https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/TroubleshootingHTCondorCE#Jobs_stay_idle_on_the_CE&#62</a>;
titled &#34;Idle jobs on CE&#58; Make sure the underlying batch system can run
jobs&#34; that goes into more detail.

And the condor_ce_trace command will automatically add the proxy
information to the job (you can check what values are assigned to the
jobs with &#96;condor_ce_q -af x509UserProxyVOName). That being said, you&#39;ll
want to rewrite your routes slightly because &#34;dteam&#34; jobs can match to
the &#34;Local_PBS_dteam&#34; and &#34;Local_PBS_other&#34; because the Job Router
round-robins
&#60;<a href='https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/JobRouterRecipes#Writing_multiple_routes&#62' target='_blank' rel='nofollow'>https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/JobRouterRecipes#Writing_multiple_routes&#62</a>;
between the routes. You should set the requirements of the &#34;other&#34; route
to &#39;(target.x509UserProxyVOName =!= &#34;star&#34; && target.x509UserProxyVOName
=!= &#34;dteam&#34;)&#39;.

Cheers,
Brian</pre></div><div class='update_description'><i onclick="document.location='31952#1480503327'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-30T10:55:27+00:00">Nov 30, 2016 10:55 AM UTC</time><a class="anchor" name="1480503327">&nbsp;</a></div><pre>Brian,
I specified the setting &#34;ALL_DEBUG=D_FULLDEBUG&#34; in /etc/condor-ce/config.d/99-local.conf and restarted the condor-ce.
Here is the output of &#39;condor_ce_q -held&#39; &#58;

3358.0   star001        11/30 08&#58;48 Attempts to submit failed&#58;

This CE host is configured to work with remote Batch-system on separate host lxbsrv01.jinr.ru, and the batch system is &#34;pbs&#34;, not Condor.
I specified the relevant settings as in this manual <a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallHTCondorCE#Configuring_the_batch_system' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallHTCondorCE#Configuring_the_batch_system</a>

On CE host I have only condor-ce service runnung, &#39;condor&#39; is not running but exists.

On PBS host lxbsrv01.jinr.ru I see in log&#58;

11/30/2016 08&#58;48&#58;33;0080;PBS_Server;Req;req_reject;Reject reply code=15020(Unknown queue MSG=cannot locate queue), aux=0, type=QueueJob, from star001@....

CE settings for queues are specified in /etc/condor-ce/config.d/02-ce-pbs.conf
and are as follows

JOB_ROUTER_ENTRIES = &#92;
[ &#92;
GridResource = &#34;batch pbs&#34;; &#92;
TargetUniverse = 9; &#92;
name = &#34;Local_PBS_star&#34;; &#92;
eval_set_remote_queue = &#34;star&#34;; &#92;
Requirements = target.x509UserProxyVOName =?= &#34;star&#34;; &#92;
] &#92;
[ &#92;
GridResource = &#34;batch pbs&#34;; &#92;
TargetUniverse = 9; &#92;
name = &#34;Local_PBS_dteam&#34;; &#92;
eval_set_remote_queue = &#34;dteam&#34;; &#92;
Requirements = target.x509UserProxyVOName =?= &#34;dteam&#34;; &#92;
] &#92;
[ &#92;
GridResource = &#34;batch pbs&#34;; &#92;
<div id='show_567900493' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_567900493'>TargetUniverse = 9; &#92;
name = &#34;Local_PBS_other&#34;; &#92;
eval_set_remote_queue = &#34;other&#34;; &#92;
Requirements = target.x509UserProxyVOName =!= &#34;star&#34;; &#92;
]

These settings are for VOs &#34;star&#34; and &#34;dteam&#34; with correspondent queues. Other VOs goes to queue &#34;other&#34;

So there is something wrong with queues settings ?
I suspect that the command &#39;condor_ce_trace --debug osgce.jinr.ru&#39; doesn&#39;t now anything about CEs queue setting, so how to solve it ?
I run command &#39;condor_ce_trace --debug osgce.jinr.ru&#39; as user star001. For this user there is a line in /etc/edg-mkgridmap.conf &#58;
&#34;group vomss&#58;//vo.racf.bnl.gov&#58;8443/voms/star star001&#34;, so the queue seems to configured properly.

Evgeniy

by /C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov
</div><script type='text/javascript'>
        $('#show_567900493').click(function() {
            $('#detail_567900493').slideDown("normal");
            $('#show_567900493').hide();
            $('#hide_567900493').show();
        });
        $('#hide_567900493').click(function() {
            $('#detail_567900493').slideUp();
            $('#hide_567900493').hide();
            $('#show_567900493').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='31952#1480435931'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-29T16:12:11+00:00">Nov 29, 2016 04:12 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1480435931">&nbsp;</a></div><pre>Evgeniy,

Could you run &#96;condor_ce_q -held&#96; to get the hold reason? You&#39;ll also
want to set ALL_DEBUG=D_FULLDEBUG in /etc/condor-ce/config.d/ (I put
config changes into 99-local.conf).

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31952#1480435455'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-29T16:04:15+00:00">Nov 29, 2016 04:04 PM UTC</time><a class="anchor" name="1480435455">&nbsp;</a></div><pre>Brain,
That is the output of condor_ce_trace --debug osgce.jinr.ru
.....
Querying job status (599/600)
11/29/16 18&#58;59&#58;05 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Held
Querying job status (600/600)
11/29/16 18&#58;59&#58;06 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Held
********************************************************************************
2016-11-29 18&#58;59&#58;07 Remote job, 3351.0, was held
********************************************************************************
+++++++++++++++++++++++++++++++++++++++++++++++++++
And that is the output of  condor_ce_q in other terminal&#58;

3351.0   star001        11/29 18&#58;49   0+00&#58;00&#58;00 H  0   0.1  env

So, the job is in held status

by /C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov</pre></div><div class='update_description'><i onclick="document.location='31952#1480434130'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-29T15:42:10+00:00">Nov 29, 2016 03:42 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1480434130">&nbsp;</a></div><pre>Evgeniy,

That looks much better but you should leave the condor_ce_trace command
running since it can take a few minutes for the job to work its way to
your batch system. You can open another terminal and run condor_ce_q to
check the job&#39;s progress.

If everything is configured properly, you should be able to eventually
query your batch system to see that the CE has submitted a job to it.

Cheers,
Brian</pre></div><div class='update_description'><i onclick="document.location='31952#1480426489'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-29T13:34:49+00:00">Nov 29, 2016 01:34 PM UTC</time><a class="anchor" name="1480426489">&nbsp;</a></div><pre>Brian,

1. Done
2. Done, I use EL6.
3, 4 here is an output&#58;

bash-4.1$ grid-proxy-init
Your identity&#58; /C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov
Enter GRID pass phrase for this identity&#58;
Creating proxy ......................................................... Done
Your proxy is valid until&#58; Wed Nov 30 04&#58;21&#58;17 2016
bash-4.1$ whoami
star001
bash-4.1$ condor_ce_trace
********************************************************************************
2016-11-29 16&#58;21&#58;44 Usage&#58; condor_ce_trace [options] &#60;hostname&#62;
********************************************************************************
bash-4.1$ condor_ce_trace --debug osgce.jinr.ru
11/29/16 16&#58;21&#58;49 Result of reading /etc/issue&#58;  Scientific Linux release 6.8 (Carbon)

11/29/16 16&#58;21&#58;49 Using processor count&#58; 4 processors, 4 CPUs, 0 HTs
11/29/16 16&#58;21&#58;49 Enumerating interfaces&#58; lo 127.0.0.1 up
11/29/16 16&#58;21&#58;49 Enumerating interfaces&#58; eth0 159.93.226.250 up
11/29/16 16&#58;21&#58;49 Initializing Directory&#58; curr_dir = /usr/share/condor-ce/config.d
11/29/16 16&#58;21&#58;49 Initializing Directory&#58; curr_dir = /etc/condor-ce/config.d
Testing HTCondor-CE collector connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.4.9 Sep 29 2016 $
Local  Version&#58;              $CondorVersion&#58; 8.4.9 Sep 29 2016 $
Session ID&#58;                  osgce&#58;223585&#58;1480425709&#58;6
Instruction&#58;                 READ
Command&#58;                     60020
Encryption&#58;                  none
Integrity&#58;                   none
Authentication&#58;              none
<div id='show_466482440' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_466482440'>Remote Mapping&#58;              unauthenticated@unmapped
Authorized&#58;                  TRUE

********************
- Successful ping of collector on &#60;159.93.226.250&#58;9619&#62;.

11/29/16 16&#58;21&#58;49 Will use TCP to update collector osgce.jinr.ru &#60;159.93.226.250&#58;9619&#62;
11/29/16 16&#58;21&#58;49 Trying to query collector &#60;159.93.226.250&#58;9619&#62;
11/29/16 16&#58;21&#58;49 IPVERIFY&#58; checking osgce.jinr.ru against 159.93.226.250
11/29/16 16&#58;21&#58;49 IPVERIFY&#58; matched 159.93.226.250 to 159.93.226.250
11/29/16 16&#58;21&#58;49 IPVERIFY&#58; ip found is 1
Testing HTCondor-CE schedd connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.4.9 Sep 29 2016 $
Local  Version&#58;              $CondorVersion&#58; 8.4.9 Sep 29 2016 $
Session ID&#58;                  osgce&#58;223587&#58;1480425709&#58;2
Instruction&#58;                 WRITE
Command&#58;                     60021
Encryption&#58;                  none
Integrity&#58;                   MD5
Authenticated using&#58;         FS
All authentication methods&#58;  FS,GSI
Remote Mapping&#58;              star001@....
Authorized&#58;                  TRUE

********************
- Successful ping of schedd on &#60;159.93.226.250&#58;9619?addrs=159.93.226.250-9619&noUDP&sock=223555_a62d_3&#62;.

Job ad, pre-submit&#58;
[
Out = &#34;/home/star001/.stdout_223634_oT8L6f&#34;;
x509UserProxyFQAN = &#34;/C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov/CN=1584558752&#34;;
Log = &#34;/home/star001/.log_223634_v3gbsM&#34;;
x509UserProxyExpiration = 1480468877;
x509userproxysubject = &#34;/C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov/CN=1584558752&#34;;
Args = &#34;&#34;;
Cmd = &#34;/bin/env&#34;;
Err = &#34;/home/star001/.stderr_223634_bX07QC&#34;;
LeaveJobInQueue = ( StageOutFinish &#62; 0 ) isnt true;
x509userproxy = &#34;/tmp/x509up_u18361&#34;
]
Submitting job to schedd &#60;159.93.226.250&#58;9619?addrs=159.93.226.250-9619&noUDP&sock=223555_a62d_3&#62;
11/29/16 16&#58;21&#58;49 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
11/29/16 16&#58;21&#58;49 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
- Successful submission; cluster ID 3347
Resulting job ad&#58;
[
BufferSize = 524288;
NiceUser = false;
CoreSize = -1;
CumulativeSlotTime = 0;
OnExitHold = false;
RequestCpus = 1;
Err = &#34;_condor_stderr&#34;;
BufferBlockSize = 32768;
x509userproxy = &#34;/tmp/x509up_u18361&#34;;
TransferOutputRemaps = &#34;_condor_stdout=/home/star001/.stdout_223634_oT8L6f;_condor_stderr=/home/star001/.stderr_223634_bX07QC&#34;;
ImageSize = 100;
WantCheckpoint = false;
CommittedTime = 0;
TargetType = &#34;Machine&#34;;
WhenToTransferOutput = &#34;ON_EXIT&#34;;
Cmd = &#34;/bin/env&#34;;
JobUniverse = 5;
ExitBySignal = false;
HoldReasonCode = 16;
Iwd = &#34;/home/star001&#34;;
NumRestarts = 0;
CommittedSuspensionTime = 0;
Owner = undefined;
NumSystemHolds = 0;
CumulativeSuspensionTime = 0;
RequestDisk = DiskUsage;
Requirements = true && TARGET.OPSYS == &#34;LINUX&#34; && TARGET.ARCH == &#34;X86_64&#34; && TARGET.HasFileTransfer && TARGET.Disk &#62;= RequestDisk && TARGET.Memory &#62;= RequestMemory;
MinHosts = 1;
JobNotification = 0;
NumCkpts = 0;
LastSuspensionTime = 0;
NumJobStarts = 0;
WantRemoteSyscalls = false;
JobPrio = 0;
RootDir = &#34;/&#34;;
CurrentHosts = 0;
x509UserProxyExpiration = 1480468877;
StreamOut = false;
WantRemoteIO = true;
OnExitRemove = true;
DiskUsage = 1;
In = &#34;/dev/null&#34;;
PeriodicRemove = false;
RemoteUserCpu = 0.0;
LocalUserCpu = 0.0;
RemoteSysCpu = 0.0;
LocalSysCpu = 0.0;
ClusterId = 3347;
Log = &#34;/home/star001/.log_223634_v3gbsM&#34;;
CompletionDate = 0;
RemoteWallClockTime = 0.0;
x509UserProxyFQAN = &#34;/C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov/CN=1584558752&#34;;
LeaveJobInQueue = JobStatus == 4 && ( CompletionDate is UNDDEFINED || CompletionDate == 0 || ( ( time() - CompletionDate ) &#60; 864000 ) );
CondorVersion = &#34;$CondorVersion&#58; 8.4.9 Sep 29 2016 $&#34;;
MyType = &#34;Job&#34;;
StreamErr = false;
HoldReason = &#34;Spooling input data files&#34;;
PeriodicHold = false;
ProcId = 0;
Out = &#34;_condor_stdout&#34;;
JobStatus = 5;
PeriodicRelease = false;
RequestMemory = ifthenelse(MemoryUsage isnt undefined,MemoryUsage,( ImageSize + 1023 ) / 1024);
Args = &#34;&#34;;
MaxHosts = 1;
TotalSuspensions = 0;
CommittedSlotTime = 0;
x509userproxysubject = &#34;/C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov/CN=1584558752&#34;;
CondorPlatform = &#34;$CondorPlatform&#58; X86_64-CentOS_6.8 $&#34;;
ShouldTransferFiles = &#34;YES&#34;;
ExitStatus = 0;
QDate = 1480425709;
EnteredCurrentStatus = 1480425709
]
Spooling cluster 3347 files to schedd &#60;159.93.226.250&#58;9619?addrs=159.93.226.250-9619&noUDP&sock=223555_a62d_3&#62;
11/29/16 16&#58;21&#58;50 SharedPortClient&#58; sent connection request to &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
11/29/16 16&#58;21&#58;50 entering FileTransfer&#58;&#58;SimpleInit
11/29/16 16&#58;21&#58;50 Input files&#58;
11/29/16 16&#58;21&#58;50 FILETRANSFER&#58; protocol &#34;http&#34; handled by &#34;/usr/libexec/condor/curl_plugin&#34;
11/29/16 16&#58;21&#58;50 FILETRANSFER&#58; protocol &#34;ftp&#34; handled by &#34;/usr/libexec/condor/curl_plugin&#34;
11/29/16 16&#58;21&#58;50 FILETRANSFER&#58; protocol &#34;file&#34; handled by &#34;/usr/libexec/condor/curl_plugin&#34;
11/29/16 16&#58;21&#58;50 FILETRANSFER&#58; protocol &#34;data&#34; handled by &#34;/usr/libexec/condor/data_plugin&#34;
11/29/16 16&#58;21&#58;50 entering FileTransfer&#58;&#58;UploadFiles (final_transfer=0)
11/29/16 16&#58;21&#58;50 entering FileTransfer&#58;&#58;Upload
11/29/16 16&#58;21&#58;50 entering FileTransfer&#58;&#58;DoUpload
11/29/16 16&#58;21&#58;50 DoUpload&#58; sending file /tmp/x509up_u18361
11/29/16 16&#58;21&#58;50 FILETRANSFER&#58; outgoing file_command is 4 for /tmp/x509up_u18361
11/29/16 16&#58;21&#58;50 Received GoAhead from peer to send /tmp/x509up_u18361 and all further files.
11/29/16 16&#58;21&#58;50 Sending GoAhead for 159.93.226.250 to receive /tmp/x509up_u18361 and all further files.
11/29/16 16&#58;21&#58;50 DoUpload&#58; put_x509_delegation() returned 0
11/29/16 16&#58;21&#58;50 DoUpload&#58; sending file /bin/env
11/29/16 16&#58;21&#58;50 FILETRANSFER&#58; outgoing file_command is 1 for /bin/env
11/29/16 16&#58;21&#58;50 ReliSock&#58;&#58;put_file_with_permissions()&#58; going to send permissions 100755
11/29/16 16&#58;21&#58;50 put_file&#58; going to send from filename /bin/env
11/29/16 16&#58;21&#58;50 put_file&#58; Found file size 23832
11/29/16 16&#58;21&#58;50 put_file&#58; sending 23832 bytes
11/29/16 16&#58;21&#58;50 ReliSock&#58; put_file&#58; sent 23832 bytes
11/29/16 16&#58;21&#58;50 DoUpload&#58; exiting at 3366
- Successful spooling
Querying job status (1/600)
11/29/16 16&#58;21&#58;50 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Held
Querying job status (2/600)
11/29/16 16&#58;21&#58;52 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Idle
Querying job status (3/600)
11/29/16 16&#58;21&#58;53 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Idle
Querying job status (4/600)
11/29/16 16&#58;21&#58;54 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Idle
Querying job status (5/600)
11/29/16 16&#58;21&#58;55 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Idle
Querying job status (6/600)
11/29/16 16&#58;21&#58;56 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Idle
Querying job status (7/600)
11/29/16 16&#58;21&#58;57 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Idle
Querying job status (8/600)
11/29/16 16&#58;21&#58;58 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Idle
Querying job status (9/600)
11/29/16 16&#58;21&#58;59 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Idle
Querying job status (10/600)
11/29/16 16&#58;22&#58;00 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Idle
Querying job status (11/600)
11/29/16 16&#58;22&#58;01 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Idle
Querying job status (12/600)
11/29/16 16&#58;22&#58;02 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Idle
^CQuerying job status (13/600)
11/29/16 16&#58;22&#58;03 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Idle
Querying job status (14/600)
11/29/16 16&#58;22&#58;04 SharedPortClient&#58; sent connection request to schedd at &#60;159.93.226.250&#58;9619&#62; for shared port id 223555_a62d_3
Job status&#58; Idle
^CTraceback (most recent call last)&#58;
File &#34;/usr/bin/condor_ce_trace&#34;, line 350, in &#60;module&#62;
main()
File &#34;/usr/bin/condor_ce_trace&#34;, line 343, in main
check_job_submit(job_info)
File &#34;/usr/bin/condor_ce_trace&#34;, line 287, in check_job_submit
time.sleep(1)
KeyboardInterrupt
**************************
I terminated the process by Ctrl+C.

Eveniy.

by /C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov
</div><script type='text/javascript'>
        $('#show_466482440').click(function() {
            $('#detail_466482440').slideDown("normal");
            $('#show_466482440').hide();
            $('#hide_466482440').show();
        });
        $('#hide_466482440').click(function() {
            $('#detail_466482440').slideUp();
            $('#hide_466482440').hide();
            $('#show_466482440').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='31952#1480356473'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-28T18:07:53+00:00">Nov 28, 2016 06:07 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1480356473">&nbsp;</a></div><pre>Evgeniy,

1. Add the following line to the top of /etc/condor-ce/condor_mapfile&#58;

GSI &#34;^&#92;/C&#92;=RU&#92;/O&#92;=RDIG&#92;/OU&#92;=hosts&#92;/OU=*&#92;/CN&#92;=(host&#92;/)?([A-Za-z0-9.&#92;-]*)$&#34; &#92;2@....

2. Restart the condor-ce service (&#96;service condor-ce restart&#96; for EL6, &#96;systemctl restart condor-ce&#96; for EL7)

3. As a non-root user, initialize your proxy

4. Run &#96;condor_ce_trace&#96; and provide the output

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31952#1480002619'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-24T15:50:19+00:00">Nov 24, 2016 03:50 PM UTC</time><a class="anchor" name="1480002619">&nbsp;</a></div><pre>Hi, Cris, Edgar, and Brian.
Thansk for your answers.
My osg-system-profiler output is attached.

The details of my CE hostcert are as follows&#58;
Subject&#58;
certificate for /C=RU/O=RDIG/OU=hosts/OU=jinr.ru/CN=osgce.jinr.ru
From&#58;
rdig-ca@....
Date&#58;
08/04/16 18&#58;16
...
Certificate&#58;
Data&#58;
Version&#58; 3 (0x2)
Serial Number&#58; 6501 (0x1965)
...
Issuer&#58; C=RU, O=RDIG, CN=Russian Data-Intensive Grid CA
Validity
Not Before&#58; Aug  4 15&#58;14&#58;06 2016 GMT
Not After &#58; Sep  4 15&#58;14&#58;06 2017 GMT
Subject&#58; C=RU, O=RDIG, OU=hosts, OU=jinr.ru, CN=osgce.jinr.ru
//////////////////////////////////////////////////////////////////////////////////////////////////
For  validating HTCondor-CE I follow this manual
<a href='https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/TroubleshootingHTCondorCE#HTCondor_CE_Troubleshooting_Tool' target='_blank' rel='nofollow'>https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/TroubleshootingHTCondorCE#HTCondor_CE_Troubleshooting_Tool</a>

Here is the output of some commands&#58;
osgce&#58;~ &#62; whoami && pwd
condor
/home/condor
osgce&#58;/ # ls -l /home | grep condor
drwxrwxrwx 3 condor  condor  4096 Nov 24 10&#58;48 condor

osgce&#58;~ &#62; condor_ce_run -lr osgce.jinr.ru&#58;9619 cat /home/condor/my_doc.txt
********************************************************************************
<div id='show_1244636884' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1244636884'>2016-11-24 10&#58;48&#58;28 Could not parse job cluster from condor_submit output.
STDOUT&#58; Submitting job(s)
STDERR&#58;
ERROR&#58; Failed to connect to queue manager osgce.jinr.ru
AUTHENTICATE&#58;1003&#58;Failed to authenticate with any method
AUTHENTICATE&#58;1004&#58;Failed to authenticate using GSI
GSI&#58;5003&#58;Failed to authenticate.  Globus is reporting error (851968&#58;40).  There
is probably a problem with your credentials.  (Did you run grid-proxy-init?)

********************************************************************************
Yes, then I&#39;ve run grid-proxy-init
/////////////////////////////////////////////////////////////////////////////////////
osgce&#58;~ &#62; export X509_USER_KEY=/home/condor/.globus/userkey.pem
osgce&#58;~ &#62; grid-proxy-init -debug

User Cert File&#58; /home/condor/.globus/usercert.pem
User Key File&#58; /home/condor/.globus/userkey.pem

Trusted CA Cert Dir&#58; (null)

Output File&#58; /tmp/x509up_u57262
Your identity&#58; /C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov
Enter GRID pass phrase for this identity&#58;
Creating proxy ............++++++
....................++++++
Done
Your proxy is valid until&#58; Fri Nov 25 02&#58;53&#58;53 2016
/////////////////////////////////////////////////////////////////////
I copied this certificate from /root/.globus/ to /home/condor/.globus
And once again validate condor_ce &#58;
osgce&#58;~ &#62; pwd
/home/condor
osgce&#58;~ &#62; ls -l my_doc.txt
-rwxrwxrwx 1 condor condor 19 Nov 24 11&#58;34 my_doc.txt

osgce&#58;~ &#62;  condor_ce_run -lr osgce.jinr.ru&#58;9619 cat /home/condor/my_doc.txt
...
and nothing else.  It looks like the job cannot reach completion
osgce&#58;/etc/condor-ce/config.d # condor_ce_q

-- Schedd&#58; osgce.jinr.ru &#58; &#60;159.93.226.250&#58;27562&#62;
ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD
3277.0   condor         11/24 11&#58;06   0+00&#58;00&#58;00 H  0   0.0  check_run.bash
3278.0   condor         11/24 12&#58;16   0+00&#58;00&#58;00 H  0   0.0  check_run.bash
3279.0   star001        11/24 14&#58;55   0+00&#58;00&#58;00 X  0   0.0  cat /home/condor/m
3280.0   star001        11/24 15&#58;16   0+00&#58;00&#58;00 H  0   0.0  check_run.bash
3281.0   star001        11/24 15&#58;28   0+00&#58;00&#58;00 I  0   0.0  cat /home/condor/m

5 jobs; 0 completed, 1 removed, 1 idle, 0 running, 3 held, 0 suspended

The last job 3281.0 is the result of the command and it is in &#34;Idle&#34; status.
So i see that job is submitted and runs as user/owner &#34;star001&#34; like it specified in  my grid-mapfile
(&#34;/C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov&#34; star001),
but immediately becom &#34;Idle&#34;.

Here is the output of Collector.log &#58;
11/24/16 16&#58;32&#58;58 Got QUERY_SCHEDD_ADS
11/24/16 16&#58;32&#58;58 (Sending 1 ads in response to query)
11/24/16 16&#58;32&#58;58 Query info&#58; matched=1; skipped=0; query_time=0.000075; send_time=0.000746; type=Scheduler; requirements={( ( Name == &#34;osgce.jinr.ru&#34; ) )}; peer=&#60;159.93.226.250&#58;21810&#62;; projection={}

So there is no errors like in my first statement about &#34; SECMAN&#58; FAILED&#58; Received &#34;DENIED&#34; from server for user gsi@unmapped using method GSI&#34; and I suppose it&#39;s because of &#34;grid-proxy-init&#34; temporal proxy.
If that the case, should I generate temporal x509 certificate every time I wnat to test HTCondor-CE,  in order to avoid  &#34; SECMAN&#58; FAILED&#58; ...&#34; messages ?
I will make a new ticket about Validation HTCondor-CE, i.e.  condor_ce_run, condor_ce_trace and condor_submit.

by /C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov
</div><script type='text/javascript'>
        $('#show_1244636884').click(function() {
            $('#detail_1244636884').slideDown("normal");
            $('#show_1244636884').hide();
            $('#hide_1244636884').show();
        });
        $('#hide_1244636884').click(function() {
            $('#detail_1244636884').slideUp();
            $('#hide_1244636884').hide();
            $('#show_1244636884').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='31952#1479939054'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-23T22:10:54+00:00">Nov 23, 2016 10:10 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1479939054">&nbsp;</a></div><pre>Evgeniy,

I agree with Edgar&#39;s diagnosis. As for the condor_ce_trace error, try submitting from a directory where you have write permission.

Cheers,
Brian</pre></div><div class='update_description'><i onclick="document.location='31952#1479937679'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-23T21:47:59+00:00">Nov 23, 2016 09:47 PM UTC</time><a class="anchor" name="1479937679">&nbsp;</a></div><pre>Hi Evgeniy,

What is the hostcert of your CE?

I would say this error is probably cause we are not authorizing your DN at collector1.opensciencegrid.org.

So we need two things&#58;

1. Run fetch-crl
2. Make sure certs are up to date&#58; yum update osg-ca-certs

That being said this error is not a big deal. Your CE should work despite it, Have you tried submitting jobs to it?

I am assigning this to Brian Lin, However bare in mind thanksgiving weekend starts tomorrow so most probably answer will come on monday.

Edgar
OSG Software

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='31952#1479915480'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-23T15:38:00+00:00">Nov 23, 2016 03:38 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1479915480">&nbsp;</a></div><pre>Evgeniy ,

It might be a good idea to run the osg-system-profiler and attach the output to this ticket.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='31952#1479915424'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-23T15:37:04+00:00">Nov 23, 2016 03:37 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1479915424">&nbsp;</a></div><pre>I&#39;ve added software to this for review.</pre></div><div class='update_description'><i onclick="document.location='31952#1479915135'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-23T15:32:15+00:00">Nov 23, 2016 03:32 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1479915135">&nbsp;</a></div><pre>Today I &#39;ve made ticket 31950 but was a &#34;guest&#34;. Now I have loaded my x509 certificate and my ticket tracking is going to be much better.
I duplicate my question fro mticket 31950&#58;

I configured HTCondor-CE  on the host osgce,jinr.ru with edg-mkgridmap authorization.
The command #edg-mkgridmap doesn&#39;t show any errors, but  there is a problem with Collector.

That is what I see in Collector log&#58;

11/23/16 12&#58;41&#58;31 Connecting to CONDOR_VIEW_HOST collector1.opensciencegrid.org&#58;9619
11/23/16 12&#58;41&#58;33 SECMAN&#58; FAILED&#58; Received &#34;DENIED&#34; from server for user gsi@unmapped using method GSI.
11/23/16 12&#58;41&#58;33 ERROR&#58; SECMAN&#58;2004&#58;Failed to create security session to &#60;129.79.53.205&#58;9619&#62; with TCP.|SECMAN&#58;2010&#58;Received &#34;DENIED&#34; from server for user gsi@unmapped using method GSI.
11/23/16 12&#58;41&#58;33 Can&#39;t send command 1 to View Collector collector1.opensciencegrid.org&#58;9619

Where to go first to solve thhis error?
This CE is concerned to accpet requests only for STAR VO experiment <a href='https&#58;//drupal.star.bnl.gov/STAR/comp/sofi' target='_blank' rel='nofollow'>https&#58;//drupal.star.bnl.gov/STAR/comp/sofi</a>
IT was working well before we had problems with intrernet, but after some updates or reboots it shows the error, mentioned above and all the jobs are goes to hold status.

Evgeniy Kuznetsov LIT, JINR
DN = &#34;/C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov&#34;

And the following output from condor_ce_trace --debug osgce.jinr.ru &#58;
Testing HTCondor-CE collector connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.4.9 Sep 29 2016 $
Local  Version&#58;              $CondorVersion&#58; 8.4.9 Sep 29 2016 $
Session ID&#58;                  osgce&#58;14103&#58;1479914996&#58;8
Instruction&#58;                 READ
Command&#58;                     60020
Encryption&#58;                  none
Integrity&#58;                   none
Authentication&#58;              none
Remote Mapping&#58;              unauthenticated@unmapped
Authorized&#58;                  TRUE

********************
<div id='show_29441493' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_29441493'>- Successful ping of collector on &#60;159.93.226.250&#58;9619&#62;.

Testing HTCondor-CE schedd connectivity.
***** condor_ping output *****
Remote Version&#58;              $CondorVersion&#58; 8.4.9 Sep 29 2016 $
Local  Version&#58;              $CondorVersion&#58; 8.4.9 Sep 29 2016 $
Session ID&#58;                  osgce&#58;14105&#58;1479914996&#58;3
Instruction&#58;                 WRITE
Command&#58;                     60021
Encryption&#58;                  none
Integrity&#58;                   MD5
Authenticated using&#58;         FS
All authentication methods&#58;  FS,GSI
Remote Mapping&#58;              condor@....
Authorized&#58;                  TRUE

********************
- Successful ping of schedd on &#60;159.93.226.250&#58;9619?addrs=159.93.226.250-9619&noUDP&sock=14073_6bcc_3&#62;.

********************************************************************************
Uncaught exception, please send the following error to goc@....
with a description of the issue&#58;
Traceback (most recent call last)&#58;
File &#34;/usr/bin/condor_ce_trace&#34;, line 350, in &#60;module&#62;
main()
File &#34;/usr/bin/condor_ce_trace&#34;, line 342, in main
generate_run_script(job_info)
File &#34;/usr/bin/condor_ce_trace&#34;, line 175, in generate_run_script
job_info.update(ce.generate_job_files())
File &#34;/usr/lib/python2.6/site-packages/htcondorce/tools.py&#34;, line 45, in
generate_job_files
fd, job_info[filetype + &#39;_file&#39;] = tempfile.mkstemp(dir=&#34;.&#34;,
prefix=&#34;.%s_%d_&#34; % (filetype, pid))
File &#34;/usr/lib64/python2.6/tempfile.py&#34;, line 293, in mkstemp
return _mkstemp_inner(dir, prefix, suffix, flags)
File &#34;/usr/lib64/python2.6/tempfile.py&#34;, line 228, in _mkstemp_inner
fd = _os.open(file, flags, 0600)
OSError&#58; [Errno 13] Permission denied&#58; &#39;./.stdout_14616_vOLAI4&#39;

**************************************************************************

by /C=RU/O=RDIG/OU=users/OU=jinr.ru/CN=Evgeniy Kuznetsov
</div><script type='text/javascript'>
        $('#show_29441493').click(function() {
            $('#detail_29441493').slideDown("normal");
            $('#show_29441493').hide();
            $('#hide_29441493').show();
        });
        $('#hide_29441493').click(function() {
            $('#detail_29441493').slideUp();
            $('#hide_29441493').hide();
            $('#show_29441493').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F31952">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
