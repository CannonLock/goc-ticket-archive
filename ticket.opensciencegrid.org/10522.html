<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[10522] URGENT&#58; gridftp is hanging</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=10522" method="post">
<div class="page-header">
    <h3><span class="muted">10522</span> / URGENT&#58; gridftp is hanging</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Bob Ball</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2011-08-09</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/10522", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/10522?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/10522?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20URGENT%26%2358%3B%20gridftp%20is%20hanging%20ISSUE%3D10522%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='10522#1312304518'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-02T17:01:58+00:00">Aug 2, 2011 05:01 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1312304518">&nbsp;</a></div><pre>Thank you for informing us that this issue has been resolved. I will close this ticket.

Please submit problems, requests, and questions at&#58;
<a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a>

OSG Grid Operations Center
goc@...., 317-278-9699
Visit the OSG Operations Page&#58;
<a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='10522#1312303928'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-02T16:52:08+00:00">Aug 2, 2011 04:52 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1312303928">&nbsp;</a></div><pre>Yes, I believe the issue is now resolved.  The CE here is a VM in our
VMWare ESX system.  The NICs were very lossy.  Both the hardware and the
virtual device are now changed, losses are now extremely rare, and in my
last round of testing I was unable to induce the previous errors.  Let&#39;s
close this now.

bob

On 8/2/2011 12&#58;25 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10522#1312302334'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-02T16:25:34+00:00">Aug 2, 2011 04:25 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1312302334">&nbsp;</a></div><pre>Are there any updates on this issue?

Please submit problems, requests, and questions at&#58;
<a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a>

Thank You,
OSG Grid Operations Center
goc@...., 317-278-9699
Visit the Open Science Grid Operations Page&#58;
<a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='10522#1311601251'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-07-25T13:40:51+00:00">Jul 25, 2011 01:40 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1311601251">&nbsp;</a></div><pre>Are there any updates on this issue?

Please submit problems, requests, and questions at&#58;
<a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a>

Thank You,
OSG Grid Operations Center
goc@...., 317-278-9699
Visit the Open Science Grid Operations Page&#58;
<a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='10522#1310057407'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-07-07T16:50:07+00:00">Jul 7, 2011 04:50 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1310057407">&nbsp;</a></div><pre>Some progress.  Indications that changing the NIC driver in this VM may
have helped.  Will be working on this again in the next few days.

bob

On 7/7/2011 12&#58;12 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10522#1310055169'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-07-07T16:12:49+00:00">Jul 7, 2011 04:12 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1310055169">&nbsp;</a></div><pre>Are there any updates on this issue?

Please submit problems, requests, and questions at&#58;
<a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a>

Thank You,
OSG Grid Operations Center
goc@...., 317-278-9699
Visit the Open Science Grid Operations Page&#58;
<a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='10522#1309218846'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-27T23:54:06+00:00">Jun 27, 2011 11:54 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1309218846">&nbsp;</a></div><pre>I am just back from vacation, as is the Ligo user.  We have made some
changes on the VM that I will test once I catch up a bit.

bob

On 6/24/2011 2&#58;36 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10522#1308940560'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-24T18:36:00+00:00">Jun 24, 2011 06:36 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1308940560">&nbsp;</a></div><pre>Are there any updates on this issue?

Please submit problems, requests, and questions at&#58;
<a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a>

Thank You,
OSG Grid Operations Center
goc@...., 317-278-9699
Visit the Open Science Grid Operations Page&#58;
<a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='10522#1307979689'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-13T15:41:29+00:00">Jun 13, 2011 03:41 PM UTC</time><a class="anchor" name="1307979689">&nbsp;</a></div><pre>-- by Gabriel Araujo von Winckler</pre></div><div class='update_description'><i onclick="document.location='10522#1307979585'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-13T15:39:45+00:00">Jun 13, 2011 03:39 PM UTC</time><a class="anchor" name="1307979585">&nbsp;</a></div><pre>Bobby,

The kernel 2.6.18-238 doesn&#39;t belong to the 5.6 series?
We reverted to 2.6.18-194 to see if the problem is reproducible with this kernel (the one we used to use).

Regards,
Gabriel

-- by Gabriel Araujo von Winckler</pre></div><div class='update_description'><i onclick="document.location='10522#1307977567'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-13T15:06:07+00:00">Jun 13, 2011 03:06 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1307977567">&nbsp;</a></div><pre>Interesting!  But we are only running SL5.5 here, not 5.6.
[ball@gate02&#58;~]$ cat /etc/redhat-release
Scientific Linux SL release 5.5 (Boron)

[ball@gate02&#58;~]$ uname -r
2.6.18-238.9.1.el5

Furthermore, it only seems to happen for larger files (no specifics
here, but files of only a few kB seem to be regularly transferred
without issue).  The CE is a VM, as noted, but the storage disk itself
is a RAID-6 array on the NFS file server.

2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.880388]
Call Trace&#58;
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.909216]
[&#60;ffffffff80252c50&#62;] ip_finish_output+0x0/0x241
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.909243]
[&#60;ffffffff8006ec4e&#62;] do_gettimeofday+0x40/0x90
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.928216]
[&#60;ffffffff8005a9f9&#62;] getnstimeofday+0x10/0x28
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.928313]
[&#60;ffffffff8866e941&#62;] &#58;nfs&#58;nfs_wait_bit_uninterruptible+0x0/0xd
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.928325]
[&#60;ffffffff800637ca&#62;] io_schedule+0x3f/0x67
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.928336]
[&#60;fffff
fff8866e94a&#62;] &#58;nfs&#58;nfs_wait_bit_uninterruptible+0x9/0xd
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.928339]
[&#60;ffffffff800639f6&#62;] __wait_on_bit+0x40/0x6e
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.928350]
[&#60;ffffffff8866e941&#62;] &#58;nfs&#58;nfs_wait_bit_uninterruptible+0x0/0xd
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.928353]
[&#60;ffffffff80063a90&#62;] out_of_line_wait_on_bit+0x6c/0x78
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.928362]
[&#60;ffffffff800a2921&#62;] wake_bit_function+0x0/0x23
<div id='show_1729779371' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1729779371'>2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.928375]
[&#60;ffffffff8867230a&#62;] &#58;nfs&#58;nfs_wait_on_requests_locked+0x70/0xca
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.928387]
[&#60;ffffffff88673340&#62;] &#58;nfs&#58;nfs_sync_inode_wait+0x60/0x1db
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.928402]
[&#60;ffffffff886691fb&#62;] &#58;nfs&#58;nfs_do_fsync+0x1f/0x3f
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.928412]
[&#60;ffffffff88669aa1&#62;] &#58;nfs&#58;nfs_file_flush+0x84/0xac
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.928424]
[&#60;ffffffff80023d0c&#62;] filp_close+0x36/0x64
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.928430]
[&#60;ffffffff8001e1d2&#62;] sys_close+0x88/0xbd
2011-06-06T11&#58;57&#58;14-04&#58;00 gate02.grid.umich.edu kernel&#58; [218419.928433]
[&#60;ffffffff8005d28d&#62;] tracesys+0xd5/0xe0

Do you also see a processor core go into a near-100% wa state at
GridUNESP?  Do you see a &#34;cp&#34; command of a large file, say 1.5GB, to
your NFS volume also initiate this same 100% wa state?  Does the gridftp
process stay around and refuse to die even by &#34;kill -9&#34;?

bob

On 6/13/2011 10&#58;20 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1729779371').click(function() {
            $('#detail_1729779371').slideDown("normal");
            $('#show_1729779371').hide();
            $('#hide_1729779371').show();
        });
        $('#hide_1729779371').click(function() {
            $('#detail_1729779371').slideUp();
            $('#hide_1729779371').hide();
            $('#show_1729779371').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10522#1307975407'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-13T14:30:07+00:00">Jun 13, 2011 02:30 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1307975407">&nbsp;</a></div><pre>Yes, it really does.  I was away all weekend, but before I left on
Friday I ran a 1.5GB file copy test from local disk to an NFS directory,
and observed one of the 2 available cores go into a nearly 100% wa
state, which is one of the symptoms of the gridftp case.  This is a
VMware instance, and one of us suggested to change the NIC driver.  That
is the next step to try when I can find the time to return to this.

Alain, you are away this week, I&#39;m away next week, but I&#39;ll keep
plugging at this as time allows.

bob

On 6/9/2011 5&#58;19 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10522#1307974829'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-13T14:20:29+00:00">Jun 13, 2011 02:20 PM UTC</time><a class="anchor" name="1307974829">&nbsp;</a></div><pre>Hi Allan, Kyle and all,

Here, at GridUNESP, we are experiencing very similar problems after upgrading to CentOS 5.6 (to kernel 2.6.18-238.12.1.el5).

In our CE we are receiving the following kernel messages&#58;

INFO&#58; task globus-job-mana&#58;30530 blocked for more than 120 seconds.
&#34;echo 0 &#62; /proc/sys/kernel/hung_task_timeout_secs&#34; disables this message.
globus-job-ma D ffff8100010718a0     0 30530      1         30533 30524 (NOTLB)
ffff81077c089e58 0000000000000082 ffff810794a19560 0000000000000001
ffff81077c089ec8 0000000000000009 ffff8107a5605080 ffff81083fe31100
000004365f6af130 0000000000003d10 ffff8107a5605268 0000000d80009a14
Call Trace&#58;
[&#60;ffffffff80063c4f&#62;] __mutex_lock_slowpath+0x60/0x9b
[&#60;ffffffff8000ce5f&#62;] do_path_lookup+0x275/0x2f1
[&#60;ffffffff80063c99&#62;] .text.lock.mutex+0xf/0x14
[&#60;ffffffff8003c9ba&#62;] do_unlinkat+0x66/0x141
[&#60;ffffffff8005d229&#62;] tracesys+0x71/0xe0
[&#60;ffffffff8005d28d&#62;] tracesys+0xd5/0xe0

In our access server (osg-client, home in iSCSI with *XFS*)&#58;

INFO&#58; task globus-gridftp-&#58;9020 blocked for more than 120 seconds.
&#34;echo 0 &#62; /proc/sys/kernel/hung_task_timeout_secs&#34; disables this message.
globus-gridft D ffff81000103f1a0     0  9020   4526          9033  8983 (NOTLB)
ffff81011f4dbd28 0000000000000086 ffff81011f4dbc60 ffffffff80064ae9
ffff81005d37ad00 0000000000000009 ffff8100c4cca7a0 ffff81021fda8100
0000efb772af3759 00000000000776a0 ffff8100c4cca988 0000000700000000
Call Trace&#58;
[&#60;ffffffff80064ae9&#62;] _spin_lock_bh+0x9/0x14
[&#60;ffffffff80063c4f&#62;] __mutex_lock_slowpath+0x60/0x9b
[&#60;ffffffff80063c99&#62;] .text.lock.mutex+0xf/0x14
[&#60;ffffffff80021967&#62;] generic_file_aio_write+0x4e/0xc1
[&#60;ffffffff8804c1b6&#62;] &#58;ext3&#58;ext3_file_write+0x16/0x91
[&#60;ffffffff800183e4&#62;] do_sync_write+0xc7/0x104
<div id='show_1791779345' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1791779345'>[&#60;ffffffff800a28ec&#62;] autoremove_wake_function+0x0/0x2e
[&#60;ffffffff80016b71&#62;] vfs_write+0xce/0x174
[&#60;ffffffff8001743e&#62;] sys_write+0x45/0x6e
[&#60;ffffffff8005d28d&#62;] tracesys+0xd5/0xe0

We probably will revert to the 5.5 kernel.
Please, let me know if I can help to debug or if any one as any ideas.

Regards,
Gabriel

-- by Gabriel Araujo von Winckler

</div><script type='text/javascript'>
        $('#show_1791779345').click(function() {
            $('#detail_1791779345').slideDown("normal");
            $('#show_1791779345').hide();
            $('#hide_1791779345').show();
        });
        $('#hide_1791779345').click(function() {
            $('#detail_1791779345').slideUp();
            $('#hide_1791779345').hide();
            $('#show_1791779345').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10522#1307654340'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-09T21:19:00+00:00">Jun 9, 2011 09:19 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1307654340">&nbsp;</a></div><pre>On Jun 9, 2011, at 11&#58;31 AM, via RT wrote&#58;
<font color='#7F7E6F'>&#62; Well, I have been playing with this today, and late yesterday.  I can</font>
<font color='#7F7E6F'>&#62; reproduce the error by using our 2 gatekeepers, transferring from a</font>
<font color='#7F7E6F'>&#62; local file on gate01 to various locations on gate02.</font>

Ah, excellent! No need for someone else to generate the problem.

<font color='#7F7E6F'>&#62; I have this problem, pretty reproducably, going to ANY of 3 different</font>
<font color='#7F7E6F'>&#62; NFS servers, one running Solaris, two running SL5.5 .  Copying to a</font>
<font color='#7F7E6F'>&#62; local file on gate02 works fine, and fast.</font>

Sounds like a smoking gun! Is this the only way you see problems on NFS, or do you see them when not using GridFTP? What if you do a simple &#34;cp&#34; of a similar-sized file between NFS and local disk?

-alain
------------------------------------
Alain Roy
VDT Support
vdt-support@....
<a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>
-- by roy at Thu Jun 09 21&#58;18&#58;53 UTC 2011

GOCTX Source&#58; VDT Ticket&#58; Queue=vdt-support ID=9352</pre></div><div class='update_description'><i onclick="document.location='10522#1307637006'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-09T16:30:06+00:00">Jun 9, 2011 04:30 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1307637006">&nbsp;</a></div><pre>Well, I have been playing with this today, and late yesterday.  I can
reproduce the error by using our 2 gatekeepers, transferring from a
local file on gate01 to various locations on gate02.

I have this problem, pretty reproducably, going to ANY of 3 different
NFS servers, one running Solaris, two running SL5.5 .  Copying to a
local file on gate02 works fine, and fast.  I may get one copy to nfs to
complete, but at some point, they begin to fail.  The file I transfer is
1.5GB.  I also tried a 256k buffer instead of the default 1MB, but that
made little or no difference.

So, that does not eliminate gate02 itself from this picture.  I guess I
need some other machine running the protocol, as I definitely do NOT
want to go to gate01, our primary gatekeeper, and watch it get locked.
Definitely NOT a good idea.

I&#39;ll send along more info when I know more.

bob

On 6/3/2011 8&#58;01 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10522#1307329027'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-06T02:57:07+00:00">Jun 6, 2011 02:57 AM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1307329027">&nbsp;</a></div><pre>That&#39;s a good idea (/tmp) to try to narrow this down.  Bottom line is
that I don&#39;t know why this is happening, and why all is fine until
Britta tries to make her transfers, which are then followed by a cascade
of hung globus-gridftp processes, in addition to local df commands that
have problems with the file system.  I mean, I can imagine that somehow
the directory structure she is using has fallen on some bad disk block,
which is then at the beginning of the avalanche of issues, but I need
something better than suspicions.

I asked her to hold off until we can get a handle on this.  I just
checked, and the system has no hung gridftp, and appears to be operating
fine.

bob

On 6/5/2011 12&#58;46 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10522#1307292406'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-05T16:46:46+00:00">Jun 5, 2011 04:46 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1307292406">&nbsp;</a></div><pre>The fact that Britta changed away from the Hadoop file system does make it sound like that&#39;s not an issue.

I was uncertain about the wording in your message&#58; are you saying that you are definitely a filesystem problem, or merely that it would explain what you are seeing. When I saw your first email, I immediately wondered about the health of your filesystem. Is it possible to try another file system on your GridFTP server to see if it helps? (Perhaps /tmp, if nothing else?)

-alain
------------------------------------
Alain Roy
VDT Support
vdt-support@....
<a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

On Jun 3, 2011, at 7&#58;02 PM, via RT wrote&#58;
<font color='#7F7E6F'>&#62; <a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?id=9352' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?id=9352</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; It is Britta Daudert, and we have been Emailing back and forth.  The</font>
<font color='#7F7E6F'>&#62; most recent is just below, from a local, non-hadoop file system, that</font>
<font color='#7F7E6F'>&#62; similarly failed.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I don&#39;t understand why no one else is having this issue?  We are</font>
<font color='#7F7E6F'>&#62; querying another ligo user, Robert Engel, to see what he is doing as I</font>
<font color='#7F7E6F'>&#62; see lots of his copies successfully complete.  Now, one thing I can</font>
<font color='#7F7E6F'>&#62; think of, is that the underlying RAID of our NFS system is having an</font>
<font color='#7F7E6F'>&#62; issue.  One of the 2 cores goes in to long periods of near 100% wa</font>
<font color='#7F7E6F'>&#62; state.  Locally then the file system does not respond, but the server</font>
<font color='#7F7E6F'>&#62; itself is quite happy.  Another possibility is the local network.  It</font>
<font color='#7F7E6F'>&#62; is</font>
<font color='#7F7E6F'>&#62; a puzzle.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Feel free to copy test files in and out yourself....  I can turn on any</font>
<font color='#7F7E6F'>&#62; debugging levels here you may be interested in.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; bob</font>
<font color='#7F7E6F'>&#62; -----------</font>
<font color='#7F7E6F'>&#62; I tried transferring an 86M file, seeing the EOF error again&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<div id='show_80842405' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_80842405'><font color='#7F7E6F'>&#62; globus-url-copy -dbg</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; file&#58;///home/ligo/GLIDEINS/LIGO_CIT-S6D-week-head/970012815-970617615/datafind/AGLT2-test-file.tar.gz</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='gsiftp&#58;//gate02.grid.umich.edu/atlas/data08/OSG/DATA/ligo-pf/86M-test-file' target='_blank' rel='nofollow'>gsiftp&#58;//gate02.grid.umich.edu/atlas/data08/OSG/DATA/ligo-pf/86M-test-file</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; debug&#58; fault on connection to</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='gsiftp&#58;//gate02.grid.umich.edu/atlas/data08/OSG/DATA/ligo-pf/86M-test-file&#58' target='_blank' rel='nofollow'>gsiftp&#58;//gate02.grid.umich.edu/atlas/data08/OSG/DATA/ligo-pf/86M-test-file&#58</a>;</font>
<font color='#7F7E6F'>&#62; globus_ftp_client_state.c&#58;globus_i_ftp_client_response_callback&#58;3616&#58;</font>
<font color='#7F7E6F'>&#62; the server responded with an error</font>
<font color='#7F7E6F'>&#62; debug&#58; data callback, error</font>
<font color='#7F7E6F'>&#62; globus_ftp_client_state.c&#58;globus_i_ftp_client_response_callback&#58;3616&#58;</font>
<font color='#7F7E6F'>&#62; the server responded with an error, buffer 0x2b9f67be9010, length 0,</font>
<font color='#7F7E6F'>&#62; offset=0, eof=true</font>
<font color='#7F7E6F'>&#62; debug&#58; operation complete</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; error&#58;</font>
<font color='#7F7E6F'>&#62; globus_ftp_client_state.c&#58;globus_i_ftp_client_response_callback&#58;3616&#58;</font>
<font color='#7F7E6F'>&#62; the server responded with an error</font>
<font color='#7F7E6F'>&#62; 500 500-Command failed. &#58;</font>
<font color='#7F7E6F'>&#62; globus_xio_system_select.c&#58;globus_l_xio_system_try_read&#58;1140&#58;</font>
<font color='#7F7E6F'>&#62; 500-An end of file occurred</font>
<font color='#7F7E6F'>&#62; 500 End.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On 6/3/2011 5&#58;38 PM, Open Science Grid FootPrints wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font>
<font color='#7F7E6F'>&#62; -- by Bobby Ball at Sat Jun 04 00&#58;01&#58;07 UTC 2011</font>
-- by roy at Sun Jun 05 16&#58;46&#58;30 UTC 2011

GOCTX Source&#58; VDT Ticket&#58; Queue=vdt-support ID=9352
</div><script type='text/javascript'>
        $('#show_80842405').click(function() {
            $('#detail_80842405').slideDown("normal");
            $('#show_80842405').hide();
            $('#hide_80842405').show();
        });
        $('#hide_80842405').click(function() {
            $('#detail_80842405').slideUp();
            $('#hide_80842405').hide();
            $('#show_80842405').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10522#1307145667'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-04T00:01:07+00:00">Jun 4, 2011 12:01 AM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1307145667">&nbsp;</a></div><pre>It is Britta Daudert, and we have been Emailing back and forth.  The
most recent is just below, from a local, non-hadoop file system, that
similarly failed.

I don&#39;t understand why no one else is having this issue?  We are
querying another ligo user, Robert Engel, to see what he is doing as I
see lots of his copies successfully complete.  Now, one thing I can
think of, is that the underlying RAID of our NFS system is having an
issue.  One of the 2 cores goes in to long periods of near 100% wa
state.  Locally then the file system does not respond, but the server
itself is quite happy.  Another possibility is the local network.  It is
a puzzle.

Feel free to copy test files in and out yourself....  I can turn on any
debugging levels here you may be interested in.

bob
-----------
I tried transferring an 86M file, seeing the EOF error again&#58;

globus-url-copy -dbg
file&#58;///home/ligo/GLIDEINS/LIGO_CIT-S6D-week-head/970012815-970617615/datafind/AGLT2-test-file.tar.gz
<a href='gsiftp&#58;//gate02.grid.umich.edu/atlas/data08/OSG/DATA/ligo-pf/86M-test-file' target='_blank' rel='nofollow'>gsiftp&#58;//gate02.grid.umich.edu/atlas/data08/OSG/DATA/ligo-pf/86M-test-file</a>

debug&#58; fault on connection to
<a href='gsiftp&#58;//gate02.grid.umich.edu/atlas/data08/OSG/DATA/ligo-pf/86M-test-file&#58' target='_blank' rel='nofollow'>gsiftp&#58;//gate02.grid.umich.edu/atlas/data08/OSG/DATA/ligo-pf/86M-test-file&#58</a>;
globus_ftp_client_state.c&#58;globus_i_ftp_client_response_callback&#58;3616&#58;
the server responded with an error
debug&#58; data callback, error
globus_ftp_client_state.c&#58;globus_i_ftp_client_response_callback&#58;3616&#58;
the server responded with an error, buffer 0x2b9f67be9010, length 0,
offset=0, eof=true
debug&#58; operation complete

error&#58;
<div id='show_249784477' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_249784477'>globus_ftp_client_state.c&#58;globus_i_ftp_client_response_callback&#58;3616&#58;
the server responded with an error
500 500-Command failed. &#58;
globus_xio_system_select.c&#58;globus_l_xio_system_try_read&#58;1140&#58;
500-An end of file occurred
500 End.

On 6/3/2011 5&#58;38 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_249784477').click(function() {
            $('#detail_249784477').slideDown("normal");
            $('#show_249784477').hide();
            $('#hide_249784477').show();
        });
        $('#hide_249784477').click(function() {
            $('#detail_249784477').slideUp();
            $('#hide_249784477').hide();
            $('#show_249784477').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10522#1307137094'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-03T21:38:14+00:00">Jun 3, 2011 09:38 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1307137094">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Have there been any reports of problems such as this?  Other gridftp</font>
<font color='#7F7E6F'>&#62; seem to be completing fine, only this user is reporting an issue.</font>

I haven&#39;t seen this problems or reports of it before.

<font color='#7F7E6F'>&#62; I note that the source file is apparently in a hadoop file system.  Is</font>
<font color='#7F7E6F'>&#62; this a factor?</font>

My best guess is that one of the filesystems is unresponsive. Since it appears that your system is working for other clients, it suggests a problem at the remote side.

Do you know who the user is? Is it possible to work with them to see if the source is having problems?

-alain
-- by roy at Fri Jun 03 21&#58;38&#58;06 UTC 2011

GOCTX Source&#58; VDT Ticket&#58; Queue=vdt-support ID=9352</pre></div><div class='update_description'><i onclick="document.location='10522#1307122209'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-03T17:30:09+00:00">Jun 3, 2011 05:30 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1307122209">&nbsp;</a></div><pre>I note that the source file is apparently in a hadoop file system.  Is
this a factor?

bob

On 6/3/2011 1&#58;17 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10522#1307121459'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-03T17:17:39+00:00">Jun 3, 2011 05:17 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1307121459">&nbsp;</a></div><pre>VDT, can you look into this&#58;

A user is attempting to send files to our site via globus-url-copy.  This is a write to the OSG/DATA directory, that is an NFS mount.  These appear to hang (I don&#39;t know how often...) and will not die via kill -9.  We are running osg 1.2.19

They instantiate via xinetd.conf, from the gsiftp service, as follows.

/opt/osg-1.2.6/globus/sbin/globus-gridftp-server -c /opt/osg-1.2.6/globus/etc/gridftp.conf

dmesg has entries such as this&#58;
[55421.358134] INFO&#58; task globus-gridftp-&#58;650 blocked for more than 120 seconds.
[55421.358146] &#34;echo 0 &#62; /proc/sys/kernel/hung_task_timeout_secs&#34; disables this message.
[55421.358152] globus-gridft D ffff81000100caa0     0   650   3746         21858       (NOTLB)
[55421.358157]  ffff81016ed7fd48 0000000000000086 ffffffff80252c50 000000000002c9c8
[55421.358160]  0000000000000000 0000000000000009 ffff81018d04b7e0 ffff810107f330c0
[55421.358163]  000031486f0a7419 0000000000000576 ffff81018d04b9c8 000000013afa5eb8
[55421.358165] Call Trace&#58;
[55421.358185]  [&#60;ffffffff80252c50&#62;] ip_finish_output+0x0/0x241
[55421.358191]  [&#60;ffffffff8006ec4e&#62;] do_gettimeofday+0x40/0x90
[55421.358206]  [&#60;ffffffff8866c941&#62;] &#58;nfs&#58;nfs_wait_bit_uninterruptible+0x0/0xd
[55421.358209]  [&#60;ffffffff800637ca&#62;] io_schedule+0x3f/0x67
[55421.358218]  [&#60;ffffffff8866c94a&#62;] &#58;nfs&#58;nfs_wait_bit_uninterruptible+0x9/0xd
[55421.358221]  [&#60;ffffffff800639f6&#62;] __wait_on_bit+0x40/0x6e
[55421.358231]  [&#60;ffffffff8866c941&#62;] &#58;nfs&#58;nfs_wait_bit_uninterruptible+0x0/0xd
[55421.358233]  [&#60;ffffffff80063a90&#62;] out_of_line_wait_on_bit+0x6c/0x78
[55421.358237]  [&#60;ffffffff800a2921&#62;] wake_bit_function+0x0/0x23
[55421.358248]  [&#60;ffffffff8867030a&#62;] &#58;nfs&#58;nfs_wait_on_requests_locked+0x70/0xca
[55421.358260]  [&#60;ffffffff88671340&#62;] &#58;nfs&#58;nfs_sync_inode_wait+0x60/0x1db
[55421.358271]  [&#60;ffffffff886671fb&#62;] &#58;nfs&#58;nfs_do_fsync+0x1f/0x3f
[55421.358280]  [&#60;ffffffff88667aa1&#62;] &#58;nfs&#58;nfs_file_flush+0x84/0xac
[55421.358283]  [&#60;ffffffff80023d0c&#62;] filp_close+0x36/0x64
[55421.358287]  [&#60;ffffffff8001e1d2&#62;] sys_close+0x88/0xbd
[55421.358290]  [&#60;ffffffff8005d28d&#62;] tracesys+0xd5/0xe0
[55421.358295]

The instantiating command is said to be something like this&#58;
<div id='show_322814476' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_322814476'>
globus-url-copy -dbg <a href='gsiftp&#58;//osg-job.ligo.caltech.edu/mnt/hadoop/ligo/pulsar/SFT-3/S6.split/H1_split_ac_2966400' target='_blank' rel='nofollow'>gsiftp&#58;//osg-job.ligo.caltech.edu/mnt/hadoop/ligo/pulsar/SFT-3/S6.split/H1_split_ac_2966400</a> <a href='gsiftp&#58;//gate02.grid.umich.edu/atlas/data08/OSG/DATA/SFT-3/S6.split/H1_split_ac_2966400' target='_blank' rel='nofollow'>gsiftp&#58;//gate02.grid.umich.edu/atlas/data08/OSG/DATA/SFT-3/S6.split/H1_split_ac_2966400</a>

Have there been any reports of problems such as this?  Other gridftp seem to be completing fine, only this user is reporting an issue.

File sizes seem to be anywhere from 600MB to 1.5GB or so in size.

Thanks,
bob
</div><script type='text/javascript'>
        $('#show_322814476').click(function() {
            $('#detail_322814476').slideDown("normal");
            $('#show_322814476').hide();
            $('#hide_322814476').show();
        });
        $('#hide_322814476').click(function() {
            $('#detail_322814476').slideUp();
            $('#hide_322814476').hide();
            $('#show_322814476').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10522#1307121236'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-06-03T17:13:56+00:00">Jun 3, 2011 05:13 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1307121236">&nbsp;</a></div><pre>A user is attempting to send files to our site via globus-url-copy.  This is a write to the OSG/DATA directory, that is an NFS mount.  These appear to hang (I don&#39;t know how often...) and will not die via kill -9.  We are running osg 1.2.19

They instantiate via xinetd.conf, from the gsiftp service, as follows.

/opt/osg-1.2.6/globus/sbin/globus-gridftp-server -c /opt/osg-1.2.6/globus/etc/gridftp.conf

dmesg has entries such as this&#58;
[55421.358134] INFO&#58; task globus-gridftp-&#58;650 blocked for more than 120 seconds.
[55421.358146] &#34;echo 0 &#62; /proc/sys/kernel/hung_task_timeout_secs&#34; disables this message.
[55421.358152] globus-gridft D ffff81000100caa0     0   650   3746         21858       (NOTLB)
[55421.358157]  ffff81016ed7fd48 0000000000000086 ffffffff80252c50 000000000002c9c8
[55421.358160]  0000000000000000 0000000000000009 ffff81018d04b7e0 ffff810107f330c0
[55421.358163]  000031486f0a7419 0000000000000576 ffff81018d04b9c8 000000013afa5eb8
[55421.358165] Call Trace&#58;
[55421.358185]  [&#60;ffffffff80252c50&#62;] ip_finish_output+0x0/0x241
[55421.358191]  [&#60;ffffffff8006ec4e&#62;] do_gettimeofday+0x40/0x90
[55421.358206]  [&#60;ffffffff8866c941&#62;] &#58;nfs&#58;nfs_wait_bit_uninterruptible+0x0/0xd
[55421.358209]  [&#60;ffffffff800637ca&#62;] io_schedule+0x3f/0x67
[55421.358218]  [&#60;ffffffff8866c94a&#62;] &#58;nfs&#58;nfs_wait_bit_uninterruptible+0x9/0xd
[55421.358221]  [&#60;ffffffff800639f6&#62;] __wait_on_bit+0x40/0x6e
[55421.358231]  [&#60;ffffffff8866c941&#62;] &#58;nfs&#58;nfs_wait_bit_uninterruptible+0x0/0xd
[55421.358233]  [&#60;ffffffff80063a90&#62;] out_of_line_wait_on_bit+0x6c/0x78
[55421.358237]  [&#60;ffffffff800a2921&#62;] wake_bit_function+0x0/0x23
[55421.358248]  [&#60;ffffffff8867030a&#62;] &#58;nfs&#58;nfs_wait_on_requests_locked+0x70/0xca
[55421.358260]  [&#60;ffffffff88671340&#62;] &#58;nfs&#58;nfs_sync_inode_wait+0x60/0x1db
[55421.358271]  [&#60;ffffffff886671fb&#62;] &#58;nfs&#58;nfs_do_fsync+0x1f/0x3f
[55421.358280]  [&#60;ffffffff88667aa1&#62;] &#58;nfs&#58;nfs_file_flush+0x84/0xac
[55421.358283]  [&#60;ffffffff80023d0c&#62;] filp_close+0x36/0x64
[55421.358287]  [&#60;ffffffff8001e1d2&#62;] sys_close+0x88/0xbd
[55421.358290]  [&#60;ffffffff8005d28d&#62;] tracesys+0xd5/0xe0
[55421.358295]

The instantiating command is said to be something like this&#58;

globus-url-copy -dbg <a href='gsiftp&#58;//osg-job.ligo.caltech.edu/mnt/hadoop/ligo/pulsar/SFT-3/S6.split/H1_split_ac_2966400' target='_blank' rel='nofollow'>gsiftp&#58;//osg-job.ligo.caltech.edu/mnt/hadoop/ligo/pulsar/SFT-3/S6.split/H1_split_ac_2966400</a> <a href='gsiftp&#58;//gate02.grid.umich.edu/atlas/data08/OSG/DATA/SFT-3/S6.split/H1_split_ac_2966400' target='_blank' rel='nofollow'>gsiftp&#58;//gate02.grid.umich.edu/atlas/data08/OSG/DATA/SFT-3/S6.split/H1_split_ac_2966400</a>
<div id='show_81279624' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_81279624'>
Have there been any reports of problems such as this?  Other gridftp seem to be completing fine, only this user is reporting an issue.

File sizes seem to be anywhere from 600MB to 1.5GB or so in size.

Thanks,
bob

</div><script type='text/javascript'>
        $('#show_81279624').click(function() {
            $('#detail_81279624').slideDown("normal");
            $('#show_81279624').hide();
            $('#hide_81279624').show();
        });
        $('#hide_81279624').click(function() {
            $('#detail_81279624').slideUp();
            $('#hide_81279624').hide();
            $('#show_81279624').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F10522">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
