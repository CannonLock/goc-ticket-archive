<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[7718] Resource Specific Issue on UCD</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="robots" content="noindex, nofollow" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=7718" method="post">
<div class="page-header">
    <h3><span class="muted">7718</span> / Resource Specific Issue on UCD</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Chris Green</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2009-12-30</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">CSC <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/7718", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='7718#1261584487'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-23T16:08:07+00:00">Dec 23, 2009 04:08 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1261584487">&nbsp;</a></div><pre>Nope, I&#39;m good.  Feel free to close the ticket.

Brian

On Dec 23, 2009, at 9&#58;54 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7718#1261583648'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-23T15:54:08+00:00">Dec 23, 2009 03:54 PM UTC</time> by <b>echism</b><a class="anchor" name="1261583648">&nbsp;</a></div><pre>Brian,

Do you need more than that?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='7718#1260930907'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-16T02:35:07+00:00">Dec 16, 2009 02:35 AM UTC</time> by <b>scott@....</b><a class="anchor" name="1260930907">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Anyhow.... Scott, could you speculate how you got this RSV test?  Was</font>
<font color='#7F7E6F'>&#62; it from a released file?  Once you can do this, I say we&#39;re ready to</font>
<font color='#7F7E6F'>&#62; close this off.</font>

It may have been from OSG 1.2.0. That was the first version of OSG that
I installed. I suppose that if the file was not patched in the upgrade
process it could have stuck around. I didn&#39;t install this file from a
non-osg/vdt source (ie pacman). So yes, it was from a released file.

Scott</pre></div><div class='update_description'><i onclick="document.location='7718#1260925942'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-16T01:12:22+00:00">Dec 16, 2009 01:12 AM UTC</time> by <b>echism</b><a class="anchor" name="1260925942">&nbsp;</a></div><pre>Scott,

Please update this ticket.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='7718#1260570906'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-11T22:35:06+00:00">Dec 11, 2009 10:35 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1260570906">&nbsp;</a></div><pre>Hey Chris,

I think this is because maybe Condor itself interprets the script (as opposed to setting up a new shell and letting bash handle it).

Anyhow.... Scott, could you speculate how you got this RSV test?  Was it from a released file?  Once you can do this, I say we&#39;re ready to close this off.

Brian

On Dec 11, 2009, at 9&#58;14 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7718#1260562446'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-11T20:14:06+00:00">Dec 11, 2009 08:14 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1260562446">&nbsp;</a></div><pre>Hi,

In my defense, I&#39;ve been using the eval thing for years -- it allows one
to specify arguments like -w or -T to perl, whereas #!/usr/bin/env does
not. I&#39;m perplexed, because I&#39;ve never seen it not work.

Chris.

On 2009/12/11 1&#58;56 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7718#1260561366'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-11T19:56:06+00:00">Dec 11, 2009 07:56 PM UTC</time> by <b>Scott Kronenfeld</b><a class="anchor" name="1260561366">&nbsp;</a></div><pre>On my latest install from the OSG 1.2 production cache, as well as my
VTB install (the upcoming release going through testing now), the file
at $VDT_LOCATION/osg-rsv/bin/probes/workers-scripts/gratia-config-probe-helper
has the correct header.

Furthermore, I went through the RSV repository and verified that the
headings of every script under bin/probes and
bin/probes/worker-scripts.  There&#39;s no more instances of that funky
eval code, everything uses &#39;#!/usr/bin/env perl&#39;

Thanks,
scot

On Fri, Dec 11, 2009 at 8&#58;56 AM, Brian Bockelman &#60;bbockelm@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; Hey Arvind, Scot, Someone,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; There appears to be a TODO here - somehow the bad header line of this file is causing an issue.  I thought this got changed in SVN - can you look at it?  It should be &#34;#/usr/bin/env perl&#34;.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Brian</font></pre></div><div class='update_description'><i onclick="document.location='7718#1260547327'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-11T16:02:07+00:00">Dec 11, 2009 04:02 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1260547327">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Hey Arvind, Scot, Someone,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; There appears to be a TODO here - somehow the bad header line of this file is causing an issue.  I thought this got changed in SVN - can you look at it?  It should be &#34;#/usr/bin/env perl&#34;.</font>
<font color='#7F7E6F'>&#62;</font>

I see in the latest production release (on SVN), the probe has the
proper header line (i.e the one you expect). Assuming Scott has the
latest RSV 3.0.x, he should be ok.

However, I believe the new RSV-dev leadership has changed the release
process to only provide tarballs from VDT, and not use the SVN based
update mechanism we put in place, so I don&#39;t know what exactly they are
providing currently, and how long it will take to push out updates, etc.
Scot can perhaps clarify.</pre></div><div class='update_description'><i onclick="document.location='7718#1260543547'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-11T14:59:07+00:00">Dec 11, 2009 02:59 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1260543547">&nbsp;</a></div><pre>Hey Arvind, Scot, Someone,

There appears to be a TODO here - somehow the bad header line of this file is causing an issue.  I thought this got changed in SVN - can you look at it?  It should be &#34;#/usr/bin/env perl&#34;.

Brian

On Dec 7, 2009, at 8&#58;44 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7718#1260493686'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-11T01:08:06+00:00">Dec 11, 2009 01:08 AM UTC</time> by <b>scott@....</b><a class="anchor" name="1260493686">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Look in probes/workers-scripts, I think.  There should be a second</font>
<font color='#7F7E6F'>&#62; script for the gratia probe there.</font>

Ahh yes, here it is&#58;

${VDT_LOCATION}/osg-rsv/bin/probes/worker-scripts/gratia-config-probe-helper

Sure enough it had the old code. I&#39;ve corrected it with &#34;#!/usr/bin/env
perl&#34;. I&#39;ll killed the held jobs and tested it and it seems to work fine.

How do I get this changed in svn/cvs/git/etc?

Thanks!
Scott</pre></div><div class='update_description'><i onclick="document.location='7718#1260492786'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-11T00:53:06+00:00">Dec 11, 2009 12:53 AM UTC</time> by <b>bbockelm</b><a class="anchor" name="1260492786">&nbsp;</a></div><pre>Hey Scott,

Look in probes/workers-scripts, I think.  There should be a second script for the gratia probe there.

Brian

On Dec 11, 2009, at 1&#58;47 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7718#1260492427'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-11T00:47:07+00:00">Dec 11, 2009 12:47 AM UTC</time> by <b>scott@....</b><a class="anchor" name="1260492427">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; FootPrints Ticket Description&#58; Where&#39;d you get this probe from?  I</font>
<font color='#7F7E6F'>&#62; could swear we got rid of this.</font>

I&#39;m running OSG-1.2.4. This particular probe hasn&#39;t ever worked afaict
(since 1.2.0).

<font color='#7F7E6F'>&#62; Replace this top stuff with a simple &#34;/usr/bin/env perl&#34; on the RSV</font>
<font color='#7F7E6F'>&#62; submit host and you&#39;ll be fine.  Has this made it into some release?</font>

Hrm, how do I replace it? Isn&#39;t that script created automatically? The
script (pre transfer) looks ok (BTW, despite the directory name, I am
running OSG 1.2.4)&#58;

[root@cms probes]# head -20
/opt/osg-1.2.0/osg-rsv/bin/probes/gratia-config-probe
#!/usr/bin/env perl

###############################################################################
##
## Copyright 2009, The Trustees of Indiana University.
##
## Open Science Grid Operations Team, Indiana University
## Original Author&#58; Arvind Gopu (<a href='http&#58;//peart.ucs.indiana.edu' target='_blank' rel='nofollow'>http&#58;//peart.ucs.indiana.edu</a>)
##
## This Perl script tests if a CE&#39;s gratia is working properly
##
## Type ./gratia-config-probe -h for more information
##
## REQUIRES
##  &#39;RSVProbe_Base&#39;
##
################################################################################

######## Perl modules to use ######################################
use strict;
<div id='show_1290693321' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1290693321'>
... snip ...

[root@cms probes]# osg-version
OSG 1.2.4
</div><script type='text/javascript'>
        $('#show_1290693321').click(function() {
            $('#detail_1290693321').slideDown("normal");
            $('#show_1290693321').hide();
            $('#hide_1290693321').show();
        });
        $('#hide_1290693321').click(function() {
            $('#detail_1290693321').slideUp();
            $('#hide_1290693321').hide();
            $('#show_1290693321').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='7718#1260491526'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-11T00:32:06+00:00">Dec 11, 2009 12:32 AM UTC</time> by <b>bbockelm</b><a class="anchor" name="1260491526">&nbsp;</a></div><pre>Where&#39;d you get this probe from?  I could swear we got rid of this.

Replace this top stuff with a simple &#34;/usr/bin/env perl&#34; on the RSV submit host and you&#39;ll be fine.  Has this made it into some release?

Brina

On Dec 11, 2009, at 1&#58;23 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7718#1260490986'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-11T00:23:06+00:00">Dec 11, 2009 12:23 AM UTC</time> by <b>scott@....</b><a class="anchor" name="1260490986">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Can you show the first 5 lines of the executable that gets transferred?</font>
<font color='#7F7E6F'>&#62;</font>

[root@cms ~]# head
/home/rsvprobe/.globus/.gass_cache/local/md5/59/b3144e4bb2561153ecf190bc165397/md5/51/3b3b01d16b836c95d6d964ced9c7aa/data
eval &#39;(exit $?0)&#39; && eval &#39;exec perl -wS $0 ${1+&#34;$@&#34;}&#39;
&& eval &#39;exec perl -wS $0 $argv&#58;q&#39;
if 0;

use strict;
use Getopt&#58;&#58;Long qw(GetOptions);
use File&#58;&#58;Basename;
use Date&#58;&#58;Manip;

######## Retrieve Global variables ################################
our %o;
our %metric;
...</pre></div><div class='update_description'><i onclick="document.location='7718#1260490266'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-11T00:11:06+00:00">Dec 11, 2009 12:11 AM UTC</time> by <b>bbockelm</b><a class="anchor" name="1260490266">&nbsp;</a></div><pre>Hey Scott,

Can you show the first 5 lines of the executable that gets transferred?

Brian

On Dec 11, 2009, at 12&#58;56 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7718#1260489366'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-10T23:56:06+00:00">Dec 10, 2009 11:56 PM UTC</time> by <b>scott@....</b><a class="anchor" name="1260489366">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Can you look at the classad for 53073 and attach the log file to this ticket (Log directory can be ascertained from &#34;condor_q -l 53073&#34;)?  I&#39;ll look at it tomorrow (past midnight here), or maybe Chris might have some time today.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; In fact, post the entire ClassAd if possible.</font>

See attached (different job, same problem). The stderr and stdout files
were empty.

Scott</pre></div><div class='update_description'><i onclick="document.location='7718#1260467046'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-10T17:44:06+00:00">Dec 10, 2009 05:44 PM UTC</time> by <b>scott@....</b><a class="anchor" name="1260467046">&nbsp;</a></div><pre>Brian,

I ended up disabling that probe. I&#39;ll enable it again today and post the
log and classad asap.

Scott</pre></div><div class='update_description'><i onclick="document.location='7718#1260315846'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-08T23:44:06+00:00">Dec 8, 2009 11:44 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1260315846">&nbsp;</a></div><pre>Hey Scott,

Can you look at the classad for 53073 and attach the log file to this ticket (Log directory can be ascertained from &#34;condor_q -l 53073&#34;)?  I&#39;ll look at it tomorrow (past midnight here), or maybe Chris might have some time today.

In fact, post the entire ClassAd if possible.

Brian

On Dec 8, 2009, at 8&#58;38 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7718#1260301087'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-08T19:38:07+00:00">Dec 8, 2009 07:38 PM UTC</time> by <b>scott@....</b><a class="anchor" name="1260301087">&nbsp;</a></div><pre>I&#39;m about to head to lunch but here are some details...

[root@cms ~]# condor_q -hold -better-analyze rsvprobe|tail -5
---
53073.000&#58;  Request is held.

Hold reason&#58; Failed to execute
&#39;/home/rsvprobe/.globus/.gass_cache/local/md5/cc/71707f456c5e29407f9495ed3dfd54/md5/02/38d6dd0563520b83ed53dd32216e4e/data&#39;
with arguments --vdt-location /opt/osg-1.2.0 --gratia-probe-name condor&#58;
Exec format error

[root@cms ~]#

There are currently 119 rsvprobe jobs being held. All of them relate to
the gratia condor probe. If I take a look at that file it looks normal
(see attached). Perms look good&#58;

-rwxrwxr-x 3 rsvprobe rsvprobe 20987 Dec  8 10&#58;25 ./data

When I run it with the above args and it seems to exit normally
(although the output is questionable)&#58;

[root@cms ~]# ./data --vdt-location /opt/osg-1.2.0 --gratia-probe-name
condor
&#60;?xml version=&#34;1.0&#34; encoding=&#34;ISO8859-1&#34; ?&#62;
&#60;WorkerScriptOutput&#62;
&#60;ExitCode&#62;0&#60;/ExitCode&#62;
&#60;StdOut&#62;
&#60;MetricStatus&#62;1&#60;/MetricStatus&#62;
&#60;DetailsData&#62;1 files waiting to be re-sent to
gratia-osg-prod.opensciencegrid.org&#58;80.
126 files in data folder /opt/osg-1.2.0/gratia/var/data.
Probe condor&#58;cms.tier3.ucdavis.edu has sent data to Gratia collector
within the last hour.
Probe condor&#58;cms.tier3.ucdavis.edu not found in check of probes
<div id='show_981400999' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_981400999'>reporting to gratia-osg-prod.opensciencegrid.org&#58;80 from UCD.
Check Collector SiteName translation on
gratia-osg-prod.opensciencegrid.org&#58;80
wget -q --tries=1 --timeout=10 -O -
&#39;<a href='http&#58;//gratia-osg-prod.opensciencegrid.org&#58;80/gratia-administration/monitor-status.html?sitename=UCD&#39' target='_blank' rel='nofollow'>http&#58;//gratia-osg-prod.opensciencegrid.org&#58;80/gratia-administration/monitor-status.html?sitename=UCD&#39</a>;
2&#62;/dev/null | grep -e
&#39;^(probename=){0,1}condor&#58;cms.tier3.ucdavis.edu[|&#58;][ 	]*last-contact=&#39;
&#60;/DetailsData&#62;
&#60;/StdOut&#62;
&#60;StdErr&#62;&#60;/StdErr&#62;
&#60;/WorkerScriptOutput&#62;

There is nothing in the gratia logs concerning that job&#58;

[root@cms logs]# grep 53073 /opt/osg-1.2.0/gratia/var/logs/*
[root@cms logs]#

I have attached the rsvprobe logs for this probe.

Any ideas?

I&#39;ll try AIM after lunch.

Scott
</div><script type='text/javascript'>
        $('#show_981400999').click(function() {
            $('#detail_981400999').slideDown("normal");
            $('#show_981400999').hide();
            $('#hide_981400999').show();
        });
        $('#hide_981400999').click(function() {
            $('#detail_981400999').slideUp();
            $('#hide_981400999').hide();
            $('#show_981400999').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='7718#1260297307'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-08T18:35:07+00:00">Dec 8, 2009 06:35 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1260297307">&nbsp;</a></div><pre>Hey Scott,

I&#39;m looking at your RSV probe issues.  I can&#39;t seem to see any error messages on this ticket from the RSV probe.  Are there any you can share?  What are you seeing if you run &#34;ps faux&#34;?  Where do you see processes pile up, on the cluster head node or the RSV submit host?

I&#39;m at CERN right now - the easiest way to reach me for quick debugging is via IM on AOL Instant Messenger, screenname &#34;BrianB UNL&#34;.

Thanks,

Brian</pre></div><div class='update_description'><i onclick="document.location='7718#1260293891'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-08T17:38:11+00:00">Dec 8, 2009 05:38 PM UTC</time> by <b>scott@....</b><a class="anchor" name="1260293891">&nbsp;</a></div><pre>Hrm, is there a better place to file this? Maybe on savannah? I&#39;d like
to resolve it asap since the jobs being held in my queue is growing by
the hour.

Thanks,
Scott</pre></div><div class='update_description'><i onclick="document.location='7718#1260215048'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-07T19:44:08+00:00">Dec 7, 2009 07:44 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1260215048">&nbsp;</a></div><pre>Hi Scott,

Sorry but I am not very familiar with the internal workings of the
gratia-config-probe &#58;( I notice gratia-ops and Brian B are both on the
ticket, hopefully someone from gratia-ops or Brian will figure this one
out for you.

Cheers,
-ag

On 12/4/2009 4&#58;41 PM, Scott Beardsley pondered&#58;
<font color='#7F7E6F'>&#62; Arvind,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;m told you might be able to help out on this one. I&#39;m seeing some</font>
<font color='#7F7E6F'>&#62; strangeness in my gratia-config-probe RSV job. It is hanging and</font>
<font color='#7F7E6F'>&#62; entering my condor hold queue. It never actually finishes. There is more</font>
<font color='#7F7E6F'>&#62; info here[1] and my rsv page is here[2]. Any ideas on what might be wrong?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks!</font>
<font color='#7F7E6F'>&#62; Scott</font>
<font color='#7F7E6F'>&#62; -------------</font>
<font color='#7F7E6F'>&#62; [1] <a href='7718.html' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=7718</a></font>
<font color='#7F7E6F'>&#62; [2] <a href='https&#58;//cms.tier3.ucdavis.edu&#58;8443/rsv/' target='_blank' rel='nofollow'>https&#58;//cms.tier3.ucdavis.edu&#58;8443/rsv/</a></font>
<font color='#7F7E6F'>&#62;</font></pre></div><div class='update_description'><i onclick="document.location='7718#1259946486'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-04T17:08:06+00:00">Dec 4, 2009 05:08 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1259946486">&nbsp;</a></div><pre>Hey GOC, Scott,

I&#39;m about to head out for a short vacation.  I&#39;ll be back Monday.

Can you set this ticket to send out a reminder on Monday morning?  I haven&#39;t been following too closely, and I&#39;d like to help Scott with the loose ends.

Brian

On Dec 3, 2009, at 5&#58;22 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7718#1259882526'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-03T23:22:06+00:00">Dec 3, 2009 11:22 PM UTC</time> by <b>scott@....</b><a class="anchor" name="1259882526">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; If you are using the new Gratia.py I sent to you, please feel free to</font>
<font color='#7F7E6F'>&#62;  change the BundleSize in ProbeConfig to 100 or even 200. The</font>
<font color='#7F7E6F'>&#62; Gratia.py should be intelligent enough not to send bundles that are</font>
<font color='#7F7E6F'>&#62; too large for the collector. I think you&#39;re good here now too.</font>

I&#39;ve installed the latest version and both probes should be using it. I
also bumped the BundleSize to 100.

<font color='#7F7E6F'>&#62; GOC&#58; please remove me from this ticket, and assign RSV for diagnosis</font>
<font color='#7F7E6F'>&#62; of Scott&#39;s held rsvprobe job problem. It&#39;s looking like a PATH /</font>
<font color='#7F7E6F'>&#62; install problem.</font>

Any tips would be appreciated &#58;|

<font color='#7F7E6F'>&#62; Thanks for your work resolving these issues.</font>
<font color='#7F7E6F'>&#62;</font>

Thank *YOU* for your help.

Scott</pre></div><div class='update_description'><i onclick="document.location='7718#1259881807'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-03T23:10:07+00:00">Dec 3, 2009 11:10 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1259881807">&nbsp;</a></div><pre>Hi Scott,

Thanks for this.

The hadoop probe is sending correctly to
osg-transfer.opensciencegrid.org, but we&#39;re experiencing a backlog at
the moment due to an overenthusiastic probe clearing a backlog elsewhere.

If you are using the new Gratia.py I sent to you, please feel free to
change the BundleSize in ProbeConfig to 100 or even 200. The Gratia.py
should be intelligent enough not to send bundles that are too large for
the collector. I think you&#39;re good here now too.

GOC&#58; please remove me from this ticket, and assign RSV for diagnosis of
Scott&#39;s held rsvprobe job problem. It&#39;s looking like a PATH / install
problem.

Thanks for your work resolving these issues.

Best,
Chris.

--
Chris Green &#60;greenc@....&#62;, FNAL CD/SCF/GRID; &#39;phone (630) 840-2167.
IRC&#58; greenc@...., ChrisGreen@....;
chissgreen (AIM, Yahoo); chissg@.... (MSNM);
chris.h.green (Google Talk).</pre></div><div class='update_description'><i onclick="document.location='7718#1259879646'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-03T22:34:06+00:00">Dec 3, 2009 10:34 PM UTC</time> by <b>scott@....</b><a class="anchor" name="1259879646">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; The rssvprobe job is something else entirely, and indicates that there</font>
<font color='#7F7E6F'>&#62; is an exec format error. This is common when, for instance, you attempt</font>
<font color='#7F7E6F'>&#62; to run an x86-64 binary on an i386 system. Since I was under the</font>
<font color='#7F7E6F'>&#62; impression that this was a script, I&#39;m confused. Maybe the path is</font>
<font color='#7F7E6F'>&#62; screwed up and you&#39;re trying to execute the 64-bit python executable on</font>
<font color='#7F7E6F'>&#62; a 32-bit system -- .pyc problem, maybe? This is just a guess.</font>

I think it is actually attempting to execute a perl script. The script
is executable and seems to run OK when I do it manually. I&#39;m guessing it
is being called via the wrong exec() command?

<font color='#7F7E6F'>&#62; You currently have two outstanding issues, as far as I can tell&#58; the RSV</font>
<font color='#7F7E6F'>&#62; probe execution and</font>

Any idea who can help with this? Is there a RSV-users mailing list?

<font color='#7F7E6F'>&#62; the proper configuration of the hadoop probe.</font>

I&#39;ve just re-enabled the Hadoop probe. I pointed it at
gratia-osg-transfer.opensciencegrid.org&#58;80

Please verify that I&#39;m not slamming ya&#39;ll again.

I just ran it manually and it looks good AFAICT&#58;

...

2009-12-03 14&#58;30&#58;39 PST Gratia&#58; OK - Processed bundle with 9 records&#58;  OK
2009-12-03 14&#58;30&#58;39 PST Gratia&#58;
***********************************************************
2009-12-03 14&#58;30&#58;39 PST Gratia&#58; Removing log files older than 31 days
from /opt/vdt/gratia/var/logs/
2009-12-03 14&#58;30&#58;39 PST Gratia&#58; Removing incomplete data files older
than 31 days from /opt/vdt/gratia/var/data/
2009-12-03 14&#58;30&#58;39 PST Gratia&#58; End of execution summary&#58; new records
<div id='show_275581401' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_275581401'>sent successfully&#58; 5098
2009-12-03 14&#58;30&#58;39 PST Gratia&#58;                           new records
suppressed&#58; 0
2009-12-03 14&#58;30&#58;39 PST Gratia&#58;                           new records
failed&#58; 0
2009-12-03 14&#58;30&#58;39 PST Gratia&#58;                           records
reprocessed successfully&#58; 0
2009-12-03 14&#58;30&#58;39 PST Gratia&#58;                           reprocessed
records failed&#58; 0
2009-12-03 14&#58;30&#58;39 PST Gratia&#58;                           handshake
records sent successfully&#58; 1
2009-12-03 14&#58;30&#58;39 PST Gratia&#58;                           handshake
records failed&#58; 0
2009-12-03 14&#58;30&#58;39 PST Gratia&#58;                           bundle of
records sent successfully&#58; 510
2009-12-03 14&#58;30&#58;39 PST Gratia&#58;                           bundle of
records failed&#58; 0
2009-12-03 14&#58;30&#58;39 PST Gratia&#58; End-of-execution disconnect ...
[root@cms gratia]# echo $?
0

Thanks!
Scott
</div><script type='text/javascript'>
        $('#show_275581401').click(function() {
            $('#detail_275581401').slideDown("normal");
            $('#show_275581401').hide();
            $('#hide_275581401').show();
        });
        $('#hide_275581401').click(function() {
            $('#detail_275581401').slideUp();
            $('#hide_275581401').hide();
            $('#show_275581401').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='7718#1259872266'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-03T20:31:06+00:00">Dec 3, 2009 08:31 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1259872266">&nbsp;</a></div><pre>Hi,

We&#39;re conflating two problems here. The held rsvprobe job has nothing to
do with the gratia condor probe per se. The condor probe is now talking
to the production collector and has been since 16&#58;17&#58;00 CST yesterday.
We&#39;re receiving records, and they look OK.

The rssvprobe job is something else entirely, and indicates that there
is an exec format error. This is common when, for instance, you attempt
to run an x86-64 binary on an i386 system. Since I was under the
impression that this was a script, I&#39;m confused. Maybe the path is
screwed up and you&#39;re trying to execute the 64-bit python executable on
a 32-bit system -- .pyc problem, maybe? This is just a guess.

You currently have two outstanding issues, as far as I can tell&#58; the RSV
probe execution and the proper configuration of the hadoop probe. The
condor probe appears to be working well.

I&#39;ve cc&#58;d Brian in case he&#39;s not on the FP cc&#58; list for help and
direction on the remaining issues. I think the condor probe at least is
good to go.

Thanks for looking at this,

Chris.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7718#1259865427'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-03T18:37:07+00:00">Dec 3, 2009 06:37 PM UTC</time> by <b>scott@....</b><a class="anchor" name="1259865427">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; I&#39;m *really* attaching the python file this time.</font>

Thanks, I&#39;ll look at the changes and install it.

<font color='#7F7E6F'>&#62; Please send me the tarball of $VDT_LOCATION/gratia/var/logs/,</font>

see attached.

Scott</pre></div><div class='update_description'><i onclick="document.location='7718#1259864526'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-03T18:22:06+00:00">Dec 3, 2009 06:22 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1259864526">&nbsp;</a></div><pre>Hi,

I&#39;m *really* attaching the python file this time. Please send me the
tarball of $VDT_LOCATION/gratia/var/logs/, or place it somewhere I can
pick it up. I&#39;ve compressed it to avoid either of our mailers causing
text formating problems. Please let me know if there is a problem
uncompressing or installing it.

Thanks,
Chris.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7718#1259793366'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-02T22:36:06+00:00">Dec 2, 2009 10:36 PM UTC</time> by <b>scott@....</b><a class="anchor" name="1259793366">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Thanks for this. The probe configuration here looks reasonable. I&#39;m</font>
<font color='#7F7E6F'>&#62; attaching to this ticket a modified Gratia.py that you can put in</font>
<font color='#7F7E6F'>&#62; $VDT_LOCATION/gratia/probe/common (save off the old one and remove</font>
<font color='#7F7E6F'>&#62; the .pyc file). This should ensure that no probe can send too large a</font>
<font color='#7F7E6F'>&#62; bundle of records and then you should be able to re-enable your</font>
<font color='#7F7E6F'>&#62; hadoop probe to send to gratia-osg-transfer.opensciencegrid.org&#58;80.</font>

I don&#39;t see your attachment. I did get a smime signature and the notes
section of the ticket system show that you attached something but I
can&#39;t find a place to download the modified python script.

<font color='#7F7E6F'>&#62; Check whether the probe is running with vdt-control --list and</font>
<font color='#7F7E6F'>&#62; crontab -l. If it&#39;s enabled in the former but not the latter, execute</font>
<font color='#7F7E6F'>&#62;  &#34;vdt-control --on gratia-condor&#34;</font>

gratia-condor is enabled but the probe is failing and the job is
entering the hold state in condor. Any tips?

Scott</pre></div><div class='update_description'><i onclick="document.location='7718#1259792107'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-02T22:15:07+00:00">Dec 2, 2009 10:15 PM UTC</time> by <b>scott@....</b><a class="anchor" name="1259792107">&nbsp;</a></div><pre>It looks like my probes are erroring out right now (I&#39;m guessing because
of the firewall block)&#58;

When I run the following manually&#58;

# su - rsvprobe
$ . /opt/osg-1.2.0/setup.sh
$
/home/rsvprobe/.globus/.gass_cache/local/md5/0c/3b50494b9f8c68597690bea1cc2a84/md5/c7/abaf76add4cad71b2e7dbe6b4330ba/data
--vdt-location /opt/osg-1.2.0 --gratia-probe-name condor

I get&#58;

&#60;?xml version=&#34;1.0&#34; encoding=&#34;ISO8859-1&#34; ?&#62;
&#60;WorkerScriptOutput&#62;
&#60;ExitCode&#62;0&#60;/ExitCode&#62;
&#60;StdOut&#62;
&#60;MetricStatus&#62;1&#60;/MetricStatus&#62;
&#60;DetailsData&#62;Not root&#58; cannot examine crontab (not a critical error).
Not one and only one &#96;&#58;&#39; in MeterName .
3 files waiting to be re-sent to gratia-osg-prod.opensciencegrid.org&#58;80.
96 files in data folder /opt/osg-1.2.0/gratia/var/data.
Probe  has sent data to Gratia collector within the last hour.
Probe  not found in check of probes reporting to
gratia-osg-prod.opensciencegrid.org&#58;80 from UCD.
Check Collector SiteName translation on
gratia-osg-prod.opensciencegrid.org&#58;80
wget -q --tries=1 --timeout=10 -O -
&#39;<a href='http&#58;//gratia-osg-prod.opensciencegrid.org&#58;80/gratia-administration/monitor-status.html?sitename=UCD&#39' target='_blank' rel='nofollow'>http&#58;//gratia-osg-prod.opensciencegrid.org&#58;80/gratia-administration/monitor-status.html?sitename=UCD&#39</a>;
2&#62;/dev/null | grep -e &#39;^(probename=){0,1}[|&#58;][ 	]*last-contact=&#39;
Please check ProbeConfig for problems.
&#60;/DetailsData&#62;
&#60;/StdOut&#62;
&#60;StdErr&#62;&#60;/StdErr&#62;
&#60;/WorkerScriptOutput&#62;
<div id='show_151091556' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_151091556'>
Scott
</div><script type='text/javascript'>
        $('#show_151091556').click(function() {
            $('#detail_151091556').slideDown("normal");
            $('#show_151091556').hide();
            $('#hide_151091556').show();
        });
        $('#hide_151091556').click(function() {
            $('#detail_151091556').slideUp();
            $('#hide_151091556').hide();
            $('#show_151091556').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='7718#1259791925'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-02T22:12:05+00:00">Dec 2, 2009 10:12 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1259791925">&nbsp;</a></div><pre>Hi,

Thanks for this. The probe configuration here looks reasonable. I&#39;m
attaching to this ticket a modified Gratia.py that you can put in
$VDT_LOCATION/gratia/probe/common (save off the old one and remove the
.pyc file). This should ensure that no probe can send too large a bundle
of records and then you should be able to re-enable your hadoop probe to
send to gratia-osg-transfer.opensciencegrid.org&#58;80.

The firewall block has been removed. We should start to receive records
shortly.

Check whether the probe is running with vdt-control --list and crontab
-l. If it&#39;s enabled in the former but not the latter, execute
&#34;vdt-control --on gratia-condor&#34;

Let me know when you have the hadoop probe pointing to the right place
and running.

Thanks,
Chris.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7718#1259791027'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-02T21:57:07+00:00">Dec 2, 2009 09:57 PM UTC</time> by <b>scott@....</b><a class="anchor" name="1259791027">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Have you been able to configure the probe yet?</font>

Sorry about the long absence. I&#39;ve had other problems on my list and I&#39;m
just now getting to this.

I just reconfigured the gratia-condor probe on cms.tier3.ucdavis.edu.
What follows is my ProbeConfig. I&#39;ll wait on enabling the hadoop probe
until I get the condor probe going. AFAICT, I&#39;ve never had gratia
configured properly. Here is my config (the condor probe is re-enabled)&#58;

&#60;ProbeConfiguration

Title1=&#34;Collector Information&#34;

CollectorHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
Comments0=&#34;SOAPHost is now replaced with CollectorHost&#34;
SOAPHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
SSLHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
SSLRegistrationHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;

CollectorService=&#34;/gratia-servlets/rmi&#34;
SSLCollectorService=&#34;/gratia-servlets/rmi&#34;
RegistrationService=&#34;/gratia-registration/register&#34;

Title2=&#34;Probe information and functional configuration&#34;

ProbeName=&#34;condor&#58;cms.tier3.ucdavis.edu&#34;
Comments1=&#34;ProbeName used to be spelled &#39;MeterName&#39;&#34;
SiteName=&#34;UCD&#34;
Grid=&#34;OSG&#34;
SuppressUnknownVORecords=&#34;0&#34;
SuppressNoDNRecords=&#34;0&#34;
SuppressGridLocalRecords=&#34;1&#34;
EnableProbe=&#34;1&#34;

<div id='show_942183181' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_942183181'>Title3=&#34;Tuning parameter&#34;

BundleSize=&#34;10&#34;
MaxPendingFiles=&#34;100000&#34;
UseSyslog=&#34;0&#34;

LogLevel=&#34;2&#34;
DebugLevel=&#34;2&#34;
LogRotate=&#34;31&#34;
GratiaExtension=&#34;gratia.xml&#34;

Title4=&#34;Authentication Configuration&#34;

UseSSL=&#34;0&#34;
CertificateFile=&#34;/etc/grid-security/hostcert.pem&#34;
KeyFile=&#34;/etc/grid-security/hostkey.pem&#34;
UseGratiaCertificates=&#34;0&#34;
Comments2=&#34;If no directory is specified the gratia certificate
file will be created in &#39;WorkingFolder&#39;/certs.&#34;
GratiaCertificateFile=&#34;gratia.probecert.pem&#34;
GratiaKeyFile=&#34;gratia.probekey.pem&#34;

Title5=&#34;File and directory location&#34;

VDTSetupFile=&#34;/opt/osg-1.2.0/setup.sh&#34;
UserVOMapFile=&#34;/opt/osg-1.2.0/monitoring/osg-user-vo-map.txt&#34;
GridftpLogDir=&#34;/opt/osg-1.2.0/globus/var/log&#34;

DataFolder=&#34;/opt/osg-1.2.0/gratia/var/data/&#34;
WorkingFolder=&#34;/opt/osg-1.2.0/gratia/var/tmp&#34;
LogFolder=&#34;/opt/osg-1.2.0/gratia/var/logs/&#34;

/&#62;
</div><script type='text/javascript'>
        $('#show_942183181').click(function() {
            $('#detail_942183181').slideDown("normal");
            $('#show_942183181').hide();
            $('#hide_942183181').show();
        });
        $('#hide_942183181').click(function() {
            $('#detail_942183181').slideUp();
            $('#hide_942183181').hide();
            $('#show_942183181').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='7718#1259715789'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-02T01:03:09+00:00">Dec 2, 2009 01:03 AM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1259715789">&nbsp;</a></div><pre>Hey Scott,

Have you been able to configure the probe yet?

Thanks,
Christopher</pre></div><div class='update_description'><i onclick="document.location='7718#1259108250'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-25T00:17:30+00:00">Nov 25, 2009 12:17 AM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1259108250">&nbsp;</a></div><pre>Hey Scott,

Have you been able to configure the probe yet?

Thanks,
Christopher</pre></div><div class='update_description'><i onclick="document.location='7718#1258405977'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-16T21:12:57+00:00">Nov 16, 2009 09:12 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1258405977">&nbsp;</a></div><pre>Hey Scott,

Have you been able to configure the probe yet?

Thanks,
Christopher</pre></div><div class='update_description'><i onclick="document.location='7718#1257971886'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-11T20:38:06+00:00">Nov 11, 2009 08:38 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1257971886">&nbsp;</a></div><pre>Hi,

Message from Brian&#58; please configure your hadoop probe to report to (CollectorHost)&#58;

gratia-test.unl.edu&#58;8880

When you have done that, we can remove the firewall entry around the batch collector.

Thanks,
Chris.

Open Science Grid FootPrints wrote&#58;  [Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='7718#1257971346'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-11T20:29:06+00:00">Nov 11, 2009 08:29 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1257971346">&nbsp;</a></div><pre>Hi,

You only need to disable your hadoop probe, or in its ProbeConfig file
set the BundleSize to &#34;10&#34; instead of its current &#34;20&#34;

You should keep your batch probes operating. As soon as we deactivate
the firewall, your batch accounting will start to catch up.

Thanks,
Chris.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7718#1257969908'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-11T20:05:08+00:00">Nov 11, 2009 08:05 PM UTC</time> by <b>scott@....</b><a class="anchor" name="1257969908">&nbsp;</a></div><pre>I disabled the gratia probes for the time being.</pre></div><div class='update_description'><i onclick="document.location='7718#1257788108'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-09T17:35:08+00:00">Nov 9, 2009 05:35 PM UTC</time> by <b>chris.h.green@....</b><a class="anchor" name="1257788108">&nbsp;</a></div><pre>Hi,

I should add that this probe has been sending &#62;2MB POSTs every three
seconds for 11 minutes of every hour, and has been affecting our
performance. This is the reason that we took the step of rejecting UCD
Gratia submissions by IP.

Thanks,
Chris.</pre></div><div class='update_description'><i onclick="document.location='7718#1257787831'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-09T17:30:31+00:00">Nov 9, 2009 05:30 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1257787831">&nbsp;</a></div><pre>The CMS T3 site, UCD, has since Friday been sending overlarge POSTs to the Gratia production collector, gratia-osg-prod.opensciencegrid.org.

Investigation shows that the following probes are reporting to this collector from 128.120.246.87 as of this morning&#58;

condor&#58;cms.tier3.ucdavis.edu
hadoop-storage&#58;cms.tier3.ucdavis.edu

The latter probe should be reporting to gratia-osg-transfer.opensciencegrid.org&#58;80, *not* gratia-osg-prod. In any case, I believe this is the problem.

As of this morning, the culprit IP address was rejected at our firewall. Until this problem is resolved your site will not receive *any* credit for batch activity.

UC-Davis&#58; please deactivate your hadoop probe and liaise with the probe developer, Brian Bockelman, on limiting the size of records. At the very least you should re-configure the probe to report to gratia-osg-transfer.opensciencegrid.org&#58;80, but do *not* reactivate the probe until you are sure the problem will not recur. As soon as you advise that the probe has been deactivated, I will amend our firewall entries to allow access so that the batch accounting backlog can be cleared.

GOC, please assign to USCMS-T3 support and Brian Bockelman as developer of the hadoop probe, with cc&#58; ONLY to Gratia-Ops.

Thanks for your help and time,
Chris Green.</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F7718">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
