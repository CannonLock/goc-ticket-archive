<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[9110] Problems updating WN client</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=9110" method="post">
<div class="page-header">
    <h3><span class="muted">9110</span> / Problems updating WN client</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Marco Mambelli</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Check for current updates</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-09-14</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG RA <span class="muted"> / OSG GOC Support Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=9110", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/9110?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/9110?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Problems%20updating%20WN%20client%20ISSUE%3D9110%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='9110#1283884147'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-07T18:29:07+00:00">Sep 7, 2010 06:29 PM UTC</time> by <b>Scott Kronenfeld</b><a class="anchor" name="1283884147">&nbsp;</a></div><pre>Yes, please close the ticket.

On Tue, Sep 7, 2010 at 12&#58;13 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9110#1283879628'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-07T17:13:48+00:00">Sep 7, 2010 05:13 PM UTC</time><a class="anchor" name="1283879628">&nbsp;</a></div><pre>I think this has been solved.

Scott,
can you confirm that the problem has been solved and the ticket can be closed?
Thank you,
Marco</pre></div><div class='update_description'><i onclick="document.location='9110#1283877056'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-09-07T16:30:56+00:00">Sep 7, 2010 04:30 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1283877056">&nbsp;</a></div><pre>Marco,

Has your issue been resolved?  Can we close out this ticket?

Thanks,

-Alain Deximo</pre></div><div class='update_description'><i onclick="document.location='9110#1283270411'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-08-31T16:00:11+00:00">Aug 31, 2010 04:00 PM UTC</time> by <b>Scott Kronenfeld</b><a class="anchor" name="1283270411">&nbsp;</a></div><pre>Thanks for the clarification Alain.  I&#39;ve filed a bug report because
the header line in the ticket is inaccurate.

What&#39;s the next action on this ticket?  If Richard needs help with his
wn-client re-installation I can do so (I think he didn&#39;t answer that
question when I asked?).  But unfortunately he no longer has the
necessary backup to do testing.

I&#39;ve reproduced the bug.
I coded a fix into the vdt-updater script
I tested the code fix locally
The fix was released in VDT 2.0.0p20 on 8/26.

Richard, can we close this ticket?

Thanks,
scot

On Mon, Aug 30, 2010 at 11&#58;27 AM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9110#1283185618'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-08-30T16:26:58+00:00">Aug 30, 2010 04:26 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1283185618">&nbsp;</a></div><pre>Scott,

This is due to a change in the ticket fields without an update provided.  So when an email is sent out, the last updated entry is used in the email sent out.  Which in this case was your last email replying back to Richard.  Hope this clarifies things up for you.

Regards,

-Alain Deximo</pre></div><div class='update_description'><i onclick="document.location='9110#1282919946'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-08-27T14:39:06+00:00">Aug 27, 2010 02:39 PM UTC</time> by <b>Scott Kronenfeld</b><a class="anchor" name="1282919946">&nbsp;</a></div><pre>I sent that email 4 days ago.  Did it just reach the ticketing system?
I&#39;ve seen this happen before, do you understand the cause of the
delay?

On Fri, Aug 27, 2010 at 7&#58;17 AM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9110#1282591986'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-08-23T19:33:06+00:00">Aug 23, 2010 07:33 PM UTC</time> by <b>Scott Kronenfeld</b><a class="anchor" name="1282591986">&nbsp;</a></div><pre>Richard,
You&#39;re right - you will not be able to test using a Pacman install
that has failed unless you restore from backup first.  Sorry if I did
not make that clear in my original mail.

I am confident with my local testing of this issue.  As long as you
don&#39;t need further help installing/configuring your wn-client I think
we can close this ticket.

Sorry you ran into this bug, hopefully nobody else will now.  Thanks
for reporting it.

-scot

On Mon, Aug 23, 2010 at 1&#58;30 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9110#1282588207'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-08-23T18:30:07+00:00">Aug 23, 2010 06:30 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1282588207">&nbsp;</a></div><pre>Scot,

Ok, I just tried to perform the update using the steps you outlined, with the new updater script.  It failed again trying to update the first package, which was jdk-1.5 (stdout/err follows).  I also append the tail of vdt-update.log at the end of this message.  I applied this on top of the installation that had previously bombed out with the original installer.  If this is impossible then I am unable to test the fix because the old pre-update osg-1.2.10 image has already rolled off the back of my backup stack.

-Richard J.

<font color='#7F7E6F'>&#62; Updating 13 packages&#58;</font>
<font color='#7F7E6F'>&#62;   * JDK-1.5</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ERROR&#58; &#39;pacman -update JDK-1.5&#39; failed (see logs/vdt-update.log for details).</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -------------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; An error occurred while performing pacman updates.  Your VDT installation is</font>
<font color='#7F7E6F'>&#62; probably not usable now and may be very hard to fix.  It is best to restore</font>
<font color='#7F7E6F'>&#62; your VDT installation from backup.  If you think that the error was transient</font>
<font color='#7F7E6F'>&#62; or can be fixed, then rerun vdt-updater after restoring from backup.</font>
<font color='#7F7E6F'>&#62; Otherwise, email the VDT team at &#39;vdt-support@....&#39; for help.</font>
<font color='#7F7E6F'>&#62; If possible, first run vdt-system-profiler and attach the resulting</font>
<font color='#7F7E6F'>&#62; vdt-profile.txt file to the email.</font>

... and from the end of the vdt-update.log file&#58;

<font color='#7F7E6F'>&#62; ### 2010-08-23 14&#58;22&#58;10 Updating 13 packages&#58;</font>
<font color='#7F7E6F'>&#62; ### 2010-08-23 14&#58;22&#58;10   * JDK-1.5</font>
<font color='#7F7E6F'>&#62; ### 2010-08-23 14&#58;22&#58;10 JDK-1.5 pre-update step&#58; pre_jdk_1_5</font>
<font color='#7F7E6F'>&#62; ### 2010-08-23 14&#58;22&#58;10 pacman -update JDK-1.5</font>
<font color='#7F7E6F'>&#62; None of the following alternatives are satisfied&#58; system processor Test that system processor [i686] is equal to [ia64]. hasn&#39;t been attempted yet. Shell command [cd $VDT_LOCATION/srm-client-lbnl/setup; ./configure --enable-clientonly --with-cacert-path=$VDT_LOCATION/globus/TRUSTED_CA &#62;&#62; $VDT_LOCATION/vdt-install.log] has not been acquired. Pacman install failed</font>
<font color='#7F7E6F'>&#62; Package [/usr/local/osg-1.2&#58;<a href='http&#58;//vdt.cs.wisc.edu/vdt_200_cache&#58' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/vdt_200_cache&#58</a>;SRM-Client-LBNL] not [installed]&#58; Package [/usr/local/osg-1.2&#58;<a href='http&#58;//vdt.cs.wisc.edu/vdt_200_cache&#58' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/vdt_200_cache&#58</a>;SRM-Client-LBNL] has not been installed.  Can&#39;t setup.</font>
<font color='#7F7E6F'>&#62; Package [/usr/local/osg-1.2&#58;<a href='http&#58;//software.grid.iu.edu/osg-1.2&#58' target='_blank' rel='nofollow'>http&#58;//software.grid.iu.edu/osg-1.2&#58</a>;wn-client] not [installed]&#58;</font>
<font color='#7F7E6F'>&#62;         Package [/usr/local/osg-1.2&#58;<a href='http&#58;//software.grid.iu.edu/osg-1.2&#58' target='_blank' rel='nofollow'>http&#58;//software.grid.iu.edu/osg-1.2&#58</a>;wn-client] has not been installed.  Can&#39;t setup.</font>
<font color='#7F7E6F'>&#62; ### 2010-08-23 14&#58;22&#58;17 exited with status 1</font>
<font color='#7F7E6F'>&#62; ### 2010-08-23 14&#58;22&#58;17 ERROR&#58; &#39;pacman -update JDK-1.5&#39; failed (see logs/vdt-update.log for details).</font>
<font color='#7F7E6F'>&#62; ### 2010-08-23 14&#58;22&#58;17 -------------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; ### 2010-08-23 14&#58;22&#58;17 An error occurred while performing pacman updates.  Your VDT installation is</font>
<div id='show_375792481' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_375792481'><font color='#7F7E6F'>&#62; probably not usable now and may be very hard to fix.  It is best to restore</font>
<font color='#7F7E6F'>&#62; your VDT installation from backup.  If you think that the error was transient</font>
<font color='#7F7E6F'>&#62; or can be fixed, then rerun vdt-updater after restoring from backup.</font>
<font color='#7F7E6F'>&#62; Otherwise, email the VDT team at &#39;vdt-support@....&#39; for help.</font>
<font color='#7F7E6F'>&#62; If possible, first run vdt-system-profiler and attach the resulting</font>
<font color='#7F7E6F'>&#62; vdt-profile.txt file to the email.</font>
<font color='#7F7E6F'>&#62; ### 2010-08-23 14&#58;22&#58;17 rm -fr /usr/local/osg-1.2/vdt/update/tmp</font>
<font color='#7F7E6F'>&#62; ### 2010-08-23 14&#58;22&#58;17 exited with status 0</font>
</div><script type='text/javascript'>
        $('#show_375792481').click(function() {
            $('#detail_375792481').slideDown("normal");
            $('#show_375792481').hide();
            $('#hide_375792481').show();
        });
        $('#hide_375792481').click(function() {
            $('#detail_375792481').slideUp();
            $('#hide_375792481').hide();
            $('#show_375792481').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='9110#1282343766'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-08-20T22:36:06+00:00">Aug 20, 2010 10:36 PM UTC</time> by <b>Scott Kronenfeld</b><a class="anchor" name="1282343766">&nbsp;</a></div><pre>Richard,
The script is currently only available via Pacman in our ITB cache.
It&#39;s not possible to install from both the production and ITB cache,
so here&#39;s what you&#39;ll need to do.

# Do the usual steps
cd $VDT_LOCATION
pacman -update VDT-Updater

# Then fetch a custom vdt-updater script
wget <a href='http&#58;//vdt.cs.wisc.edu/scot/vdt-updater.rj' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/scot/vdt-updater.rj</a>
chmod 755 vdt-updater.rj
cp vdt/update/vdt-updater vdt/update/vdt-updater.original
mv vdt-updater.rj vdt/update/vdt-updater

# Then run the updater
vdt/update/vdt-updater

Let me know how it goes.

Thanks,
scot

On Fri, Aug 20, 2010 at 5&#58;21 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9110#1282342868'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-08-20T22:21:08+00:00">Aug 20, 2010 10:21 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1282342868">&nbsp;</a></div><pre>Scot,

Ok, I can do it.  Please point me to the updated package.

-Richard J.

On 8/20/2010 5&#58;51 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9110#1282341067'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-08-20T21:51:07+00:00">Aug 20, 2010 09:51 PM UTC</time> by <b>Scott Kronenfeld</b><a class="anchor" name="1282341067">&nbsp;</a></div><pre>I have patched the vdt-updater script to address this issue.  I tested
my patch against the local installation that I used to replicate the
problem.  The fix is in the ITB cache, and will be in the next update.

If Richard still has his previous wn-client install and wants to test
this I can provide him with the vdt-updater script.  If he does not, I
think we&#39;ll have to rely on only my testing.

Thanks,
scot</pre></div><div class='update_description'><i onclick="document.location='9110#1282332606'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-08-20T19:30:06+00:00">Aug 20, 2010 07:30 PM UTC</time> by <b>Scott Kronenfeld</b><a class="anchor" name="1282332606">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; FootPrints Ticket Description&#58;</font>
<font color='#7F7E6F'>&#62; Scot,</font>
<font color='#7F7E6F'>&#62; how is exactly VDT behaving with Java installations?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Here some questions&#58;</font>
<font color='#7F7E6F'>&#62; If there is Java 1.6 in the system is VDT installing its own JRE anyway</font>
<font color='#7F7E6F'>&#62; or is it using the system Java?</font>

The VDT will always install it&#39;s own JDK 1.6 and set JAVA_HOME and
PATH appropriately to point at our copy.

<font color='#7F7E6F'>&#62; Should system admin keep it in the environment or not?</font>

Keep the system Java in the environment?  It doesn&#39;t matter.  The VDT
should always find its own Java.  This is a bug that it is not doing
so during this update.

<font color='#7F7E6F'>&#62; If there is no Java at all in the original system is the update</font>
<font color='#7F7E6F'>&#62; successful or after the removal of 1.5 it will fail anyway?</font>

I just tested this and it fails, as I expected given the behavior I&#39;ve
seen so far.

As I said in my original email, the problem is that for some reason
Java 6 is not in the path when SRM-Client -LBNL is installed, even
though Java 6 has already been installed.  I don&#39;t know if it&#39;s a
Pacman bug or something else.  However, I plan to fix this with a
workaround in the vdt-updater.</pre></div><div class='update_description'><i onclick="document.location='9110#1282331527'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-08-20T19:12:07+00:00">Aug 20, 2010 07:12 PM UTC</time> by <b>marco@....</b><a class="anchor" name="1282331527">&nbsp;</a></div><pre>Scot,
how is exactly VDT behaving with Java installations?

Here some questions&#58;
If there is Java 1.6 in the system is VDT installing its own JRE anyway
or is it using the system Java?
Should system admin keep it in the environment or not?
If there is no Java at all in the original system is the update
successful or after the removal of 1.5 it will fail anyway?

Thank you,
Marco

On Fri, 20 Aug 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9110#1282330626'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-08-20T18:57:06+00:00">Aug 20, 2010 06:57 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1282330626">&nbsp;</a></div><pre>Marco,

I have java 1.6 installed elsewhere on these nodes as well, but the osg environment does not want it in the PATH, as I understand it, because it supplies its own jre.  Perhaps what is happening is that the installation procedure cuts off the limb it is standing on, and somehow falls back to /usr/bin/java or some such artifact from the original OS installation.

-Richard Jones

On 8/20/2010 1&#58;21 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9110#1282324867'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-08-20T17:21:07+00:00">Aug 20, 2010 05:21 PM UTC</time> by <b>Scott Kronenfeld</b><a class="anchor" name="1282324867">&nbsp;</a></div><pre>Richard,
I replicated your problem.  I&#39;m looking into a potential fix.

If you care about the details, here is the problem as I understand it&#58;
- you have JDK 1.4 installed on your system
- our update moves the worker nodes from using JDK 1.5 to JDK 1.6
- Pacman uninstalls JDK 1.5, then installs JDK 1.6.  However, JDK 1.6
is not yet in the PATH
- Pacman updates SRM-Client-LBNL, which requires JDK &#62;= 1.5.
However, since 1.6 is not yet in the path, it finds the system java
which is 1.4

So this will only be a problem at sites that have JDK 1.4 installed.
Sites with a system Java &#62;= 1.5 will not be affected.

As I said, I&#39;m looking into fixing this.  In the meantime, is your
site operational?  I saw that you needed to reinstall the wn-client.
Is everything ok or do you need further assistance?

Thanks,
scot</pre></div><div class='update_description'><i onclick="document.location='9110#1282315147'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-08-20T14:39:07+00:00">Aug 20, 2010 02:39 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1282315147">&nbsp;</a></div><pre>Macro,

The following problems showed up on my worker nodes when I tried to upgrade from my working installation running osg-1.2.10 to the current version osg-1.2.12.  The same problem occurred on both my x86-64 and my i386 nodes.  The last part of the install log showing where the problem occurred is included below.  I followed the upgrade procedure on the web site <a href='https&#58;//twiki.grid.iu.edu/bin/view/ReleaseDocumentation/OSG12UpdateInstructions' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/ReleaseDocumentation/OSG12UpdateInstructions</a> except that I bypassed the automatic installer backup, chosing instead to rely on my weekly scheduled backups carried out automatically on my cluster to recover in case of failure.  That installer backup step is expensive and unnecessary for my site, so I have a habit of bypassing it.

A tail of the install log follows.

-Richard Jones

########## [SRM-Client-LBNL] uninstalled successfully

##########
# Installing Java Development Kit 1.6 [JDK-1.6] at Sat Aug 14 22&#58;22&#58;56 EDT 2010
##########

vdt-untar&#58; jdk-1.6.0_19.x86_rhap_5.tar.gz jdk1.6
vdt-untar&#58; logging files to /usr/local/osg-1.2/vdt/etc/package_data/JDK-1.6.filelist
vdt-untar&#58; fixing binaries with RPATH in &#39;/usr/local/osg-1.2/vdt/extract/jdk-1.6.0_19.x86_rhap_5.tar.gz-unpacked&#39;

########## [JDK-1.6] installed successfully

##########
# Installing  [SRM-Client-LBNL] at Sat Aug 14 22&#58;24&#58;30 EDT 2010
##########

vdt-untar&#58; srmclient2-2.2.1.3.12.tar.gz srm-client-lbnl
vdt-untar&#58; logging files to /usr/local/osg-1.2/vdt/etc/package_data/SRM-Client-LBNL.filelist
vdt-untar&#58; fixing binaries with RPATH in &#39;/usr/local/osg-1.2/vdt/extract/srmclient2-2.2.1.3.12.tar.gz-unpacked&#39;
LOG DATE&#58; 100814222435
logfile is ... bestman.100814222435.log
checking for right SRM_HOME path... SRM_HOME found
checking for correct JAVA path... JAVA found
*** Cannot find old conf files. No backup is done ***
current java version is 1.4.2
checking for JAVA version ( &#62; 1.5.0_01)... higher version needed
### 2010-08-14 22&#58;24&#58;40 ##########
<div id='show_1662326555' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1662326555'>### 2010-08-14 22&#58;24&#58;40 # Finished Pacman updates prematurely in vdt-updater (see logs/vdt-update.log)
### 2010-08-14 22&#58;24&#58;40 ##########
</div><script type='text/javascript'>
        $('#show_1662326555').click(function() {
            $('#detail_1662326555').slideDown("normal");
            $('#show_1662326555').hide();
            $('#hide_1662326555').show();
        });
        $('#hide_1662326555').click(function() {
            $('#detail_1662326555').slideUp();
            $('#hide_1662326555').hide();
            $('#show_1662326555').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='9110#1282247635'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-08-19T19:53:55+00:00">Aug 19, 2010 07:53 PM UTC</time><a class="anchor" name="1282247635">&nbsp;</a></div><pre>Richard, please add more details about the failure. Thenk you, Marco</pre></div><div class='update_description'><i onclick="document.location='9110#1282243989'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-08-19T18:53:09+00:00">Aug 19, 2010 06:53 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1282243989">&nbsp;</a></div><pre>Updating the WNs at UCONN to VDT 1.2.12 the VDT update procedure failed because of problems with the setting of JAVA_HOME. The installation was deemed in bad status and the worker node had to be reinstalled from scratch.</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F9110">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 9110});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
