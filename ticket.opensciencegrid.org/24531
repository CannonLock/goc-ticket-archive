<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[24531] globus-job-manager segfault</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=24531" method="post">
<div class="page-header">
    <h3><span class="muted">24531</span> / globus-job-manager segfault</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Daniel Caunt</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Daniel Caunt</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Close ticket</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-03-20</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Matyas Selmeci <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/24531", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/24531?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/24531?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20globus-job-manager%20segfault%20ISSUE%3D24531%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='24531#1426885346'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-20T21:02:26+00:00">Mar 20, 2015 09:02 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1426885346">&nbsp;</a></div><pre>OK, glad your site is up again.

You should consider upgrading your site to the OSG 3.2 series, since there have been several updates to the Globus packages in the 3.2 series that won&#39;t get backported into 3.1. Also, the 3.1 series will stop getting updates after the end of April.

<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/OSGReleaseSeries' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/OSGReleaseSeries</a> contains instructions on how to upgrade.

-Mat</pre></div><div class='update_description'><i onclick="document.location='24531#1426881258'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-20T19:54:18+00:00">Mar 20, 2015 07:54 PM UTC</time><a class="anchor" name="1426881258">&nbsp;</a></div><pre>Hi Mat,

The debug symbols needed to be installed but I ran into some trouble installing them.  In the interim, being under a bit of pressure to find a quick resolution, I cleared the gram_job_state directory and that has eliminated the memory problems that we were seeing with globus-job-manager.  So, it seems that we can close this ticket.

I appreciate your help.  Hopefully, we can keep this problem from returning.

Thanks.
Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dcaunt/CN=763648/CN=Daniel Caunt</pre></div><div class='update_description'><i onclick="document.location='24531#1426800152'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-19T21:22:32+00:00">Mar 19, 2015 09:22 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1426800152">&nbsp;</a></div><pre>Can you attach gdb to it and get a backtrace?
(gdb /usr/sbin/globus-job-manager &#60;PID&#62;
then do &#39;bt&#39;)
It might ask you to install debug symbols (probably via &#39;debuginfo-install&#39;). They will be useful if you can&#39;t get a decent backtrace otherwise.
-Mat</pre></div><div class='update_description'><i onclick="document.location='24531#1426797932'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-19T20:45:32+00:00">Mar 19, 2015 08:45 PM UTC</time><a class="anchor" name="1426797932">&nbsp;</a></div><pre>Sure thing.  Here&#39;s what I got from the strace of globus-job-manager with PID 10595&#58;

lseek(12, 688128, SEEK_SET)             = 688128
select(18, [0 5 8], [], NULL, {0, 0})   = 0 (Timeout)
lseek(12, 688128, SEEK_SET)             = 688128
select(18, [0 5 8], [], NULL, {0, 0})   = 0 (Timeout)
lseek(12, 688128, SEEK_SET)             = 688128
select(18, [0 5 8], [], NULL, {0, 0})   = 0 (Timeout)

And here&#39;s the associated lsof output for that same process&#58;

[root@net2 ~]# lsof -p 10595
COMMAND     PID     USER   FD   TYPE             DEVICE SIZE/OFF   NODE NAME
globus-jo 10595 usatlas1  cwd    DIR               0,80   155648  42691 /net/atlasgrid/nfs_atlasgrid/home/usatlas1 (atlasgrid&#58;/nfs_atlasgrid)
globus-jo 10595 usatlas1  rtd    DIR              253,0     4096      2 /
globus-jo 10595 usatlas1  txt    REG              253,0   281984 295751 /usr/sbin/globus-job-manager
globus-jo 10595 usatlas1  mem    REG              253,0   157032 432762 /lib64/ld-2.12.so
globus-jo 10595 usatlas1  mem    REG              253,0  1926760 432763 /lib64/libc-2.12.so
globus-jo 10595 usatlas1  mem    REG              253,0    22536 432768 /lib64/libdl-2.12.so
globus-jo 10595 usatlas1  mem    REG              253,0   145896 432765 /lib64/libpthread-2.12.so
globus-jo 10595 usatlas1  mem    REG              253,0   599392 434054 /lib64/libm-2.12.so
globus-jo 10595 usatlas1  mem    REG              253,0    91096 434041 /lib64/libz.so.1.2.3
globus-jo 10595 usatlas1  mem    REG              253,0   124624 434035 /lib64/libselinux.so.1
globus-jo 10595 usatlas1  mem    REG              253,0   113952 434034 /lib64/libresolv-2.12.so
globus-jo 10595 usatlas1  mem    REG              253,0    47400 315912 /usr/lib64/libglobus_rsl.so.2.7.1
globus-jo 10595 usatlas1  mem    REG              253,0    18568 278791 /usr/lib64/libglobus_usage.so.0.3.1
globus-jo 10595 usatlas1  mem    REG              253,0    40384 315970 /usr/lib64/libglobus_gass_cache.so.5.3.1
globus-jo 10595 usatlas1  mem    REG              253,0  1953536 310398 /usr/lib64/libcrypto.so.1.0.1e
globus-jo 10595 usatlas1  mem    REG              253,0    17256 434038 /lib64/libcom_err.so.2.1
globus-jo 10595 usatlas1  mem    REG              253,0    15488 286373 /usr/lib64/libglobus_scheduler_event_generator.so.0.4.4
globus-jo 10595 usatlas1  mem    REG              253,0    63960 315665 /usr/lib64/libglobus_gram_protocol.so.3.8.2
globus-jo 10595 usatlas1  mem    REG              253,0    46368 434036 /lib64/libkrb5support.so.0.1
globus-jo 10595 usatlas1  mem    REG              253,0    76456 315388 /usr/lib64/libglobus_gsi_proxy_core.so.0.6.1
globus-jo 10595 usatlas1  mem    REG              253,0   944712 434039 /lib64/libkrb5.so.3.3
globus-jo 10595 usatlas1  mem    REG              253,0   177520 434037 /lib64/libk5crypto.so.3.1
<div id='show_58824667' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_58824667'>globus-jo 10595 usatlas1  mem    REG              253,0    12592 434033 /lib64/libkeyutils.so.1.3
globus-jo 10595 usatlas1  mem    REG              253,0   280520 434040 /lib64/libgssapi_krb5.so.2.2
globus-jo 10595 usatlas1  mem    REG              253,0    22744 315381 /usr/lib64/libglobus_proxy_ssl.so.1.3.1
globus-jo 10595 usatlas1  mem    REG              253,0   444040 310399 /usr/lib64/libssl.so.1.0.1e
globus-jo 10595 usatlas1  mem    REG              253,0    69704 315387 /usr/lib64/libglobus_gsi_credential.so.1.4.1
globus-jo 10595 usatlas1  mem    REG              253,0    59952 315391 /usr/lib64/libglobus_gss_assist.so.3.5.1
globus-jo 10595 usatlas1  mem    REG              253,0    42632 315385 /usr/lib64/libglobus_oldgaa.so.0.4.4
globus-jo 10595 usatlas1  mem    REG              253,0    19376 315390 /usr/lib64/libglobus_callout.so.0.2.1
globus-jo 10595 usatlas1  mem    REG              253,0    24816 315384 /usr/lib64/libglobus_gsi_cert_utils.so.0.8.1
globus-jo 10595 usatlas1  mem    REG              253,0    11408 315382 /usr/lib64/libglobus_openssl.so.0.3.1
globus-jo 10595 usatlas1  mem    REG              253,0    39288 264607 /usr/lib64/libltdl.so.7.2.1
globus-jo 10595 usatlas1  mem    REG              253,0     7808 316419 /usr/lib64/libglobus_gram_job_manager_callout_error.so.0.2.1
globus-jo 10595 usatlas1  mem    REG              253,0   131224 315389 /usr/lib64/libglobus_gssapi_gsi.so.4.6.7
globus-jo 10595 usatlas1  mem    REG              253,0    51384 315386 /usr/lib64/libglobus_gsi_callback.so.0.4.4
globus-jo 10595 usatlas1  mem    REG              253,0   301752 315379 /usr/lib64/libglobus_common.so.0.14.5
globus-jo 10595 usatlas1  mem    REG              253,0    21144 315380 /usr/lib64/libglobus_openssl_error.so.0.2.1
globus-jo 10595 usatlas1  mem    REG              253,0    53120 315383 /usr/lib64/libglobus_gsi_sysconfig.so.1.4.1
globus-jo 10595 usatlas1  mem    REG              253,0  1383336 315213 /usr/lib64/libxml2.so.2.7.6
globus-jo 10595 usatlas1  mem    REG              253,0   433184 315513 /usr/lib64/libglobus_xio.so.0.3.2
globus-jo 10595 usatlas1  mem    REG              253,0    13096 285978 /usr/lib64/libglobus_gssapi_error.so.2.2.1
globus-jo 10595 usatlas1  mem    REG              253,0   108368 315517 /usr/lib64/libglobus_io.so.3.6.2
globus-jo 10595 usatlas1  mem    REG              253,0    90288 315572 /usr/lib64/libglobus_gass_transfer.so.2.5.1
globus-jo 10595 usatlas1  mem    REG              253,0    65928 393361 /lib64/libnss_files-2.12.so
globus-jo 10595 usatlas1  mem    REG              253,0    31992 422514 /lib64/libnss_sss.so.2
globus-jo 10595 usatlas1  mem    REG              253,0  6806312 674140 /var/lib/sss/mc/passwd
globus-jo 10595 usatlas1  mem    REG              253,0    64584 303127 /usr/lib64/libglobus_xio_gsi_driver.so.0.2.1
globus-jo 10595 usatlas1  mem    REG              253,0    25296 315071 /usr/lib64/libglobus_xio_popen_driver.so.0.2.2
globus-jo 10595 usatlas1  mem    REG              253,0    27424 393359 /lib64/libnss_dns-2.12.so
globus-jo 10595 usatlas1  mem    REG              253,0    18936 315966 /usr/lib64/libglobus_seg_job_manager.so.13.0.45
globus-jo 10595 usatlas1    0u  unix 0xffff880304e7e380      0t0  55092 /var/lib/globus/gram_job_state/usatlas1/net2/lsf.696b2efc.sock
globus-jo 10595 usatlas1    1w   CHR                1,3      0t0   3842 /dev/null
globus-jo 10595 usatlas1    2w   REG              253,0  8361754 678184 /var/log/globus-gatekeeper.log
globus-jo 10595 usatlas1    3w   CHR                1,3      0t0   3842 /dev/null
globus-jo 10595 usatlas1    4r   REG              253,0  6806312 674140 /var/lib/sss/mc/passwd
globus-jo 10595 usatlas1    5r  FIFO                0,8      0t0  55006 pipe
globus-jo 10595 usatlas1    6w   REG              253,0  8361754 678184 /var/log/globus-gatekeeper.log
globus-jo 10595 usatlas1    7w  FIFO                0,8      0t0  55006 pipe
globus-jo 10595 usatlas1    8u  IPv4              55008      0t0    TCP *&#58;55821 (LISTEN)
globus-jo 10595 usatlas1    9uW  REG              253,0        0 675641 /var/lib/globus/gram_job_state/usatlas1/net2/lsf.696b2efc.lock
globus-jo 10595 usatlas1   10u  IPv4              55109      0t0    UDP *&#58;38588
globus-jo 10595 usatlas1   11u  IPv4              55120      0t0    UDP *&#58;51842
globus-jo 10595 usatlas1   12r   REG              253,0   821292 676201 /var/lib/globus/globus-seg-lsf/20150310
globus-jo 10595 usatlas1   13u   REG              253,0     1607 200076 /tmp/tmpf9of14e (deleted)
globus-jo 10595 usatlas1   14w   REG              253,0  2968226 678224 /var/log/globus/gram_usatlas1.log
globus-jo 10595 usatlas1   15u  unix 0xffff88060958d9c0      0t0  57538 socket

So, it looks like it&#39;s seeking on /var/lib/globus/globus-seg-lsf/20150310.

Thanks.
Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dcaunt/CN=763648/CN=Daniel Caunt
</div><script type='text/javascript'>
        $('#show_58824667').click(function() {
            $('#detail_58824667').slideDown("normal");
            $('#show_58824667').hide();
            $('#hide_58824667').show();
        });
        $('#hide_58824667').click(function() {
            $('#detail_58824667').slideUp();
            $('#hide_58824667').hide();
            $('#show_58824667').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='24531#1426795334'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-19T20:02:14+00:00">Mar 19, 2015 08:02 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1426795334">&nbsp;</a></div><pre>Unfortunately, I can&#39;t tell what files those file descriptors in the strace refer to. Can you strace another hung job manager, send the lseek and select lines, then also send the output of
lsof -p &#60;PID OF JOBMANAGER&#62;
so I can match up the file descriptors to actual files?

Thanks,
-Mat</pre></div><div class='update_description'><i onclick="document.location='24531#1426781223'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-19T16:07:03+00:00">Mar 19, 2015 04:07 PM UTC</time><a class="anchor" name="1426781223">&nbsp;</a></div><pre>I&#39;m attaching a file with more context regarding that strace output that I mentioned.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dcaunt/CN=763648/CN=Daniel Caunt</pre></div><div class='update_description'><i onclick="document.location='24531#1426713412'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-18T21:16:52+00:00">Mar 18, 2015 09:16 PM UTC</time><a class="anchor" name="1426713412">&nbsp;</a></div><pre>Mat,

It might also be worth noting that I ran strace on one of the globus-job-manager processes that was using lots of memory and there were thousands of lines like these&#58;

lseek(12, 688128, SEEK_SET)             = 688128
select(36, [0 5 8], [], NULL, {0, 0})   = 0 (Timeout)
lseek(12, 688128, SEEK_SET)             = 688128
select(36, [0 5 8], [], NULL, {0, 0})   = 0 (Timeout)
lseek(12, 688128, SEEK_SET)             = 688128
select(36, [0 5 8], [], NULL, {0, 0})   = 0 (Timeout)
lseek(12, 688128, SEEK_SET)             = 688128

Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dcaunt/CN=763648/CN=Daniel Caunt</pre></div><div class='update_description'><i onclick="document.location='24531#1426710095'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-18T20:21:35+00:00">Mar 18, 2015 08:21 PM UTC</time><a class="anchor" name="1426710095">&nbsp;</a></div><pre>Hi Mat,

There were no updates available in yum for osg-system-profiler so I believe I have the latest version (1.1.0).  Attached is the output.  I ran it before starting globus-gatekeeper because I wasn&#39;t sure if the globus-job-manager processes would cause the system to exhaust its available memory before osg-system-profiler had a chance to complete.  If it&#39;s important for osg-system-profiler to be run while globus-gatekeeper is running, let me know and I&#39;ll try again.

Thanks.
Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dcaunt/CN=763648/CN=Daniel Caunt</pre></div><div class='update_description'><i onclick="document.location='24531#1426705536'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-18T19:05:36+00:00">Mar 18, 2015 07:05 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1426705536">&nbsp;</a></div><pre>Can you update to the latest version of osg-system-profiler, run it, and attach the output?
Thanks,
-Mat</pre></div><div class='update_description'><i onclick="document.location='24531#1426628799'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-17T21:46:39+00:00">Mar 17, 2015 09:46 PM UTC</time> by <b>Tim Theisen</b><a class="anchor" name="1426628799">&nbsp;</a></div><pre>Assigning to Mat</pre></div><div class='update_description'><i onclick="document.location='24531#1426625361'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-17T20:49:21+00:00">Mar 17, 2015 08:49 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1426625361">&nbsp;</a></div><pre>Hi,

We&#39;re experiencing issues similar to ticket 18332 (<a href='http&#58;//ticket.grid.iu.edu/18332?sort=up&' target='_blank' rel='nofollow'>http&#58;//ticket.grid.iu.edu/18332?sort=up&</a>).  After starting globus-gatekeeper, a few globus-job-manager processes on the CE exhaust all available memory which results in errors such as&#58;

Mar 17 16&#58;38&#58;45 net2 GRAM-gatekeeper[28517]&#58; fork failed&#58; Cannot allocate memory
Mar 17 16&#58;38&#58;48 net2 kernel&#58; globus-job-mana[28536]&#58; segfault at 100000000 ip 00000033446275e9 sp 00007fff53aa4110 error 4 in libglobus_common.so.0.14.5[3344600000+47000]

We also see various errors in less /var/log/globus/gram_usatlas1.log&#58;

ts=2015-03-17T20&#58;27&#58;35.148954Z id=13594 event=gram.job.end level=ERROR gramid=/16434166983059893721/8618797994978895249/ job_status=4 status=-25 reason=&#34;the job manager detected an invalid script status&#34;
ts=2015-03-17T20&#58;27&#58;35.179885Z id=13594 event=gram.job.end level=ERROR gramid=/16434166981069240796/8618797994978895249/ job_status=4 status=-17 reason=&#34;the job failed when the job manager attempted to run it&#34;
ts=2015-03-17T20&#58;27&#58;35.228025Z id=13594 event=gram.job.end level=ERROR gramid=/16434166984660292826/8618797994978895249/ job_status=4 status=-5 reason=&#34;the executable does not exist&#34;
ts=2015-03-17T20&#58;27&#58;35.236274Z id=13594 event=gram.job.end level=ERROR gramid=/16434166983596196056/8618797994978895249/ job_status=4 status=-5 reason=&#34;the executable does not exist&#34;
ts=2015-03-17T20&#58;27&#58;38.179792Z id=13594 event=gram.job_ref_swap_out.info level=WARN gramid=/16434166983294997451/8618797994978895249/ msg=&#34;No new references to job, writing state and freeing data&#34;
ts=2015-03-17T20&#58;27&#58;41.749394Z id=13594 event=gram.job_ref_swap_out.info level=WARN gramid=/16434166983653159371/8618797994978895249/ msg=&#34;No new references to job, writing state and freeing data&#34;
ts=2015-03-17T20&#58;27&#58;41.819470Z id=13594 event=gram.job_ref_swap_out.info level=WARN gramid=/16434166981116451786/8618797994978895249/ msg=&#34;No new references to job, writing state and freeing data&#34;
ts=2015-03-17T20&#58;27&#58;41.903130Z id=13594 event=gram.job_ref_swap_out.info level=WARN gramid=/16434166981575121611/8618797994978895249/ msg=&#34;No new references to job, writing state and freeing data&#34;
ts=2015-03-17T20&#58;38&#58;30.950850Z id=28111 event=gram.send_job.end level=WARN status=-3 errno=111 msg=&#34;Error making datagram connection to Job Manager&#34; reason=&#34;Connection refused&#34; path=&#34;/var/lib/globus/gram_job_state/usatlas1/n
et2/lsf.1dc1ba78.sock&#34;
ts=2015-03-17T20&#58;38&#58;30.952995Z id=28109 event=gram.send_job.end level=WARN status=-3 errno=111 msg=&#34;Error making datagram connection to Job Manager&#34; reason=&#34;Connection refused&#34; path=&#34;/var/lib/globus/gram_job_state/usatlas1/n
et2/lsf.1dc1ba78.sock&#34;

Within 15-20 minutes, the CE cannot perform essential tasks such as mounting /cvmfs and a reboot is required.

I&#39;m unsure if the method used by Gabriel (to manually delete the content of /var/lib/globus/gram_job_state/) is the correct procedure in instances like these.

Please advise.

Thank you.
Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dcaunt/CN=763648/CN=Daniel Caunt</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F24531">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 24531});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
