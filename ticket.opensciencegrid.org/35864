<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[35864] HTCondor-CE does not maintain job pressure in SLURM</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=35864" method="post">
<div class="page-header">
    <h3><span class="muted">35864</span> / HTCondor-CE does not maintain job pressure in SLURM</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Saul Youssef</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Saul Youssef</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ascertain status once LCMAPS transition is complete</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2018-04-16</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/35864", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/35864?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/35864?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20HTCondor-CE%20does%20not%20maintain%20job%20pressure%20in%20SLURM%20ISSUE%3D35864%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='35864#1523455880'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-04-11T14:11:20+00:00">Apr 11, 2018 02:11 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1523455880">&nbsp;</a></div><pre>That sounds good, you know where to find us!</pre></div><div class='update_description'><i onclick="document.location='35864#1523454776'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-04-11T13:52:56+00:00">Apr 11, 2018 01:52 PM UTC</time><a class="anchor" name="1523454776">&nbsp;</a></div><pre>Hi Brian,

Unfortunately, I haven&#39;t.  Since we haven&#39;t had any interruptions in our HTCondor-CE job submissions lately, I&#39;ve had to shift my focus to more urgent projects, one of which being a planned power outage at our datacenter that&#39;s happening next month.  I will likely be busy with that for the next few weeks.  I don&#39;t want to leave this service request lingering any longer, though.  Would it be acceptable to close this service request and I can open a new one (referencing this one) when I have the time to return to this project (likely next month)?

Thanks.
Dan

by dcaunt@....</pre></div><div class='update_description'><i onclick="document.location='35864#1523287879'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-04-09T15:31:19+00:00">Apr 9, 2018 03:31 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1523287879">&nbsp;</a></div><pre>Hey Dan,

Have you gotten around to using the native CE+Slurm integration?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35864#1522085433'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-26T17:30:33+00:00">Mar 26, 2018 05:30 PM UTC</time><a class="anchor" name="1522085433">&nbsp;</a></div><pre>LCMAPS transition was completed late last week.  I will begin working on this ticket again this week.  I think a good step to take before simulating an outage might be to try using the native Slurm plugin for HTCondor-CE.  Currently, we are using the PBS plugin for HTCondor-CE and the PBS wrapper for Slurm because we had difficulty with the native Slurm plugin when we were setting up HTCondor-CE and the best example I had to work with was Marian Zvada&#39;s HTCondor-CE/Slurm setup at University of Nebraska, where he was using the PBS wrapper successfully.  I&#39;ll update again soon when I have a chance to try that.

by dcaunt@....</pre></div><div class='update_description'><i onclick="document.location='35864#1521472254'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-19T15:10:54+00:00">Mar 19, 2018 03:10 PM UTC</time> by <b>echism</b><a class="anchor" name="1521472254">&nbsp;</a></div><pre>LCMAPS transition not quite complete.</pre></div><div class='update_description'><i onclick="document.location='35864#1521139705'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-15T18:48:25+00:00">Mar 15, 2018 06:48 PM UTC</time><a class="anchor" name="1521139705">&nbsp;</a></div><pre>Hi Elizabeth,

Thanks for checking in.  Knock on wood, we haven&#39;t had an outage in a while, so we don&#39;t have any data for this at the moment.  Our Slurm administrator has agreed to attempt to force an outage (by briefly bringing down Slurm) so that we can gather some log data.  However, I am now working on the LCMAPS VOMS upgrade (<a href='36188' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/36188</a>) so it will have to wait until after that is done.

I&#39;ll keep you posted.

Thanks.
Dan

by dcaunt@....</pre></div><div class='update_description'><i onclick="document.location='35864#1521139419'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-15T18:43:39+00:00">Mar 15, 2018 06:43 PM UTC</time> by <b>echism</b><a class="anchor" name="1521139419">&nbsp;</a></div><pre>Hey Dan,

Anything new?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35864#1520358088'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-06T17:41:28+00:00">Mar 6, 2018 05:41 PM UTC</time><a class="anchor" name="1520358088">&nbsp;</a></div><pre>There hasn&#39;t been an outage recently so there&#39;s nothing to capture at the moment.  I spoke to our Slurm admin and he said we can try to initiate an outage if one doesn&#39;t occur naturally soon.  But he&#39;s out this week, so we&#39;ll have to wait for now until the next outage occurs.  When it does, I&#39;ll post an update here.

Thanks.
Dan

by dcaunt@....</pre></div><div class='update_description'><i onclick="document.location='35864#1520354980'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-06T16:49:40+00:00">Mar 6, 2018 04:49 PM UTC</time> by <b>echism</b><a class="anchor" name="1520354980">&nbsp;</a></div><pre>Did Dan snag those logs?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35864#1519659732'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-26T15:42:12+00:00">Feb 26, 2018 03:42 PM UTC</time> by <b>Saul Youssef</b><a class="anchor" name="1519659732">&nbsp;</a></div><pre>Hi Elizabeth,

On the BU side, we&#39;re setting up a new CE with OSG 3.4, hopefully to evade
the problem.  On the Harvard side, Dan is waiting to catch the error in the
Condor logs when it happens again (which it does approx. once per week).

We&#39;re also working on migrating to LCMAPS on both sides.  This involves
getting LCMAPS working and then migrating CEs, Bestman, Gridftp, worker
nodes to use LCMAPS.

- Saul

On Mon, Feb 26, 2018 at 9&#58;37 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35864#1519655865'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-26T14:37:45+00:00">Feb 26, 2018 02:37 PM UTC</time> by <b>echism</b><a class="anchor" name="1519655865">&nbsp;</a></div><pre>Hello,

Any news from slack, etc?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35864#1519333789'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-22T21:09:49+00:00">Feb 22, 2018 09:09 PM UTC</time><a class="anchor" name="1519333789">&nbsp;</a></div><pre>Thanks, Brian.  I should have seen the warning at the top of /etc/condor-ce/condor_config.

by dcaunt@....</pre></div><div class='update_description'><i onclick="document.location='35864#1519327099'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-22T19:18:19+00:00">Feb 22, 2018 07:18 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1519327099">&nbsp;</a></div><pre>Dan,

These particular changes should just need a condor_ce_reconfig. You
shouldn&#39;t directly change /etc/condor-ce/condor_config since that&#39;s
owned by the packaging. Instead add any changes to a file in
/etc/condor-ce/config.d/.

condor_ce_reconfig or a restart of the condor service should suffice for
any configuration changes you make directly to HTCondor-CE, i.e. changes
in /etc/condor-ce/

- Brian</pre></div><div class='update_description'><i onclick="document.location='35864#1519326393'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-22T19:06:33+00:00">Feb 22, 2018 07:06 PM UTC</time><a class="anchor" name="1519326393">&nbsp;</a></div><pre>Brian,

Just to be sure, after adding those options to /etc/condor-ce/condor_config, do I simply need to restart the condor-ce service to activate those changes?  Or do I need to run something like osg-configure?

Thanks.
Dan

by dcaunt@....</pre></div><div class='update_description'><i onclick="document.location='35864#1519315933'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-22T16:12:13+00:00">Feb 22, 2018 04:12 PM UTC</time> by <b>Saul Youssef</b><a class="anchor" name="1519315933">&nbsp;</a></div><pre>Let&#39;s keep this and the analogous BU ticket open until we track this stuff
down.   Brian is on our slack channel too, for chatting back and forth
rapidly when necessary.

- Saul

On Thu, Feb 22, 2018 at 10&#58;44 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35864#1519315223'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-22T16:00:23+00:00">Feb 22, 2018 04:00 PM UTC</time><a class="anchor" name="1519315223">&nbsp;</a></div><pre>I&#39;ll defer to Brian on how he&#39;d like to proceed.  I can either update this ticket when another outage occurs or I can open a new one and reference this one.  However you prefer to handle ticket flow is fine with me.

Thanks.
Dan

by dcaunt@....</pre></div><div class='update_description'><i onclick="document.location='35864#1519314269'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-22T15:44:29+00:00">Feb 22, 2018 03:44 PM UTC</time> by <b>echism</b><a class="anchor" name="1519314269">&nbsp;</a></div><pre>What do you want to do with this ticket?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35864#1519155737'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-20T19:42:17+00:00">Feb 20, 2018 07:42 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1519155737">&nbsp;</a></div><pre>Dan,

Yea, sorry MAX_NUM_*_LOG is what I&#39;m looking for. And add &#96;condor_ce_q
-af&#58;jh RoutedJob JobStatus GridJobId&#96; to the list of commands to run
when the Slurm controller is down. Also, note that it&#39;s important to
catch the return codes/output of the scontrol commands when the Slurm
controller is down.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35864#1519145877'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-20T16:57:57+00:00">Feb 20, 2018 04:57 PM UTC</time><a class="anchor" name="1519145877">&nbsp;</a></div><pre>Thanks, Brian, for the suggestions.  The log options I&#39;ll add to /etc/condor-ce/condor_config are&#58;

MAX_NUM_GRIDMANAGER_LOG = 5
MAX_NUM_JOB_ROUTER_LOG = 5
MAX_NUM_SCHEDD_LOG = 5

(I&#39;m assuming that you meant the MAX_NUM_&#60;SUBSYS&#62;_LOG option, not the MAX_&#60;SUBSYS&#62;_LOG, although increasing the log size with MAX_&#60;SUBSYS&#62;_LOG would also be a viable option)

The &#96;condor_ce_q -af RoutedJob | sort | uniq -c&#96; command gave the following output.

[root@net2 ~]# condor_ce_q -af RoutedJob | sort | uniq -c
450 true
861 undefined
[root@net2 ~]#

Is this something I should also run during a Slurm outage?

I&#39;ll be sure to run &#96;scontrol show job &#60;job id&#62;&#96; and &#96;scontrol show job&#96; during the next outage.

Thanks again.
Dan

by dcaunt@....</pre></div><div class='update_description'><i onclick="document.location='35864#1519140495'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-20T15:28:15+00:00">Feb 20, 2018 03:28 PM UTC</time> by <b>echism</b><a class="anchor" name="1519140495">&nbsp;</a></div><pre>Dan,

What are your thoughts on the log rotation suggestion Brian made?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35864#1518723075'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-15T19:31:15+00:00">Feb 15, 2018 07:31 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1518723075">&nbsp;</a></div><pre>Dan,

Unfortunately it looks like the logs rotated so there isn&#39;t anything useful in them. If you have the disk space, please increase the number of logs that are rotated (<a href='http&#58;//research.cs.wisc.edu/htcondor/manual/v8.6/3_5Configuration_Macros.html#22303' target='_blank' rel='nofollow'>http&#58;//research.cs.wisc.edu/htcondor/manual/v8.6/3_5Configuration_Macros.html#22303</a>)

MAX_GRIDMANAGER_LOGS = &#60;MAX NUMBER OF LOGS - 1&#62;
MAX_JOB_ROUTER_LOGS = &#60;MAX NUMBER OF LOGS - 1&#62;
MAX_SCHEDD_LOGS = &#60;MAX NUMBER OF LOGS - 1&#62;

It&#39;d also be useful to know what kind of jobs we&#39;re dealing with (routed or unrouted), &#96;condor_ce_q -af RoutedJob | sort | uniq -c&#96; should give us an idea. During the Slurm downtime, what does the return code and output look like for &#96;scontrol show job &#60;job id&#62;&#96; or &#96;scontrol show job&#96;?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35864#1518721444'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-15T19:04:04+00:00">Feb 15, 2018 07:04 PM UTC</time><a class="anchor" name="1518721444">&nbsp;</a></div><pre>Brian,

condor_ce_q doesn&#39;t have glidein_startup.sh anywhere, so I&#39;m assuming that would mean we&#39;re only running autopyfactory pilots.  Here&#39;s a clip from condor_ce_q&#58;

-----
11047203.0   usatlas1        2/15 13&#58;52   0+00&#58;02&#58;48 C  0   36.6 wrapper-0.9.15.sh
11047204.0   usatlas1        2/15 13&#58;52   0+00&#58;02&#58;51 C  0   36.6 wrapper-0.9.15.sh
11047205.0   usatlas1        2/15 13&#58;52   0+00&#58;02&#58;50 C  0   36.6 wrapper-0.9.15.sh
11047206.0   usatlas1        2/15 13&#58;52   0+00&#58;02&#58;49 C  0   36.6 wrapper-0.9.15.sh
11047211.0   usatlas1        2/15 13&#58;53   0+00&#58;02&#58;46 R  0   0.0  wrapper-0.9.15.sh
11047212.0   usatlas1        2/15 13&#58;53   0+00&#58;02&#58;46 R  0   0.0  wrapper-0.9.15.sh
11047213.0   usatlas1        2/15 13&#58;53   0+00&#58;02&#58;47 R  0   0.0  wrapper-0.9.15.sh
11047214.0   usatlas1        2/15 13&#58;53   0+00&#58;02&#58;47 R  0   0.0  wrapper-0.9.15.sh
11047215.0   usatlas1        2/15 13&#58;53   0+00&#58;02&#58;46 R  0   0.0  wrapper-0.9.15.sh
11047216.0   usatlas1        2/15 13&#58;53   0+00&#58;02&#58;46 R  0   0.0  wrapper-0.9.15.sh
11047217.0   usatlas1        2/15 13&#58;53   0+00&#58;02&#58;47 R  0   0.0  wrapper-0.9.15.sh
11047218.0   usatlas1        2/15 13&#58;53   0+00&#58;02&#58;47 R  0   0.0  wrapper-0.9.15.sh
11047219.0   usatlas1        2/15 13&#58;54   0+00&#58;02&#58;01 R  0   0.0  wrapper-0.9.15.sh
11047220.0   usatlas1        2/15 13&#58;55   0+00&#58;02&#58;01 R  0   0.0  wrapper-0.9.15.sh
11047221.0   usatlas1        2/15 13&#58;55   0+00&#58;00&#58;00 I  0   0.0  wrapper-0.9.15.sh
11047222.0   usatlas1        2/15 13&#58;55   0+00&#58;00&#58;00 I  0   0.0  wrapper-0.9.15.sh
11047223.0   usatlas1        2/15 13&#58;55   0+00&#58;00&#58;00 I  0   0.0  wrapper-0.9.15.sh
11047224.0   usatlas1        2/15 13&#58;56   0+00&#58;00&#58;00 I  0   0.0  wrapper-0.9.15.sh

1752 jobs; 116 completed, 0 removed, 593 idle, 1043 running, 0 held, 0 suspended
-----

Removing all of the jobs does cause the CE to start forwarding new jobs into the cluster - that&#39;s correct.

I don&#39;t recall what state the jobs were in at that point.  I&#39;ll keep an eye out for that with &#39;condor_ce_q&#39; the next time it happens.

Dan

by dcaunt@....</pre></div><div class='update_description'><i onclick="document.location='35864#1518629209'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-14T17:26:49+00:00">Feb 14, 2018 05:26 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1518629209">&nbsp;</a></div><pre>And what state are the jobs in? Idle? Held?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35864#1518538155'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-13T16:09:15+00:00">Feb 13, 2018 04:09 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1518538155">&nbsp;</a></div><pre>Dan,

Just to clarify, removing all of the jobs causes the CE to start
forwarding new jobs onto your Slurm cluster? What kind of pilots are you
running, glideinWMS, autopyfactory, or both? The former should have the
CMD glidein_startup.sh if you run &#96;condor_ce_q&#96;.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35864#1518537543'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-13T15:59:03+00:00">Feb 13, 2018 03:59 PM UTC</time><a class="anchor" name="1518537543">&nbsp;</a></div><pre>Hi Brian,

Yesterday, we had a planned maintenance period for Slurm to upgrade the service.  This resulted in the behavior we were talking about where HTCondor-CE doesn&#39;t resume once Slurm is back online.  I&#39;m attaching the log files that you mentioned.  I will be looking at these log files too, but I assume that you may have a keener eye when it comes to analyzing the log output.  We upgraded Slurm yesterday (Monday) morning, starting around 7am.  We opened Slurm back up to jobs around 10am.  Around 1pm, I noticed that new jobs were not being submitted, so I ran the following command (which always seems to fix the issue).

condor_ce_rm -all; condor_ce_rm -all -forcex

The times I listed are rough estimates.  If you notice anything out of the ordinary, could you please let me know.  And if I find anything noteworthy, I&#39;ll update this ticket.

Dan

by dcaunt@....</pre></div><div class='update_description'><i onclick="document.location='35864#1518197233'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-09T17:27:13+00:00">Feb 9, 2018 05:27 PM UTC</time> by <b>Saul Youssef</b><a class="anchor" name="1518197233">&nbsp;</a></div><pre>OK.

Yep, our CE on the BU side is in front of SGE.

I&#39;ll send you an invitation to our slack too.  - Saul, Dan & Augustine

On Fri, Feb 9, 2018 at 11&#58;59 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35864#1518195591'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-09T16:59:51+00:00">Feb 9, 2018 04:59 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1518195591">&nbsp;</a></div><pre>Saul,

Working in parallel sounds like a plan. Is this CE going to sit in front of the SGE cluster?

As for the errors, the &#34;Can&#39;t find address for negotiator&#34;are expected (<a href='http&#58;//opensciencegrid.github.io/docs/compute-element/troubleshoot-htcondor-ce/#daemons-fail-to-start' target='_blank' rel='nofollow'>http&#58;//opensciencegrid.github.io/docs/compute-element/troubleshoot-htcondor-ce/#daemons-fail-to-start</a>). Are these errors causing any noticeable issues? If they aren&#39;t, they&#39;re likely transient, you can ignore them, and you can continue with the transition.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35864#1518142880'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-09T02:21:20+00:00">Feb 9, 2018 02:21 AM UTC</time> by <b>Saul Youssef</b><a class="anchor" name="1518142880">&nbsp;</a></div><pre>Hi Brian,

o The Harvard issue has happened about every 1-2 weeks essentially never
going 3 weeks without problem coming up, so I&#39;m pretty confident that it&#39;s
going to happen again soon.

o We can work in parallel on the BU side too.  We can upgrade our CE and
try running on HTCONDOR only.

o re&#58; the last email, the ticketing system seems to mangle my urls.  I
cc-ed your personal email for this link
<a href='http&#58;//egg.bu.edu//NET2%7Binf&#58' target='_blank' rel='nofollow'>http&#58;//egg.bu.edu//NET2%7Binf&#58</a>;NET2%7D/gadget&#58;Condor-CE/section&#58;report/%7Bsubsection&#58;History,cron&#58;8%20hour%7D/BU_GridmanagerLog.usatlas1_History.html

o While we go through this, I&#39;m hoping to understand the errors that we
constantly get  even when things are apparently working.  Here, for
instance are the errors from the past 10,000 lines of all the logs on the
BU side.  I&#39;m hoping to understand how to interpret these, if we should be
doing something to fix them, etc.

condor.errorclass_num&#58; 6
updateGSICred(###)&#58; failed, proxy doesn&#39;t exist/30
Can&#39;t find address for negotiator/16
Can&#39;t find address for startd atlas-ce.bu.edu/16
Failed to send RESCHEDULE to unknown daemon&#58;/16
SharedPortEndpoint&#58; failed to open
/var/lock/condor-ce/shared_port_ad&#58; No such file or directory/11
DaemonCommandProtocol&#58; deadline for security
handshake with &#60;###.#.###.###&#58;#####&#62; has expired./2

- Saul

On Thu, Feb 8, 2018 at 5&#58;52 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35864#1518130334'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-08T22:52:14+00:00">Feb 8, 2018 10:52 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1518130334">&nbsp;</a></div><pre>Saul,

According to Dan, Harvard is not actually seeing issues regularly so I don&#39;t think we can wait on those issues to be addressed before you make the transition. Could we update your CE to the latest software in OSG 3.4 and see if there are actually any more issues?

The link doesn&#39;t work for me btw, so I&#39;m not sure what errors you&#39;re referring to.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35864#1518100933'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-08T14:42:13+00:00">Feb 8, 2018 02:42 PM UTC</time> by <b>dcaunt@....</b><a class="anchor" name="1518100933">&nbsp;</a></div><pre>Thanks, Brian.  The next time this type of interruption occurs, I&#39;ll keep
an eye on those log files and let you know what I find.  I have turned up
the log level so hopefully we&#39;ll get some good info.

Cheers,
Dan

On Wed, Feb 7, 2018 at 4&#58;38 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35864#1518050893'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-08T00:48:13+00:00">Feb 8, 2018 12:48 AM UTC</time> by <b>Saul Youssef</b><a class="anchor" name="1518050893">&nbsp;</a></div><pre>...Answering all above the line this time...

Hi Brian,

I was thinking that a good strategy is to solve the Slurm problem first
since it might also solve the BU problem and since we seem to have a much
better handle on the Harvard side.  It&#39;s known that the problem occurs when
Slurm gets unresponsive for a short time and then recovers.  That happens
approximately once per week, so it regularly comes up.  The problem on the
BU side is more mysterious.  I don&#39;t know how to produce the problem and if
I remember correctly we ran for about a month before it showed up.

How about software version?  If similar problems have been solved in the
past, it might make sense to upgrade the software on the BU side and try
again.

The other general thing that makes this confusing for non-experts is that
even when Condor-CE seemed to be working fine for us, we still get large
numbers of many different kinds of errors from many different log files.
For instance, here&#39;s the errors from the past year for the BU gridmanager
log

<a href='http&#58;//egg.bu.edu//NET2%7Binf&#58' target='_blank' rel='nofollow'>http&#58;//egg.bu.edu//NET2%7Binf&#58</a>;NET2%7D/gadget&#58;Condor-CE/
section&#58;report/%7Bsubsection&#58;History,cron&#58;8%20hour%7D/BU_
GridmanagerLog.usatlas1_History.html

There are many different kinds of errors when it&#39;s working and many
different kinds of errors when it&#39;s stuck.  It&#39;s not obvious which errors
are significant or might relate to the problem.

Thanks a lot for helping out with this, BTW.

- Saul

On Wed, Feb 7, 2018 at 4&#58;38 PM, Open Science Grid FootPrints &#60;
<div id='show_614898252' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_614898252'>osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_614898252').click(function() {
            $('#detail_614898252').slideDown("normal");
            $('#show_614898252').hide();
            $('#hide_614898252').show();
        });
        $('#hide_614898252').click(function() {
            $('#detail_614898252').slideUp();
            $('#hide_614898252').hide();
            $('#show_614898252').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='35864#1518050532'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-08T00:42:12+00:00">Feb 8, 2018 12:42 AM UTC</time> by <b>Saul Youssef</b><a class="anchor" name="1518050532">&nbsp;</a></div><pre>Hi Brian,

On Wed, Feb 7, 2018 at 4&#58;38 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35864#1518039487'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-07T21:38:07+00:00">Feb 7, 2018 09:38 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1518039487">&nbsp;</a></div><pre>It&#39;d be worth checking the logs (with increased debug level <a href='http&#58;//opensciencegrid.github.io/docs/compute-element/troubleshoot-htcondor-ce/#htcondor-ce-troubleshooting-items' target='_blank' rel='nofollow'>http&#58;//opensciencegrid.github.io/docs/compute-element/troubleshoot-htcondor-ce/#htcondor-ce-troubleshooting-items</a>) to see the following&#58;

1) /var/log/condor-ce/SchedLog&#58; Are jobs still being submitted?
2) /var/log/condor-ce/JobRouterLog&#58; Are jobs being routed (I think this is unlikely to be a problem)?
3) /var/log/condor-ce/GridmanagerLog.*&#58; I imagine this is where failures are going to be. Either the CE doesn&#39;t recognize that the slurm controller is back up or it&#39;s having issues recognizing status updates and gets backed up.

Saul&#58; Given that there aren&#39;t any current issues with Dan&#39;s CE, what&#39;s your plan to transition off of the GRAM gatekeeper?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35864#1517955359'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-06T22:15:59+00:00">Feb 6, 2018 10:15 PM UTC</time><a class="anchor" name="1517955359">&nbsp;</a></div><pre>The Slurm jobs that were running at the time of the failure continue and complete successfully when the Slurm controller comes back up.  I don&#39;t think that we can reproduce the failure at will since all our cluster jobs (not only the jobs coming from condor-ce) rely on that Slurm controller.  But I&#39;d be happy to gather more information the next time that it happens.  Is there something in particular that you think might be useful to make note of when it happens?  Any commands you would suggest to run?

Thanks!
Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dcaunt/CN=763648/CN=Daniel Caunt</pre></div><div class='update_description'><i onclick="document.location='35864#1517846896'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-05T16:08:16+00:00">Feb 5, 2018 04:08 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1517846896">&nbsp;</a></div><pre>Daniel,

When the Slurm cluster goes down, what happens to all the Slurm jobs when it comes back up? I&#39;m wondering if the CE isn&#39;t properly tracking the new state of the jobs. Is there any way we can try to reproduce the failure?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35864#1517846811'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-05T16:06:51+00:00">Feb 5, 2018 04:06 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1517846811">&nbsp;</a></div><pre>Daniel,

When the Slurm cluster goes down, what happens to all the Slurm jobs when it comes back up? I&#39;m wondering if the CE isn&#39;t properly tracking the new state of the jobs. Is there any way we can try to reproduce the failure?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35864#1517502614'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-01T16:30:14+00:00">Feb 1, 2018 04:30 PM UTC</time> by <b>dcaunt@....</b><a class="anchor" name="1517502614">&nbsp;</a></div><pre>Hi Elizabeth,

I&#39;m unable to authenticate with ticket.opensciencegrid.org because I&#39;m on a
computer that doesn&#39;t have my user certificate, so I hope replying by email
with the attachment works.  If not, I&#39;ll upload the log tar file when I&#39;m
back at my own computer on Monday.  Please let me know if you receive the
attachment here.

To answer Brian&#39;s question, we don&#39;t encounter job submission failures on a
regularly timed basis.  However, when we have Slurm server failures, it
causes disruption to condor-ce.  For instance, if the Slurm server were to
segfault or stop in any other unclean manner, once Slurm services are
resumed, condor-ce does not recover and continue job submissions to Slurm.
I wouldn&#39;t say this happens weekly, but it does happen occasionally.  The
only way I&#39;ve found to reliably recover is to flush all jobs with
&#34;condor_ce_rm -all&#34; which is obviously not optimal.  Restarting condor-ce
services hasn&#39;t always worked, though, and flushing the jobs is sometimes
the only thing that does the trick.

We haven&#39;t had a failure like this recently so I don&#39;t think there will be
any evidence of such an instance in the logs I&#39;m attaching, but maybe you
will see something that appears misconfigured anyway.

Thanks.
Dan

​
condor-ce.tar
&#60;<a href='https&#58;//drive.google.com/a/g.harvard.edu/file/d/1e-v2DC1h7sFy04JK7oC8tUr_JmdE_Y5Q/view?usp=drive_web&#62' target='_blank' rel='nofollow'>https&#58;//drive.google.com/a/g.harvard.edu/file/d/1e-v2DC1h7sFy04JK7oC8tUr_JmdE_Y5Q/view?usp=drive_web&#62</a>;
​

On Thu, Feb 1, 2018 at 11&#58;05 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35864#1517501156'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-01T16:05:56+00:00">Feb 1, 2018 04:05 PM UTC</time> by <b>echism</b><a class="anchor" name="1517501156">&nbsp;</a></div><pre>Hey Dan,

Did you see that last note? We&#39;re looking for /var/log/condor-ce

Thanks</pre></div><div class='update_description'><i onclick="document.location='35864#1517330416'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-30T16:40:16+00:00">Jan 30, 2018 04:40 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1517330416">&nbsp;</a></div><pre>Dan,

Could you just attach the contents of &#34;/var/log/condor-ce&#34;? Are there any problems at this point? Saul mentioned that it would generally take a ~week before the CE would stop pushing jobs to Slurm.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35864#1517235941'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-29T14:25:41+00:00">Jan 29, 2018 02:25 PM UTC</time><a class="anchor" name="1517235941">&nbsp;</a></div><pre>Please let me know which logs you&#39;d like to see and I will attach them.  Thanks.

Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dcaunt/CN=763648/CN=Daniel Caunt</pre></div><div class='update_description'><i onclick="document.location='35864#1517003237'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-26T21:47:17+00:00">Jan 26, 2018 09:47 PM UTC</time><a class="anchor" name="1517003237">&nbsp;</a></div><pre>We&#39;re running SLURM version 17.02.9, blahp 1.18.19, htcondor-ce 2.0.5, and condor 8.4.6.

I&#39;ll increase the log level and send you some logs on Monday.

Thanks.
Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dcaunt/CN=763648/CN=Daniel Caunt</pre></div><div class='update_description'><i onclick="document.location='35864#1516982042'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-26T15:54:02+00:00">Jan 26, 2018 03:54 PM UTC</time><a class="anchor" name="1516982042">&nbsp;</a></div><pre>Hi Elizabeth,

I&#39;ll be able to give an update this afternoon.  Sorry for the delay.

Thanks.
Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dcaunt/CN=763648/CN=Daniel Caunt</pre></div><div class='update_description'><i onclick="document.location='35864#1516981383'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-26T15:43:03+00:00">Jan 26, 2018 03:43 PM UTC</time> by <b>echism</b><a class="anchor" name="1516981383">&nbsp;</a></div><pre>Is there anything new on this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35864#1516816970'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-24T18:02:50+00:00">Jan 24, 2018 06:02 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1516816970">&nbsp;</a></div><pre>I&#39;ve added Daniel Caunt to the ticket CC&#39;s</pre></div><div class='update_description'><i onclick="document.location='35864#1516816632'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-24T17:57:12+00:00">Jan 24, 2018 05:57 PM UTC</time> by <b>Saul Youssef</b><a class="anchor" name="1516816632">&nbsp;</a></div><pre>Hi Brian, Dan,

I&#39;m adding Dan for Harvard/Slurm in case he&#39;s not seeing this.

- Saul

On Wed, Jan 24, 2018 at 11&#58;51 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35864#1516812693'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-24T16:51:33+00:00">Jan 24, 2018 04:51 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1516812693">&nbsp;</a></div><pre>Saul reported an issue where after a week or so, their SLURM nodes start draining because HTCondor-CE stops submitting jobs.

Saul/Augustine, can you tell us what version of SLURM, blahp, htcondor-ce, and condor you&#39;re running? Also, if you haven&#39;t already, please increase the debug level of your HTCondor-CE&#58; <a href='http&#58;//opensciencegrid.github.io/docs/compute-element/troubleshoot-htcondor-ce/#htcondor-ce-troubleshooting-items' target='_blank' rel='nofollow'>http&#58;//opensciencegrid.github.io/docs/compute-element/troubleshoot-htcondor-ce/#htcondor-ce-troubleshooting-items</a></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F35864">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 35864});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
