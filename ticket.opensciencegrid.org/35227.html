<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[35227] transfer probe records from uconn being sent to wrong collector</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=35227" method="post">
<div class="page-header">
    <h3><span class="muted">35227</span> / transfer probe records from uconn being sent to wrong collector</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Carl Edquist</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">UConn-OSG_CE</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">Gluex</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Carl Edquist</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">GLUEX</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-11-17</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">GLUEX <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/35227", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/35227?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/35227?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20transfer%20probe%20records%20from%20uconn%20being%20sent%20to%20wrong%20collector%20ISSUE%3D35227%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='35227#1510946324'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-17T19:18:44+00:00">Nov 17, 2017 07:18 PM UTC</time> by <b>echism</b><a class="anchor" name="1510946324">&nbsp;</a></div><pre>Closing as advised.

Thanks</pre></div><div class='update_description'><i onclick="document.location='35227#1510786933'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-15T23:02:13+00:00">Nov 15, 2017 11:02 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1510786933">&nbsp;</a></div><pre>Carl,

Ok, understood. As long as UseSSL=0 I don&#39;t have to worry about setting
that port to the correct value. I think this ticket can be closed.

-Richard J.

On Wed, Nov 15, 2017 at 4&#58;52 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35227#1510782738'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-15T21:52:18+00:00">Nov 15, 2017 09:52 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1510782738">&nbsp;</a></div><pre>Hi Richard,

Sorry for the delay & confusion with this - we were looking into this discrepancy between osg-configure and the default ProbeConfig (as provided by the gratia-probe rpms) ... As you saw, it looks like the ProbeConfig uses port 443 for SSLHost.  However, osg-configure fills in the values for SSLHost, SOAPHost, SSLRegistrationHost, and CollectorHost based on the &#34;probes&#34; attribute from 30-gratia.ini, so despite its name, it&#39;s normal for the SSLHost to point to port 80.  It appears the main thing is the UseSSL setting also defaults to &#34;0&#34;.  As long as UseSSL=&#34;0&#34; in the ProbeConfig, I believe it&#39;s fine for the port to be 80, and it should work to set the port for SSLHost to 443 if you set UseSSL=&#34;1&#34;.  If you are using one of these combinations and it doesn&#39;t work, please let us know.

The typical setup with osg-configure is to use port 80 (with the default UseSSL=&#34;0&#34;), though we (the osg software team) should look at making this more consistent between the rpm defaults and the osg-configure defaults.

As for rsv, it uses the metric probe to send rsv results up to the goc, and osg-configure doesn&#39;t touch the metric probe&#39;s ProbeConfig. So you shouldn&#39;t have to do anything with rsv.

Hopefully that answers the remaining questions, but let me know if not..!

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='35227#1510776851'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-15T20:14:11+00:00">Nov 15, 2017 08:14 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1510776851">&nbsp;</a></div><pre>Hello Elizabeth,

I was asked to provide a config file, and I posted it. We are waiting for a
response from the experts on this ticket.

-Richard Jones

On Wed, Nov 15, 2017 at 2&#58;38 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35227#1510774691'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-15T19:38:11+00:00">Nov 15, 2017 07:38 PM UTC</time> by <b>echism</b><a class="anchor" name="1510774691">&nbsp;</a></div><pre>Software,

Is there any news on this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35227#1510601136'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-13T19:25:36+00:00">Nov 13, 2017 07:25 PM UTC</time> by <b>echism</b><a class="anchor" name="1510601136">&nbsp;</a></div><pre>Software,

Is there any news on this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35227#1510266192'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-09T22:23:12+00:00">Nov 9, 2017 10:23 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1510266192">&nbsp;</a></div><pre>Sure, it is at <a href='http&#58;//zeus.phys.uconn.edu/UConn-OSG/diagnose/30-gratia.ini' target='_blank' rel='nofollow'>http&#58;//zeus.phys.uconn.edu/UConn-OSG/diagnose/30-gratia.ini</a>

-Richard J.

On Thu, Nov 9, 2017 at 4&#58;24 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35227#1510262693'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-09T21:24:53+00:00">Nov 9, 2017 09:24 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1510262693">&nbsp;</a></div><pre>Hi Richard,

Can you post your new /etc/osg/config.d/30-gratia.ini?

Thanks,
-Mat</pre></div><div class='update_description'><i onclick="document.location='35227#1510262058'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-09T21:14:18+00:00">Nov 9, 2017 09:14 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1510262058">&nbsp;</a></div><pre>Hello Carl,

I updated this package and checked things out. The only issue seems to be
that osg-configure -c puts the port number on SSLHost back to 80, where I
believe it should be 443 as I imported it from .rpmnew. Do I need to
re-enable the probes I disabled in rsv?

-Richard

On Thu, Nov 9, 2017 at 3&#58;54 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35227#1510260852'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-09T20:54:12+00:00">Nov 9, 2017 08:54 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1510260852">&nbsp;</a></div><pre>Thanks Richard & Elizabeth!

(Sorry for any confusion earlier between the two issues - the gratia probes and the rsv probes)

By the way Richard, we have a new build of the gratia-probe package in our testing repos, with the corrected transfer collector url laid out in the ProbeConfig at rpm install time.

If you&#39;d be willing to test this, you can run

yum update --enablerepo=osg-testing gratia-probe&#92;*

And you should find that /etc/gratia/gridftp-transfer/ProbeConfig (or the .rpmnew version) should contain the gratia-osg-transfer.opensciencegrid.org paths, even before running osg-configure.

If you try this, could you report back whether the new host config strings are correct? (eg, CollectorHost=&#34;gratia-osg-transfer.opensciencegrid.org&#58;80&#34;, etc)

Thanks!
Carl</pre></div><div class='update_description'><i onclick="document.location='35227#1510259891'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-09T20:38:11+00:00">Nov 9, 2017 08:38 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1510259891">&nbsp;</a></div><pre>Elizabeth,

Yes, thanks for those links. It took some drilling down to see the plots I
wanted. Now I will know where to look. Thanks, this ticket can be closed
now.

-Richard Jones

On Thu, Nov 9, 2017 at 3&#58;19 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35227#1510258763'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-09T20:19:23+00:00">Nov 9, 2017 08:19 PM UTC</time> by <b>echism</b><a class="anchor" name="1510258763">&nbsp;</a></div><pre>Richard,

I see data and it looks okay to me. Does it look okay to you?&#58;
<a href='https&#58;//gracc.opensciencegrid.org/dashboard/db/site-transfer-summary?orgId=1&var-interval=' target='_blank' rel='nofollow'>https&#58;//gracc.opensciencegrid.org/dashboard/db/site-transfer-summary?orgId=1&var-interval=</a>$__auto_interval&var-site=UConn-OSG
<a href='https&#58;//gracc.opensciencegrid.org/dashboard/db/site-summary?orgId=1&var-interval=' target='_blank' rel='nofollow'>https&#58;//gracc.opensciencegrid.org/dashboard/db/site-summary?orgId=1&var-interval=</a>$__auto_interval&var-site=UConn-OSG&var-type=Batch

Thanks</pre></div><div class='update_description'><i onclick="document.location='35227#1510083504'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-07T19:38:24+00:00">Nov 7, 2017 07:38 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1510083504">&nbsp;</a></div><pre>Elizabeth,

No, please do not close it yet. Please see my last query?

-Richard Jones

On Tue, Nov 7, 2017 at 2&#58;32 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35227#1510083147'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-07T19:32:27+00:00">Nov 7, 2017 07:32 PM UTC</time> by <b>echism</b><a class="anchor" name="1510083147">&nbsp;</a></div><pre>Should this be closed?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35227#1509737362'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-03T19:29:22+00:00">Nov 3, 2017 07:29 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1509737362">&nbsp;</a></div><pre>(apologies if you get duplicates -- my previous attempts did not appear to go through)

If some RSV metrics are no longer expected to ever succeed and cannot be fixed, they should be removed from RSV.  Carl, if this is the case for these metrics, please make a JIRA ticket to retire them and link the ticket to SOFTWARE-2928.

Thanks,
-Mat</pre></div><div class='update_description'><i onclick="document.location='35227#1509736814'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-03T19:20:14+00:00">Nov 3, 2017 07:20 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1509736814">&nbsp;</a></div><pre>Carl,

Maybe I misunderstood Elizabeth&#39;s comment. Are the hours currently being
consumed by osg jobs on my site now correctly being registered with gratia
or no?

-Richard J.

On Fri, Nov 3, 2017 at 3&#58;12 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35227#1509736336'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-03T19:12:16+00:00">Nov 3, 2017 07:12 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1509736336">&nbsp;</a></div><pre>Hey Richard, Elisabeth,

Yes I think this is expected - after the probe was disabled it should not be reporting any more.

Richard, the warnings have disappeared for you now, right?

Mat, let me know if I seem to be missing anything...

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='35227#1509735373'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-03T18:56:13+00:00">Nov 3, 2017 06:56 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1509735373">&nbsp;</a></div><pre>Carl,

Is it possible that my most recent action, in disabling the probes that
were giving the warnings (using the commands you provided in an earlier
part of this thread) have effectively disabled my reports from going in?

-Richard J.

On Fri, Nov 3, 2017 at 2&#58;46 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35227#1509734771'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-03T18:46:11+00:00">Nov 3, 2017 06:46 PM UTC</time> by <b>echism</b><a class="anchor" name="1509734771">&nbsp;</a></div><pre>Carl,

Myosg says this probe hasn&#39;t reported in several days. I don&#39;t think this is fixed.

Thanks</pre></div><div class='update_description'><i onclick="document.location='35227#1509504617'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-01T02:50:17+00:00">Nov 1, 2017 02:50 AM UTC</time> by <b>GLUEX</b><a class="anchor" name="1509504617">&nbsp;</a></div><pre>Hello Carl,

Ok, I performed these steps and they seemed to complete without errors.
After some period, I am assuming that those lines will disappear from my
rsv status page, right?

-Richard J.

On Tue, Oct 31, 2017 at 9&#58;34 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35227#1509500039'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-01T01:33:59+00:00">Nov 1, 2017 01:33 AM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1509500039">&nbsp;</a></div><pre>Hi Richard,

This has to do with the new GRACC backend, which does not respond to the last contact queries the rsv probe used to send to the Gratia backend...

Looks like it&#39;s a known issue that we only partially resolved&#58;

<a href='33717.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/33717</a>
<a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2722' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2722</a>

In the mean time, the org.osg.gratia.* rsv metrics will not succeed (against the new GRACC backend, as of this April), so they should be disabled.

You can do this by editing /etc/osg/config.d/30-rsv.ini and setting&#58;

gratia_probes = DEFAULT

and re-run &#34;osg-configure -c&#34; ... (The new default is for the gratia rsv probes not to run.) That should prevent the gratia rsv probes from starting up in the future.  If rsv-control still has them running since the current system startup, you can stop them with

rsv-control --disable --host gluskap.phys.uconn.edu org.osg.gratia.condor org.osg.gratia.gridftp-transfer
rsv-control --off --host gluskap.phys.uconn.edu org.osg.gratia.condor org.osg.gratia.gridftp-transfer

Sorry for the hassle.  Let me know if your run into any issues with this,

Carl</pre></div><div class='update_description'><i onclick="document.location='35227#1509469248'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-31T17:00:48+00:00">Oct 31, 2017 05:00 PM UTC</time> by <b>echism</b><a class="anchor" name="1509469248">&nbsp;</a></div><pre>Carl,

Did you see that last request?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35227#1509116712'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-27T15:05:12+00:00">Oct 27, 2017 03:05 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1509116712">&nbsp;</a></div><pre>Carl, one more thing,

Can you help me figure out why my rsv probe still shows yellow under
org.osg.gratia.condor and org.osg.gratia.gridftp? These warning messages
indicate that the old config is still stuck in the system somewhere. How do
I clear these out?

thanks, Richard

metricName&#58; org.osg.gratia.condor
metricType&#58; status
timestamp&#58; 2017-10-27 10&#58;09&#58;41 EDT
metricStatus&#58; WARNING
serviceType&#58; OSG-CE
serviceURI&#58; gluskap.phys.uconn.edu
gatheredAt&#58; gluskap.phys.uconn.edu
summaryData&#58; WARNING
detailsData&#58; 1
0 records waiting to be re-sent to
gratia-osg-prod.opensciencegrid.org&#58;80 in 0 files (including 0 archive
files).
3 total gratia files found&#58;
0 gratia_certinfo files under /var/lib/gratia/data/
0 classad records under /var/lib/gratia/data/
0 quarantine files under /var/lib/gratia/data/quarantine/
3 unsent collector records under /var/lib/gratia/tmp/gratiafiles
WARNING&#58; Gratia server gratia-osg-prod.opensciencegrid.org&#58;80 not
responding to obtain last contact details.

metricName&#58; org.osg.gratia.gridftp-transfer
metricType&#58; status
timestamp&#58; 2017-10-27 10&#58;09&#58;41 EDT
metricStatus&#58; WARNING
serviceType&#58; OSG-CE
serviceURI&#58; gluskap.phys.uconn.edu
<div id='show_2135555214' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2135555214'>gatheredAt&#58; gluskap.phys.uconn.edu
summaryData&#58; WARNING
detailsData&#58; 1
0 records waiting to be re-sent to
gratia-osg-transfer.opensciencegrid.org&#58;80 in 0 files (including 0
archive files).
3 total gratia files found&#58;
0 gratia_certinfo files under /var/lib/gratia/data/
0 classad records under /var/lib/gratia/data/
0 quarantine files under /var/lib/gratia/data/quarantine/
3 unsent collector records under /var/lib/gratia/tmp/gratiafiles
WARNING&#58; Gratia server gratia-osg-transfer.opensciencegrid.org&#58;80 not
responding to obtain last contact details.

EOT

On Fri, Oct 27, 2017 at 10&#58;59 AM, Richard Jones &#60;richard.t.jones@....&#62;
wrote&#58;

<font color='#7F7E6F'>&#62; Carl,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Ok, I did this, and now ProbeConfig is being updated correctly! Thanks for</font>
<font color='#7F7E6F'>&#62; your help.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -Richard Jones</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Fri, Oct 27, 2017 at 10&#58;39 AM, Open Science Grid FootPrints &#60;</font>
<font color='#7F7E6F'>&#62; osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_2135555214').click(function() {
            $('#detail_2135555214').slideDown("normal");
            $('#show_2135555214').hide();
            $('#hide_2135555214').show();
        });
        $('#hide_2135555214').click(function() {
            $('#detail_2135555214').slideUp();
            $('#hide_2135555214').hide();
            $('#show_2135555214').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='35227#1509116531'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-27T15:02:11+00:00">Oct 27, 2017 03:02 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1509116531">&nbsp;</a></div><pre>Carl,

Ok, I did this, and now ProbeConfig is being updated correctly! Thanks for
your help.

-Richard Jones

On Fri, Oct 27, 2017 at 10&#58;39 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35227#1509115149'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-27T14:39:09+00:00">Oct 27, 2017 02:39 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1509115149">&nbsp;</a></div><pre>Thanks Richard,

I am seeing the records coming into the GRACC transfer collector now, so it seems to be working.

After checking the installed versions from osg-profile and discussing this with our main osg-configure guy, it seems the issue is in /etc/osg/config.d/30-gratia.ini, that the setting &#34;probes=DEFAULT&#34; only includes the jobmanager probes, not the gridftp probe, so that one was not getting configured.  We&#39;ll discuss how to make this more clear for a future release of osg-configure...

For now, the correct thing to do to get osg-configure to configure the gridftp-transfer gratia probe is to edit that &#34;probes&#34; line in /etc/osg/config.d/30-gratia.ini and set it to&#58;

probes = %(osg-jobmanager-gratia)s,%(osg-gridftp-gratia)s

It seems like your updated ProbeConfig is working now, but if you want to go ahead and re-run osg-configure (after making the change to 30-gratia.ini), it should still put the &#34;gratia-osg-transfer.opensciencegrid.org&#34; url into your /etc/gratia/gridftp-transfer/ProbeConfig .

If you do this and everything is still reporting correctly by next week, I think we&#39;re all good.

Thanks..!
Carl</pre></div><div class='update_description'><i onclick="document.location='35227#1509053374'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T21:29:34+00:00">Oct 26, 2017 09:29 PM UTC</time><a class="anchor" name="1509053374">&nbsp;</a></div><pre>Carl,

I made the changes you requested. Do I need to run osg-configure again? I also regenerated my osg-profile.txt and attached it to this ticket.

thanks, Richard

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Richard T. Jones 594</pre></div><div class='update_description'><i onclick="document.location='35227#1509037483'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T17:04:43+00:00">Oct 26, 2017 05:04 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1509037483">&nbsp;</a></div><pre>Thanks Richard!

Sorry we did not resolve the reporting issue earlier for you...  That is interesting that osg-configure is not updating that ProbeConfig; it could be that something&#39;s not set up properly on the CE.  If you run osg-system-profiler and attach the generated osg-profile.txt we can take a closer look.

(We just recently noticed an issue that the &#34;gratia-osg-prod&#34; urls are in the ProbeConfig laid down by the rpms, and we are putting a fix in now to correct it for the transfer probes, although osg-configure is _supposed_ to put in the correct url for transfer probes when it is run.)

Otherwise I believe the immediate solution is to update /etc/gratia/gridftp-transfer/ProbeConfig to

CollectorHost=&#34;gratia-osg-transfer.opensciencegrid.org&#58;80&#34;
SSLHost=&#34;gratia-osg-transfer.opensciencegrid.org&#58;443&#34;
SSLRegistrationHost=&#34;gratia-osg-transfer.opensciencegrid.org&#58;80&#34;

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='35227#1509035891'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T16:38:11+00:00">Oct 26, 2017 04:38 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1509035891">&nbsp;</a></div><pre>Hello Carl,

Thank you for noticing that. I opened a ticket over a year ago about why by
gratia reports are not being properly uploaded, but it was never resolved.
Eventually the ticket handler recommended that we close it, and that the
issue would be resolved in some future software fix. It hasn&#39;t so far,
until you noticed this.

I ran &#34;osg-configure -c&#34; and it succeeds. But still, the ProbeConfig is
still screwed up. In fact, the /etc/gratia/gridftp-transfer/ProbeConfig
file is not even touched by &#34;osg-configure -c&#34;. Here is the command log.

[root@gluskap ~]# osg-configure -c
CRLs exist, skipping fetch-crl invocation
/usr/sbin/osg-configure completed
[root@gluskap ~]# ls -l /etc/gratia/gridftp-transfer/ProbeConfig
-rw-r--r-- 1 root root 2664 Oct  3 06&#58;07
/etc/gratia/gridftp-transfer/ProbeConfig
[root@gluskap ~]# find /etc -type f -exec grep
gratia-osg-prod.opensciencegrid.org {} &#92;; -print
osg-jobmanager-gratia = jobmanager&#58;gratia-osg-prod.opensciencegrid.org&#58;80
/etc/osg/config.d/30-gratia.ini
CollectorHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
SSLHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;443&#34;
SSLRegistrationHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
/etc/gratia/gridftp-transfer/ProbeConfig
CollectorHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
SSLHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;443&#34;
SSLRegistrationHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
/etc/gratia/gridftp-transfer/ProbeConfig.rpmnew
CollectorHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
SSLHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
SSLRegistrationHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
SOAPHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
/etc/gratia/condor/ProbeConfig
<div id='show_385105633' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_385105633'>
osg-jobmanager-gratia = jobmanager&#58;gratia-osg-prod.opensciencegrid.org&#58;80

/etc/condor/osg-profile.txt

[root@gluskap ~]#

On Thu, Oct 26, 2017 at 12&#58;25 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_385105633').click(function() {
            $('#detail_385105633').slideDown("normal");
            $('#show_385105633').hide();
            $('#hide_385105633').show();
        });
        $('#hide_385105633').click(function() {
            $('#detail_385105633').slideUp();
            $('#hide_385105633').hide();
            $('#show_385105633').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='35227#1509035125'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T16:25:25+00:00">Oct 26, 2017 04:25 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1509035125">&nbsp;</a></div><pre>Note that running &#34;osg-configure -c&#34; should put the correct values into the ProbeConfig

Carl</pre></div><div class='update_description'><i onclick="document.location='35227#1509034910'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T16:21:50+00:00">Oct 26, 2017 04:21 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1509034910">&nbsp;</a></div><pre>We are seeing gridftp-transfer probe records from gluskap.phys.uconn.edu being sent to the main GRACC collector instead of the GRACC transfer-collector.

<a href='https&#58;//gracc.opensciencegrid.org/kibana/app/kibana#/discover?_g=' target='_blank' rel='nofollow'>https&#58;//gracc.opensciencegrid.org/kibana/app/kibana#/discover?_g=</a>(refreshInterval&#58;(display&#58;Off,pause&#58;!f,value&#58;0),time&#58;(from&#58;now-7d,mode&#58;quick,to&#58;now))&_a=(columns&#58;!(_source),index&#58;%27gracc.osg.raw-*%27,interval&#58;auto,query&#58;(query_string&#58;(analyze_wildcard&#58;!f,query&#58;%27ProbeName&#58;%22gridftp-transfer&#58;gluskap.phys.uconn.edu%22%27)),sort&#58;!(StartTime,desc))

It seems this likely is due to a misconfiguration in their /etc/gratia/gridftp-transfer/ProbeConfig ... the settings in that config for CollectorHost, SSLHost, & SSLRegistrationHost should point to gratia-osg-transfer.opensciencegrid.org, but it seems they may have it configured for gratia-osg-prod.opensciencegrid.org

Thanks,
Carl</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F35227">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 35227});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
