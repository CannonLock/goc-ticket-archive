<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[25968] FileReadErrors at T1_US_FNAL</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=25968" method="post">
<div class="page-header">
    <h3><span class="muted">25968</span> / FileReadErrors at T1_US_FNAL</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Julian Badillo</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Julian Badillo Rojas</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">WIP</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-06-29</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448">INC000000562448</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=114554">114554</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/25968", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/25968?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/25968?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20FileReadErrors%20at%20T1_US_FNAL%20ISSUE%3D25968%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='25968#1436918416'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-15T00:00:16+00:00">Jul 15, 2015 12:00 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1436918416">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.

-- by GGUS SYSTEM at Tue Jul 14 23&#58;59&#58;03 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=114554' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=114554</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435611990'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-29T21:06:30+00:00">Jun 29, 2015 09:06 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1435611990">&nbsp;</a></div><pre>Closing this ticket based on Gerard&#39;s update. (not sure why it reopened)</pre></div><div class='update_description'><i onclick="document.location='25968#1435611822'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-29T21:03:42+00:00">Jun 29, 2015 09:03 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435611822">&nbsp;</a></div><pre>The issue is (should be) resolved on the FNAL side, it should be safe to restart work and close this ticket.

Gerard

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Gerard Bernabeu Altayo 949
-- by goc at Mon Jun 29 18&#58;27&#58;54 UTC 2015
-- by cd-srv-goc-ops at Mon Jun 29 18&#58;28&#58;19 UTC 2015

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435611745'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-29T21:02:25+00:00">Jun 29, 2015 09:02 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1435611745">&nbsp;</a></div><pre>Closing this ticket based on Gerard&#39;s update.</pre></div><div class='update_description'><i onclick="document.location='25968#1435602474'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-29T18:27:54+00:00">Jun 29, 2015 06:27 PM UTC</time><a class="anchor" name="1435602474">&nbsp;</a></div><pre>The issue is (should be) resolved on the FNAL side, it should be safe to restart work and close this ticket.

Gerard

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Gerard Bernabeu Altayo 949</pre></div><div class='update_description'><i onclick="document.location='25968#1435162785'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-24T16:19:45+00:00">Jun 24, 2015 04:19 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435162785">&nbsp;</a></div><pre>Wondering if we have a timeframe for a solution on this one.  I have workflows that need ACDC due to the file read errors, it makes no sense to submit more work that is just going to fail.

Jen

-- by Jennifer Adelman-McCarthy at Wed Jun 24 16&#58;18&#58;37 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=114554' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=114554</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435155080'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-24T14:11:20+00:00">Jun 24, 2015 02:11 PM UTC</time> by <b>Burt Holzman</b><a class="anchor" name="1435155080">&nbsp;</a></div><pre>Right - as far as I can tell you&#39;re using select() just to watch one FD.
It was nice to have an excuse to pull down my Stevens book though.

[Not that it matters since you&#39;re reworking the code, but there was a
bug in checking the results from getsockopt() also - IIRC you should
check sock_err as well as the rc. You do catch it a bit later on
(although with the comment that &#34;this should not happen&#34;..)]

- B

On 06/24/15 06&#58;00, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='25968#1435143617'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-24T11:00:17+00:00">Jun 24, 2015 11:00 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435143617">&nbsp;</a></div><pre>For your information, I confirm that the Dave&#39;s analysis is completely correct. I have confirmed that calling select() when more than 1024 file descriptors are open causes it to write out-of-bounds to either of the passed fd_set, causing in our case a stack corruption. I will rework the code as suggested by Dave into using poll() since select() is essentially broken-by-design. poll() isn&#39;t ideal either for *watching* very large number of fds, but that&#39;s not the case here.

Best wishes,
Mischa Sallé

-- by Mischa Salle at Wed Jun 24 10&#58;59&#58;26 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=114554' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=114554</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435104475'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-24T00:07:55+00:00">Jun 24, 2015 12:07 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435104475">&nbsp;</a></div><pre>I believe a bug has been found by Dave Dykstra in the way how sockets are managed.

I tried Dave/Burt&#39;s suggestion of lowering the number of threads from 220K (not sure why so many) to 128 and it did not help.

I&#39;ve just downgraded the RPM that&#39;s supposed to be buggy&#58;

[root@cmssrv203 ~]# yum downgrade lcmaps-plugins-scas-client-0.4.0-1.2.osg32.el6.x86_64.rpm
Loaded plugins&#58; priorities, security
Setting up Downgrade Process
Examining lcmaps-plugins-scas-client-0.4.0-1.2.osg32.el6.x86_64.rpm&#58; lcmaps-plugins-scas-client-0.4.0-1.2.osg32.el6.x86_64
Resolving Dependencies
--&#62; Running transaction check
---&#62; Package lcmaps-plugins-scas-client.x86_64 0&#58;0.4.0-1.2.osg32.el6 will be a downgrade
---&#62; Package lcmaps-plugins-scas-client.x86_64 0&#58;0.5.4-1.1.osg32.el6 will be erased
--&#62; Finished Dependency Resolution

Dependencies Resolved

=====================================================================================================================================================================================
Package                                    Arch                   Version                              Repository                                                              Size
=====================================================================================================================================================================================
Downgrading&#58;
lcmaps-plugins-scas-client                 x86_64                 0.4.0-1.2.osg32.el6                  /lcmaps-plugins-scas-client-0.4.0-1.2.osg32.el6.x86_64                  85 k

Transaction Summary
=====================================================================================================================================================================================
Downgrade     1 Package(s)

Total size&#58; 85 k
Is this ok [y/N]&#58; y
Downloading Packages&#58;
Running rpm_check_debug
Running Transaction Test
Transaction Test Succeeded
Running Transaction
<div id='show_1436978851' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1436978851'>Installing &#58; lcmaps-plugins-scas-client-0.4.0-1.2.osg32.el6.x86_64                                                                                                             1/2
Cleanup    &#58; lcmaps-plugins-scas-client-0.5.4-1.1.osg32.el6.x86_64                                                                                                             2/2
Verifying  &#58; lcmaps-plugins-scas-client-0.4.0-1.2.osg32.el6.x86_64                                                                                                             1/2
Verifying  &#58; lcmaps-plugins-scas-client-0.5.4-1.1.osg32.el6.x86_64                                                                                                             2/2

Removed&#58;
lcmaps-plugins-scas-client.x86_64 0&#58;0.5.4-1.1.osg32.el6

Installed&#58;
lcmaps-plugins-scas-client.x86_64 0&#58;0.4.0-1.2.osg32.el6

Complete!
[root@cmssrv203 ~]# service xrootd restart
Shutting down xrootd (xrootd, default)&#58;                    [  OK  ]
Shutting down xrootd (xrootd, eos)&#58;                        [  OK  ]
Shutting down xrootd (xrootd, disk)&#58;                       [  OK  ]
Starting xrootd (xrootd, default)&#58;                         [  OK  ]
Starting xrootd (xrootd, eos)&#58;                             [  OK  ]
Starting xrootd (xrootd, disk)&#58;                            [  OK  ]
[root@cmssrv203 ~]# date
Tue Jun 23 17&#58;28&#58;06 CDT 2015
[root@cmssrv203 ~]#
-- by gerard1 at Tue Jun 23 22&#58;30&#58;01 UTC 2015

In principle this is resolved (with a workaround), can you please confirm?

Thanks,
Gerard
-- by gerard1 at Wed Jun 24 00&#58;07&#58;12 UTC 2015

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448</a>
</div><script type='text/javascript'>
        $('#show_1436978851').click(function() {
            $('#detail_1436978851').slideDown("normal");
            $('#show_1436978851').hide();
            $('#hide_1436978851').show();
        });
        $('#hide_1436978851').click(function() {
            $('#detail_1436978851').slideUp();
            $('#hide_1436978851').hide();
            $('#show_1436978851').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='25968#1435098693'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T22:31:33+00:00">Jun 23, 2015 10:31 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435098693">&nbsp;</a></div><pre>I believe a bug has been found by Dave Dykstra in the way how sockets are managed.

I tried Dave/Burt&#39;s suggestion of lowering the number of threads from 220K (not sure why so many) to 128 and it did not help.

I&#39;ve just downgraded the RPM that&#39;s supposed to be buggy&#58;

[root@cmssrv203 ~]# yum downgrade lcmaps-plugins-scas-client-0.4.0-1.2.osg32.el6.x86_64.rpm
Loaded plugins&#58; priorities, security
Setting up Downgrade Process
Examining lcmaps-plugins-scas-client-0.4.0-1.2.osg32.el6.x86_64.rpm&#58; lcmaps-plugins-scas-client-0.4.0-1.2.osg32.el6.x86_64
Resolving Dependencies
--&#62; Running transaction check
---&#62; Package lcmaps-plugins-scas-client.x86_64 0&#58;0.4.0-1.2.osg32.el6 will be a downgrade
---&#62; Package lcmaps-plugins-scas-client.x86_64 0&#58;0.5.4-1.1.osg32.el6 will be erased
--&#62; Finished Dependency Resolution

Dependencies Resolved

=====================================================================================================================================================================================
Package                                    Arch                   Version                              Repository                                                              Size
=====================================================================================================================================================================================
Downgrading&#58;
lcmaps-plugins-scas-client                 x86_64                 0.4.0-1.2.osg32.el6                  /lcmaps-plugins-scas-client-0.4.0-1.2.osg32.el6.x86_64                  85 k

Transaction Summary
=====================================================================================================================================================================================
Downgrade     1 Package(s)

Total size&#58; 85 k
Is this ok [y/N]&#58; y
Downloading Packages&#58;
Running rpm_check_debug
Running Transaction Test
Transaction Test Succeeded
Running Transaction
<div id='show_501550404' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_501550404'>Installing &#58; lcmaps-plugins-scas-client-0.4.0-1.2.osg32.el6.x86_64                                                                                                             1/2
Cleanup    &#58; lcmaps-plugins-scas-client-0.5.4-1.1.osg32.el6.x86_64                                                                                                             2/2
Verifying  &#58; lcmaps-plugins-scas-client-0.4.0-1.2.osg32.el6.x86_64                                                                                                             1/2
Verifying  &#58; lcmaps-plugins-scas-client-0.5.4-1.1.osg32.el6.x86_64                                                                                                             2/2

Removed&#58;
lcmaps-plugins-scas-client.x86_64 0&#58;0.5.4-1.1.osg32.el6

Installed&#58;
lcmaps-plugins-scas-client.x86_64 0&#58;0.4.0-1.2.osg32.el6

Complete!
[root@cmssrv203 ~]# service xrootd restart
Shutting down xrootd (xrootd, default)&#58;                    [  OK  ]
Shutting down xrootd (xrootd, eos)&#58;                        [  OK  ]
Shutting down xrootd (xrootd, disk)&#58;                       [  OK  ]
Starting xrootd (xrootd, default)&#58;                         [  OK  ]
Starting xrootd (xrootd, eos)&#58;                             [  OK  ]
Starting xrootd (xrootd, disk)&#58;                            [  OK  ]
[root@cmssrv203 ~]# date
Tue Jun 23 17&#58;28&#58;06 CDT 2015
[root@cmssrv203 ~]#
-- by gerard1 at Tue Jun 23 22&#58;30&#58;01 UTC 2015

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448</a>
</div><script type='text/javascript'>
        $('#show_501550404').click(function() {
            $('#detail_501550404').slideDown("normal");
            $('#show_501550404').hide();
            $('#hide_501550404').show();
        });
        $('#hide_501550404').click(function() {
            $('#detail_501550404').slideUp();
            $('#hide_501550404').hide();
            $('#show_501550404').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='25968#1435097068'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T22:04:28+00:00">Jun 23, 2015 10:04 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435097068">&nbsp;</a></div><pre>I believe the root cause may be that the FD_* macros that go with select() don&#39;t support more than 1024 open file descriptors.  The old scas client didn&#39;t use select(), it did a blocking connect.  The final solution is to use poll() instead of select().  I had to make that change not that long ago in frontier client.
-- by dwd at Tue Jun 23 22&#58;03&#58;54 UTC 2015

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435092383'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T20:46:23+00:00">Jun 23, 2015 08:46 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435092383">&nbsp;</a></div><pre>Sometimes we get the segfaults without the error messages&#58;

[root@cmssrv203 ~]# uptime
15&#58;31&#58;47 up 1 day,  5&#58;14,  5 users,  load average&#58; 0.91, 4.16, 2.78
[root@cmssrv203 ~]# dmesg | grep -c segfault
62
[root@cmssrv203 ~]# grep -c &#39;stack smashing detected&#39; /var/log/xrootd/xrootd.log
28

The log we&#39;re parsing should contain all the daemon starts&#58;

[root@cmssrv203 ~]# head -1 /var/log/xrootd/xrootd.log
150622 00&#58;00&#58;00 17845 Removed log file /var/log/xrootd/xrootd.log.20150615

But if we see how many times xrootd started, the count is lower than the number of segfaults in dmesg&#58;

[root@cmssrv203 ~]# grep -c &#39;Scalla is starting&#39; /var/log/xrootd/xrootd.log
34

I also see that before some xrootd starts there is no stacktrace in the log (the &#39;stack smashing detected&#39;), in some cases there is an error in some others there is just a regular xrootd activity message (eg&#58; redirecting XXX).

And the xacml_io issue does happen more often than we get crashes&#58;

[root@cmssrv203 ~]# grep -c &#39;xacml_io_create_client_socket&#58; Failed to connect&#58; Operation now in progress&#39; /var/log/xrootd/xrootd.log
305

Also, to &#39;reduce&#39; the amount of software changes involved, the issue showed up before we upgraded xrootd or installed the xrootd-compat libraries, this is the update+reboot that triggered the issue&#58;

Jun 22 10&#58;09&#58;22 Updated&#58; kernel-firmware-2.6.32-504.23.4.el6.noarch
Jun 22 10&#58;09&#58;24 Updated&#58; selinux-policy-3.7.19-260.el6_6.3.noarch
Jun 22 10&#58;09&#58;27 Updated&#58; golang-src-1.4.2-2.el6.noarch
Jun 22 10&#58;09&#58;29 Updated&#58; tzdata-2015d-1.el6.noarch
Jun 22 10&#58;09&#58;30 Updated&#58; nss-softokn-freebl-3.14.3-22.el6_6.x86_64
Jun 22 10&#58;09&#58;37 Updated&#58; glibc-2.12-1.149.el6_6.7.x86_64
Jun 22 10&#58;09&#58;47 Updated&#58; glibc-common-2.12-1.149.el6_6.7.x86_64
<div id='show_1639087759' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1639087759'>Jun 22 10&#58;09&#58;48 Updated&#58; openssl-1.0.1e-30.el6_6.9.x86_64
Jun 22 10&#58;09&#58;50 Updated&#58; globus-common-15.27-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;50 Updated&#58; globus-gsi-openssl-error-3.5-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;51 Updated&#58; globus-gsi-proxy-ssl-5.7-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;51 Updated&#58; nspr-4.10.8-1.el6_6.x86_64
Jun 22 10&#58;09&#58;52 Updated&#58; nss-util-3.18.0-1.el6_6.x86_64
Jun 22 10&#58;09&#58;52 Updated&#58; globus-gsi-sysconfig-6.8-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;53 Updated&#58; globus-openssl-module-4.6-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;53 Updated&#58; globus-gsi-cert-utils-9.10-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;54 Updated&#58; globus-gsi-callback-5.6-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;54 Updated&#58; globus-gsi-credential-7.7-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;55 Updated&#58; nss-softokn-3.14.3-22.el6_6.x86_64
Jun 22 10&#58;09&#58;56 Updated&#58; nss-3.18.0-5.3.el6_6.x86_64
Jun 22 10&#58;09&#58;57 Updated&#58; nss-sysinit-3.18.0-5.3.el6_6.x86_64
Jun 22 10&#58;09&#58;57 Updated&#58; globus-gsi-proxy-core-7.7-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;58 Updated&#58; globus-gssapi-gsi-11.14-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;58 Updated&#58; globus-callout-3.13-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;59 Updated&#58; globus-gss-assist-10.13-1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;00 Updated&#58; eos-client-0.3.111-aquamarine.slc6.x86_64
Jun 22 10&#58;10&#58;01 Updated&#58; voms-2.0.12-3.1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;02 Updated&#58; lcmaps-plugins-verify-proxy-1.5.6-1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;02 Updated&#58; lcmaps-plugins-basic-1.7.0-2.osg32.el6.x86_64
Jun 22 10&#58;10&#58;03 Updated&#58; lcmaps-1.6.6-1.1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;04 Installed&#58; ppl-0.10.2-11.el6.x86_64
Jun 22 10&#58;10&#58;05 Installed&#58; cloog-ppl-0.15.7-1.2.el6.x86_64
Jun 22 10&#58;10&#58;05 Updated&#58; xacml-1.5.0-1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;06 Installed&#58; mpfr-2.4.1-6.el6.x86_64
Jun 22 10&#58;10&#58;07 Installed&#58; cpp-4.4.7-11.el6.x86_64
Jun 22 10&#58;10&#58;09 Updated&#58; kernel-headers-2.6.32-504.23.4.el6.x86_64
Jun 22 10&#58;10&#58;12 Updated&#58; glibc-headers-2.12-1.149.el6_6.7.x86_64
Jun 22 10&#58;10&#58;13 Updated&#58; glibc-devel-2.12-1.149.el6_6.7.x86_64
Jun 22 10&#58;10&#58;14 Installed&#58; gcc-4.4.7-11.el6.x86_64
Jun 22 10&#58;10&#58;16 Installed&#58; golang-1.4.2-2.el6.x86_64
Jun 22 10&#58;10&#58;19 Updated&#58; golang-pkg-linux-amd64-1.4.2-2.el6.noarch
Jun 22 10&#58;10&#58;22 Updated&#58; golang-pkg-bin-linux-amd64-1.4.2-2.el6.x86_64
Jun 22 10&#58;10&#58;23 Updated&#58; zabbix-1.8.22-1.el6.x86_64
Jun 22 10&#58;10&#58;24 Updated&#58; zabbix-agent-1.8.22-1.el6.x86_64
Jun 22 10&#58;10&#58;24 Updated&#58; lcmaps-plugins-scas-client-0.5.4-1.1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;28 Updated&#58; eos-fuse-0.3.111-aquamarine.slc6.x86_64
Jun 22 10&#58;10&#58;28 Updated&#58; globus-gssapi-error-5.4-1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;29 Updated&#58; nss-tools-3.18.0-5.3.el6_6.x86_64
Jun 22 10&#58;10&#58;30 Updated&#58; globus-gridmap-callout-error-2.4-1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;30 Updated&#58; fetch-crl-3.0.14-1.el6.noarch
Jun 22 10&#58;10&#58;31 Updated&#58; check-mk-agent-1.2.4p5-2.el6.x86_64
Jun 22 10&#58;11&#58;00 Updated&#58; selinux-policy-targeted-3.7.19-260.el6_6.3.noarch
Jun 22 10&#58;11&#58;08 Installed&#58; kernel-2.6.32-504.23.4.el6.x86_64
Jun 22 10&#58;11&#58;08 Updated&#58; cms-global-1.0.1-1.el6.noarch
Jun 22 10&#58;11&#58;09 Updated&#58; nss-softokn-freebl-3.14.3-22.el6_6.i686
Jun 22 10&#58;11&#58;11 Updated&#58; glibc-2.12-1.149.el6_6.7.i686
Jun 22 10&#58;11&#58;35 Erased&#58; golang-vim

Full info on the segfaults&#58;
[root@cmssrv203 ~]# grep -c segfault /var/log/messages
67
[root@cmssrv203 ~]# grep  segfault /var/log/messages
Jun 22 16&#58;45&#58;50 cmssrv203 kernel&#58; xrootd[16542]&#58; segfault at 2020 ip 00007f242e467623 sp 00007f2425181190 error 4 in libc-2.12.so[7f242e398000+18a000]
Jun 22 19&#58;43&#58;18 cmssrv203 kernel&#58; xrootd[24201]&#58; segfault at 0 ip (null) sp 00007f2f5dbbb380 error 14 in xrootd[400000+30000]
Jun 22 20&#58;56&#58;29 cmssrv203 kernel&#58; xrootd[1329]&#58; segfault at 8000020 ip 00007fcf5a637623 sp 00007fce20f90190 error 4 in libc-2.12.so[7fcf5a568000+18a000]
Jun 22 22&#58;49&#58;26 cmssrv203 kernel&#58; xrootd[22010]&#58; segfault at 110 ip 00007f29bd15d050 sp 00007f29bbee0f50 error 4 in libc-2.12.so[7f29bd128000+18a000]
Jun 22 23&#58;21&#58;23 cmssrv203 kernel&#58; xrootd[26664]&#58; segfault at 40 ip 00007f7ae877f623 sp 00007f7ae7c53190 error 4 in libc-2.12.so[7f7ae86b0000+18a000]
Jun 23 00&#58;24&#58;27 cmssrv203 kernel&#58; xrootd[15152]&#58; segfault at 400000000020 ip 00007fa1968f7623 sp 00007f9f86ece190 error 4 in libc-2.12.so[7fa196828000+18a000]
Jun 23 01&#58;54&#58;21 cmssrv203 kernel&#58; xrootd[16725]&#58; segfault at 80000000020 ip 00007fc151a57623 sp 00007fc04a0c0190 error 4 in libc-2.12.so[7fc151988000+18a000]
Jun 23 03&#58;55&#58;29 cmssrv203 kernel&#58; xrootd[10650]&#58; segfault at 2a70 ip 00000031ddecf623 sp 00007fc904b52190 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 04&#58;55&#58;13 cmssrv203 kernel&#58; xrootd[17279]&#58; segfault at 8020 ip 00000031ddecf623 sp 00007f2cb12b2190 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 05&#58;19&#58;26 cmssrv203 kernel&#58; xrootd[25689]&#58; segfault at 110 ip 00000031dde35050 sp 00007f687d307f50 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 05&#58;59&#58;39 cmssrv203 kernel&#58; xrootd[31446]&#58; segfault at 80000000020 ip 00000031ddecf623 sp 00007feb097b7190 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 06&#58;34&#58;03 cmssrv203 kernel&#58; xrootd[17778]&#58; segfault at 30 ip 00000031ddecf623 sp 00007fa86ebcb190 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 07&#58;05&#58;39 cmssrv203 kernel&#58; xrootd[2356]&#58; segfault at 0 ip (null) sp 00007f6e6e3c3380 error 14 in xrootd[400000+30000]
Jun 23 07&#58;26&#58;19 cmssrv203 kernel&#58; xrootd[8489]&#58; segfault at 8020 ip 00000031ddecf623 sp 00007f97cb7d7190 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 07&#58;57&#58;18 cmssrv203 kernel&#58; xrootd[12889]&#58; segfault at 40 ip 00000031ddecf623 sp 00007f4d982a2190 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 09&#58;31&#58;29 cmssrv203 kernel&#58; xrootd[29241]&#58; segfault at 200000000020 ip 00000031ddecf623 sp 00007fa3409a8190 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 11&#58;49&#58;08 cmssrv203 kernel&#58; xrootd[19437]&#58; segfault at 60 ip 00000031ddecf623 sp 00007f8a7ec4c160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 12&#58;43&#58;43 cmssrv203 kernel&#58; xrootd[466]&#58; segfault at 40004000020 ip 00000031ddecf623 sp 00007f926d3b3160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;22&#58;36 cmssrv203 kernel&#58; xrootd[26074]&#58; segfault at 400000020 ip 00000031ddecf623 sp 00007f3627ada160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;24&#58;33 cmssrv203 kernel&#58; xrootd[18290]&#58; segfault at 30 ip 00000031ddecf623 sp 00007f7124ad5160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;29&#58;19 cmssrv203 kernel&#58; xrootd[7114]&#58; segfault at 40000020 ip 00000031ddecf623 sp 00007f2724a69160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;31&#58;09 cmssrv203 kernel&#58; xrootd[796]&#58; segfault at 80000020 ip 00000031ddecf623 sp 00007f87dac14160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;33&#58;07 cmssrv203 kernel&#58; xrootd[24770]&#58; segfault at 400000000020 ip 00000031ddecf623 sp 00007f7167cdc160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;34&#58;57 cmssrv203 kernel&#58; xrootd[17071]&#58; segfault at 8000000020 ip 00000031ddecf623 sp 00007fb3296b6160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;37&#58;20 cmssrv203 kernel&#58; xrootd[6145]&#58; segfault at 400000000020 ip 00000031ddecf623 sp 00007f08e9de8160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;39&#58;46 cmssrv203 kernel&#58; xrootd[2544]&#58; segfault at a0 ip 00000031ddecf623 sp 00007f75fe552160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;41&#58;40 cmssrv203 kernel&#58; xrootd[1372]&#58; segfault at 800000020 ip 00000031ddecf623 sp 00007ffd0c4a2160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;43&#58;30 cmssrv203 kernel&#58; xrootd[24074]&#58; segfault at 80020 ip 00000031ddecf623 sp 00007fb6b4748160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;45&#58;51 cmssrv203 kernel&#58; xrootd[14371]&#58; segfault at 200000000020 ip 00000031ddecf623 sp 00007f6001088160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;48&#58;05 cmssrv203 kernel&#58; xrootd[13610]&#58; segfault at 400000020 ip 00000031ddecf623 sp 00007fa2707a7160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;51&#58;05 cmssrv203 kernel&#58; xrootd[11441]&#58; segfault at 400000000020 ip 00000031ddecf623 sp 00007f97986a6160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;53&#58;17 cmssrv203 kernel&#58; xrootd[12886]&#58; segfault at 10000000020 ip 00000031ddecf623 sp 00007f9baad78160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;55&#58;26 cmssrv203 kernel&#58; xrootd[8373]&#58; segfault at 60 ip 00000031ddecf623 sp 00007fe66592d160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;57&#58;46 cmssrv203 kernel&#58; xrootd[5618]&#58; segfault at 4000000020 ip 00000031ddecf623 sp 00007fd8d98b8160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 13&#58;59&#58;36 cmssrv203 kernel&#58; xrootd[860]&#58; segfault at 80000020 ip 00000031ddecf623 sp 00007f5234e6e160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;01&#58;37 cmssrv203 kernel&#58; xrootd[26260]&#58; segfault at 40020 ip 00000031ddecf623 sp 00007f2159aba160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;06&#58;48 cmssrv203 kernel&#58; xrootd[28365]&#58; segfault at 820 ip 00000031ddecf623 sp 00007f10ec1a1160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;10&#58;29 cmssrv203 kernel&#58; xrootd[12129]&#58; segfault at 400000020 ip 00000031ddecf623 sp 00007f36b778d160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;12&#58;44 cmssrv203 kernel&#58; xrootd[4837]&#58; segfault at 80000000020 ip 00000031ddecf623 sp 00007f8388dad160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;15&#58;00 cmssrv203 kernel&#58; xrootd[7270]&#58; segfault at 10020 ip 00000031ddecf623 sp 00007f472f999160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;23&#58;24 cmssrv203 kernel&#58; xrootd[22292]&#58; segfault at 100000000020 ip 00000031ddecf623 sp 00007f0fd0faf160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;25&#58;18 cmssrv203 kernel&#58; xrootd[12722]&#58; segfault at 10000000020 ip 00000031ddecf623 sp 00007fbd1bfdf160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;27&#58;45 cmssrv203 kernel&#58; xrootd[7754]&#58; segfault at 80000000020 ip 00000031ddecf623 sp 00007f7f1dcbc160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;32&#58;50 cmssrv203 kernel&#58; xrootd[11921]&#58; segfault at 10000020 ip 00000031ddecf623 sp 00007f54d28c8160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;35&#58;44 cmssrv203 kernel&#58; xrootd[8449]&#58; segfault at 10000000020 ip 00000031ddecf623 sp 00007f01ebcdc160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;37&#58;56 cmssrv203 kernel&#58; xrootd[14127]&#58; segfault at 400000020 ip 00000031ddecf623 sp 00007f6709cf2160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;40&#58;22 cmssrv203 kernel&#58; xrootd[10898]&#58; segfault at 40000000020 ip 00000031ddecf623 sp 00007f7710617160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;42&#58;45 cmssrv203 kernel&#58; xrootd[12342]&#58; segfault at 10000020 ip 00000031ddecf623 sp 00007fd8d0baa160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;47&#58;37 cmssrv203 kernel&#58; xrootd[26776]&#58; segfault at 120 ip 00000031ddecf623 sp 00007fb0eb282160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;49&#58;05 cmssrv203 kernel&#58; xrootd[14895]&#58; segfault at 20000000020 ip 00000031ddecf623 sp 00007f1668727160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;50&#58;24 cmssrv203 kernel&#58; xrootd[1817]&#58; segfault at 60 ip 00000031ddecf623 sp 00007f8d053b3160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;52&#58;01 cmssrv203 kernel&#58; xrootd[21037]&#58; segfault at 100000020 ip 00000031ddecf623 sp 00007f25d55b5160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 14&#58;58&#58;56 cmssrv203 kernel&#58; xrootd[5149]&#58; segfault at 40020 ip 00000031ddecf623 sp 00007f4e682a2160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 15&#58;01&#58;01 cmssrv203 kernel&#58; xrootd[7856]&#58; segfault at 120 ip 00000031ddecf623 sp 00007fbd387de160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 15&#58;04&#58;04 cmssrv203 kernel&#58; xrootd[4014]&#58; segfault at 100000020 ip 00000031ddecf623 sp 00007f0e286a6160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 15&#58;06&#58;02 cmssrv203 kernel&#58; xrootd[13713]&#58; segfault at 4020 ip 00000031ddecf623 sp 00007fc7161c1160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 15&#58;18&#58;31 cmssrv203 kernel&#58; xrootd[26472]&#58; segfault at 100000020 ip 00000031ddecf623 sp 00007f3a311f2160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 15&#58;24&#58;22 cmssrv203 kernel&#58; xrootd[21654]&#58; segfault at 8000020 ip 00000031ddecf623 sp 00007feffdee3160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 15&#58;25&#58;54 cmssrv203 kernel&#58; xrootd[8740]&#58; segfault at 2020 ip 00000031ddecf623 sp 00007ff5c16b6160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 15&#58;27&#58;04 cmssrv203 kernel&#58; xrootd[28590]&#58; segfault at 800000020 ip 00000031ddecf623 sp 00007f7c43d07160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 15&#58;28&#58;27 cmssrv203 kernel&#58; xrootd[13272]&#58; segfault at 30 ip 00000031ddecf623 sp 00007f5598faf160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 15&#58;30&#58;46 cmssrv203 kernel&#58; xrootd[1418]&#58; segfault at 30 ip 00000031ddecf623 sp 00007f70cfb9b160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 15&#58;32&#58;32 cmssrv203 kernel&#58; xrootd[911]&#58; segfault at 40000020 ip 00000031ddecf623 sp 00007f3caf8d8160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 15&#58;34&#58;39 cmssrv203 kernel&#58; xrootd[27708]&#58; segfault at 400000000020 ip 00000031ddecf623 sp 00007f9fbbede160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 15&#58;38&#58;17 cmssrv203 kernel&#58; xrootd[23424]&#58; segfault at 100000000020 ip 00000031ddecf623 sp 00007fd40bcdc160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 15&#58;39&#58;23 cmssrv203 kernel&#58; xrootd[10225]&#58; segfault at 20000000020 ip 00000031ddecf623 sp 00007f88d36d6160 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 15&#58;40&#58;45 cmssrv203 kernel&#58; xrootd[28375]&#58; segfault at 20000020 ip 00000031ddecf623 sp 00007f1cc5257160 error 4 in libc-2.12.so[31dde00000+18a000]
[root@cmssrv203 ~]#
-- by gerard1 at Tue Jun 23 20&#58;45&#58;51 UTC 2015

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448</a>
</div><script type='text/javascript'>
        $('#show_1639087759').click(function() {
            $('#detail_1639087759').slideDown("normal");
            $('#show_1639087759').hide();
            $('#hide_1639087759').show();
        });
        $('#hide_1639087759').click(function() {
            $('#detail_1639087759').slideUp();
            $('#hide_1639087759').hide();
            $('#show_1639087759').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='25968#1435090878'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T20:21:18+00:00">Jun 23, 2015 08:21 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435090878">&nbsp;</a></div><pre>sure, the trace is in the logfile, I&#39;ll zip and send you the log file.

[root@cmssrv203 ~]# tar -czf /var/log/xrootd/xrootd.log.tgz
/var/log/xrootd/xrootd.log
tar&#58; Removing leading &#96;/&#39; from member names
ls -lah /var/log/xrootd/xrootd.log.tgz
tar&#58; /var/log/xrootd/xrootd.log&#58; file changed as we read it
[root@cmssrv203 ~]# ls -lah /var/log/xrootd/xrootd.log.tgz
-rw-r--r-- 1 root root 54M Jun 23 14&#58;18 /var/log/xrootd/xrootd.log.tgz
[root@cmssrv203 ~]# id dwd
uid=3382(dwd) gid=5063(us_cms) groups=5063(us_cms)

You should have access to this node, feel free to go grab the file (IM me
if you can&#39;t).

thanks!
Gerard

On Tue, Jun 23, 2015 at 1&#58;40 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62;  [Duplicate message snipped]</font>

Mischa Salle has subscribed to this ticket.

-- by Mischa Salle at Tue Jun 23 19&#58;56&#58;10 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=114554' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=114554</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435090760'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T20:19:20+00:00">Jun 23, 2015 08:19 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435090760">&nbsp;</a></div><pre>Here&#39;s a backtrace of the signal&#58;
(gdb) bt
#0  0x00000031ddecf623 in freeaddrinfo () from /lib64/libc.so.6
#1  0x00007f8a048c13be in xacml_io_create_client_socket () from /usr/lib64/lcmaps/lcmaps_scas_client.mod
#2  0x00007f8a048be0cb in ?? () from /usr/lib64/lcmaps/lcmaps_scas_client.mod
#3  0x00007f8a0452a693 in xacml_i_connect () from /usr/lib64/libxacml.so.0
#4  0x00007f8a041f153a in ?? () from /usr/lib64/libgsoap++.so.0
#5  0x00007f8a041f1705 in soap_connect_command () from /usr/lib64/libgsoap++.so.0
#6  0x00007f8a04649b7d in soap_call___XACMLService__Authorize(soap*, char const*, char const*, XACMLsamlp__XACMLAuthzDecisionQueryType*, samlp__ResponseType*) ()
from /usr/lib64/libxacml.so.0
#7  0x00007f8a045231cb in xacml_query_file () from /usr/lib64/libxacml.so.0
#8  0x00007f8a048c550f in ?? () from /usr/lib64/lcmaps/lcmaps_scas_client.mod
#9  0x00007f8a048c6fcf in ?? () from /usr/lib64/lcmaps/lcmaps_scas_client.mod
#10 0x00007f8a0538d88f in lcmaps_runEvaluationManager () from /usr/lib64/liblcmaps.so.0
#11 0x00007f8a0538864b in lcmaps_runPluginManager () from /usr/lib64/liblcmaps.so.0
#12 0x00007f8a0537ff07 in lcmaps_run_with_pem_and_return_account () from /usr/lib64/liblcmaps.so.0
#13 0x00007f8a05599a45 in XrdSecgsiAuthzFun () from /usr/lib64/libXrdLcmaps.so
#14 0x00007f8a05bfe72d in XrdSecProtocolgsi&#58;&#58;Authenticate(XrdSecBuffer*, XrdSecBuffer**, XrdOucErrInfo*) () from /usr/lib64/libXrdSecgsi-4.so
#15 0x00007f8a0c899ac4 in XrdXrootdProtocol&#58;&#58;do_Auth() () from /usr/lib64/libXrdServer.so.2
#16 0x00007f8a0c617899 in XrdLink&#58;&#58;DoIt() () from /usr/lib64/libXrdUtils.so.2
#17 0x00007f8a0c61ade5 in XrdScheduler&#58;&#58;Run() () from /usr/lib64/libXrdUtils.so.2
#18 0x00007f8a0c61afd9 in XrdStartWorking(void*) () from /usr/lib64/libXrdUtils.so.2
#19 0x00007f8a0c5de4df in XrdSysThread_Xeq () from /usr/lib64/libXrdUtils.so.2
#20 0x00000031de2079d1 in start_thread () from /lib64/libpthread.so.0
#21 0x00000031ddee88fd in clone () from /lib64/libc.so.6
-- by gerard1 at Tue Jun 23 20&#58;18&#58;34 UTC 2015

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435087201'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T19:20:01+00:00">Jun 23, 2015 07:20 PM UTC</time> by <b>gerard1@....</b><a class="anchor" name="1435087201">&nbsp;</a></div><pre>sure, the trace is in the logfile, I&#39;ll zip and send you the log file.

[root@cmssrv203 ~]# tar -czf /var/log/xrootd/xrootd.log.tgz
/var/log/xrootd/xrootd.log
tar&#58; Removing leading &#96;/&#39; from member names
ls -lah /var/log/xrootd/xrootd.log.tgz
tar&#58; /var/log/xrootd/xrootd.log&#58; file changed as we read it
[root@cmssrv203 ~]# ls -lah /var/log/xrootd/xrootd.log.tgz
-rw-r--r-- 1 root root 54M Jun 23 14&#58;18 /var/log/xrootd/xrootd.log.tgz
[root@cmssrv203 ~]# id dwd
uid=3382(dwd) gid=5063(us_cms) groups=5063(us_cms)

You should have access to this node, feel free to go grab the file (IM me
if you can&#39;t).

thanks!
Gerard

On Tue, Jun 23, 2015 at 1&#58;40 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62;  [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='25968#1435084801'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T18:40:01+00:00">Jun 23, 2015 06:40 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435084801">&nbsp;</a></div><pre>Gerard, can we get an strace of a failing xrootd?  I&#39;m looking at the source code of xacml_io_create_client_socket
<a href='http&#58;//ndpfsvn.nikhef.nl/viewvc/mwsec/trunk/lcmaps-plugins-scas-client/src/saml2-xacml2/io_handler/network/net_common.c?annotate=18355' target='_blank' rel='nofollow'>http&#58;//ndpfsvn.nikhef.nl/viewvc/mwsec/trunk/lcmaps-plugins-scas-client/src/saml2-xacml2/io_handler/network/net_common.c?annotate=18355</a>
and it isn&#39;t obvious how it could be getting an EINPROGRESS error at the point it prints that message.
-- by dwd at Tue Jun 23 18&#58;39&#58;08 UTC 2015

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435083477'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T18:17:57+00:00">Jun 23, 2015 06:17 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435083477">&nbsp;</a></div><pre>Hi Gerard,

I don&#39;t know much about xrootd, but I noticed you&#39;ve got xrootd-compat and xrootd-compat-libs from epel.  That can&#39;t be right, can it?

I started looking because I googled for &#34;xrootd stack smash detected&#34; and the first hint from a SLAC posting was related to xrootd coming from epel.

Another thought I had was to try to find out first why xacml_io_create_client_socket is getting &#34;Failed to connect&#58; Operation now in progress&#34; before investigating why it is segfaulting; the connect failure appears to be the root cause.

Also adding Robert Illingworth because he has more experience with xrootd.

Dave

-- by dwd at Tue Jun 23 18&#58;17&#58;10 UTC 2015

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435079831'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T17:17:11+00:00">Jun 23, 2015 05:17 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435079831">&nbsp;</a></div><pre>Copy and pasting all segfaults for the last few hours in the work notes.

It seems to be that each time lcmaps can&#39;t connect somewhere (GUMS?) it makes xrootd segfault...

lcmaps[3506]     LOG_ERR&#58; 2015-06-22.22&#58;28&#58;34Z&#58; xacml_io_create_client_socket&#58; Failed to connect&#58; Operation now in progress

As a temporary workaround&#58;

[root@cmssrv203 ~]# nohup bash -c &#39;while [ 1 ]; do service xrootd start; sleep 1; done&#39; &
[1] 31549
[root@cmssrv203 ~]# nohup&#58; ignoring input and appending output to &#96;nohup.out&#39;
tail nohup.out
Starting xrootd (xrootd, eos)&#58;
Starting xrootd (xrootd, disk)&#58;
Starting xrootd (xrootd, default)&#58;
Starting xrootd (xrootd, eos)&#58;
Starting xrootd (xrootd, disk)&#58;
Starting xrootd (xrootd, default)&#58;
Starting xrootd (xrootd, eos)&#58;
Starting xrootd (xrootd, disk)&#58;
Starting xrootd (xrootd, default)&#58;
Starting xrootd (xrootd, eos)&#58;
[root@cmssrv203 ~]#
-- by gerard1 at Tue Jun 23 17&#58;16&#58;04 UTC 2015

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435078228'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T16:50:28+00:00">Jun 23, 2015 04:50 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435078228">&nbsp;</a></div><pre>Even after updating xrootd, it&#39;s still segfaulting&#58;

150623 11&#58;37&#58;11 12058 XrootdXeq&#58; cmsprod.36331&#58;2215@cmswn2050 pub IPv4 login as cmsprod
150623 11&#58;37&#58;11 12058 Prepare Finder&#58; Sending cmssrv203.fnal.gov c67cc7c3.5589832b&#58;16584 /store/relval/CMSSW_7_4_6/MET/RAW/GR_H_V57A_RelVal_met2012A-v1/00000/7CDAC802-4219-E511-BE2D-002618943957.root
150623 11&#58;37&#58;11 12577 bafranci.4225&#58;2930@cmslpc25 XrootdProtocol&#58; more auth requested; sz=2403
INFO in AuthzKey&#58; Returning &#39;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=brfranci/CN=760378/CN=Brian Anthony Francisco&#58;&#58;/cms/Role=NULL/Capability=NULL&#39; of length 121 as key.
lcmaps[12039]     LOG_ERR&#58; 2015-06-23.16&#58;37&#58;11Z&#58; xacml_io_create_client_socket&#58; Failed to connect&#58; Operation now in progress
*** stack smashing detected ***&#58; /usr/bin/xrootd terminated
======= Backtrace&#58; =========
/lib64/libc.so.6(__fortify_fail+0x37)[0x31ddf02527]
/lib64/libc.so.6(__fortify_fail+0x0)[0x31ddf024f0]
/usr/lib64/lcmaps/lcmaps_scas_client.mod(xacml_io_create_client_socket+0x607)[0x7f1f40129797]
======= Memory map&#58; ========
00400000-0040f000 r-xp 00000000 08&#58;02 347034                             /usr/bin/xrootd
0060f000-00610000 rw-p 0000f000 08&#58;02 347034                             /usr/bin/xrootd
00610000-00611000 rw-p 00000000 00&#58;00 0
00680000-006a1000 rw-p 00000000 00&#58;00 0
006a1000-00bf4000 rw-p 00000000 00&#58;00 0
31dda00000-31dda20000 r-xp 00000000 08&#58;02 753669                         /lib64/ld-2.12.so
31ddc1f000-31ddc20000 r--p 0001f000 08&#58;02 753669                         /lib64/ld-2.12.so
31ddc20000-31ddc21000 rw-p 00020000 08&#58;02 753669                         /lib64/ld-2.12.so
31ddc21000-31ddc22000 rw-p 00000000 00&#58;00 0
31dde00000-31ddf8a000 r-xp 00000000 08&#58;02 753672                         /lib64/libc-2.12.so
31ddf8a000-31de18a000 ---p 0018a000 08&#58;02 753672                         /lib64/libc-2.12.so
31de18a000-31de18e000 r--p 0018a000 08&#58;02 753672                         /lib64/libc-2.12.so
31de18e000-31de18f000 rw-p 0018e000 08&#58;02 753672                         /lib64/libc-2.12.so
31de18f000-31de194000 rw-p 00000000 00&#58;00 0
31de200000-31de217000 r-xp 00000000 08&#58;02 753673                         /lib64/libpthread-2.12.so
31de217000-31de417000 ---p 00017000 08&#58;02 753673                         /lib64/libpthread-2.12.so
31de417000-31de418000 r--p 00017000 08&#58;02 753673                         /lib64/libpthread-2.12.so
31de418000-31de419000 rw-p 00018000 08&#58;02 753673                         /lib64/libpthread-2.12.so
31de419000-31de41d000 rw-p 00000000 00&#58;00 0

The issue may be libc and/or /usr/lib64/lcmaps/lcmaps_scas_client.mod related...

<div id='show_716733675' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_716733675'>Both were actually updated yesterday&#58;

[root@cmssrv203 ~]# tail -100 /var/log/yum.log | grep Jun
Jun 18 13&#58;12&#58;40 Updated&#58; uscms_zabbix_plugins-1.8.19-2.noarch
Jun 19 10&#58;17&#58;08 Installed&#58; nss_compat_ossl-0.9.6-1.el6.x86_64
Jun 19 10&#58;17&#58;09 Installed&#58; elinks-0.12-0.21.pre5.el6_3.x86_64
Jun 22 10&#58;09&#58;22 Updated&#58; kernel-firmware-2.6.32-504.23.4.el6.noarch
Jun 22 10&#58;09&#58;24 Updated&#58; selinux-policy-3.7.19-260.el6_6.3.noarch
Jun 22 10&#58;09&#58;27 Updated&#58; golang-src-1.4.2-2.el6.noarch
Jun 22 10&#58;09&#58;29 Updated&#58; tzdata-2015d-1.el6.noarch
Jun 22 10&#58;09&#58;30 Updated&#58; nss-softokn-freebl-3.14.3-22.el6_6.x86_64
Jun 22 10&#58;09&#58;37 Updated&#58; glibc-2.12-1.149.el6_6.7.x86_64
Jun 22 10&#58;09&#58;47 Updated&#58; glibc-common-2.12-1.149.el6_6.7.x86_64
Jun 22 10&#58;09&#58;48 Updated&#58; openssl-1.0.1e-30.el6_6.9.x86_64
Jun 22 10&#58;09&#58;50 Updated&#58; globus-common-15.27-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;50 Updated&#58; globus-gsi-openssl-error-3.5-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;51 Updated&#58; globus-gsi-proxy-ssl-5.7-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;51 Updated&#58; nspr-4.10.8-1.el6_6.x86_64
Jun 22 10&#58;09&#58;52 Updated&#58; nss-util-3.18.0-1.el6_6.x86_64
Jun 22 10&#58;09&#58;52 Updated&#58; globus-gsi-sysconfig-6.8-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;53 Updated&#58; globus-openssl-module-4.6-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;53 Updated&#58; globus-gsi-cert-utils-9.10-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;54 Updated&#58; globus-gsi-callback-5.6-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;54 Updated&#58; globus-gsi-credential-7.7-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;55 Updated&#58; nss-softokn-3.14.3-22.el6_6.x86_64
Jun 22 10&#58;09&#58;56 Updated&#58; nss-3.18.0-5.3.el6_6.x86_64
Jun 22 10&#58;09&#58;57 Updated&#58; nss-sysinit-3.18.0-5.3.el6_6.x86_64
Jun 22 10&#58;09&#58;57 Updated&#58; globus-gsi-proxy-core-7.7-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;58 Updated&#58; globus-gssapi-gsi-11.14-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;58 Updated&#58; globus-callout-3.13-1.osg32.el6.x86_64
Jun 22 10&#58;09&#58;59 Updated&#58; globus-gss-assist-10.13-1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;00 Updated&#58; eos-client-0.3.111-aquamarine.slc6.x86_64
Jun 22 10&#58;10&#58;01 Updated&#58; voms-2.0.12-3.1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;02 Updated&#58; lcmaps-plugins-verify-proxy-1.5.6-1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;02 Updated&#58; lcmaps-plugins-basic-1.7.0-2.osg32.el6.x86_64
Jun 22 10&#58;10&#58;03 Updated&#58; lcmaps-1.6.6-1.1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;04 Installed&#58; ppl-0.10.2-11.el6.x86_64
Jun 22 10&#58;10&#58;05 Installed&#58; cloog-ppl-0.15.7-1.2.el6.x86_64
Jun 22 10&#58;10&#58;05 Updated&#58; xacml-1.5.0-1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;06 Installed&#58; mpfr-2.4.1-6.el6.x86_64
Jun 22 10&#58;10&#58;07 Installed&#58; cpp-4.4.7-11.el6.x86_64
Jun 22 10&#58;10&#58;09 Updated&#58; kernel-headers-2.6.32-504.23.4.el6.x86_64
Jun 22 10&#58;10&#58;12 Updated&#58; glibc-headers-2.12-1.149.el6_6.7.x86_64
Jun 22 10&#58;10&#58;13 Updated&#58; glibc-devel-2.12-1.149.el6_6.7.x86_64
Jun 22 10&#58;10&#58;14 Installed&#58; gcc-4.4.7-11.el6.x86_64
Jun 22 10&#58;10&#58;16 Installed&#58; golang-1.4.2-2.el6.x86_64
Jun 22 10&#58;10&#58;19 Updated&#58; golang-pkg-linux-amd64-1.4.2-2.el6.noarch
Jun 22 10&#58;10&#58;22 Updated&#58; golang-pkg-bin-linux-amd64-1.4.2-2.el6.x86_64
Jun 22 10&#58;10&#58;23 Updated&#58; zabbix-1.8.22-1.el6.x86_64
Jun 22 10&#58;10&#58;24 Updated&#58; zabbix-agent-1.8.22-1.el6.x86_64
Jun 22 10&#58;10&#58;24 Updated&#58; lcmaps-plugins-scas-client-0.5.4-1.1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;28 Updated&#58; eos-fuse-0.3.111-aquamarine.slc6.x86_64
Jun 22 10&#58;10&#58;28 Updated&#58; globus-gssapi-error-5.4-1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;29 Updated&#58; nss-tools-3.18.0-5.3.el6_6.x86_64
Jun 22 10&#58;10&#58;30 Updated&#58; globus-gridmap-callout-error-2.4-1.osg32.el6.x86_64
Jun 22 10&#58;10&#58;30 Updated&#58; fetch-crl-3.0.14-1.el6.noarch
Jun 22 10&#58;10&#58;31 Updated&#58; check-mk-agent-1.2.4p5-2.el6.x86_64
Jun 22 10&#58;11&#58;00 Updated&#58; selinux-policy-targeted-3.7.19-260.el6_6.3.noarch
Jun 22 10&#58;11&#58;08 Installed&#58; kernel-2.6.32-504.23.4.el6.x86_64
Jun 22 10&#58;11&#58;08 Updated&#58; cms-global-1.0.1-1.el6.noarch
Jun 22 10&#58;11&#58;09 Updated&#58; nss-softokn-freebl-3.14.3-22.el6_6.i686
Jun 22 10&#58;11&#58;11 Updated&#58; glibc-2.12-1.149.el6_6.7.i686
Jun 22 10&#58;11&#58;35 Erased&#58; golang-vim
Jun 23 11&#58;02&#58;00 Updated&#58; 1&#58;xrootd-libs-4.1.1-1.osg32.el6.x86_64
Jun 23 11&#58;02&#58;01 Updated&#58; 1&#58;xrootd-client-libs-4.1.1-1.osg32.el6.x86_64
Jun 23 11&#58;02&#58;02 Installed&#58; xrootd-compat-libs-3.3.6-1.el6.x86_64
Jun 23 11&#58;02&#58;03 Installed&#58; xrootd-compat-client-libs-3.3.6-1.el6.x86_64
Jun 23 11&#58;02&#58;04 Installed&#58; xrootd-compat-server-libs-3.3.6-1.el6.x86_64
Jun 23 11&#58;02&#58;04 Updated&#58; 1&#58;xrootd-server-libs-4.1.1-1.osg32.el6.x86_64
Jun 23 11&#58;02&#58;05 Installed&#58; 1&#58;xrootd-server-4.1.1-1.osg32.el6.x86_64
Jun 23 11&#58;02&#58;33 Installed&#58; 1&#58;xrootd-selinux-4.1.1-1.osg32.el6.noarch
Jun 23 11&#58;02&#58;33 Installed&#58; 1&#58;xrootd-4.1.1-1.osg32.el6.x86_64
Jun 23 11&#58;02&#58;34 Updated&#58; xrootd-cmstfc-1.5.1-10.osg32.el6.x86_64
Jun 23 11&#58;02&#58;34 Updated&#58; xrootd-lcmaps-0.0.7-11.osg32.el6.x86_64
Jun 23 11&#58;02&#58;34 Installed&#58; xrootd-compat-3.3.6-1.el6.x86_64
Jun 23 11&#58;02&#58;35 Updated&#58; 1&#58;xrootd-client-4.1.1-1.osg32.el6.x86_64

Restarting for now, will reach out to LCMAPS experts (Dave Dykstra, now in the watchlist) to see if he can help debug this.
-- by gerard1 at Tue Jun 23 16&#58;49&#58;37 UTC 2015

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448</a>
</div><script type='text/javascript'>
        $('#show_716733675').click(function() {
            $('#detail_716733675').slideDown("normal");
            $('#show_716733675').hide();
            $('#hide_716733675').show();
        });
        $('#hide_716733675').click(function() {
            $('#detail_716733675').slideUp();
            $('#hide_716733675').hide();
            $('#show_716733675').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='25968#1435077174'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T16:32:54+00:00">Jun 23, 2015 04:32 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435077174">&nbsp;</a></div><pre>Good news&#58; the fixed monitoring worked.
Bad news&#58; yesterday&#39;s yum updates (that did not update any xrootd because that was &#39;frozen&#39; to the old 3.3.6) seems to have broken this server.

I&#39;ve just updated the xrootd version to xrootd-4.1.1-1.osg32.el6.x86_64 the daemon started and so far it&#39;s working (since 11&#58;02).

If this does not really work I&#39;ll switch back to the failover server (cmssrv224) which had no update and should &#39;just work&#39;.
-- by gerard1 at Tue Jun 23 16&#58;31&#58;39 UTC 2015

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435075113'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T15:58:33+00:00">Jun 23, 2015 03:58 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435075113">&nbsp;</a></div><pre>Some local users confirm their workflows are working again, but it just segfaulted again... &#58;/
-- by gerard1 at Tue Jun 23 15&#58;57&#58;03 UTC 2015

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435073556'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T15:32:36+00:00">Jun 23, 2015 03:32 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435073556">&nbsp;</a></div><pre>Monitoring fixed, now looking for 3 processes on the Site redirectors (EOS,dCache,Sum) and 1 on the US redirector.

I see the redirecto redirecting and traffic peaking up...

Can anyone confirm jobs stopped failing?
-- by gerard1 at Tue Jun 23 15&#58;31&#58;47 UTC 2015

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435072789'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T15:19:49+00:00">Jun 23, 2015 03:19 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435072789">&nbsp;</a></div><pre>No idea why it&#39;s segfaulting, for now I&#39;ll restart it.

[root@cmssrv203 ~]# service xrootd status
[default] xrootd dead but pid file exists
[eos] xrootd (pid  7497) is running...
[disk] xrootd (pid  7619) is running...
[root@cmssrv203 ~]# service xrootd restart
Shutting down xrootd (xrootd, default)&#58;                    [FAILED]
Shutting down xrootd (xrootd, eos)&#58;                        [  OK  ]
Shutting down xrootd (xrootd, disk)&#58;                       [  OK  ]
Starting xrootd (xrootd, default)&#58;                         [  OK  ]
Starting xrootd (xrootd, eos)&#58;                             [  OK  ]
Starting xrootd (xrootd, disk)&#58;                            [  OK  ]
[root@cmssrv203 ~]# service xrootd status
[default] xrootd (pid  3683) is running...
[eos] xrootd (pid  3792) is running...
[disk] xrootd (pid  3903) is running...
[root@cmssrv203 ~]#

Monitoring didn&#39;t really complain because it&#39;s only looking for the presence of 1 or more xrootd processes, it should be looking for at least 3... Will change this now.
-- by gerard1 at Tue Jun 23 15&#58;18&#58;26 UTC 2015

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435072546'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T15:15:46+00:00">Jun 23, 2015 03:15 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435072546">&nbsp;</a></div><pre>There are issues with the redirector, the process is running and segfaulting.... looking into it&#58;

Jun 23 04&#58;55&#58;13 cmssrv203 kernel&#58; xrootd[17279]&#58; segfault at 8020 ip 00000031ddecf623 sp 00007f2cb12b2190 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 05&#58;19&#58;26 cmssrv203 kernel&#58; xrootd[25689]&#58; segfault at 110 ip 00000031dde35050 sp 00007f687d307f50 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 05&#58;59&#58;39 cmssrv203 kernel&#58; xrootd[31446]&#58; segfault at 80000000020 ip 00000031ddecf623 sp 00007feb097b7190 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 06&#58;34&#58;03 cmssrv203 kernel&#58; xrootd[17778]&#58; segfault at 30 ip 00000031ddecf623 sp 00007fa86ebcb190 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 07&#58;05&#58;39 cmssrv203 kernel&#58; xrootd[2356]&#58; segfault at 0 ip (null) sp 00007f6e6e3c3380 error 14 in xrootd[400000+30000]
Jun 23 07&#58;26&#58;19 cmssrv203 kernel&#58; xrootd[8489]&#58; segfault at 8020 ip 00000031ddecf623 sp 00007f97cb7d7190 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 07&#58;57&#58;18 cmssrv203 kernel&#58; xrootd[12889]&#58; segfault at 40 ip 00000031ddecf623 sp 00007f4d982a2190 error 4 in libc-2.12.so[31dde00000+18a000]
Jun 23 09&#58;31&#58;29 cmssrv203 kernel&#58; xrootd[29241]&#58; segfault at 200000000020 ip 00000031ddecf623 sp 00007fa3409a8190 error 4 in libc-2.12.so[31dde00000+18a000]
[root@cmssrv203 ~]# ps faux | grep xrootd
root      3302  0.0  0.0 103252   832 pts/0    S+   10&#58;13   0&#58;00          &#92;_ grep xrootd
enstore   7018  0.8  1.4 9414568 943460 ?      Sl   Jun22  12&#58;26 /usr/bin/cmsd -l /var/log/xrootd/cmsd.log -c /etc/xrootd/xrootd.cfg -k 7 -b -s /var/run/xrootd/cmsd-default.pid -n default
enstore   7111  0.0  0.0 8496232 6400 ?        Sl   Jun22   1&#58;16 /usr/bin/cmsd -l /var/log/xrootd/cmsd-eos.log -c /etc/xrootd/xrootd-eos.cfg -k 7 -b -s /var/run/xrootd/cmsd-eos.pid -n eos
enstore   7204  0.1  0.0 6065232 5832 ?        Sl   Jun22   2&#58;12 /usr/bin/cmsd -l /var/log/xrootd/cmsd-disk.log -c /etc/xrootd/xrootd-disk.cfg -k 7 -b -s /var/run/xrootd/cmsd-disk.pid -n disk
enstore   7497  0.0  0.0 8521004 24364 ?       Sl   Jun22   0&#58;15 /usr/bin/xrootd -l /var/log/xrootd/xrootd-eos.log -c /etc/xrootd/xrootd-eos.cfg -k 7 -b -s /var/run/xrootd/xrootd-eos.pid -n eos
enstore   7619  0.2  0.1 8843112 69140 ?       Sl   Jun22   3&#58;15 /usr/bin/xrootd -l /var/log/xrootd/xrootd-disk.log -c /etc/xrootd/xrootd-disk.cfg -k 7 -b -s /var/run/xrootd/xrootd-disk.pid -n disk
root      8251  0.0  0.0 134688  8932 ?        S    Jun22   0&#58;00 /usr/bin/perl /usr/bin/swatch --config-file=/etc/swatch/config.swatch --tail-file=/var/log/messages /var/log/dmesg /var/log/xrootd/cmsd.log /var/log/xrootd/xrootd.log /var/log/xrootd/eos/cmsd-eos.log /var/log/xrootd/eos/xrootd-eos.log /var/log/xrootd/disk/cmsd-disk.log /var/log/xrootd/disk/xrootd-disk.log --tail-args=-F --pid-file=/var/run/swatch/swatch.pid --script-dir=/var/run/swatch
root      8314  0.8  0.0 100948   760 ?        S    Jun22  11&#58;38      &#92;_ /usr/bin/tail -F /var/log/messages /var/log/dmesg /var/log/xrootd/cmsd.log /var/log/xrootd/xrootd.log /var/log/xrootd/eos/cmsd-eos.log /var/log/xrootd/eos/xrootd-eos.log /var/log/xrootd/disk/cmsd-disk.log /var/log/xrootd/disk/xrootd-disk.log
[root@cmssrv203 ~]#

-- by gerard1 at Tue Jun 23 15&#58;14&#58;58 UTC 2015

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000562448</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435046760'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T08:06:00+00:00">Jun 23, 2015 08:06 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435046760">&nbsp;</a></div><pre>Hi,

I am also seeing a huge amount of this kind of job failure.

Andrew

-- by Levin at Tue Jun 23 08&#58;05&#58;01 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=114554' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=114554</a></pre></div><div class='update_description'><i onclick="document.location='25968#1435046220'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T07:57:00+00:00">Jun 23, 2015 07:57 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1435046220">&nbsp;</a></div><pre>Hi T1_US_FNAL Admins&#58;

I&#39;m seeing several of these FileRead[1] errors all across our running jobs, could you please take a look? Here are a few files that are failing to read

Thanks
Julian B.
Workflow Team
[1]
Fatal Exception (Exit Code&#58; 8028)

An exception of category &#39;FallbackFileOpenError&#39; occurred while
[0] Constructing the EventProcessor
[1] Constructing input source of type PoolSource
[2] Calling RootInputFileSequence&#58;&#58;initFile()
[3] Calling StorageFactory&#58;&#58;open()
[4] Calling XrdFile&#58;&#58;open()
Exception Message&#58;
Failed to open the file &#39;root&#58;//cmsxrootd-site.fnal.gov//store/mc/RunIIWinter15GS/SinglePhoton_FlatPt-300To3000/GEN-SIM/MCRUN2_71_V1-v1/80000/FC96F375-25FC-E411-8F8E-001CC4A65D26.root?tried=+1213cmssrv203.fnal.gov,+1213cmssrv224.fnal.gov&#39;
Additional Info&#58;
[a] XrdCl&#58;&#58;File&#58;&#58;Open(name=&#39;root&#58;//cmsxrootd-site.fnal.gov//store/mc/RunIIWinter15GS/SinglePhoton_FlatPt-300To3000/GEN-SIM/MCRUN2_71_V1-v1/80000/FC96F375-25FC-E411-8F8E-001CC4A65D26.root&#39;, flags=0x10, permissions=0660) =&#62; error &#39;[FATAL] Connection error&#39; (errno=0, code=108)
[b] Remote server already encountered a fatal error; no redirections were performed.
[c] Input file root&#58;//cmsxrootd-site.fnal.gov//store/mc/RunIIWinter15GS/SinglePhoton_FlatPt-300To3000/GEN-SIM/MCRUN2_71_V1-v1/80000/FC96F375-25FC-E411-8F8E-001CC4A65D26.root could not be opened.
Fallback Input file root&#58;//cmsxrootd-site.fnal.gov//store/mc/RunIIWinter15GS/SinglePhoton_FlatPt-300To3000/GEN-SIM/MCRUN2_71_V1-v1/80000/FC96F375-25FC-E411-8F8E-001CC4A65D26.root?tried=+1213cmssrv203.fnal.gov,+1213cmssrv224.fnal.gov also could not be opened.
Original exception info is above; fallback exception info is below.
[d] XrdCl&#58;&#58;File&#58;&#58;Open(name=&#39;root&#58;//cmsxrootd-site.fnal.gov//store/mc/RunIIWinter15GS/SinglePhoton_FlatPt-300To3000/GEN-SIM/MCRUN2_71_V1-v1/80000/FC96F375-25FC-E411-8F8E-001CC4A65D26.root?tried=+1213cmssrv203.fnal.gov,+1213cmssrv224.fnal.gov&#39;, flags=0x10, permissions=0660) =&#62; error &#39;[FATAL] Connection error&#39; (errno=0, code=108)
[e] Remote server already encountered a fatal error; no redirections were performed.

[2]
root&#58;//cmsxrootd-site.fnal.gov//store/mc/RunIIWinter15GS/SinglePhoton_FlatPt-300To3000/GEN-SIM/MCRUN2_71_V1-v1/80000/FC96F375-25FC-E411-8F8E-001CC4A65D26.root
root&#58;//cmsxrootd-site.fnal.gov//store/mc/TP2023HGCALNoTRKExtGS/QCD_Pt-15to3000_Tune4C_14TeV_pythia8/GEN-SIM/DES23_62_V1-v1/70000/80237A2C-4F11-E511-814F-008CFA197D48.root
root&#58;//cmsxrootd-site.fnal.gov//store/mc/TP2023HGCALNoTRKExtGS/QCD_Pt-15to3000_Tune4C_14TeV_pythia8/GEN-SIM/DES23_62_V1-v1/60000/428C516D-4D11-E511-86F4-0025904E41E4.root
root&#58;//cmsxrootd-site.fnal.gov//store/mc/TP2023HGCALNoTRKExtGS/VBF_HToTauTau_M-125_14TeV-powheg-pythia6/GEN-SIM/DES23_62_V1-v1/70000/DC029800-4A11-E511-BB29-0025905A6060.root
root&#58;//cmsxrootd-site.fnal.gov//store/mc/TP2023HGCALNoTRKExtGS/MinBias_TuneZ2star_14TeV-pythia6/GEN-SIM/DES23_62_V1-v1/10000/504380DD-4311-E511-9AA8-003048D334C7.root

[Ticket Origin]
<div id='show_1400458509' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1400458509'><a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=114554' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=114554</a>

[Ticket History]
Subject&#58; FileReadErrors at T1_US_FNAL
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-workflow-team@....;cms-comp-ops-workflow-team@....;cms-comp-ops-workflow-team@....;cms-comp-ops-workflow-team@....;cms-comp-ops-workflow-team@....
-- by Julian Badillo Rojas at Tue Jun 23 07&#58;56&#58;26 UTC 2015
</div><script type='text/javascript'>
        $('#show_1400458509').click(function() {
            $('#detail_1400458509').slideDown("normal");
            $('#show_1400458509').hide();
            $('#hide_1400458509').show();
        });
        $('#hide_1400458509').click(function() {
            $('#detail_1400458509').slideUp();
            $('#hide_1400458509').hide();
            $('#show_1400458509').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F25968">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
