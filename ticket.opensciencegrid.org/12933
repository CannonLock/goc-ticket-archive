<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[12933] Generic Information Provider occasionally provides wrong information</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=12933" method="post">
<div class="page-header">
    <h3><span class="muted">12933</span> / Generic Information Provider occasionally provides wrong information</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Brock Erwin</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">PNNL_OSG</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">ILC</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Brock Erwin</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">OSG-GOC</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-11-14</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">GIP Support <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000333021">INC000000333021</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/12933", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/12933?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/12933?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Generic%20Information%20Provider%20occasionally%20provides%20wrong%20information%20ISSUE%3D12933%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='12933#1352498504'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-09T22:01:44+00:00">Nov 9, 2012 10:01 PM UTC</time><a class="anchor" name="1352498504">&nbsp;</a></div><pre>Just tested running gip_info with the new patch while condor had one job in the Held state and one in the Idle state, and it did not report GlueCEStateFreeJobSlots == 0.  Looks like it&#39;s working, thanks!  I would like to see this patch pushed to the RPM eventually, but this looks like it will work for now!  This ticket can be closed.  Thank you for your assistance.

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12933#1352493923'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-09T20:45:23+00:00">Nov 9, 2012 08:45 PM UTC</time><a class="anchor" name="1352493923">&nbsp;</a></div><pre>Great, thanks!  I will try this out and let you know how it goes.

Brock

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12933#1352493189'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-09T20:33:09+00:00">Nov 9, 2012 08:33 PM UTC</time> by <b>Burt Holzman</b><a class="anchor" name="1352493189">&nbsp;</a></div><pre>If you just want the patch&#58;

<a href='https&#58;//github.com/holzman/gip/commit/c0bcbe8e80eeff212d191aa6f979a9a2c1eaf493.patch' target='_blank' rel='nofollow'>https&#58;//github.com/holzman/gip/commit/c0bcbe8e80eeff212d191aa6f979a9a2c1eaf493.patch</a>

This sets idle_slack to 10 by default.  If you want a different value
(say 25), you can add this to the [Condor] section of your ini&#58;

idle_slack = 25

- B

On 11/9/2012 2&#58;14 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12933#1352492045'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-09T20:14:05+00:00">Nov 9, 2012 08:14 PM UTC</time><a class="anchor" name="1352492045">&nbsp;</a></div><pre>I think a configurable option would be the best way to do it -- that way specific sites can change it if they need to.  I&#39;m not the author of the software, so it&#39;s obviously not up to me, but that is what I&#39;d do.  I have no problem running patched software.  I can also wait for you to implement that if you so desire.  Whatever is best for you is fine.

Brock

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12933#1352488509'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-09T19:15:09+00:00">Nov 9, 2012 07:15 PM UTC</time> by <b>Burt Holzman</b><a class="anchor" name="1352488509">&nbsp;</a></div><pre>Hi Brock,

Right now there&#39;s a strict check&#58; if idleJobs &#62; 0, freeslots = 0.

It&#39;d take me just a few minutes to write a patch that would do something
like if idleJobs &#62; 10, freeslots = 0.  If you don&#39;t mind running patched
software until I cut a new release, you should be set.

It&#39;d take a bit longer if we wanted that to be a configurable config.ini
option.

- B

On 11/09/12 12&#58;13, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12933#1352484832'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-09T18:13:52+00:00">Nov 9, 2012 06:13 PM UTC</time><a class="anchor" name="1352484832">&nbsp;</a></div><pre>Burt,

That&#39;s for the explanation.  I understand why you might want to do that.  Due to the &#34;slosh&#34; that we are seeing on our system, jobs frequently enter the &#34;Idle&#34; state before they transition to the running state.  I think we are going to need to &#34;fix&#34; the code for our site such that Idle jobs don&#39;t cause GIP to report a zero number for the number of free CPUs available.  Could you also elaborate a bit about what exactly you mean by adding &#34;a bit more leeway&#34; into the calculation?  I think we would also be interested in that.  Is there a PERL script somewhere that I can modify the calculation in the short term?

Thanks,
Brock

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12933#1352483510'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-09T17:51:50+00:00">Nov 9, 2012 05:51 PM UTC</time> by <b>echism</b><a class="anchor" name="1352483510">&nbsp;</a></div><pre>Hi Brock,

Did you see the last update? Do you want that GIP adjustment?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='12933#1351891244'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-02T21:20:44+00:00">Nov 2, 2012 09:20 PM UTC</time> by <b>Burt Holzman</b><a class="anchor" name="1351891244">&nbsp;</a></div><pre>Thanks, Brock.

It is a race condition of sorts&#58; if one idle job is detected per VO, it sets the free slots to zero.  Since there&#39;s some slosh in scheduling and you will see some idle slots on systems with free slots, the Glue information isn&#39;t quite accurate.  I could add a bit more leeway into the calculation for the next GIP release if that helps you -- let me know.

- B</pre></div><div class='update_description'><i onclick="document.location='12933#1351882435'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-02T18:53:55+00:00">Nov 2, 2012 06:53 PM UTC</time><a class="anchor" name="1351882435">&nbsp;</a></div><pre>Ok, should be done.

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12933#1351882272'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-02T18:51:12+00:00">Nov 2, 2012 06:51 PM UTC</time> by <b>Burt Holzman</b><a class="anchor" name="1351882272">&nbsp;</a></div><pre>If you&#39;re not using GUMS -- why don&#39;t you just map my DN only, that
should be easier.

/DC=org/DC=doegrids/OU=People/CN=Burt Holzman 380062

- B

On 11/02/12 13&#58;48, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12933#1351882108'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-02T18:48:28+00:00">Nov 2, 2012 06:48 PM UTC</time><a class="anchor" name="1351882108">&nbsp;</a></div><pre>Sure, no problem.  Can you give me the ops VO details.  I&#39;m assuming I&#39;ll need to add one line in /etc/grid-security/grid-mapfile to map the appropriate certificate to a user.  Or maybe I need a list of all the grid certificates in your VO.  What is the best way to do this?

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12933#1351881870'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-02T18:44:30+00:00">Nov 2, 2012 06:44 PM UTC</time> by <b>Burt Holzman</b><a class="anchor" name="1351881870">&nbsp;</a></div><pre>Hi Brock,

I&#39;d like an opportunity to reproduce this.  Easiest thing to do if it is possible to grant the ops VO (or just my DN) access to submit jobs to your gatekeeper?  I can do some more detailed GIP diagnostics.

- B</pre></div><div class='update_description'><i onclick="document.location='12933#1351880740'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-02T18:25:40+00:00">Nov 2, 2012 06:25 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1351880740">&nbsp;</a></div><pre>Forwarding to FNAL since they are the support center for ILC. CCing Steve Timm as an ILC Admin contact.</pre></div><div class='update_description'><i onclick="document.location='12933#1351729539'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-01T00:25:39+00:00">Nov 1, 2012 12:25 AM UTC</time><a class="anchor" name="1351729539">&nbsp;</a></div><pre>Ugh, sorry, here&#39;s a cleaned up version&#58;

other.GlueCEStateWaitingJobs * 4 &#60; other.GlueCEStateRunningJobs
other.GlueCEPolicyMaxTotalJobs == 0 || other.GlueCEStateTotalJobs &#60; other.GlueCEPolicyMaxTotalJobs

Both of those must be true to get more jobs.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='12933#1351727678'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-31T23:54:38+00:00">Oct 31, 2012 11:54 PM UTC</time><a class="anchor" name="1351727678">&nbsp;</a></div><pre>Hi Brock,

I noticed the following job requirement posted in the other ILC ticket&#58;

( other.GlueCEStateWaitingJobs == 0 ? ( other.GlueCEStateFreeCPUs * 10 / other.GlueCEInfoTotalCPUs + other.GlueCEInfoTotalCPUs / 500 ) &#58;  -other.GlueCEStateWaitingJobs * 4 / ( other.GlueCEStateRunningJobs + 1 ) - 1 ) &#62; -2

Think this applies to you?

Brian

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='12933#1351720543'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-31T21:55:43+00:00">Oct 31, 2012 09:55 PM UTC</time><a class="anchor" name="1351720543">&nbsp;</a></div><pre>Ah, good to hear you are on Condor 7.8.4!

There is a parallel ticket about ILC issues&#58;

<a href='https&#58;//ticket.grid.iu.edu/goc/12876' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/12876</a>

Oddly enough, it is about having too many jobs from ILC instead of too few!

Anyhow, we need the feedback from the DIRAC folks to understand what job requirements they are using.  It seems they are a bit different than other EMI WMS users, so it may take a bit of tuning.  At this point in time, I see nothing wrong with your GIP information.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='12933#1351719451'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-31T21:37:31+00:00">Oct 31, 2012 09:37 PM UTC</time><a class="anchor" name="1351719451">&nbsp;</a></div><pre>Sorry, let me provide you with my full alter-attributes file&#58;
[root@osg gip]# cat /etc/gip/alter-attributes.conf
dn&#58; GlueCEUniqueID=osg.pnl.gov&#58;2119/jobmanager-condor-default,mds-vo-name=local,o=grid
GlueCEPolicyMaxWaitingJobs&#58; 200
GlueCEPolicyMaxTotalJobs&#58; 200
GlueCEInfoContactString&#58; osg.pnl.gov/jobmanager-condor-default
dn&#58; GlueVOViewLocalID=ilc,GlueCEUniqueID=osg.pnl.gov&#58;2119/jobmanager-condor-default,mds-vo-name=local,o=grid
GlueCEStateFreeJobSlots&#58; 600

I set those two values (GlueCEPolicyMaxWaitingJobs & GlueCEPolicyMaxTotalJobs)  to 200 based on a suggestion from one of my ilc colleagues.  His concern was that we were not processing jobs fast enough for them, so their DIRAC servers were becoming overloaded (not sure entirely why though).  I believe DIRAC uses Condor-G to submit jobs, but let me double check that fact.

Also,

[root@osg gip]# condor_q -version
$CondorVersion&#58; 7.8.4 Sep 19 2012 $
$CondorPlatform&#58; X86_64-CentOS_5.7 $

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12933#1351719087'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-31T21:31:27+00:00">Oct 31, 2012 09:31 PM UTC</time><a class="anchor" name="1351719087">&nbsp;</a></div><pre>Hi Brock,

How does ILC submit to the cluster?  If they are using Condor-G directly, the default limit used to be 100 slots.  If they use gliteWMS, there&#39;s a myriad of possible issues.  Can you please let me know which gliteWMS you are using?  Also, if the submitter has the logging information from gliteWMS, that would be helpful.

Based on other ILC tickets, they may be doing something non-standard with the gliteWMS.  I do see the following in your advertisement&#58;

GlueCEPolicyMaxTotalJobs&#58; 200
GlueCEPolicyMaxWaitingJobs&#58; 200

Are you running Condor prior to 7.4?  The old, old default for MAX_JOBS_RUNNING was 200.

Brian

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='12933#1351718810'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-31T21:26:50+00:00">Oct 31, 2012 09:26 PM UTC</time><a class="anchor" name="1351718810">&nbsp;</a></div><pre>Here&#39;s what Jeremy had to say about my last comment&#58;

<font color='#7F7E6F'>&#62; -----Original Message-----</font>
<font color='#7F7E6F'>&#62; From&#58; M, Jeremy</font>
<font color='#7F7E6F'>&#62; Sent&#58; Wednesday, October 31, 2012 2&#58;23 PM</font>
<font color='#7F7E6F'>&#62; To&#58; Erwin, Brock A</font>
<font color='#7F7E6F'>&#62; Subject&#58; FW&#58; Open Science Grid&#58; Generic Information Provider</font>
<font color='#7F7E6F'>&#62; occasionally provides wrong information ISSUE=12933 PROJ=71</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#34;But we never seem to get more 100 jobs running at any given time even</font>
<font color='#7F7E6F'>&#62; though we have hundreds of free slots.&#34;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; From what I can tell on my end through the DIRAC job monitor, it is</font>
<font color='#7F7E6F'>&#62; more like 20-40 concurrent jobs, max, over the last day.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; --Jeremy</font>

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12933#1351718406'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-31T21:20:06+00:00">Oct 31, 2012 09:20 PM UTC</time><a class="anchor" name="1351718406">&nbsp;</a></div><pre>We are seeing a very limited number of ilc VO jobs starting, but we were hoping to have the ilc jobs take over our whole cluster.  But we never seem to get more 100 jobs running at any given time even though we have hundreds of free slots.  In order to test whether or not this is a GIP problem, I&#39;m going to temporarily add an alter attribute&#58;

/etc/gip/alter-attributes.conf&#58;
dn&#58; GlueVOViewLocalID=ilc,GlueCEUniqueID=osg.pnl.gov&#58;2119/jobmanager-condor-default,mds-vo-name=local,o=grid
GlueCEStateFreeJobSlots&#58; 600

And see if we start getting more ilc jobs running.

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12933#1351717527'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-31T21:05:27+00:00">Oct 31, 2012 09:05 PM UTC</time> by <b>echism</b><a class="anchor" name="1351717527">&nbsp;</a></div><pre>GIP Support,

Please assist with this issue.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='12933#1351717269'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-31T21:01:09+00:00">Oct 31, 2012 09:01 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1351717269">&nbsp;</a></div><pre>[by Brock Erwin]

Occasionally, &#34;gip_info&#34; is provideing the wrong number of free job slots for the &#34;ilc&#34; VO.  Here&#39;s how I was able to demonstrate the problem&#58;

[root@osg ~]# gip_info  | grep FreeJobSlot
....output truncated....
GIP.Condor&#58;INFO condor&#58;303&#58;  There are 0 assigned job slots out of 800 total; assigning the rest to the default group.
GIP.Condor&#58;DEBUG condor&#58;330&#58;  All VOs for default&#58; belle, ilc
GlueCEStateFreeJobSlots&#58; 743
GlueCEStateFreeJobSlots&#58; 743
GlueCEStateFreeJobSlots&#58; 0

Relatively, the three GlueCEStateFreeJobSlots correspond to the following dns&#58;
dn&#58; GlueCEUniqueID=osg.pnl.gov&#58;2119/jobmanager-condor-default,mds-vo-name=local,o=grid
dn&#58; GlueVOViewLocalID=belle,GlueCEUniqueID=osg.pnl.gov&#58;2119/jobmanager-condor-default,mds-vo-name=local,o=grid
dn&#58; GlueVOViewLocalID=ilc,GlueCEUniqueID=osg.pnl.gov&#58;2119/jobmanager-condor-default,mds-vo-name=local,o=grid

So the weird thing to me is why does the ilc VO get zero?  Remember, this does not seem to happen regularly -- rather it happens once in a while. Sometimes when I run the command I get this&#58;

[root@osg ~]# gip_info  | grep FreeJobSlot
GIP.Condor&#58;DEBUG condor&#58;330&#58;  All VOs for default&#58; belle, ilc
GlueCEStateFreeJobSlots&#58; 738
GlueCEStateFreeJobSlots&#58; 738
GlueCEStateFreeJobSlots&#58; 738

Which is exactly what I would expect it to do every time.  I&#39;m guessing there is a bug in the gip_info code....maybe a race condition of some kind?

Thanks for your time.</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F12933">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 12933});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
