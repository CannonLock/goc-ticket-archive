<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[6635] DOEGrids rejecting host cert requests</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=6635" method="post">
<div class="page-header">
    <h3><span class="muted">6635</span> / DOEGrids rejecting host cert requests</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Steve Timm</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2009-04-22</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
        <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=6635", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/6635?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/6635?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20DOEGrids%20rejecting%20host%20cert%20requests%20ISSUE%3D6635%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='6635#1239901751'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-04-16T17:09:11+00:00">Apr 16, 2009 05:09 PM UTC</time> by <b>Doug Olson</b><a class="anchor" name="1239901751">&nbsp;</a></div><pre>Yes, sorry, I could have replied last week.
The file system was getting full on the CA due to logs & backups.
That situation has been resolved so please close the ticket.
Thanks,
Doug

On 4/15/2009 6&#58;00 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='6635#1239800441'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-04-15T13:00:41+00:00">Apr 15, 2009 01:00 PM UTC</time> by <b>echism</b><a class="anchor" name="1239800441">&nbsp;</a></div><pre>Doug,

Are there any updates on the underlying cause?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='6635#1239214610'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-04-08T18:16:50+00:00">Apr 8, 2009 06:16 PM UTC</time> by <b>echism</b><a class="anchor" name="1239214610">&nbsp;</a></div><pre>Doug,

Are there any updates on this issue?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='6635#1238700072'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-04-02T19:21:12+00:00">Apr 2, 2009 07:21 PM UTC</time> by <b>Doug Olson</b><a class="anchor" name="1238700072">&nbsp;</a></div><pre>The immediate problem in this ticket has been fixed but
the underlying cause is still being investigated by the CA
folks at ESnet so I think we should leave this ticket open until
they think they have fixed the underlying cause.
Thanks,
Doug

On 4/2/2009 9&#58;30 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='6635#1238697192'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-04-02T18:33:12+00:00">Apr 2, 2009 06:33 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1238697192">&nbsp;</a></div><pre>Doug Olson sent out E-mail that the service had been restarted again
and I was able to make a couple of host certs.  So things are OK for now.

Steve Timm

On Thu, 2 Apr 2009, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='6635#1238689993'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-04-02T16:33:13+00:00">Apr 2, 2009 04:33 PM UTC</time> by <b>Doug Olson</b><a class="anchor" name="1238689993">&nbsp;</a></div><pre>Yes, I have reported the problem to the ESnet folks.
Doug

On 4/2/2009 9&#58;03 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='6635#1238689811'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-04-02T16:30:11+00:00">Apr 2, 2009 04:30 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1238689811">&nbsp;</a></div><pre>Doug Olson sent me this E-mail outside the ticket&#58;

We are seeing a problem again this morning with people
not being able to authenticate with the DOEGrids CA for
Agent or GridAdmin access.
I&#39;ll let you know when it is cleared up.
Thanks for your patience.
Doug

On Thu, 2 Apr 2009, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='6635#1238688235'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-04-02T16:03:55+00:00">Apr 2, 2009 04:03 PM UTC</time> by <b>echism</b><a class="anchor" name="1238688235">&nbsp;</a></div><pre>Jim and Doug,

Can you look into Steve&#39;s inquiry?

----------------------------

This morning, the DOEGrids CA is rejecting requests for host
certificates both via the cert-gridadmin script and via the
cert-request script.

the cert-request script looks like this&#58;

[root@fgt4x5 cert]# cert-request -ou s -dir .
checking CertLib version, V2-6, This is the latest version, released 13 Feb 2008.
Processing OU=Services request.
Give reason (1 line) you qualify for certificate, such as
member of CMS experiment or
collaborating with Condor team, etc.
reason&#58; OSG VTB Testing
input server administrator&#39;s name&#58; Steven Timm
input full hostname&#58; fgt4x5.fnal.gov
Generating a 2048 bit RSA private key
.+++
............................................................................................................................................................................................................................................+++
writing new private key to &#39;./6056key.pem&#39;
-----
input your email address&#58; fermigrid-root@....
input your complete phone number&#58; 630 840 8525
Choose a registration authority to which you are affiliated.
If nothing else applies, pick OSG.
_Enter__this____for this registration authority
anl ANL&#58; Argonne National Lab
esg ESG&#58; Earth System Grid
esnet ESnet&#58; DOE Science network
fnal FNAL&#58; Fermilab host and service certificates
<div id='show_836519740' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_836519740'>fusiongrid FusionGRID&#58; National Fusion Collaboratory Project
lbnl LBNL&#58; Berkeley Lab
lcg LCG&#58; LHC Computing Grid Catchall
nersc NERSC&#58; computer center
ornl ORNL&#58; Oak Ridge National Lab
osg OSG&#58; Open Science Grid (choose this if nothing else applies)
pnnl PNNL&#58; Pacific Northwest National Lab
(choose from left column)&#58; fnal
fnal
FNAL
FNAL
You must agree to abide by the DOEGrids pollicies,
at
and you assert that you are authorized to request and install this
certificate on the specified host.
Do you agree (y,N)&#58; y
Error&#58; 500 SSL read timeout&#58;
can&#39;t open /tmp/response.6056.html No such file or directory

----------------------

Output from cert-gridadmin script looks like this&#58;
bash-3.00$ cert-gridadmin -host fgt4x5.fnal.gov -affiliation fnal -email
fermigrid-root@....
checking CertLib version, V2-6, This is the latest version, released 13 Feb
2008.
Generating a 2048 bit RSA private key
.....................................+++
..........................................+++
writing new private key to &#39;./27944key.pem&#39;
-----
fnal
FNAL
FNAL
The next prompt should be for the passphrase for your
personal certificate which has been authorized to access the
gridadmin interface for this CA.
Enter PEM pass phrase&#58;
Your Certificate Request has been rejected by the server

-----------------------

I am a grid admin, and I&#39;ve never seen an error message like this before.
My cert hasn&#39;t recently expired or anything like that. Who do I check
to see why my grid-admin isn&#39;t working?

I have asked a couple others at Fermilab to try and they are having
the same problem.

Steve Timm
----------------------------

Thank you,
Elizabeth
</div><script type='text/javascript'>
        $('#show_836519740').click(function() {
            $('#detail_836519740').slideDown("normal");
            $('#show_836519740').hide();
            $('#hide_836519740').show();
        });
        $('#hide_836519740').click(function() {
            $('#detail_836519740').slideUp();
            $('#hide_836519740').hide();
            $('#show_836519740').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='6635#1238684950'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-04-02T15:09:10+00:00">Apr 2, 2009 03:09 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1238684950">&nbsp;</a></div><pre>This morning, the DOEGrids CA is rejecting requests for host
certificates both via the cert-gridadmin script and via the
cert-request script.

the cert-request script looks like this&#58;

[root@fgt4x5 cert]# cert-request -ou s -dir .
checking CertLib version, V2-6,  This is the latest version, released 13 Feb 2008.
Processing OU=Services request.
Give reason (1 line) you qualify for certificate, such as
member of CMS experiment    or
collaborating with Condor team,  etc.
reason&#58; OSG VTB Testing
input server administrator&#39;s name&#58; Steven Timm
input full hostname&#58; fgt4x5.fnal.gov
Generating a 2048 bit RSA private key
.+++
............................................................................................................................................................................................................................................+++
writing new private key to &#39;./6056key.pem&#39;
-----
input your email address&#58; fermigrid-root@....
input your complete phone number&#58; 630 840 8525
Choose a registration authority to which you are affiliated.
If nothing else applies, pick OSG.
_Enter__this____for this registration authority
anl     ANL&#58; Argonne National Lab
esg     ESG&#58; Earth System Grid
esnet   ESnet&#58; DOE Science network
fnal    FNAL&#58; Fermilab host and service certificates
fusiongrid      FusionGRID&#58; National Fusion Collaboratory Project
lbnl    LBNL&#58; Berkeley Lab
lcg     LCG&#58; LHC Computing Grid Catchall
nersc   NERSC&#58; computer center
ornl    ORNL&#58; Oak Ridge National Lab
osg     OSG&#58; Open Science Grid (choose this if nothing else applies)
<div id='show_706967778' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_706967778'>pnnl    PNNL&#58; Pacific Northwest National Lab
(choose from left column)&#58; fnal
fnal
FNAL
FNAL
You must agree to abide by the DOEGrids pollicies,
at
and you assert that you are authorized to request and install this
certificate on the specified host.
Do you agree (y,N)&#58; y
Error&#58; 500 SSL read timeout&#58;
can&#39;t open /tmp/response.6056.html No such file or directory

----------------------

Output from cert-gridadmin script looks like this&#58;
bash-3.00$ cert-gridadmin -host fgt4x5.fnal.gov -affiliation fnal -email
fermigrid-root@....
checking CertLib version, V2-6,  This is the latest version, released 13 Feb
2008.
Generating a 2048 bit RSA private key
.....................................+++
..........................................+++
writing new private key to &#39;./27944key.pem&#39;
-----
fnal
FNAL
FNAL
The next prompt should be for the passphrase for your
personal certificate which has been authorized to access the
gridadmin interface for this CA.
Enter PEM pass phrase&#58;
Your Certificate Request has been rejected by the server

-----------------------

I am a grid admin, and I&#39;ve never seen an error message like this before.
My cert hasn&#39;t recently expired or anything like that.  Who do I check
to see why my grid-admin isn&#39;t working?

I have asked a couple others at Fermilab to try and they are having
the same problem.

Steve Timm
</div><script type='text/javascript'>
        $('#show_706967778').click(function() {
            $('#detail_706967778').slideDown("normal");
            $('#show_706967778').hide();
            $('#hide_706967778').show();
        });
        $('#hide_706967778').click(function() {
            $('#detail_706967778').slideUp();
            $('#hide_706967778').hide();
            $('#show_706967778').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F6635">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 6635});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
