<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[23829] Help with osg hadoop migration OSG3.1 to OSG3.2</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=23829" method="post">
<div class="page-header">
    <h3><span class="muted">23829</span> / Help with osg hadoop migration OSG3.1 to OSG3.2</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Juan Eduardo Ramirez Vargas</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Juan Eduardo Ramirez Vargas</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-01-30</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Matyas Selmeci <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/23829", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/23829?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/23829?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Help%20with%20osg%20hadoop%20migration%20OSG3.1%20to%20OSG3.2%20ISSUE%3D23829%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='23829#1422648821'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-30T20:13:41+00:00">Jan 30, 2015 08:13 PM UTC</time> by <b>echism</b><a class="anchor" name="1422648821">&nbsp;</a></div><pre>Closing this ticket as requested.</pre></div><div class='update_description'><i onclick="document.location='23829#1422492446'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-29T00:47:26+00:00">Jan 29, 2015 12:47 AM UTC</time> by <b>eduardo@....</b><a class="anchor" name="1422492446">&nbsp;</a></div><pre>Hi Mat,
Thanks for your kind explanation to my last question. At this point
you can close this ticket.

Eduardo

On 01/28/2015 03&#58;27 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='23829#1422473221'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-28T19:27:01+00:00">Jan 28, 2015 07:27 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1422473221">&nbsp;</a></div><pre>Hi Eduardo,

Great to hear that you were able to solve the problem.  I&#39;ll take a look at where our documentation should be updated.

Hadoop keeps a backup copy of some of its data during an upgrade so that in case the upgrade fails you can do &#34;hadoop namenode -rollback&#34; and downgrade to the earlier version.  Finalizing the upgrade means removing this copy by doing &#34;hadoop namenode -finalize&#34;.

-Mat</pre></div><div class='update_description'><i onclick="document.location='23829#1422461248'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-28T16:07:28+00:00">Jan 28, 2015 04:07 PM UTC</time><a class="anchor" name="1422461248">&nbsp;</a></div><pre>Hi Mat,
I was able to figure out the problem.
Apparently, the very first time after the upgrade I run &#39;/etc/init.d/hadoop-hdfs-namenode start&#39;  instead of &#39;upgrade&#39;, since a error about missing /etc/hadoop/conf/hosts_exclude showed up, I haven&#39;t recovered the previous image, which got lost. or maybe the sequence of turning of servers was wrong causing the image to be corrupted.
A fresh reinstall on 3.1 with the corresponding upgrade to 3.2 worked fine. Attached is the profile before and after the upgrade (just disregard the fact that the datanode is a gatekeeper tester too).

For reference to some documentation OSG may provide in a future. The sequence of commands was&#58;
before upgrade&#58;
umount /mnt/hadoop (all nodes were mounted)
/etc/init,d/hadoop stop (first namenode, then secondary, later datanodes)

upgrade&#58;
rpm -e osg-release (3.1 if any)
download and install osg-release3.2 (<a href='http&#58;//repo.grid.iu.edu/osg/3.2/el6/release/x86_64/osg-release-3.2-5.osg32.el6.noarch.rpm' target='_blank' rel='nofollow'>http&#58;//repo.grid.iu.edu/osg/3.2/el6/release/x86_64/osg-release-3.2-5.osg32.el6.noarch.rpm</a>)
yum install osg-se-hadoop (to avoid messing with different packages)
scripts for redo configuration

after upgrade&#58;
touch /etc/hadoop/conf/hosts_exclude (better include this in scrips for redo configuration)
/etc/init.d/hadoop-hdfs-namenode upgrade (THE VERY FIRST TIME on namenode)
secondary and datanode  start
mount /mnt/hadoop (has a message harmless?? I ignored)
# mount /mnt/hadoop
INFO /builddir/build/BUILD/hadoop-2.0.0-cdh4.1.1/src/hadoop-hdfs-project/hadoop-hdfs/src/main/native/fuse-dfs/fuse_options.c&#58;164 Adding FUSE arg /mnt/hadoop
INFO /builddir/build/BUILD/hadoop-2.0.0-cdh4.1.1/src/hadoop-hdfs-project/hadoop-hdfs/src/main/native/fuse-dfs/fuse_options.c&#58;115 Ignoring option allow_other
INFO /builddir/build/BUILD/hadoop-2.0.0-cdh4.1.1/src/hadoop-hdfs-project/hadoop-hdfs/src/main/native/fuse-dfs/fuse_options.c&#58;115 Ignoring option dev
INFO /builddir/build/BUILD/hadoop-2.0.0-cdh4.1.1/src/hadoop-hdfs-project/hadoop-hdfs/src/main/native/fuse-dfs/fuse_options.c&#58;115 Ignoring option suid

Before closing this ticket, I have a last question, related with the namenode interface message&#58;
Started&#58;        Wed Jan 28 10&#58;44&#58;22 AST 2015
Version&#58;        2.0.0-cdh4.1.1, 581959ba23e4af85afd8db98b7687662fe9c5f20
Compiled&#58;       Fri Apr 11 00&#58;53&#58;23 CDT 2014 by mockbuild from Unknown
Upgrades&#58;       Upgrade for version -40 has been completed. Upgrade is not finalized.
Cluster ID&#58;     CID-51a806f2-ef69-4cf6-9ecc-23b637ab600a
Block Pool ID&#58;  BP-1371873319-10.3.255.253-1422456263541

<div id='show_126040049' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_126040049'>The message indicate the upgrade is completed but no finalized.
What is the command to finalize the upgrade? Do I need to add an extra step?There is no documentation about it.

Thanks for your help.
Eduardo

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jramirez/CN=662428/CN=Juan Eduardo Ramirez Vargas
</div><script type='text/javascript'>
        $('#show_126040049').click(function() {
            $('#detail_126040049').slideDown("normal");
            $('#show_126040049').hide();
            $('#hide_126040049').show();
        });
        $('#hide_126040049').click(function() {
            $('#detail_126040049').slideUp();
            $('#hide_126040049').hide();
            $('#show_126040049').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='23829#1422391650'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-27T20:47:30+00:00">Jan 27, 2015 08:47 PM UTC</time> by <b>eduardo@....</b><a class="anchor" name="1422391650">&nbsp;</a></div><pre>I mean, the name node is waiting for the datanodes, but when data nodes
start, their deamons
crash as shown in the ticket.
I reinstalled the nodes with 3.1 to retry, but this time the nodes
refuse to start. Similar incompatibility message, which make me guess
that, I tried a wrong secuence (perhaps).
I will try again with a fresh hadoop install (0.2), put a file and
upgrade. (as always in a test cluster).

After upgrade, is there a secuence, I should follow?
In namenode&#58; which command &#34;hadoop namenode -upgrade&#34; or &#34;service hadoop
upgrade&#34;?

I will let you know it fails again and post the &#34;osg-system-profiler&#34;.
Thanks
Eduardo

On 01/27/2015 01&#58;51 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='23829#1422381107'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-27T17:51:47+00:00">Jan 27, 2015 05:51 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1422381107">&nbsp;</a></div><pre>Can you explain what you mean by compatibility issues? Also, can you update to the latest version of osg-system-profiler and run it on both your namenode and one of your datanodes?
-Mat</pre></div><div class='update_description'><i onclick="document.location='23829#1422378100'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-27T17:01:40+00:00">Jan 27, 2015 05:01 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1422378100">&nbsp;</a></div><pre>Mat, would you be able to take a look at this?

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='23829#1422300548'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-26T19:29:08+00:00">Jan 26, 2015 07:29 PM UTC</time> by <b>echism</b><a class="anchor" name="1422300548">&nbsp;</a></div><pre>Software team,

Do you have anything on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='23829#1422019426'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-23T13:23:46+00:00">Jan 23, 2015 01:23 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1422019426">&nbsp;</a></div><pre>Hi
I started testing hadoop migration from OSG3.1 to OSG3.2, to eventually upgrade our production cluster.
However, at test level I find incompatibility problems when starting hadoop on the data nodes. (name node started fine and is waiting for the nodes to start.)
Below is the log output on the datanode.

This problem is holding us in upgrading our production cluster to OSG3.2, a general solution would benefit other sites as well.

For reference I used&#58;
OSG3.1 hadoop ---hadoop-0.20-0.20.2+737-33.osg.el6.noarch
OSG3.2 hadoop ---hadoop-2.0.0+545-1.cdh4.1.1.p0.20.osg32.el6.x86_64
also the unreleased link <a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallHadoop200SE' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallHadoop200SE</a>

If you need more information let me know.
Thanks for any help you may have

J. Eduardo Ramirez

--------------------datanode.log---------------------------
2015-01-22 12&#58;38&#58;56,918 INFO org.mortbay.log&#58; Logging to org.slf4j.impl.Log4jLoggerAdapter(org.mortbay.log) via org.
mortbay.log.Slf4jLog
2015-01-22 12&#58;38&#58;56,954 INFO org.apache.hadoop.http.HttpServer&#58; Added global filter &#39;safety&#39; (class=org.apache.hadoop.http.HttpServer$QuotingInputFilter)
2015-01-22 12&#58;38&#58;56,955 INFO org.apache.hadoop.http.HttpServer&#58; Added filter static_user_filter (class=org.apache.hadoop.http.lib.StaticUserWebFilter$StaticUserFilter) to context datanode
2015-01-22 12&#58;38&#58;56,955 INFO org.apache.hadoop.http.HttpServer&#58; Added filter static_user_filter (class=org.apache.hadoop.http.lib.StaticUserWebFilter$StaticUserFilter) to context static
2015-01-22 12&#58;38&#58;56,955 INFO org.apache.hadoop.http.HttpServer&#58; Added filter static_user_filter (class=org.apache.hadoop.http.lib.StaticUserWebFilter$StaticUserFilter) to context logs
2015-01-22 12&#58;38&#58;56,958 INFO org.apache.hadoop.hdfs.server.datanode.DataNode&#58; Opened info server at 0.0.0.0&#58;50075
2015-01-22 12&#58;38&#58;56,959 INFO org.apache.hadoop.hdfs.server.datanode.DataNode&#58; dfs.webhdfs.enabled = false
2015-01-22 12&#58;38&#58;56,960 INFO org.apache.hadoop.http.HttpServer&#58; Jetty bound to port 50075
2015-01-22 12&#58;38&#58;56,960 INFO org.mortbay.log&#58; jetty-6.1.26.cloudera.2
2015-01-22 12&#58;38&#58;57,264 INFO org.mortbay.log&#58; Started SelectChannelConnector@0.0.0.0&#58;50075
2015-01-22 12&#58;38&#58;57,604 INFO org.apache.hadoop.ipc.Server&#58; Starting Socket Reader #1 for port 50020
2015-01-22 12&#58;38&#58;57,615 INFO org.apache.hadoop.hdfs.server.datanode.DataNode&#58; Opened IPC server at /0.0.0.0&#58;50020
2015-01-22 12&#58;38&#58;57,624 INFO org.apache.hadoop.hdfs.server.datanode.DataNode&#58; Refresh request received for nameservices&#58; null
2015-01-22 12&#58;38&#58;57,637 INFO org.apache.hadoop.hdfs.server.datanode.DataNode&#58; Starting BPOfferServices for nameservices&#58; &#60;default&#62;
2015-01-22 12&#58;38&#58;57,640 WARN org.apache.hadoop.hdfs.server.common.Util&#58; Path /hadoop/data should be specified as a URI in configuration files. Please update hdfs configuration.
2015-01-22 12&#58;38&#58;57,644 INFO org.apache.hadoop.hdfs.server.datanode.DataNode&#58; Block pool &#60;registering&#62; (storage id unknown) service to compute-0-0-0/10.3.255.253&#58;9000 starting to offer service
<div id='show_1222558920' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1222558920'>2015-01-22 12&#58;38&#58;57,647 INFO org.apache.hadoop.ipc.Server&#58; IPC Server Responder&#58; starting
2015-01-22 12&#58;38&#58;57,648 INFO org.apache.hadoop.ipc.Server&#58; IPC Server listener on 50020&#58; starting
2015-01-22 12&#58;38&#58;57,873 INFO org.apache.hadoop.hdfs.server.common.Storage&#58; Lock on /hadoop/data/in_use.lock acquired by nodename 27357@....
2015-01-22 12&#58;38&#58;57,875 FATAL org.apache.hadoop.hdfs.server.datanode.DataNode&#58; Initialization failed for block pool Block pool BP-1893823771-10.3.255.253-1421942867392 (storage id DS-1542001759-136.145.164.183-50010-1421872661449) service to compute-0-0-0/10.3.255.253&#58;9000

java.io.IOException&#58; Incompatible namespaceIDs in /hadoop/data&#58; namenode namespaceID = 486582321; datanode namespaceID = 1157004813
at org.apache.hadoop.hdfs.server.datanode.DataStorage.doTransition(DataStorage.java&#58;381)
at org.apache.hadoop.hdfs.server.datanode.DataStorage.recoverTransitionRead(DataStorage.java&#58;190)
at org.apache.hadoop.hdfs.server.datanode.DataStorage.recoverTransitionRead(DataStorage.java&#58;218)
at org.apache.hadoop.hdfs.server.datanode.DataNode.initStorage(DataNode.java&#58;849)
at org.apache.hadoop.hdfs.server.datanode.DataNode.initBlockPool(DataNode.java&#58;820)
at org.apache.hadoop.hdfs.server.datanode.BPOfferService.verifyAndSetNamespaceInfo(BPOfferService.java&#58;308)
at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.connectToNNAndHandshake(BPServiceActor.java&#58;218)
at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.run(BPServiceActor.java&#58;661)
at java.lang.Thread.run(Thread.java&#58;744)
2015-01-22 12&#58;38&#58;57,876 WARN org.apache.hadoop.hdfs.server.datanode.DataNode&#58; Ending block pool service for&#58; Block pool BP-1893823771-10.3.255.253-1421942867392 (storage id DS-1542001759-136.145.164.183-50010-1421872661449) service to compute-0-0-0/10.3.255.253&#58;9000
2015-01-22 12&#58;38&#58;57,880 INFO org.apache.hadoop.hdfs.server.datanode.DataNode&#58; Removed Block pool BP-1893823771-10.3.255.253-1421942867392 (storage id DS-1542001759-136.145.164.183-50010-1421872661449)
2015-01-22 12&#58;38&#58;59,880 WARN org.apache.hadoop.hdfs.server.datanode.DataNode&#58; Exiting Datanode
2015-01-22 12&#58;38&#58;59,881 INFO org.apache.hadoop.util.ExitUtil&#58; Exiting with status 0
2015-01-22 12&#58;38&#58;59,883 INFO org.apache.hadoop.hdfs.server.datanode.DataNode&#58; SHUTDOWN_MSG&#58;
/************************************************************
SHUTDOWN_MSG&#58; Shutting down DataNode

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jramirez/CN=662428/CN=Juan Eduardo Ramirez Vargas

</div><script type='text/javascript'>
        $('#show_1222558920').click(function() {
            $('#detail_1222558920').slideDown("normal");
            $('#show_1222558920').hide();
            $('#hide_1222558920').show();
        });
        $('#hide_1222558920').click(function() {
            $('#detail_1222558920').slideUp();
            $('#hide_1222558920').hide();
            $('#show_1222558920').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F23829">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 23829});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
