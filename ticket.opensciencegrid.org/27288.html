<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[27288] Error during execution of glideins</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=27288" method="post">
<div class="page-header">
    <h3><span class="muted">27288</span> / Error during execution of glideins</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Doug Johnson</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">Nova</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Doug Johnson</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">Fermilab_FIFE_Offsite</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">WIP</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-01-29</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000621696">INC000000621696</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/27288", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='27288#1453493403'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-22T20:10:03+00:00">Jan 22, 2016 08:10 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1453493403">&nbsp;</a></div><pre>Alright, I&#39;ll close this ticket. Thanks for your patience and let us know if you need any help in the future!

Cheers,
Brian</pre></div><div class='update_description'><i onclick="document.location='27288#1453493067'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-22T20:04:27+00:00">Jan 22, 2016 08:04 PM UTC</time><a class="anchor" name="1453493067">&nbsp;</a></div><pre>I&#39;m inclined to declare victory on this.

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1453491227'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-22T19:33:47+00:00">Jan 22, 2016 07:33 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1453491227">&nbsp;</a></div><pre>Troy,

There was a thread on the gt-user mailing list that sounded very similar to your problem here (Titled &#34;[gt-user] Problems with PBS SEG on Torque 5.1.&#34;). If you&#39;re getting globus directly from their repos, it sounds like they&#39;ve got a fix available in their unstable repo in their &#39;globus-gram-job-manager-pbs&#39; packages. If you would like to turn the SEG back on, you can try these new packages. Otherwise, you can leave the SEG off and I think we can close this ticket because it looks like jobs are still correctly reporting.

- Brian</pre></div><div class='update_description'><i onclick="document.location='27288#1452898417'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-15T22:53:37+00:00">Jan 15, 2016 10:53 PM UTC</time><a class="anchor" name="1452898417">&nbsp;</a></div><pre>According to <a href='attachment/view/26794/stderr.txt' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/attachment/view?id=26794&file=stderr.txt</a>, UW Hyak is running TORQUE 4.2.9, which isn&#39;t super new but isn&#39;t ancient either.

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1452897841'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-15T22:44:01+00:00">Jan 15, 2016 10:44 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1452897841">&nbsp;</a></div><pre>I know our other site that was experiencing issues (hyak) is a PBS site but I don&#39;t know if they had updated to a later version of torque or not. I agree, things look better on the graph so let&#39;s give it a bit before we consider this &#39;solved&#39;.</pre></div><div class='update_description'><i onclick="document.location='27288#1452894399'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-15T21:46:39+00:00">Jan 15, 2016 09:46 PM UTC</time><a class="anchor" name="1452894399">&nbsp;</a></div><pre>I disabled SEG for our GRAM instance just for grins, and surprisingly things seemed to start working better in my manual testing using globusrun.  A bunch of Nova jobs appeared shortly thereafter and are currently waiting in our local queue to run.  I&#39;m inclined to see how those jobs do over the long weekend.

This ticket was first opened on Nov 2, about a month and a half after we upgraded Oakley to TORQUE 5.1.1; during that time, no Nova jobs were submitted to Oakley.  My current working theory is that the logging code in newer versions of TORQUE changed just enough that SEG&#39;s support for it is finnicky at best and broken at worst.  Were other OSG sites that had trouble with GRAM also running new-ish versions of TORQUE?

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1452887953'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-15T19:59:13+00:00">Jan 15, 2016 07:59 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1452887953">&nbsp;</a></div><pre>Ok in that case, how exactly are you providing the PBS logs so that the
SEG can consume them? There should also be a directory that contains
files for each GRAM job and they should contain the status. Are all
those job statuses &#39;idle&#39; or equivalent?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='27288#1452882598'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-15T18:29:58+00:00">Jan 15, 2016 06:29 PM UTC</time><a class="anchor" name="1452882598">&nbsp;</a></div><pre>I have significantly more experience with GRAM than HTCondor, so I&#39;m going to keep working on the GRAM side for a bit longer.

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1452877109'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-15T16:58:29+00:00">Jan 15, 2016 04:58 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1452877109">&nbsp;</a></div><pre>Doug/Troy,

Sorry about the confusion about your supported VOs, I was under the impression that you guys also supported OSG. I&#39;m glad we got that sorted out.

I don&#39;t think we need to start a new ticket because it looks like although jobs (both user jobs and pilot jobs) are completing successfully, the pilot jobs are still not reporting their state back to the factory properly&#58; <a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=Nova_US_OSC_osg&frontend=Fermilab-fifebatch_frontend&infoGroup=running&elements=StatusRunning.' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=Nova_US_OSC_osg&frontend=Fermilab-fifebatch_frontend&infoGroup=running&elements=StatusRunning.</a> We&#39;ve got two options for fixing this&#58;

1) Replace your GRAM gatekeeper software with HTCondor-CE.
2) Troubleshoot your GRAM gatekeeper

We recommend option 1 since GRAM support is minimal at this stage and we really don&#39;t know how deep the rabbit hole goes for the GRAM gatekeeper issue. Let us know how you would like to proceed.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='27288#1452867790'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-15T14:23:10+00:00">Jan 15, 2016 02:23 PM UTC</time> by <b>djohnson@....</b><a class="anchor" name="1452867790">&nbsp;</a></div><pre>Hi Marty,

Thanks for removing the microbone VO for the time being.  We&#39;re having
an internal discussion about supporting this experiment later this
morning, and we will make a decision soon.  Please make sure to
contact me before any other changes to VO membership are made, let me
know if there are problems with our site contact details.

If the NOvA glideins from yesterday have run successfully I&#39;d like to
recommend we close this ticket.  And if there are lingering issues, I
recommend we create new tickets for each distinct item that remains.

Doug

On Thu, 14 Jan 2016 14&#58;30&#58;00 -0500,
Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [1  &#60;text/plain; utf-8 (quoted-printable)&#62;]</font>
<font color='#7F7E6F'>&#62; [2  &#60;text/html; utf-8 (quoted-printable)&#62;]</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27288#1452812849'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-14T23:07:29+00:00">Jan 14, 2016 11:07 PM UTC</time><a class="anchor" name="1452812849">&nbsp;</a></div><pre>Hi Troy,

We are currently observing Nova glideins pending at the gatekeeper, which means they are probably waiting in your local batch queue. We&#39;ll let you know if we see them run through OSC successfully.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27288#1452812040'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-14T22:54:00+00:00">Jan 14, 2016 10:54 PM UTC</time><a class="anchor" name="1452812040">&nbsp;</a></div><pre>I forgot to mention that we discovered yesterday that the globus-scheduler-event-generator service for our OSG GRAM instance broke in late December due to a server move.  That has been fixed, AFAICT.

Is OSG still seeing glide-in errors to OSC now that we have resolved the fact that pilot/osg-flock.grid.iu.edu shouldn&#39;t have been trying to send job here?

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1452799843'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-14T19:30:43+00:00">Jan 14, 2016 07:30 PM UTC</time><a class="anchor" name="1452799843">&nbsp;</a></div><pre>Hi Troy,

I&#39;ve gone ahead and also removed Microboone from the supported VOs list. In the future, you can see the GLIDEIN_Supported_VOs list at OSC for the GOC and SDSC glidein factories at

<a href='http&#58;//glidein.grid.iu.edu/factory/monitor/factoryEntryStatusNow.html?entry=Nova_US_OSC_osg' target='_blank' rel='nofollow'>http&#58;//glidein.grid.iu.edu/factory/monitor/factoryEntryStatusNow.html?entry=Nova_US_OSC_osg</a>

and

<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryEntryStatusNow.html?entry=Nova_US_OSC_osg' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryEntryStatusNow.html?entry=Nova_US_OSC_osg</a>

respectively. Look near the bottom of the list of attributes.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27288#1452799135'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-14T19:18:55+00:00">Jan 14, 2016 07:18 PM UTC</time><a class="anchor" name="1452799135">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; I have no knowledge about OSGVO support at OSC but we just added Microboone yesterday because there is an agreement for a Microboone scientist (Project&#58; PES0709 (Randy Johnson, UCN)) to get cycles.</font>

<font color='#7F7E6F'>&#62; Yeah, I was just about to mention that. We recently got the Microboone request&#58; <a href='28198.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/28198</a></font>

That request was premature.  They just received a startup allocation very recently, but we have not agreed to support OSG jobs for them yet.

In the future, please *DO NOT* add any VOs to the GLIDEIN_Supported_VOs list for OSC without first consulting with either Doug Johnson or myself.  As of right now, the GLIDEIN_Supported_VOs list for OSC should consist of Nova only.  (Also, for future reference, how would I be able to check the current contents of that list myself?)

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1452798456'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-14T19:07:36+00:00">Jan 14, 2016 07:07 PM UTC</time><a class="anchor" name="1452798456">&nbsp;</a></div><pre>Hi all,

FYI - We&#39;ve gone ahead and removed OSGVO from the GLIDEIN_Supported_VOs list.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27288#1452796795'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-14T18:39:55+00:00">Jan 14, 2016 06:39 PM UTC</time><a class="anchor" name="1452796795">&nbsp;</a></div><pre>Joe,

Yeah, I was just about to mention that. We recently got the Microboone request&#58; <a href='28198.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/28198</a>

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27288#1452796733'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-14T18:38:53+00:00">Jan 14, 2016 06:38 PM UTC</time><a class="anchor" name="1452796733">&nbsp;</a></div><pre>I have no knowledge about OSGVO support at OSC but we just added Microboone yesterday because there is an agreement for a Microboone scientist (Project&#58; PES0709 (Randy Johnson, UCN)) to get cycles.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Joe Boyd 579</pre></div><div class='update_description'><i onclick="document.location='27288#1452796426'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-14T18:33:46+00:00">Jan 14, 2016 06:33 PM UTC</time><a class="anchor" name="1452796426">&nbsp;</a></div><pre>Hi all,

Perhaps there has been some confusion here. Nova glideins should be submitted and run under the Fermilab VO DN [1], not the OSG VO DN, unless there has been a change to this I&#39;m not aware of. Note, however, we do have Nova, OSGVO, and Microboone all listed in the GLIDEIN_Supported_VOs list in the factory configuration for OSC. Please confirm if you would like OSGVO and Microboone, which also runs under Fermilab VO DN, to be removed from this list. If we do this, then I believe you&#39;ll only receive the Nova-specific user jobs from the Fermilab VO frontend at OSC.

Marty Kandes
UCSD Glidein Factory Operations

[1]

subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov/CN=proxy
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov
identity  &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /var/lib/gwms-factory/client-proxies/user_fefermifife/glidein_gfactory_instance/credential_fifebatchgpvmhead1_OSG_gWMSFrontend.OSG_nova_714925
timeleft  &#58; 264&#58;00&#58;51
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO fermilab extension information ===
VO        &#58; fermilab
subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov
issuer    &#58; /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=voms2.fnal.gov
attribute &#58; /fermilab/nova/Role=pilot/Capability=NULL
attribute &#58; /fermilab/accelerator/Role=NULL/Capability=NULL
attribute &#58; /fermilab/annie/Role=NULL/Capability=NULL
attribute &#58; /fermilab/argoneut/Role=NULL/Capability=NULL
attribute &#58; /fermilab/cdms/Role=NULL/Capability=NULL
attribute &#58; /fermilab/chips/Role=NULL/Capability=NULL
attribute &#58; /fermilab/coupp/Role=NULL/Capability=NULL
attribute &#58; /fermilab/darkside/Role=NULL/Capability=NULL
attribute &#58; /fermilab/des/Role=NULL/Capability=NULL
attribute &#58; /fermilab/dune/Role=NULL/Capability=NULL
attribute &#58; /fermilab/genie/Role=NULL/Capability=NULL
attribute &#58; /fermilab/gm2/Role=NULL/Capability=NULL
attribute &#58; /fermilab/grid/Role=NULL/Capability=NULL
attribute &#58; /fermilab/lar1/Role=NULL/Capability=NULL
<div id='show_1311977564' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1311977564'>attribute &#58; /fermilab/lar1nd/Role=NULL/Capability=NULL
attribute &#58; /fermilab/lariat/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/accel/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/gm2/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/lbne/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/mu2e/Role=NULL/Capability=NULL
attribute &#58; /fermilab/minerva/Role=NULL/Capability=NULL
attribute &#58; /fermilab/miniboone/Role=NULL/Capability=NULL
attribute &#58; /fermilab/minos/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mu2e/Role=NULL/Capability=NULL
attribute &#58; /fermilab/nova/Role=NULL/Capability=NULL
attribute &#58; /fermilab/Role=NULL/Capability=NULL
attribute &#58; /fermilab/numix/Role=NULL/Capability=NULL
attribute &#58; /fermilab/patriot/Role=NULL/Capability=NULL
attribute &#58; /fermilab/seaquest/Role=NULL/Capability=NULL
attribute &#58; /fermilab/uboone/Role=NULL/Capability=NULL
timeleft  &#58; 20&#58;00&#58;51
uri       &#58; voms2.fnal.gov&#58;15001

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049
</div><script type='text/javascript'>
        $('#show_1311977564').click(function() {
            $('#detail_1311977564').slideDown("normal");
            $('#show_1311977564').hide();
            $('#hide_1311977564').show();
        });
        $('#hide_1311977564').click(function() {
            $('#detail_1311977564').slideUp();
            $('#hide_1311977564').hide();
            $('#show_1311977564').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27288#1452783550'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-14T14:59:10+00:00">Jan 14, 2016 02:59 PM UTC</time> by <b>djohnson@....</b><a class="anchor" name="1452783550">&nbsp;</a></div><pre>Hi Brian,

Thanks for the clarification, but this is a change in behavior for us.
We currently only support the NOvA VO at OSC.  All OSG initiated jobs
need to go through that VO for the purposes of accounting against the
NOvA collaboration&#39;s allocation at OSC.  In our VO configuration we
have all the NOvA OSG initiated jobs going through a single user
account named nova.  This has been how glideins have worked until the
last few weeks/month.  I can&#39;t emphasize strongly enough that we are
not a general OSG resource, and that we have to charge OSG jobs
against a specific allocation at OSC based on the user ID the job runs
as.

If the NOvA jobs are now going to be initiated by
&#34;/DC=com/DC=DigiCert-Grid/O=Open Science
Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu&#34;, shouldn&#39;t this DN be
specified by the VO by managing it through VOMS?

We may support additional VOs in the future, but again, we will
support those VOs because members of the VOs are faculty or PIs in
Ohio, and have been allocated computation cycles and storage at OSC
through OSC allocations.  How would we preserve local accounting if
all jobs are being started through osg-flock.grid.iu.edu?  There can&#39;t
be any DNs in common between VOs.

Doug

On Wed, 13 Jan 2016 18&#58;44&#58;00 -0500,
Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [1  &#60;text/plain; utf-8 (quoted-printable)&#62;]</font>
<font color='#7F7E6F'>&#62; [2  &#60;text/html; utf-8 (quoted-printable)&#62;]</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27288#1452728656'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-13T23:44:16+00:00">Jan 13, 2016 11:44 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1452728656">&nbsp;</a></div><pre>I&#39;m not surprised that you see those failures because those jobs should be mapped to a user that can submit batch jobs. The main site for what the pilots are doing is here&#58; <a href='http&#58;//www.uscms.org/SoftwareComputing/Grid/WMS/glideinWMS/doc.prd/index.html.' target='_blank' rel='nofollow'>http&#58;//www.uscms.org/SoftwareComputing/Grid/WMS/glideinWMS/doc.prd/index.html.</a> Pilot jobs are an essential part of the OSG infrastructure&#58; when the job lands on a compute node, it starts up the HTCondor worker stack that communicates with the OSG, and allows users to OSG users to run jobs at your site.

If you don&#39;t want to allow this, we should talk to factory ops so that you can drop support to the OSG VO.</pre></div><div class='update_description'><i onclick="document.location='27288#1452717922'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-13T20:45:22+00:00">Jan 13, 2016 08:45 PM UTC</time><a class="anchor" name="1452717922">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; I can&#39;t speak to exactly why pilot jobs need to create &#39;~/.globus&#39; but the pilots need to do a lot of things to set up their payloads so they can communicate back to the OSG and accept user jobs. I wouldn&#39;t expect jobs mapped to &#39;nobody&#39; to work. Is there another user you could point it to?</font>

For the time being, I&#39;ve remapped that DN to the user account for rsv, which is local to our OSG VO box and can&#39;t submit batch jobs.  However, that too is generating errors&#58;

root@osg&#58;/var/log/globus# tail /var/log/globus/gram_rsv.log
ts=2016-01-13T20&#58;32&#58;21.866456Z id=19517 event=gram.job.end level=ERROR gramid=/16506032084249176766/14500289408298649993/ job_status=4 status=-17 reason=&#34;the job failed when the job manager attempted to run it&#34;
ts=2016-01-13T20&#58;32&#58;28.148491Z id=19517 event=gram.job.end level=ERROR gramid=/16506032086491899326/14500289408298649993/ job_status=4 status=-17 reason=&#34;the job failed when the job manager attempted to run it&#34;
ts=2016-01-13T20&#58;32&#58;28.292851Z id=19517 event=gram.job.end level=ERROR gramid=/16506032084372714686/14500289408298649993/ job_status=4 status=-17 reason=&#34;the job failed when the job manager attempted to run it&#34;
ts=2016-01-13T20&#58;32&#58;28.398011Z id=19517 event=gram.job.end level=ERROR gramid=/16506032083232984766/14500289408298649993/ job_status=4 status=-17 reason=&#34;the job failed when the job manager attempted to run it&#34;
ts=2016-01-13T20&#58;32&#58;28.429724Z id=19517 event=gram.job.end level=ERROR gramid=/16506032083335676606/14500289408298649993/ job_status=4 status=-17 reason=&#34;the job failed when the job manager attempted to run it&#34;
ts=2016-01-13T20&#58;32&#58;28.555567Z id=19517 event=gram.job.end level=ERROR gramid=/16506032084382490046/14500289408298649993/ job_status=4 status=-17 reason=&#34;the job failed when the job manager attempted to run it&#34;
ts=2016-01-13T20&#58;32&#58;28.591012Z id=19517 event=gram.job.end level=ERROR gramid=/16506032083541326526/14500289408298649993/ job_status=4 status=-17 reason=&#34;the job failed when the job manager attempted to run it&#34;
ts=2016-01-13T20&#58;32&#58;28.595550Z id=19517 event=gram.job.end level=ERROR gramid=/16506032085156604606/14500289408298649993/ job_status=4 status=-17 reason=&#34;the job failed when the job manager attempted to run it&#34;
ts=2016-01-13T20&#58;32&#58;28.699050Z id=19517 event=gram.job.end level=ERROR gramid=/16506032083296032446/14500289408298649993/ job_status=4 status=-17 reason=&#34;the job failed when the job manager attempted to run it&#34;
ts=2016-01-13T20&#58;32&#58;28.699161Z id=19517 event=gram.job.end level=ERROR gramid=/16506032086786345406/14500289408298649993/ job_status=4 status=-17 reason=&#34;the job failed when the job manager attempted to run it&#34;

Is there documentation somewhere that describes what this pilot/osg-flock.grid.iu.edu DN is trying to do?  I have googled variations on it several times and not really come up with anything useful.

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1452713105'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-13T19:25:05+00:00">Jan 13, 2016 07:25 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1452713105">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; I&#39;m confused by this.  AFAICT, the OSG software is managing the DNs in /etc/grid-security/grid-mapfile on our OSG VO box, so shouldn&#39;t that include &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu&#34;?  If not, to what local user should that DN map?  And what happens if we need to add a second OSG project on OSC resources -- can that be accomodated on the same VO box, or will we need a second VO box?</font>

You can choose which user it maps to in /etc/edg-mkgridmap.conf by changing the last field of the following lines&#58;

# USER-VO-MAP osg OSG -- 23 -- Rob Quick (rquick@....)
group vomss&#58;//voms.opensciencegrid.org&#58;8443/voms/osg osg
group vomss&#58;//voms.grid.iu.edu&#58;8443/voms/osg osg

And applying the changes by running &#96;edg-mkgridmap&#96;. If you would like to support multiple VOs (Virtual Organizations = OSG projects), you can map other VOs to other users or the same user if that suits you. This can all be supported on one CE (Compute Element = VO box).

I can&#39;t speak to exactly why pilot jobs need to create &#39;~/.globus&#39; but the pilots need to do a lot of things to set up their payloads so they can communicate back to the OSG and accept user jobs. I wouldn&#39;t expect jobs mapped to &#39;nobody&#39; to work. Is there another user you could point it to?</pre></div><div class='update_description'><i onclick="document.location='27288#1452711881'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-13T19:04:41+00:00">Jan 13, 2016 07:04 PM UTC</time><a class="anchor" name="1452711881">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; &#62; 1) the osg-flock issue is different, they are never running because yes, OSC needs to whitelist their DN to the gridmap file.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;m confused by this.  AFAICT, the OSG software is managing the DNs in /etc/grid-security/grid-mapfile on our OSG VO box, so shouldn&#39;t that include &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu&#34;?  If not, to what local user should that DN map?  And what happens if we need to add a second OSG project on OSC resources -- can that be accomodated on the same VO box, or will we need a second VO box?</font>

I did a little more digging into this and found the config files for edg-mkgridmap.  I added an entry to map &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu&#34; to the nobody user.  However, now we&#39;re seeing errors like the following&#58;

root@osg&#58;/var/log/globus# more /var/log/globus/gram_nobody.log
ts=2016-01-13T18&#58;50&#58;32.772783Z id=7220 event=gram.make_job_dir.end level=ERROR gramid=/16506016693465985926/14500289408298687149/ status=-22 path=//.globus msg=&#34;Error creating directory&#34; errno=2 reason=&#34;No such file or directory&#34;
ts=2016-01-13T18&#58;50&#58;32.945021Z id=7220 event=gram.make_job_dir.end level=ERROR gramid=/16506016693839809926/14500289408298687149/ status=-22 path=//.globus msg=&#34;Error creating directory&#34; errno=2 reason=&#34;No such file or directory&#34;
ts=2016-01-13T18&#58;53&#58;41.716176Z id=7619 event=gram.make_job_dir.end level=ERROR gramid=/16506016690739335926/14500289408298658176/ status=-22 path=//.globus msg=&#34;Error creating directory&#34; errno=2 reason=&#34;No such file or directory&#34;
ts=2016-01-13T18&#58;53&#58;41.882591Z id=7619 event=gram.make_job_dir.end level=ERROR gramid=/16506016692255845366/14500289408298658176/ status=-22 path=//.globus msg=&#34;Error creating directory&#34; errno=2 reason=&#34;No such file or directory&#34;
ts=2016-01-13T18&#58;56&#58;14.339399Z id=7741 event=gram.make_job_dir.end level=ERROR gramid=/16506017792204720721/14500289408298670491/ status=-22 path=//.globus msg=&#34;Error creating directory&#34; errno=2 reason=&#34;No such file or directory&#34;
ts=2016-01-13T18&#58;56&#58;14.494684Z id=7741 event=gram.make_job_dir.end level=ERROR gramid=/16506017791931179601/14500289408298670491/ status=-22 path=//.globus msg=&#34;Error creating directory&#34; errno=2 reason=&#34;No such file or directory&#34;
ts=2016-01-13T18&#58;58&#58;41.759802Z id=7822 event=gram.make_job_dir.end level=ERROR gramid=/16506017790855326121/14500289408298689940/ status=-22 path=//.globus msg=&#34;Error creating directory&#34; errno=2 reason=&#34;No such file or directory&#34;
ts=2016-01-13T18&#58;58&#58;41.883412Z id=7822 event=gram.make_job_dir.end level=ERROR gramid=/16506017792564247721/14500289408298689940/ status=-22 path=//.globus msg=&#34;Error creating directory&#34; errno=2 reason=&#34;No such file or directory&#34;

What exactly is the pilot/osg-flock.grid.iu.edu service trying to do here that it needs to create a ~/.globus directory?

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1452631487'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-12T20:44:47+00:00">Jan 12, 2016 08:44 PM UTC</time><a class="anchor" name="1452631487">&nbsp;</a></div><pre>Attached are the stdout and stderr files from the last nova job submitted to OSC&#39;s Oakley cluster yesterday.

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1452623449'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-12T18:30:49+00:00">Jan 12, 2016 06:30 PM UTC</time><a class="anchor" name="1452623449">&nbsp;</a></div><pre>Also, our GRAM instance is starting to see RSL errors again&#58;

ts=2016-01-12T18&#58;22&#58;25.818325Z id=2642 event=gram.validate_rsl.end level=ERROR msg=&#34;Unsupported RSL attribute&#34; attribute=invalid status=-48
ts=2016-01-12T18&#58;22&#58;25.818345Z id=2642 event=gram.query.end level=ERROR gramid=/16506029772674911736/14500289408298685574/ uri=&#34;/16506029772674911736/14500289408298685574/&#34; msg=&#34;Error processing query&#34; status=-48 reason=&#34;the provided RSL could not be properly parsed
ts=2016-01-12T18&#58;27&#58;51.062297Z id=2642 event=gram.validate_rsl.end level=ERROR msg=&#34;Unsupported RSL attribute&#34; attribute=invalid status=-48
ts=2016-01-12T18&#58;27&#58;51.062340Z id=2642 event=gram.query.end level=ERROR gramid=/16506167220725199961/14500289408298660531/ uri=&#34;/16506167220725199961/14500289408298660531/&#34; msg=&#34;Error processing query&#34; status=-48 reason=&#34;the provided RSL could not be properly parsed
ts=2016-01-12T18&#58;27&#58;51.069415Z id=2642 event=gram.validate_rsl.end level=ERROR msg=&#34;Unsupported RSL attribute&#34; attribute=invalid status=-48
ts=2016-01-12T18&#58;27&#58;51.069446Z id=2642 event=gram.query.end level=ERROR gramid=/16506213379776989516/14500289408298685574/ uri=&#34;/16506213379776989516/14500289408298685574/&#34; msg=&#34;Error processing query&#34; status=-48 reason=&#34;the provided RSL could not be properly parsed
ts=2016-01-12T18&#58;27&#58;51.079587Z id=2642 event=gram.validate_rsl.end level=ERROR msg=&#34;Unsupported RSL attribute&#34; attribute=invalid status=-48
ts=2016-01-12T18&#58;27&#58;51.079618Z id=2642 event=gram.query.end level=ERROR gramid=/16506029772674911736/14500289408298685574/ uri=&#34;/16506029772674911736/14500289408298685574/&#34; msg=&#34;Error processing query&#34; status=-48 reason=&#34;the provided RSL could not be properly parsed

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1452621050'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-12T17:50:50+00:00">Jan 12, 2016 05:50 PM UTC</time><a class="anchor" name="1452621050">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; 4) Troy/Doug, first I&#39;d like to apologize for the state of this ticket. If Marty/Kevin come back with more issues, we may want to start thinking about scrapping the globus gatekeeper entirely and moving to HTCondor-CE. Another site was having issues with the globus gatekeeper and after lengthy troubleshooting we decided that switching was the easier solution. They were able to install the new software and accept new jobs in half a day.</font>

I will have to check internally on possible timelines for that.  Unfortunately this is unfunded effort for us, so it&#39;s not going to be super high priority.

<font color='#7F7E6F'>&#62; 1) the osg-flock issue is different, they are never running because yes, OSC needs to whitelist their DN to the gridmap file.</font>

I&#39;m confused by this.  AFAICT, the OSG software is managing the DNs in /etc/grid-security/grid-mapfile on our OSG VO box, so shouldn&#39;t that include &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu&#34;?  If not, to what local user should that DN map?  And what happens if we need to add a second OSG project on OSC resources -- can that be accomodated on the same VO box, or will we need a second VO box?

<font color='#7F7E6F'>&#62; But the real problem we&#39;ve been trying to understand is the gram failing to report accurate job status back to our factory submit host.</font>

I&#39;ll take a further look at this in the next day or two.

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1452569710'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-12T03:35:10+00:00">Jan 12, 2016 03:35 AM UTC</time> by <b>ahimmel@....</b><a class="anchor" name="1452569710">&nbsp;</a></div><pre>This libfann issue is a red herring. It is an unrelated problem we already know about and are working on fixing it.
-Alex

On Jan 11, 2016, at 4&#58;42 PM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='27288#1452555244'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-11T23:34:04+00:00">Jan 11, 2016 11:34 PM UTC</time><a class="anchor" name="1452555244">&nbsp;</a></div><pre>I&#39;ll also reply for Marty on behalf of factory ops since he&#39;s not back until Tomorrow.

There are 2 independent issues here,

In reply to Brian Lin&#39;s questions&#58;
<a href='27288.html#1452545246' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/27288#1452545246</a>

1) the osg-flock issue is different, they are never running because yes, OSC needs to whitelist their DN to the gridmap file.

But the real problem we&#39;ve been trying to understand is the gram failing to report accurate job status back to our factory submit host.  Please see this plot&#58;
<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=Nova_US_OSC_osg&frontend=Fermilab-fifebatch_frontend&infoGroup=running&elements=StatusRunning' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=Nova_US_OSC_osg&frontend=Fermilab-fifebatch_frontend&infoGroup=running&elements=StatusRunning</a>,ClientGlideRunning,ClientGlideIdle,StatusIdle,&rra=0&window_min=0&window_max=0&timezone=-8

Yes, Kevin is right, Nova is running at the moment, but that will only be temporary.  See in our factory plot, &#34;claimed&#34; is non- zero, that means pilots were actually running at OSC.  However our &#34;running&#34; green area is flatlined to 0.  Gram is not reporting back that those pilots ever transitioned from idle to running.

If Nova keeps submitting batches, eventually the factory will only see &#34;idle&#34; pilots on the queue and no longer submit new ones, because these &#34;idle&#34; pilots have in fact already ran to completion, but on our factory side condor-g thinks they haven&#39;t even started yet.

This is the worrying issue that in my opinion warrents the transition to condor-ce.

Thanks,
Jeff Dost
OSG Glidein Factory Operations

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='27288#1452552109'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-11T22:41:49+00:00">Jan 11, 2016 10:41 PM UTC</time><a class="anchor" name="1452552109">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Do you have Nova&#39;s CVMFS directory (/cvmfs/nova.opensciencegrid.org) set up? I&#39;m wondering if the cert errors are due to either A) the initial configuration failure or B) the script may be looking for certs in a CVMFS directory.</font>

AFAICT, yes&#58;

root@oak-rw&#58;/nfs/13/troy# pdsh -w n0011,n0134,n0148,n0580 ls -al /cvmfs/nova.opensciencegrid.org/novasoft/slf6/novasoft/releases/S16-01-07/lib | dshbak -c
----------------
n[0011,0134,0148,0580]
----------------
total 46
drwxr-xr-x  4 cimsrvr 301    69 Jan  7 17&#58;22 .
drwxr-xr-x 97 cimsrvr 301  4096 Jan  7 19&#58;01 ..
drwxr-xr-x  2 cimsrvr 301 20480 Jan  7 17&#58;42 Linux2.6-GCC-debug
drwxr-xr-x  2 cimsrvr 301 20480 Jan  7 17&#58;50 Linux2.6-GCC-maxopt

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1452552008'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-11T22:40:08+00:00">Jan 11, 2016 10:40 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1452552008">&nbsp;</a></div><pre>Troy,

Do you have Nova&#39;s CVMFS directory (/cvmfs/nova.opensciencegrid.org) set up? I&#39;m wondering if the cert errors are due to either A) the initial configuration failure or B) the script may be looking for certs in a CVMFS directory.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='27288#1452551816'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-11T22:36:56+00:00">Jan 11, 2016 10:36 PM UTC</time><a class="anchor" name="1452551816">&nbsp;</a></div><pre>My response to Enrique&#58;

On 01/11/2016 04&#58;20 PM, Enrique Arrieta Diaz wrote&#58;
<font color='#7F7E6F'>&#62; Here are the messages that I see&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *****************************************************************************************************</font>
<font color='#7F7E6F'>&#62; terminate called after throwing an instance of &#39;cet&#58;&#58;exception&#39;</font>
<font color='#7F7E6F'>&#62;    what()&#58;  ---- Configuration BEGIN</font>
<font color='#7F7E6F'>&#62;    Unable to load requested library /cvmfs/nova.opensciencegrid.org/novasoft/slf6</font>
<font color='#7F7E6F'>&#62; /novasoft/releases/S16-01-07/lib/Linux2.6-GCC-maxopt/libLEM_dict.so</font>
<font color='#7F7E6F'>&#62;    libdoublefann.so.2&#58; cannot open shared object file&#58; No such file or directory</font>
<font color='#7F7E6F'>&#62; ---- Configuration END</font>

Is this application assuming that libdoublefann.so.2 is in the default library search path?  Because AFAICT, that is not the case on Oakley.

<font color='#7F7E6F'>&#62; IFDH_DEBUG=0 =&#62; 0</font>
<font color='#7F7E6F'>&#62; IFDH_DEBUG=0 =&#62; 0</font>
<font color='#7F7E6F'>&#62; depth=2 DC = com, DC = DigiCert-Grid, O = DigiCert Grid, CN = DigiCert Grid Root CA</font>
<font color='#7F7E6F'>&#62; verify error&#58;num=19&#58;self signed certificate in certificate chain</font>
<font color='#7F7E6F'>&#62; verify return&#58;0</font>
<font color='#7F7E6F'>&#62; IFDH_DEBUG=0 =&#62; 0</font>
<font color='#7F7E6F'>&#62; depth=2 DC = com, DC = DigiCert-Grid, O = DigiCert Grid, CN = DigiCert Grid Root CA</font>
<font color='#7F7E6F'>&#62; verify error&#58;num=19&#58;self signed certificate in certificate chain</font>
<font color='#7F7E6F'>&#62; verify return&#58;0</font>
<font color='#7F7E6F'>&#62; IFDH_DEBUG=0 =&#62; 0</font>
<font color='#7F7E6F'>&#62; depth=2 DC = com, DC = DigiCert-Grid, O = DigiCert Grid, CN = DigiCert Grid Root CA</font>
<font color='#7F7E6F'>&#62; verify error&#58;num=19&#58;self signed certificate in certificate chain</font>
<font color='#7F7E6F'>&#62; verify return&#58;0</font>
<font color='#7F7E6F'>&#62; IFDH_DEBUG=0 =&#62; 0</font>
<font color='#7F7E6F'>&#62; Mon Jan 11 15&#58;27&#58;39 EST 2016 ./arrieta1-Offsite_test_OSC-20160111_1401.sh COMPLETED with exit status 250</font>
<font color='#7F7E6F'>&#62; IFDH_DEBUG=0 =&#62; 0</font>
<font color='#7F7E6F'>&#62; *****************************************************************************************************</font>

That&#39;s odd.  That seems like a cert problem, but the cert in question is in our OSG VO box&#39;s /etc/grid-security/certificates directory as well as the moral equivalent in the osg-wn-client installation.

<div id='show_1525952768' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1525952768'>by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671
</div><script type='text/javascript'>
        $('#show_1525952768').click(function() {
            $('#detail_1525952768').slideDown("normal");
            $('#show_1525952768').hide();
            $('#hide_1525952768').show();
        });
        $('#hide_1525952768').click(function() {
            $('#detail_1525952768').slideUp();
            $('#hide_1525952768').hide();
            $('#show_1525952768').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27288#1452550873'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-11T22:21:13+00:00">Jan 11, 2016 10:21 PM UTC</time><a class="anchor" name="1452550873">&nbsp;</a></div><pre>Doug and I got some out-of-band email from Enrique Arrieta Díaz&#58;

<font color='#7F7E6F'>&#62;On 01/11/2016 03&#58;13 PM, Troy Baer wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; On 01/11/2016 03&#58;03 PM, Enrique Arrieta Diaz wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hello Troy, I just submitted a new set of 20 Productions test jobs to</font>
<font color='#7F7E6F'>&#62;&#62;&#62; OSC&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; <a href='http&#58;//samweb.fnal.gov&#58;8480/station_monitor/nova/stations/nova/projects/arrieta1-Offsite_test_OSC-20160111_1401' target='_blank' rel='nofollow'>http&#58;//samweb.fnal.gov&#58;8480/station_monitor/nova/stations/nova/projects/arrieta1-Offsite_test_OSC-20160111_1401</a></font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 6575523.0@....</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; We have 4 Nova jobs currently running on Oakley.  I am not sure that</font>
<font color='#7F7E6F'>&#62;&#62; you are using the term &#34;job&#34; in quite the same way we are, though --</font>
<font color='#7F7E6F'>&#62;&#62; the samweb.fnal.gov URL above appears to refer to only one of the four</font>
<font color='#7F7E6F'>&#62;&#62; TORQUE jobs from Nova that I see.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;I see that all of the OSG jobs in the above URL have ended with status</font>
<font color='#7F7E6F'>&#62;&#34;bad&#34; and last activity &#34;process ended - bad&#34;.  Do you see anything on</font>
<font color='#7F7E6F'>&#62;your end with more useful error messages?</font>

*****************************************************************************************************
terminate called after throwing an instance of &#39;cet&#58;&#58;exception&#39;
what()&#58;  ---- Configuration BEGIN
Unable to load requested library /cvmfs/nova.opensciencegrid.org/novasoft/slf6
/novasoft/releases/S16-01-07/lib/Linux2.6-GCC-maxopt/libLEM_dict.so
libdoublefann.so.2&#58; cannot open shared object file&#58; No such file or directory
---- Configuration END

IFDH_DEBUG=0 =&#62; 0
IFDH_DEBUG=0 =&#62; 0
depth=2 DC = com, DC = DigiCert-Grid, O = DigiCert Grid, CN = DigiCert Grid Root CA
verify error&#58;num=19&#58;self signed certificate in certificate chain
verify return&#58;0
IFDH_DEBUG=0 =&#62; 0
<div id='show_347879251' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_347879251'>depth=2 DC = com, DC = DigiCert-Grid, O = DigiCert Grid, CN = DigiCert Grid Root CA
verify error&#58;num=19&#58;self signed certificate in certificate chain
verify return&#58;0
IFDH_DEBUG=0 =&#62; 0
depth=2 DC = com, DC = DigiCert-Grid, O = DigiCert Grid, CN = DigiCert Grid Root CA
verify error&#58;num=19&#58;self signed certificate in certificate chain
verify return&#58;0
IFDH_DEBUG=0 =&#62; 0
Mon Jan 11 15&#58;27&#58;39 EST 2016 ./arrieta1-Offsite_test_OSC-20160111_1401.sh COMPLETED with exit status 250
IFDH_DEBUG=0 =&#62; 0
*****************************************************************************************************

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671
</div><script type='text/javascript'>
        $('#show_347879251').click(function() {
            $('#detail_347879251').slideDown("normal");
            $('#show_347879251').hide();
            $('#hide_347879251').show();
        });
        $('#hide_347879251').click(function() {
            $('#detail_347879251').slideUp();
            $('#hide_347879251').hide();
            $('#show_347879251').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27288#1452547429'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-11T21:23:49+00:00">Jan 11, 2016 09:23 PM UTC</time><a class="anchor" name="1452547429">&nbsp;</a></div><pre>Nova had about 40 jobs waiting to run at OSC for the past few days, these all ran this morning and they appear to have completed successfully.

Kevin

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kevin Retzke 3130</pre></div><div class='update_description'><i onclick="document.location='27288#1452545246'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-11T20:47:26+00:00">Jan 11, 2016 08:47 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1452545246">&nbsp;</a></div><pre>Ok, this ticket is really getting out of hand and is in dire need of a summary.

1) Marty, what exactly are the problems that you&#39;re seeing from the factory end? Simple auth errors? Because it sounds like the osg-flock pilot DN has NOT been added to their grid-mapfile when it very much should be.

2) Kevin, are you seeing any issues with NOVA jobs? It&#39;s not very clear in this ticket what the original problem actually was and if the issues ever actually affected NOVA.

3) Marty/Kevin, did the factories submit lots of pilots to OSC over the weekend that would cause the OOM on their CE?

4) Troy/Doug, first I&#39;d like to apologize for the state of this ticket. If Marty/Kevin come back with more issues, we may want to start thinking about scrapping the globus gatekeeper entirely and moving to HTCondor-CE. Another site was having issues with the globus gatekeeper and after lengthy troubleshooting we decided that switching was the easier solution. They were able to install the new software and accept new jobs in half a day.

- Brian</pre></div><div class='update_description'><i onclick="document.location='27288#1452542378'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-11T19:59:38+00:00">Jan 11, 2016 07:59 PM UTC</time><a class="anchor" name="1452542378">&nbsp;</a></div><pre>We&#39;ve had 4 jobs arrive this afternoon.  I did the following to capture their state 10-15 minutes after they started&#58;

pdsh -w n0011,n0134,n0148,n0580 cd /tmp &#92;; find  -user nova &#92;| xargs tar czf /tmp/nova-files.tgz

The results of these are fairly large, ranging from ~915MB to 4.5GB&#58;

troy@oakley01&#58;/fs/lustre/troy$ ls -alh
total 12G
drwxr-xr-x   7 troy sysp  28K Jan 11 14&#58;48 .
drwxrwxrwt 202 root root  52K Jan  7 12&#58;47 ..
[...]
-rw-r--r--   1 troy sysp 3.8G Jan 11 14&#58;45 n0011-nova-files.tgz
-rw-r--r--   1 troy sysp 4.5G Jan 11 14&#58;45 n0134-nova-files.tgz
-rw-r--r--   1 troy sysp 1.9G Jan 11 14&#58;46 n0148-nova-files.tgz
-rw-r--r--   1 troy sysp 915M Jan 11 14&#58;46 n0580-nova-files.tgz
[...]

These jobs have been running for more than ~20 minutes, so AFAICT they are successful from our perspective.  I&#39;m not sure how I would verify that they&#39;re successful from OSG&#39;s PoV, though.

We&#39;re also seeing lots of attempts by the DN &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu&#34; to connect to our OSG VO box, but AFAICT we&#39;ve never been asked to add them to our grid-mapfile.  OTOH, we&#39;re not seeing any more of the RSL attribute errors we were seeing last month.

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1452526282'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-11T15:31:22+00:00">Jan 11, 2016 03:31 PM UTC</time><a class="anchor" name="1452526282">&nbsp;</a></div><pre>Our OSG VO box OOMed over the weekend.  It looks like something on the OSG side kept starting new connections to it till it fell over&#58;

root@osg&#58;/nfs/13/troy# lastcomm -f /var/account/pacct.1 | grep -c condor_starter
9680
root@osg&#58;/nfs/13/troy# lastcomm -f /var/account/pacct.1 | grep -c globus-gatekeep
25837

root@osg&#58;/nfs/13/troy# grep -c nova /var/spool/batch/torque/client_logs/20160110
649
root@osg&#58;/nfs/13/troy# grep -c tomcat /var/spool/batch/torque/client_logs/20160110
1062

We did have 12 nova jobs appear after our OSG VO box recovered, but only 4 of them ran for more than ~20 minutes and none ran for more than ~40 minutes.

If OSG is going to push some test jobs at us, I wish we would get some prior warning, since we kind of need to be paying attention while they are running.

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1452525015'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-11T15:10:15+00:00">Jan 11, 2016 03:10 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1452525015">&nbsp;</a></div><pre>Good morning,

Checking in on the status of testing.  If I may assist please let me know.

Thank you,</pre></div><div class='update_description'><i onclick="document.location='27288#1452036729'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-05T23:32:09+00:00">Jan 5, 2016 11:32 PM UTC</time> by <b>ahimmel@....</b><a class="anchor" name="1452036729">&nbsp;</a></div><pre>I will ask, but our offsite expert may not be back from the holidays yet.
-Alex

On Jan 5, 2016, at 4&#58;36 PM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='27288#1452033385'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-05T22:36:25+00:00">Jan 5, 2016 10:36 PM UTC</time><a class="anchor" name="1452033385">&nbsp;</a></div><pre>It looks like the files in question have been purged in the interim.  Can somebody try to send some Nova jobs our way tomorrow morning?

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1452032476'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-05T22:21:16+00:00">Jan 5, 2016 10:21 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1452032476">&nbsp;</a></div><pre>Troy,

Could you host the file somewhere so that I could grab it?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='27288#1450206685'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-15T19:11:25+00:00">Dec 15, 2015 07:11 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1450206685">&nbsp;</a></div><pre>Could you try e-mailing it or placing it on a web-server so I could grab it?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='27288#1450204885'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-15T18:41:25+00:00">Dec 15, 2015 06:41 PM UTC</time> by <b>troy@....</b><a class="anchor" name="1450204885">&nbsp;</a></div><pre>I tried that yesterday, and the resulting file was larger than the OSG
ticket system would accept.

On 12/15/2015 12&#58;46 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27288#1450201583'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-15T17:46:23+00:00">Dec 15, 2015 05:46 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1450201583">&nbsp;</a></div><pre>Can you grab one of the /tmp/pbstmp.* folders and attach it to this ticket?</pre></div><div class='update_description'><i onclick="document.location='27288#1450196751'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-15T16:25:51+00:00">Dec 15, 2015 04:25 PM UTC</time><a class="anchor" name="1450196751">&nbsp;</a></div><pre>AFAICT, we had 97 nova jobs submitted this afternoon, but only 5 of them ran for significantly longer than 20 minutes.

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1450121598'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-14T19:33:18+00:00">Dec 14, 2015 07:33 PM UTC</time><a class="anchor" name="1450121598">&nbsp;</a></div><pre>Something appears to have changed, because now we have a bunch of nova jobs running.

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1450120468'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-14T19:14:28+00:00">Dec 14, 2015 07:14 PM UTC</time> by <b>troy@....</b><a class="anchor" name="1450120468">&nbsp;</a></div><pre>On 12/14/2015 02&#58;02 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27288#1450119746'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-14T19:02:26+00:00">Dec 14, 2015 07:02 PM UTC</time> by <b>troy@....</b><a class="anchor" name="1450119746">&nbsp;</a></div><pre>We&#39;re seeing a lot of errors like the following in our GRAM logs now&#58;

ts=2015-12-14T18&#58;56&#58;42.460154Z id=31271 event=gram.validate_rsl.end
level=ERROR msg=&#34;Unsupported RSL attribute&#34; attribute=invalid status=-48
ts=2015-12-14T18&#58;56&#58;42.460194Z id=31271 event=gram.query.end level=ERROR
gramid=/16506225426086058416/14500289408298685574/
uri=&#34;/16506225426086058416/14500289408298685574/&#34; msg=&#34;Error processing
query&#34; status=-48 reason=&#34;the provided RSL could not be properly parsed
ts=2015-12-14T18&#58;56&#58;42.482060Z id=31271 event=gram.validate_rsl.end
level=ERROR msg=&#34;Unsupported RSL attribute&#34; attribute=invalid status=-48
ts=2015-12-14T18&#58;56&#58;42.482105Z id=31271 event=gram.query.end level=ERROR
gramid=/16506255115752160996/14500289408298685574/
uri=&#34;/16506255115752160996/14500289408298685574/&#34; msg=&#34;Error processing
query&#34; status=-48 reason=&#34;the provided RSL could not be properly parsed

--Troy

--

Troy Baer
Senior HPC Systems Engineer
Ohio Supercomputer Center
<a href='http&#58;//www.osc.edu/' target='_blank' rel='nofollow'>http&#58;//www.osc.edu/</a></pre></div><div class='update_description'><i onclick="document.location='27288#1450119141'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-14T18:52:21+00:00">Dec 14, 2015 06:52 PM UTC</time><a class="anchor" name="1450119141">&nbsp;</a></div><pre>Hi,
There are currently Nova jobs trying to run at OSC; looks like our frontend has been asking for glideins at OSC for several days now (since at least 12/8) without any starting.

Kevin

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kevin Retzke 3130</pre></div><div class='update_description'><i onclick="document.location='27288#1450117609'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-14T18:26:49+00:00">Dec 14, 2015 06:26 PM UTC</time><a class="anchor" name="1450117609">&nbsp;</a></div><pre>Hi Troy,

The factory doesn&#39;t actually generate/send any jobs directly, so we&#39;ll need to get the Fermilab or OSG frontend people to send some jobs your way. I believe Kevin Retzke was taking care of that earlier; Kevin, could you arrange for some more Nova jobs to land on their site?

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='27288#1450104891'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-14T14:54:51+00:00">Dec 14, 2015 02:54 PM UTC</time><a class="anchor" name="1450104891">&nbsp;</a></div><pre>To collect output, we need the factory to send us some jobs.

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1449705575'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-09T23:59:35+00:00">Dec 9, 2015 11:59 PM UTC</time><a class="anchor" name="1449705575">&nbsp;</a></div><pre>It looks like the glidein logs have a different naming scheme than on the factory, as those gmon.out files are definitely not the glidein logs. It might be worth making a tarball of one of the /tmp/pbstmp.* folders in its entirety instead, to make sure we get everything associated with the run.

Brendan Dennis
UCSD Glidein Factory Logs

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='27288#1449699727'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-09T22:22:07+00:00">Dec 9, 2015 10:22 PM UTC</time><a class="anchor" name="1449699727">&nbsp;</a></div><pre>Since the ticket system won&#39;t accept .tgz files (which is a rant for another time), I&#39;ve unloaded a base64-encoded version of the tarball.  To extract, do the following&#58;

base64 -d &#60;osg-logs.tgz.base64encoded.txt | tar xzvf -

by /DC=org/DC=cilogon/C=US/O=Ohio State University/CN=Troy Baer A31671</pre></div><div class='update_description'><i onclick="document.location='27288#1449675686'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-09T15:41:26+00:00">Dec 9, 2015 03:41 PM UTC</time> by <b>troy@....</b><a class="anchor" name="1449675686">&nbsp;</a></div><pre>Sorry, this fell off the stack.  I need to get my DN updated before I
can upload files to the ticket, and I haven&#39;t had a chance to request
that yet.

On 12/09/2015 10&#58;36 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27288#1449675388'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-09T15:36:28+00:00">Dec 9, 2015 03:36 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1449675388">&nbsp;</a></div><pre>Doug/Troy&#58; Any word on those files and the size of /tmp?</pre></div><div class='update_description'><i onclick="document.location='27288#1449077731'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-02T17:35:31+00:00">Dec 2, 2015 05:35 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1449077731">&nbsp;</a></div><pre>Doug/Troy&#58; I&#39;d also be curious to see other logs, namely the MasterLog, StarterLog, and StartdLog. How big is your /tmp partition? I ask because we&#39;ve seen some issues with /tmp filling up and causing pilots to go haywire.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='27288#1448921498'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-30T22:11:38+00:00">Nov 30, 2015 10:11 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1448921498">&nbsp;</a></div><pre>Hi Doug,

Unfortunately we cannot attach files to the ticket when received via email.  You must use the web UI to attach files.
You should be able to reach this ticket directly using the following URL&#58;  <a href='https&#58;//ticket.grid.iu.edu/27288' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/27288</a>

Please let me know if I may assist.

Thank you,
Vince</pre></div><div class='update_description'><i onclick="document.location='27288#1448466206'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-25T15:43:26+00:00">Nov 25, 2015 03:43 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1448466206">&nbsp;</a></div><pre>Doug,

You&#39;ll need to use the web UI to attach files to the ticket. Could you look at another glidein and provide its *.out, *.err, and log dir?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='27288#1448462850'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-25T14:47:30+00:00">Nov 25, 2015 02:47 PM UTC</time> by <b>troy@....</b><a class="anchor" name="1448462850">&nbsp;</a></div><pre>Attached is a tarball of the following files from one of our compute
nodes that has 9 nova jobs running&#58;

# find /tmp/pbstmp.*/glide* &#92;( -name &#34;*.out&#34; -o -name &#34;*.err&#34; &#92;)
/tmp/pbstmp.5167119/glide_FUO19t/execute/dir_9427/gmon.out
/tmp/pbstmp.5167120/glide_QxP8JX/execute/dir_17683/gmon.out
/tmp/pbstmp.5167121/glide_y1OFrM/execute/dir_7394/gmon.out
/tmp/pbstmp.5167132/glide_9sjUnb/execute/dir_12825/gmon.out
/tmp/pbstmp.5167133/glide_tFhiUP/execute/dir_22538/gmon.out
/tmp/pbstmp.5167141/glide_wA2FHE/execute/dir_5728/gmon.out
/tmp/pbstmp.5167143/glide_HtLbxp/execute/dir_20651/gmon.out
/tmp/pbstmp.5167146/glide_euGW9z/execute/dir_15368/gmon.out
/tmp/pbstmp.5168310/glide_E9Tg25/execute/dir_24003/gmon.out
/tmp/pbstmp.5168312/glide_DRsomU/execute/dir_15369/gmon.out
/tmp/pbstmp.5168314/glide_DNxLfE/execute/dir_19300/gmon.out

Unfortunately, I don&#39;t see any errors messages (or much of anything
else) in those.

On 11/24/2015 06&#58;15 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27288#1448406923'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-24T23:15:23+00:00">Nov 24, 2015 11:15 PM UTC</time><a class="anchor" name="1448406923">&nbsp;</a></div><pre>Troy,

If possible, can you upload some examples of any *.out or *.err logs you find in these temporary work directories as an attachment to the ticket here?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27288#1448406493'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-24T23:08:13+00:00">Nov 24, 2015 11:08 PM UTC</time> by <b>troy@....</b><a class="anchor" name="1448406493">&nbsp;</a></div><pre>One wrinkle in this is that $TMPDIR on our systems is ephemeral; it only
lives as long as the TORQUE job, so we pretty much have to catch these
while they&#39;re running.  I&#39;ve tried poking around on some of the
currently running jobs, and I&#39;m not really sure what I&#39;m looking at&#58;

[root@n0249 ~]# ls -al /tmp/pbstmp.5164908/glide_bfhhWd/log/
total 844
drwxr-xr-x  2 nova PES0656   4096 Nov 24 17&#58;52 .
drwxr-xr-x 10 nova PES0656   4096 Nov 24 14&#58;54 ..
-rw-------  1 nova PES0656      0 Nov 24 14&#58;54 InstanceLock
-rw-r--r--  1 nova PES0656    104 Nov 24 14&#58;54 .master_address
-rw-r--r--  1 nova PES0656   1932 Nov 24 14&#58;54 MasterLog
prw-------  1 nova PES0656      0 Nov 24 17&#58;52 procd_address
prw-------  1 nova PES0656      0 Nov 24 17&#58;52 procd_address.watchdog
-rw-r--r--  1 nova PES0656 434896 Nov 24 17&#58;52 ProcLog
-rw-r--r--  1 nova PES0656    104 Nov 24 14&#58;54 .startd_address
-rw-------  1 nova PES0656    146 Nov 24 14&#58;55 .startd_claim_id.slot1
-rw-r--r--  1 nova PES0656 396618 Nov 24 17&#58;50 StartdLog
-rw-r--r--  1 nova PES0656   3659 Nov 24 14&#58;55 StarterLog

[root@n0249 ~]# grep -i error /tmp/pbstmp.5164908/glide_bfhhWd/log/*Log
/tmp/pbstmp.5164908/glide_bfhhWd/log/MasterLog&#58;11/24/15 14&#58;54&#58;12
(pid&#58;10576) Daemon Log is logging&#58; D_ALWAYS D_ERROR
/tmp/pbstmp.5164908/glide_bfhhWd/log/StartdLog&#58;11/24/15 14&#58;54&#58;13
(pid&#58;10580) Daemon Log is logging&#58; D_ALWAYS D_ERROR D_JOB
/tmp/pbstmp.5164908/glide_bfhhWd/log/StartdLog&#58;11/24/15 14&#58;54&#58;14
(pid&#58;10580) VM-gahp server reported an internal error
/tmp/pbstmp.5164908/glide_bfhhWd/log/StarterLog&#58;11/24/15 14&#58;55&#58;21
(pid&#58;10607) Daemon Log is logging&#58; D_ALWAYS D_ERROR
/tmp/pbstmp.5164908/glide_bfhhWd/log/StarterLog&#58;11/24/15 14&#58;55&#58;22
(pid&#58;10607) Error file&#58;
/tmp/pbstmp.5164908/glide_bfhhWd/execute/dir_10607/_condor_stderr

[root@n0249 ~]# more
/tmp/pbstmp.5164908/glide_bfhhWd/execute/dir_10607/_condor_stderr
<div id='show_1484097901' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1484097901'>[...nothing...]

What does &#34;VM-gahp server reported an internal error&#34; mean? That&#39;s the
only obvious error I can see, and it seems to happen almost
immediately.  Also, this job is clearly doing work&#58;

[root@n0249 ~]# ps auxwf | grep nova
root     15584  0.0  0.0 103304   820 pts/8    S+ 18&#58;03
0&#58;00              &#92;_ grep nova
nova      5524  0.0  0.0 110424  1612 ?        Ss 14&#58;53   0&#58;00  &#92;_ -sh
/var/spool/batch/torque/mom_priv/jobs/5164908.oak-batch.osc.edu.SC
nova      5597  0.0  0.0 106628  1816 ?        S 14&#58;53   0&#58;00      &#92;_
/bin/bash
/nfs/17/nova/.globus/.gass_cache/local/md5/3a/d6c4c10150ec60d3258681bacb155f/md5/97/ef9ce28e4e53f8ceecfce5d0719590/data
-v std -name gfactory_instance -entry Nova_US_OSC_osg -clientname
fifebatchgpvmhead2_OSG_gWMSFrontend.OSG_nova -schedd
schedd_glideins5@.... -proxy None -factory SDSC -web
<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/stage' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/stage</a> -sign
cd26d67f9e8ea668f2d8bfea737a13ef27c5fded -signentry
6496b05b9d283d89a011e6e62a554811c0151e78 -signtype sha1 -descript
description.fbobom.cfg -descriptentry description.fbobom.cfg -dir TMPDIR
-param_GLIDEIN_Client fifebatchgpvmhead2_OSG_gWMSFrontend.OSG_nova
-submitcredid 714925 -slotslayout fixed -clientweb
<a href='http&#58;//fifebatchgpvmhead2.fnal.gov/vofrontend/stage' target='_blank' rel='nofollow'>http&#58;//fifebatchgpvmhead2.fnal.gov/vofrontend/stage</a> -clientsign
22678b74f42a46020074e625a4beebdf7d4d1d85 -clientsigntype sha1
-clientdescript description.fb5fm7.cfg -clientgroup OSG_nova
-clientwebgroup
<a href='http&#58;//fifebatchgpvmhead2.fnal.gov/vofrontend/stage/group_OSG_nova' target='_blank' rel='nofollow'>http&#58;//fifebatchgpvmhead2.fnal.gov/vofrontend/stage/group_OSG_nova</a>
-clientsigngroup e1941fbc24b3e0a74eb4a4aeea134bdf9e682b38
-clientdescriptgroup description.ebieT2.cfg -param_CONDOR_VERSION
default -param_GLIDEIN_Glexec_Use NEVER -param_GLIDEIN_Job_Max_Time
34800 -param_GLIDECLIENT_ReqNode
gfactory.minus,1.dot,t2.dot,ucsd.dot,edu -param_GLIDECLIENT_Rank 1
-param_GLIDEIN_Report_Failed NEVER -param_MIN_DISK_GBS 1
-param_GLIDEIN_Monitoring_Enabled False -param_HAS_USAGE_MODEL OFFSITE
-param_UPDATE_COLLECTOR_WITH_TCP True -param_CONDOR_ARCH default
-param_USE_MATCH_AUTH True -param_CONDOR_OS default
-param_GLIDEIN_Collector
fifebatchhead3.dot,fnal.dot,gov.colon,9620.minus,9630.semicolon,fifebatchhead4.dot,fnal.dot,gov.colon,9620.minus,9630
-cluster 3281717 -subcluster 2
nova      9850  0.0  0.0   9376  1380 ?        S 14&#58;54   0&#58;00
&#92;_ /bin/bash /tmp/pbstmp.5164908/glide_bfhhWd/main/condor_startup.sh
glidein_config
nova     10576  0.0  0.0  95836  8152 ?        S 14&#58;54
0&#58;00              &#92;_
/tmp/pbstmp.5164908/glide_bfhhWd/main/condor/sbin/condor_master -f
-pidfile /tmp/pbstmp.5164908/glide_bfhhWd/condor_master2.pid
nova     10579  0.1  0.0  23580  5024 ?        S 14&#58;54
0&#58;13                  &#92;_ condor_procd -A
/tmp/pbstmp.5164908/glide_bfhhWd/log/procd_address -L
/tmp/pbstmp.5164908/glide_bfhhWd/log/ProcLog -R 1000000 -S 60 -C 16997
nova     10580  0.0  0.0  96668  9068 ?        S 14&#58;54
0&#58;04                  &#92;_ condor_startd -f
nova     10607  0.0  0.0  96008  8520 ?        S 14&#58;55
0&#58;00                      &#92;_ condor_starter -f fifebatch1.fnal.gov
nova     10611  0.0  0.0   9376  1272 ?        S 14&#58;55
0&#58;00                          &#92;_ /bin/sh
/tmp/pbstmp.5164908/glide_bfhhWd/execute/dir_10607/condor_exec.exe
--limit 4 --multifile --export
DEST=/pnfs/nova/scratch/fts/ParticleID_dropbox --config
Production/fcl/prod_reco_pidpart_numi_job.fcl --source
/cvmfs/nova.opensciencegrid.org/novasoft/slf5/novasoft/setup/setup_nova.sh&#58;-r&#58;S15-05-04c&#58;-b&#58;maxopt&#58;-e&#58;/cvmfs/nova.opensciencegrid.org/externals&#58;-5&#58;/cvmfs/nova.opensciencegrid.org/novasoft/slf5/novasoft&#58;-6&#58;/cvmfs/nova.opensciencegrid.org/novasoft/slf6/novasoft
-X runNovaSAM.py --hashDirs --copyOut --outTier out1&#58;reco --outTier
out2&#58;lemsum --outTier out3&#58;pidpart
nova     10673  0.0  0.0   9732  1860 ?        S 14&#58;55
0&#58;00                              &#92;_ /bin/sh
./arrieta1-draining_prod_artdaq_FA14-10-03x.d_nd_genie_fhc_nonswap_ndnewpos_draining_reco_S15-05-04c_AND_pidpart_S15-05-04c-20151123_1402.sh
--limit 4 --multifile --export
DEST=/pnfs/nova/scratch/fts/ParticleID_dropbox --config
Production/fcl/prod_reco_pidpart_numi_job.fcl --source
/cvmfs/nova.opensciencegrid.org/novasoft/slf5/novasoft/setup/setup_nova.sh&#58;-r&#58;S15-05-04c&#58;-b&#58;maxopt&#58;-e&#58;/cvmfs/nova.opensciencegrid.org/externals&#58;-5&#58;/cvmfs/nova.opensciencegrid.org/novasoft/slf5/novasoft&#58;-6&#58;/cvmfs/nova.opensciencegrid.org/novasoft/slf6/novasoft
-X runNovaSAM.py --hashDirs --copyOut --outTier out1&#58;reco --outTier
out2&#58;lemsum --outTier out3&#58;pidpart
nova     15518  0.3  0.0 220000 41488 ?        S 18&#58;01
0&#58;00                                  &#92;_ python
/cvmfs/nova.opensciencegrid.org/externals/NovaGridUtils/v01.44/NULL/bin/runNovaSAM.py
-c Production/fcl/prod_reco_pidpart_numi_job.fcl --hashDirs --copyOut
--outTier out1&#58;reco --outTier out2&#58;lemsum --outTier out3&#58;pidpart
/tmp/pbstmp.5164908/glide_bfhhWd/execute/dir_10607/no_xfer/ifdh_16997_5524/neardet_genie_fhc_nonswap_ndnewpos-ndfluxv08_2000_r00010812_s13_c001_FA14-10-03x.d_v1_20151119_135356.sim.overlay.daq.root
nova     15527 94.2  1.3 1384208 653076 ?      Rl 18&#58;01
2&#58;08                                      &#92;_ nova -c
prod_reco_pidpart_numi_job_neardet_genie_fhc_nonswap_ndnewpos-ndfluxv08_2000_r00010812_s13_c001_FA14-10-03x.d_v1_20151119_135356.sim.overlay.daq.fcl
--sam-application-family=nova --sam-application-version=S15-05-04c
--sam-file-type=importedSimulated --sam-data-tier=out1&#58;reco
--sam-stream-name=out1&#58;out1 --sam-data-tier=out2&#58;lemsum
--sam-stream-name=out2&#58;out1 --sam-data-tier=out3&#58;pidpart
--sam-stream-name=out3&#58;out1
/tmp/pbstmp.5164908/glide_bfhhWd/execute/dir_10607/no_xfer/ifdh_16997_5524/neardet_genie_fhc_nonswap_ndnewpos-ndfluxv08_2000_r00010812_s13_c001_FA14-10-03x.d_v1_20151119_135356.sim.overlay.daq.root

On 11/24/2015 02&#58;54 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; ------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; *Notification of Ticket Change*</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='27288.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/27288</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *Description&#58;*</font>
<font color='#7F7E6F'>&#62; Hi Doug,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Is there anyway you can try and find some of the glidein logs</font>
<font color='#7F7E6F'>&#62; associated with this period of time you observed this non-trivial CPU</font>
<font color='#7F7E6F'>&#62; usage? The logs are still not being returned to the glidein factories</font>
<font color='#7F7E6F'>&#62; after running at the site, if they are in fact running successfully.</font>
<font color='#7F7E6F'>&#62; We don&#39;t have any confirmation of glideins running properly at OSC. In</font>
<font color='#7F7E6F'>&#62; fact, during the last week, we only see that most glideins were held</font>
<font color='#7F7E6F'>&#62; at the factories and never properly submitted to OSC. I&#39;ve cleared out</font>
<font color='#7F7E6F'>&#62; these held glideins from the factories. Maybe the new ones will not go</font>
<font color='#7F7E6F'>&#62; held again.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Marty Kandes</font>
<font color='#7F7E6F'>&#62; UCSD Glidein Factory Operations</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty</font>
<font color='#7F7E6F'>&#62; Kandes 3049</font>
<font color='#7F7E6F'>&#62;</font>

--

Troy Baer
Senior HPC Systems Engineer
Ohio Supercomputer Center
<a href='http&#58;//www.osc.edu/' target='_blank' rel='nofollow'>http&#58;//www.osc.edu/</a>
</div><script type='text/javascript'>
        $('#show_1484097901').click(function() {
            $('#detail_1484097901').slideDown("normal");
            $('#show_1484097901').hide();
            $('#hide_1484097901').show();
        });
        $('#hide_1484097901').click(function() {
            $('#detail_1484097901').slideUp();
            $('#hide_1484097901').hide();
            $('#show_1484097901').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27288#1448394853'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-24T19:54:13+00:00">Nov 24, 2015 07:54 PM UTC</time><a class="anchor" name="1448394853">&nbsp;</a></div><pre>Hi Doug,

Is there anyway you can try and find some of the glidein logs associated with this period of time you observed this non-trivial CPU usage? The logs are still not being returned to the glidein factories after running at the site, if they are in fact running successfully. We don&#39;t have any confirmation of glideins running properly at OSC. In fact, during the last week, we only see that most glideins were held at the factories and never properly submitted to OSC. I&#39;ve cleared out these held glideins from the factories. Maybe the new ones will not go held again.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27288#1448393728'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-24T19:35:28+00:00">Nov 24, 2015 07:35 PM UTC</time> by <b>troy@....</b><a class="anchor" name="1448393728">&nbsp;</a></div><pre>From our end, it looks like OSG/nova jobs that have come in after
2015-11-20 12&#58;50&#58;00 EST have accrued non-trivial amounts of CPU time.

On 11/17/2015 03&#58;02 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27288#1447790525'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-17T20:02:05+00:00">Nov 17, 2015 08:02 PM UTC</time><a class="anchor" name="1447790525">&nbsp;</a></div><pre>Doug,

No problem. Let us know when you&#39;re back and have had a chance to look for some glidein logs on your end.

Thanks,

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27288#1447764117'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-17T12:41:57+00:00">Nov 17, 2015 12:41 PM UTC</time><a class="anchor" name="1447764117">&nbsp;</a></div><pre>Unfortunately I can&#39;t get the exact directory that the glidein logs will be in, since there are no glidein stdout/err logs being returned that would have the variable information set, but one place to look (besides TMPDIR) would be to check /tmp for glide_* folders, where * is a six digit alphanumeric. A lot of glidein data and logs should be in those folders.

Also, I&#39;m clearing out all of the stale held glideins again on the site, so you should start getting jobs attempting to run shortly.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='27288#1447537453'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-14T21:44:13+00:00">Nov 14, 2015 09:44 PM UTC</time><a class="anchor" name="1447537453">&nbsp;</a></div><pre>Hi,

I&#39;ve been unable to spend time on this ticket before leaving for the SC15 conference. One thing that we still need to do is change the version of the osg-wn-client software on the compute nodes. We neglected to upgrade this software when we upgrade the VO box. Version 3.2.29 is installed. Please send updates when we can expect running jobs, and the specific names of log files you would want collected.

Doug

by /DC=org/DC=cilogon/C=US/O=Ohio Technology Consortium (OH-TECH)/CN=Douglas Johnson A20836</pre></div><div class='update_description'><i onclick="document.location='27288#1447368958'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-12T22:55:58+00:00">Nov 12, 2015 10:55 PM UTC</time><a class="anchor" name="1447368958">&nbsp;</a></div><pre>Doug,

You should be able to find the glidein logs on the worker nodes in the work_dir=&#34;TMPDIR&#34;, where TMPDIR is a path environment variable you all probably setup on your end originally. I suspect it&#39;s whereever your found the original stderr/stdout files you sent us at the beginning of this ticket. Can you try and dig up a few more, more recent ones for us?

Thanks,

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27288#1447368025'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-12T22:40:25+00:00">Nov 12, 2015 10:40 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1447368025">&nbsp;</a></div><pre>Marty,

In that case, where can Doug find the glidein logs? Presumably on the worker nodes but where?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='27288#1447353080'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-12T18:31:20+00:00">Nov 12, 2015 06:31 PM UTC</time><a class="anchor" name="1447353080">&nbsp;</a></div><pre>Hi Brian,

Yes and no. The problem has &#39;disappeared&#39; for us in the sense that glidein logs are no longer returned to the factories now. So what we really need is someone look at the glidein logs locally at OSC to determine what might be causing the problem, which now seems to have a similar profile to the possible GRAM/globus-related problem previously observed at Hyak (<a href='26794.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/26794</a>).

If you&#39;re interested in other sites exhibiting the &#39;Not enough arguments&#39; error, I&#39;m compiling a list here --- <a href='https&#58;//jira.opensciencegrid.org/browse/GFACTOPS-765' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/GFACTOPS-765</a> --- as I come across them.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27288#1447275482'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-11T20:58:02+00:00">Nov 11, 2015 08:58 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1447275482">&nbsp;</a></div><pre>Doug&#58; Could you attach the output of osg-system-profiler?

Marty&#58; It&#39;s a little hard to follow this ticket, has the &#39;Not enough arguments&#39; error gone away? Is the problem now that glidein startd&#39;s are not reporting their status properly back to the SDSC factory?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='27288#1447191275'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-10T21:34:35+00:00">Nov 10, 2015 09:34 PM UTC</time><a class="anchor" name="1447191275">&nbsp;</a></div><pre>Hi all,

As Troy mentioned earlier, the failure of OSG glideins to authenticate properly at OSC is likely due to their DN not being in the grid-mapfile. Has this DN been added?

As for the Nova-specific Fermilab glideins, it looks like we may have encountered a GRAM-related problem also seen at another site previously. Here, the symptoms are that user jobs and glideins appear to run fine when viewed from the site&#39;s perspective, but the glideins fail to update the factories with their progress correctly. If I recall correctly, this leads to the factory not requesting the appropriate amount of glideins at a site. I&#39;ll alert the OSG software folks about this as we&#39;ve been attempting to reproduce the problem elsewhere.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27288#1447120355'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-10T01:52:35+00:00">Nov 10, 2015 01:52 AM UTC</time><a class="anchor" name="1447120355">&nbsp;</a></div><pre>Hi,

We are seeing a mix of what appear to be successful jobs, but have seen some failed jobs on the 6th.  New attachment named stdout-20151106.txt with the error.

Doug

by /DC=org/DC=cilogon/C=US/O=Ohio Technology Consortium (OH-TECH)/CN=Douglas Johnson A20836</pre></div><div class='update_description'><i onclick="document.location='27288#1447115315'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-10T00:28:35+00:00">Nov 10, 2015 12:28 AM UTC</time><a class="anchor" name="1447115315">&nbsp;</a></div><pre>The Nova glideins came from the SDSC factory (and the jobs did finish fine)&#58;

005 (3320115.6349.000) 11/07 00&#58;17&#58;43 Job terminated.
(1) Normal termination (return value 0)
Usr 0 14&#58;33&#58;35, Sys 0 00&#58;00&#58;26  -  Run Remote Usage
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Run Local Usage
Usr 0 14&#58;33&#58;35, Sys 0 00&#58;00&#58;26  -  Total Remote Usage
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Total Local Usage
5311732  -  Run Bytes Sent By Job
24369  -  Run Bytes Received By Job
5311732  -  Total Bytes Sent By Job
24369  -  Total Bytes Received By Job
Partitionable Resources &#58;    Usage  Request Allocated
Cpus                 &#58;                 1         1
Disk (KB)            &#58;  4460720  4000000 819007892
Memory (MB)          &#58;      928     2000      2500
...
028 (3320115.6349.000) 11/07 00&#58;17&#58;43 Job ad information event triggered.
SentBytes = 5311732.0
JOB_GLIDEIN_Name = &#34;gfactory_instance&#34;
TerminatedNormally = true
ReturnValue = 0
JOB_GLIDEIN_ClusterId = &#34;3234446&#34;
JOB_GLIDEIN_SiteWMS = &#34;PBS&#34;
EventTypeNumber = 28
Subproc = 0
ReceivedBytes = 24369.0
JOB_GLIDEIN_SiteWMS_Slot = &#34;Unknown&#34;
MyType = &#34;JobTerminatedEvent&#34;
TriggerEventTypeName = &#34;ULOG_JOB_TERMINATED&#34;
TotalRemoteUsage = &#34;Usr 0 14&#58;33&#58;35, Sys 0 00&#58;00&#58;26&#34;
JOB_Site = &#34;OSC&#34;
JOB_GLIDEIN_Site = &#34;OSC&#34;
Proc = 6349
EventTime = &#34;2015-11-07T00&#58;17&#58;43&#34;
<div id='show_1982824849' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1982824849'>TotalSentBytes = 5311732.0
TriggerEventTypeNumber = 5
TotalLocalUsage = &#34;Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00&#34;
JOB_GLIDEIN_Schedd = &#34;schedd_glideins5@....&#34;
Cluster = 3320115
RunLocalUsage = &#34;Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00&#34;
JOB_GLIDEIN_Entry_Name = &#34;Nova_US_OSC_osg&#34;
JOB_GLIDEIN_ProcId = &#34;0&#34;
JOB_GLIDEIN_Factory = &#34;SDSC&#34;
JOB_GLIDEIN_SiteWMS_Queue = &#34;serial&#34;
RunRemoteUsage = &#34;Usr 0 14&#58;33&#58;35, Sys 0 00&#58;00&#58;26&#34;
JOB_GLIDEIN_SiteWMS_JobId = &#34;5021481.oak-batch.osc.edu&#34;
TotalReceivedBytes = 24369.0

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kevin Retzke 3130
</div><script type='text/javascript'>
        $('#show_1982824849').click(function() {
            $('#detail_1982824849').slideDown("normal");
            $('#show_1982824849').hide();
            $('#hide_1982824849').show();
        });
        $('#hide_1982824849').click(function() {
            $('#detail_1982824849').slideUp();
            $('#hide_1982824849').hide();
            $('#show_1982824849').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27288#1447114025'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-10T00:07:05+00:00">Nov 10, 2015 12:07 AM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1447114025">&nbsp;</a></div><pre>Was the problem fixed?
Messages are a bit confusing. From one side Keving seems to run successfully from the other the OSG factory glideins seem to fail authorization. Is Kevin using a different factory?
Thanks, Marco</pre></div><div class='update_description'><i onclick="document.location='27288#1446849195'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-06T22:33:15+00:00">Nov 6, 2015 10:33 PM UTC</time><a class="anchor" name="1446849195">&nbsp;</a></div><pre>The jobs are still running; I just did a condor_ssh_to_job on one and it&#39;s chugging along.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kevin Retzke 3130</pre></div><div class='update_description'><i onclick="document.location='27288#1446848483'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-06T22:21:23+00:00">Nov 6, 2015 10:21 PM UTC</time> by <b>troy@....</b><a class="anchor" name="1446848483">&nbsp;</a></div><pre>I&#39;m not sure if this is related to the auth problem Marty mentioned, but
we&#39;ve seen a lot (&#62;1700) or errors like the following today&#58;

PID&#58; 19695 -- Failure&#58; globus_gss_assist_gridmap() failed
authorization. globus_gss_assist&#58; Gridmap lookup failure&#58; Could not map
/DC=com/DC=DigiCert-Grid/O=Open Science
Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu

Indeed, that DN does not appear in the grid-mapfile on our OSG host&#58;

root@osg&#58;~# grep &#34;/DC=com/DC=DigiCert-Grid/O=Open Science
Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu&#34;
/etc/grid-security/grid-mapfile
[...nothing...]

I&#39;m not sure if that&#39;s indicative of a problem or not.

--Troy

On 11/06/2015 04&#58;59 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; ------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; *Notification of Ticket Change*</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='27288.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/27288</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *Description&#58;*</font>
<font color='#7F7E6F'>&#62; Marco et al.,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; OSG glideins are being held at the factory due to an authentication</font>
<font color='#7F7E6F'>&#62; problem [1].</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Marty Kandes</font>
<font color='#7F7E6F'>&#62; UCSD Glidein Factory Operations</font>
<font color='#7F7E6F'>&#62;</font>
<div id='show_507129093' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_507129093'><font color='#7F7E6F'>&#62; [1]</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 2529089.6 feosgflock 11/6 20&#58;39 Globus error 7&#58; authentication with</font>
<font color='#7F7E6F'>&#62; the remote server failed</font>
<font color='#7F7E6F'>&#62; 2529089.8 feosgflock 11/6 20&#58;39 Globus error 7&#58; authentication with</font>
<font color='#7F7E6F'>&#62; the remote server failed</font>
<font color='#7F7E6F'>&#62; 2529129.1 feosgflock 11/6 21&#58;18 Globus error 7&#58; authentication with</font>
<font color='#7F7E6F'>&#62; the remote server failed</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty</font>
<font color='#7F7E6F'>&#62; Kandes 3049</font>
<font color='#7F7E6F'>&#62;</font>

--

Troy Baer
Senior HPC Systems Engineer
Ohio Supercomputer Center
<a href='http&#58;//www.osc.edu/' target='_blank' rel='nofollow'>http&#58;//www.osc.edu/</a>
</div><script type='text/javascript'>
        $('#show_507129093').click(function() {
            $('#detail_507129093').slideDown("normal");
            $('#show_507129093').hide();
            $('#hide_507129093').show();
        });
        $('#hide_507129093').click(function() {
            $('#detail_507129093').slideUp();
            $('#hide_507129093').hide();
            $('#show_507129093').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27288#1446847394'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-06T22:03:14+00:00">Nov 6, 2015 10:03 PM UTC</time><a class="anchor" name="1446847394">&nbsp;</a></div><pre>Kevin,

Did your Nova jobs complete successfully?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27288#1446847169'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-06T21:59:29+00:00">Nov 6, 2015 09:59 PM UTC</time><a class="anchor" name="1446847169">&nbsp;</a></div><pre>Marco et al.,

OSG glideins are being held at the factory due to an authentication problem [1].

Marty Kandes
UCSD Glidein Factory Operations

[1]

2529089.6   feosgflock     11/6  20&#58;39 Globus error 7&#58; authentication with the remote server failed
2529089.8   feosgflock     11/6  20&#58;39 Globus error 7&#58; authentication with the remote server failed
2529129.1   feosgflock     11/6  21&#58;18 Globus error 7&#58; authentication with the remote server failed

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27288#1446825317'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-06T15:55:17+00:00">Nov 6, 2015 03:55 PM UTC</time><a class="anchor" name="1446825317">&nbsp;</a></div><pre>I see 20 nova jobs running at OSC. Looks like they&#39;re running fine. I&#39;ll check later today after some should have finished.

[root@fifebatch1 ~]# condor_q -global -run -constraint &#39;match_glidein_site == &#34;OSC&#34;&#39;

-- Schedd&#58; fifebatch1.fnal.gov &#58; &#60;131.225.67.102&#58;9615?addrs=131.225.67.102-9615&noUDP&sock=5418_fe92&#62;
ID          OWNER            SUBMITTED     RUN_TIME HOST(S)
3320115.6349 novapro        11/1  22&#58;45   0+01&#58;15&#58;37 glidein_6304_39232620@....
3320115.6350 novapro        11/1  22&#58;45   0+01&#58;15&#58;37 glidein_24161_127665226@....
3320115.6351 novapro        11/1  22&#58;45   0+01&#58;15&#58;37 glidein_4109_377560656@....
3320115.6352 novapro        11/1  22&#58;45   0+01&#58;15&#58;37 glidein_3991_267024100@....
3320115.6353 novapro        11/1  22&#58;45   0+01&#58;15&#58;36 glidein_26036_694103520@....
3320115.6354 novapro        11/1  22&#58;45   0+01&#58;15&#58;36 glidein_4318_555792800@....
3320115.6355 novapro        11/1  22&#58;45   0+01&#58;15&#58;36 glidein_25569_44532554@....
3320115.6356 novapro        11/1  22&#58;45   0+01&#58;15&#58;36 glidein_4229_78867672@....
3320115.6357 novapro        11/1  22&#58;45   0+01&#58;15&#58;36 glidein_24162_632328475@....
3320115.6358 novapro        11/1  22&#58;45   0+01&#58;15&#58;36 glidein_22742_40579404@....
3320115.6359 novapro        11/1  22&#58;45   0+01&#58;15&#58;33 glidein_29525_872434150@....
3320115.6360 novapro        11/1  22&#58;45   0+01&#58;15&#58;36 glidein_27392_56514680@....
3320115.6361 novapro        11/1  22&#58;45   0+01&#58;15&#58;35 glidein_4726_112252800@....
3320115.6362 novapro        11/1  22&#58;45   0+01&#58;15&#58;35 glidein_22638_810925536@....
3320115.6363 novapro        11/1  22&#58;45   0+01&#58;15&#58;35 glidein_26035_414303848@....
3320115.6364 novapro        11/1  22&#58;45   0+01&#58;15&#58;35 glidein_32692_110966837@....
3320115.6365 novapro        11/1  22&#58;45   0+01&#58;15&#58;35 glidein_22472_148323987@....
3320115.6366 novapro        11/1  22&#58;45   0+01&#58;15&#58;35 glidein_22473_189983650@....
3320115.6394 novapro        11/1  22&#58;45   0+00&#58;48&#58;50 glidein_6226_45024500@....
3320115.6397 novapro        11/1  22&#58;45   0+00&#58;47&#58;50 glidein_4186_198896256@....
[root@fifebatch1 ~]# grep 3320115&#92;.6349 /var/log/condor/EventLog
001 (3320115.6349.000) 11/06 08&#58;36&#58;26 Job executing on host&#58; &#60;10.25.4.15&#58;54687?CCBID=131.225.67.218&#58;9625%3faddrs%3d131.225.67.218-9625#1326402%20131.225.67.219&#58;9625%3faddrs%3d131.225.67.219-9625#1325329&noUDP&#62;
006 (3320115.6349.000) 11/06 08&#58;36&#58;34 Image size of job updated&#58; 10
006 (3320115.6349.000) 11/06 08&#58;41&#58;34 Image size of job updated&#58; 164552
006 (3320115.6349.000) 11/06 08&#58;51&#58;35 Image size of job updated&#58; 2182304
006 (3320115.6349.000) 11/06 08&#58;56&#58;36 Image size of job updated&#58; 2195068
006 (3320115.6349.000) 11/06 09&#58;01&#58;39 Image size of job updated&#58; 2200668
006 (3320115.6349.000) 11/06 09&#58;06&#58;40 Image size of job updated&#58; 2213216
006 (3320115.6349.000) 11/06 09&#58;16&#58;41 Image size of job updated&#58; 2216784
<div id='show_1219794768' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1219794768'>006 (3320115.6349.000) 11/06 09&#58;21&#58;41 Image size of job updated&#58; 2216784
006 (3320115.6349.000) 11/06 09&#58;31&#58;42 Image size of job updated&#58; 2237152

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kevin Retzke 3130
</div><script type='text/javascript'>
        $('#show_1219794768').click(function() {
            $('#detail_1219794768').slideDown("normal");
            $('#show_1219794768').hide();
            $('#hide_1219794768').show();
        });
        $('#hide_1219794768').click(function() {
            $('#detail_1219794768').slideUp();
            $('#hide_1219794768').hide();
            $('#show_1219794768').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27288#1446824391'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-06T15:39:51+00:00">Nov 6, 2015 03:39 PM UTC</time><a class="anchor" name="1446824391">&nbsp;</a></div><pre>All,

We have jobs running, and they are actually executing the &#39;nova&#39; executable. This is in contrast to what we were seeing before the upgrade with the glidein_startup.sh error. Please let us know whether these jobs look OK from an external perspective.

Doug

by /DC=org/DC=cilogon/C=US/O=Ohio Technology Consortium (OH-TECH)/CN=Douglas Johnson A20836</pre></div><div class='update_description'><i onclick="document.location='27288#1446823285'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-06T15:21:25+00:00">Nov 6, 2015 03:21 PM UTC</time><a class="anchor" name="1446823285">&nbsp;</a></div><pre>Hi,

The upgrade is complete, please send glideins.

Doug

by /DC=org/DC=cilogon/C=US/O=Ohio Technology Consortium (OH-TECH)/CN=Douglas Johnson A20836</pre></div><div class='update_description'><i onclick="document.location='27288#1446746182'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-05T17:56:22+00:00">Nov 5, 2015 05:56 PM UTC</time> by <b>djohnson@....</b><a class="anchor" name="1446746182">&nbsp;</a></div><pre>One data point that might be useful that we stumbled on while trying
to install the CA changes that were just announced; we&#39;re still at
osg-version-3.1.46-1 which is apparently a dead-end.  Since glideins
are broken we will upgrade to 3.3, perhaps we should table testing
until that&#39;s finished.  I&#39;ll update the ticket when the upgrade is
finished.

Doug

On Thu, 05 Nov 2015 11&#58;46&#58;00 -0500,
Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [1  &#60;text/plain; utf-8 (quoted-printable)&#62;]</font>
<font color='#7F7E6F'>&#62; [2  &#60;text/html; utf-8 (quoted-printable)&#62;]</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27288#1446742005'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-05T16:46:45+00:00">Nov 5, 2015 04:46 PM UTC</time><a class="anchor" name="1446742005">&nbsp;</a></div><pre>Hi Marco,

I&#39;ve enabled OSGVO at OSC.

Marty Kandes
UCSD Glidein Factory Operations

P.S. Yes, the &#39;Not enough arguments&#39; error has been a bit odd. When I saw the problem before, it seemed to occur at sites with an already existing underlying problem. There was one very clear example of this&#58; a known site with a problem before we upgraded glideinWMS, then after the upgrade the original problem immediately became &#39;Not enough arguments&#39;. I&#39;ll go back and check my notes on the specifics here when I get a chance.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27288#1446679951'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-04T23:32:31+00:00">Nov 4, 2015 11:32 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1446679951">&nbsp;</a></div><pre>Hi Marty,
could you re-enable OSG and send there some glideins?
It seems strange that &#34;Not enough arguments&#34; is appearing here and there. Being in the glidein_startup.sh script should affect all glideins.
I have also a patch attached to the redmine ticket (<a href='https&#58;//cdcvs.fnal.gov/redmine/issues/10762' target='_blank' rel='nofollow'>https&#58;//cdcvs.fnal.gov/redmine/issues/10762</a>) but I&#39;d wait first to see how the jobs at OSC are running.
Thank you,
Marco</pre></div><div class='update_description'><i onclick="document.location='27288#1446673367'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-04T21:42:47+00:00">Nov 4, 2015 09:42 PM UTC</time><a class="anchor" name="1446673367">&nbsp;</a></div><pre>Hi,

No jobs have been run since 2015-10-31.  If we can get some jobs submitted during the day we can try to collect these files during execution. These jobs run for about 20 minutes to failing, so there is a reasonable window to collect the file.

Doug

by /DC=org/DC=cilogon/C=US/O=Ohio Technology Consortium (OH-TECH)/CN=Douglas Johnson A20836</pre></div><div class='update_description'><i onclick="document.location='27288#1446672263'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-04T21:24:23+00:00">Nov 4, 2015 09:24 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1446672263">&nbsp;</a></div><pre>Thank you Doug,
the file I need is the one invoked by this script&#58;
/nfs/17/nova/.globus/.gass_cache/local/md5/da/ce1b3b754bc2e12f318fe5f5a335a3/md5/96/b8b66f54614b2f5e73994fb323bb96/data

Probably that specific one has been deleted. If you have a job running, you can see the last line in the scheduler_pbs_job_script for the updated location of the startup script.
It would be great if you can attach it and add in the message the command line used (e.g. /nfs/17/nova/.globus/.gass_cache/local/md5/da/ce1b3b754bc2e12f318fe5f5a335a3/md5/96/b8b66f54614b2f5e73994fb323bb96/data &#34;-v&#34; &#34;std&#34; &#34;-name&#34; &#34;gfactory_instance&#34; ... &#34;-cluster&#34; &#34;2517720&#34; &#34;-subcluster&#34; &#34;7&#34;  &#60;/dev/null) so that I can connect it to the stdout/err in the factory (or if you can attach its stdout/err).
Thank you,
Marco</pre></div><div class='update_description'><i onclick="document.location='27288#1446663911'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-04T19:05:11+00:00">Nov 4, 2015 07:05 PM UTC</time><a class="anchor" name="1446663911">&nbsp;</a></div><pre>Hi,

I don&#39;t see the glidein_startup.sh in the files I have available. I do have the batch script that was executed named scheduler_pbs_job_script, see attachment (with .txt suffix to get around upload restriction.)

Doug

by /DC=org/DC=cilogon/C=US/O=Ohio Technology Consortium (OH-TECH)/CN=Douglas Johnson A20836</pre></div><div class='update_description'><i onclick="document.location='27288#1446594583'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-03T23:49:43+00:00">Nov 3, 2015 11:49 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1446594583">&nbsp;</a></div><pre>I&#39;m adding here and to the gwms ticket a patch to improve the error message.</pre></div><div class='update_description'><i onclick="document.location='27288#1446594007'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-03T23:40:07+00:00">Nov 3, 2015 11:40 PM UTC</time><a class="anchor" name="1446594007">&nbsp;</a></div><pre>Thanks, Marco.

Yeah, I&#39;ve been seeing the &#39;Not enough arguments&#39; error [1] pop up here and there again in the last month or so. But since It hasn&#39;t been as wide spread as it was in September after that glideinWMS upgrade, I haven&#39;t spent a lot of time to investigating. This is the 3rd entry where I&#39;ve seen the problem. In some of these other cases, it doesn&#39;t appear to affect all factories. Here, in this case, there is also the associated hold reason [2] given for the held glideins at the factory. I&#39;m not sure what the source of the problem is, but I suspect globus/GRAM.

Marty Kandes
UCSD Glidein Factory Operations

[1]

Sat Oct 31 11&#58;35&#58;26 EDT 2015 Not enough arguments in fetch_file main error_gen.sh error_gen.faulAe.sh regular 0 TRUE FALSE

[2]

3219131.9   fefermifife    11/1  03&#58;06 Globus error 31&#58; the job manager failed to cancel the job as requested

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='27288#1446592403'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-03T23:13:23+00:00">Nov 3, 2015 11:13 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1446592403">&nbsp;</a></div><pre>I opened a support ticket in GlideinWMS redmine&#58; <a href='https&#58;//cdcvs.fnal.gov/redmine/issues/10762' target='_blank' rel='nofollow'>https&#58;//cdcvs.fnal.gov/redmine/issues/10762</a></pre></div><div class='update_description'><i onclick="document.location='27288#1446592239'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-03T23:10:39+00:00">Nov 3, 2015 11:10 PM UTC</time><a class="anchor" name="1446592239">&nbsp;</a></div><pre>Could you attach the glidein_startup,sh script that was run? This might be an issue we need to bring up with the GlideinWMS developers.

I&#39;m CCing the factory support, they may have some insight as well.

Thanks,
Kevin

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kevin Retzke 3130</pre></div><div class='update_description'><i onclick="document.location='27288#1446498669'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-02T21:11:09+00:00">Nov 2, 2015 09:11 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1446498669">&nbsp;</a></div><pre>Hi,

We&#39;re experiencing glidein failures at OSC. The output from a failed job is attached as the file named &#39;stdout&#39;. There are no apparent errors in the stdout of the job, that file is attached as well. Please let us know if this looks like a local problem to OSC, or a remote problem. If it&#39;s local to OSC, some guidance on where to start looking would be appreciated.

Doug

by /DC=org/DC=cilogon/C=US/O=Ohio Technology Consortium (OH-TECH)/CN=Douglas Johnson A20836</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F27288">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
