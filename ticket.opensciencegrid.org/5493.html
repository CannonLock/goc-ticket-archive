<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[5493] Bhist jobs creating a load problem</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=5493" method="post">
<div class="page-header">
    <h3><span class="muted">5493</span> / Bhist jobs creating a load problem</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Alan Sill</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">review</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-11-05</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/5493", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='5493#1227298871'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-11-21T20:21:11+00:00">Nov 21, 2008 08:21 PM UTC</time> by <b>VDT</b><a class="anchor" name="1227298871">&nbsp;</a></div><pre>What is the Condor ticket number?

-alain

On Nov 21, 2008, at 11&#58;33 AM, osg@.... via RT
wrote&#58;
<font color='#7F7E6F'>&#62; <a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?id=4152' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?id=4152</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5493#1227288647'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-11-21T17:30:47+00:00">Nov 21, 2008 05:30 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1227288647">&nbsp;</a></div><pre>This issue can be tracked in the VDT ticket
<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&amp' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&amp</a>;pass=guest&amp;id=4152. A condor
ticket has also been opened. Closing the GOC ticket.</pre></div><div class='update_description'><i onclick="document.location='5493#1225390304'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-30T18:11:44+00:00">Oct 30, 2008 06:11 PM UTC</time> by <b>echism</b><a class="anchor" name="1225390304">&nbsp;</a></div><pre>Alain,

Are there any updates on this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='5493#1224699346'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-22T18:15:46+00:00">Oct 22, 2008 06:15 PM UTC</time> by <b>echism</b><a class="anchor" name="1224699346">&nbsp;</a></div><pre>Alain,

Are there any updates on this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='5493#1224112848'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-15T23:20:48+00:00">Oct 15, 2008 11:20 PM UTC</time> by <b>echism</b><a class="anchor" name="1224112848">&nbsp;</a></div><pre>Alain,

Are there any updates on this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='5493#1223502550'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-08T21:49:10+00:00">Oct 8, 2008 09:49 PM UTC</time> by <b>VDT</b><a class="anchor" name="1223502550">&nbsp;</a></div><pre>Let me check with the Condor-G developers and see what I can learn.

Thanks,
-alain

-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=4152&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=4152&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='5493#1223495105'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-08T19:45:05+00:00">Oct 8, 2008 07:45 PM UTC</time> by <b>echism</b><a class="anchor" name="1223495105">&nbsp;</a></div><pre>Alain,

This ticket is gigantic, but here goes....</pre></div><div class='update_description'><i onclick="document.location='5493#1223494630'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-08T19:37:10+00:00">Oct 8, 2008 07:37 PM UTC</time> by <b>VDT</b><a class="anchor" name="1223494630">&nbsp;</a></div><pre>We&#39;re happy to ook at this&#58; Can you give us a little bit of
background? Perhaps the ticket that lead up to this request?

Thanks,
-alain

-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

<font color='#7F7E6F'>&#62; ---------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5493#1223492830'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-08T19:07:10+00:00">Oct 8, 2008 07:07 PM UTC</time> by <b>VDT</b><a class="anchor" name="1223492830">&nbsp;</a></div><pre>Greetings from the VDT support system!

This message was generated automatically in response to the creation of a
ticket regarding&#58;

Open Science Grid&#58; Bhist jobs creating a load problem ISSUE=5493 PROJ=71

Your original request is copied below for reference.

There is no need to reply to this message right now -- someone from the VDT
team will respond to you as soon as possible.  If you wish to view your
support ticket online, visit&#58;

<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=4152' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=4152</a>

Your ticket has been assigned an ID as follows&#58;

[vdt-support #4152]

Please include the ticket ID in the subject line of all future email about
this issue.  To do so, you may reply to this message.

Thank you for your interest in the VDT.

vdt-support@....

-------------------------------------------------------------------------
[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='5493#1223492606'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-08T19:03:26+00:00">Oct 8, 2008 07:03 PM UTC</time> by <b>echism</b><a class="anchor" name="1223492606">&nbsp;</a></div><pre>VDT,

Please open such a ticket with your Condor team as described below.

In recent months the condor team has done a lot of work to
make the condor-G grid monitor poll PBS resources in a smarter
way, not polling every dead and deleted job once per minute as it used
to do. If you open a ticket they may be able to make similar
advances on the LSF polling mechanism.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='5493#1222978870'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-02T20:21:10+00:00">Oct 2, 2008 08:21 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1222978870">&nbsp;</a></div><pre>Steve&#39;s observation agrees with what we see.  Can I ask the GOC to
either forward this ticket to the Condor team, or suggest what we
should do to pursue this?

Thanks,
Alan</pre></div><div class='update_description'><i onclick="document.location='5493#1222978510'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-02T20:15:10+00:00">Oct 2, 2008 08:15 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1222978510">&nbsp;</a></div><pre>It should be noted that on the day that Alan reported this ticket,
it corresponded to a outage of one of the samgrid forwarding
nodes at Fermilab.. after being down for a couple days the node
was brought back up and tried to contact the many jobs that it
thought it still had out there on the grid.  This could
have been a reason for the high load that was observed on Sep. 12.

In recent months the condor team has done a lot of work to
make the condor-G grid monitor poll PBS resources in a smarter
way, not polling every dead and deleted job once per minute as it used
to do.  If you open a ticket they may be able to make similar
advances on the LSF polling mechanism.

Steve Timm

On Thu, 2 Oct 2008, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5493#1222977790'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-02T20:03:10+00:00">Oct 2, 2008 08:03 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1222977790">&nbsp;</a></div><pre>According to what we can see here, the bhist call appears to be
lsf.pm.  See examples below.

I&#39;d have to look closer into lsf.pm to find out why teh samgrid jobs
are exercising this so frequently...

[root@antaeus samgrid]# grep -ai bhist *log
gram_job_mgr_10022.log&#58;Mon Sep  1 02&#58;45&#58;22 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10022.log&#58;Mon Sep  1 02&#58;45&#58;25 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_10071.log&#58;Mon Sep  1 02&#58;26&#58;06 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10071.log&#58;Mon Sep  1 02&#58;26&#58;08 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_10084.log&#58;Wed Jul 23 14&#58;47&#58;50 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10084.log&#58;Wed Jul 23 14&#58;47&#58;52 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_10203.log&#58;Mon Sep  1 02&#58;19&#58;07 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10203.log&#58;Mon Sep  1 02&#58;19&#58;08 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_10291.log&#58;Fri Jul 25 07&#58;08&#58;19 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10291.log&#58;Fri Jul 25 07&#58;08&#58;19 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_10295.log&#58;Fri Jul 25 07&#58;38&#58;23 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10295.log&#58;Fri Jul 25 07&#58;38&#58;24 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_10314.log&#58;Wed Jul  2 15&#58;45&#58;47 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10314.log&#58;Wed Jul  2 15&#58;45&#58;48 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
<div id='show_2139911023' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2139911023'>gram_job_mgr_1033.log&#58;Wed Jul 23 20&#58;31&#58;12 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_1033.log&#58;Wed Jul 23 20&#58;31&#58;13 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_10576.log&#58;Wed Jul 23 20&#58;38&#58;51 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10576.log&#58;Wed Jul 23 20&#58;38&#58;52 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_11058.log&#58;Mon Sep  1 02&#58;47&#58;10 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11058.log&#58;Mon Sep  1 02&#58;47&#58;11 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_11080.log&#58;Wed Jul 23 15&#58;03&#58;08 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11080.log&#58;Wed Jul 23 15&#58;03&#58;10 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_11112.log&#58;Sat Jul 26 07&#58;42&#58;37 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11112.log&#58;Sat Jul 26 07&#58;42&#58;38 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;12&#58;03 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;12&#58;34 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;13&#58;06 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;13&#58;37 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;14&#58;09 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;14&#58;40 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;15&#58;12 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;15&#58;43 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist

... etc.

[root@antaeus samgrid]# cd /usr/local/grid/globus
[root@antaeus globus]# find . -type f -exec grep -i &#34;is not found,
running&#34; {} /dev/null &#92;;
./lib/perl/Globus/GRAM/JobManager/lsf.pm&#58;        $self-&#62;log(&#34;bjobs rc
is 255 == Job &#60;123&#62; is not found, running bhist&#34;);
</div><script type='text/javascript'>
        $('#show_2139911023').click(function() {
            $('#detail_2139911023').slideDown("normal");
            $('#show_2139911023').hide();
            $('#hide_2139911023').show();
        });
        $('#hide_2139911023').click(function() {
            $('#detail_2139911023').slideUp();
            $('#hide_2139911023').hide();
            $('#show_2139911023').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5493#1222975990'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-02T19:33:10+00:00">Oct 2, 2008 07:33 PM UTC</time> by <b>Joel Snow</b><a class="anchor" name="1222975990">&nbsp;</a></div><pre>Hi,

this thread has been discussed by Samgrid experts. They don&#39;t know where
the call to bhist is occurring, but they are confident it is not in any
dzero/samgrid code.  What about the LSF jobmanager or grid monitor?  Dzero
has run on another LSF site apparently without this problem as no
complaints were ever registered, and there hundreds of jobs were running
simultaneously, not the 10&#39;s that run at TTU.  So in sum there is no bhist
in Dzero code and the problem does not appear reproducable elsewhere.

joel

On Thu, 2 Oct 2008, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5493#1222974675'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-02T19:11:15+00:00">Oct 2, 2008 07:11 PM UTC</time> by <b>echism</b><a class="anchor" name="1222974675">&nbsp;</a></div><pre>Joel

Could you answer Alan&#39;s question please?
---------------------------------
We are trying to determine why the Dzero jobs seem to invoke bhist, and
reduce the overall load on the cluster head node if possible.
---------------------------------

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='5493#1222458670'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-26T19:51:10+00:00">Sep 26, 2008 07:51 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1222458670">&nbsp;</a></div><pre>LSF is not sandboxed on our site.  VOs are encouraged to clean up
after each job.

This, however, was not the primary thrust of this ticket.  We are
trying to determine why the Dzero jobs seem to invoke bhist, and
reduce the overall load on the cluster head node if possible.

Alan</pre></div><div class='update_description'><i onclick="document.location='5493#1222458365'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-26T19:46:05+00:00">Sep 26, 2008 07:46 PM UTC</time> by <b>echism</b><a class="anchor" name="1222458365">&nbsp;</a></div><pre>Alan,

Joel had asked&#58;
-----------------
Does not LSF clean up the working directory when the job is over? We run
on another LSF installation at grid1.oscer.ou.edu and there has not been a
problem with directory clean up.
-----------------

Please respond.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='5493#1222192811'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-23T18:00:11+00:00">Sep 23, 2008 06:00 PM UTC</time> by <b>Joel Snow</b><a class="anchor" name="1222192811">&nbsp;</a></div><pre>Hi Alan,

Does not LSF clean up the working directory when the job is over? We run
on another LSF installation at grid1.oscer.ou.edu and there has not been a
problem with directory clean up.

joel

On Tue, 23 Sep 2008, Alan Sill wrote&#58;

<font color='#7F7E6F'>&#62;&#62; Samgrid developers think this might be a</font>
<font color='#7F7E6F'>&#62;&#62; mis-mapping of some other VO to a samgrid user.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Looking in the gram_job_manager file for a recent job, I see&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; My arguments&#58; jim_rapper.sh</font>
<font color='#7F7E6F'>&#62; --executab</font>
<font color='#7F7E6F'>&#62; le=mc_sam_rapper.sh --monitor</font>
<font color='#7F7E6F'>&#62; --jobFileSet=sg_p17.09.08-v2_d0r07-09-10_cfv01-01-</font>
<font color='#7F7E6F'>&#62; 00 --jobFileSetId=1939684  --minBiasDatasetId=502091</font>
<font color='#7F7E6F'>&#62; --minBiasDataset=Zerobias_</font>
<font color='#7F7E6F'>&#62; p17_06_03MC_set1 --d0ReleaseVersion=p17.09.08 --ppfile=ppfile</font>
<font color='#7F7E6F'>&#62; --requestId=91953</font>
<font color='#7F7E6F'>&#62; --origin=d0mino03.fnal.gov --numEvents=25000 --eventsPerFile=250</font>
<font color='#7F7E6F'>&#62; --producedForNa</font>
<font color='#7F7E6F'>&#62; me=mackin --group=dzero</font>
<font color='#7F7E6F'>&#62; --monitor-directory=snow_d0mino03.fnal.gov_221654_19987*</font>
<font color='#7F7E6F'>&#62; --monitor-interval=180 --monitor-bootstrap-time=180</font>
<font color='#7F7E6F'>&#62; sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; Current Working</font>
<font color='#7F7E6F'>&#62; host&#58;compute-10-27.loc</font>
<font color='#7F7E6F'>&#62; al</font>
<font color='#7F7E6F'>&#62; sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; Current Working</font>
<font color='#7F7E6F'>&#62; directory&#58;/state/parti</font>
<font color='#7F7E6F'>&#62; tion1/samgrid_temp_dir.compute-10-27.local.5978</font>
<font color='#7F7E6F'>&#62; sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; Content of this directory&#58;</font>
<div id='show_1713567055' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1713567055'><font color='#7F7E6F'>&#62; total 4936</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Also I see that the samgrid directory is accumulating a LOT of old leftover</font>
<font color='#7F7E6F'>&#62; files.  A cleanup process would be good.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Perhaps we should add Joel Snow to this ticket?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The grid manager guess seems accurate.  Here is a snapshot of some current</font>
<font color='#7F7E6F'>&#62; samgrid processes&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [root@antaeus ~]# ps -fwww -u samgrid</font>
<font color='#7F7E6F'>&#62; UID        PID  PPID  C STIME TTY          TIME CMD</font>
<font color='#7F7E6F'>&#62; samgrid   3258     1  0 Sep12 ?        00&#58;00&#58;46 globus-job-manager -conf</font>
<font color='#7F7E6F'>&#62; /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type lsf -rdn</font>
<font color='#7F7E6F'>&#62; jobmanager-lsf -machine-type unknown -publish-jobs</font>
<font color='#7F7E6F'>&#62; samgrid   3259     1  0 Sep12 ?        00&#58;00&#58;45 globus-job-manager -conf</font>
<font color='#7F7E6F'>&#62; /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type lsf -rdn</font>
<font color='#7F7E6F'>&#62; jobmanager-lsf -machine-type unknown -publish-jobs</font>
<font color='#7F7E6F'>&#62; samgrid   3260     1  0 Sep12 ?        00&#58;00&#58;45 globus-job-manager -conf</font>
<font color='#7F7E6F'>&#62; /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type lsf -rdn</font>
<font color='#7F7E6F'>&#62; jobmanager-lsf -machine-type unknown -publish-jobs</font>
<font color='#7F7E6F'>&#62; samgrid   3978  8234  0 12&#58;45 ?        00&#58;00&#58;00 sh -c .</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/conf/profile.lsf &&</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-x86_64/bin/bhist 107747 1&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; samgrid   3997  3978  0 12&#58;45 ?        00&#58;00&#58;00 sh -c .</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/conf/profile.lsf &&</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-x86_64/bin/bhist 107747 1&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; samgrid   3998  3997  0 12&#58;45 ?        00&#58;00&#58;00 sh -c .</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/conf/profile.lsf &&</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-x86_64/bin/bhist 107747 1&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; samgrid   4663  4289  0 12&#58;28 ?        00&#58;00&#58;00 perl</font>
<font color='#7F7E6F'>&#62; /home/samgrid/.globus/.gass_cache/local/md5/4e/1a6d19985ee5a0a28cc55934040c83/md5/29/57615113ad84a9dd2dfe6444a59a18/data</font>
<font color='#7F7E6F'>&#62; --dest-url=<a href='https&#58;//samgfwd02.fnal.gov&#58;36619/tmp/condor_g_scratch.0x55d1000.26414/grid-monitor.antaeus.hpcc.ttu.edu&#58' target='_blank' rel='nofollow'>https&#58;//samgfwd02.fnal.gov&#58;36619/tmp/condor_g_scratch.0x55d1000.26414/grid-monitor.antaeus.hpcc.ttu.edu&#58</a>;2119.1716/grid-monitor-job-status</font>
<font color='#7F7E6F'>&#62; samgrid   6477     1  0 12&#58;27 ?        00&#58;00&#58;00 globus-job-manager -conf</font>
<font color='#7F7E6F'>&#62; /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type managedfork</font>
<font color='#7F7E6F'>&#62; -rdn jobmanager-managedfork -machine-type unknown -publish-jobs</font>
<font color='#7F7E6F'>&#62; samgrid   8228  8182  0 12&#58;27 ?        00&#58;00&#58;00 perl</font>
<font color='#7F7E6F'>&#62; /home/samgrid/.globus/.gass_cache/local/md5/26/43b21deaed690bc5a44f87fbb07d32/md5/2b/ade62694008c1289d89694912f870b/data</font>
<font color='#7F7E6F'>&#62; --dest-url=<a href='https&#58;//samgfwd01.fnal.gov&#58;60714/tmp/condor_g_scratch.0x2303e80.17783/grid-monitor.antaeus.hpcc.ttu.edu&#58' target='_blank' rel='nofollow'>https&#58;//samgfwd01.fnal.gov&#58;60714/tmp/condor_g_scratch.0x2303e80.17783/grid-monitor.antaeus.hpcc.ttu.edu&#58</a>;2119.7098/grid-monitor-job-status</font>
<font color='#7F7E6F'>&#62; samgrid   8234  8228  0 12&#58;27 ?        00&#58;00&#58;05 perl</font>
<font color='#7F7E6F'>&#62; /tmp/grid_manager_monitor_agent.samgrid.8228.1000 --delete-self</font>
<font color='#7F7E6F'>&#62; --maxtime=3600s</font>
<font color='#7F7E6F'>&#62; samgrid  31433     1  0 12&#58;28 ?        00&#58;00&#58;00 globus-job-manager -conf</font>
<font color='#7F7E6F'>&#62; /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type managedfork</font>
<font color='#7F7E6F'>&#62; -rdn jobmanager-managedfork -machine-type unknown -publish-jobs</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; It is clear that something that samgrid does is calling bhist, which is</font>
<font color='#7F7E6F'>&#62; resource-consumptive on our system.  If this could be minimized or</font>
<font color='#7F7E6F'>&#62; eliminated, that would be considered friendly.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [root@antaeus ~]# ps aux | grep bhist | grep -v grep</font>
<font color='#7F7E6F'>&#62; samgrid  18979  0.0  0.0  6572 1396 ?        SN   12&#58;46   0&#58;00 sh -c .</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/conf/profile.lsf &&</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-x86_64/bin/bhist 106451 1&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; samgrid  19085  0.0  0.0  6572  708 ?        SN   12&#58;46   0&#58;00 sh -c .</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/conf/profile.lsf &&</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-x86_64/bin/bhist 106451 1&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; samgrid  19086  0.0  0.0  6572  636 ?        RN   12&#58;46   0&#58;00 sh -c .</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/conf/profile.lsf &&</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-x86_64/bin/bhist 106451 1&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Alan</font>
</div><script type='text/javascript'>
        $('#show_1713567055').click(function() {
            $('#detail_1713567055').slideDown("normal");
            $('#show_1713567055').hide();
            $('#hide_1713567055').show();
        });
        $('#hide_1713567055').click(function() {
            $('#detail_1713567055').slideUp();
            $('#hide_1713567055').hide();
            $('#show_1713567055').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5493#1222192269'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-23T17:51:09+00:00">Sep 23, 2008 05:51 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1222192269">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Samgrid developers think this might be a</font>
<font color='#7F7E6F'>&#62; mis-mapping of some other VO to a samgrid user.</font>

Looking in the gram_job_manager file for a recent job, I see&#58;

sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; My arguments&#58; jim_rapper.sh
--executab
le=mc_sam_rapper.sh --monitor --jobFileSet=sg_p17.09.08-
v2_d0r07-09-10_cfv01-01-
00 --jobFileSetId=1939684  --minBiasDatasetId=502091  --
minBiasDataset=Zerobias_
p17_06_03MC_set1 --d0ReleaseVersion=p17.09.08 --ppfile=ppfile --
requestId=91953
--origin=d0mino03.fnal.gov --numEvents=25000 --eventsPerFile=250 --
producedForNa
me=mackin --group=dzero --monitor-
directory=snow_d0mino03.fnal.gov_221654_19987*
--monitor-interval=180 --monitor-bootstrap-time=180
sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; Current Working
host&#58;compute-10-27.loc
al
sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; Current Working directory&#58;/
state/parti
tion1/samgrid_temp_dir.compute-10-27.local.5978
sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; Content of this directory&#58;
total 4936

Also I see that the samgrid directory is accumulating a LOT of old
leftover files.  A cleanup process would be good.

Perhaps we should add Joel Snow to this ticket?

The grid manager guess seems accurate.  Here is a snapshot of some
current samgrid processes&#58;

<div id='show_204844911' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_204844911'>[root@antaeus ~]# ps -fwww -u samgrid
UID        PID  PPID  C STIME TTY          TIME CMD
samgrid   3258     1  0 Sep12 ?        00&#58;00&#58;46 globus-job-manager -
conf /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type lsf
-rdn jobmanager-lsf -machine-type unknown -publish-jobs
samgrid   3259     1  0 Sep12 ?        00&#58;00&#58;45 globus-job-manager -
conf /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type lsf
-rdn jobmanager-lsf -machine-type unknown -publish-jobs
samgrid   3260     1  0 Sep12 ?        00&#58;00&#58;45 globus-job-manager -
conf /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type lsf
-rdn jobmanager-lsf -machine-type unknown -publish-jobs
samgrid   3978  8234  0 12&#58;45 ?        00&#58;00&#58;00 sh -c . /share/nfsapps/
lsf/conf/profile.lsf && /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-
x86_64/bin/bhist 107747 1&#62;/dev/null 2&#62;/dev/null
samgrid   3997  3978  0 12&#58;45 ?        00&#58;00&#58;00 sh -c . /share/nfsapps/
lsf/conf/profile.lsf && /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-
x86_64/bin/bhist 107747 1&#62;/dev/null 2&#62;/dev/null
samgrid   3998  3997  0 12&#58;45 ?        00&#58;00&#58;00 sh -c . /share/nfsapps/
lsf/conf/profile.lsf && /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-
x86_64/bin/bhist 107747 1&#62;/dev/null 2&#62;/dev/null
samgrid   4663  4289  0 12&#58;28 ?        00&#58;00&#58;00 perl /home/
samgrid/.globus/.gass_cache/local/md5/4e/
1a6d19985ee5a0a28cc55934040c83/md5/29/57615113ad84a9dd2dfe6444a59a18/
data --dest-url=<a href='https&#58;//samgfwd02.fnal.gov&#58;36619/tmp/condor_g_scratch.0x55d1000.26414/grid-monitor.antaeus.hpcc.ttu.edu&#58' target='_blank' rel='nofollow'>https&#58;//samgfwd02.fnal.gov&#58;36619/tmp/condor_g_scratch.0x55d1000.26414/grid-monitor.antaeus.hpcc.ttu.edu&#58</a>;2119.1716/grid-monitor-job-status
samgrid   6477     1  0 12&#58;27 ?        00&#58;00&#58;00 globus-job-manager -
conf /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type
managedfork -rdn jobmanager-managedfork -machine-type unknown -publish-
jobs
samgrid   8228  8182  0 12&#58;27 ?        00&#58;00&#58;00 perl /home/
samgrid/.globus/.gass_cache/local/
md5/26/43b21deaed690bc5a44f87fbb07d32/md5/2b/
ade62694008c1289d89694912f870b/data --dest-url=<a href='https&#58;//samgfwd01.fnal.gov&#58;60714/tmp/condor_g_scratch.0x2303e80.17783/grid-monitor.antaeus.hpcc.ttu.edu&#58' target='_blank' rel='nofollow'>https&#58;//samgfwd01.fnal.gov&#58;60714/tmp/condor_g_scratch.0x2303e80.17783/grid-monitor.antaeus.hpcc.ttu.edu&#58</a>;2119.7098/grid-monitor-job-status
samgrid   8234  8228  0 12&#58;27 ?        00&#58;00&#58;05 perl /tmp/
grid_manager_monitor_agent.samgrid.8228.1000 --delete-self --
maxtime=3600s
samgrid  31433     1  0 12&#58;28 ?        00&#58;00&#58;00 globus-job-manager -
conf /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type
managedfork -rdn jobmanager-managedfork -machine-type unknown -publish-
jobs

It is clear that something that samgrid does is calling bhist, which
is resource-consumptive on our system.  If this could be minimized or
eliminated, that would be considered friendly.

[root@antaeus ~]# ps aux | grep bhist | grep -v grep
samgrid  18979  0.0  0.0  6572 1396 ?        SN   12&#58;46   0&#58;00 sh -
c . /share/nfsapps/lsf/conf/profile.lsf && /share/nfsapps/lsf/7.0/
linux2.6-glibc2.3-x86_64/bin/bhist 106451 1&#62;/dev/null 2&#62;/dev/null
samgrid  19085  0.0  0.0  6572  708 ?        SN   12&#58;46   0&#58;00 sh -
c . /share/nfsapps/lsf/conf/profile.lsf && /share/nfsapps/lsf/7.0/
linux2.6-glibc2.3-x86_64/bin/bhist 106451 1&#62;/dev/null 2&#62;/dev/null
samgrid  19086  0.0  0.0  6572  636 ?        RN   12&#58;46   0&#58;00 sh -
c . /share/nfsapps/lsf/conf/profile.lsf && /share/nfsapps/lsf/7.0/
linux2.6-glibc2.3-x86_64/bin/bhist 106451 1&#62;/dev/null 2&#62;/dev/null

Alan
</div><script type='text/javascript'>
        $('#show_204844911').click(function() {
            $('#detail_204844911').slideDown("normal");
            $('#show_204844911').hide();
            $('#hide_204844911').show();
        });
        $('#hide_204844911').click(function() {
            $('#detail_204844911').slideUp();
            $('#hide_204844911').hide();
            $('#show_204844911').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5493#1222132690'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-23T01:18:10+00:00">Sep 23, 2008 01:18 AM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1222132690">&nbsp;</a></div><pre>Alan--in the ticket as it got to Fermilab there was no
explanation of whether this bhist command was seen on the gatekeeper
itself, or on some of the workers.

bhist is (I believe) the command that lsf uses to tell if a job is
finished or not, so this could be something in the condor grid_monitor.sh
or the lsf.pm perl modules that it calls, that is polling the jobs.

Also, can you track which DN is doing this job, and whether it is a
fork job or an LSF job?  Samgrid developers think this might be a
mis-mapping of some other VO to a samgrid user.

Thanks

Steve Timm

------------------------------------------------------------------
Steven C. Timm, Ph.D  (630) 840-8525
timm@....  <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~timm/
Fermilab Computing Division, Scientific Computing Facilities,
Grid Facilities Department, FermiGrid Services Group, Assistant Group Leader.

On Mon, 22 Sep 2008, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5493#1222114500'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-22T20:15:00+00:00">Sep 22, 2008 08:15 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1222114500">&nbsp;</a></div><pre>Changed &#39;Originating VO Support Center&#39; to &#39;OSG-GOC&#39; in hopes of opening a ticket in Remedy. --Tim</pre></div><div class='update_description'><i onclick="document.location='5493#1222105753'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-22T17:49:13+00:00">Sep 22, 2008 05:49 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1222105753">&nbsp;</a></div><pre>Hi Fermilab_SC/Dzero---

We&#39;re emailing you because you&#39;re registered as the primary contact for the DZero
VO&#39;s SC. Please assign this issue to the appropriate group if applicable. See notes
below for more details -- Alan Sill is trying to figure out a high load problem on
his LSF based system due to samgrid jobs (among others), the main culprit being a
&#39;bhist&#39; job.

Thanks,
Arvind

----FORWARD ---
<font color='#7F7E6F'>&#62; Hey Arvind, all,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; That doesn&#39;t appear to be an OSG job.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Who is the samgrid user? Sounds like a D0 or CDF application.</font>
<font color='#7F7E6F'>&#62; SAMgrid is the primary compute system for D0 and CDF; it was also</font>
<font color='#7F7E6F'>&#62; unfortunately used by WLCG for SAM &#34;site availability monitoring&#34;.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Such is life.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Brian</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Sep 4, 2008, at 3&#58;44 PM, Arvind Gopu wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Our sysadmins are complaining about load from OSG monitoring from</font>
<font color='#7F7E6F'>&#62;&#62;&#62; something that does</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#34;bhist&#34; frequently on our LSF-based system. Each instance takes 0.5</font>
<font color='#7F7E6F'>&#62;&#62;&#62; to 1 second to</font>
<font color='#7F7E6F'>&#62;&#62;&#62; complete, and ther appear to be multiple treads doing this on the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; same job.</font>
<font color='#7F7E6F'>&#62;&#62; . . .</font>
<font color='#7F7E6F'>&#62;&#62;&#62; It appears to be (at least partly) samgrid&#58;</font>
<div id='show_1646821271' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1646821271'><font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; samgrid 3792 0.0 0.0 6572 1396 ? RN 15&#58;20 0&#58;00 sh -</font>
<font color='#7F7E6F'>&#62;&#62;&#62; c . /share/nfsapps/lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/</font>
<font color='#7F7E6F'>&#62;&#62;&#62; linux2.6-glibc2.3-x86_64/bin/bhist 108557 1&#62;/dev/null 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Annoying that it is running this and apparently discarding the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; output. Can someone ping the samgrid folks and find out what is going</font>
<font color='#7F7E6F'>&#62;&#62;&#62; on here? As you saw, others have seen this too.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Alan,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I am not sure about this one .. I see youv&#39;e got a thread going on in</font>
<font color='#7F7E6F'>&#62;&#62; the osg-sites mailing list. I&#39;ve CCed rsv-sam list and Burt, in a</font>
<font color='#7F7E6F'>&#62;&#62; hope they will know why these jobs are being run, and by who?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Burt/James - any ideas?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62; Arvind</font>
</div><script type='text/javascript'>
        $('#show_1646821271').click(function() {
            $('#detail_1646821271').slideDown("normal");
            $('#show_1646821271').hide();
            $('#hide_1646821271').show();
        });
        $('#hide_1646821271').click(function() {
            $('#detail_1646821271').slideUp();
            $('#hide_1646821271').hide();
            $('#show_1646821271').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5493#1221571944'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-16T13:32:24+00:00">Sep 16, 2008 01:32 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1221571944">&nbsp;</a></div><pre>Fermilab HelpDesk,

I&#39;ve not heard anything back from you for a week. Please look into this question from
Alan Sill.

<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Our sysadmins are complaining about load from OSG monitoring from</font>
<font color='#7F7E6F'>&#62;&#62;&#62; something that does</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#34;bhist&#34; frequently on our LSF-based system. Each instance takes 0.5</font>
<font color='#7F7E6F'>&#62;&#62;&#62; to 1 second to</font>
<font color='#7F7E6F'>&#62;&#62;&#62; complete, and ther appear to be multiple treads doing this on the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; same job.</font>
<font color='#7F7E6F'>&#62;&#62; . . .</font>
<font color='#7F7E6F'>&#62;&#62;&#62; It appears to be (at least partly) samgrid&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; samgrid 3792 0.0 0.0 6572 1396 ? RN 15&#58;20 0&#58;00 sh -</font>
<font color='#7F7E6F'>&#62;&#62;&#62; c . /share/nfsapps/lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/</font>
<font color='#7F7E6F'>&#62;&#62;&#62; linux2.6-glibc2.3-x86_64/bin/bhist 108557 1&#62;/dev/null 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Annoying that it is running this and apparently discarding the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; output. Can someone ping the samgrid folks and find out what is going</font>
<font color='#7F7E6F'>&#62;&#62;&#62; on here? As you saw, others have seen this too.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Alan</font>

Thanks,
Arvind</pre></div><div class='update_description'><i onclick="document.location='5493#1221061535'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-10T15:45:35+00:00">Sep 10, 2008 03:45 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1221061535">&nbsp;</a></div><pre>Hi,

We&#39;re emailing you because you&#39;re registered as the primary contact for the DZero
VO&#39;s SC. Please assign this issue to the appropriate group if applicable. See notes
below for more details -- Alan Sill is trying to figure out a high load problem on
his LSF based system due to samgrid jobs (among others), the main culprit being a
&#39;bhist&#39; job.

Thanks,
Arvind

----FORWARD ---
<font color='#7F7E6F'>&#62; Hey Arvind, all,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; That doesn&#39;t appear to be an OSG job.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Who is the samgrid user? Sounds like a D0 or CDF application.</font>
<font color='#7F7E6F'>&#62; SAMgrid is the primary compute system for D0 and CDF; it was also</font>
<font color='#7F7E6F'>&#62; unfortunately used by WLCG for SAM &#34;site availability monitoring&#34;.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Such is life.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Brian</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Sep 4, 2008, at 3&#58;44 PM, Arvind Gopu wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Our sysadmins are complaining about load from OSG monitoring from</font>
<font color='#7F7E6F'>&#62;&#62;&#62; something that does</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#34;bhist&#34; frequently on our LSF-based system. Each instance takes 0.5</font>
<font color='#7F7E6F'>&#62;&#62;&#62; to 1 second to</font>
<font color='#7F7E6F'>&#62;&#62;&#62; complete, and ther appear to be multiple treads doing this on the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; same job.</font>
<font color='#7F7E6F'>&#62;&#62; . . .</font>
<font color='#7F7E6F'>&#62;&#62;&#62; It appears to be (at least partly) samgrid&#58;</font>
<div id='show_809350276' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_809350276'><font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; samgrid 3792 0.0 0.0 6572 1396 ? RN 15&#58;20 0&#58;00 sh -</font>
<font color='#7F7E6F'>&#62;&#62;&#62; c . /share/nfsapps/lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/</font>
<font color='#7F7E6F'>&#62;&#62;&#62; linux2.6-glibc2.3-x86_64/bin/bhist 108557 1&#62;/dev/null 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Annoying that it is running this and apparently discarding the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; output. Can someone ping the samgrid folks and find out what is going</font>
<font color='#7F7E6F'>&#62;&#62;&#62; on here? As you saw, others have seen this too.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Alan,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I am not sure about this one .. I see youv&#39;e got a thread going on in</font>
<font color='#7F7E6F'>&#62;&#62; the osg-sites mailing list. I&#39;ve CCed rsv-sam list and Burt, in a</font>
<font color='#7F7E6F'>&#62;&#62; hope they will know why these jobs are being run, and by who?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Burt/James - any ideas?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62; Arvind</font>
</div><script type='text/javascript'>
        $('#show_809350276').click(function() {
            $('#detail_809350276').slideDown("normal");
            $('#show_809350276').hide();
            $('#hide_809350276').show();
        });
        $('#hide_809350276').click(function() {
            $('#detail_809350276').slideUp();
            $('#hide_809350276').hide();
            $('#show_809350276').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5493#1220561290'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-04T20:48:10+00:00">Sep 4, 2008 08:48 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1220561290">&nbsp;</a></div><pre>Hi Brian,

Ah I see! So I guess I wrongly CCed the WLCG SAM folks about &#34;samgrid&#34;
jobs. Never mind. I should perhaps contact someone from the Dzero VO?

helpdesk-admin@.... is listed as the primary ops concact for the D0
VO.. Any suggestions on who might be best to contact?&#58;

Arvind

On 9/4/2008 4&#58;45 PM, Brian Bockelman pondered&#58;
<font color='#7F7E6F'>&#62; Hey Arvind, all,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; That doesn&#39;t appear to be an OSG job.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Who is the samgrid user?  Sounds like a D0 or CDF application.</font>
<font color='#7F7E6F'>&#62; SAMgrid is the primary compute system for D0 and CDF; it was also</font>
<font color='#7F7E6F'>&#62; unfortunately used by WLCG for SAM &#34;site availability monitoring&#34;.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Such is life.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Brian</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Sep 4, 2008, at 3&#58;44 PM, Arvind Gopu wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Our sysadmins are complaining about load from OSG monitoring from</font>
<font color='#7F7E6F'>&#62;&#62;&#62; something that does</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#34;bhist&#34; frequently on our LSF-based system.  Each instance takes 0.5</font>
<font color='#7F7E6F'>&#62;&#62;&#62; to 1 second to</font>
<font color='#7F7E6F'>&#62;&#62;&#62; complete, and ther appear to be multiple treads doing this on the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; same job.</font>
<font color='#7F7E6F'>&#62;&#62;  . . .</font>
<font color='#7F7E6F'>&#62;&#62;&#62; It appears to be (at least partly) samgrid&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<div id='show_1111594521' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1111594521'><font color='#7F7E6F'>&#62;&#62;&#62; samgrid   3792  0.0  0.0  6572 1396 ?        RN   15&#58;20   0&#58;00 sh -</font>
<font color='#7F7E6F'>&#62;&#62;&#62; c . /share/nfsapps/lsf/conf/profile.lsf && /share/nfsapps/lsf/7.0/</font>
<font color='#7F7E6F'>&#62;&#62;&#62; linux2.6-glibc2.3-x86_64/bin/bhist 108557 1&#62;/dev/null 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Annoying that it is running this and apparently discarding the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; output.  Can someone ping the samgrid folks and find out what is going</font>
<font color='#7F7E6F'>&#62;&#62;&#62; on here?  As you saw, others have seen this too.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Alan,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I am not sure about this one .. I see youv&#39;e got a thread going on in</font>
<font color='#7F7E6F'>&#62;&#62; the osg-sites mailing list. I&#39;ve CCed rsv-sam list and Burt, in a</font>
<font color='#7F7E6F'>&#62;&#62; hope they will know why these jobs are being run, and by who?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Burt/James - any ideas?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62; Arvind</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_1111594521').click(function() {
            $('#detail_1111594521').slideDown("normal");
            $('#show_1111594521').hide();
            $('#hide_1111594521').show();
        });
        $('#hide_1111594521').click(function() {
            $('#detail_1111594521').slideUp();
            $('#hide_1111594521').hide();
            $('#show_1111594521').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5493#1220561110'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-04T20:45:10+00:00">Sep 4, 2008 08:45 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1220561110">&nbsp;</a></div><pre>Hey Arvind, all,

That doesn&#39;t appear to be an OSG job.

Who is the samgrid user?  Sounds like a D0 or CDF application.
SAMgrid is the primary compute system for D0 and CDF; it was also
unfortunately used by WLCG for SAM &#34;site availability monitoring&#34;.

Such is life.

Brian

On Sep 4, 2008, at 3&#58;44 PM, Arvind Gopu wrote&#58;

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Our sysadmins are complaining about load from OSG monitoring from</font>
<font color='#7F7E6F'>&#62;&#62; something that does</font>
<font color='#7F7E6F'>&#62;&#62; &#34;bhist&#34; frequently on our LSF-based system.  Each instance takes</font>
<font color='#7F7E6F'>&#62;&#62; 0.5 to 1 second to</font>
<font color='#7F7E6F'>&#62;&#62; complete, and ther appear to be multiple treads doing this on the</font>
<font color='#7F7E6F'>&#62;&#62; same job.</font>
<font color='#7F7E6F'>&#62;  . . .</font>
<font color='#7F7E6F'>&#62;&#62; It appears to be (at least partly) samgrid&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; samgrid   3792  0.0  0.0  6572 1396 ?        RN   15&#58;20   0&#58;00 sh -</font>
<font color='#7F7E6F'>&#62;&#62; c . /share/nfsapps/lsf/conf/profile.lsf && /share/nfsapps/lsf/7.0/</font>
<font color='#7F7E6F'>&#62;&#62; linux2.6-glibc2.3-x86_64/bin/bhist 108557 1&#62;/dev/null 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Annoying that it is running this and apparently discarding the</font>
<font color='#7F7E6F'>&#62;&#62; output.  Can someone ping the samgrid folks and find out what is</font>
<font color='#7F7E6F'>&#62;&#62; going</font>
<font color='#7F7E6F'>&#62;&#62; on here?  As you saw, others have seen this too.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62; Alan</font>
<div id='show_912264901' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_912264901'><font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Alan,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I am not sure about this one .. I see youv&#39;e got a thread going on</font>
<font color='#7F7E6F'>&#62; in the osg-sites mailing list. I&#39;ve CCed rsv-sam list and Burt, in a</font>
<font color='#7F7E6F'>&#62; hope they will know why these jobs are being run, and by who?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Burt/James - any ideas?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; Arvind</font>
</div><script type='text/javascript'>
        $('#show_912264901').click(function() {
            $('#detail_912264901').slideDown("normal");
            $('#show_912264901').hide();
            $('#hide_912264901').show();
        });
        $('#hide_912264901').click(function() {
            $('#detail_912264901').slideUp();
            $('#hide_912264901').hide();
            $('#show_912264901').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5493#1220560750'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-04T20:39:10+00:00">Sep 4, 2008 08:39 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1220560750">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62;     Our sysadmins are complaining about load from OSG monitoring from something that does</font>
<font color='#7F7E6F'>&#62;     &#34;bhist&#34; frequently on our LSF-based system.  Each instance takes 0.5 to 1 second to</font>
<font color='#7F7E6F'>&#62;     complete, and ther appear to be multiple treads doing this on the same job.</font>
. . .

<font color='#7F7E6F'>&#62; It appears to be (at least partly) samgrid&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; samgrid   3792  0.0  0.0  6572 1396 ?        RN   15&#58;20   0&#58;00 sh -</font>
<font color='#7F7E6F'>&#62; c . /share/nfsapps/lsf/conf/profile.lsf && /share/nfsapps/lsf/7.0/</font>
<font color='#7F7E6F'>&#62; linux2.6-glibc2.3-x86_64/bin/bhist 108557 1&#62;/dev/null 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Annoying that it is running this and apparently discarding the</font>
<font color='#7F7E6F'>&#62; output.  Can someone ping the samgrid folks and find out what is going</font>
<font color='#7F7E6F'>&#62; on here?  As you saw, others have seen this too.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; Alan</font>
<font color='#7F7E6F'>&#62;</font>

Alan,

I am not sure about this one .. I see youv&#39;e got a thread going on in
the osg-sites mailing list. I&#39;ve CCed rsv-sam list and Burt, in a hope
they will know why these jobs are being run, and by who?

Burt/James - any ideas?

Thanks,
Arvind</pre></div><div class='update_description'><i onclick="document.location='5493#1220473450'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-03T20:24:10+00:00">Sep 3, 2008 08:24 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1220473450">&nbsp;</a></div><pre>It appears to be (at least partly) samgrid&#58;

samgrid   3792  0.0  0.0  6572 1396 ?        RN   15&#58;20   0&#58;00 sh -
c . /share/nfsapps/lsf/conf/profile.lsf && /share/nfsapps/lsf/7.0/
linux2.6-glibc2.3-x86_64/bin/bhist 108557 1&#62;/dev/null 2&#62;/dev/null

Annoying that it is running this and apparently discarding the
output.  Can someone ping the samgrid folks and find out what is going
on here?  As you saw, others have seen this too.

Thanks,
Alan</pre></div><div class='update_description'><i onclick="document.location='5493#1220472222'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-03T20:03:42+00:00">Sep 3, 2008 08:03 PM UTC</time> by <b>echism</b><a class="anchor" name="1220472222">&nbsp;</a></div><pre>Our sysadmins are complaining about load from OSG monitoring from something that does
&#34;bhist&#34; frequently on our LSF-based system.  Each instance takes 0.5 to 1 second to
complete, and ther appear to be multiple treads doing this on the same job.

Any ideas out there?

Thanks,
Alan</pre></div><div class='update_description'><i onclick="document.location='5493#0'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="1970-01-01T00:00:00+00:00">Jan 1, 1970 12:00 AM UTC</time> by <b>TIGRE&#58;</b><a class="anchor" name="0">&nbsp;</a></div><pre>According to what we can see here, the bhist call appears to be
lsf.pm. See examples below.

I&#39;d have to look closer into lsf.pm to find out why teh samgrid jobs
are exercising this so frequently...

[root@antaeus samgrid]# grep -ai bhist *log
gram_job_mgr_10022.log&#58;Mon Sep 1 02&#58;45&#58;22 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10022.log&#58;Mon Sep 1 02&#58;45&#58;25 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_10071.log&#58;Mon Sep 1 02&#58;26&#58;06 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10071.log&#58;Mon Sep 1 02&#58;26&#58;08 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_10084.log&#58;Wed Jul 23 14&#58;47&#58;50 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10084.log&#58;Wed Jul 23 14&#58;47&#58;52 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_10203.log&#58;Mon Sep 1 02&#58;19&#58;07 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10203.log&#58;Mon Sep 1 02&#58;19&#58;08 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_10291.log&#58;Fri Jul 25 07&#58;08&#58;19 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10291.log&#58;Fri Jul 25 07&#58;08&#58;19 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_10295.log&#58;Fri Jul 25 07&#58;38&#58;23 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10295.log&#58;Fri Jul 25 07&#58;38&#58;24 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_10314.log&#58;Wed Jul 2 15&#58;45&#58;47 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10314.log&#58;Wed Jul 2 15&#58;45&#58;48 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
<div id='show_659808504' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_659808504'>gram_job_mgr_1033.log&#58;Wed Jul 23 20&#58;31&#58;12 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_1033.log&#58;Wed Jul 23 20&#58;31&#58;13 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_10576.log&#58;Wed Jul 23 20&#58;38&#58;51 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_10576.log&#58;Wed Jul 23 20&#58;38&#58;52 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_11058.log&#58;Mon Sep 1 02&#58;47&#58;10 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11058.log&#58;Mon Sep 1 02&#58;47&#58;11 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_11080.log&#58;Wed Jul 23 15&#58;03&#58;08 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11080.log&#58;Wed Jul 23 15&#58;03&#58;10 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_11112.log&#58;Sat Jul 26 07&#58;42&#58;37 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11112.log&#58;Sat Jul 26 07&#58;42&#58;38 2008 JM_SCRIPT&#58; Neither
bhist knows anything about the job, exit code 255, reporting FAILED
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;12&#58;03 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;12&#58;34 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;13&#58;06 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;13&#58;37 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;14&#58;09 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;14&#58;40 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;15&#58;12 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist
gram_job_mgr_11270.log&#58;Sat Jul 19 15&#58;15&#58;43 2008 JM_SCRIPT&#58; bjobs rc is
255 == Job &#60;123&#62; is not found, running bhist

... etc.

[root@antaeus samgrid]# cd /usr/local/grid/globus
[root@antaeus globus]# find . -type f -exec grep -i &#34;is not found,
running&#34; {} /dev/null &#92;;
./lib/perl/Globus/GRAM/JobManager/lsf.pm&#58; $self-&#62;log(&#34;bjobs rc
is 255 == Job &#60;123&#62; is not found, running bhist&#34;);



Hi,

this thread has been discussed by Samgrid experts. They don&#39;t know where
the call to bhist is occurring, but they are confident it is not in any
dzero/samgrid code. What about the LSF jobmanager or grid monitor? Dzero
has run on another LSF site apparently without this problem as no
complaints were ever registered, and there hundreds of jobs were running
simultaneously, not the 10&#39;s that run at TTU. So in sum there is no bhist
in Dzero code and the problem does not appear reproducable elsewhere.

joel

On Thu, 2 Oct 2008, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>



Joel

Could you answer Alan&#39;s question please?
---------------------------------
We are trying to determine why the Dzero jobs seem to invoke bhist, and
reduce the overall load on the cluster head node if possible.
---------------------------------

Thank you,
Elizabeth



LSF is not sandboxed on our site. VOs are encouraged to clean up
after each job.

This, however, was not the primary thrust of this ticket. We are
trying to determine why the Dzero jobs seem to invoke bhist, and
reduce the overall load on the cluster head node if possible.

Alan



Alan,

Joel had asked&#58;
-----------------
Does not LSF clean up the working directory when the job is over? We run
on another LSF installation at grid1.oscer.ou.edu and there has not been a
problem with directory clean up.
-----------------

Please respond.

Thank you,
Elizabeth



Hi Alan,

Does not LSF clean up the working directory when the job is over? We run
on another LSF installation at grid1.oscer.ou.edu and there has not been a
problem with directory clean up.

joel

On Tue, 23 Sep 2008, Alan Sill wrote&#58;

<font color='#7F7E6F'>&#62;&#62; Samgrid developers think this might be a</font>
<font color='#7F7E6F'>&#62;&#62; mis-mapping of some other VO to a samgrid user.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Looking in the gram_job_manager file for a recent job, I see&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; My arguments&#58; jim_rapper.sh</font>
<font color='#7F7E6F'>&#62; --executab</font>
<font color='#7F7E6F'>&#62; le=mc_sam_rapper.sh --monitor</font>
<font color='#7F7E6F'>&#62; --jobFileSet=sg_p17.09.08-v2_d0r07-09-10_cfv01-01-</font>
<font color='#7F7E6F'>&#62; 00 --jobFileSetId=1939684 --minBiasDatasetId=502091</font>
<font color='#7F7E6F'>&#62; --minBiasDataset=Zerobias_</font>
<font color='#7F7E6F'>&#62; p17_06_03MC_set1 --d0ReleaseVersion=p17.09.08 --ppfile=ppfile</font>
<font color='#7F7E6F'>&#62; --requestId=91953</font>
<font color='#7F7E6F'>&#62; --origin=d0mino03.fnal.gov --numEvents=25000 --eventsPerFile=250</font>
<font color='#7F7E6F'>&#62; --producedForNa</font>
<font color='#7F7E6F'>&#62; me=mackin --group=dzero</font>
<font color='#7F7E6F'>&#62; --monitor-directory=snow_d0mino03.fnal.gov_221654_19987*</font>
<font color='#7F7E6F'>&#62; --monitor-interval=180 --monitor-bootstrap-time=180</font>
<font color='#7F7E6F'>&#62; sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; Current Working</font>
<font color='#7F7E6F'>&#62; host&#58;compute-10-27.loc</font>
<font color='#7F7E6F'>&#62; al</font>
<font color='#7F7E6F'>&#62; sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; Current Working</font>
<font color='#7F7E6F'>&#62; directory&#58;/state/parti</font>
<font color='#7F7E6F'>&#62; tion1/samgrid_temp_dir.compute-10-27.local.5978</font>
<font color='#7F7E6F'>&#62; sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; Content of this directory&#58;</font>
<font color='#7F7E6F'>&#62; total 4936</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Also I see that the samgrid directory is accumulating a LOT of old leftover</font>
<font color='#7F7E6F'>&#62; files. A cleanup process would be good.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Perhaps we should add Joel Snow to this ticket?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The grid manager guess seems accurate. Here is a snapshot of some current</font>
<font color='#7F7E6F'>&#62; samgrid processes&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [root@antaeus ~]# ps -fwww -u samgrid</font>
<font color='#7F7E6F'>&#62; UID PID PPID C STIME TTY TIME CMD</font>
<font color='#7F7E6F'>&#62; samgrid 3258 1 0 Sep12 ? 00&#58;00&#58;46 globus-job-manager -conf</font>
<font color='#7F7E6F'>&#62; /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type lsf -rdn</font>
<font color='#7F7E6F'>&#62; jobmanager-lsf -machine-type unknown -publish-jobs</font>
<font color='#7F7E6F'>&#62; samgrid 3259 1 0 Sep12 ? 00&#58;00&#58;45 globus-job-manager -conf</font>
<font color='#7F7E6F'>&#62; /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type lsf -rdn</font>
<font color='#7F7E6F'>&#62; jobmanager-lsf -machine-type unknown -publish-jobs</font>
<font color='#7F7E6F'>&#62; samgrid 3260 1 0 Sep12 ? 00&#58;00&#58;45 globus-job-manager -conf</font>
<font color='#7F7E6F'>&#62; /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type lsf -rdn</font>
<font color='#7F7E6F'>&#62; jobmanager-lsf -machine-type unknown -publish-jobs</font>
<font color='#7F7E6F'>&#62; samgrid 3978 8234 0 12&#58;45 ? 00&#58;00&#58;00 sh -c .</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/conf/profile.lsf &amp;&amp;</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-x86_64/bin/bhist 107747 1&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; samgrid 3997 3978 0 12&#58;45 ? 00&#58;00&#58;00 sh -c .</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/conf/profile.lsf &amp;&amp;</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-x86_64/bin/bhist 107747 1&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; samgrid 3998 3997 0 12&#58;45 ? 00&#58;00&#58;00 sh -c .</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/conf/profile.lsf &amp;&amp;</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-x86_64/bin/bhist 107747 1&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; samgrid 4663 4289 0 12&#58;28 ? 00&#58;00&#58;00 perl</font>
<font color='#7F7E6F'>&#62;</font>
/home/samgrid/.globus/.gass_cache/local/md5/4e/1a6d19985ee5a0a28cc55934040c83/md5/29/57615113ad84a9dd2dfe6444a59a18/data
<font color='#7F7E6F'>&#62;</font>
--dest-url=<a href='https&#58;//samgfwd02.fnal.gov&#58;36619/tmp/condor_g_scratch.0x55d1000.26414/grid-monitor.antaeus.hpcc.ttu.edu&#58' target='_blank' rel='nofollow'>https&#58;//samgfwd02.fnal.gov&#58;36619/tmp/condor_g_scratch.0x55d1000.26414/grid-monitor.antaeus.hpcc.ttu.edu&#58</a>;2119.1716/grid-monitor-job-status
<font color='#7F7E6F'>&#62; samgrid 6477 1 0 12&#58;27 ? 00&#58;00&#58;00 globus-job-manager -conf</font>
<font color='#7F7E6F'>&#62; /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type managedfork</font>
<font color='#7F7E6F'>&#62; -rdn jobmanager-managedfork -machine-type unknown -publish-jobs</font>
<font color='#7F7E6F'>&#62; samgrid 8228 8182 0 12&#58;27 ? 00&#58;00&#58;00 perl</font>
<font color='#7F7E6F'>&#62;</font>
/home/samgrid/.globus/.gass_cache/local/md5/26/43b21deaed690bc5a44f87fbb07d32/md5/2b/ade62694008c1289d89694912f870b/data
<font color='#7F7E6F'>&#62;</font>
--dest-url=<a href='https&#58;//samgfwd01.fnal.gov&#58;60714/tmp/condor_g_scratch.0x2303e80.17783/grid-monitor.antaeus.hpcc.ttu.edu&#58' target='_blank' rel='nofollow'>https&#58;//samgfwd01.fnal.gov&#58;60714/tmp/condor_g_scratch.0x2303e80.17783/grid-monitor.antaeus.hpcc.ttu.edu&#58</a>;2119.7098/grid-monitor-job-status
<font color='#7F7E6F'>&#62; samgrid 8234 8228 0 12&#58;27 ? 00&#58;00&#58;05 perl</font>
<font color='#7F7E6F'>&#62; /tmp/grid_manager_monitor_agent.samgrid.8228.1000 --delete-self</font>
<font color='#7F7E6F'>&#62; --maxtime=3600s</font>
<font color='#7F7E6F'>&#62; samgrid 31433 1 0 12&#58;28 ? 00&#58;00&#58;00 globus-job-manager -conf</font>
<font color='#7F7E6F'>&#62; /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type managedfork</font>
<font color='#7F7E6F'>&#62; -rdn jobmanager-managedfork -machine-type unknown -publish-jobs</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; It is clear that something that samgrid does is calling bhist, which is</font>
<font color='#7F7E6F'>&#62; resource-consumptive on our system. If this could be minimized or</font>
<font color='#7F7E6F'>&#62; eliminated, that would be considered friendly.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [root@antaeus ~]# ps aux | grep bhist | grep -v grep</font>
<font color='#7F7E6F'>&#62; samgrid 18979 0.0 0.0 6572 1396 ? SN 12&#58;46 0&#58;00 sh -c .</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/conf/profile.lsf &amp;&amp;</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-x86_64/bin/bhist 106451 1&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; samgrid 19085 0.0 0.0 6572 708 ? SN 12&#58;46 0&#58;00 sh -c .</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/conf/profile.lsf &amp;&amp;</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-x86_64/bin/bhist 106451 1&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; samgrid 19086 0.0 0.0 6572 636 ? RN 12&#58;46 0&#58;00 sh -c .</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/conf/profile.lsf &amp;&amp;</font>
<font color='#7F7E6F'>&#62; /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-x86_64/bin/bhist 106451 1&#62;/dev/null</font>
<font color='#7F7E6F'>&#62; 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Alan</font>



<font color='#7F7E6F'>&#62; Samgrid developers think this might be a</font>
<font color='#7F7E6F'>&#62; mis-mapping of some other VO to a samgrid user.</font>

Looking in the gram_job_manager file for a recent job, I see&#58;

sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; My arguments&#58; jim_rapper.sh
--executab
le=mc_sam_rapper.sh --monitor --jobFileSet=sg_p17.09.08-
v2_d0r07-09-10_cfv01-01-
00 --jobFileSetId=1939684 --minBiasDatasetId=502091 --
minBiasDataset=Zerobias_
p17_06_03MC_set1 --d0ReleaseVersion=p17.09.08 --ppfile=ppfile --
requestId=91953
--origin=d0mino03.fnal.gov --numEvents=25000 --eventsPerFile=250 --
producedForNa
me=mackin --group=dzero --monitor-
directory=snow_d0mino03.fnal.gov_221654_19987*
--monitor-interval=180 --monitor-bootstrap-time=180
sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; Current Working
host&#58;compute-10-27.loc
al
sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; Current Working directory&#58;/
state/parti
tion1/samgrid_temp_dir.compute-10-27.local.5978
sandbox_mgr&#58; Thu 09/11/08 16&#58;44&#58;06&#58; INFO&#58; Content of this directory&#58;
total 4936

Also I see that the samgrid directory is accumulating a LOT of old
leftover files. A cleanup process would be good.

Perhaps we should add Joel Snow to this ticket?

The grid manager guess seems accurate. Here is a snapshot of some
current samgrid processes&#58;

[root@antaeus ~]# ps -fwww -u samgrid
UID PID PPID C STIME TTY TIME CMD
samgrid 3258 1 0 Sep12 ? 00&#58;00&#58;46 globus-job-manager -
conf /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type lsf
-rdn jobmanager-lsf -machine-type unknown -publish-jobs
samgrid 3259 1 0 Sep12 ? 00&#58;00&#58;45 globus-job-manager -
conf /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type lsf
-rdn jobmanager-lsf -machine-type unknown -publish-jobs
samgrid 3260 1 0 Sep12 ? 00&#58;00&#58;45 globus-job-manager -
conf /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type lsf
-rdn jobmanager-lsf -machine-type unknown -publish-jobs
samgrid 3978 8234 0 12&#58;45 ? 00&#58;00&#58;00 sh -c . /share/nfsapps/
lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-
x86_64/bin/bhist 107747 1&#62;/dev/null 2&#62;/dev/null
samgrid 3997 3978 0 12&#58;45 ? 00&#58;00&#58;00 sh -c . /share/nfsapps/
lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-
x86_64/bin/bhist 107747 1&#62;/dev/null 2&#62;/dev/null
samgrid 3998 3997 0 12&#58;45 ? 00&#58;00&#58;00 sh -c . /share/nfsapps/
lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/linux2.6-glibc2.3-
x86_64/bin/bhist 107747 1&#62;/dev/null 2&#62;/dev/null
samgrid 4663 4289 0 12&#58;28 ? 00&#58;00&#58;00 perl /home/
samgrid/.globus/.gass_cache/local/md5/4e/
1a6d19985ee5a0a28cc55934040c83/md5/29/57615113ad84a9dd2dfe6444a59a18/
data
--dest-url=<a href='https&#58;//samgfwd02.fnal.gov&#58;36619/tmp/condor_g_scratch.0x55d1000.26414/grid-monitor.antaeus.hpcc.ttu.edu&#58' target='_blank' rel='nofollow'>https&#58;//samgfwd02.fnal.gov&#58;36619/tmp/condor_g_scratch.0x55d1000.26414/grid-monitor.antaeus.hpcc.ttu.edu&#58</a>;2119.1716/grid-monitor-job-status
samgrid 6477 1 0 12&#58;27 ? 00&#58;00&#58;00 globus-job-manager -
conf /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type
managedfork -rdn jobmanager-managedfork -machine-type unknown -publish-
jobs
samgrid 8228 8182 0 12&#58;27 ? 00&#58;00&#58;00 perl /home/
samgrid/.globus/.gass_cache/local/
md5/26/43b21deaed690bc5a44f87fbb07d32/md5/2b/
ade62694008c1289d89694912f870b/data
--dest-url=<a href='https&#58;//samgfwd01.fnal.gov&#58;60714/tmp/condor_g_scratch.0x2303e80.17783/grid-monitor.antaeus.hpcc.ttu.edu&#58' target='_blank' rel='nofollow'>https&#58;//samgfwd01.fnal.gov&#58;60714/tmp/condor_g_scratch.0x2303e80.17783/grid-monitor.antaeus.hpcc.ttu.edu&#58</a>;2119.7098/grid-monitor-job-status
samgrid 8234 8228 0 12&#58;27 ? 00&#58;00&#58;05 perl /tmp/
grid_manager_monitor_agent.samgrid.8228.1000 --delete-self --
maxtime=3600s
samgrid 31433 1 0 12&#58;28 ? 00&#58;00&#58;00 globus-job-manager -
conf /usr/local/OSG_1_0_0/globus/etc/globus-job-manager.conf -type
managedfork -rdn jobmanager-managedfork -machine-type unknown -publish-
jobs

It is clear that something that samgrid does is calling bhist, which
is resource-consumptive on our system. If this could be minimized or
eliminated, that would be considered friendly.

[root@antaeus ~]# ps aux | grep bhist | grep -v grep
samgrid 18979 0.0 0.0 6572 1396 ? SN 12&#58;46 0&#58;00 sh -
c . /share/nfsapps/lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/
linux2.6-glibc2.3-x86_64/bin/bhist 106451 1&#62;/dev/null 2&#62;/dev/null
samgrid 19085 0.0 0.0 6572 708 ? SN 12&#58;46 0&#58;00 sh -
c . /share/nfsapps/lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/
linux2.6-glibc2.3-x86_64/bin/bhist 106451 1&#62;/dev/null 2&#62;/dev/null
samgrid 19086 0.0 0.0 6572 636 ? RN 12&#58;46 0&#58;00 sh -
c . /share/nfsapps/lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/
linux2.6-glibc2.3-x86_64/bin/bhist 106451 1&#62;/dev/null 2&#62;/dev/null

Alan



Alan--in the ticket as it got to Fermilab there was no
explanation of whether this bhist command was seen on the gatekeeper
itself, or on some of the workers.

bhist is (I believe) the command that lsf uses to tell if a job is
finished or not, so this could be something in the condor grid_monitor.sh
or the lsf.pm perl modules that it calls, that is polling the jobs.

Also, can you track which DN is doing this job, and whether it is a
fork job or an LSF job? Samgrid developers think this might be a
mis-mapping of some other VO to a samgrid user.

Thanks

Steve Timm

------------------------------------------------------------------
Steven C. Timm, Ph.D (630) 840-8525
timm@.... <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~timm/
Fermilab Computing Division, Scientific Computing Facilities,
Grid Facilities Department, FermiGrid Services Group, Assistant Group Leader.

On Mon, 22 Sep 2008, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>



Changed &#39;Originating VO Support Center&#39; to &#39;OSG-GOC&#39; in hopes of opening a ticket in
Remedy. --Tim



Hi Fermilab_SC/Dzero---

We&#39;re emailing you because you&#39;re registered as the primary contact for the DZero
VO&#39;s SC. Please assign this issue to the appropriate group if applicable. See notes
below for more details -- Alan Sill is trying to figure out a high load problem on
his LSF based system due to samgrid jobs (among others), the main culprit being a
&#39;bhist&#39; job.

Thanks,
Arvind

----FORWARD ---
<font color='#7F7E6F'>&#62; Hey Arvind, all,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; That doesn&#39;t appear to be an OSG job.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Who is the samgrid user? Sounds like a D0 or CDF application.</font>
<font color='#7F7E6F'>&#62; SAMgrid is the primary compute system for D0 and CDF; it was also</font>
<font color='#7F7E6F'>&#62; unfortunately used by WLCG for SAM &#34;site availability monitoring&#34;.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Such is life.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Brian</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Sep 4, 2008, at 3&#58;44 PM, Arvind Gopu wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Our sysadmins are complaining about load from OSG monitoring from</font>
<font color='#7F7E6F'>&#62;&#62;&#62; something that does</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#34;bhist&#34; frequently on our LSF-based system. Each instance takes 0.5</font>
<font color='#7F7E6F'>&#62;&#62;&#62; to 1 second to</font>
<font color='#7F7E6F'>&#62;&#62;&#62; complete, and ther appear to be multiple treads doing this on the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; same job.</font>
<font color='#7F7E6F'>&#62;&#62; . . .</font>
<font color='#7F7E6F'>&#62;&#62;&#62; It appears to be (at least partly) samgrid&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; samgrid 3792 0.0 0.0 6572 1396 ? RN 15&#58;20 0&#58;00 sh -</font>
<font color='#7F7E6F'>&#62;&#62;&#62; c . /share/nfsapps/lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/</font>
<font color='#7F7E6F'>&#62;&#62;&#62; linux2.6-glibc2.3-x86_64/bin/bhist 108557 1&#62;/dev/null 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Annoying that it is running this and apparently discarding the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; output. Can someone ping the samgrid folks and find out what is going</font>
<font color='#7F7E6F'>&#62;&#62;&#62; on here? As you saw, others have seen this too.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Alan,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I am not sure about this one .. I see youv&#39;e got a thread going on in</font>
<font color='#7F7E6F'>&#62;&#62; the osg-sites mailing list. I&#39;ve CCed rsv-sam list and Burt, in a</font>
<font color='#7F7E6F'>&#62;&#62; hope they will know why these jobs are being run, and by who?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Burt/James - any ideas?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62; Arvind</font>



Fermilab HelpDesk,

I&#39;ve not heard anything back from you for a week. Please look into this question from
Alan Sill.

<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Our sysadmins are complaining about load from OSG monitoring from</font>
<font color='#7F7E6F'>&#62;&#62;&#62; something that does</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#34;bhist&#34; frequently on our LSF-based system. Each instance takes 0.5</font>
<font color='#7F7E6F'>&#62;&#62;&#62; to 1 second to</font>
<font color='#7F7E6F'>&#62;&#62;&#62; complete, and ther appear to be multiple treads doing this on the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; same job.</font>
<font color='#7F7E6F'>&#62;&#62; . . .</font>
<font color='#7F7E6F'>&#62;&#62;&#62; It appears to be (at least partly) samgrid&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; samgrid 3792 0.0 0.0 6572 1396 ? RN 15&#58;20 0&#58;00 sh -</font>
<font color='#7F7E6F'>&#62;&#62;&#62; c . /share/nfsapps/lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/</font>
<font color='#7F7E6F'>&#62;&#62;&#62; linux2.6-glibc2.3-x86_64/bin/bhist 108557 1&#62;/dev/null 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Annoying that it is running this and apparently discarding the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; output. Can someone ping the samgrid folks and find out what is going</font>
<font color='#7F7E6F'>&#62;&#62;&#62; on here? As you saw, others have seen this too.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Alan</font>

Thanks,
Arvind



Hi,

We&#39;re emailing you because you&#39;re registered as the primary contact for the DZero
VO&#39;s SC. Please assign this issue to the appropriate group if applicable. See notes
below for more details -- Alan Sill is trying to figure out a high load problem on
his LSF based system due to samgrid jobs (among others), the main culprit being a
&#39;bhist&#39; job.

Thanks,
Arvind

----FORWARD ---
<font color='#7F7E6F'>&#62; Hey Arvind, all,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; That doesn&#39;t appear to be an OSG job.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Who is the samgrid user? Sounds like a D0 or CDF application.</font>
<font color='#7F7E6F'>&#62; SAMgrid is the primary compute system for D0 and CDF; it was also</font>
<font color='#7F7E6F'>&#62; unfortunately used by WLCG for SAM &#34;site availability monitoring&#34;.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Such is life.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Brian</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Sep 4, 2008, at 3&#58;44 PM, Arvind Gopu wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Our sysadmins are complaining about load from OSG monitoring from</font>
<font color='#7F7E6F'>&#62;&#62;&#62; something that does</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#34;bhist&#34; frequently on our LSF-based system. Each instance takes 0.5</font>
<font color='#7F7E6F'>&#62;&#62;&#62; to 1 second to</font>
<font color='#7F7E6F'>&#62;&#62;&#62; complete, and ther appear to be multiple treads doing this on the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; same job.</font>
<font color='#7F7E6F'>&#62;&#62; . . .</font>
<font color='#7F7E6F'>&#62;&#62;&#62; It appears to be (at least partly) samgrid&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; samgrid 3792 0.0 0.0 6572 1396 ? RN 15&#58;20 0&#58;00 sh -</font>
<font color='#7F7E6F'>&#62;&#62;&#62; c . /share/nfsapps/lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/</font>
<font color='#7F7E6F'>&#62;&#62;&#62; linux2.6-glibc2.3-x86_64/bin/bhist 108557 1&#62;/dev/null 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Annoying that it is running this and apparently discarding the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; output. Can someone ping the samgrid folks and find out what is going</font>
<font color='#7F7E6F'>&#62;&#62;&#62; on here? As you saw, others have seen this too.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Alan,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I am not sure about this one .. I see youv&#39;e got a thread going on in</font>
<font color='#7F7E6F'>&#62;&#62; the osg-sites mailing list. I&#39;ve CCed rsv-sam list and Burt, in a</font>
<font color='#7F7E6F'>&#62;&#62; hope they will know why these jobs are being run, and by who?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Burt/James - any ideas?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62; Arvind</font>



Hi Brian,

Ah I see! So I guess I wrongly CCed the WLCG SAM folks about &#34;samgrid&#34;
jobs. Never mind. I should perhaps contact someone from the Dzero VO?

helpdesk-admin@.... is listed as the primary ops concact for the D0
VO.. Any suggestions on who might be best to contact?&#58;

Arvind

On 9/4/2008 4&#58;45 PM, Brian Bockelman pondered&#58;
<font color='#7F7E6F'>&#62; Hey Arvind, all,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; That doesn&#39;t appear to be an OSG job.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Who is the samgrid user? Sounds like a D0 or CDF application.</font>
<font color='#7F7E6F'>&#62; SAMgrid is the primary compute system for D0 and CDF; it was also</font>
<font color='#7F7E6F'>&#62; unfortunately used by WLCG for SAM &#34;site availability monitoring&#34;.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Such is life.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Brian</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Sep 4, 2008, at 3&#58;44 PM, Arvind Gopu wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Our sysadmins are complaining about load from OSG monitoring from</font>
<font color='#7F7E6F'>&#62;&#62;&#62; something that does</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#34;bhist&#34; frequently on our LSF-based system. Each instance takes 0.5</font>
<font color='#7F7E6F'>&#62;&#62;&#62; to 1 second to</font>
<font color='#7F7E6F'>&#62;&#62;&#62; complete, and ther appear to be multiple treads doing this on the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; same job.</font>
<font color='#7F7E6F'>&#62;&#62; . . .</font>
<font color='#7F7E6F'>&#62;&#62;&#62; It appears to be (at least partly) samgrid&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; samgrid 3792 0.0 0.0 6572 1396 ? RN 15&#58;20 0&#58;00 sh -</font>
<font color='#7F7E6F'>&#62;&#62;&#62; c . /share/nfsapps/lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/</font>
<font color='#7F7E6F'>&#62;&#62;&#62; linux2.6-glibc2.3-x86_64/bin/bhist 108557 1&#62;/dev/null 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Annoying that it is running this and apparently discarding the</font>
<font color='#7F7E6F'>&#62;&#62;&#62; output. Can someone ping the samgrid folks and find out what is going</font>
<font color='#7F7E6F'>&#62;&#62;&#62; on here? As you saw, others have seen this too.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Alan,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I am not sure about this one .. I see youv&#39;e got a thread going on in</font>
<font color='#7F7E6F'>&#62;&#62; the osg-sites mailing list. I&#39;ve CCed rsv-sam list and Burt, in a</font>
<font color='#7F7E6F'>&#62;&#62; hope they will know why these jobs are being run, and by who?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Burt/James - any ideas?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62; Arvind</font>
<font color='#7F7E6F'>&#62;</font>



Hey Arvind, all,

That doesn&#39;t appear to be an OSG job.

Who is the samgrid user? Sounds like a D0 or CDF application.
SAMgrid is the primary compute system for D0 and CDF; it was also
unfortunately used by WLCG for SAM &#34;site availability monitoring&#34;.

Such is life.

Brian

On Sep 4, 2008, at 3&#58;44 PM, Arvind Gopu wrote&#58;

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Our sysadmins are complaining about load from OSG monitoring from</font>
<font color='#7F7E6F'>&#62;&#62; something that does</font>
<font color='#7F7E6F'>&#62;&#62; &#34;bhist&#34; frequently on our LSF-based system. Each instance takes</font>
<font color='#7F7E6F'>&#62;&#62; 0.5 to 1 second to</font>
<font color='#7F7E6F'>&#62;&#62; complete, and ther appear to be multiple treads doing this on the</font>
<font color='#7F7E6F'>&#62;&#62; same job.</font>
<font color='#7F7E6F'>&#62; . . .</font>
<font color='#7F7E6F'>&#62;&#62; It appears to be (at least partly) samgrid&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; samgrid 3792 0.0 0.0 6572 1396 ? RN 15&#58;20 0&#58;00 sh -</font>
<font color='#7F7E6F'>&#62;&#62; c . /share/nfsapps/lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/</font>
<font color='#7F7E6F'>&#62;&#62; linux2.6-glibc2.3-x86_64/bin/bhist 108557 1&#62;/dev/null 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Annoying that it is running this and apparently discarding the</font>
<font color='#7F7E6F'>&#62;&#62; output. Can someone ping the samgrid folks and find out what is</font>
<font color='#7F7E6F'>&#62;&#62; going</font>
<font color='#7F7E6F'>&#62;&#62; on here? As you saw, others have seen this too.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Alan,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I am not sure about this one .. I see youv&#39;e got a thread going on</font>
<font color='#7F7E6F'>&#62; in the osg-sites mailing list. I&#39;ve CCed rsv-sam list and Burt, in a</font>
<font color='#7F7E6F'>&#62; hope they will know why these jobs are being run, and by who?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Burt/James - any ideas?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; Arvind</font>



<font color='#7F7E6F'>&#62; Our sysadmins are complaining about load from OSG monitoring from something that does</font>
<font color='#7F7E6F'>&#62; &#34;bhist&#34; frequently on our LSF-based system. Each instance takes 0.5 to 1 second to</font>
<font color='#7F7E6F'>&#62; complete, and ther appear to be multiple treads doing this on the same job.</font>
. . .

<font color='#7F7E6F'>&#62; It appears to be (at least partly) samgrid&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; samgrid 3792 0.0 0.0 6572 1396 ? RN 15&#58;20 0&#58;00 sh -</font>
<font color='#7F7E6F'>&#62; c . /share/nfsapps/lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/</font>
<font color='#7F7E6F'>&#62; linux2.6-glibc2.3-x86_64/bin/bhist 108557 1&#62;/dev/null 2&#62;/dev/null</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Annoying that it is running this and apparently discarding the</font>
<font color='#7F7E6F'>&#62; output. Can someone ping the samgrid folks and find out what is going</font>
<font color='#7F7E6F'>&#62; on here? As you saw, others have seen this too.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; Alan</font>
<font color='#7F7E6F'>&#62;</font>

Alan,

I am not sure about this one .. I see youv&#39;e got a thread going on in
the osg-sites mailing list. I&#39;ve CCed rsv-sam list and Burt, in a hope
they will know why these jobs are being run, and by who?

Burt/James - any ideas?

Thanks,
Arvind



It appears to be (at least partly) samgrid&#58;

samgrid 3792 0.0 0.0 6572 1396 ? RN 15&#58;20 0&#58;00 sh -
c . /share/nfsapps/lsf/conf/profile.lsf &amp;&amp; /share/nfsapps/lsf/7.0/
linux2.6-glibc2.3-x86_64/bin/bhist 108557 1&#62;/dev/null 2&#62;/dev/null

Annoying that it is running this and apparently discarding the
output. Can someone ping the samgrid folks and find out what is going
on here? As you saw, others have seen this too.

Thanks,
Alan



Our sysadmins are complaining about load from OSG monitoring from something that does
&#34;bhist&#34; frequently on our LSF-based system. Each instance takes 0.5 to 1 second to
complete, and ther appear to be multiple treads doing this on the same job.

Any ideas out there?

Thanks,
Alan
</div><script type='text/javascript'>
        $('#show_659808504').click(function() {
            $('#detail_659808504').slideDown("normal");
            $('#show_659808504').hide();
            $('#hide_659808504').show();
        });
        $('#hide_659808504').click(function() {
            $('#detail_659808504').slideUp();
            $('#hide_659808504').hide();
            $('#show_659808504').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F5493">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
