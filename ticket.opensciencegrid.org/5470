<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[5470] Gratia not reporting for Vanderbilt</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=5470" method="post">
<div class="page-header">
    <h3><span class="muted">5470</span> / Gratia not reporting for Vanderbilt</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Kevin Buterbaugh</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">&#34;&#34;</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-09-19</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=5470", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/5470?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/5470?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Gratia%20not%20reporting%20for%20Vanderbilt%20ISSUE%3D5470%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='5470#1223058801'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-03T18:33:21+00:00">Oct 3, 2008 06:33 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1223058801">&nbsp;</a></div><pre>I will be on vacation from 4-Oct to 19-Oct. Here is the contact
information you
may need while I&#39;m away.

General non-critical questions should be directed at goc@....
as always.

If you have questions about any GOC computing service or any technical
questions regarding the GOC and it&#39;s services please contact Arvind
Gopu. (agopu@....) Arvind will be attending the &#34;Production
Meetings&#34; on Tuesday afternoons in my absence.

If you have any user support or community communications related
questions contact Tim Silvers. (tsilver@....) Tim will attend
the WLCG Operations meetings during my time off to review new and
pending WLCG ticket issues.

If you have management, budget, HR, or administrative issues please
contact Fred Luehring. (luehring@....)

If any item needs further escalation, beyond what I have added above
please contact Scott McCaulay. (smccaula@....)

If you have questions about all the summer projects I&#39;ve put off and
will be doing during my vacation, feel free to call me at home. Though
I might not hear you over the sound of the drill, saw, jackhammer,
barking dogs, lawnmower, or high-pressure sprayer. If you have
questions about the presidential or vice-presidential debates, I&#39;m
sorry, I am just the wrong person to ask, so don&#39;t call me or expect
an opinion.

On Sep 9, 2008, at 4&#58;15 PM, Open Science Grid FootPrints &#60;osg@....
<font color='#7F7E6F'>&#62; wrote&#58;</font>

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1223058798'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-03T18:33:18+00:00">Oct 3, 2008 06:33 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1223058798">&nbsp;</a></div><pre>I will be on vacation from 4-Oct to 19-Oct. Here is the contact
information you
may need while I&#39;m away.

General non-critical questions should be directed at goc@....
as always.

If you have questions about any GOC computing service or any technical
questions regarding the GOC and it&#39;s services please contact Arvind
Gopu. (agopu@....) Arvind will be attending the &#34;Production
Meetings&#34; on Tuesday afternoons in my absence.

If you have any user support or community communications related
questions contact Tim Silvers. (tsilver@....) Tim will attend
the WLCG Operations meetings during my time off to review new and
pending WLCG ticket issues.

If you have management, budget, HR, or administrative issues please
contact Fred Luehring. (luehring@....)

If any item needs further escalation, beyond what I have added above
please contact Scott McCaulay. (smccaula@....)

If you have questions about all the summer projects I&#39;ve put off and
will be doing during my vacation, feel free to call me at home. Though
I might not hear you over the sound of the drill, saw, jackhammer,
barking dogs, lawnmower, or high-pressure sprayer. If you have
questions about the presidential or vice-presidential debates, I&#39;m
sorry, I am just the wrong person to ask, so don&#39;t call me or expect
an opinion.

On Sep 9, 2008, at 4&#58;24 PM, Open Science Grid FootPrints &#60;osg@....
<font color='#7F7E6F'>&#62; wrote&#58;</font>

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1221672136'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-17T17:22:16+00:00">Sep 17, 2008 05:22 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1221672136">&nbsp;</a></div><pre>Vanderbilt is now reporting Gratia data. Closing ticket.</pre></div><div class='update_description'><i onclick="document.location='5470#1221591430'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-16T18:57:10+00:00">Sep 16, 2008 06:57 PM UTC</time> by <b>Kevin Buterbaugh</b><a class="anchor" name="1221591430">&nbsp;</a></div><pre>Hi Philippe,

I have modified the cron job so that it runs once a day at 4&#58;52 AM...

Kevin

On Sep 16, 2008, at 1&#58;33 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1221589990'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-16T18:33:10+00:00">Sep 16, 2008 06:33 PM UTC</time> by <b>Philippe Canal</b><a class="anchor" name="1221589990">&nbsp;</a></div><pre>Hi,

<font color='#7F7E6F'>&#62; I was told by Phillipe that the cron job ran at 7 AM and I just need</font>
<font color='#7F7E6F'>&#62; to make sure the file was there before then.  I see from doing a</font>
<font color='#7F7E6F'>&#62; &#34;crontab -l&#34; on my gatekeeper that that&#39;s not true&#58;</font>

I may have been imprecise of which cron job I was talking about &#58;)
The cron job I was talking about is the one that look at the
central Gratia Database and emails daily reports.  For those daily
report to be accurate all the data for the previous day must already
be in the central Gratia database.

The cron job Chris is referring to (and that you see in your cron table)
is the cron job that harvest the batch accounting information and uploads
it to the central Gratia database.

<font color='#7F7E6F'>&#62; If I invoke the probe manually at the end of my script (which I can</font>
<font color='#7F7E6F'>&#62; easily do) it&#39;d get run only once a day, not 144 times a day.  What do</font>
<font color='#7F7E6F'>&#62; you think?</font>

Since your accounting information only changes once day, running the
probe once day is sufficient &#58;)

Cheers,
Philippe.

<font color='#7F7E6F'>&#62; Based on the time of the cron job, I&#39;d say I</font>
<font color='#7F7E6F'>&#62; should have it sleep only 3 minutes so that it gets the log file there</font>
<font color='#7F7E6F'>&#62; before the cron job runs on my gatekeeper.</font>

Assuming that you can guarantee that the upload always takes less than 2
minutes (which
you can not really do given potential disk and network contention).

Open Science Grid FootPrints wrote&#58;
<div id='show_1062974992' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1062974992'><font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1062974992').click(function() {
            $('#detail_1062974992').slideDown("normal");
            $('#show_1062974992').hide();
            $('#hide_1062974992').show();
        });
        $('#hide_1062974992').click(function() {
            $('#detail_1062974992').slideUp();
            $('#hide_1062974992').hide();
            $('#show_1062974992').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5470#1221589270'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-16T18:21:10+00:00">Sep 16, 2008 06:21 PM UTC</time> by <b>Kevin Buterbaugh</b><a class="anchor" name="1221589270">&nbsp;</a></div><pre>Hi Chris,

I was told by Phillipe that the cron job ran at 7 AM and I just need
to make sure the file was there before then.  I see from doing a
&#34;crontab -l&#34; on my gatekeeper that that&#39;s not true&#58;

2,12,22,32,42,52 * * * * /opt/osg/gratia/probe/pbs/pbs-
lsf_meter.cron.sh &#62; /opt/osg/gratia/var/logs/gratia-probe-pbs.log 2&#62;&1

The script I wrote runs on the scheduler machine and creates the
parsed log file there, then rcp&#39;s it over to my gatekeeper.  I have it
kicking off on the scheduler at 23&#58;58 PM, getting today&#39;s date, and
then sleeping 5 minutes.  Based on the time of the cron job, I&#39;d say I
should have it sleep only 3 minutes so that it gets the log file there
before the cron job runs on my gatekeeper.

If I invoke the probe manually at the end of my script (which I can
easily do) it&#39;d get run only once a day, not 144 times a day.  What do
you think?

Kevin

On Sep 16, 2008, at 1&#58;06 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1221588370'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-16T18:06:10+00:00">Sep 16, 2008 06:06 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1221588370">&nbsp;</a></div><pre>There&#39;s a slight problem with race here.

The ideal way to deal with your situation is to disable the gratia-pbs
cron using vdt-control, and then invoke the probe manually after the
day&#39;s job logs have been copied over. Otherwise, you run the risk of the
probe running while the file is being constructed. The window is very
small for problems, but it is there. We had a site a while ago that
rsynced its job logs and we had a regular problem.

Thanks,
Chris.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1221585130'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-16T17:12:10+00:00">Sep 16, 2008 05:12 PM UTC</time> by <b>Kevin Buterbaugh</b><a class="anchor" name="1221585130">&nbsp;</a></div><pre>Hi Chris,

According to &#34;vdt-control --list&#34;, gratia-pbs is enabled via cron...

Kevin

On Sep 16, 2008, at 12&#58;06 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1221584770'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-16T17:06:10+00:00">Sep 16, 2008 05:06 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1221584770">&nbsp;</a></div><pre>How did you decide to invoke the probe after the log information had
been transferred?

Thanks,
Chris.
Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1221583870'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-16T16:51:10+00:00">Sep 16, 2008 04:51 PM UTC</time> by <b>Kevin Buterbaugh</b><a class="anchor" name="1221583870">&nbsp;</a></div><pre>Hi Chris,

The script is done and in place...

Kevin

On Sep 16, 2008, at 11&#58;42 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1221583356'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-16T16:42:36+00:00">Sep 16, 2008 04:42 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1221583356">&nbsp;</a></div><pre>Synopsis&#58;

Problem was isolated as being missing PBS log information (master not on
gatekeeper). Kevin is writing a script to scrape relevant information
once per day and transfer it to the GK, combined with running the probe
manually rather than via cron to avoid possible races. Will check
uploads when script is finished.

Thanks,
Chris.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1221505066'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-15T18:57:46+00:00">Sep 15, 2008 06:57 PM UTC</time> by <b>echism</b><a class="anchor" name="1221505066">&nbsp;</a></div><pre>Are there any updates on this issue?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='5470#1221159973'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-11T19:06:13+00:00">Sep 11, 2008 07:06 PM UTC</time> by <b>Kevin Buterbaugh</b><a class="anchor" name="1221159973">&nbsp;</a></div><pre>Hi Arvind,

My urCollector.conf file already had the following in it&#58;

# This parameter specifies the LRMS type and _has to be set_. Possible
values&#58;
# &#34;pbs&#34;, &#34;lsf&#34;.
lrmsType = &#34;pbs&#34;

# This is the location of the directory where PBS accounting logs are
stored.
pbsAcctLogDir = &#34;/var/spool/pbs/server_priv/accounting/&#34;

So even that&#39;s not where we store the accounting file on the scheduler
machine, that *is* where I put it on the gatekeeper&#58;

/root
root@vampire# ls -l /var/spool/pbs/server_priv/accounting/
total 44
-rw-r--r-- 1 root root 42416 Sep 11 11&#58;29 20080911
/root
root@vampire#

That file is from a test I ran a couple of hours ago.  Thanks...

Kevin

On Sep 11, 2008, at 1&#58;57 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Hi Kevin -- I assume this new file is accessible to Gratia, and you&#39;ve</font>
<font color='#7F7E6F'>&#62; configured Gratia to go look for it? --Arvind</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Assignees&#58; Operations Workgroup, Arvind Gopu, Rob Quick, OSG GOC</font>
<font color='#7F7E6F'>&#62; Coordinator, Elizabeth Chism, OSG Support Centers, Gratia-Ops, Burt</font>
<div id='show_284617438' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_284617438'><font color='#7F7E6F'>&#62; Holzman</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thank You,</font>
<font color='#7F7E6F'>&#62; OSG Grid Operations Center</font>
<font color='#7F7E6F'>&#62; goc@...., 317-278-9699</font>
<font color='#7F7E6F'>&#62; info&#58; <a href='http&#58;//www.opensciencegrid.org' target='_blank' rel='nofollow'>http&#58;//www.opensciencegrid.org</a></font>
<font color='#7F7E6F'>&#62; rss&#58; <a href='http&#58;//www.grid.iu.edu/news/' target='_blank' rel='nofollow'>http&#58;//www.grid.iu.edu/news/</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#60;smime777.p7s&#62;</font>

--
Kevin L. Buterbaugh
Advanced Computing Center for Research & Education - Vanderbilt
University
www.accre.vanderbilt.edu - (615)343-0288 - klb@....
</div><script type='text/javascript'>
        $('#show_284617438').click(function() {
            $('#detail_284617438').slideDown("normal");
            $('#show_284617438').hide();
            $('#hide_284617438').show();
        });
        $('#hide_284617438').click(function() {
            $('#detail_284617438').slideUp();
            $('#hide_284617438').hide();
            $('#show_284617438').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5470#1221159971'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-11T19:06:11+00:00">Sep 11, 2008 07:06 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1221159971">&nbsp;</a></div><pre>Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1221159431'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-11T18:57:11+00:00">Sep 11, 2008 06:57 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1221159431">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Hi,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; OK, I&#39;ve written a Perl script which parses the PBS accounting log on</font>
<font color='#7F7E6F'>&#62; our scheduler machine, extracts only the OSG related records and</font>
<font color='#7F7E6F'>&#62; writes them to a new file, then copies that file to my gatekeeper.</font>
<font color='#7F7E6F'>&#62; I&#39;ve set it up to run out of cron at 23&#58;58 each day and get the year,</font>
<font color='#7F7E6F'>&#62; month, and day, then it sleeps for 5 minutes before parsing the log</font>
<font color='#7F7E6F'>&#62; file (that&#39;s a common thing I do - it&#39;s easier (for me with my limited</font>
<font color='#7F7E6F'>&#62; programming skills) to figure out today&#39;s date than yesterday&#39;s!).  So</font>
<font color='#7F7E6F'>&#62; it&#39;ll have the log file in place well before 7 AM.  Is there anything</font>
<font color='#7F7E6F'>&#62; else I should do besides wait until 7 AM tomorrow and see if we show</font>
<font color='#7F7E6F'>&#62; up???  Thanks...</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Kevin</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>

Hi Kevin -- I assume this new file is accessible to Gratia, and you&#39;ve
configured Gratia to go look for it? --Arvind</pre></div><div class='update_description'><i onclick="document.location='5470#1221158891'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-11T18:48:11+00:00">Sep 11, 2008 06:48 PM UTC</time> by <b>Kevin Buterbaugh</b><a class="anchor" name="1221158891">&nbsp;</a></div><pre>Hi,

OK, I&#39;ve written a Perl script which parses the PBS accounting log on
our scheduler machine, extracts only the OSG related records and
writes them to a new file, then copies that file to my gatekeeper.
I&#39;ve set it up to run out of cron at 23&#58;58 each day and get the year,
month, and day, then it sleeps for 5 minutes before parsing the log
file (that&#39;s a common thing I do - it&#39;s easier (for me with my limited
programming skills) to figure out today&#39;s date than yesterday&#39;s!).  So
it&#39;ll have the log file in place well before 7 AM.  Is there anything
else I should do besides wait until 7 AM tomorrow and see if we show
up???  Thanks...

Kevin

On Sep 9, 2008, at 12&#58;36 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1220991851'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-09T20:24:11+00:00">Sep 9, 2008 08:24 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1220991851">&nbsp;</a></div><pre>Brian Bockelman wrote&#58;
<font color='#7F7E6F'>&#62; Well shoot, we&#39;ve got a ton of experience running PBS here.  However,</font>
<font color='#7F7E6F'>&#62; I didn&#39;t see the original question.  Could someone forward it to us?</font>
Sent under separate cover.
Chris.

--
Chris Green &#60;greenc@....&#62;, FNAL CD/SCF/GRID; &#39;phone (630) 840-2167.
IRC&#58; greenc@...., ChrisGreen@....;
chissgreen (AIM, Yahoo); chissg@.... (MSNM);
chris.h.green (Google Talk).</pre></div><div class='update_description'><i onclick="document.location='5470#1220991311'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-09T20:15:11+00:00">Sep 9, 2008 08:15 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1220991311">&nbsp;</a></div><pre>Well shoot, we&#39;ve got a ton of experience running PBS here.  However,
I didn&#39;t see the original question.  Could someone forward it to us?

Brian

On Sep 9, 2008, at 12&#58;09 PM, John Weigand wrote&#58;

<font color='#7F7E6F'>&#62; Now you&#39;ve got me curious...</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; what is the issue about PBS and CPU usage?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The reason I am asking is that one of the WLCG Tier2 atlas sites</font>
<font color='#7F7E6F'>&#62; (UTA_SWT2) stopped showing CPU usage in July in Gratia and that is</font>
<font color='#7F7E6F'>&#62; the WLCG MOU measurement for those Tier 2 sites.  Tons of jobs but</font>
<font color='#7F7E6F'>&#62; no CPU.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Really curious</font>
<font color='#7F7E6F'>&#62; John Weigand</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Chris and Kevin,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I don&#39;t have much experience with PBS, since we haven&#39;t used that</font>
<font color='#7F7E6F'>&#62;&#62; here at OU since the old days of our first OSCER cluster, Boomer,</font>
<font color='#7F7E6F'>&#62;&#62; where I remember having similar issues with getting access to the</font>
<font color='#7F7E6F'>&#62;&#62; PBS logs.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I seem to remember someone suggesting copying over the PBS logs</font>
<font color='#7F7E6F'>&#62;&#62; to the OSG gatekeeper via rsync or similar for Gratia to pick them</font>
<font color='#7F7E6F'>&#62;&#62; up --</font>
<font color='#7F7E6F'>&#62;&#62; but that doesn&#39;t alleviate the security concerns. I have to admit</font>
<font color='#7F7E6F'>&#62;&#62; that I don&#39;t know too much about these logs, but personally I don&#39;t</font>
<font color='#7F7E6F'>&#62;&#62; understand what&#39;s sensitive about batch system logs. I guess some</font>
<font color='#7F7E6F'>&#62;&#62; people</font>
<font color='#7F7E6F'>&#62;&#62; don&#39;t like to divulge how much CPU they consumed?</font>
<div id='show_224327409' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_224327409'><font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Just curious,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_224327409').click(function() {
            $('#detail_224327409').slideDown("normal");
            $('#show_224327409').hide();
            $('#hide_224327409').show();
        });
        $('#hide_224327409').click(function() {
            $('#detail_224327409').slideUp();
            $('#hide_224327409').hide();
            $('#show_224327409').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5470#1220981770'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-09T17:36:10+00:00">Sep 9, 2008 05:36 PM UTC</time> by <b>Philippe Canal</b><a class="anchor" name="1220981770">&nbsp;</a></div><pre>Hi Kevin,

Once a day upload is fine albeit not optimal.   One timing issue to be
considered is that daily reports are being generated around 7am CST.  In
order for your site to avoid appearing as doing nothing, you would want
to schedule your upload to insure that the whole process is finished
before that.  Maybe you could run your script copying the log more than
once a day ...

Another possible option might be to run the Gratia Probe on the
protected node ... (You may have to copy the GRAM logs to the protected
node).

Cheers,
Philippe.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1220981013'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-09T17:23:33+00:00">Sep 9, 2008 05:23 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1220981013">&nbsp;</a></div><pre>Added Burt and myself to ticket&#39;s assignees per Chris Green&#39;s request. -Arvind</pre></div><div class='update_description'><i onclick="document.location='5470#1220980873'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-09T17:21:13+00:00">Sep 9, 2008 05:21 PM UTC</time> by <b>Kevin Buterbaugh</b><a class="anchor" name="1220980873">&nbsp;</a></div><pre>Hi Horst,

Well, I admit that most people would find our CPU usage statistics
pretty uninteresting.  The main concern is that the logs contain
account names.  Granted, that&#39;s the easier part of the username /
password combination to guess, and we do enforce reasonably strong
passwords via attempting to crack our own password file, but why
potentially give out *any* information you don&#39;t have to that&#39;s
potentially useful to those who are up to no good?

Parsing the log file on the scheduler shouldn&#39;t be difficult for me to
do - all OSG users map to accounts that are in the Unix group
&#34;osgusers.&#34;  So I&#39;ll write a Perl script that simple parses the log
file and creates a new one containing only the lines which match
&#34;group=osgusers.&#34;  My main question at this point is if doing that
once a day shortly after midnight for the previous days&#39; logfile is
good enough for Gratia???

Thanks for your comments - I appreciate them...

Kevin

On Sep 9, 2008, at 12&#58;00 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1220980870'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-09T17:21:10+00:00">Sep 9, 2008 05:21 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1220980870">&nbsp;</a></div><pre>On 9/9/2008 12&#58;07 PM, Chris Green pondered&#58;
<font color='#7F7E6F'>&#62; Hi Kevin,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I understand your concerns. I can alleviate some of them, but you will</font>
<font color='#7F7E6F'>&#62; have to look at the information below and decide how to act. I believe</font>
<font color='#7F7E6F'>&#62; that accurate accounting of OSG use is a condition of OSG membership</font>
<font color='#7F7E6F'>&#62; for a site (Robs, please comment). Obtaining this information given</font>
<font color='#7F7E6F'>&#62; the different batch management systems and huge configuration space</font>
<font color='#7F7E6F'>&#62; available is not as easy as we might like, but I hope we can come up</font>
<font color='#7F7E6F'>&#62; with something with which you feel comfortable (or at least, minimally</font>
<font color='#7F7E6F'>&#62; uncomfortable).</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The not-quite-released latest version of the PBS probe uses GRAM</font>
<font color='#7F7E6F'>&#62; information combined with the PBS information to allow the suppression</font>
<font color='#7F7E6F'>&#62; of accounting information for jobs that did not contain DN information</font>
<font color='#7F7E6F'>&#62; (and therefore did not come via GRAM). However, you need to be running</font>
<font color='#7F7E6F'>&#62; OSG v1.0 or better (VDT 1.10.1) and the GK still needs access to the</font>
<font color='#7F7E6F'>&#62; server-priv logs via direct or NFS access. They will be read as the</font>
<font color='#7F7E6F'>&#62; root user so preserving their root-only permissions is still fine.</font>
<font color='#7F7E6F'>&#62; Several sites of which I am aware access their PBS logs via NFS in</font>
<font color='#7F7E6F'>&#62; this way.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; If this is not acceptable to you, then I am afraid things become more</font>
<font color='#7F7E6F'>&#62; difficult. I don&#39;t know of any other way to obtain PBS accounting</font>
<font color='#7F7E6F'>&#62; information than via the Master logs, so the next solution of which I</font>
<font color='#7F7E6F'>&#62; am aware would involve changing your batch system; which I understand</font>
<font color='#7F7E6F'>&#62; is often difficult or impossible for institutions whose OSG</font>
<font color='#7F7E6F'>&#62; participation is often only very small compared to their local</font>
<font color='#7F7E6F'>&#62; computing considerations.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I have included several other people on this email in the hope that</font>
<font color='#7F7E6F'>&#62; they may know something I don&#39;t about PBS configurations. I hope we</font>
<font color='#7F7E6F'>&#62; can come to an accommodation that works out for everyone.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; If you would like to have a &#39;phone conference on this subject, please</font>
<div id='show_804890384' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_804890384'><font color='#7F7E6F'>&#62; reply on this ticket and GOC (thank you, Arvind) have offered to host</font>
<font color='#7F7E6F'>&#62; one.</font>

Hey Kevin,

If you&#39;re not willing/able to install the beta-PBS-Gratia-probe that
Chris has talked about in the 2nd paragraph above, then you could
perhaps create a filtered log that has only grid jobs (ie no local job
information), and let Gratia access it.

As Chris pointed out, accounting usage is a requisite for the OSG
management, and so we need to come up with some solution or the other.
We (GOC) will be happy to coordinate a short conference call if need be
to discuss this.

Cheers,
Arvind
</div><script type='text/javascript'>
        $('#show_804890384').click(function() {
            $('#detail_804890384').slideDown("normal");
            $('#show_804890384').hide();
            $('#hide_804890384').show();
        });
        $('#hide_804890384').click(function() {
            $('#detail_804890384').slideUp();
            $('#hide_804890384').hide();
            $('#show_804890384').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5470#1220980511'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-09T17:15:11+00:00">Sep 9, 2008 05:15 PM UTC</time> by <b>John Weigand</b><a class="anchor" name="1220980511">&nbsp;</a></div><pre>Now you&#39;ve got me curious...

what is the issue about PBS and CPU usage?

The reason I am asking is that one of the WLCG Tier2 atlas sites
(UTA_SWT2) stopped showing CPU usage in July in Gratia and that is the
WLCG MOU measurement for those Tier 2 sites.  Tons of jobs but no CPU.

Really curious
John Weigand

Horst Severini wrote&#58;
<font color='#7F7E6F'>&#62; Hi Chris and Kevin,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I don&#39;t have much experience with PBS, since we haven&#39;t used that here</font>
<font color='#7F7E6F'>&#62; at OU since the old days of our first OSCER cluster, Boomer, where</font>
<font color='#7F7E6F'>&#62; I remember having similar issues with getting access to the PBS logs.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I seem to remember someone suggesting copying over the PBS logs</font>
<font color='#7F7E6F'>&#62; to the OSG gatekeeper via rsync or similar for Gratia to pick them up --</font>
<font color='#7F7E6F'>&#62; but that doesn&#39;t alleviate the security concerns. I have to admit</font>
<font color='#7F7E6F'>&#62; that I don&#39;t know too much about these logs, but personally I don&#39;t</font>
<font color='#7F7E6F'>&#62; understand what&#39;s sensitive about batch system logs. I guess some people</font>
<font color='#7F7E6F'>&#62; don&#39;t like to divulge how much CPU they consumed?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Just curious,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font></pre></div><div class='update_description'><i onclick="document.location='5470#1220979611'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-09T17:00:11+00:00">Sep 9, 2008 05:00 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1220979611">&nbsp;</a></div><pre>Hi Chris and Kevin,

I don&#39;t have much experience with PBS, since we haven&#39;t used that here
at OU since the old days of our first OSCER cluster, Boomer, where
I remember having similar issues with getting access to the PBS logs.

I seem to remember someone suggesting copying over the PBS logs
to the OSG gatekeeper via rsync or similar for Gratia to pick them up --
but that doesn&#39;t alleviate the security concerns. I have to admit
that I don&#39;t know too much about these logs, but personally I don&#39;t
understand what&#39;s sensitive about batch system logs. I guess some people
don&#39;t like to divulge how much CPU they consumed?

Just curious,

Horst</pre></div><div class='update_description'><i onclick="document.location='5470#1220977091'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-09T16:18:11+00:00">Sep 9, 2008 04:18 PM UTC</time> by <b>Kevin Buterbaugh</b><a class="anchor" name="1220977091">&nbsp;</a></div><pre>Hi Chris,

I&#39;d like to throw out another idea for everyone&#39;s consideration - I
think we may have even started to implement this sometime in the
past ... what if there were a script which ran on our PBS scheduler
machine (out of cron, shortly after midnight), which parsed the
previous days&#39; accounting log and created a new one which contained
only information on grid jobs, then copied that &#34;sanitized&#34; accounting
file to the gatekeeper?

The script itself isn&#39;t that big of a deal to write, I wouldn&#39;t
think.  My main question is is this an acceptable solution from a
Gratia / OSG perspective (mainly the part about the log file not being
updated in real time, just copied once a day)???

Kevin

On Sep 9, 2008, at 11&#58;09 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1220976551'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-09T16:09:11+00:00">Sep 9, 2008 04:09 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1220976551">&nbsp;</a></div><pre>Hi Kevin,

I understand your concerns. I can alleviate some of them, but you will
have to look at the information below and decide how to act. I believe
that accurate accounting of OSG use is a condition of OSG membership for
a site (Robs, please comment). Obtaining this information given the
different batch management systems and huge configuration space
available is not as easy as we might like, but I hope we can come up
with something with which you feel comfortable (or at least, minimally
uncomfortable).

The not-quite-released latest version of the PBS probe uses GRAM
information combined with the PBS information to allow the suppression
of accounting information for jobs that did not contain DN information
(and therefore did not come via GRAM). However, you need to be running
OSG v1.0 or better (VDT 1.10.1) and the GK still needs access to the
server-priv logs via direct or NFS access. They will be read as the root
user so preserving their root-only permissions is still fine. Several
sites of which I am aware access their PBS logs via NFS in this way.

If this is not acceptable to you, then I am afraid things become more
difficult. I don&#39;t know of any other way to obtain PBS accounting
information than via the Master logs, so the next solution of which I am
aware would involve changing your batch system; which I understand is
often difficult or impossible for institutions whose OSG participation
is often only very small compared to their local computing considerations.

I have included several other people on this email in the hope that they
may know something I don&#39;t about PBS configurations. I hope we can come
to an accommodation that works out for everyone.

If you would like to have a &#39;phone conference on this subject, please
reply on this ticket and GOC (thank you, Arvind) have offered to host one.

Thanks,
<div id='show_1409429606' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1409429606'>Chris.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1409429606').click(function() {
            $('#detail_1409429606').slideDown("normal");
            $('#show_1409429606').hide();
            $('#hide_1409429606').show();
        });
        $('#hide_1409429606').click(function() {
            $('#detail_1409429606').slideUp();
            $('#hide_1409429606').hide();
            $('#show_1409429606').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5470#1220972593'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-09T15:03:13+00:00">Sep 9, 2008 03:03 PM UTC</time> by <b>Kevin Buterbaugh</b><a class="anchor" name="1220972593">&nbsp;</a></div><pre>Hi Chris,

Well, we&#39;ve apparently got a problem ... the logs of the PBS server
are not available to the gatekeeper for security reasons.  Those logs
contain information about jobs run by local users - information that
we&#39;re not comfortable putting on an OSG gatekeeper machine.  So is
there anything else we can do?  Thanks...

Kevin

On Sep 9, 2008, at 9&#58;30 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1220970611'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-09T14:30:11+00:00">Sep 9, 2008 02:30 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1220970611">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Checking /opt/osg/gratia/probe/pbs/urCollector.conf ...</font>
<font color='#7F7E6F'>&#62; pbsAcctLogDir is set to default value&#58; checking existence ... MISSING</font>

Please check your urCollector.conf file. The following attributes should
be configured correctly&#58;

* &#34;lrmsType&#34; should be set to either, &#34;pbs&#34; or, &#34;lsf&#34; as
appropriate; with either
* &#34;pbsAcctLogDir&#34; set to the correct server-priv accounting
directory; or
* &#34;lsfAcctLogDir&#34; set to the correct logdir directory.

Note PBS job logging will not work correctly if the gatekeeper is merely
a queue forwarder -- the logs of the PBS master must be accessible.

Please let me know if you have trouble configuring this.

Thanks,
Chris.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1220966471'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-09T13:21:11+00:00">Sep 9, 2008 01:21 PM UTC</time> by <b>Kevin Buterbaugh</b><a class="anchor" name="1220966471">&nbsp;</a></div><pre>Hi Chris,

Here you go...

Kevin

/opt/osg
root@vampire# ./gratia-site-diag
gratia-site-diag version $Revision&#58; 1.9 $
SITE&#58; local
Directory output&#58; listing.{out,err}
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/o..pacman..o/logs/commands&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/vdt-install.log&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/vdt/setup/configure_gratia&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/osg-version&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/pbs/urCollector.conf&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/pbs/ProbeConfig&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/pbs/pbs-lsf.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/metric/ProbeConfig&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/metric/Metric.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/metric/samplemetric.py&#34; ...</font>
OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/samplemeter.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/DebugPrint.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/Gratia.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/</font>
RegisterProbe.py&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/</font>
samplemeter_multi.py&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/</font>
GetProbeConfigAttribute.py&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/var/logs/gratia-probe-</font>
pbs.log&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-attributes.conf&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-supported-vo-</font>
<div id='show_1737637420' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1737637420'>list.txt&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-undefined-</font>
accounts.txt&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/globus/lib/perl/Globus/GRAM/JobManager/</font>
fork.pm&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/globus/lib/perl/Globus/GRAM/JobManager/</font>
pbs.pm&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/var/logs/2008-09-09.log&#34; ... OK</font>
Diagnostics ...
<font color='#7F7E6F'>&#62; Found 0 unsent XML files in /opt/osg/gratia/var/tmp/gratiafiles</font>
<font color='#7F7E6F'>&#62; Checking for existence and date of probe log file gratia-probe-</font>
pbs.log ... OK
<font color='#7F7E6F'>&#62; Checking gratia_probe_pbs_ProbeConfig (verify INFO items manually)&#58;</font>
<font color='#7F7E6F'>&#62; INFO&#58; MeterName set to pbs&#58;vampire.accre.vanderbilt.edu</font>
<font color='#7F7E6F'>&#62; INFO&#58; SiteName set to Vanderbilt</font>
<font color='#7F7E6F'>&#62; INFO&#58; SOAPHost set to gratia.opensciencegrid.org&#58;8880</font>
<font color='#7F7E6F'>&#62; /opt/osg/gratia/probe/pbs/ProbeConfig OK</font>
<font color='#7F7E6F'>&#62; Checking gratia_probe_metric_ProbeConfig (verify INFO items</font>
manually)&#58;
<font color='#7F7E6F'>&#62; INFO&#58; MeterName set to metric&#58;vampire.accre.vanderbilt.edu</font>
<font color='#7F7E6F'>&#62; INFO&#58; SiteName set to Vanderbilt</font>
<font color='#7F7E6F'>&#62; INFO&#58; SOAPHost set to rsv.grid.iu.edu&#58;8880</font>
<font color='#7F7E6F'>&#62; /opt/osg/gratia/probe/metric/ProbeConfig OK</font>
<font color='#7F7E6F'>&#62; Checking /opt/osg/gratia/probe/pbs/urCollector.conf ...</font>
<font color='#7F7E6F'>&#62; pbsAcctLogDir is set to default value&#58; checking existence ...</font>
MISSING
/opt/osg
root@vampire#
</div><script type='text/javascript'>
        $('#show_1737637420').click(function() {
            $('#detail_1737637420').slideDown("normal");
            $('#show_1737637420').hide();
            $('#hide_1737637420').show();
        });
        $('#hide_1737637420').click(function() {
            $('#detail_1737637420').slideUp();
            $('#hide_1737637420').hide();
            $('#show_1737637420').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5470#1220911390'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-08T22:03:10+00:00">Sep 8, 2008 10:03 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1220911390">&nbsp;</a></div><pre>Please re-download gratia-site-diag from&#58;

<a href='https&#58;//twiki.grid.iu.edu/pub/Accounting/TroubleShootingInstructions/gratia-site-diag' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/pub/Accounting/TroubleShootingInstructions/gratia-site-diag</a>

Re-run and post info.

Thanks,
Chris.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5470#1220636727'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-09-05T17:45:27+00:00">Sep 5, 2008 05:45 PM UTC</time> by <b>echism</b><a class="anchor" name="1220636727">&nbsp;</a></div><pre>Gratia ops,

Are there any updates on this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='5470#1220048566'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-29T22:22:46+00:00">Aug 29, 2008 10:22 PM UTC</time> by <b>echism</b><a class="anchor" name="1220048566">&nbsp;</a></div><pre>Chris informed me before he left for his vacation that this script is current.
Gratia-ops, do you have any response on Kevin&#39;s results?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='5470#1219757949'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-26T13:39:09+00:00">Aug 26, 2008 01:39 PM UTC</time> by <b>Kevin Buterbaugh</b><a class="anchor" name="1219757949">&nbsp;</a></div><pre>Hi Elizabeth,

I followed the instructions in the link in the other e-mail you sent,
but did not get the results it said I would.  A screen scrape follows...

Kevin

/opt/osg/gratia
root@vampire# ./gratia-diag.pl
SITE&#58; local
Directory output&#58; listing.{out,err}
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/o..pacman..o/logs/commands&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/vdt-install.log&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/vdt/setup/configure_gratia&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/osg-version&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/pbs/urCollector.conf&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/pbs/ProbeConfig&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/pbs/pbs-lsf.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/metric/ProbeConfig&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/metric/Metric.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/metric/samplemetric.py&#34; ...</font>
OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/samplemeter.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/DebugPrint.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/Gratia.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/</font>
RegisterProbe.py&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/</font>
samplemeter_multi.py&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/</font>
ProbeConfigTemplate&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/</font>
GetProbeConfigAttribute.py&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/var/logs/gratia-probe-</font>
pbs.log&#34; ... OK
<div id='show_1751208083' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1751208083'><font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/configure-osg.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-undefined-</font>
accounts.txt.last_checked&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-attributes.conf&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/site-status&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-supported-vo-</font>
list.txt&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/full-config.ini&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/simple-config.ini&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/extract-config.ini&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/vomses&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-supported-vo-</font>
list.txt.last_checked&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/grid3-info.conf&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-local-job-</font>
environment.conf&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/gip-attributes.conf&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-job-environment.conf&#34; ...</font>
OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/config.ini&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/grid-site-state-info&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/extracted-config.ini&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/gums.template&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/configure-osg.sh&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-undefined-</font>
accounts.txt&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/grid3-user-vo-map.txt&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-user-vo-map.txt&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-user-vo-</font>
map.txt.last_checked&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-user-vo-map.txt.new&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/configure-osg-gip.sh&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/globus/lib/perl/Globus/GRAM/JobManager/</font>
fork.pm&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/globus/lib/perl/Globus/GRAM/JobManager/</font>
pbs.pm&#34; ... OK
Diagnostics ...
<font color='#7F7E6F'>&#62; Found 0 unsent XML files in /opt/osg/gratia/var/tmp/gratiafiles</font>
<font color='#7F7E6F'>&#62; Checking for existence and date of probe log file gratia-probe-</font>
pbs.log ... OK
<font color='#7F7E6F'>&#62; Checking gratia_probe_pbs_ProbeConfig&#58;</font>
<font color='#7F7E6F'>&#62; /opt/osg/gratia/probe/pbs/ProbeConfig OK</font>
<font color='#7F7E6F'>&#62; Checking for existence and date of probe log file gratia-probe-</font>
metric.log ...
<font color='#7F7E6F'>&#62; WARNING&#58; gratia-probe-metric.log does not exist&#58;</font>
is probe service enabled with vdt-control --on?
<font color='#7F7E6F'>&#62; Checking gratia_probe_metric_ProbeConfig&#58;</font>
<font color='#7F7E6F'>&#62; WARNING&#58; SOAPHost set to &#34;rsv.grid.iu.edu&#58;8880&#34;, which may not</font>
be correct.
<font color='#7F7E6F'>&#62; Please run the following commands&#58;</font>
<font color='#7F7E6F'>&#62; /opt/osg/vdt/setup/configure_gratia --probe metric --probe-</font>
cron --report-to gratia.opensciencegrid.org&#58;8880
<font color='#7F7E6F'>&#62; Check by re-running this diagnostics script and hand-correcting</font>
any remaining problems.
<font color='#7F7E6F'>&#62; Obtain and run gratia-repair-tmpfiles (instructions and</font>
download at
<a href='https&#58;//twiki.grid.iu.edu/twiki/bin/view/Accounting/TroubleShootingInstructions' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/twiki/bin/view/Accounting/TroubleShootingInstructions</a>)
to clear any backlogged XML files if they exist.
<font color='#7F7E6F'>&#62; Finally, execute&#58;</font>
<font color='#7F7E6F'>&#62; vdt-control --on gratia-metric</font>
<font color='#7F7E6F'>&#62; Checking /opt/osg/gratia/probe/pbs/urCollector.conf ...</font>
<font color='#7F7E6F'>&#62; pbsAcctLogDir is set to default value&#58; checking existence ...</font>
MISSING
/opt/osg/gratia
root@vampire# vdt-control --list
Service            | Type   | Desired State
-------------------+--------+--------------
fetch-crl          | cron   | enable
vdt-rotate-logs    | cron   | enable
vdt-update-certs   | cron   | enable
globus-gatekeeper  | inetd  | enable
gsiftp             | inetd  | enable
mysql              | init   | enable
globus-ws          | init   | enable
edg-mkgridmap      | cron   | do not enable
gums-host-cron     | cron   | enable
MLD                | init   | do not enable
condor-cron        | init   | enable
apache             | init   | enable
osg-rsv            | init   | enable
tomcat-55          | init   | enable
syslog-ng-sender   | init   | enable
gratia-pbs         | cron   | enable
/opt/osg/gratia
root@vampire# /opt/osg/vdt/setup/configure_gratia --probe metric --
probe-cron --report-to gratia.opensciencegrid.org&#58;8880
/opt/osg/gratia
root@vampire# ./gratia-diag.pl SITE&#58; local
Directory output&#58; listing.{out,err}
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/o..pacman..o/logs/commands&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/vdt-install.log&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/vdt/setup/configure_gratia&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/osg-version&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/pbs/urCollector.conf&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/pbs/ProbeConfig&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/pbs/pbs-lsf.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/metric/ProbeConfig&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/metric/Metric.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/metric/samplemetric.py&#34; ...</font>
OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/samplemeter.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/DebugPrint.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/Gratia.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/</font>
RegisterProbe.py&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/</font>
samplemeter_multi.py&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/</font>
ProbeConfigTemplate&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/probe/common/</font>
GetProbeConfigAttribute.py&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/gratia/var/logs/gratia-probe-</font>
pbs.log&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/configure-osg.py&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-undefined-</font>
accounts.txt.last_checked&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-attributes.conf&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/site-status&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-supported-vo-</font>
list.txt&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/full-config.ini&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/simple-config.ini&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/extract-config.ini&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/vomses&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-supported-vo-</font>
list.txt.last_checked&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/grid3-info.conf&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-local-job-</font>
environment.conf&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/gip-attributes.conf&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-job-environment.conf&#34; ...</font>
OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/config.ini&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/grid-site-state-info&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/extracted-config.ini&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/gums.template&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/configure-osg.sh&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-undefined-</font>
accounts.txt&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/grid3-user-vo-map.txt&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-user-vo-map.txt&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-user-vo-</font>
map.txt.last_checked&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/osg-user-vo-map.txt.new&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/monitoring/configure-osg-gip.sh&#34; ... OK</font>
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/globus/lib/perl/Globus/GRAM/JobManager/</font>
fork.pm&#34; ... OK
<font color='#7F7E6F'>&#62; Obtaining file &#34;/opt/osg/globus/lib/perl/Globus/GRAM/JobManager/</font>
pbs.pm&#34; ... OK
Diagnostics ...
<font color='#7F7E6F'>&#62; Found 0 unsent XML files in /opt/osg/gratia/var/tmp/gratiafiles</font>
<font color='#7F7E6F'>&#62; Checking for existence and date of probe log file gratia-probe-</font>
pbs.log ... OK
<font color='#7F7E6F'>&#62; Checking gratia_probe_pbs_ProbeConfig&#58;</font>
<font color='#7F7E6F'>&#62; /opt/osg/gratia/probe/pbs/ProbeConfig OK</font>
<font color='#7F7E6F'>&#62; Checking for existence and date of probe log file gratia-probe-</font>
metric.log ...
<font color='#7F7E6F'>&#62; WARNING&#58; gratia-probe-metric.log does not exist&#58;</font>
is probe service enabled with vdt-control --on?
<font color='#7F7E6F'>&#62; Checking gratia_probe_metric_ProbeConfig&#58;</font>
<font color='#7F7E6F'>&#62; Please run the following commands&#58;</font>
<font color='#7F7E6F'>&#62; /opt/osg/vdt/setup/configure_gratia --probe metric --probe-</font>
cron --report-to gratia.opensciencegrid.org&#58;8880
<font color='#7F7E6F'>&#62; Check by re-running this diagnostics script and hand-correcting</font>
any remaining problems.
<font color='#7F7E6F'>&#62; Obtain and run gratia-repair-tmpfiles (instructions and</font>
download at
<a href='https&#58;//twiki.grid.iu.edu/twiki/bin/view/Accounting/TroubleShootingInstructions' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/twiki/bin/view/Accounting/TroubleShootingInstructions</a>)
to clear any backlogged XML files if they exist.
<font color='#7F7E6F'>&#62; Finally, execute&#58;</font>
<font color='#7F7E6F'>&#62; vdt-control --on gratia-metric</font>
<font color='#7F7E6F'>&#62; Checking /opt/osg/gratia/probe/pbs/urCollector.conf ...</font>
<font color='#7F7E6F'>&#62; pbsAcctLogDir is set to default value&#58; checking existence ...</font>
MISSING
/opt/osg/gratia
root@vampire# vi gratia-repair-tmpfiles.sh
/opt/osg/gratia
root@vampire# chmod 755 gratia-repair-tmpfiles.sh
/opt/osg/gratia
root@vampire# ./gratia-repair-tmpfiles.sh
$VDT_LOCATION/gratia/var/tmp/gratiafiles doe not exist!
/opt/osg/gratia
root@vampire# ls -la
total 48
drwxr-xr-x  7 root root  4096 Aug 26 08&#58;32 .
drwxr-xr-x 40 root root  4096 Aug  6 11&#58;37 ..
drwxr-xr-x  2 root root  4096 Aug  6 08&#58;40 etc
-rwxr-xr-x  1 root root 14479 Aug 26 08&#58;20 gratia-diag.pl
-rwxr-xr-x  1 root root   923 Aug 26 08&#58;32 gratia-repair-tmpfiles.sh
drwxr-xr-x  2 root root  4096 Aug 26 08&#58;20 GratiaTests_local_20080826
drwxr-xr-x  3 root root  4096 Aug  6 08&#58;40 logs
drwxr-xr-x  5 root root  4096 Aug  6 08&#58;44 probe
drwxr-xr-x  9 root root  4096 Aug  6 13&#58;23 var
/opt/osg/gratia
root@vampire# ls -al tmp
ls&#58; tmp&#58; No such file or directory
/opt/osg/gratia
root@vampire# ls -la var
total 188
drwxr-xr-x 9 root root   4096 Aug  6 13&#58;23 .
drwxr-xr-x 7 root root   4096 Aug 26 08&#58;32 ..
drwxr-xr-x 2 root root   4096 Aug  6 08&#58;40 account
drwxr-xr-x 2 root root   4096 Aug  6 08&#58;40 backup
drwxrwxrwt 2 root root 155648 Aug 26 08&#58;05 data
drwxr-xr-x 2 root root   4096 Aug 26 08&#58;32 lock
drwxr-xr-x 2 root root   4096 Aug 26 00&#58;02 logs
drwxr-xr-x 5 root root   4096 Aug  6 13&#58;23 rsv
drwxr-xr-x 3 root root   4096 Mar 26 10&#58;17 tmp
/opt/osg/gratia
root@vampire# ls -la var/tmp
total 12
drwxr-xr-x 3 root root 4096 Mar 26 10&#58;17 .
drwxr-xr-x 9 root root 4096 Aug  6 13&#58;23 ..
drwxr-x--- 2 root root 4096 Mar 26 10&#58;17 urCollector
/opt/osg/gratia
root@vampire#

On Aug 25, 2008, at 7&#58;54 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1751208083').click(function() {
            $('#detail_1751208083').slideDown("normal");
            $('#show_1751208083').hide();
            $('#hide_1751208083').show();
        });
        $('#hide_1751208083').click(function() {
            $('#detail_1751208083').slideUp();
            $('#hide_1751208083').hide();
            $('#show_1751208083').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5470#1219711694'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-26T00:48:14+00:00">Aug 26, 2008 12:48 AM UTC</time> by <b>echism</b><a class="anchor" name="1219711694">&nbsp;</a></div><pre>Kevin,

Vanderbilt is not reporting to gratia. Please followup on this issue. For
troubleshooting purposes, a link to a gratia diagnostic script and a filename cleanup
script with instructions is included below.

<a href='https&#58;//twiki.grid.iu.edu/bin/view/Accounting/TroubleShootingInstructions#Script_instructions' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Accounting/TroubleShootingInstructions#Script_instructions</a>

Thank you,
Elizabeth</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F5470">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 5470});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
