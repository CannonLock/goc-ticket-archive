<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[4708] dCache - simple srmcp not working after enabling space reservation</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=4708" method="post">
<div class="page-header">
    <h3><span class="muted">4708</span> / dCache - simple srmcp not working after enabling space reservation</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Neha Sharma</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">1970-01-01</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Neha Sharma <span class="muted"> / OSG Storage Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/4708", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/4708?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/4708?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20dCache%20-%20simple%20srmcp%20not%20working%20after%20enabling%20space%20reservation%20ISSUE%3D4708%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='4708#1204735223'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-03-05T16:40:23+00:00">Mar 5, 2008 04:40 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1204735223">&nbsp;</a></div><pre>Xin Zhao wrote&#58;
Hi Ted,
Thanks for forwarding the instructions, some questions below&#58;

On Fri, 2008-02-29 at 12&#58;09, Ted Hesselroth wrote&#58;

Your PoolManager.conf file doesn&#39;t have the link groups needed for space reservation.

No? I have this section in the PoolManager.conf&#58;

# define a linkGroup for write pool, which is basically a non-tape
online volatile storage
psu create linkGroup write-link-group
psu addto linkGroup  write-link-group write-link
psu set linkGroup attribute write-link-group HSM=None
psu set linkGroup custodialAllowed write-link-group false
psu set linkGroup onlineAllowed write-link-group true
psu set linkGroup nearlineAllowed write-link-group true
psu set linkGroup replicaAllowed write-link-group true
psu set linkGroup outputAllowed write-link-group true

Will this do it?
Yes, that&#39;s fine. Sorry, I should have read it more carefully. When you get the
errors, are you using a space token explicitly in srmcp? Because you have no write
pools outside of space reservation, writes will otherwise fail.

Your PoolManager.conf file doesn&#39;t have the link groups needed for space reservation.
You can still have read and write pools, just have your write pools added to the
public link instead of the write link. Or, you can add them to the reserved link
instead and authorize a specific VO in LinkGroupAuthorization.conf. I will forward
you the instructions.

If you want to start from your present PoolManager.conf, you would need to add a link
group for your write link and add an entry to LinkGroupAuthorization.conf.

<div id='show_1129233770' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1129233770'>Ted

Xin Zhao wrote&#58;
Ted,

I can&#39;t find the instructions from you to the ITB mailing list, could
you forward to me again?
I did start with the version of PoolManager.conf of the VDT package, if you look at
the attached PoolManager.conf, it starts with&#58;

&#34;
#
# $Id&#58; PoolManager.conf,v 1.4 2007-07-05 13&#58;45&#58;57 radicke Exp $
#
&#34;

I think the default config has all pools set up as write/read pool, but
in our case, I want to separate them, so I created two pgroups, one for
write pool, one for read pool. Then create the linkGroups of
write-link-group.
One thing I think I did wrong was to add the readpools to the
write-link-group. Another thing might be that I should have not have
added all write pools to the linkGroup, instead, if I leave one of my two write pools
off the linkGroup, the ordinary srmcp v1 command might work, is this right? Right now
I can use srmV2 protocol to copy
files into dCache, but once it&#39;s transfered, I can&#39;t read them out, I can see the
files only reside on the write pools, not automatically
transferred to read pool.
So I hope I can get some instructions on how to correct the above issues.

Thanks,
Xin

On Fri, 2008-02-29 at 11&#58;02, Ted Hesselroth wrote&#58;

Our install scripts write a different PoolManager.conf than the one you started with.
Please replace it with the one from the config directory of the untarred VDT package
of dCache. You will then need to add pools the the public link. I refer you to my
earlier instructions, posted on osg-int.

Ted

Xin Zhao wrote&#58;

(add Suchandra to the list, sorry for the repeat for others)

Hi,

I enabled the space reservation, then try a normal srmcp&#58;

srmcp -debug=true file&#58;////$PWD/setup.sh
<a href='srm&#58;//grid16.racf.bnl.gov&#58;8443///pnfs/racf.bnl.gov/data/testdir/newtest-1' target='_blank' rel='nofollow'>srm&#58;//grid16.racf.bnl.gov&#58;8443///pnfs/racf.bnl.gov/data/testdir/newtest-1</a>

It fails with error of &#34; no space available&#34; (see below).

I enabled srmImplicitSpaceManagerEnabled on both srm and gridftp doors. According to
the doc this should not fail
a regular srmcp. Do I miss something here?  I also attach the PoolManager.conf (admin
node) and dCacheSetup
(srm node) files here.

Thanks,
Xin

SRMClientV1 &#58;   put,
sources[0]=&#34;<a href='srm&#58;//grid16.racf.bnl.gov&#58;8443///pnfs/racf.bnl.gov/data/testdir/newtest-1&#34' target='_blank' rel='nofollow'>srm&#58;//grid16.racf.bnl.gov&#58;8443///pnfs/racf.bnl.gov/data/testdir/newtest-1&#34</a>;
SRMClientV1 &#58;   put,
dests[0]=&#34;<a href='srm&#58;//grid16.racf.bnl.gov&#58;8443///pnfs/racf.bnl.gov/data/testdir/newtest-1&#34' target='_blank' rel='nofollow'>srm&#58;//grid16.racf.bnl.gov&#58;8443///pnfs/racf.bnl.gov/data/testdir/newtest-1&#34</a>;
SRMClientV1 &#58;   put, protocols[0]=&#34;gsiftp&#34;
SRMClientV1 &#58;   put, protocols[1]=&#34;dcap&#34;
SRMClientV1 &#58;   put, protocols[2]=&#34;http&#34;
SRMClientV1 &#58;  put, contacting service httpg&#58;//grid16.racf.bnl.gov&#58;8443/srm/managerv1
Thu Feb 28 21&#58;12&#58;42 EST 2008&#58;  srm returned requestId = -2147465648
Thu Feb 28 21&#58;12&#58;42 EST 2008&#58; sleeping 4 seconds ...
Thu Feb 28 21&#58;12&#58;47 EST 2008&#58; rs.state = Failed rs.error =  at Thu Feb 28 21&#58;12&#58;42
EST 2008 state Pending &#58; created
RequestFileStatus#-2147465647 failed with error&#58;[  at Thu Feb 28 21&#58;12&#58;42 EST 2008
state Failed &#58;  no space available]

Thu Feb 28 21&#58;12&#58;47 EST 2008&#58;       ====&#62; fileStatus state ==Failed
java.io.IOException&#58; rs.state = Failed rs.error =  at Thu Feb 28 21&#58;12&#58;42 EST 2008
state Pending &#58; created
RequestFileStatus#-2147465647 failed with error&#58;[  at Thu Feb 28 21&#58;12&#58;42 EST 2008
state Failed &#58;  no space available]

at gov.fnal.srm.util.SRMPutClientV1.start(SRMPutClientV1.java&#58;333)
at gov.fnal.srm.util.SRMDispatcher.work(SRMDispatcher.java&#58;779)
at gov.fnal.srm.util.SRMDispatcher.main(SRMDispatcher.java&#58;372)
copy_jobs is empty
stopping copier
------------------------------------------------------------------------

#
# $Id&#58; PoolManager.conf,v 1.4 2007-07-05 13&#58;45&#58;57 radicke Exp $
#
# Setup of PoolManager (diskCacheV111.poolManager.PoolManagerV5)
#
set pool decision  -spacecostfactor=1.0 -cpucostfactor=1.0
#
#
# The units ...
#
psu create unit -net    0.0.0.0/255.255.255.255
psu create unit -net    0.0.0.0/0.0.0.0
psu create unit -store  *@*
psu create unit -protocol */*
#
# The unit Groups ...
#
psu create ugroup any-store
psu addto ugroup any-store *@*
psu create ugroup world-net
psu addto ugroup world-net 0.0.0.0/0.0.0.0
psu create ugroup any-protocol
psu addto  ugroup any-protocol */*
#
# The pools ...
#
# psu create pool cms-pool
psu create pool grid17_1
psu create pool grid17_2
psu create pool grid18_1
psu create pool grid18_2
#
# The pool groups ...
#
psu create pgroup default
psu create pgroup ResilientPools
psu create pgroup writePools
psu addto pgroup writePools grid18_1
psu addto pgroup writePools grid18_2
psu create pgroup readPools
psu addto pgroup readPools grid17_1
psu addto pgroup readPools grid17_2
# psu create pgroup all-pools
# psu addto pgroup all-pools cms-pool
#
# The links ...
#
psu create link default-link any-store world-net any-protocol
psu set link default-link -readpref=10 -writepref=10 -cachepref=10 -p2ppref=-1
psu add link default-link default

psu create
link read-link world-net any-store
psu set link read-link -readpref=20 -writepref=0 -cachepref=20
psu add link read-link readPools

psu create
link write-link world-net any-store
psu set link write-link -readpref=0 -writepref=20 -cachepref=0
psu add link write-link writePools

# psu add link default-link all-pools
#
#
# The link groups ...
#
# psu create linkGroup default-link-group
# psu addto linkGroup default-link-group default-link
# psu set linkGroup attribute -r default-link-group HSM=None
#
# to define a link group capable of storing # custodial type of files HSM attribute
should be Non-None
# like in this example&#58;
# psu set linkGroup attribute -r default-link-group HSM=OSM
#
#  If no Vo information is assigned to the LinkGroup, any Vo group can make reservation
# please see the following examples of how to assign particular VOs and VO Groups to
a given link&#58;
# #  1) assign VOs to a LinkGroup. While PoolManager does not have a ability to
specify  #       VO and Role it&#39;s given to it as attributes of the linkGroup.
# psu set linkGroup attribute default-link-group VO=alice
# psu set linkGroup attribute default-link-group VO=cms
# psu set linkGroup attribute default-link-group VO=atlas
#
#  2)  to add Roles for a VO see the following example. #         Here syntax is
important. The role attribute name is constructed from &#60;VO name&#62; + &#34;Role&#34;
#
# psu set linkGroup attribute default-link-group cmsRole=/cms/NULL/production
# psu set linkGroup attribute default-link-group cmsRole=/cms/NULL/mc

# define a linkGroup for write pool, which is basically a non-tape online volatile
storage
psu create linkGroup write-link-group
psu addto linkGroup  write-link-group write-link
psu addto linkGroup  write-link-group read-link
psu set linkGroup attribute write-link-group HSM=None
psu set linkGroup custodialAllowed write-link-group false
psu set linkGroup onlineAllowed write-link-group true
psu set linkGroup nearlineAllowed write-link-group true
psu set linkGroup replicaAllowed write-link-group true
psu set linkGroup outputAllowed write-link-group true

#
# Submodule [rc] &#58; class diskCacheV111.poolManager.RequestContainerV5
#
#rc onerror suspend
#rc set max retries 3
#rc set retry 900
#rc set warning path billing
#rc set p2p oncost
#rc set stage off
#rc set fallback oncost off
#set costcut 1.0 2.0
#
#
#
rc onerror suspend
rc set max retries 999
rc set max retries 3
rc set retry 900
rc set warning path billing
rc set poolpingtimer 600
rc set slope 0.0
rc set p2p oncost
rc set stage oncost off
rc set stage off
set timeout pool 120
set costcuts -idle=0.0 -p2p=2.0 -alert=0.0 -halt=0.0 -fallback=0.0
rc set max copies 500
rc set max restore unlimited
rc set sameHostCopy besteffort
rc set max threads 0
#
# Cost Module
#
cm set magic on

------------------------------------------------------------------------

#
# based on dCacheSetup.template $Revision&#58; 1.33 $
#

#  -----------------------------------------------------------------------
#          config/dCacheSetup
#  -----------------------------------------------------------------------
#   This is the central configuration file for a dCache instance. In most
#   cases it should be possible to keep it identical across the nodes of
#   one dCache instance.
#
#   This template contains all options that can possibly be used. Most
#   may be left at the default value. If the option is commented out below
#   is indicates the default value. If it is not commented out it is set
#   to a reasonable value.
#
#   To get a dCache instance running it suffices to change the options&#58;
#    - java		 	The java binary
#    - serviceLocatorHost	The hostname of the admin node
#   The other values should only be changed when advised to do so by the
#   documentation.
#

#  -----------------------------------------------------------------------
#          Service Location
#  -----------------------------------------------------------------------

#  ---- Service Locater Host and Port
#   Adjust this to point to one unique server for one and only one
#   dCache instance (usually the admin node)
#
#serviceLocatorHost=SERVER
serviceLocatorHost=grid13.racf.bnl.gov
serviceLocatorPort=11111

#  -----------------------------------------------------------------------
#          Components
#  -----------------------------------------------------------------------

#  To activate Replica Manager you need make changes in all 3 places&#58;
#   1) etc/node_config on ALL ADMIN NODES in this dcache instance.
#   2) replicaSetup file on node where replica manager is runnig
#   3) define Resilient pool group(s) in PoolManager.conf

#  ---- Will Replica Manager be started?
#   Values&#58;  no, yes
#   Default&#58; no
#
#   This has to be set to &#39;yes&#39; on every node, if there is a replica
#   manager in this dCache instance. Where the replica manager is started
#   is controlled in &#39;etc/node_config&#39;. If it is not started and this is
#   set to &#39;yes&#39; there will be error messages in log/dCacheDomain.log. If
#   this is set to &#39;no&#39; and a replica manager is started somewhere, it will
#   not work properly.
#
#
#replicaManager=no
replicaManager=yes

#  ---- Which pool-group will be the group of resilient pools?
#   Values&#58;  &#60;pool-Group-Name&#62;, a pool-group name existing in the PoolManager.conf
#   Default&#58; ResilientPools
#
#   Only pools defined in pool group ResilientPools in config/PoolManager.conf
#   will be managed by ReplicaManager. You shall edit config/PoolManager.conf
#   to make replica manager work. To use another pool group defined
#   in PoolManager.conf for replication, please specify group name by changing setting &#58;
#       #resilientGroupName=ResilientPools
#   Please scroll down &#34;replica manager tuning&#34; make this and other changes.

#  -----------------------------------------------------------------------
#          Java Configuration
#  -----------------------------------------------------------------------

#  ---- The binary of the Java VM
#   Adjust to the correct location.
#
# shold point to &#60;JDK&#62;/bin/java
#java=&#34;/usr/bin/java&#34;
java=/opt/d-cache/java//jdk1.6.0_03/bin/java

#
#  ---- Options for the Java VM
#   Do not change unless yoy know what you are doing.
#   If the globus.tcp.port.range is changed, the
#   variable &#39;clientDataPortRange&#39; below has to be changed accordingly.
#
#java_options=&#34;-server -Xmx512m -XX&#58;MaxDirectMemorySize=512m &#92;
#              -Dsun.net.inetaddr.ttl=1800 &#92;
#              -Dorg.globus.tcp.port.range=20000,25000 &#92;
#              -Djava.net.preferIPv4Stack=true &#92;
#              -Dorg.dcache.dcap.port=0 &#92;
#              -Dorg.dcache.net.tcp.portrange=33115&#58;33145 &#92;
#              -Dlog4j.configuration=file&#58;${ourHomeDir}/config/log4j.properties &#92;
#             &#34;
java_options=&#34;-server -Xmx512m -XX&#58;MaxDirectMemorySize=512m
-Dsun.net.inetaddr.ttl=1800 -Dorg.globus.tcp.port.range=20000,25000
-Djava.net.preferIPv4Stack=true -Dorg.dcache.dcap.port=0
-Dorg.dcache.net.tcp.portrange=33115&#58;33145
-Dlog4j.configuration=file&#58;${ourHomeDir}/config/log4j.properties &#34;
#   Option for Kerberos5 authentication&#58;
#              -Djava.security.krb5.realm=FNAL.GOV &#92;
#              -Djava.security.krb5.kdc=krb-fnal-1.fnal.gov &#92;
#   Other options that might be useful&#58;
#              -Dlog4j.configuration=/opt/d-cache/config/log4j.properties &#92;
#              -Djavax.security.auth.useSubjectCredsOnly=false &#92;
#              -Djava.security.auth.login.config=/opt/d-cache/config/jgss.conf &#92;
#              -Xms400m &#92;

#  ---- Classpath
#   Do not change unless yoy know what you are doing.
#
classesDir=${ourHomeDir}/classes
classpath=

#  ---- Librarypath
#   Do not change unless yoy know what you are doing.
#   Currently not used. Might contain .so librarys for JNI
#
librarypath=${ourHomeDir}/lib

#  -----------------------------------------------------------------------
#          Filesystem Locations
#  -----------------------------------------------------------------------

#  ---- Location of the configuration files
#   Do not change unless yoy know what you are doing.
#
config=${ourHomeDir}/config

#  ---- Location of the ssh
#   Do not change unless yoy know what you are doing.
#
keyBase=${ourHomeDir}/config

#  ---- SRM/GridFTP authentication file
#   Do not change unless yoy know what you are doing.
#
kpwdFile=${ourHomeDir}/etc/dcache.kpwd

#  -----------------------------------------------------------------------
#         pool tuning
#  -----------------------------------------------------------------------
#   Do not change unless yoy know what you are doing.
#
# poolIoQueue=
# checkRepository=true
# waitForRepositoryReady=false
#
#  ---- Which meta data repository implementation to use.
#    Values&#58; org.dcache.pool.repository.meta.file.FileMetaDataRepository
#            org.dcache.pool.repository.meta.db.BerkeleyDBMetaDataRepository
#    Default&#58; org.dcache.pool.repository.meta.file.FileMetaDataRepository
#
#   Selects which meta data repository implementation to use. This is
#   essentially a choice between storing meta data in a large number
#   of small files in the control/ directory, or to use the embedded
#   Berkeley database stored in the meta/ directory (both directories
#   placed in the pool directory).
#
# metaDataRepository=org.dcache.pool.repository.meta.file.FileMetaDataRepository
#
#  ---- Which meta data repository to import from.
#    Values&#58; org.dcache.pool.repository.meta.file.FileMetaDataRepository
#            org.dcache.pool.repository.meta.db.BerkeleyDBMetaDataRepository
#            &#34;&#34;
#    Default&#58; &#34;&#34;
#
#   Selects which meta data repository to import data from if the
#   information is missing from the main repository. This is useful
#   for converting from one repository implementation to another,
#   without having to fetch all the information from the central PNFS
#   manager.
#
# metaDataRepositoryImport=&#34;&#34;
#
#  -----------------------------------------------------------------------
#         gPlazma tuning
#  -----------------------------------------------------------------------
#   Do not change unless yoy know what you are doing.
#
gplazmaPolicy=${ourHomeDir}/etc/dcachesrm-gplazma.policy
#
#gPlazmaNumberOfSimutaneousRequests  30
#gPlazmaRequestTimeout               30
#
#useGPlazmaAuthorizationModule=false
#useGPlazmaAuthorizationCell=true
#delegateToGPlazma=false
#
#
#  -----------------------------------------------------------------------
#         dcap tuning
#  -----------------------------------------------------------------------
#
# gsidcapIoQueue=
# gsidcapIoQueueOverwrite=denied
# gsidcapMaxLogin=1500
# dcapIoQueue=
# dcapIoQueueOverwrite=denied
# dcapMaxLogin=1500
#
#  -----------------------------------------------------------------------
#         gsiftp tuning
#  -----------------------------------------------------------------------
#
#  ---- Seconds between GridFTP performance markers
#   Set  performanceMarkerPeriod to 180 to get performanceMarkers
#   every 3 minutes.
#   Set to 0 to disable performance markers.
#   Default&#58; 180
#
# performanceMarkerPeriod=180
#
# gsiftpPoolManagerTimeout=5400
# gsiftpPoolTimeout=600
# gsiftpPnfsTimeout=300
# gsiftpMaxRetries=80
# gsiftpMaxStreamsPerClient=10
# gsiftpDeleteOnConnectionClosed=true
# gsiftpMaxLogin=100
# clientDataPortRange=20000&#58;25000
# gsiftpIoQueue=
# gsiftpAdapterInternalInterface=
# remoteGsiftpIoQueue=
# FtpTLogDir=
#
</div><script type='text/javascript'>
        $('#show_1129233770').click(function() {
            $('#detail_1129233770').slideDown("normal");
            $('#show_1129233770').hide();
            $('#hide_1129233770').show();
        });
        $('#hide_1129233770').click(function() {
            $('#detail_1129233770').slideUp();
            $('#hide_1129233770').hide();
            $('#show_1129233770').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F4708">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 4708});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
