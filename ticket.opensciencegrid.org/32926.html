<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[32926] Transfer timeouts to JINR_Disk</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=32926" method="post">
<div class="page-header">
    <h3><span class="muted">32926</span> / Transfer timeouts to JINR_Disk</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Sebastian Pulido</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Sebastian Pulido</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-05-09</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322">INC000000829322</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=126123">126123</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/32926", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='32926#1493923737'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-04T18:48:57+00:00">May 4, 2017 06:48 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1493923737">&nbsp;</a></div><pre>Nikolay Voytishin has subscribed to this ticket.

Hi all!

The errors stopped to appear since April 28 [1].
It looks like the ticket can be closed.

We would like to have a chat via skype with Natalia because we still have to clarify some uncertainties.
If anybody else is interested, just let us know. We&#39;ll switch to private messages in order to set the time of the meeting.

Best regards,
Nikolay

[1] <a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;ErrorInfo?tofilter=T1_US_FNAL&fromfilter=T1_RU_JINR&report_code=.*&xfer_code=.*&to_pfn=.*&from_pfn=.*&log_detail=.*&log_validate=.*&.submit=Updatethe errors stopped - <a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;ErrorInfo?tofilter=T1_US_FNAL&fromfilter=T1_RU_JINR&report_code=.*&xfer_code=.*&to_pfn=.*&from_pfn=.*&log_detail=.*&log_validate=.*&.submit=Update

[GOC-TX Warning]
Source GGUS Ticket ID&#58; 126123 specifies affected site name of  JINR-T1 which does not exist in OIM(resource/name) and it is ignored.
-- by Nikolay Voytishin at Wed May 03 11&#58;03&#58;05 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1493662460'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-01T18:14:20+00:00">May 1, 2017 06:14 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1493662460">&nbsp;</a></div><pre>Hi Valery,
the codes you ask about are not necessarily the exit codes from some external command.  These are internal PhEDEx values, or flags, stored in the oracle tables and used by various agents&#39; logic to decide on their next steps. Particularly when transfer task is about to expire, download agent will not attempt the transfe and will set report_code to PHEDEX_RC_EXPIRED, which is a predefined constant -1, see <a href='https&#58;//github.com/dmwm/PHEDEX/blob/master/perl_lib/PHEDEX/Error/Constants.pm.' target='_blank' rel='nofollow'>https&#58;//github.com/dmwm/PHEDEX/blob/master/perl_lib/PHEDEX/Error/Constants.pm.</a> But nothing failed.

If some program does fail, we should  see that from the logs. If the problem does not resolve by next week,  please send me your logs. We could also set a skype meeting and have a look together to speed up the debugging.

As for routing data which are only present on one site, obviously they will be re-routed again from the same source. This is why I think Jean-Roch suggested in update#25 to redirect data stuck at  FNAL-&#62;JINR to another system.

- Natalia.

[GOC-TX Warning]
Source GGUS Ticket ID&#58; 126123 specifies affected site name of  JINR-T1 which does not exist in OIM(resource/name) and it is ignored.
-- by Natalia Ratnikova at Fri Apr 28 22&#58;42&#58;19 UTC 2017

Hi Natalia,

I still do not understand &#34;report-code=-1 xfer-code=-2&#34;, which program return negative value and why?

As concerns reroute expired transfers, what will be with files that do not have another source?

-- by Valery Mitsyn at Fri Apr 28 14&#58;08&#58;04 UTC 2017

Hi Valery,

each transfer task for the files is created with an  expiration time. If the task did not manage to complete before expiration,  the Download agent will no execute it but mark as expired. The expired tasks will eventually be rerouted.  This gives Router agent  a possibility to pick a better source.
If at some point  there was a massive subscription to your site, if transfers were not efficient,  you are going to see massive expirations.

As concerns the report-code=-1 xfer-code=-2  are some internal values, explained in this piece of code&#58;
<a href='https&#58;//github.com/dmwm/PHEDEX/blob/master/perl_lib/PHEDEX/File/Download/Agent.pm#L932-L945' target='_blank' rel='nofollow'>https&#58;//github.com/dmwm/PHEDEX/blob/master/perl_lib/PHEDEX/File/Download/Agent.pm#L932-L945</a>

I could probably  tell  more if I could see the complete logs. But I hope this  clarifies things a bit.
Thanks.
Natalia

-- by Natalia Ratnikova at Thu Apr 27 22&#58;12&#58;33 UTC 2017

<div id='show_358318364' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_358318364'>Hi,

what i can see from PhEDEx&#39; logs a) and in the Web b), there are still&#58;
a) many &#34;report-code=-1 xfer-code=-2&#34; from T1_US_FNAL_Buffer;
b) 612 Expired in the last 2 hours, 0 transfer, 0 errors.
What does it mean a) & b)? Could anybody shed a light?
Most other transfers to our Disk looks good.

-- by Valery Mitsyn at Wed Apr 26 17&#58;16&#58;20 UTC 2017

Reopening since this is still a JINR ticket. FNAL can unsubscribe if you want.Nothing needs to nor can be done at T1_US_FNAL. Closing FNAL INC000000829322.
-- by huangch at Wed Apr 26 16&#58;22&#58;33 UTC 2017

[Closed/Resolved by Caller]
Closed by Caller
-- by  at Wed Apr 26 16&#58;22&#58;33 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by Siddharth Narayanan at Wed Apr 26 16&#58;46&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_358318364').click(function() {
            $('#detail_358318364').slideDown("normal");
            $('#show_358318364').hide();
            $('#hide_358318364').show();
        });
        $('#hide_358318364').click(function() {
            $('#detail_358318364').slideUp();
            $('#hide_358318364').hide();
            $('#show_358318364').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1493224445'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-26T16:34:05+00:00">Apr 26, 2017 04:34 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1493224445">&nbsp;</a></div><pre>Hi Sid,

stage-in test stuck, no transfer from T1_RU_JINR_Buffer to T1_RU_JINR_Disk for the last 2 hours.
On the other hand, stage-in on the MSS side works fine and Disk instance works too.
All tranfers T1_RU_JINR_Buffer to T1_RU_JINR_Disk stay as &#34;Expired&#34;.

How to procceed?
Is this the same effect of auto-tuning in FTS?

[GOC-TX Warning]
Source GGUS Ticket ID&#58; 126123 specifies affected site name of  JINR-T1 which does not exist in OIM(resource/name) and it is ignored.
-- by Valery Mitsyn at Wed Apr 26 14&#58;33&#58;28 UTC 2017

Hi Sid,

I&#39;ve set now for all FTSDownload agents&#58;
-batch-files           250
-max-active-files      500
-link-pending-files    100
and restart them.

BTW, it seems some agents stuck at our PhEDEx&#39;es after firewall changes, restart help to start transfers again.

-- by Valery Mitsyn at Wed Apr 26 13&#58;13&#58;05 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1493223925'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-26T16:25:25+00:00">Apr 26, 2017 04:25 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1493223925">&nbsp;</a></div><pre>Nothing needs to nor can be done at T1_US_FNAL. Closing FNAL INC000000829322.
-- by huangch at Wed Apr 26 16&#58;22&#58;33 UTC 2017

[Closed/Resolved by Caller]
Closed by Caller
-- by  at Wed Apr 26 16&#58;22&#58;33 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a></pre></div><div class='update_description'><i onclick="document.location='32926#1493209312'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-26T12:21:52+00:00">Apr 26, 2017 12:21 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1493209312">&nbsp;</a></div><pre>[Closed/Resolved by Caller]
Closed by Caller
-- by  at Tue Apr 25 21&#58;10&#58;02 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a></pre></div><div class='update_description'><i onclick="document.location='32926#1493208990'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-26T12:16:30+00:00">Apr 26, 2017 12:16 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1493208990">&nbsp;</a></div><pre>Hi all,

We were tweaking some configuration centrally. Right now, we&#39;ve enforced (in FTS) at least 30 active transfers from each T1_MSS to JINR_Disk. The maximum number of transfers to JINR is capped at 300. However, it looks like PhEDEx configuration limitations conflict with this, so we&#39;d like to ask JINR to try setting the following parameters&#58;

-link-pending-files  100     [ as suggested by Christoph ]
-max-active-files   300      [ to match FTS ]
-link-active-files  60          [ to be higher than the FTS min ]

Best,
Sid

[GOC-TX Warning]
Source GGUS Ticket ID&#58; 126123 specifies affected site name of  JINR-T1 which does not exist in OIM(resource/name) and it is ignored.
-- by Siddharth Narayanan at Wed Apr 26 12&#58;13&#58;10 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1493146628'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-25T18:57:08+00:00">Apr 25, 2017 06:57 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1493146628">&nbsp;</a></div><pre>Is there anything new on this ticket?  I don&#39;t see any attempts to contact JINR on the GGUS side. Forgive me if I am missing something.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='32926#1492790572'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T16:02:52+00:00">Apr 21, 2017 04:02 PM UTC</time> by <b>echism</b><a class="anchor" name="1492790572">&nbsp;</a></div><pre>I&#39;m going to be out the next two weeks and I&#39;m passing this ticket to Kyle Gross. If everyone is giving up on this, please say so and we&#39;ll close the ticket.

Thank you</pre></div><div class='update_description'><i onclick="document.location='32926#1492448790'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-17T17:06:30+00:00">Apr 17, 2017 05:06 PM UTC</time> by <b>echism</b><a class="anchor" name="1492448790">&nbsp;</a></div><pre>Is there anything new on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='32926#1491584405'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-07T17:00:05+00:00">Apr 7, 2017 05:00 PM UTC</time> by <b>echism</b><a class="anchor" name="1491584405">&nbsp;</a></div><pre>Has anyone been able to get in touch with JINR?

Thank you</pre></div><div class='update_description'><i onclick="document.location='32926#1491404900'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-05T15:08:20+00:00">Apr 5, 2017 03:08 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1491404900">&nbsp;</a></div><pre>We have not changed anything on the FNAL side -- indeed the file being flushed off the buffer was a rare edge case -- for the most part it appears if a transfer timed out before the file was successfully pulled off a tape, that the retry is able to get the file later.  We do have a pin lifetime of an hour, but with the PB buffer its not affecting anything (an exception being the brief period two weeks ago when we managed to fill the buffer with LoadTest files).  So far it appears we could equivalently change or not change the pin lifetime -- but ultimately we&#39;ve not changed anything on our side.

-- by David Mason at Wed Apr 05 15&#58;03&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1491403584'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-05T14:46:24+00:00">Apr 5, 2017 02:46 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1491403584">&nbsp;</a></div><pre>Ticket has been tagged &#34;VO specific&#34;.
Hi Sid,

let me take the occasion an try to summarize the meeting.

The throughout has been increased after the optimizer in FTS3 was basically switched off and now always runs 50 transfers in parallel. This increases the the rate to ~100MB/s, which is not too bad. But this rates are only achieved, when a large number of files is transferred in parallel.

I attached a plot form the FTS monitoring for the link in question. It shows the transfers going in funny shapes. Every 2 hours(?) the 50 transfers are started good throughput is reached and things tail off again. It would be good to understand what leads to this. I guess Phedex does not submit enough transfer requests, since there is no FTS queues as far as I understand the monitoring. How can this be changed? Likely Phedex download agent configuration, the &#34;link-pending-files&#34; appears to be a good candidate (Natalia, Sid?)

The failure rate is very small, below one 1%. It seems we are not frequently hit by the problem that a file actually has vanished from the stage buffer before actually being transferred. FNAL admins wanted to re-discuss their setting of 1h life time of a file on the buffer. Not sure, if something was changed (Dave?)

No further insides how things look from JINR side could be gained, since no one made it to the chat.

Many thanks to the FTS experts, who joined. At least I learned a lot.

Christoph

-- by Christoph Wissing at Wed Apr 05 14&#58;41&#58;09 UTC 2017

Added attachment FNAL2JINR.png
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT107351' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT107351</a>

-- by Christoph Wissing at Wed Apr 05 14&#58;41&#58;08 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1491314975'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-04T14:09:35+00:00">Apr 4, 2017 02:09 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1491314975">&nbsp;</a></div><pre>Hi all,

Were there any conclusions from this meeting?

-Sid

-- by Siddharth Narayanan at Tue Apr 04 14&#58;06&#58;02 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490991337'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-31T20:15:37+00:00">Mar 31, 2017 08:15 PM UTC</time> by <b>echism</b><a class="anchor" name="1490991337">&nbsp;</a></div><pre>Is there anything new on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='32926#1490778093'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-29T09:01:33+00:00">Mar 29, 2017 09:01 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490778093">&nbsp;</a></div><pre>Hi,
OK for a discussion on this after the steering today.
Oliver.

-- by Oliver Keeble at Wed Mar 29 08&#58;57&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490689767'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-28T08:29:27+00:00">Mar 28, 2017 08:29 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490689767">&nbsp;</a></div><pre>Dear All,

we want to have a chat among relevant experts in order to progress on this issue. In the CMS Sites and Services meeting we identified tomorrow late afternoon ~17&#58;30 after the FTS steering meeting about tape performance[1] as a good slot. Therefore I kindly ask relevant experts to join. Representatives from JINR, FNAL and Phedex indicated already availability. It would be really great, if one of the FTS experts would be able to stay and help us with questions that almost for sure will come up. Further details will be circulated later, but please reserve the time slot and recap the ticket to be prepared for an efficient chat.

Thanks, Christoph

-- by Christoph Wissing at Tue Mar 28 08&#58;25&#58;22 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490606337'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-27T09:18:57+00:00">Mar 27, 2017 09:18 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490606337">&nbsp;</a></div><pre>Config change has been applied only for FNAL_Buffer-&#62;JINR_Disk. This won&#39;t fix the problem, but it may help us circumvent it temporarily. I just deleted some subscriptions to flush the queue of invalid transfers. Let&#39;s see if things improve. Unfortunately, the tape staging test is interfering by filling the queue with other transfers, but those should dissipate in 1-2 days.

-- by Siddharth Narayanan at Mon Mar 27 09&#58;15&#58;37 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490566954'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-26T22:22:34+00:00">Mar 26, 2017 10:22 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490566954">&nbsp;</a></div><pre>I&#39;ve requested FTS admins increase min_active, since it didn&#39;t work when I tried&#58; <a href='https&#58;//its.cern.ch/jira/browse/FTSCFG-5' target='_blank' rel='nofollow'>https&#58;//its.cern.ch/jira/browse/FTSCFG-5</a>

-- by Siddharth Narayanan at Sun Mar 26 22&#58;18&#58;43 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490546902'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-26T16:48:22+00:00">Mar 26, 2017 04:48 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490546902">&nbsp;</a></div><pre>Hi. any further improvement over the queued data to JINR, so that data placement can be re-enabled from production.

-- by jean-roch vlimant at Sun Mar 26 16&#58;45&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490126673'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-21T20:04:33+00:00">Mar 21, 2017 08:04 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490126673">&nbsp;</a></div><pre>Hi Oliver,

can you be a bit more specific which role is required? Is is /cms/Role=production? We will either find  a person having this VOMS role already or add it for Sid.

Thanks, Christoph

-- by Christoph Wissing at Tue Mar 21 20&#58;00&#58;53 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490112656'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-21T16:10:56+00:00">Mar 21, 2017 04:10 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490112656">&nbsp;</a></div><pre>Hi,
1) I only see 6 links too, that&#39;s all there are.
2) You need a production role to modify the config. I guess there&#39;s someone in CMS operations who can do it??
Oliver.

-- by Oliver Keeble at Tue Mar 21 16&#58;05&#58;23 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490102235'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-21T13:17:15+00:00">Mar 21, 2017 01:17 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490102235">&nbsp;</a></div><pre>Added attachment test.log
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT107293' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT107293</a>

-- by Siddharth Narayanan at Tue Mar 21 13&#58;13&#58;49 UTC 2017

Hi Oliver,

Sorry for the constant stream of questions, but I have a few more&#58;

1) In the link you sent, is there a reason I only see 6 links, none of which are CMS? [1]

2) I tried a simple set of commands to check my user identity and then adjust the link range for this link. However, I am getting a 403 forbidden message. I&#39;ve attached test.sh (the commands) and test.log (the output). In particular, I see that my &#34;roles&#34; is empty. Who would be able to modify these values?

Thanks in advance!

Best,
Sid

[1] <a href='https&#58;//fts3.cern.ch&#58;8449/fts3/ftsmon/#/config/range' target='_blank' rel='nofollow'>https&#58;//fts3.cern.ch&#58;8449/fts3/ftsmon/#/config/range</a>

-- by Siddharth Narayanan at Tue Mar 21 13&#58;13&#58;28 UTC 2017

Added attachment test.sh
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT107292' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT107292</a>

-- by Siddharth Narayanan at Tue Mar 21 13&#58;13&#58;27 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490100930'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-21T12:55:30+00:00">Mar 21, 2017 12:55 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490100930">&nbsp;</a></div><pre>Thanks for the documentation Oliver, I am taking a look into it. For some reason I cannot access the web interface, so I&#39;ll go through curl. I have a couple questions&#58;

1) To make absolutely sure - I should be making these changes on the fts3.cern.ch instance, not fts3-devel.cern.ch, right?

2) What is a good range for the link range? Is there a way I can see the number of active links at different sites to get an idea?

-- by Siddharth Narayanan at Tue Mar 21 12&#58;29&#58;34 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Tue Mar 21 12&#58;34&#58;57 UTC 2017
-- by cd-srv-goc-ops at Tue Mar 21 12&#58;40&#58;44 UTC 2017

Hi,
Yes - you could configure a &#34;link range&#34;, which would keep the number of simultaneous transfers between FNAL and JINR between the two limits that you configure.
More info here;
<a href='http&#58;//fts3-docs.web.cern.ch/fts3-docs/fts-rest/docs/config_alternatives.html' target='_blank' rel='nofollow'>http&#58;//fts3-docs.web.cern.ch/fts3-docs/fts-rest/docs/config_alternatives.html</a>
Oliver.

-- by Oliver Keeble at Tue Mar 21 09&#58;25&#58;50 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Tue Mar 21 09&#58;28&#58;46 UTC 2017
-- by cd-srv-goc-ops at Tue Mar 21 09&#58;35&#58;34 UTC 2017

[Closed/Resolved by Caller]
Closed by Caller
-- by  at Tue Mar 21 12&#58;40&#58;44 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490100600'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-21T12:50:00+00:00">Mar 21, 2017 12:50 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490100600">&nbsp;</a></div><pre>Hi,
You need to configure this on the FTS you&#39;re using. Certainly you&#39;re using the CERN fts3.cern.ch, maybe there are others too.
You can see existing configurations here

<a href='https&#58;//fts3.cern.ch&#58;8449/fts3/ftsmon/#/config/range' target='_blank' rel='nofollow'>https&#58;//fts3.cern.ch&#58;8449/fts3/ftsmon/#/config/range</a>

or equivalently

curl -L --capath /etc/grid-security/certificates/ --cert /tmp/px -H &#39;Accept&#58; application/json&#39; <a href='https&#58;//fts3.cern.ch&#58;8446/config/fixed' target='_blank' rel='nofollow'>https&#58;//fts3.cern.ch&#58;8446/config/fixed</a>

For the starting range - you&#39;re currently running with 2 active transfers, so if you want to be cautious you can start at e.g. 4 and work your way up. That said, I suspect you could get away with 20 at least.

Oliver.

-- by Oliver Keeble at Tue Mar 21 12&#58;46&#58;09 UTC 2017

Thanks for the documentation Oliver, I am taking a look into it. For some reason I cannot access the web interface, so I&#39;ll go through curl. I have a couple questions&#58;

1) To make absolutely sure - I should be making these changes on the fts3.cern.ch instance, not fts3-devel.cern.ch, right?

2) What is a good range for the link range? Is there a way I can see the number of active links at different sites to get an idea?

-- by Siddharth Narayanan at Tue Mar 21 12&#58;29&#58;34 UTC 2017

Hi,
Yes - you could configure a &#34;link range&#34;, which would keep the number of simultaneous transfers between FNAL and JINR between the two limits that you configure.
More info here;
<a href='http&#58;//fts3-docs.web.cern.ch/fts3-docs/fts-rest/docs/config_alternatives.html' target='_blank' rel='nofollow'>http&#58;//fts3-docs.web.cern.ch/fts3-docs/fts-rest/docs/config_alternatives.html</a>
Oliver.

-- by Oliver Keeble at Tue Mar 21 09&#58;25&#58;50 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490099697'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-21T12:34:57+00:00">Mar 21, 2017 12:34 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490099697">&nbsp;</a></div><pre>Thanks for the documentation Oliver, I am taking a look into it. For some reason I cannot access the web interface, so I&#39;ll go through curl. I have a couple questions&#58;

1) To make absolutely sure - I should be making these changes on the fts3.cern.ch instance, not fts3-devel.cern.ch, right?

2) What is a good range for the link range? Is there a way I can see the number of active links at different sites to get an idea?

-- by Siddharth Narayanan at Tue Mar 21 12&#58;29&#58;34 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490088526'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-21T09:28:46+00:00">Mar 21, 2017 09:28 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490088526">&nbsp;</a></div><pre>Hi,
Yes - you could configure a &#34;link range&#34;, which would keep the number of simultaneous transfers between FNAL and JINR between the two limits that you configure.
More info here;
<a href='http&#58;//fts3-docs.web.cern.ch/fts3-docs/fts-rest/docs/config_alternatives.html' target='_blank' rel='nofollow'>http&#58;//fts3-docs.web.cern.ch/fts3-docs/fts-rest/docs/config_alternatives.html</a>
Oliver.

-- by Oliver Keeble at Tue Mar 21 09&#58;25&#58;50 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490027920'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T16:38:40+00:00">Mar 20, 2017 04:38 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490027920">&nbsp;</a></div><pre>Also it would be fine to increase the user timeout for that channel in FTS if possible.

-- by Valery Mitsyn at Mon Mar 20 16&#58;33&#58;52 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490021993'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T14:59:53+00:00">Mar 20, 2017 02:59 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490021993">&nbsp;</a></div><pre>Trying to parse this ticket after the feedback loop... I think we left off with a question from Oliver&#58;

<font color='#7F7E6F'>&#62;&#62;  Is this only happening for files destined for JINR??</font>

As far as I can tell, yes. I do not see similar errors on other links from FNAL_Buffer.

Would it be possible to turn off FTS throttling for this link (or endpoint) and just impose a reasonable max number of parallel transfers? IIRC this was done before for a different site, but the configuration was FTS server-side. At least, then we can (a) make the problem worse or (b) see if the rate improves without harming transfer quality.

-- by Siddharth Narayanan at Mon Mar 20 14&#58;37&#58;49 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490019248'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T14:14:08+00:00">Mar 20, 2017 02:14 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490019248">&nbsp;</a></div><pre>Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;16&#58;04 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
<div id='show_1645173744' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1645173744'>I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;04&#58;36 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;01&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;07&#58;55 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;08&#58;48 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;59&#58;34 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;01&#58;07 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;52 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;58&#58;30 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;58&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;59&#58;23 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;00&#58;48 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;51&#58;34 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;28&#58;32 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;27&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;34 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;51&#58;16 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;52&#58;21 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;53&#58;16 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;54&#58;10 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;54&#58;52 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;54&#58;33 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;53&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;52&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;55&#58;57 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;04 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;56&#58;44 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;57&#58;49 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;01&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;07&#58;00 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;09&#58;50 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;08&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;10&#58;54 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;14&#58;59 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;18&#58;02 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;22&#58;38 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;25&#58;14 UTC 2017

Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;16&#58;04 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016314' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016314</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;27&#58;40 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016103' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016103</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;23&#58;53 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015882' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015882</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;20&#58;20 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015665' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015665</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;16&#58;48 UTC 2017

Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015390' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015390</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;11&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;29&#58;15 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;33&#58;35 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;35&#58;24 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016314' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016314</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;29&#58;13 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;39&#58;46 UTC 2017

Unlinking GGUS from this ticket to try to stop the looping for now
-- by Elizabeth Prout at Mon Mar 20 13&#58;42&#58;25 UTC 2017

Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;16&#58;04 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016924' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016924</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;41&#58;45 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;43&#58;59 UTC 2017

Closing this temporarily to try to stop the looping.
-- by Elizabeth Prout at Mon Mar 20 13&#58;48&#58;59 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;54&#58;11 UTC 2017

[Closed/Resolved by Caller]
Closed by Caller
-- by  at Mon Mar 20 13&#58;54&#58;11 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_1645173744').click(function() {
            $('#detail_1645173744').slideDown("normal");
            $('#show_1645173744').hide();
            $('#hide_1645173744').show();
        });
        $('#hide_1645173744').click(function() {
            $('#detail_1645173744').slideUp();
            $('#hide_1645173744').hide();
            $('#show_1645173744').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490018509'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T14:01:49+00:00">Mar 20, 2017 02:01 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490018509">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_144329208' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_144329208'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490017186' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490017186</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;45&#58;59 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_144329208').click(function() {
            $('#detail_144329208').slideDown("normal");
            $('#show_144329208').hide();
            $('#hide_144329208').show();
        });
        $('#hide_144329208').click(function() {
            $('#detail_144329208').slideUp();
            $('#hide_144329208').hide();
            $('#show_144329208').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490017929'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:52:09+00:00">Mar 20, 2017 01:52 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490017929">&nbsp;</a></div><pre>Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;16&#58;04 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
<div id='show_1033983998' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1033983998'>I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016314' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016314</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;27&#58;40 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016103' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016103</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;23&#58;53 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015882' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015882</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;20&#58;20 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015665' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015665</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;16&#58;48 UTC 2017

Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015390' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015390</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;11&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;29&#58;15 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;08&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;10&#58;54 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;04 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;56&#58;44 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;51&#58;16 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;23&#58;14 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;24&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;15 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;41 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;28&#58;14 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;51&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;16 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;51&#58;34 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;28&#58;32 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;27&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;34 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;53&#58;22 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;54&#58;04 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;54&#58;58 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;54&#58;33 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;53&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;52&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;55&#58;57 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;56&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;57&#58;39 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;52 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;58&#58;30 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;58&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;59&#58;23 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;59&#58;34 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;01&#58;07 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;01&#58;50 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;06&#58;45 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;04&#58;36 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;01&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;07&#58;55 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;10&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;14&#58;25 UTC 2017

Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;16&#58;04 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;18&#58;48 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;21&#58;43 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;26&#58;08 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;32&#58;23 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;36&#58;43 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016314' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016314</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;29&#58;13 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;39&#58;46 UTC 2017

Unlinking GGUS from this ticket to try to stop the looping for now
-- by Elizabeth Prout at Mon Mar 20 13&#58;42&#58;25 UTC 2017

Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;16&#58;04 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016924' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016924</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;41&#58;45 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;43&#58;59 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;49&#58;56 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_1033983998').click(function() {
            $('#detail_1033983998').slideDown("normal");
            $('#show_1033983998').hide();
            $('#hide_1033983998').show();
        });
        $('#hide_1033983998').click(function() {
            $('#detail_1033983998').slideUp();
            $('#hide_1033983998').hide();
            $('#show_1033983998').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490017739'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:48:59+00:00">Mar 20, 2017 01:48 PM UTC</time> by <b>echism</b><a class="anchor" name="1490017739">&nbsp;</a></div><pre>Closing this temporarily to try to stop the looping.</pre></div><div class='update_description'><i onclick="document.location='32926#1490017439'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:43:59+00:00">Mar 20, 2017 01:43 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490017439">&nbsp;</a></div><pre>Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;16&#58;04 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
<div id='show_1339512753' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1339512753'>I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016924' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016924</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;41&#58;45 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_1339512753').click(function() {
            $('#detail_1339512753').slideDown("normal");
            $('#show_1339512753').hide();
            $('#hide_1339512753').show();
        });
        $('#hide_1339512753').click(function() {
            $('#detail_1339512753').slideUp();
            $('#hide_1339512753').hide();
            $('#show_1339512753').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490017345'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:42:25+00:00">Mar 20, 2017 01:42 PM UTC</time> by <b>echism</b><a class="anchor" name="1490017345">&nbsp;</a></div><pre>Unlinking GGUS from this ticket to try to stop the looping for now</pre></div><div class='update_description'><i onclick="document.location='32926#1490017186'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:39:46+00:00">Mar 20, 2017 01:39 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490017186">&nbsp;</a></div><pre>As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017
<div id='show_1280443270' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1280443270'>
GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016314' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016314</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;29&#58;13 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_1280443270').click(function() {
            $('#detail_1280443270').slideDown("normal");
            $('#show_1280443270').hide();
            $('#hide_1280443270').show();
        });
        $('#hide_1280443270').click(function() {
            $('#detail_1280443270').slideUp();
            $('#hide_1280443270').hide();
            $('#show_1280443270').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490016924'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:35:24+00:00">Mar 20, 2017 01:35 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490016924">&nbsp;</a></div><pre>Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;16&#58;04 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
<div id='show_1694249153' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1694249153'>I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;04&#58;36 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;01&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;07&#58;55 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;08&#58;48 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;59&#58;34 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;01&#58;07 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;52 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;58&#58;30 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;58&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;59&#58;23 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;00&#58;48 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;51&#58;34 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;28&#58;32 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;27&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;34 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;51&#58;16 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;52&#58;21 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;53&#58;16 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;54&#58;10 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;54&#58;52 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;54&#58;33 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;53&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;52&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;55&#58;57 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;04 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;56&#58;44 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;57&#58;49 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;01&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;07&#58;00 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;09&#58;50 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;08&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;10&#58;54 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;14&#58;59 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;18&#58;02 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;22&#58;38 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;25&#58;14 UTC 2017

Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;16&#58;04 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016314' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016314</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;27&#58;40 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016103' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016103</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;23&#58;53 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015882' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015882</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;20&#58;20 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015665' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015665</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;16&#58;48 UTC 2017

Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015390' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015390</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;11&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;29&#58;15 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;33&#58;35 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_1694249153').click(function() {
            $('#detail_1694249153').slideDown("normal");
            $('#show_1694249153').hide();
            $('#hide_1694249153').show();
        });
        $('#hide_1694249153').click(function() {
            $('#detail_1694249153').slideUp();
            $('#hide_1694249153').hide();
            $('#show_1694249153').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490016743'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:32:23+00:00">Mar 20, 2017 01:32 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490016743">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_1244886377' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1244886377'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;08&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;10&#58;54 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;04 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;56&#58;44 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;51&#58;16 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;23&#58;14 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;24&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;15 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;41 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;28&#58;14 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;51&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;16 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;51&#58;34 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;28&#58;32 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;27&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;34 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;53&#58;22 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;54&#58;04 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;54&#58;58 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;54&#58;33 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;53&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;52&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;55&#58;57 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;56&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;57&#58;39 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;52 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;58&#58;30 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;58&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;59&#58;23 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;59&#58;34 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;01&#58;07 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;01&#58;50 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;06&#58;45 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;04&#58;36 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;01&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;07&#58;55 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;10&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;14&#58;25 UTC 2017

Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;16&#58;04 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;18&#58;48 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;21&#58;43 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;26&#58;08 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_1244886377').click(function() {
            $('#detail_1244886377').slideDown("normal");
            $('#show_1244886377').hide();
            $('#hide_1244886377').show();
        });
        $('#hide_1244886377').click(function() {
            $('#detail_1244886377').slideUp();
            $('#hide_1244886377').hide();
            $('#show_1244886377').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490016555'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:29:15+00:00">Mar 20, 2017 01:29 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490016555">&nbsp;</a></div><pre>Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;16&#58;04 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
<div id='show_474139830' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_474139830'>I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016314' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016314</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;27&#58;40 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016103' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490016103</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;23&#58;53 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015882' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015882</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;20&#58;20 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015665' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015665</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;16&#58;48 UTC 2017

Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015390' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015390</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;11&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_474139830').click(function() {
            $('#detail_474139830').slideDown("normal");
            $('#show_474139830').hide();
            $('#hide_474139830').show();
        });
        $('#hide_474139830').click(function() {
            $('#detail_474139830').slideUp();
            $('#hide_474139830').hide();
            $('#show_474139830').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490016314'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:25:14+00:00">Mar 20, 2017 01:25 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490016314">&nbsp;</a></div><pre>Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;16&#58;04 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
<div id='show_1793897006' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1793897006'>I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;04&#58;36 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;01&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;07&#58;55 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;08&#58;48 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;59&#58;34 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;01&#58;07 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;52 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;58&#58;30 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;58&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;59&#58;23 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;00&#58;48 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;51&#58;34 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;28&#58;32 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;27&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;34 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;51&#58;16 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;52&#58;21 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;53&#58;16 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;54&#58;10 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;54&#58;52 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;54&#58;33 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;53&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;52&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;55&#58;57 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;04 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;56&#58;44 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;57&#58;49 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;01&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;07&#58;00 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;09&#58;50 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;08&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;10&#58;54 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;14&#58;59 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;18&#58;02 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;22&#58;38 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_1793897006').click(function() {
            $('#detail_1793897006').slideDown("normal");
            $('#show_1793897006').hide();
            $('#hide_1793897006').show();
        });
        $('#hide_1793897006').click(function() {
            $('#detail_1793897006').slideUp();
            $('#hide_1793897006').hide();
            $('#show_1793897006').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490016103'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:21:43+00:00">Mar 20, 2017 01:21 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490016103">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_2131064982' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2131064982'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;08&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;10&#58;54 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;04 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;56&#58;44 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;51&#58;16 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;23&#58;14 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;24&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;15 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;41 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;28&#58;14 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;51&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;16 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;51&#58;34 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;28&#58;32 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;27&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;34 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;53&#58;22 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;54&#58;04 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;54&#58;58 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;54&#58;33 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;53&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;52&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;55&#58;57 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;56&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;57&#58;39 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;52 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;58&#58;30 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;58&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;59&#58;23 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;59&#58;34 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;01&#58;07 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;01&#58;50 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;06&#58;45 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;04&#58;36 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;01&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;07&#58;55 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;10&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;14&#58;25 UTC 2017

Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;16&#58;04 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;18&#58;48 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_2131064982').click(function() {
            $('#detail_2131064982').slideDown("normal");
            $('#show_2131064982').hide();
            $('#hide_2131064982').show();
        });
        $('#hide_2131064982').click(function() {
            $('#detail_2131064982').slideUp();
            $('#hide_2131064982').hide();
            $('#show_2131064982').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490015882'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:18:02+00:00">Mar 20, 2017 01:18 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490015882">&nbsp;</a></div><pre>As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017
<div id='show_758195728' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_758195728'>
GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;04&#58;36 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;01&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;07&#58;55 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;08&#58;48 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;59&#58;34 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;01&#58;07 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;52 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;58&#58;30 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;58&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;59&#58;23 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;00&#58;48 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;51&#58;34 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;28&#58;32 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;27&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;34 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;51&#58;16 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;52&#58;21 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;53&#58;16 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;54&#58;10 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;54&#58;52 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;54&#58;33 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;53&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;52&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;55&#58;57 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;04 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;56&#58;44 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;57&#58;49 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;01&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;07&#58;00 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;09&#58;50 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;08&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;10&#58;54 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;14&#58;59 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_758195728').click(function() {
            $('#detail_758195728').slideDown("normal");
            $('#show_758195728').hide();
            $('#hide_758195728').show();
        });
        $('#hide_758195728').click(function() {
            $('#detail_758195728').slideUp();
            $('#hide_758195728').hide();
            $('#show_758195728').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490015764'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:16:04+00:00">Mar 20, 2017 01:16 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490015764">&nbsp;</a></div><pre>Changed CC to ;cms-comp-ops-transfer-team@....;
fts-devel@....

-- by Alejandro Alvarez at Mon Mar 20 13&#58;13&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1490015665'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:14:25+00:00">Mar 20, 2017 01:14 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490015665">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_1189041703' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1189041703'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;04 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;56&#58;44 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;51&#58;16 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;23&#58;14 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;24&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;15 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;41 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;28&#58;14 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;51&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;16 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;51&#58;34 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;28&#58;32 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;27&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;34 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;53&#58;22 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;54&#58;04 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;54&#58;58 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;54&#58;33 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;53&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;52&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;55&#58;57 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;56&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;57&#58;39 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;52 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;58&#58;30 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;58&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;59&#58;23 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;59&#58;34 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;01&#58;07 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;01&#58;50 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;06&#58;45 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;04&#58;36 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;01&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;07&#58;55 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;10&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_1189041703').click(function() {
            $('#detail_1189041703').slideDown("normal");
            $('#show_1189041703').hide();
            $('#hide_1189041703').show();
        });
        $('#hide_1189041703').click(function() {
            $('#detail_1189041703').slideUp();
            $('#hide_1189041703').hide();
            $('#show_1189041703').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490015454'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:10:54+00:00">Mar 20, 2017 01:10 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490015454">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_1230615235' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1230615235'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490015205</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;08&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_1230615235').click(function() {
            $('#detail_1230615235').slideDown("normal");
            $('#show_1230615235').hide();
            $('#hide_1230615235').show();
        });
        $('#hide_1230615235').click(function() {
            $('#detail_1230615235').slideUp();
            $('#hide_1230615235').hide();
            $('#show_1230615235').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490015390'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:09:50+00:00">Mar 20, 2017 01:09 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490015390">&nbsp;</a></div><pre>As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017
<div id='show_502030953' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_502030953'>
GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;04&#58;36 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;01&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;07&#58;55 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;08&#58;48 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;59&#58;34 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;01&#58;07 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;52 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;58&#58;30 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;58&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;59&#58;23 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;00&#58;48 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;51&#58;34 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;28&#58;32 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;27&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;34 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;51&#58;16 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;52&#58;21 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;53&#58;16 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;54&#58;10 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;54&#58;52 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;54&#58;33 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;53&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;52&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;55&#58;57 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;04 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;56&#58;44 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;57&#58;49 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 13&#58;01&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;07&#58;00 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_502030953').click(function() {
            $('#detail_502030953').slideDown("normal");
            $('#show_502030953').hide();
            $('#hide_502030953').show();
        });
        $('#hide_502030953').click(function() {
            $('#detail_502030953').slideUp();
            $('#hide_502030953').hide();
            $('#show_502030953').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490015275'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:07:55+00:00">Mar 20, 2017 01:07 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490015275">&nbsp;</a></div><pre>As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017
<div id='show_1189539107' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1189539107'>
GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014899</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;04&#58;36 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014763</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 13&#58;01&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_1189539107').click(function() {
            $('#detail_1189539107').slideDown("normal");
            $('#show_1189539107').hide();
            $('#hide_1189539107').show();
        });
        $('#hide_1189539107').click(function() {
            $('#detail_1189539107').slideUp();
            $('#hide_1189539107').hide();
            $('#show_1189539107').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490015205'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:06:45+00:00">Mar 20, 2017 01:06 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490015205">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_1396209958' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1396209958'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;04 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;56&#58;44 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;51&#58;16 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;23&#58;14 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;24&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;15 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;41 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;28&#58;14 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;51&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;16 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;51&#58;34 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;28&#58;32 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;27&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;34 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;53&#58;22 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;54&#58;04 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;54&#58;58 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;54&#58;33 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;53&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;52&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;55&#58;57 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;56&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;57&#58;39 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;52 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;58&#58;30 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;58&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;59&#58;23 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;59&#58;34 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 13&#58;01&#58;07 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;01&#58;50 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_1396209958').click(function() {
            $('#detail_1396209958').slideDown("normal");
            $('#show_1396209958').hide();
            $('#hide_1396209958').show();
        });
        $('#hide_1396209958').click(function() {
            $('#detail_1396209958').slideUp();
            $('#hide_1396209958').hide();
            $('#show_1396209958').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490014899'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:01:39+00:00">Mar 20, 2017 01:01 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490014899">&nbsp;</a></div><pre>As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017
<div id='show_1258850355' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1258850355'>
GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;52 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;58&#58;30 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;58&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;59&#58;23 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 13&#58;00&#58;48 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;51&#58;34 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;28&#58;32 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;27&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;34 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;51&#58;16 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;52&#58;21 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;53&#58;16 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;54&#58;10 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;54&#58;52 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;54&#58;33 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;53&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;52&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;55&#58;57 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;04 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;56&#58;44 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;57&#58;49 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_1258850355').click(function() {
            $('#detail_1258850355').slideDown("normal");
            $('#show_1258850355').hide();
            $('#hide_1258850355').show();
        });
        $('#hide_1258850355').click(function() {
            $('#detail_1258850355').slideUp();
            $('#hide_1258850355').hide();
            $('#show_1258850355').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490014867'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T13:01:07+00:00">Mar 20, 2017 01:01 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490014867">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_278570850' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_278570850'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014710</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;59&#58;34 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_278570850').click(function() {
            $('#detail_278570850').slideDown("normal");
            $('#show_278570850').hide();
            $('#hide_278570850').show();
        });
        $('#hide_278570850').click(function() {
            $('#detail_278570850').slideUp();
            $('#hide_278570850').hide();
            $('#show_278570850').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490014763'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:59:23+00:00">Mar 20, 2017 12:59 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490014763">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_872138039' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_872138039'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014659</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;58&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_872138039').click(function() {
            $('#detail_872138039').slideDown("normal");
            $('#show_872138039').hide();
            $('#hide_872138039').show();
        });
        $('#hide_872138039').click(function() {
            $('#detail_872138039').slideUp();
            $('#hide_872138039').hide();
            $('#show_872138039').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490014710'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:58:30+00:00">Mar 20, 2017 12:58 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490014710">&nbsp;</a></div><pre>As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017
<div id='show_1601975468' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1601975468'>
GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014557</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;52 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_1601975468').click(function() {
            $('#detail_1601975468').slideDown("normal");
            $('#show_1601975468').hide();
            $('#hide_1601975468').show();
        });
        $('#hide_1601975468').click(function() {
            $('#detail_1601975468').slideUp();
            $('#hide_1601975468').hide();
            $('#show_1601975468').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490014659'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:57:39+00:00">Mar 20, 2017 12:57 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490014659">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_2081415010' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2081415010'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;51&#58;16 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;23&#58;14 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;24&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;15 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;41 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;28&#58;14 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;51&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;16 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;51&#58;34 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;28&#58;32 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;27&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;34 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;53&#58;22 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;54&#58;04 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;54&#58;58 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;54&#58;33 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;53&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;52&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;55&#58;57 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;56&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_2081415010').click(function() {
            $('#detail_2081415010').slideDown("normal");
            $('#show_2081415010').hide();
            $('#hide_2081415010').show();
        });
        $('#hide_2081415010').click(function() {
            $('#detail_2081415010').slideUp();
            $('#hide_2081415010').hide();
            $('#show_2081415010').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490014604'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:56:44+00:00">Mar 20, 2017 12:56 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490014604">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_341495069' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_341495069'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014492</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;56&#58;04 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_341495069').click(function() {
            $('#detail_341495069').slideDown("normal");
            $('#show_341495069').hide();
            $('#hide_341495069').show();
        });
        $('#hide_341495069').click(function() {
            $('#detail_341495069').slideUp();
            $('#hide_341495069').hide();
            $('#show_341495069').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490014557'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:55:57+00:00">Mar 20, 2017 12:55 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490014557">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_1026896660' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1026896660'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014444</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;54&#58;33 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but t

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014396</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;53&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014336</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;52&#58;42 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_1026896660').click(function() {
            $('#detail_1026896660').slideDown("normal");
            $('#show_1026896660').hide();
            $('#hide_1026896660').show();
        });
        $('#hide_1026896660').click(function() {
            $('#detail_1026896660').slideUp();
            $('#hide_1026896660').hide();
            $('#show_1026896660').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490014492'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:54:52+00:00">Mar 20, 2017 12:54 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490014492">&nbsp;</a></div><pre>As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017
<div id='show_1007859481' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1007859481'>
GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;51&#58;34 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;28&#58;32 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;27&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;34 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;51&#58;16 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;52&#58;21 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;53&#58;16 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;54&#58;10 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_1007859481').click(function() {
            $('#detail_1007859481').slideDown("normal");
            $('#show_1007859481').hide();
            $('#hide_1007859481').show();
        });
        $('#hide_1007859481').click(function() {
            $('#detail_1007859481').slideUp();
            $('#hide_1007859481').hide();
            $('#show_1007859481').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490014444'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:54:04+00:00">Mar 20, 2017 12:54 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490014444">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_1836895806' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1836895806'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;51&#58;16 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;23&#58;14 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;24&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;15 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;41 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;28&#58;14 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;51&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;16 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;51&#58;34 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;28&#58;32 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;27&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;52&#58;34 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;53&#58;22 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_1836895806').click(function() {
            $('#detail_1836895806').slideDown("normal");
            $('#show_1836895806').hide();
            $('#hide_1836895806').show();
        });
        $('#hide_1836895806').click(function() {
            $('#detail_1836895806').slideUp();
            $('#hide_1836895806').hide();
            $('#show_1836895806').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490014396'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:53:16+00:00">Mar 20, 2017 12:53 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490014396">&nbsp;</a></div><pre>As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017
<div id='show_1253558559' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1253558559'>
GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;51&#58;16 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;52&#58;21 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_1253558559').click(function() {
            $('#detail_1253558559').slideDown("normal");
            $('#show_1253558559').hide();
            $('#hide_1253558559').show();
        });
        $('#hide_1253558559').click(function() {
            $('#detail_1253558559').slideUp();
            $('#hide_1253558559').hide();
            $('#show_1253558559').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490014354'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:52:34+00:00">Mar 20, 2017 12:52 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490014354">&nbsp;</a></div><pre>As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017
<div id='show_390911448' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_390911448'>
GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but th

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490014275</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;51&#58;34 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012894</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;28&#58;32 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012797</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;27&#58;24 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_390911448').click(function() {
            $('#detail_390911448').slideDown("normal");
            $('#show_390911448').hide();
            $('#hide_390911448').show();
        });
        $('#hide_390911448').click(function() {
            $('#detail_390911448').slideUp();
            $('#hide_390911448').hide();
            $('#show_390911448').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490014336'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:52:16+00:00">Mar 20, 2017 12:52 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490014336">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_665871822' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_665871822'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;23&#58;14 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;24&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;15 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;41 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;28&#58;14 UTC 2017

As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang
-- by goc at Mon Mar 20 12&#58;50&#58;38 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;51&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_665871822').click(function() {
            $('#detail_665871822').slideDown("normal");
            $('#show_665871822').hide();
            $('#hide_665871822').show();
        });
        $('#hide_665871822').click(function() {
            $('#detail_665871822').slideUp();
            $('#hide_665871822').hide();
            $('#show_665871822').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490014276'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:51:16+00:00">Mar 20, 2017 12:51 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490014276">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_1619543343' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1619543343'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;26&#58;37 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;27&#58;19 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;28&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_1619543343').click(function() {
            $('#detail_1619543343').slideDown("normal");
            $('#show_1619543343').hide();
            $('#hide_1619543343').show();
        });
        $('#hide_1619543343').click(function() {
            $('#detail_1619543343').slideUp();
            $('#hide_1619543343').hide();
            $('#show_1619543343').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490014238'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:50:38+00:00">Mar 20, 2017 12:50 PM UTC</time><a class="anchor" name="1490014238">&nbsp;</a></div><pre>As we mentioned before, all timeout errors involve files that were not ONLINE.
Most of the timeout errors happened only once per file.
The only few that happened more than once are multiple reads at far apart times.
The fact that transfer quality is good (pretty good to us) means the files were transferred on the first retry.
SRM has a default timeout at 4 hours.
When the system is busy (only that many physical tape drives, and, also depends on the reading pattern), staging delays longer than 4 hours may happen.
However, the files are staged and are good for the next reads in, at least, one hour.
The physical transfer rate (not the throughput) is good.
The system is behaving the way it is supposed to.
We really don&#39;t see an issue here.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang</pre></div><div class='update_description'><i onclick="document.location='32926#1490012894'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:28:14+00:00">Mar 20, 2017 12:28 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490012894">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
<div id='show_429001452' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_429001452'>2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;23&#58;14 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;24&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;15 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;41 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_429001452').click(function() {
            $('#detail_429001452').slideDown("normal");
            $('#show_429001452').hide();
            $('#hide_429001452').show();
        });
        $('#hide_429001452').click(function() {
            $('#detail_429001452').slideUp();
            $('#hide_429001452').hide();
            $('#show_429001452').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490012839'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:27:19+00:00">Mar 20, 2017 12:27 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490012839">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_1024179243' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1024179243'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;47 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_1024179243').click(function() {
            $('#detail_1024179243').slideDown("normal");
            $('#show_1024179243').hide();
            $('#hide_1024179243').show();
        });
        $('#hide_1024179243').click(function() {
            $('#detail_1024179243').slideUp();
            $('#hide_1024179243').hide();
            $('#show_1024179243').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490012797'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:26:37+00:00">Mar 20, 2017 12:26 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490012797">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_1117222494' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1117222494'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;13 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;24&#58;27 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;25&#58;18 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;25&#58;42 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;26&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_1117222494').click(function() {
            $('#detail_1117222494').slideDown("normal");
            $('#show_1117222494').hide();
            $('#hide_1117222494').show();
        });
        $('#hide_1117222494').click(function() {
            $('#detail_1117222494').slideUp();
            $('#hide_1117222494').hide();
            $('#show_1117222494').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490012742'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:25:42+00:00">Mar 20, 2017 12:25 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490012742">&nbsp;</a></div><pre>Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

<div id='show_573319715' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_573319715'>GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012715</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;25&#58;33 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility o

[Text truncated due to GGUS 4000 char limit]
Please access <a href='https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=32926#1490012653</a> for full text.

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;24&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_573319715').click(function() {
            $('#detail_573319715').slideDown("normal");
            $('#show_573319715').hide();
            $('#hide_573319715').show();
        });
        $('#hide_573319715').click(function() {
            $('#detail_573319715').slideUp();
            $('#hide_573319715').hide();
            $('#show_573319715').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490012715'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:25:15+00:00">Mar 20, 2017 12:25 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490012715">&nbsp;</a></div><pre>Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

<div id='show_2058152294' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2058152294'>GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
-- by OSG-GOC at Mon Mar 20 12&#58;23&#58;14 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;24&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_2058152294').click(function() {
            $('#detail_2058152294').slideDown("normal");
            $('#show_2058152294').hide();
            $('#hide_2058152294').show();
        });
        $('#hide_2058152294').click(function() {
            $('#detail_2058152294').slideUp();
            $('#hide_2058152294').hide();
            $('#show_2058152294').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490012667'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:24:27+00:00">Mar 20, 2017 12:24 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490012667">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
<div id='show_309240651' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_309240651'>2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>

-- by OSG-GOC (via Footprints) at Mon Mar 20 12&#58;23&#58;27 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

-- by OSG-GOC (via Footprints) at Sun Mar 19 13&#58;25&#58;57 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_309240651').click(function() {
            $('#detail_309240651').slideDown("normal");
            $('#show_309240651').hide();
            $('#hide_309240651').show();
        });
        $('#hide_309240651').click(function() {
            $('#detail_309240651').slideUp();
            $('#hide_309240651').hide();
            $('#show_309240651').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490012653'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:24:13+00:00">Mar 20, 2017 12:24 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490012653">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
<div id='show_1853752036' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1853752036'>3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017

Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Mon Mar 20 12&#58;22&#58;39 UTC 2017
-- by cd-srv-goc-ops at Mon Mar 20 12&#58;23&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_1853752036').click(function() {
            $('#detail_1853752036').slideDown("normal");
            $('#show_1853752036').hide();
            $('#hide_1853752036').show();
        });
        $('#hide_1853752036').click(function() {
            $('#detail_1853752036').slideUp();
            $('#hide_1853752036').hide();
            $('#show_1853752036').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490012594'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:23:14+00:00">Mar 20, 2017 12:23 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490012594">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Fri Mar 17 23&#58;54&#58;06 UTC 2017
-- by cd-srv-goc-ops at Fri Mar 17 23&#58;55&#58;12 UTC 2017

Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
<div id='show_1604906849' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1604906849'>2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
-- by OSG-GOC at Sun Mar 19 13&#58;25&#58;59 UTC 2017
-- by cd-srv-goc-ops at Sun Mar 19 13&#58;27&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a>
</div><script type='text/javascript'>
        $('#show_1604906849').click(function() {
            $('#detail_1604906849').slideDown("normal");
            $('#show_1604906849').hide();
            $('#hide_1604906849').show();
        });
        $('#hide_1604906849').click(function() {
            $('#detail_1604906849').slideUp();
            $('#hide_1604906849').hide();
            $('#show_1604906849').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1490012559'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T12:22:39+00:00">Mar 20, 2017 12:22 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490012559">&nbsp;</a></div><pre>Hi,

I see in &#34;Quality Plots&#34;&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QualityPlots?graph=quality_all&entity=link&src_filter=T1_US&dest_filter=T1_RU&no_mss=false&period=l7d&upto=&.submit=Update
all green for the last 7 days.
But I&#39;m worry about transfer &#34;Rate&#34; table&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=w&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=T1_US
here we have 5172	files OK, 14.5 TB volume OK, 	23.9 MB/s, 229 &#34;User timeout&#34; with FNAL, 43711	&#34;Expired&#34; for the last 7 days.
It seems to me, &#34;Expired&#34; is a very big value. How to drop it?
For the target transfer rate to JINR, we could be able to get not less than 300MB/sec. Taking into account that out LHCOPN link to CERN is 10Gb/sec
and it was not loaded for the couple of days.

-- by Valery Mitsyn at Mon Mar 20 12&#58;22&#58;17 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1489929959'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-19T13:25:59+00:00">Mar 19, 2017 01:25 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1489929959">&nbsp;</a></div><pre>Hi,

If FTS sees errors, it will back off and try not to stress the storage systems. Errors such as &#34;file exists, overwrite not enabled&#34;, which you also get, should not contribute to this logic. However, FTS cannot tell the difference between an overloaded SRM which times out, and one with files which are not online (and which times out). This is what you have to fix to get a decent transfer throughput.

Is this only happening for files destined for JINR??

Oliver.

-- by Oliver Keeble at Sun Mar 19 13&#58;24&#58;55 UTC 2017

Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1489794846'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-17T23:54:06+00:00">Mar 17, 2017 11:54 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1489794846">&nbsp;</a></div><pre>Dear All,
summarizing this thread&#58;
1) We see some FNAL MSS to JINR transfers fail by  timeout once in a while when the file is not ONLINE on the source site storage
2) PhEDEx will retry the failed transfers and also pre-stage the file if necessary (if I am not mistaken the transfer attempt will also trigger staging)
3) FTS will throttle the transfer rate because of the errors it sees
4) The overall transfer quality from FNAL to JINR is good&#58; all green.  ( I double-checked in FTS monitoring failure rate is less than 20%, i.e. comparable with the average)
5) The main remaining concern is the transfer rate.

If my interpretation is correct, we might  have a chicken and the egg problem&#58;  errors cause low rate and low rate cases more errors. Any thoughts, comments?
I would also like to understand&#58;
- What is the target transfer rate to JINR ?
- How does FTS control the throughput, does it depend on the failure rate, or the error type, or ?

On PhEDEx side we will have a look at the possibility of using FTS staging, as Olivier suggested,  but that will probably  take a while before we can expect this in production.
Natalia.

-- by Natalia Ratnikova at Fri Mar 17 23&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1489511626'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-14T17:13:46+00:00">Mar 14, 2017 05:13 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1489511626">&nbsp;</a></div><pre>Hi Elizabeth, no, please do not close this ticket. The issue is still under discussion.

-- by Siddharth Narayanan at Tue Mar 14 17&#58;12&#58;40 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1489508515'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-14T16:21:55+00:00">Mar 14, 2017 04:21 PM UTC</time> by <b>echism</b><a class="anchor" name="1489508515">&nbsp;</a></div><pre>Should I close this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='32926#1489344806'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-12T18:53:26+00:00">Mar 12, 2017 06:53 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1489344806">&nbsp;</a></div><pre>-- by Valery Mitsyn at Sun Mar 12 18&#58;53&#58;08 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1489185132'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-10T22:32:12+00:00">Mar 10, 2017 10:32 PM UTC</time><a class="anchor" name="1489185132">&nbsp;</a></div><pre>Yes. All these timeouts involve staging. And such timeouts mostly happened once per file.
For the fewer ones that occurred more than once, the accesses are far apart. (At T1_US_FNAL_Buffer, the staged files are pinned in pool for only one hour.)
Most files were successfully transferred on the first retry. Looking at the quality plot, it is all green for now.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang</pre></div><div class='update_description'><i onclick="document.location='32926#1489183402'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-10T22:03:22+00:00">Mar 10, 2017 10:03 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1489183402">&nbsp;</a></div><pre>Hi,

Looking at a recent failure

<a href='https&#58;//fts437.cern.ch&#58;8449/var/log/fts3/transfers/2017-03-10/cmsdcatape01.fnal.gov__srm-cms.jinr-t1.ru/2017-03-10-1408__cmsdcatape01.fnal.gov__srm-cms.jinr-t1.ru__1334845546__8bffa188-057f-11e7-9d39-02163e0182e8' target='_blank' rel='nofollow'>https&#58;//fts437.cern.ch&#58;8449/var/log/fts3/transfers/2017-03-10/cmsdcatape01.fnal.gov__srm-cms.jinr-t1.ru/2017-03-10-1408__cmsdcatape01.fnal.gov__srm-cms.jinr-t1.ru__1334845546__8bffa188-057f-11e7-9d39-02163e0182e8</a>

the FNAL file in question is not online.

gfal-xattr <a href='srm&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2?SFN=/11/store/mc/RunIISummer15GS/BuToKstarMuMu_BMuonFilter_SoftQCDnonD_TuneCUEP8M1_13TeV-pythia8-evtgen/GEN-SIM/MCRUN2_71_V1-v1/90001/464A58A8-1C97-E611-BB02-14187763B750.root' target='_blank' rel='nofollow'>srm&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2?SFN=/11/store/mc/RunIISummer15GS/BuToKstarMuMu_BMuonFilter_SoftQCDnonD_TuneCUEP8M1_13TeV-pythia8-evtgen/GEN-SIM/MCRUN2_71_V1-v1/90001/464A58A8-1C97-E611-BB02-14187763B750.root</a> user.status
NEARLINE

There is some kind of synchronisation problem with jobs for offline files being sent to FTS.

NB - you could use FTS for staging, but that requires different configuration of your job.

Oliver.

-- by Oliver Keeble at Fri Mar 10 14&#58;19&#58;03 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1489183367'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-10T22:02:47+00:00">Mar 10, 2017 10:02 PM UTC</time><a class="anchor" name="1489183367">&nbsp;</a></div><pre>We do see, in some conditions, the staging took longer than srm request lifetime (currently, 4 hours by default).
We will increase request lifetime to accommodate this.
However, it won&#39;t happen before next Tuesday for this change needs some managerial approvals.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang</pre></div><div class='update_description'><i onclick="document.location='32926#1489148246'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-10T12:17:26+00:00">Mar 10, 2017 12:17 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1489148246">&nbsp;</a></div><pre>Hi,

Nikolay Voytishin is at CERN now, hope he will be able to connect. He is our data manager.

[GOC-TX Warning]
Source GGUS Ticket ID&#58; 126123 specifies affected site name of  JINR-T1 which does not exist in OIM(resource/name) and it is ignored.
-- by Valery Mitsyn at Fri Mar 10 12&#58;16&#58;50 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1489146505'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-10T11:48:25+00:00">Mar 10, 2017 11:48 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1489146505">&nbsp;</a></div><pre>If the SRM errors are back, I assign the ticket back to FNAL...

Would it be helpful to find a time everyone relevant can have a Skype or Vidyo chat? This ticket has been bouncing around for a while. Maybe we need to have an &#34;in person&#34; discussion. If everyone agrees, I&#39;ll let the site admins (and perhaps FTS experts?) choose a time; I&#39;ll make time in my schedule accordingly.

-- by Siddharth Narayanan at Fri Mar 10 11&#58;48&#58;14 UTC 2017

Hi,

I see the same error fron the FNAL_Buffer again&#58;
{{{
TRANSFER SOURCE SRM_GET_TURL srm-ifce err&#58; Connection timed out, err&#58; [SE][StatusOfGetRequest][ETIMEDOUT] httpg&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2&#58; User timeout over
}}}
Agent log for FTS from FNAL_Buffer show 1120 errors with&#58;
report-code=-1 xfer-code=-2
and 398 successfully finished transfers only.
It is for today in UTC.
The error in&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;ErrorInfo?tofilter=T1_RU_JINR_Disk;fromfilter=T1_US_FNAL_Buffer
clearly say a problem in FTS - srm@FNAL communication.
I doubt we can do something to improve this part of transfer.
Even we can get one file in seconds in a good case, average rate will stay low because a huge amount of attempts dropped with errors.

Please re-route the ticket from JINR as we can do nothing with a problem not an our side.

-- by Valery Mitsyn at Fri Mar 10 08&#58;53&#58;43 UTC 2017

Hi,

There are still timeouts on the FNAL srm. As long as there are errors like this, FTS will not try to push the throughput up.

e.g.

<a href='https&#58;//fts434.cern.ch&#58;8449/var/log/fts3/transfers/2017-03-10/cmsdcatape01.fnal.gov__srm-cms.jinr-t1.ru/2017-03-10-0745__cmsdcatape01.fnal.gov__srm-cms.jinr-t1.ru__1333873737__93f2ace2-052e-11e7-b116-02163e0182e8' target='_blank' rel='nofollow'>https&#58;//fts434.cern.ch&#58;8449/var/log/fts3/transfers/2017-03-10/cmsdcatape01.fnal.gov__srm-cms.jinr-t1.ru/2017-03-10-0745__cmsdcatape01.fnal.gov__srm-cms.jinr-t1.ru__1333873737__93f2ace2-052e-11e7-b116-02163e0182e8</a>

You can verify this with a command such as
<div id='show_1554116077' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1554116077'>
gfal-xattr <a href='srm&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2?SFN=/11/store/mc/RunIISummer15wmLHEGS/DYJetsToTauTau_ForcedMuEleDecay_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8/GEN-SIM/MCRUN2_71_V1-v1/60003/30D367CC-5913-E611-B2EE-0002C94D54EC.root' target='_blank' rel='nofollow'>srm&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2?SFN=/11/store/mc/RunIISummer15wmLHEGS/DYJetsToTauTau_ForcedMuEleDecay_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8/GEN-SIM/MCRUN2_71_V1-v1/60003/30D367CC-5913-E611-B2EE-0002C94D54EC.root</a> user.replicas

Oliver (FTS support)

-- by Oliver Keeble at Fri Mar 10 08&#58;28&#58;58 UTC 2017

Hi Chih-Hao, all,

It was assigned to FNAL at the request of JINR, and now I will assign it back to JINR. Even if those specific errors have disappeared, the observed transfer rate is about the same&#58; 40 MB/s. I do not see any change over the last few hours. With a 300 TB backlog, this will take close to 90 days to dissipate. The ticket should remain open until the rate improves.

Best,
Sid

-- by Siddharth Narayanan at Thu Mar 09 23&#58;06&#58;11 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_1554116077').click(function() {
            $('#detail_1554116077').slideDown("normal");
            $('#show_1554116077').hide();
            $('#hide_1554116077').show();
        });
        $('#hide_1554116077').click(function() {
            $('#detail_1554116077').slideUp();
            $('#hide_1554116077').hide();
            $('#show_1554116077').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1489097927'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-09T22:18:47+00:00">Mar 9, 2017 10:18 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1489097927">&nbsp;</a></div><pre>Nothing has been changed at T1_US_FNAL_*.
Can we close this ticket now?
It was assigned to T1_US_FNAL but there is not much we can do here.

Cheers,

-- Chih-Hao
-- by huangch at Thu Mar 09 22&#58;18&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a></pre></div><div class='update_description'><i onclick="document.location='32926#1489091304'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-09T20:28:24+00:00">Mar 9, 2017 08:28 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1489091304">&nbsp;</a></div><pre>Hi Andrea,

looks like something has been changed somewhere and transfers ended mostly successfully starting from&#58;
2017-03-09 18&#58;03&#58;05 UTC
there are mostly no errors in Phedex log from FNAL_Buffer.
Errors with &#34;report-code=-1 xfer-code=-2&#34; which seems indicate &#34;user timeout&#34; disappeared from that time.

-- by Valery Mitsyn at Thu Mar 09 19&#58;31&#58;33 UTC 2017

Hi Valery,
from the logs i reported this morning i don&#39;t see any communication problem FTS -&#62; SRM, we correctly connected to the FNAL SRM but  then we didn&#39;t get a gridftp turl within the 3 minutes timeout. Anyway at least at CERN FTS i don&#39;t see anymore this kind of error in the last hours from FNAL.
cheers
Andrea

-- by Andrea Manzi at Thu Mar 09 17&#58;31&#58;14 UTC 2017

Sorry, I mean&#58; &#34;it is fts3-srm@FNAL_Buffer communication problem&#34;.

-- by Valery Mitsyn at Thu Mar 09 16&#58;52&#58;24 UTC 2017

Added attachment jsoncopyjob
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT107271' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT107271</a>

-- by Valery Mitsyn at Thu Mar 09 11&#58;32&#58;32 UTC 2017

Hi Christoph,

file attached.
But, what we should diagnose is not srm-srm glitch, it is ftp3-srm@FNAL_Buffer communication problem.

-- by Valery Mitsyn at Thu Mar 09 11&#58;32&#58;32 UTC 2017

Hi,

I just made a small test and copied the example file to a /store/temp/user at JINR, where I have write access with my personal proxy. It went through FTS3 without issues&#58; <a href='https&#58;//fts3.cern.ch&#58;8449/fts3/ftsmon/#/job/f5cf2c86-04b3-11e7-b345-02163e018fe3' target='_blank' rel='nofollow'>https&#58;//fts3.cern.ch&#58;8449/fts3/ftsmon/#/job/f5cf2c86-04b3-11e7-b345-02163e018fe3</a>
<div id='show_180397267' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_180397267'>
My jsoncopyjob is quoted below[1]. Can someone from the JINR site provide an example from their Phedex logs. You typically find them under a path like this&#58;

~/Prod_T2_DE_DESY/state/download-fts-all/archive/job.1488271825.14735/

Of course your directory names are different...

Perhaps we spot something strange, that confuses the two SRMs talking to each other.

Christoph

[1]
{&#34;Files&#34;&#58;[{&#34;filesize&#34;&#58;&#34;3552062085&#34;,&#34;sources&#34;&#58;[&#34;<a href='srm&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2?SFN=/11/store/mc/RunIISummer15GS/BuToKstarMuMu_BMuonFilter_SoftQCDnonD_TuneCUEP8M1_13TeV-pythia8-evtgen/GEN-SIM/MCRUN2_71_V1-v1/90002/4284857B-8197-E611-82EF-3417EBE51A24.root&#34' target='_blank' rel='nofollow'>srm&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2?SFN=/11/store/mc/RunIISummer15GS/BuToKstarMuMu_BMuonFilter_SoftQCDnonD_TuneCUEP8M1_13TeV-pythia8-evtgen/GEN-SIM/MCRUN2_71_V1-v1/90002/4284857B-8197-E611-82EF-3417EBE51A24.root&#34</a>;],&#34;checksums&#34;&#58;&#34;adler32&#58;4acfb8b8&#34;,&#34;destinations&#34;&#58;[&#34;<a href='srm&#58;//srm-cms.jinr-t1.ru&#58;8443/srm/managerv2?SFN=/pnfs/jinr-t1.ru/data/cms/store/temp/user/cwissing/File.A00&#34' target='_blank' rel='nofollow'>srm&#58;//srm-cms.jinr-t1.ru&#58;8443/srm/managerv2?SFN=/pnfs/jinr-t1.ru/data/cms/store/temp/user/cwissing/File.A00&#34</a>;]}]}

-- by Christoph Wissing at Thu Mar 09 10&#58;50&#58;49 UTC 2017

Hi all,
i&#39;m checking one of the transfers errors you reported for FNAL-&#62; JINR

<a href='https&#58;//fts435.cern.ch&#58;8449/var/log/fts3/transfers/2017-03-09/cmsdcatape01.fnal.gov__srm-cms.jinr-t1.ru/2017-03-09-0709__cmsdcatape01.fnal.gov__srm-cms.jinr-t1.ru__1332070255__450c58b2-0493-11e7-a86a-02163e0182e8' target='_blank' rel='nofollow'>https&#58;//fts435.cern.ch&#58;8449/var/log/fts3/transfers/2017-03-09/cmsdcatape01.fnal.gov__srm-cms.jinr-t1.ru/2017-03-09-0709__cmsdcatape01.fnal.gov__srm-cms.jinr-t1.ru__1332070255__450c58b2-0493-11e7-a86a-02163e0182e8</a>

this is an issue on the source

INFO Thu Mar 09 08&#58;06&#58;15 2017; [1489043175720] BOTH GFAL2&#58;CORE&#58;COPY	LIST&#58;ENTER
INFO Thu Mar 09 08&#58;06&#58;15 2017; [1489043175720] BOTH GFAL2&#58;CORE&#58;COPY	LIST&#58;ITEM	<a href='srm&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2?SFN=/11/store/mc/RunIISummer15GS/BuToKstarMuMu_BMuonFilter_SoftQCDnonD_TuneCUEP8M1_13TeV-pythia8-evtgen/GEN-SIM/MCRUN2_71_V1-v1/90002/4284857B-8197-E611-82EF-3417EBE51A24.root' target='_blank' rel='nofollow'>srm&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2?SFN=/11/store/mc/RunIISummer15GS/BuToKstarMuMu_BMuonFilter_SoftQCDnonD_TuneCUEP8M1_13TeV-pythia8-evtgen/GEN-SIM/MCRUN2_71_V1-v1/90002/4284857B-8197-E611-82EF-3417EBE51A24.root</a> =&#62; <a href='srm&#58;//srm-cms.jinr-t1.ru&#58;8443/srm/managerv2?SFN=/pnfs/jinr-t1.ru/data/cms/store/mc/RunIISummer15GS/BuToKstarMuMu_BMuonFilter_SoftQCDnonD_TuneCUEP8M1_13TeV-pythia8-evtgen/GEN-SIM/MCRUN2_71_V1-v1/90002/4284857B-8197-E611-82EF-3417EBE51A24.root' target='_blank' rel='nofollow'>srm&#58;//srm-cms.jinr-t1.ru&#58;8443/srm/managerv2?SFN=/pnfs/jinr-t1.ru/data/cms/store/mc/RunIISummer15GS/BuToKstarMuMu_BMuonFilter_SoftQCDnonD_TuneCUEP8M1_13TeV-pythia8-evtgen/GEN-SIM/MCRUN2_71_V1-v1/90002/4284857B-8197-E611-82EF-3417EBE51A24.root</a>
INFO Thu Mar 09 08&#58;06&#58;15 2017; [1489043175720] BOTH GFAL2&#58;CORE&#58;COPY	LIST&#58;EXIT
INFO Thu Mar 09 08&#58;06&#58;16 2017; [1489043176576] BOTH SRM	PREPARE&#58;ENTER
INFO Thu Mar 09 08&#58;06&#58;16 2017; [1489043176576] SOURCE SRM	CHECKSUM&#58;ENTER
INFO Thu Mar 09 08&#58;06&#58;17 2017; [1489043177077] SOURCE SRM	CHECKSUM&#58;EXIT
INFO Thu Mar 09 08&#58;09&#58;15 2017; Timeout stopped
ERR Thu Mar 09 08&#58;09&#58;15 2017; Recoverable error&#58; [110] SOURCE SRM_GET_TURL srm-ifce err&#58; Connection timed out, err&#58; [SE][StatusOfGetRequest][ETIMEDOUT] httpg&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2&#58; User timeout over

it means that we could not get a TURL from the FNAL SRM within the 3 minutes timeout, could be that the FNAL SRM is overloaded.
cheers
Andrea

-- by Andrea Manzi at Thu Mar 09 08&#58;33&#58;04 UTC 2017

Hi Chih-Hao,

in fact, there are no sites with the problem like&#58;
{{{
TRANSFER SOURCE SRM_GET_TURL srm-ifce err&#58; Connection timed out, err&#58; [SE][StatusOfGetRequest][ETIMEDOUT] httpg&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2&#58; User timeout over
}}}
other then FNAL&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=d&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=
This problem occurs only when transferring from T1_US_FNAL_Buffer.

-- by Valery Mitsyn at Thu Mar 09 08&#58;30&#58;31 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>
</div><script type='text/javascript'>
        $('#show_180397267').click(function() {
            $('#detail_180397267').slideDown("normal");
            $('#show_180397267').hide();
            $('#hide_180397267').show();
        });
        $('#hide_180397267').click(function() {
            $('#detail_180397267').slideUp();
            $('#hide_180397267').hide();
            $('#show_180397267').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32926#1489019301'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-09T00:28:21+00:00">Mar 9, 2017 12:28 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1489019301">&nbsp;</a></div><pre>Dear FTS/GFAL experts,
could you explain what are these errors about&#58;
TRANSFER SOURCE SRM_GET_TURL srm-ifce err&#58; Connection timed out, err&#58; [SE][StatusOfGetRequest][ETIMEDOUT] httpg&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2&#58; User timeout over
Thanks,
NataliaChanged CC to ;cms-comp-ops-transfer-team@....;
fts-support@....

-- by Natalia Ratnikova at Wed Mar 08 22&#58;49&#58;06 UTC 2017

Hi FNAL,

I am adding the fts-support@...., hopefully they help to explain the srm-ifce  timeout errors&#58;

TRANSFER SOURCE SRM_GET_TURL srm-ifce err&#58; Connection timed out, err&#58; [SE][StatusOfGetRequest][ETIMEDOUT] httpg&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2&#58; User timeout over

If these timeouts are confirmed to be due to underlying stage-outs from tape, it would be good to check the FileStager agent logs at FNAL and investigate on how quickly  the pre-staged files are  purged from the disk.
Thanks,
Natalia

-- by Natalia Ratnikova at Wed Mar 08 22&#58;46&#58;23 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1489019228'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-09T00:27:08+00:00">Mar 9, 2017 12:27 AM UTC</time><a class="anchor" name="1489019228">&nbsp;</a></div><pre>Hi, Valery,

Indeed, xrdcp is not srmcp. However, the root cause was slow transfers resulting in timeout.
Using xrdcp is a quick way to check.
If the rate is fine, it rules out the problem in physical network.
Then, we look else where.
The fact that most of such timeout errors from T1_US_FNAL_Buffer were transfers to T1_RU_JINR_Disk indicates the problem is not likely at T1_US_FNAL_Buffer.
The fact that many other sites have the same problem transferring to T1_RU_JINR_Disk indicates the problem is very likely at T1_RU_JINR_Disk.
The investigation should focus on why the transfers are slow.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang</pre></div><div class='update_description'><i onclick="document.location='32926#1489010777'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-08T22:06:17+00:00">Mar 8, 2017 10:06 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1489010777">&nbsp;</a></div><pre>Hi Valery,
indeed srm-ifce library is a part of gfal2 client implementing the srm interface.  I guess it is worth checking with the FTS/GFAL developers about this error and how to alleviate the timeout problem.
- Natalia.

-- by Natalia Ratnikova at Wed Mar 08 18&#58;30&#58;07 UTC 2017

Valery Mitsyn has subscribed to this ticket.

xrootd works from JINR too&#58;
{{{
xrdcp -f -d 1 root&#58;//cmsdcatape01.fnal.gov//pnfs/fs/usr/cms/WAX/11/store/mc/RunIISummer15wmLHEGS/DYJetsToTauTau_ForcedMuEleDecay_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8/GEN-SIM/MCRUN2_71_V1-v1/60001/3C520B3E-0513-E611-B5F1-001E67DDC88A.root /dev/null
[3.713GB/3.713GB][100%][==================================================][15.46MB/s]
}}}
But it is not the same case as SRM, so I think this test is meanless.
Seems to me, the error like &#34;TRANSFER SOURCE SRM_GET_TURL srm-ifce err&#34; appeared jn FTS server.

-- by Valery Mitsyn at Wed Mar 08 17&#58;15&#58;21 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1489010736'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-08T22:05:36+00:00">Mar 8, 2017 10:05 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1489010736">&nbsp;</a></div><pre>Is there anything that T1_US_FNAL can do to help this?

-- Chih-Hao
-- by huangch at Wed Mar 08 22&#58;05&#58;01 UTC 2017

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000829322</a></pre></div><div class='update_description'><i onclick="document.location='32926#1488930501'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-07T23:48:21+00:00">Mar 7, 2017 11:48 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1488930501">&nbsp;</a></div><pre>The NEARLINE is a general SRM term for file location on MSS storage, meaning file is not readily available on the cache, but can be staged.
PhEDEx  FileStager agent running at MSS sites takes care to pre-stage the files needed for the outgoing transfers.

If you see transfers attempted for the files that are NEARLINE, it may mean that successfully staged files are purged too quickly from the storage cache.

PhEDEx will  retry both  pre-staging  and transfer.  I checked  one file from an older timeout error, and it has reached JINR Disk, which confirms things are working properly on PhEDx side.

From FileStager agent logs at FNAL one should be able to see if the files are staged multiple times and how often.

-- by Natalia Ratnikova at Tue Mar 07 18&#58;47&#58;39 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1488930445'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-07T23:47:25+00:00">Mar 7, 2017 11:47 PM UTC</time><a class="anchor" name="1488930445">&nbsp;</a></div><pre>We, T1_US_FNAL_*, take one file from the error log&#58;

From&#58; T1_US_FNAL_Buffer
To&#58; T1_RU_JINR_Disk
Block&#58; /DYJetsToTauTau_ForcedMuEleDecay_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8/RunIISummer15wmLHEGS-MCRUN2_71_V1-v1/GEN-SIM#d26fc280-1307-11e6-85e4-001e67abf094
ID&#58; 6506930
File&#58; /store/mc/RunIISummer15wmLHEGS/DYJetsToTauTau_ForcedMuEleDecay_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8/GEN-SIM/MCRUN2_71_V1-v1/60001/3C520B3E-0513-E611-B5F1-001E67DDC88A.root
Size&#58; 3987035099
Checksum&#58; adler32&#58;508db0d6,cksum&#58;4141405243
Details&#58; TRANSFER SOURCE SRM_GET_TURL srm-ifce err&#58; Connection timed out, err&#58; [SE][StatusOfGetRequest][ETIMEDOUT] httpg&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2&#58; User timeout over
Count&#58; 1
Assigned&#58; Sun Mar  5 19&#58;38&#58;06 2017
Xfer&#58; Tue Mar  7 00&#58;26&#58;42 2017
Done&#58; Tue Mar  7 01&#58;03&#58;48 2017

and did a xrdcp from lxplus.cern.ch&#58;

[huangch@lxplus014 ~]$ xrdcp -f -d 1 root&#58;//cmsdcatape01.fnal.gov//pnfs/fs/usr/cms/WAX/11/store/mc/RunIISummer15wmLHEGS/DYJetsToTauTau_ForcedMuEleDecay_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8/GEN-SIM/MCRUN2_71_V1-v1/60001/3C520B3E-0513-E611-B5F1-001E67DDC88A.root /dev/null
[3.713GB/3.713GB][100%][==================================================][23.47MB/s]
[huangch@lxplus014 ~]$

The rate is not too bad and this 3.7GB file was transferred in 3 minutes over the ocean.
The problem is not likely at T1_US_FNAL_Buffer.
Can T1_RU_JINR_Disk try the same and see what speed it gets?
Of course, T1_US_FNAL_Buffer is MSS, many older files could have been on tapes. However, It usually takes only a few more minutes to read files off the tapes.

Cheers,

-- Chih-Hao

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=huangch/CN=677770/CN=Chih-Hao Huang</pre></div><div class='update_description'><i onclick="document.location='32926#1488908252'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-07T17:37:32+00:00">Mar 7, 2017 05:37 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1488908252">&nbsp;</a></div><pre>-- by Sebastian Pulido at Tue Mar 07 17&#58;37&#58;05 UTC 2017

Escalated this ticket to OSG(Prod)

-- by Sebastian Pulido at Tue Mar 07 17&#58;35&#58;33 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1488908132'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-07T17:35:32+00:00">Mar 7, 2017 05:35 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1488908132">&nbsp;</a></div><pre>For my education, what does &#34;NEARLINE&#34; mean? I haven&#39;t noticed that error before.

-- by Siddharth Narayanan at Tue Mar 07 17&#58;34&#58;38 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1488906751'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-07T17:12:31+00:00">Mar 7, 2017 05:12 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1488906751">&nbsp;</a></div><pre>I had a look a five random files. Four are reported as &#39;NEARLINE&#39; only, which would explain, why the transfer runs into time-out. I have to admit I do not know how Phedex is supposed to handle this. Perhaps someone can educate me how that _should_ work. Doing this we might verify, if this is properly working for the link in question. Looks like it is not....

Christoph

-- by Christoph Wissing at Tue Mar 07 17&#58;11&#58;59 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1488905070'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-07T16:44:30+00:00">Mar 7, 2017 04:44 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1488905070">&nbsp;</a></div><pre>Nikolay Voytishin has subscribed to this ticket.

Hi!

It&#39;s T1_RU_JINR_Disk. We&#39;ll try to gather the list .
Meanwhile you can look for yourself here&#58;

<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;ErrorInfo?tofilter=T1_RU_JINR_Disk&fromfilter=T1_US_FNAL_Buffer&report_code=.*&xfer_code=.*&to_pfn=.*&from_pfn=.*&log_detail=.*&log_validate=.*&.submit=Update#

Best regards,
Nikolay

-- by Nikolay Voytishin at Tue Mar 07 16&#58;43&#58;51 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1488903390'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-07T16:16:30+00:00">Mar 7, 2017 04:16 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1488903390">&nbsp;</a></div><pre>Hi,
could we have the full list of what is stuck in FNAL=&#62;JINR and maybe think of a way to keep all at FNAL, or redirect to another system.
Is this to the JINR MSS endpoint, or disk ?

-- by jean-roch vlimant at Tue Mar 07 16&#58;16&#58;01 UTC 2017

Valery Mitsyn has subscribed to this ticket.

-- by Valery Mitsyn at Tue Mar 07 11&#58;56&#58;11 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a></pre></div><div class='update_description'><i onclick="document.location='32926#1488887054'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-07T11:44:14+00:00">Mar 7, 2017 11:44 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1488887054">&nbsp;</a></div><pre>Dear site admin,

We are following on transfers to JINR, we noticed that some subscriptions are reporting many timeouts [1], looking at the files sizes, many of them are bigger than the CMS average file size (2.5 GB). [2]

Can you set the -timeout option in the FileDownload agent in order to help with transfers that are taking longer than expected, and because of that, meeting the perforce marker? Checking current configuration [3], seems that the options is not currently set in the agent. I would suggest to set the value -timeout 7200 for the purpose of this ticket.

Please refer to the following documentation in order to double check the steps needed to apply the change [4].

Thanks,
Sebastian.
Transfer Team

[1] <a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;ErrorInfo?tofilter=JINR_Disk&fromfilter=.*&report_code=.*&xfer_code=.*&to_pfn=.*&from_pfn=.*&log_detail=.*&log_validate=.*&.submit=Update#
[2] <a href='https&#58;//cmsweb.cern.ch/phedex/datasvc/perl/prod/data?block=/ReggeGribovPartonMC_EposLHC_PbP_4080_4080_DataBS/pPb816Spring16GS-MB_80X_mcRun2_pA_v4-v1/GEN-SIM%238a3242cc-d783-11e6-933c-002590494c06' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/datasvc/perl/prod/data?block=/ReggeGribovPartonMC_EposLHC_PbP_4080_4080_DataBS/pPb816Spring16GS-MB_80X_mcRun2_pA_v4-v1/GEN-SIM%238a3242cc-d783-11e6-933c-002590494c06</a>
[3] <a href='https&#58;//cmsweb.cern.ch/phedex/datasvc/perl/prod/agentlogs?node=T1_RU_JINR_Disk&agent=FileDownload' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/datasvc/perl/prod/agentlogs?node=T1_RU_JINR_Disk&agent=FileDownload</a>
[4] <a href='https&#58;//twiki.cern.ch/twiki/bin/viewauth/CMS/PhedexAdminDocsAgentConfiguration' target='_blank' rel='nofollow'>https&#58;//twiki.cern.ch/twiki/bin/viewauth/CMS/PhedexAdminDocsAgentConfiguration</a>

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126123</a>

[Ticket History]
Subject&#58; Transfer timeouts to JINR_Disk
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-transfer-team@....
-- by Sebastian Pulido at Tue Jan 24 13&#58;46&#58;45 UTC 2017

-- by Valery Mitsyn at Tue Jan 24 13&#58;51&#58;43 UTC 2017

I added &#34;-timeout 7200&#34; in the agents configs.
Right now we have a big backlog in incoming transfers, so looks like we should wait a few hours to see an effect.

-- by Valery Mitsyn at Tue Jan 24 16&#58;05&#58;34 UTC 2017

Hi Valery,
Can you confirm the agents were re-started? I will suspend temporarily all transfers to JINR DIsk for about 30 mins in order to leverage the change in configuration.
<div id='show_1251309255' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1251309255'>
Let me know,
Sebastian.
Transfer Team

-- by Sebastian Pulido at Tue Jan 24 16&#58;19&#58;11 UTC 2017

Hi Sebastian,

yes, I restart all agents two hours ago.

-- by Valery Mitsyn at Tue Jan 24 16&#58;32&#58;11 UTC 2017

Hi Sebastian,

in the agent log I see negative report/xfer codes, like below
from=T1_IT_CNAF_Buffer to=T1_RU_JINR_Disk priority=3 report-code=-1 xfer-code=-2
I doesn&#39;t know what this mean.

-- by Valery Mitsyn at Tue Jan 24 16&#58;35&#58;50 UTC 2017

Dear Valery,

All block level subscriptions are being suspended until 7pm today (script currently running).
Phedex will unsuspended automatically.
The complete list of subscriptions can be found at [1].

About the xfer-code, AFAIK, means that Phedex is trying to marked the transfer as expired, so a re-routing can be re-done.
Will double checking with Phedex developers.

Thanks for the change in configuration.

Sebastian.
Transfer Team

-- by Sebastian Pulido at Tue Jan 24 16&#58;53&#58;26 UTC 2017

[1] /afs/cern.ch/user/j/jpulidom/public/T1_RU_JINR/126123_subs.list

-- by Sebastian Pulido at Tue Jan 24 16&#58;54&#58;53 UTC 2017

Hi Sebastian,

FTS backend doesn&#39;t accept -timeout, it is for SRM only.
Could somebody raise timeout in the FTS channel?
Still see negative codes like &#34;report-code=-1 xfer-code=-2&#34; in filedownload agents logs.

-- by Valery Mitsyn at Sun Jan 29 08&#58;59&#58;13 UTC 2017

Sent 1st reminder to ticket submitter (sebastian.pulido@....) requesting input.

-- by GGUS SYSTEM at Wed Feb 08 08&#58;42&#58;38 UTC 2017

-- by Sebastian Pulido at Wed Feb 08 09&#58;31&#58;18 UTC 2017

Hi Sebastian,

what we can do now with the ticket?
Could we close it?

-- by Valery Mitsyn at Wed Feb 08 11&#58;20&#58;52 UTC 2017

Changes in configuration for FileDownload agent applied.

Sebastian.
Transfer Team

-- by Sebastian Pulido at Wed Feb 08 12&#58;00&#58;17 UTC 2017

Re-opening this ticket, as transfer rates are still slow. Many invalid transfers (due to timeouts) observed here&#58;

<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Routing?tofilter=T1_RU_JINR_Disk&fromfilter=.*&priority=any&showinvalid=on&blockfilter=.*&.submit=Update#

300 TB backlog persisting for some time&#58;

<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;QueuePlots?graph=missing&entity=dest&dest_filter=T1_RU_JINR_Disk&no_mss=true&period=l96h&upto=&.submit=Update

I also see many invalid transfers to JINR_MSS&#58;

<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Routing?tofilter=T1_RU_JINR_MSS&fromfilter=.*&priority=any&showinvalid=on&blockfilter=.*&.submit=Update#

I don&#39;t know if we want to (can?) increase the FTS timeout threshold at CERN, since this is a global setting that will affect non-CMS transfers too. I&#39;d first like to see if it&#39;s at all possible to improve transfer rates to JINR. I&#39;m not entirely sure what the problem is, since Debug transfer rates are comparable to other T1s (~15 MB/s).Changes in configuration for FileDownload agent applied.

Sebastian.
Transfer Team

-- by Siddharth Narayanan at Mon Feb 20 19&#58;35&#58;59 UTC 2017

It seems to me, most errors at least for the last hour comes from two Tier1&#58;
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=h&errors=on&tofilter=T1_RU_JINR_%28D|B%29&andor=and&fromfilter=
T1_DE_KIT_Buffer & T1_US_FNAL_Buffer. In the details there are many errors like&#58;
T1_DE_KIT_Buffer
{{{
TRANSFER TRANSFER  Transfer canceled because the gsiftp performance marker timeout of 360 seconds has been exceeded, or all performance markers during that period indicated zero bytes transferred
}}}
and T1_US_FNAL_Buffer
{{{
TRANSFER SOURCE SRM_GET_TURL error on the turl request &#58; [SE][PrepareToGet][SRM_FILE_UNAVAILABLE] File is not online.
}}}
from my point of view an errors are on source sides not on our destination side.
In any case we&#39;ll look more closely on our WAN connectivity and routing, this sort of network problem may comes from asymmetric path from/to
our storage.

-- by Valery Mitsyn at Tue Feb 21 17&#58;48&#58;07 UTC 2017

Sent 1st reminder to ticket submitter (sebastian.pulido@....) requesting input.

-- by GGUS SYSTEM at Wed Mar 01 08&#58;42&#58;55 UTC 2017

Related to this issue. Transfers from T1_RU_JINR to T1_US_ FNAL, T1_DE_KIT and T2_CH_CERN have been reporting timeouts [1][2][3] as well.  The average transfer rate from T1_RU_JINR to this sites in the last 96 hours has been&#58;

T1_US_ FNAL =&#62; 14.5 MB/s
T1_DE_KIT =&#62;  1 MB/s
T2_CH_CERN =&#62; 2.5 MB/s

[1] <a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;ErrorInfo?tofilter=T1_US_FNAL&fromfilter=T1_RU_JINR&report_code=.*&xfer_code=.*&to_pfn=.*&from_pfn=.*&log_detail=.*&log_validate=.*&.submit=Update#
[2] <a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;ErrorInfo?tofilter=T1_DE_KIT_Disk&fromfilter=T1_RU_JINR&report_code=.*&xfer_code=.*&to_pfn=.*&from_pfn=.*&log_detail=.*&log_validate=.*&.submit=Update#
[3 ]<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;ErrorInfo?tofilter=T2_CH_CERN&fromfilter=T1_RU_JINR&report_code=.*&xfer_code=.*&to_pfn=.*&from_pfn=.*&log_detail=.*&log_validate=.*&.submit=Update#

-- by David Urbina at Wed Mar 01 18&#58;06&#58;30 UTC 2017

Based on the fact that we are having timeouts from transfers also from T1_RU_JINR and the current clogging in the queue. I think the problem is directly related to T1_RU_JINR side.

Did you have the chance to take a closer look at the network configuration?

-- by David Urbina at Wed Mar 01 22&#58;58&#58;32 UTC 2017

Dear experts,

could you please explain to us, what represents the &#34;Expired&#34; column on the activity page [1]?

And also how can be interpreted errors like [2] with the deteiled log&#58;

TRANSFER SOURCE SRM_GET_TURL srm-ifce err&#58; Connection timed out, err&#58; [SE][StatusOfGetRequest][ETIMEDOUT] httpg&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2&#58; User timeout over

The entire team is working on the issue. We are trying to clarify whether all errors are caused by us or not.

Best regards,
Nikolay

[1] <a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Rate?span=d&errors=on&tofilter=T1_&andor=and&fromfilter=T1_%28DE%7CUS%29
[2] <a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;ErrorInfo?tofilter=T1_RU_JINR_Disk;fromfilter=T1_US_FNAL_Buffer

-- by Nikolay Voytishin at Fri Mar 03 08&#58;18&#58;09 UTC 2017

Nikolay Voytishin has subscribed to this ticket.

-- by Nikolay Voytishin at Fri Mar 03 08&#58;18&#58;33 UTC 2017

Involve person(s) has been changed to dolbilov@....;strizh@...., natasha@.....
Hi Nikolay,

In regards to your first question&#58; I believe that means the transfer has timed out and PhEDEx has stopped trying temporarily. I&#39;m not totally sure what happens to the transfer after it expires, but I think it remains taking up volume in the queue as an invalid transfer in [1]. Actually, the picture in [1] is much better than it was last week. However, the overall rate is low (6 TB in the last 96h).

I really don&#39;t know the answer to the second question though. I&#39;ve added Natalia in cc, who is both a PhEDEx expert and is at FNAL, so she might be able to tell us if that particular error is on the FNAL side or not.

Best,
Sid

[1] <a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;Routing?tofilter=T1_RU_JINR_Disk&fromfilter=.*&priority=any&showinvalid=on&blockfilter=.*&.submit=Update

-- by Siddharth Narayanan at Fri Mar 03 13&#58;21&#58;35 UTC 2017

Hi all!

Returning to the errors like&#58;

TRANSFER SOURCE SRM_GET_TURL srm-ifce err&#58; Connection timed out, err&#58; [SE][StatusOfGetRequest][ETIMEDOUT] httpg&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2&#58; User timeout over

we figured out its meaning. From the logs we can see&#58;

Transfer Log&#58;
(722 lines)
(99949 chars)
1488515326 from undefined to SUBMITTED
1488533511 from SUBMITTED to ACTIVE
1488533686 from ACTIVE to FAILED
1488533686 file transfer details
SOURCE=&#34;<a href='srm&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2?SFN=/11/store/mc/RunIISummer15wmLHEGS/DYJetsToTauTau_ForcedMuEleDecay_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8/GEN-SIM/MCRUN2_71' target='_blank' rel='nofollow'>srm&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2?SFN=/11/store/mc/RunIISummer15wmLHEGS/DYJetsToTauTau_ForcedMuEleDecay_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8/GEN-SIM/MCRUN2_71</a>
DESTINATION=&#34;<a href='srm&#58;//srm-cms.jinr-t1.ru&#58;8443/srm/managerv2?SFN=/pnfs/jinr-t1.ru/data/cms/store/mc/RunIISummer15wmLHEGS/DYJetsToTauTau_ForcedMuEleDecay_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX-p' target='_blank' rel='nofollow'>srm&#58;//srm-cms.jinr-t1.ru&#58;8443/srm/managerv2?SFN=/pnfs/jinr-t1.ru/data/cms/store/mc/RunIISummer15wmLHEGS/DYJetsToTauTau_ForcedMuEleDecay_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX-p</a>
DURATION=&#34;181&#34; RETRIES=&#34;0&#34; REASON=&#34;TRANSFER SOURCE SRM_GET_TURL srm-ifce err&#58; Connection timed out, err&#58; [SE][StatusOfGetRequest][ETIMEDOUT]
httpg&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2&#58; User timeout over&#34;

Here we are the DESTINATION and not the SOURCE. It is clear that FTS could no reach cmsdcatape01.fnal.gov&#58;8443 on the SOURCE side, so this has nothing to do with us.

Best regards,
Nikolay

-- by Nikolay Voytishin at Sat Mar 04 17&#58;39&#58;32 UTC 2017

Hi,

the errors like&#58;
{{{
TRANSFER SOURCE SRM_GET_TURL srm-ifce err&#58; Connection timed out, err&#58; [SE][StatusOfGetRequest][ETIMEDOUT] httpg&#58;//cmsdcatape01.fnal.gov&#58;8443/srm/managerv2&#58; User timeout over
}}}
still the most popular in the transfers from T1_US_FNAL_Buffer to T1_RU_JINR_Disk.
<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;ErrorInfo?tofilter=T1_RU_JINR_Disk;fromfilter=T1_US_FNAL_Buffer
This is not our error/problem, but looks like all other transfers blocked for this reason.

Maybe now we need to re-route the ticket to T1_US_FNAL?

-- by Valery Mitsyn at Tue Mar 07 11&#58;30&#58;13 UTC 2017

Hi Valery, Nikolay,

Thanks for digging deeper. I&#39;m rerouting the ticket to FNAL to see if they can help.

Best,
Sid

-- by Siddharth Narayanan at Tue Mar 07 11&#58;43&#58;39 UTC 2017
</div><script type='text/javascript'>
        $('#show_1251309255').click(function() {
            $('#detail_1251309255').slideDown("normal");
            $('#show_1251309255').hide();
            $('#hide_1251309255').show();
        });
        $('#hide_1251309255').click(function() {
            $('#detail_1251309255').slideUp();
            $('#hide_1251309255').hide();
            $('#show_1251309255').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F32926">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
