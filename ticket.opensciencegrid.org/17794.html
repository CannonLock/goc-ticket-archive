<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[17794] [sr #140625] Problems with missing/corrupt files at FNAL</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=17794" method="post">
<div class="page-header">
    <h3><span class="muted">17794</span> / [sr #140625] Problems with missing/corrupt files at FNAL</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">noreply [Jen</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">noreply [Jen Adelman-McCarthy]</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-11-07</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000398619">INC000000398619</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=98733">98733</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/17794", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/17794?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/17794?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20%5Bsr%20%23140625%5D%20Problems%20with%20missing%2Fcorrupt%20files%20at%20FNAL%20ISSUE%3D17794%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='17794#1386115227'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-12-04T00:00:27+00:00">Dec 4, 2013 12:00 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1386115227">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.

-- by SYSTEM at Tue Dec 03 23&#58;59&#58;53 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733</a></pre></div><div class='update_description'><i onclick="document.location='17794#1384796034'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-11-18T17:33:54+00:00">Nov 18, 2013 05:33 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1384796034">&nbsp;</a></div><pre>Hi,

I have set the two directories on EOS to 1 month expiration

Thanks
CatalinWe have provided a new plugin to be used with xrootd and avoid fuse contentions.
The fuse remaining issues (open,write, read and execute bits) are addressed by developers.

Thanks
Catalin

-- by Catalin Dumitrescu at Mon Nov 18 17&#58;32&#58;45 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733</a></pre></div><div class='update_description'><i onclick="document.location='17794#1384762491'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-11-18T08:14:51+00:00">Nov 18, 2013 08:14 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1384762491">&nbsp;</a></div><pre>Sent 1st reminder to ticket submitter (noreply-savannah@....) requesting input.

-- by SYSTEM at Mon Nov 18 08&#58;14&#58;31 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733</a></pre></div><div class='update_description'><i onclick="document.location='17794#1384428351'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-11-14T11:25:51+00:00">Nov 14, 2013 11:25 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1384428351">&nbsp;</a></div><pre>Do you mean Run2011A and Run2011B?
If so then yes, provided the threshold is set to 1 month.

Regarding the 0-length files - that is not normal, and I don&#39;t know the cause. My guess is these could be failed stage-outs, and in that case the WMAgent would resubmit the job, and generate a different file name hash the second time.

Thanks,
Jacob

-- by jacob.thomas.linacre at Thu Nov 14 11&#58;25&#58;04 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733</a></pre></div><div class='update_description'><i onclick="document.location='17794#1383937409'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-11-08T19:03:29+00:00">Nov 8, 2013 07:03 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1383937409">&nbsp;</a></div><pre>Can we enable automatic deletions at this time for the last two directories?

Thanks
Catalin

-- by Catalin Dumitrescu at Fri Nov 08 19&#58;02&#58;54 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733</a></pre></div><div class='update_description'><i onclick="document.location='17794#1383923348'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-11-08T15:09:08+00:00">Nov 8, 2013 03:09 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1383923348">&nbsp;</a></div><pre>Hi,

I went over all files listed in any way below - is this the list of problems?

ls&#58;
/lustre/unmerged/Run2011A/HT/RECO/12Oct2013-v1/20025/1E9D699F-2842-E311-B87C-0025905964A6.root&#58;
No such file or directory
-rw-r--r-- 2 cmsprod us_cms 1520284530 Nov  7 10&#58;21
/lustre/unmerged/Run2011A/HT/RECO/12Oct2013-v1/20026/300530A3-3442-E311-AA56-00261894387E.root
-rw-r--r-- 2 cmsprod us_cms 1702548499 Oct 31 14&#58;17
/lustre/unmerged/Run2011A/HT/RECO/12Oct2013-v1/20028/181DFA0D-4642-E311-B81F-00304867924A.root
ls&#58;
/lustre//unmerged/Run2011A/HT/RECO/12Oct2013-v1/20028/80CBB0D8-3F42-E311-A00A-002590596498.root&#58;
No such file or directory
-rw-r--r-- 2 cmsprod us_cms 1758456770 Oct 31 13&#58;46
/lustre/unmerged/Run2011A/HT/RECO/12Oct2013-v1/20028/C68BE37C-4442-E311-B28F-002618943915.root
-rw-r--r-- 2 cmsprod us_cms 1381196560 Nov  4 06&#58;00
/lustre/unmerged/Run2011A/MuHad/RECO/12Oct2013-v1/20002/566C3DFE-1845-E311-A1E4-003048FFD752.root
-rw-r--r-- 2 cmsprod us_cms 1535555203 Nov  4 08&#58;45
/lustre/unmerged/Run2011A/MuHad/RECO/12Oct2013-v1/20003/54BA2B8D-2C45-E311-9167-003048FFD796.root
-rw-r--r-- 2 cmsprod us_cms 1700471124 Nov  4 10&#58;44
/lustre/unmerged/Run2011A/MuHad/RECO/12Oct2013-v1/20004/40538038-2F45-E311-8B3E-0025905964C0.root
-rw-r--r-- 2 cmsprod us_cms 1771450559 Nov  4 13&#58;16
/lustre/unmerged/Run2011A/MuHad/RECO/12Oct2013-v1/20006/EEC1F57A-4B45-E311-8B4B-00259059642A.root
-rw-r--r-- 2 cmsprod us_cms 1574556221 Nov  4 13&#58;04
/lustre/unmerged/Run2011A/MuHad/RECO/12Oct2013-v1/20007/582F4A97-4945-E311-9EB9-003048FFD754.root
ls&#58;
/lustre/unmerged/Run2011A/MuHad/RECO/12Oct2013-v1/20007/7805360B-5345-E311-B621-0025905964C0.root&#58;
No such file or directory
-rw-r--r-- 2 cmsprod us_cms 2328789422 Nov  4 15&#58;38
/lustre/unmerged/Run2011A/MuHad/RECO/12Oct2013-v1/20007/8A73F048-4E45-E311-9590-003048FFCC1E.root
-rw-r--r-- 2 cmsprod us_cms 1535845705 Nov  4 13&#58;07
/lustre/unmerged/Run2011A/MuHad/RECO/12Oct2013-v1/20007/B6D7DCC7-5245-E311-A28F-00259059391E.root
ls&#58;
/lustre/unmerged/Run2011A/MuHad/RECO/12Oct2013-v1/20010/A645EAD5-6A45-E311-B90A-00261894385D.root&#58;
<div id='show_335438616' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_335438616'>No such file or directory
-rw-r--r-- 2 cmsprod us_cms 2334065476 Nov  5 15&#58;27
/lustre/unmerged/Run2011B/MuHad/RECO/12Oct2013-v1/20003/5452E7E2-1346-E311-A8DF-003048FFD7C2.root

There are only 4 missing, while for the others an open failure through xrootd
might have been temporary - yesterday our EOS redirector was down since
lunch time for 6 hours. Why are you using the global redirector to read the
EOS files? That was never done with lustre. Anyway, we will migrate it to a
production environment in the next days.

Out of the 4 files, 3 of the failures are due to fuse mount blocking and
restarts, xrootd communication errors or on a store nodes with disks
disconnected by mistake - sorry for inconvenience. We will work on deploying
tomorrow a newer xrootd version on the grid production nodes. LPC farm always
used a slightly newer version. Anyway, this error should go away once we
harden the fuse implementation. It was also a transient problem due to new
hardware addition and old hardware removal.

The only file still under investigation is&#58;

ls&#58;
/lustre//unmerged/Run2011A/HT/RECO/12Oct2013-v1/20028/80CBB0D8-3F42-E311-A00A-002590596498.root&#58;
No such file or directory

and in this case the two replicas showed different chksums and EOS decided to
drop entirely the file. Both replicas were on hardware not new and one of the
nodes even shows some HW problems sometimes and even restarted twice in the
last week.

Now, we will work with developers and ensure that the right exit codes are
returned and files not deleted after the write operation has returned to the
client (sync-ed to remote server).

Thanks
Catalin

-- by Catalin Dumitrescu at Fri Nov 08 15&#58;08&#58;33 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733</a>
</div><script type='text/javascript'>
        $('#show_335438616').click(function() {
            $('#detail_335438616').slideDown("normal");
            $('#show_335438616').hide();
            $('#hide_335438616').show();
        });
        $('#hide_335438616').click(function() {
            $('#detail_335438616').slideUp();
            $('#hide_335438616').hide();
            $('#show_335438616').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='17794#1383851530'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-11-07T19:12:10+00:00">Nov 7, 2013 07:12 PM UTC</time> by <b>Lisa Giacchetti</b><a class="anchor" name="1383851530">&nbsp;</a></div><pre>jen ,
I noticed that most of hte files in
/lustre/unmerged/Run2011A/HT/RECO/12Oct2013-v1/20025 where the one
example of the missing file came from are of 0 length. Is that normal?

Also the files you say are corrupt do not have an EOS path. I am
confused about that.
EX&#58;
/store/unmerged/Run2011A/HT/RECO/12Oct2013-v1/20028/C68BE37C-4442-E311-B28F-002618943915.root

On 11/7/13 12&#58;28 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='17794#1383851074'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-11-07T19:04:34+00:00">Nov 7, 2013 07:04 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1383851074">&nbsp;</a></div><pre>Hi,

How many errors you have per day?

Thanks
Catalin

-- by Catalin Dumitrescu at Thu Nov 07 19&#58;04&#58;22 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733</a></pre></div><div class='update_description'><i onclick="document.location='17794#1383848912'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-11-07T18:28:32+00:00">Nov 7, 2013 06:28 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1383848912">&nbsp;</a></div><pre>This is an automated notification sent by LCG Savannah.
It relates to&#58;
support #140625, project CMS Computing Infrastructure  Support

==============================================================================
OVERVIEW of support #140625&#58;
==============================================================================

URL&#58;
&#60;<a href='http&#58;//savannah.cern.ch/support/?140625&#62' target='_blank' rel='nofollow'>http&#58;//savannah.cern.ch/support/?140625&#62</a>;

Summary&#58; Problems with missing/corrupt files at FNAL
Project&#58; CMS Computing Infrastructure  Support
Submitted by&#58; jenimal
Submitted on&#58; 2013-11-07 18&#58;27
Category&#58; Central Workflows
Priority&#58; 5 - Normal
Severity&#58; 4 - Important
Status&#58; None
Privacy&#58; Public
Assigned to&#58; cmscompinfrasup-t1usfnal
Originator Email&#58;
Open/Closed&#58; Open
Discussion Lock&#58; Any
GGUS ticket url&#58;
Use GGUS&#58; Yes
Site&#58; T1_US_FNAL

_______________________________________________________

We have been having problems the since the EOS upgrades with missing/corrupt
files/stage-out problems at FNAL.

For the most part we are surviving by running ACDC which solves the stage out
problems or the recovery script which regenerates the missing/corrupt files
<div id='show_537061190' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_537061190'>but this increases the latency of the workflows a great deal as both ACDC and
especially recovery require a LOT of manual intervention.

I&#39;ve tasked Dorian with coming up with a more complete list of
missing/problem files.
(excuse my verbosity but I&#39;m going to point Dorian here to see how to debug
this.. and then have him put notes on debugging on the twiki)
But I will do so for one workflow only here so you have a chance to start
digging and let&#39;s see if we can figure out what&#39;s going on and get the
problem fixed.

franzoni_Fall53_2011A_HT_Run2011A-v1_Prio1_5312p1_130916_235328_2218

<a href='https&#58;//cmsweb.cern.ch/couchdb/workloadsummary/_design/WorkloadSummary/_show/histogramByWorkflow/franzoni_Fall53_2011A_HT_Run2011A-v1_Prio1_5312p1_130916_235328_2218' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/couchdb/workloadsummary/_design/WorkloadSummary/_show/histogramByWorkflow/franzoni_Fall53_2011A_HT_Run2011A-v1_Prio1_5312p1_130916_235328_2218</a>

The following 2 files are missing in lusture&#58;
cmsdataops@cmslpc42&#58;~ &#62;  ls
/lustre//unmerged/Run2011A/HT/RECO/12Oct2013-v1/20028/80CBB0D8-3F42-E311-A00A-002590596498.root
ls&#58;
/lustre//unmerged/Run2011A/HT/RECO/12Oct2013-v1/20028/80CBB0D8-3F42-E311-A00A-002590596498.root&#58;
No such file or directory
ls
/lustre/unmerged/Run2011A/HT/RECO/12Oct2013-v1/20025/1E9D699F-2842-E311-B87C-0025905964A6.root
ls&#58;
/lustre/unmerged/Run2011A/HT/RECO/12Oct2013-v1/20025/1E9D699F-2842-E311-B87C-0025905964A6.root&#58;
No such file or directory

If you look into the directory, there are other files there that were all
written on Oct 31 so these files should be there still.

The next files&#58;
Is still on disk, it&#39;s from Oct 31, and looks to be OK but the WF failed on
it due to stageout failures
&#58;
/store/unmerged/Run2011A/HT/RECO/12Oct2013-v1/20028/C68BE37C-4442-E311-B28F-002618943915.root
&#58;
/store/unmerged/Run2011A/HT/RECO/12Oct2013-v1/20026/300530A3-3442-E311-AA56-00261894387E.root
&#58;
/store/unmerged/Run2011A/HT/RECO/12Oct2013-v1/20028/C68BE37C-4442-E311-B28F-002618943915.root
&#58;
/store/unmerged/Run2011A/HT/RECO/12Oct2013-v1/20028/181DFA0D-4642-E311-B81F-00304867924A.root

/store/data/Run2011A/HT/RAW/v1/000/163/332/FAB1BA2C-BD6D-E011-AE91-003048F1BF66.root

Since the missing files will need to be regenerated anyway.  I am going to
start the recovery proceedure on this workflow.  But we need to understand
what is happening on EOS so these problems don&#39;t crop up in the first place.

Jen

_______________________________________________________

Carbon-Copy List&#58;

CC Address                          | Co...
...
--- body truncated, see attachment mailbody.Thu._7_Nov_2013_19.27.59_.0100.txt for full text ---

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=98733</a>

[Ticket History]
Added attachment mailbody.Thu._7_Nov_2013_19.27.59_.0100.txt
<a href='https&#58;//ggus.eu/pages/windownload.php?attid=ATT103571' target='_blank' rel='nofollow'>https&#58;//ggus.eu/pages/windownload.php?attid=ATT103571</a>

-- by Savannah-by-mail at Thu Nov 07 18&#58;28&#58;12 UTC 2013

Problem also registered in the savannah ticket <a href='https&#58;//savannah.cern.ch/support/index.php?140625' target='_blank' rel='nofollow'>https&#58;//savannah.cern.ch/support/index.php?140625</a>
The responsibility to solve it is entirely transferred to this GGUS ticket

----------- e-mail with large body ------

added in total as mailbody.Thu._7_Nov_2013_19.27.59_.0100.txt

------------ e-mail with large body ------Subject&#58; [sr #140625] Problems with missing/corrupt files at FNAL
Ticket Type&#58; SAVANNAH
CC&#58; cms-crc-on-duty@....
-- by Savannah-by-mail at Thu Nov 07 18&#58;28&#58;12 UTC 2013
</div><script type='text/javascript'>
        $('#show_537061190').click(function() {
            $('#detail_537061190').slideDown("normal");
            $('#show_537061190').hide();
            $('#hide_537061190').show();
        });
        $('#hide_537061190').click(function() {
            $('#detail_537061190').slideUp();
            $('#hide_537061190').hide();
            $('#show_537061190').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F17794">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 17794});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
