<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[26169] OASIS - Matlab questions</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=26169" method="post">
<div class="page-header">
    <h3><span class="muted">26169</span> / OASIS - Matlab questions</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Donald Krieger</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Donald Krieger</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-07-23</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Suchandra Thapa <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/26169", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26169?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26169?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20OASIS%20-%20Matlab%20questions%20ISSUE%3D26169%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='26169#1437592398'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-22T19:13:18+00:00">Jul 22, 2015 07:13 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1437592398">&nbsp;</a></div><pre>Hi Don,

I&#39;m closing the ticket but feel free to reopen it or file a new ticket if you have further questions.

Suchandra</pre></div><div class='update_description'><i onclick="document.location='26169#1437583155'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-22T16:39:15+00:00">Jul 22, 2015 04:39 PM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1437583155">&nbsp;</a></div><pre>Great – thanks.

This ticket can be closed if you like.

Best regards,

Don

[Signature0001]
Don Krieger, Ph.D.
Department of Neurological Surgery
University of Pittsburgh
(412)648-9654 Office
(412)521-4431 Cell/Text</pre></div><div class='update_description'><i onclick="document.location='26169#1437582860'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-22T16:34:20+00:00">Jul 22, 2015 04:34 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1437582860">&nbsp;</a></div><pre>Hi Don,

All the jobs that run through the xd-login host get transparently wrapped in a &#34;job wrapper&#34; that does some setup on a worker node before starting an user job.  The wrapper does a few things to test the worker node and make it the environment a bit more homogenous.  Part of that is to load the modules system from OASIS if it&#39;s available.  So, your jobs should automatically have modules load and you should be able to do a &#39;modules load matlab/2015a&#39;  in your job script to load the runtime libraries.

The only potential change you need to make to your condor scripts would be to add the following requirement (HAS_CVMFS_oasis_opensciencegrid_org =?= TRUE)   to force jobs to only run on resources that provide OASIS and the modules system.  However, if you&#39;re implementing a fall back if OASIS isn&#39;t present then you won&#39;t need that requirement either.

Suchandra</pre></div><div class='update_description'><i onclick="document.location='26169#1437561731'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-22T10:42:11+00:00">Jul 22, 2015 10:42 AM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1437561731">&nbsp;</a></div><pre>Let me make sure I understand.
I can execute the module command within the script that I run on each node on the grid if I choose.
Or I can rely on the “job wrapper” to take care of it for me.
I do not quite get this last.
Is there a directive I must place in the HTCondor job control script?
If so, what is it?
Or is there something else?

I see the information on the OSG wiki at&#58;
<a href='https&#58;//support.opensciencegrid.org/support/solutions/articles/5000634394-accessing-software-using-distributed-environment-modules' target='_blank' rel='nofollow'>https&#58;//support.opensciencegrid.org/support/solutions/articles/5000634394-accessing-software-using-distributed-environment-modules</a>
But I am unable to find any information about using the HTCondor job control script to request matlab capable nodes or, for that matter, OASIS savvy nodes.

Thanks, Suchandra.

Don</pre></div><div class='update_description'><i onclick="document.location='26169#1437517773'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-21T22:29:33+00:00">Jul 21, 2015 10:29 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1437517773">&nbsp;</a></div><pre>Hi Don,

Matlab R2015a is available on OASIS.  If you run a module load matlab/2015a (or which ever version you want to use), the modules system will automatically set the environment so that the matlab runtime libraries will be seen by the OS.  Yes, I meant the script that runs on each grid node, but since you&#39;re submitting from the xd-login host, the job wrapper should take care of setting up the modules system for you.

Suchandra</pre></div><div class='update_description'><i onclick="document.location='26169#1437511800'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-21T20:50:00+00:00">Jul 21, 2015 08:50 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1437511800">&nbsp;</a></div><pre>Suchandra,

Can you respond to Don&#39;s questions about setenv and the grid node script, please?

Thanks!

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26169#1436902457'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-14T19:34:17+00:00">Jul 14, 2015 07:34 PM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1436902457">&nbsp;</a></div><pre>Thanks - no rush with R2015a but that&#39;s great that it will be out there.

I&#39;m coming in through xd-login.

Do I need to place the setenv commands in my script?

And do you mean the script that runs on each grid node?

Don

Don Krieger, Ph.D.
Department of Neurological Surgery
University of Pittsburgh
(412)648-9654 Office
(412)521-4431 Cell/Text</pre></div><div class='update_description'><i onclick="document.location='26169#1436900770'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-14T19:06:10+00:00">Jul 14, 2015 07:06 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1436900770">&nbsp;</a></div><pre>Hi Don,

That sounds pretty reasonable, if you are using the osg flocking host for your jobs, the module command should already be set up.  Otherwise, you&#39;ll need to have your script source /cvmfs/oasis.opensciencegrid.org/osg/modules/lmod/current/init/bash to make the module command available.

The 2015a runtime should be available within a day, I&#39;m in the process of publishing it and it should take a few hours for it to propagate.

Suchandra</pre></div><div class='update_description'><i onclick="document.location='26169#1436895732'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-14T17:42:12+00:00">Jul 14, 2015 05:42 PM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1436895732">&nbsp;</a></div><pre>Thanks, Suchandra.  That’s all good news.

The gzipped tarball of the R2014a MCR install directory is a bit larger than 500 Mbytes.
Rather than limiting my jobs to machines with the installation in place, I would be tempted to include code in my wrapper script which runs the module command and if it fails && if the node has access to a SQUID capable web proxy&#58; fetch the tarball and install it in the local directory, set LD_LIBRARY_PATH to point to it, and run.

What do you think?

Don</pre></div><div class='update_description'><i onclick="document.location='26169#1436894834'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-14T17:27:14+00:00">Jul 14, 2015 05:27 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1436894834">&nbsp;</a></div><pre>Hi Don,

We don&#39;t actually have matlab binaries on OASIS, we only provide the MATLAB runtime libraries.  To answer your questions&#58;

1) we can get the 2015a runtime on OASIS in a day or so
2-4) the matlab licensing doesn&#39;t allow for making matlab available on OSG.  However we distribute the runtime libraries so you can run compiled matlab applications.  The runtime libraries are available through OASIS which is supported by the majority of OSG sites.  There&#39;s a requirement you can add to your condor submit file that&#39;ll let you automatically run jobs only on the sites that support OASIS.  We don&#39;t have any plans to remove the runtime libraries in the foreseeable future since the only burden they place on OASIS is the storage space.

Suchandra Thapa</pre></div><div class='update_description'><i onclick="document.location='26169#1436886769'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-14T15:12:49+00:00">Jul 14, 2015 03:12 PM UTC</time> by <b>echism</b><a class="anchor" name="1436886769">&nbsp;</a></div><pre>Dear OSG support&#58;

I am interested in deploying and large workflow to the OSG which requires matlab.
The OASIS documentation shows several versions of matlab are available including version R2014a.
Here are several questions&#58;
(1)    The latest version of matlab is R2015a.  Do you plan to include the latest version?  What is the projected time frame to do so? Most importantly what is the projected time at which the older versions will be removed from OASIS?
(2)    What percentage of the grid are machines which hold matlab licenses?
(3)    If I have 1000 jobs running on nodes for which matlab is accessible, can they all be using it at the same time or are there license limitations?  If there are limitations, is it recommended to poll for license access and if so, do you have any sample code?
(4)    Does the OASIS matlab installation include the matlab compiler runtime (MCR) libraries?  If so what percentage of the grid are machines with access to MCR?  If not I would like to request that this be added to the OASIS list?  The installed shared libraries amount to about 1.5 Gigabytes and enable execution of compiled matlab code without a license.

Best regards,

Don</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F26169">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 26169});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
