<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[12998] belle certificate problems with osg.pnl.gov SE</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=12998" method="post">
<div class="page-header">
    <h3><span class="muted">12998</span> / belle certificate problems with osg.pnl.gov SE</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Tom Fifield</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">Belle</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Tom Fifield</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-11-26</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=88509">88509</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/12998", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/12998?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/12998?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20belle%20certificate%20problems%20with%20osg.pnl.gov%20SE%20ISSUE%3D12998%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='12998#1353924544'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-26T10:09:04+00:00">Nov 26, 2012 10:09 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1353924544">&nbsp;</a></div><pre>-- by Tom Fifield at Mon Nov 26 10&#58;08&#58;36 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509</a></pre></div><div class='update_description'><i onclick="document.location='12998#1353467715'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-21T03:15:15+00:00">Nov 21, 2012 03:15 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1353467715">&nbsp;</a></div><pre>DNS mapping on workernodes was changed

-- by Tom Fifield at Wed Nov 21 03&#58;14&#58;15 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509</a></pre></div><div class='update_description'><i onclick="document.location='12998#1353464533'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-21T02:22:13+00:00">Nov 21, 2012 02:22 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1353464533">&nbsp;</a></div><pre>Thanks Brock! Testing now

-- by Tom Fifield at Wed Nov 21 02&#58;21&#58;49 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509</a></pre></div><div class='update_description'><i onclick="document.location='12998#1353431826'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-20T17:17:06+00:00">Nov 20, 2012 05:17 PM UTC</time><a class="anchor" name="1353431826">&nbsp;</a></div><pre>Please completely disregard my last message about lcg-ls returning weird things.  For some reason my brain is not working well this morning.  It&#39;s returning exactly what it should returned, and this problem has been fixed.  You can close this ticket.

-Brock

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12998#1353431490'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-20T17:11:30+00:00">Nov 20, 2012 05:11 PM UTC</time><a class="anchor" name="1353431490">&nbsp;</a></div><pre>Okay, I have fixed the reverse DNS lookup issue&#58;

berwin@wn3&#58;~ $ nslookup  osg.pnl.gov
Server&#58;		192.168.122.2
Address&#58;	192.168.122.2#53

Name&#58;	osg.pnl.gov
Address&#58; 192.168.122.9

&#60;[0]&#62; Tue Nov 20 09&#58;07&#58;57 PST 2012
berwin@wn3&#58;~ $ nslookup  192.168.122.9
Server&#58;		192.168.122.2
Address&#58;	192.168.122.2#53

9.122.168.192.in-addr.arpa	name = osg.pnl.gov.

I think there might be a separate issue however.  For example, this works well&#58;

berwin@wn3&#58;~ $ lcg-ls   <a href='srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle' target='_blank' rel='nofollow'>srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle</a>
/se/belle/.globus
/se/belle/.bash_history
/se/belle/user
/se/belle/test
/se/belle/test2
/se/belle/brock
/se/belle/.subversion

but this does not&#58;

berwin@wn3&#58;~ $ lcg-ls   <a href='srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle/user' target='_blank' rel='nofollow'>srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle/user</a>
/se/belle/user/belle

Because if I do an &#39;ls&#39; on the filesystem you can see that there are files inside of that directory&#58;

berwin@wn3&#58;/se/belle/user $ ls -al /se/belle/user/belle
<div id='show_541974247' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_541974247'>total 16
drwxr-xr-x 4 belle belle 4096 Nov 19 22&#58;27 .
drwxr-xr-x 3 belle belle 4096 Oct 26 15&#58;29 ..
drwxr-xr-x 2 belle belle 4096 Nov 19 22&#58;30 fifieldt-cern
drwxr-xr-x 3 belle belle 4096 Oct 26 15&#58;30 hideki

So I&#39;m not sure what&#39;s going on there yet.

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249
</div><script type='text/javascript'>
        $('#show_541974247').click(function() {
            $('#detail_541974247').slideDown("normal");
            $('#show_541974247').hide();
            $('#hide_541974247').show();
        });
        $('#hide_541974247').click(function() {
            $('#detail_541974247').slideUp();
            $('#hide_541974247').hide();
            $('#show_541974247').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12998#1353430238'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-20T16:50:38+00:00">Nov 20, 2012 04:50 PM UTC</time><a class="anchor" name="1353430238">&nbsp;</a></div><pre>Interestingly, I have been debugging with a different set of tools.  I&#39;ve been using &#34;srmls&#34; like this&#58;

berwin@wn3&#58;~ $ srmls <a href='srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle/' target='_blank' rel='nofollow'>srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle/</a>
/se/belle//
/se/belle/.globus/
73 /se/belle/.bash_history
/se/belle/user/
/se/belle/test/
/se/belle/test2/
/se/belle/brock/
/se/belle/.subversion/

Which works just fine and doesn&#39;t seem to care about the reverse lookup of the IP address for the SRM server.  This is exactly why I thought everything was fine -- that tool works just fine, but lcg-ls does not.

-Brock

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12998#1353430062'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-20T16:47:42+00:00">Nov 20, 2012 04:47 PM UTC</time><a class="anchor" name="1353430062">&nbsp;</a></div><pre>Ahh, okay, after running your lcg-ls command, I know exactly what the problem is.  You are exactly right&#58; it is the worker node configuration that is different (and broken).

The problem is that osg.pnl.gov resolves to a different internal IP address from the worker nodes.  The reverse DNS lookup of that IP address in NOT osg.pnl.gov.  I think the solution will be to make the reverse DNS lookup of the internal IP address resolve back to osg.pnl.gov.  I&#39;ll let you know once I&#39;ve implemented this.

Thanks for the detailed information you provided.

-Brock

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12998#1353428977'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-20T16:29:37+00:00">Nov 20, 2012 04:29 PM UTC</time><a class="anchor" name="1353428977">&nbsp;</a></div><pre>Actually, this is concerning&#58;

&#34;GSS Major Status&#58; Unexpected Gatekeeper or Service Name&#34;

That might suggest that the CN is different for some reason that &#34;osg.pnl.gov&#34; of the certificate.....

I&#39;m still looking into this.

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12998#1353428974'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-20T16:29:34+00:00">Nov 20, 2012 04:29 PM UTC</time><a class="anchor" name="1353428974">&nbsp;</a></div><pre>Actually, this is concerning&#58;

&#34;GSS Major Status&#58; Unexpected Gatekeeper or Service Name&#34;

That might suggest that the CN is different for some reason that &#34;osg.pnl.gov&#34; of the certificate.....

I&#39;m still looking into this.

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12998#1353428713'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-20T16:25:13+00:00">Nov 20, 2012 04:25 PM UTC</time><a class="anchor" name="1353428713">&nbsp;</a></div><pre>Thank you for providing me more information.  It looks like the directory &#34;/se/belle/user/belle/tkuhr&#34; does not exist.  Could that be the source of your problems?

Thanks,
-Brock

[root@osg ~]# ls -al /se/belle/user/belle
total 16
drwxr-xr-x 4 belle belle 4096 Nov 19 22&#58;27 .
drwxr-xr-x 3 belle belle 4096 Oct 26 15&#58;29 ..
drwxr-xr-x 2 belle belle 4096 Nov 19 22&#58;30 fifieldt-cern
drwxr-xr-x 3 belle belle 4096 Oct 26 15&#58;30 hideki
[root@osg ~]# ls /se/belle/user/belle/tkuhr
ls&#58; /se/belle/user/belle/tkuhr&#58; No such file or directory

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12998#1353393144'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-20T06:32:24+00:00">Nov 20, 2012 06:32 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1353393144">&nbsp;</a></div><pre>Doing some more debugging with my CERN certificate, it looks like things are working as they should with the storage.

My guess now is that it might be something to do with the workernode configuration ?

Are you registered with the belle VO? Can you try logging in to the workernode, copy your certificate there and try a few commands like these?

[fifieldt@ccw18 ~]$ lcg-ls -l  <a href='srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle/user/' target='_blank' rel='nofollow'>srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle/user/</a>
d---------   1     2     2       0              UNKNOWN /se/belle/user/belle

[fifieldt@ccw18 ~]$ uberftp osg.pnl.gov
220 osg.pnl.gov GridFTP Server 6.5 (gcc64, 1323378368-83) [unknown] ready.
230 User belle logged in.
UberFTP&#62; ls
drwxrwxr-x   9     root    belle         4096 Oct 29 05&#58;17 .
drwxr-xr-x   7     root     root         4096 Oct  8 10&#58;19 ..
-rw-------   1    belle    belle           73 Oct 10 12&#58;27 .bash_history
drwx------   4    belle    belle         4096 Sep 27 11&#58;37 .globus
drwxr-xr-x   3    belle    belle         4096 Oct 10 12&#58;32 .subversion
drwxr-xr-x   3    belle    belle         4096 Oct  3 10&#58;32 brock
drwxr-xr-x   2    belle    belle         4096 Oct  2 00&#58;09 test
drwxr-xr-x   2    belle    belle         4096 Oct  2 00&#58;11 test2
drwxr-xr-x   3    belle    belle         4096 Oct 26 15&#58;29 user
UberFTP&#62; cd user
UberFTP&#62; ls
drwxr-xr-x   3    belle    belle         4096 Oct 26 15&#58;29 .
drwxrwxr-x   8     root    belle         4096 Oct 29 05&#58;17 ..
drwxr-xr-x   3    belle    belle         4096 Oct 26 15&#58;29 belle
UberFTP&#62; cd belle
UberFTP&#62; ls
drwxr-xr-x   3    belle    belle         4096 Oct 26 15&#58;29 .
drwxr-xr-x   3    belle    belle         4096 Oct 26 15&#58;29 ..
drwxr-xr-x   3    belle    belle         4096 Oct 26 15&#58;30 hideki
UberFTP&#62; mkdir fifieldt-cern
UberFTP&#62; ls
drwxr-xr-x   4    belle    belle         4096 Nov 19 22&#58;27 .
<div id='show_350029379' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_350029379'>drwxr-xr-x   3    belle    belle         4096 Oct 26 15&#58;29 ..
drwxr-xr-x   2    belle    belle         4096 Nov 19 22&#58;27 fifieldt-cern
drwxr-xr-x   3    belle    belle         4096 Oct 26 15&#58;30 hideki

[fifieldt@ccw18 ~]$ lcg-cp percentImage.png <a href='srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle/user/belle/fifieldt-cern/percentImage.png' target='_blank' rel='nofollow'>srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle/user/belle/fifieldt-cern/percentImage.png</a>
[fifieldt@ccw18 ~]$ lcg-ls   <a href='srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle/user/belle/fifieldt-cern/se/belle/user/belle/fifieldt-cern/percentImage.png' target='_blank' rel='nofollow'>srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle/user/belle/fifieldt-cern/se/belle/user/belle/fifieldt-cern/percentImage.png</a>

-- by Tom Fifield at Tue Nov 20 06&#58;32&#58;03 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509</a>
</div><script type='text/javascript'>
        $('#show_350029379').click(function() {
            $('#detail_350029379').slideDown("normal");
            $('#show_350029379').hide();
            $('#hide_350029379').show();
        });
        $('#hide_350029379').click(function() {
            $('#detail_350029379').slideUp();
            $('#hide_350029379').hide();
            $('#show_350029379').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12998#1353374347'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-20T01:19:07+00:00">Nov 20, 2012 01:19 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1353374347">&nbsp;</a></div><pre>Here&#39;s one with a SURL&#58;

<a href='srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle/user/belle/tkuhr/TestProject005' target='_blank' rel='nofollow'>srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle/user/belle/tkuhr/TestProject005</a>

SRM2Storage.createDirectory&#58; Failed to create directory on storage. <a href='srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle/user/belle/tkuhr/TestProject005&#58' target='_blank' rel='nofollow'>srm&#58;//osg.pnl.gov&#58;8443/srm/v2/server?SFN=/se/belle/user/belle/tkuhr/TestProject005&#58</a>; SRM2Storage.__gfal_exec&#58; Failed to perform gfal_ls.[SE][Ls][] httpg&#58;//osg.pnl.gov&#58;8443/srm/v2/server&#58; CGSI-gSOAP running on wn5.osg.pnl.gov reports Error initializing context
GSS Major Status&#58; Unexpected Gatekeeper or Service Name

The DN here will either be the one above, or /C=DE/O=GermanGrid/OU=KIT/CN=Thomas Kuhr

Note that we have a feeling there might be a problem with the belle VOMS server right now but, sites other than PNNL seem to still be working. If there&#39;s something interesting in the logs, it&#39;d be nice to see &#58;)

-- by Tom Fifield at Tue Nov 20 01&#58;18&#58;57 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509</a></pre></div><div class='update_description'><i onclick="document.location='12998#1353373807'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-20T01:10:07+00:00">Nov 20, 2012 01:10 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1353373807">&nbsp;</a></div><pre>Thanks Brock &#58;)

The DN would be /C=JP/O=KEK/OU=CRC/CN=Hideki Miyake

the SURL changes with every job, so I&#39;ll try sending some new ones to ensure they&#39;re in the logs - standby.

These errors are being produced by our DIRAC production system, which under the hood uses the python libraries for gfal and lcg_util. If you&#39;re interested in installing a DIRAC client, I can help (it&#39;s 5 commands on a linux machine), but otherwise I&#39;ll try and resolve the error so that it can be viewed using standard tools.

Thanks for your help!

-- by Tom Fifield at Tue Nov 20 01&#58;09&#58;04 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509</a></pre></div><div class='update_description'><i onclick="document.location='12998#1353354695'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-19T19:51:35+00:00">Nov 19, 2012 07:51 PM UTC</time><a class="anchor" name="1353354695">&nbsp;</a></div><pre>Hi,

I have attempted to reproduce this issue, and could not.  Could you provide a bit more detail&#58;

1.  The subject line of the user&#39;s grid certificate
2.  The path of the file that you were attempting to put (the destination)
3.  What client software you are using

Thanks!

Brock

by /DC=org/DC=doegrids/OU=People/CN=Brock Erwin 6249</pre></div><div class='update_description'><i onclick="document.location='12998#1353330553'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-19T13:09:13+00:00">Nov 19, 2012 01:09 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1353330553">&nbsp;</a></div><pre>Sending this to Brock, the PNNL_OSG Admin&#58;

Hi,

belle VO users are getting consistent errors when trying to put files to the SE at osg.pnl.gov (PNNL_OSG)

Looking at the troubleshooting information at <a href='https&#58;//twiki.cern.ch/twiki/bin/view/Main/VOMSCore' target='_blank' rel='nofollow'>https&#58;//twiki.cern.ch/twiki/bin/view/Main/VOMSCore</a> it seems like either the vomses file is wrong, or the VOMS CA in the /etc/grid-security/certificates is outdated or missing.

Can you take a look?

The errors we&#39;re getting look like this&#58;

GSS Minor Status Error Chain&#58;
globus_gsi_gssapi&#58; Authorization denied&#58; Th
putAndRegister&#58; Sending accounting took 0.9 seconds
putAndRegister&#58; Failed to put file to Storage Element. EvtGenOutputNov13-1.root&#58;  SRM2Storage.__gfal_exec&#58; Failed to perform gfal_ls.[SE][Ls][] httpg&#58;//osg.pnl.gov&#58;8443/srm/v2/server&#58; CGSI-gSOAP running on wn25.osg.pnl.gov reports Error initializing context
GSS Major Status&#58; Unexpected Gatekeeper or Service Name

GSS Minor Status Error Chain&#58;
globus_gsi_gssapi&#58; Authorization denied&#58; Th
{&#39;Message&#39;&#58; &#39;putAndRegister&#58; Failed to put file to Storage Element.  SRM2Storage.__gfal_exec&#58; Failed to perform gfal_ls.[SE][Ls][] httpg&#58;//osg.pnl.gov&#58;8443/srm/v2/server&#58; CGSI-gSOAP running on wn25.osg.pnl.gov reports Error initializing context&#92;nGSS Major Status&#58; Unexpected Gatekeeper or Service Name&#92;n&#92;nGSS Minor Status Error Chain&#58;&#92;nglobus_gsi_gssapi&#58; Authorization denied&#58; Th&#39;, &#39;OK&#39;&#58; False}
Affected ROC/NGI&#58; OSG(Prod)
Affected VO&#58; belle

Problem affects the whole VO&#58;

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509</a>

[Ticket History]
Subject&#58; belle certificate problems with  osg.pnl.gov SE
Ticket Type&#58; USER
CC&#58;
-- by Tom Fifield at Thu Nov 15 05&#58;17&#58;25 UTC 2012</pre></div><div class='update_description'><i onclick="document.location='12998#1352956673'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-15T05:17:53+00:00">Nov 15, 2012 05:17 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1352956673">&nbsp;</a></div><pre>Hi,

belle VO users are getting consistent errors when trying to put files to the SE at osg.pnl.gov (PNNL_OSG)

Looking at the troubleshooting information at <a href='https&#58;//twiki.cern.ch/twiki/bin/view/Main/VOMSCore' target='_blank' rel='nofollow'>https&#58;//twiki.cern.ch/twiki/bin/view/Main/VOMSCore</a> it seems like either the vomses file is wrong, or the VOMS CA in the /etc/grid-security/certificates is outdated or missing.

Can you take a look?

The errors we&#39;re getting look like this&#58;

GSS Minor Status Error Chain&#58;
globus_gsi_gssapi&#58; Authorization denied&#58; Th
putAndRegister&#58; Sending accounting took 0.9 seconds
putAndRegister&#58; Failed to put file to Storage Element. EvtGenOutputNov13-1.root&#58;  SRM2Storage.__gfal_exec&#58; Failed to perform gfal_ls.[SE][Ls][] httpg&#58;//osg.pnl.gov&#58;8443/srm/v2/server&#58; CGSI-gSOAP running on wn25.osg.pnl.gov reports Error initializing context
GSS Major Status&#58; Unexpected Gatekeeper or Service Name

GSS Minor Status Error Chain&#58;
globus_gsi_gssapi&#58; Authorization denied&#58; Th
{&#39;Message&#39;&#58; &#39;putAndRegister&#58; Failed to put file to Storage Element.  SRM2Storage.__gfal_exec&#58; Failed to perform gfal_ls.[SE][Ls][] httpg&#58;//osg.pnl.gov&#58;8443/srm/v2/server&#58; CGSI-gSOAP running on wn25.osg.pnl.gov reports Error initializing context&#92;nGSS Major Status&#58; Unexpected Gatekeeper or Service Name&#92;n&#92;nGSS Minor Status Error Chain&#58;&#92;nglobus_gsi_gssapi&#58; Authorization denied&#58; Th&#39;, &#39;OK&#39;&#58; False}
Affected ROC/NGI&#58; OSG(Prod)
Affected VO&#58; belle

Problem affects the whole VO&#58;

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88509</a>

[Ticket History]
Subject&#58; belle certificate problems with  osg.pnl.gov SE
Ticket Type&#58; USER
CC&#58;
-- by Tom Fifield at Thu Nov 15 05&#58;17&#58;25 UTC 2012</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F12998">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 12998});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
