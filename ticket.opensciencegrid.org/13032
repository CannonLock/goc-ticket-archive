<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[13032] CNAF -&#62; FNAL</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=13032" method="post">
<div class="page-header">
    <h3><span class="muted">13032</span> / CNAF -&#62; FNAL</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Saverio Virgilio</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Saverio Virgilio</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">High</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-12-13</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515">INC000000341515</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=88752">88752</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/13032", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/13032?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/13032?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20CNAF%20-%26%2362%3B%20FNAL%20ISSUE%3D13032%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='13032#1355906080'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-19T08:34:40+00:00">Dec 19, 2012 08:34 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1355906080">&nbsp;</a></div><pre>-- by Saverio Virgilio at Wed Dec 19 08&#58;34&#58;17 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752</a></pre></div><div class='update_description'><i onclick="document.location='13032#1355428855'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-13T20:00:55+00:00">Dec 13, 2012 08:00 PM UTC</time> by <b>echism</b><a class="anchor" name="1355428855">&nbsp;</a></div><pre>Closing as requested.</pre></div><div class='update_description'><i onclick="document.location='13032#1355350147'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-12T22:09:07+00:00">Dec 12, 2012 10:09 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1355350147">&nbsp;</a></div><pre>Hello,
Over the last two weeks we (Fermilab&#39;s and CNAF networking)  were extensively testing performance between FNAL and CNAF in both directions by using our  test servers. We have 1G and 10G servers at Fermilab and 1G servers at CNAF available for testing.   We did not detect any network issues that would need to be resolved in order to improve rates of production data movement.

Here are our results&#58;
-	we did not detect any packet loss  even using very intrusive tools trying to overflow buffers of network switches and routers. Packet loss, even minor could contribute significantly to low data rates  - not detected
-	In UDP tests, when TCP tuning  plays no any role,  we were able to achieve the sustained rates about 750 - 850Mbps out of 1Gbps host&#39;s connections with no or a very minimal packets drop.  Overall results of performance measurements may vary slightly during day when competing with other traffic
-	In TCP tests we were able to reproduce poor data rates seeing  about 5 – 10 Mbps out of 1G(not good), although achievable maximum rate was ~900Mbps, not always sustainable and mainly as peaks of rates.
-	We were able to improve rates significantly  by tuning end systems. The main contributing factors are enabling jumbo frames on hosts&#39;s side as well as tuning TCP buffers and several other settings. Please see a few attached graphs.

As no network issues found I will close this ticket.   However, together with our colleagues at CNAF we plan to continue some testing with 10G servers as soon as they become available at both sites.  We also plan to do more investigations on TCP tuning (as time permits),  for channels with very long RTT (Round Time Trip) such as between CNAF and Fermilab in order to come up with some accurate recommendations on turning of production end systems for better data rates.

- Andrey.
-- by bobyshev at Wed Dec 12 22&#58;08&#58;30 UTC 2012

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515</a></pre></div><div class='update_description'><i onclick="document.location='13032#1355226330'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-11T11:45:30+00:00">Dec 11, 2012 11:45 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1355226330">&nbsp;</a></div><pre>Just as a quick update&#58;

Over the last week we were testing performance using our test servers on both ends trying to reproduce an  issue and found a cause of low rates. We were getting different results in opposite  directions. It looks that results are very dependable on host settings.  I will update this ticket as  soon as we came to conclusion.

- Andrey.

-- by bobyshev at Tue Dec 11 11&#58;44&#58;58 UTC 2012

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515</a></pre></div><div class='update_description'><i onclick="document.location='13032#1355213390'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-11T08:09:50+00:00">Dec 11, 2012 08:09 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1355213390">&nbsp;</a></div><pre>Possibly related to discussion in&#58;

<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=89408' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=89408</a>

?

Thanks,

OLI

-- by Oliver Gutsche at Tue Dec 11 08&#58;09&#58;32 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752</a></pre></div><div class='update_description'><i onclick="document.location='13032#1354827243'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-06T20:54:03+00:00">Dec 6, 2012 08:54 PM UTC</time> by <b>echism</b><a class="anchor" name="1354827243">&nbsp;</a></div><pre>setting out for review</pre></div><div class='update_description'><i onclick="document.location='13032#1354714629'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-05T13:37:09+00:00">Dec 5, 2012 01:37 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354714629">&nbsp;</a></div><pre>Hi Donato,
Rates from our end are not so pretty. I still need to organize results to attach it to this log. A brief summary is that maximum rate, ~600-700Mbps, is probably OK but it varies between ~ 4Mbps and 700Mbps because of packets retransmissions. It could be due to many reasons&#58;
- host issues, small TCP buffer (or not big enough for our long RTT path) - I tried from several hosts on our end that I believe are turned good enough
- faulty links , although pings do not indicate any packet drops on physical layer
- switch/router buffers overflow - did not detect any drops on interfaces within our domain
- links congestion somewhere along the path but I assume we have almost 10G provisioned between end-to-end or host issues.

Could you please start another iperf instance in UDP mode? Please don&#39;t forget to specify upper bandwidth allowed in UDP mode, e.g. iperf -s -u -b1000 -p 6001.  If rates are more persistent in udp mode then most likely fluctuation is due to host turning  issues.  BTW, what is size of  TCP buffer for iperf server on netboard2 ?

Thanks,
Andrey.
-- by bobyshev at Wed Dec 05 13&#58;36&#58;19 UTC 2012

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515</a></pre></div><div class='update_description'><i onclick="document.location='13032#1354649345'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-04T19:29:05+00:00">Dec 4, 2012 07:29 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354649345">&nbsp;</a></div><pre>Hi Andrey,

Sorry, It&#39;s a 1G server.

Tomorrow morning (italian time) I could use a 10G server similar to the hosts we use for geographical file transfer (e.g. GridFTP)

Bye,

Donato

-- by Donato De Girolamo at Tue Dec 04 19&#58;28&#58;47 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752</a></pre></div><div class='update_description'><i onclick="document.location='13032#1354645999'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-04T18:33:19+00:00">Dec 4, 2012 06:33 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354645999">&nbsp;</a></div><pre>Thanks, Donato.  I&#39;ll start mine shortly. BTW,  is netboard2 a 10G or 1G server ?
- Andrey.
-- by bobyshev at Tue Dec 04 18&#58;26&#58;02 UTC 2012

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515</a></pre></div><div class='update_description'><i onclick="document.location='13032#1354644301'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-04T18:05:01+00:00">Dec 4, 2012 06:05 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354644301">&nbsp;</a></div><pre>Hi Andrey et al,

I finished my iperf tests from CNAF to FNAL with very good results&#58;

~ 950Mbps vs wancms-204   (mtu=9000)
~ 750Mbps vs nscms-207      (mtu=1500)

See the attachment...

Wath about your tests? Our server up and running (until it crashes...)

Bye,

Donato

Client connecting to wancms-204.fnal.gov, TCP port 5001
TCP window size&#58; 32.0 MByte (WARNING&#58; requested 16.0 MByte)
------------------------------------------------------------
[  3] local 131.154.195.203 port 48587 connected with 131.225.204.192 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 5.0 sec   153 MBytes   256 Mbits/sec
[  3]  5.0-10.0 sec   491 MBytes   824 Mbits/sec
[  3] 10.0-15.0 sec   582 MBytes   976 Mbits/sec
[  3] 15.0-20.0 sec   584 MBytes   980 Mbits/sec
[  3] 20.0-25.0 sec   581 MBytes   975 Mbits/sec
[  3] 25.0-30.0 sec   580 MBytes   974 Mbits/sec
[  3] 30.0-35.0 sec   580 MBytes   972 Mbits/sec
[  3] 35.0-40.0 sec   581 MBytes   974 Mbits/sec
[  3] 40.0-45.0 sec   582 MBytes   976 Mbits/sec
[  3] 45.0-50.0 sec   581 MBytes   974 Mbits/sec
[  3] 50.0-55.0 sec   592 MBytes   993 Mbits/sec
[  3] 55.0-60.0 sec   581 MBytes   975 Mbits/sec
[  3] 60.0-65.0 sec   579 MBytes   971 Mbits/sec
[  3] 65.0-70.0 sec   582 MBytes   977 Mbits/sec
[  3] 70.0-75.0 sec   579 MBytes   972 Mbits/sec
<div id='show_1927039034' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1927039034'>[  3] 75.0-80.0 sec   581 MBytes   975 Mbits/sec
[  3] 80.0-85.0 sec   582 MBytes   977 Mbits/sec
[  3] 85.0-90.0 sec   592 MBytes   993 Mbits/sec
.............
[  3] 290.0-295.0 sec   367 MBytes   616 Mbits/sec
[  3] 295.0-300.0 sec   580 MBytes   974 Mbits/sec
[  3]  0.0-300.0 sec  33.0 GBytes   945 Mbits/sec
[  3] MSS size 8960 bytes (MTU 9000 bytes, unknown interface)

Client connecting to nscms-207.fnal.gov, TCP port 5001
TCP window size&#58; 32.0 MByte (WARNING&#58; requested 16.0 MByte)
------------------------------------------------------------
[  3] local 131.154.195.203 port 57777 connected with 131.225.207.253 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 5.0 sec  37.9 MBytes  63.5 Mbits/sec
[  3]  5.0-10.0 sec  32.4 MBytes  54.3 Mbits/sec
[  3] 10.0-15.0 sec  65.4 MBytes   110 Mbits/sec
[  3] 15.0-20.0 sec  76.4 MBytes   128 Mbits/sec
[  3] 20.0-25.0 sec   120 MBytes   201 Mbits/sec
[  3] 25.0-30.0 sec   164 MBytes   275 Mbits/sec
[  3] 30.0-35.0 sec   230 MBytes   385 Mbits/sec
[  3] 35.0-40.0 sec   319 MBytes   535 Mbits/sec
[  3] 40.0-45.0 sec   420 MBytes   704 Mbits/sec
[  3] 45.0-50.0 sec   442 MBytes   742 Mbits/sec
[  3] 50.0-55.0 sec   441 MBytes   740 Mbits/sec
[  3] 55.0-60.0 sec   448 MBytes   751 Mbits/sec
[  3] 60.0-65.0 sec   442 MBytes   742 Mbits/sec
[  3] 65.0-70.0 sec   441 MBytes   740 Mbits/sec
[  3] 70.0-75.0 sec   440 MBytes   738 Mbits/sec
[  3] 75.0-80.0 sec   440 MBytes   739 Mbits/sec
[  3] 80.0-85.0 sec   444 MBytes   746 Mbits/sec
[  3] 85.0-90.0 sec   450 MBytes   755 Mbits/sec
..............
[  3] 295.0-300.0 sec   406 MBytes   681 Mbits/sec
[  3]  0.0-300.0 sec  22.9 GBytes   656 Mbits/sec
[  3] MSS size 1460 bytes (MTU 1500 bytes, ethernet)

-- by Donato De Girolamo at Tue Dec 04 18&#58;04&#58;25 UTC 2012

Added attachment CNAF_vs_FNAL.png
<a href='https&#58;//ggus.eu/pages/windownload.php?attid=ATT102207' target='_blank' rel='nofollow'>https&#58;//ggus.eu/pages/windownload.php?attid=ATT102207</a>

-- by Donato De Girolamo at Tue Dec 04 18&#58;04&#58;24 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752</a>
</div><script type='text/javascript'>
        $('#show_1927039034').click(function() {
            $('#detail_1927039034').slideDown("normal");
            $('#show_1927039034').hide();
            $('#hide_1927039034').show();
        });
        $('#hide_1927039034').click(function() {
            $('#detail_1927039034').slideUp();
            $('#hide_1927039034').hide();
            $('#show_1927039034').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='13032#1354629932'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-04T14:05:32+00:00">Dec 4, 2012 02:05 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354629932">&nbsp;</a></div><pre>Hi Andrey, thanks. I know, my request was to get as many details as possible, since we had similar problems with Caltech due to MTU misconfiguration...

I agree with you to avoid bidirectional tests at the same time for many reasons, so I&#39;m running some tests now and I think I&#39;ll end in 1 hour (since I&#39;m getting very good results)

Cheers

Donato

-- by Donato De Girolamo at Tue Dec 04 14&#58;04&#58;51 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752</a></pre></div><div class='update_description'><i onclick="document.location='13032#1354628446'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-04T13:40:46+00:00">Dec 4, 2012 01:40 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354628446">&nbsp;</a></div><pre>Hi Donato,
--  I asked sysadmins of these servers and they confirmed that they saw this limitation as well a few days ago. Please see my comments in the first reply.
-- I&#39;d like to avoid runing our tests from both ends simultaneously.  It is 7&#58;30am here. Feel free to run iperfs from your end to the servers that I started in daemon mode on two  machines. I think, I&#39;ll be able to start testing on my our end in about 2 - 3 hours only. I&#39;ll wait for your results  before resume it from our end.

Thanks,
Andrey.
-- by bobyshev at Tue Dec 04 13&#58;39&#58;48 UTC 2012

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515</a></pre></div><div class='update_description'><i onclick="document.location='13032#1354627286'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-04T13:21:26+00:00">Dec 4, 2012 01:21 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354627286">&nbsp;</a></div><pre>Hi Andrey, good news (apart server crash...)

Now the iperf server is up and running...

thanks for the ping -s 8000 , but the problem of &#34;big size packet loss&#34; was from our side to the servers cmsstor373 and cmsstor275 (because they are the servers that caused the opening of this ticket...), so I intended to execute the ping from those servers. Anyway, right now they seems to work fine (something is changed...?)

[root@netboard ~]# ping -c3 -w3 -s8000 cmsstor373.fnal.gov -M do
PING cmsstor373.fnal.gov (131.225.204.153) 8000(8028) bytes of data.
8008 bytes from cmsstor373.fnal.gov (131.225.204.153)&#58; icmp_seq=1 ttl=58 time=126 ms
8008 bytes from cmsstor373.fnal.gov (131.225.204.153)&#58; icmp_seq=2 ttl=58 time=126 ms
8008 bytes from cmsstor373.fnal.gov (131.225.204.153)&#58; icmp_seq=3 ttl=58 time=126 ms

--- cmsstor373.fnal.gov ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 1999ms
rtt min/avg/max/mdev = 126.226/126.319/126.392/0.069 ms

It is a very good idea to have two servers with different MTU.

Ok, let&#39;s iperf !

Donato

-- by Donato De Girolamo at Tue Dec 04 13&#58;20&#58;35 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752</a></pre></div><div class='update_description'><i onclick="document.location='13032#1354626874'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-04T13:14:34+00:00">Dec 4, 2012 01:14 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354626874">&nbsp;</a></div><pre>Hi Andrey, good news (apart server crash...)

Now the iperf server is up and running...

thanks for the ping -s 8000 , but the problem of &#34;big size packet loss&#34; was from our side to the servers cmsstor373 and cmsstor275 (because they are the servers that caused the opening of this ticket...), so I intended to execute the ping from those servers. Anyway, right now they seems to work fine (something is changed...?)

[root@netboard ~]# ping -c3 -w3 -s8000 cmsstor373.fnal.gov -M do
PING cmsstor373.fnal.gov (131.225.204.153) 8000(8028) bytes of data.
8008 bytes from cmsstor373.fnal.gov (131.225.204.153)&#58; icmp_seq=1 ttl=58 time=126 ms
8008 bytes from cmsstor373.fnal.gov (131.225.204.153)&#58; icmp_seq=2 ttl=58 time=126 ms
8008 bytes from cmsstor373.fnal.gov (131.225.204.153)&#58; icmp_seq=3 ttl=58 time=126 ms

--- cmsstor373.fnal.gov ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 1999ms
rtt min/avg/max/mdev = 126.226/126.319/126.392/0.069 ms

Ok, let&#39;s iperf !

Donato De Girolamo

-- by Donato De Girolamo at Tue Dec 04 13&#58;13&#58;37 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752</a></pre></div><div class='update_description'><i onclick="document.location='13032#1354596619'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-04T04:50:19+00:00">Dec 4, 2012 04:50 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354596619">&nbsp;</a></div><pre>Hello Donato,
--  It seems that because of a time difference my last message to restart iperf on netboard2 did not get on time. Could you please run it  on netboard2 machine for tomorrow again (Tuesday), for you it is already &#39;today&#34;?  I&#39;d like to run a few more tests from our end. Also,  I did not have a chance to capture traffic before server crashed  on netboard2.

-- I have started   iperf servers  on two our machines, 131.225.204.192  that is a 10G server with jumbo frames enabled and 131.225.207.253 that is a 1G server with default MTU 1500. On both machines it was started with tcp buffer 10MB. Please run tests from your end.  You may want to avoid using &#39;-r&#39; and &#39;-d&#39; options that seems are causing iperf server to quit.

Thank you,
Andrey.
-- by bobyshev at Tue Dec 04 04&#58;49&#58;31 UTC 2012

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515</a></pre></div><div class='update_description'><i onclick="document.location='13032#1354555719'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-03T17:28:39+00:00">Dec 3, 2012 05:28 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354555719">&nbsp;</a></div><pre>Donato,
I think, iperf server crashed on netboard2. Could you please restart it? My  first results are below but I would like to run more and make some graphs (need to find my old scripts...). If briefly, maximum achievable rates are not so bad but  I don&#39;t know yet what is causing fluctuation.
- Andrey.

--

1. Fnal-&#62; CNAF From non-jumbo frame machine&#58;

[wanman@tw11 ~]$ iperf -c netboard2.cr.cnaf.infn.it -p 5001 -w 10M -t 120 -i 5 -m
------------------------------------------------------------
Client connecting to netboard2.cr.cnaf.infn.it, TCP port 5001
TCP window size&#58; 20.0 MByte (WARNING&#58; requested 10.0 MByte)
------------------------------------------------------------
[  3] local 131.225.207.253 port 52740 connected with 131.154.195.203 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 5.0 sec  18.9 MBytes  31.8 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3]  5.0-10.0 sec  13.6 MBytes  22.8 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 10.0-15.0 sec  20.4 MBytes  34.2 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 15.0-20.0 sec  26.9 MBytes  45.1 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 20.0-25.0 sec  41.2 MBytes  69.2 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 25.0-30.0 sec  47.7 MBytes  80.0 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 30.0-35.0 sec  69.4 MBytes    116 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 35.0-40.0 sec  91.0 MBytes    153 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 40.0-45.0 sec    118 MBytes    198 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 45.0-50.0 sec    150 MBytes    251 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
<div id='show_572081876' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_572081876'>[  3] 50.0-55.0 sec    197 MBytes    330 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 55.0-60.0 sec    173 MBytes    290 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 60.0-65.0 sec  6.86 MBytes  11.5 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 65.0-70.0 sec    122 MBytes    204 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 70.0-75.0 sec    244 MBytes    409 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 75.0-80.0 sec    306 MBytes    513 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 80.0-85.0 sec    365 MBytes    612 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 85.0-90.0 sec    450 MBytes    755 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 90.0-95.0 sec    498 MBytes    835 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 95.0-100.0 sec    482 MBytes    808 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 100.0-105.0 sec    488 MBytes    818 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 105.0-110.0 sec    488 MBytes    818 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 110.0-115.0 sec    496 MBytes    833 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3] 115.0-120.0 sec    488 MBytes    818 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0-120.1 sec  5.27 GBytes    377 Mbits/sec
[  3] MSS size 1460 bytes (MTU 1500 bytes, ethernet)

2. From jumbo-framed machine FNAL-&#62;CNAF&#58;
[netadmin@fnmon4 ~]$ iperf -c netboard2.cr.cnaf.infn.it -w 10M -t 300 -i 5 -m
------------------------------------------------------------
Client connecting to netboard2.cr.cnaf.infn.it, TCP port 5001
TCP window size&#58; 20.0 MByte (WARNING&#58; requested 10.0 MByte)
------------------------------------------------------------
[  3] local 131.225.204.192 port 42031 connected with 131.154.195.203 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 5.0 sec  96.8 MBytes   162 Mbits/sec
[  3]  5.0-10.0 sec   218 MBytes   367 Mbits/sec
[  3] 10.0-15.0 sec   402 MBytes   674 Mbits/sec
[  3] 15.0-20.0 sec  42.1 MBytes  70.7 Mbits/sec
[  3] 20.0-25.0 sec   191 MBytes   320 Mbits/sec
[  3] 25.0-30.0 sec   311 MBytes   522 Mbits/sec
[  3] 30.0-35.0 sec   278 MBytes   467 Mbits/sec
[  3] 35.0-40.0 sec   184 MBytes   309 Mbits/sec
[  3] 40.0-45.0 sec   205 MBytes   344 Mbits/sec
[  3] 45.0-50.0 sec   244 MBytes   410 Mbits/sec
[  3] 50.0-55.0 sec   112 MBytes   188 Mbits/sec
[  3] 55.0-60.0 sec   112 MBytes   188 Mbits/sec
[  3] 60.0-65.0 sec   316 MBytes   530 Mbits/sec
[  3] 65.0-70.0 sec   148 MBytes   249 Mbits/sec
[  3] 70.0-75.0 sec   227 MBytes   381 Mbits/sec
[  3] 75.0-80.0 sec   204 MBytes   343 Mbits/sec
[  3] 80.0-85.0 sec   256 MBytes   429 Mbits/sec
[  3] 85.0-90.0 sec   163 MBytes   273 Mbits/sec
[  3] 90.0-95.0 sec  98.0 MBytes   164 Mbits/sec
[  3] 95.0-100.0 sec  6.75 MBytes  11.3 Mbits/sec
[  3] 100.0-105.0 sec  41.5 MBytes  69.6 Mbits/sec
[  3] 105.0-110.0 sec   131 MBytes   220 Mbits/sec
[  3] 110.0-115.0 sec   222 MBytes   372 Mbits/sec
[  3] 115.0-120.0 sec   117 MBytes   196 Mbits/sec
[  3] 120.0-125.0 sec   367 MBytes   616 Mbits/sec
[  3] 125.0-130.0 sec   439 MBytes   736 Mbits/sec
[  3] 130.0-135.0 sec   532 MBytes   892 Mbits/sec
[  3] 135.0-140.0 sec   168 MBytes   282 Mbits/sec
[  3] 140.0-145.0 sec  54.5 MBytes  91.4 Mbits/sec
[  3] 145.0-150.0 sec  8[  3] 145.0-150.0 sec  84.5 MBytes   142 Mbits/sec
[  3] 150.0-155.0 sec  71.0 MBytes   119 Mbits/sec
[  3] 155.0-160.0 sec   234 MBytes   393 Mbits/sec
[  3] 160.0-165.0 sec   355 MBytes   596 Mbits/sec
[  3] 165.0-170.0 sec   262 MBytes   440 Mbits/sec
[  3] 170.0-175.0 sec  35.5 MBytes  59.6 Mbits/sec
[  3] 175.0-180.0 sec   204 MBytes   343 Mbits/sec
[  3] 180.0-185.0 sec   255 MBytes   428 Mbits/sec
[  3] 185.0-190.0 sec   134 MBytes   225 Mbits/sec
[  3] 190.0-195.0 sec   170 MBytes   284 Mbits/sec
[  3] 195.0-200.0 sec   183 MBytes   307 Mbits/sec
[  3] 200.0-205.0 sec   227 MBytes   381 Mbits/sec
[  3] 205.0-210.0 sec   226 MBytes   380 Mbits/sec
[  3] 210.0-215.0 sec   126 MBytes   212 Mbits/sec
[  3] 215.0-220.0 sec   273 MBytes   457 Mbits/sec
[  3] 220.0-225.0 sec   454 MBytes   761 Mbits/sec
[  3] 225.0-230.0 sec   515 MBytes   864 Mbits/sec
[  3] 230.0-235.0 sec   175 MBytes   294 Mbits/sec
[  3] 235.0-240.0 sec   283 MBytes   474 Mbits/sec
[  3] 240.0-245.0 sec   256 MBytes   429 Mbits/sec
[  3] 245.0-250.0 sec  91.9 MBytes   154 Mbits/sec
[  3] 250.0-255.0 sec   141 MBytes   237 Mbits/sec
[  3] 255.0-260.0 sec   234 MBytes   392 Mbits/sec
[  3] 260.0-265.0 sec  62.4 MBytes   105 Mbits/sec
[  3] 265.0-270.0 sec   139 MBytes   233 Mbits/sec
[  3] 270.0-275.0 sec  27.4 MBytes  45.9 Mbits/sec
[  3] 275.0-280.0 sec  20.6 MBytes  34.6 Mbits/sec
[  3] 280.0-285.0 sec  55.9 MBytes  93.7 Mbits/sec
[  3] 285.0-290.0 sec  69.6 MBytes   117 Mbits/sec
[  3] 290.0-295.0 sec  61.6 MBytes   103 Mbits/sec
[  3] 295.0-300.0 sec  67.9 MBytes   114 Mbits/sec
[  3]  0.0-300.3 sec  11.1 GBytes   318 Mbits/sec
[  3] MSS size 8960 bytes (MTU 9000 bytes, unknown interface)

-- by bobyshev at Mon Dec 03 17&#58;06&#58;50 UTC 2012

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515</a>
</div><script type='text/javascript'>
        $('#show_572081876').click(function() {
            $('#detail_572081876').slideDown("normal");
            $('#show_572081876').hide();
            $('#hide_572081876').show();
        });
        $('#hide_572081876').click(function() {
            $('#detail_572081876').slideUp();
            $('#hide_572081876').hide();
            $('#show_572081876').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='13032#1354551892'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-03T16:24:52+00:00">Dec 3, 2012 04:24 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354551892">&nbsp;</a></div><pre>Hi Donato,

Thanks for setting an iperf server. I&#39;m going to run a number of tests during the day today.  I&#39;ll also leave iperf servers running on our end (I&#39;ll send you info on what machines to use later today), so you can do it from your end as well.

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;P.S.</font>
<font color='#7F7E6F'>&#62; I&#39;m still waiting for the tracepath and ping -s 8000 from a FNAL server to netboard2...</font>
<font color='#7F7E6F'>&#62;</font>

Sorry, I missed this question in the original message. Please see it below.

Thanks,
Andrey.
=======

[netadmin@fnmon4 ~]$ ping -s 8000 -c3 netboard2.cr.cnaf.infn.it -M do
PING netboard2.cr.cnaf.infn.it (131.154.195.203) 8000(8028) bytes of data.
8008 bytes from netboard2.cr.cnaf.infn.it (131.154.195.203)&#58; icmp_seq=1 ttl=57 time=133 ms
8008 bytes from netboard2.cr.cnaf.infn.it (131.154.195.203)&#58; icmp_seq=2 ttl=57 time=133 ms
8008 bytes from netboard2.cr.cnaf.infn.it (131.154.195.203)&#58; icmp_seq=3 ttl=57 time=133 ms

--- netboard2.cr.cnaf.infn.it ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2001ms
rtt min/avg/max/mdev = 133.475/133.516/133.549/0.423 ms
[netadmin@fnmon4 ~]$ ping -s 8000 -c3 netboard2.cr.cnaf.infn.it -M dont
PING netboard2.cr.cnaf.infn.it (131.154.195.203) 8000(8028) bytes of data.
8008 bytes from netboard2.cr.cnaf.infn.it (131.154.195.203)&#58; icmp_seq=1 ttl=57 time=133 ms
8008 bytes from netboard2.cr.cnaf.infn.it (131.154.195.203)&#58; icmp_seq=2 ttl=57 time=133 ms
8008 bytes from netboard2.cr.cnaf.infn.it (131.154.195.203)&#58; icmp_seq=3 ttl=57 time=133 ms

--- netboard2.cr.cnaf.infn.it ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2001ms
rtt min/avg/max/mdev = 133.435/133.481/133.540/0.424 ms
[netadmin@fnmon4 ~]$ ping -s 8000 -c3 netboard2.cr.cnaf.infn.it -M want
PING netboard2.cr.cnaf.infn.it (131.154.195.203) 8000(8028) bytes of data.
<div id='show_1400655046' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1400655046'>8008 bytes from netboard2.cr.cnaf.infn.it (131.154.195.203)&#58; icmp_seq=1 ttl=57 time=133 ms
8008 bytes from netboard2.cr.cnaf.infn.it (131.154.195.203)&#58; icmp_seq=2 ttl=57 time=133 ms
8008 bytes from netboard2.cr.cnaf.infn.it (131.154.195.203)&#58; icmp_seq=3 ttl=57 time=133 ms

--- netboard2.cr.cnaf.infn.it ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2001ms
rtt min/avg/max/mdev = 133.629/133.712/133.796/0.306 ms
[netadmin@fnmon4 ~]$

-- by bobyshev at Mon Dec 03 16&#58;03&#58;46 UTC 2012

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515</a>
</div><script type='text/javascript'>
        $('#show_1400655046').click(function() {
            $('#detail_1400655046').slideDown("normal");
            $('#show_1400655046').hide();
            $('#hide_1400655046').show();
        });
        $('#hide_1400655046').click(function() {
            $('#detail_1400655046').slideUp();
            $('#hide_1400655046').hide();
            $('#show_1400655046').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='13032#1354540990'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-03T13:23:10+00:00">Dec 3, 2012 01:23 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354540990">&nbsp;</a></div><pre>At INFN Tier-1 we are ready to run iperf tests from CNAF to FNAL and vice versa.

For basic tests we are using netboard2.cr.cnaf.infn.it / tcp port 5001, then we can use a gridftp server too.

Let&#39;s know when FNAL is ready to start with tests and which is the server and port where iperf is listening on.

Thanks,

Donato De Girolamo

P.S.

I&#39;m still waiting for the tracepath and ping -s 8000 from a FNAL server to netboard2...

-- by Donato De Girolamo at Mon Dec 03 13&#58;22&#58;42 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752</a></pre></div><div class='update_description'><i onclick="document.location='13032#1354311791'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-30T21:43:11+00:00">Nov 30, 2012 09:43 PM UTC</time> by <b>echism</b><a class="anchor" name="1354311791">&nbsp;</a></div><pre>setting out in anticipation of reply</pre></div><div class='update_description'><i onclick="document.location='13032#1354266080'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-30T09:01:20+00:00">Nov 30, 2012 09:01 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354266080">&nbsp;</a></div><pre>Changed CC to cms-cnaf@....; net@....

-- by Saverio Virgilio at Fri Nov 30 09&#58;00&#58;53 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752</a></pre></div><div class='update_description'><i onclick="document.location='13032#1354213932'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-29T18:32:12+00:00">Nov 29, 2012 06:32 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1354213932">&nbsp;</a></div><pre>From information attached to this ticket is not quite clear what is a problem. Is it not passing large ICMP packets between FNAL and CNAF?

On many router platforms there is a protection against large ICMP by default, for example, on Juniper <a href='http&#58;//www.juniper.net/techpubs/software/junos-es/junos-es93/junos-es-swconfig-security/understanding-large-icmp-packet-protection.html' target='_blank' rel='nofollow'>http&#58;//www.juniper.net/techpubs/software/junos-es/junos-es93/junos-es-swconfig-security/understanding-large-icmp-packet-protection.html</a> .  It does not limit using jumbo frames, however.  In general, as ICMP is a control and management protocol there are no legitimate reasons for payload in ICMP packets to be large.

At the USCMS-Tier1 we do allow jumbo frames as well as impose no limitation in size on ICMP packets.

In the response to request assigned to Network Services&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;Can you perform the following checks</font>
<font color='#7F7E6F'>&#62;1) ip-mtu on your router for the network 131.225.204.0/22</font>

We do have jumbo frames enabled on all interswitch links as well as ICMP unreachable feature enabled on all L3 interfaces

<font color='#7F7E6F'>&#62;2) ifconfig on cmsstor373 e cmsstor275.</font>

This info should come from sysadmins of these servers.  On networking side we do not require  all hosts to be configured with jumbo frames. This is up to sysadmins.  We do provide  network environment that allows jumbo frames and  PMTUD protocol to work correctly, even between systems with different MTUs.

<font color='#7F7E6F'>&#62;Perform the following commands on cmsstor373 (131.225.204.153) and cmsstor275 (131.225.205.88)</font>
<font color='#7F7E6F'>&#62;- tracepath 131.154.195.203</font>
<font color='#7F7E6F'>&#62;- ping -w3 -c3 -s 1504 131.154.195.203 -M dont</font>

As Network Services group is not managing USCMS-T1 servers we  cannot actually collect any information from cmsstor373 – cmsstor275.  However, we do have our test servers that connected to  the USCMS-T1 network on the same way as cmsstor machines.  Please see the requested information  from one of these test servers.

tracepath 131.154.195.203
1&#58;  wancms-204.fnal.gov (131.225.204.192)                  0.080ms pmtu 9000
1&#58;  r-cms-hub-fcc-vlan207.fnal.gov (131.225.207.207)       0.513ms
2&#58;  r-s-starlight-fnal-vlan318.fnal.gov (198.151.133.130)   1.100ms
3&#58;  l513-e-rbrml-2-ve1.cern.ch (192.16.166.25)           122.770ms
4&#58;  lhcopn-cnaf.cern.ch (192.16.166.18)                  asymm  9 174.743ms
5&#58;  ru-lhcopn-rx1-bo1.bo1.garr.net (193.206.128.29)      asymm  9 126.161ms
6&#58;  rx1-bo1-ru-lhcopn.bo1.garr.net (193.206.128.30)      asymm 11 124.648ms
7&#58;  netboard2.cr.cnaf.infn.it (131.154.195.203)          asymm  8 133.229ms reached
Resume&#58; pmtu 9000 hops 7 back 8

2).  [netadmin@fnmon4 ~]$ ping -w3 -c3 -s 1504 131.154.195.203 -M dont
<div id='show_1965179364' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1965179364'>PING 131.154.195.203 (131.154.195.203) 1504(1532) bytes of data.
1512 bytes from 131.154.195.203&#58; icmp_seq=1 ttl=57 time=132 ms
1512 bytes from 131.154.195.203&#58; icmp_seq=2 ttl=57 time=132 ms
1512 bytes from 131.154.195.203&#58; icmp_seq=3 ttl=57 time=134 ms

--- 131.154.195.203 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2000ms
rtt min/avg/max/mdev = 132.773/133.297/134.247/0.735 ms

I think it would be useful to run a few iperf tests manually between our test server and  netboard2.cr.cnaf.infn.it ?  We also could collect tcpdump information for these tests to analyze  it should we notice any issues.

Thanks,
Andrey.

-- by bobyshev at Thu Nov 29 18&#58;31&#58;28 UTC 2012

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515</a>
</div><script type='text/javascript'>
        $('#show_1965179364').click(function() {
            $('#detail_1965179364').slideDown("normal");
            $('#show_1965179364').hide();
            $('#hide_1965179364').show();
        });
        $('#hide_1965179364').click(function() {
            $('#detail_1965179364').slideUp();
            $('#hide_1965179364').hide();
            $('#show_1965179364').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='13032#1353980105'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-27T01:35:05+00:00">Nov 27, 2012 01:35 AM UTC</time> by <b>echism</b><a class="anchor" name="1353980105">&nbsp;</a></div><pre>setting out for review</pre></div><div class='update_description'><i onclick="document.location='13032#1353968991'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-26T22:29:51+00:00">Nov 26, 2012 10:29 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1353968991">&nbsp;</a></div><pre>Re-assigning this to the Networking group
-- by tiradani at Mon Nov 26 22&#58;29&#58;32 UTC 2012

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000341515</a></pre></div><div class='update_description'><i onclick="document.location='13032#1353961271'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-26T20:21:11+00:00">Nov 26, 2012 08:21 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1353961271">&nbsp;</a></div><pre>any news from FNAL/OSG?

tommaso

-- by Tommaso Boccali at Mon Nov 26 20&#58;20&#58;07 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752</a></pre></div><div class='update_description'><i onclick="document.location='13032#1353663007'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-23T09:30:07+00:00">Nov 23, 2012 09:30 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1353663007">&nbsp;</a></div><pre>Ciao, to be more precise this affects most of the T1-&#62;T1 CMS traffic CNAF-&#62;FNAL. Please let us know if the info is sufficient on FNAL side.

-- by Tommaso Boccali at Fri Nov 23 09&#58;29&#58;30 UTC 2012

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752</a></pre></div><div class='update_description'><i onclick="document.location='13032#1353578696'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-22T10:04:56+00:00">Nov 22, 2012 10:04 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1353578696">&nbsp;</a></div><pre>Hi,
these are the results of our test
[root@netboard2 ~]# tracepath 131.225.204.153
1&#58;  netboard2.cr.cnaf.infn.it (131.154.195.203)            0.063ms pmtu 9000
1&#58;  gw-192.cnaf.infn.it (131.154.192.1)                    0.706ms
2&#58;  ru-lhcopn-rx1-bo1.bo1.garr.net (193.206.128.29)        0.832ms
3&#58;  lhcopn-cnaf2-garr1.cern.ch (192.16.166.154)            5.737ms
4&#58;  l513-e-rbrml-2-be2.cern.ch (192.16.166.17)            11.926ms
5&#58;  l513-e-rbrml-2-tl0.cern.ch (192.16.166.146)          asymm  4   9.910ms
6&#58;  lhcopn-fnal.cern.ch (192.16.166.26)                  asymm  5 133.666ms
7&#58;  no reply
8&#58;  cmsstor373.fnal.gov (131.225.204.153)                asymm  7 125.479ms reached
Resume&#58; pmtu 9000 hops 8 back 7

[root@netboard2 ~]# ping -w3 -c3 -s 1504 131.225.204.153 -M dont
PING 131.225.204.153 (131.225.204.153) 1504(1532) bytes of data.
1512 bytes from 131.225.204.153&#58; icmp_seq=1 ttl=58 time=132 ms
1512 bytes from 131.225.204.153&#58; icmp_seq=2 ttl=58 time=130 ms
1512 bytes from 131.225.204.153&#58; icmp_seq=3 ttl=58 time=130 ms

--- 131.225.204.153 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 1998ms
rtt min/avg/max/mdev = 130.462/131.085/132.070/0.763 ms
[root@netboard2 ~]# ping -w3 -c3 -s 1505 131.225.204.153 -M dont
PING 131.225.204.153 (131.225.204.153) 1505(1533) bytes of data.

--- 131.225.204.153 ping statistics ---
4 packets transmitted, 0 received, 100% packet loss, time 2999ms

As you can see packets greater  than 1504 are blocked.

Can you perform the following checks
1) ip-mtu on your router for the network 131.225.204.0/22
2) ifconfig on cmsstor373 e cmsstor275.

<div id='show_1574923552' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1574923552'>Perform the following commands on  cmsstor373 (131.225.204.153) and  cmsstor275 (131.225.205.88)
- tracepath 131.154.195.203
- ping -w3 -c3 -s 1504  131.154.195.203 -M dont

Thanks, Saverio
Affected site&#58; INFN-T1
Affected VO&#58; cms

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=88752</a>

[Ticket History]
Subject&#58; CNAF -&#62; FNAL
Ticket Type&#58; USER
CC&#58; cms-cnaf@....
-- by Saverio Virgilio at Thu Nov 22 10&#58;03&#58;51 UTC 2012
</div><script type='text/javascript'>
        $('#show_1574923552').click(function() {
            $('#detail_1574923552').slideDown("normal");
            $('#show_1574923552').hide();
            $('#hide_1574923552').show();
        });
        $('#hide_1574923552').click(function() {
            $('#detail_1574923552').slideUp();
            $('#hide_1574923552').hide();
            $('#show_1574923552').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F13032">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 13032});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
