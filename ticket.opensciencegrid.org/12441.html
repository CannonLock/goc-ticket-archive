<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[12441] Ticket exchange corner case error</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=12441" method="post">
<div class="page-header">
    <h3><span class="muted">12441</span> / Ticket exchange corner case error</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Anthony Tiradani</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Anthony Tiradani</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">research & implement solution</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-12-11</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
        <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/12441", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/12441?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/12441?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Ticket%20exchange%20corner%20case%20error%20ISSUE%3D12441%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='12441#1355781108'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-12-17T21:51:48+00:00">Dec 17, 2012 09:51 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1355781108">&nbsp;</a></div><pre>The update has been released. I haven&#39;t seen the veto-ing event yet, but I am closing this ticket for now, since the feature has been implemented.</pre></div><div class='update_description'><i onclick="document.location='12441#1352928965'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-14T21:36:05+00:00">Nov 14, 2012 09:36 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1352928965">&nbsp;</a></div><pre>Everything worked as expected.

This finally implements the original request made by Tony to veto GOC-TX exchange if the ticket is no longer assigned (caller ID not set to cd-srv-goc-ops/-test) to GOC.

The update will be released on our next release which is scheduled on 12/11. Extending NAD.</pre></div><div class='update_description'><i onclick="document.location='12441#1352926387'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-14T20:53:07+00:00">Nov 14, 2012 08:53 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1352926387">&nbsp;</a></div><pre>Sorry, I had a typo in the code and authentication object wasn&#39;t set on the call to sys_user.do?SOAP.. I have fixed it, and now I can get the user ID.

I am now testing to see if caller ID based exchange veto-ing works on ITB instance.</pre></div><div class='update_description'><i onclick="document.location='12441#1352925554'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-14T20:39:14+00:00">Nov 14, 2012 08:39 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1352925554">&nbsp;</a></div><pre>Soichi,

I have been unable to determine why you would get an authentication error, the user account has authority to read this table.  Do you have to reauthentication for each stub (I&#39;m fishing for a root cause)?

Mike

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='12441#1352900821'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-14T13:47:01+00:00">Nov 14, 2012 01:47 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1352900821">&nbsp;</a></div><pre>Mike,

Thank you for the sample code.

I&#39;ve added SOAP stub for WSDL /sys_user.do?WSDL, and tried something like following.

ServiceNow_sys_userStub uStub = new ServiceNow_sys_userStub(endpoint + &#34;/sys_user.do?SOAP&#34;);
ServiceNow_sys_userStub.Get getuserkey = new ServiceNow_sys_userStub.Get();
getuserkey.setSys_id(resp.getCaller_id());
ServiceNow_sys_userStub.GetResponse respUserKeys = uStub.get(getuserkey);
ticket.setCallerID(resp.getCaller_id(), respUserKeys.getUser_name());

* I used .Get instead of .GetKeys method.

When I call uStub.get(getuserkey), I receive following exception.

<font color='#7F7E6F'>&#62; 2012-11-14 08&#58;46&#58;03,899 ERROR main@103993 edu.iu.grid.tx.accessor.ServiceNowAccessor - org.apache.axis2.AxisFault&#58; Transport error&#58; 401 Error&#58; Unauthorized</font>

Is the interface authorized for the user accounts that I am using?</pre></div><div class='update_description'><i onclick="document.location='12441#1352747353'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-12T19:09:13+00:00">Nov 12, 2012 07:09 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1352747353">&nbsp;</a></div><pre>Soichi,

I would try the below code, I just modified the incident code you provided&#58;

ServiceNow_userStub uStub = new ServiceNow_userStub(endpoint + &#34;/sys_user.do?SOAP&#34;);

//convert user sysid to user user_name
ServiceNow_userStub.GetKeys getUserKey = new ServiceNow_userStub.GetKeys();
getUserKey.setSys_id(ticket.getCallerID);
GetKeysResponse respUserKeys = uStub.getKeys(getUserKey);
String user_name = respUserKeys.getUser_name()[0];
ticket.setCallerID(user_name);

Mike</pre></div><div class='update_description'><i onclick="document.location='12441#1352745933'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-12T18:45:33+00:00">Nov 12, 2012 06:45 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1352745933">&nbsp;</a></div><pre>Do you have a sample code to query &#34;sys_user&#34; table?</pre></div><div class='update_description'><i onclick="document.location='12441#1352744649'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-12T18:24:09+00:00">Nov 12, 2012 06:24 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1352744649">&nbsp;</a></div><pre>Soichi,

You would need to get the caller information from the &#34;sys_user&#34; table.  You could get the user record by passing in the sys_id and capturing the &#34;user_name&#34;.  Is this something you would be able to do?

Mike

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='12441#1352742872'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-12T17:54:32+00:00">Nov 12, 2012 05:54 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1352742872">&nbsp;</a></div><pre>Following are part of the code to retrieve ticket metadata. The call &#34;resp.getCaller_id()&#34; returns caller ID in sys_id.

*****************************************************************************************

ServiceNow_incidentStub stub = new ServiceNow_incidentStub(endpoint + &#34;/incident.do?SOAP&#34;);

//convert ticket id to sys_id
ServiceNow_incidentStub.GetKeys getkey = new ServiceNow_incidentStub.GetKeys();
getkey.setNumber(ticket_id);
GetKeysResponse respkeys = stub.getKeys(getkey);
String id = respkeys.getSys_id()[0];
ticket.setSysID(id);

//get ticket information
ServiceNow_incidentStub.Get get = new ServiceNow_incidentStub.Get();
get.setSys_id(id);

//pull fields
GetResponse resp = stub.get(get);
ticket.setShortDescription(resp.getShort_description());
ticket.setDescription(resp.getDescription());
ticket.setUpdatetime(resp.getSys_updated_on());
ticket.setCreatedBy(resp.getSys_created_by());
ticket.setCreatedOn(resp.getSys_created_on());
ticket.setOriginNote(ticket_url+resp.getNumber());
ticket.setCategory(resp.getCategory());
ticket.setSubcategory(resp.getSubcategory());
ticket.setCategorization(resp.getU_categorization());
ticket.setCustomerCategorization(resp.getU_customer_categorization());
ticket.setItem(resp.getU_item());
ticket.setOperationalCategory(resp.getU_operational_category());
ticket.setReportedSource(resp.getU_reported_source());
ticket.setService(resp.getU_service());
ticket.setImpact(resp.getImpact());
ticket.setUrgency(resp.getUrgency());
<div id='show_2093557694' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2093557694'>ticket.setIncidentState(resp.getIncident_state());
ticket.setCreatedOn(resp.getSys_created_on());
ticket.setCreatedBy(resp.getSys_created_by());
ticket.setCallerID(resp.getCaller_id());
ticket.setAssignmentGroup(resp.getAssignment_group());
ticket.setExternalTicketNumber(resp.getU_external_ticket_number());
</div><script type='text/javascript'>
        $('#show_2093557694').click(function() {
            $('#detail_2093557694').slideDown("normal");
            $('#show_2093557694').hide();
            $('#hide_2093557694').show();
        });
        $('#hide_2093557694').click(function() {
            $('#detail_2093557694').slideUp();
            $('#hide_2093557694').hide();
            $('#show_2093557694').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12441#1352742129'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-12T17:42:09+00:00">Nov 12, 2012 05:42 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1352742129">&nbsp;</a></div><pre>Soichi,

Can you provide me with the snip-it of could where you are retrieving the caller ID.  I will see if I can assist in modifying it to get the user ID.

Mike

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='12441#1352741794'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-12T17:36:34+00:00">Nov 12, 2012 05:36 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1352741794">&nbsp;</a></div><pre>I just found that, when I make API call to SNOW to retrieve caller ID, SNOW returns it in sys_id instead of the actual ID. Mike, is this intentional? Or can it easily be changed to return the actual called ID (instead of sys_id of call ID)?

If it needs to be sys_id, what is the best way to convert it to the actual caller ID?</pre></div><div class='update_description'><i onclick="document.location='12441#1351781302'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-01T14:48:22+00:00">Nov 1, 2012 02:48 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1351781302">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62;  but you are receiving updates from SNOW through email.</font>
No. When GOC-TX receives trigger, it accesses SNOW via soap to obtain ticket information, and update GOC ticket if there is any update needs to be made.

Let&#39;s stick to caller field then. I will make an update to GOC-TX such that, if SNOW ticket doesn&#39;t have caller field set to cd-srv-goc-ops, it will not make make any update to the SNOW ticket.

Tony, would that work?</pre></div><div class='update_description'><i onclick="document.location='12441#1351780208'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-01T14:30:08+00:00">Nov 1, 2012 02:30 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1351780208">&nbsp;</a></div><pre>The External Support Center fields are for informational use only, they do not generate any triggers.

I believe that you are pushing updates to SNOW through a web service, but you are receiving updates from SNOW through email.  The other option may be to enter the &#34;cd-srv-goc-ops&#34; user or the associated email address in the watch list of an incident, this would generate the email you are looking for.

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='12441#1351779734'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-01T14:22:14+00:00">Nov 1, 2012 02:22 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1351779734">&nbsp;</a></div><pre>Sorry, I hit update button too fast.

Now that we know SNOW &#62; GOC exchange is possible (at least by using Caller field). Let&#39;s discuss if using caller field is the best approach.

Earlier, I have suggested following
<font color='#7F7E6F'>&#62; I find it confusing that I have to select &#34;caller&#34; field to exchange ticket to GOC. As Steve mentioned, &#34;External Support Center&#34; sounds like a better field to select. Can you add &#34;GOC&#34; support center, and assign cd-srv-goc-ops(-test) user to it (if that&#39;s how it is supposed to work)?</font>

Is there other fields that should be used? Or... should we allow user to use various fields?</pre></div><div class='update_description'><i onclick="document.location='12441#1351779497'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-01T14:18:17+00:00">Nov 1, 2012 02:18 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1351779497">&nbsp;</a></div><pre>I now see updates coming from fermitrn (INC000000319522)
<font color='#7F7E6F'>&#62; <a href='https&#58;//ticket-itb.grid.iu.edu/goc/2384' target='_blank' rel='nofollow'>https&#58;//ticket-itb.grid.iu.edu/goc/2384</a></font>

I will schedule production update of GOC-TX for 11/13 release.</pre></div><div class='update_description'><i onclick="document.location='12441#1351777869'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-11-01T13:51:09+00:00">Nov 1, 2012 01:51 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1351777869">&nbsp;</a></div><pre>Soichi,

I was able to get an email sent from fermitrn.  Can you confirm you see the update.

Regards,
Mike

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='12441#1351709330'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-31T18:48:50+00:00">Oct 31, 2012 06:48 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1351709330">&nbsp;</a></div><pre>oh, I forgot that fermitrn doesn&#39;t send notification email (but I thought it was sending notification when you updated it..??)

Anyway, yes, we need notification sent from fermitrn to GOC-TX ITB in order for it to exchange ticket. Is there anyway you can selectively allow email delivery? You can just send it to a local mail server, then have the mail server configure to ignore all email except @tx-itb.grid.iu.edu</pre></div><div class='update_description'><i onclick="document.location='12441#1351706412'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-31T18:00:12+00:00">Oct 31, 2012 06:00 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1351706412">&nbsp;</a></div><pre>Soichi,

I apologize, I forgot the emails are trapped and therefore are not sent from out test system.  As a practice we do not open this up as it could send false messages to users.  Is this a critical test?

Mike

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='12441#1351700017'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-31T16:13:37+00:00">Oct 31, 2012 04:13 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1351700017">&nbsp;</a></div><pre>I am not seeing trigger email received on tx-itb.grid.iu.edu(no log in /var/log/maillog), although the snow ticket says &#34;Sent&#58; tx+fermitest_fp114@....&#34;. Can you check the mail log at fermitrn?</pre></div><div class='update_description'><i onclick="document.location='12441#1351699213'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-31T16:00:13+00:00">Oct 31, 2012 04:00 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1351699213">&nbsp;</a></div><pre>Soichi,

I have updated INC000000319522.

Mike
________________________________
Notification of Ticket Change

<a href='https&#58;//ticket.grid.iu.edu/goc/12441' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/12441</a>

Description&#58;
I have received and I was able to update the ticket from GOC end. It looks good.

Can you try updating INC000000319522?

Soichi Hayashi</pre></div><div class='update_description'><i onclick="document.location='12441#1351698968'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-31T15:56:08+00:00">Oct 31, 2012 03:56 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1351698968">&nbsp;</a></div><pre>I have received and I was able to update the ticket from GOC end. It looks good.

Can you try updating INC000000319522?</pre></div><div class='update_description'><i onclick="document.location='12441#1351695429'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-31T14:57:09+00:00">Oct 31, 2012 02:57 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1351695429">&nbsp;</a></div><pre>Soichhi,

INC000000319522 has been generated in fermitrn.

Mike

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='12441#1351693182'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-31T14:19:42+00:00">Oct 31, 2012 02:19 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1351693182">&nbsp;</a></div><pre>Mike,

I have update the ITB instance of GOC-TX to use the latest WSDL from fermitrn.

Can you open a test ticket on fermitrn and assign it to GOC (by setting the caller field to &#34;cd-srv-goc-ops-test&#34; as Steve did)?</pre></div><div class='update_description'><i onclick="document.location='12441#1351537030'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T18:57:10+00:00">Oct 29, 2012 06:57 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1351537030">&nbsp;</a></div><pre>The changes have been made in fermitrn.

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='12441#1351536228'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T18:43:48+00:00">Oct 29, 2012 06:43 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1351536228">&nbsp;</a></div><pre>Mike,

Can you release the update on fermitrn? I&#39;d like to test this before releasing the update. Actually, since this is not a production issue, I&#39;d like to make the update on our current trunk and release the update on 11/13.</pre></div><div class='update_description'><i onclick="document.location='12441#1351535592'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T18:33:12+00:00">Oct 29, 2012 06:33 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1351535592">&nbsp;</a></div><pre>I have updated the WSDL to reflect that these are not required.  I believe you will need to update your static WSDL file.

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='12441#1351534570'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T18:16:10+00:00">Oct 29, 2012 06:16 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1351534570">&nbsp;</a></div><pre>GOC-TX doesn&#39;t require anything. I&#39;ve added the code in GOC-TX to set those fields during ticket creation because without them set, SNOW SOAP will not allow GOC-TX to create a ticket. What we found today is that, not only SNOW SOAP will not create a ticket, but it will not update a ticket if they are set to null - even though the current ticket itself has null values on them. If they are not required in SNOW, then SNOW SOAP WSDL should be updated so that it allows user to create / update ticket without those fields set (or set to null).</pre></div><div class='update_description'><i onclick="document.location='12441#1351532712'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T17:45:12+00:00">Oct 29, 2012 05:45 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1351532712">&nbsp;</a></div><pre>Soichi,

The confusing part is that most of the fields that I filled out are not required in SNOW.  Are there mandatory fields that GOC-TX requires when &#34;mapping&#34; the original email to a SNOW ticket?

Mike

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='12441#1351531473'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T17:24:33+00:00">Oct 29, 2012 05:24 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1351531473">&nbsp;</a></div><pre>I just pinged 12912, and the latest update made it to exchanged ticket (INC000000329949).

So, is this a SNOW SOAP issue? Or is there something that I need to adjust on GOC-TX?</pre></div><div class='update_description'><i onclick="document.location='12441#1351530189'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T17:03:09+00:00">Oct 29, 2012 05:03 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1351530189">&nbsp;</a></div><pre>All of the fields on the incident have been updated, can you retest the update process again.

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='12441#1351528789'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T16:39:49+00:00">Oct 29, 2012 04:39 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1351528789">&nbsp;</a></div><pre>Now I am seeing
<font color='#7F7E6F'>&#62; org.apache.axis2.AxisFault&#58; subcategory cannot be null!!</font>

GOC-TX sets following fields during ticket creation

//required fields - with defaults
insert.setCategory(&#34;General&#34;);
insert.setSubcategory(&#34;GOC Ticket&#34;);
insert.setU_categorization(&#34;Other&#34;);
insert.setU_customer_categorization(&#34;GOC&#34;);
insert.setU_item(&#34;Other&#34;);
insert.setU_operational_category(&#34;Information&#34;);
insert.setU_reported_source(&#34;Direct Input&#34;);
insert.setU_service(&#34;Other&#34;);
insert.setImpact(new BigInteger(&#34;3&#34;));

During a ticket update, GOC-TX uses whatever the current value set for the SNOW ticket. I believe both create and update SNOW soap API requires these fields to be non-null. Can you try setting all of these fields with non-null value for INC000000329949?</pre></div><div class='update_description'><i onclick="document.location='12441#1351528389'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T16:33:09+00:00">Oct 29, 2012 04:33 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1351528389">&nbsp;</a></div><pre>The &#34;Category&#34; field is not used within SNOW, but must be set through the web service upon ticket creation.  I have updated INC000000329949&#39;s Category to &#34;General&#34;, the same as when created from GOC.  Can you verify that an update in GOC now interfaces to SNOW successfully.</pre></div><div class='update_description'><i onclick="document.location='12441#1351527952'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T16:25:52+00:00">Oct 29, 2012 04:25 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1351527952">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; What do you mean by &#34;GOC-TX&#34; will create a new ticket?  Is this an email address?</font>
GOC-TX is an application that is running at GOC which receives trigger emails from various ticketing system and synchronizes (and create) tickets involved. Each ticketing system uses a specific trigger email address and email subject specifying which ticket (or incident) needs to be updated.

<font color='#7F7E6F'>&#62; the ticket number and the comments didn&#39;t make it back to INC329949 in ServiceNow.</font>
I am seeing an error during GOC &#62; Snow ticket update -- org.apache.axis2.AxisFault&#58; category cannot be null!!  Snow seems to be returning &#34;null&#34; for category field even though the field seems to be set to some value. I am guessing mapping between various Snow soap function and the actual field used are now different.

I need to troubleshoot this further.</pre></div><div class='update_description'><i onclick="document.location='12441#1351526229'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T15:57:09+00:00">Oct 29, 2012 03:57 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1351526229">&nbsp;</a></div><pre>I believe updates to the GOC tickets come into SNOW through the SOAP web service.  Does something need to be setup on the GOC ticket to tell it to send the update to SNOW?

Mike
________________________________
Notification of Ticket Change

<a href='https&#58;//ticket.grid.iu.edu/goc/12441' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/12441</a>

Description&#58;
Before we worry too much about &#34;selecting the caller&#34;, etc.,
let&#39;s be sure that we have a way that works at all. Right now
this seems to be, at best, a partial solution.

Steve

On Mon, 29 Oct 2012, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>

Steven Timm timm@....&#60;mailto&#58;timm@....&#62;</pre></div><div class='update_description'><i onclick="document.location='12441#1351525509'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T15:45:09+00:00">Oct 29, 2012 03:45 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1351525509">&nbsp;</a></div><pre>Before we worry too much about &#34;selecting the caller&#34;, etc.,
let&#39;s be sure that we have a way that works at all.  Right now
this seems to be, at best, a partial solution.

Steve

On Mon, 29 Oct 2012, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12441#1351525331'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T15:42:11+00:00">Oct 29, 2012 03:42 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1351525331">&nbsp;</a></div><pre>So setting the caller in ServiceNow to cd-srv-goc-ops successfully made a
ticket at the GOC (GOC 12912) but the ticket number and the
comments didn&#39;t make it back to INC329949 in ServiceNow.
At least not yet.

Steve Timm

On Mon, 29 Oct 2012, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12441#1351525329'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T15:42:09+00:00">Oct 29, 2012 03:42 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1351525329">&nbsp;</a></div><pre>This is not how it is setup to work.  What do you mean by &#34;GOC-TX&#34; will create a new ticket?  Is this an email address?

Mike

________________________________
Notification of Ticket Change

<a href='https&#58;//ticket.grid.iu.edu/goc/12441' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/12441</a>

Description&#58;
<font color='#7F7E6F'>&#62; I am not sure if this will create a new ticket at the GOC.</font>
GOC-TX will create a GOC ticket if there is no corresponding GOC ticket.

<font color='#7F7E6F'>&#62; I believe if you select the caller as ..</font>
I find it confusing that I have to select &#34;caller&#34; field to exchange ticket to GOC. As Steve mentioned, &#34;External Support Center&#34; sounds like a better field to select. Can you add &#34;GOC&#34; support center, and assign cd-srv-goc-ops(-test) user to it (if that&#39;s how it is supposed to work)?

Soichi Hayashi</pre></div><div class='update_description'><i onclick="document.location='12441#1351520290'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T14:18:10+00:00">Oct 29, 2012 02:18 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1351520290">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; I am not sure if this will create a new ticket at the GOC.</font>
GOC-TX will create a GOC ticket if there is no corresponding GOC ticket.

<font color='#7F7E6F'>&#62; I believe if you select the caller as ..</font>
I find it confusing that I have to select &#34;caller&#34; field to exchange ticket to GOC. As Steve mentioned, &#34;External Support Center&#34; sounds like a better field to select. Can you add &#34;GOC&#34; support center, and assign cd-srv-goc-ops(-test) user to it (if that&#39;s how it is supposed to work)?</pre></div><div class='update_description'><i onclick="document.location='12441#1351520110'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T14:15:10+00:00">Oct 29, 2012 02:15 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1351520110">&nbsp;</a></div><pre>Mike, it won&#39;t let me enter that email address in the Caller field
of the ticket.  Requires it be a known Fermilab user.
But it looks like I can put in cd-srv-goc-ops
(or cd-srv-goc-ops-test) as the caller.
I&#39;ve done that, we will see what GOC gets now.

Steve

On Mon, 29 Oct 2012, Michael J Baker wrote&#58;

<font color='#7F7E6F'>&#62; I believe if you select the caller as either cd-srv-goc-ops</font>
<font color='#7F7E6F'>&#62; (tx+fermi_fp71@....) or cd-srv-goc-ops-test</font>
<font color='#7F7E6F'>&#62; (tx+fermitest_fp114@....) it should forward the email to the</font>
<font color='#7F7E6F'>&#62; GOC.  I am not sure if this will create a new ticket at the GOC.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; From&#58; Steven C Timm &#60;timm@....&#62;</font>
<font color='#7F7E6F'>&#62; Date&#58; Monday, October 29, 2012 9&#58;03 AM</font>
<font color='#7F7E6F'>&#62; To&#58; Michael Baker &#60;mjbaker@....&#62;</font>
<font color='#7F7E6F'>&#62; Cc&#58; &#34;osg@....&#34; &#60;osg@....&#62;</font>
<font color='#7F7E6F'>&#62; Subject&#58; Re&#58; Open Science Grid&#58; Ticket exchange corner case error</font>
<font color='#7F7E6F'>&#62; ISSUE=12441 PROJ=71</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I tried to select &#34;GOC&#34; in the pull-down for &#34;External Support Center&#34;</font>
<font color='#7F7E6F'>&#62; but it is not there.  I&#39;ve made INC329949 in ServiceNow to try to forward</font>
<font color='#7F7E6F'>&#62; externally but it appears that we do not have the option to do so at this</font>
<font color='#7F7E6F'>&#62; time.  This is functionality that was supposed to have been in ServiceNow</font>
<font color='#7F7E6F'>&#62; from the beginning but it appears that it may not be.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Steve Timm</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Mon, 29 Oct 2012, Michael J Baker wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;       Soichi,</font>
<font color='#7F7E6F'>&#62; The GOC submits tickets to SNOW via the SOAP web service.  It appears</font>
<div id='show_1513799145' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1513799145'><font color='#7F7E6F'>&#62; that</font>
<font color='#7F7E6F'>&#62; when this is done the caller is set to &#34;cd-srv-goc-ops&#34;, which has an</font>
<font color='#7F7E6F'>&#62; email</font>
<font color='#7F7E6F'>&#62; address &#34;tx+fermi_fp71@....&#34;.  When a ticket in our system</font>
<font color='#7F7E6F'>&#62; is</font>
<font color='#7F7E6F'>&#62; updated it sends an email to the caller with the update.  I assume</font>
<font color='#7F7E6F'>&#62; that the</font>
<font color='#7F7E6F'>&#62; GOC processes the email and updates the GOC ticket.</font>
<font color='#7F7E6F'>&#62; Do you have any additional questions, or do you need anything to be</font>
<font color='#7F7E6F'>&#62; done on</font>
<font color='#7F7E6F'>&#62; our end?</font>
<font color='#7F7E6F'>&#62; Regards,</font>
<font color='#7F7E6F'>&#62; Mike</font>
<font color='#7F7E6F'>&#62; ___________________________________________________________________________</font>
<font color='#7F7E6F'>&#62; _</font>
<font color='#7F7E6F'>&#62; Notification of Ticket Change</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//ticket.grid.iu.edu/goc/12441' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/12441</a></font>
<font color='#7F7E6F'>&#62; Description&#58;</font>
<font color='#7F7E6F'>&#62; CC-ing Steve and Michael.</font>
<font color='#7F7E6F'>&#62; Michael,</font>
<font color='#7F7E6F'>&#62; I am trying to identify how SNOW tickets are currently *sent* to GOC</font>
<font color='#7F7E6F'>&#62; via GOC</font>
<font color='#7F7E6F'>&#62; Ticket exchange. We usually send ticket from GOC to SNOW, and exchange</font>
<font color='#7F7E6F'>&#62; via</font>
<font color='#7F7E6F'>&#62; GOC-TX, but not the other way around - as far as I know. If there are</font>
<font color='#7F7E6F'>&#62; no</font>
<font color='#7F7E6F'>&#62; such ticket, can you open a test ticket at SNOW&#39;s test instance and</font>
<font color='#7F7E6F'>&#62; send it</font>
<font color='#7F7E6F'>&#62; to GOC-ITB?</font>
<font color='#7F7E6F'>&#62; Thanks!</font>
<font color='#7F7E6F'>&#62; Soichi Hayashi</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; Steven C. Timm, Ph.D  (630) 840-8525</font>
<font color='#7F7E6F'>&#62; timm@....  <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~timm/</font>
<font color='#7F7E6F'>&#62; Fermilab Computing Division, Scientific Computing Facilities,</font>
<font color='#7F7E6F'>&#62; Grid Facilities Department, FermiGrid Services Group, Group Leader.</font>
<font color='#7F7E6F'>&#62; Lead of FermiCloud project.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>

------------------------------------------------------------------
Steven C. Timm, Ph.D  (630) 840-8525
timm@....  <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~timm/
Fermilab Computing Division, Scientific Computing Facilities,
Grid Facilities Department, FermiGrid Services Group, Group Leader.
Lead of FermiCloud project.
</div><script type='text/javascript'>
        $('#show_1513799145').click(function() {
            $('#detail_1513799145').slideDown("normal");
            $('#show_1513799145').hide();
            $('#hide_1513799145').show();
        });
        $('#hide_1513799145').click(function() {
            $('#detail_1513799145').slideUp();
            $('#hide_1513799145').hide();
            $('#show_1513799145').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12441#1351519571'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T14:06:11+00:00">Oct 29, 2012 02:06 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1351519571">&nbsp;</a></div><pre>I believe if you select the caller as either cd-srv-goc-ops (tx+fermi_fp71@....) or cd-srv-goc-ops-test (tx+fermitest_fp114@....) it should forward the email to the GOC.  I am not sure if this will create a new ticket at the GOC.

From&#58; Steven C Timm &#60;timm@....&#60;mailto&#58;timm@....&#62;&#62;
Date&#58; Monday, October 29, 2012 9&#58;03 AM
To&#58; Michael Baker &#60;mjbaker@....&#60;mailto&#58;mjbaker@....&#62;&#62;
Cc&#58; &#34;osg@....&#60;mailto&#58;osg@....&#62;&#34; &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62;
Subject&#58; Re&#58; Open Science Grid&#58; Ticket exchange corner case error ISSUE=12441 PROJ=71

I tried to select &#34;GOC&#34; in the pull-down for &#34;External Support Center&#34;
but it is not there.  I&#39;ve made INC329949 in ServiceNow to try to forward
externally but it appears that we do not have the option to do so at this
time.  This is functionality that was supposed to have been in ServiceNow
from the beginning but it appears that it may not be.

Steve Timm

On Mon, 29 Oct 2012, Michael J Baker wrote&#58;

Soichi,
The GOC submits tickets to SNOW via the SOAP web service.  It appears that
when this is done the caller is set to &#34;cd-srv-goc-ops&#34;, which has an email
address &#34;tx+fermi_fp71@....&#60;mailto&#58;tx+fermi_fp71@....&#62;&#34;.  When a ticket in our system is
updated it sends an email to the caller with the update.  I assume that the
GOC processes the email and updates the GOC ticket.
Do you have any additional questions, or do you need anything to be done on
our end?
Regards,
Mike
____________________________________________________________________________
Notification of Ticket Change
<a href='https&#58;//ticket.grid.iu.edu/goc/12441' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/12441</a>
Description&#58;
CC-ing Steve and Michael.
Michael,
I am trying to identify how SNOW tickets are currently *sent* to GOC via GOC
<div id='show_51867342' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_51867342'>Ticket exchange. We usually send ticket from GOC to SNOW, and exchange via
GOC-TX, but not the other way around - as far as I know. If there are no
such ticket, can you open a test ticket at SNOW&#39;s test instance and send it
to GOC-ITB?
Thanks!
Soichi Hayashi

------------------------------------------------------------------
Steven C. Timm, Ph.D  (630) 840-8525
timm@....&#60;mailto&#58;timm@....&#62;  <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~timm/
Fermilab Computing Division, Scientific Computing Facilities,
Grid Facilities Department, FermiGrid Services Group, Group Leader.
Lead of FermiCloud project.
</div><script type='text/javascript'>
        $('#show_51867342').click(function() {
            $('#detail_51867342').slideDown("normal");
            $('#show_51867342').hide();
            $('#hide_51867342').show();
        });
        $('#hide_51867342').click(function() {
            $('#detail_51867342').slideUp();
            $('#hide_51867342').hide();
            $('#show_51867342').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12441#1351519569'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T14:06:09+00:00">Oct 29, 2012 02:06 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1351519569">&nbsp;</a></div><pre>I tried to select &#34;GOC&#34; in the pull-down for &#34;External Support Center&#34;
but it is not there.  I&#39;ve made INC329949 in ServiceNow to try to forward
externally but it appears that we do not have the option to do so at this
time.  This is functionality that was supposed to have been in ServiceNow
from the beginning but it appears that it may not be.

Steve Timm

On Mon, 29 Oct 2012, Michael J Baker wrote&#58;

<font color='#7F7E6F'>&#62; Soichi,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The GOC submits tickets to SNOW via the SOAP web service.  It appears that</font>
<font color='#7F7E6F'>&#62; when this is done the caller is set to &#34;cd-srv-goc-ops&#34;, which has an email</font>
<font color='#7F7E6F'>&#62; address &#34;tx+fermi_fp71@....&#34;.  When a ticket in our system is</font>
<font color='#7F7E6F'>&#62; updated it sends an email to the caller with the update.  I assume that the</font>
<font color='#7F7E6F'>&#62; GOC processes the email and updates the GOC ticket.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Do you have any additional questions, or do you need anything to be done on</font>
<font color='#7F7E6F'>&#62; our end?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Regards,</font>
<font color='#7F7E6F'>&#62; Mike</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ____________________________________________________________________________</font>
<font color='#7F7E6F'>&#62; Notification of Ticket Change</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//ticket.grid.iu.edu/goc/12441' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/12441</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Description&#58;</font>
<font color='#7F7E6F'>&#62; CC-ing Steve and Michael.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Michael,</font>
<font color='#7F7E6F'>&#62;</font>
<div id='show_1010172719' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1010172719'><font color='#7F7E6F'>&#62; I am trying to identify how SNOW tickets are currently *sent* to GOC via GOC</font>
<font color='#7F7E6F'>&#62; Ticket exchange. We usually send ticket from GOC to SNOW, and exchange via</font>
<font color='#7F7E6F'>&#62; GOC-TX, but not the other way around - as far as I know. If there are no</font>
<font color='#7F7E6F'>&#62; such ticket, can you open a test ticket at SNOW&#39;s test instance and send it</font>
<font color='#7F7E6F'>&#62; to GOC-ITB?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Soichi Hayashi</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>

------------------------------------------------------------------
Steven C. Timm, Ph.D  (630) 840-8525
timm@....  <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~timm/
Fermilab Computing Division, Scientific Computing Facilities,
Grid Facilities Department, FermiGrid Services Group, Group Leader.
Lead of FermiCloud project.
</div><script type='text/javascript'>
        $('#show_1010172719').click(function() {
            $('#detail_1010172719').slideDown("normal");
            $('#show_1010172719').hide();
            $('#hide_1010172719').show();
        });
        $('#hide_1010172719').click(function() {
            $('#detail_1010172719').slideUp();
            $('#hide_1010172719').hide();
            $('#show_1010172719').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12441#1351519211'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T14:00:11+00:00">Oct 29, 2012 02:00 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1351519211">&nbsp;</a></div><pre>Mike--Soichi was asking a different question than what you answered.
He is trying to figure out what happens in the rare case that
Fermilab enters a ticket into ServiceNow and then forwards it to the GOC.
I actually have never done it before and I am not sure I know how
to send to the ITB instance but I can try a test ticket in the real
system.

Steve Timm

On Mon, 29 Oct 2012, Michael J Baker wrote&#58;

<font color='#7F7E6F'>&#62; Soichi,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The GOC submits tickets to SNOW via the SOAP web service.  It appears that</font>
<font color='#7F7E6F'>&#62; when this is done the caller is set to &#34;cd-srv-goc-ops&#34;, which has an email</font>
<font color='#7F7E6F'>&#62; address &#34;tx+fermi_fp71@....&#34;.  When a ticket in our system is</font>
<font color='#7F7E6F'>&#62; updated it sends an email to the caller with the update.  I assume that the</font>
<font color='#7F7E6F'>&#62; GOC processes the email and updates the GOC ticket.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Do you have any additional questions, or do you need anything to be done on</font>
<font color='#7F7E6F'>&#62; our end?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Regards,</font>
<font color='#7F7E6F'>&#62; Mike</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ____________________________________________________________________________</font>
<font color='#7F7E6F'>&#62; Notification of Ticket Change</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//ticket.grid.iu.edu/goc/12441' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/12441</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Description&#58;</font>
<font color='#7F7E6F'>&#62; CC-ing Steve and Michael.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Michael,</font>
<div id='show_391524539' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_391524539'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I am trying to identify how SNOW tickets are currently *sent* to GOC via GOC</font>
<font color='#7F7E6F'>&#62; Ticket exchange. We usually send ticket from GOC to SNOW, and exchange via</font>
<font color='#7F7E6F'>&#62; GOC-TX, but not the other way around - as far as I know. If there are no</font>
<font color='#7F7E6F'>&#62; such ticket, can you open a test ticket at SNOW&#39;s test instance and send it</font>
<font color='#7F7E6F'>&#62; to GOC-ITB?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Soichi Hayashi</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>

------------------------------------------------------------------
Steven C. Timm, Ph.D  (630) 840-8525
timm@....  <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~timm/
Fermilab Computing Division, Scientific Computing Facilities,
Grid Facilities Department, FermiGrid Services Group, Group Leader.
Lead of FermiCloud project.
</div><script type='text/javascript'>
        $('#show_391524539').click(function() {
            $('#detail_391524539').slideDown("normal");
            $('#show_391524539').hide();
            $('#hide_391524539').show();
        });
        $('#hide_391524539').click(function() {
            $('#detail_391524539').slideUp();
            $('#hide_391524539').hide();
            $('#show_391524539').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12441#1351519030'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T13:57:10+00:00">Oct 29, 2012 01:57 PM UTC</time> by <b>mjbaker@....</b><a class="anchor" name="1351519030">&nbsp;</a></div><pre>Soichi,

The GOC submits tickets to SNOW via the SOAP web service.  It appears that when this is done the caller is set to &#34;cd-srv-goc-ops&#34;, which has an email address &#34;tx+fermi_fp71@....&#34;.  When a ticket in our system is updated it sends an email to the caller with the update.  I assume that the GOC processes the email and updates the GOC ticket.

Do you have any additional questions, or do you need anything to be done on our end?

Regards,
Mike

________________________________
Notification of Ticket Change

<a href='https&#58;//ticket.grid.iu.edu/goc/12441' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/12441</a>

Description&#58;
CC-ing Steve and Michael.

Michael,

I am trying to identify how SNOW tickets are currently *sent* to GOC via GOC Ticket exchange. We usually send ticket from GOC to SNOW, and exchange via GOC-TX, but not the other way around - as far as I know. If there are no such ticket, can you open a test ticket at SNOW&#39;s test instance and send it to GOC-ITB?

Thanks!

Soichi Hayashi</pre></div><div class='update_description'><i onclick="document.location='12441#1351518115'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-29T13:41:55+00:00">Oct 29, 2012 01:41 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1351518115">&nbsp;</a></div><pre>CC-ing Steve and Michael.

Michael,

I am trying to identify how SNOW tickets are currently *sent* to GOC via GOC Ticket exchange. We usually send ticket from GOC to SNOW, and exchange via GOC-TX, but not the other way around - as far as I know. If there are no such ticket, can you open a test ticket at SNOW&#39;s test instance and send it to GOC-ITB?

Thanks!</pre></div><div class='update_description'><i onclick="document.location='12441#1351007925'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-23T15:58:45+00:00">Oct 23, 2012 03:58 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1351007925">&nbsp;</a></div><pre>Hi Soichi,

I thought you wanted me to comment on the JIRA ticket so I put my comments there.  This is what I said&#58;

&#34;I don&#39;t have any off hand. I sent Steve and email to find out if he has any.&#34;</pre></div><div class='update_description'><i onclick="document.location='12441#1351007159'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-23T15:45:59+00:00">Oct 23, 2012 03:45 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1351007159">&nbsp;</a></div><pre>ping</pre></div><div class='update_description'><i onclick="document.location='12441#1350657249'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-19T14:34:09+00:00">Oct 19, 2012 02:34 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1350657249">&nbsp;</a></div><pre>Tony, can you comment?</pre></div><div class='update_description'><i onclick="document.location='12441#1349831315'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-10T01:08:35+00:00">Oct 10, 2012 01:08 AM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1349831315">&nbsp;</a></div><pre>Tony,

Can you comment on the latest update I made on the Jira ticket?
<font color='#7F7E6F'>&#62; <a href='https&#58;//jira.opensciencegrid.org/browse/GOCTX-26?focusedCommentId=16984&page=com.atlassian.jira.plugin.system.issuetabpanels&#58' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/GOCTX-26?focusedCommentId=16984&page=com.atlassian.jira.plugin.system.issuetabpanels&#58</a>;comment-tabpanel#comment-16984</font>

Thanks!
Soichi</pre></div><div class='update_description'><i onclick="document.location='12441#1345474926'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-20T15:02:06+00:00">Aug 20, 2012 03:02 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1345474926">&nbsp;</a></div><pre>I came up with a possible solution, and created this Jira ticket
<font color='#7F7E6F'>&#62; <a href='https&#58;//jira.opensciencegrid.org/browse/GOCTX-26' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/GOCTX-26</a></font>

Please *watch* this Jira ticket if you are interested in.

Extending NAD until 9/30.</pre></div><div class='update_description'><i onclick="document.location='12441#1345474604'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-20T14:56:44+00:00">Aug 20, 2012 02:56 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1345474604">&nbsp;</a></div><pre>With no &#34;un-assignment&#34; notification, we need an independent process monitoring all currently exchanged tickets one-by-one in order to find any one-way tickets. This is not very efficient, but I can&#39;t think of an alternative..

I will think about this more and see if I can come up with something.</pre></div><div class='update_description'><i onclick="document.location='12441#1345473205'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-20T14:33:25+00:00">Aug 20, 2012 02:33 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1345473205">&nbsp;</a></div><pre>I don&#39;t really have a problem with Rule #1, but that is because I don&#39;t have management running metrics against my ticket counts.  FermiGrid does, therefore Rule #1 won&#39;t work for them.  Rule #2 can stand as a temporary measure, but this really should be fixed.  I understand from a systems point of view that the components are separate and don&#39;t necessarily know about each other, but from a *service* point of view, the GOC should really know how to unlink tickets and not cause orphans.  I view this as a bug that needs to be fixed at some point.</pre></div><div class='update_description'><i onclick="document.location='12441#1345468777'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-20T13:19:37+00:00">Aug 20, 2012 01:19 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1345468777">&nbsp;</a></div><pre>extending NAD</pre></div><div class='update_description'><i onclick="document.location='12441#1345041421'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-15T14:37:01+00:00">Aug 15, 2012 02:37 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1345041421">&nbsp;</a></div><pre>Tony,

From GOC-TX&#39;s point of view, GOC Ticket is just another external ticketing system just like SNOW. I have not seen ticketing systems that sends out &#34;you are now un-assigned&#34; notifications including GOC Ticket. I&#39;d like to avoid fixing something just on one ticketing system if we can&#39;t fix the problem on all ticketing systems in order to keep our system easier to understand and maintain.

I can&#39;t think of better approach than enforcing following rules.

Rule #1 &#62; Don&#39;t un-link ticket exchange once it&#39;s exchanged.
Rule #2 &#62; If we really need to un-link tickets, first make a update saying &#34;I&#39;d like to un-link this ticket exchange. Please unassign GOC-TX on your end as well.&#34; Then, make another ticket update to actually un-link the ticket.

Do you think this is an acceptable compromise?

Soichi</pre></div><div class='update_description'><i onclick="document.location='12441#1345040117'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-15T14:15:17+00:00">Aug 15, 2012 02:15 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1345040117">&nbsp;</a></div><pre>The issue here is that the *GOC* removed the link between the two systems.  A ticket has been created in SNOW, but only has a one-way link (SNOW -&#62; GOC).  So, if I close the SNOW ticket, the GOC ticket gets closed, but if I don&#39;t, when the GOC ticket is closed, the SNOW ticket is never updated.

When the GOC removes the link, GOC-TX should be smart enough to realize that the linkage has been removed and not perform any further updates.</pre></div><div class='update_description'><i onclick="document.location='12441#1345039635'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-15T14:07:15+00:00">Aug 15, 2012 02:07 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1345039635">&nbsp;</a></div><pre>Tony, can you comment on my previous update?</pre></div><div class='update_description'><i onclick="document.location='12441#1343783533'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-01T01:12:13+00:00">Aug 1, 2012 01:12 AM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1343783533">&nbsp;</a></div><pre>Tony,

After a ticket is exchanged between 2 ticketing systems, if we decide not to synchronize those 2 tickets, it is important to remove the GOC-TX assignee (or CC depending a ticketin system) so that no trigger emails will be sent to GOC-TX. Since GOC-TX doesn&#39;t know when 2 tickets are no longer exchanged (there are no &#34;you are now unassigned to this ticket&#34; notification that GOC-TX can rely on), GOC-TX simply synchronizes 2 tickets whenever *any* trigger is sent.

Can you think of a good way for GOC-TX to know when *not* to synchronize tickets?

<font color='#7F7E6F'>&#62; P.S. There appears to be no way to open a ticket against the ticketing system itself.</font>
I am not sure what you mean by this. Can you elaborate?

Soichi</pre></div><div class='update_description'><i onclick="document.location='12441#1343670056'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-30T17:40:56+00:00">Jul 30, 2012 05:40 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1343670056">&nbsp;</a></div><pre>[by Anthony Tiradani]

When a ticket is mistakenly routed to Fermilab&#39;s system, the GOC will remove the routing parameters from the ticket.  The problem is that a corresponding ticket has already been created in SNOW.  When that ticket is closed in SNOW, the GOC ticketing system will close the original ticket even though it is no longer linked.

P.S. There appears to be no way to open a ticket against the ticketing system itself.</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F12441">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
