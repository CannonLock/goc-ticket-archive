<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[34200] High failure rate in reprocessing workflows</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=34200" method="post">
<div class="page-header">
    <h3><span class="muted">34200</span> / High failure rate in reprocessing workflows</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Antonio Delgado</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Antonio Delgado Peris</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">fGOC</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-07-03</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">fGOC <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=129091">129091</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/34200", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/34200?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/34200?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20High%20failure%20rate%20in%20reprocessing%20workflows%20ISSUE%3D34200%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='34200#1499090752'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-07-03T14:05:52+00:00">Jul 3, 2017 02:05 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1499090752">&nbsp;</a></div><pre><a href='https&#58;//cmsweb.cern.ch/wmstats/index.html' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/wmstats/index.html</a> shows no error same as originally reported.cmspilot user is made to write files tot SE directly.&#13;

-- by Bockjoo Kim at Thu Jun 29 17&#58;16&#58;44 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=129091' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=129091</a></pre></div><div class='update_description'><i onclick="document.location='34200#1498754703'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-29T16:45:03+00:00">Jun 29, 2017 04:45 PM UTC</time> by <b>echism</b><a class="anchor" name="1498754703">&nbsp;</a></div><pre>Is anything further happening on this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='34200#1498245949'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-23T19:25:49+00:00">Jun 23, 2017 07:25 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1498245949">&nbsp;</a></div><pre>Well, that&#39;s a shame.
POSIX stageout is much more reliable and faster.
Why do you put so much effort to go around?
Bockjoo&#13;

-- by Bockjoo Kim at Thu Jun 22 16&#58;30&#58;10 UTC 2017

Brian Bockelman has subscribed to this ticket.

Hi,

I updated the twiki doc to clearly state that stageout should occur via a grid interface.

There is no way to make Singularity work with POSIX-based stageout, especially when you take into account locally-mapped users.

Brian&#13;

-- by Brian Bockelman at Thu Jun 22 16&#58;21&#58;30 UTC 2017

Hi Alan,
Thanks for checking it quickly!
I updated the siteconf.
Bockjoo&#13;

-- by Bockjoo Kim at Thu Jun 22 12&#58;01&#58;46 UTC 2017

Disregard my last comment. We do not have the debug option hard-coded in the WMCore plugin.
Thus it must be coming from the site-local-config, which is true at least for the fallback stage out
<a href='https&#58;//gitlab.cern.ch/SITECONF/T2_US_Florida/blob/master/JobConfig/site-local-config.xml#L31' target='_blank' rel='nofollow'>https&#58;//gitlab.cern.ch/SITECONF/T2_US_Florida/blob/master/JobConfig/site-local-config.xml#L31</a>

Can you update your site-local-config options please?

Thanks,
Alan.&#13;

<div id='show_769789024' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_769789024'>-- by Alan Malta at Thu Jun 22 11&#58;52&#58;20 UTC 2017

Hi Bockjoo,

I&#39;m creating a patch to remove this &#39;-debug&#39; option. I think it was hard-coded there because the gfal2 tools is somehow new in
the CMS sites and we wanted to be able to spot any problems with that.

Sites that want to have the debug information should then use the &#34;options&#34; from the site-local-config, IMO.

So Florida gfal installation is using&#58;
gfal2-util version 1.4.0 (gfal2 2.12.3)

Indeed I no longer see this option in the manpage&#58;
<a href='https&#58;//gitlab.cern.ch/dmc/gfal2-util/blob/develop/doc/man/gfal-copy.1' target='_blank' rel='nofollow'>https&#58;//gitlab.cern.ch/dmc/gfal2-util/blob/develop/doc/man/gfal-copy.1</a>

Thanks,
Alan.&#13;

-- by Alan Malta at Thu Jun 22 11&#58;47&#58;46 UTC 2017

gfal-copy command option used in the production job stageout is this&#58;
env -i X509_USER_PROXY=$X509_USER_PROXY JOBSTARTDIR=$JOBSTARTDIR bash -c &#39;. $JOBSTARTDIR/startup_environment.sh; date; gfal-copy -t 2400 -T 2400 -p -K adler32 -debug file&#58;///tmp/8066790.cms_slurm_job/glide_WBnT0T/execute/dir_36743/job/WMTaskSpace/logArch1/logArchive.tar.gz <a href='gsiftp&#58;//se01.cmsaf.mit.edu/cms/store/unmerged/logs/prod/2017/6/22/pdmvserv_task_TOP-PhaseIITDRSpring17wmLHEGS-00002__v1_T_170618_042332_5448/TOP-PhaseIITDRSpring17wmLHEGS-00002_0/0000/0/0bcbb7dc-5614-11e7-9adb-02163e01820e-169-0-logArchive.tar.gz&#39' target='_blank' rel='nofollow'>gsiftp&#58;//se01.cmsaf.mit.edu/cms/store/unmerged/logs/prod/2017/6/22/pdmvserv_task_TOP-PhaseIITDRSpring17wmLHEGS-00002__v1_T_170618_042332_5448/TOP-PhaseIITDRSpring17wmLHEGS-00002_0/0000/0/0bcbb7dc-5614-11e7-9adb-02163e01820e-169-0-logArchive.tar.gz&#39</a>;
EXIT_STATUS=$?

But at my worker nodes, gfal-copy version does not have -debug option&#58;
-bash-4.1$ gfal-copy -t 2400 -T 2400 -p -K adler32 -debug file&#58;//&#96;pwd&#96;/cmssam.tar.gz <a href='gsiftp&#58;//se01.cmsaf.mit.edu/cms/store/temp/user/bockjoo/cmssam.tar.gz' target='_blank' rel='nofollow'>gsiftp&#58;//se01.cmsaf.mit.edu/cms/store/temp/user/bockjoo/cmssam.tar.gz</a>
usage&#58; gfal-copy [-h] [-V] [-v] [-D DEFINITION] [-t TIMEOUT] [-E CERT]
[--key KEY] [-4] [-6] [-C CLIENT_INFO] [-f] [-p]
[-n NBSTREAMS] [--tcp-buffersize TCP_BUFFERSIZE]
[-s SRC_SPACETOKEN] [-S DST_SPACETOKEN] [-T TRANSFER_TIMEOUT]
[-K CHECKSUM] [--from-file FROM_FILE] [--just-copy] [-r]
[--abort-on-failure] [--dry-run]
[src] dst [dst ...]
gfal-copy&#58; error&#58; unrecognized arguments&#58; -debug

On the other hand, without it, this works fine&#58;
-bash-4.1$ gfal-copy  file&#58;//&#96;pwd&#96;/cmssam.tar.gz <a href='gsiftp&#58;//se01.cmsaf.mit.edu/cms/store/temp/user/bockjoo/cmssam.tar.gz' target='_blank' rel='nofollow'>gsiftp&#58;//se01.cmsaf.mit.edu/cms/store/temp/user/bockjoo/cmssam.tar.gz</a>
Copying file&#58;///osg/home/cmspilot/cmssam.tar.gz   [DONE]  after 0s

On my worker nodes, the gfal-copy version is&#58;
-bash-4.1$ gfal-copy -V
gfal2-util version 1.4.0 (gfal2 2.12.3)
file-2.12.3
gridftp-2.12.3
srm-2.12.3
xrootd-2.12.3

Can something be done about this?
Thanks,
Bockjoo&#13;

-- by Bockjoo Kim at Thu Jun 22 11&#58;39&#58;37 UTC 2017

Hi Alan,
There is no good solution that worked during glexec era.
This is due to singularity. Can something be done in the singularity to change the id to production user instead of cmspilot?
gfal-copy is too for us much since we can just cp files to the local SE in no time.
Thanks,
Bockjoo&#13;

-- by Bockjoo Kim at Wed Jun 21 20&#58;10&#58;03 UTC 2017

Hi,

this ticket somehow got my attention.
Bockjoo, don&#39;t we use the cmspilot role for any CMS job (analysis + production)? If so,
I don&#39;t think this is a safe approach. Production namespaces should be restricted to
production workflows, otherwise there is always the possibility of having analysis jobs
writing to the same namespace and even worse, overwriting production files.

Just my 2c.
Thanks,
Alan.&#13;

-- by Alan Malta at Wed Jun 21 19&#58;55&#58;36 UTC 2017

Hi Stephan,
gfal-copy is not good either because we do not allow 2811 to our own storage.
It&#39;s my HPC thing.
In the meantime, a different solution is applied.
cmspilot user should be able to create directories for the production job outputs now
and cp the output from the worker node to the production directories.
I think this ticket can be closed.
Thanks,
Bockjoo&#13;

-- by Bockjoo Kim at Wed Jun 21 19&#58;45&#58;15 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=129091' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=129091</a>
</div><script type='text/javascript'>
        $('#show_769789024').click(function() {
            $('#detail_769789024').slideDown("normal");
            $('#show_769789024').hide();
            $('#hide_769789024').show();
        });
        $('#hide_769789024').click(function() {
            $('#detail_769789024').slideUp();
            $('#hide_769789024').hide();
            $('#show_769789024').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='34200#1498072830'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-21T19:20:30+00:00">Jun 21, 2017 07:20 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1498072830">&nbsp;</a></div><pre>Hallo Bockjoo,
could you look into switching Florida to
gfal-copy for local stage-out, that seems
to be the best option then. Are your worker
nodes SL6 or 7? In case they are SL 7,
please don&#39;t install gfal2 on the worker
nodes for the time being.
Thanks,
- StephanChanged CC to ;cms-comp-ops-site-support-team@....;cms-comp-ops-workflow-team@....;maxi@....;bbockelm@....;bockjoo@....&#13;

-- by Stephan Lammel at Wed Jun 21 17&#58;37&#58;29 UTC 2017

It seems it is not the DMWM issue.
Since we are running in Singularity, everyone is cmpilot.
The production jobs used to be cmsprod to create directories and copy files using mkdir and cp.
No mkdir and cp will work under singularity with the cmspilot user.
This is partly on Brian. I am adding him.

There are a couple of options&#58;
1) allow all users (production or not ) to be able to create directories under the production area
2) Use gfal-copy for stageout
3) Don&#39;t use singularity&#13;
Flushed field &#39;Notify Site&#39;&#13;

-- by Bockjoo Kim at Wed Jun 21 15&#58;52&#58;30 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=129091' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=129091</a></pre></div><div class='update_description'><i onclick="document.location='34200#1498059181'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-21T15:33:01+00:00">Jun 21, 2017 03:33 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1498059181">&nbsp;</a></div><pre>Notified CMS DMWM Development team of this ticket.This stageout directory does not exist&#58;
/cms/data/store/unmerged/RunIISummer16DR80Premix/SUSYVBFToHToAA_AToTauTau_M-15_TuneCUETP8M1_13TeV_pythia8/GEN-SIM-RAW/PUMoriond17_80X_mcRun2_asymptotic_2016_TrancheIV_v6-v1/90000
The job should have created the directory before executing /bin/cp command.
I am wondering if WMAgent code did not execute the mkdir command before /bin/cp command.
Reassigning the ticket to the WMA team.
Max, do you know why the gfal-copy to MIT failed?
Thanks,
BockjooChanged CC to ;cms-comp-ops-site-support-team@....;cms-comp-ops-workflow-team@....;maxi@....&#13;

-- by Bockjoo Kim at Wed Jun 21 15&#58;31&#58;57 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=129091' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=129091</a></pre></div><div class='update_description'><i onclick="document.location='34200#1498057804'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-21T15:10:04+00:00">Jun 21, 2017 03:10 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1498057804">&nbsp;</a></div><pre>Dear site admin,

We have noticed that most jobs in recent reprocessing workflows have failed at T2_US_Florida. The errors span several workflows, please have a look at the following URL&#58;

<a href='http&#58;//cern.ch/go/9clg' target='_blank' rel='nofollow'>http&#58;//cern.ch/go/9clg</a>

Error code is 99109&#58; Uncaught exception in WMAgent step executor (often staging out problems).

Looking at snippet of the log of a recent failed job (attached), I indeed find information relative to a failure in the fallback stage out.

For a complete job log, I have only found a relatively old one (12th June), but the error seems the same&#58;

<a href='https&#58;//cmst2.web.cern.ch/cmst2/unified/condorlogs/pdmvserv_task_HIG-RunIISummer15GS-02856__v1_T_170609_104437_9899/99109/HIG-RunIISummer16DR80Premix-03461_0/1371/vocms0304_1371136/Job_1371136/condor.18522.13.out' target='_blank' rel='nofollow'>https&#58;//cmst2.web.cern.ch/cmst2/unified/condorlogs/pdmvserv_task_HIG-RunIISummer15GS-02856__v1_T_170609_104437_9899/99109/HIG-RunIISummer16DR80Premix-03461_0/1371/vocms0304_1371136/Job_1371136/condor.18522.13.out</a>

Could you please have a look and see if you can help us solve the problem?

Regards.

Antonio (CSP on duty)

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=129091' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=129091</a>

[Ticket History]
Subject&#58; High failure rate in reprocessing workflows
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-site-support-team@....;cms-comp-ops-workflow-team@....
-- by Antonio Delgado Peris at Wed Jun 21 15&#58;09&#58;23 UTC 2017

Added attachment florida.error_log&#13;
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT107651&#13' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT107651&#13</a>;

-- by Antonio Delgado Peris at Wed Jun 21 15&#58;09&#58;24 UTC 2017</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F34200">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
