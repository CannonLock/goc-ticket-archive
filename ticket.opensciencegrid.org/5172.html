<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[5172] AGLT2 requests assistance with second gatekeeper</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=5172" method="post">
<div class="page-header">
    <h3><span class="muted">5172</span> / AGLT2 requests assistance with second gatekeeper</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Bobby Ball</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Closed Ticket</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-07-30</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
        <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/5172", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/5172?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/5172?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20AGLT2%20requests%20assistance%20with%20second%20gatekeeper%20ISSUE%3D5172%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='5172#1217354858'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-29T18:07:38+00:00">Jul 29, 2008 06:07 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1217354858">&nbsp;</a></div><pre>Issue is resolved. Closing GOC ticket.</pre></div><div class='update_description'><i onclick="document.location='5172#1217270169'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-28T18:36:09+00:00">Jul 28, 2008 06:36 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1217270169">&nbsp;</a></div><pre>Yes, please do close this ticket.

bob

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5172#1217267003'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-28T17:43:23+00:00">Jul 28, 2008 05:43 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1217267003">&nbsp;</a></div><pre>Bob,

Does that answer your questions? Have we clarified all the questions you had? Can we
close this GOC ticket?

Arvind</pre></div><div class='update_description'><i onclick="document.location='5172#1216737549'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-22T14:39:09+00:00">Jul 22, 2008 02:39 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1216737549">&nbsp;</a></div><pre>Sorry for the response time -- what I&#39;m about to say really wasn&#39;t worth
the wait.

The two head nodes should be registered separately with GOC, and CondorG
jobs arriving at each head node will be correctly accounted by the
Gratia system. The only thing you have to worry about is the reporting
of free slots, etc to ReSS and / or RSV. USCMS at FNAL does the same
thing with 4 gatekeepers, as I recall.

Let me know if you have any other questions.

Thanks,
Chris.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5172#1216653398'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-21T15:16:38+00:00">Jul 21, 2008 03:16 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1216653398">&nbsp;</a></div><pre>Modified NAD - no notification sent to anyone on ticket for this -AG</pre></div><div class='update_description'><i onclick="document.location='5172#1216653333'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-21T15:15:33+00:00">Jul 21, 2008 03:15 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1216653333">&nbsp;</a></div><pre>Gratia-ops, this ticket, like a lot 0of other Gratia tickets, has been languishing
waiting for a response from you. Please respond.

Thanks.

-----

Hey Bob!

(Chris G/Philippe - there&#39;s one part your attention is needed in last
part of the email)

<font color='#7F7E6F'>&#62; It was my memory that you said we could have a second gatekeeper, aliased in OSG</font>
somehow to gate01, that would also report jobs submitted to it as part of our AGLT2
cluster. I guess I just mis-remembered what you said. It was not real important to
what I was doing at the time.

I see. Sorry if I misled you in any way. I am still trying to recall
what I may have said. But ... (read on)

<font color='#7F7E6F'>&#62; gate01.aglt2.org and gate02.grid.umich.edu both front the same set of compute</font>
nodes, except that functionally gate01 will only give GUMS approval to ATLAS jobs,
and gate02 will allow most other VOs to run. That lets us split the load on our
machines into parts that have different meaning and problems for us. gate02 has a
maximum process count limit set for Condor jobs, gate01 is virtually unlimited.
Condor group accounting has the final say in what can run.

I am guessing you *have* to register the two CEs separately since the
VOs supported by one or the other is very different (irrespective of
where the jobs ultimately run). Think of the following scenario&#58;
- Non- USATLAS user comes in to OIM/VORS/etc ... she finds that
their VO is not supported by gate01, and so they walk away. Now if
gate02 was registered she would have likely used your resource.

So from a monitoring point of view and a user point of view, until the
<div id='show_1326359501' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1326359501'>day we have meta schedulers &#58;) I think you should clearly list both CEs
head nodes in OIM so it&#39;s clear to users which supports what VOs.

From an accounting perspective, it sounds like you&#39;ll be reporting
usage of compute nodes from two different head nodes but IMO where
you&#39;re reporting-from should not matter... what should matter is the
compute node(s) that was (were) used, # of CPUs, # of hours, etc.
Perhaps that&#39;s how Gratia handles it right now? or perhaps not? I&#39;ll let
Chris Green/Philippe Canal of the Gratia team to respond to that bit.

[Fwiw, as an analogy, in RSV land, we don&#39;t care where a probe ran from,
we only care about the service that was probed (ie serviceuri).]

<font color='#7F7E6F'>&#62; Both gatekeepers are an AGLT2 resource/CE. So the idea was that anyone in some</font>
random VO could see AGLT2 in the VORS lists, but with 2 CE entries, each of which had
a different list of supported VOs (actually, there would be some overlap as osg and
mis, at least, can run on either). gate01 would continue to do rsv monitoring for both.

Yep that&#39;s fine.
</div><script type='text/javascript'>
        $('#show_1326359501').click(function() {
            $('#detail_1326359501').slideDown("normal");
            $('#show_1326359501').hide();
            $('#hide_1326359501').show();
        });
        $('#hide_1326359501').click(function() {
            $('#detail_1326359501').slideUp();
            $('#hide_1326359501').hide();
            $('#show_1326359501').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5172#1216238713'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-16T20:05:13+00:00">Jul 16, 2008 08:05 PM UTC</time> by <b>echism</b><a class="anchor" name="1216238713">&nbsp;</a></div><pre>Hello,

Are there any updates on this? We haven&#39;t seen anything for a week.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='5172#1216225544'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-16T16:25:44+00:00">Jul 16, 2008 04:25 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1216225544">&nbsp;</a></div><pre>I am removing myself from this ticket. If this is action required from me, please re-assign me or
create a subtask (probably the better option given the lengthy history).

Thanks,

Tim</pre></div><div class='update_description'><i onclick="document.location='5172#1215603502'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-09T11:38:22+00:00">Jul 9, 2008 11:38 AM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1215603502">&nbsp;</a></div><pre>Hey Bob!

(Chris G/Philippe  - there&#39;s one part your attention is needed in last
part of the email)

<font color='#7F7E6F'>&#62; Hello, Arvind,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;  I hope you had a good weekend. I managed to avoid all semblance of work (except for weeding my raspberries) for most of it.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
Yes, I did .. we had a pretty relaxed weekend! Glad to hear you avoid
even a semblance of work ... weeding raspberries, hmm, that probably
does not count ;)

<font color='#7F7E6F'>&#62;  It was my memory that you said we could have a second gatekeeper, aliased in OSG somehow to gate01, that would also report jobs submitted to it as part of our AGLT2 cluster. I guess I just mis-remembered what you said. It was not real important to what I was doing at the time.</font>
<font color='#7F7E6F'>&#62;</font>
I see. Sorry if I misled you in any way. I am still trying to recall
what I may have said. But ... (read on)
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;  gate01.aglt2.org and gate02.grid.umich.edu both front the same set of compute nodes, except that functionally gate01 will only give GUMS approval to ATLAS jobs, and gate02 will allow most other VOs to run. That lets us split the load on our machines into parts that have different meaning and problems for us. gate02 has a maximum process count limit set for Condor jobs, gate01 is virtually unlimited. Condor group accounting has the final say in what can run.</font>
<font color='#7F7E6F'>&#62;</font>
I am guessing you *have* to register the two CEs separately since the
VOs supported by one or the other is very different (irrespective of
where the jobs ultimately run). Think of the following scenario&#58;
- Non- USATLAS user comes in to OIM/VORS/etc ... she finds that
their VO is not supported by gate01, and so they walk away. Now if
gate02 was registered she would have likely used your resource.

So from a monitoring point of view and a user point of view, until the
day we have meta schedulers &#58;) I think you should clearly list both CEs
head nodes in OIM so it&#39;s clear to users which supports what VOs.

From an accounting perspective, it sounds like you&#39;ll be reporting
usage of compute nodes from two different head nodes but IMO where
you&#39;re reporting-from should not matter... what should matter is the
<div id='show_726994271' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_726994271'>compute node(s) that was (were) used, # of CPUs, # of hours, etc.
Perhaps that&#39;s how Gratia handles it right now? or perhaps not? I&#39;ll let
Chris Green/Philippe Canal of the Gratia team to respond to that bit.

[Fwiw, as an analogy, in RSV land, we don&#39;t care where a probe ran from,
we only care about the service that was probed (ie serviceuri).]

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;  Both gatekeepers are an AGLT2 resource/CE. So the idea was that anyone in some random VO could see AGLT2 in the VORS lists, but with 2 CE entries, each of which had a different list of supported VOs (actually, there would be some overlap as osg and mis, at least, can run on either). gate01 would continue to do rsv monitoring for both.</font>
<font color='#7F7E6F'>&#62;</font>

Yep that&#39;s fine.
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;  Does this make sense now? It does not sound as if it is possible to have both gatekeepers show up as an AGLT2 resource. How would you suggest then that we should proceed?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
Let me know if you have a clearer picture now following this email &#58;-)

Cheers,
Arvind
</div><script type='text/javascript'>
        $('#show_726994271').click(function() {
            $('#detail_726994271').slideDown("normal");
            $('#show_726994271').hide();
            $('#hide_726994271').show();
        });
        $('#hide_726994271').click(function() {
            $('#detail_726994271').slideUp();
            $('#hide_726994271').hide();
            $('#show_726994271').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5172#1215459953'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-07T19:45:53+00:00">Jul 7, 2008 07:45 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1215459953">&nbsp;</a></div><pre>Hi. I wanted to chime in on the VORS issue. We should be able to accomplish monitoring both
gatekeepers, but they will need to be monitored separately. Also, looking at the CEMon/BDII
Aggregator (<a href='http&#58;//is.grid.iu.edu/' target='_blank' rel='nofollow'>http&#58;//is.grid.iu.edu/</a>) only gate01 is reporting there. Will gate02 need to be monitored by
this service?

Thank you,

Tim</pre></div><div class='update_description'><i onclick="document.location='5172#1215458229'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-07T19:17:09+00:00">Jul 7, 2008 07:17 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1215458229">&nbsp;</a></div><pre>Hello, Arvind,

I hope you had a good weekend. I managed to avoid all semblance of work (except for weeding my raspberries) for most of it.

It was my memory that you said we could have a second gatekeeper, aliased in OSG somehow to gate01, that would also report jobs submitted to it as part of our AGLT2 cluster. I guess I just mis-remembered what you said. It was not real important to what I was doing at the time.

gate01.aglt2.org and gate02.grid.umich.edu both front the same set of compute nodes, except that functionally gate01 will only give GUMS approval to ATLAS jobs, and gate02 will allow most other VOs to run. That lets us split the load on our machines into parts that have different meaning and problems for us. gate02 has a maximum process count limit set for Condor jobs, gate01 is virtually unlimited. Condor group accounting has the final say in what can run.

Both gatekeepers are an AGLT2 resource/CE. So the idea was that anyone in some random VO could see AGLT2 in the VORS lists, but with 2 CE entries, each of which had a different list of supported VOs (actually, there would be some overlap as osg and mis, at least, can run on either). gate01 would continue to do rsv monitoring for both.

Does this make sense now? It does not sound as if it is possible to have both gatekeepers show up as an AGLT2 resource. How would you suggest then that we should proceed?

Thanks,
bob

Open Science Grid FootPrints wrote&#58;  [Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='5172#1215119828'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-03T21:17:08+00:00">Jul 3, 2008 09:17 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1215119828">&nbsp;</a></div><pre>Hi Bob,

I am a little confused about your exact objective(s).

<font color='#7F7E6F'>&#62; At AGLT2 we have multiple gatekeepers, gate01.aglt2.org (our primary) that supports</font>
<font color='#7F7E6F'>&#62; primarily usatlas, and gate02.grid.umich.edu that supports all other VOs.  VORS only</font>
<font color='#7F7E6F'>&#62; reports gate01, so we have no advertising there for the VOs supported by gate02.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
We can easily add an additonal gatekeeper to be monitored by VORS -- you
just have to register it on OIM, and give it a short name. If the two
gatekeepers are independent entitites, which appears to be the case
here, then it&#39;ll just look like you have two resources with the CE
service (and possibly others) running, on OIM.

<font color='#7F7E6F'>&#62; Arvind mentioned a few weeks ago that multiple gatekeepers could be set up once</font>
<font color='#7F7E6F'>&#62; OSG1.0 was installed, at least, I _thought_ OSG1.0 was the point where this could be</font>
<font color='#7F7E6F'>&#62; done.  But I cannot locate any documentation on this subject.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
I am not sure what exactly I may have said, that you&#39;re referring to.
Can you refresh my memory? &#58;-)

<font color='#7F7E6F'>&#62; I would like to be able to get the information about that second gatekeeper into</font>
<font color='#7F7E6F'>&#62; VORS, and merge the job reporting together.  How can I go about doing this?  gate02</font>
<font color='#7F7E6F'>&#62; reports to gratia independently via (I think) the rsv monitoring from gate01.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
So you want VORS to monitor the two CEs separately but then you want
usage information on Gratia to show up unified? I don&#39;t know if that&#39;s
possible -- I&#39;ll have to check with the Gratia team.

We also need to be clear on the distinction between Gratia accounting
(based out of FNAL) and RSV metric data collection (using a Gratia
transport) that&#39;s hosted by the GOC.
<div id='show_1933084630' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1933084630'>
Right now, I see that gate01 has an RSV client running, and monitoring
both itself and gate02, and then uploading results to our *RSV collector*.

Can you expand on whether or not the above responses cover your
question, or if I am misunderstanding the underlying issues? (Also note
that the GOC staff will away tomorrow, so you may not hear back till
Monday).

Have a great holiday weekend!

Cheers,
Arvind
</div><script type='text/javascript'>
        $('#show_1933084630').click(function() {
            $('#detail_1933084630').slideDown("normal");
            $('#show_1933084630').hide();
            $('#hide_1933084630').show();
        });
        $('#hide_1933084630').click(function() {
            $('#detail_1933084630').slideUp();
            $('#hide_1933084630').hide();
            $('#show_1933084630').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5172#1215105183'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-03T17:13:03+00:00">Jul 3, 2008 05:13 PM UTC</time> by <b>echism</b><a class="anchor" name="1215105183">&nbsp;</a></div><pre>At AGLT2 we have multiple gatekeepers, gate01.aglt2.org (our primary) that supports
primarily usatlas, and gate02.grid.umich.edu that supports all other VOs.  VORS only
reports gate01, so we have no advertising there for the VOs supported by gate02.

Arvind mentioned a few weeks ago that multiple gatekeepers could be set up once
OSG1.0 was installed, at least, I _thought_ OSG1.0 was the point where this could be
done.  But I cannot locate any documentation on this subject.

I would like to be able to get the information about that second gatekeeper into
VORS, and merge the job reporting together.  How can I go about doing this?  gate02
reports to gratia independently via (I think) the rsv monitoring from gate01.

Is what I want to do possible?  How shall I proceed?

Thanks,
bob</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F5172">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
