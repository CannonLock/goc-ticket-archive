<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[4527] OSG-RSV Probes not running at FNAL_GPFARM</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=4527" method="post">
<div class="page-header">
    <h3><span class="muted">4527</span> / OSG-RSV Probes not running at FNAL_GPFARM</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Neha Sharma</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Closing this ticket - issue appears to be resolved, no contradiction from resource admin</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-01-28</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Fermilab <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">RSV-Ops <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/4527", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='4527#1201544948'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-28T18:29:08+00:00">Jan 28, 2008 06:29 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1201544948">&nbsp;</a></div><pre>Hi

The probes are running under user &#34;neha&#34;. However, I would like them
to run under user &#34;rsvuser&#34;
I will try this today and let you know how it goes.

--Neha

On Jan 28, 2008, at 12&#58;19 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4527#1201544380'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-28T18:19:40+00:00">Jan 28, 2008 06:19 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1201544380">&nbsp;</a></div><pre>Neha,

I&#39;ve not heard you contradict my previous note. And things still appear to be working
fine (i.e records are trickling in to the collector, and the local admin webpage
reports successful RSV probe runs as well)

I am going ahead and closing this ticket. Let us know if you have any further trouble.

Thanks,
Arvind</pre></div><div class='update_description'><i onclick="document.location='4527#1201090851'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-23T12:20:51+00:00">Jan 23, 2008 12:20 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1201090851">&nbsp;</a></div><pre>Hi Neha,

From what I see in the RSV collector, and on your local admin RSV webpage
(<a href='https&#58;//fngp-osg.fnal.gov&#58;8443/rsv/' target='_blank' rel='nofollow'>https&#58;//fngp-osg.fnal.gov&#58;8443/rsv/</a>), this appears to be resolved.

Did you make any further changes to make it all work?

Are you able to run RSV as user rsvuser now? Do you still see the permission errors
on your consumer logs?

I do notice some inconsistencies in the local admin webpage (linked above) for some
probe-metrics but I will check back later today to see if it&#39;s just a matter of time
(before those go away).

Thanks,
Arvind</pre></div><div class='update_description'><i onclick="document.location='4527#1201031409'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-22T19:50:09+00:00">Jan 22, 2008 07:50 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1201031409">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Does this has anything to do with fact that the proxy has originally not</font>
<font color='#7F7E6F'>&#62; been created by rsvuser. That in fact, it was created as user &#34;neha&#34; and</font>
<font color='#7F7E6F'>&#62; then copied to another file and chowned to rsvuser?</font>

The consumer jobs&#39; failing should not have anything, what so ever, to do
with the proxy file or its name. Scot, do you have any ideas on why the
consumers are getting the permission denied errors? (Pehaps file
permission problems?)

<font color='#7F7E6F'>&#62; What are consumers</font>

RSV probes run tests on a CE/SE/etc. The consumers do the following&#58;
1) Generate the HTML page that you as site admin are able to see
2) Execute python scripts to initiate Gratia record uploads to the
central RSV collector

HTH,

Arvind

On 2008-01-22 19&#58;41 (-0000), Open Science Grid FootPrints had pondered&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4527#1201030868'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-22T19:41:08+00:00">Jan 22, 2008 07:41 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1201030868">&nbsp;</a></div><pre>I just tried the whole procedure under user &#34;neha&#34;. The probes seem
to be running now.

I still can&#39;t run them under user &#34;rsvuser&#34;.

Only thing different in both cases is the proxy filename.

Does this has anything to do with fact that the proxy has originally
not been created by rsvuser. That in fact, it was created as user
&#34;neha&#34; and then copied to another file and chowned to rsvuser?

[root@fngp-osg osg-rsv]# diff /tmp/x509up_u42947 /tmp/x509up_u60158
[root@fngp-osg osg-rsv]#

Proxy files are same as well.

-Neha

On Jan 22, 2008, at 11&#58;47 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4527#1201024027'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-22T17:47:07+00:00">Jan 22, 2008 05:47 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1201024027">&nbsp;</a></div><pre>Hi

I tried the entire procedure of configuring/running osg-rsv probes on
fngp again this morning (as user &#34;rsvuser&#34;)
This is what I see so far

The jobs have entered the condor devel queue and are either idle or
running .
------------------------------------------------------------------------
---------------------------------------------------
[root@fngp-osg probes]# condor_q

-- Submitter&#58; fngp-osg.fnal.gov &#58; &#60;131.225.167.42&#58;18796&#62; &#58; fngp-
osg.fnal.gov
ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD
569.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
570.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
571.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
572.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
573.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
574.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
575.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
576.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
577.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
578.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
<div id='show_100587140' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_100587140'>579.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
580.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
581.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
582.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
583.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;40 R  0   9.8
probe_wrapper.pl /
584.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
585.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
586.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
587.0   rsvuser         1/22 11&#58;22   0+00&#58;07&#58;54 I  0   9.8
probe_wrapper.pl /
588.0   rsvuser         1/22 11&#58;22   0+00&#58;02&#58;51 I  0   9.8
probe_wrapper.pl /
589.0   rsvuser         1/22 11&#58;22   0+00&#58;02&#58;49 I  0   9.8
probe_wrapper.pl /
590.0   rsvuser         1/22 11&#58;22   0+00&#58;02&#58;47 I  0   9.8
probe_wrapper.pl /
591.0   rsvuser         1/22 11&#58;22   0+00&#58;02&#58;45 I  0   9.8
probe_wrapper.pl /
592.0   rsvuser         1/22 11&#58;22   0+00&#58;07&#58;59 I  0   9.8
probe_wrapper.pl /
593.0   rsvuser         1/22 11&#58;22   0+00&#58;07&#58;53 I  0   9.8
probe_wrapper.pl /
594.0   rsvuser         1/22 11&#58;22   0+00&#58;07&#58;56 I  0   9.8
probe_wrapper.pl /
595.0   rsvuser         1/22 11&#58;22   0+00&#58;07&#58;51 I  0   9.8
probe_wrapper.pl /
596.0   rsvuser         1/22 11&#58;22   0+00&#58;05&#58;30 R  0   9.8
probe_wrapper.pl /
597.0   rsvuser         1/22 11&#58;22   0+00&#58;02&#58;37 I  0   9.8
probe_wrapper.pl /
598.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
599.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
600.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
probe_wrapper.pl /
601.0   rsvuser         1/22 11&#58;22   0+00&#58;05&#58;56 R  0   9.8  gratia-
script-cons
602.0   rsvuser         1/22 11&#58;22   0+00&#58;05&#58;54 I  0   9.8  html-
consumer
603.0   rsvuser         1/22 11&#58;22   0+00&#58;00&#58;00 I  0   9.8
rotate_html_files.

35 jobs; 32 idle, 3 running, 0 held
[root@fngp-osg probes]#

For a job that is running, these are relevant files
------------------------------------------------------------------------
----
[root@fngp-osg probes]# ls -hlt /usr/local/vdt-1.8.1/osg-rsv/logs/
probes/fermigrid1.fnal.gov__osg-directories-probe@....-
directories-CE-permissions*
-rw-r--r--  1 rsvuser sdss    0 Jan 22 11&#58;22 /usr/local/vdt-1.8.1/osg-
rsv/logs/probes/fermigrid1.fnal.gov__osg-directories-
probe@....
-rw-r--r--  1 rsvuser sdss 512K Jan 22 11&#58;22 /usr/local/vdt-1.8.1/osg-
rsv/logs/probes/fermigrid1.fnal.gov__osg-directories-
probe@....
-rw-r--r--  1 rsvuser sdss    0 Jan 22 11&#58;22 /usr/local/vdt-1.8.1/osg-
rsv/logs/probes/fermigrid1.fnal.gov__osg-directories-
probe@....
[root@fngp-osg probes]#

The relevant entry in log file is&#58;

...
000 (583.000.000) 01/22 11&#58;22&#58;07 Job submitted from host&#58;
&#60;131.225.167.42&#58;18796&#62;
...

As you can see. no errors have been generated for this job.

The 2 log files in consumers directory indicate similar Permission
denied errors
=============================================================
[root@fngp-osg probes]# tail ../consumers/gratia-script-consumer.log
Create_Process(/usr/local/vdt-1.8.1/osg-rsv/bin/consumers/
gratia-script-consumer,, ...) failed
...
001 (601.000.000) 01/22 11&#58;40&#58;08 Job executing on host&#58;
&#60;131.225.167.42&#58;25365&#62;
...
021 (601.000.000) 01/22 11&#58;40&#58;08 Error from starter on
&#60;131.225.167.42&#58;25365&#62;&#58;
Failed to execute &#39;/usr/local/vdt-1.8.1/osg-rsv/bin/
consumers/gratia-script-consumer&#39;&#58; Permission denied
...
021 (601.000.000) 01/22 11&#58;40&#58;08 Error from starter on
&#60;131.225.167.42&#58;25365&#62;&#58;
Create_Process(/usr/local/vdt-1.8.1/osg-rsv/bin/consumers/
gratia-script-consumer,, ...) failed
------------------------------------------------------------------------
------------------------------------------------------------------------
------------------------
021 (602.000.000) 01/22 11&#58;36&#58;00 Error from starter on
&#60;131.225.167.42&#58;23672&#62;&#58;
Create_Process(/usr/local/vdt-1.8.1/osg-rsv/bin/consumers/
html-consumer,, ...) failed
...
001 (602.000.000) 01/22 11&#58;36&#58;11 Job executing on host&#58;
&#60;131.225.167.42&#58;23813&#62;
...
021 (602.000.000) 01/22 11&#58;36&#58;12 Error from starter on
&#60;131.225.167.42&#58;23813&#62;&#58;
Failed to execute &#39;/usr/local/vdt-1.8.1/osg-rsv/bin/
consumers/html-consumer&#39;&#58; Permission denied
...
021 (602.000.000) 01/22 11&#58;36&#58;17 Error from starter on
&#60;131.225.167.42&#58;23813&#62;&#58;
Create_Process(/usr/local/vdt-1.8.1/osg-rsv/bin/consumers/
html-consumer,, ...) failed

What is a &#34;consumer&#34; exactly? and why is it that it gives me error,
but the job itself does not?

Also the output directory is empty
------------------------------------------------------
[root@fngp-osg probes]# ls -hlt ../../output/
total 12K
drwxr-xr-x  2 rsvuser 9873 4.0K Jan 14 10&#58;20 html
drwxr-xr-x  2 rsvuser 9873 4.0K Jan 11 15&#58;49 gratia
drwxr-xr-x  4 rsvuser 9873 4.0K Dec 14 00&#58;00 htmlori
[root@fngp-osg probes]# ls -hlt ../../output/html
total 0
[root@fngp-osg probes]# ls -hlt ../../output/gratia/
total 0
[root@fngp-osg probes]#

-Neha

On Jan 21, 2008, at 9&#58;40 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_100587140').click(function() {
            $('#detail_100587140').slideDown("normal");
            $('#show_100587140').hide();
            $('#hide_100587140').show();
        });
        $('#hide_100587140').click(function() {
            $('#detail_100587140').slideUp();
            $('#hide_100587140').hide();
            $('#show_100587140').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4527#1200930008'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-21T15:40:08+00:00">Jan 21, 2008 03:40 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1200930008">&nbsp;</a></div><pre>Hi Scot,

Can you look into this? I can&#39;t see anything obviously wrong.. Two points
to keep in mind.

<font color='#7F7E6F'>&#62; No jobs entered the condor devel queue. The ones that you see in queue</font>
<font color='#7F7E6F'>&#62; are from before when I tired to run probes under user &#34;neha&#34;</font>

1) Neha&#39;s saying no jobs have entered the condor-devel queue -- which, I
presume, means condor_q after sourcing condor-devel&#39;s
condor-devel-env.sh returned a blank, so I guess we should ignore the
condor_q output she&#39;s printed on her note. To recap, she&#39;s trying to
run RSV as Unix user rsvuser.

<font color='#7F7E6F'>&#62; [root@fngp-osg ~]# ls -hlt $VDT_LOCATION/osg-rsv/bin/probes/ | head -20</font>
<font color='#7F7E6F'>&#62; total 400K</font>
<font color='#7F7E6F'>&#62; . . .</font>
<font color='#7F7E6F'>&#62; -rw-r--r--  1 root root 5.2K Nov  1 17&#58;14 jobmanagers-status-</font>
<font color='#7F7E6F'>&#62; probe.condor.err</font>
<font color='#7F7E6F'>&#62; . . .</font>

2) I noticed two things that are odd&#58; Neha&#39;s copied and pasted the ls
listing of (perhaps?) $VDT_LOCATION/osg-rsv/logs/probes/, and not
osg-rsv/bin/probes.
- Even if that&#39;s the case, it&#39;s odd that she has a listing with no
hostname in the filename. I&#39;d have expected to see something like
fngp-osg.fnal.gov_jobmanagers-status-probe.condor.err instead of just
the probe-metric name. Just thought it was odd. Perhaps it&#39;s from an
older RSV build? I don&#39;t know.

I am almost certain, it&#39;s not permission problems with the probe
scripts but one can never be 100% certain. Also, /usr/bin/perl seems to
exist, and is accessible/executable by everyone on the machine.

Let&#39;s see what we can find out. Neha&#39;s not indicated if we can get
<div id='show_1086717494' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1086717494'>SSH/GSI-SSH access to the machine.

Cheers,
Arvind

On 2008-01-18 21&#58;25 (-0000), Open Science Grid FootPrints had pondered&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1086717494').click(function() {
            $('#detail_1086717494').slideDown("normal");
            $('#show_1086717494').hide();
            $('#hide_1086717494').show();
        });
        $('#hide_1086717494').click(function() {
            $('#detail_1086717494').slideUp();
            $('#hide_1086717494').hide();
            $('#show_1086717494').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4527#1200691509'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-18T21:25:09+00:00">Jan 18, 2008 09:25 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1200691509">&nbsp;</a></div><pre>[root@fngp-osg ~]# ls -hlt $VDT_LOCATION/osg-rsv/bin/consumers/gratia-
script-consumer
-rwxr-xr-x  1 root root 2.3K Oct  8 15&#58;29 /usr/local/vdt-1.8.1/osg-
rsv/bin/consumers/gratia-script-consumer
[root@fngp-osg ~]#

[root@fngp-osg ~]# ls -hlt $VDT_LOCATION/osg-rsv/bin/consumers/
total 20K
-rwxr-xr-x  1 root root 2.3K Oct  8 15&#58;29 gratia-script-consumer
-rwxr-xr-x  1 root root  13K Oct  8 15&#58;29 html-consumer
[root@fngp-osg ~]#

[root@fngp-osg ~]# ls -hlt $VDT_LOCATION/osg-rsv/bin/probes/ | head -20
total 400K
-rw-r--r--  1 root root  33K Nov  1 17&#58;15 cacert-expiry-local-probe.err
-rw-r--r--  1 root root  251 Nov  1 17&#58;15 cacert-expiry-local-probe.out
-rw-r--r--  1 root root    0 Nov  1 17&#58;15 ping-host-probe.err
-rw-r--r--  1 root root    0 Nov  1 17&#58;15 ping-host-probe.out
-rw-r--r--  1 root root 3.8K Nov  1 17&#58;14 cacert-crl-expiry-
probe.cacert-expiry.out.err
-rw-r--r--  1 root root  285 Nov  1 17&#58;14 cacert-crl-expiry-
probe.cacert-expiry.out.out
-rw-r--r--  1 root root 4.0K Nov  1 17&#58;14 cacert-crl-expiry-probe.crl-
expiry.err
-rw-r--r--  1 root root  282 Nov  1 17&#58;14 cacert-crl-expiry-probe.crl-
expiry.out
-rw-r--r--  1 root root 5.2K Nov  1 17&#58;14 jobmanagers-status-
probe.condor.err
-rw-r--r--  1 root root  293 Nov  1 17&#58;14 jobmanagers-status-
probe.condor.out
-rw-r--r--  1 root root 4.0K Nov  1 17&#58;14 certificate-expiry-local-
probe.containercert-expiry.err
-rw-r--r--  1 root root  238 Nov  1 17&#58;14 certificate-expiry-local-
probe.containercert-expiry.out
-rw-r--r--  1 root root 4.0K Nov  1 17&#58;14 certificate-expiry-local-
<div id='show_872443708' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_872443708'>probe.hostcert-expiry.err
-rw-r--r--  1 root root  233 Nov  1 17&#58;14 certificate-expiry-local-
probe.hostcert-expiry.out
-rw-r--r--  1 root root 4.0K Nov  1 17&#58;14 certificate-expiry-local-
probe.httpcert-expiry.err
-rw-r--r--  1 root root  233 Nov  1 17&#58;14 certificate-expiry-local-
probe.httpcert-expiry.out
-rw-r--r--  1 root root 5.1K Nov  1 17&#58;14 jobmanagers-status-
probe.fork.err
-rw-r--r--  1 root root  289 Nov  1 17&#58;14 jobmanagers-status-
probe.fork.out
-rw-r--r--  1 root root 2.4K Nov  1 17&#58;14 gridftp-simple-probe.err
[root@fngp-osg ~]#

[root@fngp-osg ~]# condor_q

-- Submitter&#58; fngp-osg.fnal.gov &#58; &#60;131.225.167.42&#58;32435&#62; &#58; fngp-
osg.fnal.gov
ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD
534.0   neha            1/14 10&#58;28   0+04&#58;53&#58;36 I  0   9.8
probe_wrapper.pl /
535.0   neha            1/14 10&#58;28   0+04&#58;53&#58;54 I  0   9.8
probe_wrapper.pl /
536.0   neha            1/14 10&#58;28   0+04&#58;37&#58;52 I  0   9.8
probe_wrapper.pl /
537.0   neha            1/14 10&#58;28   0+04&#58;53&#58;59 I  0   9.8
probe_wrapper.pl /
538.0   neha            1/14 10&#58;28   0+04&#58;37&#58;56 I  0   9.8
probe_wrapper.pl /
539.0   neha            1/14 10&#58;28   0+04&#58;53&#58;41 I  0   9.8
probe_wrapper.pl /
540.0   neha            1/14 10&#58;28   0+04&#58;38&#58;57 I  0   9.8
probe_wrapper.pl /
541.0   neha            1/14 10&#58;28   0+04&#58;53&#58;46 I  0   9.8
probe_wrapper.pl /
542.0   neha            1/14 10&#58;28   0+04&#58;53&#58;58 I  0   9.8
probe_wrapper.pl /
543.0   neha            1/14 10&#58;28   0+04&#58;38&#58;04 I  0   9.8
probe_wrapper.pl /
544.0   neha            1/14 10&#58;28   0+04&#58;43&#58;28 I  0   9.8
probe_wrapper.pl /
545.0   neha            1/14 10&#58;28   0+04&#58;47&#58;40 I  0   9.8
probe_wrapper.pl /
546.0   neha            1/14 10&#58;28   0+09&#58;32&#58;48 I  0   9.8
probe_wrapper.pl /
547.0   neha            1/14 10&#58;28   0+04&#58;46&#58;00 I  0   9.8
probe_wrapper.pl /
548.0   neha            1/14 10&#58;28   0+09&#58;32&#58;00 I  0   9.8
probe_wrapper.pl /
549.0   neha            1/14 10&#58;28   0+04&#58;53&#58;53 I  0   9.8
probe_wrapper.pl /
550.0   neha            1/14 10&#58;28   0+04&#58;53&#58;51 I  0   9.8
probe_wrapper.pl /
551.0   neha            1/14 10&#58;28   0+04&#58;53&#58;01 I  0   9.8
probe_wrapper.pl /
552.0   neha            1/14 10&#58;28   0+09&#58;23&#58;02 I  0   9.8
probe_wrapper.pl /
553.0   neha            1/14 10&#58;28   0+09&#58;20&#58;21 I  0   9.8
probe_wrapper.pl /
554.0   neha            1/14 10&#58;28   0+09&#58;17&#58;41 I  0   9.8
probe_wrapper.pl /
555.0   neha            1/14 10&#58;28   0+09&#58;15&#58;19 I  0   9.8
probe_wrapper.pl /
556.0   neha            1/14 10&#58;28   0+09&#58;12&#58;31 I  0   9.8
probe_wrapper.pl /
557.0   neha            1/14 10&#58;28   0+09&#58;30&#58;25 I  0   9.8
probe_wrapper.pl /
558.0   neha            1/14 10&#58;28   0+09&#58;27&#58;55 I  0   9.8
probe_wrapper.pl /
559.0   neha            1/14 10&#58;28   0+09&#58;25&#58;24 I  0   9.8
probe_wrapper.pl /
560.0   neha            1/14 10&#58;28   0+09&#58;32&#58;28 I  0   9.8
probe_wrapper.pl /
561.0   neha            1/14 10&#58;28   0+09&#58;30&#58;15 I  0   9.8
probe_wrapper.pl /
562.0   neha            1/14 10&#58;28   0+09&#58;10&#58;00 I  0   9.8
probe_wrapper.pl /
563.0   neha            1/14 10&#58;28   0+09&#58;18&#58;33 I  0   9.8
probe_wrapper.pl /
564.0   neha            1/14 10&#58;28   0+09&#58;31&#58;33 I  0   9.8
probe_wrapper.pl /
565.0   neha            1/14 10&#58;28   0+09&#58;30&#58;37 I  0   9.8
probe_wrapper.pl /
566.0   neha            1/14 10&#58;28   0+11&#58;04&#58;09 R  0   9.8  gratia-
script-cons
567.0   neha            1/14 10&#58;28   0+11&#58;05&#58;42 R  0   9.8  html-
consumer
568.0   neha            1/14 10&#58;28   0+00&#58;23&#58;45 I  0   9.8
rotate_html_files.

35 jobs; 33 idle, 2 running, 0 held
[root@fngp-osg ~]#

No jobs entered the condor devel queue. The ones that you see in
queue are from before when I tired to run probes under user &#34;neha&#34;

[root@fngp-osg ~]# grep Environment $VDT_LOCATION/osg-rsv/submissions/
consumers/html-consumer.sub
Environment     = PATH=/usr/bin&#58;/bin;PERL5LIB=/usr/local/vdt-1.8.1/
osg-rsv/bin/consumers;VDT_LOCATION=/usr/local/vdt-1.8.1
[root@fngp-osg ~]#
[root@fngp-osg ~]# grep Environment $VDT_LOCATION/osg-rsv/submissions/
consumers/html-consumer.sub
Environment     = PATH=/usr/bin&#58;/bin;PERL5LIB=/usr/local/vdt-1.8.1/
osg-rsv/bin/consumers;VDT_LOCATION=/usr/local/vdt-1.8.1
[root@fngp-osg ~]# which perl
/usr/local/vdt-1.8.1/vdt/bin/perl
[root@fngp-osg ~]# /usr/bin/perl -v

This is perl, v5.8.5 built for i386-linux-thread-multi

Copyright 1987-2004, Larry Wall

Perl may be copied only under the terms of either the Artistic
License or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using &#96;man perl&#39; or &#96;perldoc perl&#39;.  If you have access
to the
Internet, point your browser at <a href='http&#58;//www.perl.com/' target='_blank' rel='nofollow'>http&#58;//www.perl.com/</a>, the Perl Home
Page.

[root@fngp-osg ~]#

-Neha

On Jan 18, 2008, at 2&#58;52 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_872443708').click(function() {
            $('#detail_872443708').slideDown("normal");
            $('#show_872443708').hide();
            $('#hide_872443708').show();
        });
        $('#hide_872443708').click(function() {
            $('#detail_872443708').slideUp();
            $('#hide_872443708').hide();
            $('#show_872443708').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4527#1200689527'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-18T20:52:07+00:00">Jan 18, 2008 08:52 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1200689527">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Neha wrote on 2008-01-18&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; . . .</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I have no clue why this is not working.  checked that user &#34;rsvuser&#34;</font>
<font color='#7F7E6F'>&#62; is a valid unix user</font>

Hi Neha,

Thanks for all the info .. I think you&#39;ve done the config steps just fine.

Scot and I&#39;d asked you the following - can you please check on these, so
we can try to figure something out? See below - I&#39;ve copied n pasted our
questions again.

It&#39;s really hard to debug when we do not have access to your machine. Can
we get SSH access to the machine, perhaps using SSH keys, or worst case,
GSI-SSH access?

-----

Arvind had asked&#58;

Can you check what the permissions on this file are&#58;
$VDT_LOCATION/osg-rsv/bin/consumers/gratia-script-consumer

While you&#39;re at it, go ahead and send us the permissions on all the files
in&#58;
$VDT_LOCATION/osg-rsv/bin/consumers/
$VDT_LOCATION/osg-rsv/bin/probes/

Also, can you do the following and tell us what you get back?
. $VDT_LOCATION/vdt/etc/condor-devel-env.sh
condor_q

<div id='show_2044713592' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2044713592'>------

Scot had asked&#58;

Last time we saw this error, the issue was that Condor could not find
Perl, so it could not execute the script.  When the jobs are started, they
use a blank environment, so I had to add some extra info to the PATH, in
order to allow Condor to find perl.  Did Perl move?  Can it still be
found?

Run this command&#58;

grep Environment
$VDT_LOCATION/osg-rsv/submissions/consumers/html-consumer.sub

You&#39;ll get a result similar to this&#58;
Environment     =
PATH=/usr/bin&#58;/bin;PERL5LIB=/opt/osg-0.8/osg-rsv/bin/consumers;VDT_LOCATION=
/opt/osg-0.8

Check that Perl can be found at that PATH (i.e. /usr/bin/perl)

-------

Give us information on the above pieces of the puzzle, and we&#39;ll try to
get you fixed up.

Thanks,
Arvind
</div><script type='text/javascript'>
        $('#show_2044713592').click(function() {
            $('#detail_2044713592').slideDown("normal");
            $('#show_2044713592').hide();
            $('#hide_2044713592').show();
        });
        $('#hide_2044713592').click(function() {
            $('#detail_2044713592').slideUp();
            $('#hide_2044713592').hide();
            $('#show_2044713592').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4527#1200688267'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-18T20:31:07+00:00">Jan 18, 2008 08:31 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1200688267">&nbsp;</a></div><pre>As you know, I had this working before. But now it is no longer working.

The commands I run are as follows&#58;

[root@fngp-osg ~]# cp /tmp/x509up_u60158 /tmp/x509up_u42947
cp&#58; overwrite &#96;/tmp/x509up_u42947&#39;? y
[root@fngp-osg ~]# source /usr/local/vdt/setup.sh
[root@fngp-osg ~]# vdt-control --off osg-rsv
disabling init service osg-rsv... ok
[root@fngp-osg ~]# vdt-control --off condor-devel
disabling init service condor-devel... ok
[root@fngp-osg ~]#
[root@fngp-osg ~]# ls -hlt $VDT_LOCATION/osg-rsv/config/
total 12K
-rw-r--r--  1 root root 2.0K Jan 18 14&#58;20
fermigrid1.fnal.gov_metrics.conf
-rw-r--r--  1 root root 2.0K Jan 18 14&#58;20 fngp-osg.fnal.gov_metrics.conf
-rw-r--r--  1 root root 1.5K Jan 11 15&#58;30 sample_metrics.conf
[root@fngp-osg ~]#

[root@fngp-osg ~]# $VDT_LOCATION/vdt/setup/configure_osg_rsv --uri
&#34;fngp-osg.fnal.gov fermigrid1.fnal.gov &#34; --user rsvuser --proxy /tmp/
x509up_u42947 --init --server y --probe
s --gratia --verbose
[root@fngp-osg ~]#
[root@fngp-osg ~]# $VDT_LOCATION/vdt/setup/configure_gratia --probe
metric --report-to rsv.grid.iu.edu&#58;8880
[root@fngp-osg ~]#

[root@fngp-osg ~]# $VDT_LOCATION/vdt/setup/configure_osg_rsv --setup-
for-apache
Apache has already been configured for use with RSV.
Pages can be viewed at http&#58;//HOSTNAME&#58;8080/rsv
[root@fngp-osg ~]#
[root@fngp-osg ~]# vdt-control --on condor-devel
<div id='show_1105620730' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1105620730'>enabling init service condor-devel... ok
[root@fngp-osg ~]# vdt-control --on  osg-rsv
enabling init service osg-rsv...  ok
[root@fngp-osg ~]# $VDT_LOCATION/vdt/setup/configure_apache --server y
[root@fngp-osg ~]#

Next, I see errors in the probe log files

These are similar to
001 (540.000.000) 01/18 14&#58;25&#58;00 Job executing on host&#58;
&#60;131.225.167.42&#58;32506&#62;
...
021 (540.000.000) 01/18 14&#58;25&#58;00 Error from starter on
&#60;131.225.167.42&#58;32506&#62;&#58;
Failed to execute &#39;/usr/local/vdt-1.8.1/osg-rsv/bin/probes/
probe_wrapper.pl&#39; with arguments /usr/local/vdt-1.8.1/osg-rsv/bin/
probes/certificate-expiry-local-probe -m org.osg.local.httpcert-
expiry --verbose&#58; Permission denied
...
021 (540.000.000) 01/18 14&#58;25&#58;00 Error from starter on
&#60;131.225.167.42&#58;32506&#62;&#58;
Create_Process(/usr/local/vdt-1.8.1/osg-rsv/bin/probes/
probe_wrapper.pl,/usr/local/vdt-1.8.1/osg-rsv/bin/probes/certificate-
expiry-local-probe -m org.osg.local.httpcert-expiry --verbose, ...)
failed

The consumer logs have errors as below

/usr/local/vdt/osg-rsv/logs/consumers/html-consumer.log

001 (567.000.000) 01/18 14&#58;27&#58;57 Job executing on host&#58;
&#60;131.225.167.42&#58;33368&#62;
...
021 (567.000.000) 01/18 14&#58;27&#58;57 Error from starter on
&#60;131.225.167.42&#58;33368&#62;&#58;
Failed to execute &#39;/usr/local/vdt-1.8.1/osg-rsv/bin/
consumers/html-consumer&#39;&#58; Permission denied
...
021 (567.000.000) 01/18 14&#58;27&#58;57 Error from starter on
&#60;131.225.167.42&#58;33368&#62;&#58;
Create_Process(/usr/local/vdt-1.8.1/osg-rsv/bin/consumers/
html-consumer,, ...) failed
...
001 (567.000.000) 01/18 14&#58;28&#58;02 Job executing on host&#58;
&#60;131.225.167.42&#58;33386&#62;
...
021 (567.000.000) 01/18 14&#58;28&#58;02 Error from starter on
&#60;131.225.167.42&#58;33386&#62;&#58;
Failed to execute &#39;/usr/local/vdt-1.8.1/osg-rsv/bin/
consumers/html-consumer&#39;&#58; Permission denied
...
021 (567.000.000) 01/18 14&#58;28&#58;02 Error from starter on
&#60;131.225.167.42&#58;33386&#62;&#58;
Create_Process(/usr/local/vdt-1.8.1/osg-rsv/bin/consumers/
html-consumer,, ...) failed

I have no clue why this is not working.  checked that user &#34;rsvuser&#34;
is a valid unix user

[root@fngp-osg ~]# id rsvuser
uid=42947(rsvuser) gid=9873 groups=9873
[root@fngp-osg ~]#

What else can I try?

Thanks
-Neha

On Jan 17, 2008, at 12&#58;35 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1105620730').click(function() {
            $('#detail_1105620730').slideDown("normal");
            $('#show_1105620730').hide();
            $('#hide_1105620730').show();
        });
        $('#hide_1105620730').click(function() {
            $('#detail_1105620730').slideUp();
            $('#hide_1105620730').hide();
            $('#show_1105620730').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4527#1200594909'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-17T18:35:09+00:00">Jan 17, 2008 06:35 PM UTC</time> by <b>Thomas Wang</b><a class="anchor" name="1200594909">&nbsp;</a></div><pre>Neha,

Please reply to this email or add any additional updates to this ticket.
Thanks.
--tom

From&#58;   neha@....
Subject&#58; Re&#58; OSG-RSV probes not running again
Date&#58; January 17, 2008 11&#58;43&#58;35 AM EST
To&#58;   agopu@....
Cc&#58;   neha@...., rsv-dev@....

Hi

This problem still exists.
I will give it a try again later this afternoon, document my entire procedure and send you the details.

-Neha</pre></div><div class='update_description'><i onclick="document.location='4527#1200594816'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-17T18:33:36+00:00">Jan 17, 2008 06:33 PM UTC</time> by <b>Thomas Wang</b><a class="anchor" name="1200594816">&nbsp;</a></div><pre>From&#58;   agopu@....
Subject&#58; Re&#58; OSG-RSV probes not running again
Date&#58; January 17, 2008 11&#58;48&#58;56 AM EST
To&#58;   neha@....
Cc&#58;   rsv-dev@....

Neha,

Do you have any updates on this? Did you manage to resolve the problem you
were having with RSV on this resource? Scot also had some suggestions
(copied and pasted below) - did you try those?

Thanks,
Arvind</pre></div><div class='update_description'><i onclick="document.location='4527#1200594723'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-17T18:32:03+00:00">Jan 17, 2008 06:32 PM UTC</time> by <b>Thomas Wang</b><a class="anchor" name="1200594723">&nbsp;</a></div><pre>From&#58; 	  kronenfe@....
Subject&#58; 	Re&#58; OSG-RSV probes not running again
Date&#58; 	January 14, 2008 8&#58;47&#58;55 AM EST
To&#58; 	  neha@...., agopu@...., rsv-dev@...., ttwang@....

On Jan 11, 2008 4&#58;00 PM, Neha Sharma &#60;neha@....&#62; wrote&#58;
Create_Process(/usr/local/vdt-1.8.1/osg-rsv/bin/consumers/gratia-script-consumer,,
...) failed
...
001 (326.000.000) 01/11 15&#58;56&#58;43 Job executing on host&#58;
&#60;131.225.167.42&#58;32127&#62;
...
021 (326.000.000) 01/11 15&#58;56&#58;43 Error from starter on
&#60;131.225.167.42&#58;32127&#62;&#58;
Failed to execute
&#39;/usr/local/vdt-1.8.1/osg-rsv/bin/consumers/gratia-script-consumer&#39;&#58;
Permission denied

Last time we saw this error, the issue was that Condor could not find
Perl, so it could not execute the script.  When the jobs are started,
they use a blank environment, so I had to add some extra info to the
PATH, in order to allow Condor to find perl.  Did Perl move?  Can it
still be found?

Run this command&#58;
grep Environment $VDT_LOCATION/osg-rsv/submissions/consumers/html-consumer.sub

You&#39;ll get a result similar to this&#58;
Environment     =
PATH=/usr/bin&#58;/bin;PERL5LIB=/opt/osg-0.8/osg-rsv/bin/consumers;VDT_LOCATION=/opt/osg-0.8

Check that Perl can be found at that PATH (i.e. /usr/bin/perl)

From previous email that Scot sent, I tried to run the below command by hand
under both users, but the command seems to never finish..
<div id='show_20187181' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_20187181'>
The two consumer jobs are long running processes that will not return
at the command line.  If you run the command, and they don&#39;t print an
error (and don&#39;t return to the command line), they are probably
running correctly.

Are the probes running?  You can check the probe log files or the
timestamps on the probe output files to determine this.

Thanks,
Scot
</div><script type='text/javascript'>
        $('#show_20187181').click(function() {
            $('#detail_20187181').slideDown("normal");
            $('#show_20187181').hide();
            $('#hide_20187181').show();
        });
        $('#hide_20187181').click(function() {
            $('#detail_20187181').slideUp();
            $('#hide_20187181').hide();
            $('#show_20187181').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4527#1200594701'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-17T18:31:41+00:00">Jan 17, 2008 06:31 PM UTC</time> by <b>Thomas Wang</b><a class="anchor" name="1200594701">&nbsp;</a></div><pre>From&#58; 	  agopu@....
Subject&#58; 	Re&#58; OSG-RSV probes not running again
Date&#58; 	January 12, 2008 11&#58;38&#58;01 AM EST
To&#58; 	  neha@....
Cc&#58; 	  rsv-dev@....

Hi Neha,

Can you check what the permissions on this file are&#58;
$VDT_LOCATION/osg-rsv/bin/consumers/gratia-script-consumer

While you&#39;re at it, go ahead and send us the permissions on all the files
in&#58;
$VDT_LOCATION/osg-rsv/bin/consumers/
$VDT_LOCATION/osg-rsv/bin/probes/

Also, can you do the following and tell us what you get back?

. $VDT_LOCATION/vdt/etc/condor-devel-env.sh
condor_q

Let&#39;s see what we find from that, and we&#39;ll take it from there.

Thanks for contacting us - I was getting ready, myself, to contact you,
and a couple of other OSG admins, whose resources have stopped reporting
RSV records.

Cheers,
Arvind</pre></div><div class='update_description'><i onclick="document.location='4527#1200594681'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-17T18:31:21+00:00">Jan 17, 2008 06:31 PM UTC</time> by <b>Thomas Wang</b><a class="anchor" name="1200594681">&nbsp;</a></div><pre>Hi Thomas

On Jan 11, 2008, at 4&#58;41 PM, Thomas Wang wrote&#58;

Neha,

Which unix user account are you using to run your probes (&#34;neha&#34; or &#34;rsvuser&#34;).

rsvuser

Do you have a valid proxy for the account that is running RSV?

[root@fngp-osg ~]# id rsvuser
uid=42947(rsvuser) gid=9873 groups=9873
[root@fngp-osg ~]# ls -hlt /tmp/x509up_u42947
-rw-------  1 rsvuser 9873 3.6K Jan 11 11&#58;22 /tmp/x509up_u42947
[root@fngp-osg ~]#

I checked with openssl that this proxy is valid.

From the errors you have provided..  is this coming from $VDT_LOCATION/osg-rsv/logs/consumers/gratia-
script-consumer.out
Can you send us a copy of this logfile?

No. This is coming from $VDT_LOCATION/osg-rsv/logs/consumers/gratia-script-consumer.log .
The file is pretty big.

I have copied part of it in attached file.</pre></div><div class='update_description'><i onclick="document.location='4527#1200594645'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-17T18:30:45+00:00">Jan 17, 2008 06:30 PM UTC</time> by <b>Thomas Wang</b><a class="anchor" name="1200594645">&nbsp;</a></div><pre>From&#58; 	  ttwang@....
Subject&#58; 	Re&#58; OSG-RSV probes not running again
Date&#58; 	January 11, 2008 5&#58;41&#58;05 PM EST
To&#58; 	  neha@....
Cc&#58; 	  agopu@...., rsv-dev@....

Neha,

Which unix user account are you using to run your probes (&#34;neha&#34; or
&#34;rsvuser&#34;).
Do you have a valid proxy for the account that is running RSV?
From the errors you have provided..  is this coming from
$VDT_LOCATION/osg-rsv/logs/consumers/gratia-script-consumer.out
Can you send us a copy of this logfile?

In the meantime, also please make sure you have restarted everything
properly..
Please reference the below guide to restart RSV
<a href='http&#58;//rsv.grid.iu.edu/documentation/vdt-quick-install.html' target='_blank' rel='nofollow'>http&#58;//rsv.grid.iu.edu/documentation/vdt-quick-install.html</a>

Looking at your html consumer page, it looks like things stopped
running on Dec 14th..
In you case, i see you are monitoring 2 resources (fngp-osg.fnal.gov,
fermigrid1.fnal.gov)

1) Ensure you have your metrics.conf files
$VDT_LOCATION/osg-rsv/config/fngp-osg.fnal.gov_metrics.conf
$VDT_LOCATION/osg-rsv/config/fermigrid1.fnal.gov_metrics.conf

2) Decide which user to run RSV under (neha or rsvuser)
Must be a valid UNIX account with a valid Proxy.

3) Shut down everything properly with&#58;
vdt-control --off osg-rsv

<div id='show_1103644048' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1103644048'>4) initialize things&#58;
$VDT_LOCATION/vdt/setup/configure_osg_rsv
--uri &#34;fngp-osg.fnal.gov fermigrid1.fnal.gov &#34; &#92;
--user &#60;rsvuser/neha&#62; --proxy /tmp/x509up_u&#60;UID&#62; &#92;
--init --server y &#92;
--probes --gratia --verbose

5) define gratia upload (using rsv.grid.iu.edu since you resources
are Prod)&#58;
$VDT_LOCATION/vdt/setup/configure_gratia --probe metric &#92;
--report-to rsv.grid.iu.edu&#58;8880

6) enable vdt apache
$VDT_LOCATION/vdt/setup/configure_osg_rsv --setup-for-apache

7) startup!
vdt-control --on condor-devel
vdt-control --on  osg-rsv
$VDT_LOCATION/vdt/setup/configure_apache --server y
vdt-control --on  apache

8) check if page if consumer being updated here&#58;
<a href='https&#58;//fngp-osg.fnal.gov&#58;8443/rsv/' target='_blank' rel='nofollow'>https&#58;//fngp-osg.fnal.gov&#58;8443/rsv/</a>

as well as tail the gratia consumer logs&#58;
$VDT_LOCATION/osg-rsv/logs/consumers/gratia-script-consumer.out

You should see entries similar to this&#58;
08-20-2007 16&#58;35&#58;26 - Executing script &#39;/usr/local/grid/ . . .
record.py&#39; OK

Let me know if this helps.
Thanks.

regards,
Tom
</div><script type='text/javascript'>
        $('#show_1103644048').click(function() {
            $('#detail_1103644048').slideDown("normal");
            $('#show_1103644048').hide();
            $('#hide_1103644048').show();
        });
        $('#hide_1103644048').click(function() {
            $('#detail_1103644048').slideUp();
            $('#hide_1103644048').hide();
            $('#show_1103644048').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4527#1200594544'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-17T18:29:04+00:00">Jan 17, 2008 06:29 PM UTC</time> by <b>Thomas Wang</b><a class="anchor" name="1200594544">&nbsp;</a></div><pre>From&#58;   neha@....
Subject&#58; OSG-RSV probes not running again
Date&#58; January 11, 2008 5&#58;00&#58;53 PM EST
To&#58;   agopu@....
Cc&#58;   rsv-dev@...., neha@....

Hi Arvind

I noticed today that osg-rsv probes stopped running on fngp-osg since Dec14.
I tried to reconfigure/restart the probes, but they are failing to start

The error message I see is&#58;
Create_Process(/usr/local/vdt-1.8.1/osg-rsv/bin/consumers/gratia-script-consumer,, ...) failed
...
001 (326.000.000) 01/11 15&#58;56&#58;43 Job executing on host&#58; &#60;131.225.167.42&#58;32127&#62;
...
021 (326.000.000) 01/11 15&#58;56&#58;43 Error from starter on &#60;131.225.167.42&#58;32127&#62;&#58;
Failed to execute &#39;/usr/local/vdt-1.8.1/osg-rsv/bin/consumers/gratia-script-consumer&#39;&#58; Permission denied
...
021 (326.000.000) 01/11 15&#58;56&#58;43 Error from starter on &#60;131.225.167.42&#58;32127&#62;&#58;
Create_Process(/usr/local/vdt-1.8.1/osg-rsv/bin/consumers/gratia-script-consumer,, ...) failed
...
[root@fngp-osg ~]#

Last time I saw this error, it was the user under which rsv probes were running was not a valid unix user. Now, I
am trying to run these probes under user &#34;neha&#34; and &#34;rsvuser&#34; both of which are valid users and probes wont
run.

From previous email that Scot sent, I tried to run the below command by hand under both users, but the
command seems to never finish..

I have gone through this process before, so I don&#39;t think I missed anything or did anything wrong.

Could you hep debug this?

<div id='show_1509497776' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1509497776'>Thanks
- Neha
</div><script type='text/javascript'>
        $('#show_1509497776').click(function() {
            $('#detail_1509497776').slideDown("normal");
            $('#show_1509497776').hide();
            $('#hide_1509497776').show();
        });
        $('#hide_1509497776').click(function() {
            $('#detail_1509497776').slideUp();
            $('#hide_1509497776').hide();
            $('#show_1509497776').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4527#1200594394'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-17T18:26:34+00:00">Jan 17, 2008 06:26 PM UTC</time> by <b>Thomas Wang</b><a class="anchor" name="1200594394">&nbsp;</a></div><pre>Creating ticket to track existing email thread between FNAL_GPFARM admin (Neha) and RSV team (GOC)

OSG-RSV probes no longer running at FNAL_GPFARM
Also, FNAL_GPFARM has stopped uploading probes to the RSV Collector&#58;
FNAL_GPFARM (fngp-osg.fnal.gov) - [Nothing since 2008-01-11]

Will continue to update ticket with further email from past threads.
--tom</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F4527">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
