<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[28309] FIU Gratia Accounting data</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=28309" method="post">
<div class="page-header">
    <h3><span class="muted">28309</span> / FIU Gratia Accounting data</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Mengxing Cheng</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Mengxing Cheng</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">GRATIA Ops</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Waiting for user answer</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-02-12</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000656394">INC000000656394</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Tim Cartwright <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Carl Edquist <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/28309", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='28309#1455306934'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-12T19:55:34+00:00">Feb 12, 2016 07:55 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1455306934">&nbsp;</a></div><pre>I&#39;ve created <a href='https&#58;//jira.opensciencegrid.org/browse/GRATIA-185' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/GRATIA-185</a> to track this issue.

Carl</pre></div><div class='update_description'><i onclick="document.location='28309#1455220951'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-11T20:02:31+00:00">Feb 11, 2016 08:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1455220951">&nbsp;</a></div><pre>[Permanent Solution]
See details in ticket.
-- by  at Thu Feb 11 20&#58;01&#58;58 UTC 2016

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000656394' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000656394</a></pre></div><div class='update_description'><i onclick="document.location='28309#1455219592'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-11T19:39:52+00:00">Feb 11, 2016 07:39 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1455219592">&nbsp;</a></div><pre>Hi,

We have used a brute force for now and have modified condor_ce.py code to name file &#34;gratia_certinfo_lsf_jobid&#34;.  The probe has started to report correctly. I am opening a new Jira ticket and we will need information from HTCondor team to understand how the format of classad GridJobId has been changed for various LRMs.

This ticket could be closed.

Thanks,
Tanya</pre></div><div class='update_description'><i onclick="document.location='28309#1455203472'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-11T15:11:12+00:00">Feb 11, 2016 03:11 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1455203472">&nbsp;</a></div><pre>Hi,

Don’t do it. I would rather modify  gratia common lib.

Tanya
On Feb 11, 2016, at 9&#58;07 AM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='28309#1455203238'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-11T15:07:18+00:00">Feb 11, 2016 03:07 PM UTC</time><a class="anchor" name="1455203238">&nbsp;</a></div><pre>Tanya, though I can easily write a cron bash to run &#34;rename _batch_ _lsf_ *_batch_*&#34; in /var/lib/gratia/data to convert file names, it would be more graceful if htcondor-ce properly names the certinfo files.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1455167435'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-11T05:10:35+00:00">Feb 11, 2016 05:10 AM UTC</time><a class="anchor" name="1455167435">&nbsp;</a></div><pre>Let me know if you learn from Tim how to configure htcondor-ce to name the certinfo as gratia_certinfo_lsf_jobid  rather than gratia_certinfo_batch_jobid. Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1455162322'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-11T03:45:22+00:00">Feb 11, 2016 03:45 AM UTC</time><a class="anchor" name="1455162322">&nbsp;</a></div><pre>Tanya, I think it works now! I have turned on the gratia cron and let&#39;s see.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1455146113'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-10T23:15:13+00:00">Feb 10, 2016 11:15 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1455146113">&nbsp;</a></div><pre>Hi,

The problem is that the name of your certinfo files are gratia_certinfo_batch_jobid and not gratia_certinfo_pbs_jobid. The current search works the following way (it is done to avoid long search for an appropriate file see <a href='https&#58;//jira.opensciencegrid.org/browse/GRATIA-111' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/GRATIA-111</a>).&#58;

1. look for  /var/lib/gratia/data/gratia_certinfo_LRMS_jobid (pbs in your case)
2. if found send the record
3. if not found do glob search - if found send assume that file name is default name for  LRMS
if not found disable globbing

So this happens in your case.
So, if you rename all you gratia_certinfo_batch_jobid files in gratia_certinfo_pbs_jobd;
copy all the files from quarantine to /var/lib/gratia/tmp/urCollector/

and rerun the command manually , you should be able to send all your records to gratia.

No, you need to find a place to change gratia_certinfo_batch to gratia_certinfo_pbs
I need to figure where it should be done (it should something in gatekeeper config).

Thanks,
Tanya</pre></div><div class='update_description'><i onclick="document.location='28309#1455133546'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-10T19:45:46+00:00">Feb 10, 2016 07:45 PM UTC</time><a class="anchor" name="1455133546">&nbsp;</a></div><pre>Let me know when you figure out how to fix it. Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1455132551'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-10T19:29:11+00:00">Feb 10, 2016 07:29 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1455132551">&nbsp;</a></div><pre>Hi,

It is a good progress. I will need to debug probe further and see if I can fix the issue and give you  a temporary fix.

Thanks,

Tanya</pre></div><div class='update_description'><i onclick="document.location='28309#1455131626'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-10T19:13:46+00:00">Feb 10, 2016 07:13 PM UTC</time><a class="anchor" name="1455131626">&nbsp;</a></div><pre>Tanya, do you have time look at this today? Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1455117789'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-10T15:23:09+00:00">Feb 10, 2016 03:23 PM UTC</time> by <b>mencheng@....</b><a class="anchor" name="1455117789">&nbsp;</a></div><pre>Dear Tanya,

I did a few tests for multiple records and here is what happened to me.

If all records in /var/lib/gratia/tmp/urCollector/ have corresponding certinfo in /var/lib/gratia/data, pbs-lsf_meter.pl processed all the records and sent them to OSG gratia server. However, pbs-lsf_meter.pl stopped at the record without certinfo and left unprocessed all the other records including even those with valid certinfo. The attachment includes 4 records and 2 certinfos and you can test if you have the same problem or not.

At our site, many jobs submitted by local user certainly have no certinfo but they are still collected by urCollector.pl. So, pbs-lsf_meter.pl stops at any of records by local users.

Best Regards

Mengxing

Mengxing Cheng
Ph.D in Physics
High-Performance Computing System Administrator
Florida International University
Division of Information Technology
Office&#58; PC417
Phone&#58; (305) 348-6830

Learn the FIU Panther Cluster at the IRCC webpage

________________________________
From&#58; Mengxing Cheng
Sent&#58; Tuesday, February 09, 2016 11&#58;46 PM
To&#58; osg@....
Subject&#58; Re&#58; Open Science Grid&#58; FIU Gratia Accounting data ISSUE=28309 PROJ=71

Great! I will look at it tomorrow for cases of multiple records.

Best Regards

Mengxing

Mengxing Cheng
<div id='show_1914196040' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1914196040'>Ph.D in Physics
High-Performance Computing System Administrator
Florida International University
Division of Information Technology
Office&#58; PC417
Phone&#58; (305) 348-6830

Learn the FIU Panther Cluster at the IRCC webpage
</div><script type='text/javascript'>
        $('#show_1914196040').click(function() {
            $('#detail_1914196040').slideDown("normal");
            $('#show_1914196040').hide();
            $('#hide_1914196040').show();
        });
        $('#hide_1914196040').click(function() {
            $('#detail_1914196040').slideUp();
            $('#hide_1914196040').hide();
            $('#show_1914196040').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28309#1455079629'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-10T04:47:09+00:00">Feb 10, 2016 04:47 AM UTC</time> by <b>mencheng@....</b><a class="anchor" name="1455079629">&nbsp;</a></div><pre>Great! I will look at it tomorrow for cases of multiple records.

Best Regards

Mengxing

Mengxing Cheng
Ph.D in Physics
High-Performance Computing System Administrator
Florida International University
Division of Information Technology
Office&#58; PC417
Phone&#58; (305) 348-6830

Learn the FIU Panther Cluster at the IRCC webpage</pre></div><div class='update_description'><i onclick="document.location='28309#1455058170'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-09T22:49:30+00:00">Feb 9, 2016 10:49 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1455058170">&nbsp;</a></div><pre>I&#39;ve received one record sent manually by Mengxing. We will need to debug further why it was not working before.</pre></div><div class='update_description'><i onclick="document.location='28309#1455044392'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-09T18:59:52+00:00">Feb 9, 2016 06:59 PM UTC</time><a class="anchor" name="1455044392">&nbsp;</a></div><pre>That is understandable because I stopped gratia probe as you suggested since then. But do you know why records like 532723 were not processed/sent and continue staying local?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1455039721'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-09T17:42:01+00:00">Feb 9, 2016 05:42 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1455039721">&nbsp;</a></div><pre>Hi,
The last time you send any data was  2016-01-29 14&#58;12&#58;42 UTC. I see in the log that it is purging old quarantined records  and doesn&#39;t have any new record to send.
Do you have any idea what you have changed on 1/29?
I will look at the log more. Also, is there any chance I can get access to this machine (unfortunately i need to be root in order to debug anything).
Thanks,
Tanya</pre></div><div class='update_description'><i onclick="document.location='28309#1455038229'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-09T17:17:09+00:00">Feb 9, 2016 05:17 PM UTC</time> by <b>mencheng@....</b><a class="anchor" name="1455038229">&nbsp;</a></div><pre>Tanya, see attachedments for

/etc/gratia/pbs-lsf/ProbeConfig

and

/etc/gratia/pbs-lsf/urCollector.conf

if you need them.

Best Regards

Mengxing

Mengxing Cheng
Ph.D in Physics
High-Performance Computing System Administrator
Florida International University
Division of Information Technology
Office&#58; PC417
Phone&#58; (305) 348-6830

Learn the FIU Panther Cluster at the IRCC webpage</pre></div><div class='update_description'><i onclick="document.location='28309#1455037612'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-09T17:06:52+00:00">Feb 9, 2016 05:06 PM UTC</time><a class="anchor" name="1455037612">&nbsp;</a></div><pre>Tanya, our gratia version is gratia-probe-pbs-lsf-1.14.2-6.osg33.el6.x86_64. I have sent you via email the 2016-02-09.log generated by manual execution of pbs-lsf_meter.pl with DebugLevel and  LogLevel equal to &#34;5&#34;.

I don&#39;t see 532723 in quarantine and it stays in /var/lib/gratia/tmp/urCollector/ and its certInfo in /var/lib/gratia/data/, but it is not processed by pbs-lsf_meter.pl.

[root@hpcosgce pbs-lsf]# ls -al /var/lib/gratia/tmp/urCollector/lsf_532723_1453970776
-rw-r--r-- 1 root root 1476 Jan 28 03&#58;50 /var/lib/gratia/tmp/urCollector/lsf_532723_1453970776
[root@hpcosgce pbs-lsf]# ls -al /var/lib/gratia/data/gratia_certinfo_batch_532723
-rw------- 1 root root 344 Jan 28 00&#58;44 /var/lib/gratia/data/gratia_certinfo_batch_532723

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1455036973'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-09T16:56:13+00:00">Feb 9, 2016 04:56 PM UTC</time> by <b>mencheng@....</b><a class="anchor" name="1455036973">&nbsp;</a></div><pre>Tanya, see attachment for the  gratia 2016-02-09.log

Best Regards

Mengxing

Mengxing Cheng
Ph.D in Physics
High-Performance Computing System Administrator
Florida International University
Division of Information Technology
Office&#58; PC417
Phone&#58; (305) 348-6830

Learn the FIU Panther Cluster at the IRCC webpage</pre></div><div class='update_description'><i onclick="document.location='28309#1455035838'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-09T16:37:18+00:00">Feb 9, 2016 04:37 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1455035838">&nbsp;</a></div><pre>Hi,
I&#39;ve sent you suggestions (see below). Increase debug and log level, and send me a log after probe runs.
Tanya</pre></div><div class='update_description'><i onclick="document.location='28309#1455035541'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-09T16:32:21+00:00">Feb 9, 2016 04:32 PM UTC</time><a class="anchor" name="1455035541">&nbsp;</a></div><pre>Tanya, any suggestion what to do? Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1455029410'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-09T14:50:10+00:00">Feb 9, 2016 02:50 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1455029410">&nbsp;</a></div><pre>Hi,

I agree that it is important to provide an accurate information about resource usage on your site. I don&#39;t think you told us what version you are running.

If it is older version than you probably need to upgrade but I don&#39;t see a reason in reinstalling the software.

When you ran pbs-lsf_meter.pl manually - what did you see in the log? Was the record quarantined? We can also change debugging level in the ProbeConfig and see if you can get more info.

Change

LogLevel=&#34;5&#34;

DebugLevel=&#34;5&#34;

and send me the gratia log file (/var/log/gratia/2016-02-09.log) next time probe runs.

Thanks,

Tanya</pre></div><div class='update_description'><i onclick="document.location='28309#1455028764'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-09T14:39:24+00:00">Feb 9, 2016 02:39 PM UTC</time><a class="anchor" name="1455028764">&nbsp;</a></div><pre>Tanya, I hope you had a great trip. I haven&#39;t yet reinstalled the gratia because I was off yesterday for Chinese New Year.

As you can read from the previous thread, there are many records that are NOT sent to gratia web and 532723 is one of them. I followed your suggestion and run pbs-lsf_meter.pl manually but neither the record was sent nor it was removed from /var/lib/gratia/tmp/urCollector/. So I wonder if a reinstallation will solve the problem. But if reinstall is not necessary, can you continue helping me to resolve this issue?

[root@hpcosgce ~]# ls -al /var/lib/gratia/tmp/urCollector/lsf_532723_1453970776
-rw-r--r-- 1 root root 1476 Jan 28 03&#58;50 /var/lib/gratia/tmp/urCollector/lsf_532723_1453970776
[root@hpcosgce ~]# date
Tue Feb  9 09&#58;31&#58;44 EST 2016

It is important to get gratia reporting our effort that the university administrator can see. If gratia cannot show our effort accordingly, it is hard to convince them to contribute more resource.
Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454966584'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-08T21:23:04+00:00">Feb 8, 2016 09:23 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1454966584">&nbsp;</a></div><pre>Hi,
Is there any progress?
I am wondering&#58;
1. why you want to reinstall probe? what version you are using? if it is old why not to upgrade?
2. did you identified the record that should be sent to gratia but they are not sent and not quarantined?

Thanks,
Tanya</pre></div><div class='update_description'><i onclick="document.location='28309#1454619442'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-04T20:57:22+00:00">Feb 4, 2016 08:57 PM UTC</time><a class="anchor" name="1454619442">&nbsp;</a></div><pre>Carl, not yet. I am swamped by something else. I will do it as soon as possible. Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454618783'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-04T20:46:23+00:00">Feb 4, 2016 08:46 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1454618783">&nbsp;</a></div><pre>Hi Mengxing,

Did you reinstall the gratia probe rpms?  Again, I think gratia-probe-pbs-lsf is the most relevant, but the only other one that also gets used is gratia-probe-common.

Carl</pre></div><div class='update_description'><i onclick="document.location='28309#1454519679'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-03T17:14:39+00:00">Feb 3, 2016 05:14 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1454519679">&nbsp;</a></div><pre>If you want to reinstall the gratia rpms, gratia-probe-pbs-lsf is the most relevant, but you could do it for all the ones currently installed; &#34;rpm -qa gratia-probe&#92;*&#34; will give the list.

Carl</pre></div><div class='update_description'><i onclick="document.location='28309#1454512416'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-03T15:13:36+00:00">Feb 3, 2016 03:13 PM UTC</time><a class="anchor" name="1454512416">&nbsp;</a></div><pre>Carl, 307722 is a job submitted by our local user rather than a OSG job because the submission client is our local login machine u01.fiu.edu instead of OSG CE hpcosgce.fiu.edu . This record should be not sent.

I want reinstall or upgrade the gratia rpm packages. please tell me what packages are relevant. Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454455671'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-02T23:27:51+00:00">Feb 2, 2016 11:27 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1454455671">&nbsp;</a></div><pre>It seems like the main issue is the jobs getting quarantined due to unknown or null VOName&#58;

15&#58;35&#58;46 EST Gratia&#58; xmlFilename&#58; /var/lib/gratia/tmp/urCollector/lsf_307722_1427660024
15&#58;35&#58;46 EST Gratia&#58; ERROR&#58; unable to find valid certinfo file for job 307722
15&#58;35&#58;46 EST Gratia&#58; Info&#58; suppressing record with GlobalJobId u01.fiu.edu&#58;307722_1427660024 due to unknown or null VOName, will be quarantined in /var/lib/gratia/data/quarantine
15&#58;35&#58;46 EST Gratia&#58; No unsuppressed usage records in /var/lib/gratia/tmp/urCollector/lsf_307722_1427660024&#58; not sending

In the ProbeConfig, I think you can disable the quarantining, otherwise I forget where we can add VO names to avoid them getting quarantined... Marco, do you know off hand how to configure this?

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='28309#1454422144'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-02T14:09:04+00:00">Feb 2, 2016 02:09 PM UTC</time><a class="anchor" name="1454422144">&nbsp;</a></div><pre>Good morning, Carl. Do you have suggestion what to do? Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454373458'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-02T00:37:38+00:00">Feb 2, 2016 12:37 AM UTC</time><a class="anchor" name="1454373458">&nbsp;</a></div><pre>Hi Carl,

Do you have any update after looking at the log?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='28309#1454340007'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-01T15:20:07+00:00">Feb 1, 2016 03:20 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1454340007">&nbsp;</a></div><pre>Hi Mengxing,

I got to look at your log only briefly on Friday, but not enough to uncover anything.  I plan to take a closer look today, and I&#39;ll comment further.

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='28309#1454339740'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-01T15:15:40+00:00">Feb 1, 2016 03:15 PM UTC</time><a class="anchor" name="1454339740">&nbsp;</a></div><pre>Carl, Good morning!

Have you been able to find anything helpful in the uploaded gratia log file 01-29-2016.log. I look at it myself and went through those message during pbs-lsf_meter.pl was running from 15&#58;30pm but find nothing else than a lot of error like
15&#58;30&#58;41 EST Gratia&#58; xmlFilename&#58; /var/lib/gratia/tmp/urCollector/lsf_476981_1450214733
15&#58;30&#58;41 EST Gratia&#58; ERROR&#58; unable to find valid certinfo file for job 476981. Globbing disabled.
15&#58;30&#58;41 EST Gratia&#58; Info&#58; suppressing record with GlobalJobId u01.fiu.edu&#58;476981_1450214678 due to unknown or null VOName, will be quarantined in /var/lib/gratia/data/quarantine
15&#58;30&#58;41 EST Gratia&#58; No unsuppressed usage records in /var/lib/gratia/tmp/urCollector/lsf_476981_1450214733&#58; not sending

According to Tanya, her manually run of pbs-lsf_meter.pl processed the record of example job  532723,
&#34;Hi,
I&#39;ve put your  532723 record in /var/lib/gratia/tmp/urCollector, cert info in  /var/lib/gratia/data and ran the command (/usr/share/gratia/pbs-lsf/pbs-lsf_meter.pl)  gratia probe is using to take data from urCollector, combine it with cert info and send to gratia. It generated a successful record &#58;&#34;

but I don&#39;t see any message about the job in my log and the record and certinfo still left over.

[root@hpcosgce ~]# ls -al /var/lib/gratia/tmp/urCollector/lsf_532723_1453970776
-rw-r--r-- 1 root root 1476 Jan 28 03&#58;50 /var/lib/gratia/tmp/urCollector/lsf_532723_1453970776

[root@hpcosgce ~]# ls -al /var/lib/gratia/data/gratia_certinfo_batch_532723
-rw------- 1 root root 344 Jan 28 00&#58;44 /var/lib/gratia/data/gratia_certinfo_batch_532723

I am thinking to reinstall/upgrade the gratia packages. Please advise. Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454100670'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T20:51:10+00:00">Jan 29, 2016 08:51 PM UTC</time> by <b>mencheng@....</b><a class="anchor" name="1454100670">&nbsp;</a></div><pre>See attached for gratia log file including message during manual execution of pbs-lsf_metric.pl.

.

Best Regards

Mengxing

Mengxing Cheng
Ph.D in Physics
High-Performance Computing System Administrator
Florida International University
Division of Information Technology
Office&#58; PC417
Phone&#58; (305) 348-6830

Learn the FIU Panther Cluster at the IRCC webpage</pre></div><div class='update_description'><i onclick="document.location='28309#1454100237'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T20:43:57+00:00">Jan 29, 2016 08:43 PM UTC</time><a class="anchor" name="1454100237">&nbsp;</a></div><pre>Carl, it is done. Seems to me that files in /var/lib/gratia/tmp/urCollector/ are not removed, only outdated certinfo files in /var/lib/gratia/data/ and quarantine files in /var/lib/gratia/data/quarantine/ were removed. These are the message at the end and please check on your side how many records received. Thank you! I will send you the log file in email.

15&#58;35&#58;47 EST Gratia&#58; End of execution summary&#58; new records sent successfully&#58; 0
15&#58;35&#58;47 EST Gratia&#58;                           new records suppressed&#58; 36650
15&#58;35&#58;47 EST Gratia&#58;                           new records failed&#58; 0
15&#58;35&#58;47 EST Gratia&#58;                           records reprocessed successfully&#58; 0
15&#58;35&#58;47 EST Gratia&#58;                           reprocessed records failed&#58; 0
15&#58;35&#58;47 EST Gratia&#58;                           handshake records sent successfully&#58; 1
15&#58;35&#58;47 EST Gratia&#58;                           handshake records failed&#58; 0
15&#58;35&#58;47 EST Gratia&#58;                           bundle of records sent successfully&#58; 1
15&#58;35&#58;47 EST Gratia&#58;                           bundle of records failed&#58; 0
15&#58;35&#58;47 EST Gratia&#58;                           outstanding records&#58; 0
15&#58;35&#58;47 EST Gratia&#58;                           outstanding staged records&#58; 0
15&#58;35&#58;47 EST Gratia&#58;                           outstanding records tar files&#58; 0
15&#58;35&#58;47 EST Gratia&#58; End-of-execution disconnect ...

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454099528'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T20:32:08+00:00">Jan 29, 2016 08:32 PM UTC</time><a class="anchor" name="1454099528">&nbsp;</a></div><pre>Yep, it runs in the directory /usr/share/gratia/pbs-lsf/. I will let you know when it finishes. Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454093640'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T18:54:00+00:00">Jan 29, 2016 06:54 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1454093640">&nbsp;</a></div><pre>Ok, I think it needs to be run from the /usr/share/gratia/pbs-lsf/ directory, or else if you run /usr/share/gratia/pbs-lsf/pbs-lsf_meter.cron.sh directly like cron does (as opposed to the .pl script) then it should cd into that directory for you first.

Carl</pre></div><div class='update_description'><i onclick="document.location='28309#1454092492'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T18:34:52+00:00">Jan 29, 2016 06:34 PM UTC</time><a class="anchor" name="1454092492">&nbsp;</a></div><pre>I meant I tried to put ProbeConfig as a input argument of pbs-lsf_meter.pl but it failed as well.

[root@hpcosgce ~]# /usr/share/gratia/pbs-lsf/pbs-lsf_meter.pl /etc/gratia/pbs-lsf/ProbeConfig
Traceback (most recent call last)&#58;
File &#34;/usr/share/gratia/pbs-lsf/pbs-lsf&#34;, line 16, in &#60;module&#62;
Gratia.Initialize()
File &#34;/usr/lib/python2.6/site-packages/gratia/common/GratiaCore.py&#34;, line 104, in Initialize
config.Config = probe_config.ProbeConfiguration(customConfig)
File &#34;/usr/lib/python2.6/site-packages/gratia/common/probe_config.py&#34;, line 56, in __init__
raise utils.InternalError(&#34;Error&#58; configuration file %s doesn&#39;t exist&#34; % (customConfig,))
gratia.common.utils.InternalError&#58; Error&#58; configuration file ProbeConfig doesn&#39;t exist

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454092433'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T18:33:53+00:00">Jan 29, 2016 06:33 PM UTC</time><a class="anchor" name="1454092433">&nbsp;</a></div><pre>Yes, it does.

[root@hpcosgce ~]# ls -al /etc/gratia/pbs-lsf/ProbeConfig
-rw-r--r-- 1 root root 2622 Nov 10 12&#58;26 /etc/gratia/pbs-lsf/ProbeConfig

I noticed that error and even tried but also failed.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454087710'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T17:15:10+00:00">Jan 29, 2016 05:15 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1454087710">&nbsp;</a></div><pre>Thanks Tanya for the help with this!

Mengxing,

Can you verify that /etc/gratia/pbs-lsf/ProbeConfig exists?  (&#34;ls -la /etc/gratia/pbs-lsf/&#34;)

I&#39;m not sure why it wouldn&#39;t, but that&#39;s what the error message seems to be saying&#58;

<font color='#7F7E6F'>&#62; gratia.common.utils.InternalError&#58; Error&#58; configuration file ProbeConfig doesn&#39;t exist</font>

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='28309#1454084792'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T16:26:32+00:00">Jan 29, 2016 04:26 PM UTC</time><a class="anchor" name="1454084792">&nbsp;</a></div><pre>Carl, I disabled the gratia cron probe and tried /usr/share/gratia/pbs-lsf/pbs-lsf_meter.pl but got this error message. Please tell me what the right syntax to run this pbs-lsf_meter.pl. Thank you!

[root@hpcosgce ~]# /usr/share/gratia/pbs-lsf/pbs-lsf_meter.pl
Traceback (most recent call last)&#58;
File &#34;/usr/share/gratia/pbs-lsf/pbs-lsf&#34;, line 16, in &#60;module&#62;
Gratia.Initialize()
File &#34;/usr/lib/python2.6/site-packages/gratia/common/GratiaCore.py&#34;, line 104, in Initialize
config.Config = probe_config.ProbeConfiguration(customConfig)
File &#34;/usr/lib/python2.6/site-packages/gratia/common/probe_config.py&#34;, line 56, in __init__
raise utils.InternalError(&#34;Error&#58; configuration file %s doesn&#39;t exist&#34; % (customConfig,))
gratia.common.utils.InternalError&#58; Error&#58; configuration file ProbeConfig doesn&#39;t exist

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454081211'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T15:26:51+00:00">Jan 29, 2016 03:26 PM UTC</time><a class="anchor" name="1454081211">&nbsp;</a></div><pre>Tanya, thank you for help. I will work with Carl on this ticket. You have a great trip!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454081207'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T15:26:47+00:00">Jan 29, 2016 03:26 PM UTC</time><a class="anchor" name="1454081207">&nbsp;</a></div><pre>Tanya, thank you for help. I will work with Carl on this ticket. You have a great trip!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454081203'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T15:26:43+00:00">Jan 29, 2016 03:26 PM UTC</time><a class="anchor" name="1454081203">&nbsp;</a></div><pre>Tanya, thank you for help. I will work with Carl on this ticket. You have a great trip!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454080045'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T15:07:25+00:00">Jan 29, 2016 03:07 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1454080045">&nbsp;</a></div><pre>Hi Mengxing,
I don&#39;t have a solution because I don&#39;t understand why it is failing to send some record.s The record is fine and I was able to send it in the test environment. The probe creates a reasonable record in /var/lib/gratia/tmp/urCollector/, certinfo is correct and your configuration is fine. I have no clue why some of the records are not sent. As I said I am leaving today and hope that Carl will work closely with you to resolve the issues. One of my suggestion is to disable a probe and run /usr/share/gratia/pbs-lsf/pbs-lsf_meter.pl manually. This should take all the files in /var/lib/gratia/tmp/urCollector/ and certinfo  and send it to gratia, then delete all these files. Do you want to try that? How many files you have in /var/lib/gratia/tmp/urCollector?

Thanks,
Tanya</pre></div><div class='update_description'><i onclick="document.location='28309#1454079148'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T14:52:28+00:00">Jan 29, 2016 02:52 PM UTC</time><a class="anchor" name="1454079148">&nbsp;</a></div><pre>Tanya, it is a bit unclear to me what&#39;s your suggestion to resolve the problem. Do you know why records like this one were missed in OSG gratia web? Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454076615'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T14:10:15+00:00">Jan 29, 2016 02:10 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1454076615">&nbsp;</a></div><pre>Carl, it sounds like you own this ticket for now, but note Tanya&#39;s final comment.</pre></div><div class='update_description'><i onclick="document.location='28309#1454073590'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T13:19:50+00:00">Jan 29, 2016 01:19 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1454073590">&nbsp;</a></div><pre>Hi,
I&#39;ve put your  532723 record in /var/lib/gratia/tmp/urCollector, cert info in  /var/lib/gratia/data and ran the command (/usr/share/gratia/pbs-lsf/pbs-lsf_meter.pl)  gratia probe is using to take data from urCollector, combine it with cert info and send to gratia.
It generated a successful record &#58;

?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&#62;
&#60;JobUsageRecord xmlns=&#34;<a href='http&#58;//www.gridforum.org/2003/ur-wg&#34' target='_blank' rel='nofollow'>http&#58;//www.gridforum.org/2003/ur-wg&#34</a>; xmlns&#58;urwg=&#34;<a href='http&#58;//www.gridforum.org/2003/ur-wg&#34' target='_blank' rel='nofollow'>http&#58;//www.gridforum.org/2003/ur-wg&#34</a>; xmlns&#58;xsi=&#34;<a href='http&#58;//www.w3.org/2001/XMLSchema-instance&#34' target='_blank' rel='nofollow'>http&#58;//www.w3.org/2001/XMLSchema-instance&#34</a>; xsi&#58;schemaLocation=&#34;http&#58;//ww
w.gridforum.org/2003/ur-wg file&#58;///u&#58;/OSG/urwg-schema.11.xsd&#34;&#62;
&#60;urwg&#58;RecordIdentity urwg&#58;createTime=&#34;2016-01-28T08&#58;50&#58;17Z&#34; urwg&#58;recordId=&#34;hpcosgce.fiu.edu&#58;532723_1453958535&#34;/&#62;
&#60;urwg&#58;JobIdentity&#62;
&#60;urwg&#58;GlobalJobId&#62;hpcosgce.fiu.edu&#58;532723_1453958535&#60;/urwg&#58;GlobalJobId&#62;
&#60;urwg&#58;LocalJobId&#62;532723&#60;/urwg&#58;LocalJobId&#62;
&#60;/urwg&#58;JobIdentity&#62;
&#60;urwg&#58;UserIdentity&#62;
&#60;urwg&#58;LocalUserId&#62;Unknown&#60;/urwg&#58;LocalUserId&#62;
&#60;ds&#58;KeyInfo xmlns&#58;ds=&#34;<a href='http&#58;//www.w3.org/2000/09/xmldsig#&#34' target='_blank' rel='nofollow'>http&#58;//www.w3.org/2000/09/xmldsig#&#34</a>;/&#62;
&#60;urwg&#58;VOName&#62;/osg/Role=NULL/Capability=NULL&#60;/urwg&#58;VOName&#62;&#60;urwg&#58;ReportableVOName&#62;osg&#60;/urwg&#58;ReportableVOName&#62;&#60;DN&#62;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.
iu.edu&#60;/DN&#62;&#60;/urwg&#58;UserIdentity&#62;
&#60;urwg&#58;JobName&#62;bl_76782a1b6961&#60;/urwg&#58;JobName&#62;
&#60;urwg&#58;Status description=&#34;exit status&#34;&#62;0&#60;/urwg&#58;Status&#62;
&#60;urwg&#58;WallDuration&#62;PT3H24M1S&#60;/urwg&#58;WallDuration&#62;
&#60;urwg&#58;CpuDuration&#62;PT2M&#60;/urwg&#58;CpuDuration&#62;
&#60;urwg&#58;EndTime&#62;2016-01-28T08&#58;46&#58;16Z&#60;/urwg&#58;EndTime&#62;
&#60;urwg&#58;StartTime&#62;2016-01-28T05&#58;22&#58;15Z&#60;/urwg&#58;StartTime&#62;
&#60;urwg&#58;MachineName description=&#34;Server&#34;&#62;hpcosgce.fiu.edu&#60;/urwg&#58;MachineName&#62;
&#60;urwg&#58;Host description=&#34;executing host&#34; primary=&#34;false&#34;&#62;hpc01&#60;/urwg&#58;Host&#62;
&#60;urwg&#58;Queue description=&#34;LRMS type&#58; lsf&#34;&#62;osg&#60;/urwg&#58;Queue&#62;
&#60;urwg&#58;Memory metric=&#34;total&#34; storageUnit=&#34;K&#34;&#62;29696&#60;/urwg&#58;Memory&#62;
&#60;urwg&#58;Swap metric=&#34;total&#34; storageUnit=&#34;K&#34;&#62;766976&#60;/urwg&#58;Swap&#62;
&#60;urwg&#58;Processors consumptionRate=&#34;0&#34; metric=&#34;total&#34;&#62;1&#60;/urwg&#58;Processors&#62;
&#60;urwg&#58;ProbeName&#62;pbs-lsf&#58;fermicloud155.fnal.gov&#60;/urwg&#58;ProbeName&#62;&#60;urwg&#58;SiteName&#62;Mysite&#60;/urwg&#58;SiteName&#62;&#60;urwg&#58;Grid&#62;OSG&#60;/urwg&#58;Grid&#62;&#60;urwg&#58;Resource urwg&#58;description=&#34;ResourceType&#34;&#62;Batch&#60;/urwg&#58;Resourc
e&#62;&#60;/JobUsageRecord&#62;

with all necessary information about VO.
I&#39;ve checked the quarantine records on collector site. There is no record sent by hpcosgce.fiu.edu.

<div id='show_37345065' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_37345065'>I am leaving to business trip today. I hope Carl will be  able to investigate further. If not it should wait until I return back (next Friday).

Thanks,
Tanya
</div><script type='text/javascript'>
        $('#show_37345065').click(function() {
            $('#detail_37345065').slideDown("normal");
            $('#show_37345065').hide();
            $('#hide_37345065').show();
        });
        $('#hide_37345065').click(function() {
            $('#detail_37345065').slideUp();
            $('#hide_37345065').hide();
            $('#show_37345065').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28309#1454015834'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T21:17:14+00:00">Jan 28, 2016 09:17 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1454015834">&nbsp;</a></div><pre>yes, this is fine (patch).

Check if you have in your log anything related to malformed xml&#58;
&#60;class &#39;xml.parsers.expat.ExpatError&#39;&#62;++not well-formed (invalid token)

This&#58;
&#60;ds&#58;KeyInfo xmlns&#58;ds=&#34;<a href='http&#58;//www.w3.org/2000/09/xmldsig#&#34' target='_blank' rel='nofollow'>http&#58;//www.w3.org/2000/09/xmldsig#&#34</a>;;/&#62;

doesn&#39;t look right (but it could be some cut and paste problem)</pre></div><div class='update_description'><i onclick="document.location='28309#1454014243'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T20:50:43+00:00">Jan 28, 2016 08:50 PM UTC</time><a class="anchor" name="1454014243">&nbsp;</a></div><pre>That is the reason that /var/lib/gratia/tmp/urCollector/lsf_532723_1453970776 shows Unknown as LocalUserId.

&#60;urwg&#58;LocalUserId&#62;Unknown&#60;/urwg&#58;LocalUserId&#62;

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454014137'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T20:48:57+00:00">Jan 28, 2016 08:48 PM UTC</time><a class="anchor" name="1454014137">&nbsp;</a></div><pre>By the way, there is some customization at our site. Per my request, OSG support sent me a patch of urCollector.pl to hide username because gratia tends to collect jobs submitted by our local user and we don&#39;t want to expose their campus username due to site security policy. This is the patch I applied.

<a href='attachment/view/27348/pbs-lsf-supress-unix-id.patch.txt' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/attachment/view?id=27348&file=pbs-lsf-supress-unix-id.patch.txt</a>

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454013730'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T20:42:10+00:00">Jan 28, 2016 08:42 PM UTC</time> by <b>mencheng@....</b><a class="anchor" name="1454013730">&nbsp;</a></div><pre>See attached.

Best Regards

Mengxing

Mengxing Cheng
Ph.D in Physics
High-Performance Computing System Administrator
Florida International University
Division of Information Technology
Office&#58; PC417
Phone&#58; (305) 348-6830

Learn the FIU Panther Cluster at the IRCC webpage</pre></div><div class='update_description'><i onclick="document.location='28309#1454013631'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T20:40:31+00:00">Jan 28, 2016 08:40 PM UTC</time><a class="anchor" name="1454013631">&nbsp;</a></div><pre>I am running osg 3.3, htcondor-ce-lsf-1.15-2, and gration 1.14.2-6. I sent you via email gratia log on Jan 28 because it is too large to attach here.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454013350'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T20:35:50+00:00">Jan 28, 2016 08:35 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1454013350">&nbsp;</a></div><pre>no, it is not but this is a different issue.</pre></div><div class='update_description'><i onclick="document.location='28309#1454012890'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T20:28:10+00:00">Jan 28, 2016 08:28 PM UTC</time><a class="anchor" name="1454012890">&nbsp;</a></div><pre>Tanya, I notice that a lot of pilot jobs have very short life, less than a minute. Is this normal?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454012681'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T20:24:41+00:00">Jan 28, 2016 08:24 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1454012681">&nbsp;</a></div><pre>also, what version are you running?</pre></div><div class='update_description'><i onclick="document.location='28309#1454012454'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T20:20:54+00:00">Jan 28, 2016 08:20 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1454012454">&nbsp;</a></div><pre>can you send me a log file (very small subset) with the record of this particular job? I will try to debug it.</pre></div><div class='update_description'><i onclick="document.location='28309#1454012170'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T20:16:10+00:00">Jan 28, 2016 08:16 PM UTC</time><a class="anchor" name="1454012170">&nbsp;</a></div><pre>back to the example job 532723, which misses in your records. It has the right osg cert information

[root@hpcosgce data]# cat gratia_certinfo_batch_532723
&#60;?xml version=&#34;1.0&#34; ?&#62;&#60;GratiaCertInfo&#62;
&#60;BatchManager&#62;batch&#60;/BatchManager&#62;
&#60;UniqID&#62;hpcosgce.fiu.edu#103435.0#1453958347&#60;/UniqID&#62;
&#60;LocalJobId&#62;532723&#60;/LocalJobId&#62;
&#60;DN&#62;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu&#60;/DN&#62;
&#60;VO&#62;osg&#60;/VO&#62;
&#60;FQAN&#62;/osg/Role=NULL/Capability=NULL&#60;/FQAN&#62;

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454010590'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T19:49:50+00:00">Jan 28, 2016 07:49 PM UTC</time><a class="anchor" name="1454010590">&nbsp;</a></div><pre>&#60;ProbeConfiguration

Title1=&#34;Collector Information&#34;

CollectorHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
SSLHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
SSLRegistrationHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;

CollectorService=&#34;/gratia-servlets/rmi&#34;
SSLCollectorService=&#34;/gratia-servlets/rmi&#34;
RegistrationService=&#34;/gratia-registration/register&#34;

Title2=&#34;Probe information and functional configuration&#34;

ProbeName=&#34;lsf&#58;hpcosgce.fiu.edu&#34;
SiteName=&#34;FIU_HPCOSG_CE&#34;
Grid=&#34;OSG&#34;
SuppressUnknownVORecords=&#34;0&#34;
SuppressNoDNRecords=&#34;0&#34;
SuppressGridLocalRecords=&#34;0&#34;
QuarantineUnknownVORecords=&#34;1&#34;
EnableProbe=&#34;1&#34;

Title3=&#34;Tuning parameter&#34;

BundleSize=&#34;100&#34;
MaxPendingFiles=&#34;100000&#34;
MaxStagedArchives=&#34;400&#34;
UseSyslog=&#34;0&#34;
ConnectionTimeout=&#34;900&#34;
LogLevel=&#34;3&#34;
Comments32=&#34;Controls debug messages printed to log file.&#34;
DebugLevel=&#34;3&#34;
Comments33=&#34;Controls debug messages printed to screen.&#34;
LogRotate=&#34;31&#34;
<div id='show_1312918602' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1312918602'>LogFileName=&#34;&#34;
Comments34=&#34;If LogFileName is set, then there is no log file rotation. Otherwise Log file rotation will create one new file each day and delete the older ones&#34;
DataLengthMax=&#34;0&#34;
Comments35=&#34;The maximum number of records (or hours, depending on the probe) processed in a single invocation, 0 = all records, no max&#34;
DataFileExpiration=&#34;31&#34;
Comments36=&#34;The number of days quarantined and unusable data files are kept&#34;
QuarantineSize=&#34;200&#34;
Comments37=&#34;The maximum size in Mb allowed to be kept in each quarantined directory&#34;
GratiaExtension=&#34;gratia.xml&#34;

Title4=&#34;Authentication Configuration&#34;

UseSSL=&#34;0&#34;
CertificateFile=&#34;/etc/grid-security/hostcert.pem&#34;
KeyFile=&#34;/etc/grid-security/hostkey.pem&#34;
UseGratiaCertificates=&#34;0&#34;
Comments40=&#34;If no directory is specified the gratia certificate file will be created in &#39;WorkingFolder&#39;/certs.&#34;
GratiaCertificateFile=&#34;/var/lib/gratia/data/certs/gratia.probecert.pem&#34;
GratiaKeyFile=&#34;/var/lib/gratia/data/certs/gratia.probekey.pem&#34;

Title5=&#34;File and directory location&#34;

UserVOMapFile=&#34;/var/lib/osg/user-vo-map&#34;
Comments51=&#34;Location and wildcard pattern of log files that contains certificate information about the jobs in the format followed by the &#39;blah demons&#39;.&#34;
CertInfoLogPattern=&#34;/var/log/accounting/blahp.log-*&#34;
CondorCEHistoryFolder=&#34;/var/lib/gratia/condorce_data&#34;

DataFolder=&#34;/var/lib/gratia/data/&#34;
WorkingFolder=&#34;/var/lib/gratia/tmp&#34;
LogFolder=&#34;/var/log/gratia&#34;

/&#62;

&#60;!-- This probe has not yet been configured --&#62;

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977
</div><script type='text/javascript'>
        $('#show_1312918602').click(function() {
            $('#detail_1312918602').slideDown("normal");
            $('#show_1312918602').hide();
            $('#hide_1312918602').show();
        });
        $('#hide_1312918602').click(function() {
            $('#detail_1312918602').slideUp();
            $('#hide_1312918602').hide();
            $('#show_1312918602').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28309#1454010542'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T19:49:02+00:00">Jan 28, 2016 07:49 PM UTC</time><a class="anchor" name="1454010542">&nbsp;</a></div><pre>I see some suppressions

4&#58;05&#58;59 EST Gratia&#58; 2016-01-28 14&#58;05&#58;59 EST Gratia&#58; Info&#58; suppressing record with GlobalJobId hpcosgce.fiu.edu&#58;534996_1454006853 due to unknown or null VOName, will be quarantined
in /var/lib/gratia/data/quarantine
14&#58;05&#58;59 EST Gratia&#58; No unsuppressed usage records in /var/lib/gratia/tmp/urCollector/lsf_534996_1454006880&#58; not sending
14&#58;05&#58;59 EST Gratia&#58; 2016-01-28 14&#58;05&#58;59 EST Gratia&#58; No unsuppressed usage records in /var/lib/gratia/tmp/urCollector/lsf_534996_1454006880&#58; not sending

But that job dies very quickly
root@hpcosgce urCollector]# bjobs -l 534996

Job &#60;534996&#62;, Job Name &#60;bl_3fb3c6145127&#62;, User &#60;osg&#62;, Project &#60;default&#62;, Status
Thu Jan 28 13&#58;47&#58;31&#58; Submitted from host &#60;hpcosgce&#62;, CWD &#60;$HOME&#62;, Input File &#60;/
dev/null&#62;, Output File &#60;/dev/null&#62;, Requested Resources &#60;s
pan[ptile=1]&#62;, Login Shell &#60;/bin/bash&#62;;
Thu Jan 28 13&#58;47&#58;33&#58; Started on &#60;n039&#62;, Execution Home &#60;/home/osg&#62;, Execution C
WD &#60;/home/osg&#62;;
Thu Jan 28 13&#58;48&#58;00&#58; Done successfully. The CPU time used is 3.0 seconds.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454009645'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T19:34:05+00:00">Jan 28, 2016 07:34 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1454009645">&nbsp;</a></div><pre>Have you checked /var/lib/gratia/data/quarantine - do you have any files there?
Could you send me (or attach here) you probe config. I think that there problem with VO info.

Check if you have in the log file&#58;
Info&#58; suppressing record with .....

Thanks,
Tanya</pre></div><div class='update_description'><i onclick="document.location='28309#1454007385'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T18:56:25+00:00">Jan 28, 2016 06:56 PM UTC</time><a class="anchor" name="1454007385">&nbsp;</a></div><pre>Here is the 532723 record in /var/lib/gratia/tmp/urCollector

[root@hpcosgce urCollector]# cat lsf_532723_1453970776
&#60;UsageRecord xmlns=&#34;<a href='http&#58;//www.gridforum.org/2003/ur-wg&#34' target='_blank' rel='nofollow'>http&#58;//www.gridforum.org/2003/ur-wg&#34</a>; xmlns&#58;urwg=&#34;<a href='http&#58;//www.gridforum.org/2003/ur-wg&#34' target='_blank' rel='nofollow'>http&#58;//www.gridforum.org/2003/ur-wg&#34</a>; xmlns&#58;xsi=&#34;<a href='http&#58;//www.w3.org/2001/XMLSchema-instance&#34' target='_blank' rel='nofollow'>http&#58;//www.w3.org/2001/XMLSchema-instance&#34</a>; xsi&#58;schemaLocation=&#34;<a href='http&#58;//www.gridforum.org/2003/ur-wg' target='_blank' rel='nofollow'>http&#58;//www.gridforum.org/2003/ur-wg</a> file&#58;///u&#58;/OSG/urwg-schema.11.xsd&#34;&#62;
&#60;urwg&#58;RecordIdentity urwg&#58;createTime=&#34;2016-01-28T08&#58;50&#58;17Z&#34;
urwg&#58;recordId=&#34;hpcosgce.fiu.edu&#58;532723_1453958535&#34;/&#62;
&#60;urwg&#58;JobIdentity&#62;
&#60;urwg&#58;GlobalJobId&#62;hpcosgce.fiu.edu&#58;532723_1453958535&#60;/urwg&#58;GlobalJobId&#62;
&#60;urwg&#58;LocalJobId&#62;532723&#60;/urwg&#58;LocalJobId&#62;
&#60;/urwg&#58;JobIdentity&#62;
&#60;urwg&#58;UserIdentity&#62;
&#60;urwg&#58;LocalUserId&#62;Unknown&#60;/urwg&#58;LocalUserId&#62;
&#60;ds&#58;KeyInfo xmlns&#58;ds=&#34;<a href='http&#58;//www.w3.org/2000/09/xmldsig#&#34' target='_blank' rel='nofollow'>http&#58;//www.w3.org/2000/09/xmldsig#&#34</a>;/&#62;
&#60;/urwg&#58;UserIdentity&#62;
&#60;urwg&#58;JobName&#62;bl_76782a1b6961&#60;/urwg&#58;JobName&#62;
&#60;urwg&#58;Status description=&#34;exit status&#34;&#62;0&#60;/urwg&#58;Status&#62;
&#60;urwg&#58;WallDuration&#62;PT3H24M1S&#60;/urwg&#58;WallDuration&#62;
&#60;urwg&#58;CpuDuration&#62;PT2M&#60;/urwg&#58;CpuDuration&#62;
&#60;urwg&#58;EndTime&#62;2016-01-28T08&#58;46&#58;16Z&#60;/urwg&#58;EndTime&#62;
&#60;urwg&#58;StartTime&#62;2016-01-28T05&#58;22&#58;15Z&#60;/urwg&#58;StartTime&#62;
&#60;urwg&#58;MachineName description=&#34;Server&#34;&#62;hpcosgce.fiu.edu&#60;/urwg&#58;MachineName&#62;
&#60;urwg&#58;Host description=&#34;executing host&#34;
primary=&#34;false&#34;&#62;hpc01&#60;/urwg&#58;Host&#62;
&#60;urwg&#58;Queue description=&#34;LRMS type&#58; lsf&#34;&#62;osg&#60;/urwg&#58;Queue&#62;
&#60;urwg&#58;Memory storageUnit=&#34;K&#34;
metric=&#34;total&#34;&#62;29696&#60;/urwg&#58;Memory&#62;
&#60;urwg&#58;Swap storageUnit=&#34;K&#34;
metric=&#34;total&#34;&#62;766976&#60;/urwg&#58;Swap&#62;
&#60;urwg&#58;Processors metric=&#34;total&#34;
consumptionRate=&#34;0&#34;&#62;1&#60;/urwg&#58;Processors&#62;

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454006765'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T18:46:05+00:00">Jan 28, 2016 06:46 PM UTC</time><a class="anchor" name="1454006765">&nbsp;</a></div><pre>I don&#39;t see error message. Here is the message after jobs processed.

00&#58;22&#58;07 EST Gratia&#58; Using grid job ID &#39;u01.fiu.edu&#58;530665_1453874584&#39; also as RecordIdentity!
00&#58;22&#58;07 EST Gratia&#58; Executing&#58; /usr/share/gratia/pbs-lsf/urCreator -t &#34;2016-01-28T05&#58;22&#58;07Z&#34; -r &#34;u01.fiu.edu&#58;530665_1453874584&#34; -g &#34;u01.fiu.edu&#58;530665_1453874584&#34; -l &#34;530665&#34; -u
&#34;Unknown&#34; -x &#34;256&#34; -X &#34;exit status&#34; -w &#34;PT22H57M44S&#34; -c &#34;P1DT19H34M38S&#34; -e &#34;2016-01-28T05&#58;00&#58;48Z&#34; -s &#34;2016-01-27T06&#58;03&#58;04Z&#34; -m &#34;u01.fiu.edu&#34; -M &#34;Server&#34; -y &#34;n036&#34; -Y &#34;executing ho
st&#34; -q &#34;normal&#34; -Q &#34;LRMS type&#58; lsf&#34; &#34;Memory=294912,,K,,total,&#34; &#34;Swap=9969664,,K,,total,&#34; &#34;Processors=1,,total,&#34; &#34;TimeInstant=2016-01-28T00&#58;00&#58;48Z,LRMS event timestamp,&#34;
00&#58;22&#58;08 EST Gratia&#58; Thu Jan 28 00&#58;22&#58;08 2016&#58; Found already processed 530605 with log event time  (=1453954152) in log! Done with iteration!
00&#58;22&#58;08 EST Gratia&#58; Using config file&#58; ProbeConfig
00&#58;22&#58;08 EST Gratia&#58; 2016-01-28 00&#58;22&#58;08 EST Gratia&#58; Using config file&#58; ProbeConfig
00&#58;22&#58;08 EST Gratia&#58; Initializing Gratia with ProbeConfig
00&#58;22&#58;08 EST Gratia&#58; 2016-01-28 00&#58;22&#58;08 EST Gratia&#58; Initializing Gratia with ProbeConfig
00&#58;22&#58;08 EST Gratia&#58; Creating a Record 2016-01-28T05&#58;22&#58;08Z
00&#58;22&#58;08 EST Gratia&#58; 2016-01-28 00&#58;22&#58;08 EST Gratia&#58; Creating a Record 2016-01-28T05&#58;22&#58;08Z
00&#58;22&#58;08 EST Gratia&#58; Creating a ProbeDetails record 2016-01-28T05&#58;22&#58;08Z
00&#58;22&#58;08 EST Gratia&#58; 2016-01-28 00&#58;22&#58;08 EST Gratia&#58; Creating a ProbeDetails record 2016-01-28T05&#58;22&#58;08Z
00&#58;22&#58;08 EST Gratia&#58; ***********************************************************
00&#58;22&#58;08 EST Gratia&#58; 2016-01-28 00&#58;22&#58;08 EST Gratia&#58; ***********************************************************
00&#58;22&#58;08 EST Gratia&#58; OK - Handshake added to bundle (1/100)
00&#58;22&#58;08 EST Gratia&#58; 2016-01-28 00&#58;22&#58;08 EST Gratia&#58; OK - Handshake added to bundle (1/100)
00&#58;22&#58;08 EST Gratia&#58; ***********************************************************
00&#58;22&#58;08 EST Gratia&#58; 2016-01-28 00&#58;22&#58;08 EST Gratia&#58; ***********************************************************
00&#58;22&#58;08 EST Gratia&#58; List of backup directories&#58; [u&#39;/var/lib/gratia/tmp&#39;]
00&#58;22&#58;08 EST Gratia&#58; 2016-01-28 00&#58;22&#58;08 EST Gratia&#58; List of backup directories&#58; [u&#39;/var/lib/gratia/tmp&#39;]
00&#58;22&#58;08 EST Gratia&#58; Reprocessing response&#58; OK - Reprocessing 0 record(s) uploaded, 0 bundled, 0 failed
00&#58;22&#58;08 EST Gratia&#58; 2016-01-28 00&#58;22&#58;08 EST Gratia&#58; Reprocessing response&#58; OK - Reprocessing 0 record(s) uploaded, 0 bundled, 0 failed
00&#58;22&#58;08 EST Gratia&#58; After reprocessing&#58; 0 in outbox 0 in staged outbox 0 tar files
00&#58;22&#58;08 EST Gratia&#58; 2016-01-28 00&#58;22&#58;08 EST Gratia&#58; After reprocessing&#58; 0 in outbox 0 in staged outbox 0 tar files
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58; Processing bundle file&#58;
00&#58;22&#58;09 EST Gratia&#58; Connection via HTTP to&#58; gratia-osg-prod.opensciencegrid.org&#58;80
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58; Connection via HTTP to&#58; gratia-osg-prod.opensciencegrid.org&#58;80
00&#58;22&#58;09 EST Gratia&#58; Response&#58; (SUCCESS, OK)
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58; Response&#58; (SUCCESS, OK)
00&#58;22&#58;09 EST Gratia&#58; Processing bundle Response code&#58;  0
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58; Processing bundle Response code&#58;  0
00&#58;22&#58;09 EST Gratia&#58; Processing bundle Response message&#58;  OK
<div id='show_1308119916' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1308119916'>00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58; Processing bundle Response message&#58;  OK
00&#58;22&#58;09 EST Gratia&#58; OK - Processed bundle with 1 records&#58;  OK
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58; OK - Processed bundle with 1 records&#58;  OK
00&#58;22&#58;09 EST Gratia&#58; ***********************************************************

00&#58;22&#58;09 EST Gratia&#58; End of execution summary&#58; new records sent successfully&#58; 0
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58; End of execution summary&#58; new records sent successfully&#58; 0
00&#58;22&#58;09 EST Gratia&#58;                           new records suppressed&#58; 0
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58;                           new records suppressed&#58; 0
00&#58;22&#58;09 EST Gratia&#58;                           new records failed&#58; 0
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58;                           new records failed&#58; 0
00&#58;22&#58;09 EST Gratia&#58;                           records reprocessed successfully&#58; 0
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58;                           records reprocessed successfully&#58; 0
00&#58;22&#58;09 EST Gratia&#58;                           reprocessed records failed&#58; 0
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58;                           reprocessed records failed&#58; 0
00&#58;22&#58;09 EST Gratia&#58;                           handshake records sent successfully&#58; 1
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58;                           handshake records sent successfully&#58; 1
00&#58;22&#58;09 EST Gratia&#58;                           handshake records failed&#58; 0
00&#58;22&#58;09 EST Gratia&#58;                           bundle of records sent successfully&#58; 1
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58;                           handshake records failed&#58; 0
00&#58;22&#58;09 EST Gratia&#58;                           bundle of records failed&#58; 0
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58;                           bundle of records sent successfully&#58; 1
00&#58;22&#58;09 EST Gratia&#58;                           outstanding records&#58; 0
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58;                           bundle of records failed&#58; 0
00&#58;22&#58;09 EST Gratia&#58;                           outstanding staged records&#58; 0
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58;                           outstanding records&#58; 0
00&#58;22&#58;09 EST Gratia&#58;                           outstanding records tar files&#58; 0
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58;                           outstanding staged records&#58; 0
00&#58;22&#58;09 EST Gratia&#58; End-of-execution disconnect ...
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58;                           outstanding records tar files&#58; 0
00&#58;22&#58;09 EST Gratia&#58; 2016-01-28 00&#58;22&#58;09 EST Gratia&#58; End-of-execution disconnect ...

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977
</div><script type='text/javascript'>
        $('#show_1308119916').click(function() {
            $('#detail_1308119916').slideDown("normal");
            $('#show_1308119916').hide();
            $('#hide_1308119916').show();
        });
        $('#hide_1308119916').click(function() {
            $('#detail_1308119916').slideUp();
            $('#hide_1308119916').hide();
            $('#show_1308119916').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28309#1454005268'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T18:21:08+00:00">Jan 28, 2016 06:21 PM UTC</time><a class="anchor" name="1454005268">&nbsp;</a></div><pre>532723 is in /var/log/gratia/2016-01-28.log. Any particular error message should I look for in the log?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454004550'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T18:09:10+00:00">Jan 28, 2016 06:09 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1454004550">&nbsp;</a></div><pre>No, we didn&#39;t get this record. Have you checked /var/log/gratia/ for today. Do you see anything suspicious in the log?

Last jobid we have got&#58;

+---------------------+---------------------+------------+--------------+

| StartTime           | EndTime             | LocalJobID | WallDuration |

+---------------------+---------------------+------------+--------------+

| 2016-01-25 08&#58;58&#58;23 | 2016-01-26 02&#58;04&#58;51 | 529386     |        61588 |

| 2016-01-26 04&#58;13&#58;20 | 2016-01-26 04&#58;42&#58;32 | 530296     |         1752 |

| 2016-01-26 05&#58;59&#58;05 | 2016-01-26 12&#58;46&#58;31 | 530316     |        24446 |

| 2016-01-26 06&#58;40&#58;22 | 2016-01-26 07&#58;17&#58;27 | 530327     |         2225 |

| 2016-01-26 06&#58;53&#58;38 | 2016-01-26 07&#58;12&#58;32 | 530338     |         1134 |

| 2016-01-26 08&#58;09&#58;38 | 2016-01-26 08&#58;32&#58;20 | 530375     |         1362 |

| 2016-01-27 01&#58;14&#58;43 | 2016-01-28 16&#58;38&#58;51 | 530721     |       141848 |

| 2016-01-28 02&#58;02&#58;40 | 2016-01-28 02&#58;18&#58;19 | 532505     |          939 |

| 2016-01-28 10&#58;23&#58;20 | 2016-01-28 10&#58;23&#58;41 | 533140     |           21 |

| 2016-01-28 11&#58;43&#58;16 | 2016-01-28 11&#58;43&#58;42 | 533278     |           26 |

| 2016-01-28 14&#58;28&#58;10 | 2016-01-28 14&#58;38&#58;19 | 533669     |          609 |

+---------------------+---------------------+------------+--------------+

Thanks,
<div id='show_889266575' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_889266575'>
Tanya
</div><script type='text/javascript'>
        $('#show_889266575').click(function() {
            $('#detail_889266575').slideDown("normal");
            $('#show_889266575').hide();
            $('#hide_889266575').show();
        });
        $('#hide_889266575').click(function() {
            $('#detail_889266575').slideUp();
            $('#hide_889266575').hide();
            $('#show_889266575').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28309#1454003111'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T17:45:11+00:00">Jan 28, 2016 05:45 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1454003111">&nbsp;</a></div><pre>UTC</pre></div><div class='update_description'><i onclick="document.location='28309#1454002967'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T17:42:47+00:00">Jan 28, 2016 05:42 PM UTC</time><a class="anchor" name="1454002967">&nbsp;</a></div><pre>Tanya, what is the time zone of those record you posted? Thanks!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454002207'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T17:30:07+00:00">Jan 28, 2016 05:30 PM UTC</time><a class="anchor" name="1454002207">&nbsp;</a></div><pre>I see the job 532723 processed this early morning in gratia log. Can you see it on your side?

03&#58;50&#58;17 EST Gratia&#58; Thu Jan 28 03&#58;50&#58;17 2016&#58; Processing job&#58; 532723 with LRMS log event time(local)&#58;  (=1453970776); LRMS creation time&#58; 1453958533
03&#58;50&#58;17 EST Gratia&#58; Using grid job ID &#39;hpcosgce.fiu.edu&#58;532723_1453958535&#39; also as RecordIdentity!
03&#58;50&#58;17 EST Gratia&#58; Executing&#58; /usr/share/gratia/pbs-lsf/urCreator -t &#34;2016-01-28T08&#58;50&#58;17Z&#34; -r &#34;hpcosgce.fiu.edu&#58;532723_1453958535&#34; -g &#34;hpcosgce.fiu.edu&#58;532723_1453958535&#34; -l &#34;532723&#34; -u &#34;Unknown&#34; -j &#34;bl_76782a1b6961&#34; -x &#34;0&#34; -X &#34;exit status&#34; -w &#34;PT3H24M1S&#34; -c &#34;PT2M&#34; -e &#34;2016-01-28T08&#58;46&#58;16Z&#34; -s &#34;2016-01-28T05&#58;22&#58;15Z&#34; -m &#34;hpcosgce.fiu.edu&#34; -M &#34;Server&#34; -y &#34;hpc01&#34; -Y &#34;executing host&#34; -q &#34;osg&#34; -Q &#34;LRMS type&#58; lsf&#34; &#34;Memory=29696,,K,,total,&#34; &#34;Swap=766976,,K,,total,&#34; &#34;Processors=1,,total,&#34; &#34;TimeInstant=2016-01-28T03&#58;46&#58;16Z,LRMS event timestamp,&#34;

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1454000669'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T17:04:29+00:00">Jan 28, 2016 05:04 PM UTC</time><a class="anchor" name="1454000669">&nbsp;</a></div><pre>These are many successfully finished jobs not captured by gratia but in my LSF history. Can you give me a bit more information how gratia collects LSF jobs accounting? I want to dig into the gratia python source code to see what happens. Thank you!

Summary of time in seconds spent in various states&#58;
JOBID   USER    JOB_NAME  PEND    PSUSP   RUN     USUSP   SSUSP   UNKWN   TOTAL
530430  osg     *e9e16b3  2       0       137184  0       0       0       137186
530471  osg     *b80ad1a  2       0       125640  0       0       0       125642
530487  osg     *c683c43  2       0       158251  0       0       0       158253
530492  osg     *a1de851  2       0       182427  0       0       0       182429
530515  osg     *e5e2230  2       0       127930  0       0       0       127932
530541  osg     *3340530  2       0       122361  0       0       0       122363
530546  osg     *d0e49fb  2       0       126449  0       0       0       126451
530549  osg     *f66a69f  2       0       114065  0       0       0       114067
530572  osg     *11c38b6  2       0       110275  0       0       0       110277
530575  osg     *775aa14  2       0       113286  0       0       0       113288
530605  osg     *d2b79e4  2       0       121519  0       0       0       121521
530622  osg     *3979f12  2       0       106912  0       0       0       106914
530634  osg     *10bc480  2       0       99808   0       0       0       99810
530662  osg     *cc6181d  2       0       101797  0       0       0       101799
530699  osg     *08edc64  2       0       120445  0       0       0       120447
530700  osg     *bcb78d2  2       0       100985  0       0       0       100987
530705  osg     *8826c92  2       0       83906   0       0       0       83908
530717  osg     *0c57484  3       0       143194  0       0       0       143197
530721  osg     *13ffd6e  2       0       141848  0       0       0       141850
530736  osg     *b9d6041  2       0       70354   0       0       0       70356
530738  osg     *98f3a11  2       0       76029   0       0       0       76031
530739  osg     *0ead9ab  2       0       69510   0       0       0       69512
530741  osg     *9c321e8  2       0       128744  0       0       0       128746
530743  osg     *8475e9e  2       0       70610   0       0       0       70612
530744  osg     *0aa5168  2       0       72941   0       0       0       72943
530747  osg     *06a3ea0  4199    0       49057   0       0       0       53256
530748  osg     *38925b8  4164    0       53806   0       0       0       57970
530749  osg     *6c4390b  3857    0       55097   0       0       0       58954
530750  osg     *efe113d  3857    0       74884   0       0       0       78741
530760  osg     *7e21189  2       0       99640   0       0       0       99642
530761  osg     *53e29fb  979     0       34215   0       0       0       35194
<div id='show_279914857' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_279914857'>530762  osg     *c4e6ab1  2       0       39995   0       0       0       39997
530763  osg     *2113ac7  2       0       39500   0       0       0       39502
530765  osg     *ff3fcd6  2       0       38645   0       0       0       38647
530767  osg     *9097efa  2       0       36273   0       0       0       36275
530771  osg     *7f1ba3a  45      0       50916   0       0       0       50961
530772  osg     *6a55932  124     0       88088   0       0       0       88212
530775  osg     *8d811a1  2       0       88792   0       0       0       88794
530784  osg     *a436d58  2767    0       31171   0       0       0       33938
530786  osg     *bda917b  2604    0       84705   0       0       0       87309
530798  osg     *771756f  2       0       83381   0       0       0       83383
530799  osg     *b9c271b  2       0       31515   0       0       0       31517

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977
</div><script type='text/javascript'>
        $('#show_279914857').click(function() {
            $('#detail_279914857').slideDown("normal");
            $('#show_279914857').hide();
            $('#hide_279914857').show();
        });
        $('#hide_279914857').click(function() {
            $('#detail_279914857').slideUp();
            $('#hide_279914857').hide();
            $('#show_279914857').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28309#1453993614'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T15:06:54+00:00">Jan 28, 2016 03:06 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1453993614">&nbsp;</a></div><pre>Hi,

The only records we have from this probes since 1/20 are&#58;
+---------------------+---------------------+------------+---------------------------------+------------------+--------------+-----------------+-------------------+-------+
| StartTime           | EndTime             | LocalJobId | CommonName                      | ReportableVOName | WallDuration | CPUUSerDuration | CPUSystemDuration | Cores |
+---------------------+---------------------+------------+---------------------------------+------------------+--------------+-----------------+-------------------+-------+
| 2016-01-19 22&#58;25&#58;04 | 2016-01-20 07&#58;35&#58;46 | 526701     | /CN=pilot/osg-flock.grid.iu.edu | osg              |        33042 |           28541 |                 0 |     1 |
| 2016-01-20 00&#58;56&#58;00 | 2016-01-20 01&#58;20&#58;22 | 526788     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1462 |              26 |                 0 |     1 |
| 2016-01-20 03&#58;12&#58;12 | 2016-01-20 03&#58;34&#58;58 | 526836     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1366 |              36 |                 0 |     1 |
| 2016-01-20 04&#58;45&#58;45 | 2016-01-20 05&#58;06&#58;42 | 526862     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1257 |              25 |                 0 |     1 |
| 2016-01-20 16&#58;23&#58;25 | 2016-01-20 16&#58;47&#58;37 | 526992     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1452 |              26 |                 0 |     1 |
| 2016-01-20 17&#58;59&#58;47 | 2016-01-22 20&#58;16&#58;35 | 527003     | /CN=pilot/osg-flock.grid.iu.edu | osg              |       181008 |               1 |                 0 |     1 |
| 2016-01-20 18&#58;00&#58;19 | 2016-01-21 06&#58;34&#58;27 | 527004     | /CN=pilot/osg-flock.grid.iu.edu | osg              |        45248 |           34758 |                 0 |     1 |
| 2016-01-20 20&#58;18&#58;17 | 2016-01-20 20&#58;33&#58;41 | 527181     | /CN=pilot/osg-flock.grid.iu.edu | osg              |          924 |               7 |                 0 |     1 |
| 2016-01-20 21&#58;18&#58;21 | 2016-01-20 21&#58;19&#58;38 | 527217     | /CN=pilot/osg-flock.grid.iu.edu | osg              |           77 |               8 |                 0 |     1 |
| 2016-01-21 15&#58;24&#58;13 | 2016-01-21 15&#58;25&#58;56 | 527470     | /CN=pilot/osg-flock.grid.iu.edu | osg              |          103 |               8 |                 0 |     1 |
| 2016-01-21 15&#58;42&#58;11 | 2016-01-21 15&#58;43&#58;21 | 527505     | /CN=pilot/osg-flock.grid.iu.edu | osg              |           70 |               8 |                 0 |     1 |
| 2016-01-21 17&#58;45&#58;25 | 2016-01-21 21&#58;45&#58;56 | 527642     | /CN=pilot/osg-flock.grid.iu.edu | osg              |        14431 |           12240 |                 0 |     1 |
| 2016-01-21 17&#58;52&#58;23 | 2016-01-21 17&#58;53&#58;49 | 527691     | /CN=pilot/osg-flock.grid.iu.edu | osg              |           86 |               7 |                 0 |     1 |
| 2016-01-22 00&#58;23&#58;11 | 2016-01-22 04&#58;47&#58;59 | 527958     | /CN=pilot/osg-flock.grid.iu.edu | osg              |        15888 |            9154 |                 0 |     1 |
| 2016-01-22 00&#58;31&#58;11 | 2016-01-22 07&#58;16&#58;04 | 527969     | /CN=pilot/osg-flock.grid.iu.edu | osg              |        24293 |           15010 |                 0 |     1 |
| 2016-01-22 01&#58;30&#58;34 | 2016-01-22 07&#58;16&#58;26 | 527982     | /CN=pilot/osg-flock.grid.iu.edu | osg              |        20752 |           12198 |                 0 |     1 |
| 2016-01-22 07&#58;35&#58;52 | 2016-01-22 07&#58;58&#58;36 | 528060     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1364 |              31 |                 0 |     1 |
| 2016-01-22 10&#58;59&#58;11 | 2016-01-22 18&#58;03&#58;32 | 528160     | /CN=pilot/osg-flock.grid.iu.edu | osg              |        25461 |           22817 |                 0 |     1 |
| 2016-01-22 20&#58;20&#58;03 | 2016-01-22 23&#58;51&#58;03 | 528317     | /CN=pilot/osg-flock.grid.iu.edu | osg              |        12660 |           10790 |                 0 |     1 |
| 2016-01-22 21&#58;39&#58;55 | 2016-01-22 21&#58;42&#58;35 | 528342     | /CN=pilot/osg-flock.grid.iu.edu | osg              |          160 |               8 |                 0 |     1 |
| 2016-01-22 23&#58;55&#58;37 | 2016-01-23 15&#58;45&#58;04 | 528408     | /CN=pilot/osg-flock.grid.iu.edu | osg              |        56967 |           53165 |                 0 |     1 |
| 2016-01-24 02&#58;42&#58;58 | 2016-01-24 14&#58;07&#58;53 | 528670     | /CN=pilot/osg-flock.grid.iu.edu | osg              |        41095 |           38400 |                 0 |     1 |
| 2016-01-24 02&#58;56&#58;26 | 2016-01-24 14&#58;01&#58;47 | 528671     | /CN=pilot/osg-flock.grid.iu.edu | osg              |        39921 |           36097 |                 0 |     1 |
| 2016-01-24 08&#58;08&#58;01 | 2016-01-24 09&#58;56&#58;07 | 528692     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         6486 |            5569 |                 0 |     1 |
| 2016-01-24 16&#58;23&#58;36 | 2016-01-24 18&#58;26&#58;20 | 528835     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         7364 |            6332 |                 0 |     1 |
| 2016-01-24 16&#58;24&#58;36 | 2016-01-24 16&#58;58&#58;32 | 528838     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         2036 |            1126 |                 0 |     1 |
| 2016-01-24 19&#58;32&#58;10 | 2016-01-24 20&#58;58&#58;21 | 528948     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         5171 |            4464 |                 0 |     1 |
| 2016-01-24 20&#58;37&#58;35 | 2016-01-24 22&#58;24&#58;36 | 528979     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         6421 |            5450 |                 0 |     1 |
| 2016-01-24 23&#58;19&#58;39 | 2016-01-25 00&#58;52&#58;57 | 529043     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         5598 |            4817 |                 0 |     1 |
<div id='show_358333962' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_358333962'>| 2016-01-24 23&#58;59&#58;53 | 2016-01-25 01&#58;28&#58;40 | 529065     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         5327 |            4423 |                 0 |     1 |
| 2016-01-25 03&#58;28&#58;22 | 2016-01-25 03&#58;53&#58;21 | 529146     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1499 |              30 |                 0 |     1 |
| 2016-01-25 04&#58;16&#58;38 | 2016-01-25 04&#58;39&#58;28 | 529197     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1370 |              33 |                 0 |     1 |
| 2016-01-25 04&#58;46&#58;13 | 2016-01-25 05&#58;06&#58;50 | 529252     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1237 |              28 |                 0 |     1 |
| 2016-01-25 04&#58;52&#58;41 | 2016-01-25 06&#58;48&#58;35 | 529263     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         6954 |            5445 |                 0 |     1 |
| 2016-01-25 05&#58;05&#58;59 | 2016-01-25 07&#58;25&#58;06 | 529281     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         8347 |            6194 |                 0 |     1 |
| 2016-01-25 08&#58;31&#58;18 | 2016-01-25 08&#58;56&#58;21 | 529369     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1503 |              28 |                 0 |     1 |
| 2016-01-25 08&#58;58&#58;23 | 2016-01-26 02&#58;04&#58;51 | 529386     | /CN=pilot/osg-flock.grid.iu.edu | osg              |        61588 |           50780 |                 0 |     1 |
| 2016-01-25 10&#58;52&#58;31 | 2016-01-25 11&#58;16&#58;14 | 529470     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1423 |              31 |                 0 |     1 |
| 2016-01-25 11&#58;02&#58;27 | 2016-01-25 11&#58;25&#58;51 | 529486     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1404 |              37 |                 0 |     1 |
| 2016-01-25 11&#58;42&#58;38 | 2016-01-25 12&#58;03&#58;02 | 529553     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1224 |              28 |                 0 |     1 |
| 2016-01-25 12&#58;20&#58;59 | 2016-01-25 12&#58;45&#58;25 | 529606     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1466 |              29 |                 0 |     1 |
| 2016-01-25 13&#58;32&#58;00 | 2016-01-25 13&#58;55&#58;43 | 529708     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1423 |              34 |                 0 |     1 |
| 2016-01-25 14&#58;19&#58;33 | 2016-01-25 14&#58;44&#58;23 | 529786     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1490 |              33 |                 0 |     1 |
| 2016-01-26 04&#58;13&#58;20 | 2016-01-26 04&#58;42&#58;32 | 530296     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1752 |            1313 |                 0 |     1 |
| 2016-01-26 05&#58;59&#58;05 | 2016-01-26 12&#58;46&#58;31 | 530316     | /CN=pilot/osg-flock.grid.iu.edu | osg              |        24446 |           22005 |                 0 |     1 |
| 2016-01-26 06&#58;40&#58;22 | 2016-01-26 07&#58;17&#58;27 | 530327     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         2225 |              32 |                 0 |     1 |
| 2016-01-26 06&#58;53&#58;38 | 2016-01-26 07&#58;12&#58;32 | 530338     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1134 |               9 |                 0 |     1 |
| 2016-01-26 08&#58;09&#58;38 | 2016-01-26 08&#58;32&#58;20 | 530375     | /CN=pilot/osg-flock.grid.iu.edu | osg              |         1362 |             638 |                 0 |     1 |
| 2016-01-28 02&#58;02&#58;40 | 2016-01-28 02&#58;18&#58;19 | 532505     | /CN=pilot/osg-flock.grid.iu.edu | osg              |          939 |              33 |                 0 |     1 |
| 2016-01-28 10&#58;23&#58;20 | 2016-01-28 10&#58;23&#58;41 | 533140     | /CN=pilot/osg-flock.grid.iu.edu | osg              |           21 |               2 |                 0 |     1 |
| 2016-01-28 11&#58;43&#58;16 | 2016-01-28 11&#58;43&#58;42 | 533278     | /CN=pilot/osg-flock.grid.iu.edu | osg              |           26 |               2 |                 0 |     1 |
| 2016-01-28 14&#58;28&#58;10 | 2016-01-28 14&#58;38&#58;19 | 533669     | /CN=pilot/osg-flock.grid.iu.edu | osg              |          609 |             581 |                 0 |     1 |
+---------------------+---------------------+------------+---------------------------------+------------------+--------------+-----------------+-------------------+-------+

As you can see the job #530523 that you have mentioned in your ticket is not here. Only one core is reported . Total WallDuration is less than 190 hours since 1/20.
In order to debug further we need the recent lsf log and your configuration files (see what you have under /etc/gratia/lsf... probe/

Thanks,
Tanya
</div><script type='text/javascript'>
        $('#show_358333962').click(function() {
            $('#detail_358333962').slideDown("normal");
            $('#show_358333962').hide();
            $('#hide_358333962').show();
        });
        $('#hide_358333962').click(function() {
            $('#detail_358333962').slideUp();
            $('#hide_358333962').hide();
            $('#show_358333962').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28309#1453949424'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-28T02:50:24+00:00">Jan 28, 2016 02:50 AM UTC</time><a class="anchor" name="1453949424">&nbsp;</a></div><pre>Tanya,
Yes, FIU_HPCOSG_CE (lsf&#58;hpcosgce.fiu.edu ) is the resource.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1453938416'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-27T23:46:56+00:00">Jan 27, 2016 11:46 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1453938416">&nbsp;</a></div><pre>Hi,
We will look and let you know what information we need. Do I understand correctly that we are talking about the records reported by FIU_HPCOSG_CE (lsf&#58;hpcosgce.fiu.edu ) probe?

Thanks,
Tanya</pre></div><div class='update_description'><i onclick="document.location='28309#1453916750'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-27T17:45:50+00:00">Jan 27, 2016 05:45 PM UTC</time><a class="anchor" name="1453916750">&nbsp;</a></div><pre>Tanya, if you need any information about our site, especially LSF configuration. Let me know. Thank you!

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1453915310'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-27T17:21:50+00:00">Jan 27, 2016 05:21 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1453915310">&nbsp;</a></div><pre>Hello,

Sorry I&#39;ve removed Joe and CC&#39;d Tanya to this. I believe that she can assist with this.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='28309#1453915016'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-27T17:16:56+00:00">Jan 27, 2016 05:16 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1453915016">&nbsp;</a></div><pre>Hello,

I&#39;ve added Joe Boyd to this. I believe that he can assist with this.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='28309#1453906781'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-27T14:59:41+00:00">Jan 27, 2016 02:59 PM UTC</time><a class="anchor" name="1453906781">&nbsp;</a></div><pre>LSF batch indicates a lot more CPU hours used by OSG jobs. For example, as shown below, one pilot job used more than 73680 seconds equal to about 20 hours.

Job &#60;530523&#62;, Job Name &#60;bl_2a8e708a2a7d&#62;, User &#60;osg&#62;, Project &#60;default&#62;, Status
&#60;DONE&#62;, Queue &#60;osg&#62;, Command &#60;#!/bin/bash;# LSF job wrapp
....
Tue Jan 26 09&#58;47&#58;34&#58; Submitted from host &#60;hpcosgce&#62;, CWD &#60;$HOME&#62;, Input File &#60;/
dev/null&#62;, Output File &#60;/dev/null&#62;, Requested Resources &#60;s
pan[ptile=1]&#62;, Login Shell &#60;/bin/bash&#62;;
Tue Jan 26 09&#58;47&#58;36&#58; Started on &#60;hpc01&#62;, Execution Home &#60;/home/osg&#62;, Execution
CWD &#60;/home/osg&#62;;
Wed Jan 27 09&#58;54&#58;33&#58; Done successfully. The CPU time used is 73682.6 seconds.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div><div class='update_description'><i onclick="document.location='28309#1453841013'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-26T20:43:33+00:00">Jan 26, 2016 08:43 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1453841013">&nbsp;</a></div><pre>Dear GOC team,

I am OSG gridadmin at Florida International University. I submit this ticket to report that Gratia Accounting data doesn&#39;t reflect FIU contribution to OSG. We have 80 cores almost dedicated to OSG jobs but the Gratia accounting shows less than 40 daily wall hours much less than theoretical value 80*24=1920 cpu hours. Please help me to understand and/or troubleshoot this issue.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mengxing Cheng 2977</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F28309">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
