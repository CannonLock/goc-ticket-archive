<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[10311] 80% job failure at OU_OCHEP_SWT2 code 8&#58; &#34;an unknown exception occurred&#34;</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=10311" method="post">
<div class="page-header">
    <h3><span class="muted">10311</span> / 80% job failure at OU_OCHEP_SWT2 code 8&#58; &#34;an unknown exception occurred&#34;</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Thomas Mueller</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">ATLAS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Thomas Mueller</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USATLAS</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Check for updates</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2011-05-05</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG RA <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=70081">70081</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">USATLAS (BNL Prod)&nbsp;<a target="_blank" href="https://rt.racf.bnl.gov/rt/Ticket/Display.html?id=19923">19923</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/10311", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/10311?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/10311?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%2080%25%20job%20failure%20at%20OU_OCHEP_SWT2%20code%208%26%2358%3B%20%26%2334%3Ban%20unknown%20exception%20occurred%26%2334%3B%20ISSUE%3D10311%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='10311#1304181875'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-04-30T16:44:35+00:00">Apr 30, 2011 04:44 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1304181875">&nbsp;</a></div><pre>Lorenzo re-installed 16.6.4 and all patches last night, and they all succeeded,
and we haven&#39;t seen any more job failures or high file system load for the last
2 days, so I think we can assume that the root cause of all this was really a
release corruption, and therefore I&#39;m going to close this ticket again. I also
increased the number of job slots back to the original 844. Thanks, Horst
-- by hs@.... at Sat Apr 30 16&#58;44&#58;26 UTC 2011</pre></div><div class='update_description'><i onclick="document.location='10311#1304090820'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-04-29T15:27:00+00:00">Apr 29, 2011 03:27 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1304090820">&nbsp;</a></div><pre>Hi Bob,

<font color='#7F7E6F'>&#62; You should be able to use &#34;top&#34; or similar to see what PID are running,</font>
<font color='#7F7E6F'>&#62; then as root just &#34;strace that_PID&#34;.</font>

ahh, good idea, thanks. Unfortunately we don&#39;t have any more of these jobs
running now, so I can&#39;t check anymore. And we&#39;re not seeing any more
load issues now, either, which is good.

Last night, we got an error installing 16.6.4.3 via the sw-mgr,
also with some kind of python error, so I contacted Alessandro and Lorenzo,
since it seemed to indicate that release 16.6.4 might be corrupted after all,
and they then triggered a re-install of 16.6.4, so let&#39;s wait until that
is done, and then we can try some more 16.6.4.2 test jobs, and assuming
they succeed, then we can close this ticket again, since then I think
we can assume that the I/O high loads were simply caused by jobs staging
in all the large files, then immediately crashing and the next job coming
in and staging in again, therefore every job would constantly thrash
the storage at all times, which would definitely explain the over load!

Cheers,

Horst

-- by hs@.... at Fri Apr 29 15&#58;26&#58;53 UTC 2011</pre></div><div class='update_description'><i onclick="document.location='10311#1304084789'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-04-29T13:46:29+00:00">Apr 29, 2011 01:46 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1304084789">&nbsp;</a></div><pre>You should be able to use &#34;top&#34; or similar to see what PID are running,
then as root just &#34;strace that_PID&#34;.

bob

On 4/28/2011 11&#58;36 PM, helpdesk@.... wrote&#58;
<font color='#7F7E6F'>&#62; *********************************************************************************</font>
<font color='#7F7E6F'>&#62;   This is an automated mail to inform you about a(n) TEAM TICKET update.</font>
<font color='#7F7E6F'>&#62;   When replying do not change the subject line.</font>
<font color='#7F7E6F'>&#62;   Type your text above this box and S T R I P  P R E V I O U S  M A I L S please!!</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Dear group members,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; TEAM ticket #70081 is updated.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; TICKET UPDATE INFORMATION&#58;</font>
<font color='#7F7E6F'>&#62; ----------------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Reference Link    &#58; <a href='https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=70081' target='_blank' rel='nofollow'>https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=70081</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Status            &#58; in progress</font>
<font color='#7F7E6F'>&#62; Ticket-ID         &#58; 70081</font>
<font color='#7F7E6F'>&#62; Short description &#58; 80% job failure at OU_OCHEP_SWT2 code 8&#58; &#34;an unknown exception occurred&#34;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Affected VO       &#58; atlas</font>
<font color='#7F7E6F'>&#62; VO specific       &#58; No</font>
<font color='#7F7E6F'>&#62; Priority          &#58; less urgent</font>
<font color='#7F7E6F'>&#62; Type of problem	  &#58; Other</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Last Modifier     &#58; OSG-GOC (via Footprints)</font>
<font color='#7F7E6F'>&#62; Notified site     &#58; OU_OCHEP_SWT2</font>
<font color='#7F7E6F'>&#62; Responsible Unit  &#58; OSG(Prod)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Assigned ticket to&#58;</font>
<div id='show_1345562025' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1345562025'><font color='#7F7E6F'>&#62; Involved others	  &#58;</font>
<font color='#7F7E6F'>&#62; Comment from user &#58;</font>
<font color='#7F7E6F'>&#62; Public Diary      &#58;</font>
<font color='#7F7E6F'>&#62; Well,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; we&#39;re running 4 jobs per node now, and the file system isn&#39;t running</font>
<font color='#7F7E6F'>&#62; quite as hot now, which was to be expected, but it&#39;s still being hit</font>
<font color='#7F7E6F'>&#62; pretty hard, and the jobs are still failing.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; And all the jobs seem to run for about 45 minutes before they fail,</font>
<font color='#7F7E6F'>&#62; so what I think is happening, after talking with Mark earlier today,</font>
<font color='#7F7E6F'>&#62; is that the jobs stage in all the files, thereby hitting the file system</font>
<font color='#7F7E6F'>&#62; pretty hard -- but not causing any REAL file system problems, since all</font>
<font color='#7F7E6F'>&#62; the SRM transfers still succeed just fine, and all the stage ins</font>
<font color='#7F7E6F'>&#62; succeed as well, otherwise there&#39;d be checksum errors or similar --</font>
<font color='#7F7E6F'>&#62; but then they fail with that &#34;AthFile access failed&#58; [Errno 8]&#34;</font>
<font color='#7F7E6F'>&#62; and crash.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The question is, why is this happening?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Charles, which &#34;offending processes&#34; should I run &#34;strace&#34; on?</font>
<font color='#7F7E6F'>&#62; How do I find out which one offends? &#58;)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;   -- by hs@.... at Fri Apr 29 03&#58;33&#58;58 UTC 2011</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Solution          &#58;</font>
<font color='#7F7E6F'>&#62; Internals         &#58;</font>
<font color='#7F7E6F'>&#62; Related issue     &#58;</font>
<font color='#7F7E6F'>&#62; CC recipient      &#58; atlas-support-cloud-us@....</font>
<font color='#7F7E6F'>&#62;</font>
-- by ball@.... at Fri Apr 29 13&#58;45&#58;05 UTC 2011
</div><script type='text/javascript'>
        $('#show_1345562025').click(function() {
            $('#detail_1345562025').slideDown("normal");
            $('#show_1345562025').hide();
            $('#hide_1345562025').show();
        });
        $('#hide_1345562025').click(function() {
            $('#detail_1345562025').slideUp();
            $('#hide_1345562025').hide();
            $('#show_1345562025').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10311#1304048046'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-04-29T03:34:06+00:00">Apr 29, 2011 03:34 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1304048046">&nbsp;</a></div><pre>Well,

we&#39;re running 4 jobs per node now, and the file system isn&#39;t running
quite as hot now, which was to be expected, but it&#39;s still being hit
pretty hard, and the jobs are still failing.

And all the jobs seem to run for about 45 minutes before they fail,
so what I think is happening, after talking with Mark earlier today,
is that the jobs stage in all the files, thereby hitting the file system
pretty hard -- but not causing any REAL file system problems, since all
the SRM transfers still succeed just fine, and all the stage ins
succeed as well, otherwise there&#39;d be checksum errors or similar --
but then they fail with that &#34;AthFile access failed&#58; [Errno 8]&#34;
and crash.

The question is, why is this happening?

Charles, which &#34;offending processes&#34; should I run &#34;strace&#34; on?
How do I find out which one offends? &#58;)

Thanks a lot,

Horst

-- by hs@.... at Fri Apr 29 03&#58;33&#58;58 UTC 2011</pre></div><div class='update_description'><i onclick="document.location='10311#1304016127'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-04-28T18:42:07+00:00">Apr 28, 2011 06:42 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1304016127">&nbsp;</a></div><pre>Hi again,

at Yuri&#39;s suggestion, I just reconfigured our site to only run
4 jobs per node for now, to see if this helps the high file system load.

Obviously this will cause more job failures, since many jobs were evicted.
Please bear with us as we&#39;re trying to figure out what&#39;s happening here.

Thanks,

Horst

-- by hs@.... at Thu Apr 28 18&#58;41&#58;59 UTC 2011</pre></div><div class='update_description'><i onclick="document.location='10311#1304004360'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-04-28T15:26:00+00:00">Apr 28, 2011 03:26 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1304004360">&nbsp;</a></div><pre>Hi all,

I just spent an hour or two trying to find some more information on this,
but haven&#39;t been all that successful so far. I don&#39;t fully understand
what the actual error in these failed jobs is; as errors go,
&#34;an unknown exception&#34; isn&#39;t all that useful, I&#39;m afraid. &#58;)
Does anyone know what the real problem is with these jobs?

The only thing I know is that we&#39;ve been hit with very high file system
load since these Higgs pileip jobs start at our site yesterday,
so if these jobs don&#39;t have a fundamental problem itself --
which seems to be the case, since they&#39;re running fine at other sites? --
then I&#39;m pretty sure the failures are somehow related to the high
file system loads we&#39;re experiencing, which are definitely due to
these Higgs jobs.

DDN had a look at the Lustre logs, and they can&#39;t find anything wrong
with it other than the high load caused by these jobs.

I saw this email this morning as well&#58;

----
Hello ATLAS ADC,

Yesterday we observed that the atlas production jobs running at PIC
since tuesday around noon are showing very low cpu efficiency.

Looking with a bit of details we saw that this is mostly due to
extremely slow copies of input files into local disk (using dccp,
dcache local protocol, in our case).

We investigated yesterday and we see no problem with our storage
system. We are able to copy those same files with very high
performance.

<div id='show_1882194082' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1882194082'>There is a GGUS ticket on us related to this&#58;
<a href='https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=70069' target='_blank' rel='nofollow'>https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=70069</a>

As commented in the ticket, we suspect that the setting of &#34;export
DC_LOCAL_CACHE_BUFFER=1&#34; in the atlas setup.sh script is actually
causing the transfers to go extremely slow. The consequence of that is
that many of them time out, or jobs are cancelled by walltime limit.

Can someone comment on this variable? Does it make sense that we saw
the inefficient transfers only starting on Tuesday noon? Is this a new
env var setting?
----

So I&#39;m wondering if these problems are related?
Different file system and SRM type, but similar issues, as far as
I can tell ...

Our file system load was much lower for a few hours this morning,
but the load has just started to rise again about half an hour ago,
so I guess we just got some more of these high load jobs?

Is there anything that can be done to avoid these jobs on our site
until we figure out better what&#39;s causing these loads?

Thanks,

Horst

-- by hs@.... at Thu Apr 28 15&#58;25&#58;52 UTC 2011
</div><script type='text/javascript'>
        $('#show_1882194082').click(function() {
            $('#detail_1882194082').slideDown("normal");
            $('#show_1882194082').hide();
            $('#hide_1882194082').show();
        });
        $('#hide_1882194082').click(function() {
            $('#detail_1882194082').slideUp();
            $('#hide_1882194082').hide();
            $('#show_1882194082').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10311#1303986598'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-04-28T10:29:58+00:00">Apr 28, 2011 10:29 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1303986598">&nbsp;</a></div><pre>There are 4000 jobs failed from different tasks at OU_OCHEP_SWT2. In cases where tasks were sent to different sites, the jobs succeeded if sent to different sites.
logfile&#58; [athfile-22208.log.txt]

Py&#58;Athena            INFO leaving with code 8&#58; &#34;an unknown exception occurred&#34;
INFO&#58; read 109 error categories from file /storage/app/gridapp/atlas_app/atlas_rel/prod/releases/rel_16-4.7/AtlasCore/16.6.4/InstallArea/share/atlas_error_categories.db
/storage/app/gridapp/atlas_app/atlas_rel/prod/releases/rel_16-4.7/AtlasCore/16.6.4/InstallArea/share/bin/athena.py -b runargs.Digi_trf.py SimuJobTransforms/skeleton.HITtoRDO.py Digi_trf_messageSvc_jobOptions.py - exit code 8
Py&#58;Digi_trf          INFO Execution of Digi_trf complete with exit code 8.
INFO&#58; read 109 error categories from file /storage/app/gridapp/atlas_app/atlas_rel/prod/releases/rel_16-4.7/AtlasCore/16.6.4/InstallArea/share/atlas_error_categories.db
INFO&#58; read 52 error patterns from file /storage/app/gridapp/atlas_app/atlas_rel/prod/releases/rel_16-4.7/AtlasCore/16.6.4/InstallArea/share/atlas_error_patterns.db
INFO&#58; read 58 ignore patterns from file /storage/app/gridapp/atlas_app/atlas_rel/prod/releases/rel_16-4.7/AtlasCore/16.6.4/InstallArea/share/atlas_error_ignore.db

<a href='http&#58;//voatlas140.cern.ch/monitor/logs/a0234128-a720-45c9-9c3f-995406462ff3/tarball_PandaJob_1226755161_OU_OCHEP_SWT2/athena_stdout_1.txt' target='_blank' rel='nofollow'>http&#58;//voatlas140.cern.ch/monitor/logs/a0234128-a720-45c9-9c3f-995406462ff3/tarball_PandaJob_1226755161_OU_OCHEP_SWT2/athena_stdout_1.txt</a>
<a href='http&#58;//panda.cern.ch/server/pandamon/query?overview=viewlogfile&nocachemark=yes&guid=a0234128-a720-45c9-9c3f-995406462ff3&lfn=log.322210._019964.job.log.tgz.1&site=OU_OCHEP_SWT2_PRODDISK' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch/server/pandamon/query?overview=viewlogfile&nocachemark=yes&guid=a0234128-a720-45c9-9c3f-995406462ff3&lfn=log.322210._019964.job.log.tgz.1&site=OU_OCHEP_SWT2_PRODDISK</a>

28 Apr 06&#58;56&#58;08|runJob.py   |  This job ended with (trf,pilot) exit code of (10,0)
28 Apr 06&#58;56&#58;08|runJob.py   | ********************************************************
28 Apr 06&#58;56&#58;13|runJob.py   | Warning&#58; Could not copy metadata-1226755161.xml to site work dir - ddm Adder problems will occure in case of job recovery
28 Apr 06&#58;56&#58;13|runJob.py   | All output files already removed from local dir
28 Apr 06&#58;56&#58;13|runJob.py   | Payload cleanup has finished

<a href='http&#58;//voatlas140.cern.ch/monitor/logs/a0234128-a720-45c9-9c3f-995406462ff3/tarball_PandaJob_1226755161_OU_OCHEP_SWT2/pilotlog.txt' target='_blank' rel='nofollow'>http&#58;//voatlas140.cern.ch/monitor/logs/a0234128-a720-45c9-9c3f-995406462ff3/tarball_PandaJob_1226755161_OU_OCHEP_SWT2/pilotlog.txt</a>

<a href='http&#58;//panda.cern.ch/server/pandamon/query?job=1226755161' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch/server/pandamon/query?job=1226755161</a>

You can see the jobs fail at SWT2 and succeed at other sites&#58;
<a href='http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=*&taskID=322210&detail=no' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=*&taskID=322210&detail=no</a>

[Ticket Origin]
<a href='https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=70081' target='_blank' rel='nofollow'>https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=70081</a>

[Ticket History]
Changed CC to atlas-support-cloud-us@....
-- by Thomas Mueller at Thu Apr 28 10&#58;29&#58;30 UTC 2011

Sent TEAM notification mail to mail address hs@....;karunach@....;
<div id='show_1872671551' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1872671551'>-- by Thomas Mueller at Thu Apr 28 10&#58;29&#58;30 UTC 2011
</div><script type='text/javascript'>
        $('#show_1872671551').click(function() {
            $('#detail_1872671551').slideDown("normal");
            $('#show_1872671551').hide();
            $('#hide_1872671551').show();
        });
        $('#hide_1872671551').click(function() {
            $('#detail_1872671551').slideUp();
            $('#hide_1872671551').hide();
            $('#show_1872671551').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F10311">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 10311});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
