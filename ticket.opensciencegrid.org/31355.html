<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[31355] Transfer failing from T2_BE_UCL to T2_BR_UERJ</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=31355" method="post">
<div class="page-header">
    <h3><span class="muted">31355</span> / Transfer failing from T2_BE_UCL to T2_BR_UERJ</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Sebastian Pulido</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Sebastian Pulido</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier2</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-12-05</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">USCMS Tier 2 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=124067">124067</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/31355", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/31355?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/31355?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Transfer%20failing%20from%20T2_BE_UCL%20to%20T2_BR_UERJ%20ISSUE%3D31355%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='31355#1482883235'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-28T00:00:35+00:00">Dec 28, 2016 12:00 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1482883235">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.

-- by GGUS SYSTEM at Tue Dec 27 23&#58;59&#58;13 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067</a></pre></div><div class='update_description'><i onclick="document.location='31355#1480727148'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-03T01:05:48+00:00">Dec 3, 2016 01:05 AM UTC</time><a class="anchor" name="1480727148">&nbsp;</a></div><pre>Hello Kyle.

Thank you for your remainder.
We can close this ticket.

Regards,
Eduardo

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Eduardo Azevedo Revoredo 586</pre></div><div class='update_description'><i onclick="document.location='31355#1480705088'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-02T18:58:08+00:00">Dec 2, 2016 06:58 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1480705088">&nbsp;</a></div><pre>Sebastian/Eduardo,

I&#39;m not sure what to do with this ticket.  UERJ is down currently.  Does this ticket need to remain open?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='31355#1478948422'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-12T11:00:22+00:00">Nov 12, 2016 11:00 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1478948422">&nbsp;</a></div><pre>Hello Sebastian,

Thank you.

Unfortunately, we are currently in downtime due to a major issue with the cluster&#39;s electrical infrastructure

Eduardo

-- by Eduardo Azevedo Revoredo at Sat Nov 12 10&#58;59&#58;21 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067</a></pre></div><div class='update_description'><i onclick="document.location='31355#1478865645'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T12:00:45+00:00">Nov 11, 2016 12:00 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1478865645">&nbsp;</a></div><pre>Hi Renan,
I looked at the latest transfers log to UERJ and I noticed connection error to se.hepgrid.uerj.br, can you check if everything is ok with that node?

DESTINATION MAKE_PARENT srm-ifce err&#58; Communication error on send, err&#58; [SE][Mkdir][] httpg&#58;//se.hepgrid.uerj.br&#58;8443/srm/v2/server&#58; CGSI-gSOAP running on cmsftssrv2.fnal.gov reports could not open connection to se.hepgrid.uerj.br

In the meantime we will check unsuspending transfers and debug error messages.

Sebastian.

-- by Sebastian Pulido at Fri Nov 11 11&#58;59&#58;42 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067</a></pre></div><div class='update_description'><i onclick="document.location='31355#1478864565'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T11:42:45+00:00">Nov 11, 2016 11:42 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1478864565">&nbsp;</a></div><pre>Hi Elizabeth, Renan,
I will try to manually unsuspend some transfers in order to get error messages and start debugging from there.

We let you know,
Transfer Team

-- by Sebastian Pulido at Fri Nov 11 11&#58;42&#58;18 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067</a></pre></div><div class='update_description'><i onclick="document.location='31355#1478799872'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-10T17:44:32+00:00">Nov 10, 2016 05:44 PM UTC</time> by <b>echism</b><a class="anchor" name="1478799872">&nbsp;</a></div><pre>Hey Kyle,

This ticket is languishing if nothing comes in the next few days, please tell the Transfer Team to get on this on the WLCG call.</pre></div><div class='update_description'><i onclick="document.location='31355#1478010450'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-01T14:27:30+00:00">Nov 1, 2016 02:27 PM UTC</time> by <b>echism</b><a class="anchor" name="1478010450">&nbsp;</a></div><pre>Sebastian,

Can you take another run at this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='31355#1477915493'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-31T12:04:53+00:00">Oct 31, 2016 12:04 PM UTC</time><a class="anchor" name="1477915493">&nbsp;</a></div><pre>Hi, Elizabeth.

Sorry for the delay. From our side, we don&#39;t have any news. We corrected the mapfile parameter in the config file, but the transfers are still failing.
Do you have any ideas?

Just a reminder&#58; currently we are in downtime until the end of the day (October, 31st)

Thank you.

Best regards,
Renan Bernardo

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=rvaladao/CN=783687/CN=Renan Bernardo Valadao</pre></div><div class='update_description'><i onclick="document.location='31355#1477599075'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-27T20:11:15+00:00">Oct 27, 2016 08:11 PM UTC</time> by <b>echism</b><a class="anchor" name="1477599075">&nbsp;</a></div><pre>Hey all,

Is there any movement on this? Can I help in any way?

Thank you</pre></div><div class='update_description'><i onclick="document.location='31355#1477318227'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-24T14:10:27+00:00">Oct 24, 2016 02:10 PM UTC</time> by <b>echism</b><a class="anchor" name="1477318227">&nbsp;</a></div><pre>Is there anything new on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='31355#1477056691'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-21T13:31:31+00:00">Oct 21, 2016 01:31 PM UTC</time><a class="anchor" name="1477056691">&nbsp;</a></div><pre>Hi, Sebastian.

Thank you.

We commented the mapfile parameter in filedownload-fts-t2_slow and restarted the Phedex agents.
To help, a bit of information about our network in [1].

Best regards,
Renan Bernardo

[1] -
[phedex@phedex PhEDEx]$ traceroute ingrid-se02.cism.ucl.ac.be

traceroute to ingrid-se02.cism.ucl.ac.be (130.104.133.250), 30 hops max, 60 byte packets
1  152.92.103.193 (152.92.103.193)  0.571 ms  0.514 ms  0.553 ms
2  200.20.98.9 (200.20.98.9)  0.808 ms  0.905 ms  0.853 ms
3  200.20.96.12 (200.20.96.12)  0.939 ms  0.894 ms  0.864 ms
4  200.20.96.10 (200.20.96.10)  0.948 ms  0.906 ms  0.839 ms
5  200.20.96.27 (200.20.96.27)  1.149 ms  1.103 ms  1.161 ms
6  200.20.96.21 (200.20.96.21)  1.107 ms  1.144 ms  1.118 ms
7  xe-0-3-1.ar2.gig1.gblx.net (64.214.61.249)  1.758 ms  1.843 ms  1.798 ms
8  ae1-300G.ar5.MIA1.gblx.net (67.17.94.249)  102.022 ms ae0-300G.ar5.MIA1.gblx.net (67.17.99.233)  101.992 ms  102.247 ms
9  * * *
10  ae-1-7.bar2.Brussels1.Level3.net (4.69.148.181)  193.412 ms  193.276 ms  193.336 ms
11  BELNET.bar2.Brussels1.Level3.net (212.3.237.14)  250.477 ms  250.450 ms  250.363 ms
12  * * *
13  ucl.r1.lln.belnet.net (193.191.3.86)  250.876 ms  252.200 ms  252.161 ms
14  CtCarnoy.sri.ucl.ac.be (130.104.254.240)  252.069 ms  253.512 ms  253.425 ms
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
<div id='show_1199109046' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1199109046'>22  * * *

Hop 1 - University gateway- 10 Gbps shared
Hop 2 to 6 - Local Metro Network - 10 Gbps shared
Hop 7 - International Link GlobalCrossing - ???

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=rvaladao/CN=783687/CN=Renan Bernardo Valadao
</div><script type='text/javascript'>
        $('#show_1199109046').click(function() {
            $('#detail_1199109046').slideDown("normal");
            $('#show_1199109046').hide();
            $('#hide_1199109046').show();
        });
        $('#hide_1199109046').click(function() {
            $('#detail_1199109046').slideUp();
            $('#hide_1199109046').hide();
            $('#show_1199109046').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='31355#1477055094'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-21T13:04:54+00:00">Oct 21, 2016 01:04 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1477055094">&nbsp;</a></div><pre>Hi Renan,
Thanks for updating the gitlab repository. I order to debug transfers error, transfers from UCL were manually unsuspended.
I tried to copy manually a file from UCL and it failed. We are going to investigate transfer logs at get back to you.

From what I can tell, the filedownload-fts-t2_slow agent should not have the -mapfile parameter enable, as it is the case for the other agents in the Config.Prod file.

Here is some documentation about the parameters in the PhEDEx agents [1], in short, they specify how many jobs are being submitted to FTS.

Let me know,
Sebastian.
Transfer Team

[1]
<a href='https&#58;//twiki.cern.ch/twiki/bin/view/CMSPublic/USCMSTier2Transfers' target='_blank' rel='nofollow'>https&#58;//twiki.cern.ch/twiki/bin/view/CMSPublic/USCMSTier2Transfers</a>
<a href='https&#58;//twiki.cern.ch/twiki/bin/viewauth/CMS/PhedexAdminDocsAgentConfiguration' target='_blank' rel='nofollow'>https&#58;//twiki.cern.ch/twiki/bin/viewauth/CMS/PhedexAdminDocsAgentConfiguration</a>

-- by Sebastian Pulido at Fri Oct 21 13&#58;04&#58;36 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067</a></pre></div><div class='update_description'><i onclick="document.location='31355#1476968945'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-20T13:09:05+00:00">Oct 20, 2016 01:09 PM UTC</time><a class="anchor" name="1476968945">&nbsp;</a></div><pre>Hi, Sebastian.

Sorry for the confusion. There were files not used in our repository. We just updated it.
All agents&#39; configurations are in Config.Prod and Config.Debug. We are not using templates or importing parts.

Our most recent changes are in [1]. We reduced jobs, batch-files, max-active-files, link-pending-files and timeout.
By the way, do you know the real difference between jobs, batch-files, max-active-files and link-pending-files?

Thank you.

Best regards,
Renan Bernardo

[1] -
### AGENT LABEL=filedownload-fts-t2_slow PROGRAM=Toolkit/Transfer/FileDownload DEFAULT=on  ENVIRON glite
-db              ${PHEDEX_DBPARAM}
-nodes           ${PHEDEX_NODE}
-accept          &#39;%T2_RU_%,T2_US_UCSD,T2_US_Purdue,T2_BE_UCL&#39;
-delete          ${PHEDEX_CONFIG}/FileDownloadDelete
-validate        ${PHEDEX_CONFIG}/FileDownloadVerify,-c
-backend         FTS
-mapfile        ${PHEDEX_CONFIG}/fts.map
-service       <a href='https&#58;//cmsfts3.fnal.gov&#58;8443' target='_blank' rel='nofollow'>https&#58;//cmsfts3.fnal.gov&#58;8443</a>
-protocols       &#39;srmv2&#39;
-jobs                  1
-batch-files           1
-max-active-files      1
-link-pending-files    1
-timeout 18000

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=rvaladao/CN=783687/CN=Renan Bernardo Valadao</pre></div><div class='update_description'><i onclick="document.location='31355#1476967138'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-20T12:38:58+00:00">Oct 20, 2016 12:38 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1476967138">&nbsp;</a></div><pre>Dear Renan,

This is the link to the repository at SPRACE for the Config.Prod file&#58;
<a href='https&#58;//gitlab.cern.ch/SITECONF/T2_BR_SPRACE/blob/master/PhEDEx/Config.Prod' target='_blank' rel='nofollow'>https&#58;//gitlab.cern.ch/SITECONF/T2_BR_SPRACE/blob/master/PhEDEx/Config.Prod</a>

Template file&#58;
/phedex/PHEDEX/Custom/Template/Config

Please take a look at this example and the template, it seems to me that the Config.Prod file was not properly configured.

Let us know,
Sebastian.
Transfer Team

-- by Sebastian Pulido at Thu Oct 20 12&#58;38&#58;00 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067</a></pre></div><div class='update_description'><i onclick="document.location='31355#1476966778'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-20T12:32:58+00:00">Oct 20, 2016 12:32 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1476966778">&nbsp;</a></div><pre>Dear Renan,

Looking at the configuration files, it seems that the issue is in the configuration itself at UERJ.

Can you take a look at these files [1] at T2_BR_SPRACE repository and compare with the information with configuration files at T2_BR_UERJ? In particular, the Config.Prod file. It seems to me that is not properly configure. Are all agents at UERJ being declared in ConfigPart.FTSDownload and ConfigPart.SRMDownload config. files ONLY?

Can you also check PhEDEX installation the configuration files TEMPLATES here [2]?
In the PhEDEx template config. files, no agents are being declared in the Config.Prod but imported [3]

Let me know,
Sebastian.
Transfer Team

[1]
<a href='https&#58;//gitlab.cern.ch/SITECONF/T2_BR_UERJ/blob/master/PhEDEx/Config.Prod' target='_blank' rel='nofollow'>https&#58;//gitlab.cern.ch/SITECONF/T2_BR_UERJ/blob/master/PhEDEx/Config.Prod</a>
<a href='https&#58;//gitlab.cern.ch/SITECONF/T2_BR_SPRACE/blob/master/PhEDEx/ConfigPart.FTSDownload' target='_blank' rel='nofollow'>https&#58;//gitlab.cern.ch/SITECONF/T2_BR_SPRACE/blob/master/PhEDEx/ConfigPart.FTSDownload</a>
<a href='https&#58;//gitlab.cern.ch/SITECONF/T2_BR_SPRACE/blob/master/PhEDEx/ConfigPart.SRMDownload' target='_blank' rel='nofollow'>https&#58;//gitlab.cern.ch/SITECONF/T2_BR_SPRACE/blob/master/PhEDEx/ConfigPart.SRMDownload</a>

[2]
/phedex/PHEDEX/Custom/Template

[3]
### IMPORT ConfigPart.FTSDownload
### IMPORT ConfigPart.MSS
### IMPORT ConfigPart.Verify
### IMPORT ConfigPart.Watchdog

-- by Sebastian Pulido at Thu Oct 20 12&#58;32&#58;45 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067</a></pre></div><div class='update_description'><i onclick="document.location='31355#1476467705'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-14T17:55:05+00:00">Oct 14, 2016 05:55 PM UTC</time><a class="anchor" name="1476467705">&nbsp;</a></div><pre>Hello, Sebastian.

We just pushed the most recent files to the gitlab repo.

Thank you.

Renan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=rvaladao/CN=783687/CN=Renan Bernardo Valadao</pre></div><div class='update_description'><i onclick="document.location='31355#1476443717'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-14T11:15:17+00:00">Oct 14, 2016 11:15 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1476443717">&nbsp;</a></div><pre>Hi Elizabeth, Renan,
The team is investigating the issues. We are looking at configuration and possible transfer issues.
Renan, are the configuration files in gitlab [1] the lastest version?, I noticed that the earliest ones are from about 2 weeks ago. If it is not the case, can you upload the current version at the site.

Sebastian.
Transfer Team

[1] <a href='https&#58;//gitlab.cern.ch/SITECONF/T2_BR_UERJ/tree/master/PhEDEx' target='_blank' rel='nofollow'>https&#58;//gitlab.cern.ch/SITECONF/T2_BR_UERJ/tree/master/PhEDEx</a>

-- by Sebastian Pulido at Fri Oct 14 11&#58;14&#58;25 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067</a></pre></div><div class='update_description'><i onclick="document.location='31355#1476390293'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-13T20:24:53+00:00">Oct 13, 2016 08:24 PM UTC</time> by <b>echism</b><a class="anchor" name="1476390293">&nbsp;</a></div><pre>CMS Data ops,

Can you help? I am not finding much out of the ordinary.

Thank you</pre></div><div class='update_description'><i onclick="document.location='31355#1476362341'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-13T12:39:01+00:00">Oct 13, 2016 12:39 PM UTC</time><a class="anchor" name="1476362341">&nbsp;</a></div><pre>Hi, Elizabeth.

The downtime is already over. Even after changing the config files and creating a specific agent for T2_BE_UCL, I see no success in the transfers. Any suggestions?

Thank you.

Best Regards,
Renan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=rvaladao/CN=783687/CN=Renan Bernardo Valadao</pre></div><div class='update_description'><i onclick="document.location='31355#1476218444'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-11T20:40:44+00:00">Oct 11, 2016 08:40 PM UTC</time> by <b>echism</b><a class="anchor" name="1476218444">&nbsp;</a></div><pre>UERJ was under maintenance until yesterday I think.

Is this ongoing?

Thank you</pre></div><div class='update_description'><i onclick="document.location='31355#1475590047'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-04T14:07:27+00:00">Oct 4, 2016 02:07 PM UTC</time><a class="anchor" name="1475590047">&nbsp;</a></div><pre>Hi, Elizabeth.

We created a specific agent for T2_BE_UCL and added the parameters in [1]. So far, the error remains. We can&#39;t check it now because we had to stop our operations due to electrical problems in our cluster facility. We have a downtime set until next thursday (October, 6th).

Best regards,
Renan

---------------------------
[1] -
-jobs        1
-batch-files 1
-timeout     18000

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=rvaladao/CN=783687/CN=Renan Bernardo Valadao</pre></div><div class='update_description'><i onclick="document.location='31355#1475269844'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-30T21:10:44+00:00">Sep 30, 2016 09:10 PM UTC</time> by <b>echism</b><a class="anchor" name="1475269844">&nbsp;</a></div><pre>What is the status of this issue?

Thank you</pre></div><div class='update_description'><i onclick="document.location='31355#1474998584'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-27T17:49:44+00:00">Sep 27, 2016 05:49 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1474998584">&nbsp;</a></div><pre>Hello, again.

I forgot your question about the gitlab repo. We are uploading it.

Thank you.

Best regards,
Renan

-- by Renan Bernardo at Tue Sep 27 17&#58;49&#58;02 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067</a></pre></div><div class='update_description'><i onclick="document.location='31355#1474993842'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-27T16:30:42+00:00">Sep 27, 2016 04:30 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1474993842">&nbsp;</a></div><pre>Hello, Sebastian.

We changed our agent configuration with the timeout  and reduced some parameters like max-active-files and batch-files. Already restarted the agent. We hope everything will be ok now.

Thank you.

Best regards,
Renan

-- by Renan Bernardo at Tue Sep 27 16&#58;29&#58;48 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067</a></pre></div><div class='update_description'><i onclick="document.location='31355#1474968200'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-27T09:23:20+00:00">Sep 27, 2016 09:23 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1474968200">&nbsp;</a></div><pre>Dear site admin,
Transfers have been failing to BR_UERJ [1] with error messages&#58; &#34;TRANSFER Transfer canceled because the gsiftp performance marker timeout of 360 seconds has been exceeded, or all performance markers during that period indicated zero bytes transferred&#34;

Can you check the FileDownload parameters (-max-active-files, jobs, batch-files, max-active-files, link-pending-files)?. This might be related with the FTS optimizer saturating endpoints, causing the cancellation of transfers once the maker timeout expires.

Are the configuration files update at gitlab? Checking the info in gitlab, files were updated ~3 years ago.

Let us know,
Sebastian.
Transfer Team

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=124067</a>

[Ticket History]
Subject&#58; Transfer failing from T2_BE_UCL to T2_BR_UERJ
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-transfer-team@....
-- by Sebastian Pulido at Mon Sep 26 12&#58;01&#58;14 UTC 2016

Hi Sebastian,

As far as I know, there was no reason to change our PhEDEx configuration in those last three years. So, most probably, the configuration in the repository is up-to-date.

BTW, looks like I don&#39;t have access to the new GitLab system. I tried to check <a href='https&#58;//gitlab.cern.ch/SITECONF/T2_BE_UCL' target='_blank' rel='nofollow'>https&#58;//gitlab.cern.ch/SITECONF/T2_BE_UCL</a> but couldn&#39;t find any files there.

Anyway, here is our FTS agent configuration&#58;

-backend     FTS
-protocols   &#39;srmv2&#39;
-glite-options Submit=&#39;-g &#34;-p 8 -bs 4194304 -tcp-bs 4194304&#34;&#39;
-service     <a href='https&#58;//lcgfts3.gridpp.rl.ac.uk&#58;8443' target='_blank' rel='nofollow'>https&#58;//lcgfts3.gridpp.rl.ac.uk&#58;8443</a>
-jobs        32
-batch-files 4
-timeout     9000 # 2h30
<div id='show_1314921147' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1314921147'>
-- by Pavel Demin at Mon Sep 26 12&#58;15&#58;11 UTC 2016

Dear Pavel,

You can access the files by clicking in the &#34;Files&#34; link in the link that you pasted&#58;
<a href='https&#58;//gitlab.cern.ch/SITECONF/T2_BE_UCL/blob/master/PhEDEx/ConfigPart.SRMDownload' target='_blank' rel='nofollow'>https&#58;//gitlab.cern.ch/SITECONF/T2_BE_UCL/blob/master/PhEDEx/ConfigPart.SRMDownload</a>

Can you please add the following parameter/values in the FTS agent config file, once updated, restart the agent?

-max-active-files 50
-link-pending-files 10

Let us know,
Sebastian.
Transfer Team

-- by Sebastian Pulido at Mon Sep 26 15&#58;30&#58;04 UTC 2016

Hi all,

The transfers are failing from T2_BE_UCL to T2_BR_UERJ, so I do not think updating FileDownload agent configuration at T2_BE_UCL will fix the issue.

Also, I tried to transfer on of the files to my afs space at CERN and it worked&#58;

$ lcg-cp -v -b -D srmv2 <a href='srm&#58;//ingrid-se02.cism.ucl.ac.be&#58;8444/srm/managerv2?SFN=/storage/data/cms/store/mc/RunIISpring16reHLT80/Graviton2PMToZGTo2QG_width-0p00014_M-1500_13TeV-JHUgen/AODSIM/PUSpring16RAWAODSIM_reHLT_80X_mcRun2_asymptotic_v14-v1/90000/3006D9AA-4450-E611-B471-0CC47A4D7626.root' target='_blank' rel='nofollow'>srm&#58;//ingrid-se02.cism.ucl.ac.be&#58;8444/srm/managerv2?SFN=/storage/data/cms/store/mc/RunIISpring16reHLT80/Graviton2PMToZGTo2QG_width-0p00014_M-1500_13TeV-JHUgen/AODSIM/PUSpring16RAWAODSIM_reHLT_80X_mcRun2_asymptotic_v14-v1/90000/3006D9AA-4450-E611-B471-0CC47A4D7626.root</a> temp.tmp
.
.
.
2566914048 bytes  32983.56 KB/sec avg  61441.16 KB/sec inst
2756706304 bytes  34514.02 KB/sec avg  92670.94 KB/sec inst

Transfer took 81050 ms

I recommend to assign this ticket to T2_BR_UERJ admins

Regards,
Jorge
Transfer Team

-- by dc.jorge10 at Mon Sep 26 21&#58;52&#58;22 UTC 2016

Dear site admin,
Looking at the configuration files at gitlab [1] the FTS Download agent configuration doesn&#39;t contain &#34;-timeout&#34; parameter.
Can you please confirm that is the case, and update the configuration by adding -timeout 9000 # 2h30. Once updated, can you restart the agent and updated the gitlab repository?

Sebastian.
Transfer Team

[1] <a href='https&#58;//gitlab.cern.ch/SITECONF/T2_BR_UERJ/blob/master/PhEDEx/ConfigPart.FTSDownload' target='_blank' rel='nofollow'>https&#58;//gitlab.cern.ch/SITECONF/T2_BR_UERJ/blob/master/PhEDEx/ConfigPart.FTSDownload</a>

-- by Sebastian Pulido at Tue Sep 27 09&#58;22&#58;21 UTC 2016
</div><script type='text/javascript'>
        $('#show_1314921147').click(function() {
            $('#detail_1314921147').slideDown("normal");
            $('#show_1314921147').hide();
            $('#hide_1314921147').show();
        });
        $('#hide_1314921147').click(function() {
            $('#detail_1314921147').slideUp();
            $('#hide_1314921147').hide();
            $('#show_1314921147').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F31355">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 31355});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
