<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[18763] BestMan SRM - transfer protocol choice no longer available in Bestman2.2.3.0 ?</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=18763" method="post">
<div class="page-header">
    <h3><span class="muted">18763</span> / BestMan SRM - transfer protocol choice no longer available in Bestman2.2.3.0 ?</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Jan Iven</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">LHCb</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Jan Iven</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">CERN</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-03-05</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Scott Teige <span class="muted"> / OSG Operations Infrastructure</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Carl Edquist <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/18763", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/18763?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/18763?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20BestMan%20SRM%20-%20transfer%20protocol%20choice%20no%20longer%20available%20in%20Bestman2.2.3.0%20%3F%20ISSUE%3D18763%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='18763#1392346123'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-14T02:48:43+00:00">Feb 14, 2014 02:48 AM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1392346123">&nbsp;</a></div><pre>Ok, that sounds good!

Resolving this ticket.</pre></div><div class='update_description'><i onclick="document.location='18763#1392312728'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-13T17:32:08+00:00">Feb 13, 2014 05:32 PM UTC</time><a class="anchor" name="1392312728">&nbsp;</a></div><pre>We will run with your pre-release until then, the issue is becoming urgent for LHCB.
Thanks again,
jan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=iven/CN=548381/CN=Jan Iven</pre></div><div class='update_description'><i onclick="document.location='18763#1392312248'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-13T17:24:08+00:00">Feb 13, 2014 05:24 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1392312248">&nbsp;</a></div><pre>Great!  Thanks Jan for testing this!

We&#39;ll plan to get it into the production osg release next month.

Carl</pre></div><div class='update_description'><i onclick="document.location='18763#1392281108'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-13T08:45:08+00:00">Feb 13, 2014 08:45 AM UTC</time><a class="anchor" name="1392281108">&nbsp;</a></div><pre>The new version 2.3.0/17.osg32 does allow protocol choice&#58;

$ for i in root gsiftp protoa protob ; do echo -n &#34;asking for $i &#58; &#34;; lcg-getturls --nobdii -T srmv2 &#39;srm&#58;//lxbst2139&#58;8443/srm/v2/server?SFN=/eos&#39; -p &#34;$i&#34;; done
asking for root &#58; root&#58;//eoslhcb.cern.ch//root
asking for gsiftp &#58; <a href='gsiftp&#58;//eoslhcbftp.cern.ch//eos' target='_blank' rel='nofollow'>gsiftp&#58;//eoslhcbftp.cern.ch//eos</a>
asking for protoa &#58; protoa&#58;//eoslhcb.cern.ch//a
asking for protob &#58; protob&#58;//eoslhcb.cern.ch//b

Thanks a lot,
jan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=iven/CN=548381/CN=Jan Iven</pre></div><div class='update_description'><i onclick="document.location='18763#1392225180'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-12T17:13:00+00:00">Feb 12, 2014 05:13 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1392225180">&nbsp;</a></div><pre>Hi Jan,

You beat me to updating this ticket!  &#58;)

I&#39;ve updated <a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1379' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1379</a> with the details of patching the OSG&#39;s bestman build with the changes from 2.2.2.  The new patched version is built and I just promoted it to osg-testing.

Do you have the osg yum repos installed?  (You can check by running &#34;rpm -q osg-release&#34;, and see if anything is returned.)
If so, you can install or update with&#58;

yum install --enablerepo=osg-testing bestman2-&#92;*

And it should pull down the 2.3.0-17 versions.  If it still shows 2.3.0-16, yum may be trying a mirror that hasn&#39;t synced the latest testing repos yet, and in that case you can try using &#34;--enablerepo=osg-development&#34; instead.

If you do not have the osg yum repos installed and would just like to download the rpms, you can get them from here&#58;

For EL5&#58;  <a href='http&#58;//koji-hub.batlab.org/mnt/koji/packages/bestman2/2.3.0/17.osg32.el5/noarch/' target='_blank' rel='nofollow'>http&#58;//koji-hub.batlab.org/mnt/koji/packages/bestman2/2.3.0/17.osg32.el5/noarch/</a>
For EL6&#58;  <a href='http&#58;//koji-hub.batlab.org/mnt/koji/packages/bestman2/2.3.0/17.osg32.el6/noarch/' target='_blank' rel='nofollow'>http&#58;//koji-hub.batlab.org/mnt/koji/packages/bestman2/2.3.0/17.osg32.el6/noarch/</a>

We would really appreciate it if you are able to test these to make sure the root protocol works as expected with these new builds.

Thanks!
Carl</pre></div><div class='update_description'><i onclick="document.location='18763#1392222962'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-12T16:36:02+00:00">Feb 12, 2014 04:36 PM UTC</time><a class="anchor" name="1392222962">&nbsp;</a></div><pre><a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1379' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1379</a> sounds as if there are to-be-tested RPMs somewhere - perhaps somebody could provide us with a link?
Thanks in advance,
jan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=iven/CN=548381/CN=Jan Iven</pre></div><div class='update_description'><i onclick="document.location='18763#1391464305'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-03T21:51:45+00:00">Feb 3, 2014 09:51 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1391464305">&nbsp;</a></div><pre>Thanks Brian and Jan, I&#39;ll work on getting the patches into our bestman.

I&#39;ve created <a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1379' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1379</a> to track the work for this.</pre></div><div class='update_description'><i onclick="document.location='18763#1391422077'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-03T10:07:57+00:00">Feb 3, 2014 10:07 AM UTC</time><a class="anchor" name="1391422077">&nbsp;</a></div><pre>Thanks Brian. Not having those patches would be entirely consistent with the errors &#58;-) , the &#34;2.3.0&#34; version number had me fooled..
AFAIK we had no other pending patches in there. Since I cannot view the revisions on SVN, I&#39;ve just done a diff from 2.2.1 -&#62; 2.2.2 in case it helps.
<a href='https&#58;//box.cern.ch/owncloud/public.php?service=files&t=e5cfbd1cfdaed67e479f555147721789' target='_blank' rel='nofollow'>https&#58;//box.cern.ch/owncloud/public.php?service=files&t=e5cfbd1cfdaed67e479f555147721789</a>

(cannot attach directly, apparently the ticket tracker only takes images?)

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=iven/CN=548381/CN=Jan Iven</pre></div><div class='update_description'><i onclick="document.location='18763#1391118614'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-30T21:50:14+00:00">Jan 30, 2014 09:50 PM UTC</time><a class="anchor" name="1391118614">&nbsp;</a></div><pre>Yup.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='18763#1391111284'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-30T19:48:04+00:00">Jan 30, 2014 07:48 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1391111284">&nbsp;</a></div><pre>Thanks Brian,

You mean r93-95 from <a href='https&#58;//codeforge.lbl.gov/anonscm/bestman' target='_blank' rel='nofollow'>https&#58;//codeforge.lbl.gov/anonscm/bestman</a>, right?

Carl</pre></div><div class='update_description'><i onclick="document.location='18763#1391093377'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-30T14:49:37+00:00">Jan 30, 2014 02:49 PM UTC</time><a class="anchor" name="1391093377">&nbsp;</a></div><pre>Hi Carl,

You probably want to pull in the patches from r93-95 in the bestman2 repo.  Seems to implement the feature Jan references.

Jan - since we effectively maintain a fork, we pull in patches by hand (which is quite unpleasant in SVN...).  Anything else we should grab while we&#39;re at it?

Brian

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='18763#1390584762'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-24T17:32:42+00:00">Jan 24, 2014 05:32 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1390584762">&nbsp;</a></div><pre>Hi Jan,

That&#39;s ok if you don&#39;t have the original SRPM around still, but I&#39;d be really curious to see something approximate for the .spec and source tarball you used for 2.2.2 (something that when built still works with the root protocol), just to see what all might have changed...

In the mean time, do you have the built binary rpm you used for 2.2.2?  That might be useful on our end just to make sure we can reproduce the problem with the version you used.

Thanks!
Carl</pre></div><div class='update_description'><i onclick="document.location='18763#1390496378'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-23T16:59:38+00:00">Jan 23, 2014 04:59 PM UTC</time><a class="anchor" name="1390496378">&nbsp;</a></div><pre>Yes, confirm that this was/is working&#58;
$ for i in root gsiftp ; do echo -n &#34;asking for $i &#58; &#34;; lcg-getturls --nobdii -T srmv2 &#39;srm&#58;//srm-eoslhcb&#58;8443/srm/v2/server?SFN=/eos&#39; -p &#34;$i&#34;; done
asking for root &#58; root&#58;//eoslhcb.cern.ch//eos
asking for gsiftp &#58; <a href='gsiftp&#58;//eoslhcbftp.cern.ch//eos' target='_blank' rel='nofollow'>gsiftp&#58;//eoslhcbftp.cern.ch//eos</a>

However, that is with &#34;our&#34; packaged version of bestman-2.2.2. Note&#58; the patch landed only in 2.2.2, so 2.2.1 would be expected to fail&#58;
2.2.2.2.2   Sat Sep 29 16&#58;22&#58;20 PDT 2012
* server
1. BeStMan Gateway now supports Transfer Protocol selection (requested by EOS)
2. bug fix in the MSS plugin interface for srmLs

Regarding the SRPM - our SVN repo was not clean (RPM was build from an incorrectly-tagged state). Trying to clean up - but I have reviewed the .spec file and we did not have additional patches for the protocol selection.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=iven/CN=548381/CN=Jan Iven</pre></div><div class='update_description'><i onclick="document.location='18763#1390494254'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-23T16:24:14+00:00">Jan 23, 2014 04:24 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1390494254">&nbsp;</a></div><pre>Was this actually working in the past for you? I just set up a bestman2 server (version 2.2.1) with the config&#58;

acceptProtocols=root[/eos /eos]
supportedProtocolList=root&#58;//fermicloud093.fnal.gov;<a href='gsiftp&#58;//fermicloud099.fnal.gov' target='_blank' rel='nofollow'>gsiftp&#58;//fermicloud099.fnal.gov</a>

$ for i in root gsiftp ; do echo -n &#34;asking for $i &#58; &#34;; lcg-getturls --nobdii -T srmv2 &#39;<a href='srm&#58;//fermicloud099.fnal.gov&#58;8443/srm/v2/server?SFN=/tmp&#39' target='_blank' rel='nofollow'>srm&#58;//fermicloud099.fnal.gov&#58;8443/srm/v2/server?SFN=/tmp&#39</a>; -p &#34;$i&#34;; done
asking for root &#58; <a href='gsiftp&#58;//fermicloud099.fnal.gov//tmp' target='_blank' rel='nofollow'>gsiftp&#58;//fermicloud099.fnal.gov//tmp</a>
asking for gsiftp &#58; <a href='gsiftp&#58;//fermicloud099.fnal.gov//tmp' target='_blank' rel='nofollow'>gsiftp&#58;//fermicloud099.fnal.gov//tmp</a>

Now maybe something&#39;s wrong with the xrootd server I have set up but I can&#39;t get it to differentiate between the protocols on this older version of bestman2.

- Brian</pre></div><div class='update_description'><i onclick="document.location='18763#1390421194'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-22T20:06:34+00:00">Jan 22, 2014 08:06 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1390421194">&nbsp;</a></div><pre>Jan,

I&#39;m working on getting a setup so that I can reproduce your problem and explore the problem further. Any word on the SRPM?

- Brian</pre></div><div class='update_description'><i onclick="document.location='18763#1389777788'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-15T09:23:08+00:00">Jan 15, 2014 09:23 AM UTC</time> by <b>jan.iven@....</b><a class="anchor" name="1389777788">&nbsp;</a></div><pre>(Attachements are stripped, putting the config files inline).

/etc/bestman2/conf/bestman2.rc (comments removed)&#58;

EventLogLocation=/var/log/bestman2
eventLogLevel=DEBUG
securePort=8443
CertFileName=/etc/grid-security/bestman/bestmancert.pem
KeyFileName=/etc/grid-security/bestman/bestmankey.pem
pathForToken=true
fsConcurrency=40
checkSizeWithFS=true
checkSizeWithGsiftp=false
accessFileSysViaSudo=true
noSudoOnLs=false
MaxMappedIDCached=1000
LifetimeSecondsMappedIDCached=1800
GridMapFileName=/etc/grid-security/grid-mapfile
disableSpaceMgt=true
useBerkeleyDB=false
noCacheLog=true
Concurrency=30
FactoryID=srm/v2/server
noEventLog=false
MaxConcurrentFileTransfer=16
NoDirBrowsing=false
SRM_OWNER=daemon
acceptProtocols=root[/eos /eos];protoa[/eos /a];protob[/eos /b]
defaultChecksumType=adler32
hexChecksumCommand=/usr/sbin/eos-srm-checksum
localPathListAllowed=/eos
showChecksumWhenListingFile=true
staticTokenList=LHCb-EOS[desc&#58;LHCb-EOS][owner&#58;lhcb][path&#58;/eos/lhcb][latency&#58;ONLINE][retention&#58;REPLICA][usedBytesCommand&#58;/usr/sbin/eos-srm-used-bytes][totalBytesCommand&#58;/usr/sbin/eos-srm-max-bytes][1234];LHCbOPSTEST[desc&#58;OPSTEST][owner&#58;ops][path&#58;/eos/lhcb/opstest][latency&#58;ONLINE][retention&#58;REPLICA][usedBytesCommand&#58;/usr/sbin/eos-srm-used-bytes][totalBytesCommand&#58;/usr/sbin/eos-srm-max-bytes][1234]
supportedProtocolList=root&#58;//eoslhcb.cern.ch;protoa&#58;//eoslhcb.cern.ch;protob&#58;//eoslhcb.cern.ch;<a href='gsiftp&#58;//eoslhcbftp.cern.ch' target='_blank' rel='nofollow'>gsiftp&#58;//eoslhcbftp.cern.ch</a>

<div id='show_1826559969' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1826559969'>/etc/sysconfig/bestman2 &#58;

BESTMAN2_CONF=/etc/bestman2/conf/bestman2.rc
BESTMAN_CONNECTION_ACCEPTORSIZE=8
BESTMAN_CONNECTOR_QUEUESIZE=512
BESTMAN_FULLMODE_ENABLED=no
BESTMAN_GATEWAYMODE_ENABLED=yes
BESTMAN_GUMS_ENABLED=no
BESTMAN_LIB=/usr/share/java/bestman2
BESTMAN_LOCK=/var/lock/bestman2
BESTMAN_LOG=/var/log/bestman2/bestman2.log
BESTMAN_MAX_JAVA_HEAP=8192
BESTMAN_PID=/var/run/bestman2.pid
BESTMAN_SYSCONF=/etc/sysconfig/bestman2
BESTMAN_SYSCONF_LIB=/etc/sysconfig/bestman2lib
JAVA_CLIENT_MAX_HEAP=512
JAVA_CLIENT_MIN_HEAP=32
JAVA_HOME=/etc/alternatives/java_sdk
JETTY_DEBUG_ENABLED=no
SRM_HOME=/etc/bestman2
SRM_OWNER=daemon
X509_CERT_DIR=/etc/grid-security/certificates
BESTMAN_JAVA_SRM_OTHER_OPTS=&#39;-agentlib&#58;jdwp=transport=dt_socket,server=y,suspend=n,address=localhost&#58;8000&#39;
</div><script type='text/javascript'>
        $('#show_1826559969').click(function() {
            $('#detail_1826559969').slideDown("normal");
            $('#show_1826559969').hide();
            $('#hide_1826559969').show();
        });
        $('#hide_1826559969').click(function() {
            $('#detail_1826559969').slideUp();
            $('#hide_1826559969').hide();
            $('#show_1826559969').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='18763#1389777433'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-15T09:17:13+00:00">Jan 15, 2014 09:17 AM UTC</time> by <b>jan.iven@....</b><a class="anchor" name="1389777433">&nbsp;</a></div><pre>[root@lxbst2139 ~]# grep eventLogLevel /etc/bestman2/conf/bestman2.rc
# Modify eventLogLevel to adjust logging level (DEBUG | INFO)
eventLogLevel=DEBUG

[root@lxbst2139 bestman2]# grep input&#58;  /var/log/bestman2/bestman2.log
==&#62; input&#58; gsiftp 0th&#58; eoslhcbftp.cern.ch
==&#62; input&#58; protoa 0th&#58; eoslhcb.cern.ch
==&#62; input&#58; protob 0th&#58; eoslhcb.cern.ch
==&#62; input&#58; root 0th&#58; eoslhcb.cern.ch

---
No plugins for source selection.

Config files (as used for the test) are attached.

---
Will try to rebuild the previous version as SRPM (we don&#39;t keep these
around usually)

Thanks for the support,
jan</pre></div><div class='update_description'><i onclick="document.location='18763#1389740332'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-14T22:58:52+00:00">Jan 14, 2014 10:58 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1389740332">&nbsp;</a></div><pre>If your &#39;eventLogLevel&#39; is set to CONSOLE or INFO in /etc/bestman2/conf/bestman2.rc, you should have a line that contains the text &#39;input&#58; root&#39;. What does that line say?

- Brian</pre></div><div class='update_description'><i onclick="document.location='18763#1389729425'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-14T19:57:05+00:00">Jan 14, 2014 07:57 PM UTC</time><a class="anchor" name="1389729425">&nbsp;</a></div><pre>Hi Jan,

Can you upload a copy of the bestman config file?  Are you using any bestman2 plugins for source selection?

Thanks,

Brian

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='18763#1389726028'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-14T19:00:28+00:00">Jan 14, 2014 07:00 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1389726028">&nbsp;</a></div><pre>Jan,

I don&#39;t have any experience with root protocols in BeStMaN but I&#39;ll take a look. Would you happen to have an srpm of the bestman2 package you guys used where the root protocol worked?

- Brian</pre></div><div class='update_description'><i onclick="document.location='18763#1389722302'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-14T17:58:22+00:00">Jan 14, 2014 05:58 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1389722302">&nbsp;</a></div><pre>Sorry, me neither. Never had to look in to this before.

-Neha</pre></div><div class='update_description'><i onclick="document.location='18763#1389720871'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-14T17:34:31+00:00">Jan 14, 2014 05:34 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1389720871">&nbsp;</a></div><pre>I am probably a wrong person to ask. I know nothing about root protocol implementation for BeStMan. I am adding Neha to see if she knows anything about that.</pre></div><div class='update_description'><i onclick="document.location='18763#1389720307'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-14T17:25:07+00:00">Jan 14, 2014 05:25 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1389720307">&nbsp;</a></div><pre>CC-ing Tanya also.</pre></div><div class='update_description'><i onclick="document.location='18763#1389720028'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-14T17:20:28+00:00">Jan 14, 2014 05:20 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1389720028">&nbsp;</a></div><pre>(Assigning the software team)</pre></div><div class='update_description'><i onclick="document.location='18763#1389717707'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-01-14T16:41:47+00:00">Jan 14, 2014 04:41 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1389717707">&nbsp;</a></div><pre>LHCb would like to use &#34;root&#34; as transfer protocol for URLs obtained via BestMan SRM, default is &#34;gsiftp&#34;. This transport protocol choice was implemented in bestman2-2.2.2 - see
<a href='https&#58;//sdm.lbl.gov/twiki/bin/https&#58' target='_blank' rel='nofollow'>https&#58;//sdm.lbl.gov/twiki/bin/https&#58</a>;//codeforge.lbl.gov/frs/shownotes.php?release_id=354
and documented in
<a href='https&#58;//sdm.lbl.gov/twiki/bin/view/Software/BeStMan/BeStMan2Guide/BeStMan2FAQ#I_have_other_transfer_protocols' target='_blank' rel='nofollow'>https&#58;//sdm.lbl.gov/twiki/bin/view/Software/BeStMan/BeStMan2Guide/BeStMan2FAQ#I_have_other_transfer_protocols</a>

We have switched to the OSG-provided RPMs for 2.3.0 (in order to get SHA2 support), from a 2.2.2. version we had packaged ourselves, and I cannot get the transfer protocol selection to work again. I&#39;ve cursorily checked the code, the protocol choice mechanism is still in place - so this might be a misconfiguration on our side. We have tried using the old config files, though.

Configuration&#58; in /etc/bestman2/conf/bestman2.rc we have
[..]
acceptProtocols=root[/eos /eos];protoa[/eos /a];protob[/eos /b]
supportedProtocolList=root&#58;//eoslhcb.cern.ch;protoa&#58;//eoslhcb.cern.ch;protob&#58;//eoslhcb.cern.ch;<a href='gsiftp&#58;//eoslhcbftp.cern.ch' target='_blank' rel='nofollow'>gsiftp&#58;//eoslhcbftp.cern.ch</a>

Reproducer (with e.g. a valid dteam proxy cert)&#58;

$ for i in root protoa gsiftp ; do echo -n &#34;asking for $i &#58; &#34;; lcg-getturls --nobdii -T srmv2 &#39;<a href='srm&#58;//lxbst2139.cern.ch&#58;8443/srm/v2/server?SFN=/eos/lhcb/test&#39' target='_blank' rel='nofollow'>srm&#58;//lxbst2139.cern.ch&#58;8443/srm/v2/server?SFN=/eos/lhcb/test&#39</a>; -p &#34;$i&#34;; done
asking for root &#58; <a href='gsiftp&#58;//eoslhcbftp.cern.ch//eos/lhcb/test' target='_blank' rel='nofollow'>gsiftp&#58;//eoslhcbftp.cern.ch//eos/lhcb/test</a>
asking for protoa &#58; <a href='gsiftp&#58;//eoslhcbftp.cern.ch//eos/lhcb/test' target='_blank' rel='nofollow'>gsiftp&#58;//eoslhcbftp.cern.ch//eos/lhcb/test</a>
asking for gsiftp &#58; <a href='gsiftp&#58;//eoslhcbftp.cern.ch//eos/lhcb/test' target='_blank' rel='nofollow'>gsiftp&#58;//eoslhcbftp.cern.ch//eos/lhcb/test</a>

Versions&#58;
bestman2-server-2.3.0-16.osg.el5
bestman2-server-dep-libs-2.3.0-16.osg.el5
bestman2-server-libs-2.3.0-16.osg.el5
bestman2-common-libs-2.3.0-16.osg.el5

Would you be aware of any other parameter that might override/influence the protocol choice?
Thanks in advance
jan

by Jan Iven (guest)</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F18763">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
