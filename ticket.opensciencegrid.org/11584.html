<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[11584] VO confusion on NERSC-Carver</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=11584" method="post">
<div class="page-header">
    <h3><span class="muted">11584</span> / VO confusion on NERSC-Carver</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Steve Timm</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">NERSC-Carver</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/resource</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Steve Timm</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-08-06</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">NERSC <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/11584", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/11584?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/11584?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20VO%20confusion%20on%20NERSC-Carver%20ISSUE%3D11584%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='11584#1345051277'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-15T17:21:17+00:00">Aug 15, 2012 05:21 PM UTC</time><a class="anchor" name="1345051277">&nbsp;</a></div><pre>I believe Shreyas&#39; changes have now fixed the issue and the ticket can be closed.
Thanks all for their help.

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11584#1344960382'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-14T16:06:22+00:00">Aug 14, 2012 04:06 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1344960382">&nbsp;</a></div><pre>Hi Steve,

Did Shreyas&#39;s changes fix the issue?  If so can the ticket be closed?

Suchandra Thapa
Software Team</pre></div><div class='update_description'><i onclick="document.location='11584#1343854928'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-01T21:02:08+00:00">Aug 1, 2012 09:02 PM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1343854928">&nbsp;</a></div><pre>OK - I&#39;ve fixed this. Let us know if things look better.
-Shreyas

On Wed, Aug 1, 2012 at 12&#58;53 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1343850788'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-01T19:53:08+00:00">Aug 1, 2012 07:53 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1343850788">&nbsp;</a></div><pre>To fix Derek&#39;s case all you have to do is add

&#34;hcc&#34;

to the end of the #voi line

and

&#34;HCC&#34;

to the end of the #VOc line.

This would then have to be repeated if other new VO&#39;s get added.

Steve Timm

On Wed, 1 Aug 2012, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1343849348'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-01T19:29:08+00:00">Aug 1, 2012 07:29 PM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1343849348">&nbsp;</a></div><pre>OK - this looks like forward progress.

Here is our file.

Can you send me a current sample mapfile to make sure we have all the VOs?

-Shreyas

On Wed, Aug 1, 2012 at 12&#58;10 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1343848202'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-01T19:10:02+00:00">Aug 1, 2012 07:10 PM UTC</time><a class="anchor" name="1343848202">&nbsp;</a></div><pre>Shreyas, can you please send the contents of your osg-user-vo-map.txt file?
The error message you are listing below indicates that you don&#39;t have the &#34;hcc&#34; VO declared
in it.  Up until you installed the patch, user &#34;dweitzel&#34; was reporting as VO &#34;m670&#34; presumably
due to the -A flag in PBS.
Now he would be reporting via the VO and FQAN information that is captured by GRAM.
If your osg-user-vo-map.txt isn&#39;t current, it needs to be.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11584#1343847909'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-01T19:05:09+00:00">Aug 1, 2012 07:05 PM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1343847909">&nbsp;</a></div><pre>Hi Steve

Please find attached the gratia log file for the most recent run today.

I noticed the following line, which may be interesting&#58;

11&#58;55&#58;01 PDT Gratia&#58; WARNING&#58; voi &#34;hcc&#34; listed for user &#34;dweitzel&#34; not
found in (voi, VOc) table
11&#58;55&#58;01 PDT Gratia&#58; Info&#58; suppressing record with GlobalJobId
cvrsvc09-ib&#58;3036866.cvrsvc09-ib_1343832837 due to unknown or null
VOName
11&#58;55&#58;01 PDT Gratia&#58; No unsuppressed usage records in
/usr/syscom/osg/1.2-ce/gratia/var/tmp/urCollector/pbs_3036866.cvrsvc09-ib_1343847266&#58;
not sending

-Shreyas

On Wed, Aug 1, 2012 at 11&#58;52 AM, Shreyas Cholia &#60;scholia@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; Hi Steve</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Looks like I only had the &#34;PBS&#34; probe installed but not the &#34;common&#34; probe.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I went ahead and installed this. The probe itself seems to be talking</font>
<font color='#7F7E6F'>&#62; to the gratia collector now. Unclear if the original issue has been</font>
<font color='#7F7E6F'>&#62; resolved yet.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Not sure if it matters, but the log file seems to have several entries that say&#58;</font>
<font color='#7F7E6F'>&#62; 11&#58;47&#58;43 PDT Gratia&#58; File</font>
<font color='#7F7E6F'>&#62; /usr/syscom/osg/1.2-ce/gratia/var/tmp/urCollector/pbs_3035053.cvrsvc09-ib_1343796342</font>
<font color='#7F7E6F'>&#62; is zero-length&#58; skipping</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -Shreyas</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Wed, Aug 1, 2012 at 11&#58;39 AM, Open Science Grid FootPrints</font>
<font color='#7F7E6F'>&#62; &#60;osg@....&#62; wrote&#58;</font>
<div id='show_599165078' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_599165078'><font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_599165078').click(function() {
            $('#detail_599165078').slideDown("normal");
            $('#show_599165078').hide();
            $('#hide_599165078').show();
        });
        $('#hide_599165078').click(function() {
            $('#detail_599165078').slideUp();
            $('#hide_599165078').hide();
            $('#show_599165078').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='11584#1343847187'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-01T18:53:07+00:00">Aug 1, 2012 06:53 PM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1343847187">&nbsp;</a></div><pre>Hi Steve

Looks like I only had the &#34;PBS&#34; probe installed but not the &#34;common&#34; probe.

I went ahead and installed this. The probe itself seems to be talking
to the gratia collector now. Unclear if the original issue has been
resolved yet.

Not sure if it matters, but the log file seems to have several entries that say&#58;
11&#58;47&#58;43 PDT Gratia&#58; File
/usr/syscom/osg/1.2-ce/gratia/var/tmp/urCollector/pbs_3035053.cvrsvc09-ib_1343796342
is zero-length&#58; skipping

-Shreyas

On Wed, Aug 1, 2012 at 11&#58;39 AM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1343846362'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-01T18:39:22+00:00">Aug 1, 2012 06:39 PM UTC</time><a class="anchor" name="1343846362">&nbsp;</a></div><pre>NERSC-Carver hasn&#39;t reported anything to Gratia at all since 2012-07-30.
We need to see some gratia records from them before we can declare the change to be done.
Derek Weitzel of hcc has been running there regularly.  They have been reporting him as VO &#34;m670&#34;
We will see what happens when the new records get here.
Shreyas, you should check your gratia probe logs to see why nothing is being sent out.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11584#1343842347'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-01T17:32:27+00:00">Aug 1, 2012 05:32 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1343842347">&nbsp;</a></div><pre>Steve,

Do the problems you originally noticed still persist?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='11584#1343673488'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-30T18:38:08+00:00">Jul 30, 2012 06:38 PM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1343673488">&nbsp;</a></div><pre>Hi Kyle

OK - I&#39;ve gone ahead and installed the PBS probe at&#58;

<a href='http&#58;//vdt.cs.wisc.edu/software/gratia/gratia-pbs-lsf-probe//1.07.02e-2.osg/' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/software/gratia/gratia-pbs-lsf-probe//1.07.02e-2.osg/</a>

... along with Tanya&#39;s patch.

Please let us know if things look better.

-Shreyas

On Thu, Jul 26, 2012 at 10&#58;31 AM, Shreyas Cholia &#60;scholia@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; Hi Kyle</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Not quite yet. I started the setting up the new Gratia, but got</font>
<font color='#7F7E6F'>&#62; sidetracked with recovering fixing some local changes that were</font>
<font color='#7F7E6F'>&#62; overwritten.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I hope to have this wrapped up by the end of the week.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -Shreyas</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Thu, Jul 26, 2012 at 6&#58;50 AM, Open Science Grid FootPrints</font>
<font color='#7F7E6F'>&#62; &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1343323940'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-26T17:32:20+00:00">Jul 26, 2012 05:32 PM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1343323940">&nbsp;</a></div><pre>Hi Kyle

Not quite yet. I started the setting up the new Gratia, but got
sidetracked with recovering fixing some local changes that were
overwritten.

I hope to have this wrapped up by the end of the week.

-Shreyas

On Thu, Jul 26, 2012 at 6&#58;50 AM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1343310610'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-26T13:50:10+00:00">Jul 26, 2012 01:50 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1343310610">&nbsp;</a></div><pre>Shreyas,

Has this been handled?  Can the ticket be closed?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='11584#1342632007'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-18T17:20:07+00:00">Jul 18, 2012 05:20 PM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1342632007">&nbsp;</a></div><pre>Not sure its even worth trying to debug pacman. Should be easy enough
to download and install the tarball.

I&#39;ll go ahead and do that. Thanks Alain!

-Shreyas

On Tue, Jul 17, 2012 at 9&#58;03 AM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1342541020'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-17T16:03:40+00:00">Jul 17, 2012 04:03 PM UTC</time> by <b>Alain Roy</b><a class="anchor" name="1342541020">&nbsp;</a></div><pre>Hi Shreyas,

It&#39;s hard to debug the Pacman problem without error messages. If you&#39;re happy downloading things and patching manually, then&#58;

1) The latest Pacman release downloads a tarball from&#58;
<a href='http&#58;//vdt.cs.wisc.edu/software/gratia/gratia-pbs-lsf-probe//1.07.02e-2.osg/' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/software/gratia/gratia-pbs-lsf-probe//1.07.02e-2.osg/</a>

2) You can download the latest RPM and grab stuff from it. It&#39;s a fairly different version, so I don&#39;t know if that&#39;s safe or not.
<a href='http&#58;//repo.grid.iu.edu/3.0/el5/osg-release/x86_64/' target='_blank' rel='nofollow'>http&#58;//repo.grid.iu.edu/3.0/el5/osg-release/x86_64/</a>

-alain
------------------------------------
Alain Roy
OSG Software Support
vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='11584#1342538073'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-17T15:14:33+00:00">Jul 17, 2012 03:14 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1342538073">&nbsp;</a></div><pre>I&#39;m adding the software team to this ticket in hopes that they can help with the pacman install issues.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='11584#1342127410'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-12T21:10:10+00:00">Jul 12, 2012 09:10 PM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1342127410">&nbsp;</a></div><pre>Hmm - I&#39;m having trouble with the pacman install - it doesn&#39;t seem
happy with the update. Can someone point me to a Gratia package that I
can download and install in a standalone manner?

We will probably have to move to an RPM based install in the fall
anyway, so I&#39;m not sure it is worth trying to debug pacman, but I can
probably patch gratia by hand.

-Shreyas

On Wed, Jul 11, 2012 at 12&#58;32 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1342035128'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-11T19:32:08+00:00">Jul 11, 2012 07:32 PM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1342035128">&nbsp;</a></div><pre>OK - I&#39;ll pull down a newer Gratia and apply the patch.

-Shreyas

On Wed, Jul 11, 2012 at 11&#58;10 AM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1342030239'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-11T18:10:39+00:00">Jul 11, 2012 06:10 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1342030239">&nbsp;</a></div><pre>Hi,

The pacman release didn&#39;t have all the patches. Please update to 1.07.02e-2.osg and then apply the patch I have sent you.
Thanks,
Tanya</pre></div><div class='update_description'><i onclick="document.location='11584#1342029868'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-11T18:04:28+00:00">Jul 11, 2012 06:04 PM UTC</time><a class="anchor" name="1342029868">&nbsp;</a></div><pre>Shreyas, I would recommend getting up to the latest urCollector in
the vdt 2.x series which is Gratia PBS Probe 1.07.02e-2.osg
(it comes with the Gratia PBS probe).

Steve timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11584#1342028817'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-11T17:46:57+00:00">Jul 11, 2012 05:46 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1342028817">&nbsp;</a></div><pre>Steve,

Is Shreyas&#39; question something you can speak to or should I bring the software team in?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='11584#1341961149'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-10T22:59:09+00:00">Jul 10, 2012 10:59 PM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1341961149">&nbsp;</a></div><pre>Ok - looking at this some more, my urCollector actually seems a little
bit behind the one that the patch was generated for. I&#39;m wondering if
I should just install a new standalone urCollector.pl (or possibly
even a new gratia probe package).

I can try to patch by hand, but it might be worth getting newer code in place.

-Shreyas

On Tue, Jul 10, 2012 at 3&#58;29 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1341959349'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-10T22:29:09+00:00">Jul 10, 2012 10:29 PM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1341959349">&nbsp;</a></div><pre>Looking into it now
-Shreyas

On Fri, Jul 6, 2012 at 7&#58;25 AM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1341584739'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-06T14:25:39+00:00">Jul 6, 2012 02:25 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1341584739">&nbsp;</a></div><pre>Shreyas,

Any chance you&#39;ve hbeen able to look into this?

Thanks!

-Kyle</pre></div><div class='update_description'><i onclick="document.location='11584#1341008227'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-06-29T22:17:07+00:00">Jun 29, 2012 10:17 PM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1341008227">&nbsp;</a></div><pre>Hi Kyle

No updates yet. Sorry for the delays. I&#39;m on vacation until next
Thursday, so I&#39;ll try to get this done when I get back.

-Shreyas

On Thu, Jun 28, 2012 at 10&#58;13 AM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1340903579'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-06-28T17:12:59+00:00">Jun 28, 2012 05:12 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1340903579">&nbsp;</a></div><pre>Shreyas,

Have there been any updates?

Thanks,

Kyle</pre></div><div class='update_description'><i onclick="document.location='11584#1339787288'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-06-15T19:08:08+00:00">Jun 15, 2012 07:08 PM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1339787288">&nbsp;</a></div><pre>Hi Kyle

My apologies - this fell off our plate due to a couple of urgent
security issues.

Will give it a crack on Monday. Sorry for the delay - I hope to get
this resolved pretty quickly.

-Shreyas

On Fri, Jun 15, 2012 at 7&#58;16 AM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1339769796'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-06-15T14:16:36+00:00">Jun 15, 2012 02:16 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1339769796">&nbsp;</a></div><pre>Shreyas,

Have you been able to get to this yet?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='11584#1338403628'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-30T18:47:08+00:00">May 30, 2012 06:47 PM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1338403628">&nbsp;</a></div><pre>Hi Kyle

I will get to this on Friday or Monday. Have too many urgent fires this week.

-Shreyas

On Tue, May 29, 2012 at 6&#58;56 AM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1338299806'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-29T13:56:46+00:00">May 29, 2012 01:56 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1338299806">&nbsp;</a></div><pre>Shreyas,

Were you able to apply the patch?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='11584#1337630348'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-21T19:59:08+00:00">May 21, 2012 07:59 PM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1337630348">&nbsp;</a></div><pre>We are still running the pacman version. I will check out the patch.

-Shreyas

On Mon, May 21, 2012 at 10&#58;37 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1337621847'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-21T17:37:27+00:00">May 21, 2012 05:37 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1337621847">&nbsp;</a></div><pre>I am attaching a patch. I assume that you have pacman installation of the pbs probe(Gratia PBS Probe 1.07.02e-2.osg  ).
If this not the case please let me know your version number.

Thanks,
Tanya</pre></div><div class='update_description'><i onclick="document.location='11584#1337355391'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-18T15:36:31+00:00">May 18, 2012 03:36 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1337355391">&nbsp;</a></div><pre>Hi,

I hoped that the pacman version will be released with the patches but it doesn&#39;t look that this will happen anytime soon. Does NERSC plan to upgrade to rpm release? If not I will  send a patch.

Sorry for missing this ticket,
Tanya</pre></div><div class='update_description'><i onclick="document.location='11584#1337354771'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-18T15:26:11+00:00">May 18, 2012 03:26 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1337354771">&nbsp;</a></div><pre>No, the problem still persists, some new junk VO&#39;s just came
in from that site just a couple of days ago.

Steve Timm

On Fri, 18 May 2012, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1337352435'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-18T14:47:15+00:00">May 18, 2012 02:47 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1337352435">&nbsp;</a></div><pre>Tanya/Steve,

Was this handled out of band?  I haven&#39;t heard from Tanya for many weeks.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='11584#1335975610'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-02T16:20:10+00:00">May 2, 2012 04:20 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1335975610">&nbsp;</a></div><pre>I will be on business travel from May 2-4 2012. I will have access to email during this time but only limited time to reply.  For issues related to FermiGrid or FermiCloud please contact the Service Desk at <a href='http&#58;//servicedesk.fnal.gov' target='_blank' rel='nofollow'>http&#58;//servicedesk.fnal.gov</a> or at extension 2345.

Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11584#1335975550'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-05-02T16:19:10+00:00">May 2, 2012 04:19 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1335975550">&nbsp;</a></div><pre>Tanya,

Have you sent instructions for this issue yet?  We haven&#39;t heard from you since the OSG All Hands meeting.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='11584#1334949701'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-20T19:21:41+00:00">Apr 20, 2012 07:21 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1334949701">&nbsp;</a></div><pre>Tanya,

Have you sent instructions for this issue yet?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='11584#1334250045'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-12T17:00:45+00:00">Apr 12, 2012 05:00 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1334250045">&nbsp;</a></div><pre>Tanya,

Have you sent instructions for this issue yet?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='11584#1333644137'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-05T16:42:17+00:00">Apr 5, 2012 04:42 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1333644137">&nbsp;</a></div><pre>Tanya,

Have you sent instructions for this issue yet?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='11584#1333108742'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-30T11:59:02+00:00">Mar 30, 2012 11:59 AM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1333108742">&nbsp;</a></div><pre>Tanya,

Have you sent instructions for this issue yet?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='11584#1332425108'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-22T14:05:08+00:00">Mar 22, 2012 02:05 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1332425108">&nbsp;</a></div><pre>Hi,
I have not seen the ticket.I will check it and send instructions tomorrow.
Thanks,
Tanya
________________________________________
From&#58; Steven C Timm
Sent&#58; Thursday, March 22, 2012 9&#58;01 AM
To&#58; osg@....
Cc&#58; Tanya Levshina
Subject&#58; RE&#58; Open Science Grid&#58; VO confusion on NERSC-Carver ISSUE=11584 PROJ=71

Tanya is with me at the OSG All Hands Meeting, unfortunately Shreyas is not here at the meeting.
Tanya--we need to get Shreyas Cholia at LBL the right instructions to patch the urCollector.pl to beat the UserVOName bug.

Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11584#1332424927'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-22T14:02:07+00:00">Mar 22, 2012 02:02 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1332424927">&nbsp;</a></div><pre>Tanya is with me at the OSG All Hands Meeting, unfortunately Shreyas is not here at the meeting.
Tanya--we need to get Shreyas Cholia at LBL the right instructions to patch the urCollector.pl to beat the UserVOName bug.

Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11584#1332424311'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-22T13:51:51+00:00">Mar 22, 2012 01:51 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1332424311">&nbsp;</a></div><pre>Is Tanya back yet?  Has any progress been made?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='11584#1331337667'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-10T00:01:07+00:00">Mar 10, 2012 12:01 AM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1331337667">&nbsp;</a></div><pre>Hi Steve

OK - let me know when Tania gets back and we can figure out what lines to
change.

I can also run the Gratia code through a debugger to see what is actually
happening next week.

-Shreyas

On Fri, Mar 9, 2012 at 2&#58;17 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1331331478'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-09T22:17:58+00:00">Mar 9, 2012 10:17 PM UTC</time><a class="anchor" name="1331331478">&nbsp;</a></div><pre>Hi  Shreyas--whatever change you made doesn&#39;t seem to have had any effect.
The vo&#39;s we are getting from NERSC-Carver are still mpccc and m670
with mpccc containing nersc staff dn&#39;s of various names including you and Jeff Porter,
and m670 containing Derek Weitzel.
What you said about the patch below doesn&#39;t look right.. the idea of the patch
I was aware of was to get the UserVOName out of the usage record entirely.
Unfortunately Tanya Levshina, the developer who specified the patch, has just left on
vacation for a week so it might be a while before we can do more on this.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11584#1330628414'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-01T19:00:14+00:00">Mar 1, 2012 07:00 PM UTC</time> by <b>NERSC</b><a class="anchor" name="1330628414">&nbsp;</a></div><pre>Recently you contacted NERSC Consulting or Account Support Services.
Below is a summary of your request and our response.

NERSC users may update this specific question by following this link&#58;
<a href='https&#58;//help.nersc.gov/login/?p_userid=osg' target='_blank' rel='nofollow'>https&#58;//help.nersc.gov/login/?p_userid=osg</a>@tick.globalnoc.iu.edu&p_next_page=myq_upd.php&p_iid=125457&p_created=1328295301

Subject
---------------------------------------------------------------
Open Science Grid&#58; VO confusion on NERSC-Carver ISSUE=11584 PROJ=71

Discussion Thread
---------------------------------------------------------------
Response (Shreyas Cholia) - 03/01/2012 10&#58;59
Hi Steve

OK - I&#39;ve updated Gratia.

Just to confirm, the following line (1008 in urCollector.pl) is always true&#58;
$cmd .= &#34;&#92;&#34;UserVOName=$urAcctlogInfo{account}&#92;&#34; &#34;;

We have removed the conditionals around it.

Could you check things on your end to see what is being reported?

-Shreyas

Question Reference #120203-000017
---------------------------------------------------------------
Platform Level 1&#58; Grid
Category Level 1&#58; Network
Category Level 2&#58; Troubleshooting
Date Created&#58; 02/03/2012 10&#58;55
Last Updated&#58; 03/01/2012 10&#58;59
Status&#58; User Updated
Project&#58;
<div id='show_681245529' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_681245529'>NERSC Staff Owner&#58; David Turner
SPR/PMR&#58;
Expires&#58;

CC
---------------------------------------------------------------

************************************************************
NERSC User Services     consult@....     1-800-66-NERSC
On-Line Help Desk&#58;  <a href='http&#58;//help.nersc.gov/' target='_blank' rel='nofollow'>http&#58;//help.nersc.gov/</a>
[---001&#58;001268&#58;38323---]
</div><script type='text/javascript'>
        $('#show_681245529').click(function() {
            $('#detail_681245529').slideDown("normal");
            $('#show_681245529').hide();
            $('#hide_681245529').show();
        });
        $('#hide_681245529').click(function() {
            $('#detail_681245529').slideUp();
            $('#hide_681245529').hide();
            $('#show_681245529').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='11584#1330561446'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-01T00:24:06+00:00">Mar 1, 2012 12:24 AM UTC</time> by <b>NERSC VO</b><a class="anchor" name="1330561446">&nbsp;</a></div><pre>Hi Steve

Apologies - I started playing with the patch but never put it into
production (was on travel).

I&#39;ll do this tomorrow.

-Shreyas

On Wed, Feb 29, 2012 at 11&#58;52 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11584#1330545157'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-29T19:52:37+00:00">Feb 29, 2012 07:52 PM UTC</time><a class="anchor" name="1330545157">&nbsp;</a></div><pre>Shreyas, are you sure you got the latest patch from the developers
(to not send the UserVOName field in the accounting record).
The behavior of NERSC-Carver hasn&#39;t changed appreciably, it is still reporting
the unregistered VO&#39;s that it always was.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11584#1329932889'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-22T17:48:09+00:00">Feb 22, 2012 05:48 PM UTC</time> by <b>NERSC</b><a class="anchor" name="1329932889">&nbsp;</a></div><pre>Recently you contacted NERSC Consulting or Account Support Services.
Below is a summary of your request and our response.

NERSC users may update this specific question by following this link&#58;
<a href='https&#58;//help.nersc.gov/login/?p_userid=osg' target='_blank' rel='nofollow'>https&#58;//help.nersc.gov/login/?p_userid=osg</a>@tick.globalnoc.iu.edu&p_next_page=myq_upd.php&p_iid=125457&p_created=1328295301

Subject
---------------------------------------------------------------
Open Science Grid&#58; VO confusion on NERSC-Carver ISSUE=11584 PROJ=71

Discussion Thread
---------------------------------------------------------------
Response (Shreyas Cholia) - 02/22/2012 09&#58;45
OK - patching this. Will let you know when I am done.

-S

Question Reference #120203-000017
---------------------------------------------------------------
Platform Level 1&#58; Grid
Category Level 1&#58; Network
Category Level 2&#58; Troubleshooting
Date Created&#58; 02/03/2012 10&#58;55
Last Updated&#58; 02/22/2012 09&#58;45
Status&#58; User Updated
Project&#58;
NERSC Staff Owner&#58; David Turner
SPR/PMR&#58;
Expires&#58;

CC
---------------------------------------------------------------

************************************************************
NERSC User Services     consult@....     1-800-66-NERSC
<div id='show_1171607856' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1171607856'>On-Line Help Desk&#58;  <a href='http&#58;//help.nersc.gov/' target='_blank' rel='nofollow'>http&#58;//help.nersc.gov/</a>
[---001&#58;001074&#58;19068---]
</div><script type='text/javascript'>
        $('#show_1171607856').click(function() {
            $('#detail_1171607856').slideDown("normal");
            $('#show_1171607856').hide();
            $('#hide_1171607856').show();
        });
        $('#hide_1171607856').click(function() {
            $('#detail_1171607856').slideUp();
            $('#hide_1171607856').hide();
            $('#show_1171607856').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='11584#1329928057'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-22T16:27:37+00:00">Feb 22, 2012 04:27 PM UTC</time><a class="anchor" name="1329928057">&nbsp;</a></div><pre>Further debugging--by examining the inbound records in the gratia collector history
I can see that the bug described by JIRA ticket GRATIA-53 definitely applies here,
namely that the -A flag which tags things like c670, m670, etc, is adding a
UserVOName to the UsageRecord which then overrides the other VO information
in the Usage Record which would otherwise be correct.

.  We have seen this on four or five big PBS sites recently.
This is a bug in the UrCollector and is fixed by a 2-3 line patch which involves only
commenting out code.

<a href='http&#58;//jira.opensciencegrid.org/browse/GRATIA-53' target='_blank' rel='nofollow'>http&#58;//jira.opensciencegrid.org/browse/GRATIA-53</a>

The patch is currently in testing in the ITB and should be available for release shortly.
If you would like it beforehand please let me know.

Based on this I am almost 100% sure the problem we have here is the same problem
we found and fixed at UFlorida-HPC by the patch in question and I don&#39;t think
there is any need to send the pbs logs as I requested below.

Here is a sample usage record, Note that the VOName and ReportableVOName
fields are correct but the UserVOName is not. the patch that we are working on
makes it so that the UserVOName is not put into the record anymore and that will
address all the problems we have mentioned to date in this ticket.

[root@gr12x0 (osg-prod) thread0-384]# more history-1974205734256914103.xml
historymd5|1329874351492|&#60;UsageRecord xmlns=&#34;<a href='http&#58;//www.gridforum.org/2003/ur-wg' target='_blank' rel='nofollow'>http&#58;//www.gridforum.org/2003/ur-wg</a>
&#34; xmlns&#58;urwg=&#34;<a href='http&#58;//www.gridforum.org/2003/ur-wg&#34' target='_blank' rel='nofollow'>http&#58;//www.gridforum.org/2003/ur-wg&#34</a>; xmlns&#58;xsi=&#34;<a href='http&#58;//www.w3.org/' target='_blank' rel='nofollow'>http&#58;//www.w3.org/</a>
2001/XMLSchema-instance&#34; xsi&#58;schemaLocation=&#34;<a href='http&#58;//www.gridforum.org/2003/ur-wg' target='_blank' rel='nofollow'>http&#58;//www.gridforum.org/2003/ur-wg</a>
file&#58;///u&#58;/OSG/urwg-schema.11.xsd&#34;&#62;
&#60;urwg&#58;RecordIdentity urwg&#58;createTime=&#34;2012-02-22T01&#58;32&#58;03Z&#34; urwg&#58;recordId=&#34;cvrsv
c09-ib&#58;1935333.cvrsvc09-ib_1329867993&#34;/&#62;
&#60;urwg&#58;JobIdentity&#62;
&#60;urwg&#58;GlobalJobId&#62;cvrsvc09-ib&#58;1935333.cvrsvc09-ib_1329867993&#60;/urwg&#58;GlobalJobId&#62;
&#60;urwg&#58;LocalJobId&#62;1935333.cvrsvc09-ib&#60;/urwg&#58;LocalJobId&#62;
&#60;/urwg&#58;JobIdentity&#62;
<div id='show_661776807' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_661776807'>&#60;urwg&#58;UserIdentity&#62;
&#60;urwg&#58;LocalUserId&#62;dweitzel&#60;/urwg&#58;LocalUserId&#62;
&#60;ds&#58;KeyInfo xmlns&#58;ds=&#34;<a href='http&#58;//www.w3.org/2000/09/xmldsig#&#34' target='_blank' rel='nofollow'>http&#58;//www.w3.org/2000/09/xmldsig#&#34</a>;&#62;&#60;/ds&#58;KeyInfo&#62;
&#60;urwg&#58;VOName&#62;/hcc/Role=NULL/Capability=NULL&#60;/urwg&#58;VOName&#62;&#60;urwg&#58;ReportableVOName&#62;
hcc&#60;/urwg&#58;ReportableVOName&#62;&#60;DN&#62;/DC=org/DC=doegrids/OU=People/CN=Derek Weitzel 28
5345&#60;/DN&#62;&#60;/urwg&#58;UserIdentity&#62;
&#60;urwg&#58;JobName&#62;STDIN&#60;/urwg&#58;JobName&#62;
&#60;urwg&#58;Status description=&#34;exit status&#34;&#62;0&#60;/urwg&#58;Status&#62;
&#60;urwg&#58;WallDuration&#62;PT50M20S&#60;/urwg&#58;WallDuration&#62;
&#60;urwg&#58;CpuDuration&#62;PT40S&#60;/urwg&#58;CpuDuration&#62;
&#60;urwg&#58;EndTime&#62;2012-02-22T00&#58;36&#58;53Z&#60;/urwg&#58;EndTime&#62;
&#60;urwg&#58;StartTime&#62;2012-02-21T23&#58;46&#58;33Z&#60;/urwg&#58;StartTime&#62;
&#60;urwg&#58;MachineName description=&#34;Server&#34;&#62;cvrsvc09-ib&#60;/urwg&#58;MachineName&#62;
&#60;urwg&#58;Host description=&#34;executing host&#34; primary=&#34;false&#34;&#62;c1580-ib/0&#60;/urwg&#58;Host&#62;
&#60;urwg&#58;Queue description=&#34;LRMS type&#58; pbs&#34;&#62;serial&#60;/urwg&#58;Queue&#62;
&#60;urwg&#58;Memory metric=&#34;total&#34; storageUnit=&#34;KB&#34;&#62;28264&#60;/urwg&#58;Memory&#62;
&#60;urwg&#58;Swap metric=&#34;total&#34; storageUnit=&#34;KB&#34;&#62;85236&#60;/urwg&#58;Swap&#62;
&#60;urwg&#58;Processors consumptionRate=&#34;0&#34; metric=&#34;total&#34;&#62;1&#60;/urwg&#58;Processors&#62;
&#60;urwg&#58;TimeInstant description=&#34;LRMS event timestamp&#34;&#62;2012-02-21T16&#58;36&#58;53Z&#60;/urwg&#58;
TimeInstant&#62;
&#60;urwg&#58;Resource urwg&#58;description=&#34;LocalUserGroup&#34;&#62;dweitzel&#60;/urwg&#58;Resource&#62;
&#60;urwg&#58;Resource urwg&#58;description=&#34;UserVOName&#34;&#62;m670&#60;/urwg&#58;Resource&#62;
&#60;urwg&#58;ProbeName&#62;pbs&#58;cvrsvc06.nersc.gov&#60;/urwg&#58;ProbeName&#62;&#60;urwg&#58;SiteName&#62;NERSC-Carv
er&#60;/urwg&#58;SiteName&#62;&#60;urwg&#58;Grid&#62;OSG&#60;/urwg&#58;Grid&#62;&#60;urwg&#58;Resource urwg&#58;description=&#34;Res
ourceType&#34;&#62;Batch&#60;/urwg&#58;Resource&#62;&#60;/UsageRecord&#62;|0A7D153AA3161B136018E6D9851E8598

-- by Steve Timm

</div><script type='text/javascript'>
        $('#show_661776807').click(function() {
            $('#detail_661776807').slideDown("normal");
            $('#show_661776807').hide();
            $('#hide_661776807').show();
        });
        $('#hide_661776807').click(function() {
            $('#detail_661776807').slideUp();
            $('#hide_661776807').hide();
            $('#show_661776807').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='11584#1329926942'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-22T16:09:02+00:00">Feb 22, 2012 04:09 PM UTC</time><a class="anchor" name="1329926942">&nbsp;</a></div><pre>Good news, NERSC-Carver is indeed reporting to Gratia again, thanks.
Bad news, two more pseudo-vo&#39;s, kbase and gpgpu, have shown up.
Could you please send 2-3 days of PBS logs from your pbs server,
particularly in the period Feb 2, 2012- Feb 4 -2012?
I can show those to the developers and they should be able to
figure out what is happening.

Also note that there&#39;s a patch coming shortly from the developers
in addition to the one that&#39;s already out, which should help the problem
some, but until we see the pbs logs we won&#39;t know for sure.  and if that
gives us no clue then we should definitely schedule a phone conference.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11584#1329867007'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-21T23:30:07+00:00">Feb 21, 2012 11:30 PM UTC</time> by <b>NERSC</b><a class="anchor" name="1329867007">&nbsp;</a></div><pre>Recently you contacted NERSC Consulting or Account Support Services.
Below is a summary of your request and our response.

NERSC users may update this specific question by following this link&#58;
<a href='https&#58;//help.nersc.gov/login/?p_userid=osg' target='_blank' rel='nofollow'>https&#58;//help.nersc.gov/login/?p_userid=osg</a>@tick.globalnoc.iu.edu&p_next_page=myq_upd.php&p_iid=125457&p_created=1328295301

Subject
---------------------------------------------------------------
Open Science Grid&#58; VO confusion on NERSC-Carver ISSUE=11584 PROJ=71

Discussion Thread
---------------------------------------------------------------
Response (Shreyas Cholia) - 02/21/2012 15&#58;29
Hi Steve

Unfortunately, I won&#39;t be at the all-hands. Jeff and David will be there, but I think I will need to be involved in the hands-on diagnostics.

As for the offline report - it isn&#39;t clear to me how it is being used. It may be something that gets into to usage reports after the fact.

In any case the reporting issue is easily solved - I just noticed that we no longer had a cron job in place (after a machine reinstall). I have restarted this.

-Shreyas

Question Reference #120203-000017
---------------------------------------------------------------
Platform Level 1&#58; Grid
Category Level 1&#58; Network
Category Level 2&#58; Troubleshooting
Date Created&#58; 02/03/2012 10&#58;55
Last Updated&#58; 02/21/2012 15&#58;29
Status&#58; User Updated
Project&#58;
NERSC Staff Owner&#58; David Turner
SPR/PMR&#58;
Expires&#58;
<div id='show_592007077' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_592007077'>
CC
---------------------------------------------------------------

************************************************************
NERSC User Services     consult@....     1-800-66-NERSC
On-Line Help Desk&#58;  <a href='http&#58;//help.nersc.gov/' target='_blank' rel='nofollow'>http&#58;//help.nersc.gov/</a>
[---001&#58;001400&#58;52954---]
</div><script type='text/javascript'>
        $('#show_592007077').click(function() {
            $('#detail_592007077').slideDown("normal");
            $('#show_592007077').hide();
            $('#hide_592007077').show();
        });
        $('#hide_592007077').click(function() {
            $('#detail_592007077').slideUp();
            $('#hide_592007077').hide();
            $('#show_592007077').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='11584#1329855885'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-21T20:24:45+00:00">Feb 21, 2012 08:24 PM UTC</time><a class="anchor" name="1329855885">&nbsp;</a></div><pre>Hi Shreyas--This is the first I&#39;ve heard of an independent offline usage email getting sent
to OSG. I have never seen it.  Who is getting this E-mail?
I agree a meeting would be helpful to address not only that question but also
why NERSC-Carver hasn&#39;t been reporting to Gratia at all for a while.
Will you be at the OSG All Hands meeting?  I&#39;ll be there.

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11584#1329852788'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-21T19:33:08+00:00">Feb 21, 2012 07:33 PM UTC</time> by <b>NERSC</b><a class="anchor" name="1329852788">&nbsp;</a></div><pre>Recently you contacted NERSC Consulting or Account Support Services.
Below is a summary of your request and our response.

NERSC users may update this specific question by following this link&#58;
<a href='https&#58;//help.nersc.gov/login/?p_userid=osg' target='_blank' rel='nofollow'>https&#58;//help.nersc.gov/login/?p_userid=osg</a>@tick.globalnoc.iu.edu&p_next_page=myq_upd.php&p_iid=125457&p_created=1328295301

Subject
---------------------------------------------------------------
Open Science Grid&#58; VO confusion on NERSC-Carver ISSUE=11584 PROJ=71

Discussion Thread
---------------------------------------------------------------
Response (Shreyas Cholia) - 02/21/2012 11&#58;30
Hi Steve

This may be related - we do support the -A flag but we don&#39;t explictly use that in the jobmanager AFAIK.

We also generate an offline usage email that gets parsed separately by OSG to keep Gratia records in sync (because of the oddities in our accounting). I believe this was instituted about a year ago. Wondering if we need to look at that?

Perhaps this is best resolved over a short meeting (may want to include one of the Gratia devs too).

-Shreyas

Question Reference #120203-000017
---------------------------------------------------------------
Platform Level 1&#58; Grid
Category Level 1&#58; Network
Category Level 2&#58; Troubleshooting
Date Created&#58; 02/03/2012 10&#58;55
Last Updated&#58; 02/21/2012 11&#58;30
Status&#58; User Updated
Project&#58;
NERSC Staff Owner&#58; David Turner
SPR/PMR&#58;
Expires&#58;
<div id='show_1349297180' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1349297180'>
CC
---------------------------------------------------------------

************************************************************
NERSC User Services     consult@....     1-800-66-NERSC
On-Line Help Desk&#58;  <a href='http&#58;//help.nersc.gov/' target='_blank' rel='nofollow'>http&#58;//help.nersc.gov/</a>
[---001&#58;001405&#58;53595---]
</div><script type='text/javascript'>
        $('#show_1349297180').click(function() {
            $('#detail_1349297180').slideDown("normal");
            $('#show_1349297180').hide();
            $('#hide_1349297180').show();
        });
        $('#hide_1349297180').click(function() {
            $('#detail_1349297180').slideUp();
            $('#hide_1349297180').hide();
            $('#show_1349297180').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='11584#1329797069'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-21T04:04:29+00:00">Feb 21, 2012 04:04 AM UTC</time><a class="anchor" name="1329797069">&nbsp;</a></div><pre>Based on investigation we have recently done on another site, I believe I understand what is happening here.
Does the NERSC-Carver resource use the -A option to do PBS accounting groups? If so, there&#39;s a known
bug in the PBS probe which causes that accounting group to supersede the VO Name that is reported to Gratia.
We have a patch that can beat that. Let us know if you want more info.  See GRATIA-53 JIRA.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11584#1329527148'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-18T01:05:48+00:00">Feb 18, 2012 01:05 AM UTC</time><a class="anchor" name="1329527148">&nbsp;</a></div><pre>The ProbeConfig looks OK.  Can you please verify that the osg-user-vo-map.txt which
you pasted into the ticket before, is in fact in the directory that the ProbeConfig is expecting
it to be, namely /usr/syscom/osg/1.2-ce/osg/etc/osg-user-vo-map.txt

If it is, then please let me know what I need to do to apply to be a user of NERSC-Carver myself
because it is unlikely that further E-mail or ticket exchanges will be able to converge and I can
figure out better what is going on by running fork jobs.

Steve Timm
For gratia operations.

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11584#1329519427'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-17T22:57:07+00:00">Feb 17, 2012 10:57 PM UTC</time> by <b>NERSC</b><a class="anchor" name="1329519427">&nbsp;</a></div><pre>Recently you contacted NERSC Consulting or Account Support Services.
Below is a summary of your request and our response.

NERSC users may update this specific question by following this link&#58;
<a href='https&#58;//help.nersc.gov/login/?p_userid=osg' target='_blank' rel='nofollow'>https&#58;//help.nersc.gov/login/?p_userid=osg</a>@tick.globalnoc.iu.edu&p_next_page=myq_upd.php&p_iid=125457&p_created=1328295301

Subject
---------------------------------------------------------------
Open Science Grid&#58; VO confusion on NERSC-Carver ISSUE=11584 PROJ=71

Discussion Thread
---------------------------------------------------------------
Response (Shreyas Cholia) - 02/17/2012 14&#58;55
Here is the ProbeConfig

&#60;ProbeConfiguration

Title1=&#34;Collector Information&#34;

CollectorHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
Comments10=&#34;SOAPHost is now replaced with CollectorHost&#34;
SOAPHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
SSLHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;
SSLRegistrationHost=&#34;gratia-osg-prod.opensciencegrid.org&#58;80&#34;

CollectorService=&#34;/gratia-servlets/rmi&#34;
SSLCollectorService=&#34;/gratia-servlets/rmi&#34;
RegistrationService=&#34;/gratia-registration/register&#34;

Title2=&#34;Probe information and functional configuration&#34;

ProbeName=&#34;pbs&#58;cvrsvc06.nersc.gov&#34;
Comments20=&#34;ProbeName used to be spelled &#39;MeterName&#39;&#34;
SiteName=&#34;NERSC-Carver&#34;
Grid=&#34;OSG&#34;
<div id='show_1571724710' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1571724710'>SuppressUnknownVORecords=&#34;1&#34;
SuppressNoDNRecords=&#34;0&#34;
SuppressGridLocalRecords=&#34;0&#34;
EnableProbe=&#34;1&#34;

Title3=&#34;Tuning parameter&#34;

BundleSize=&#34;100&#34;
Comments28=&#34;Number of records to be sent per envelope. Consider setting higher (up to 200).&#34;
MaxPendingFiles=&#34;100000&#34;
MaxStagedArchives=&#34;400&#34;
Comments30=&#34;The maximum of backload files is MaxPendingFiles * MaxStagedArchives per probe&#34;
UseSyslog=&#34;0&#34;

LogLevel=&#34;2&#34;
Comments30a=&#34;Controls debug messages printed to log file.&#34;
DebugLevel=&#34;0&#34;
Comments30b=&#34;Controls debug messages printed to screen.&#34;
LogRotate=&#34;31&#34;
DataFileExpiration=&#34;31&#34;
Comments31=&#34;The number of days quarantined and unusable data files are kept&#34;
QuarantineSize=&#34;200&#34;
Comments32=&#34;The maximum size in Mb allowed to be kept in each quarantined directory&#34;
GratiaExtension=&#34;gratia.xml&#34;

Title4=&#34;Authentication Configuration&#34;

UseSSL=&#34;0&#34;
CertificateFile=&#34;/etc/grid-security/hostcert.pem&#34;
KeyFile=&#34;/etc/grid-security/hostkey.pem&#34;
UseGratiaCertificates=&#34;0&#34;
Comments40=&#34;If no directory is specified the gratia certificate file will be created in &#39;WorkingFolder&#39;/certs.&#34;
GratiaCertificateFile=&#34;gratia.probecert.pem&#34;
GratiaKeyFile=&#34;gratia.probekey.pem&#34;

Title5=&#34;File and directory location&#34;

VDTSetupFile=&#34;/usr/syscom/osg/1.2-ce/setup.sh&#34;
UserVOMapFile=&#34;/usr/syscom/osg/1.2-ce/osg/etc/osg-user-vo-map.txt&#34;
GridftpLogDir=&#34;/usr/syscom/osg/1.2-ce/globus/var/log&#34;

DataFolder=&#34;/usr/syscom/osg/1.2-ce/gratia/var/data/&#34;
WorkingFolder=&#34;/usr/syscom/osg/1.2-ce/gratia/var/tmp&#34;
LogFolder=&#34;/usr/syscom/osg/1.2-ce/gratia/var/logs/&#34;

/&#62;

Question Reference #120203-000017
---------------------------------------------------------------
Platform Level 1&#58; Grid
Category Level 1&#58; Network
Category Level 2&#58; Troubleshooting
Date Created&#58; 02/03/2012 10&#58;55
Last Updated&#58; 02/17/2012 14&#58;55
Status&#58; User Updated
Project&#58;
NERSC Staff Owner&#58; David Turner
SPR/PMR&#58;
Expires&#58;

CC
---------------------------------------------------------------

************************************************************
NERSC User Services     consult@....     1-800-66-NERSC
On-Line Help Desk&#58;  <a href='http&#58;//help.nersc.gov/' target='_blank' rel='nofollow'>http&#58;//help.nersc.gov/</a>
[---001&#58;003056&#58;09462---]
</div><script type='text/javascript'>
        $('#show_1571724710').click(function() {
            $('#detail_1571724710').slideDown("normal");
            $('#show_1571724710').hide();
            $('#hide_1571724710').show();
        });
        $('#hide_1571724710').click(function() {
            $('#detail_1571724710').slideUp();
            $('#hide_1571724710').hide();
            $('#show_1571724710').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='11584#1329508067'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-17T19:47:47+00:00">Feb 17, 2012 07:47 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1329508067">&nbsp;</a></div><pre>Are there any updates on this issue?

Please submit problems, requests, and questions at&#58;
<a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a>

Thank You,
OSG Grid Operations Center
goc@...., 317-278-9699
Visit the Open Science Grid Operations Page&#58;
<a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='11584#1328800414'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-09T15:13:34+00:00">Feb 9, 2012 03:13 PM UTC</time><a class="anchor" name="1328800414">&nbsp;</a></div><pre>One other comment--it appears that in the e-mail reader I was using last night, some
of the lines got wrapped and I did not correctly see your osg-user-vo-map.txt .  I see that your osg-user-vo-map.txt does have
a #VOc line, and it is correctly formed--so please ignore the comments about missing #VOC below
and also the stuff about hjort.  It appears that what is likely happening is that
for some reason Gratia is not seeing this map at all and thus defaulting to
the extreme fall-back position of using the GID as the VO.

What does the ProbeConfig for the PBS probe look like?

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11584#1328758747'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-09T03:39:07+00:00">Feb 9, 2012 03:39 AM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1328758747">&nbsp;</a></div><pre>Hi Shreyas, thanks for the update.  By the way, as you probably noticed while investigating, at the moment NERSC-Carver isn&#39;t reporting to Gratia at all.
I am still not quite sure what you mean by   the phrase &#34;nersc repo&#34;.
&#34;c670&#34; for instance appears to be a mix of LIGO, HCC, and unknown users.
There is no &#34;c670&#34; VO anywhere in your user vo map below, which makes me think that for whatever reason the gratia probe isn&#39;t seeing the file at all.  For instance user dweitzel is correctly shown as mapped to &#34;hcc&#34; below but gratia is reporting him as either c670 or m670 which I am gathering must be the gid that he is running as at any given time.  So it could be that gratia is ignoring your osg-user-vo-map.txt or it could be that it is malformed.
You did not include the #VOC line in the file that should be there.. is it missing or did you not paste it in?
Without the #VOC line the file won&#39;t function properly.. that line is not a comment.
Also below you show &#34;hjort&#34; in the VO line, also a user that is getting reported to gratia as part of the mpccc vo but you don&#39;t have any entry for that user in the second part of the file.. a clear recipe to make an unknown vo.

Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11584#1328746326'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-09T00:12:06+00:00">Feb 9, 2012 12:12 AM UTC</time> by <b>NERSC</b><a class="anchor" name="1328746326">&nbsp;</a></div><pre>Recently you contacted NERSC Consulting or Account Support Services.
Below is a summary of your request and our response.

NERSC users may update this specific question by following this link&#58;
<a href='https&#58;//help.nersc.gov/login/?p_userid=osg' target='_blank' rel='nofollow'>https&#58;//help.nersc.gov/login/?p_userid=osg</a>@tick.globalnoc.iu.edu&p_next_page=myq_upd.php&p_iid=125457&p_created=1328295301

Subject
---------------------------------------------------------------
Open Science Grid&#58; VO confusion on NERSC-Carver ISSUE=11584 PROJ=71

Discussion Thread
---------------------------------------------------------------
Response (Shreyas Cholia) - 02/08/2012 16&#58;12
Hi Steve

This looks like the associated NERSC repo (represented by UNIX groups on the system) for the OSG related projects. I am attaching the VO mapfile, but I&#39;m guessing I just need to add the appropriate mappings into it.

#voi cdf ivdgl mis star usatlas ligo dzero dosar osg grow fermilab engagement sbgrid
#VOc CDF iVDGL MIS Star USAtlas Ligo DZero DOSAR OSG GROW FermiLab Engagement SBGrid
weigand fermilab
voekler ivdgl
bockjoo ivdgl
ivdgl mis
asim star
dtyu star
olson star
hjort star
sakrejda ligo
smithj4 star
kewu star
junmin star
barnby star
ibhadju star
didenko star
starreco star
<div id='show_196960776' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_196960776'>kollegge star
fine star
wbetts star
zhliu star
stradlin usatlas
doyen usatlas
catalin usatlas
dbest usatlas
may usatlas
severini usatlas
ianh usatlas
voeckler usatlas
gfg usatlas
kaushikd usatlas
marco usatlas
sosebee usatlas
nurcan usatlas
wdeng usatlas
xin usatlas
ysmirnov usatlas
dmeyers ligo
# aroy nanohub
mnorman cdf
parag dzero
kurca dzero
rominsky dzero
shossain dzero
steele dzero
yanwen dzero
apadmana osg
zhiyil dzero
greenc fermilab
dgillber dzero
rbriggs grow
shreyas osg
porter osg
cbacon osg
padhi osg
rosheck osg
rquick osg
leesa engagement
bdaudert ligo
shfu dzero
bgoncal osg
tsilver mis
aarose star
potekhin engagement
jcaballe engagement
wiehe osg
severini dosar
jalexand dosar
ijstokes sbgrid
doherty sbgrid
rengel ligo
dweitzel hcc

Question Reference #120203-000017
---------------------------------------------------------------
Platform Level 1&#58; Grid
Category Level 1&#58; Network
Category Level 2&#58; Troubleshooting
Date Created&#58; 02/03/2012 10&#58;55
Last Updated&#58; 02/08/2012 16&#58;12
Status&#58; Staff Assigned
Project&#58;
NERSC Staff Owner&#58; David Turner
SPR/PMR&#58;
Expires&#58;

CC
---------------------------------------------------------------

************************************************************
NERSC User Services     consult@....     1-800-66-NERSC
On-Line Help Desk&#58;  <a href='http&#58;//help.nersc.gov/' target='_blank' rel='nofollow'>http&#58;//help.nersc.gov/</a>
[---001&#58;002169&#58;03927---]
</div><script type='text/javascript'>
        $('#show_196960776').click(function() {
            $('#detail_196960776').slideDown("normal");
            $('#show_196960776').hide();
            $('#hide_196960776').show();
        });
        $('#hide_196960776').click(function() {
            $('#detail_196960776').slideUp();
            $('#hide_196960776').hide();
            $('#show_196960776').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='11584#1328295052'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-03T18:50:52+00:00">Feb 3, 2012 06:50 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1328295052">&nbsp;</a></div><pre>[by Steve Timm]

Dear NERSC-Carver admins

There was recently a bug discovered in the PBS Gratia probe which, in the
case of user id&#39;s that end with numbers, lops the last three digits
off of the user id and calls that the VO.
Thus we have &#34;VO&#39;s&#34; being reported to OSG Gratia accounting
of the form

c670
m670
m1248
mpccc
cstaff

These don&#39;t correspond to any single known VO and when we look in more
detail there is often usage of users known to be more than one different VO.,
I.e.

the &#34;c670&#34; VO  comprises usage from LIGO (Robert Engel) and HCC
(Derek Weitzel).  That leads me to believe that there is more than
one user of the form c670nnn on your cluster and the bug is leading
them to be conflated.

Would it be possible for you to send me (by separate E-mail) a copy
of the osg-user-vo-map.txt that is currently on your cluster.  We are
talking a fairly significant amount of hours here and thus it would
be nice if we could get this sorted out.

If there are other explanations for the above &#34;VO&#39;s&#34; we&#39;d like to
know that too.  The patch to the OSG Gratia PBS probe was released
as part of the OSG 1.2.26 release.

Steve
<div id='show_1169760459' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1169760459'>
</div><script type='text/javascript'>
        $('#show_1169760459').click(function() {
            $('#detail_1169760459').slideDown("normal");
            $('#show_1169760459').hide();
            $('#hide_1169760459').show();
        });
        $('#hide_1169760459').click(function() {
            $('#detail_1169760459').slideUp();
            $('#hide_1169760459').hide();
            $('#show_1169760459').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F11584">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 11584});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
