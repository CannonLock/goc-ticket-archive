<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[8271] Resource Specific Issue on NYSGRID-CCR-U2</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=8271" method="post">
<div class="page-header">
    <h3><span class="muted">8271</span> / Resource Specific Issue on NYSGRID-CCR-U2</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Ian Stokes-Rees</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Ping for update</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-06-01</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG RA <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">GRASE <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/8271", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='8271#1275416827'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-01T18:27:07+00:00">Jun 1, 2010 06:27 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1275416827">&nbsp;</a></div><pre>Also, for the record, the original problem is due to a unit mis-match,
where the timeout period was indicated in seconds, but the GlobusRSL
value for maxWallTime is in minutes.

Peter reports&#58;

<font color='#7F7E6F'>&#62; This works&#58;</font>
<font color='#7F7E6F'>&#62; globusrsl   =   (maxWallTime=4320)</font>
<font color='#7F7E6F'>&#62; condor_history shows it as&#58;  GlobusStatus = 8</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; This doesn&#39;t&#58;</font>
<font color='#7F7E6F'>&#62; globusrsl   =   (maxWallTime=4322)</font>
<font color='#7F7E6F'>&#62; condor_history shows it as&#58;   GlobusStatus = 64</font>
<font color='#7F7E6F'>&#62;</font>

Steve Gallo responds&#58;

<font color='#7F7E6F'>&#62; I see the issue - we have a 72 hour queue limit and anything over 4320 mins</font>
<font color='#7F7E6F'>&#62; will be rejected by torque with a &#34;qsub&#58; Job rejected by all possible destinations&#34;</font>
<font color='#7F7E6F'>&#62; error.  Globus errors are not all that helpful.</font>
<font color='#7F7E6F'>&#62;</font>

An earlier comment (April 15) from Peter reports&#58;

<font color='#7F7E6F'>&#62; GlobusRSL               = (maxWallTime=43280)</font>

43280 *seconds* corresponds to 12 hours.  For the GlobusRSL entry we
need to do a unit conversion, which would then give us 720, so the
proper GlobusRSL value for this ClassAd should be&#58;

GlobusRSL               = (maxWallTime=720)

Ian</pre></div><div class='update_description'><i onclick="document.location='8271#1274901848'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-26T19:24:08+00:00">May 26, 2010 07:24 PM UTC</time> by <b>doherty@....</b><a class="anchor" name="1274901848">&nbsp;</a></div><pre>Okay, so I guess that resolves things for me.  Sorry I dragged my feet
a bit on this, I was kept busy with other projects the past few weeks.

Thanks,

Peter

On May 26, 2010, at 13&#58;00 , Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8271#1274893210'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-26T17:00:10+00:00">May 26, 2010 05:00 PM UTC</time> by <b>VDT</b><a class="anchor" name="1274893210">&nbsp;</a></div><pre>On May 26, 2010, at 11&#58;19 AM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62; I see the issue - we have a 72 hour queue limit and anything over 4320 mins</font>
<font color='#7F7E6F'>&#62; will be rejected by torque with a &#34;qsub&#58; Job rejected by all possible destinations&#34;</font>
<font color='#7F7E6F'>&#62; error.  Globus errors are not all that helpful.</font>

Yeah, and getting improvements to the Globus errors is a very long-term process. That said, there&#39;s not much to work with here--how does Globus know why qsub failed?

Unfortunately, there are many cases like this where error propagation doesn&#39;t work well and it takes people to debug things. &#58;(

-alain

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6837&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6837&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='8271#1274890686'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-26T16:18:06+00:00">May 26, 2010 04:18 PM UTC</time> by <b>GRASE</b><a class="anchor" name="1274890686">&nbsp;</a></div><pre>Hi,

I see the issue - we have a 72 hour queue limit and anything over 4320 mins
will be rejected by torque with a &#34;qsub&#58; Job rejected by all possible destinations&#34;
error.  Globus errors are not all that helpful.

Steve

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8271#1274889426'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-26T15:57:06+00:00">May 26, 2010 03:57 PM UTC</time> by <b>doherty@....</b><a class="anchor" name="1274889426">&nbsp;</a></div><pre>Hi

This works&#58;
globusrsl   =   (maxWallTime=4320)
condor_history shows it as&#58;  GlobusStatus = 8

This doesn&#39;t&#58;
globusrsl   =   (maxWallTime=4322)
condor_history shows it as&#58;   GlobusStatus = 64

It causes Code 2 Subcode 17
The Globus error shows up just seconds after the job gets submitted to
the grid resource.

I can&#39;t replicate the error I saw with the Periodic_hold statement at
the moment.

If there is a policy in place that restricts maxWallTime to values
less than 4320 then shouldn&#39;t it produce a friendlier error message?

Peter

On May 26, 2010, at 10&#58;43 , Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8271#1274885010'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-26T14:43:30+00:00">May 26, 2010 02:43 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1274885010">&nbsp;</a></div><pre>Peter,

Can you provide your input to some of Alain&#39;s (VDT) inquiries that Ian was not able to address?

Thanks,

-Alain Deximo</pre></div><div class='update_description'><i onclick="document.location='8271#1274102201'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-17T13:16:41+00:00">May 17, 2010 01:16 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1274102201">&nbsp;</a></div><pre>Peter,

Can you provide your input to some of Alain&#39;s (VDT) inquiries that Ian was not able to address?

Thanks,

-Alain Deximo</pre></div><div class='update_description'><i onclick="document.location='8271#1273508467'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-10T16:21:07+00:00">May 10, 2010 04:21 PM UTC</time> by <b>Steve Gallo</b><a class="anchor" name="1273508467">&nbsp;</a></div><pre>We haven&#39;t seen anything out of the ordinary in the log files, unfortunately.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8271#1273507605'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-10T16:06:45+00:00">May 10, 2010 04:06 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1273507605">&nbsp;</a></div><pre>Greetings Steve,

Do you have any updates for us after having reviewed the log files?  Your assistance is greatly appreciated.

Thank You,

-Alain Deximo</pre></div><div class='update_description'><i onclick="document.location='8271#1272311230'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-26T19:47:10+00:00">Apr 26, 2010 07:47 PM UTC</time> by <b>VDT</b><a class="anchor" name="1272311230">&nbsp;</a></div><pre>On Apr 26, 2010, at 2&#58;37 PM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62; We can look at log files for you.</font>

Great, thanks!

-alain
-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6837&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6837&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='8271#1272310506'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-26T19:35:06+00:00">Apr 26, 2010 07:35 PM UTC</time> by <b>Steve Gallo</b><a class="anchor" name="1272310506">&nbsp;</a></div><pre>Hi Alain,

We can look at log files for you.

Steve

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8271#1272310327'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-26T19:32:07+00:00">Apr 26, 2010 07:32 PM UTC</time> by <b>VDT</b><a class="anchor" name="1272310327">&nbsp;</a></div><pre>On Apr 24, 2010, at 8&#58;36 PM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62; I can comment that our jobs run properly most of the time at most sites</font>
<font color='#7F7E6F'>&#62; that accept the SBGrid VO -- only a few that do strange stuff like ND</font>
<font color='#7F7E6F'>&#62; with SGE and not reporting properly that jobs have started running.</font>

Good, thanks.

<font color='#7F7E6F'>&#62; Peter will have to answer the other questions</font>

OK, that will help. Also, do we have anyone from Buffalo who can help out by looking at log files?

<font color='#7F7E6F'>&#62; but I can explain this one&#58;</font>
<font color='#7F7E6F'>&#62;&#62; By the way, the use of random() in your periodic_hold statement is weird. I doubt it&#39;s related to the problem, but I&#39;m curious why you use it.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; We submit 10k jobs at a time as part of a DAG.  If, for whatever reason,</font>
<font color='#7F7E6F'>&#62; a stack of them end up at the same site at the same time but then</font>
<font color='#7F7E6F'>&#62; languish in the queue we get hammered when they all go on hold at the</font>
<font color='#7F7E6F'>&#62; same time.  The random statement spreads this out.  At least that is the</font>
<font color='#7F7E6F'>&#62; idea.  It is possible I&#39;ve constructed it incorrectly.</font>

Yeah, it&#39;s probably fine. random() is executed each time the statement is evaluated, so it may not match your expectations, but it is probably doing what you want.

Thanks,
-alain

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6837&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6837&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='8271#1272159306'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-25T01:35:06+00:00">Apr 25, 2010 01:35 AM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1272159306">&nbsp;</a></div><pre>I can comment that our jobs run properly most of the time at most sites
that accept the SBGrid VO -- only a few that do strange stuff like ND
with SGE and not reporting properly that jobs have started running.
Peter will have to answer the other questions, but I can explain this one&#58;
<font color='#7F7E6F'>&#62; By the way, the use of random() in your periodic_hold statement is weird. I doubt it&#39;s related to the problem, but I&#39;m curious why you use it.</font>

We submit 10k jobs at a time as part of a DAG.  If, for whatever reason,
a stack of them end up at the same site at the same time but then
languish in the queue we get hammered when they all go on hold at the
same time.  The random statement spreads this out.  At least that is the
idea.  It is possible I&#39;ve constructed it incorrectly.

You&#39;d think basing the core of my doctoral dissertation on a formalized
ClassAd/MatchMaking model would mean I understood how this sort of thing
worked, but sadly many nuances of Condor expressions, the difference
between what one writes in a ClassAd file and what Condor actually ends
up calling the attributes, plus the internal state machine model Condor
has means I get it wrong more often than I get it right.

Ian</pre></div><div class='update_description'><i onclick="document.location='8271#1272059826'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-23T21:57:06+00:00">Apr 23, 2010 09:57 PM UTC</time> by <b>VDT</b><a class="anchor" name="1272059826">&nbsp;</a></div><pre>On Apr 23, 2010, at 10&#58;26 AM, osg@.... via RT wrote&#58;
<font color='#7F7E6F'>&#62; I&#39;ve been out traveling, but I&#39;m adding VDT to this to see if they can&#39;t shed any light on the subject.  VDT, I apologize for not putting the full description in this email where I add you, but it is a lot of information and I&#39;m not sure exactly what would be relevant to you.</font>

I&#39;m glad to try to help. There&#39;s already been a lot of email--let me make sure I understand the situation.

Peter and Ian are submitting jobs to Buffalo, and the jobs are failing (going on hold). Is that correct?

Is Buffalo the only sites for which you&#39;re having problems?

If the max wall time is causing problems, we need help from Buffalo to solve way. Probably there is some sort of policy they can weigh in on. Perhaps an error message in their logs?

Peter&#39;s latest problem is interesting&#58; that&#39;s a fairly complex periodic_hold statement, and it&#39;s not immediately obvious which of the conditions caused it to go on hold. Peter--can you see what GlobusStatus is in the ClassAd? (You can look with condor_history, if necessary.) How long did your job run--could it have gone on hold because it ran longer than your periodic_hold allowed for?

By the way, the use of random() in your periodic_hold statement is weird. I doubt it&#39;s related to the problem, but I&#39;m curious why you use it.

-alain
-----------------------------------------------------------------
Alain Roy                         vdt-support@....
VDT Support                   <a href='http&#58;//vdt.cs.wisc.edu/support.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/support.html</a>

--
View ticket at &#60;<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6837&#62' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6837&#62</a>;
VDT Support&#58; vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='8271#1272036427'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-23T15:27:07+00:00">Apr 23, 2010 03:27 PM UTC</time> by <b>VDT</b><a class="anchor" name="1272036427">&nbsp;</a></div><pre>Greetings from the VDT support system!

This message was generated automatically in response to the creation of a
ticket regarding&#58;

[vdt-support #-1] Open Science Grid&#58; Resource Specific Issue on NYSGRID-CCR-U2 ISSUE=8271 PROJ=71

Your original request is copied below for reference.

There is no need to reply to this message right now -- someone from the VDT
team will respond to you as soon as possible.  If you wish to view your
support ticket online, visit&#58;

<a href='http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6837' target='_blank' rel='nofollow'>http&#58;//crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=6837</a>

Your ticket has been assigned an ID as follows&#58;

[vdt-support #6837]

Please include the ticket ID in the subject line of all future email about
this issue.  To do so, you may reply to this message.

Thank you for your interest in the VDT.

vdt-support@....

-------------------------------------------------------------------------
[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='8271#1272036358'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-23T15:25:58+00:00">Apr 23, 2010 03:25 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1272036358">&nbsp;</a></div><pre>Peter,

I&#39;ve been out traveling, but I&#39;m adding VDT to this to see if they can&#39;t shed any light on the subject.  VDT, I apologize for not putting the full description in this email where I add you, but it is a lot of information and I&#39;m not sure exactly what would be relevant to you.

If you can&#39;t help, please let me know.

Thanks,
Kyle</pre></div><div class='update_description'><i onclick="document.location='8271#1271368027'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-15T21:47:07+00:00">Apr 15, 2010 09:47 PM UTC</time> by <b>doherty@....</b><a class="anchor" name="1271368027">&nbsp;</a></div><pre>Okay, I&#39;ve finally tracked down some useful information on this.

We have in our submit file this line&#58;

GlobusRSL               = (maxWallTime=43280)

This is causing the error.  I do not know why.  I don&#39;t believe that
using globusrsl expressions is causing errors at any of the other site
we are running at, including the few that are using PBS.

After commenting out that line and submitting a test job, it got a lot
further, but then I got this error&#58;

012 (928943.000.000) 04/15 17&#58;41&#58;06 Job was held.
The UNKNOWN (never set) PeriodicHold expression &#39;&#39; evaluated
to UNDEFINED
Code 0 Subcode 0

The periodic_hold expression looks like this&#58;

Periodic_hold           = (GlobusStatus==16)   ||
(
(JobStatus==1)     &&
(NumJobMatches&#62;=1) &&
((CurrentTime - LastMatchTime) &#62; ((18 - 0.5) * 3600 + random(3600)) )
)

It kind of seems like the site isn&#39;t handling any Globus expressions
correctly.  I can do a little more testing, but I&#39;d be curious to hear
from any experts on the issue what they think, or if they have
suggestions for specific things to look into to pinpoint this.  I&#39;m
hoping this information at least gives us something to run with.

Peter</pre></div><div class='update_description'><i onclick="document.location='8271#1271263446'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-14T16:44:06+00:00">Apr 14, 2010 04:44 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1271263446">&nbsp;</a></div><pre>Peter is monitoring this issue.  He is away today and may be able to
investigate further tomorrow.  If people from GOC are also getting
authentication errors this may suggest the underlying problem is one of
authentication.  We have not had any recent jobs run successfully at
CCR, although we continue to try and run there.

Ian</pre></div><div class='update_description'><i onclick="document.location='8271#1271242472'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-14T10:54:32+00:00">Apr 14, 2010 10:54 AM UTC</time> by <b>OSG RA</b><a class="anchor" name="1271242472">&nbsp;</a></div><pre>Greetings Ian,

Have you been able to resolve the &#39;Globus error 17&#58; the job failed when the job manager attempted to run it Code 2 Subcode 17&#39; issue?  Would you like me to keep the ticket open for another week?

Thanks,

-Alain Deximo</pre></div><div class='update_description'><i onclick="document.location='8271#1270649015'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-07T14:03:35+00:00">Apr 7, 2010 02:03 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1270649015">&nbsp;</a></div><pre>Peter,

I&#39;m not able to run any jobs at the moment.  I&#39;m getting a &#39;GRAM Authentication test failure&#39; message.  It could be that they haven&#39;t updated their GUMS to have me included in it.  Sorry for not being able to offer an feedback from my end.

-Alain Deximo</pre></div><div class='update_description'><i onclick="document.location='8271#1270596126'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-06T23:22:06+00:00">Apr 6, 2010 11:22 PM UTC</time> by <b>doherty@....</b><a class="anchor" name="1270596126">&nbsp;</a></div><pre>Okay, I&#39;ll keep looking into this.
Simple globus jobs run, and simple condor-g jobs run, but our primary
workflow is still producing the Globus 17 error.
I&#39;ll see if I can figure out where the difference is, but if you could
look into any problems on your end, there might be some answers there.

Best,
Peter</pre></div><div class='update_description'><i onclick="document.location='8271#1270589827'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-06T21:37:07+00:00">Apr 6, 2010 09:37 PM UTC</time> by <b>NYSGRID</b><a class="anchor" name="1270589827">&nbsp;</a></div><pre>Ian/Peter

Please keep us posted. If something is broken we do our best to fix and get you guys running.

Jon</pre></div><div class='update_description'><i onclick="document.location='8271#1270588026'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-06T21:07:06+00:00">Apr 6, 2010 09:07 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1270588026">&nbsp;</a></div><pre>To the best of my knowledge, we (sbgrid) have not had any jobs run there
in the past week or two, despite some 10k jobs that have run on OSG.  A
Gratia check would give a better answer to this question.

If we can hold off closing the ticket until later this week or early
next week, we&#39;ll have a better idea.  We&#39;re just tidying things up to
submit 15k long running jobs.  We&#39;ll see then if any of them start and
run properly at CCR.

Ian

On 4/6/10 4&#58;46 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8271#1270586767'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-06T20:46:07+00:00">Apr 6, 2010 08:46 PM UTC</time> by <b>doherty@....</b><a class="anchor" name="1270586767">&nbsp;</a></div><pre>I don&#39;t know what was causing the error.  I can&#39;t replicate it right
now.  Maybe it was just a fluke with their site.  Can you run jobs
there without errors?

Peter</pre></div><div class='update_description'><i onclick="document.location='8271#1270552973'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-06T11:22:53+00:00">Apr 6, 2010 11:22 AM UTC</time> by <b>OSG RA</b><a class="anchor" name="1270552973">&nbsp;</a></div><pre>Greetings Peter,

Have you been able to determine what was causing the &#39;Globus error 17&#58; the job failed when the job manager attempted to run it
Code 2 Subcode 17&#39; you were receiving when submitting jobs to UBuffalo CCR/U2 cluster?  If so, may I have your permission to close out this ticket?

Thanks,

-Alain Deximo</pre></div><div class='update_description'><i onclick="document.location='8271#1269876186'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-29T15:23:06+00:00">Mar 29, 2010 03:23 PM UTC</time> by <b>doherty@....</b><a class="anchor" name="1269876186">&nbsp;</a></div><pre>It looks like they are using PBS there.

The job wrapper script sources the WN environment file with&#58;
&#96;source $OSG_GRID/setup.sh&#96;

That should handle setting up variables, paths, libraries, and any job
manager setup that is needed.  I think the information for this error
on the twiki is out of date.  It&#39;s been my experience that this error
usually indicated something else.
I&#39;m familiar with the environmental variable &#34;CONDOR_CONFIG&#34; used by
Condor, but I have no idea what uses &#34;CONDOR_CONF&#34;

--Peter

On Mar 29, 2010, at 11&#58;10 , Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8271#1269875440'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-29T15:10:40+00:00">Mar 29, 2010 03:10 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1269875440">&nbsp;</a></div><pre>Recommendations&#58;

Set $CONDOR_CONF to the location of your condor_config file by exporting it in an initialization script.</pre></div><div class='update_description'><i onclick="document.location='8271#1269873414'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-29T14:36:54+00:00">Mar 29, 2010 02:36 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1269873414">&nbsp;</a></div><pre>Greetings Ian,

Were you able to resolve the issue you were experiencing with NYSGRID-CCR-U2?  If so, is it ok to go ahead and close out this ticket?  Your assistance is greatly appreciated.

Thanks,

-Alain Deximo</pre></div><div class='update_description'><i onclick="document.location='8271#1269355806'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-23T14:50:06+00:00">Mar 23, 2010 02:50 PM UTC</time> by <b>Jon Bednasz</b><a class="anchor" name="1269355806">&nbsp;</a></div><pre>Ian

thanks - Nothing has changed on our system since 12/2 when we upgraded
the osg software stack. So the question is if this is a new problem or
if we have always been broken.

Jon

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8271#1269355446'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-23T14:44:06+00:00">Mar 23, 2010 02:44 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1269355446">&nbsp;</a></div><pre>Jon,

Peter Doherty will get back to you on that -- I&#39;m not sure if I&#39;ll be
running more jobs today, but if I do, and notice failures (or success)
at CCR, I&#39;ll let you know.

Ian

On 3/23/10 8&#58;26 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8271#1269347168'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-23T12:26:08+00:00">Mar 23, 2010 12:26 PM UTC</time> by <b>Jon Bednasz</b><a class="anchor" name="1269347168">&nbsp;</a></div><pre>Ian

Sorry about the issues at CCR.

This morning, I did a vdt-control --off, vdt-control --on. I was getting
some errors when attempting to submit from syracuse.

Do simple tests work?

[jbednasz@cluster04 grid]$ globus-job-run
u2-grid.ccr.buffalo.edu&#58;2119/jobmanager-pbs /bin/hostname
c02n15 has 2 cores/processors.
#############################PBS Prologue##############################
PBS prologue script run on host c02n15 at Tue Mar 23 08&#58;20&#58;46 EDT 2010
Job 1851836.bono.ccr.buffalo.edu has requested  cores/processors per node.
Job 1851836.bono.ccr.buffalo.edu is running shared on c02n15.  Local
scratch will NOT be cleaned.
PBSTMPDIR is /scratch/1851836.bono.ccr.buffalo.edu
c02n15.ccr.buffalo.edu
#############################PBS EPILOGUE##############################
PBS epilogue script run on host c02n15 at Tue Mar 23 08&#58;20&#58;48 EDT 2010
for 1 processes.
Epilogue&#58; No extra processes to kill. Just this node.
Removing /scratch/1851836.bono.ccr.buffalo.edu on node
#############################PBS EPILOGUE##############################

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8271#1269341731'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-23T10:55:31+00:00">Mar 23, 2010 10:55 AM UTC</time> by <b>OSG RA</b><a class="anchor" name="1269341731">&nbsp;</a></div><pre>I&#39;ve added Peter Doherty as requested.  Changing next action to ping for latest update.</pre></div><div class='update_description'><i onclick="document.location='8271#1269296011'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-03-22T22:13:31+00:00">Mar 22, 2010 10:13 PM UTC</time> by <b>Ian Stokes-Rees</b><a class="anchor" name="1269296011">&nbsp;</a></div><pre>Please CC Peter Doherty &#60;doherty@....&#62; on this ticket.

I am attempting to submit jobs to UBuffalo CCR/U2 cluster.  All my jobs that are scheduled there are held with the error&#58;

Globus error 17&#58; the job failed when the job manager attempted to run it
Code 2 Subcode 17

A little bit of searching suggests that this could have something to do with Condor at the remote site (CCR), however I don&#39;t understand how I could do anything differently in my jobs to affect the configuration of Condor (or Condor related environment variables) -- rather, I assume these should be set appropriately once I do &#34;source $OSG_GRID/setup.sh&#34; in my job&#39;s preamble.

Below is a walkthrough of the submission from my condor logs on the submit side for one particular job&#58;

000 (737453.000.000) 03/22 18&#58;02&#58;20 Job submitted from host&#58; &#60;10.0.10.39&#58;54286&#62;
DAG Node&#58; 2vlj-00015
...
017 (737453.000.000) 03/22 18&#58;02&#58;34 Job submitted to Globus
RM-Contact&#58; u2-grid.ccr.buffalo.edu/jobmanager-pbs
JM-Contact&#58; <a href='https&#58;//u2-grid.ccr.buffalo.edu&#58;18636/25868/1269295352/' target='_blank' rel='nofollow'>https&#58;//u2-grid.ccr.buffalo.edu&#58;18636/25868/1269295352/</a>
Can-Restart-JM&#58; 1
...
027 (737453.000.000) 03/22 18&#58;02&#58;34 Job submitted to grid resource
GridResource&#58; gt2 u2-grid.ccr.buffalo.edu/jobmanager-pbs
GridJobId&#58; gt2 u2-grid.ccr.buffalo.edu/jobmanager-pbs <a href='https&#58;//u2-grid.ccr.buffalo.edu&#58;18636/25868/1269295352/' target='_blank' rel='nofollow'>https&#58;//u2-grid.ccr.buffalo.edu&#58;18636/25868/1269295352/</a>
...
012 (737453.000.000) 03/22 18&#58;02&#58;35 Job was held.
Globus error 17&#58; the job failed when the job manager attempted to run it
Code 2 Subcode 17
...
013 (737453.000.000) 03/22 18&#58;03&#58;19 Job was released.
The job attribute PeriodicRelease expression &#39;(NumGlobusSubmits &#60;= 7)&#39; evaluated to TRUE
...

And now the job gets re-submitted to Wisconsin&#58;

017 (737453.000.000) 03/22 18&#58;03&#58;41 Job submitted to Globus
RM-Contact&#58; cmsgrid01.hep.wisc.edu/jobmanager-condor
<div id='show_1210118072' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1210118072'>JM-Contact&#58; <a href='https&#58;//cmsgrid01.hep.wisc.edu&#58;45016/24491/1269295416/' target='_blank' rel='nofollow'>https&#58;//cmsgrid01.hep.wisc.edu&#58;45016/24491/1269295416/</a>
Can-Restart-JM&#58; 1
...
027 (737453.000.000) 03/22 18&#58;03&#58;41 Job submitted to grid resource
GridResource&#58; gt2 cmsgrid01.hep.wisc.edu/jobmanager-condor
GridJobId&#58; gt2 cmsgrid01.hep.wisc.edu/jobmanager-condor <a href='https&#58;//cmsgrid01.hep.wisc.edu&#58;45016/24491/1269295416/' target='_blank' rel='nofollow'>https&#58;//cmsgrid01.hep.wisc.edu&#58;45016/24491/1269295416/</a>
...

</div><script type='text/javascript'>
        $('#show_1210118072').click(function() {
            $('#detail_1210118072').slideDown("normal");
            $('#show_1210118072').hide();
            $('#hide_1210118072').show();
        });
        $('#hide_1210118072').click(function() {
            $('#detail_1210118072').slideUp();
            $('#hide_1210118072').hide();
            $('#show_1210118072').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F8271">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
