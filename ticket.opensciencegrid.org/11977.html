<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[11977] variables OSG_APP an OSG_DATA not defined in gatekeeper rpm version</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=11977" method="post">
<div class="page-header">
    <h3><span class="muted">11977</span> / variables OSG_APP an OSG_DATA not defined in gatekeeper rpm version</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Juan Eduardo Ramirez Vargas</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">uprm-cms-ce</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Juan Eduardo Ramirez Vargas</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier3</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Check for reply</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-04-23</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG RA <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">USCMS_Tier3 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/11977", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/11977?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/11977?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20variables%20OSG_APP%20an%20OSG_DATA%20not%20defined%20in%20gatekeeper%20rpm%20version%20ISSUE%3D11977%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='11977#1334773747'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-18T18:29:07+00:00">Apr 18, 2012 06:29 PM UTC</time> by <b>eduardo@....</b><a class="anchor" name="1334773747">&nbsp;</a></div><pre>Sure you can close this ticket
Eduardo

On 04/18/2012 02&#58;23 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11977#1334773387'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-18T18:23:07+00:00">Apr 18, 2012 06:23 PM UTC</time> by <b>VDT</b><a class="anchor" name="1334773387">&nbsp;</a></div><pre>Great, I&#39;m glad it&#39;s working. I&#39;ll close this ticket unless you have other concerns related to this problem. (If you have completely different concerns, let&#39;s open a new ticket to simplify tracking it.)

Thanks,
-alain
------------------------------------
Alain Roy
OSG Software Support
vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='11977#1334773027'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-18T18:17:07+00:00">Apr 18, 2012 06:17 PM UTC</time> by <b>eduardo@....</b><a class="anchor" name="1334773027">&nbsp;</a></div><pre>I updated our troubleshooting guide with some relevant information&#58;
<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/TroubleshootingComputeElement#Job_environment_not_set_up_corre' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/TroubleshootingComputeElement#Job_environment_not_set_up_corre</a>

That is great.

I replaced all the rpms from epel to osg rpms. Now all should be fine.

A side effects from this is that I do not need /etc/lcmaps/lcmaps.db
anymore. Having the right rpms fixed this feature. When starting my
configuration based on the logs I cloned /etc/lcmaps.db to
/etc/lcmaps/lcmaps.db to fix authentication but know I deleted the
cloned file and all is working.!

I have now the WNs, srm server and CE with release3. Only pending for
release3 is our GUMS server.
Also I need to set plugins=1 to WN and srm server.

Thanks
Eduardo

On 04/18/2012 01&#58;13 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11977#1334769209'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-18T17:13:29+00:00">Apr 18, 2012 05:13 PM UTC</time> by <b>Alain Roy</b><a class="anchor" name="1334769209">&nbsp;</a></div><pre>Eduardo,

I updated our troubleshooting guide with some relevant information&#58;
<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/TroubleshootingComputeElement#Job_environment_not_set_up_corre' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/TroubleshootingComputeElement#Job_environment_not_set_up_corre</a>

I also made a ticket to improve the error message from the RSV probe so that we can catch this problem more quickly in the future&#58;
<a href='http&#58;//jira.opensciencegrid.org/browse/SOFTWARE-632' target='_blank' rel='nofollow'>http&#58;//jira.opensciencegrid.org/browse/SOFTWARE-632</a>

-alain
------------------------------------
Alain Roy
OSG Software Support
vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='11977#1334768527'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-18T17:02:07+00:00">Apr 18, 2012 05:02 PM UTC</time> by <b>VDT</b><a class="anchor" name="1334768527">&nbsp;</a></div><pre>Eduardo wrote&#58;
<font color='#7F7E6F'>&#62; This time osg environment is set!</font>

Excellent, I&#39;m glad we found the problem!

<font color='#7F7E6F'>&#62; How we fix the other rpms? do we need a sorted in some way?</font>

First, turn off the globus-gatekeeper and GridFTP server.

Then you can do exactly the same thing for each RPM, but change the name that gave you to match the list of RPMs&#58;

globus-common
globus-common-progs
globus-gatekeeper
globus-gridftp-server
globus-gridftp-server-control
globus-gridftp-server-progs
globus-scheduler-event-generato

Do them one at a time. Then restart the services and run a job or two to make sure it&#39;s all still working. Let me know how it goes.

-alain
------------------------------------
Alain Roy
OSG Software Support
vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='11977#1334767447'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-18T16:44:07+00:00">Apr 18, 2012 04:44 PM UTC</time> by <b>eduardo@....</b><a class="anchor" name="1334767447">&nbsp;</a></div><pre>Yes,
I set plugins=1 and  replaced  globus-gram-job-manager-scripts with
the osg version. This time osg environment is set!
globus-job-run cms-grid0.hep.uprm.edu /bin/env | sort
GLOBUS_GASS_CACHE_DEFAULT=/home/gridusers/uscms0001/.globus/.gass_cache
GLOBUS_GRAM_JOB_CONTACT=<a href='https&#58;//cms-grid0.hep.uprm.edu&#58;14590/16217871868018652716/144256551098697397/' target='_blank' rel='nofollow'>https&#58;//cms-grid0.hep.uprm.edu&#58;14590/16217871868018652716/144256551098697397/</a>
GLOBUS_LOCATION=/usr
HOME=/home/gridusers/uscms0001
LD_LIBRARY_PATH=/usr/lib&#58;/usr/lib64
LOGNAME=uscms0001
OSG_APP=/sharesoft/osg/app
OSG_DATA=/data/se/osg
OSG_DEFAULT_SE=cms-se.hep.uprm.edu
OSG_GLEXEC_LOCATION=/usr/sbin/glexec
OSG_GRID=/etc/osg/wn-client/
OSG_HOSTNAME=cms-grid0.hep.uprm.edu
OSG_JOB_CONTACT=cms-grid0.hep.uprm.edu/jobmanager-condor
OSG_SITE_NAME=uprm-cms-ce
OSG_SITE_READ=<a href='srm&#58;//cms-se.hep.uprm.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//cms-se.hep.uprm.edu&#58;8443/srm/v2/server</a>
OSG_SITE_WRITE=<a href='srm&#58;//cms-se.hep.uprm.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//cms-se.hep.uprm.edu&#58;8443/srm/v2/server</a>
OSG_SQUID_LOCATION=UNAVAILABLE
OSG_STORAGE_ELEMENT=True
OSG_WN_TMP=/tmp
PATH=/sbin&#58;/usr/sbin&#58;/bin&#58;/usr/bin&#58;/sbin&#58;/usr/sbin&#58;/bin&#58;/usr/bin
...
Also I run the rsv probe and this time if fine !!
[root@cms-grid0 ~]# rsv-control -r -u cms-grid0.hep.uprm.edu
org.osg.general.osg-directories-CE-permissions

Running metric org.osg.general.osg-directories-CE-permissions&#58;

metricName&#58; org.osg.general.osg-directories-CE-permissions
metricType&#58; status
timestamp&#58; 2012-04-18 12&#58;34&#58;27 AST
metricStatus&#58; OK
<div id='show_871596257' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_871596257'>serviceType&#58; OSG-CE
serviceURI&#58; cms-grid0.hep.uprm.edu
gatheredAt&#58; cms-grid0.hep.uprm.edu
summaryData&#58; OK
detailsData&#58;

The OSG_DATA directory (/data/se/osg) has correct permissions.
Found&#58; 1777
Required&#58; 77[75] (this is a regular expression)

The OSG_APP directory (/sharesoft/osg/app) has correct permissions.
Found&#58; 0777
Required&#58; 7[75][75] (this is a regular expression)

EOT

Thanks very much!
How we fix the other rpms? do we need a sorted in some way?

Eduardo

On 04/18/2012 12&#58;22 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_871596257').click(function() {
            $('#detail_871596257').slideDown("normal");
            $('#show_871596257').hide();
            $('#hide_871596257').show();
        });
        $('#hide_871596257').click(function() {
            $('#detail_871596257').slideUp();
            $('#hide_871596257').hide();
            $('#show_871596257').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='11977#1334766156'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-18T16:22:36+00:00">Apr 18, 2012 04:22 PM UTC</time> by <b>Alain Roy</b><a class="anchor" name="1334766156">&nbsp;</a></div><pre>Hi Eduardo,

Thanks for giving me permission to run jobs at your site. It helped me find the problem quickly. Whew!

The core problem is that you seemed to have missed one small but essential step. It&#39;s documented at&#58;
<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallComputeElement#Install_the_Yum_Repositories_req' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallComputeElement#Install_the_Yum_Repositories_req</a>

<font color='#7F7E6F'>&#62; 3. Ensure that /etc/yum.conf has the following line in the [main] section (particularly when using ROCKS).</font>
<font color='#7F7E6F'>&#62; This enables yum plugins&#58;</font>
<font color='#7F7E6F'>&#62; plugins=1</font>

I believe you didn&#39;t do this, because your yum.conf doesn&#39;t have it. I just checked and this is what it looks like&#58;

<font color='#7F7E6F'>&#62; cat /etc/yum.conf</font>
<font color='#7F7E6F'>&#62; [main]</font>
<font color='#7F7E6F'>&#62; cachedir=/var/cache/yum</font>
<font color='#7F7E6F'>&#62; debuglevel=2</font>
<font color='#7F7E6F'>&#62; logfile=/var/log/yum.log</font>
<font color='#7F7E6F'>&#62; pkgpolicy=newest</font>
<font color='#7F7E6F'>&#62; distroverpkg=redhat-release</font>
<font color='#7F7E6F'>&#62; tolerant=1</font>
<font color='#7F7E6F'>&#62; exactarch=1</font>
<font color='#7F7E6F'>&#62; assumeyes=1</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Rocks-5.4]</font>
<font color='#7F7E6F'>&#62; name=Rocks 5.4</font>
<font color='#7F7E6F'>&#62; baseurl=http&#58;//136.145.164.194/install/rocks-dist/x86_64</font>

This might seem small thing, but it means that you ended up getting some RPMs from the EPEL repository instead of the OSG repository. Since it&#39;s not all packages, I&#39;m guessing it&#39;s when you did an update? I&#39;m not sure. We patch some of Globus, and one of our critical patches is the one that sets up the environment in the way that OSG jobs expect. Therefore you really need to use our RPM. Since you have the wrong RPM, OSG_APP and OSG_DATA are not in the job&#39;s environment, and therefore the RSV job fails. It reports a bad message--sorry about that, we&#39;ll look at that--but it&#39;s a real problem.

To recover from this situation, we have to step carefully. I see that you have several Globus packages that are from the EPEL repository. They are&#58;

globus-common-14.5-4.el5
globus-common-progs-14.5-4.el5
globus-gatekeeper-9.6-3.el5
<div id='show_389129113' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_389129113'>globus-gram-job-manager-scripts-4.2-2.el5
globus-gridftp-server-6.5-4.el5
globus-gridftp-server-control-2.3-2.el5
globus-gridftp-server-progs-6.5-4.el5
globus-scheduler-event-generator-4.4-2.el5

We want to replace all of them with the OSG version, but lets do it one at a time. I recommend that you do&#58;

1) Add the plugins=1 to /etc/yum.conf
2) Remove the globus-gram-job-manager-scripts RPM&#58;
rpm -e --nodeps globus-gram-job-manager-scripts
3) Reinstall from the OSG repository&#58;
yum install globus-gram-job-manager-scripts

When you install with yum, it tells you want repository the RPM is coming from. Please make sure it says it is from the OSG repository.

For now, let&#39;s just do that one RPM. That&#39;st he critical one that is the has the patch to set up the environment. When it&#39;s done, check the environment again, as we did before&#58;

globus-job-run cms-grid0.hep.uprm.edu /bin/env | sort

Let me know how it goes. If it works, we&#39;ll fix the other RPMs as well.

-alain
------------------------------------
Alain Roy
OSG Software Support
vdt-support@....
</div><script type='text/javascript'>
        $('#show_389129113').click(function() {
            $('#detail_389129113').slideDown("normal");
            $('#show_389129113').hide();
            $('#hide_389129113').show();
        });
        $('#hide_389129113').click(function() {
            $('#detail_389129113').slideUp();
            $('#hide_389129113').hide();
            $('#show_389129113').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='11977#1334764858'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-18T16:00:58+00:00">Apr 18, 2012 04:00 PM UTC</time> by <b>Alain Roy</b><a class="anchor" name="1334764858">&nbsp;</a></div><pre>I&#39;ll remove Marco from the ticket, because I&#39;ve been working with Eduardo directly on this and will continue to do so. Eduardo, I&#39;ll stop our email discussion and have the discussion in the ticket, so other people can join in if needed.

-alain
------------------------------------
Alain Roy
OSG Software Support
vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='11977#1334763667'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-18T15:41:07+00:00">Apr 18, 2012 03:41 PM UTC</time> by <b>eduardo@....</b><a class="anchor" name="1334763667">&nbsp;</a></div><pre>Hi, as an update, with help of Alain Roy, we are finding that the job
environment is missing the osg variables defined in
/var/lib/osg/osg-job-environment.conf.
These variables are not passed to the grid job, for unknown reasons.

In case of crab it requires OSG_APP,OSG_JOB_CONTACT,OSG_GRID and none of
those were passed to the job.

I hope this information is useful to who ever is assigned  to this ticket.
If you have any suggestion where to look let me know.
Eduardo

On 04/17/2012 11&#58;24 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11977#1334676279'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-17T15:24:39+00:00">Apr 17, 2012 03:24 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1334676279">&nbsp;</a></div><pre>Assigning this to Marco since he has done some rpm based CE testing.
Marco, let me know if this should go to someone else

-Neha</pre></div><div class='update_description'><i onclick="document.location='11977#1334673223'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-17T14:33:43+00:00">Apr 17, 2012 02:33 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1334673223">&nbsp;</a></div><pre>Adding Software Support to offer some advice.

Alain D</pre></div><div class='update_description'><i onclick="document.location='11977#1334348101'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-13T20:15:01+00:00">Apr 13, 2012 08:15 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1334348101">&nbsp;</a></div><pre>[by Juan Eduardo Ramirez Vargas]

Hi,
Recently I upgraded our gatekeeper to rpms version. We are using condor batch system.

In general simple test are ok. However a critical test org.osg.general.osg-directories-CE-permissions
I get a warning (see output below). Which may explain problems in monitoring our T3 (from CMS)
below I show for comparison the output from rsvuser and cms monitoring.
Also a simple globus-job-run does not show $OSG_APP or similar. But /var/lib/osg/osg-job-environment.conf show these variables as defined.

How do I fix this?
Eduardo

-----------/var/log/globus/gram_rsv.log----------
ts=2012-04-13T20&#58;01&#58;29.886367Z id=31694 event=gram.send_job.end level=WARN status=-3 errno=2 msg=&#34;Error creating datagram socket&#34; reason=&#34;No such file or directory&#34;
ts=2012-04-13T20&#58;01&#58;30.970633Z id=31710 event=gram.send_job.end level=WARN status=-3 errno=2 msg=&#34;Error creating datagram socket&#34; reason=&#34;No such file or directory&#34;

--------/var/log/globus/gram_uscms0006.log---------
ts=2012-04-13T15&#58;10&#58;46.249319Z id=19759 event=gram.send_job.end level=WARN status=-3 errno=2 msg=&#34;Error creating datagram socket&#34; reason=&#34;No such file or directory&#34;
ts=2012-04-13T15&#58;20&#58;51.871912Z id=2063 event=gram.validate_rsl.end level=ERROR msg=&#34;Unsupported RSL attribute&#34; attribute=invalid status=-48
ts=2012-04-13T15&#58;20&#58;51.872000Z id=2063 event=gram.query.end level=ERROR gramid=/16217811378246684241/144256551098656413/ uri=&#34;/16217811378246684241/144256551098656413/&#34; msg=&#34;Error processing query&#34; status=
-48 reason=&#34;the provided RSL could not be properly parsed
ts=2012-04-13T15&#58;20&#58;53.788985Z id=20319 event=gram.send_job.end level=WARN status=-3 errno=2 msg=&#34;Error creating datagram socket&#34; reason=&#34;No such file or directory&#34;
ts=2012-04-13T15&#58;30&#58;23.633943Z id=20990 event=gram.send_job.end level=WARN status=-3 errno=2 msg=&#34;Error creating datagram socket&#34; reason=&#34;No such file or directory&#34;

------rsv output test ------
metricName&#58; org.osg.general.osg-directories-CE-permissions
metricType&#58; status
timestamp&#58; 2012-04-13 16&#58;01&#58;40 AST
metricStatus&#58; WARNING
serviceType&#58; OSG-CE
serviceURI&#58; cms-grid0.hep.uprm.edu
gatheredAt&#58; cms-grid0.hep.uprm.edu
summaryData&#58; WARNING
detailsData&#58;
<div id='show_1013106691' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1013106691'>Found 1 WARNINGs.

Non-required directory is not set or non-existent (OSG_DATA=)

Required directory is not set or non-existent (OSG_APP=)

</div><script type='text/javascript'>
        $('#show_1013106691').click(function() {
            $('#detail_1013106691').slideDown("normal");
            $('#show_1013106691').hide();
            $('#hide_1013106691').show();
        });
        $('#hide_1013106691').click(function() {
            $('#detail_1013106691').slideUp();
            $('#hide_1013106691').hide();
            $('#show_1013106691').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F11977">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 11977});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
