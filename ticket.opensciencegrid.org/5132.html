<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[5132] dCache - Setting up group access on dCache/BestMan storage locations</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=5132" method="post">
<div class="page-header">
    <h3><span class="muted">5132</span> / dCache - Setting up group access on dCache/BestMan storage locations</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">neha sharma</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Neha to update</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-07-09</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Neha Sharma <span class="muted"> / OSG Storage Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/5132", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/5132?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/5132?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20dCache%20-%20Setting%20up%20group%20access%20on%20dCache%2FBestMan%20storage%20locations%20ISSUE%3D5132%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='5132#1215117649'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-03T20:40:49+00:00">Jul 3, 2008 08:40 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1215117649">&nbsp;</a></div><pre>Manoj

I believe this is a general issue. This can be obtained by having a few users belong to a special group/role within
your VO.
Then use standard unix like permissions on the storage locations in question for the user to which this
VO/group/role gets mapped to.

-Neha

I agree with this answer.  It is fairly easy to set up groups on a remote resource organized by VO, and manage
access locally by such group permissions.  This is what I do locally to support CMS.

The rest you can do by account mapping using groups and roles with GUMS and PRIMA.  The latest version of
BeStMan, for example, now includes support for working with GUMS and can do mapping of accounts exactly as
you have them set for access, for example, to your CE.

Hope this helps,
Alan

On Jun 25, 2008, at 12&#58;44 PM, Abhishek Singh Rana wrote&#58;

Hi Manoj -

As Neha said, many dCache sites accomplish a similar goal by POSIX /
UNIX-level permissions in the PNFS. For e.g., subdirectories can have
unique user level UIDs, VO level GIDs, and be group writable or
readable.

$SRM_PATH/cdf/userA UID_A GID_cdf

$SRM_PATH/cdf/userB UID_B GID_cdf

$SRM_PATH/cdf/userC UID_C GID_cdf

$SRM_PATH/cdf UID_cdf GID_cdf
<div id='show_300754990' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_300754990'>
A site can then map various users (combinations of DNs and FQANs) to a
higher level PNFS directory e.g., $SRM_PATH/cdf, with relevant UID/GID
- actual permissions enforced at the POSIX level, beyond X.509 level.

Thanks,
Abhishek

Manoj - It would be better for you to work through the appropriate VO and get
appropriate roles setup - like Neha said.  Sites are not going to want to have
a bunch of special cases, but they do interact/respond to VO requests.
</div><script type='text/javascript'>
        $('#show_300754990').click(function() {
            $('#detail_300754990').slideDown("normal");
            $('#show_300754990').hide();
            $('#hide_300754990').show();
        });
        $('#hide_300754990').click(function() {
            $('#detail_300754990').slideUp();
            $('#hide_300754990').hide();
            $('#show_300754990').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5132#1214411640'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-06-25T16:34:00+00:00">Jun 25, 2008 04:34 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1214411640">&nbsp;</a></div><pre>Hi Manoj,

For dCache, FNAL people can explain.

In bestman case,
1. If you create a &#34;group user&#34; certificate through your CA and honored by your VO and have users &#34;share&#34; the
cert/proxy, it would work. However this is definitely a security risk, and mostlikely would not work on the grid. For
your local site, maybe, since you&#39;re in control on whatever you do including taking security risks.  Also, users
might step over each other for overwriting files in the common area.

2. If users (A, B, C) use their own personal cert, and are mapped locally to the same account (in the mapfile),
you can have your scenario working with bestman. In this case, users do not need to share a &#34;group&#34; cert.
However, users might step over each other for overwriting files.

3. If users (A, B, C) use their own personal cert, and are mapped separately, you can have one &#34;directory&#34;
shared by the group, and have users create their own directory and write files, and read other&#39;s files. For
example, ..../cdf/ can be writable by a group, and user A can create his own .../cdf/userA, and so on. user B can
read files in .../cdf/userA, but cannot write anything in .../cdf/userA.    If writing for user B in .../cdf/userA/ is a
definite need for your use case, we can probably add it as an optional feature.

If we support ACL type of authZ model in bestman, this would be easy to work with, but we currently do not
support ACLs or ACL-like. If you have some authZ component supporting ACLs on file or directory-level, we can
probably have bestman run with the component.

Hope this helps...

-- Alex
asim at lbl dot gov

On 6/23/08 8&#58;22 AM, Manoj Kumar Jha wrote&#58;
Hi Alex,
Thanks for your reply. You have understand our needs correctly.   But it needs some modification. I am
explaining it below.   Following are the folders on SRM for users (A, B, and C) of VO CDF,
$SRM_PATH/cdf/userA
$SRM_PATH/cdf/userB
<div id='show_447008837' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_447008837'>$SRM_PATH/cdf/userC
....
userA will use his/her own personal certificate for writing files in the area &#34;$SRM_PATH/cdf/userA&#34;. Similary,
userB will use his/her own personal certificate  for writing files in the area &#34;$SRM_PATH/cdf/userB&#34;. Similarly for
userC.

I would like  to know whether there exists a certificate which can read, write  in the folders of all the uesrA ,
userB, and userC.   Please let me know if my question needs some more explanation.

Thanking you,
Manoj

Alex Sim wrote&#58;
Hi Manoj,

what do you mean by &#34;group priv cert&#34;, some kind of sharing group cert among different people rather than
using their own cert?
If you want some kind of &#34;project directory&#34; to be shared by a group of people, there are a few ways to do it,
without &#34;sharing a group cert&#34;.
It seems like your use case is that a particular directory path (or a space) needs to be shared by a group of
people for reading and writing, and the owner or a privileged user can clean up the directory path (or the space).
is this right, or close, or different from what you&#39;re thinking?

-- Alex
asim at lbl dot gov

On 6/22/08 10&#58;26 AM, Manoj Kumar Jha wrote&#58;
Hello,
Could it be possible to have a group privilege certificate which can write, read and delete files on the storage
element ?  Moreover, I would also like if the group privilege certificate has been used for creating files in a
particular user&#39;s (say it is userA) area on SE, then other users from the group can read the files and userA can
delete the files in his/her area.  The concerned SE is dCache and BeStMan.

Thanking you,
Manoj
</div><script type='text/javascript'>
        $('#show_447008837').click(function() {
            $('#detail_447008837').slideDown("normal");
            $('#show_447008837').hide();
            $('#hide_447008837').show();
        });
        $('#hide_447008837').click(function() {
            $('#detail_447008837').slideUp();
            $('#hide_447008837').hide();
            $('#show_447008837').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F5132">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
