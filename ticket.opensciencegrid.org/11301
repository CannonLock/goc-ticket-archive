<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="/">
    <title>[11301] voms-itb issue</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="//netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="https://ticket.opensciencegrid.org/images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="https://ticket.opensciencegrid.org/lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=11301" method="post">
<div class="page-header">
    <h3><span class="muted">11301</span> / voms-itb issue</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Rob Quick</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/other</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Rob Quick</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2011-12-05</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG RA <span class="muted"> / OSG GOC Support Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=11301", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="/11301?sort=up&"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="/11301?expandall=true&">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20voms-itb%20issue%20ISSUE%3D11301%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='11301#1322840776'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-12-02T15:46:16+00:00">Dec 2, 2011 03:46 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1322840776">&nbsp;</a></div><pre>I see Alain has updated the VOMS installation based on the ticket I opened at <a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-404.' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-404.</a>

Previous Instructions&#58;
[root@voms ~]$ fetch-crl

New Instructions&#58;
[root@voms ~]$ fetch-crl
[root@voms ~]$ /sbin/chkconfig fetch-crl-boot on
[root@voms ~]$ /sbin/chkconfig fetch-crl-cron on
[root@voms ~]$ /sbin/service fetch-crl-boot start
[root@voms ~]$ /sbin/service fetch-crl-cron start

Closing this ticket as a fetch-crl seems to have cleared up the issue.</pre></div><div class='update_description'><i onclick="document.location='11301#1322835157'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-12-02T14:12:37+00:00">Dec 2, 2011 02:12 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1322835157">&nbsp;</a></div><pre>I&#39;ve added a daily cron job and will report this to Alain Roy of the VDT. Jim you should now be a member of the MIS VO.</pre></div><div class='update_description'><i onclick="document.location='11301#1322834038'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-12-02T13:53:58+00:00">Dec 2, 2011 01:53 PM UTC</time><a class="anchor" name="1322834038">&nbsp;</a></div><pre>I guess the new CRLs were just loaded, because now I can register my DigiCert certificate at <a href='https&#58;//voms-itb.grid.iu.edu&#58;8443/voms/MIS/.' target='_blank' rel='nofollow'>https&#58;//voms-itb.grid.iu.edu&#58;8443/voms/MIS/.</a>

-- by Jim Basney</pre></div><div class='update_description'><i onclick="document.location='11301#1322833703'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-12-02T13:48:23+00:00">Dec 2, 2011 01:48 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1322833703">&nbsp;</a></div><pre>I checked the voms logs early on, and some of the Tomcat logs without any hint. However today I see this in the trustmanger.log.

tomcat [http-8443-Processor20]&#58; 2011-12-02T13&#58;36&#58;37.760+0000 INFO  trustmanager.OpensslTrustmanager  - The certificate validation for [CN=jbasney.opensciencegrid.org, OU=Services, DC=DigiCert-Grid, DC=com] failed&#58; Certificate checking for DC=com,DC=DigiCert-Grid,O=DigiCert Grid,CN=DigiCert Grid TEST CA-1 failed, rejecting it. Error was&#58; The certificate CN=DigiCert Grid TEST CA-1,O=DigiCert Grid,DC=DigiCert-Grid,DC=com revocation checking failed&#58; The certificate DC=com,DC=DigiCert-Grid,O=DigiCert Grid,CN=DigiCert Grid TEST CA-1 is not in the CRL of DC=com,DC=DigiCert-Grid,O=DigiCert Grid,CN=DigiCert Grid TEST Root CA, but the CRL has expired on Wed Nov 23 17&#58;00&#58;00 UTC 2011, so rejecting this certificate.</pre></div><div class='update_description'><i onclick="document.location='11301#1322833059'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-12-02T13:37:39+00:00">Dec 2, 2011 01:37 PM UTC</time><a class="anchor" name="1322833059">&nbsp;</a></div><pre>Please post any error messages that appear in the VOMS server logs. Hopefully that will identify the issue so we don&#39;t need to keep guessing.

-- by Jim Basney</pre></div><div class='update_description'><i onclick="document.location='11301#1322832283'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-12-02T13:24:43+00:00">Dec 2, 2011 01:24 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1322832283">&nbsp;</a></div><pre>Here&#39;s the verbose output for the DigiCertCA

fetch-crl[8289]&#58; 20111202T132232+0000 processing &#39;/etc/grid-security/certificates/DigiCertGridTESTCA-1.crl_url&#39;
fetch-crl[8289]&#58; 20111202T132232+0000 updating CRL &#39;DigiCert Grid TEST CA-1 (9763ce9e)&#39;
fetch-crl[8289]&#58; 20111202T132232+0000 File /etc/grid-security/certificates/9763ce9e.r0 valid&#58; yes
fetch-crl[8289]&#58; 20111202T132232+0000 File /etc/grid-security/certificates/9763ce9e.r0.s10227 valid&#58; yes
fetch-crl[8289]&#58; 20111202T132232+0000 File /etc/grid-security/certificates/9763ce9e.r0 valid&#58; yes</pre></div><div class='update_description'><i onclick="document.location='11301#1322832057'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-12-02T13:20:57+00:00">Dec 2, 2011 01:20 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1322832057">&nbsp;</a></div><pre>Reran fetch-crl didn&#39;t solve the problem. Should fetch-crl be added as a cron? I don&#39;t see anything in the crontab.</pre></div><div class='update_description'><i onclick="document.location='11301#1322789351'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-12-02T01:29:11+00:00">Dec 2, 2011 01:29 AM UTC</time><a class="anchor" name="1322789351">&nbsp;</a></div><pre>Hi Rob,

As I mentioned yesterday, VOMS should reject CAs with expired CRLs.  I notice that your CRL is 2 weeks old.  Can you please try re-running fetch-crl and have someone try again?

Brian

-- by Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='11301#1322747046'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-12-01T13:44:06+00:00">Dec 1, 2011 01:44 PM UTC</time> by <b>Mine Altunay</b><a class="anchor" name="1322747046">&nbsp;</a></div><pre>I am out of the office until Dec 2, 2011

If you have an urgent security concern, please call or email OSG
Operations Center (24*7)
Contact&#58; Phone +1 317-278-9699 or email goc@....

Operations center&#39;s web site is <a href='http&#58;//www.grid.iu.edu/' target='_blank' rel='nofollow'>http&#58;//www.grid.iu.edu/</a>

For all other questions, please open a GOC ticket or directly contact osg-security-team@....</pre></div><div class='update_description'><i onclick="document.location='11301#1322746887'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-12-01T13:41:27+00:00">Dec 1, 2011 01:41 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1322746887">&nbsp;</a></div><pre>I don&#39;t think this is a VOMS configuration issue, as both DOEGrids and NCSA certs seem to work just fine... My perusal of the Tomcat configuration may have been a red-haring produced by using the www.digicert.com/help page. I&#39;ve also configured VOMS with DOEGrids certs many times and not had to do any additional Tomcat configuration.

The 9763ce9e.* and 6ecf4ebc.* file are present.

2011-12-01 13&#58;39&#58;09 UTC [root@voms-itb&#58;/etc/grid-security/certificates]# ls -l | grep 9763ce9e
-rw-r--r-- 1 root root   1786 Nov 14 23&#58;32 9763ce9e.0
-rw-r--r-- 1 root root    473 Nov 14 23&#58;32 9763ce9e.info
-rw-r--r-- 1 root root    450 Nov 14 23&#58;32 9763ce9e.namespaces
-rw-r--r-- 1 root root    792 Nov 17 13&#58;14 9763ce9e.r0
-rw-r--r-- 1 root root    218 Nov 14 23&#58;32 9763ce9e.signing_policy
2011-12-01 13&#58;39&#58;37 UTC [root@voms-itb&#58;/etc/grid-security/certificates]# ls -l | grep 6ecf4ebc
-rw-r--r-- 1 root root   1406 Nov 14 23&#58;32 6ecf4ebc.0
-rw-r--r-- 1 root root    470 Nov 14 23&#58;32 6ecf4ebc.info
-rw-r--r-- 1 root root    474 Nov 14 23&#58;32 6ecf4ebc.namespaces
-rw-r--r-- 1 root root    796 Nov 17 13&#58;14 6ecf4ebc.r0
-rw-r--r-- 1 root root    262 Nov 14 23&#58;32 6ecf4ebc.signing_policy</pre></div><div class='update_description'><i onclick="document.location='11301#1322693681'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-30T22:54:41+00:00">Nov 30, 2011 10:54 PM UTC</time><a class="anchor" name="1322693681">&nbsp;</a></div><pre>I second Jim&#39;s comments. Configuration doesn&#39;t look right from what&#39;s posted here.

-- by Von Welch</pre></div><div class='update_description'><i onclick="document.location='11301#1322693640'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-30T22:54:00+00:00">Nov 30, 2011 10:54 PM UTC</time><a class="anchor" name="1322693640">&nbsp;</a></div><pre>(Adding myself to the CC, as I&#39;m curious of the final resolution)

-- by Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='11301#1322693592'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-30T22:53:12+00:00">Nov 30, 2011 10:53 PM UTC</time><a class="anchor" name="1322693592">&nbsp;</a></div><pre>For what it&#39;s worth - the EMI trustmanager used by VOMS will reject CAs without appropriate CRLs.  I got bit by this when adding CILogon users to our VO&#58; they couldn&#39;t go to the VOMS server until CRLs were updated.

I have examined the the output of &#34;openssl s_client&#34;, and can verify that the DigiCert root and intermediate CAs are listed as acceptable from the client by the HTTPS server.

So, you need not only &#60;hash&#62;.0 but &#60;hash&#62;.r0 in place.  Should auto-reload-ish.  Kinda.

-- by Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='11301#1322693123'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-30T22:45:23+00:00">Nov 30, 2011 10:45 PM UTC</time><a class="anchor" name="1322693123">&nbsp;</a></div><pre>Also, what is the error message in the VOMS server logs?

-- by Jim Basney</pre></div><div class='update_description'><i onclick="document.location='11301#1322692608'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-30T22:36:48+00:00">Nov 30, 2011 10:36 PM UTC</time><a class="anchor" name="1322692608">&nbsp;</a></div><pre>Besides the DigiCertGridTESTCA-1.* and DigiCertGridTESTRootCA.* files, do you also have the files installed under the 9763ce9e.* and 6ecf4ebc.* names as required by grid software like VOMS? I don&#39;t think DigiCert is the right place to ask. DigiCert doesn&#39;t know anything about configuring CAs in VOMS.

-- by Jim Basney</pre></div><div class='update_description'><i onclick="document.location='11301#1322692041'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-30T22:27:21+00:00">Nov 30, 2011 10:27 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1322692041">&nbsp;</a></div><pre>The DigiCert CAs are definitely on the machine...

...
-rw-r--r-- 1 root root    111 Nov 14 23&#58;32 DigiCertGridTESTCA-1.crl_url
-rw-r--r-- 1 root root    473 Nov 14 23&#58;32 DigiCertGridTESTCA-1.info
-rw-r--r-- 1 root root    450 Nov 14 23&#58;32 DigiCertGridTESTCA-1.namespaces
-rw-r--r-- 1 root root   1786 Nov 14 23&#58;32 DigiCertGridTESTCA-1.pem
-rw-r--r-- 1 root root    218 Nov 14 23&#58;32 DigiCertGridTESTCA-1.signing_policy
-rw-r--r-- 1 root root    115 Nov 14 23&#58;32 DigiCertGridTESTRootCA.crl_url
-rw-r--r-- 1 root root    470 Nov 14 23&#58;32 DigiCertGridTESTRootCA.info
-rw-r--r-- 1 root root    474 Nov 14 23&#58;32 DigiCertGridTESTRootCA.namespaces
-rw-r--r-- 1 root root   1406 Nov 14 23&#58;32 DigiCertGridTESTRootCA.pem
-rw-r--r-- 1 root root    262 Nov 14 23&#58;32 DigiCertGridTESTRootCA.signing_policy
...

My last try was also unsuccessful... I think we may need someone from digicert to help out.</pre></div><div class='update_description'><i onclick="document.location='11301#1322686360'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-30T20:52:40+00:00">Nov 30, 2011 08:52 PM UTC</time><a class="anchor" name="1322686360">&nbsp;</a></div><pre>Oh, <a href='https&#58;//voms-itb.grid.iu.edu&#58;8443/voms/MIS/' target='_blank' rel='nofollow'>https&#58;//voms-itb.grid.iu.edu&#58;8443/voms/MIS/</a> works for me when I use an NCSA user certificate but when I use a DigiCert Grid user certificate, I get&#58; Error code&#58; ssl_error_certificate_unknown_alert. Does voms-itb.grid.iu.edu have the DigiCert Grid CA certificates installed in X509_CERT_DIR? It seems the VOMS server isn&#39;t configured to trust DigiCert Grid CA certificates.

-- by Jim Basney</pre></div><div class='update_description'><i onclick="document.location='11301#1322685808'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-30T20:43:28+00:00">Nov 30, 2011 08:43 PM UTC</time><a class="anchor" name="1322685808">&nbsp;</a></div><pre>I&#39;m using Firefox 8.0.1 on MacOS 10.6.8, with the DigiCert Grid root and intermediate CA certificates installed and marked as trusted. Would you like me to try a different browser?

-- by Jim Basney</pre></div><div class='update_description'><i onclick="document.location='11301#1322685634'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-30T20:40:34+00:00">Nov 30, 2011 08:40 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1322685634">&nbsp;</a></div><pre>Jim,

What browser are you using?

Rob</pre></div><div class='update_description'><i onclick="document.location='11301#1322684957'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-30T20:29:17+00:00">Nov 30, 2011 08:29 PM UTC</time><a class="anchor" name="1322684957">&nbsp;</a></div><pre><a href='https&#58;//voms-itb.grid.iu.edu&#58;8443/voms/MIS/' target='_blank' rel='nofollow'>https&#58;//voms-itb.grid.iu.edu&#58;8443/voms/MIS/</a> works fine for me now.

-- by Jim Basney</pre></div><div class='update_description'><i onclick="document.location='11301#1322684947'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-30T20:29:07+00:00">Nov 30, 2011 08:29 PM UTC</time> by <b>Mine Altunay</b><a class="anchor" name="1322684947">&nbsp;</a></div><pre>sent Rob the command to generate the cert request.
once he sends me back the csr file, i will upload it to digicert
On 11/30/11 2&#58;25 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11301#1322684704'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-30T20:25:04+00:00">Nov 30, 2011 08:25 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1322684704">&nbsp;</a></div><pre>So I think this is the issue... I may have to request the certs myself from the machine they will be used on, rather than having Mine send me the certs she requests. From DigiCert Tomcat installation instructions...

&#34;***NOTE***&#58; The certificate must be installed to the same keystore that was used to generate your CSR. If you try to install it to a different keystore it will not work.&#34;</pre></div><div class='update_description'><i onclick="document.location='11301#1322603206'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-29T21:46:46+00:00">Nov 29, 2011 09:46 PM UTC</time><a class="anchor" name="1322603206">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Then <a href='https&#58;//voms-itb.grid.iu.edu&#58;8443/voms/MIS' target='_blank' rel='nofollow'>https&#58;//voms-itb.grid.iu.edu&#58;8443/voms/MIS</a> tells me&#58; &#34;Peer&#39;s Certificate has been revoked.&#34;</font>

About 10 minutes before you posted this, Mine revoked the current certificate and issued a new one.

<font color='#7F7E6F'>&#62; that&#39;s because I haven&#39;t imported the DigiCert Grid CA certificate into my browser yet (like we do for the DOEGrids CA)</font>

Ultimately we should be getting web certificates from the trusted DigiCert root and not the Grid CA.

-- by Von Welch</pre></div><div class='update_description'><i onclick="document.location='11301#1322602882'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-29T21:41:22+00:00">Nov 29, 2011 09:41 PM UTC</time><a class="anchor" name="1322602882">&nbsp;</a></div><pre>-- by Jim Basney</pre></div><div class='update_description'><i onclick="document.location='11301#1322602828'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-29T21:40:28+00:00">Nov 29, 2011 09:40 PM UTC</time><a class="anchor" name="1322602828">&nbsp;</a></div><pre>When I open <a href='https&#58;//voms-itb.grid.iu.edu&#58;8443/voms/MIS' target='_blank' rel='nofollow'>https&#58;//voms-itb.grid.iu.edu&#58;8443/voms/MIS</a> in Firefox I get a &#34;This Connection is Untrusted&#34; error, but that&#39;s because I haven&#39;t imported the DigiCert Grid CA certificate into my browser yet (like we do for the DOEGrids CA). So, I download <a href='http&#58;//digicert-grid.com/DigiCertGridTESTRootCA.cer' target='_blank' rel='nofollow'>http&#58;//digicert-grid.com/DigiCertGridTESTRootCA.cer</a> and <a href='http&#58;//digicert-grid.com/DigiCertGridTESTCA-1.cer' target='_blank' rel='nofollow'>http&#58;//digicert-grid.com/DigiCertGridTESTCA-1.cer</a> then import the CA certificates and mark them trusted (for documentation on how to do this, see&#58; <a href='http&#58;//security.fnal.gov/pki/Export-Personal-Cert.html#firefox' target='_blank' rel='nofollow'>http&#58;//security.fnal.gov/pki/Export-Personal-Cert.html#firefox</a>). Then <a href='https&#58;//voms-itb.grid.iu.edu&#58;8443/voms/MIS' target='_blank' rel='nofollow'>https&#58;//voms-itb.grid.iu.edu&#58;8443/voms/MIS</a> tells me&#58; &#34;Peer&#39;s Certificate has been revoked.&#34; It appears that voms-itb.grid.iu.edu is using a certificate issued November 14 or November 15 that has since been revoked. I see two other voms-itb.grid.iu.edu certificates issued November 29 that are not revoked. So I recommend updating voms-itb.grid.iu.edu with one of the newer certificates.

-- by Jim Basney</pre></div><div class='update_description'><i onclick="document.location='11301#1322578071'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-29T14:47:51+00:00">Nov 29, 2011 02:47 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1322578071">&nbsp;</a></div><pre>OK, I&#39;ve worked this several ways and either the problem reported by the DigiCert help page or the solution to the problem don&#39;t seem to work.

I go to <a href='http&#58;//www.digicert.com/help/' target='_blank' rel='nofollow'>http&#58;//www.digicert.com/help/</a> and enter &#34;<a href='https&#58;//voms-itb.grid.iu.edu&#58;8443/voms/MIS/&#34' target='_blank' rel='nofollow'>https&#58;//voms-itb.grid.iu.edu&#58;8443/voms/MIS/&#34</a>; in the server address box. This gives me several successes then a failure at &#34;The server is not sending the required intermediate certificate.&#34; Following the links/direction on setting up Tomcat with DigiCert p7b files.

Either this isn&#39;t the problem, or this isn&#39;t the fix. One other odd thing, this seemed to work for several days prior to last week before this problem occurred.

Thoughts?</pre></div><div class='update_description'><i onclick="document.location='11301#1322510468'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-28T20:01:08+00:00">Nov 28, 2011 08:01 PM UTC</time> by <b>Mine Altunay</b><a class="anchor" name="1322510468">&nbsp;</a></div><pre>OK after talking to Rob, I understood that he needs voms-itb service certificate in p7b format. sending that soon.</pre></div><div class='update_description'><i onclick="document.location='11301#1322510043'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-28T19:54:03+00:00">Nov 28, 2011 07:54 PM UTC</time><a class="anchor" name="1322510043">&nbsp;</a></div><pre>Suggest we post the p7b file on the twiki page&#58; <a href='https&#58;//twiki.grid.iu.edu/bin/view/Security/DigiCertPilotProject' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Security/DigiCertPilotProject</a>

-- by Von Welch</pre></div><div class='update_description'><i onclick="document.location='11301#1322509834'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-28T19:50:34+00:00">Nov 28, 2011 07:50 PM UTC</time> by <b>Mine Altunay</b><a class="anchor" name="1322509834">&nbsp;</a></div><pre>Hello Rob, it seems like you need the p7b file that contains all the root CA certs. i will send you a copy. This is not specific to voms-itb instance.
Any service certificate issued by DigiCert should have the root CA certs installed. will update this ticket soon.</pre></div><div class='update_description'><i onclick="document.location='11301#1322509374'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-28T19:42:54+00:00">Nov 28, 2011 07:42 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1322509374">&nbsp;</a></div><pre>Adding Von to this ticket, his DigiCert contact may have info on how to overcome this error.</pre></div><div class='update_description'><i onclick="document.location='11301#1322509186'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-28T19:39:46+00:00">Nov 28, 2011 07:39 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1322509186">&nbsp;</a></div><pre>Mine,

I am trying to follow the directions at <a href='http&#58;//www.digicert.com/ssl-certificate-installation-tomcat.htm...' target='_blank' rel='nofollow'>http&#58;//www.digicert.com/ssl-certificate-installation-tomcat.htm...</a>

But the first one is to download the .p7b file from your digicert account. Can you get this file for voms-itb.grid.iu.edu for me?

Rob</pre></div><div class='update_description'><i onclick="document.location='11301#1322505943'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-28T18:45:43+00:00">Nov 28, 2011 06:45 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1322505943">&nbsp;</a></div><pre>Got this from DigiCert&#39;s site...

The server is not sending the required intermediate certificate.

This server needs to be configured to include DigiCert&#39;s intermediate certificates during SSL handshakes. You may not notice a problem when using Internet Explorer because it can follow the http link to the intermediate certificate embedded in the certificate&#39;s &#39;Authority Information Access&#39; extension, but Firefox, Safari, and other browsers will likely complain until the intermediate certificates are installed and configured on the server. For instructions on how to achieve this, please check the installation guide for your platform in the SSL certificate installation section of our site. If you have any problems correcting this issue, please contact our helpful support team and we would be happy to assist.</pre></div><div class='update_description'><i onclick="document.location='11301#1322505503'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-28T18:38:23+00:00">Nov 28, 2011 06:38 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1322505503">&nbsp;</a></div><pre>[by Rob Quick]

Problem with voms-itb.grid.iu.edu

I get this message when pointing my browser at voms-itb... I&#39;ve restarted services and am checking to see what may be causing this.

----

Secure Connection Failed

An error occurred during a connection to voms-itb.grid.iu.edu&#58;8443.

SSL peer had some unspecified issue with the certificate it received.

(Error code&#58; ssl_error_certificate_unknown_alert)

The page you are trying to view can not be shown because the authenticity of the received data could not be verified.
Please contact the web site owners to inform them of this problem. Alternatively, use the command found in the help menu to report this broken site.</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F11301">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="/images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 11301});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
