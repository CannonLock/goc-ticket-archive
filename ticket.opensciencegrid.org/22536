<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="/">
    <title>[22536] IPv6 connections to glidein.grid.iu.edu</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="//netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="https://ticket.opensciencegrid.org/images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="https://ticket.opensciencegrid.org/lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=22536" method="post">
<div class="page-header">
    <h3><span class="muted">22536</span> / IPv6 connections to glidein.grid.iu.edu</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Petr Vokac</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Petr Vokac</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Resolved</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-10-03</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
        <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=22536", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="/22536?sort=up&"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="/22536?expandall=true&">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20IPv6%20connections%20to%20glidein.grid.iu.edu%20ISSUE%3D22536%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='22536#1412360193'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-03T18:16:33+00:00">Oct 3, 2014 06:16 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1412360193">&nbsp;</a></div><pre>Thanks, all.  It appears this ticket has been resolved.
I am going to set this to resolve in 24 hours unless I hear back otherwise.

Thanks!
Vince</pre></div><div class='update_description'><i onclick="document.location='22536#1412349200'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-03T15:13:20+00:00">Oct 3, 2014 03:13 PM UTC</time><a class="anchor" name="1412349200">&nbsp;</a></div><pre>Petr, thanks for fixing the wgetrc issue, it looks like I typo&#39;d the option as inet4_only instead of inet4-only, sorry about that. I&#39;ve passed your concerns and recommendations for IPv6 on to the sysadmin for glidein.grid.iu.edu as well.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='22536#1412180529'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-01T16:22:09+00:00">Oct 1, 2014 04:22 PM UTC</time><a class="anchor" name="1412180529">&nbsp;</a></div><pre>You could also consider following changes in firewall configuration on glidein.grid.iu.edu

ip6tables -I INPUT 1 -p tcp -m state --state NEW -m tcp --dport 80 -j REJECT --reject-with icmp6-port-unreachable

With this rule client is informed that it is not possible to use IPv6 connection to port 80 and it immediately tries IPv4 connection (I never used this rule in production, so I&#39;m not 100% sure if that could cause also some unexpected side effect)

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Petr Vokac 975</pre></div><div class='update_description'><i onclick="document.location='22536#1412177926'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-01T15:38:46+00:00">Oct 1, 2014 03:38 PM UTC</time><a class="anchor" name="1412177926">&nbsp;</a></div><pre>Thanks for reporting issue my modification of /home/nova/.wgetrc, I fixed (tested) .wgetrc and now it contains just one correct configuration line&#58;

inet4-only = on

Without this specific configuration default IPv6 connection timeout time is ~ 1 minute.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Petr Vokac 975</pre></div><div class='update_description'><i onclick="document.location='22536#1412176513'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-01T15:15:13+00:00">Oct 1, 2014 03:15 PM UTC</time><a class="anchor" name="1412176513">&nbsp;</a></div><pre>Hey Petr,

It looks like the changes to /home/nova/.wgetrc on your end are causing some issues, I&#39;ve started seeing glideins failing validation with the following error&#58;

Wed Oct 1 14&#58;26&#58;16 CEST 2014 GLOBUS_PATH not defined and /usr/etc/globus-user-env.sh does not exist.
Wed Oct 1 14&#58;26&#58;16 CEST 2014 Continuing like nothing happened
Setting X509_USER_PROXY  to canonical path /home/nova/.globus/nova/.globus/job/novastore/16434027881383367671.18205401890508816519/x509_user_proxy
wget&#58; Syntax error in /home/nova/.wgetrc at line 5.
wget&#58; Syntax error in /home/nova/.wgetrc at line 5.
Wed Oct 1 14&#58;26&#58;17 CEST 2014 Unknown kind of wget, cannot disable caching
wget&#58; Syntax error in /home/nova/.wgetrc at line 5.
Wed Oct 1 14&#58;26&#58;17 CEST 2014 Failed to load file &#39;description.e9qc3w.cfg&#39; from &#39;<a href='http&#58;//gfactory-1.t2.ucsd.edu/glidefactory//stage/glidein_v3_0&#39' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/glidefactory//stage/glidein_v3_0&#39</a>;.
Wed Oct 1 14&#58;26&#58;17 CEST 2014 Sleeping 341

Also I just wanted to double check, how long is wget hanging for when trying to use the IPv6 address? Is it on the order of minutes or longer?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='22536#1412108176'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-30T20:16:16+00:00">Sep 30, 2014 08:16 PM UTC</time><a class="anchor" name="1412108176">&nbsp;</a></div><pre>I already updated /home/nova/.wgetrc (home of job user) and added short connect_timeout as temporary workaround, but your inet4_only is probably better way to deal with this issue (our worker nodes have also IPv4 private addresses + NAT). I&#39;m just not sure if it is good idea to advertise AAAA records for machine that doesn&#39;t really provide IPv6 access to all its services.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Petr Vokac 975</pre></div><div class='update_description'><i onclick="document.location='22536#1412091669'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-30T15:41:09+00:00">Sep 30, 2014 03:41 PM UTC</time><a class="anchor" name="1412091669">&nbsp;</a></div><pre>Hi Petr,

We&#39;ve started talking about this outside of this ticket with the sysadmin for that particular factory, but there are several considerations we&#39;ll have to make before IPv6 could be enabled so it may take a while before we&#39;ll be ready to update this again.

Until then, how long is wget pausing for while waiting for the IPv6 timeout? If it&#39;s on the order of minutes, then a temporary change may be to edit /etc/wgetrc on the nodes and add something like&#58;
connect_timeout = 30

Alternatively, if IPv4 is still enabled and working for the nodes, there&#39;s always the option to force everything to use it only for now with&#58;
inet4_only = on

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='22536#1412013529'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-29T17:58:49+00:00">Sep 29, 2014 05:58 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1412013529">&nbsp;</a></div><pre>Petr,

I have CC&#39;d OSG Factory Support on this ticket for feedback.

Thank you,
Vince</pre></div><div class='update_description'><i onclick="document.location='22536#1411835701'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-27T16:35:01+00:00">Sep 27, 2014 04:35 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1411835701">&nbsp;</a></div><pre>Most of our worker nodes at FZU cluster has IPv6 connectivity. When NOvA job starts it tries to get data from glidein.grid.iu.edu first using IPv6 connection and wait for timeout before it tries IPv4 , e.g.

wget --user-agent=wget/glidein/Nova_CZ_FZU_novastore/schedd_glideins1@..../1623480.0/fifebatchgpvmhead1_OSG_gWMSFrontend.OSG_nova -q -O /tmp/glide_BLhruX/main/validate_node.dbchWQ.sh <a href='http&#58;//glidein.grid.iu.edu/glidefactory//stage/glidein_v3_0/validate_node.dbchWQ.sh' target='_blank' rel='nofollow'>http&#58;//glidein.grid.iu.edu/glidefactory//stage/glidein_v3_0/validate_node.dbchWQ.sh</a>

[nova@.... ~]$ strace -p 3561 -tt
Process 3561 attached - interrupt to quit
18&#58;10&#58;45.564360 connect(4, {sa_family=AF_INET6, sin6_port=htons(80), inet_pton(AF_INET6, &#34;2001&#58;18e8&#58;2&#58;6&#58;&#58;152&#34;, &sin6_addr), sin6_flowinfo=0, sin6_scope_id=0}, 28) = -1 ETIMEDOUT (Connection timed out)
18&#58;11&#58;11.857706 close(4)                = 0
18&#58;11&#58;11.857816 socket(PF_INET, SOCK_STREAM, IPPROTO_IP) = 4
18&#58;11&#58;11.857878 connect(4, {sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(&#34;129.79.53.27&#34;)}, 16) = 0

Could you please allow IPv6 connections to HTTP service on glidein.grid.iu.edu

[nova@.... ~]$ tracepath6 glidein.grid.iu.edu
1?&#58; [LOCALHOST]                      pmtu 9000
1&#58;  2001&#58;718&#58;1e01&#58;1717&#58;&#58;1                      0.598ms
1&#58;  2001&#58;718&#58;1e01&#58;1717&#58;&#58;1                      0.565ms
2&#58;  2001&#58;718&#58;1e01&#58;1012&#58;&#58;31                     0.677ms
3&#58;  ge-troja.ipv6.pasnet.cz                    0.809ms
4&#58;  ge-ruk.ipv6.pasnet.cz                      0.822ms
5&#58;  bgp-ruk.ipv6.pasnet.cz                     2.649ms
6&#58;  cesnetkcp-bgpruk.ipv6.pasnet.cz            1.270ms
7&#58;  nix2-20ge.ipv6.cesnet.cz                   2.898ms pmtu 1500
7&#58;  20ge1-3.core1.prg1.he.net                  0.839ms
7&#58;  20ge1-3.core1.prg1.he.net                  1.066ms
8&#58;  10ge15-3.core1.fra1.he.net                 7.967ms
9&#58;  100ge3-1.core1.ams1.he.net                13.574ms
10&#58;  100ge9-1.core1.lon2.he.net                31.869ms
11&#58;  100ge1-1.core1.nyc4.he.net                86.461ms
12&#58;  100ge5-1.core1.ash1.he.net                91.649ms
13&#58;  abilene-as11537.gigabitethernet4-18.core1.ash1.he.net  95.294ms asymm 14
14&#58;  lo-0.1.rtr.chic.net.internet2.edu        109.066ms
15&#58;  ae-1.2048.rtr.ictc.indiana.gigapop.net   112.220ms asymm 14
16&#58;  ae-10.16.br2.ictc.net.uits.iu.edu        133.738ms asymm 12
17&#58;  ae-0.0.br2.bldc.net.uits.iu.edu          120.566ms asymm 13
<div id='show_405391324' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_405391324'>18&#58;  ae-10.0.dcr3.bldc.net.uits.iu.edu        2165.933ms !H
Resume&#58; pmtu 1500

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Petr Vokac 975
</div><script type='text/javascript'>
        $('#show_405391324').click(function() {
            $('#detail_405391324').slideDown("normal");
            $('#show_405391324').hide();
            $('#hide_405391324').show();
        });
        $('#hide_405391324').click(function() {
            $('#detail_405391324').slideUp();
            $('#hide_405391324').hide();
            $('#show_405391324').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F22536">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="/images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 22536});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
