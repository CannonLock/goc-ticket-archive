<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[8710] Resource Specific Issue on UConn-OSG_CE</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=8710" method="post">
<div class="page-header">
    <h3><span class="muted">8710</span> / Resource Specific Issue on UConn-OSG_CE</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Richard T. Jones</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Close if no response</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-07-06</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG RA <span class="muted"> / OSG GOC Support Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/8710", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='8710#1277142428'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-21T17:47:08+00:00">Jun 21, 2010 05:47 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1277142428">&nbsp;</a></div><pre>This is an automatic reply.
.
I am away from the lab on business travel
If you have any need of help with FermiGrid please
contact the Service Desk at <a href='http&#58;//servicedesk.fnal.gov' target='_blank' rel='nofollow'>http&#58;//servicedesk.fnal.gov</a>,
(630) 840-2345.  If human contact is necessary, please
contact my supervisor, Keith Chadwick.
I will be checking E-mail intermittently during this time.
I will return to the lab on June 24, 2010

Steve Timm</pre></div><div class='update_description'><i onclick="document.location='8710#1277142246'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-21T17:44:06+00:00">Jun 21, 2010 05:44 PM UTC</time> by <b>Mine Altunay</b><a class="anchor" name="1277142246">&nbsp;</a></div><pre>Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8710#1276896847'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-18T21:34:07+00:00">Jun 18, 2010 09:34 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276896847">&nbsp;</a></div><pre>Mine and all,

Thank you for this very complete diagnosis and explanation of the
problems I reported in this ticket.  I interpret your comments to imply
that the file transfer error I reported was caused by a bug in some
gridftp servers that are running versions older versions of the code,
and that this bug has been fixed in newer versions.  A double-limited
(or equivalent) proxy was required to trigger the fault.

For the present, I will retain the solution I put in place to propagate
the single-limited proxy down to the job context on the worker nodes.
It entails very little overhead in job setup, and works around this bug
between now and the time that the server software is upgraded.

If others are satisfied, I think this ticket can be closed out.

-Richard J.</pre></div><div class='update_description'><i onclick="document.location='8710#1276895873'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-18T21:17:53+00:00">Jun 18, 2010 09:17 PM UTC</time> by <b>Mine Altunay</b><a class="anchor" name="1276895873">&nbsp;</a></div><pre>All
I had a small test on the original ticket 8710 two weeks ago and emailed
my results to the security team for discussion.

Very short answer&#58; there should not be any problem with limited proxies.
Regardless of how many times they are delegated, a limited proxy can
always perform file transfers. There is no policy that says otherwise in
RFC 3820 profile nor in globus documentation or code. What Richard sees
is a very old bug in gsi code (from 2005),  see the bottom of my email.

Now more detail&#58;
I tested the above statement with with globus-url-copy that uses gsi-ftp.

RFC3820 compliant limited proxies have no trouble with file transfer in
my experiment.

RFC3820 compliant limited proxies CANNOT start any jobs.
These are all expected results.

Your question is (the ticket 8170 asks me) whether a limited proxy that
is delegated (i.e. generated) by another limited proxy should transfer
files. My answr is yes it can and it should.

If you ask me whether this behavior is expected or desired from our
policy standpoint, my answer is yes. RFC profile says nothing about
delegation path of a limited proxy (how many times it is delegated).
However, the documentation clearly says that limited proxies are only
good for file transfers. RFC profile also says that &#34;The
pCPathLenConstraint field of the proxyCertInfo extension can be
used by an EEC to limit subsequent delegation of the PC.&#34; If a proxy
(whether full or limited) has this field set to restricted then it
cannot delegate a new proxy. This is different than what a limited proxy
can and cannot do.

If a user wants to prevent its limited proxy to generate further proxies
<div id='show_866949745' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_866949745'>which then access files on his behalf, the software should set the
pCPathLenConstraint field to restricted. Limited proxies are allowed to
generate new limited proxies. Limited proxies are allowed to tarnsfer
files. Thus, our code should allow doubly-limited proxy to transfer
files, which it does . so i see no problem so far.

BUG&#58;
Richard has file transfer problems only with *some sites*. I did a
source code search in gsi (with help of Basney) and we found the bug.
This is a bug left from 2005 v 3.2 .
Look at this page&#58;
<a href='http&#58;//viewcvs.globus.org/viewcvs.cgi/gsi/callback/source/library/globus_gsi_callback.c?r1=1.23&r2=1.24' target='_blank' rel='nofollow'>http&#58;//viewcvs.globus.org/viewcvs.cgi/gsi/callback/source/library/globus_gsi_callback.c?r1=1.23&r2=1.24</a>

The developer first thinks limited proxies should not delegate a new
proxy , but later she/he fixes his code to allow it.

I would really encourage the site to check which globus version they run
and upgrade it.

Hope this helps.

Abhishek Singh Rana wrote&#58;
<font color='#7F7E6F'>&#62; &#62; Dear Mine, Doug&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; I am looking to get more guidance from you on the matter pointed out by</font>
<font color='#7F7E6F'>&#62; &#62; GlueX, D0, DOSAR, and FermiGrid.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; GlueX and D0 teams are currently investigating problems</font>
<font color='#7F7E6F'>&#62; &#62; &#60;<a href='8710.html' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=8710&#62</a>; with double-limited</font>
<font color='#7F7E6F'>&#62; &#62; x.509 proxy certificates. It may be associated with NFS-lite or Condor</font>
<font color='#7F7E6F'>&#62; &#62; configuration.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; It is likely that our current support for certificates &#39;limited more</font>
<font color='#7F7E6F'>&#62; &#62; than once&#39; is ad hoc; mainly based on site batch-system configuration</font>
<font color='#7F7E6F'>&#62; &#62; and artifacts in security software. It may be useful to identify our</font>
<font color='#7F7E6F'>&#62; &#62; policy on this.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62; Abhishek (for Richard)</font>
<font color='#7F7E6F'>&#62; &#62;</font>
</div><script type='text/javascript'>
        $('#show_866949745').click(function() {
            $('#detail_866949745').slideDown("normal");
            $('#show_866949745').hide();
            $('#hide_866949745').show();
        });
        $('#hide_866949745').click(function() {
            $('#detail_866949745').slideUp();
            $('#hide_866949745').hide();
            $('#show_866949745').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8710#1276479726'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-14T01:42:06+00:00">Jun 14, 2010 01:42 AM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276479726">&nbsp;</a></div><pre>Steve,

I would be happy to compare my wrapper with any reference site&#39;s,
particularly one that is running the nfslite jobmanager.  Can I request
a copy?

<font color='#7F7E6F'>&#62;   It could be that you are dealing</font>
<font color='#7F7E6F'>&#62; with a change in the delegation behaior  in Condor, or</font>
<font color='#7F7E6F'>&#62; that you have a setting set in your condor_config that you</font>
<font color='#7F7E6F'>&#62; shouldn&#39;t have.  What is the setting of DELEGATE_JOB_GSI_CREDENTIALS</font>
<font color='#7F7E6F'>&#62; in your condor_config?</font>

My DELEGATE_JOB_GSI_CREDENTIALS is True.  I think I want that behavior.
There are two delegations happening for each job at my site&#58; the first
one that happens when the gatekeeper creates the jobdir under the user&#39;s
homedir to whom GUMS maps the job, and the second one that happens when
the job gets set up on the worker node.  If I turn off
DELEGATE_JOB_GSI_CREDENTIALS then I get a copy of the full proxy being
made at both steps, and go from one extreem of having a double-limited
proxy to having an unlimited proxy.  The intended behavior, which I get
with my fix, is to obtain a single-limited proxy in the running job
context on the WN.

<font color='#7F7E6F'>&#62; Also there was a minor bug in condor 7.4.1 and how it</font>
<font color='#7F7E6F'>&#62; dealt with delegating limited proxies, you could be up against that.</font>
<font color='#7F7E6F'>&#62;</font>

I ran across reports of this problem in hunting down this one.  However,
the vdt is still running 7.2.5 so I believe we are not affected by that one.

-Richard Jones

On 6/13/2010 9&#58;24 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8710#1276478647'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-14T01:24:07+00:00">Jun 14, 2010 01:24 AM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1276478647">&nbsp;</a></div><pre>Richard--
2 comments--
Before patching your job  wrapper I would suggest that you compare notes
of your job wrapper with one of the big tier 1 or tier 2 sites, either
CMS tier 1 at FNAL, or UCSD.  It could be that you are dealing
with a change in the delegation behaior  in Condor, or
that you have a setting set in your condor_config that you
shouldn&#39;t have.  What is the setting of DELEGATE_JOB_GSI_CREDENTIALS
in your condor_config?

Also there was a minor bug in condor 7.4.1 and how it
dealt with delegating limited proxies, you could be up against that.

Steve Timm

On Sun, 13 Jun 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8710#1276464966'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-13T21:36:06+00:00">Jun 13, 2010 09:36 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276464966">&nbsp;</a></div><pre>Horst,

Your description was close, except instead of overwriting the bogus
x509_up file, it copies the original one from the gatekeeper to a new
file named x509_up_orig in the same directory, and makes the env var
X509_USER_PROXY point to that one instead.  I did not want to overwrite
the one placed there by the system in case the condor system needs it
there for some reason during job cleanup.

I think the fix has to go in the jobwrapper, doesn&#39;t it?  I originally
wanted to put the patch into the nfslite jobmanager (condornfslite.pm)
but it cannot go there because the jobmanager runs on the gatekeeper,
whereas this code has to execute on the worker node in the context of
the job to be run.  If you can think of another hook for WN job context
customization that is less invasive, please suggest.

-Richard Jones

On 6/12/2010 11&#58;00 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8710#1276398009'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-13T03:00:09+00:00">Jun 13, 2010 03:00 AM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1276398009">&nbsp;</a></div><pre>Hi Richard,

<font color='#7F7E6F'>&#62;if (exists $ENV{&#39;CHANGED_X509&#39;}) {</font>
<font color='#7F7E6F'>&#62;     my $orig_x509_cert =</font>
<font color='#7F7E6F'>&#62;&#34;<a href='gsiftp&#58;//ce1.phys.uconn.edu/&#34' target='_blank' rel='nofollow'>gsiftp&#58;//ce1.phys.uconn.edu/&#34</a>;.$ENV{&#39;CHANGED_X509&#39;};</font>
<font color='#7F7E6F'>&#62;     my $new_x509_cert = &#34;file&#58;//&#34;.$ENV{&#39;X509_USER_PROXY&#39;}.&#34;_orig&#34;;</font>
<font color='#7F7E6F'>&#62;     system(&#34;globus-url-copy $orig_x509_cert $new_x509_cert&#34;);</font>
<font color='#7F7E6F'>&#62;     $ENV{&#39;X509_USER_PROXY&#39;} .= &#34;_orig&#34;;</font>
<font color='#7F7E6F'>&#62;     chmod 0600, $ENV{&#39;X509_USER_PROXY&#39;};</font>
<font color='#7F7E6F'>&#62;}</font>

So do I understand this correctly, that you get the original proxy
($CHANGED_X509) from the gatekeeper via gridftp, and then overwrite
the one that condor-nfs-lite provides in $_CONDOR_SCRATCH_DIR
with this original one? Sory, my perl isn&#39;t that great,
especially once we&#39;re dealing with substitutions and stuff
like above.

If my understanding of this is correct, and if this patch actually works,
then we could implement this in a similar way in our jobwrapper, which
is a bash script. And then hopefully someone will be able to fix the
condor.pm of the condor-nfs-lite as well, so we won&#39;t have to keep
this hack in our jobwrappers forever.

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='8710#1276302067'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-12T00:21:07+00:00">Jun 12, 2010 12:21 AM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276302067">&nbsp;</a></div><pre>ps. The last message was supposed to be signed by me.

-Richard Jones</pre></div><div class='update_description'><i onclick="document.location='8710#1276301709'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-12T00:15:09+00:00">Jun 12, 2010 12:15 AM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276301709">&nbsp;</a></div><pre>I believe I now have repaired this problem on the UConn-OSG site. I put
the patch into my condor jobwrapper script (USER_JOB_WRAPPER in
condor_config).  I use a USER_JOB_WRAPPER at my site to initialize a
uniform environment for all condor jobs, so since this is already a
local customization I decided to put this fix in there.  Please submit
jobs to UConn-OSG, and report any file transfer failures you see.

The following section was added to jobwrapper.pl&#58;

# fix added for condor-nfs-lite [rtj, 6-10-2010]
# -----------------------------------------------------------------
# The condor daemons create a limited proxy from the credential used at
# condor_submit time, store it in the file x509_up in the jobdir located
# on the gatekeeper node in the homedir of the user that owns the job, and
# set the environment variable X509_USER_PROXY to point to it in the job
# context.  Normally this is not a problem because the job dir is assumed
# to be accessible on the worker nodes over nfs.  However in the case of
# condor-nfs-lite, the jobdir is not directly accessible on the worker node.
# Apparently the authors of condor-nfs-lite noticed that job was not able
# to read the file pointed to by X509_USER_PROXY, so they modified the
# jobmanager to copy its value into a new variable CHANGED_X509 and let
# X509_USER_PROXY point instead to a different file called x509_up that
# is located in $_CONDOR_SCRATCH_DIR.  This latter file is automatically
# created and placed there on the worker node $_CONDOR_SCRATCH_DIR directory
# by the condor daemons.  The history of how that file came to be generated
# is interesting, but not important for the present purposes.  It is
# sufficient to note here that this x509_up file in $_CONDOR_SCRATCH_DIR
# at job startup is not a valid certificate for most purposes&#58; most grid
# operations will choke if that credential is used to authorize them.
#    DO NOT TRY IT -- SOMETIMES THINGS WILL WORK, VERY CONFUSING
# Instead what we want to do is to fetch a copy of what CHANGED_X509 points
# to on the gatekeeper and make X509_USER_PROXY point to that instead.
# How can this be done, without a valid proxy???  Use the bogus x509_up
# credential just to authorize this one fetch operation, then abandon it
# forevermore -- for the moment, this works on the UConn site.
<div id='show_1003834759' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1003834759'>#    WARNING -- THIS MAY BREAK IN FUTURE RELEASES, WATCH IT!
# -----------------------------------------------------------------

if (exists $ENV{&#39;CHANGED_X509&#39;}) {
my $orig_x509_cert =
&#34;<a href='gsiftp&#58;//ce1.phys.uconn.edu/&#34' target='_blank' rel='nofollow'>gsiftp&#58;//ce1.phys.uconn.edu/&#34</a>;.$ENV{&#39;CHANGED_X509&#39;};
my $new_x509_cert = &#34;file&#58;//&#34;.$ENV{&#39;X509_USER_PROXY&#39;}.&#34;_orig&#34;;
system(&#34;globus-url-copy $orig_x509_cert $new_x509_cert&#34;);
$ENV{&#39;X509_USER_PROXY&#39;} .= &#34;_orig&#34;;
chmod 0600, $ENV{&#39;X509_USER_PROXY&#39;};
}
</div><script type='text/javascript'>
        $('#show_1003834759').click(function() {
            $('#detail_1003834759').slideDown("normal");
            $('#show_1003834759').hide();
            $('#hide_1003834759').show();
        });
        $('#hide_1003834759').click(function() {
            $('#detail_1003834759').slideUp();
            $('#hide_1003834759').hide();
            $('#show_1003834759').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8710#1276288028'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-11T20:27:08+00:00">Jun 11, 2010 08:27 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276288028">&nbsp;</a></div><pre>Horst,

<font color='#7F7E6F'>&#62; So you&#39;re saying there should be a patch to NFS-lite which might solve</font>
<font color='#7F7E6F'>&#62; this doubly limited proxy?</font>
<font color='#7F7E6F'>&#62;</font>

Yes, I believe so.  Sorry my signature got deleted in the final
cut/paste step.

-Richard Jones</pre></div><div class='update_description'><i onclick="document.location='8710#1276284968'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-11T19:36:08+00:00">Jun 11, 2010 07:36 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1276284968">&nbsp;</a></div><pre>Hi Joel and all,

so ALL jobs fail at UCONN because of this doubly limited proxy
because of NFS-lite?

Maybe NFS-lite is the reason that most jobs are failing on OU_OSCER_CONDOR
then, too? But why do some jobs succeed there? Maybe because some of these
jobs get their input file from FNAL rather than ouhep00, and those few
succeed?

Would be nice if both of these problems had the same solution!

So you&#39;re saying there should be a patch to NFS-lite which might solve
this doubly limited proxy?

Who said that, by the way? It would be nice if everyone who replies to
an OSG ticket would sign their emails, since otherwise there&#39;s no way
to know who&#39;s saying what, since Footprints unfortunately seems to strip
the sender&#39;s identity completely off before it sends the email.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='8710#1276283709'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-11T19:15:09+00:00">Jun 11, 2010 07:15 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276283709">&nbsp;</a></div><pre>Steve,

Yes, that is it.  I am running condor-nfs-lite on my site.  When the job
first lands, a temporary directory is created under the local user
homedir for that VO (samgrid in Joel&#39;s case) that is called
~samgrid/.globus/job/nnnn.mmmmm where the name nnnn.mmmmm seems to be
generated automatically by the jobmanager.  Inside this directory I find
the job&#39;s executable and its transfer_input_files, together with a
limited proxy saved in a file x509_up, as in&#58;

$ openssl x509 -noout -text -in x509_up | head -n 10
Certificate&#58;
Data&#58;
Version&#58; 3 (0x2)
Serial Number&#58; 44709 (0xaea5)
Signature Algorithm&#58; md5WithRSAEncryption
Issuer&#58; DC=org, DC=doegrids, OU=People, CN=Joel M. Snow 647405,
CN=proxy, CN=proxy, CN=proxy, CN=proxy
Validity
Not Before&#58; Jun 11 18&#58;49&#58;31 2010 GMT
Not After &#58; Jun 23 15&#58;24&#58;41 2010 GMT
Subject&#58; DC=org, DC=doegrids, OU=People, CN=Joel M. Snow
647405, CN=proxy, CN=proxy, CN=proxy, CN=proxy, CN=limited proxy

When the job is dispatched to the worker node, however, a new proxy
seems to have been generated using the above one as a signer.  Let me
fix that problem later.  For the moment, I want to see if this
once-limited proxy solves the immediate problem being reported in this
ticket.  I copy this once-limited proxy into my own user context on host
gryphn and use it to attempt the failed transfer that I reported in the
opening report under this ticket.  Bingo, it works.

gryphn&#62; voms-proxy-info -all
WARNING&#58; Unable to verify signature! Server certificate possibly not
installed.
<div id='show_933019011' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_933019011'>Error&#58; Cannot verify AC signature!
subject   &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow
647405/CN=proxy/CN=proxy/CN=proxy/CN=proxy/CN=limited proxy
issuer    &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow
647405/CN=proxy/CN=proxy/CN=proxy/CN=proxy
identity  &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow
647405/CN=proxy/CN=proxy/CN=proxy/CN=proxy
type      &#58; limited proxy
strength  &#58; 1024 bits
path      &#58; /tmp/x509up_u7896
timeleft  &#58; 284&#58;26&#58;27
=== VO dzero extension information ===
VO        &#58; dzero
subject   &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow 647405
issuer    &#58; /DC=org/DC=doegrids/OU=Services/CN=http/voms.fnal.gov
attribute &#58; /dzero/users/Role=NULL/Capability=NULL
attribute &#58; /dzero/Role=NULL/Capability=NULL
timeleft  &#58; 284&#58;26&#58;28
uri       &#58; voms.fnal.gov&#58;15002

gryphn&#62; globus-url-copy -v -nodcau  -ss
&#34;/DC=org/DC=doegrids/OU=Services/CN=sam/ouhep00.nhn.ou.edu&#34;
<a href='gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz' target='_blank' rel='nofollow'>gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz</a>
file&#58;//&#96;pwd&#96;/junk
Source&#58; <a href='gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/' target='_blank' rel='nofollow'>gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/</a>
Dest&#58;   file&#58;///scratch/condortest/
cardFile_v01-01-81.tar.gz  -&#62;  junk
gryphn&#62; ls -l junk
-rw-r--r-- 1 jonesrt wheel 1542044 Jun 11 14&#58;59 junk

Let&#39;s leave this ticket open until I report a patch to the
condor-nfs-lite jobmanager that fixes this problem. Agreed?
</div><script type='text/javascript'>
        $('#show_933019011').click(function() {
            $('#detail_933019011').slideDown("normal");
            $('#show_933019011').hide();
            $('#hide_933019011').show();
        });
        $('#hide_933019011').click(function() {
            $('#detail_933019011').slideUp();
            $('#hide_933019011').hide();
            $('#show_933019011').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8710#1276282810'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-11T19:00:10+00:00">Jun 11, 2010 07:00 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1276282810">&nbsp;</a></div><pre>Richard--
I notice that the output of grid-proxy-info from a
fork job on your site shows that the proxy is only limited once,
but a job that runs via jobmanager-condor is limited twice.
Do you have condor configured in an nfs-lite situation, such
that the proxy is delegated from the head node to the worker
node rather than transferred by a file transfer or forwarded via NFS?
That could be responsible for this.  It is a violation to
double-limit a proxy, as Igor says, but Condor will happily do it
nevertheless on a delegation.

bash-3.00$ globus-job-run ce1.phys.uconn.edu/jobmanager-fork
/usr/local/osg-1.2/globus/bin/grid-proxy-info
subject  &#58; /DC=org/DC=doegrids/OU=People/CN=Steven Timm
74183/CN=proxy/CN=limited proxy
issuer   &#58; /DC=org/DC=doegrids/OU=People/CN=Steven Timm 74183/CN=proxy
identity &#58; /DC=org/DC=doegrids/OU=People/CN=Steven Timm 74183
type     &#58; limited legacy globus proxy
strength &#58; 1024 bits
path     &#58;
/home/fnalgrid/.globus/job/gluskap.phys.uconn.edu/1372.1276282404/x509_up
timeleft &#58; 167&#58;57&#58;40  (7.0 days)
bash-3.00$ globus-job-run ce1.phys.uconn.edu/jobmanager-condor
/usr/local/osg-1.2/globus/bin/grid-proxy-info
subject  &#58; /DC=org/DC=doegrids/OU=People/CN=Steven Timm
74183/CN=proxy/CN=limited proxy/CN=limited proxy
issuer   &#58; /DC=org/DC=doegrids/OU=People/CN=Steven Timm
74183/CN=proxy/CN=limited proxy
identity &#58; /DC=org/DC=doegrids/OU=People/CN=Steven Timm 74183
type     &#58; limited legacy globus proxy
strength &#58; 512 bits
path     &#58; /local/execute/dir_13628/x509_up
timeleft &#58; 167&#58;57&#58;02  (7.0 days)

On Fri, 11 Jun 2010, Open Science Grid FootPrints wrote&#58;
<div id='show_1116464160' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1116464160'>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1116464160').click(function() {
            $('#detail_1116464160').slideDown("normal");
            $('#show_1116464160').hide();
            $('#hide_1116464160').show();
        });
        $('#hide_1116464160').click(function() {
            $('#detail_1116464160').slideUp();
            $('#hide_1116464160').hide();
            $('#show_1116464160').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8710#1276281908'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-11T18:45:08+00:00">Jun 11, 2010 06:45 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276281908">&nbsp;</a></div><pre>Summary of progress so far on this ticket&#58;

1. Igor notices that the proxy cert I am using for these tests is
faulty -- a limited proxy signed by a limited proxy -- which does
not pass minimum requirements for trust in the OSG context.
2. RJ (me) does a spot check of currently running jobs on the
UConn-OSG site, and notices that all of the jobs on the worker
nodes apparently share this feature -- they have in their run
context a limited proxy that is signed by a limited proxy -- see
below for several examples.
3. Joel points out that this is not so on his OSG production cluster,
and gives an example of a proxy that he sniffed from the context
of a running job which is a limited proxy signed by a full-priv proxy.
4. RJ now believes that this is the cause for the failing transfers
he has reported in this ticket, and suspects that something weird
about the configuration on the UConn site is to blame for these
faulty proxies being generated in the job context on WN&#39;s.

As soon as I solve this problem, I will post my diagnosis and solution.
Maybe someone else will run into the same issue some time in the future.

-Richard J.

Other examples of jobs with faulty proxies on the UConn-OSG site&#58;

$ openssl x509 -text -noout -in x509_up | head -n 20
Certificate&#58;
Data&#58;
Version&#58; 3 (0x2)
Serial Number&#58; 35429 (0x8a65)
Signature Algorithm&#58; md5WithRSAEncryption
Issuer&#58; DC=org, DC=doegrids, OU=People, CN=Derek Weitzel
285345, CN=proxy, CN=limited proxy
Validity
Not Before&#58; Jun 11 17&#58;00&#58;34 2010 GMT
<div id='show_1884215507' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1884215507'>Not After &#58; Jul  6 15&#58;44&#58;52 2010 GMT
Subject&#58; DC=org, DC=doegrids, OU=People, CN=Derek Weitzel
285345, CN=proxy, CN=limited proxy, CN=limited proxy

$ openssl x509 -noout -text -in x509_up  | head -n 20
Certificate&#58;
Data&#58;
Version&#58; 3 (0x2)
Serial Number&#58; 44044 (0xac0c)
Signature Algorithm&#58; md5WithRSAEncryption
Issuer&#58; DC=org, DC=doegrids, OU=Services,
CN=testpilot01/glidein-1.t2.ucsd.edu, CN=proxy, CN=limited proxy
Validity
Not Before&#58; Jun 11 02&#58;53&#58;12 2010 GMT
Not After &#58; Jun 14 01&#58;30&#58;04 2010 GMT
Subject&#58; DC=org, DC=doegrids, OU=Services,
CN=testpilot01/glidein-1.t2.ucsd.edu, CN=proxy, CN=limited proxy,
CN=limited proxy

$ openssl x509 -noout -text -in x509_up  | head -n 20
Certificate&#58;
Data&#58;
Version&#58; 3 (0x2)
Serial Number&#58; 34167 (0x8577)
Signature Algorithm&#58; md5WithRSAEncryption
Issuer&#58; DC=org, DC=doegrids, OU=People, CN=Richard T. Jones
975420, CN=proxy, CN=limited proxy
Validity
Not Before&#58; Jun 11 18&#58;36&#58;25 2010 GMT
Not After &#58; Jun 12 06&#58;40&#58;58 2010 GMT
Subject&#58; DC=org, DC=doegrids, OU=People, CN=Richard T. Jones
975420, CN=proxy, CN=limited proxy, CN=limited proxy
</div><script type='text/javascript'>
        $('#show_1884215507').click(function() {
            $('#detail_1884215507').slideDown("normal");
            $('#show_1884215507').hide();
            $('#hide_1884215507').show();
        });
        $('#hide_1884215507').click(function() {
            $('#detail_1884215507').slideUp();
            $('#hide_1884215507').hide();
            $('#show_1884215507').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8710#1276264266'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-11T13:51:06+00:00">Jun 11, 2010 01:51 PM UTC</time> by <b>Joel Snow</b><a class="anchor" name="1276264266">&nbsp;</a></div><pre>HI,

the grid_proxy on the workers on my OSG cluster looks like this&#58;

chaos&#58;/grid/home/condor/hosts/abyss/execute/dir_12853/samgrid_temp_dir.chaos.lunet.edu.12856#
openssl x509 -in grid_proxy -text
Certificate&#58;
Data&#58;
Version&#58; 3 (0x2)
Serial Number&#58; 44709 (0xaea5)
Signature Algorithm&#58; md5WithRSAEncryption
Issuer&#58; DC=org, DC=doegrids, OU=People, CN=Joel M. Snow 647405,
CN=proxy, CN=proxy
Validity
Not Before&#58; Jun  9 21&#58;55&#58;55 2010 GMT
Not After &#58; Jun 23 15&#58;24&#58;41 2010 GMT
Subject&#58; DC=org, DC=doegrids, OU=People, CN=Joel M. Snow 647405,
CN=proxy, CN=proxy, CN=limited proxy
Subject Public Key Info&#58;
Public Key Algorithm&#58; rsaEncryption
RSA Public Key&#58; (512 bit)
Modulus (512 bit)&#58;
00&#58;ab&#58;32&#58;06&#58;59&#58;88&#58;f7&#58;8a&#58;1f&#58;c2&#58;87&#58;0c&#58;41&#58;f6&#58;38&#58;
1c&#58;a4&#58;9e&#58;41&#58;64&#58;3b&#58;85&#58;64&#58;33&#58;4e&#58;74&#58;58&#58;65&#58;07&#58;79&#58;
2f&#58;c1&#58;dd&#58;b9&#58;f4&#58;b5&#58;65&#58;28&#58;14&#58;5d&#58;1c&#58;f8&#58;18&#58;a7&#58;8a&#58;
ff&#58;3c&#58;99&#58;d4&#58;ed&#58;fa&#58;9d&#58;83&#58;9a&#58;7d&#58;87&#58;a6&#58;2e&#58;a8&#58;5b&#58;
cc&#58;2d&#58;43&#58;dd&#58;d3
Exponent&#58; 65537 (0x10001)
X509v3 extensions&#58;
X509v3 Key Usage&#58; critical
Digital Signature, Key Encipherment, Data Encipherment
Signature Algorithm&#58; md5WithRSAEncryption
12&#58;02&#58;1e&#58;d0&#58;ef&#58;e9&#58;2e&#58;b6&#58;27&#58;8d&#58;c4&#58;5e&#58;96&#58;f4&#58;cc&#58;68&#58;a1&#58;bd&#58;
e2&#58;63&#58;0d&#58;52&#58;fb&#58;bd&#58;18&#58;7f&#58;8e&#58;b8&#58;6d&#58;8d&#58;8f&#58;9e&#58;9d&#58;aa&#58;8d&#58;ee&#58;
ee&#58;e2&#58;ff&#58;ea&#58;5f&#58;f2&#58;46&#58;d7&#58;da&#58;8c&#58;b5&#58;0c&#58;38&#58;85&#58;cf&#58;c6&#58;d4&#58;54&#58;
<div id='show_503023720' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_503023720'>dd&#58;2e&#58;93&#58;d5&#58;74&#58;9a&#58;fd&#58;36&#58;f5&#58;f7
-----BEGIN CERTIFICATE-----
MIICGjCCAcSgAwIBAgIDAK6lMA0GCSqGSIb3DQEBBAUAMH4xEzARBgoJkiaJk/Is
ZAEZFgNvcmcxGDAWBgoJkiaJk/IsZAEZFghkb2VncmlkczEPMA0GA1UECxMGUGVv
cGxlMRwwGgYDVQQDExNKb2VsIE0uIFNub3cgNjQ3NDA1MQ4wDAYDVQQDEwVwcm94
eTEOMAwGA1UEAxMFcHJveHkwHhcNMTAwNjA5MjE1NTU1WhcNMTAwNjIzMTUyNDQx
WjCBljETMBEGCgmSJomT8ixkARkWA29yZzEYMBYGCgmSJomT8ixkARkWCGRvZWdy
aWRzMQ8wDQYDVQQLEwZQZW9wbGUxHDAaBgNVBAMTE0pvZWwgTS4gU25vdyA2NDc0
MDUxDjAMBgNVBAMTBXByb3h5MQ4wDAYDVQQDEwVwcm94eTEWMBQGA1UEAxMNbGlt
aXRlZCBwcm94eTBcMA0GCSqGSIb3DQEBAQUAA0sAMEgCQQCrMgZZiPeKH8KHDEH2
OByknkFkO4VkM050WGUHeS/B3bn0tWUoFF0c+Biniv88mdTt+p2Dmn2Hpi6oW8wt
Q93TAgMBAAGjEjAQMA4GA1UdDwEB/wQEAwIEsDANBgkqhkiG9w0BAQQFAANBABIC
HtDv6S62J43EXpb0zGihveJjDVL7vRh/jrhtjY+enaqN7u7i/+pf8kbX2oy1DDiF
z8bUVN0uk9V0mv029fc=
-----END CERTIFICATE-----

It says singly limited proxy.  This is apparently not what you see at
UConn.  On my submit host&#58;

[snow@d0mino06 daj]$ grid-proxy-info
subject  &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow 647405/CN=proxy
issuer   &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow 647405
identity &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow 647405
type     &#58; full legacy globus proxy
strength &#58; 512 bits
path     &#58; /tmp/x509up_u6590
timeleft &#58; 289&#58;57&#58;39  (12.0 days)
[snow@d0mino06 daj]$ voms-proxy-info
WARNING&#58; Unable to verify signature! Server certificate possibly not
installed.
Error&#58; Cannot find certificate of AC issuer for vo dzero
subject   &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow 647405/CN=proxy
issuer    &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow 647405
identity  &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow 647405
type      &#58; proxy
strength  &#58; 512 bits
path      &#58; /tmp/x509up_u6590
timeleft  &#58; 289&#58;57&#58;28

On a different OSG cluster worker&#58;

[samgrid@ouhep0 samgrid_temp_dir.ouhep18.nhn.ou.edu.7372]$ openssl x509
-in grid_proxy -text
Certificate&#58;
Data&#58;
Version&#58; 3 (0x2)
Serial Number&#58; 44709 (0xaea5)
Signature Algorithm&#58; md5WithRSAEncryption
Issuer&#58; DC=org, DC=doegrids, OU=People, CN=Joel M. Snow 647405,
CN=proxy, CN=proxy
Validity
Not Before&#58; Jun  7 10&#58;59&#58;04 2010 GMT
Not After &#58; Jun 17 02&#58;23&#58;47 2010 GMT
Subject&#58; DC=org, DC=doegrids, OU=People, CN=Joel M. Snow 647405,
CN=proxy, CN=proxy, CN=limited proxy
Subject Public Key Info&#58;
Public Key Algorithm&#58; rsaEncryption
RSA Public Key&#58; (512 bit)
Modulus (512 bit)&#58;
00&#58;d0&#58;ca&#58;28&#58;50&#58;aa&#58;34&#58;ae&#58;e7&#58;bc&#58;1f&#58;20&#58;99&#58;82&#58;16&#58;
53&#58;df&#58;50&#58;f7&#58;1f&#58;3b&#58;85&#58;5d&#58;c3&#58;29&#58;ee&#58;a2&#58;f3&#58;1a&#58;bf&#58;
0a&#58;29&#58;2c&#58;c4&#58;a9&#58;43&#58;88&#58;46&#58;11&#58;a1&#58;35&#58;89&#58;d2&#58;e3&#58;63&#58;
cb&#58;a3&#58;ba&#58;33&#58;51&#58;84&#58;01&#58;83&#58;14&#58;bb&#58;5c&#58;f9&#58;66&#58;93&#58;27&#58;
6b&#58;ed&#58;d4&#58;23&#58;97
Exponent&#58; 65537 (0x10001)
X509v3 extensions&#58;
X509v3 Key Usage&#58; critical
Digital Signature, Key Encipherment, Data Encipherment
Signature Algorithm&#58; md5WithRSAEncryption
a0&#58;e9&#58;ba&#58;76&#58;81&#58;60&#58;3b&#58;4a&#58;70&#58;b5&#58;03&#58;c7&#58;48&#58;3e&#58;8a&#58;41&#58;4a&#58;ce&#58;
23&#58;42&#58;e4&#58;6c&#58;31&#58;d5&#58;43&#58;b2&#58;90&#58;6e&#58;9c&#58;9a&#58;6e&#58;a5&#58;11&#58;19&#58;f5&#58;85&#58;
a3&#58;39&#58;fe&#58;52&#58;83&#58;8b&#58;3f&#58;f4&#58;1a&#58;3d&#58;39&#58;5c&#58;4e&#58;cc&#58;ff&#58;5a&#58;84&#58;ee&#58;
35&#58;f4&#58;89&#58;e2&#58;d9&#58;62&#58;ed&#58;a8&#58;32&#58;27
-----BEGIN CERTIFICATE-----
MIICGjCCAcSgAwIBAgIDAK6lMA0GCSqGSIb3DQEBBAUAMH4xEzARBgoJkiaJk/Is
ZAEZFgNvcmcxGDAWBgoJkiaJk/IsZAEZFghkb2VncmlkczEPMA0GA1UECxMGUGVv
cGxlMRwwGgYDVQQDExNKb2VsIE0uIFNub3cgNjQ3NDA1MQ4wDAYDVQQDEwVwcm94
eTEOMAwGA1UEAxMFcHJveHkwHhcNMTAwNjA3MTA1OTA0WhcNMTAwNjE3MDIyMzQ3
WjCBljETMBEGCgmSJomT8ixkARkWA29yZzEYMBYGCgmSJomT8ixkARkWCGRvZWdy
aWRzMQ8wDQYDVQQLEwZQZW9wbGUxHDAaBgNVBAMTE0pvZWwgTS4gU25vdyA2NDc0
MDUxDjAMBgNVBAMTBXByb3h5MQ4wDAYDVQQDEwVwcm94eTEWMBQGA1UEAxMNbGlt
aXRlZCBwcm94eTBcMA0GCSqGSIb3DQEBAQUAA0sAMEgCQQDQyihQqjSu57wfIJmC
FlPfUPcfO4VdwynuovMavwopLMSpQ4hGEaE1idLjY8ujujNRhAGDFLtc+WaTJ2vt
1COXAgMBAAGjEjAQMA4GA1UdDwEB/wQEAwIEsDANBgkqhkiG9w0BAQQFAANBAKDp
unaBYDtKcLUDx0g+ikFKziNC5Gwx1UOykG6cmm6lERn1haM5/lKDiz/0Gj05XE7M
/1qE7jX0ieLZYu2oMic=
-----END CERTIFICATE-----

same proxy structure.  The question then is why do workers at UConn have
double limited proxies?  no?  Yes I am confused.  thanks.

joel

On Fri, 11 Jun 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_503023720').click(function() {
            $('#detail_503023720').slideDown("normal");
            $('#show_503023720').hide();
            $('#hide_503023720').show();
        });
        $('#hide_503023720').click(function() {
            $('#detail_503023720').slideUp();
            $('#hide_503023720').hide();
            $('#show_503023720').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8710#1276259407'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-11T12:30:07+00:00">Jun 11, 2010 12:30 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276259407">&nbsp;</a></div><pre>No, Igor is right, there is a difference.  Joel&#39;s limited proxy is
signed by his full-priv proxy (twice), signed by his personal cert.  In
contrast, the one I have is a limited proxy, signed by another limited
proxy, signed by his full-priv proxy (four times!), signed by his
personal cert.

Joel, when I submit jobs I use my full-priv proxy during submission, and
when the jobs land they have a limited proxy in their context that is
once removed from my full-priv proxy.  Is that what you are doing?  How
do your jobs end up on my worker nodes with this double-limited proxy in
their context?  Are you as puzzled as I am?

-Richard J.</pre></div><div class='update_description'><i onclick="document.location='8710#1276257967'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-11T12:06:07+00:00">Jun 11, 2010 12:06 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276257967">&nbsp;</a></div><pre>Igor,

I see the same thing you see, but apparently this is what Joel is using
routinely.  From a recent email thread with Joel discussing this issue,
Joel sai
<font color='#7F7E6F'>&#62; On the worker where I did it I have&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; samgrid@luhep10&#58;/tmp$ grid-proxy-info</font>
<font color='#7F7E6F'>&#62; subject  &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow</font>
<font color='#7F7E6F'>&#62; 647405/CN=proxy/CN=proxy/CN=limited proxy</font>
<font color='#7F7E6F'>&#62; issuer   &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow</font>
<font color='#7F7E6F'>&#62; 647405/CN=proxy/CN=proxy</font>
<font color='#7F7E6F'>&#62; identity &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow 647405</font>
<font color='#7F7E6F'>&#62; type     &#58; limited legacy globus proxy</font>
<font color='#7F7E6F'>&#62; strength &#58; 512 bits</font>
<font color='#7F7E6F'>&#62; path     &#58; /tmp/grid_proxy</font>
<font color='#7F7E6F'>&#62; timeleft &#58; 68&#58;05&#58;47  (2.8 days)</font>
<font color='#7F7E6F'>&#62; samgrid@luhep10&#58;/tmp$ echo $X509_USER_PROXY</font>
<font color='#7F7E6F'>&#62; /tmp/grid_proxy</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; This type of proxy must work at ouhep00.nhn.ou.edu because all our</font>
<font color='#7F7E6F'>&#62; proxies are of this type and use ouhep00 heavily.</font>

His output looks a bit different than mine (see listing in original
message in this ticket) because he used grid-proxy-info instead of
voms-proxy-info.  Here is the output from grid-proxy-info when I load
his proxy the way I do for these tests.  It looks the same to me.

gryphn&#62; grid-proxy-info
subject  &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow
647405/CN=proxy/CN=proxy/CN=proxy/CN=proxy/CN=limited proxy/CN=limited proxy
issuer   &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow
647405/CN=proxy/CN=proxy/CN=proxy/CN=proxy/CN=limited proxy
identity &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow 647405
type     &#58; limited legacy globus proxy
<div id='show_2091832186' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2091832186'>strength &#58; 512 bits
path     &#58; /tmp/x509up_u7896
timeleft &#58; 134&#58;25&#58;37  (5.6 days)

-Richard Jones
</div><script type='text/javascript'>
        $('#show_2091832186').click(function() {
            $('#detail_2091832186').slideDown("normal");
            $('#show_2091832186').hide();
            $('#hide_2091832186').show();
        });
        $('#hide_2091832186').click(function() {
            $('#detail_2091832186').slideUp();
            $('#hide_2091832186').hide();
            $('#show_2091832186').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8710#1276200556'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-10T20:09:16+00:00">Jun 10, 2010 08:09 PM UTC</time><a class="anchor" name="1276200556">&nbsp;</a></div><pre>The proxy is limited two times.

If I remember correctly, this is a violation of the proxy protocol.

Are you sure other sites do the same and work?
(i.e. make sure the doubly limited proxy is used there as well)

My 2c,
Igor
-- by Igor Sfiligoi</pre></div><div class='update_description'><i onclick="document.location='8710#1276196542'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-10T19:02:22+00:00">Jun 10, 2010 07:02 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1276196542">&nbsp;</a></div><pre>Assigning Doug and Mine from the OSG Security Group as Joel has requested their input. Mine and Doug, do you have any ideas of what might be the issue reported by Richard in this ticket?</pre></div><div class='update_description'><i onclick="document.location='8710#1276195867'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-10T18:51:07+00:00">Jun 10, 2010 06:51 PM UTC</time> by <b>Joel Snow</b><a class="anchor" name="1276195867">&nbsp;</a></div><pre>The proxy used at UConn is the same type as used everywhere for D0 MC.
UConn is having a problem transfering files with this proxy from ouhep00
(at least), but can get files with the proxy from servers at FNAL.  AFAIK
everything is working okay at ouhep00/ouhep0.  perhaps OSG Security could
add their expertise to debugging this.

joel

On Thu, 10 Jun 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8710#1276195686'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-10T18:48:06+00:00">Jun 10, 2010 06:48 PM UTC</time> by <b>Joel Snow</b><a class="anchor" name="1276195686">&nbsp;</a></div><pre>Hi,

yes.   I will try to find something relevant in the logs.  I have
not heard anything further from the JIRA ticket.  thanks,

joel

On Thu, 10 Jun 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8710#1276195147'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-10T18:39:07+00:00">Jun 10, 2010 06:39 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1276195147">&nbsp;</a></div><pre>I cannot try this -old option because I did not create the limited proxy
myself, but it was created automatically during the job initiation on my
gatekeeper.  The proxy belongs to Joel Snow, who presumably could try
this.  However that does not address the issue of why Joel&#39;s D0 jobs are
failing on my node when they try to get their input files from fermilab
servers.  Why would they fail on UConn and work elsewhere, when
presumably everyone is running the same osg software stack?

-Richard J.</pre></div><div class='update_description'><i onclick="document.location='8710#1276195008'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-10T18:36:48+00:00">Jun 10, 2010 06:36 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1276195008">&nbsp;</a></div><pre>It seems the -old flag is an option in the grid-proxy-init and not voms-proxy-init, so that is probably a misdirection.</pre></div><div class='update_description'><i onclick="document.location='8710#1276194966'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-10T18:36:06+00:00">Jun 10, 2010 06:36 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1276194966">&nbsp;</a></div><pre>Hi Rob and Richard,

I&#39;m aware of this issue, since Joel opened an FNAL JIRA ticket on it,
but this is not a problem on our end, since other samgrid jobs
from all other sites succeed getting their files.

Also, the source URL for these files are
<a href='gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/...' target='_blank' rel='nofollow'>gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/...</a>,
meaning they&#39;re not related to our OSG installation,
but rather the samgrid sam station installation, which is
completely independent of the OSG installation.

Joel, you&#39;re getting these, too, right? Do you have any more comments
about it?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='8710#1276194361'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-10T18:26:01+00:00">Jun 10, 2010 06:26 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1276194361">&nbsp;</a></div><pre>Richard,

I found this on the CERN Savannah Portal. <a href='https&#58;//savannah.cern.ch/bugs/index.php?26979' target='_blank' rel='nofollow'>https&#58;//savannah.cern.ch/bugs/index.php?26979</a>

It mentions the use of the -old flag when doing your proxy initiation. This seems to be a pretty old ticket, but may offer a hint.

Rob</pre></div><div class='update_description'><i onclick="document.location='8710#1276193913'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-10T18:18:33+00:00">Jun 10, 2010 06:18 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1276193913">&nbsp;</a></div><pre>I&#39;m going to add Horst to this ticket since the resource that the transfer is failing to belongs to him. Horst can you take a look and see if you have anything in your logs that might shed some light on the issues Richard is having.

Thanks,
Rob</pre></div><div class='update_description'><i onclick="document.location='8710#1276098893'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-06-09T15:54:53+00:00">Jun 9, 2010 03:54 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1276098893">&nbsp;</a></div><pre>There is a problem accessing files on certain (but not all) gridftp servers at remote sites.  I provide an example below.  For this test, I am using a limited proxy cert provided to me by Joel Snow (D0).  Both of the following commands were issued from my CE gluskap.phys.uconn.edu using with Joel&#39;s limited proxy (see voms-proxy-info below).  First one that works, followed by one that does not work (host-specific).  The handshake is failing on the remote server side, apparently because it does not recognize my hostcert???  I checked my hostcert.pem using openssl verify against vdt certificates-1.13 and it checks out ok.  The hostcert.pem file is world-readable, and strace shows that it is being read by globus-url-copy during the initial exchange.  I think, but am not sure, that the error message about &#34;cannot sign with a limited certificate&#34; is a red herring.  There is nothing in the SSL server/client host negotiations that should involve creating service proxies, is there?  I am pretty sure that limited proxies should be fine for the purpose of file transfers.

gluskap&#62; voms-proxy-info -all
WARNING&#58; Unable to verify signature! Server certificate possibly not installed.
Error&#58; Cannot verify AC signature!
subject   &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow 647405/CN=proxy/CN=proxy/CN=proxy/CN=proxy/CN=limited proxy/CN=limited proxy
issuer    &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow 647405/CN=proxy/CN=proxy/CN=proxy/CN=proxy/CN=limited proxy
identity  &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow 647405/CN=proxy/CN=proxy/CN=proxy/CN=proxy/CN=limited proxy
type      &#58; limited proxy
strength  &#58; 512 bits
path      &#58; /tmp/x509up_u7896
timeleft  &#58; 178&#58;49&#58;35
=== VO dzero extension information ===
VO        &#58; dzero
subject   &#58; /DC=org/DC=doegrids/OU=People/CN=Joel M. Snow 647405
issuer    &#58; /DC=org/DC=doegrids/OU=Services/CN=http/voms.fnal.gov
attribute &#58; /dzero/users/Role=NULL/Capability=NULL
attribute &#58; /dzero/Role=NULL/Capability=NULL
timeleft  &#58; 178&#58;49&#58;36
uri       &#58; voms.fnal.gov&#58;15002

gluskap&#62; globus-url-copy -v -nodcau -ss &#39;/DC=org/DC=doegrids/OU=Services/CN=sam/samgfwd02.fnal.gov&#39; <a href='gsiftp&#58;//samgfwd02.fnal.gov&#58;4569/samgrid/products/ups/prd/sam_client/v2_1_26/NULL/etc/sam.tgz' target='_blank' rel='nofollow'>gsiftp&#58;//samgfwd02.fnal.gov&#58;4569/samgrid/products/ups/prd/sam_client/v2_1_26/NULL/etc/sam.tgz</a> file&#58;//&#96;pwd&#96;/xxx
Source&#58; <a href='gsiftp&#58;//samgfwd02.fnal.gov&#58;4569/samgrid/products/ups/prd/sam_client/v2_1_26/NULL/etc/' target='_blank' rel='nofollow'>gsiftp&#58;//samgfwd02.fnal.gov&#58;4569/samgrid/products/ups/prd/sam_client/v2_1_26/NULL/etc/</a>
Dest&#58;   file&#58;///home/jonesrt/
sam.tgz  -&#62;  xxx
gluskap&#62; ls -l xxx
-rw-r--r-- 1 jonesrt wheel 17241244 Jun  9 11&#58;38 xxx

gluskap&#62; globus-url-copy -v -nodcau  -ss &#34;/DC=org/DC=doegrids/OU=Services/CN=sam/ouhep00.nhn.ou.edu&#34; <a href='gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz' target='_blank' rel='nofollow'>gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz</a> file&#58;//&#96;pwd&#96;/junk
Source&#58; <a href='gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/' target='_blank' rel='nofollow'>gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/</a>
Dest&#58;   file&#58;///home/jonesrt/
cardFile_v01-01-81.tar.gz  -&#62;  junk

error&#58; globus_ftp_client_state.c&#58;globus_l_ftp_client_connection_error&#58;4580&#58;
the server responded with an error
<div id='show_1307042088' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1307042088'>535 535-FTPD GSSAPI error&#58; GSS Major Status&#58; Authentication Failed
535-FTPD GSSAPI error&#58; GSS Minor Status Error Chain&#58;
535-FTPD GSSAPI error&#58;
535-FTPD GSSAPI error&#58; accept_sec_context.c&#58;168&#58; gss_accept_sec_context&#58; SSLv3 handshake problems
535-FTPD GSSAPI error&#58; globus_i_gsi_gss_utils.c&#58;879&#58; globus_i_gsi_gss_handshake&#58; Unable to verify remote side&#39;s credentials
535-FTPD GSSAPI error&#58; globus_i_gsi_gss_utils.c&#58;851&#58; globus_i_gsi_gss_handshake&#58; SSLv3 handshake problems&#58; Couldn&#39;t do ssl handshake
535-FTPD GSSAPI error&#58; OpenSSL Error&#58; s3_srvr.c&#58;1816&#58; in library&#58; SSL routines, function SSL3_GET_CLIENT_CERTIFICATE&#58; no certificate returned
535-FTPD GSSAPI error&#58; globus_gsi_callback.c&#58;349&#58; globus_i_gsi_callback_handshake_callback&#58; Could not verify credential
535-FTPD GSSAPI error&#58; globus_gsi_callback.c&#58;458&#58; globus_i_gsi_callback_cred_verify&#58; Could not verify credential
535-FTPD GSSAPI error&#58; globus_gsi_callback.c&#58;603&#58; globus_i_gsi_callback_check_proxy&#58; Error with limited proxy certificate&#58; Can&#39;t sign a cert with a limited proxy as the signer
535 FTPD GSSAPI error&#58; accepting context

[same command above, with debug]

gluskap&#62; globus-url-copy -dbg -v -nodcau  -ss &#92;
<font color='#7F7E6F'>&#62; &#34;/DC=org/DC=doegrids/OU=Services/CN=sam/ouhep00.nhn.ou.edu&#34; &#92;</font>
<font color='#7F7E6F'>&#62; <a href='gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz' target='_blank' rel='nofollow'>gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz</a> &#92;</font>
<font color='#7F7E6F'>&#62; file&#58;///&#96;pwd&#96;/junk</font>
Source&#58; <a href='gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/' target='_blank' rel='nofollow'>gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/</a>
Dest&#58;   file&#58;////home/jonesrt/
cardFile_v01-01-81.tar.gz  -&#62;  junk
debug&#58; starting to get <a href='gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz' target='_blank' rel='nofollow'>gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz</a>
debug&#58; connecting to <a href='gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz' target='_blank' rel='nofollow'>gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz</a>
debug&#58; response from <a href='gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz&#58' target='_blank' rel='nofollow'>gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz&#58</a>;
220 ouhep00.nhn.ou.edu GridFTP Server 1.12 GSSAPI type Globus/GSI wu-2.6.2 (gcc32dbg, 1069715860-42) ready.

debug&#58; authenticating with <a href='gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz' target='_blank' rel='nofollow'>gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz</a>
debug&#58; response from <a href='gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz&#58' target='_blank' rel='nofollow'>gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz&#58</a>;
535-FTPD GSSAPI error&#58; GSS Major Status&#58; Authentication Failed
535-FTPD GSSAPI error&#58; GSS Minor Status Error Chain&#58;
535-FTPD GSSAPI error&#58;
535-FTPD GSSAPI error&#58; accept_sec_context.c&#58;168&#58; gss_accept_sec_context&#58; SSLv3 handshake problems
535-FTPD GSSAPI error&#58; globus_i_gsi_gss_utils.c&#58;879&#58; globus_i_gsi_gss_handshake&#58; Unable to verify remote side&#39;s credentials
535-FTPD GSSAPI error&#58; globus_i_gsi_gss_utils.c&#58;851&#58; globus_i_gsi_gss_handshake&#58; SSLv3 handshake problems&#58; Couldn&#39;t do ssl handshake
535-FTPD GSSAPI error&#58; OpenSSL Error&#58; s3_srvr.c&#58;1816&#58; in library&#58; SSL routines, function SSL3_GET_CLIENT_CERTIFICATE&#58; no certificate returned
535-FTPD GSSAPI error&#58; globus_gsi_callback.c&#58;349&#58; globus_i_gsi_callback_handshake_callback&#58; Could not verify credential
535-FTPD GSSAPI error&#58; globus_gsi_callback.c&#58;458&#58; globus_i_gsi_callback_cred_verify&#58; Could not verify credential
535-FTPD GSSAPI error&#58; globus_gsi_callback.c&#58;603&#58; globus_i_gsi_callback_check_proxy&#58; Error with limited proxy certificate&#58; Can&#39;t sign a cert with a limited proxy as the signer
535 FTPD GSSAPI error&#58; accepting context

debug&#58; fault on connection to <a href='gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz' target='_blank' rel='nofollow'>gsiftp&#58;//ouhep00.nhn.ou.edu&#58;4568/raid2/sam/disk/data002/cardFile_v01-01-81.tar.gz</a>
debug&#58; data callback, error globus_ftp_client_state.c&#58;globus_l_ftp_client_connection_error&#58;4580&#58;
the server responded with an error, buffer 0x2b34fa2bb010, length 0, offset=0, eof=true
debug&#58; operation complete

error&#58; globus_ftp_client_state.c&#58;globus_l_ftp_client_connection_error&#58;4580&#58;
the server responded with an error
535 535-FTPD GSSAPI error&#58; GSS Major Status&#58; Authentication Failed
535-FTPD GSSAPI error&#58; GSS Minor Status Error Chain&#58;
535-FTPD GSSAPI error&#58;
535-FTPD GSSAPI error&#58; accept_sec_context.c&#58;168&#58; gss_accept_sec_context&#58; SSLv3 handshake problems
535-FTPD GSSAPI error&#58; globus_i_gsi_gss_utils.c&#58;879&#58; globus_i_gsi_gss_handshake&#58; Unable to verify remote side&#39;s credentials
535-FTPD GSSAPI error&#58; globus_i_gsi_gss_utils.c&#58;851&#58; globus_i_gsi_gss_handshake&#58; SSLv3 handshake problems&#58; Couldn&#39;t do ssl handshake
535-FTPD GSSAPI error&#58; OpenSSL Error&#58; s3_srvr.c&#58;1816&#58; in library&#58; SSL routines, function SSL3_GET_CLIENT_CERTIFICATE&#58; no certificate returned
535-FTPD GSSAPI error&#58; globus_gsi_callback.c&#58;349&#58; globus_i_gsi_callback_handshake_callback&#58; Could not verify credential
535-FTPD GSSAPI error&#58; globus_gsi_callback.c&#58;458&#58; globus_i_gsi_callback_cred_verify&#58; Could not verify credential
535-FTPD GSSAPI error&#58; globus_gsi_callback.c&#58;603&#58; globus_i_gsi_callback_check_proxy&#58; Error with limited proxy certificate&#58; Can&#39;t sign a cert with a limited proxy as the signer
535 FTPD GSSAPI error&#58; accepting context

</div><script type='text/javascript'>
        $('#show_1307042088').click(function() {
            $('#detail_1307042088').slideDown("normal");
            $('#show_1307042088').hide();
            $('#hide_1307042088').show();
        });
        $('#hide_1307042088').click(function() {
            $('#detail_1307042088').slideUp();
            $('#hide_1307042088').hide();
            $('#show_1307042088').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F8710">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
