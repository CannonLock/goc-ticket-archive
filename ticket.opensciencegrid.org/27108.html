<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[27108] HTCondor-CE memory leak in the collector</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=27108" method="post">
<div class="page-header">
    <h3><span class="muted">27108</span> / HTCondor-CE memory leak in the collector</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Anthony Tiradani</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Anthony Tiradani</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Waiting for user answer</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-11-24</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/27108", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/27108?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/27108?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20HTCondor-CE%20memory%20leak%20in%20the%20collector%20ISSUE%3D27108%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='27108#1448057854'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-20T22:17:34+00:00">Nov 20, 2015 10:17 PM UTC</time> by <b>Tim Theisen</b><a class="anchor" name="1448057854">&nbsp;</a></div><pre>This issue has been addressed in yesterday&#39;s OSG Software Stack release. Please update to the latest version.</pre></div><div class='update_description'><i onclick="document.location='27108#1447357005'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-12T19:36:45+00:00">Nov 12, 2015 07:36 PM UTC</time> by <b>Dave Dykstra</b><a class="anchor" name="1447357005">&nbsp;</a></div><pre>The ticket for the memory leak fix in lcmaps is <a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2100' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2100</a></pre></div><div class='update_description'><i onclick="document.location='27108#1447270946'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-11T19:42:26+00:00">Nov 11, 2015 07:42 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1447270946">&nbsp;</a></div><pre>Please note that the configuration change that has been applied at Fermi is *not* expected to fix the memory leak, only significantly slow the rate at which memory is leaked.

To reiterate the message sent in other channels&#58; The developer of LCMAPS has identified a memory leak in code that is contained in the lcmaps-plugins-scas-client-0.5.5-1 package (and earlier). We have a patch from the developer, we are testing the patch, and we hope to release it as part of a special OSG release on Thursday, November 19. Only that patch will eliminate the memory leak.</pre></div><div class='update_description'><i onclick="document.location='27108#1447186990'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-10T20:23:10+00:00">Nov 10, 2015 08:23 PM UTC</time><a class="anchor" name="1447186990">&nbsp;</a></div><pre>The memory use on this server looks much better. In the past 24 hrs it has used less than 1GB of additional ram where as in the previous 24 hours it used about 12GB. Will continue to to monitor and then add to the other servers.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Paul Tader 3291</pre></div><div class='update_description'><i onclick="document.location='27108#1447088445'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-09T17:00:45+00:00">Nov 9, 2015 05:00 PM UTC</time> by <b>Greg Thain</b><a class="anchor" name="1447088445">&nbsp;</a></div><pre>On 11/09/2015 09&#58;57 AM, Open Science Grid FootPrints wrote&#58;

If you are still seeing the problem can you turn on D_SECURITY on the
collector in question (doesn&#39;t require a restart), and send me a
collector log?

-greg
<font color='#7F7E6F'>&#62; ------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; *Notification of Ticket Change*</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='27108.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/27108</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *Description&#58;*</font>
<font color='#7F7E6F'>&#62; Verified. Here&#39;s how this host is running now&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [root@cmsosgce ~]# condor_ce_config_val -v</font>
<font color='#7F7E6F'>&#62; COLLECTOR.ALLOW_ADVERTISE_STARTD</font>
<font color='#7F7E6F'>&#62; COLLECTOR.ALLOW_ADVERTISE_STARTD = *@unmapped.opensciencegrid.org,</font>
<font color='#7F7E6F'>&#62; *@users.opensciencegrid.org</font>
<font color='#7F7E6F'>&#62; # at&#58; /etc/condor-ce/config.d/01-ce-auth.conf, line 30</font>
<font color='#7F7E6F'>&#62; # raw&#58; COLLECTOR.ALLOW_ADVERTISE_STARTD = $(UNMAPPED_USERS), $(USERS)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Paul</font>
<font color='#7F7E6F'>&#62; Tader 3291</font>
<font color='#7F7E6F'>&#62;</font></pre></div><div class='update_description'><i onclick="document.location='27108#1447084620'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-09T15:57:00+00:00">Nov 9, 2015 03:57 PM UTC</time><a class="anchor" name="1447084620">&nbsp;</a></div><pre>Verified. Here&#39;s how this host is running now&#58;

[root@cmsosgce ~]# condor_ce_config_val -v COLLECTOR.ALLOW_ADVERTISE_STARTD
COLLECTOR.ALLOW_ADVERTISE_STARTD = *@unmapped.opensciencegrid.org, *@users.opensciencegrid.org
# at&#58; /etc/condor-ce/config.d/01-ce-auth.conf, line 30
# raw&#58; COLLECTOR.ALLOW_ADVERTISE_STARTD = $(UNMAPPED_USERS), $(USERS)

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Paul Tader 3291</pre></div><div class='update_description'><i onclick="document.location='27108#1447084462'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-09T15:54:22+00:00">Nov 9, 2015 03:54 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1447084462">&nbsp;</a></div><pre>Concerning the patch that Greg is talking about (which is the same as the one I mentioned earlier), you&#39;ll need to make sure that it is actually having an effect on your config by checking with &#96;condor_ce_config_val -v COLLECTOR.ALLOW_ADVERTISE_STARTD&#96; and verifying that the raw value reads&#58;

raw&#58; COLLECTOR.ALLOW_ADVERTISE_STARTD = $(UNMAPPED_USERS), $(USERS)</pre></div><div class='update_description'><i onclick="document.location='27108#1447084449'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-09T15:54:09+00:00">Nov 9, 2015 03:54 PM UTC</time><a class="anchor" name="1447084449">&nbsp;</a></div><pre>Tony mentioned that this was already tried with no success, but I don&#39;t see the configuration changes present on any host. Maybe the change was backed out? Tony is out of the office today, so I made the change and restarted condor-ce on one host (cmsosgce) and am monitoring.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Paul Tader 3291</pre></div><div class='update_description'><i onclick="document.location='27108#1447083201'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-09T15:33:21+00:00">Nov 9, 2015 03:33 PM UTC</time> by <b>Greg Thain</b><a class="anchor" name="1447083201">&nbsp;</a></div><pre>On 11/06/2015 10&#58;43 AM, Open Science Grid FootPrints wrote&#58;

Does it go away if you apply this patch to the config&#58;

<a href='https&#58;//github.com/opensciencegrid/htcondor-ce/commit/0670ef07e67759ac9754882b2db97f401a6b9a88' target='_blank' rel='nofollow'>https&#58;//github.com/opensciencegrid/htcondor-ce/commit/0670ef07e67759ac9754882b2db97f401a6b9a88</a>
<font color='#7F7E6F'>&#62; ------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; *Notification of Ticket Change*</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='27108.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/27108</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *Description&#58;*</font>
<font color='#7F7E6F'>&#62; # rpm -qa | grep lcmaps</font>
<font color='#7F7E6F'>&#62; lcmaps-plugins-basic-1.7.0-2.osg32.el6.x86_64</font>
<font color='#7F7E6F'>&#62; lcmaps-plugins-gums-client-0.0.2-4.osg.el6.x86_64</font>
<font color='#7F7E6F'>&#62; lcmaps-plugins-scas-client-0.5.5-1.osg32.el6.x86_64</font>
<font color='#7F7E6F'>&#62; lcmaps-plugins-saz-client-0.4.0-1.2.osg32.el6.x86_64</font>
<font color='#7F7E6F'>&#62; lcmaps-1.6.6-1.1.osg32.el6.x86_64</font>
<font color='#7F7E6F'>&#62; lcas-lcmaps-gt4-interface-0.2.6-1.1.osg.el6.x86_64</font>
<font color='#7F7E6F'>&#62; lcmaps-plugins-verify-proxy-1.5.7-1.osg32.el6.x86_64</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; - Tony</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Anthony Tiradani tiradani@....</font>
<font color='#7F7E6F'>&#62;</font></pre></div><div class='update_description'><i onclick="document.location='27108#1446828209'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-06T16:43:29+00:00">Nov 6, 2015 04:43 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1446828209">&nbsp;</a></div><pre>#  rpm -qa | grep lcmaps
lcmaps-plugins-basic-1.7.0-2.osg32.el6.x86_64
lcmaps-plugins-gums-client-0.0.2-4.osg.el6.x86_64
lcmaps-plugins-scas-client-0.5.5-1.osg32.el6.x86_64
lcmaps-plugins-saz-client-0.4.0-1.2.osg32.el6.x86_64
lcmaps-1.6.6-1.1.osg32.el6.x86_64
lcas-lcmaps-gt4-interface-0.2.6-1.1.osg.el6.x86_64
lcmaps-plugins-verify-proxy-1.5.7-1.osg32.el6.x86_64

- Tony</pre></div><div class='update_description'><i onclick="document.location='27108#1446827187'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-06T16:26:27+00:00">Nov 6, 2015 04:26 PM UTC</time> by <b>Greg Thain</b><a class="anchor" name="1446827187">&nbsp;</a></div><pre>On 11/05/2015 03&#58;41 PM, Open Science Grid FootPrints wrote&#58;

Dave&#58;

One suspicious area is in lcmaps -- do you know what version of lcamps
and which plugin you are using?

-greg</pre></div><div class='update_description'><i onclick="document.location='27108#1446763907'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-05T22:51:47+00:00">Nov 5, 2015 10:51 PM UTC</time><a class="anchor" name="1446763907">&nbsp;</a></div><pre>Thanks! File uploaded.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Paul Tader 3291</pre></div><div class='update_description'><i onclick="document.location='27108#1446762790'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-05T22:33:10+00:00">Nov 5, 2015 10:33 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1446762790">&nbsp;</a></div><pre>That likely won&#39;t work. You should just be able to append &#39;.txt&#39; onto the end of the filename and upload it using the web UI (as long as it&#39;s under whatever the file size limit is). Alternatively, e-mail it to Greg directly.</pre></div><div class='update_description'><i onclick="document.location='27108#1446762384'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-05T22:26:24+00:00">Nov 5, 2015 10:26 PM UTC</time> by <b>Paul Tader</b><a class="anchor" name="1446762384">&nbsp;</a></div><pre>Let try email attaching the file to the ticket...

On 11/5/15, 4&#58;20 PM, &#34;Open Science Grid FootPrints&#34;
&#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62;[Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27108#1446762021'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-05T22:20:21+00:00">Nov 5, 2015 10:20 PM UTC</time> by <b>Greg Thain</b><a class="anchor" name="1446762021">&nbsp;</a></div><pre>On 11/05/2015 03&#58;41 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; Can you email it directly to me&#58;  gthain@....</font>

<font color='#7F7E6F'>&#62; ------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; *Notification of Ticket Change*</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='27108.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/27108</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *Description&#58;*</font>
<font color='#7F7E6F'>&#62; So I&#39;m also getting the error&#34; &#34;file type not allowed&#34; when I try</font>
<font color='#7F7E6F'>&#62; attaching the file. I could email it to those interested - it&#39;s about</font>
<font color='#7F7E6F'>&#62; 825k. Let me know. I&#39;ll continue to try to upload.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Paul</font>
<font color='#7F7E6F'>&#62; Tader 3291</font>
<font color='#7F7E6F'>&#62;</font></pre></div><div class='update_description'><i onclick="document.location='27108#1446759707'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-05T21:41:47+00:00">Nov 5, 2015 09:41 PM UTC</time><a class="anchor" name="1446759707">&nbsp;</a></div><pre>So I&#39;m also getting the error&#34; &#34;file type not allowed&#34; when I try attaching the file. I could email it to those interested - it&#39;s about 825k. Let me know. I&#39;ll continue to try to upload.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Paul Tader 3291</pre></div><div class='update_description'><i onclick="document.location='27108#1446759562'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-05T21:39:22+00:00">Nov 5, 2015 09:39 PM UTC</time><a class="anchor" name="1446759562">&nbsp;</a></div><pre>Thanks for the steps! A roughly 45 minute valgind session has been uploaded.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Paul Tader 3291</pre></div><div class='update_description'><i onclick="document.location='27108#1446751951'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-05T19:32:31+00:00">Nov 5, 2015 07:32 PM UTC</time> by <b>Greg Thain</b><a class="anchor" name="1446751951">&nbsp;</a></div><pre>On 11/03/2015 03&#58;41 PM, Open Science Grid FootPrints wrote&#58;

Sure, first make sure that valgrind is installed on the system, you may
need to yum install valgrind.

Then, go to the condor sbin directory.  condor_config_val SBIN

should tell you the location.

Temporarily rename the condor_collector to another name&#58;

mv condor_collector condor_collector.real

create a shell script there called condor_collector with the following
contents&#58;

#!/bin/sh

exec valgrind --tool=memcheck --leak-check=full
--log-file=/tmp/collector.vg.%p /usr/sbin/condor_collector.real &#34;$@&#34;

You may need to change the log directory from /tmp to something with
more space on your system, and the path from /usr/sbin/ to wherever the
condor sbin is on your system.

then restart the collector&#58;

condor_restart -collector.

Let the collector run for a while, say 30 minutes, then turn it off

condor_off -collector

Then  you can put the real collector back in place&#58;

<div id='show_1367384277' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1367384277'>mv condor_collector condor_collector.vg
mv condor_collector.real condor_collector

And send me the log file in /tmp/collector.vg.*

Thanks!

-greg

condor_on -collector

<font color='#7F7E6F'>&#62; ------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; *Notification of Ticket Change*</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='27108.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/27108</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *Description&#58;*</font>
<font color='#7F7E6F'>&#62; Hi,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Currently, 2 of our 4 CE&#39;s have this patch, 2 do not. We are still</font>
<font color='#7F7E6F'>&#62; seeing the condor_collector memory leak on all of the CE&#39;s. Earlier in</font>
<font color='#7F7E6F'>&#62; the ticket, you asked if we could run valgrind on the collector. If</font>
<font color='#7F7E6F'>&#62; you provide instructions, we can do this.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Anthony Tiradani</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Anthony Tiradani tiradani@....</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_1367384277').click(function() {
            $('#detail_1367384277').slideDown("normal");
            $('#show_1367384277').hide();
            $('#hide_1367384277').show();
        });
        $('#hide_1367384277').click(function() {
            $('#detail_1367384277').slideUp();
            $('#hide_1367384277').hide();
            $('#show_1367384277').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27108#1446586911'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-03T21:41:51+00:00">Nov 3, 2015 09:41 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1446586911">&nbsp;</a></div><pre>Hi,

Currently, 2 of our 4 CE&#39;s have this patch, 2 do not.  We are still seeing the condor_collector memory leak on all of the CE&#39;s.  Earlier in the ticket, you asked if we could run valgrind on the collector.  If you provide instructions, we can do this.

Thanks,

Anthony Tiradani</pre></div><div class='update_description'><i onclick="document.location='27108#1446499210'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-02T21:20:10+00:00">Nov 2, 2015 09:20 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1446499210">&nbsp;</a></div><pre>I&#39;ve applied it to one of our CEs.  We will see how it goes.

Thank you!

Anthony Tiradani</pre></div><div class='update_description'><i onclick="document.location='27108#1446497155'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-02T20:45:55+00:00">Nov 2, 2015 08:45 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1446497155">&nbsp;</a></div><pre>Got it. Could you apply the following patch? I think this may fix your issue.

<a href='https&#58;//github.com/opensciencegrid/htcondor-ce/commit/0670ef07e67759ac9754882b2db97f401a6b9a88' target='_blank' rel='nofollow'>https&#58;//github.com/opensciencegrid/htcondor-ce/commit/0670ef07e67759ac9754882b2db97f401a6b9a88</a></pre></div><div class='update_description'><i onclick="document.location='27108#1446495925'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-02T20:25:25+00:00">Nov 2, 2015 08:25 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1446495925">&nbsp;</a></div><pre>Apparently, I cannot... I get a file type not allowed.  I sent it to you via email.

Thanks,

Anthony Tiradani</pre></div><div class='update_description'><i onclick="document.location='27108#1446495525'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-02T20:18:45+00:00">Nov 2, 2015 08:18 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1446495525">&nbsp;</a></div><pre>Tony,

Could you attach your CE config dump (condor_ce_config_val -dump)?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='27108#1446050776'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-28T16:46:16+00:00">Oct 28, 2015 04:46 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1446050776">&nbsp;</a></div><pre>Nope, there&#39;s nothing in the CE-specific code that uses split.</pre></div><div class='update_description'><i onclick="document.location='27108#1446049766'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-28T16:29:26+00:00">Oct 28, 2015 04:29 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1446049766">&nbsp;</a></div><pre>To my knowledge we are not, unless there is something internal to the CE software that makes use of the split function?

-Tony</pre></div><div class='update_description'><i onclick="document.location='27108#1446047593'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-28T15:53:13+00:00">Oct 28, 2015 03:53 PM UTC</time> by <b>Greg Thain</b><a class="anchor" name="1446047593">&nbsp;</a></div><pre>On 10/28/2015 10&#58;06 AM, Open Science Grid FootPrints wrote&#58;
There&#39;s a known problem with Condor 8.2.9 that causes a memory leak when
using the classad &#34;split&#34; function.  This has been fixed in 8.2.10 and
8.4.x.

Do you know if you are using the &#34;split&#34; function in a constraint when
querying the collector?

<font color='#7F7E6F'>&#62; ------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; *Notification of Ticket Change*</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='27108.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/27108</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *Description&#58;*</font>
<font color='#7F7E6F'>&#62; Also attaching the output from condor_ce_config_val -dump.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Paul</font>
<font color='#7F7E6F'>&#62; Tader 3291</font>
<font color='#7F7E6F'>&#62;</font></pre></div><div class='update_description'><i onclick="document.location='27108#1446044774'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-28T15:06:14+00:00">Oct 28, 2015 03:06 PM UTC</time><a class="anchor" name="1446044774">&nbsp;</a></div><pre>Also attaching the output from condor_ce_config_val -dump.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Paul Tader 3291</pre></div><div class='update_description'><i onclick="document.location='27108#1446042990'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-28T14:36:30+00:00">Oct 28, 2015 02:36 PM UTC</time><a class="anchor" name="1446042990">&nbsp;</a></div><pre>Output of condor_config_val -dump attached.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Paul Tader 3291</pre></div><div class='update_description'><i onclick="document.location='27108#1445632392'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-23T20:33:12+00:00">Oct 23, 2015 08:33 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1445632392">&nbsp;</a></div><pre>Adding Greg to the ticket.

Tony&#58; would you be able to send a CE config dump? Would you be able to run valgrind on the collector for a while?</pre></div><div class='update_description'><i onclick="document.location='27108#1445628730'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-23T19:32:10+00:00">Oct 23, 2015 07:32 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1445628730">&nbsp;</a></div><pre>Nothing specific in the 8.2 branch from what I saw but I&#39;ll be bringing it up with the HTCondor team.</pre></div><div class='update_description'><i onclick="document.location='27108#1445628316'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-23T19:25:16+00:00">Oct 23, 2015 07:25 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1445628316">&nbsp;</a></div><pre>Sent the much smaller tarball to you directly.  I am not opposed to upgrading HTCondor on the CEs, but this won&#39;t happen on a Friday.  Are there patches or bug fixes that might address this?

Thanks,

Anthony Tiradani</pre></div><div class='update_description'><i onclick="document.location='27108#1445626951'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-23T19:02:31+00:00">Oct 23, 2015 07:02 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1445626951">&nbsp;</a></div><pre>In the short term, you may want to think about updating your version of HTCondor. 8.2.9 is available in OSG 3.2 and 8.4.0 in OSG 3.3. Forget about the entire dir, you can e-mail me the MasterLog and CollectorLog (plus any old versions of the files) over e-mail.

- Brian</pre></div><div class='update_description'><i onclick="document.location='27108#1445616225'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-23T16:03:45+00:00">Oct 23, 2015 04:03 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1445616225">&nbsp;</a></div><pre>Sorry for the delay, I was out sick.

# condor_version
$CondorVersion&#58; 8.2.6 Dec 10 2014 BuildID&#58; 287355 $
$CondorPlatform&#58; x86_64_RedHat6 $

The FNAL security team would rather I didn&#39;t attach the logs to the ticket and in any case the tar&#39;d and gzipped file is 608MB.  Is there a way I can send the logs to you directly?

Thanks,

Anthony Tiradani</pre></div><div class='update_description'><i onclick="document.location='27108#1445277601'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-19T18:00:01+00:00">Oct 19, 2015 06:00 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1445277601">&nbsp;</a></div><pre>What version of HTCondor are you guys running? Go ahead and throw the entire /var/log/condor-ce in a zip and attach it to the ticket.

- Brian</pre></div><div class='update_description'><i onclick="document.location='27108#1445269889'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-19T15:51:29+00:00">Oct 19, 2015 03:51 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1445269889">&nbsp;</a></div><pre>There is a memory leak in the collector process for the htcondor-ce.  We observe that over time the memory consumption for the condor_collector process grows but never decreases.  If left unchecked, the OOM killer kicks in.  We have been periodically restarting the condor-ce service to reset memory consumption.

# rpm -qa | grep htcondor-ce
osg-htcondor-ce-condor-3.2-10.osg32.el6.x86_64
htcondor-ce-condor-1.16-1.osg32.el6.x86_64
htcondor-ce-client-1.16-1.osg32.el6.x86_64
osg-htcondor-ce-3.2-10.osg32.el6.x86_64
htcondor-ce-1.16-1.osg32.el6.x86_64

What logs should we send your way?  I have not seen anything obvious in any of the logs.</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F27108">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
