<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[11750] Misc. RSV reporting problems</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=11750" method="post">
<div class="page-header">
    <h3><span class="muted">11750</span> / Misc. RSV reporting problems</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Jonathan Mills</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/gratia</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Jonathan Mills</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Waiting for user response</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-04-17</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Matyas Selmeci <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/11750", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/11750?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/11750?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Misc.%20RSV%20reporting%20problems%20ISSUE%3D11750%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='11750#1335202147'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-23T17:29:07+00:00">Apr 23, 2012 05:29 PM UTC</time> by <b>jonmills@....</b><a class="anchor" name="1335202147">&nbsp;</a></div><pre>You may now close this ticket.  We have all green lights in RSV status
for RENCI resource-group.

--
Jonathan Mills
Systems Administrator
Renaissance Computing Institute
UNC-Chapel Hill

On 04/23/2012 11&#58;02 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11750#1335193327'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-23T15:02:07+00:00">Apr 23, 2012 03:02 PM UTC</time> by <b>jonmills@....</b><a class="anchor" name="1335193327">&nbsp;</a></div><pre>I&#39;ve manually enabled and run the gridftp probe, with the following result&#58;

Running metric org.osg.globus.gridftp-simple (10 of 13)

metricName&#58; org.osg.globus.gridftp-simple
metricType&#58; status
timestamp&#58; 2012-04-23 10&#58;56&#58;47 EDT
metricStatus&#58; OK
serviceType&#58; OSG-GridFTP
serviceURI&#58; hpgw0.renci.org
gatheredAt&#58; hpgw0.renci.org
summaryData&#58; OK
detailsData&#58; Successful transfer to remote host.
Successful transfer from remote host.
Original file and received file are identical.

EOT

--
Jonathan Mills
Systems Administrator
Renaissance Computing Institute
UNC-Chapel Hill</pre></div><div class='update_description'><i onclick="document.location='11750#1334676521'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-17T15:28:41+00:00">Apr 17, 2012 03:28 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1334676521">&nbsp;</a></div><pre>Hi Jonathan
Could you provide Mat the information he needs to help you with this issue?
Thanks
-Neha</pre></div><div class='update_description'><i onclick="document.location='11750#1334177082'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-11T20:44:42+00:00">Apr 11, 2012 08:44 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1334177082">&nbsp;</a></div><pre>Hi Jonathan,
Looks like your gridftp probe hasn&#39;t run in a while.
Run &#34;rsv-control --list&#34; to see what probes are supposed to be running and compare that with the output of &#34;rsv-control --job-list&#34; which shows what probes are actually running.
The name of this probe is &#34;org.osg.globus.gridftp-simple&#34;, so if you see it in --list but not --job-list, then the probe is enabled but not actually running, and you can set it to run by doing &#34;rsv-control --on --host hpgw0.renci.org org.osg.globus.gridftp-simple&#34;.
Otherwise, if you don&#39;t want the probe to run, you should disable it by running &#34;rsv-control --disable --host hpgw0.renci.org org.osg.globus.gridftp-simple&#34;
Hope this helps,
-mat</pre></div><div class='update_description'><i onclick="document.location='11750#1333995611'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-09T18:20:11+00:00">Apr 9, 2012 06:20 PM UTC</time> by <b>jonmills@....</b><a class="anchor" name="1333995611">&nbsp;</a></div><pre>Okay, good news --  I went ahead with the last advice of Mat, and this
seems to have rectified the issue on Blueridge.  Status on
brgw1.renci.org CE is now all green lights!

So now we just need to work through the GridFTP probe problem on
RENCI-Blueberry (hpgw0.renci.org CE)

--
Jonathan Mills
Systems Administrator
Renaissance Computing Institute
UNC-Chapel Hill</pre></div><div class='update_description'><i onclick="document.location='11750#1333993627'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-09T17:47:07+00:00">Apr 9, 2012 05:47 PM UTC</time> by <b>jonmills@....</b><a class="anchor" name="1333993627">&nbsp;</a></div><pre>Dear Elizabeth & Mat&#58;

Apologies for the long delay in updating.  I continue to have the issue
on hpgw0.renci.org where the GridFTP probe fails to update, or check in.
I still have the problem with brgw1.renci.org, with the CA certs.

I have not yet played with switching CA authorities on brgw1.renci.org,
but I will give it a shot.  It seems fairly intrusive, however.  What
effect will this have on running jobs?

--
Jonathan Mills
Systems Administrator
Renaissance Computing Institute
UNC-Chapel Hill</pre></div><div class='update_description'><i onclick="document.location='11750#1333479660'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-04-03T19:01:00+00:00">Apr 3, 2012 07:01 PM UTC</time> by <b>echism</b><a class="anchor" name="1333479660">&nbsp;</a></div><pre>Jonathan,

Please send an update.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='11750#1332878500'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-27T20:01:40+00:00">Mar 27, 2012 08:01 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1332878500">&nbsp;</a></div><pre>Hi Jonathan,

Any news on this? Has the workaround been helpful?

-mat</pre></div><div class='update_description'><i onclick="document.location='11750#1332283929'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-20T22:52:09+00:00">Mar 20, 2012 10:52 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1332283929">&nbsp;</a></div><pre>Well, it&#39;s possible that the updater has gotten wedged somehow. Try switching to a different set of CA certs and then switching back to the OSG certs, that might un-wedge things. Use the following commands&#58;

vdt-ca-manage setupCA --location local --url vdt --force --verbose

vdt-ca-manage setupCA --location local --url osg --force --verbose

Also, check to see if there&#39;s anything funny going on with NFS. Do NFS logs show anything out of the ordinary? Might there be permissions issues? For example, are you able to create a directory in /osg/1.2.13 as root on the machine you&#39;re running vdt-update-certs from?</pre></div><div class='update_description'><i onclick="document.location='11750#1332253087'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-20T14:18:07+00:00">Mar 20, 2012 02:18 PM UTC</time> by <b>jonmills@....</b><a class="anchor" name="1332253087">&nbsp;</a></div><pre>[root@brgw1&#58;~]$ cat /opt/osg/1.2.13/osg-1.2.13/logs/vdt-update-certs.log
2012-03-20T00-47-01
######################################################################
2012-03-20T00-47-01 Starting up vdt-update-certs
2012-03-20T00-47-01 Reading certs state file -&#62; certs state = &#39;/osg/1.2.13&#39;
2012-03-20T00-47-01 There has been a successful check in the last 24
hours.  Exiting.
2012-03-20T01-47-02
######################################################################
2012-03-20T01-47-02 Starting up vdt-update-certs
2012-03-20T01-47-02 Reading certs state file -&#62; certs state = &#39;/osg/1.2.13&#39;
2012-03-20T01-47-02 There has been a successful check in the last 24
hours.  Exiting.
2012-03-20T02-47-02
######################################################################
2012-03-20T02-47-02 Starting up vdt-update-certs
2012-03-20T02-47-02 Reading certs state file -&#62; certs state = &#39;/osg/1.2.13&#39;
2012-03-20T02-47-02 There has been a successful check in the last 24
hours.  Exiting.
2012-03-20T03-47-01
######################################################################
2012-03-20T03-47-01 Starting up vdt-update-certs
2012-03-20T03-47-01 Reading certs state file -&#62; certs state = &#39;/osg/1.2.13&#39;
2012-03-20T03-47-01 There has been a successful check in the last 24
hours.  Exiting.
2012-03-20T04-47-01
######################################################################
2012-03-20T04-47-01 Starting up vdt-update-certs
2012-03-20T04-47-01 Reading certs state file -&#62; certs state = &#39;/osg/1.2.13&#39;
2012-03-20T04-47-01 There has been a successful check in the last 24
hours.  Exiting.
2012-03-20T05-47-01
######################################################################
2012-03-20T05-47-01 Starting up vdt-update-certs
2012-03-20T05-47-01 Reading certs state file -&#62; certs state = &#39;/osg/1.2.13&#39;
<div id='show_810320097' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_810320097'>2012-03-20T05-47-01 There has been a successful check in the last 24
hours.  Exiting.
2012-03-20T06-47-01
######################################################################
2012-03-20T06-47-01 Starting up vdt-update-certs
2012-03-20T06-47-01 Reading certs state file -&#62; certs state = &#39;/osg/1.2.13&#39;
2012-03-20T06-47-01 There has been a successful check in the last 24
hours.  Exiting.
2012-03-20T07-47-02
######################################################################
2012-03-20T07-47-02 Starting up vdt-update-certs
2012-03-20T07-47-02 Reading certs state file -&#62; certs state = &#39;/osg/1.2.13&#39;
2012-03-20T07-47-02 There has been a successful check in the last 24
hours.  Exiting.
2012-03-20T08-47-01
######################################################################
2012-03-20T08-47-01 Starting up vdt-update-certs
2012-03-20T08-47-01 Reading certs state file -&#62; certs state = &#39;/osg/1.2.13&#39;
2012-03-20T08-47-01 There has been a successful check in the last 24
hours.  Exiting.
2012-03-20T09-47-01
######################################################################
2012-03-20T09-47-01 Starting up vdt-update-certs
2012-03-20T09-47-02 Reading certs state file -&#62; certs state = &#39;/osg/1.2.13&#39;
2012-03-20T09-47-02 There has been a successful check in the last 24
hours.  Exiting.
[root@brgw1&#58;~]$

Jonathan Mills
Systems Administrator
Renaissance Computing Institute
UNC-Chapel Hill

On 03/19/2012 06&#58;18 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_810320097').click(function() {
            $('#detail_810320097').slideDown("normal");
            $('#show_810320097').hide();
            $('#hide_810320097').show();
        });
        $('#hide_810320097').click(function() {
            $('#detail_810320097').slideUp();
            $('#hide_810320097').hide();
            $('#show_810320097').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='11750#1332195494'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-19T22:18:14+00:00">Mar 19, 2012 10:18 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1332195494">&nbsp;</a></div><pre>Could you send us the log file as well? Again, it&#39;s &#34;/opt/osg/1.2.13/osg-1.2.13/logs/vdt-update-certs.log&#34;</pre></div><div class='update_description'><i onclick="document.location='11750#1332026828'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-17T23:27:08+00:00">Mar 17, 2012 11:27 PM UTC</time> by <b>jonmills@....</b><a class="anchor" name="1332026828">&nbsp;</a></div><pre>Here you go&#58;

Kickstarted 17&#58;11 07-Apr-2011
[jonmills@brgw1 ~]$ su -
Password&#58;
[root@brgw1&#58;~]$
[root@brgw1&#58;~]$
[root@brgw1&#58;~]$ clear

[root@brgw1&#58;~]$
[root@brgw1&#58;~]$
[root@brgw1&#58;~]$ vdt-version | grep -i certif
CA Certificates 1.26 (includes IGTF  CAs)                -
[root@brgw1&#58;~]$ locate vdt-update-certs.conf
/opt/osg/1.2.13/osg-1.2.13/vdt/backup/vdt/vdt-app-data/vdt-update-certs/vdt-update-certs.conf_001_20110426-110121
/opt/osg/1.2.13/osg-1.2.13/vdt/etc/vdt-update-certs.conf
/opt/osg/1.2.13/osg-1.2.13/vdt-app-data/osg-rsv/etc/metrics/org.osg.central.cacert.process.vdt-update-certs.conf
/opt/osg/1.2.13/osg-1.2.13/vdt-app-data/vdt-update-certs/vdt-update-certs.conf
/opt/osg/1.2.13/osg-1.2.13/vdt-app-data/vdt-update-certs/vdt-update-certs.conf.md5
[root@brgw1&#58;~]$ cat /opt/osg/1.2.13/osg-1.2.13/vdt/etc/vdt-update-certs.conf
# Configuration file for vdt-update-certs

# This file has been regenerated by vdt-ca-manage, which removes most
# comments.  You can still manually modify it, any manual change will
# be preserved if vdt-ca-manage is used again.

## cacerts_url is the URL of your certificate distribution
cacerts_url = <a href='http&#58;//software.grid.iu.edu/pacman/cadist/ca-certs-version' target='_blank' rel='nofollow'>http&#58;//software.grid.iu.edu/pacman/cadist/ca-certs-version</a>

## log specifies where logging output will go
log = /opt/osg/1.2.13/osg-1.2.13/logs/vdt-update-certs.log

## include specifies files (full pathnames) that should be copied
## into the certificates installation after an update has occured.

<div id='show_12244872' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_12244872'>## exclude_ca specifies a CA (not full pathnames, but just the hash
## of the CA you want to exclude) that should be removed from the
## certificates installation after an update has occured.

debug = 0
[root@brgw1&#58;~]$ vdt-update-certs --force
vdt-update-certs
Log file&#58; /opt/osg/1.2.13/osg-1.2.13/logs/vdt-update-certs.log
Updates from&#58; <a href='http&#58;//software.grid.iu.edu/pacman/cadist/ca-certs-version' target='_blank' rel='nofollow'>http&#58;//software.grid.iu.edu/pacman/cadist/ca-certs-version</a>

Will update CA certificates from version 1.26 to version 1.26.
Update successful.
[root@brgw1&#58;~]$ /etc/init.d/
acpid                 foundation-mysql      krb524                nscd                  rpcsvcgssd
anacron               functions             kudzu                 ntpd                  saslauthd
apache                ganglia-restore-rrds  lm_sensors            oddjobd               sendmail
atd                   globus-ws             lvm2-monitor          osg-rsv               single
auditd                gmetad                mcstrans              pand                  smartd
autofs                gmond                 mdmonitor             pcscd                 snmpd
avahi-daemon          gpm                   mdmpd                 portmap               snmptrapd
avahi-dnsconfd        greceptor             mds                   postfix               sshd
bluetooth             gt4-ws                messagebus            psacct                syslog
condor-cron           haldaemon             microcode_ctl         rdisc                 tomcat-55
conman                halt                  multipathd            readahead_early       vmware-tools
cpuspeed              hidd                  mysql5                readahead_later       wpa_supplicant
crond                 httpd                 netconsole            restorecond           xfs
cups                  ip6tables             netfs                 rocks-dmesg           xinetd
dhcpd                 iptables              netplugd              rocks-grub            ypbind
dhcrelay              irda                  network               rocks-post            yum-updatesd
dnsmasq               irqbalance            NetworkManager        rocks-pre
dund                  jexec                 nfs                   rpcgssd
firstboot             killall               nfslock               rpcidmapd
[root@brgw1&#58;~]$ /etc/init.d/tomcat-55 status
Usage&#58; tomcat-55 {start|stop|restart|condrestart} [restart sleeptime]
[root@brgw1&#58;~]$ ps aux | grep tomcat
daemon   18458  0.0  8.8 1075024 272232 ?      Sl   Mar12   4&#58;48 /opt/osg/1.2.13/osg-1.2.13/jdk1.6/bin/java -Djava.util.logging.config.file=/opt/osg/1.2.13/osg-1.2.13/tomcat/v55/conf/logging.properties -server -Xmx512M -XX&#58;MaxPermSize=256m -Dsun.net.inetaddr.ttl=300 -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Dorg.globus.wsrf.container.persistence.dir=/opt/osg/1.2.13/osg-1.2.13/vdt-app-data/globus/persisted -Djava.endorsed.dirs=/opt/osg/1.2.13/osg-1.2.13/tomcat/v55/common/endorsed -classpath /opt/osg/1.2.13/osg-1.2.13/tomcat/v55/bin/bootstrap.jar -Dcatalina.base=/opt/osg/1.2.13/osg-1.2.13/tomcat/v55 -Dcatalina.home=/opt/osg/1.2.13/osg-1.2.13/tomcat/v55 -Djava.io.tmpdir=/opt/osg/1.2.13/osg-1.2.13/tomcat/v55/temp org.apache.catalina.startup.Bootstrap start
root     27593  0.0  0.0  61132   692 pts/0    S+   19&#58;22   0&#58;00 grep tomcat
[root@brgw1&#58;~]$ /etc/init.d/tomcat-55 restart
Stopping tomcat-55&#58; Using CATALINA_BASE&#58;   /opt/osg/1.2.13/osg-1.2.13/tomcat/v55
Using CATALINA_HOME&#58;   /opt/osg/1.2.13/osg-1.2.13/tomcat/v55
Using CATALINA_TMPDIR&#58; /opt/osg/1.2.13/osg-1.2.13/tomcat/v55/temp
Using JRE_HOME&#58;        /opt/osg/1.2.13/osg-1.2.13/jdk1.6
Using CLASSPATH&#58;       /opt/osg/1.2.13/osg-1.2.13/tomcat/v55/bin/bootstrap.jar
waiting for processes to exit
waiting for processes to exit
Starting tomcat-55&#58; Using CATALINA_BASE&#58;   /opt/osg/1.2.13/osg-1.2.13/tomcat/v55
Using CATALINA_HOME&#58;   /opt/osg/1.2.13/osg-1.2.13/tomcat/v55
Using CATALINA_TMPDIR&#58; /opt/osg/1.2.13/osg-1.2.13/tomcat/v55/temp
Using JRE_HOME&#58;        /opt/osg/1.2.13/osg-1.2.13/jdk1.6
Using CLASSPATH&#58;       /opt/osg/1.2.13/osg-1.2.13/tomcat/v55/bin/bootstrap.jar

[root@brgw1&#58;~]$ /etc/init.d/osg-rsv restart
Stopping OSG-RSV&#58; Stopping all metrics on all hosts.
Stopping consumers.
Starting OSG-RSV&#58; Starting 16 metrics for host &#39;brgw1.renci.org&#39;.
Starting 2 consumers.

On Mar 16, 2012, at 5&#58;54 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_12244872').click(function() {
            $('#detail_12244872').slideDown("normal");
            $('#show_12244872').hide();
            $('#hide_12244872').show();
        });
        $('#hide_12244872').click(function() {
            $('#detail_12244872').slideUp();
            $('#hide_12244872').hide();
            $('#show_12244872').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='11750#1331934843'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-16T21:54:03+00:00">Mar 16, 2012 09:54 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1331934843">&nbsp;</a></div><pre>Can you send us&#58;
- the output of &#34;vdt-version | grep -i certif&#34; to find out what certificate version it thinks it has;
- the contents of /opt/osg/1.2.13/osg-1.2.13/vdt/etc/vdt-update-certs.conf;
- run &#34;vdt-update-certs --force&#34; and send us the full contents of the log file /opt/osg/1.2.13/osg-1.2.13/logs/vdt-update-certs.log
That should help debug why the certs aren&#39;t getting updated.
-mat</pre></div><div class='update_description'><i onclick="document.location='11750#1331927289'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-16T19:48:09+00:00">Mar 16, 2012 07:48 PM UTC</time> by <b>jonmills@....</b><a class="anchor" name="1331927289">&nbsp;</a></div><pre>This is the CE for RENCI-BlueRidge, so the OSG install is pacman-based.
I&#39;ve run vdt-update-certs more times than I can count.  It apparently
does not resolve the issue.

[root@brgw1&#58;~]$ /opt/osg/1.2.13/osg-1.2.13/vdt/sbin/vdt-update-certs
vdt-update-certs
Log file&#58; /opt/osg/1.2.13/osg-1.2.13/logs/vdt-update-certs.log
Updates from&#58; <a href='http&#58;//software.grid.iu.edu/pacman/cadist/ca-certs-version' target='_blank' rel='nofollow'>http&#58;//software.grid.iu.edu/pacman/cadist/ca-certs-version</a>

Nothing to update&#58; your CA certificate installation is already up-to-date.
[root@brgw1&#58;~]$

--
Jonathan Mills
Systems Administrator
Renaissance Computing Institute
UNC-Chapel Hill</pre></div><div class='update_description'><i onclick="document.location='11750#1331925221'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-16T19:13:41+00:00">Mar 16, 2012 07:13 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1331925221">&nbsp;</a></div><pre>Yes, that&#39;s not the correct cert. Where do you get your certs on that machine? Can you send us the output of &#34;rpm -qa | sort | grep cert&#34; ?</pre></div><div class='update_description'><i onclick="document.location='11750#1331906587'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-16T14:03:07+00:00">Mar 16, 2012 02:03 PM UTC</time> by <b>jonmills@....</b><a class="anchor" name="1331906587">&nbsp;</a></div><pre>[jonmills@brgw1 ~]$ su -
Password&#58;
[root@brgw1&#58;~]$ openssl x509 -in
/etc/grid-security/certificates/9b95bbf2.0 -dates -noout -subject -hash
notBefore=Apr 24 19&#58;23&#58;18 2007 GMT
notAfter=Apr 22 19&#58;23&#58;18 2012 GMT
subject= /C=US/O=National Center for Supercomputing
Applications/OU=Certificate Authorities/CN=CACL
9b95bbf2

--
Jonathan Mills
Systems Administrator
Renaissance Computing Institute
UNC-Chapel Hill

On 03/15/2012 07&#58;23 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11750#1331853825'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-15T23:23:45+00:00">Mar 15, 2012 11:23 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1331853825">&nbsp;</a></div><pre>Can you run
openssl x509 -in /etc/grid-security/certificates/9b95bbf2.0 -dates -noout -subject -hash
and send us the output, just to be sure?
We&#39;re expecting the output to match this&#58;
notBefore=Apr 24 19&#58;23&#58;18 2007 GMT
notAfter=Apr 24 19&#58;23&#58;18 2027 GMT
subject= /C=US/O=National Center for Supercomputing Applications/OU=Certificate Authorities/CN=CACL
9b95bbf2</pre></div><div class='update_description'><i onclick="document.location='11750#1331593748'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-12T23:09:08+00:00">Mar 12, 2012 11:09 PM UTC</time> by <b>jonmills@....</b><a class="anchor" name="1331593748">&nbsp;</a></div><pre>Thanks, Elizabeth, Matyas, et al,

It appears I have the CA issue sorted out on hpgw0.renci.org.  The GridFTP probe still appears stuck on hpgw0, however.

I&#39;ve run vdt-update-certs on brgw1.renci.org today, and in fact numerous times in the past, and it is not clearing up the problem&#58;

[root@brgw1&#58;~]$ rsv-control --run --all-enabled

Running metric org.osg.certificates.cacert-expiry (1 of 16)

metricName&#58; org.osg.certificates.cacert-expiry
metricType&#58; status
timestamp&#58; 2012-03-12 19&#58;02&#58;10 EDT
metricStatus&#58; CRITICAL
serviceType&#58; OSG-CE
serviceURI&#58; brgw1.renci.org
gatheredAt&#58; brgw1.renci.org
summaryData&#58; CRITICAL
detailsData&#58; Security Probe Version&#58; 1.1
ERROR&#58; Few of the files in your installations are out of sync with the OSG distribution.
The CA that are out of sync are&#58; 9b95bbf2
Please ensure that your CA update process (e.g. vdt-update-certs or yum update) is configured and running

0 IGTF CAs are missing and is required for sites that need to conform to EGEE policy.
List of missing CAs include&#58; .
EOT</pre></div><div class='update_description'><i onclick="document.location='11750#1331588485'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-12T21:41:25+00:00">Mar 12, 2012 09:41 PM UTC</time> by <b>echism</b><a class="anchor" name="1331588485">&nbsp;</a></div><pre>Jonathan,

This is just a reminder. The last substantive update we sent your way was&#58;
----------------------
On Blueberry, if you have the &#34;osg-ca-scripts&#34; package installed (check by running &#34;rpm -q osg-ca-scripts&#34;), then run &#34;osg-update-certs&#34; as root.
If not, you probably get your certs from one of our RPMs, and you should update whichever RPM provides your CA certs by typing &#34;yum update &#39;*-ca-certs&#39;&#34; as root.

On Blueridge, you should use run &#34;vdt-update-certs&#34; as root.

The errors should go away the next time the RSV probes run.

Hope this helps.
-Matyas Selmeci
OSG Software Team
----------------------
You hoped to revisit this issue today. Let us know how it went.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='11750#1331134053'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-07T15:27:33+00:00">Mar 7, 2012 03:27 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1331134053">&nbsp;</a></div><pre>Sure. Have fun!</pre></div><div class='update_description'><i onclick="document.location='11750#1331102816'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-07T06:46:56+00:00">Mar 7, 2012 06:46 AM UTC</time><a class="anchor" name="1331102816">&nbsp;</a></div><pre>Neha --

I&#39;m out this week, on vacation in Sacramento.  My internet access is intermittent.  What do you say we pick this up on Monday?

-- by Jonathan Mills</pre></div><div class='update_description'><i onclick="document.location='11750#1331054501'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-06T17:21:41+00:00">Mar 6, 2012 05:21 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1331054501">&nbsp;</a></div><pre>Hi Jonathan
What is the current status on this? Do you still see these errors?
-Neha Sharma
(OSG Software Team)</pre></div><div class='update_description'><i onclick="document.location='11750#1330642556'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-01T22:55:56+00:00">Mar 1, 2012 10:55 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1330642556">&nbsp;</a></div><pre>Hi Jonathan,
The OSG has updated the CA certs in one of our recent releases. UGRID was one of the certs that was updated. Therefore, it is likely that you do not have that update.

On Blueberry, if you have the &#34;osg-ca-scripts&#34; package installed (check by running &#34;rpm -q osg-ca-scripts&#34;), then run &#34;osg-update-certs&#34; as root.
If not, you probably get your certs from one of our RPMs, and you should update whichever RPM provides your CA certs by typing &#34;yum update &#39;*-ca-certs&#39;&#34; as root.

On Blueridge, you should use run &#34;vdt-update-certs&#34; as root.

The errors should go away the next time the RSV probes run.

Hope this helps.
-Matyas Selmeci
OSG Software Team</pre></div><div class='update_description'><i onclick="document.location='11750#1330637900'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-01T21:38:20+00:00">Mar 1, 2012 09:38 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1330637900">&nbsp;</a></div><pre>I&#39;m assigning this to the OSG Software Support Team.</pre></div><div class='update_description'><i onclick="document.location='11750#1330634348'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-01T20:39:08+00:00">Mar 1, 2012 08:39 PM UTC</time> by <b>fermi@....</b><a class="anchor" name="1330634348">&nbsp;</a></div><pre>Plain text links moved here&#58;
INC000000218771 <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=d214010901646c0092f9676c079c87ef%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=d214010901646c0092f9676c079c87ef%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true</a>

Last update&#58; 2012-03-01 14&#58;35&#58;03 - Guest (Additional comments)
reply from&#58; osg@....
[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='11750#1330634173'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-01T20:36:13+00:00">Mar 1, 2012 08:36 PM UTC</time> by <b>fermi@....</b><a class="anchor" name="1330634173">&nbsp;</a></div><pre>Plain text links moved here&#58;
INC000000218771 <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=d214010901646c0092f9676c079c87ef%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=d214010901646c0092f9676c079c87ef%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true</a>

Last update&#58; 2012-03-01 14&#58;33&#58;30 - Guest (Additional comments)
reply from&#58; osg@....
[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='11750#1330633992'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-01T20:33:12+00:00">Mar 1, 2012 08:33 PM UTC</time> by <b>fermi@....</b><a class="anchor" name="1330633992">&nbsp;</a></div><pre>Plain text links moved here&#58;
INC000000218771 <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=d214010901646c0092f9676c079c87ef%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=d214010901646c0092f9676c079c87ef%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true</a>

Last update&#58; 2012-03-01 14&#58;32&#58;56 - Dan Yocum (Additional comments)
This has absolutely nothing to do with gratia.  I am closing this ticket on our end.

GOC - you need to help this person.

Thanks,

Dan

Thanks,
yocum

Summary&#58; FootPrints Ticket Description&#58;

[by Jonathan Mills]

I routed this to the &#39;Gratia&#39; group, hoping (assuming) you would be best suited to work this.  But it is actually an RSV-related circumstance.

Essentially, if I visit &quot;MyOSG&quot; and click on the Status Map, choosing Site/Resource Group &quot;RENCI&quot;, I am able to see both my clusters&#58;  RENCI-Blueberry and RENCI-Blueridge.  The following errors are reported&#58;

RENCI-Blueberry&#58;

-- CACert Expiry&#58;  &quot;The CA that are out of sync are&#58; [&#39;UGRID&#39;]&quot;

-- GridFtp Service Status (Expired)&#58;  Reported 49 days ago

RENCI-Blueridge&#58;

-- CACert Expiry&#58;  &quot;The CA that are out of sync are&#58; 9b95bbf2&quot;

What can I do to get these to go away?</pre></div><div class='update_description'><i onclick="document.location='11750#1330633809'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-01T20:30:09+00:00">Mar 1, 2012 08:30 PM UTC</time> by <b>fermi@....</b><a class="anchor" name="1330633809">&nbsp;</a></div><pre>Plain text links moved here&#58;
LINK <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=d214010901646c0092f9676c079c87ef%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=d214010901646c0092f9676c079c87ef%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true</a>

Short description&#58; Open Science Grid&#58; Misc. RSV reporting problems ISSUE=11750 PROJ=71
Click here to view&#58; LINK

Summary&#58;
FootPrints Ticket Description&#58;
[by Jonathan Mills]
I routed this to the &#39;Gratia&#39; group, hoping (assuming) you would be best suited to work this.  But it is actually an RSV-related circumstance.
Essentially, if I visit &quot;MyOSG&quot; and click on the Status Map, choosing Site/Resource Group &quot;RENCI&quot;, I am able to see both my clusters&#58;  RENCI-Blueberry and RENCI-Blueridge.  The following errors are reported&#58;
RENCI-Blueberry&#58;
-- CACert Expiry&#58;  &quot;The CA that are out of sync are&#58; [&#39;UGRID&#39;]&quot;
-- GridFtp Service Status (Expired)&#58;  Reported 49 days ago
RENCI-Blueridge&#58;
-- CACert Expiry&#58;  &quot;The CA that are out of sync are&#58; 9b95bbf2&quot;
What can I do to get these to go away?</pre></div><div class='update_description'><i onclick="document.location='11750#1330633681'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-01T20:28:01+00:00">Mar 1, 2012 08:28 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1330633681">&nbsp;</a></div><pre>[by Jonathan Mills]

I routed this to the &#39;Gratia&#39; group, hoping (assuming) you would be best suited to work this.  But it is actually an RSV-related circumstance.

Essentially, if I visit &#34;MyOSG&#34; and click on the Status Map, choosing Site/Resource Group &#34;RENCI&#34;, I am able to see both my clusters&#58;  RENCI-Blueberry and RENCI-Blueridge.  The following errors are reported&#58;

RENCI-Blueberry&#58;
-- CACert Expiry&#58;  &#34;The CA that are out of sync are&#58; [&#39;UGRID&#39;]&#34;
-- GridFtp Service Status (Expired)&#58;  Reported 49 days ago

RENCI-Blueridge&#58;
-- CACert Expiry&#58;  &#34;The CA that are out of sync are&#58; 9b95bbf2&#34;

What can I do to get these to go away?</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F11750">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 11750});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
