<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[15818] problem with osg-xsede.grid.iu.edu &#58; ssh/scp/rsync</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=15818" method="post">
<div class="page-header">
    <h3><span class="muted">15818</span> / problem with osg-xsede.grid.iu.edu &#58; ssh/scp/rsync</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Donald Krieger</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Donald Krieger</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">High</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-07-15</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Scott Teige <span class="muted"> / OSG Operations Infrastructure</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/15818", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/15818?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/15818?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20problem%20with%20osg-xsede.grid.iu.edu%20%26%2358%3B%20ssh%2Fscp%2Frsync%20ISSUE%3D15818%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='15818#1393345307'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-25T16:21:47+00:00">Feb 25, 2014 04:21 PM UTC</time><a class="anchor" name="1393345307">&nbsp;</a></div><pre>This is an old left-over ticket and should be closed.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='15818#1373313428'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-08T19:57:08+00:00">Jul 8, 2013 07:57 PM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1373313428">&nbsp;</a></div><pre>Hi Elizabeth,

Thank you for keeping an eye on this.

The original problem for which I opened the ticket is resolved so I think it would be reasonable to close it.

The behavior regarding the deficit in the number condor_shadow processes compared with the number of running processes
shown by condor_q does persist.
I notice that the numbers only reconcile when the number of running jobs drops or remains steady with very few completing or starting.
When a lot of jobs are entering the run state, the number condor_shadows lags behind dramatically and this appears to be the determining factor.
So even when the number of running jobs is constant, if there are a lot completing and a lot entering the run state, the number of condor_shadow&#39;s lags dramatically.  Please pardon the repetition.

Thanks again.

Don

Don Krieger, Ph.D.
Department of Neurological Surgery
University of Pittsburgh
(412)648-9654 Office
(412)521-4431 Cell/Text</pre></div><div class='update_description'><i onclick="document.location='15818#1373311540'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-08T19:25:40+00:00">Jul 8, 2013 07:25 PM UTC</time> by <b>echism</b><a class="anchor" name="1373311540">&nbsp;</a></div><pre>Mats and Scott,

Problems seem to persist here.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='15818#1372856769'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-03T13:06:09+00:00">Jul 3, 2013 01:06 PM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1372856769">&nbsp;</a></div><pre>Hi Mats and Scott,

Thanks for attending to that problem yesterday.  I appreciate it and it is working well now.

I notice that the number of condor_shadow&#39;s right now is well below 100 whereas condor_q is showing 4000+ running jobs.
I&#39;m interested in this because I use the number of condor_shadow&#39;s as a count of my running jobs.
It requires far less resources to do&#58;
ps aux | grep condor_shadow | grep -c donkri
Than&#58;
condor_q | grep &#34; R &#34; | grep -c donkri
This is particularly so when the system is busy.

Could you please comment on the when this kind of disparity in the counts might be expected and what it may effect about the running jobs?
Thanks.

Regards,

Don

Don Krieger, Ph.D.
Department of Neurological Surgery
University of Pittsburgh
(412)648-9654 Office
(412)521-4431 Cell/Text</pre></div><div class='update_description'><i onclick="document.location='15818#1372793588'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-02T19:33:08+00:00">Jul 2, 2013 07:33 PM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1372793588">&nbsp;</a></div><pre>Hi Scott and Mats,

Thanks for looking at this and taking a cut at resolving it.
It&#39;s definitely not working.

Scott, does your comment that this is not a critical resource mean that this problem may languish for 24 hours or more?
If so, we will lose the opportunistic cycles available right now as my jobs must have staging files to function and these will be exhausted shortly.

The OSG appears to be under-utilized right now and it&#39;s a significant loss since we were getting in excess of 10,000 cpu&#39;s for 2 days.

Please let me know if there is any light on the horizon when you can.

Thanks again.

Regards,

Don

Don Krieger, Ph.D.
Department of Neurological Surgery
University of Pittsburgh
(412)648-9654 Office
(412)521-4431 Cell/Text</pre></div><div class='update_description'><i onclick="document.location='15818#1372790350'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-02T18:39:10+00:00">Jul 2, 2013 06:39 PM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1372790350">&nbsp;</a></div><pre>It&#39;s been 2+ hours and the network is still down almost all of the time.
I just succeeded with an ssh command but it took 65 seconds to connect.
I have a file copy command (rsync) in process and am getting under 1 Kbytes/sec and that only intermittently.

Regards,

Don

Don Krieger, Ph.D.
Department of Neurological Surgery
University of Pittsburgh
(412)648-9654 Office
(412)521-4431 Cell/Text</pre></div><div class='update_description'><i onclick="document.location='15818#1372783872'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-02T16:51:12+00:00">Jul 2, 2013 04:51 PM UTC</time> by <b>Don Krieger</b><a class="anchor" name="1372783872">&nbsp;</a></div><pre>I am still getting  a ssh_exchange_identification error from ssh
And cannot connect to the machine at all now, although an ssh from blacklight.psc.teragrid.org does succeed but very slowly.

How long do you think it will take to start behaving.
I cannot upload any staging files or download any results.
________________________________
Notification of Ticket Change

<a href='https&#58;//ticket.grid.iu.edu/goc/15818' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/15818</a>

Description&#58;
From Mats Rynge&#58;

The problem is a saturated network link. I have lowered the limit of
concurrent staging jobs, so we should see this improve soon.

Thanks for letting us know.

Scott Teige steige@....</pre></div><div class='update_description'><i onclick="document.location='15818#1372783138'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-02T16:38:58+00:00">Jul 2, 2013 04:38 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1372783138">&nbsp;</a></div><pre>osg-xsede is not a critical priority service.
Scott</pre></div><div class='update_description'><i onclick="document.location='15818#1372782799'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-02T16:33:19+00:00">Jul 2, 2013 04:33 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1372782799">&nbsp;</a></div><pre>From Mats Rynge&#58;

The problem is a saturated network link. I have lowered the limit of
concurrent staging jobs, so we should see this improve soon.

Thanks for letting us know.</pre></div><div class='update_description'><i onclick="document.location='15818#1372782425'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-02T16:27:05+00:00">Jul 2, 2013 04:27 PM UTC</time> by <b>Adam Williamson</b><a class="anchor" name="1372782425">&nbsp;</a></div><pre>Don, called and wanted this ticket elevated to critical.</pre></div><div class='update_description'><i onclick="document.location='15818#1372782247'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-02T16:24:07+00:00">Jul 2, 2013 04:24 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1372782247">&nbsp;</a></div><pre>The XSede frontend to the OSG is intermittently unreachable via ssh, scp, or rsync.
This behavior is almost constant.

An ssh takes several seconds to connect and open a terminal session.
An ssh with any command, e.g. ssh donkri@.... pwd, hangs and never returns.
An rsync times out after a few seconds and returns an error message&#58;
ssh_exchange_identification&#58; connection closed by remote host
rsync&#58; connection unexpectedly closed (0 bytes received so far) [sender]
rsync error&#58; unexplained error (code 255) at io.c(600) [sender=3.0.5]

This problem has been ongoing for about 3.5 hours.

by Donald Krieger (guest)</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F15818">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 15818});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
