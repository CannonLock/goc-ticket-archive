<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[28133] Towards a recommendation on how to configure memory limits for batch jobs</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=28133" method="post">
<div class="page-header">
    <h3><span class="muted">28133</span> / Towards a recommendation on how to configure memory limits for batch jobs</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Maria Dimou-Zacharova</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">ATLAS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Maria Dimou-Zacharova</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Maria to update</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-01-22</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000649931">INC000000649931</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=118814">118814</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/28133", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/28133?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/28133?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Towards%20a%20recommendation%20on%20how%20to%20configure%20memory%20limits%20for%20batch%20jobs%20ISSUE%3D28133%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='28133#1454975979'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-08T23:59:39+00:00">Feb 8, 2016 11:59 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1454975979">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.

-- by GGUS SYSTEM at Mon Feb 08 23&#58;59&#58;10 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=118814' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=118814</a></pre></div><div class='update_description'><i onclick="document.location='28133#1453486868'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-22T18:21:08+00:00">Jan 22, 2016 06:21 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1453486868">&nbsp;</a></div><pre>Thanks, Lisa. I just wanted to be sure.

~Chris</pre></div><div class='update_description'><i onclick="document.location='28133#1453410920'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-21T21:15:20+00:00">Jan 21, 2016 09:15 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1453410920">&nbsp;</a></div><pre>Tony Tiradani provided a reply to this. It should be in the ticket.
Therefore the ticket can be closed.

lisa

On 1/21/16 2&#58;59 PM, helpdesk@.... wrote&#58;
<font color='#7F7E6F'>&#62; GGUS Ticket #118814 was updated.</font>
<font color='#7F7E6F'>&#62; You are asked for contributing to this ticket if possible.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; REFERENCE LINK&#58; <a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=118814' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=118814</a></font>
<font color='#7F7E6F'>&#62; SUBJECT&#58; Towards a recommendation on how to configure memory limits for batch jobs</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; =====================</font>
<font color='#7F7E6F'>&#62; LATEST MODIFICATIONS&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; LAST MODIFIER -&#62; Christopher Pipes (via Footprints)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; PUBLIC DIARY -&#62;</font>
<font color='#7F7E6F'>&#62; Hello All,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; What is the status of this ticket?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; Chris</font>
<font color='#7F7E6F'>&#62;   -- by Christopher Pipes at Thu Jan 21 20&#58;57&#58;57 UTC 2016</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>
<font color='#7F7E6F'>&#62;   This is an automated mail. When replying don&#39;t change the subject line!</font>
<font color='#7F7E6F'>&#62;   Type your text above this box and S T R I P  P R E V I O U S  M A I L S please!!</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>

-- by Lisa Giacchetti at Thu Jan 21 21&#58;15&#58;09 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=118814' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=118814</a></pre></div><div class='update_description'><i onclick="document.location='28133#1453409877'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-21T20:57:57+00:00">Jan 21, 2016 08:57 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1453409877">&nbsp;</a></div><pre>Hello All,

What is the status of this ticket?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='28133#1452953607'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-16T14:13:27+00:00">Jan 16, 2016 02:13 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1452953607">&nbsp;</a></div><pre>Hi Maria,

At the CMS Tier-1 at FNAL&#58;

a. what batch system you run

We run HTCondor

b. how you configure memory limits

We use HTCondor mechanisms.  Currently we do not use cgroups, but we are exploring that mechanism as well.

Thanks,

Anthony Tiradani

c. how you kill jobs that exceed these limits. If you do it by script are you willing to share it?

We rely on HTCondor to monitor job resource usage and kill them when the job exceeds the limits.

d. do you use cgroups

Not yet, but we are exploring them.

e. do you use containers

We do not use containers.

f. which VOs do you support.

The CMS Tier-1 is primarily a CMS cluster, but we do allow opportunistic usage by any OSG registered VO.</pre></div><div class='update_description'><i onclick="document.location='28133#1452943261'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-16T11:21:01+00:00">Jan 16, 2016 11:21 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1452943261">&nbsp;</a></div><pre>Dear Chris,

We need the FNAL site manager (I involve Lisa) to  answer the following questions&#58;

a. what batch system you run
b. how you configure memory limits
c. how you kill jobs that exceed these limits. If you do it by script are you willing to share it?
d. do you use cgroups
e. do you use containers
f. which VOs do you support.

You may see the relevant background in&#58;
<a href='https&#58;//twiki.cern.ch/twiki/bin/view/LCG/BatchSystemsConfig#Why_do_we_need_it_Background' target='_blank' rel='nofollow'>https&#58;//twiki.cern.ch/twiki/bin/view/LCG/BatchSystemsConfig#Why_do_we_need_it_Background</a> with links to the original MB minutes and actions.

Thanking you very much in advance

Maria (on behalf of the WLCG Ops Coord team)

-- by Maria Dimou-Zacharova at Sat Jan 16 11&#58;20&#58;15 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=118814' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=118814</a></pre></div><div class='update_description'><i onclick="document.location='28133#1452890322'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-15T20:38:42+00:00">Jan 15, 2016 08:38 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1452890322">&nbsp;</a></div><pre>I&#39;m not sure what the last update means. Do I need to do anything with this ticket on my end to send it elsewhere?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='28133#1452632541'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-12T21:02:21+00:00">Jan 12, 2016 09:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1452632541">&nbsp;</a></div><pre>Concerned VO has been changed from atlas to none.

-- by Maria Dimou-Zacharova at Tue Jan 12 16&#58;16&#58;52 UTC 2016

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=118814' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=118814</a></pre></div><div class='update_description'><i onclick="document.location='28133#1452607290'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-12T14:01:30+00:00">Jan 12, 2016 02:01 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1452607290">&nbsp;</a></div><pre>Dear colleagues - site managers of the WLCG T0 and T1s,

The WLCG Management Board (MB), asked Operations Coordination to devise a recommendation on how to configure memory limits for batch jobs. Your contribution is indispensable for us to draw any conclusion. Would you please be so kind to answer the following questions&#58;

a. what batch system you run
b. how you configure memory limits
c. how you kill jobs that exceed these limits. If you do it by script are you willing to share it?
d. do you use cgroups
e. do you use containers
f.  which VOs do you support.

You may see the relevant background in&#58;
<a href='https&#58;//twiki.cern.ch/twiki/bin/view/LCG/BatchSystemsConfig#Why_do_we_need_it_Background' target='_blank' rel='nofollow'>https&#58;//twiki.cern.ch/twiki/bin/view/LCG/BatchSystemsConfig#Why_do_we_need_it_Background</a> with links to the original MB minutes and actions.

Thanking you very much in advance

Maria (on behalf of the WLCG Ops Coord team)

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=118814' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=118814</a>

[Ticket History]
Subject&#58; Towards a recommendation on how to configure memory limits for batch jobs
Ticket Type&#58; USER
CC&#58;
-- by Maria Dimou-Zacharova at Tue Jan 12 14&#58;01&#58;05 UTC 2016</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F28133">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 28133});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
