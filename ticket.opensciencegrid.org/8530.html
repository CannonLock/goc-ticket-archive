<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[8530] BDII Issue</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=8530" method="post">
<div class="page-header">
    <h3><span class="muted">8530</span> / BDII Issue</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Jon Bakken</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">High</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-05-17</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Thomas Lee <span class="muted"> / OSG Operations Infrastructure</span></div><div class="assignee" style="width: 60%">GIP Support <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/8530", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/8530?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/8530?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20BDII%20Issue%20ISSUE%3D8530%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='8530#1274367158'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-20T14:52:38+00:00">May 20, 2010 02:52 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1274367158">&nbsp;</a></div><pre>Closing this ticket. The final step running NSCD in paranoid mode will be done with the next production release scheduled for May 25th. There is a JIRA ticket SYS-55 to enable this on May 25th.</pre></div><div class='update_description'><i onclick="document.location='8530#1274332809'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-20T05:20:09+00:00">May 20, 2010 05:20 AM UTC</time><a class="anchor" name="1274332809">&nbsp;</a></div><pre>[Updated CC List]
parag@....
fraser@....
roy@....
ruth@....
miron@....
jhover@....
xzhao@....
sthapa@....
rana@....</pre></div><div class='update_description'><i onclick="document.location='8530#1274191038'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-18T13:57:18+00:00">May 18, 2010 01:57 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1274191038">&nbsp;</a></div><pre>The is2.grid.iu.edu re-entry into production has gone smoothly. The only remaining issue here is the use of NSCD in paranoid mode. I will cover this in the Production call today and request we begin running this way starting with the next release cycle. I&#39;d like to do this in the late evening EDT to sure this daily NSCD restart happens outside of business hours in the US and at CERN.

The only issue of a restart is while the Deamon is restarting is2 will need to contact the DNS server for lookup. This should be fractions of a second for a few seconds while the service is stopped and restarted.</pre></div><div class='update_description'><i onclick="document.location='8530#1274100268'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-17T12:44:28+00:00">May 17, 2010 12:44 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1274100268">&nbsp;</a></div><pre>CEMon on is2.grid.iu.edu has been running smoothly since being brought up on Friday, as discussed on our call on Friday it will be brought back into round robin today. Right now this is scheduled for 2pm EDT. If anyone feels we should not bring this back online please reply to this ticket.</pre></div><div class='update_description'><i onclick="document.location='8530#1273872248'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-14T21:24:08+00:00">May 14, 2010 09:24 PM UTC</time> by <b>Parag Mhashilkar</b><a class="anchor" name="1273872248">&nbsp;</a></div><pre>Thanks for the logs. I have forwarded the logs to cemon developers. Logs
are available at <a href='http&#58;//home.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//home.fnal.gov/</a>~parag/tmp/cemon/

--
Thanks & Regards
=============================================================
Parag Mhashilkar
Fermi National Accelerator Laboratory, MS 120
Wilson & Kirk Road, Batavia, IL - 60510.

Location&#58; Wilson Hall, WH863
Phone&#58; +1 (630) 840-6530
Fax&#58; +1 (630) 840-2783
Email&#58; parag@....
=============================================================

On Fri, 2010-05-14 at 20&#58;21 +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8530#1273868467'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-14T20:21:07+00:00">May 14, 2010 08:21 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1273868467">&nbsp;</a></div><pre>You should also have the uscms t-1 logs as well.  I sent them both to
Parag and Arvind.  I can say that for sure, all but the one CE&#39;s for BNL
dropped out.  All the CE&#39;s for USCMS Tier-1 dropped out.

Anthony Tiradani

On 05/14/2010 03&#58;12 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8530#1273867927'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-14T20:12:07+00:00">May 14, 2010 08:12 PM UTC</time> by <b>Parag Mhashilkar</b><a class="anchor" name="1273867927">&nbsp;</a></div><pre>So far we have aglt2, mwt2, 5 bnl sites and fermigrid. Do we know for
sure which sites dropped from is1 as well?

A crude look at all the logs gives me an impression that all the sites
were attempting to send info to both is1 and is2 every 5 mins. I am
verifying that the attempts succeeded or failed but will take a little
while through go through the logs. I just want to make sure that we send
developers the logs from the sites that dropped from is1 as well.

--
Thanks & Regards
=============================================================
Parag Mhashilkar
Fermi National Accelerator Laboratory, MS 120
Wilson & Kirk Road, Batavia, IL - 60510.

Location&#58; Wilson Hall, WH863
Phone&#58; +1 (630) 840-6530
Fax&#58; +1 (630) 840-2783
Email&#58; parag@....
=============================================================

On Fri, 2010-05-14 at 18&#58;57 +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8530#1273863456'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-14T18:57:36+00:00">May 14, 2010 06:57 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1273863456">&nbsp;</a></div><pre>Sent CEMon server logs from AGLT2 and MWT2 to Parag via mail.</pre></div><div class='update_description'><i onclick="document.location='8530#1273858184'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-14T17:29:44+00:00">May 14, 2010 05:29 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1273858184">&nbsp;</a></div><pre>We will evaluate the weekend performance of the CEMon collector on Monday and return it to RR in the afternoon barring any findings that would lead us to think that is not the right course of action. Setting NAD on this ticket to Monday.</pre></div><div class='update_description'><i onclick="document.location='8530#1273857974'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-14T17:26:14+00:00">May 14, 2010 05:26 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273857974">&nbsp;</a></div><pre>PS&#58; The cron jobs run every 5 minutes.</pre></div><div class='update_description'><i onclick="document.location='8530#1273857917'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-14T17:25:17+00:00">May 14, 2010 05:25 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273857917">&nbsp;</a></div><pre>One more update&#58;

We have setup a cronjob that will alert the GOC (and text myself and Rob) if the number of production CEs found in the production BDII goes below 90% of nominally expected levels. In recent times, we have come to expect ~70 CEs on the OSG BDII, 49 on the WLCG-Interop BDII; we have set the thresholds for the foreseeable future to 63 and 43 respectively. This is setup against both is1 and is2. Therefore if the CEMon problem on is2 recurs, we will know; and if such a recurrence influences is1 negatively, we will know as well.

Additionally, in addition to what we already have had, and this test.. overthe next several weeks, we expect to develop a more refined, and perhaps more sophisticated set of internal monitoring scripts based out of this outage-experience.

-ag</pre></div><div class='update_description'><i onclick="document.location='8530#1273849808'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-14T15:10:08+00:00">May 14, 2010 03:10 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273849808">&nbsp;</a></div><pre>Update&#58;

- GOC has ensured NSCD&#39;s configuration is tweaked to hopefully avoid the bug that hit us
-- GOC has NOT configured NSCD in paranoid mode - management is aware of the risk in not doing this; We will discuss further on Tuesday, May 18th before moving on this item.
- GOC has restarted CEMon collector (and the BDII too for what it is worth) after that
-- GOC has NOT installed updated version of collector - management is aware of the risk in not doing this; We will discuss further on Tuesday, May 18th before moving on this item possibly on production update date May 25th or later.

-- GOC will monitor for number of CEs uploading to is2 (and is1) on an hourly basis. Expected number &#62; 75
-- We are waiting for the CEs to catch up.

-ag</pre></div><div class='update_description'><i onclick="document.location='8530#1273779877'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-13T19:44:37+00:00">May 13, 2010 07:44 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273779877">&nbsp;</a></div><pre>Revised Plan (following concall between Rob, Arvind, Dan, Tony, Parag)&#58;

1) On Friday, May 14th 2010
- GOC will ensure NSCD&#39;s configuration is tweaked to hopefully avoid the bug that hit us
-- GOC will NOT configure NSCD in paranoid mode - management is aware of the risk in not doing this; We will discuss further on Tuesday, May 18th before moving on this item.
- GOC will restart CEMon collector after that
-- GOC will NOT install updated version of collector - management is aware of the risk in not doing this; We will discuss further on Tuesday, May 18th before moving on this item possibly on production update date May 25th or later.
-- GOC will monitor for number of CEs uploading to is2 (and is1) on an hourly basis. Expected number &#62; 75

2) On Monday, May 17th at 10 AM, if is2 looks healthy and ready to be added to RR, then&#58;
- GOC will add is2 back into DNS RR for is.grid.iu.edu</pre></div><div class='update_description'><i onclick="document.location='8530#1273779727'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-13T19:42:07+00:00">May 13, 2010 07:42 PM UTC</time> by <b>Parag Mhashilkar</b><a class="anchor" name="1273779727">&nbsp;</a></div><pre>Rob, Arvind,

You can find CEmon logs at
$VDT_LOCATION/glite/var/log/glite-ce-monitor.log*

--
Thanks & Regards
=============================================================
Parag Mhashilkar
Fermi National Accelerator Laboratory, MS 120
Wilson & Kirk Road, Batavia, IL - 60510.

Location&#58; Wilson Hall, WH863
Phone&#58; +1 (630) 840-6530
Fax&#58; +1 (630) 840-2783
Email&#58; parag@....
=============================================================

On Thu, 2010-05-13 at 19&#58;00 +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8530#1273777208'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-13T19:00:08+00:00">May 13, 2010 07:00 PM UTC</time> by <b>Ruth Pordes</b><a class="anchor" name="1273777208">&nbsp;</a></div><pre>I agree and support Dan&#39;s statement below.

Changes in our operations services are frozen til we have had a chance
to review them properly at the semi-weekly Tuesday meetings. We will
need to know how the new version of the collector has been tested on the
ITB etc before allowing an upgrade.

In addition to putting IS2 back on line on Monday we would like to be
assured that monitoring is in place to alert the GOC if a similar hang
or crash occurs after Monday.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8530#1273776735'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-13T18:52:15+00:00">May 13, 2010 06:52 PM UTC</time><a class="anchor" name="1273776735">&nbsp;</a></div><pre>I am uncomfortable putting up the new collector until we understand what some of the problems are with the existing one and what the new one has to offer. This can introduce new problems that we don&#39;t want to add to the mix right now. For the same reason we don&#39;t want to run NSCD in suicide mode. We don&#39;t have any experience with this (as discussed on the call). The only change I&#39;m willing to make at this point is to bring IS2 back online (in RR on Monday) with the NCSD patch.

Dan
-- by Dan Fraser</pre></div><div class='update_description'><i onclick="document.location='8530#1273761680'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-13T14:41:20+00:00">May 13, 2010 02:41 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273761680">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Early plans are to bring the CEMon collector back online tomorrow and watch it&#39;s behavior and see if there is any affect on is1. We&#39;ll then let it run over the weekend and watch for any issues,</font>
<font color='#7F7E6F'>&#62; if we don&#39;t see anything we will introduce it back into RR on Monday.</font>

I&#39;ll just add that we have tested the new CEMon collector on one of the ITB servers, and are in the process of updating our install script so it can install the new collector. This coupled with the production quality testing on is2 Friday through Monday should ensure the new CEMon collector works reliably.

Additionally, we will likely take is1 offline from DNS RR at some point, say a week after re-insertion of is2 into DNS RR to update the CEMon collector on it as well.

Cheers,
-ag</pre></div><div class='update_description'><i onclick="document.location='8530#1273760993'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-13T14:29:53+00:00">May 13, 2010 02:29 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1273760993">&nbsp;</a></div><pre>Tom spent some time looking at the machine and we see no issues beyond the NSCD issues reported. We have fixed one reported bug, and will set the paranoid mode so NSCD restarts on a daily basis. We&#39;d also like to upgrade to the latest CEMon Collector code, though we don&#39;t think it&#39;s part of the issue, there are some unrelated updates that will be good to implement while we have the machine offline.

Early plans are to bring the CEMon collector back online tomorrow and watch it&#39;s behavior and see if there is any affect on is1. We&#39;ll then let it run over the weekend and watch for any issues, if we don&#39;t see anything we will introduce it back into RR on Monday. I will call Dan, Burt and John today to discuss this plan.</pre></div><div class='update_description'><i onclick="document.location='8530#1273692610'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-12T19:30:10+00:00">May 12, 2010 07:30 PM UTC</time> by <b>Parag Mhashilkar</b><a class="anchor" name="1273692610">&nbsp;</a></div><pre>I have initiated an email with the CEMon developers regarding why the
server did not continue to retry connecting to is2 every 300 sec. Do we
have logs from the sites that exhibited the behavior during the outage
time frame? Ideally, I would like to have logs from sites that were
running both versions of cemon, but need logs atleast from the site with
new cemonserver. Does GOC have this log or can help in getting these
logs?

--
Thanks & Regards
=============================================================
Parag Mhashilkar
Fermi National Accelerator Laboratory, MS 120
Wilson & Kirk Road, Batavia, IL - 60510.

Location&#58; Wilson Hall, WH863
Phone&#58; +1 (630) 840-6530
Fax&#58; +1 (630) 840-2783
Email&#58; parag@....
=============================================================

On Mon, 2010-05-10 at 15&#58;06 +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8530#1273503969'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-10T15:06:09+00:00">May 10, 2010 03:06 PM UTC</time> by <b>Parag Mhashilkar</b><a class="anchor" name="1273503969">&nbsp;</a></div><pre>Hi Arvind,

I am little confused from the list you gave. From &#34;a list of CEs that
sent data to is1 all day&#34; do you mean that these sites also reported to
is1 during the outage period? If so, when I compare the files, it looks
like only 6 sites were affected. That doesn&#39;t seem to make sense to me.
Am I missing something?

[parag@cd-109337 ress]$ wc -l *txt
98 is1-ce-fqdns-after-outage.txt
98 is1-ce-fqdns-all-day.txt
92 is2-ce-fqdns-before-outage.txt
288 total
[parag@cd-109337 ress]$ diff is1-ce-fqdns-all-day.txt
is1-ce-fqdns-after-outage.txt
[parag@cd-109337 ress]$ diff is1-ce-fqdns-all-day.txt
is2-ce-fqdns-before-outage.txt
4a5
<font color='#7F7E6F'>&#62; athena.rit.albany.edu</font>
13d13
&#60; cluster04.syr.edu
31d30
&#60; fg1x4.fnal.gov
33d31
&#60; gaia.physics.mcgill.ca
37a36
<font color='#7F7E6F'>&#62; gk.phys.sinica.edu.tw</font>
40d38
&#60; gpnstor.rnet.missouri.edu
58d55
&#60; magic.cse.buffalo.edu
60d56
&#60; nocmon.grnoc.iu.edu
90d85
&#60; tp-grid3.ci.uchicago.edu
<div id='show_1193623747' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1193623747'>98d92
&#60; vt-028.grid.sinica.edu.tw
[parag@cd-109337 ress]$

--
Thanks & Regards
=============================================================
Parag Mhashilkar
Fermi National Accelerator Laboratory, MS 120
Wilson & Kirk Road, Batavia, IL - 60510.

Location&#58; Wilson Hall, WH863
Phone&#58; +1 (630) 840-6530
Fax&#58; +1 (630) 840-2783
Email&#58; parag@....
=============================================================

On Fri, 2010-05-07 at 22&#58;11 +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1193623747').click(function() {
            $('#detail_1193623747').slideDown("normal");
            $('#show_1193623747').hide();
            $('#hide_1193623747').show();
        });
        $('#hide_1193623747').click(function() {
            $('#detail_1193623747').slideUp();
            $('#hide_1193623747').hide();
            $('#show_1193623747').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8530#1273270263'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-07T22:11:03+00:00">May 7, 2010 10:11 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1273270263">&nbsp;</a></div><pre>Tony,

The list of sites reporting 1.2.9 to RSV yesterday is below there are 8. Here it is for your review.

For later reference here are the OSG resources currently running 1.2.9

BNL_ATLAS_4
Clemson-Palmetto
GridUNESP_CENTRAL
IllinoisHEP
IU_OSG
OSG_INTALL_TEST2
TTU_ANTAEUS
UConn-OSG-CE

Rob</pre></div><div class='update_description'><i onclick="document.location='8530#1273269966'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-07T22:06:06+00:00">May 7, 2010 10:06 PM UTC</time> by <b>Parag Mhashilkar</b><a class="anchor" name="1273269966">&nbsp;</a></div><pre>If the sites were configured correctly, a much easier way to find out
would be

condor_status -pool osg-ress-1.fnal.gov -format &#34;Host=%s &#34;
GlueCEInfoHostname -format &#34;Version=%s&#92;n&#34;
GlueHostApplicationSoftwareRunTimeEnvironment | grep -i OSG |sort| uniq

But only if they were configured correctly &#58;(

--
Thanks & Regards
=============================================================
Parag Mhashilkar
Fermi National Accelerator Laboratory, MS 120
Wilson & Kirk Road, Batavia, IL - 60510.

Location&#58; Wilson Hall, WH863
Phone&#58; +1 (630) 840-6530
Fax&#58; +1 (630) 840-2783
Email&#58; parag@....
=============================================================

On Fri, 2010-05-07 at 21&#58;36 +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8530#1273268167'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-07T21:36:07+00:00">May 7, 2010 09:36 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1273268167">&nbsp;</a></div><pre>How many sites are at 1.2.9?

Preliminary results for the sites that continued to report throughout
and are at OSG 1.2.9 are&#58;

antaeus.hpcc.ttu.edu&#58;OSG 1.2.9
ce.grid.unesp.br&#58;OSG 1.2.9
gluskap.phys.uconn.edu&#58;OSG 1.2.9
gridgk04.racf.bnl.gov&#58;OSG 1.2.9
osgx0.hep.uiuc.edu&#58;OSG 1.2.9

There are quite a few sites that don&#39;t support the ops VO so neither my
cms proxy, nor my ops proxy will work in those cases.

Anthony Tiradani

On 05/07/2010 03&#58;46 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8530#1273267987'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-07T21:33:07+00:00">May 7, 2010 09:33 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1273267987">&nbsp;</a></div><pre>Hey Arvind,

So, from the looks of it,
1) There were some pre-existing differences between the two collectors.  At least one I recognize as being an *old* site (before the birth of is2 maybe?), it&#39;s possible some of this not an issue.  This is separate from this incident.
2) There are no sites permanently affected.  I.e., all sites in the &#34;after outage&#34; list are in the &#34;all day&#34; list.  Does this mean that *no* CEs dropped out during the IS2 downtime?
3) There is a &#34;paranoid&#34; mode for nscd which will cause it to automatically restart every X minutes.  Was this/should this be enabled on is2?  Purdue has chased down NSCD issues a lot, maybe someone could ask Preston for advice?  Is it not possible to run this service without relying on nscd?

Am I on the right track?

Brian

On May 7, 2010, at 3&#58;46 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8530#1273265186'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-07T20:46:26+00:00">May 7, 2010 08:46 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1273265186">&nbsp;</a></div><pre>Some more log review links included in this entry.

1) a list of CEs that sent data to is1 all day
--&#62; <a href='https&#58;//dev.grid.iu.edu/' target='_blank' rel='nofollow'>https&#58;//dev.grid.iu.edu/</a>~agopu/tmp/is1-ce-fqdns-all-day.txt

2) a list of CEs that sent data to is2 before 2010-05-04 20&#58;20 till 2010-05-05 00&#58;50
--&#62; <a href='https&#58;//dev.grid.iu.edu/' target='_blank' rel='nofollow'>https&#58;//dev.grid.iu.edu/</a>~agopu/tmp/is2-ce-fqdns-before-outage.txt

3) a list of CEs that sent data to is1 after 2010-05-04 20&#58;20 till 2010-05-05 00&#58;50
--&#62; <a href='https&#58;//dev.grid.iu.edu/' target='_blank' rel='nofollow'>https&#58;//dev.grid.iu.edu/</a>~agopu/tmp/is1-ce-fqdns-after-outage.txt</pre></div><div class='update_description'><i onclick="document.location='8530#1273178380'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-06T20:39:40+00:00">May 6, 2010 08:39 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273178380">&nbsp;</a></div><pre>Adding Tom Lee to the ticket.

We had a follow up concall involving Rob Quick, Arvind, Tony, Tom Lee, Alain, Burt, and Dan at 15&#58;30 Eastern today.

Summary&#58;

The GOC found out that contrary to what was announced yesterday (that some OSG CEs continued to send data to is2 during the problem timeframe), there were NO CEs that were reporting data to is2 after May 5th 2010 20&#58;20 UTC. At this time some of the CEs also stopped sending data to is1.

The GOC found a problem with the NCSD dameon taking up a lot of CPU time (1/4th of the system for several hours). Tom found two known bugs one of which was not applicable to our server, and another that could have been. He deployed a patch to the NSCD config on is2, and restarted it, and he has not seen a recurrence of the NCSD problem since then. Ge will keep an eye on it.

It is now suspected that indeed the older CEMon clients with identical frequency for is1/2 uploads were the ones impacted. This is not 100% confirmed as of yet.

TODO&#58;
1) Arvind will parse the is1/2 logs to come up with a differential list of CEs that continued to send to is1 after the is2 problem cropped up. He will also send out CEMon logs from is1 and is2 to Burt et al - see here <a href='https&#58;//dev.grid.iu.edu/' target='_blank' rel='nofollow'>https&#58;//dev.grid.iu.edu/</a>~agopu/tmp/2010-05-05-is1_cemon-consumer.out.gz and <a href='https&#58;//dev.grid.iu.edu/' target='_blank' rel='nofollow'>https&#58;//dev.grid.iu.edu/</a>~agopu/tmp/2010-05-05-is2_cemon-consumer.out.gz

2) Based on list produced from parsing the CEMon logs, if tuning site level CEMon client configurations to send data at different frequencies and/or sites upgrading to OSG 1.2.9 is proven useful, Burt may ask CMS admins to do one of those steps. This will likely ensure any further issues with is2 won&#39;t affect uploads to is1 in the future.
-- If CMS does the above step then Rob et al. / GOC will announce to ATLAS and the rest of the OSG recommended fixes, etc. and work on timeline to bring is2 back in the fray.

3) GOC will pull is2 from DNS RR on Monday, May 10th at 10 AM Eastern; then on Tuesday 11 AM Eastern (after giving more than 24 hours for DNS change to have the best chance to propagate everywhere, GOC will start investigating into whether any other Operating System issues and/or hardware issues remain on is2.

Please chime in if I misspoke.

Cheers,
-ag</pre></div><div class='update_description'><i onclick="document.location='8530#1273086550'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T19:09:10+00:00">May 5, 2010 07:09 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1273086550">&nbsp;</a></div><pre>For later reference here are the OSG resources currently running 1.2.9

BNL_ATLAS_4
Clemson-Palmetto
GridUNESP_CENTRAL
IllinoisHEP
IU_OSG
OSG_INTALL_TEST2
TTU_ANTAEUS
UConn-OSG-CE</pre></div><div class='update_description'><i onclick="document.location='8530#1273081327'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T17:42:07+00:00">May 5, 2010 05:42 PM UTC</time> by <b>Alain Roy</b><a class="anchor" name="1273081327">&nbsp;</a></div><pre>On May 5, 2010, at 11&#58;54 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; USCMS-FNAL-XEN (cms-xen19.fnal.gov) did *not* drop out.  It is running</font>
<font color='#7F7E6F'>&#62; OSG 1.2.0  Not sure what CEMon version this corresponds to.</font>

It was CEmon Server 1.10.1.0.

For reference, the latest version we have in the VDT has CEMon Server 1.12.1-14.

-alain</pre></div><div class='update_description'><i onclick="document.location='8530#1273081146'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T17:39:06+00:00">May 5, 2010 05:39 PM UTC</time> by <b>VDT</b><a class="anchor" name="1273081146">&nbsp;</a></div><pre>On May 5, 2010, at 11&#58;24 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; Parag,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The version of CEMon collector running at the GOC is&#58;</font>
<font color='#7F7E6F'>&#62; glite-ce-monitor-client-api-c-1.9.3-0.slc4.i386.rpm</font>

The latest certified version in gLite 3.1 appears to be 1.11.1-3. I don&#39;t know if it&#39;s a good idea to upgrade or not, but it would be a good discussion to have with the CEMon developers.

I found CEMon release notes at &#60;<a href='http&#58;//grid.pd.infn.it/cemon/field.php?n=Main.ReleaseNotes&#62' target='_blank' rel='nofollow'>http&#58;//grid.pd.infn.it/cemon/field.php?n=Main.ReleaseNotes&#62</a>;. It will take a little while to go through them because you have to check individual bugs instead of just reading the release notes.

-alain</pre></div><div class='update_description'><i onclick="document.location='8530#1273078446'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T16:54:06+00:00">May 5, 2010 04:54 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1273078446">&nbsp;</a></div><pre>Another data point&#58;

USCMS-FNAL-XEN (cms-xen19.fnal.gov) did *not* drop out.  It is running
OSG 1.2.0  Not sure what CEMon version this corresponds to.

--
Anthony Tiradani</pre></div><div class='update_description'><i onclick="document.location='8530#1273078343'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T16:52:23+00:00">May 5, 2010 04:52 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1273078343">&nbsp;</a></div><pre>I&#39;ve scheduled a follow up meeting for&#58;

Date/Time&#58;  May 06, 2010 at 03&#58;30 PM America/New_York
Length&#58;     60  (minutes)
Meeting ID&#58; 1379
Phone Number&#58; 510-665-5437</pre></div><div class='update_description'><i onclick="document.location='8530#1273078014'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T16:46:54+00:00">May 5, 2010 04:46 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273078014">&nbsp;</a></div><pre>Action items from concall between Rob, Dan, Tony, Parag, Alain, Jamie, John Hover, Xin, Suchandra, and Arvind.

1) Tony will point one of his CMS T1 RGs to is-itb[1,2] so we can check if the problem recurs on the ITB server? [the ITB servers is running the same version of CEMon collector as the production ones]
- If this produces a reproduction of the problem then we will proceed to figure out a solution without step 2

2) [contingent on step 1] Tony will discuss with CMS the possibility of GOC turning the is2 CEMon collector back ON ...

- Risk with this step&#58; if the problem recurs then 30-35 OSG CEs drop off the BDII for a few minutes

- Risk with not restarting is2&#39;s CEMon collector&#58; if is1 crashes, then the entire OSG BDII, and therefore the data for OSG RGs on WLCG BDIIs will becoming completely non-functional.

Cheers,
-ag

PS&#58; Added John, Xin, Suchandra to ticket.</pre></div><div class='update_description'><i onclick="document.location='8530#1273076666'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T16:24:26+00:00">May 5, 2010 04:24 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273076666">&nbsp;</a></div><pre>Parag,

The version of CEMon collector running at the GOC is&#58;
glite-ce-monitor-client-api-c-1.9.3-0.slc4.i386.rpm

Cheers,
-ag</pre></div><div class='update_description'><i onclick="document.location='8530#1273075243'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T16:00:43+00:00">May 5, 2010 04:00 PM UTC</time><a class="anchor" name="1273075243">&nbsp;</a></div><pre>[Updated CC List]
parag@....
fraser@....
roy@....
ruth@....
miron@....
roy@....</pre></div><div class='update_description'><i onclick="document.location='8530#1273072146'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T15:09:06+00:00">May 5, 2010 03:09 PM UTC</time> by <b>Parag Mhashilkar</b><a class="anchor" name="1273072146">&nbsp;</a></div><pre>I agree with Steve. In most cases Ress will not see the problem if CEMon
client stops reporting to BDII collector because of issues with one of
the BDII collector.

Here is the detailed explanation for why -
Older CEmon client works on all the subscriptions with same advertise
interval in one thread. Subscriptions for both BDII servers have same
advertise interval of 300 sec (I think) so if cemon client chokes on
one, it may fail to get out of the loop and get stuck for ever.

This was fixed in new CEMon by adding new config parameter to cemon
which lets cemon to treat subscriptions with same time interval under
different threads. So even if one blocks, other continues happily.

Ress subscription has a different advertise interval so always runs in a
different thread than those for BDII.

Sites with latest version of OSG that has newer cemon shouldn&#39;t be
affected by this since new OSG stack is supposed to have this fix. Can
someone with access to this data please confirm this?

--
Thanks & Regards
=============================================================
Parag Mhashilkar
Fermi National Accelerator Laboratory, MS 120
Wilson & Kirk Road, Batavia, IL - 60510.

Location&#58; Wilson Hall, WH863
Phone&#58; +1 (630) 840-6530
Fax&#58; +1 (630) 840-2783
Email&#58; parag@....
=============================================================

On Wed, 2010-05-05 at 14&#58;30 +0000, Open Science Grid FootPrints wrote&#58;
<div id='show_423785510' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_423785510'><font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_423785510').click(function() {
            $('#detail_423785510').slideDown("normal");
            $('#show_423785510').hide();
            $('#hide_423785510').show();
        });
        $('#hide_423785510').click(function() {
            $('#detail_423785510').slideUp();
            $('#hide_423785510').hide();
            $('#show_423785510').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8530#1273071787'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T15:03:07+00:00">May 5, 2010 03:03 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1273071787">&nbsp;</a></div><pre>Just a recap from watching CEMon client logs last night.

Once the symptoms were noticed, I started tailing the client logs.  The
logs clearly showed the client contacting and reporting to ReSS.
However, at no point would the client talk to the BDII Collectors.
Restarting CEMon (Tomcat) had no effect on reporting to the BDII
collectors.  I restarted the client several times using the following
procedure&#58;

vdt-control --off tomcat-55
ps -ef | grep java  # Note this was to make sure tomcat was not running,
we don&#39;t run GRAM-WS so once tomcat stops, there
should be no java processes on the CE
# wait 1 - 2 minutes *just in case*
# also on one of our CE&#39;s I turned down the subscription time to 2
minutes so we could see any change quicker
vdt-control --on tomcat-55

The first time that the partial outage was noticed, Arvind had to
restart both collectors to bring everyone back.  There was no action
required on the part of the admins.  All missing CE&#39;s began to report
within minutes.  However, shortly afterwards, the outage repeated
itself.  It looked like the same set of CE&#39;s were impacted.  Although I
didn&#39;t list which ones were missing, I did notice that BNL, FermiGrid,
and USCMS-FNAL were impacted.

Arvind was able to bring some stability to the situation by &#34;keeping
CEMon on on is1, while turning it off on is2; the data will still be
synced. We will see if that works.&#34;

Interesting data points&#58;

1) it appears that is2 has the ability to &#34;turn off&#34; the clients
1a) however we did not test to see if turning off is1 and leaving
is2 on would have similar effects
<div id='show_82034201' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_82034201'>
2) with no admin intervention on the client side the clients resumed
reporting once is2 was shutdown.
2a) This is different from the previous outage where the
administrators had to restart tomcat
2b) Restarting tomcat had no effect on resuming reporting

--
Anthony Tiradani
</div><script type='text/javascript'>
        $('#show_82034201').click(function() {
            $('#detail_82034201').slideDown("normal");
            $('#show_82034201').hide();
            $('#hide_82034201').show();
        });
        $('#hide_82034201').click(function() {
            $('#detail_82034201').slideUp();
            $('#hide_82034201').hide();
            $('#show_82034201').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8530#1273071492'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T14:58:12+00:00">May 5, 2010 02:58 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273071492">&nbsp;</a></div><pre>Added Alain, Ruth, Miron to the ticket.

Thanks Parag for your quick response, and the clarification on the CEMon client versions.

One thing that is not clear however is why some of the clients (possibly older) went belly up *this time*. We are not aware of any issues with the is2 collector this time whereas back in December the is2 server did go into an inexplicable tail spin. Yesterday the is2 server seems to have been ok (with slight load spikes, etc. but nothing out of the ordinary for a powerful server). Perhaps there was an ephemeral issue with it that we are not aware off. Does this make sense.

Cheers,
-ag</pre></div><div class='update_description'><i onclick="document.location='8530#1273070886'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T14:48:06+00:00">May 5, 2010 02:48 PM UTC</time> by <b>Parag Mhashilkar</b><a class="anchor" name="1273070886">&nbsp;</a></div><pre>I believe this issue was identified in previous version of CEMon when
one of the BDII servers went belly up close to the year end. As a result
I worked with the cemon team to provide a fix. New cemon client was
released in osg 1.2.9 on April 22. Given that it has been just 13 days,
I wouldn&#39;t be surprised that the sites were still running old cemon.

For reference, old ticket is
<a href='7913.html' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=7913</a>

Let me know if you have any questions.

--
Thanks & Regards
=============================================================
Parag Mhashilkar
Fermi National Accelerator Laboratory, MS 120
Wilson & Kirk Road, Batavia, IL - 60510.

Location&#58; Wilson Hall, WH863
Phone&#58; +1 (630) 840-6530
Fax&#58; +1 (630) 840-2783
Email&#58; parag@....
=============================================================

On Wed, 2010-05-05 at 12&#58;31 +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8530#1273069806'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T14:30:06+00:00">May 5, 2010 02:30 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1273069806">&nbsp;</a></div><pre>As far as I can tell from the ReSS monitoring, ReSS was not impacted,
we continue to see classads coming from the machines as usual.

Steve Timm

On Wed, 5 May 2010, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8530#1273068552'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T14:09:12+00:00">May 5, 2010 02:09 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273068552">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I note that this is assigned to the GIP support center; I&#39;m not sure that&#39;s</font>
<font color='#7F7E6F'>&#62; the correct support center.</font>
<font color='#7F7E6F'>&#62;</font>

Brian,

I wanted to get all the experts in on the ticket. So I added GIP-support,
and CCed Parag. I was 100% last night on how I could send the ticket to
CEMon support (ReSS-Ops? ReSS Development?). I will be happy to CC
gip-support if that&#39;s less confusing than being assigned.

-ag</pre></div><div class='update_description'><i onclick="document.location='8530#1273068548'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T14:09:08+00:00">May 5, 2010 02:09 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1273068548">&nbsp;</a></div><pre>Hey Rob,

I will be unable to attend due to the fact I&#39;m at a conference today.

However, this sounds like an issue similar to the last CEMon issue.  Is there a correlation between OSG version and the sites affected?  We have made a change to the CEMon configuration in the what, last 6 months? Tony/Burt/Jon - can you comment whether you upgraded where we changed the CEMon subscription (and the CEMon subscription took effect)?

Do we have a list of affected CEs that we can put on the ticketing system?

I note that this is assigned to the GIP support center; I&#39;m not sure that&#39;s the correct support center.

Brian

(PS&#58; This message originally sent outside ticketing system via email)</pre></div><div class='update_description'><i onclick="document.location='8530#1273068546'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T14:09:06+00:00">May 5, 2010 02:09 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273068546">&nbsp;</a></div><pre>All,

Just so I understand clearly, this problem impacted ReSS too i.e some CEs
stopped sending to ReSS at the same time as well?

I ask because the CEMon collector has no Condor connections but I did not
realize this problem was not specific to our CEMon/BDII server. Or was it?

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Wed, May 5, 2010 at 9&#58;59 AM, Miron Livny &#60;miron@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Jaime,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Can you join? If not, Alain, please try to locate another Condor person</font>
<font color='#7F7E6F'>&#62;&#62; who understands the collector (Dan?) who can join.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Miron</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Robert Quick wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Everyone,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; I&#39;d like to get on the phone this ASAP and have a</font>
<font color='#7F7E6F'>&#62;&#62;&#62; troubleshooting/brainstorming session about the CEMon/BDII issues</font>
<font color='#7F7E6F'>&#62;&#62;&#62; experienced on some resources last night. Let&#39;s shoot for Noon EDT/11AM CDT</font>
<font color='#7F7E6F'>&#62;&#62;&#62; at&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 510-665-5437 x1379</font>
<div id='show_1601861219' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1601861219'><font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Rob</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_1601861219').click(function() {
            $('#detail_1601861219').slideDown("normal");
            $('#show_1601861219').hide();
            $('#hide_1601861219').show();
        });
        $('#hide_1601861219').click(function() {
            $('#detail_1601861219').slideUp();
            $('#hide_1601861219').hide();
            $('#show_1601861219').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8530#1273068366'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T14:06:06+00:00">May 5, 2010 02:06 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273068366">&nbsp;</a></div><pre>Adding GOC Ticketing system to this thread so email updates are caught on
the ticket. --ag

Dan, no we do not have a list of CEs that dropped off the map though it was
around 30-35 of them including the BNL and USCMS ones. Perhaps we could turn
on the CEMon collector on is2, and see if the problem recurs? If it does, I
can gather a list of CEs that drop off. [There is also the possibility of
going through the logs, and figuring out which CEs stopped reporting but
it&#39;s not an easy task, and I&#39;d rather avoid it if I can]

On Wed, May 5, 2010 at 9&#58;53 AM, Fraser, Daniel M. &#60;fraser@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Do we have a list of the CEMons that stopped reporting? Wondering if there</font>
<font color='#7F7E6F'>&#62; is a common thread between them.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Dan</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On May 5, 2010, at 7&#58;30 AM, Arvind Gopu wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Hi Dan,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; We looked at the  CEMon collector logs last night; the ones that stopped</font>
<font color='#7F7E6F'>&#62; reporting did not even make contact since the last time they successfully</font>
<font color='#7F7E6F'>&#62; uploaded data. It looked like the client was getting stuck in some infinite</font>
<font color='#7F7E6F'>&#62; wait mode with its connection to one collector, thereby preventing it from</font>
<font color='#7F7E6F'>&#62; reporting to either collector. In any case, we have been discussing the</font>
<font color='#7F7E6F'>&#62; issue on the ticket, and we will work further with the experts on the</font>
<font color='#7F7E6F'>&#62; ticket, and report back to you and management.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Meanwhile, anyone on this email thread who is interested or thinks they can</font>
<font color='#7F7E6F'>&#62; help with the issue should feel free to add themselves to the ticket&#39;s CC</font>
<font color='#7F7E6F'>&#62; list&#58; <a href='8530.html' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=8530</a>  ... I see Dan has</font>
<font color='#7F7E6F'>&#62; already added himself to the ticket. GIP support (Tony, Brian, Burt et al.)</font>
<font color='#7F7E6F'>&#62; and Parag are also already on the ticket, as are Rob and myself.</font>
<font color='#7F7E6F'>&#62;</font>
<div id='show_1223739894' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1223739894'><font color='#7F7E6F'>&#62; Cheers,</font>
<font color='#7F7E6F'>&#62; -ag</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Wed, May 5, 2010 at 7&#58;56 AM, Fraser, Daniel M. &#60;fraser@....&#60;mailto&#58;</font>
<font color='#7F7E6F'>&#62; fraser@....&#62;&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; Hi Rob, Everyone,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;m starting a medium sized email list to bring in some outside expertise</font>
<font color='#7F7E6F'>&#62; on this problem, especially since as you noted, there have not been any</font>
<font color='#7F7E6F'>&#62; recent changes to the BDII related code on the GOC side for several months.</font>
<font color='#7F7E6F'>&#62; (feel free to add others to this list who may be able to contribute). One of</font>
<font color='#7F7E6F'>&#62; the things Miron suggested that GOC can try right away is to set up a</font>
<font color='#7F7E6F'>&#62; machine to &#34;status&#34; the collectors and see if anything is happening on the</font>
<font color='#7F7E6F'>&#62; collector side. Are the collectors not getting the information or are they</font>
<font color='#7F7E6F'>&#62; dropping it once they get it?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Rob, since not all the sites were affected, as you mentioned, this may be</font>
<font color='#7F7E6F'>&#62; related to the sites running the latest version of the VDT as Fermi is. (I</font>
<font color='#7F7E6F'>&#62; know FermiGrid recently had problems with ReSS due to an upgrade of Condor</font>
<font color='#7F7E6F'>&#62; 7.2.3 to 7.4.1, although this was due to a problem with the way ReSS handles</font>
<font color='#7F7E6F'>&#62; error messages from Condor). Wondering out loud if the affected sites are</font>
<font color='#7F7E6F'>&#62; all running Condor 7.4.1.  Rob, any other ideas as to what the affected</font>
<font color='#7F7E6F'>&#62; sites may have in common?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Alain, are there any recent changes to the VDT that come to mind that could</font>
<font color='#7F7E6F'>&#62; be a contributing factor here?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;       Dan</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On May 4, 2010, at 8&#58;18 PM, Grid Operations Center wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#62; OSG Operations was made aware of an issue of some CEMon clients on</font>
<font color='#7F7E6F'>&#62; production CEs not reporting to the OSG CEMon collector; consequently, those</font>
<font color='#7F7E6F'>&#62; CEs did not show up on the BDII.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; GOC staff and USCMS admins have started troubleshooting this issue, and</font>
<font color='#7F7E6F'>&#62; have found a temporary work around by removing one of the two CEMon</font>
<font color='#7F7E6F'>&#62; collectors (on is2) from activity. The raw LDIF data is still being rsynced</font>
<font color='#7F7E6F'>&#62; between the two servers. At this point all information is available in the</font>
<font color='#7F7E6F'>&#62; OSG BDII and being sent properly to the WLCG. Investigations of the cause</font>
<font color='#7F7E6F'>&#62; and work toward a fix will continue when business hours resume tomorrow.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Please see ticket 8530 at&#58;</font>
<font color='#7F7E6F'>&#62; &#62; <a href='8530.html' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=8530</a></font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Please submit problems, requests, and questions at&#58;</font>
<font color='#7F7E6F'>&#62; &#62; <a href='https&#58;//ticket.grid.iu.edu/goc' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc</a></font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thank You,</font>
<font color='#7F7E6F'>&#62; &#62; OSG Grid Operations Center (GOC)</font>
<font color='#7F7E6F'>&#62; &#62; Email/Phone&#58; goc@....&#60;mailto&#58;goc@....&#62;,</font>
<font color='#7F7E6F'>&#62; 317-278-9699</font>
<font color='#7F7E6F'>&#62; &#62; GOC Homepage&#58; <a href='http&#58;//www.opensciencegrid.org/ops' target='_blank' rel='nofollow'>http&#58;//www.opensciencegrid.org/ops</a></font>
<font color='#7F7E6F'>&#62; &#62; RSS Feed&#58; <a href='http&#58;//osggoc.blogspot.com&#60' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com&#60</a>;<a href='http&#58;//osggoc.blogspot.com/&#62' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/&#62</a>;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_1223739894').click(function() {
            $('#detail_1223739894').slideDown("normal");
            $('#show_1223739894').hide();
            $('#hide_1223739894').show();
        });
        $('#hide_1223739894').click(function() {
            $('#detail_1223739894').slideUp();
            $('#hide_1223739894').hide();
            $('#show_1223739894').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8530#1273068188'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T14:03:08+00:00">May 5, 2010 02:03 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273068188">&nbsp;</a></div><pre>Adding GOC Ticketing system to this thread so email updates are caught on
the ticket. --ag

On Wed, May 5, 2010 at 9&#58;57 AM, Robert Quick &#60;rquick@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Everyone,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;d like to get on the phone this ASAP and have a</font>
<font color='#7F7E6F'>&#62; troubleshooting/brainstorming session about the CEMon/BDII issues</font>
<font color='#7F7E6F'>&#62; experienced on some resources last night. Let&#39;s shoot for Noon EDT/11AM CDT</font>
<font color='#7F7E6F'>&#62; at&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 510-665-5437 x1379</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; Rob</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font></pre></div><div class='update_description'><i onclick="document.location='8530#1273062710'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T12:31:50+00:00">May 5, 2010 12:31 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273062710">&nbsp;</a></div><pre>Dan responded to the GOC notification last night in an email thread; I sent him a note back. Here are those two notes for completeness&#58;

---------

Hi Dan,

We looked at the  CEMon collector logs last night; the ones that stopped reporting did not even make contact since the last time they successfully uploaded data. It looked like the client was getting stuck in some infinite wait mode with its connection to one collector, thereby preventing it from reporting to either collector. In any case, we have been discussing the issue on the ticket, and we will work further with the experts on the ticket, and report back to you and management.

Meanwhile, anyone on this email thread who is interested or thinks they can help with the issue should feel free to add themselves to the ticket&#39;s CC list&#58; <a href='8530.html' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=8530</a>

... I see Dan has already added himself to the ticket. GIP support (Tony, Brian, Burt et al.) and Parag are also already on the ticket, as are Rob and myself.

Cheers,
-ag
- Hide quoted text -

On Wed, May 5, 2010 at 7&#58;56 AM, Fraser, Daniel M. &#60;fraser@....&#62; wrote&#58;

Hi Rob, Everyone,

I&#39;m starting a medium sized email list to bring in some outside expertise on this problem, especially since as you noted, there have not been any recent changes to the BDII related code on the GOC side for several months. (feel free to add others to this list who may be able to contribute). One of the things Miron suggested that GOC can try right away is to set up a machine to &#34;status&#34; the collectors and see if anything is happening on the collector side. Are the collectors not getting the information or are they dropping it once they get it?

Rob, since not all the sites were affected, as you mentioned, this may be related to the sites running the latest version of the VDT as Fermi is. (I know FermiGrid recently had problems with ReSS due to an upgrade of Condor 7.2.3 to 7.4.1, although this was due to a problem with the way ReSS handles error messages from Condor). Wondering out loud if the affected sites are all running Condor 7.4.1.  Rob, any other ideas as to what the affected sites may have in common?

Alain, are there any recent changes to the VDT that come to mind that could be a contributing factor here?

Dan</pre></div><div class='update_description'><i onclick="document.location='8530#1273059291'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T11:34:51+00:00">May 5, 2010 11:34 AM UTC</time><a class="anchor" name="1273059291">&nbsp;</a></div><pre>Adding myself to the cc list
-- by Dan Fraser</pre></div><div class='update_description'><i onclick="document.location='8530#1273059288'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T11:34:48+00:00">May 5, 2010 11:34 AM UTC</time><a class="anchor" name="1273059288">&nbsp;</a></div><pre>Adding myself to the cc list
-- by Dan Fraser</pre></div><div class='update_description'><i onclick="document.location='8530#1273059285'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T11:34:45+00:00">May 5, 2010 11:34 AM UTC</time><a class="anchor" name="1273059285">&nbsp;</a></div><pre>Adding myself to the cc list
-- by Dan Fraser</pre></div><div class='update_description'><i onclick="document.location='8530#1273022547'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T01:22:27+00:00">May 5, 2010 01:22 AM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1273022547">&nbsp;</a></div><pre>Here is the notification send to the OSG community.

OSG Operations was made aware of an issue of some CEMon clients on production CEs not reporting to the OSG CEMon collector; consequently, those CEs did not show up on the BDII.

GOC staff and USCMS admins have started troubleshooting this issue, and have found a temporary work around by removing one of the two CEMon collectors (on is2) from activity. The raw LDIF data is still being rsynced between the two servers. At this point all information is available in the OSG BDII and being sent properly to the WLCG. Investigations of the cause and work toward a fix will continue when business hours resume tomorrow.</pre></div><div class='update_description'><i onclick="document.location='8530#1273022074'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T01:14:34+00:00">May 5, 2010 01:14 AM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273022074">&nbsp;</a></div><pre>Things seem stable now; all CEs seem to be reporting to is1, and this data is being copied to is2 via rsync. We will continue investigating tomorrow. WE are also sending out a notification to the community letting them know about this issue.

Cheers,
-ag</pre></div><div class='update_description'><i onclick="document.location='8530#1273021346'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T01:02:26+00:00">May 5, 2010 01:02 AM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273021346">&nbsp;</a></div><pre>After the cemon restart things seemed to be ok but apparently they were not. A bunch of CEs dropped off again. We asked Tony to restart CEMon on a couple of his CEs which did not seem to help.

Now we are trying another ploy - keeping CEMon on on is1, while turning it off on is2; the data will still be synced. We will see if that works.

-ag</pre></div><div class='update_description'><i onclick="document.location='8530#1273017865'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-05T00:04:25+00:00">May 5, 2010 12:04 AM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1273017865">&nbsp;</a></div><pre>Adding a snip from Tony and Chris IM conversation to establish a timeline.

(7&#58;27&#58;11 PM) Tony T.&#58; so there is a problem with the OSG BDII collector
(7&#58;27&#58;19 PM) Tony T.&#58; a whole bunch of sites are missing from it
(7&#58;27&#58;38 PM) Tony T.&#58; so this needs to be escalated within the OSG chain, however you are supposed to do this</pre></div><div class='update_description'><i onclick="document.location='8530#1273017078'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-04T23:51:18+00:00">May 4, 2010 11:51 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273017078">&nbsp;</a></div><pre>Adding Parag and GIP support to ticket.

I restarted CEMon initially on is2 to see what happens, and then on is1. That appears to have done the trick. I don&#39;t see any errors in the CEMon logs, and the CEMon collector was receiving data just fine from certain OSG CEs during the last 3-4 hours. This leads me to make an educated guess that this is the same issue that affected some OSG CEs (certain architecture + Java version, etc.) ... the issue where in an ephemeral network issue causes the CEMon client on some CEs to time out but never restart its connection to the collector. Does this ring a bell?

Cheers,
-ag</pre></div><div class='update_description'><i onclick="document.location='8530#1273016398'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-04T23:39:58+00:00">May 4, 2010 11:39 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1273016398">&nbsp;</a></div><pre>Changing status to high. Arvind is aware of the situation and is looking into it.</pre></div><div class='update_description'><i onclick="document.location='8530#1273016243'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-04T23:37:23+00:00">May 4, 2010 11:37 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1273016243">&nbsp;</a></div><pre>Chris just called - looking now.</pre></div><div class='update_description'><i onclick="document.location='8530#1273012481'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-04T22:34:41+00:00">May 4, 2010 10:34 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1273012481">&nbsp;</a></div><pre>Lots of BDII information is not being forwarded on to WLCG.

I notice this is true for FNAL and BNL and other sites.

I believe we are transmitting the information to you.

I consider this urgent.</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F8530">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 8530});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
