<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[24833] org.osg.globus.gridftp-simple and org.osg.certificates.crl-expiry rsv metrics failing at T3_US_FIT</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=24833" method="post">
<div class="page-header">
    <h3><span class="muted">24833</span> / org.osg.globus.gridftp-simple and org.osg.certificates.crl-expiry rsv metrics failing at T3_US_FIT</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Ankit Durgasis Mohapatra</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Ankit Durgasis Mohapatra</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Close</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-06-25</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Carl Edquist <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/24833", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/24833?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/24833?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20org.osg.globus.gridftp-simple%20and%20org.osg.certificates.crl-expiry%20rsv%20metrics%20failing%20at%20T3_US_FIT%20ISSUE%3D24833%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='24833#1435261709'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-25T19:48:29+00:00">Jun 25, 2015 07:48 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1435261709">&nbsp;</a></div><pre>Alright, thanks Ankit!

I&#39;ll resolve this ticket, and you can open a new one if you run into more issues with GUMS.

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='24833#1435195100'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-25T01:18:20+00:00">Jun 25, 2015 01:18 AM UTC</time><a class="anchor" name="1435195100">&nbsp;</a></div><pre>Hi,

We have started getting SAM test jobs on the cluster again, also the rsv metrics are all green now. So I suggest that we close this ticket.

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1435172217'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-24T18:56:57+00:00">Jun 24, 2015 06:56 PM UTC</time><a class="anchor" name="1435172217">&nbsp;</a></div><pre>Frontier-squid was not running, I just started it now, can you please resubmit more glideins and let me know, if they still have the same issue?

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1435171528'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-24T18:45:28+00:00">Jun 24, 2015 06:45 PM UTC</time><a class="anchor" name="1435171528">&nbsp;</a></div><pre>* adding osg-gfactory-support mailing list

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='24833#1435171343'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-24T18:42:23+00:00">Jun 24, 2015 06:42 PM UTC</time><a class="anchor" name="1435171343">&nbsp;</a></div><pre>Hi all,

I recently cleared out a large number of held glideins at FIT, which likely accumulated during the period when certs were out of sync. After clearing out the old glideins, OSG and GLOW glideins are now running normally. However, CMS glideins are failing validation due to a squid proxy issue [1]. Perhaps this is related to the GUMS issue being discussed.

Marty Kandes
UCSD Glidein Factory Operations

[1]

test_squid.f6ndhL.sh&#58; OK
Signature OK for client&#58;test_squid.f6ndhL.sh.
Found CMS SW in /cvmfs/cms.cern.ch
=== Validation error in /var/lib/condor/execute/dir_13372/glide_lrv2UT/client/test_squid.sh ===
Wed Jun 24 00&#58;08&#58;48 EDT 2015 Error running &#39;/var/lib/condor/execute/dir_13372/glide_lrv2UT/client/test_squid.sh&#39;
The test script did not produce an XML file. No further information available.
Wed Jun 24 00&#58;08&#58;48 EDT 2015 Notifying VO of error

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='24833#1435082954'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T18:09:14+00:00">Jun 23, 2015 06:09 PM UTC</time><a class="anchor" name="1435082954">&nbsp;</a></div><pre>Hi Carl and Elizabeth,

The link for the SAM test&#58;
<a href='http&#58;//wlcg-sam-cms.cern.ch/templates/ember/#/plot?group=AllGroups&profile=CMS_CRITICAL_FULL&sites=T3_US_FIT' target='_blank' rel='nofollow'>http&#58;//wlcg-sam-cms.cern.ch/templates/ember/#/plot?group=AllGroups&profile=CMS_CRITICAL_FULL&sites=T3_US_FIT</a>

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1435082371'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T17:59:31+00:00">Jun 23, 2015 05:59 PM UTC</time><a class="anchor" name="1435082371">&nbsp;</a></div><pre>Hi,

I somhow thought it was you, I dodn&#39;t know about Carl Lundstedt  &#58;)
I was successful in manually mapping the SAM DN to a local account using localaccountmapper. But that seems to have fixed nothing.
One thing I see though is that when I update the VOs, I see this message&#58;

gums-service-admin.log&#58;199161&#58;23 Jun 2015 07&#58;52&#58;23,989 [WARN ]&#58; User group update for cmsuser failed&#58; Couldn&#39;t retrieve users&#58; null
gums-service-admin.log&#58;199162&#58;23 Jun 2015 07&#58;52&#58;27,240 [INFO ]&#58; User group update for cmsuser-null (2484 users).
gums-service-admin.log&#58;199977&#58;23 Jun 2015 13&#58;37&#58;31,730 [WARN ]&#58; User group update for uscmsuser failed&#58; Couldn&#39;t retrieve users&#58; null

Is this normal? I am attaching the gums.config file, if you want to have a look.

The specific problem was the critical status of the org.osg.certificates.crl-expiry and intermittently org.osg.globus.gridftp-simple, which was fixed after the update (as you had suggested). However the update did break gums, and
hence we don&#39;t see any SAM jobs in the cluster. If you want you can close this ticket, and I can open a new one.

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1435082169'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-23T17:56:09+00:00">Jun 23, 2015 05:56 PM UTC</time> by <b>echism</b><a class="anchor" name="1435082169">&nbsp;</a></div><pre>Hey Carl,

Ankit linked a separate metric from SAM a while ago, but it just generated a blank table for me, so I didn&#39;t know what to think of it.

Thank you</pre></div><div class='update_description'><i onclick="document.location='24833#1435012576'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-22T22:36:16+00:00">Jun 22, 2015 10:36 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1435012576">&nbsp;</a></div><pre>Hi Ankit,

<font color='#7F7E6F'>&#62; I tried to manually map Andrea Sciaba&#39;s DN to a local unix account, but</font>
<font color='#7F7E6F'>&#62; that seemed to fail. I saw in this ticket</font>
<font color='#7F7E6F'>&#62; (<a href='https&#58;//ticket.grid.iu.edu/24418?sort=up&' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/24418?sort=up&</a>) that you did manage to</font>
<font color='#7F7E6F'>&#62; manullay map accounts in the new GUMs version. How does one do that</font>
<font color='#7F7E6F'>&#62; (Someone did mention &#34;some extra knobs&#34;)?</font>

I actually wasn&#39;t part of the discussion in that ticket -- I believe Garhan was referring to Carl Lundstedt &#60;clundstedt@....&#62;, who I think administers their GUMS instance.  But I think what Garhan is referring to is just that if you go to Account Mappers and add or edit an account mapper, there is a field where you can specify a Group (the primary Unix group to map to).  But I believe this feature has been around since gums 1.4.0.

Thanks for providing the rest of the information (the /etc/grid-security directory listing, the java backtrace, and the log messages for the account mapping) ... unfortunately I don&#39;t really know what to make of it all at the moment.

So, we&#39;ve gone down a few different troubleshooting routes already; can you remind me what the specific problem is currently?  Is it still the two metrics that you originally mentioned failing?  (org.osg.certificates.crl-expiry and intermittently org.osg.globus.gridftp-simple)  Or is the current problem something else?  (because I see all green on <a href='http&#58;//uscms1.fltech-grid3.fit.edu/rsv/' target='_blank' rel='nofollow'>http&#58;//uscms1.fltech-grid3.fit.edu/rsv/</a> )

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='24833#1434763889'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-20T01:31:29+00:00">Jun 20, 2015 01:31 AM UTC</time><a class="anchor" name="1434763889">&nbsp;</a></div><pre>Hi,

It also seems that the SAM org.sam.CONDOR-JobSubmit test has been in warning state for some time now. I see osg and glow jobs running on the cluster (not sure if they are running to completion), but I don&#39;t see
any jobs by grid0001 (the local unix accout mapped to the SAM DN). The way the DN is mapped to a linux account is also a bit different&#58;
New mapping&#58;
GridID[/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=uscms1.fltech-grid3.fit.edu] - Mapped on host &#39;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=uscms1.fltech-grid3.fit.edu&#39; the user &#39;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=sciaba/CN=430796/CN=Andrea Sciaba&#39; / &#39;/cms/Role=production/Capability=NULL&#39; to &#39;Account[user=grid0001]&#39;

Old mapping&#58;
gums-service-admin.log&#58;65082&#58;18 May 2015 15&#58;11&#58;34,254 [INFO ]&#58; GridID[/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=uscms1.fltech-grid3.fit.edu] - Mapped on host &#39;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=uscms1.fltech-grid3.fit.edu&#39; the user &#39;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=sciaba/CN=430796/CN=Andrea Sciaba&#39; / &#39;/cms/Role=production/Capability=NULL&#39; to &#39;grid0002&#39;

I am not sure why the new mappings have user=gridXXXX. I also don&#39;t see any directories being created by grid00001 in /var/lib/globus/gram_state.

The link to the SAM test is&#58;
<a href='http&#58;//wlcg-sam-cms.cern.ch/dashboard/request.py/metricOutput?host=uscms1.fltech-grid3.fit.edu&metricfqan=org.sam.CONDOR-JobSubmit%20%28/cms/Role_production%29&time=2015-06-19T03&#58' target='_blank' rel='nofollow'>http&#58;//wlcg-sam-cms.cern.ch/dashboard/request.py/metricOutput?host=uscms1.fltech-grid3.fit.edu&metricfqan=org.sam.CONDOR-JobSubmit%20%28/cms/Role_production%29&time=2015-06-19T03&#58</a>;41&#58;32Z

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1434746189'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-19T20:36:29+00:00">Jun 19, 2015 08:36 PM UTC</time> by <b>echism</b><a class="anchor" name="1434746189">&nbsp;</a></div><pre>Carl,

Can you revisit this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='24833#1434399171'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-15T20:12:51+00:00">Jun 15, 2015 08:12 PM UTC</time> by <b>echism</b><a class="anchor" name="1434399171">&nbsp;</a></div><pre>Hey Carl,

What is going with this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='24833#1434047968'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-11T18:39:28+00:00">Jun 11, 2015 06:39 PM UTC</time><a class="anchor" name="1434047968">&nbsp;</a></div><pre>Hi Carl,

I tried to manually map Andrea Sciaba&#39;s DN to a local unix account, but that seemed to fail. I saw in this ticket (<a href='https&#58;//ticket.grid.iu.edu/24418?sort=up&' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/24418?sort=up&</a>) that you did manage to manullay map accounts in the new GUMs version.
How does one do that (Someone did mention &#34;some extra knobs&#34;)?
This is the error message&#58;

Error Type&#58; java.lang.NullPointerException

Error Message&#58; null

We want GUMS to have helpful error messages. If you feel this message wasn&#39;t helpful, or that it was due to a bug in GUMS, please report the following information to gums-users-l@...., as it might help them.

java.lang.NullPointerException
at java.util.TreeMap.getEntry(TreeMap.java&#58;342)
at java.util.TreeMap.get(TreeMap.java&#58;273)
at java.util.Collections$UnmodifiableMap.get(Collections.java&#58;1339)
at jsp.manualAccounts_jsp._jspService(manualAccounts_jsp.java&#58;111)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java&#58;70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java&#58;717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java&#58;290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java&#58;206)
at gov.bnl.gums.admin.CertCache.doFilter(CertCache.java&#58;226)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java&#58;235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java&#58;206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java&#58;233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java&#58;191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java&#58;127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java&#58;102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java&#58;109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java&#58;298)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java&#58;857)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java&#58;588)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java&#58;489)
at java.lang.Thread.run(Thread.java&#58;745)

<div id='show_95127771' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_95127771'>Thanks,
Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra
</div><script type='text/javascript'>
        $('#show_95127771').click(function() {
            $('#detail_95127771').slideDown("normal");
            $('#show_95127771').hide();
            $('#hide_95127771').show();
        });
        $('#hide_95127771').click(function() {
            $('#detail_95127771').slideUp();
            $('#hide_95127771').hide();
            $('#show_95127771').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='24833#1433960160'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-10T18:16:00+00:00">Jun 10, 2015 06:16 PM UTC</time><a class="anchor" name="1433960160">&nbsp;</a></div><pre>Hi Carl,

I downgraded antlr.jar, and now the symlinks on the cluster resemble your configuration (they map to /usr/share/java/antlr.jar). However, I still see the same issue.
Do you think it could be because of a wrong grid-map file? These are the contents of the /etc/grid-security directory
total 1476
-r--r--r--  1 root   root    1891 Oct  1  2014 hostcert.pem.old
-rw-r--r--  1 root   root 1392526 Oct  1  2014 grid-mapfile
-rw-r--r--  1 root   root       0 Oct  2  2014 hostcert.p12
-r--r--r--  1 root   root    3009 Oct  3  2014 usercert.pem
-r--------  1 root   root    2007 Oct  3  2014 userkey.pem
drwxr-xr-x  2 rsv     396    4096 Oct  3  2014 rsv
-r--------  1 root   root    1675 Oct  3  2014 hostkey.pem.old
-r--r--r--  1 root   root    2056 Oct  6  2014 hostcert.pem
-r--------  1 root   root    1675 Oct  6  2014 hostkey.pem
drwxr-xr-x  2 tomcat root    4096 Oct  6  2014 http
-rw-r--r--  1 root   root      60 Jun  2 17&#58;59 gsi-authz.conf
drwxr-xr-x  2 root   root   61440 Jun  9 18&#58;43 certificates
drwxr-xr-x 47 root   root    4096 Jun 10 11&#58;14 vomsdir
-rw-r--r--  1 root   root       0 Jun 10 13&#58;47 gums-privilege.root.log
-rw-r--r--  1 root   root     152 Jun 10 13&#58;47 gums-developer.root.log
-rw-r--r--  1 root   root    6320 Jun 10 13&#58;47 gums-egee-security.root.log

It seems like an old grid map file (october 1), I did a generate grid-mapfile, it showed entries different from the gridmap file in the grid-security, do you think that could be an issue?

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1433904538'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-10T02:48:58+00:00">Jun 10, 2015 02:48 AM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1433904538">&nbsp;</a></div><pre>Hi Ankit,

As below, on my install the [antlr].jars point to /usr/share/java/antlr.jar, which is itself a symlink to /usr/share/java/antlr-2.7.7.jar, which comes from the antlr rpm from the OS repo (CentOS or SL)

# ls -l /usr/lib/gums/[antlr].jar /var/lib/tomcat6/webapps/gums/WEB-INF/lib/[antlr].jar
lrwxrwxrwx 1 root root 25 Jun  5 11&#58;34 /usr/lib/gums/[antlr].jar -&#62; /usr/share/java/antlr.jar
lrwxrwxrwx 1 root root 25 Jun  5 11&#58;34 /var/lib/tomcat6/webapps/gums/WEB-INF/lib/[antlr].jar -&#62; /usr/share/java/antlr.jar

# ls -l /usr/share/java/antlr.jar
lrwxrwxrwx 1 root root 15 Jun  5 11&#58;34 /usr/share/java/antlr.jar -&#62; antlr-2.7.7.jar

... If your current setup is still causing problems, it could be something is not working right with the antlr-2.7.7.jar from the rocks rpm, or we might be chasing after the wrong thing...

Do you know if any other applications on your server require the rocks version of the antlr rpm?  If not you could try downgrading to the OS one, something like

yum downgrade --disablerepo=Rocks&#92;* antlr

Carl</pre></div><div class='update_description'><i onclick="document.location='24833#1433875544'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-09T18:45:44+00:00">Jun 9, 2015 06:45 PM UTC</time><a class="anchor" name="1433875544">&nbsp;</a></div><pre>Hi Carl,

It seems that there was a broken [antlr].jar in the /usr/lib/gums directory. I changed it, however that didn&#39;t seem to fix the issue.

ls -l /usr/lib/gums/[antlr].jar /var/lib/tomcat6/webapps/gums/WEB-INF/lib/[antlr].jar
lrwxrwxrwx 1 root root 49 Jun  8 11&#58;45 /usr/lib/gums/[antlr].jar -&#62; /usr/java/jdk1.7.0_51/jre/lib/ext/antlr-2.7.7.jar
lrwxrwxrwx 1 root root 49 Jun  4 15&#58;53 /var/lib/tomcat6/webapps/gums/WEB-INF/lib/[antlr].jar -&#62; /usr/java/jdk1.7.0_51/jre/lib/ext/antlr-2.7.7.jar

I don&#39;t see antlr.jar in /usr/share/java
ls -ltr /usr/share/java/antlr.jar
ls&#58; cannot access /usr/share/java/antlr.jar&#58; No such file or directory
Do you have [antlr.jar] in your /var/lib/tomcat6/webapps/gums/WEB-INF/lib/ directory? If yes, what does it point to? That was a broken link to antlr-2.7.5H3.jar (hence I had ot manually downalod and put the .jar file)

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1433523266'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-05T16:54:26+00:00">Jun 5, 2015 04:54 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1433523266">&nbsp;</a></div><pre>Hi Ankit,

Where are the [antlr].jar links and where do they point to?  Also, where does /usr/share/java/antlr.jar point to?  (doing an &#34;ls -l&#34; on them should show this)

On my (non-rocks) setup it looks like this

# ls -l /usr/lib/gums/[antlr].jar /var/lib/tomcat6/webapps/gums/WEB-INF/lib/[antlr].jar
lrwxrwxrwx 1 root root 25 Jun  5 11&#58;34 /usr/lib/gums/[antlr].jar -&#62; /usr/share/java/antlr.jar
lrwxrwxrwx 1 root root 25 Jun  5 11&#58;34 /var/lib/tomcat6/webapps/gums/WEB-INF/lib/[antlr].jar -&#62; /usr/share/java/antlr.jar

# ls -l /usr/share/java/antlr.jar
lrwxrwxrwx 1 root root 15 Jun  5 11&#58;34 /usr/share/java/antlr.jar -&#62; antlr-2.7.7.jar

But in any case eventually they should resolve to antlr-2.7.7.jar ... I&#39;m a little confused about the antlr-2.7.5H3.jar question... Is there a broken symlink pointing there or something?  I don&#39;t know where it would come from but I doubt that&#39;s the one we want anyway...

So, if you still have the Rocks version installed, maybe we can change the broken [antlr].jar symlinks to /usr/java/latest/jre/lib/ext/antlr-2.7.7.jar ... otherwise if you downgraded the antlr rpm to the antlr 2.7.7 rpm you should be able to set up the symlinks as above.  (It may be that the most important thing is just that the symlinks are not broken!  &#58;)

Carl</pre></div><div class='update_description'><i onclick="document.location='24833#1433447948'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-04T19:59:08+00:00">Jun 4, 2015 07:59 PM UTC</time><a class="anchor" name="1433447948">&nbsp;</a></div><pre>Hi Carl,

I changed the [antlr].jar link to antlr-2.7.7.jar, and it still didn&#39;t solve the issue. However I still see another broken link
[antlr.jar] , I cannot seem to find antlr-2.7.5H3.jar, any ideas where I can get it? May be fixing that will fix the issue?

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1433447464'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-04T19:51:04+00:00">Jun 4, 2015 07:51 PM UTC</time><a class="anchor" name="1433447464">&nbsp;</a></div><pre>Hi,

The antlr-3.1 came from Rocks repo. This is the output of yum info antlr&#58;
Name        &#58; antlr
Arch        &#58; x86_64
Version     &#58; 3.1
Release     &#58; 0
Size        &#58; 2.2 M
Repo        &#58; installed
From repo   &#58; Rocks-6.1.1
Summary     &#58; antlr
License     &#58; University of California
Description &#58; antlr

rpm -qlv antlr | grep jar&#58;
-r--r--r--    1 root    root                   445288 Apr 14  2014 /usr/java/latest/jre/lib/ext/antlr-2.7.7.jar
-r--r--r--    1 root    root                  1521207 Apr 14  2014 /usr/java/latest/jre/lib/ext/antlr-3.1.jar
-r--r--r--    1 root    root                   124456 Apr 14  2014 /usr/java/latest/jre/lib/ext/antlr-runtime-3.1.jar
-r--r--r--    1 root    root                   172023 Apr 14  2014 /usr/java/latest/jre/lib/ext/stringtemplate-3.2.jar

I will change it to antlr-2.7.7 and let you know if it fixes the issue.

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1433438717'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-04T17:25:17+00:00">Jun 4, 2015 05:25 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1433438717">&nbsp;</a></div><pre>Hi Ankit,

Thanks for the info.  I noticed now what you said about the broken [antlr].jar link -- usually that is a symlink to /usr/share/java/antlr.jar, which on my test installation comes from antlr-2.7.7-6.5.el6.x86_64 ... but from the osg-profile I see you have antlr-3.1-0.x86_64 installed.  Any idea what repo that got installed from?

Can you give the output of&#58;
yum info antlr
rpm -qlv antlr | grep jar

In particular, the symlink
/var/lib/tomcat6/webapps/gums/WEB-INF/lib/[antlr].jar

should resolve to a valid antlr.jar, and it might need to be antlr-2.7.7.jar ...

As far as I can see, the antlr 2.7.7 version is still the latest for centos 6&#58;

<a href='http&#58;//mirror.centos.org/centos/6/os/x86_64/Packages/antlr-2.7.7-6.5.el6.x86_64.rpm' target='_blank' rel='nofollow'>http&#58;//mirror.centos.org/centos/6/os/x86_64/Packages/antlr-2.7.7-6.5.el6.x86_64.rpm</a>

If the newer one you currently have installed isn&#39;t needed in particular for anything, maybe you can try downgrading to the 2.7.7 version.

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='24833#1433353976'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-03T17:52:56+00:00">Jun 3, 2015 05:52 PM UTC</time><a class="anchor" name="1433353976">&nbsp;</a></div><pre>Hi,
I just added the lines for rsv from the old config file to the new one. However I still have the same issues.

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1433353841'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-03T17:50:41+00:00">Jun 3, 2015 05:50 PM UTC</time><a class="anchor" name="1433353841">&nbsp;</a></div><pre>Hi Carl,

Can u give this look? Do we still have to do special things for rsv in gums?

Cheers,

Edgar
OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='24833#1433283345'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-02T22:15:45+00:00">Jun 2, 2015 10:15 PM UTC</time><a class="anchor" name="1433283345">&nbsp;</a></div><pre>Hi,
Apologies for the late reply, I was caught up in some issues with the compute nodes (kernel panic after yum update).

The output of rpm -qa | egrep &#39;java|jdk&#39;&#58;
java-1.5.0-gcj-1.5.0.0-29.1.el6.x86_64
java-1.7.0-openjdk-devel-1.7.0.79-2.5.5.3.el6_6.x86_64
tzdata-java-2015d-1.el6.noarch
glite-security-util-java-2.8.0-3.2.osg.el6.noarch
osg-java7-compat-openjdk-1.0-1.osg32.el6.noarch
osg-java7-compat-1.0-1.osg32.el6.noarch
java-1.7.0-openjdk-1.7.0.79-2.5.5.3.el6_6.x86_64
mysql-connector-java-5.1.17-6.el6.noarch
rocks-java-6.1.1-0.x86_64
osg-java7-devel-compat-openjdk-1.0-1.osg32.el6.noarch
java-1.6.0-openjdk-devel-1.6.0.35-1.13.7.1.el6_6.x86_64
java-1.6.0-openjdk-1.6.0.35-1.13.7.1.el6_6.x86_64
osg-java7-devel-compat-1.0-1.osg32.el6.noarch
java_cup-0.10k-5.el6.x86_64
jdk-1.7.0_51-fcs.x86_64
voms-api-java-2.0.8-1.5.osg.el6.noarch

I followed all the steps you outlined, but I still get the same issue. I don&#39;t see any unix account mapped to grid0002. (attaching a screen shot)
Do you think it could be a file which just needs to be remade?
Also, another thing is that I still use the old gums template, as the new gums.config file doesnot have any entries for rsv, do you think that could be the issue?

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1432831715'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-28T16:48:35+00:00">May 28, 2015 04:48 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1432831715">&nbsp;</a></div><pre>Hi Ankit,

We sometimes see issues on installs with more than one version java installed together.  In particular I saw in the osg-profile.txt that the &#34;jdk&#34; package is installed, which can be trouble.

Can you give me the output of this command&#58; rpm -qa | egrep &#39;java|jdk&#39;
?

It might be as simple as re-running each of these&#58;
alternatives --config java
alternatives --config javac

and selecting the openjdk 1.7.0 versions.  (Even if they are already selected, re-running this fixes up some symlinks.)

If that does not resolve the problem, my next guess is to try running&#58;

yum install osg-java7&#92;*
yum remove jdk
alternatives --config java
alternatives --config javac

The osg-java7-compat packages don&#39;t contain any software, but they provide a compatibility layer to make the rpm database happy and work around some issues with the upstream OpenJDK7 packaging.

My guess is that if you get this far gums will work the next time you start it up, but let me know how it goes!

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='24833#1432744795'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-27T16:39:55+00:00">May 27, 2015 04:39 PM UTC</time><a class="anchor" name="1432744795">&nbsp;</a></div><pre>Hi Carl,

Can u maybe help with some of Ankits gums problems?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='24833#1432741900'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-27T15:51:40+00:00">May 27, 2015 03:51 PM UTC</time><a class="anchor" name="1432741900">&nbsp;</a></div><pre>I cannot find the file antlr-2.7.5H3.jar in the cluster, apart from the old backup we have of osg-1.2.
Also we have two versions of antlr*.jar. I used 3.1 (but we also have 2.7), I don&#39;t remember if I had linked 2.7 to antlr.jar

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1432741487'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-27T15:44:47+00:00">May 27, 2015 03:44 PM UTC</time><a class="anchor" name="1432741487">&nbsp;</a></div><pre>Edgar,

The default selection for java and javac is jre-1.7.0, which is the latest version of java in the cluster.
I do recall that after updating, gums page went down, because of a bad [antlr].jar link, and I had changed it to /usr/java/jdk1.7.0_51/jre/lib/ext/antlr-3.1.jar, do you think that could be an error?

I also see another bad link for
[antlr.jar] which I didnt fix, as the page went up again, may be this needs to be changed.

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1432739087'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-27T15:04:47+00:00">May 27, 2015 03:04 PM UTC</time><a class="anchor" name="1432739087">&nbsp;</a></div><pre>Hi Ankit,

Did u follow the gums instructions to upgrade&#58;

<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallGums#4_1_1_Install_GUMS' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallGums#4_1_1_Install_GUMS</a>

Specifically this&#58;

Whether installing or upgrading GUMS, please make sure to follow these instructions for updating/installing Java to work correctly with GUMS.
Note&#58; if you have older versions of java installed (for instance, jdk), make sure to re-run alternatives --config java and alternatives --config javac

Cheers,

Edgar

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='24833#1432732668'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-27T13:17:48+00:00">May 27, 2015 01:17 PM UTC</time><a class="anchor" name="1432732668">&nbsp;</a></div><pre>Hi,

I updated the CE and the nodes, and it seems that the versions of the softwares are now up-to date. However after the update, GUMs went down, and the rsv tests went crtical. Although I fixed the rsv metrics, and can access the GUMs page, it seems that the account to grid identity mappings are lost. For example, I tried to see which grid identity is mapped to the local account grid0002 (responsible for the SAM tests), it returns nothing, same with rsv and osg.

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1432667282'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-26T19:08:02+00:00">May 26, 2015 07:08 PM UTC</time><a class="anchor" name="1432667282">&nbsp;</a></div><pre>Ok, yum update seems to be updating all the softwares properly, I will let you know if that fixes the issue.

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1432666748'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-26T18:59:08+00:00">May 26, 2015 06:59 PM UTC</time><a class="anchor" name="1432666748">&nbsp;</a></div><pre>Hi,

I was trying to fix some problems with some of the nodes, so couldn&#39;t get time to do the update.
On the CE, I ran
yum update osg-gums and yum update osg-ce-condor,
but I keep on getting &#34;no packages marked for update&#34;. Are there any other osg-repository which need to be enabled, I only have the osg and osg-source section of the osg-el6.repo enabled by default.

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1432647651'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-26T13:40:51+00:00">May 26, 2015 01:40 PM UTC</time> by <b>echism</b><a class="anchor" name="1432647651">&nbsp;</a></div><pre>Ankit,

How is this looking at present?

Thank you</pre></div><div class='update_description'><i onclick="document.location='24833#1432004891'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-19T03:08:11+00:00">May 19, 2015 03:08 AM UTC</time> by <b>echism</b><a class="anchor" name="1432004891">&nbsp;</a></div><pre>This is a quick note to say that I am at a workshop this week, so please email
goc@.... if you need anything from my group before Monday.

Best,
Elizabeth Prout</pre></div><div class='update_description'><i onclick="document.location='24833#1431965384'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-18T16:09:44+00:00">May 18, 2015 04:09 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1431965384">&nbsp;</a></div><pre>Ankit,

How did the update go?

- Brian</pre></div><div class='update_description'><i onclick="document.location='24833#1431554770'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-13T22:06:10+00:00">May 13, 2015 10:06 PM UTC</time><a class="anchor" name="1431554770">&nbsp;</a></div><pre>Hi Ankit,

U got any update on this?

Cheers,

Edgar
OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='24833#1431375561'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-11T20:19:21+00:00">May 11, 2015 08:19 PM UTC</time><a class="anchor" name="1431375561">&nbsp;</a></div><pre>Hi,

I dont think I ever updated the CE and the nodes after upgrading from CENT OS 5 to 6. I will update and let you know if I see the errors again.

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1431364145'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-11T17:09:05+00:00">May 11, 2015 05:09 PM UTC</time><a class="anchor" name="1431364145">&nbsp;</a></div><pre>Hi Ankit,

I think the problem is not in rsv but in lcmaps/gums.

Looking at your gridftp_messages.log&#58;

I would check two things. You are running the latest version of gums and lcmaps.
GUMS 1.4.2-1
glexec-0.9.11-1
lcmaps-1.6.4-1
lcmaps-plugins-basic-1.6.3-1
lcmaps-plugins-verify-proxy-1.5.6-1
xacml-1.5.0-1

And also look into this&#58;

<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/GumsScalability' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/GumsScalability</a>

IF u see ur GUMS server not being able to scale out.

Cheers,

Edgar
OSG Software Support

var/log/messages&#58;12889&#58;Apr 26 04&#58;12&#58;42 uscms1-se gridftp-server-llgt[23167]&#58; lcmaps&#58; xacmlqueryscas()&#58; XACML&#58; Interaction failed&#58; TCP/IP, SSL or SOAP Error with endpoint&#58; &#34;<a href='https&#58;//yoursaz.yourdomain&#58' target='_blank' rel='nofollow'>https&#58;//yoursaz.yourdomain&#58</a>;8443/saz/services/SAZXACMLAuthorizationServicePort&#34;
/var/log/messages&#58;12890&#58;Apr 26 04&#58;12&#58;42 uscms1-se gridftp-server-llgt[23167]&#58; lcmaps&#58; SOAP 1.1 fault&#58; SOAP-ENV&#58;Client [no subcode]
/var/log/messages&#58;12891&#58;Apr 26 04&#58;12&#58;42 uscms1-se gridftp-server-llgt[23167]&#58; lcmaps&#58;     &#34;End of file or no input&#58; Operation interrupted or timed out&#34;
/var/log/messages&#58;12892&#58;Apr 26 04&#58;12&#58;42 uscms1-se gridftp-server-llgt[23167]&#58; lcmaps&#58;     Detail&#58; [no detail]
/var/log/messages&#58;12893&#58;Apr 26 04&#58;12&#58;42 uscms1-se gridftp-server-llgt[23167]&#58; Callout to &#34;LCMAPS&#34; returned local user (service file)&#58; &#34;grid0002
/var/log/messages&#58;14790&#58;Apr 26 04&#58;22&#58;43 uscms1-se gridftp-server-llgt[24026]&#58; lcmaps&#58; /etc/lcmaps.db&#58;163&#58; [warning] expecting rule definitions.
/var/log/messages&#58;14791&#58;Apr 26 04&#58;22&#58;43 uscms1-se gridftp-server-llgt[24026]&#58; lcmaps&#58; /etc/lcmaps.db&#58;163&#58; [warning] no rules specified for policy&#58; &#39;glexec&#39; at line 146.
/var/log/messages&#58;14792&#58;Apr 26 04&#58;22&#58;43 uscms1-se gridftp-server-llgt[24026]&#58; lcmaps&#58; Error&#58; Failed to getaddrinfo (yoursaz.yourdomain, 8443, *, *)
/var/log/messages&#58;14793&#58;Apr 26 04&#58;22&#58;43 uscms1-se gridftp-server-llgt[24026]&#58; lcmaps&#58; xacmlqueryscas()&#58; XACML&#58; Interaction failed&#58; TCP/IP, SSL or SOAP Error with endpoint&#58; &#34;<a href='https&#58;//yoursaz.yourdomain&#58' target='_blank' rel='nofollow'>https&#58;//yoursaz.yourdomain&#58</a>;8443/saz/services/SAZXACMLAuthorizationServicePort&#34;
/var/log/messages&#58;14794&#58;Apr 26 04&#58;22&#58;43 uscms1-se gridftp-server-llgt[24026]&#58; lcmaps&#58; SOAP 1.1 fault&#58; SOAP-ENV&#58;Client [no subcode]
<div id='show_2118065603' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2118065603'>/var/log/messages&#58;14795&#58;Apr 26 04&#58;22&#58;43 uscms1-se gridftp-server-llgt[24026]&#58; lcmaps&#58;     &#34;End of file or no input&#58; Operation interrupted or timed out&#34;

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020
</div><script type='text/javascript'>
        $('#show_2118065603').click(function() {
            $('#detail_2118065603').slideDown("normal");
            $('#show_2118065603').hide();
            $('#hide_2118065603').show();
        });
        $('#hide_2118065603').click(function() {
            $('#detail_2118065603').slideUp();
            $('#hide_2118065603').hide();
            $('#show_2118065603').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='24833#1431363406'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-11T16:56:46+00:00">May 11, 2015 04:56 PM UTC</time><a class="anchor" name="1431363406">&nbsp;</a></div><pre>Do you see any suspicious messages in the osg-profiler?

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1430916731'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-06T12:52:11+00:00">May 6, 2015 12:52 PM UTC</time> by <b>echism</b><a class="anchor" name="1430916731">&nbsp;</a></div><pre>Software team,

Did the profile reveal anything to you?

Thank you</pre></div><div class='update_description'><i onclick="document.location='24833#1430500279'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-01T17:11:19+00:00">May 1, 2015 05:11 PM UTC</time><a class="anchor" name="1430500279">&nbsp;</a></div><pre>Hi,

I am attaching the output from osg-system-profiler. Also globus-gass-copy-progs has the latest version.

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1430498764'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-01T16:46:04+00:00">May 1, 2015 04:46 PM UTC</time><a class="anchor" name="1430498764">&nbsp;</a></div><pre>HI Ankit,

Can u run osg-profile and attach the output?

Please try&#58;

yum update globus-gass-copy-progs

I just did it and was able to install 9&#58;

globus-url-copy -versions
globus-url-copy&#58; 9.13 (1415047679-85)
globus_ftp_client_restart_plugin&#58; 8.19 (1423773827-85)
globus_ftp_client_debug_plugin&#58; 8.19 (1423773827-85)
globus_ftp_client_perf_plugin&#58; 8.19 (1423773827-85)
globus_ftp_client_throughput_plugin&#58; 8.19 (14237

Cheers,

Edgar
OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='24833#1430497726'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-01T16:28:46+00:00">May 1, 2015 04:28 PM UTC</time><a class="anchor" name="1430497726">&nbsp;</a></div><pre>HI,

it says that globus-gass-copy has the latest version.

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1430329490'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-29T17:44:50+00:00">Apr 29, 2015 05:44 PM UTC</time><a class="anchor" name="1430329490">&nbsp;</a></div><pre>Hi Ankit,

Can u run&#58;

yum update globus-gass-copy

So we can take it from there.

Cheers,

Edgar
OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='24833#1430178728'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-27T23:52:08+00:00">Apr 27, 2015 11:52 PM UTC</time><a class="anchor" name="1430178728">&nbsp;</a></div><pre>Hi Edgar,

I am attaching the output of globus-url-copy -versions.

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1430178563'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-27T23:49:23+00:00">Apr 27, 2015 11:49 PM UTC</time><a class="anchor" name="1430178563">&nbsp;</a></div><pre>Hi Ankit,

Can u run this&#58;

globus-url-copy -versions

And attach the output?

Thanks,

Edgar
OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='24833#1430149674'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-27T15:47:54+00:00">Apr 27, 2015 03:47 PM UTC</time><a class="anchor" name="1430149674">&nbsp;</a></div><pre>Hi,

I was busy with my masters thesis, and hence was unable to look into this issue. Apologies for not replying earlier.
You can see the status of the probe here&#58;
<a href='http&#58;//uscms1.fltech-grid3.fit.edu/rsv/' target='_blank' rel='nofollow'>http&#58;//uscms1.fltech-grid3.fit.edu/rsv/</a>

And i think it is only for our local reference. However, the status of this probe seems to be connected the VOPUT SAM test (which I believe depends on grid-ftp).
I am also attaching the gridftp.log file, and all the grid-ftp related messages from the /var/log/messages file.

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1430143108'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-27T13:58:28+00:00">Apr 27, 2015 01:58 PM UTC</time> by <b>echism</b><a class="anchor" name="1430143108">&nbsp;</a></div><pre>Hey Ankit,

I was checking on this today and I don&#39;t see the gridftp probe as being reported. Are you just running it locally?

<a href='http&#58;//tinyurl.com/nzgxuj4' target='_blank' rel='nofollow'>http&#58;//tinyurl.com/nzgxuj4</a>

Thank you</pre></div><div class='update_description'><i onclick="document.location='24833#1429908035'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-24T20:40:35+00:00">Apr 24, 2015 08:40 PM UTC</time> by <b>echism</b><a class="anchor" name="1429908035">&nbsp;</a></div><pre>Ankit,

Is this still ongoing?

Thank you</pre></div><div class='update_description'><i onclick="document.location='24833#1429544548'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-20T15:42:28+00:00">Apr 20, 2015 03:42 PM UTC</time> by <b>echism</b><a class="anchor" name="1429544548">&nbsp;</a></div><pre>Hey Ankit,

Could you provide us with those gridftp logs?

Thank you</pre></div><div class='update_description'><i onclick="document.location='24833#1429115356'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-15T16:29:16+00:00">Apr 15, 2015 04:29 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1429115356">&nbsp;</a></div><pre>Do you see anything unusual in the gridftp logs when the RSV failure occurs?

Suchandra Thapa
OSG Software Team</pre></div><div class='update_description'><i onclick="document.location='24833#1429044568'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-14T20:49:28+00:00">Apr 14, 2015 08:49 PM UTC</time><a class="anchor" name="1429044568">&nbsp;</a></div><pre>I just ran the rsv metric by hand, and it failed, even though the gridftp server was running. The problem is gets fixed by itself for some time, and then goes critical again.

Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><div class='update_description'><i onclick="document.location='24833#1429043880'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-14T20:38:00+00:00">Apr 14, 2015 08:38 PM UTC</time> by <b>echism</b><a class="anchor" name="1429043880">&nbsp;</a></div><pre>Ankit,

Have you narrowed down the problem gridFTP or RSV? Have you confirmed that gridFTP is or isn&#39;t working when you get this error from RSV?

Thank you</pre></div><div class='update_description'><i onclick="document.location='24833#1429041748'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-14T20:02:28+00:00">Apr 14, 2015 08:02 PM UTC</time> by <b>echism</b><a class="anchor" name="1429041748">&nbsp;</a></div><pre>I&#39;m reassigning to myself and software.</pre></div><div class='update_description'><i onclick="document.location='24833#1428328956'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-06T14:02:36+00:00">Apr 6, 2015 02:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1428328956">&nbsp;</a></div><pre>Hi,

The org.osg.globus.gridftp-simple rsv metric keeps on flipping between OK and critical. It gives this error message at times&#58;

error&#58; an end-of-file was reached
globus_xio&#58; An end of file occurred

Also, the org.osg.certificates.crl-expiry metric has gone critical since March 30.

detailsData&#58; CRITICAL&#58; Probe ended with unexpected error condition
2015-04-06T10&#58;30&#58;12Z
CRITICAL&#58; CRL file for CA with hash 24c3ccde has not been updated since 2015/03/27 12&#58;48&#58;32
CRITICAL&#58; CRL file for CA with hash d71343e8 has not been updated since 2015/03/27 12&#58;48&#58;32

<a href='http&#58;//uscms1.fltech-grid3.fit.edu/rsv/' target='_blank' rel='nofollow'>http&#58;//uscms1.fltech-grid3.fit.edu/rsv/</a>

Any ideas on what might be the issue?

Thanks
Ankit

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=amohapat/CN=718616/CN=Ankit Durgasis Mohapatra</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F24833">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 24833});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
