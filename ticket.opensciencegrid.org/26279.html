<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[26279] OU_OSCER_ATLAS - glideins unmatched; glideins held</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=26279" method="post">
<div class="page-header">
    <h3><span class="muted">26279</span> / OU_OSCER_ATLAS - glideins unmatched; glideins held</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Marty Kandes</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">OU_OSCER_ATLAS</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">DOSAR</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Marty Kandes</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USATLAS</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-08-05</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">USATLAS (BNL Prod)&nbsp;<a target="_blank" href="https://rt.racf.bnl.gov/rt/Ticket/Display.html?id=25491">25491</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/26279", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26279?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26279?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20OU_OSCER_ATLAS%20-%20glideins%20unmatched%3B%20glideins%20held%20ISSUE%3D26279%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='26279#1438722978'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-04T21:16:18+00:00">Aug 4, 2015 09:16 PM UTC</time><a class="anchor" name="1438722978">&nbsp;</a></div><pre>Hi Kyle and Horst,

Yeah, I&#39;ll go ahead and close out this ticket for us. All glideins, both single core and multicore, appear to be running successfully. The only issue remaining is GLOW not using the multicore glideins requested, but that&#39;s more an issue with their frontend configuration.

Thanks for all your help.

Ticket closed.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26279#1438717635'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-04T19:47:15+00:00">Aug 4, 2015 07:47 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1438717635">&nbsp;</a></div><pre>Hi Kyle,

yeah, I&#39;m definitely ready to close this ticket again, it&#39;s been open
for long enough. ;)

Thanks,

Horst

On 08/04/2015 02&#58;31 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26279#1438716675'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-04T19:31:15+00:00">Aug 4, 2015 07:31 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1438716675">&nbsp;</a></div><pre>Any updates on this? I didn&#39;t see a response about the submit side.  That being said, things were looking good in the last update.
-kyle</pre></div><div class='update_description'><i onclick="document.location='26279#1438372283'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-31T19:51:23+00:00">Jul 31, 2015 07:51 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1438372283">&nbsp;</a></div><pre>Hi Kyle,

I currently see 93 GLOW jobs running in the OSG queue,
and 22 waiting. What about on the submit side?

The strange thing is that the running ones were submitted last night,
whereas the waiting ones were submitted two days ago.

Wait -- not strange, I think&#58; the running ones were submitted
with a maxwalltime of one day, the waiting ones with two days;
at least the ones I looked at.

So it&#39;s simply a matter of being able to backfill the shorter ones, I think.

Cheers,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26279#1438371621'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-31T19:40:21+00:00">Jul 31, 2015 07:40 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1438371621">&nbsp;</a></div><pre>It&#39;s been beyond the 48 hour mark now.  How is this doing?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26279#1438047341'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-28T01:35:41+00:00">Jul 28, 2015 01:35 AM UTC</time><a class="anchor" name="1438047341">&nbsp;</a></div><pre>Horst, that&#39;s good to know- I&#39;m going to leave it at 48h for now, and we can wait and see if the frontends run into any issues with filling queues when they submit the jobs.

Nate, I&#39;m still seeing a decently high amount of unmatched on the multicore entry for the site, can you take another look and see if you can tell from your end why they&#39;re going unmatched? Glideins from the singlecore entry seem to be matching and running fine so far.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='26279#1437772338'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-24T21:12:18+00:00">Jul 24, 2015 09:12 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1437772338">&nbsp;</a></div><pre>Hi Brendan,

yes, the maxWallTime you can request in the OSCER LSF queues is 48h,
for all standard queues. However, reducing that will increase your chances
of getting your jobs run faster, since it does do backfilling and all that.

So which time you request is up to you, but generally I&#39;d request
the shortest you can that will guarantee your jobs to finish.

Cheers,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26279#1437771736'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-24T21:02:16+00:00">Jul 24, 2015 09:02 PM UTC</time><a class="anchor" name="1437771736">&nbsp;</a></div><pre>Hi Horst,

That number was derived from the default max memory limit on the factory for all entries (2500MB) divided by the number of cores specified (8). I can&#39;t seem to find any reference to the total RAM available in the request to re-enable OSCER for OSG use on the factories last year, so that&#39;s probably why the default is in place. I&#39;ve gone ahead and modified the multicore entry to put the xcount back to 16, as well as set the max memory limit to 32GB instead, so hopefully the memory limit issues should be resolved, and each core should get 2GB.

I also noticed that the multicore entry had maxWallTime=2880 specified in the rsl, which translates to 48h, but we had our glidein max walltime value set to 24h. However, the single core entry has maxWallTime=1440 with glidein max walltime set to 24h. I&#39;ve gone ahead and upped the multicore entry&#39;s glidein max walltime to 48h just to match the rsl attribute value, but I wanted to double check with you on what the proper max walltime should be, for both the single core and multi-core submissions.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='26279#1437768741'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-24T20:12:21+00:00">Jul 24, 2015 08:12 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1437768741">&nbsp;</a></div><pre>Hi Nate,

all OSCER nodes are dual-oct with 32 GB of RAM, so each single core slot
has 2 GB available, and MCORE jobs 2 GB per used core.

I have no idea where the glideins are getting that memory number from,
but it doesn&#39;t seem to have very much to do with reality. &#58;)

Cheers,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26279#1437768034'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-24T20:00:34+00:00">Jul 24, 2015 08:00 PM UTC</time> by <b>nyehle@....</b><a class="anchor" name="1437768034">&nbsp;</a></div><pre>Something is still wrong, all the glideins from OU_OSCER_ATLAS are too small to be of use.  They are all 312M in size, and are unclaimable due to few jobs using that little memory.

[nyehle@glidein2 ~]$ condor_status -const &#39;GLIDEIN_Site == &#34;OSCER_ATLAS&#34;&#39; | tail
slot6@glidein_2037 LINUX      X86_64 Unclaimed Idle      1.000  312  0+00&#58;19&#58;13
slot6@glidein_3125 LINUX      X86_64 Unclaimed Idle      1.000  312  0+00&#58;04&#58;54
slot7@glidein_2037 LINUX      X86_64 Unclaimed Idle      1.000  312  0+00&#58;00&#58;36
slot8@glidein_2037 LINUX      X86_64 Unclaimed Idle      3.450  312  0+00&#58;19&#58;07
slot8@glidein_3125 LINUX      X86_64 Unclaimed Idle      3.360  312  0+00&#58;04&#58;48
Total Owner Claimed Unclaimed Matched Preempting Backfill

X86_64/LINUX   124     0       7       117       0          0        0

Total   124     0       7       117       0          0        0

-Nate
On Jul 23, 2015, at 6&#58;06 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26279#1437694346'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-23T23:32:26+00:00">Jul 23, 2015 11:32 PM UTC</time><a class="anchor" name="1437694346">&nbsp;</a></div><pre>Horst,

Yeah, I think the problem may be GLOW-specifc. Single core OSG glideins have actually been observed to run at your site successfully in good numbers over the last 30 days from our records. When I refer to matching, I mean having user jobs matched to run on the glideins we submit to your site from the factory. That is, we see glideins are getting through to your site from our factories. The problem Nate originally pointed out was that GLOW user jobs weren&#39;t getting matched to their glideins at your site for some reason.

Anyhow, let&#39;s wait and see what Nate has to say. He should be able to see if the GLOW glideins from your site are talking back to their frontend. It&#39;ll also give us some time to see if the OSG glideins have a successful life cycle and run user jobs.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26279#1437692772'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-23T23:06:12+00:00">Jul 23, 2015 11:06 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1437692772">&nbsp;</a></div><pre>Hi Marty,

yes, ATLAS is using a different pilot system -- but it works perfectly fine
on our end, so I&#39;m still not convinced that this isn&#39;t an issue with
your glidein factory. &#58;)

I currently see two jobs running in the OSG queue, one single and one MCORE&#58;

7938127 osg     RUN   osg        grid1       c156        *ter&#34; &#34;0&#34;  Jul 23 14&#58;28
7938144 glow    RUN   osg        grid1       16*c418     *ter&#34; &#34;2&#34;  Jul 23 14&#58;28

But the single core is running as osg, so I think that might be a test job
from one of the OSG folks. And then I see 15 glow jobs and 20 osg jobs
pending.

Are you seeing this problem only on OU_OSCER_ATLAS, but none of the other
sites you&#39;re running on? I don&#39;t fully understand what &#39;unmatched&#39; means
in this context,  since I&#39;m not familiar with glideinWMS.

We don&#39;t block any outbound connections from OSCER, so I don&#39;t think
that would be the problem.

I restarted the globus-scheduler-event-generator, just in case that
was causing problems. I don&#39;t think so, though, since that would also
cause ATLAS jobs to fail.

Oh, (xcount=16) is fine, too, all nodes are 16-core. I just gave (xcount=8)
as an example.

Cheers,

Horst</pre></div><div class='update_description'><i onclick="document.location='26279#1437691897'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-23T22:51:37+00:00">Jul 23, 2015 10:51 PM UTC</time><a class="anchor" name="1437691897">&nbsp;</a></div><pre>P.S. I also modified the multicore entries on both the GOC and SDSC factories. I rm&#39;d (jobtype=single) from the rsl, and set (xcount=8) from (xcount=16).

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26279#1437691732'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-23T22:48:52+00:00">Jul 23, 2015 10:48 PM UTC</time><a class="anchor" name="1437691732">&nbsp;</a></div><pre>Nate,

Are you able to see any glideins from OU talking back to your collectors?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26279#1437691675'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-23T22:47:55+00:00">Jul 23, 2015 10:47 PM UTC</time><a class="anchor" name="1437691675">&nbsp;</a></div><pre>Horst,

Thanks for the quick reply. I assume ATLAS jobs would be a separate issue from us since it&#39;s my understanding they have a different pilot system.

I removed all of the held glideins at both the single core and multicore glidein entries for your site. I also noticed a few glideins startup again at that point as well. I still have at least one OSG glidein that seems to be running on a single core glidein. Unfortunately, the GLOW glideins went unmatched again. As before, they seem to startup fine on your end. It&#39;s only when they attempt to connect back to the GLOW frontend collector that things seem to indicate a problem [1] --- like they aren&#39;t able to communicate back to it and register themselves so they can later receive user jobs. Do you allow all outbound traffic from your site?

Marty Kandes
UCSD Glidein Factory Operations

[1]

07/23/15 15&#58;32&#58;05 (pid&#58;45096) Buf&#58;&#58;write()&#58; condor_write() failed
07/23/15 15&#58;32&#58;07 (pid&#58;45096) condor_write()&#58; Socket closed when trying to write 4096 bytes to collector glidein2.chtc.wisc.edu&#58;9682, fd is 9, errno=104 Connection reset by peer
07/23/15 15&#58;32&#58;07 (pid&#58;45096) Buf&#58;&#58;write()&#58; condor_write() failed
07/23/15 15&#58;37&#58;44 (pid&#58;45096) condor_write()&#58; Socket closed when trying to write 4096 bytes to collector glidein2.chtc.wisc.edu&#58;9682, fd is 9, errno=104 Connection reset by peer
07/23/15 15&#58;37&#58;44 (pid&#58;45096) Buf&#58;&#58;write()&#58; condor_write() failed
07/23/15 15&#58;37&#58;46 (pid&#58;45096) condor_write()&#58; Socket closed when trying to write 4096 bytes to collector glidein2.chtc.wisc.edu&#58;9682, fd is 9, errno=104 Connection reset by peer

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26279#1437681279'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-23T19:54:39+00:00">Jul 23, 2015 07:54 PM UTC</time><a class="anchor" name="1437681279">&nbsp;</a></div><pre>Hi Nate and Marty,

I&#39;m not sure where the problem might be. We&#39;re not seeing anything wrong on our end. We currently see 8 GLOW jobs running in the OSG queue, and 35 pending. Nothing held.

And we have plenty of ATLAS jobs which are running and completing fine, which are coming in through the same gatekeeper, so I don&#39;t believe that there&#39;s anything wrong with our gatekeeper, otherwise they would be encountering errors as well, right?

Can you please tell us exactly how you are submitting them? I.e., what does your condor-g submit file look like? Maybe you could try some very simple condor-g test jobs with the same proxy, to see if they succeed?

By the way, if you&#39;re submitting MCORE jobs, you need to do that with (xcount=8), not with (jobtype=single).

Thanks,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='26279#1437678782'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-23T19:13:02+00:00">Jul 23, 2015 07:13 PM UTC</time><a class="anchor" name="1437678782">&nbsp;</a></div><pre>Nate,

See below for communication errors in startd logs trying to write back to your collector. This might be related to the matching problem you reported.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26279#1437678493'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-07-23T19:08:13+00:00">Jul 23, 2015 07:08 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1437678493">&nbsp;</a></div><pre>Hi OU admins,

We&#39;ve been observing glideins going unmatched and/or held at your gatekeeper [1]. The matching issue seems to mostly be confined to the multicore glideins. However, all recent glideins are going held. The hold reasons observed have been [2] [3]. For the matching problem, the only hint of something out of the ordinary here is a possible communication problem between your site and the VO frontend [4]. Can you have someone take a look at things on your end when you get a chance?

Thanks,

Marty Kandes
UCSD Glidein Factory Operations

[1]

grid1.oscer.ou.edu&#58;2119/jobmanager-lsf
queue=osg)(jobtype=single)(maxWallTime=1440)

[2]

3337464.1   feosgflock      7/10 07&#58;30 Globus error 31&#58; the job manager failed to cancel the job as requested
3337464.6   feosgflock      7/13 06&#58;53 Globus error 31&#58; the job manager failed to cancel the job as requested
3338183.5   feosgflock      7/23 10&#58;33 Globus error 31&#58; the job manager failed to cancel the job as requested
3338448.8   feglow          7/20 12&#58;49 Globus error 31&#58; the job manager failed to cancel the job as requested
3341545.0   feglow          7/23 10&#58;50 Globus error 31&#58; the job manager failed to cancel the job as requested

[3]

62558.2   feucsditb       7/23 17&#58;51 Globus error 17&#58; the job failed when the job manager attempted to run it
62558.3   feucsditb       7/23 17&#58;51 Globus error 17&#58; the job failed when the job manager attempted to run it
62558.4   feucsditb       7/23 17&#58;51 Globus error 17&#58; the job failed when the job manager attempted to run it

[4]

07/22/15 05&#58;25&#58;22 (pid&#58;3030) Buf&#58;&#58;write()&#58; condor_write() failed
07/22/15 05&#58;25&#58;39 (pid&#58;3030) State change&#58; benchmarks completed
07/22/15 05&#58;25&#58;39 (pid&#58;3030) slot1&#58; Changing activity&#58; Benchmarking -&#62; Idle
07/22/15 05&#58;25&#58;43 (pid&#58;3030) condor_write()&#58; Socket closed when trying to write 4096 bytes to collector glidein2.chtc.wisc.edu&#58;9634, fd is 10, errno=104 Connection reset by peer
07/22/15 05&#58;25&#58;43 (pid&#58;3030) Buf&#58;&#58;write()&#58; condor_write() failed
<div id='show_544881055' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_544881055'>07/22/15 05&#58;25&#58;45 (pid&#58;3030) condor_write()&#58; Socket closed when trying to write 4096 bytes to collector glidein2.chtc.wisc.edu&#58;9634, fd is 9, errno=104 Connection reset by peer
07/22/15 05&#58;25&#58;45 (pid&#58;3030) Buf&#58;&#58;write()&#58; condor_write() failed
07/22/15 05&#58;25&#58;46 (pid&#58;3030) condor_write()&#58; Socket closed when trying to write 4096 bytes to collector glidein2.chtc.wisc.edu&#58;9634, fd is 9, errno=104 Connection reset by peer

...

by peer
07/22/15 05&#58;44&#58;54 (pid&#58;3030) Buf&#58;&#58;write()&#58; condor_write() failed
07/22/15 05&#58;44&#58;56 (pid&#58;3030) condor_write()&#58; Socket closed when trying to write 4096 bytes to collector glidein2.chtc.wisc.edu&#58;9634, fd is 9, errno=104 Connection reset
by peer
07/22/15 05&#58;44&#58;56 (pid&#58;3030) Buf&#58;&#58;write()&#58; condor_write() failed
07/22/15 05&#58;44&#58;58 (pid&#58;3030) condor_write()&#58; Socket closed when trying to write 4096 bytes to collector glidein2.chtc.wisc.edu&#58;9634, fd is 9, errno=104 Connection reset
by peer
07/22/15 05&#58;44&#58;58 (pid&#58;3030) Buf&#58;&#58;write()&#58; condor_write() failed
07/22/15 05&#58;49&#58;42 (pid&#58;3030) No resources have been claimed for 1200 seconds
07/22/15 05&#58;49&#58;42 (pid&#58;3030) Shutting down Condor on this machine.
07/22/15 05&#58;49&#58;42 (pid&#58;3030) Got SIGTERM. Performing graceful shutdown.
07/22/15 05&#58;49&#58;42 (pid&#58;3030) shutdown graceful
07/22/15 05&#58;49&#58;42 (pid&#58;3030) Cron&#58; Killing all jobs
07/22/15 05&#58;49&#58;42 (pid&#58;3030) Cron&#58; Killing all jobs

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049

</div><script type='text/javascript'>
        $('#show_544881055').click(function() {
            $('#detail_544881055').slideDown("normal");
            $('#show_544881055').hide();
            $('#hide_544881055').show();
        });
        $('#hide_544881055').click(function() {
            $('#detail_544881055').slideUp();
            $('#hide_544881055').hide();
            $('#show_544881055').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F26279">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 26279});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
