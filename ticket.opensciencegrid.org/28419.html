<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[28419] HCC_US_BNL_gk01 - squid-related node validation failure</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=28419" method="post">
<div class="page-header">
    <h3><span class="muted">28419</span> / HCC_US_BNL_gk01 - squid-related node validation failure</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Marty Kandes</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">BNL_ATLAS_1</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">ATLAS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Marty Kandes</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USATLAS</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Closing</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-03-30</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USATLAS (BNL Prod)&nbsp;<a target="_blank" href="https://rt.racf.bnl.gov/rt/Ticket/Display.html?id=25914">25914</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/28419", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='28419#1459343609'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-30T13:13:29+00:00">Mar 30, 2016 01:13 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1459343609">&nbsp;</a></div><pre>Closing, as requested.</pre></div><div class='update_description'><i onclick="document.location='28419#1459276425'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-29T18:33:45+00:00">Mar 29, 2016 06:33 PM UTC</time><a class="anchor" name="1459276425">&nbsp;</a></div><pre>Let&#39;s go ahead and close this. I think we (CMS) will go with a different solution (making it the default for CMS on the next round of OSG software distribution).

thanks,
Bo

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='28419#1459276094'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-29T18:28:14+00:00">Mar 29, 2016 06:28 PM UTC</time><a class="anchor" name="1459276094">&nbsp;</a></div><pre>Hi Bo,

Can you and John/Xin discuss what course of action you all want to take here? It looks like there may have been some off-ticket discussions, but maybe no resolution?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='28419#1459187995'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-28T17:59:55+00:00">Mar 28, 2016 05:59 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459187995">&nbsp;</a></div><pre>Hi Vince,

<font color='#7F7E6F'>&#62; On Mar 28, 2016, at 12&#58;05 PM, OSG GOC TX via RT &#60;RT-RACF@....&#62;</font>
wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Good morning,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Is this ticket still on hold pending further conversation or has</font>
there
<font color='#7F7E6F'>&#62; been any offline communication I can add?  Please let me know if I</font>
can
<font color='#7F7E6F'>&#62; assist.</font>

I don���t know of any additional communication since my response on 20
Feb ��� which was echoed by the GOC ticket system on 25 Feb.

~John

-- by jd at Mon Mar 28 17&#58;59&#58;43 UTC 2016

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=25914</pre></div><div class='update_description'><i onclick="document.location='28419#1459181067'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-28T16:04:27+00:00">Mar 28, 2016 04:04 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1459181067">&nbsp;</a></div><pre>Good morning,

Is this ticket still on hold pending further conversation or has there been any offline communication I can add?  Please let me know if I can assist.

Thank you,</pre></div><div class='update_description'><i onclick="document.location='28419#1456000911'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-20T20:41:51+00:00">Feb 20, 2016 08:41 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1456000911">&nbsp;</a></div><pre>Hi Bo,

Regarding your second point&#58;

<font color='#7F7E6F'>&#62; Regarding 2), in principle you shouldn&#39;t be making a direct change</font>
to your compute nodes (any more than simply having the cvmfs repo
mounted). Our recommended approach is that you only make a change to
/etc/cvmfs/config.d/cms.cern.ch.local, which should only be triggered
when using the cvmfs repo on a given node. the only line that would
need to go in /etc/cvmfs/config.d/cms.cern.ch.local is&#58;

In reality, this would indeed require a change to our worker nodes&#58;
the &#96;/etc/cvmfs/config.d/cms.cern.ch.local&#96; file would need to be
created and placed on each node, in order for the CVMFS client to pick
up the variable and pass it to the mounted environment. In addition,
each site would need to define their own proper value for this
variable. If I���m not mistaken, this is the customization to which
others have objected, and asked that this change be made instead to
the CMS software, or to the CMS repository hosted within CVMFS, so
that local sites won���t need to make this customization locally.

~John

<font color='#7F7E6F'>&#62; On Feb 18, 2016, at 4&#58;03 PM, Bo Jayatilaka &#60;boj@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Hi Alex,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Sorry, I think I probably just didn&#39;t communicate this clearly when</font>
I first made the request!
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; It is correct that we use the symlink in</font>
/cvmfs/cms.cern.ch/SITECONF/local to determine what site-specific
settings to use (in terms of where data gets staged out and what DB
squids to read from). The problem with setting things in the glidein
is that the glideins coming in are generically CMS and in a sense only
<div id='show_590032136' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_590032136'>get information of where they&#39;re running when they land there. This
makes solution 1) very difficult as well.
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Regarding 2), in principle you shouldn&#39;t be making a direct change</font>
to your compute nodes (any more than simply having the cvmfs repo
mounted). Our recommended approach is that you only make a change to
/etc/cvmfs/config.d/cms.cern.ch.local, which should only be triggered
when using the cvmfs repo on a given node. the only line that would
need to go in /etc/cvmfs/config.d/cms.cern.ch.local is&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; export CMS_LOCAL_SITE=/opt/example.com/SITECONF/local</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I hope that makes what we&#39;re asking more clear.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; Bo</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; On Feb 18, 2016, at 3&#58;20 PM, alezayt &#60;alezayt@....&#62;</font>
wrote&#58;
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Bo,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I think we have an independent GOC ticket</font>
<font color='#7F7E6F'>&#62;&#62; <a href='https&#58;//ticket.grid.iu.edu/viewer?id=28419' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=28419</a></font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; that points out to the same problem with setting the</font>
<font color='#7F7E6F'>&#62;&#62; export CMS_LOCAL_SITE=/cvmfs/cms.cern.ch/SITECONF/T3_US_OSG/</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; config variable in the local file</font>
<font color='#7F7E6F'>&#62;&#62; /etc/cvmfs/config.d/cms.cern.ch.local</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; on the compute nodes of the BNL ATLAS farm.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; It turns out that CMS uses the /cvmfs/cms.cern.ch/SITECONF/local</font>
symlink (&#34;softlink&#34;) by default, which is not properly set at the
mounting time in the CVMFS CMS repository unless the local file
/etc/cvmfs/config.d/cms.cern.ch.local (with the proper export line
inside) is present on the compute node before the mount operation is
done.
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; So, what we though previously about setting the CMS_LOCAL_SITE</font>
environment variable in the CMS glideins for the opportunistic jobs
coming to BNL might as a potential solution will not work. It looks
like either (1) the CMS jobs submitted to BNL should go after the non-
default /cvmfs/cms.cern.ch/SITECONF/T3_US_OSG/ path by themselves, or
(2) we should re-consider making this configuration change on all
compute nodes, now that we understand the situation better.
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Can we get some feedback from CMS software people on wither or not</font>
the solution path (1) is really a possibility before we re-consider
the solution path (2)?
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks!</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Cheers,</font>
<font color='#7F7E6F'>&#62;&#62; Alex.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; -------- Forwarded Message --------</font>
<font color='#7F7E6F'>&#62;&#62; Subject&#58; 	[rt.racf.bnl.gov #25914] HCC_US_BNL_gk01 - squid-related</font>
node
<font color='#7F7E6F'>&#62;&#62; validation failure</font>
<font color='#7F7E6F'>&#62;&#62; Date&#58; 	Thu, 18 Feb 2016 13&#58;17&#58;07 -0500</font>
<font color='#7F7E6F'>&#62;&#62; From&#58; 	OSG GOC TX via RT &#60;RT-RACF@....&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Reply-To&#58; 	RT-RACF@....</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;  *Ticket URL&#58;*</font>
<a href='https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=25914' target='_blank' rel='nofollow'>https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=25914</a>
<font color='#7F7E6F'>&#62;&#62;  *Requestors&#58;*  tx+rtbnlprod_fp71@....</font>
<font color='#7F7E6F'>&#62;&#62;         *Ccs&#58;*  (None)</font>
<font color='#7F7E6F'>&#62;&#62;       *Queue&#58;*  GridServices</font>
<font color='#7F7E6F'>&#62;&#62;       *Owner&#58;*  Xin Zhao</font>
<font color='#7F7E6F'>&#62;&#62;      *Status&#58;*  /open/</font>
<font color='#7F7E6F'>&#62;&#62;    *Priority&#58;*  /Low/</font>
<font color='#7F7E6F'>&#62;&#62; *Transaction&#58;*  Correspondence added by osg-goc-rest</font>
<font color='#7F7E6F'>&#62;&#62;     *Subject&#58;*  HCC_US_BNL_gk01 - squid-related node validation</font>
failure
<font color='#7F7E6F'>&#62;&#62;          *OSG GOC Ticket&#58;*  28419</font>
&#60;<a href='28419.html' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=28419&#62</a>;
<font color='#7F7E6F'>&#62;&#62;     *Resource Group Name&#58;*  BNL-ATLAS</font>
<font color='#7F7E6F'>&#62;&#62;                 *VO Name&#58;*  ATLAS</font>
<font color='#7F7E6F'>&#62;&#62;           *Resource Name&#58;*  BNL_ATLAS_1</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
------------------------------------------------------------------------
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi,</font>
<font color='#7F7E6F'>&#62;&#62; This means cvmfs requires further configuration. In particular you</font>
need
<font color='#7F7E6F'>&#62;&#62; to set CMS_LOCAL_SITE in cvmfs.</font>
<font color='#7F7E6F'>&#62;&#62; for example&#58;</font>
<font color='#7F7E6F'>&#62;&#62; echo &#34;CMS_LOCAL_SITE=T3_US_HEPCloud&#34; &#62;</font>
<font color='#7F7E6F'>&#62;&#62; /etc/cvmfs/config.d/cms.cern.ch.local</font>
<font color='#7F7E6F'>&#62;&#62; this will make in cvmfs a soft link of local to T3_US_HEPCloud.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I am not aware of a opportunistic default name. You need to find</font>
out
<font color='#7F7E6F'>&#62;&#62; what is the appropriate definition for your site.</font>
<font color='#7F7E6F'>&#62;&#62; I hope this help you</font>
<font color='#7F7E6F'>&#62;&#62; Eduardo</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; by /DC=ch/DC=cern/OU=Organic</font>
<font color='#7F7E6F'>&#62;&#62; Units/OU=Users/CN=jramirez/CN=662428/CN=Juan Eduardo Ramirez Vargas</font>
<font color='#7F7E6F'>&#62;&#62; -- by goc at Thu Feb 18 18&#58;16&#58;42 UTC 2016</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ----</font>
<font color='#7F7E6F'>&#62; Bodhitha Jayatilaka, Fermilab Scientific Computing Division</font>
<font color='#7F7E6F'>&#62; @FNAL&#58; WH8NE 803, t&#58; 630-840-5110</font>
<font color='#7F7E6F'>&#62; @MIT&#58; 24-418, t&#58; 617-252-1588</font>
<font color='#7F7E6F'>&#62; boj@.... [<a href='http&#58;//www-cdf.fnal.gov/' target='_blank' rel='nofollow'>http&#58;//www-cdf.fnal.gov/</a>~boj]</font>
<font color='#7F7E6F'>&#62;</font>

-- by jd at Sat Feb 20 20&#58;39&#58;09 UTC 2016

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=25914
</div><script type='text/javascript'>
        $('#show_590032136').click(function() {
            $('#detail_590032136').slideDown("normal");
            $('#show_590032136').hide();
            $('#hide_590032136').show();
        });
        $('#hide_590032136').click(function() {
            $('#detail_590032136').slideUp();
            $('#hide_590032136').hide();
            $('#show_590032136').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28419#1455824698'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-18T19:44:58+00:00">Feb 18, 2016 07:44 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1455824698">&nbsp;</a></div><pre>Hi Eduardo,

It turns out there is already discussion going on between Bo Jayatilaka from
OSG and Alex/John from BNL on this exact issue, let&#39;s put on hold and see what
solution is coming up from that discussion...

Thanks,
Xin
-- by xinzhao at Thu Feb 18 19&#58;44&#58;49 UTC 2016

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=25914</pre></div><div class='update_description'><i onclick="document.location='28419#1455819402'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-18T18:16:42+00:00">Feb 18, 2016 06:16 PM UTC</time><a class="anchor" name="1455819402">&nbsp;</a></div><pre>Hi,
This means cvmfs requires further configuration. In particular you need to set CMS_LOCAL_SITE in cvmfs.
for example&#58;
echo &#34;CMS_LOCAL_SITE=T3_US_HEPCloud&#34; &#62; /etc/cvmfs/config.d/cms.cern.ch.local
this will make in cvmfs a soft link of local to T3_US_HEPCloud.

I am not aware of a opportunistic default name. You need to find out what is the appropriate definition for your site.
I hope this help you
Eduardo

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jramirez/CN=662428/CN=Juan Eduardo Ramirez Vargas</pre></div><div class='update_description'><i onclick="document.location='28419#1455806939'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-18T14:48:59+00:00">Feb 18, 2016 02:48 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1455806939">&nbsp;</a></div><pre>Hi Jeff,

Thanks for the reply, it&#39;s very helpful.

I checked the /cvmfs fire structure on our WNs, the path
/cvmfs/cms.cern.ch/SITECONF/local/ exists, but the sub-directory JobConfig
under it doesn&#39;t exist, not sure if this is a site cvmfs issue, or a VO config
issue ?

Thanks,
Xin
-- by xinzhao at Thu Feb 18 14&#58;48&#58;46 UTC 2016

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=25914</pre></div><div class='update_description'><i onclick="document.location='28419#1455750139'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-17T23:02:19+00:00">Feb 17, 2016 11:02 PM UTC</time><a class="anchor" name="1455750139">&nbsp;</a></div><pre>Hi,

Debugging of this script should have been directed to the CMS VO, as test_squid.sh is coming from their glidein frontend.

Xin, it looks like Marty didn&#39;t give you the actual failure output, I see in our stdout&#58;

Executing /home/condor/local/atlas/execute/dir_19056/glide_W0MJQd/client/test_squid.sh
node&#58; acas1809.usatlas.bnl.gov
SiteLocalConfig&#58; /cvmfs/cms.cern.ch/SITECONF/local/JobConfig/site-local-config.xml
test_squid.py&#58; Error. file /cvmfs/cms.cern.ch/SITECONF/local/JobConfig/site-local-config.xml does not exist
=== Glidein ending Wed Feb 17 17&#58;43&#58;59 EST 2016 (1455749039) with code 1 after 1217 ===

My guess is when CMS runs opportunistically, they assume this file is in cvmfs.  Can you please check to ensure /cvmfs/cms.cern.ch/SITECONF/local/JobConfig/site-local-config.xml is accessible from the WNs (maybe a permission issue?)

The pilot is mapping to the following user at your site&#58;
As&#58; uid=54004(uscms) gid=69904(uscms) groups=69904(uscms)

If you still need assistance, I can try finding the relevant CMS experts that understand the opportunistic submission setup.

Thanks,
Jeff Dost
OSG Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Jeffrey Michael Dost 694</pre></div><div class='update_description'><i onclick="document.location='28419#1455642885'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-16T17:14:45+00:00">Feb 16, 2016 05:14 PM UTC</time><a class="anchor" name="1455642885">&nbsp;</a></div><pre>Vince,

Can you recommend a squid expert to help Xin debug why test_squid.sh is failing?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='28419#1455051450'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-09T20:57:30+00:00">Feb 9, 2016 08:57 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1455051450">&nbsp;</a></div><pre>Hello,

Yes, I find the script. But, I am not sure what arguments need to be passed to
it... If someone could help me narrow down which step is failing, that would be
great.

Thanks,
Xin
-- by xinzhao at Tue Feb 09 20&#58;57&#58;08 UTC 2016

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=25914</pre></div><div class='update_description'><i onclick="document.location='28419#1454967384'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-08T21:36:24+00:00">Feb 8, 2016 09:36 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1454967384">&nbsp;</a></div><pre>Hi Xin,

Have you been able to pull the script you needed from /cvmfs?  If I can assist please let me know.

Thank you,</pre></div><div class='update_description'><i onclick="document.location='28419#1454621006'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-04T21:23:26+00:00">Feb 4, 2016 09:23 PM UTC</time><a class="anchor" name="1454621006">&nbsp;</a></div><pre>Hi Xin,

I would imagine you may be able to pull the script from /cvmfs. I think that&#39;s where the glideins get the script from. If not, perhaps try catching a copy from one of the glideins in /home/condor/local/atlas/execute. Sorry, I don&#39;t have a local copy myself. If you have trouble finding a copy yourself, let me know and I&#39;ll track one down for you.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='28419#1454615706'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-04T19:55:06+00:00">Feb 4, 2016 07:55 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1454615706">&nbsp;</a></div><pre>Hello,

Can I have the script to test manually ? I suppose it&#39;s run from the worker
nodes ?

Xin
-- by xinzhao at Thu Feb 04 19&#58;54&#58;58 UTC 2016

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=25914</pre></div><div class='update_description'><i onclick="document.location='28419#1454613790'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-04T19:23:10+00:00">Feb 4, 2016 07:23 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1454613790">&nbsp;</a></div><pre>Hi BNL admins,

We&#39;re observing CMS glideins fail node validation failure due to a squid-related issue [1] for glideins submitted to your HTCondor-CE [2]. Can you check on the squid status for us when you get a chance?

Thanks,

Marty Kandes
UCSD Glidein Factory Operations

[1]

=== Validation error in /home/condor/local/atlas/execute/dir_31709/glide_DRWhAr/client/test_squid.sh ===
Thu Feb 4 09&#58;03&#58;34 EST 2016 Error running &#39;/home/condor/local/atlas/execute/dir_31709/glide_DRWhAr/client/test_squid.sh&#39;
The test script did not produce an XML file. No further information available.
Thu Feb 4 09&#58;03&#58;35 EST 2016 Notifying VO of error

[2]

gridgk01.racf.bnl.gov

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F28419">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
