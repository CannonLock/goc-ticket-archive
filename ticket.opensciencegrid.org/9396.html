<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[9396] Gratia probe for UCSDT2-B not reporting since 10/6</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=9396" method="post">
<div class="page-header">
    <h3><span class="muted">9396</span> / Gratia probe for UCSDT2-B not reporting since 10/6</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">John Weigand</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">UCSDT2-B</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/resource</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">John Weigand</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-10-18</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">USCMS <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/9396", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/9396?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/9396?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Gratia%20probe%20for%20UCSDT2-B%20not%20reporting%20since%2010%2F6%20ISSUE%3D9396%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='9396#1289407992'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-10T16:53:12+00:00">Nov 10, 2010 04:53 PM UTC</time> by <b>GRATIA</b><a class="anchor" name="1289407992">&nbsp;</a></div><pre>The Fermi/Remedy ticket has been updated.

Work Info Type* &#58; Resolution Communications
Date+           &#58;
Source          &#58;
Summary*        &#58; Resolution Information
Notes           &#58; Ticket exchange lost track of this ticket.  OSG GOC closed this ticket.
Submitter*      &#58; tiradani

Fermi National Accelerator Laboratory Service DeskService Desk&#58; 630.840.2345</pre></div><div class='update_description'><i onclick="document.location='9396#1289407990'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-10T16:53:10+00:00">Nov 10, 2010 04:53 PM UTC</time> by <b>Fermilab</b><a class="anchor" name="1289407990">&nbsp;</a></div><pre>The Fermi/Remedy ticket has been resolved with the following solution.  Please resolve your ticket.

Resolution Categorization Tier 1 &#58;
Resolution Categorization Tier 2 &#58;
Resolution Categorization Tier 3 &#58;
Resolution                       &#58; Ticket exchange lost track of this ticket.  OSG GOC closed this ticket.
Resolution Method                &#58;

Fermi National Accelerator Laboratory Service DeskService Desk&#58; 630.840.2345</pre></div><div class='update_description'><i onclick="document.location='9396#1288371902'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-29T17:05:02+00:00">Oct 29, 2010 05:05 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1288371902">&nbsp;</a></div><pre>Closing.</pre></div><div class='update_description'><i onclick="document.location='9396#1287519328'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-19T20:15:28+00:00">Oct 19, 2010 08:15 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1287519328">&nbsp;</a></div><pre>Yes I would say close it, I did not open it and do not see a close button. &#58;)

Terrence</pre></div><div class='update_description'><i onclick="document.location='9396#1287516759'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-19T19:32:39+00:00">Oct 19, 2010 07:32 PM UTC</time><a class="anchor" name="1287516759">&nbsp;</a></div><pre>Terrence,

Seems reasonable to just close the ticket.  Maybe there was a full moon that night ;-).

Thanks for your patience.
John Weigand

-- by John Weigand</pre></div><div class='update_description'><i onclick="document.location='9396#1287513489'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-19T18:38:09+00:00">Oct 19, 2010 06:38 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1287513489">&nbsp;</a></div><pre>There is a small difference in the versions between the CE that always
reported, and the one that did not. Both of course have updates available.

osg-gw-2

Gratia Condor Probe 1.06.15i-1                           UPDATE AVAILABLE
[1.06.16b-1]
Gratia Metric Probe 1.06.15i-1                           UPDATE AVAILABLE
[1.06.16b-1]

osg-gw-4

Gratia Condor Probe 1.06.15h-1                           UPDATE AVAILABLE
[1.06.16b-1]
Gratia Metric Probe 1.06.15h-1                           UPDATE AVAILABLE
[1.06.16b-1]

In any case I am not too terribly worried about it unless it re-occurs. If it
does I will pay closer attention to the chain of events immediately prior to
it occuring.

Terrence

On Tuesday, October 19, 2010 11&#58;12&#58;25 am Terrence Martin wrote&#58;
<font color='#7F7E6F'>&#62; With very few exceptions no changes occur that are not done by me</font>
<font color='#7F7E6F'>&#62; personally, and the OSG CE are no exception to that rule.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The cron service was most definitely not turned off. RSV tests due to Lack</font>
<font color='#7F7E6F'>&#62; of CRL updates would be screaming long before gratia lack of reporting</font>
<font color='#7F7E6F'>&#62; wended its way through the system.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; It is possible that a configure-osg caused an issue. I have certainly run</font>
<font color='#7F7E6F'>&#62; that on several occasions and explains the dates change when the service</font>
<font color='#7F7E6F'>&#62; got restarted. What is a puzzle is why osg-gw-4 suffers from that issue</font>
<font color='#7F7E6F'>&#62; while osg- gw-2 does not, other than probably different gratia versions.</font>
<div id='show_1613807687' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1613807687'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The other possibly explanation is the OS patches that went in on Sept 22nd,</font>
<font color='#7F7E6F'>&#62; which is the true date of this problem starting, not Oct 6th, which is when</font>
<font color='#7F7E6F'>&#62; I ran the command by hand. Again though why osg-gw-4 and not osg-gw-2.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; To recap, the sequence of events that resulted in a fix was</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; vdt-control --off gratia-condor</font>
<font color='#7F7E6F'>&#62; cron entry gone</font>
<font color='#7F7E6F'>&#62; vdt-control --on gratia-condor</font>
<font color='#7F7E6F'>&#62; cron entry back with new times</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Up to that point the cron job would not run, but a copy paste of the cron</font>
<font color='#7F7E6F'>&#62; entry would run fine on the command line.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Terrence</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Tuesday, October 19, 2010 10&#58;53&#58;00 am Open Science Grid FootPrints wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1613807687').click(function() {
            $('#detail_1613807687').slideDown("normal");
            $('#show_1613807687').hide();
            $('#hide_1613807687').show();
        });
        $('#hide_1613807687').click(function() {
            $('#detail_1613807687').slideUp();
            $('#hide_1613807687').hide();
            $('#show_1613807687').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='9396#1287513306'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-19T18:35:06+00:00">Oct 19, 2010 06:35 PM UTC</time> by <b>VDT</b><a class="anchor" name="1287513306">&nbsp;</a></div><pre>On Oct 19, 2010, at 1&#58;11 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; It is possible that a configure-osg caused an issue. I have certainly run that</font>
<font color='#7F7E6F'>&#62; on several occasions and explains the dates change when the service got</font>
<font color='#7F7E6F'>&#62; restarted. What is a puzzle is why osg-gw-4 suffers from that issue while osg-</font>
<font color='#7F7E6F'>&#62; gw-2 does not, other than probably different gratia versions.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The other possibly explanation is the OS patches that went in on Sept 22nd,</font>
<font color='#7F7E6F'>&#62; which is the true date of this problem starting, not Oct 6th, which is when I</font>
<font color='#7F7E6F'>&#62; ran the command by hand. Again though why osg-gw-4 and not osg-gw-2.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; To recap, the sequence of events that resulted in a fix was</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; vdt-control --off gratia-condor</font>
<font color='#7F7E6F'>&#62; cron entry gone</font>
<font color='#7F7E6F'>&#62; vdt-control --on gratia-condor</font>
<font color='#7F7E6F'>&#62; cron entry back with new times</font>

Yeah, running configure-osg probably re-ran the underlying configure_gratia script, and that may have changed the times. You could see this by searching for &#34;configure_gratia&#34; in the vdt-install.log.

-alain</pre></div><div class='update_description'><i onclick="document.location='9396#1287511870'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-19T18:11:10+00:00">Oct 19, 2010 06:11 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1287511870">&nbsp;</a></div><pre>With very few exceptions no changes occur that are not done by me personally,
and the OSG CE are no exception to that rule.

The cron service was most definitely not turned off. RSV tests due to Lack of
CRL updates would be screaming long before gratia lack of reporting wended its
way through the system.

It is possible that a configure-osg caused an issue. I have certainly run that
on several occasions and explains the dates change when the service got
restarted. What is a puzzle is why osg-gw-4 suffers from that issue while osg-
gw-2 does not, other than probably different gratia versions.

The other possibly explanation is the OS patches that went in on Sept 22nd,
which is the true date of this problem starting, not Oct 6th, which is when I
ran the command by hand. Again though why osg-gw-4 and not osg-gw-2.

To recap, the sequence of events that resulted in a fix was

vdt-control --off gratia-condor
cron entry gone
vdt-control --on gratia-condor
cron entry back with new times

Up to that point the cron job would not run, but a copy paste of the cron
entry would run fine on the command line.

Terrence

On Tuesday, October 19, 2010 10&#58;53&#58;00 am Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9396#1287510788'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-19T17:53:08+00:00">Oct 19, 2010 05:53 PM UTC</time><a class="anchor" name="1287510788">&nbsp;</a></div><pre>Terrence,

I am assuming the &#34;restart&#34; you did was a &#39;vdt-control --off/on gratia-condor&#39; and that was it.  Correct?

You mentioned that the restart resulted in different cron times for the cron entry.  From what I can tell the times will only change if a configure-osg is performed which runs configure_gratia (with options to enable the gratia probe part of it).  So it seems after the upgrade, or a subsequent execution of configure-osg, the cron entry was never recycled using vdt-control --off/on.

Despite what I just mentioned, I tried to recreate the state you were in and couldn&#39;t.  The only thing that really would make sense of this is that the crond service was turned off at some point.  None of the VDT processes are aware of crond&#39;s state.

Are you sure you (or someone else) might have done something else while troubleshooting this?

John Weigand

-- by John Weigand</pre></div><div class='update_description'><i onclick="document.location='9396#1287504488'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-19T16:08:08+00:00">Oct 19, 2010 04:08 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1287504488">&nbsp;</a></div><pre>That is possibly related, certainly there was the application of all OS
patches to that time, that is a regular occurrence. A restart with vdt-control
seems to have addressed the issue, it just ran 3 minutes ago.

Terrence

On Monday, October 18, 2010 06&#58;47&#58;00 pm Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9396#1287499807'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-19T14:50:07+00:00">Oct 19, 2010 02:50 PM UTC</time> by <b>VDT</b><a class="anchor" name="1287499807">&nbsp;</a></div><pre>Without more details, it&#39;s hard to say. It&#39;s good to know that vdt-control enabled the service again. It would be interesting to know what happened at the time cron stopped. If you want me to look further, can you please run the following commands, as the same user that installed the VDT?

cd $VDT_LOCATION
. setup.sh  (or source setup.csh, as appropriate)
vdt-system-profiler

Then mail me the vdt-profile.txt that is created.

-alain

On Oct 18, 2010, at 8&#58;47 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9396#1287452831'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-19T01:47:11+00:00">Oct 19, 2010 01:47 AM UTC</time><a class="anchor" name="1287452831">&nbsp;</a></div><pre>Hi Terrence,

Did you upgrade your OSG install lately?  Garhan recently reported to me that Nebraska&#39;s Condor Gratia probe also stopped working after a recent OSG CE upgrade.

CC&#39;ing Garhan and Alain in case if this problem rings a bell for them.

Brian

-- by Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='9396#1287432128'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-18T20:02:08+00:00">Oct 18, 2010 08:02 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1287432128">&nbsp;</a></div><pre>So the vdt-control apparently &#34;fixed&#34; it. Now the probe is running, though at
3,13,33 etc,.. rather than 0,10,20 etc...

Terrence

On Monday, October 18, 2010 12&#58;42&#58;00 pm Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9396#1287430935'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-18T19:42:15+00:00">Oct 18, 2010 07:42 PM UTC</time><a class="anchor" name="1287430935">&nbsp;</a></div><pre>Terrence,

Any indication cron started it?  Anything in /var/log/cron?
This is not really making any sense.

The timestamp on the /osglocal/osgce/gratia/var/logs/gratia-probe-condor.log should show when the cron job last launched.
There should be a time-stamped log file in /osglocal/osgce/gratia/var/logs like...
-rw-r--r-- 1 root root 1088913 Oct 18 14&#58;37 2010-10-18.log
-rw-r--r-- 1 root root       0 Oct 18 14&#58;37 gratia-probe-condor.log

John

-- by John Weigand</pre></div><div class='update_description'><i onclick="document.location='9396#1287429067'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-18T19:11:07+00:00">Oct 18, 2010 07:11 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1287429067">&nbsp;</a></div><pre>It would be a clean run, no setting of the OSG env. The logs are not really
that useful, they look normal on the 22nd, the 6th and today, the cron just
does not run.

I am running it exactly as cron, except for the redirect of stderr to stdout,
but I do not see any stderr.

Notably the log is never even written from the cron job.

0,10,20,30,40,50 * * * *
/osglocal/osgce/gratia/probe/condor/condor_meter.cron.sh &#62;
/osglocal/osgce/gratia/var/logs/gratia-probe-condor.log 2&#62;&1

That should go off all the time, but it does not seem to. Is there an internal
lock system in this sh that might be catching things up? Looking at the script
some stuff is getting dev nulled, which is not helpful if there is an error.

Just ran another by hand, it all went again, no errors.

I used vdt-control just now to disable and enable the service again. The times
changed, path stayed the same.

/osglocal/osgce/gratia/probe/condor/condor_meter.cron.sh &#62;
/osglocal/osgce/gratia/var/logs/gratia-probe-condor.log 2&#62;&1

I will see if it fires when it says it will.

Terrence

On Monday, October 18, 2010 11&#58;35&#58;00 am Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9396#1287426914'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-18T18:35:14+00:00">Oct 18, 2010 06:35 PM UTC</time><a class="anchor" name="1287426914">&nbsp;</a></div><pre>Terrence,

Did the log file give any hints?  I can&#39;t see anything  that is not written there.

If nothing in the log files, did it just die or hang (and have to be killed)?

If it works when running by hand and not cron, I am guessing there is something in your environment, not in cron&#39;s. When running by hand (grabbing at straws here)..
- I assume you are root
- you logged in clean so essentially have the same env as root (ssh / su - )
- are you running it exactly as in cron with the full path specified.

John Weigand

-- by John Weigand</pre></div><div class='update_description'><i onclick="document.location='9396#1287422407'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-18T17:20:07+00:00">Oct 18, 2010 05:20 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1287422407">&nbsp;</a></div><pre>So at least on this side the problem seems to be that when run by hand that
the reporting works, but it is not happening via cron. I just started the
process up again (did so around the 6th after the job refused to run from the
22nd to the 6th.

Are there any special permissions etc. that gratia must operate under that
would occur under cron? The cron itself is under the root user.

Terrence

On Monday, October 18, 2010 07&#58;29&#58;00 am Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9396#1287411502'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-10-18T14:18:22+00:00">Oct 18, 2010 02:18 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1287411502">&nbsp;</a></div><pre>The Gratia probe for resource UCSDT2-B (condor&#58;osg-gw-4.t2.ucsd.edu) has not reported to the production Gratia database since 10/6/10.

My concern with this is related to WLCG Tier 2 reporting for resource UCSDT2.  This probe is reporting in Gratia as UCSDT2 although the FQDN associated with it in MyOsg is the UCSDT2-B resource and has comprised roughly 40% of the load reported to WLCG.  Hence, I do not know if this is a problem or not and if it is for UCSDT2 or UCSDT2-B.

Please advise if this &#34;not reporting since 10/6&#34; is a problem or not.

Thanks
John Weigand</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F9396">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 9396});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
