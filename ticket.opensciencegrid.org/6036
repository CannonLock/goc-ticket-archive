<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="/">
    <title>[6036] Other Issues</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="//netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="https://ticket.opensciencegrid.org/images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="https://ticket.opensciencegrid.org/lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=6036" method="post">
<div class="page-header">
    <h3><span class="muted">6036</span> / Other Issues</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Will Maier</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-12-10</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=6036", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="/6036?sort=up&"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="/6036?expandall=true&">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Other%20Issues%20ISSUE%3D6036%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='6036#1234295111'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-02-10T19:45:11+00:00">Feb 10, 2009 07:45 PM UTC</time> by <b>wcmaier@....</b><a class="anchor" name="1234295111">&nbsp;</a></div><pre>Hello again-

We just observed a similar job from (what appears to be) the same
user&#58;

USER       PID %CPU %MEM   VSZ  RSS TTY      STAT START   TIME COMMAND
osg_osg  24351 70.4  0.1 66216 23476 ?       R    10&#58;42 108&#58;19 python /cms/sw/pacman/pacman-3.21/bin/pacman -trust-all-caches -get <a href='http&#58;//www.ci.uchicago.edu/' target='_blank' rel='nofollow'>http&#58;//www.ci.uchicago.edu/</a>~houzx/pac-cache&#58;oops-0.1-linux-x86_64

The user is mapped to the osg_osg user account via the OSG VO.
strace shows that the job has gone very wrong&#58;

[...]
read(0, &#34;&#34;, 4096)                       = 0
ioctl(0, SNDCTL_TMR_TIMEBASE or TCGETS, 0x7fbfffa1c0) = -1 ENOTTY (Inappropriate ioctl for device)
read(0, &#34;&#34;, 4096)                       = 0
ioctl(0, SNDCTL_TMR_TIMEBASE or TCGETS, 0x7fbfffa1c0) = -1 ENOTTY (Inappropriate ioctl for device)
read(0, &#34;&#34;, 4096)                       = 0
ioctl(0, SNDCTL_TMR_TIMEBASE or TCGETS, 0x7fbfffa1c0) = -1 ENOTTY (Inappropriate ioctl for device)
read(0, &#34;&#34;, 4096)                       = 0
ioctl(0, SNDCTL_TMR_TIMEBASE or TCGETS, 0x7fbfffa1c0) = -1 ENOTTY (Inappropriate ioctl for device)
[...]

lsof shows (among other things) the following&#58;

COMMAND   PID    USER   FD   TYPE     DEVICE         SIZE      NODE NAME
python  24351 osg_osg  cwd    DIR       0,18         2048 154085125 /afs/hep.wisc.edu/osg/app_rw/osg/houzx/work-pac
python  24351 osg_osg    0r   CHR        1,3                   2050 /dev/null
python  24351 osg_osg    1w   REG        8,5 150505459712 134611265 /scratch/osg_home/osg_osg/.globus/job/cmsgrid01.hep.wisc.edu/24129.1234284135/stdout (deleted)
python  24351 osg_osg    2w   REG        8,5            0 134611266 /scratch/osg_home/osg_osg/.globus/job/cmsgrid01.hep.wisc.edu/24129.1234284135/stderr (deleted)

Is there any more information you need? I&#39;ve killed the misbehaving
job; it would be nice to clarify with the user what&#39;s going wrong.

Thanks!

<div id='show_980146530' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_980146530'>On Tue, Dec 02, 2008 at 08&#58;33&#58;00PM +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_980146530').click(function() {
            $('#detail_980146530').slideDown("normal");
            $('#show_980146530').hide();
            $('#hide_980146530').show();
        });
        $('#hide_980146530').click(function() {
            $('#detail_980146530').slideUp();
            $('#hide_980146530').hide();
            $('#show_980146530').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='6036#1228940974'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-12-10T20:29:34+00:00">Dec 10, 2008 08:29 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1228940974">&nbsp;</a></div><pre>Resolving this ticket.</pre></div><div class='update_description'><i onclick="document.location='6036#1228249991'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-12-02T20:33:11+00:00">Dec 2, 2008 08:33 PM UTC</time> by <b>wcmaier@....</b><a class="anchor" name="1228249991">&nbsp;</a></div><pre>Hi Kyle-

I haven&#39;t observed a recurrence of jobs similar to those I described
in my initial report. Since we fixed our GUMS mappings for MIS, I
don&#39;t expect that such jobs will end up on our CE (though they&#39;ll
run as the OSG VO somewhere on our cluster). While I think it would
be good to contact the user and troubleshoot their jobs, the impact
of this issue is greatly reduced as it will no longer interfere with
our CE&#39;s operation.

Thanks!

On Tue, Dec 02, 2008 at 08&#58;27&#58;00PM +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='6036#1228249676'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-12-02T20:27:56+00:00">Dec 2, 2008 08:27 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1228249676">&nbsp;</a></div><pre>Is the initial problem still going on?  Or any part of the problem?  I seem to recall
this same user having similar issues at a previous time and I&#39;m trying to hunt that down.

kyle</pre></div><div class='update_description'><i onclick="document.location='6036#1227556091'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-11-24T19:48:11+00:00">Nov 24, 2008 07:48 PM UTC</time> by <b>wcmaier@....</b><a class="anchor" name="1227556091">&nbsp;</a></div><pre>Hi Kyle-

We do use GUMS, but our configuration was overzealous in mapping to
our local osg_mis user. Dan and I have fixed that now; it seems
clear that the user was instead from the OSG VO itself.

The user running the disruptive job must still come from the list I
provided to you earlier, though. When I exclude Rob Quick&#39;s DN and
the DN for the OSG-VO test, the only active DN is the following&#58;

/DC=org/DC=doegrids/OU=People/CN=Zhengxiong Hou 510271

Since the job was running as the osg_mis user and the above DN was
the only one to map to osg_mis in the last week, it seems likely
that this is the responsible user.

On Fri, Nov 21, 2008 at 08&#58;15&#58;00PM +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='6036#1227298511'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-11-21T20:15:11+00:00">Nov 21, 2008 08:15 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1227298511">&nbsp;</a></div><pre>Hi-

I&#39;m somewhat alarmed by all of those users being listed in the MIS
VO, as they certainly shouldn&#39;t be.

The only users there that should be in the MIS VO are Tim Silvers and
Rob Quick.  The other users are absolutely not members of the MIS
VO.  MIS is a very small VO used only for monitoring.  Basically, it
has a few OSG Staff members in it.

How do you manage your gridmap file?  Do you use GUMS?

Kyle

On Nov 21, 2008, at 12&#58;21 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='6036#1227288071'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-11-21T17:21:11+00:00">Nov 21, 2008 05:21 PM UTC</time> by <b>wcmaier@....</b><a class="anchor" name="1227288071">&nbsp;</a></div><pre>Hi Kyle-

The following DNs have mapped to osg_mis on cmsgrid01.h.w.e since
2008.06.26[0]&#58;

# TIMES DN
30136 /DC=org/DC=doegrids/OU=People/CN=Xi Li 905786
10363 /DC=org/DC=doegrids/OU=People/CN=Tim Silvers (GridScan) 387103
4441 /DC=es/DC=irisgrid/O=ucm/CN=tino.vazquez
1288 /DC=org/DC=doegrids/OU=Services/CN=osg-vo-test/fnpcsrv1.fnal.gov&#34;
644 /DC=org/DC=doegrids/OU=People/CN=Jing Tie 328818&#34;
499 /DC=org/DC=doegrids/OU=People/CN=Rob Quick (GridScan) 445196
466 /DC=org/DC=doegrids/OU=People/CN=Zhengxiong Hou 510271&#34;
452 /DC=org/DC=doegrids/OU=People/CN=Zhengxiong Hou 510271
174 /DC=org/DC=doegrids/OU=People/CN=Jing Tie 328818
58 /DC=org/DC=doegrids/OU=People/CN=Alina Bejan (OSG VO) 9483

Of these, Zhengxiong Hou seems most likely to be &#39;houzx&#39;, though
I&#39;m not sure the owner of the pacman URL is necessarily related to
the person running the job.

Thanks!

[0] sed -e &#39;
/osg_mis/!d;
/DN=/!d;
s/^.*ts=&#92;(.*&#92;) event.*DN=&#34;&#92;(.*&#92;)&#34; Service_URL.*$/&#92;1 &#92;2/
s/ FQAN=&#34;.*//&#39; ${VDT_LOCATION}/globus/var/globus-gatekeeper.log |
cut -d &#39; &#39; -f 2 | sort | uniq -c | sort -rn

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='6036#1227218303'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-11-20T21:58:23+00:00">Nov 20, 2008 09:58 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1227218303">&nbsp;</a></div><pre>Will,

Could you give us the dn of the user that is mapping to the MIS VO?  Whoever houzx is
will probably hold the key to this.

Kyle</pre></div><div class='update_description'><i onclick="document.location='6036#1227106947'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-11-19T15:02:27+00:00">Nov 19, 2008 03:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1227106947">&nbsp;</a></div><pre>I administer the GLOW and GLOW-CMS resources on the OSG (cmsgrid01 and cmsgrid02.hep.wisc.edu, respectively). In the last two months, I&#39;ve noticed on three occasions that processes mapped to the MIS VO and running on the cmsgrid01.hep.wisc.edu CE have consumed large amounts of memory, causing the machine to swap and overall performance to degrade.

The most recent such incident occurred last night (2008.11.18) CST. In each case, I see the following process&#58;

python /cms/sw/pacman/pacman-3.21/bin/pacman -trust-all-caches -get <a href='http&#58;//www.ci.uchicago.edu/' target='_blank' rel='nofollow'>http&#58;//www.ci.uchicago.edu/</a>~houzx/pac-cache&#58;R-linux-x86_64

When I connect to the process with strace, I see that it isn&#39;t doing anything (likely blocked on IO). When I kill the process, the system&#39;s performance returns to normal.

Who should I contact to debug this issue?

Thanks!</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F6036">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="/images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 6036});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
