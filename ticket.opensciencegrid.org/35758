<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[35758] Grid Help</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=35758" method="post">
<div class="page-header">
    <h3><span class="muted">35758</span> / Grid Help</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Sherif Omran</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Sherif Omran</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2018-01-24</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/35758", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/35758?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/35758?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Grid%20Help%20ISSUE%3D35758%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='35758#1516632410'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-22T14:46:50+00:00">Jan 22, 2018 02:46 PM UTC</time> by <b>echism</b><a class="anchor" name="1516632410">&nbsp;</a></div><pre>I will close this ticket, but please contact us at goc@.... or open a ticket at ticket.grid.iu.edu if there is anything else at all I can do for you.

Thanks</pre></div><div class='update_description'><i onclick="document.location='35758#1516464552'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-20T16:09:12+00:00">Jan 20, 2018 04:09 PM UTC</time> by <b>sherif.omran@....</b><a class="anchor" name="1516464552">&nbsp;</a></div><pre>Elizabeth,

no thank you

On Jan 19, 2018, at 9&#58;19 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35758#1516389571'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-19T19:19:31+00:00">Jan 19, 2018 07:19 PM UTC</time> by <b>echism</b><a class="anchor" name="1516389571">&nbsp;</a></div><pre>Sherif,

Do you have more questions or requests?

Thank you</pre></div><div class='update_description'><i onclick="document.location='35758#1516202231'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-17T15:17:11+00:00">Jan 17, 2018 03:17 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1516202231">&nbsp;</a></div><pre>Sherif,

Unfortunately, the OSG doesn&#39;t have any pre-configured files for setting
up a cluster. We do have documentation for installing an HTCondor-CE
(<a href='https&#58;//opensciencegrid.github.io/docs/compute-element/install-htcondor-ce/' target='_blank' rel='nofollow'>https&#58;//opensciencegrid.github.io/docs/compute-element/install-htcondor-ce/</a>)
for when you&#39;ve finished setting up your cluster and want to contribute
to the grid.

What institution are you based out of? There may be local support there
for setting up a cluster. If not, your best bet would be the
htcondor-admin mailing list.

As for using the grid, the fastest way to get started would be to
register with OSG Connect&#58;
<a href='https&#58;//support.opensciencegrid.org/support/solutions/articles/5000632072-registration-and-login-for-osg-connect' target='_blank' rel='nofollow'>https&#58;//support.opensciencegrid.org/support/solutions/articles/5000632072-registration-and-login-for-osg-connect</a>

- Brian</pre></div><div class='update_description'><i onclick="document.location='35758#1516145714'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-16T23:35:14+00:00">Jan 16, 2018 11:35 PM UTC</time> by <b>sherif.omran@....</b><a class="anchor" name="1516145714">&nbsp;</a></div><pre>hi Brian,

I am interested in both using the grid and then contributing to the grid. However there are many difficulties in the former including configuration files and extra and i would like to ask if there are any preconfigured configuration files that i can use.

regards,
Sherif

On Jan 16, 2018, at 9&#58;01 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35758#1516129295'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-16T19:01:35+00:00">Jan 16, 2018 07:01 PM UTC</time> by <b>echism</b><a class="anchor" name="1516129295">&nbsp;</a></div><pre>Is there anything further on this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35758#1515522018'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-09T18:20:18+00:00">Jan 9, 2018 06:20 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1515522018">&nbsp;</a></div><pre>Sherif,

Do you want to be able to submit to 800+ PCs or offer your 800+ PCs to
the rest of the world? I would consider the former &#34;using the grid&#34; and
the latter &#34;contributing to the grid&#34;.

Nordugrid, EGI, and OSG are all research grids based in Scandinavia,
Europe, and North America, respectively. Are you doing scientific
research for an academic institution? If not, it&#39;s unlikely that you&#39;d
be able to participate in any of the aforementioned grids.

I believe an ARC-Condor cluster is a local HTCondor cluster behind an
ARC-CE, which is the CE solution in Nordugrid. If you plan on
contributing to Nordugrid, you&#39;ll likely need an ARC-CE but you should
get in touch with them about that.

The only configuration files that the OSG provides for HTCondor are the
configuration files needed for HTCondor-CE. There is no GUI for managing
the grid or submitting jobs.

OSG staff does not manage any nodes, that is up to the staff of the
local cluster. If you are performing research for an academic
institution, you can create an OSG connect account
(<a href='http&#58;//osgconnect.net/' target='_blank' rel='nofollow'>http&#58;//osgconnect.net/</a>) to submit jobs to the OSG. Fair share is
decided by the sites contributing to the OSG as well as the virtual
organization you submit from (if you joined OSG Connect, this would be OSG).

Although most sites in the OSG run HTCondor clusters, there are other
batch system software used and supported in the OSG such as Slurm, PBS,
LSF, and SGE. I can&#39;t say I&#39;ve ever heard of jppf.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35758#1515218352'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-06T05:59:12+00:00">Jan 6, 2018 05:59 AM UTC</time> by <b>sherif.omran@....</b><a class="anchor" name="1515218352">&nbsp;</a></div><pre>Brian,

Many thanks for your reply, care and for the description, yes i am interested in growing first my grid network into 800+ PCs around the world and i am also interested to offer the open scientific community this computational power. I had no luck with the HTcondor mailing list. Currently, i have security related issues and will ask in this tickets specific questions first related to growing the HTcodor grid and then joining the OSG. But first i need to understand some point. What is the Nordugrid and ARC-Condur cluster? Do we need to have ARC?  Do you have preconfigured configuration files for the HTcondor? How do you manage the grid from the webserver? Is there a graphical user interface for managing the grid and submitting jobs? I know in HTcondor, i can submit a simple job to one node. How do you submit your jobs to have full use of all the nodes? How can i join the OSG to submit jobs to it as well? how do you manage the OSG nodes to define a fair use of cpu cycles?
There are other research grids, but i got lost with them? Why do you use HTCondor mainly and not jppf.org?

thank you for your patience

regards,
Sherif

On Jan 5, 2018, at 9&#58;13 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35758#1515183192'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-05T20:13:12+00:00">Jan 5, 2018 08:13 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1515183192">&nbsp;</a></div><pre>Sherif,

I think there may be some terminology confusion, your setup of 1 submitter and 2 workers would be what we&#39;d consider a &#34;local cluster&#34;. A grid is a collection of local clusters whose worker nodes are available to external users to run computational tasks. HTCondor-CE acts as a public gateway to your local cluster, allowing external OSG users to run jobs on your worker nodes. Is this what you&#39;re interested in?

If you&#39;re more interested in growing your cluster for your personal or local department/institution to use then you&#39;d have better luck with the htcondor-users mailing list (<a href='http&#58;//research.cs.wisc.edu/htcondor/mail-lists/' target='_blank' rel='nofollow'>http&#58;//research.cs.wisc.edu/htcondor/mail-lists/</a>) with specific questions.

- Brian</pre></div><div class='update_description'><i onclick="document.location='35758#1515179312'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-05T19:08:32+00:00">Jan 5, 2018 07:08 PM UTC</time> by <b>echism</b><a class="anchor" name="1515179312">&nbsp;</a></div><pre>Dr. Omran,

HTCondor-CE is software for joining a computational structure to OSG. HTCondor is software for a smaller distributed computing structure, like a cluster. If I understand correctly and you are building a computer cluster that you want to connect to OSG, you want both of these products. However, if you are still building a cluster and it is not yet working, I personally would start with HTCondor only, and when you have HTCondor working successfully, and basic cluster mechanics in place, then install HTCondor-CE.

I have added the developers of this software to this ticket. You will probably have more questions and we will be available to answer them.

Welcome!</pre></div><div class='update_description'><i onclick="document.location='35758#1515177167'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-05T18:32:47+00:00">Jan 5, 2018 06:32 PM UTC</time> by <b>echism</b><a class="anchor" name="1515177167">&nbsp;</a></div><pre>Dear Sir,

I am trying to test a simple grid with 3 PCs, (1 Linux with HTCondor running as submitter), 1 Windows (worker) and 1 Linux (worker).
HTcondor is running fine and sees the workers.
However, i want to cooperate with OSG because i will be adding more nodes later on (on the fly).

Now i am lost between HTcondor CE and HTCondor. Which one should i use at my site?
The website states that you can help me in various issues to join the grid. Could you please help me

thank you in advance

regards,

Dr. Sherif Omran
Lindau, Germany</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F35758">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 35758});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
