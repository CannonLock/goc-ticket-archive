<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[7772] USATLAS T2s periodically disappear from cern BDII</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=7772" method="post">
<div class="page-header">
    <h3><span class="muted">7772</span> / USATLAS T2s periodically disappear from cern BDII</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Xin Zhao</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-02-02</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/7772", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/7772?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/7772?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20USATLAS%20T2s%20periodically%20disappear%20from%20cern%20BDII%20ISSUE%3D7772%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='7772#1265145507'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-02-02T21:18:27+00:00">Feb 2, 2010 09:18 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1265145507">&nbsp;</a></div><pre>Closing this ticket and stopping testing. We will consider long term legitimate monitoring for the future.</pre></div><div class='update_description'><i onclick="document.location='7772#1264706045'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-28T19:14:05+00:00">Jan 28, 2010 07:14 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1264706045">&nbsp;</a></div><pre>Removing myself and Arvind from this ticket.</pre></div><div class='update_description'><i onclick="document.location='7772#1264613225'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-27T17:27:05+00:00">Jan 27, 2010 05:27 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1264613225">&nbsp;</a></div><pre>Dan and All,

I&#39;ve updated the scripts to capture the error messages we saw two types of errors.

ldap_result&#58; Can&#39;t contact LDAP server (-1)
This is probably a network error as the server could not be reached. There were two of these in the past ~24 hours.

The other&#58;

No such object (32)
This means the object is not listed in the BDII and points to a real publishing issue. In this case all of these errors can be attributed to the MWT2_IU which is experiencing issues. See MyOSG link&#58; <a href='http&#58;//tinyurl.com/y9ybjow.' target='_blank' rel='nofollow'>http&#58;//tinyurl.com/y9ybjow.</a>

Rob</pre></div><div class='update_description'><i onclick="document.location='7772#1264517526'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-26T14:52:06+00:00">Jan 26, 2010 02:52 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1264517526">&nbsp;</a></div><pre>One more report&#58;

Number of tests VS the OSG BDII&#58; 124168
Number of failures VS OSG BDII&#58; 53 (Excluding the WT2 Scheduled Maintenance)
Percentage of Failures&#58; 0.04%

Number of tests VS the EGEE BDII&#58; 124168
Number of failures VS EGEE BDII&#58; 113 (Excluding the WT2 Scheduled Maintenance)
Percentage of Failures&#58; 0.09%

I will report on this at the Production meeting today and request this ticket be closed.</pre></div><div class='update_description'><i onclick="document.location='7772#1264516816'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-26T14:40:16+00:00">Jan 26, 2010 02:40 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1264516816">&nbsp;</a></div><pre>Rob, all,

Is ticket ready to be closed? I suspect it is but would like to give others a chance to respond. Setting NAD to Jan 29th.

-ag</pre></div><div class='update_description'><i onclick="document.location='7772#1264187849'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-22T19:17:29+00:00">Jan 22, 2010 07:17 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1264187849">&nbsp;</a></div><pre>After one week, here are some data points&#58;

Number of tests VS the OSG BDII&#58; 80200
Number of failures VS OSG BDII&#58; 37 (Excluding the WT2 Scheduled Maintenance)
Percentage of Failures&#58; 0.04%

Number of tests VS the EGEE BDII&#58; 80200
Number of failures VS EGEE BDII&#58; 94 (Excluding the WT2 Scheduled Maintenance)
Percentage of Failures&#58; 0.12%

If anything the number have gotten stronger sine the return from the holiday weekend.</pre></div><div class='update_description'><i onclick="document.location='7772#1263911211'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-19T14:26:51+00:00">Jan 19, 2010 02:26 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1263911211">&nbsp;</a></div><pre>Here is a analysis message I&#39;ve sent Dan after running tests throughout the long weekend&#58;

Dan,

As you know I ran tests over the weekend to see if we could find any
failures in the BDII using the testing script Xin and Burt supplied.
And from what I see, while there were failures, they are so
significantly insignificant and varied they are going to be very
difficult to track. Here are some numbers and notes...

Number of tests VS the OSG BDII&#58; 43120
Number of failures VS OSG BDII&#58; 30
Percentage of Failures&#58; 0.06%
Note on OSG BDII&#58; 9 USATLAS sites tested. BNL is the only site with NO
errors. One common event local which seems to be local to IU at 04&#58;14
EST Saturday morning affected all tier 2s, nothing in the logs of the
local machine of BDII look unusually at this time, we can only
hypothesize a short network event. The other possibility is some
common event to all Tier 2s, but I think this unlikely.

Number of tests VS the EGEE BDII&#58; 43120
Number of failures VS EGEE BDII&#58; 65
Percentage of Failures&#58; 0.15%
Notes&#58; 53 of the 65 Failures are BNL. No obvious common thread to
other failures. The 04&#58;14 event seen at OSG does not seem to be picked
up by the EGEE BDII. We have no access to logs to follow up on this,
but can if necessary.

Conclusion&#58; These failures are so rare and there are so many possibly
errors (local to the machine running the tests, local to the CE
producing the data, local to the BDII, network along the line, etc.),
unless we see a spike in these errors, we are searching for a needle
in a haystack and would be better served looking at more pressing
matters until these errors become significant. I will continue to
run these tests for awhile, in case there was a lull in activity
<div id='show_512185265' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_512185265'>during the holiday weekend that led to less than normal errors.

We should ask Xin if he is seeing, or has seen, more substantial
errors. I am working from home today, so if you would like to talk
before the production meeting please use my cell at 317-695-3276.

Rob
</div><script type='text/javascript'>
        $('#show_512185265').click(function() {
            $('#detail_512185265').slideDown("normal");
            $('#show_512185265').hide();
            $('#hide_512185265').show();
        });
        $('#hide_512185265').click(function() {
            $('#detail_512185265').slideUp();
            $('#hide_512185265').hide();
            $('#show_512185265').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='7772#1263906208'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-19T13:03:28+00:00">Jan 19, 2010 01:03 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1263906208">&nbsp;</a></div><pre>I am changing the NAD and will await a response from Arvind.

Kyle</pre></div><div class='update_description'><i onclick="document.location='7772#1263580747'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-15T18:39:07+00:00">Jan 15, 2010 06:39 PM UTC</time> by <b>Xin zhao</b><a class="anchor" name="1263580747">&nbsp;</a></div><pre>Hi Arvind,

The GIP validator page validates information that OSG sites are
publishing. But I think what we are checking here is why the information
published to OSG and LCG BDII get lost
occasionally.  It is possible that the info is lost at the source site
level in the first place, though. Another point is that I don&#39;t know how
often the GIP validator runs the checking. From
our observation,  the problem with LCG BDII losing some information is
intermittent, and that usually get back quickly, so that&#39;s why Burt
suggests us to run the checking every minute.

Anyway, to go back to the problem. From a user&#39;s point of view, we see
failures sometimes when querying LCG BDII for the SE information, for
some USATLAS T2 sites. I think the
problem we need to understand is why and where does the occasional
information losing happens, it might be &#58;

1) happening at the LCG BDII;
2) happening at the OSG interop BDII, so LCG BDII doesn&#39;t have it;
3) happening at the site GIP/CEmon level, so the OSG BDII doesn&#39;t have it;
4) caused by network hiccups somewhere?

Thanks,
Xin

On 1/15/2010 12&#58;55 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7772#1263578249'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-15T17:57:29+00:00">Jan 15, 2010 05:57 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1263578249">&nbsp;</a></div><pre>Adding myself to the ticket -ag</pre></div><div class='update_description'><i onclick="document.location='7772#1263578123'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-15T17:55:23+00:00">Jan 15, 2010 05:55 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1263578123">&nbsp;</a></div><pre>[Ticket-meta - removed rsv-sam mailing list  and Laurence Field from ticket, since this discussion appears to be OSG specific]

Xin, all,

I checked with Tony Tiradani (added to ticket&#39;s CC), and as I&#39;d suspected, he confirmed that the GIP validator (that Tony developed and that) GOC runs, already does this test. The (current status) results are presented in MyOSG; for example here is the past for your RG&#58;
<a href='http&#58;//tinyurl.com/ybsk3k3' target='_blank' rel='nofollow'>http&#58;//tinyurl.com/ybsk3k3</a>

I am not sure how we should proceed based on this additional piece of information. Perhaps one or more of the following are ways forward&#58;

- admins need to follow the status page (&#39;s XML for machine readable output) for failures? and/or
- we need to add this to the list of things that folks can subscribe to notifications for (if critical) and/or
- you are looking for graphs of historical good/bad states? (which we do not provide in MyOSG right now)

Cheers,
-ag</pre></div><div class='update_description'><i onclick="document.location='7772#1263576067'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-15T17:21:07+00:00">Jan 15, 2010 05:21 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1263576067">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Below is the script&#58;</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//www.usatlas.bnl.gov/' target='_blank' rel='nofollow'>http&#58;//www.usatlas.bnl.gov/</a>~xinzhao/scripts/bdii_test_new.sh</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; It is very straightforward to understand it, I add some comments there.</font>
<font color='#7F7E6F'>&#62; Basically it runs a ldap query to check if the interested info is</font>
<font color='#7F7E6F'>&#62; present in the remote ldap servers, then report the result to ganglia,</font>
<font color='#7F7E6F'>&#62; and save it into a local file as well. You can use your own plot tool,</font>
<font color='#7F7E6F'>&#62; don&#39;t have to rely on ganglia.</font>
<font color='#7F7E6F'>&#62;</font>

Thanks Xin, this script looks very similar to one Burt gave me sometime
in the past. We will look into deploying this at the GOC level.</pre></div><div class='update_description'><i onclick="document.location='7772#1263415687'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-13T20:48:07+00:00">Jan 13, 2010 08:48 PM UTC</time> by <b>Xin zhao</b><a class="anchor" name="1263415687">&nbsp;</a></div><pre>Hi Arvind,

Below is the script&#58;
<a href='http&#58;//www.usatlas.bnl.gov/' target='_blank' rel='nofollow'>http&#58;//www.usatlas.bnl.gov/</a>~xinzhao/scripts/bdii_test_new.sh

It is very straightforward to understand it, I add some comments there.
Basically it runs a ldap query to check if the interested info is
present in the remote ldap servers, then report the result to ganglia,
and save it into a local file as well. You can use your own plot tool,
don&#39;t have to rely on ganglia.

Cheers,
Xin

On 1/13/2010 3&#58;00 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7772#1263413800'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-13T20:16:40+00:00">Jan 13, 2010 08:16 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1263413800">&nbsp;</a></div><pre>I&#39;m adding Dan to this ticket so he can keep informed of the movement of this issue.</pre></div><div class='update_description'><i onclick="document.location='7772#1263412805'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-13T20:00:05+00:00">Jan 13, 2010 08:00 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1263412805">&nbsp;</a></div><pre>Xin,

Does Ganglia need to be installed? I assume so.

Please send us the script, and if possible explain what it does exactly so we could consider writing a similar script in Python or shell script (so that we do not need Ganglia to be installed assuming your answer to the above question is &#34;yes&#34;)

Cheers,
-ag

PS I apologize if you already sent me the script, and I misplaced it!</pre></div><div class='update_description'><i onclick="document.location='7772#1263328750'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-12T20:39:10+00:00">Jan 12, 2010 08:39 PM UTC</time> by <b>Xin zhao</b><a class="anchor" name="1263328750">&nbsp;</a></div><pre>Hello,

I have been running a ganglia script to continuously check the
availability of the USATLAS T2 SE info on OSG and cern BDII servers, and
see occasional drops, recovered quickly though. Not sure if it&#39;s caused
by network on my side, or really the service on the BDII server side.
It would be good for GOC to run the monitoring script and closely
monitor the BDII server on site. If that&#39;s ok, I can send the script
Burt sent me to GOC for you to run.

Thanks,
Xin

On 1/12/2010 9&#58;03 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7772#1263305037'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-12T14:03:57+00:00">Jan 12, 2010 02:03 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1263305037">&nbsp;</a></div><pre>Waiting for Rob&#39;s update, as he&#39;s to check on this today.

Kyle</pre></div><div class='update_description'><i onclick="document.location='7772#1262188565'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-30T15:56:05+00:00">Dec 30, 2009 03:56 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1262188565">&nbsp;</a></div><pre>I check on the status of this at the next Production meeting I&#39;ll be attending on the 12th, setting next action to that date. Xin, if you have any update before then, please let me know.</pre></div><div class='update_description'><i onclick="document.location='7772#1261588024'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-23T17:07:04+00:00">Dec 23, 2009 05:07 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1261588024">&nbsp;</a></div><pre>Ok...reopened and changing next action date while awaiting update.</pre></div><div class='update_description'><i onclick="document.location='7772#1261519398'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-22T22:03:18+00:00">Dec 22, 2009 10:03 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1261519398">&nbsp;</a></div><pre>Reopening this ticket, it looks as if ATLAS is going to be running this service at BNL, but until we have confirmation I&#39;m going to leave this ticket open.</pre></div><div class='update_description'><i onclick="document.location='7772#1261070527'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-17T17:22:07+00:00">Dec 17, 2009 05:22 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1261070527">&nbsp;</a></div><pre>Closing.</pre></div><div class='update_description'><i onclick="document.location='7772#1260474429'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-10T19:47:09+00:00">Dec 10, 2009 07:47 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1260474429">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #14797]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; xinzhao
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by xinzhao
Subject&#58; Open Science Grid&#58; USATLAS T2s periodically disappear from cern BDII ISSUE=7772 PROJ=71

Hello,

It&#39;s still under investigation.

Xin</pre></div><div class='update_description'><i onclick="document.location='7772#1260474427'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-10T19:47:07+00:00">Dec 10, 2009 07:47 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1260474427">&nbsp;</a></div><pre>Kyle,

I&#39;ve just now created a JIRA ticket for internal tracking, so feel free
to close this ticket.

-ag

<font color='#7F7E6F'>&#62; I&#39;m not sure if this ticket shoudl be closed or not, can someone clarify for me?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font></pre></div><div class='update_description'><i onclick="document.location='7772#1260473785'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-10T19:36:25+00:00">Dec 10, 2009 07:36 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1260473785">&nbsp;</a></div><pre>I&#39;m not sure if this ticket shoudl be closed or not, can someone clarify for me?

Thanks.

Kyle</pre></div><div class='update_description'><i onclick="document.location='7772#1259859515'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-12-03T16:58:35+00:00">Dec 3, 2009 04:58 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1259859515">&nbsp;</a></div><pre>I&#39;m not sure if this ticket shoudl be closed or not, can someone clarify for me?

Thanks.

Kyle</pre></div><div class='update_description'><i onclick="document.location='7772#1259177587'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-25T19:33:07+00:00">Nov 25, 2009 07:33 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1259177587">&nbsp;</a></div><pre>Arvind mentioned that GOC folks don&#39;t have access to glite-sd-query, so they have no way to test whether Hiro&#39;s command is working.

Here&#39;s a short method for installing the RPMs (three RPMs get pulled in total, no Globus stuff)&#58;
&#34;&#34;&#34;
curl <a href='http&#58;//grid-deployment.web.cern.ch/grid-deployment/glite/repos/3.2/glite-UI.repo' target='_blank' rel='nofollow'>http&#58;//grid-deployment.web.cern.ch/grid-deployment/glite/repos/3.2/glite-UI.repo</a> &#62; /etc/yum.repos.d/glite-UI.repo
# Edit the repo file so all gLite repos are off by default
yum install --enablerepo=glite-UI glite-service-discovery-cli glite-UI glite-service-discovery-bdii-c

export LD_LIBRARY_PATH=$LD_LIBRARY_PATH&#58;/opt/glite/lib64
export GLITE_SD_PLUGIN=bdii; LCG_GFAL_INFOSYS=&#60;hostname&#62;&#58;2170 /opt/glite/bin/glite-sd-query -t SRM -s WT2 -x --xml
&#34;&#34;&#34;

The glite command&#39;s exit code is 1 if there are no sites found.

Someone should be able to set up a new ganglia metric and do continuous monitoring of all the CERN and GOC BDIIs for failure.

Brian</pre></div><div class='update_description'><i onclick="document.location='7772#1259167867'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-25T16:51:07+00:00">Nov 25, 2009 04:51 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1259167867">&nbsp;</a></div><pre>And things are back to normal.

Can you set up a Nagios alert for glite-sd-query on that BDII as well as

is1.grid.iu.edu&#58;2180
is2.grid.iu.edu&#58;2180

I haven&#39;t yet eliminated the possibility we temporarily fed incorrect data

Brian</pre></div><div class='update_description'><i onclick="document.location='7772#1259167686'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-25T16:48:06+00:00">Nov 25, 2009 04:48 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1259167686">&nbsp;</a></div><pre>Hey Xin,

I queried all the IP addresses for exp-bdii.cern.ch, which pulls information from the GOC.  Output below.

BU is missing from 2 / 6 of the hosts for exp-bdii.cern.ch.  However, it appears in both GOC BDIIs.  I think the error is somewhere at CERN.

I will repost this message to the GOC ticket.

I know, for CMS sites, the CERN BDIIs remove any site that is not passing SAM tests using a component called FCR.  Could this be happening to BU and MWT2_UC?

Brian

bash-3.00$ LCG_GFAL_INFOSYS=128.142.142.159&#58;2170 glite-sd-query -t SRM -s WT2 -x --xml | head -n 2

&#60;service name=&#34;httpg&#58;//osgserv04.slac.stanford.edu&#58;8443/srm/v2/server&#34;&#62;
bash-3.00$ LCG_GFAL_INFOSYS=128.142.142.161&#58;2170 glite-sd-query -t SRM -s WT2 -x --xml | head -n 2
No entries found
bash-3.00$ LCG_GFAL_INFOSYS=128.142.143.183&#58;2170 glite-sd-query -t SRM -s WT2 -x --xml | head -n 2
No entries found
bash-3.00$ LCG_GFAL_INFOSYS=128.142.198.40&#58;2170 glite-sd-query -t SRM -s WT2 -x --xml | head -n 2

&#60;service name=&#34;httpg&#58;//osgserv04.slac.stanford.edu&#58;8443/srm/v2/server&#34;&#62;
bash-3.00$ LCG_GFAL_INFOSYS=128.142.198.41&#58;2170 glite-sd-query -t SRM -s WT2 -x --xml | head -n 2

&#60;service name=&#34;httpg&#58;//osgserv04.slac.stanford.edu&#58;8443/srm/v2/server&#34;&#62;
bash-3.00$ LCG_GFAL_INFOSYS=128.142.198.42&#58;2170 glite-sd-query -t SRM -s WT2 -x --xml | head -n 2

&#60;service name=&#34;httpg&#58;//osgserv04.slac.stanford.edu&#58;8443/srm/v2/server&#34;&#62;
bash-3.00$ LCG_GFAL_INFOSYS=128.142.198.43&#58;2170 glite-sd-query -t SRM -s WT2 -x --xml | head -n 2

&#60;service name=&#34;httpg&#58;//osgserv04.slac.stanford.edu&#58;8443/srm/v2/server&#34;&#62;
bash-3.00$ LCG_GFAL_INFOSYS=is1.grid.iu.edu&#58;2180 glite-sd-query -t SRM -s WT2 -x --xml | head -n 2

&#60;service name=&#34;httpg&#58;//osgserv04.slac.stanford.edu&#58;8443/srm/v2/server&#34;&#62;
bash-3.00$ LCG_GFAL_INFOSYS=is.grid.iu.edu&#58;2180 glite-sd-query -t SRM -s WT2 -x --xml | head -n 2
<div id='show_1357508797' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1357508797'>
&#60;service name=&#34;httpg&#58;//osgserv04.slac.stanford.edu&#58;8443/srm/v2/server&#34;&#62;
</div><script type='text/javascript'>
        $('#show_1357508797').click(function() {
            $('#detail_1357508797').slideDown("normal");
            $('#show_1357508797').hide();
            $('#hide_1357508797').show();
        });
        $('#hide_1357508797').click(function() {
            $('#detail_1357508797').slideUp();
            $('#hide_1357508797').hide();
            $('#show_1357508797').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='7772#1259156166'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-25T13:36:06+00:00">Nov 25, 2009 01:36 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1259156166">&nbsp;</a></div><pre>Either is fine - I just want to see if there&#39;s a difference between the OSG BDII and the LCG BDII.  This way, we could eliminate a site issue.

(Do note that some of the LCG BDIIs are also load-balanced hosts.)

I have not yet been able to replicate any issues.

Brian</pre></div><div class='update_description'><i onclick="document.location='7772#1259155448'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-25T13:24:08+00:00">Nov 25, 2009 01:24 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1259155448">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; When you do these tests, can you tell us the value of $LCG_GFAL_INFOSYS?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Can you repeat these tests with&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; LCG_GFAL_INFOSYS=lcg-bdii.cern.ch&#58;2170</font>
<font color='#7F7E6F'>&#62; LCG_GFAL_INFOSYS=is.grid.iu.edu&#58;2170</font>
<font color='#7F7E6F'>&#62; LCG_GFAL_INFOSYS=is1.grid.iu.edu&#58;2170</font>
<font color='#7F7E6F'>&#62; LCG_GFAL_INFOSYS=is2.grid.iu.edu&#58;2170</font>
<font color='#7F7E6F'>&#62;</font>

Brian,

Did you mean 2180 for the is, is1, is2 servers? Or, did you
intentionally want them to test on port 2170?</pre></div><div class='update_description'><i onclick="document.location='7772#1259102885'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-24T22:48:05+00:00">Nov 24, 2009 10:48 PM UTC</time> by <b>Burt Holzman</b><a class="anchor" name="1259102885">&nbsp;</a></div><pre>Ok.  Could Hiro try the the ldapsearch I suggested next time things
disappear to see if everything&#39;s gone or just a subset?

Also, could he try the query directly against the IU BDII as well when
things are busted? (export LCG_GFAL_INFOSYS is.grid.iu.edu&#58;2170)

Finally, the two sites you mention -- MWT2_UC and BU_ATLAS_Tier2 are
both running early OSG 1.0.  I don&#39;t know if that is contributing to the
cause.

- B</pre></div><div class='update_description'><i onclick="document.location='7772#1259102526'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-24T22:42:06+00:00">Nov 24, 2009 10:42 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1259102526">&nbsp;</a></div><pre>Hey Xin, Hiro,

When you do these tests, can you tell us the value of $LCG_GFAL_INFOSYS?

Can you repeat these tests with&#58;

LCG_GFAL_INFOSYS=lcg-bdii.cern.ch&#58;2170
LCG_GFAL_INFOSYS=is.grid.iu.edu&#58;2170
LCG_GFAL_INFOSYS=is1.grid.iu.edu&#58;2170
LCG_GFAL_INFOSYS=is2.grid.iu.edu&#58;2170

This should enable us to discover what host is dropping your data.

Brian</pre></div><div class='update_description'><i onclick="document.location='7772#1259098926'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-24T21:42:06+00:00">Nov 24, 2009 09:42 PM UTC</time> by <b>xinzhao@....</b><a class="anchor" name="1259098926">&nbsp;</a></div><pre>Hi Burt,

What we see is from running the glite-sd-query command. Just now we saw
this behavior again, snippet of stdout from command line is (quoted from
Hiro, who is the main DDM person at BNL)&#58;

&#34;...
glite-sd-query -t SRM -s WT2 -x --xml
No entries found

glite-sd-query -t SRM -s MWT2_UC -x --xml
No entries found

glite-sd-query -t SRM -s AGLT2 -x --xml

&#60;service name=&#34;httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2&#34;&#62;
&#60;parameters&#62;
&#60;endpoint&#62;httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2&#60;/endpoint&#62;
&#60;type&#62;SRM&#60;/type&#62;
&#60;version&#62;2.2.0&#60;/version&#62;
...
&#34;

Now as I check it, they look ok again.

Thanks,
Xin</pre></div><div class='update_description'><i onclick="document.location='7772#1259097846'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-24T21:24:06+00:00">Nov 24, 2009 09:24 PM UTC</time> by <b>Burt Holzman</b><a class="anchor" name="1259097846">&nbsp;</a></div><pre>Hi Xin,

Do the sites completely disappear from the CERN BDII, or just some part
of the information?  (Does ldapsearch -xLLL -h lcg-bdii.cern.ch&#58;2170 -b
mds-vo-name=MWT2_UC,mds-vo-name=local,o=grid return anything when this
happens?)

- B</pre></div><div class='update_description'><i onclick="document.location='7772#1259095866'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-24T20:51:06+00:00">Nov 24, 2009 08:51 PM UTC</time> by <b>laurence.field@....</b><a class="anchor" name="1259095866">&nbsp;</a></div><pre>I will be out of the office until 7th Dec.  For information system related issues, please email project-grid-info-support@..... For anything else
contact Oliver.Keeble@.....</pre></div><div class='update_description'><i onclick="document.location='7772#1259095639'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-24T20:47:19+00:00">Nov 24, 2009 08:47 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1259095639">&nbsp;</a></div><pre>I am adding Laurence Field and rsv-sam to this.  I am only adding RSV-SAM as an FYI and perhaps they could provide clues, but this is a BDII issue overall.

We checked our monitoring, RSV metrics since Nov 23 00&#58;00 all produce 41 or 42 OSG resource groups on our Interop-BDII (port 2180)</pre></div><div class='update_description'><i onclick="document.location='7772#1259093386'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-11-24T20:09:46+00:00">Nov 24, 2009 08:09 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1259093386">&nbsp;</a></div><pre>Hello,

Today we noticed that some (not all) USATLAS T2 sites, e.g. BU_ATLAS_Tier2 and MWT2_UC, disappear from the cern BDII periodically, it&#39;s like their information come and go, this will potentially cause massive failures in data transfer to these T2 sites. As we check the OSG interop BDII for these sites, from the BDII status URL, they are shown there just fine. We wonder if there is hiccup in the process of updating cern BDII from OSG, or in the operation of cern BDII. Could you help check this?

Thanks,
Xin</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F7772">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
