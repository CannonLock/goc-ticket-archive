<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[20583] Inquiry - OSG Email DOSAR VOMS server error (non-fatal)</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=20583" method="post">
<div class="page-header">
    <h3><span class="muted">20583</span> / Inquiry - OSG Email DOSAR VOMS server error (non-fatal)</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Horst Severin</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Close</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-06-27</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Carl Edquist <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/20583", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='20583#1403807753'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-26T18:35:53+00:00">Jun 26, 2014 06:35 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1403807753">&nbsp;</a></div><pre>Horst, et all,

We&#39;ve had some email discussion about how to deal with these DN discrepancies between the vomses and the .lsc files going forward... The &#34;right&#34; thing to do seems to be to keep them consistent even though it&#39;s not currently enforced.  We&#39;ve added a script that we can use to do a cross-check before each new vo-client version as part of the release process.  There are several of these discrepancies currently; hopefully clearing them up for this next version onwards will cut down on the confusion  &#58;)

Thanks!
Carl</pre></div><div class='update_description'><i onclick="document.location='20583#1403646685'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-24T21:51:25+00:00">Jun 24, 2014 09:51 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1403646685">&nbsp;</a></div><pre>By the way, I emailed Andrea Ceccanti (the current VOMS maintainer) about this question -- he said the original idea was to have an additional check on the server identity, but it was never really implemented, and as far as he&#39;s aware the DN in the vomses file is ignored by the clients.

So, yeah, we ought to have them match but it doesn&#39;t actually break anything if not.

Carl</pre></div><div class='update_description'><i onclick="document.location='20583#1403559017'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-23T21:30:17+00:00">Jun 23, 2014 09:30 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1403559017">&nbsp;</a></div><pre>I just talked with Tim Theisen, and we are planning to make a new version of the vo-client package for the next release (July 8).

There isn&#39;t a JIRA ticket for that yet, but I believe the new version will have the fixes for both files.  (Rob Quick can confirm)

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='20583#1403557753'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-23T21:09:13+00:00">Jun 23, 2014 09:09 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1403557753">&nbsp;</a></div><pre>Hi Edgar,

as long as both files will get fixed, you can close this ticket again. &#58;)

Thanks a lot,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20583#1403548374'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-23T18:32:54+00:00">Jun 23, 2014 06:32 PM UTC</time><a class="anchor" name="1403548374">&nbsp;</a></div><pre>Hi Horst,

It looks to me that Carl answered your questions, please let me know if we can close this ticket. Or do you prefer to update the /etc/vomse with the correct DN entry and close this ticket on the new release?

Edgar Fajardo
OSG Software Support
efajardo@....

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='20583#1403347271'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-21T10:41:11+00:00">Jun 21, 2014 10:41 AM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1403347271">&nbsp;</a></div><pre>Hi Carl,

ah, I see. I think that makes sense. I&#39;m not sure, either, why it
doesn&#39;t seem to check the DN in /etc/vomses, but we should definitely
fix that file, too.

Thanks a lot,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20583#1403313086'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-21T01:11:26+00:00">Jun 21, 2014 01:11 AM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1403313086">&nbsp;</a></div><pre>So, it looks like voms-proxy-init uses both /etc/vomses and the .lsc files.

For vomses, it first tries to load ~/.glite/vomses and then /etc/vomses, and, the &#34;Using configuration file ...&#34; messages get printed before attempting to open them.  Maybe that&#39;s misleading but it does seem to be behaving as the author intended.

From the vomses file, it finds the VO in question and does load all fields (including the DN).

Then there is a check() function that tries to load the .lsc file&#58;

voms_cert_dir + &#34;/&#34; + voname + &#34;/&#34; + hostname + &#34;.lsc&#34;

if it can open it, it appears to do some x509 verification on it.  That&#39;s probably why messing with either line in the .lsc file causes voms-proxy-init to fail (as it did for me).

It looks like if the .lsc file is absent it&#39;s supposed to fall back on other files under the vomsdir for the same VO.

In theory I think the DN in the vomses file is supposed to match the one in the .lsc file, but apparently there&#39;s not a check for that, and I don&#39;t know what the consequences are for having it wrong in vomses, if any.

The code is kind of hard to follow and, in any case, I&#39;m not an expert, but I can try to dig deeper if you&#39;d like to hear more details.

Carl</pre></div><div class='update_description'><i onclick="document.location='20583#1403193345'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-19T15:55:45+00:00">Jun 19, 2014 03:55 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1403193345">&nbsp;</a></div><pre>Carl will take a look at the VOMS source and see which files that it is using.</pre></div><div class='update_description'><i onclick="document.location='20583#1403118231'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-18T19:03:51+00:00">Jun 18, 2014 07:03 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1403118231">&nbsp;</a></div><pre>Software,

Do you think you could look into this and perhaps shed some light on the strangeness that Soichi and Horst are seeing?

Thanks!

-Kyle</pre></div><div class='update_description'><i onclick="document.location='20583#1403033660'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-17T19:34:20+00:00">Jun 17, 2014 07:34 PM UTC</time><a class="anchor" name="1403033660">&nbsp;</a></div><pre>Hi Kyle,

sure, that may be a good idea, since we still don&#39;t understand why
this seems to work without updating /etc/vomses, when that file
clearly should be updated as well ...

Thanks a lot,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='20583#1403031198'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-17T18:53:18+00:00">Jun 17, 2014 06:53 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1403031198">&nbsp;</a></div><pre>Horst/Soichi,

I can add the software team on here if you&#39;d like.  That way you can discuss VOMS with them.  Just let me know.

THanks,
Kyle</pre></div><div class='update_description'><i onclick="document.location='20583#1401983776'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-05T15:56:16+00:00">Jun 5, 2014 03:56 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1401983776">&nbsp;</a></div><pre>Hi Soichi,

yes, I noticed that, too, that it still works without fixing /etc/vomses,
and no, I&#39;m not sure exactly what it&#39;s used for -- but I still think
it&#39;s important. &#58;)

We should ask an expert about that.

Thanks a lot,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20583#1401983181'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-06-05T15:46:21+00:00">Jun 5, 2014 03:46 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1401983181">&nbsp;</a></div><pre>Yes, I should update the DN listed in /etc/vomses also.

Although.. I don&#39;t know what the DN in /eetc/vomses is used for. I can put bogus entry there and voms-proxy-init works just fine. Do you know what it is used for? GUMS maybe?</pre></div><div class='update_description'><i onclick="document.location='20583#1401454752'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-30T12:59:12+00:00">May 30, 2014 12:59 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1401454752">&nbsp;</a></div><pre>Oh wait --

I think /etc/vomses needs to be updated, too, right?

Thanks,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20583#1401454750'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-30T12:59:10+00:00">May 30, 2014 12:59 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1401454750">&nbsp;</a></div><pre>Hi Soichi,

okay, sounds good!

I think I saw your email with the proposed changes, but I didn&#39;t think
you were waiting for a response from us (DOSAR), but rather from
the operations team. Apologies if I misunderstood that.

No big deal, we&#39;ll get it eventually! &#58;)

Thanks,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20583#1401453437'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-30T12:37:17+00:00">May 30, 2014 12:37 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1401453437">&nbsp;</a></div><pre>Horst,

We apologize for not including this update. I proposed the updates to dosar LCS files (along with other VOs like NYSGRID and HCC) but I never heard back, so we ended up not including it for the latest vo-client. I have proposed a new procedure to streamline how and when to update these LSC files in the future.

In the mean time, I have committed following changes.

diff --git a/vomsdir/dosar/voms.dosar.org.lsc b/vomsdir/dosar/voms.dosar.org.lsc
index 63d44e9..addd3ca 100644
--- a/vomsdir/dosar/voms.dosar.org.lsc
+++ b/vomsdir/dosar/voms.dosar.org.lsc
@@ -1,2 +1,2 @@
-/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=http/voms.dosar.org
+/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=voms.dosar.org
/DC=com/DC=DigiCert-Grid/O=DigiCert Grid/CN=DigiCert Grid CA-1

This should be included in our next vo-client release, but I am not sure when that will be. I will find out shortly..

Soichi</pre></div><div class='update_description'><i onclick="document.location='20583#1401448272'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-30T11:11:12+00:00">May 30, 2014 11:11 AM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1401448272">&nbsp;</a></div><pre>Hi Soichi,

I just had a look and it doesn&#39;t seem like vo-client-54-1.osg31.el6.noarch
actually fixed this problem, since neither /etc/vomses nor
/etc/grid-security/vomsdir/dosar/voms.dosar.org.lsc seem to have been
updated to remove the &#39;http/&#39; from voms.dosar.org &#39;s DN.

Was that omitted for some reason, or am I looking at the wrong files?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='20583#1401387078'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-29T18:11:18+00:00">May 29, 2014 06:11 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1401387078">&nbsp;</a></div><pre>Does anyone have any update on this thread? If there is nothing that I need to do, I&#39;d like to be removed from the assignee.</pre></div><div class='update_description'><i onclick="document.location='20583#1400862035'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-23T16:20:35+00:00">May 23, 2014 04:20 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1400862035">&nbsp;</a></div><pre>I believe Scott is working with Tony to get a new version of vo-client released soon
<font color='#7F7E6F'>&#62; <a href='https&#58;//ticket.grid.iu.edu/21208' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/21208</a></font>

I can make the change to dosar/voms.dosar.org.lsc if you want it to be part of the new release.

By the way, there are several other LSC files that needs to be updated (NYSGRID, HCC, CompBioGrid, ILC, and probably many more..)</pre></div><div class='update_description'><i onclick="document.location='20583#1400602283'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-20T16:11:23+00:00">May 20, 2014 04:11 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1400602283">&nbsp;</a></div><pre>Holding for Rob&#39;s return and a proper release of the VO package.</pre></div><div class='update_description'><i onclick="document.location='20583#1399292950'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-05T12:29:10+00:00">May 5, 2014 12:29 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1399292950">&nbsp;</a></div><pre>Horst,

So this looks like it&#39;s working now, but i&#39;ll need to wait for Elizabeth to return from her time away to check this.  Putting this on hold now.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='20583#1397686870'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-04-16T22:21:10+00:00">Apr 16, 2014 10:21 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1397686870">&nbsp;</a></div><pre>Hi again,

I played around with this some more, and I noticed that &#39;voms-proxy-init
-debug&#39; gives me some more information about which vomses file is read&#58;

----

[hs@osgitb1 ~]$ voms-proxy-init -debug -voms dosar
Detected Globus version&#58; 2.2
Unspecified proxy version, settling on Globus version&#58; 2
Number of bits in key &#58;1024
Files being used&#58;
CA certificate file&#58; none
Trusted certificates directory &#58; /etc/grid-security/certificates
Proxy certificate file &#58; /tmp/x509up_u1502
User certificate file&#58; /home/hs/.globus/usercert.pem
User key file&#58; /home/hs/.globus/userkey.pem
Output to /tmp/x509up_u1502
Enter GRID pass phrase&#58;
Your identity&#58; /DC=com/DC=DigiCert-Grid/O=Open Science
Grid/OU=People/CN=Horst Severini 27
Using configuration file /home/hs/.glite/vomses
Using configuration file /etc/vomses
Creating temporary proxy to /tmp/tmp_x509up_u1502_16210
......................................++++++
................++++++
Done
Contacting  voms.dosar.org&#58;15000 [/DC=com/DC=DigiCert-Grid/O=Open
Science Grid/OU=Services/CN=voms.dosar.org] &#34;dosar&#34; Done
Creating proxy to /tmp/x509up_u1502 ...............++++++
...............++++++
Done

Your proxy is valid until Thu Apr 17 04&#58;48&#58;06 2014
----
<div id='show_387311040' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_387311040'>
However, the first part is not correct, since the file
/home/hs/.glite/vomses doesn&#39;t exist in my home directory, so it
couldn&#39;t have been used. Does that need to be fixed in the
voms-proxy-init debug code?

I did fix the DOSAR CN in both /etc/vomses and
/etc/grid-security/vomsdir/dosar/voms.dosar.org.lsc , so I think that if
you can fix this for the next OSG release as well, then we should be all
set!

Thanks a lot,

Horst
</div><script type='text/javascript'>
        $('#show_387311040').click(function() {
            $('#detail_387311040').slideDown("normal");
            $('#show_387311040').hide();
            $('#hide_387311040').show();
        });
        $('#hide_387311040').click(function() {
            $('#detail_387311040').slideUp();
            $('#hide_387311040').hide();
            $('#show_387311040').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='20583#1397597236'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-04-15T21:27:16+00:00">Apr 15, 2014 09:27 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1397597236">&nbsp;</a></div><pre>Hi again,

I have verified that the access time of /etc/vomses is indeed a red
herring -- i.e., this changed in RHEL6 such that accessing a file will
no longer immediately show it as recently accessed with &#39;ls -aou&#39;.

So my guess is that both /etc/vomses and
/etc/grid-security/vomsdir/dosar/voms.dosar.org.lsc are indeed being
read by &#39;voms-proxy-init&#39;?

If that&#39;s correct, then I think the CN of the DOSAR VOMS cert needs to
be updated in both of them, and the &#39;http/&#39; removed. Can that be done
for the next update release? Or is there a deeper problem with the VOMS
server? Shouldn&#39;t be ...

Thanks a lot,

Horst

On 04/14/2014 02&#58;51 PM, Horst Severini wrote&#58;
<font color='#7F7E6F'>&#62; Hi all,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; is my assessment correct that both /etc/vomses and</font>
<font color='#7F7E6F'>&#62; /etc/grid-security/vomsdir/dosar/voms.dosar.org.lsc need to be updated</font>
<font color='#7F7E6F'>&#62; and have the &#39;http/&#39; removed from the DOSAR CN, in order to fix this error?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; So have there been any changes for DOSAR in the VOMS files last week, or</font>
<font color='#7F7E6F'>&#62; has this been incorrect since we updated the expired DOEGrids certs with</font>
<font color='#7F7E6F'>&#62; DigiCert certs, and we just never noticed?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; And why doesn&#39;t voms-proxy-init look at /etc/vomses when invoked? What&#39;s</font>
<font color='#7F7E6F'>&#62; that file used for then? Just curious ...</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Wait -- there seems to be an issue on osgitb1 that the &#39;last accessed</font>
<font color='#7F7E6F'>&#62; time&#39; reported by &#39;ls -aou&#39; doesn&#39;t get updated properly for some</font>
<div id='show_1169044039' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1169044039'><font color='#7F7E6F'>&#62; reason, so maybe /etc/vomses *is* read by voms-proxy-init, and I just</font>
<font color='#7F7E6F'>&#62; can&#39;t see that because of that lag?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;      Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On 04/09/2014 04&#58;48 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Elizabeth,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; yes, I&#39;m afraid the DOSAR VOMS server web interface is currently broken,</font>
<font color='#7F7E6F'>&#62;&#62; and the LaTech admins are working on that. The VOMS server itself</font>
<font color='#7F7E6F'>&#62;&#62; is working fine, though.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; But I just compared the config files between the old working wlcgclient</font>
<font color='#7F7E6F'>&#62;&#62; and the new osg-wn-client, and I noticed that in the old version,</font>
<font color='#7F7E6F'>&#62;&#62; the vomses file contains</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; &#34;dosar&#34; &#34;voms.dosar.org&#34; &#34;15000&#34; &#34;/DC=com/DC=DigiCert-Grid/O=Open</font>
<font color='#7F7E6F'>&#62;&#62; Science Grid/OU=Services/CN=voms.dosar.org&#34; &#34;dosar&#34;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; whereas the new /etc/vomses contains</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; &#34;dosar&#34; &#34;voms.dosar.org&#34; &#34;15000&#34; &#34;/DC=com/DC=DigiCert-Grid/O=Open</font>
<font color='#7F7E6F'>&#62;&#62; Science Grid/OU=Services/CN=http/voms.dosar.org&#34; &#34;dosar&#34;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; So it looks like the certificate DN should be voms.dosar.org,</font>
<font color='#7F7E6F'>&#62;&#62; and not http/voms.dosar.org .</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Changing /etc/voms didn&#39;t fix the problem, though; I had to change</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; /etc/grid-security/vomsdir/dosar/voms.dosar.org.lsc</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; in order to make the error go away.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; So I guess voms-proxy-init doesn&#39;t actually look at /etc/vomses?</font>
<font color='#7F7E6F'>&#62;&#62; Strange ...</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; So were either of these files -- /etc/vomses or</font>
<font color='#7F7E6F'>&#62;&#62; /etc/grid-security/vomsdir/dosar/voms.dosar.org.lsc --</font>
<font color='#7F7E6F'>&#62;&#62; changed during the vo-client update this week?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Or maybe this was always broken, and we just didn&#39;t notice it,</font>
<font color='#7F7E6F'>&#62;&#62; since until very recently we only used the old wlcgclient</font>
<font color='#7F7E6F'>&#62;&#62; (which I had fixed by hand when we updated the VOMS host cert</font>
<font color='#7F7E6F'>&#62;&#62; from DOEGrids to DigiCert) to generate proxies?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;     Horst</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Open Science Grid FootPrints&#60;osg@....&#62;  wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#62;[Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1169044039').click(function() {
            $('#detail_1169044039').slideDown("normal");
            $('#show_1169044039').hide();
            $('#hide_1169044039').show();
        });
        $('#hide_1169044039').click(function() {
            $('#detail_1169044039').slideUp();
            $('#hide_1169044039').hide();
            $('#show_1169044039').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='20583#1397505253'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-04-14T19:54:13+00:00">Apr 14, 2014 07:54 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1397505253">&nbsp;</a></div><pre>Hi all,

is my assessment correct that both /etc/vomses and
/etc/grid-security/vomsdir/dosar/voms.dosar.org.lsc need to be updated
and have the &#39;http/&#39; removed from the DOSAR CN, in order to fix this error?

So have there been any changes for DOSAR in the VOMS files last week, or
has this been incorrect since we updated the expired DOEGrids certs with
DigiCert certs, and we just never noticed?

And why doesn&#39;t voms-proxy-init look at /etc/vomses when invoked? What&#39;s
that file used for then? Just curious ...

Wait -- there seems to be an issue on osgitb1 that the &#39;last accessed
time&#39; reported by &#39;ls -aou&#39; doesn&#39;t get updated properly for some
reason, so maybe /etc/vomses *is* read by voms-proxy-init, and I just
can&#39;t see that because of that lag?

Thanks a lot,

Horst

On 04/09/2014 04&#58;48 PM, Horst Severini wrote&#58;
<font color='#7F7E6F'>&#62; Hi Elizabeth,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; yes, I&#39;m afraid the DOSAR VOMS server web interface is currently broken,</font>
<font color='#7F7E6F'>&#62; and the LaTech admins are working on that. The VOMS server itself</font>
<font color='#7F7E6F'>&#62; is working fine, though.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; But I just compared the config files between the old working wlcgclient</font>
<font color='#7F7E6F'>&#62; and the new osg-wn-client, and I noticed that in the old version,</font>
<font color='#7F7E6F'>&#62; the vomses file contains</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#34;dosar&#34; &#34;voms.dosar.org&#34; &#34;15000&#34; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=voms.dosar.org&#34; &#34;dosar&#34;</font>
<font color='#7F7E6F'>&#62;</font>
<div id='show_944325866' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_944325866'><font color='#7F7E6F'>&#62; whereas the new /etc/vomses contains</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#34;dosar&#34; &#34;voms.dosar.org&#34; &#34;15000&#34; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=http/voms.dosar.org&#34; &#34;dosar&#34;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; So it looks like the certificate DN should be voms.dosar.org,</font>
<font color='#7F7E6F'>&#62; and not http/voms.dosar.org .</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Changing /etc/voms didn&#39;t fix the problem, though; I had to change</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; /etc/grid-security/vomsdir/dosar/voms.dosar.org.lsc</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; in order to make the error go away.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; So I guess voms-proxy-init doesn&#39;t actually look at /etc/vomses?</font>
<font color='#7F7E6F'>&#62; Strange ...</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; So were either of these files -- /etc/vomses or</font>
<font color='#7F7E6F'>&#62; /etc/grid-security/vomsdir/dosar/voms.dosar.org.lsc --</font>
<font color='#7F7E6F'>&#62; changed during the vo-client update this week?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Or maybe this was always broken, and we just didn&#39;t notice it,</font>
<font color='#7F7E6F'>&#62; since until very recently we only used the old wlcgclient</font>
<font color='#7F7E6F'>&#62; (which I had fixed by hand when we updated the VOMS host cert</font>
<font color='#7F7E6F'>&#62; from DOEGrids to DigiCert) to generate proxies?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Open Science Grid FootPrints&#60;osg@....&#62;  wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; &#62;[Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_944325866').click(function() {
            $('#detail_944325866').slideDown("normal");
            $('#show_944325866').hide();
            $('#hide_944325866').show();
        });
        $('#hide_944325866').click(function() {
            $('#detail_944325866').slideUp();
            $('#hide_944325866').hide();
            $('#show_944325866').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='20583#1397080209'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-04-09T21:50:09+00:00">Apr 9, 2014 09:50 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1397080209">&nbsp;</a></div><pre>Hi Elizabeth,

yes, I&#39;m afraid the DOSAR VOMS server web interface is currently broken,
and the LaTech admins are working on that. The VOMS server itself
is working fine, though.

But I just compared the config files between the old working wlcgclient
and the new osg-wn-client, and I noticed that in the old version,
the vomses file contains

&#34;dosar&#34; &#34;voms.dosar.org&#34; &#34;15000&#34; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=voms.dosar.org&#34; &#34;dosar&#34;

whereas the new /etc/vomses contains

&#34;dosar&#34; &#34;voms.dosar.org&#34; &#34;15000&#34; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=http/voms.dosar.org&#34; &#34;dosar&#34;

So it looks like the certificate DN should be voms.dosar.org,
and not http/voms.dosar.org .

Changing /etc/voms didn&#39;t fix the problem, though; I had to change

/etc/grid-security/vomsdir/dosar/voms.dosar.org.lsc

in order to make the error go away.

So I guess voms-proxy-init doesn&#39;t actually look at /etc/vomses?
Strange ...

So were either of these files -- /etc/vomses or
/etc/grid-security/vomsdir/dosar/voms.dosar.org.lsc --
changed during the vo-client update this week?

Or maybe this was always broken, and we just didn&#39;t notice it,
since until very recently we only used the old wlcgclient
(which I had fixed by hand when we updated the VOMS host cert
<div id='show_721180455' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_721180455'>from DOEGrids to DigiCert) to generate proxies?

Thanks a lot,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_721180455').click(function() {
            $('#detail_721180455').slideDown("normal");
            $('#show_721180455').hide();
            $('#hide_721180455').show();
        });
        $('#hide_721180455').click(function() {
            $('#detail_721180455').slideUp();
            $('#hide_721180455').hide();
            $('#show_721180455').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='20583#1397078073'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-04-09T21:14:33+00:00">Apr 9, 2014 09:14 PM UTC</time> by <b>echism</b><a class="anchor" name="1397078073">&nbsp;</a></div><pre>Hey Horst,

I&#39;m getting a 404 when I approach the dosar voms. I was just going in order to look at its cert, but I assume you&#39;re doing something right now?

Thank you</pre></div><div class='update_description'><i onclick="document.location='20583#1397076392'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-04-09T20:46:32+00:00">Apr 9, 2014 08:46 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1397076392">&nbsp;</a></div><pre>Hi all,

I just noticed that &#39;voms-proxy-init -voms dosar&#39; is now throwing an error
after the voms proxy creation&#58;

----
Your proxy is valid until Thu Apr 10 02&#58;56&#58;21 2014
Error&#58; verify failed.
Cannot verify AC signature!
----

Did something change in this week&#39;s CA update which could&#39;ve caused this?

I tried &#39;-debug&#39; as well, but that doesn&#39;t tell me anything else
about the error.

I think there&#39;s an env var VOMS_PROXY_INFO_DONT_VERIFY_AC
which can make this error go away, but I&#39;d like to know
what the actual problem is.

Actually, no, setting that to true does not eliminate the error,
I just tried it.

We still have a very old wlcgclient installation on our RHEL5 machines
(which we&#39;re upgrading to RHEL6 as we speak), and on that one,
we don&#39;t see this error, so that makes me think that this has something
to do with the osg-3 CA update somehow, but it&#39;s not clear to me where.

I didn&#39;t think there&#39;s been an update to the DOSAR VOMS server or CA
credentials recently, so I&#39;m not sure where to look exactly.

Thanks,

Horst</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F20583">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
