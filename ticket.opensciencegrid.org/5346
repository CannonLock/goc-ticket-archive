<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[5346] crl-epirxy probe inquiry</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=5346" method="post">
<div class="page-header">
    <h3><span class="muted">5346</span> / crl-epirxy probe inquiry</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Horst Severini</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">review</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-08-06</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=5346", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/5346?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/5346?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20crl-epirxy%20probe%20inquiry%20ISSUE%3D5346%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='5346#1217968755'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-05T20:39:15+00:00">Aug 5, 2008 08:39 PM UTC</time> by <b>VDT</b><a class="anchor" name="1217968755">&nbsp;</a></div><pre>Hi Horst,

On Aug 5, 2008, at 11&#58;16 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; Why was this CRL not removed during the CA upgrade to</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; CA Certificates v39 (includes IGTF 1.24 CAs)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; a few days ago? We got that okay on July 30&#58;</font>

This is VDT 1.8.1, right? How did you install the CA upgrade? Can you
do an &#34;ls -l&#34; on globus/TRUSTED_CA/ so I can see the files that are
there? What version of the CA certificates do you seem to have, by
looking at your CHANGES file in that directory?

Thanks,
-alain</pre></div><div class='update_description'><i onclick="document.location='5346#1217960037'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-05T18:13:57+00:00">Aug 5, 2008 06:13 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1217960037">&nbsp;</a></div><pre>Alain,

We&#39;ve addressed Horst&#39;s concerns about his site&#39;s availabiltiy, etc in a separate
thread but can you look into his question re&#58; fetch-crl and vdt-cert-updater? I think
you&#39;re the most knowledgable in this aspect. See his note below.

I think the answer to Horst&#39;s question is that vdt-cert-updater is independent of
CRLs, and does nothing with them, and that he probably got CRL expiry notifications
because fetch-crl ran later on ...

Horst - don&#39;t worry about the CRL expiry notes from RSV till we release an update --
we were expecting to get updates out late last week but considering that the CRL
metric is no longer critical and the arrival of certain higher priority tasks have
pushed the update release back.

Arvind

---------------------

Hi all,

there seems to be a problem or disconnect between fetch-crl and
vdt-update-certs, since OU_OCHEP_SWT2 is still red in RSV, and when
we drill down to

<a href='https&#58;//tier2-01.ochep.ou.edu&#58;8443/rsv/tier2-01.ochep.ou.edu/index.html#cacert-c' target='_blank' rel='nofollow'>https&#58;//tier2-01.ochep.ou.edu&#58;8443/rsv/tier2-01.ochep.ou.edu/index.html#cacert-c</a>
rl-expiry-probe.org.osg.certificates.crl-expiry

we see this&#58;

----
org.osg.certificates.crl-expiry

metricName&#58; org.osg.certificates.crl-expiry
timestamp&#58; 2008-08-04T13&#58;48&#58;00Z
<div id='show_1215159012' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1215159012'>metricStatus&#58; CRITICAL
serviceType&#58; OSG-CE-General
serviceURI&#58; tier2-01.ochep.ou.edu
gatheredAt&#58; tier2-01.ochep.ou.edu
summaryData&#58; CRITICAL
detailsData&#58; 1 ERROR(s)!
ERROR&#58; /state/partition1/apps/osg-0.8.0/globus/TRUSTED_CA/d1737728.r0 has
expired! (nextUpdate=Aug 4 10&#58;31&#58;52 2008 GMT)
EOT

metricName&#58; org.osg.certificates.crl-expiry
timestamp&#58; 2008-08-04T07&#58;48&#58;00Z
metricStatus&#58; CRITICAL
serviceType&#58; OSG-CE-General
serviceURI&#58; tier2-01.ochep.ou.edu
gatheredAt&#58; tier2-01.ochep.ou.edu
summaryData&#58; CRITICAL
detailsData&#58; 1 ERROR(s)!
ERROR&#58; /state/partition1/apps/osg-0.8.0/globus/TRUSTED_CA/d1737728.r0 has
expired! (nextUpdate=Aug 3 10&#58;18&#58;07 2008 GMT)
EOT
----

Why was this CRL not removed during the CA upgrade to

CA Certificates v39 (includes IGTF 1.24 CAs)

a few days ago? We got that okay on July 30&#58;

----
[root@tier2-01 hs]# ls -ao /opt/osg/globus/share/
total 188
drwxr-xr-x 34 root 4096 Jul 30 08&#58;34 .
drwxr-xr-x 16 root 4096 Nov 5 2007 ..
drwxr-xr-x 2 root 4096 Nov 5 2007 aclocal
drwxr-xr-x 2 root 4096 Nov 18 2007 ca-certs-version
lrwxrwxrwx 1 root 63 Jul 30 08&#58;34 certificates -&#62;
/state/partition1/apps/osg-0.8.0/globus/share/certificates-39-2
drwxr-xr-x 3 root 24576 Jul 30 03&#58;07 certificates-38-1.old
drwxr-xr-x 3 root 24576 Aug 4 03&#58;07 certificates-39-2
[...]
----

Any idea what&#39;s going on here? I guess we could fix this by simply
removing all the d1737728* files, but I don&#39;t think we should have to.

I don&#39;t think we got any CRL errors this morning, by the way.
fetch-crl did run, of course.

Or maybe this is not related to vdt-update-certs at all, but just fetch-crl?
Anyway, we&#39;ve been red on this since the 31st or so, and have therefore
been marked as 0 availability on Brian&#39;s daily emails.

Thanks,

Horst
</div><script type='text/javascript'>
        $('#show_1215159012').click(function() {
            $('#detail_1215159012').slideDown("normal");
            $('#show_1215159012').hide();
            $('#hide_1215159012').show();
        });
        $('#hide_1215159012').click(function() {
            $('#detail_1215159012').slideUp();
            $('#hide_1215159012').hide();
            $('#show_1215159012').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5346#1217958849'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-05T17:54:09+00:00">Aug 5, 2008 05:54 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1217958849">&nbsp;</a></div><pre>Hi Rob and Arvind,

thanks for your explanations. Looks like both Brian&#39;s emails this morning
show OU_OCHEP_SWT2 at 100% for both availability and reliability again,
so all is well -- even though our RSV page still shows the critical
cacert-crl-expiry-probe.

OU_OCHEP_SWT2 is currently the only CE which is doing dedicated ATLAS
production, so it&#39;s supposed to be the only CE monitored by both RSV and SAM.
The others are just opportunistic sites, so I don&#39;t think we want them
to be part of the monitoring setup, since if they&#39;re down, it looks bad,
even though we don&#39;t have any control over it -- at least not the OSCER
sites.

So you can close this ticket again.

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='5346#1217885759'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-04T21:35:59+00:00">Aug 4, 2008 09:35 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1217885759">&nbsp;</a></div><pre>Hosrt,

There will be a new probe coming soon. However, the CRL probe is no longer considered
a critical probe and will not affect availability see
<a href='https&#58;//lcg-sam.cern.ch&#58;8443/sam/sam.py?sensors=OSGCE&amp' target='_blank' rel='nofollow'>https&#58;//lcg-sam.cern.ch&#58;8443/sam/sam.py?sensors=OSGCE&amp</a>;regions=OpenScienceGrid&amp;vo=ops&amp;order=SiteName&amp;funct=ShowSensorTests.

OU_HEP is in OK status even though the CRL test is failing.

In fact there are 3 OU resources in Brian&#39;s report, but only one in SAM. The link
above shows OU_OCHEP_SWT2  	tier2-01.ochep.ou.edu

However, Brian lists&#58;
OU_OCHEP_SWT2	100
OUHEP_OSG	0
OU_OSCER_ATLAS	0

In OIM we have... All three of the above from Brian&#39;s report, all marked as reporting
to SAM. I&#39;ll send this on to the RSV Dev list to see where the issue lies.

Rob</pre></div><div class='update_description'><i onclick="document.location='5346#1217884029'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-08-04T21:07:09+00:00">Aug 4, 2008 09:07 PM UTC</time> by <b>echism</b><a class="anchor" name="1217884029">&nbsp;</a></div><pre>Hi all,

there seems to be a problem or disconnect between fetch-crl and
vdt-update-certs, since OU_OCHEP_SWT2 is still red in RSV, and when
we drill down to

<a href='https&#58;//tier2-01.ochep.ou.edu&#58;8443/rsv/tier2-01.ochep.ou.edu/index.html#cacert-c' target='_blank' rel='nofollow'>https&#58;//tier2-01.ochep.ou.edu&#58;8443/rsv/tier2-01.ochep.ou.edu/index.html#cacert-c</a>
rl-expiry-probe.org.osg.certificates.crl-expiry

we see this&#58;

----
org.osg.certificates.crl-expiry

metricName&#58; org.osg.certificates.crl-expiry
timestamp&#58; 2008-08-04T13&#58;48&#58;00Z
metricStatus&#58; CRITICAL
serviceType&#58; OSG-CE-General
serviceURI&#58; tier2-01.ochep.ou.edu
gatheredAt&#58; tier2-01.ochep.ou.edu
summaryData&#58; CRITICAL
detailsData&#58; 1 ERROR(s)!
ERROR&#58;   /state/partition1/apps/osg-0.8.0/globus/TRUSTED_CA/d1737728.r0 has
expired! (nextUpdate=Aug  4 10&#58;31&#58;52 2008 GMT)
EOT

metricName&#58; org.osg.certificates.crl-expiry
timestamp&#58; 2008-08-04T07&#58;48&#58;00Z
metricStatus&#58; CRITICAL
serviceType&#58; OSG-CE-General
serviceURI&#58; tier2-01.ochep.ou.edu
gatheredAt&#58; tier2-01.ochep.ou.edu
summaryData&#58; CRITICAL
detailsData&#58; 1 ERROR(s)!
ERROR&#58;   /state/partition1/apps/osg-0.8.0/globus/TRUSTED_CA/d1737728.r0 has
<div id='show_1600946762' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1600946762'>expired! (nextUpdate=Aug  3 10&#58;18&#58;07 2008 GMT)
EOT
----

Why was this CRL not removed during the CA upgrade to

CA Certificates v39 (includes IGTF 1.24 CAs)

a few days ago? We got that okay on July 30&#58;

----
[root@tier2-01 hs]# ls -ao /opt/osg/globus/share/
total 188
drwxr-xr-x  34 root  4096 Jul 30 08&#58;34 .
drwxr-xr-x  16 root  4096 Nov  5  2007 ..
drwxr-xr-x   2 root  4096 Nov  5  2007 aclocal
drwxr-xr-x   2 root  4096 Nov 18  2007 ca-certs-version
lrwxrwxrwx   1 root    63 Jul 30 08&#58;34 certificates -&#62;
/state/partition1/apps/osg-0.8.0/globus/share/certificates-39-2
drwxr-xr-x   3 root 24576 Jul 30 03&#58;07 certificates-38-1.old
drwxr-xr-x   3 root 24576 Aug  4 03&#58;07 certificates-39-2
[...]
----

Any idea what&#39;s going on here? I guess we could fix this by simply
removing all the d1737728* files, but I don&#39;t think we should have to.

I don&#39;t think we got any CRL errors this morning, by the way.
fetch-crl did run, of course.

Or maybe this is not related to vdt-update-certs at all, but just fetch-crl?
Anyway, we&#39;ve been red on this since the 31st or so, and have therefore
been marked as 0 availability on Brian&#39;s daily emails.

Thanks,

Horst
</div><script type='text/javascript'>
        $('#show_1600946762').click(function() {
            $('#detail_1600946762').slideDown("normal");
            $('#show_1600946762').hide();
            $('#hide_1600946762').show();
        });
        $('#hide_1600946762').click(function() {
            $('#detail_1600946762').slideUp();
            $('#hide_1600946762').hide();
            $('#show_1600946762').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F5346">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 5346});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
