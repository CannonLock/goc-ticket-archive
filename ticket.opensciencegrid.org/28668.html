<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[28668] HTCondor-CE questions</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=28668" method="post">
<div class="page-header">
    <h3><span class="muted">28668</span> / HTCondor-CE questions</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Erik Gough</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Erik Gough</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Customer Reply</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-04-18</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/28668", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/28668?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/28668?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20HTCondor-CE%20questions%20ISSUE%3D28668%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='28668#1460990108'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-18T14:35:08+00:00">Apr 18, 2016 02:35 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1460990108">&nbsp;</a></div><pre>Great to hear it, Erik! Let us know if you run into any more issues.</pre></div><div class='update_description'><i onclick="document.location='28668#1460823003'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-16T16:10:03+00:00">Apr 16, 2016 04:10 PM UTC</time><a class="anchor" name="1460823003">&nbsp;</a></div><pre>Hello Everyone,

I&#39;m satisfied with the outcome on this for the time being.  If I need some more information I can open a new ticket.  Thanks for the help!

-Erik

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=egough/CN=734735/CN=Erik Gough</pre></div><div class='update_description'><i onclick="document.location='28668#1460751152'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-15T20:12:32+00:00">Apr 15, 2016 08:12 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1460751152">&nbsp;</a></div><pre>Hello All,

Is there an update on this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='28668#1460130770'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-08T15:52:50+00:00">Apr 8, 2016 03:52 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1460130770">&nbsp;</a></div><pre>The order of magnitudes look way better there. Erik, are you satisfied with the tuning or do you want to look into this further?

- Brian</pre></div><div class='update_description'><i onclick="document.location='28668#1459960151'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-06T16:29:11+00:00">Apr 6, 2016 04:29 PM UTC</time> by <b>echism</b><a class="anchor" name="1459960151">&nbsp;</a></div><pre>Brian,

Was that the sort of tuning you had in mind?

Thank you</pre></div><div class='update_description'><i onclick="document.location='28668#1459805488'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-04T21:31:28+00:00">Apr 4, 2016 09:31 PM UTC</time><a class="anchor" name="1459805488">&nbsp;</a></div><pre>Hello,
I reduced two environment variables by a factor of two on Carter.

SCHEDD_INTERVAL
Changed from 5 mins to 2.5 mins

GRIDMANAGER_JOB_PROBE_INTERVAL
Changed from 1 min to 30 secs

There is some improvement for the Carter cluster. Check the new graphs here during the ramp up time under &#34;Carter Cluster - single core glideins - updated params&#34;.
<a href='https&#58;//cmsweb.rcac.purdue.edu/cms/cemonitor/index.html' target='_blank' rel='nofollow'>https&#58;//cmsweb.rcac.purdue.edu/cms/cemonitor/index.html</a>

I did not see a large increase in load on the CE when changing the params.

This is all I have so far.  Carter is switching to multi core glideins in the near future so the single core use case will disappear.

-Erik

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=egough/CN=734735/CN=Erik Gough</pre></div><div class='update_description'><i onclick="document.location='28668#1459781354'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-04T14:49:14+00:00">Apr 4, 2016 02:49 PM UTC</time> by <b>echism</b><a class="anchor" name="1459781354">&nbsp;</a></div><pre>Hi Erik,

What was the outcome of your changes?

Thank you</pre></div><div class='update_description'><i onclick="document.location='28668#1459271218'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-29T17:06:58+00:00">Mar 29, 2016 05:06 PM UTC</time><a class="anchor" name="1459271218">&nbsp;</a></div><pre>Hi Chris,

I made some changes to the CE environment variables and am monitoring to see the impact.

-Erik

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=egough/CN=734735/CN=Erik Gough</pre></div><div class='update_description'><i onclick="document.location='28668#1458930951'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-25T18:35:51+00:00">Mar 25, 2016 06:35 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1458930951">&nbsp;</a></div><pre>Hi Erik,

Let us know what you are able to do.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='28668#1458654305'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-22T13:45:05+00:00">Mar 22, 2016 01:45 PM UTC</time><a class="anchor" name="1458654305">&nbsp;</a></div><pre>Hi Edgar,

Sorry, no updates yet.  I plan to make some progress in the next couple days.

-Erik

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=egough/CN=734735/CN=Erik Gough</pre></div><div class='update_description'><i onclick="document.location='28668#1458584388'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-21T18:19:48+00:00">Mar 21, 2016 06:19 PM UTC</time><a class="anchor" name="1458584388">&nbsp;</a></div><pre>Hi Erik,

Do you have any news on this?

Edgar
OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='28668#1458162127'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-16T21:02:07+00:00">Mar 16, 2016 09:02 PM UTC</time><a class="anchor" name="1458162127">&nbsp;</a></div><pre>Ahh, good to know.  I&#39;ll see what improvements can be made from tuning the variables and report back.

-Erik

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=egough/CN=734735/CN=Erik Gough</pre></div><div class='update_description'><i onclick="document.location='28668#1458161633'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-16T20:53:53+00:00">Mar 16, 2016 08:53 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1458161633">&nbsp;</a></div><pre>Erik,

I spoke with Majid and Manoj yesterday here at the OSG AHM about this issue so I&#39;ve got a better understanding of it. Brian Bockelman also expressed that although some tuning of the variables I suggested may make things better, he thinks that there may be some underlying issue. In that case, I&#39;d like to keep this ticket open to continue the investigation.

Manoy/Majid also spoke of issues with removing jobs in PBS and that the CE didn&#39;t account for this change.

- Brian</pre></div><div class='update_description'><i onclick="document.location='28668#1458161415'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-16T20:50:15+00:00">Mar 16, 2016 08:50 PM UTC</time><a class="anchor" name="1458161415">&nbsp;</a></div><pre>Hi Brian/Elizabeth,

I haven&#39;t made the changes yet.  It might be another week or so until I get a chance to generate the new data.  I have the info I need if you want to close the ticket.

-Erik

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=egough/CN=734735/CN=Erik Gough</pre></div><div class='update_description'><i onclick="document.location='28668#1458147308'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-16T16:55:08+00:00">Mar 16, 2016 04:55 PM UTC</time> by <b>echism</b><a class="anchor" name="1458147308">&nbsp;</a></div><pre>Hi Erik,

Do you have anything new on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='28668#1457636153'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-10T18:55:53+00:00">Mar 10, 2016 06:55 PM UTC</time><a class="anchor" name="1457636153">&nbsp;</a></div><pre>Hi Brian and Elizabeth,

Thanks for that info.  I&#39;ll investigate what happens when I change those parameters.  Unfortunately, our clusters are all fully utilized at the moment.  Once usage goes down I will make the change and report back.

-Erik

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=egough/CN=734735/CN=Erik Gough</pre></div><div class='update_description'><i onclick="document.location='28668#1457635507'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-10T18:45:07+00:00">Mar 10, 2016 06:45 PM UTC</time> by <b>echism</b><a class="anchor" name="1457635507">&nbsp;</a></div><pre>Erik,

Will you send an update? We&#39;re curious about your progress.

Thank you</pre></div><div class='update_description'><i onclick="document.location='28668#1457561829'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-09T22:17:09+00:00">Mar 9, 2016 10:17 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1457561829">&nbsp;</a></div><pre>Erik,

I just spoke to an HTCondor dev to clear some things up but yes,
SCHEDD_INTERVAL could have an effect on batch system submission rate as
well as GRIDMANAGER_JOB_PROBE_INTERVAL
(<a href='http&#58;//research.cs.wisc.edu/htcondor/manual/v8.4/3_3Configuration.html#26959' target='_blank' rel='nofollow'>http&#58;//research.cs.wisc.edu/htcondor/manual/v8.4/3_3Configuration.html#26959</a>)
and GRIDMANAGER_MAX_PENDING_REQUESTS
(<a href='http&#58;//research.cs.wisc.edu/htcondor/manual/v8.4/3_3Configuration.html#27045' target='_blank' rel='nofollow'>http&#58;//research.cs.wisc.edu/htcondor/manual/v8.4/3_3Configuration.html#27045</a>).
The former is the how often a job is queried for its status (defaults to
1 min) and the latter plus blah_max_threaded_cmds in /etc/blah.config
throttle the number of requests to the batch system to essentially avoid
DOS&#39;ing your batch system.

The latter (plus any delays in responses from your batch system) could
explain the slow ramp up time.

- Brian</pre></div><div class='update_description'><i onclick="document.location='28668#1457477018'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-08T22:43:38+00:00">Mar 8, 2016 10:43 PM UTC</time><a class="anchor" name="1457477018">&nbsp;</a></div><pre>Hi Brian,

I did a simple test to measure the difference between idle jobs on the CE and queued jobs in PBS, as well as running jobs on the CE and running jobs in PBS during a period when two of our single core glidein clusters when from low to high utilization.  Some graphs can be found here&#58; <a href='https&#58;//cmsweb.rcac.purdue.edu/cms/cemonitor/index.html' target='_blank' rel='nofollow'>https&#58;//cmsweb.rcac.purdue.edu/cms/cemonitor/index.html</a>

It appears that during the ramp up periods the CE reports more idle jobs and fewer running jobs when compared to what is seen in PBS.  Do you think this is simply related to the schedd and gridmanager query intervals?  I plan to test the impact of changing SCHEDD_INTERVAL in the coming days. I just figured I would share what I have found so far.

Thanks again for your help.
-Erik

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=egough/CN=734735/CN=Erik Gough</pre></div><div class='update_description'><i onclick="document.location='28668#1457374448'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-07T18:14:08+00:00">Mar 7, 2016 06:14 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1457374448">&nbsp;</a></div><pre>Erik,

For verifying submission into PBS, you&#39;ll actually want to look for
something like the following&#58;

03/03/16 14&#58;43&#58;35 [3397213] (110.0) gm state change&#58; GM_SUBMIT -&#62;
GM_SUBMIT_SAVE

The rest is correct though.

- Brian</pre></div><div class='update_description'><i onclick="document.location='28668#1457122481'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-04T20:14:41+00:00">Mar 4, 2016 08:14 PM UTC</time><a class="anchor" name="1457122481">&nbsp;</a></div><pre>Brian,

Thanks again.  Can you let me know if these values from the log are what I think they represent?  I&#39;m trying to get a timestamp for when a job changes to Idle on the CE and when the routed job is submitted to PBS.

From SchedLog&#58; Job goes to Idle on HTCondor-CE
03/04/16 13&#58;59&#58;14 Job 1103687.0 released from hold&#58; Data files spooled

From GridmanagerLog.cms1241&#58; Submitted to PBS
03/04/16 13&#58;59&#58;53 [12614] (1103688.0) gm state change&#58; GM_SUBMIT_SAVE -&#62; GM_SUBMITTED

From JobRouterLog&#58; Routed job completed?
03/04/16 14&#58;01&#58;18 JobRouter (src=1103687.0,dest=1103688.0,route=Hammer_PBS_cms)&#58; finalized job

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=egough/CN=734735/CN=Erik Gough</pre></div><div class='update_description'><i onclick="document.location='28668#1457106970'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-04T15:56:10+00:00">Mar 4, 2016 03:56 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1457106970">&nbsp;</a></div><pre>Erik,

You can set MAX_&#60;SUBSYS&#62;_LOG
(<a href='http&#58;//research.cs.wisc.edu/htcondor/manual/v8.4/3_3Configuration.html#20670' target='_blank' rel='nofollow'>http&#58;//research.cs.wisc.edu/htcondor/manual/v8.4/3_3Configuration.html#20670</a>)
to increase the log size and/or MAX_NUM_&#60;SUBSYS&#62;_LOG
(<a href='http&#58;//research.cs.wisc.edu/htcondor/manual/v8.4/3_3Configuration.html#20725' target='_blank' rel='nofollow'>http&#58;//research.cs.wisc.edu/htcondor/manual/v8.4/3_3Configuration.html#20725</a>)
to increase the number of log rotations. To get 20MB logs with 5 log
files you&#39;d set the following in your CE config&#58;

MAX_JOBROUTER_LOG = 20Mb
MAX_NUM_JOBROUTER_LOG = 4

Btw, if you have your debug level set to &#39;D_FULLDEBUG&#39; AND any other
debug level, the output will be too verbose for your needs. If for
example you want to set D_FULLDEBUG and D_NETWORK, you should set your
debug level config val to &#39;D_FULLDEBUG D_NETWORK&#58;1&#39;.

- Brian</pre></div><div class='update_description'><i onclick="document.location='28668#1457106223'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-04T15:43:43+00:00">Mar 4, 2016 03:43 PM UTC</time><a class="anchor" name="1457106223">&nbsp;</a></div><pre>Hi Brian,

That info is very helpful.

When turning on debugging for the JobRouter my logs get filled with &#34;HOOK_UPDATE_JOB_INFO not configured&#34; pretty quickly and they roll at 10MB.  I&#39;ve looked around for a way to increase the size of the logs, but didn&#39;t find anything.  Is there an option I can set?

Thanks,
-Erik

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=egough/CN=734735/CN=Erik Gough</pre></div><div class='update_description'><i onclick="document.location='28668#1456946080'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-02T19:14:40+00:00">Mar 2, 2016 07:14 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1456946080">&nbsp;</a></div><pre>Erik,

Sorry for the delay. It&#39;s not strange that there would be a discrepancy in idle jobs between the CE and the batch system (with the CE having more) because there are delays between the CE receiving the job and submitting it to the batch system. I believe the process goes something like this&#58;

1. Job is submitted to the CE and has to wait for a Schedd cycle before the JobRouter picks it up and creates a &#39;routed&#39; job
2. Routed job has to wait for another Schedd cycle before starting a Gridmanager instance that then submits the job to the batch system
3. Job is submitted to the batch system and may start but it has to wait for the Gridmanager to query the batch system for the job status to update it on the CE

I think the job status query step happens on a quicker interval than the Schedd cycle (which I believe defaults to 5 minutes). You can lower the SCHEDD_INTERVAL in the CE config (values are in seconds) but this will put more load on your CE. Does that help answer your question?

- Brian</pre></div><div class='update_description'><i onclick="document.location='28668#1456945162'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-02T18:59:22+00:00">Mar 2, 2016 06:59 PM UTC</time><a class="anchor" name="1456945162">&nbsp;</a></div><pre>Adding CMS support list

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=egough/CN=734735/CN=Erik Gough</pre></div><div class='update_description'><i onclick="document.location='28668#1456944978'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-02T18:56:18+00:00">Mar 2, 2016 06:56 PM UTC</time><a class="anchor" name="1456944978">&nbsp;</a></div><pre>Thanks Tim!

Any thoughts Brian?

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=egough/CN=734735/CN=Erik Gough</pre></div><div class='update_description'><i onclick="document.location='28668#1456759221'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-29T15:20:21+00:00">Feb 29, 2016 03:20 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1456759221">&nbsp;</a></div><pre>Erik, just a minor point here... The correct URL for the HTCondor-CE troubleshooting guide is&#58;

<a href='https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/TroubleshootingHTCondorCE' target='_blank' rel='nofollow'>https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/TroubleshootingHTCondorCE</a>

Brian will get back to you soon regarding your questions.</pre></div><div class='update_description'><i onclick="document.location='28668#1456522024'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-26T21:27:04+00:00">Feb 26, 2016 09:27 PM UTC</time><a class="anchor" name="1456522024">&nbsp;</a></div><pre>Hi Brian,

I forgot to mention that in my measurements I&#39;m accounting for the 2x job count between the CE and PBS.  So in my case (CE Idle / 2) isn&#39;t always equal to (PBS Queued).  Is that expected?

Are any of these cases possible for a job?
Grid Job listed as Idle in CE and not listed in PBS (maybe before job routing?)
Grid Job and Routed Job listed as Idle in CE and not listed in PBS

-Erik

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=egough/CN=734735/CN=Erik Gough</pre></div><div class='update_description'><i onclick="document.location='28668#1456520689'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-26T21:04:49+00:00">Feb 26, 2016 09:04 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1456520689">&nbsp;</a></div><pre>Erik,

There should be two idle CE jobs per idle PBS job due to the way job routing works&#58; <a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/HTCondorCEOverview#On_other_batch_systems.' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/HTCondorCEOverview#On_other_batch_systems.</a>

- Brian</pre></div><div class='update_description'><i onclick="document.location='28668#1456520555'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-26T21:02:35+00:00">Feb 26, 2016 09:02 PM UTC</time> by <b>Tim Theisen</b><a class="anchor" name="1456520555">&nbsp;</a></div><pre>Assigning to Brian</pre></div><div class='update_description'><i onclick="document.location='28668#1456517297'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-26T20:08:17+00:00">Feb 26, 2016 08:08 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1456517297">&nbsp;</a></div><pre>Hello,

We&#39;ve been trying to investigate why it takes such a long period of time to fill our clusters that use single core glideins.  Even when Purdue has lots of matching jobs in the global pool, the cluster can take 20+ hours to fill.  I&#39;m trying to see if it is related to some delay either in PBS or the CE.  I started investigating the correlations between what the CE says a job status is and what our PBS scheduler says the job&#39;s status is.  We occasionally will see the CE reporting 60+ more Idle jobs than PBS says are queued.

Should I expect to see the number of CE Idle jobs be the same as the number of PBS queued jobs?  Does the CE immediately send the job to PBS once it lands or is there a waiting period?  I&#39;m wondering if the delay I see is expected or if there is some underlying problem.

In the meantime, I&#39;m going to look into turning on some debug logging as seen here&#58; <a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide</a>

Thanks,
-Erik

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=egough/CN=734735/CN=Erik Gough</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F28668">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 28668});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
