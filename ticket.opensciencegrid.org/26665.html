<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[26665] T2_US_Vanderbilt has very low efficiency</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=26665" method="post">
<div class="page-header">
    <h3><span class="muted">26665</span> / T2_US_Vanderbilt has very low efficiency</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">avanspil </div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">avanspil</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier2</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Resolved</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-09-04</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USCMS Tier 2 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=116008">116008</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/26665", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26665?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26665?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20T2_US_Vanderbilt%20has%20very%20low%20efficiency%20ISSUE%3D26665%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='26665#1442620801'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-19T00:00:01+00:00">Sep 19, 2015 12:00 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1442620801">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.

-- by GGUS SYSTEM at Fri Sep 18 23&#58;59&#58;02 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=116008' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=116008</a></pre></div><div class='update_description'><i onclick="document.location='26665#1441729783'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-08T16:29:43+00:00">Sep 8, 2015 04:29 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441729783">&nbsp;</a></div><pre>I&#39;m good with closing too. I&#39;m working on keeping our SE logs for longer so we can hopefully trace this down if the issue happens again.

-Andrew

-- by Andrew Melo at Tue Sep 08 16&#58;28&#58;53 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=116008' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=116008</a></pre></div><div class='update_description'><i onclick="document.location='26665#1441356385'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-04T08:46:25+00:00">Sep 4, 2015 08:46 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441356385">&nbsp;</a></div><pre>Hi Andrew&#58;
I was looking at a the jobs that run at Vanderbilt, and the failure seems to be only on some Cleanups and LogCollect jobs.
Since they are not production jobs they won&#39;t affect us very much, (none of the samples produced at Vanderbilt show any data loss) however they appear as a failure when Vanderbilt is running few jobs. Look this two plots&#58;

<a href='http&#58;//dashb-ssb.cern.ch/dashboard/templates/sitePendingRunningJobs.html?site=T2_US_Vanderbilt' target='_blank' rel='nofollow'>http&#58;//dashb-ssb.cern.ch/dashboard/templates/sitePendingRunningJobs.html?site=T2_US_Vanderbilt</a>
<a href='http&#58;//dashb-cms-jobsmry.cern.ch/dashboard/request.py/terminatedjobsstatus_individual?sites=T2_US_Vanderbilt&activities=production&sitesSort=0&start=null&end=null&timeRange=last24&sortBy=0&granularity=Hourly&generic=0&series=All&type=ebsf' target='_blank' rel='nofollow'>http&#58;//dashb-cms-jobsmry.cern.ch/dashboard/request.py/terminatedjobsstatus_individual?sites=T2_US_Vanderbilt&activities=production&sitesSort=0&start=null&end=null&timeRange=last24&sortBy=0&granularity=Hourly&generic=0&series=All&type=ebsf</a>

You see, the reds are correlated with lower load.
My guess is that you guys have some cleanup before our cleanup jobs run, therefore ours fail (we cannot delete what was already deleted), which is not a big deal.

I&#39;m good for closing the ticket, however I&#39;d encourage you guys to investigate why is the deletion happening.

Julian B.
Workflow Team

-- by Julian Badillo Rojas at Fri Sep 04 08&#58;45&#58;25 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=116008' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=116008</a></pre></div><div class='update_description'><i onclick="document.location='26665#1441209204'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T15:53:24+00:00">Sep 2, 2015 03:53 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441209204">&nbsp;</a></div><pre>It looks like there&#39;s an awful lot of aborted jobs....why is that?

In terms of the job efficiency, nothing changed on our end, so I&#39;m at a loss for why. We have logs on that one particular file and it was deleted&#58;

[Fri Aug 28 12&#58;28&#58;57 2015 (1440782937179087) tacketar&#58;21445&#58;root&#58;vmp231] CREATE(/cms/store/unmerged/RunIIWinter15GS/InclusiveBtoJpsitoMuMu_JpsiPt3_TuneCUEP8M1_13TeV-pythia8-evtgen/GEN-SIM/MCRUN2_71_V1-v1/00039/A2F9B501-734D-E511-9E75-D4AE5264D254.root)
[Mon Aug 31 09&#58;11&#58;38 2015 (1441030298837371) tacketar&#58;15693&#58;root&#58;vmp1069] REMOVE(/cms/store/unmerged/RunIIWinter15GS/InclusiveBtoJpsitoMuMu_JpsiPt3_TuneCUEP8M1_13TeV-pythia8-evtgen/GEN-SIM/MCRUN2_71_V1-v1/00039/A2F9B501-734D-E511-9E75-D4AE5264D254.root)

Cheers,
Andrew

Andrew Melo has subscribed to this ticket.

-- by Andrew Melo at Wed Sep 02 15&#58;52&#58;44 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=116008' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=116008</a></pre></div><div class='update_description'><i onclick="document.location='26665#1441207982'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T15:33:02+00:00">Sep 2, 2015 03:33 PM UTC</time><a class="anchor" name="1441207982">&nbsp;</a></div><pre>Has the rate of failed jobs changed?

I&#39;m unclear what our action needs to be.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Sean Johnson 2789</pre></div><div class='update_description'><i onclick="document.location='26665#1441192990'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T11:23:10+00:00">Sep 2, 2015 11:23 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441192990">&nbsp;</a></div><pre>T2_US_Vanderbilt has very low efficiency. Most affected is BPH-RunIIWinter15GS-00027_00119_v1__150827_174136_2842

Most failed jobs have exit code 8001 or 1&#58;

Job Name&#58; 54d5b90a-4fe5-11e5-97a7-a0369f23d01e
WMBS job id&#58; 401901
Workflow&#58; pdmvserv_BPH-RunIIWinter15GS-00027_00119_v1__150827_174136_2842
Task&#58;
/pdmvserv_BPH-RunIIWinter15GS-00027_00119_v1__150827_174136_2842/Production/ProductionCleanupUnmergedRAWSIMoutput
Status&#58; jobfailed
Input dataset&#58;
Site&#58; T2_US_Vanderbilt
Agent&#58; cmsgwms-submit1.fnal.gov
ACDC URL&#58; <a href='https&#58;//cmsweb.cern.ch/couchdb/acdcserver' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/couchdb/acdcserver</a>
State Transition
jobcooloff&#58; 2015/8/31 (Mon) 17&#58;33&#58;15 UTC, T2_US_Vanderbilt
jobcooloff&#58; 2015/8/31 (Mon) 21&#58;03&#58;51 UTC, T2_US_Vanderbilt
jobfailed&#58; 2015/8/31 (Mon) 23&#58;04&#58;48 UTC, T2_US_Vanderbilt
Exit code&#58; 1
Retry count&#58; 2
Errors&#58;
cleanupUnmergedRAWSIMoutput
StageOutFailure (Exit Code&#58; 1)

General failure in StageOut for DeleteFilesStageOutFailure
Message&#58; Unable to delete file&#58;

/store/unmerged/RunIIWinter15GS/InclusiveBtoJpsitoMuMu_JpsiPt3_TuneCUEP8M1_13TeV-pythia8-evtgen/GEN-SIM/MCRUN2_71_V1-v1/00039/A2F9B501-734D-E511-9E75-D4AE5264D254.root
ErrorCode &#58; 60311
ModuleName &#58; WMCore.Storage.StageOutError
MethodName &#58; __init__
LFN &#58;
/store/unmerged/RunIIWinter15GS/InclusiveBtoJpsitoMuMu_JpsiPt3_TuneCUEP8M1_13TeV-pythia8-evtgen/GEN-SIM/MCRUN2_71_V1-v1/00039/A2F9B501-734D-E511-9E75-D4AE5264D254.root
ClassInstance &#58; None
FileName &#58; /tmp/glide_VH2zKu/execute/dir_16540/job/WMCore.zip/WMCore/Storage/StageOutError.py
<div id='show_386357948' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_386357948'>ClassName &#58; None
SEName &#58; se1.accre.vanderbilt.edu
ErrorType &#58; GeneralStageOutFailure
LineNumber &#58; 32
PFN &#58; None
ErrorNr &#58; 0
StageOutCommand &#58; None

Traceback&#58;
File &#34;/tmp/glide_VH2zKu/execute/dir_16540/job/WMCore.zip/WMCore/Storage/DeleteMgr.py&#34;, line
168, in __call__
fileToDelete[&#39;PFN&#39;] = self.deleteLFN(lfn)

File &#34;/tmp/glide_VH2zKu/execute/dir_16540/job/WMCore.zip/WMCore/Storage/DeleteMgr.py&#34;, line
234, in deleteLFN
return self.deletePFN(pfn, lfn, command)

File &#34;/tmp/glide_VH2zKu/execute/dir_16540/job/WMCore.zip/WMCore/Storage/DeleteMgr.py&#34;, line
263, in deletePFN
LFN = lfn, TargetPFN = pfn)

Input files&#58;
Lumis&#58;
Output&#58;
log archive&#58;

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=116008' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=116008</a>

[Ticket History]
Added attachment T2_US_Vanderbilt_exitcodes.pdf
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT105577' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT105577</a>

-- by avanspil at Wed Sep 02 11&#58;22&#58;12 UTC 2015

Subject&#58; T2_US_Vanderbilt has very low efficiency
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-workflow-team@....
-- by avanspil at Wed Sep 02 11&#58;22&#58;12 UTC 2015

Added attachment T2_US_Vanderbilt_tasks.pdf
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT105579' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT105579</a>

-- by avanspil at Wed Sep 02 11&#58;22&#58;13 UTC 2015

Added attachment terminatedjobsstatus_individual.png
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT105578' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT105578</a>

-- by avanspil at Wed Sep 02 11&#58;22&#58;13 UTC 2015
</div><script type='text/javascript'>
        $('#show_386357948').click(function() {
            $('#detail_386357948').slideDown("normal");
            $('#show_386357948').hide();
            $('#hide_386357948').show();
        });
        $('#hide_386357948').click(function() {
            $('#detail_386357948').slideUp();
            $('#hide_386357948').hide();
            $('#show_386357948').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F26665">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 26665});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
