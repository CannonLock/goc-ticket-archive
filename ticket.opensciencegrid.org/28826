<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[28826] problems with authentication through globus after new host certificate & transition from DigiCert to CILogon</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=28826" method="post">
<div class="page-header">
    <h3><span class="muted">28826</span> / problems with authentication through globus after new host certificate & transition from DigiCert to CILogon</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Irena Johnson</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">FusionGrid</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Irena Johnson</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">FusionGrid</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Waiting for user response</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-03-31</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">FusionGrid <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/28826", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/28826?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/28826?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20problems%20with%20authentication%20through%20globus%20after%20new%20host%20certificate%20%26%20transition%20from%20DigiCert%20to%20CILogon%20ISSUE%3D28826%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='28826#1459194093'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-28T19:41:33+00:00">Mar 28, 2016 07:41 PM UTC</time><a class="anchor" name="1459194093">&nbsp;</a></div><pre>Hi Vince,

Thank you for checking. I must have missed your previous email.

The good news is that our collaborators at MIT are able to connect to our new server! Also, the folks at GA and Garching.

So I think we can close this ticket. Thank you for your help.
Irena

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Irena Johnson 1116</pre></div><div class='update_description'><i onclick="document.location='28826#1459193377'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-28T19:29:37+00:00">Mar 28, 2016 07:29 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1459193377">&nbsp;</a></div><pre>Irena,

Checking in to see if you have an opportunity to reach out to the folks at MIT.  Please advise if I may assist with this ticket.

Thank you,</pre></div><div class='update_description'><i onclick="document.location='28826#1458572781'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-21T15:06:21+00:00">Mar 21, 2016 03:06 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1458572781">&nbsp;</a></div><pre>Irena,

Any word from MIT?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='28826#1457726158'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-11T19:55:58+00:00">Mar 11, 2016 07:55 PM UTC</time><a class="anchor" name="1457726158">&nbsp;</a></div><pre>Yes, thank you! I did as you advised and now my host certificate contains the alias as well. I am waiting for the folks at MIT to give it a try.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Irena Johnson 1116</pre></div><div class='update_description'><i onclick="document.location='28826#1457724623'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-11T19:30:23+00:00">Mar 11, 2016 07:30 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1457724623">&nbsp;</a></div><pre>I see the problem. You&#39;re creating a CSR without the altname and that appears to be overriding the hostname/altname options that you&#39;re specifying. You can submit the cert request without creating the CSR and the csr option. Alternatively, since you&#39;re a GridAdmin for pppl.gov, you can use &#96;osg-gridadmin-cert-request&#96; instead of osg-cert-request.</pre></div><div class='update_description'><i onclick="document.location='28826#1457724152'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-11T19:22:32+00:00">Mar 11, 2016 07:22 PM UTC</time><a class="anchor" name="1457724152">&nbsp;</a></div><pre># openssl x509 -in hostcert.pem -noout -text
Certificate&#58;
Data&#58;
Version&#58; 3 (0x2)
Serial Number&#58; 4294972461 (0x10000142d)
Signature Algorithm&#58; sha256WithRSAEncryption
Issuer&#58; DC=org, DC=cilogon, C=US, O=CILogon, CN=CILogon OSG CA 1
Validity
Not Before&#58; Mar 11 16&#58;52&#58;13 2016 GMT
Not After &#58; Apr 10 16&#58;57&#58;13 2017 GMT
Subject&#58; DC=org, DC=opensciencegrid, O=Open Science Grid, OU=Services, CN=transpgrid2.pppl.gov
Subject Public Key Info&#58;
Public Key Algorithm&#58; rsaEncryption
Public-Key&#58; (2048 bit)
Modulus&#58;
00&#58;c4&#58;95&#58;e3&#58;42&#58;a8&#58;e1&#58;6b&#58;87&#58;6a&#58;4b&#58;31&#58;c8&#58;b9&#58;b9&#58;
8e&#58;6c&#58;76&#58;80&#58;f6&#58;24&#58;8b&#58;7c&#58;df&#58;39&#58;ef&#58;65&#58;ad&#58;e2&#58;bb&#58;
0f&#58;e0&#58;1f&#58;ed&#58;24&#58;6e&#58;a3&#58;ea&#58;95&#58;a8&#58;a4&#58;c9&#58;e2&#58;7f&#58;60&#58;
de&#58;f2&#58;e5&#58;e6&#58;d5&#58;85&#58;d0&#58;cc&#58;d1&#58;5b&#58;e3&#58;2f&#58;9b&#58;57&#58;08&#58;
92&#58;44&#58;8b&#58;83&#58;8b&#58;a9&#58;f2&#58;0a&#58;9e&#58;24&#58;77&#58;c7&#58;da&#58;4e&#58;b2&#58;
ab&#58;23&#58;43&#58;d8&#58;af&#58;79&#58;59&#58;ce&#58;2e&#58;82&#58;cd&#58;0e&#58;24&#58;63&#58;77&#58;
c5&#58;cd&#58;fb&#58;67&#58;cd&#58;fb&#58;0f&#58;af&#58;57&#58;a3&#58;3f&#58;da&#58;91&#58;32&#58;8e&#58;
2a&#58;68&#58;66&#58;6a&#58;04&#58;82&#58;7f&#58;2c&#58;60&#58;fd&#58;25&#58;0c&#58;bc&#58;95&#58;60&#58;
54&#58;4b&#58;dc&#58;a1&#58;5e&#58;39&#58;5e&#58;f6&#58;13&#58;b6&#58;cb&#58;6a&#58;ce&#58;d8&#58;2e&#58;
75&#58;cc&#58;ff&#58;c7&#58;2b&#58;13&#58;27&#58;bb&#58;77&#58;26&#58;d5&#58;58&#58;96&#58;cd&#58;e5&#58;
57&#58;9f&#58;c5&#58;d8&#58;94&#58;a6&#58;b9&#58;33&#58;c5&#58;d1&#58;43&#58;40&#58;fa&#58;78&#58;7b&#58;
f7&#58;2e&#58;05&#58;34&#58;b5&#58;e2&#58;60&#58;09&#58;ca&#58;7d&#58;36&#58;c3&#58;2c&#58;e6&#58;94&#58;
96&#58;9a&#58;80&#58;d9&#58;07&#58;aa&#58;5e&#58;b6&#58;77&#58;11&#58;c4&#58;55&#58;57&#58;2c&#58;93&#58;
03&#58;0e&#58;dd&#58;f3&#58;44&#58;4f&#58;69&#58;25&#58;00&#58;b8&#58;4b&#58;75&#58;e2&#58;dc&#58;54&#58;
69&#58;33&#58;f0&#58;96&#58;85&#58;27&#58;b8&#58;45&#58;97&#58;47&#58;1a&#58;50&#58;f2&#58;b0&#58;b6&#58;
94&#58;05&#58;e2&#58;ce&#58;4b&#58;3e&#58;a9&#58;49&#58;8a&#58;4a&#58;32&#58;ae&#58;35&#58;86&#58;51&#58;
44&#58;e9&#58;28&#58;49&#58;39&#58;1c&#58;9a&#58;61&#58;b3&#58;70&#58;50&#58;94&#58;c6&#58;66&#58;4a&#58;
2c&#58;1f
Exponent&#58; 65537 (0x10001)
X509v3 extensions&#58;
<div id='show_613792183' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_613792183'>X509v3 Basic Constraints&#58; critical
CA&#58;FALSE
X509v3 Key Usage&#58; critical
Digital Signature, Key Encipherment, Data Encipherment
X509v3 Certificate Policies&#58;
Policy&#58; 1.3.6.1.4.1.34998.1.6.1
Policy&#58; 1.2.840.113612.5.2.2.1

X509v3 CRL Distribution Points&#58;

Full Name&#58;
URI&#58;<a href='http&#58;//crl.cilogon.org/cilogon-osg.crl' target='_blank' rel='nofollow'>http&#58;//crl.cilogon.org/cilogon-osg.crl</a>

X509v3 Extended Key Usage&#58;
TLS Web Client Authentication, TLS Web Server Authentication
X509v3 Subject Alternative Name&#58;
DNS&#58;transpgrid2.pppl.gov, email&#58;ijohnson@....
Signature Algorithm&#58; sha256WithRSAEncryption
43&#58;fc&#58;1e&#58;a7&#58;62&#58;ab&#58;bb&#58;ca&#58;65&#58;07&#58;32&#58;52&#58;e7&#58;59&#58;a4&#58;50&#58;5a&#58;d9&#58;
3d&#58;37&#58;11&#58;2f&#58;4e&#58;e0&#58;a6&#58;f1&#58;f9&#58;b5&#58;7d&#58;02&#58;20&#58;43&#58;98&#58;23&#58;77&#58;7d&#58;
cb&#58;5c&#58;39&#58;8d&#58;9e&#58;ec&#58;03&#58;47&#58;0e&#58;4c&#58;b5&#58;c5&#58;8a&#58;01&#58;0d&#58;c1&#58;34&#58;5f&#58;
9d&#58;49&#58;bb&#58;8c&#58;df&#58;0a&#58;c3&#58;78&#58;96&#58;4e&#58;00&#58;3f&#58;63&#58;23&#58;4e&#58;3a&#58;57&#58;bd&#58;
78&#58;46&#58;7d&#58;f9&#58;96&#58;e4&#58;a1&#58;4a&#58;f8&#58;61&#58;c7&#58;73&#58;8d&#58;74&#58;84&#58;18&#58;1c&#58;75&#58;
e2&#58;01&#58;b8&#58;4e&#58;41&#58;78&#58;d9&#58;5c&#58;63&#58;ef&#58;b0&#58;dc&#58;dd&#58;de&#58;86&#58;a6&#58;4c&#58;50&#58;
9b&#58;6e&#58;ca&#58;6e&#58;85&#58;01&#58;87&#58;4a&#58;66&#58;1b&#58;24&#58;76&#58;62&#58;0e&#58;9d&#58;af&#58;29&#58;95&#58;
42&#58;47&#58;bc&#58;0a&#58;1a&#58;9d&#58;5d&#58;4e&#58;a6&#58;4c&#58;0e&#58;7e&#58;40&#58;80&#58;80&#58;6f&#58;e7&#58;e3&#58;
42&#58;de&#58;c3&#58;23&#58;fb&#58;8c&#58;47&#58;12&#58;27&#58;0b&#58;70&#58;02&#58;13&#58;fe&#58;34&#58;8c&#58;20&#58;49&#58;
d5&#58;44&#58;6d&#58;a6&#58;85&#58;ab&#58;bc&#58;41&#58;37&#58;21&#58;57&#58;15&#58;ba&#58;6c&#58;76&#58;8d&#58;73&#58;24&#58;
62&#58;55&#58;d1&#58;7a&#58;87&#58;55&#58;68&#58;48&#58;a9&#58;00&#58;ae&#58;1b&#58;9d&#58;73&#58;92&#58;fe&#58;ad&#58;1d&#58;
af&#58;aa&#58;bf&#58;80&#58;83&#58;6f&#58;63&#58;a3&#58;c1&#58;80&#58;5c&#58;0e&#58;72&#58;1e&#58;43&#58;bc&#58;3d&#58;00&#58;
6e&#58;3e&#58;3b&#58;38&#58;78&#58;79&#58;89&#58;01&#58;e0&#58;82&#58;c7&#58;34&#58;33&#58;dc&#58;cb&#58;08&#58;9f&#58;a1&#58;
b7&#58;83&#58;36&#58;e6&#58;12&#58;76&#58;97&#58;19&#58;c5&#58;b4&#58;22&#58;5b&#58;c8&#58;0e&#58;72&#58;47&#58;d4&#58;28&#58;
0e&#58;d3&#58;b0&#58;07

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Irena Johnson 1116
</div><script type='text/javascript'>
        $('#show_613792183').click(function() {
            $('#detail_613792183').slideDown("normal");
            $('#show_613792183').hide();
            $('#hide_613792183').show();
        });
        $('#hide_613792183').click(function() {
            $('#detail_613792183').slideUp();
            $('#hide_613792183').hide();
            $('#show_613792183').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28826#1457724042'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-11T19:20:42+00:00">Mar 11, 2016 07:20 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1457724042">&nbsp;</a></div><pre>What&#39;s the output of &#96;openssl x509 -in hostcert.pem -noout -text&#96;?

What about openssl and globus packages on the client side? I know a few years ago globus-proxy-init defaulted to 512 bit proxies but that was fixed in the OSG version (<a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1286' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1286</a>). Not sure if it ever made it upstream.</pre></div><div class='update_description'><i onclick="document.location='28826#1457723057'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-11T19:04:17+00:00">Mar 11, 2016 07:04 PM UTC</time><a class="anchor" name="1457723057">&nbsp;</a></div><pre># rpm -q openssl
openssl-1.0.1e-42.el6_7.4.x86_64

Regarding globus, I switched to the OSG packages.

[root@transpgrid2 grid-security]# rpm -qa | grep ^globus
globus-gram-job-manager-fork-setup-seg-2.4-1.1.osg33.el6.x86_64
globus-gsi-proxy-ssl-5.7-1.osg33.el6.x86_64
globus-gss-assist-10.13-1.osg33.el6.x86_64
globus-usage-4.4-1.osg33.el6.x86_64
globus-gass-server-ez-5.7-1.osg33.el6.x86_64
globus-gass-copy-progs-9.13-1.osg33.el6.x86_64
globus-gridftp-server-progs-7.20-1.1.osg33.el6.x86_64
globus-gsi-callback-5.7-1.osg33.el6.x86_64
globus-io-11.4-1.osg33.el6.x86_64
globus-gridftp-server-7.20-1.1.osg33.el6.x86_64
globus-gass-copy-9.13-1.osg33.el6.x86_64
globus-gsi-cert-utils-progs-9.10-1.osg33.el6.noarch
globus-proxy-utils-6.9-1.osg33.el6.x86_64
globus-scheduler-event-generator-progs-5.10-2.1.osg33.el6.x86_64
globus-gss-assist-progs-10.13-1.osg33.el6.noarch
globus-gsi-openssl-error-3.5-1.osg33.el6.x86_64
globus-gsi-cert-utils-9.10-1.osg33.el6.x86_64
globus-gsi-proxy-core-7.7-1.osg33.el6.x86_64
globus-xio-gsi-driver-3.7-1.osg33.el6.x86_64
globus-xio-pipe-driver-3.7-1.osg33.el6.x86_64
globus-authz-3.10-1.osg33.el6.x86_64
globus-rsl-10.9-1.osg33.el6.x86_64
globus-ftp-client-8.19-1.2.osg33.el6.x86_64
globus-gass-cache-program-6.5-1.osg33.el6.x86_64
globus-scheduler-event-generator-5.10-2.1.osg33.el6.x86_64
globus-gatekeeper-10.9-1.2.osg33.el6.x86_64
globus-gram-job-manager-fork-2.4-1.1.osg33.el6.x86_64
globus-xio-5.7-1.1.osg33.el6.x86_64
globus-openssl-module-4.6-1.osg33.el6.x86_64
<div id='show_1172384924' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1172384924'>globus-callout-3.13-1.osg33.el6.x86_64
globus-gssapi-error-5.4-1.osg33.el6.x86_64
globus-gfork-4.7-1.osg33.el6.x86_64
globus-authz-callout-error-3.5-1.osg33.el6.x86_64
globus-gram-protocol-12.12-2.osg33.el6.x86_64
globus-xio-popen-driver-3.5-1.osg33.el6.x86_64
globus-gass-cache-9.5-1.osg33.el6.x86_64
globus-gram-job-manager-scripts-6.7-1.osg33.el6.noarch
globus-gram-job-manager-14.25-1.2.osg33.el6.x86_64
globus-common-15.27-1.osg33.el6.x86_64
globus-gsi-credential-7.7-1.osg33.el6.x86_64
globus-ftp-control-6.6-1.1.osg33.el6.x86_64
globus-gass-transfer-8.8-1.osg33.el6.x86_64
globus-common-progs-15.27-1.osg33.el6.x86_64
globus-gram-job-manager-callout-error-3.5-1.osg33.el6.x86_64
globus-gsi-sysconfig-6.8-1.osg33.el6.x86_64
globus-gssapi-gsi-11.18-1.osg33.el6.x86_64
globus-gridftp-server-control-3.6-1.osg33.el6.x86_64
globus-gram-client-13.12-1.osg33.el6.x86_64
globus-gram-client-tools-11.7-1.osg33.el6.x86_64

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Irena Johnson 1116
</div><script type='text/javascript'>
        $('#show_1172384924').click(function() {
            $('#detail_1172384924').slideDown("normal");
            $('#show_1172384924').hide();
            $('#hide_1172384924').show();
        });
        $('#hide_1172384924').click(function() {
            $('#detail_1172384924').slideUp();
            $('#hide_1172384924').hide();
            $('#show_1172384924').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28826#1457722664'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-11T18:57:44+00:00">Mar 11, 2016 06:57 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1457722664">&nbsp;</a></div><pre>Could you please provide the package versions instead of the tool versions? I remember you guys were using non-OSG packages and that makes a big difference. I&#39;d also like to know the versions of globus-proxy-utils.

rpm -q openssl
rpm -qa | grep ^globus

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='28826#1457722423'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-11T18:53:43+00:00">Mar 11, 2016 06:53 PM UTC</time><a class="anchor" name="1457722423">&nbsp;</a></div><pre>One more thing&#58; it appears that the host certificate doesn&#39;t contain the alternate name (transpgrid.pppl.gov), even though I specified it with&#58;

1) umask 077; openssl req -new -newkey rsa&#58;2048 -nodes -keyout hostkey.pem -subj &#34;/CN=transpgrid2.pppl.gov&#34; -out transpgrid2_csr.pem
2) osg-cert-request --hostname transpgrid2.pppl.gov --altname &#34;transpgrid.pppl.gov&#34; --email ijohnson@.... --name &#34;Irena Johnson&#34; --phone 6092433134 --comment &#34;Fusiongrid cert&#34; --csr transpgrid2_csr.pem

# grid-cert-info -file hostcert.pem
Certificate&#58;
Data&#58;
Version&#58; 3 (0x2)
Serial Number&#58; 4294972461 (0x10000142d)
Signature Algorithm&#58; sha256WithRSAEncryption
Issuer&#58; DC=org, DC=cilogon, C=US, O=CILogon, CN=CILogon OSG CA 1
Validity
Not Before&#58; Mar 11 16&#58;52&#58;13 2016 GMT
Not After &#58; Apr 10 16&#58;57&#58;13 2017 GMT
Subject&#58; DC=org, DC=opensciencegrid, O=Open Science Grid, OU=Services, CN=transpgrid2.pppl.gov
Subject Public Key Info&#58;
Public Key Algorithm&#58; rsaEncryption
Public-Key&#58; (2048 bit)
Modulus&#58;
00&#58;c4&#58;95&#58;e3&#58;42&#58;a8&#58;e1&#58;6b&#58;87&#58;6a&#58;4b&#58;31&#58;c8&#58;b9&#58;b9&#58;
8e&#58;6c&#58;76&#58;80&#58;f6&#58;24&#58;8b&#58;7c&#58;df&#58;39&#58;ef&#58;65&#58;ad&#58;e2&#58;bb&#58;
0f&#58;e0&#58;1f&#58;ed&#58;24&#58;6e&#58;a3&#58;ea&#58;95&#58;a8&#58;a4&#58;c9&#58;e2&#58;7f&#58;60&#58;
de&#58;f2&#58;e5&#58;e6&#58;d5&#58;85&#58;d0&#58;cc&#58;d1&#58;5b&#58;e3&#58;2f&#58;9b&#58;57&#58;08&#58;
92&#58;44&#58;8b&#58;83&#58;8b&#58;a9&#58;f2&#58;0a&#58;9e&#58;24&#58;77&#58;c7&#58;da&#58;4e&#58;b2&#58;
ab&#58;23&#58;43&#58;d8&#58;af&#58;79&#58;59&#58;ce&#58;2e&#58;82&#58;cd&#58;0e&#58;24&#58;63&#58;77&#58;
c5&#58;cd&#58;fb&#58;67&#58;cd&#58;fb&#58;0f&#58;af&#58;57&#58;a3&#58;3f&#58;da&#58;91&#58;32&#58;8e&#58;
2a&#58;68&#58;66&#58;6a&#58;04&#58;82&#58;7f&#58;2c&#58;60&#58;fd&#58;25&#58;0c&#58;bc&#58;95&#58;60&#58;
54&#58;4b&#58;dc&#58;a1&#58;5e&#58;39&#58;5e&#58;f6&#58;13&#58;b6&#58;cb&#58;6a&#58;ce&#58;d8&#58;2e&#58;
75&#58;cc&#58;ff&#58;c7&#58;2b&#58;13&#58;27&#58;bb&#58;77&#58;26&#58;d5&#58;58&#58;96&#58;cd&#58;e5&#58;
57&#58;9f&#58;c5&#58;d8&#58;94&#58;a6&#58;b9&#58;33&#58;c5&#58;d1&#58;43&#58;40&#58;fa&#58;78&#58;7b&#58;
f7&#58;2e&#58;05&#58;34&#58;b5&#58;e2&#58;60&#58;09&#58;ca&#58;7d&#58;36&#58;c3&#58;2c&#58;e6&#58;94&#58;
96&#58;9a&#58;80&#58;d9&#58;07&#58;aa&#58;5e&#58;b6&#58;77&#58;11&#58;c4&#58;55&#58;57&#58;2c&#58;93&#58;
03&#58;0e&#58;dd&#58;f3&#58;44&#58;4f&#58;69&#58;25&#58;00&#58;b8&#58;4b&#58;75&#58;e2&#58;dc&#58;54&#58;
69&#58;33&#58;f0&#58;96&#58;85&#58;27&#58;b8&#58;45&#58;97&#58;47&#58;1a&#58;50&#58;f2&#58;b0&#58;b6&#58;
<div id='show_1949989059' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1949989059'>94&#58;05&#58;e2&#58;ce&#58;4b&#58;3e&#58;a9&#58;49&#58;8a&#58;4a&#58;32&#58;ae&#58;35&#58;86&#58;51&#58;
44&#58;e9&#58;28&#58;49&#58;39&#58;1c&#58;9a&#58;61&#58;b3&#58;70&#58;50&#58;94&#58;c6&#58;66&#58;4a&#58;
2c&#58;1f
Exponent&#58; 65537 (0x10001)
X509v3 extensions&#58;
X509v3 Basic Constraints&#58; critical
CA&#58;FALSE
X509v3 Key Usage&#58; critical
Digital Signature, Key Encipherment, Data Encipherment
X509v3 Certificate Policies&#58;
Policy&#58; 1.3.6.1.4.1.34998.1.6.1
Policy&#58; 1.2.840.113612.5.2.2.1

X509v3 CRL Distribution Points&#58;

Full Name&#58;
URI&#58;<a href='http&#58;//crl.cilogon.org/cilogon-osg.crl' target='_blank' rel='nofollow'>http&#58;//crl.cilogon.org/cilogon-osg.crl</a>

X509v3 Extended Key Usage&#58;
TLS Web Client Authentication, TLS Web Server Authentication
X509v3 Subject Alternative Name&#58;
DNS&#58;transpgrid2.pppl.gov, email&#58;ijohnson@....
Signature Algorithm&#58; sha256WithRSAEncryption
43&#58;fc&#58;1e&#58;a7&#58;62&#58;ab&#58;bb&#58;ca&#58;65&#58;07&#58;32&#58;52&#58;e7&#58;59&#58;a4&#58;50&#58;5a&#58;d9&#58;
3d&#58;37&#58;11&#58;2f&#58;4e&#58;e0&#58;a6&#58;f1&#58;f9&#58;b5&#58;7d&#58;02&#58;20&#58;43&#58;98&#58;23&#58;77&#58;7d&#58;
cb&#58;5c&#58;39&#58;8d&#58;9e&#58;ec&#58;03&#58;47&#58;0e&#58;4c&#58;b5&#58;c5&#58;8a&#58;01&#58;0d&#58;c1&#58;34&#58;5f&#58;
9d&#58;49&#58;bb&#58;8c&#58;df&#58;0a&#58;c3&#58;78&#58;96&#58;4e&#58;00&#58;3f&#58;63&#58;23&#58;4e&#58;3a&#58;57&#58;bd&#58;
78&#58;46&#58;7d&#58;f9&#58;96&#58;e4&#58;a1&#58;4a&#58;f8&#58;61&#58;c7&#58;73&#58;8d&#58;74&#58;84&#58;18&#58;1c&#58;75&#58;
e2&#58;01&#58;b8&#58;4e&#58;41&#58;78&#58;d9&#58;5c&#58;63&#58;ef&#58;b0&#58;dc&#58;dd&#58;de&#58;86&#58;a6&#58;4c&#58;50&#58;
9b&#58;6e&#58;ca&#58;6e&#58;85&#58;01&#58;87&#58;4a&#58;66&#58;1b&#58;24&#58;76&#58;62&#58;0e&#58;9d&#58;af&#58;29&#58;95&#58;
42&#58;47&#58;bc&#58;0a&#58;1a&#58;9d&#58;5d&#58;4e&#58;a6&#58;4c&#58;0e&#58;7e&#58;40&#58;80&#58;80&#58;6f&#58;e7&#58;e3&#58;
42&#58;de&#58;c3&#58;23&#58;fb&#58;8c&#58;47&#58;12&#58;27&#58;0b&#58;70&#58;02&#58;13&#58;fe&#58;34&#58;8c&#58;20&#58;49&#58;
d5&#58;44&#58;6d&#58;a6&#58;85&#58;ab&#58;bc&#58;41&#58;37&#58;21&#58;57&#58;15&#58;ba&#58;6c&#58;76&#58;8d&#58;73&#58;24&#58;
62&#58;55&#58;d1&#58;7a&#58;87&#58;55&#58;68&#58;48&#58;a9&#58;00&#58;ae&#58;1b&#58;9d&#58;73&#58;92&#58;fe&#58;ad&#58;1d&#58;
af&#58;aa&#58;bf&#58;80&#58;83&#58;6f&#58;63&#58;a3&#58;c1&#58;80&#58;5c&#58;0e&#58;72&#58;1e&#58;43&#58;bc&#58;3d&#58;00&#58;
6e&#58;3e&#58;3b&#58;38&#58;78&#58;79&#58;89&#58;01&#58;e0&#58;82&#58;c7&#58;34&#58;33&#58;dc&#58;cb&#58;08&#58;9f&#58;a1&#58;
b7&#58;83&#58;36&#58;e6&#58;12&#58;76&#58;97&#58;19&#58;c5&#58;b4&#58;22&#58;5b&#58;c8&#58;0e&#58;72&#58;47&#58;d4&#58;28&#58;
0e&#58;d3&#58;b0&#58;07

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Irena Johnson 1116
</div><script type='text/javascript'>
        $('#show_1949989059').click(function() {
            $('#detail_1949989059').slideDown("normal");
            $('#show_1949989059').hide();
            $('#hide_1949989059').show();
        });
        $('#hide_1949989059').click(function() {
            $('#detail_1949989059').slideUp();
            $('#hide_1949989059').hide();
            $('#show_1949989059').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28826#1457721423'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-11T18:37:03+00:00">Mar 11, 2016 06:37 PM UTC</time><a class="anchor" name="1457721423">&nbsp;</a></div><pre>(From MIT)
If I use&#58;  globusrun -a -r transpgrid2.pppl.gov  it appears to work

GRAM Authentication test successful

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Irena Johnson 1116</pre></div><div class='update_description'><i onclick="document.location='28826#1457721377'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-11T18:36:17+00:00">Mar 11, 2016 06:36 PM UTC</time><a class="anchor" name="1457721377">&nbsp;</a></div><pre>Hi Brian,

On our gatekeeper server we have&#58;

[root@transpgrid2 grid-security]# globusrun -version
globusrun&#58; 11.7

[root@transpgrid2 grid-security]# openssl version
OpenSSL 1.0.1e-fips 11 Feb 2013

The folks at MIT have&#58;

[nthoward@cmodws87 ~]$ globusrun -version
globusrun&#58; 11.7
[nthoward@cmodws87 ~]$ openssl version
OpenSSL 1.0.1e-fips 11 Feb 2013

We have made some progress with MIT&#58; if they use &#34;grid-proxy-init -bits 1024&#34; instead, they are able to authenticate (see below, they can only authenticate to &#34;transpgrid2.pppl.gov&#34;, not to &#34;transpgrid.pppl.gov&#34;, which is an alias to transpgrid2.pppl.gov.

Any suggestions??

nthoward@cmodws87 ~]$ grid-proxy-init -bits 1024
Your identity&#58; /DC=com/DC=DigiCert-Grid/O=Open Science
Grid/OU=People/CN=Nathaniel Thomas Howard 1708
Enter GRID pass phrase for this identity&#58;
Creating proxy .......................................... Done
Your proxy is valid until&#58; Fri Mar 11 23&#58;17&#58;31 2016

[nthoward@cmodws87 ~]$ globusrun -a -r transpgrid.pppl.gov

GRAM Authentication test failure&#58; an authorization operation failed
globus_xio_gsi&#58; gss_init_sec_context failed.
GSS Major Status&#58; Unexpected Gatekeeper or Service Name
globus_gsi_gssapi&#58; Authorization denied&#58; The name of the remote entity
(/DC=com/DC=DigiCert-Grid/O=Open Science
<div id='show_1207840026' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1207840026'>Grid/OU=Services/CN=transpgrid2.pppl.gov), and the expected name for the
remote entity (/CN=transpgrid.pppl.gov) do not match

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Irena Johnson 1116
</div><script type='text/javascript'>
        $('#show_1207840026').click(function() {
            $('#detail_1207840026').slideDown("normal");
            $('#show_1207840026').hide();
            $('#hide_1207840026').show();
        });
        $('#hide_1207840026').click(function() {
            $('#detail_1207840026').slideUp();
            $('#hide_1207840026').hide();
            $('#show_1207840026').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='28826#1457719945'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-11T18:12:25+00:00">Mar 11, 2016 06:12 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1457719945">&nbsp;</a></div><pre>The following error makes me think it&#39;s a sha1 vs sha256 error like last time (<a href='https&#58;//ticket.grid.iu.edu/20246' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/20246</a>)&#58;

OpenSSL Error&#58; a_verify.c&#58;86&#58; in library&#58; asn1 encoding routines, function
ASN1_verify&#58; unknown message digest algorithm

You mention that everyone is on the latest stable versions but what are the exact versions of everyone&#39;s OpenSSL/Globus/osg-ca-certs packages?

- Brian</pre></div><div class='update_description'><i onclick="document.location='28826#1457647423'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-10T22:03:43+00:00">Mar 10, 2016 10:03 PM UTC</time><a class="anchor" name="1457647423">&nbsp;</a></div><pre>Here is the latest error from the client&#39;s side&#58;

$ globusrun -a -r transpgrid.pppl.gov
GRAM Authentication test failure&#58; an authentication operation failed
globus_gsi_callback_module&#58; Could not verify credential
globus_gsi_callback_module&#58; Error with signing policy
globus_gsi_callback_module&#58; Error in OLD GAA code&#58; The subject of the
certificate &#34;/DC=com/DC=DigiCert-Grid/O=DigiCert Grid/CN=DigiCert Grid
CA-1 G2&#34; does not match the signing policies defined in
/etc/grid-security/certificates/74a04bb6.signing_policy

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Irena Johnson 1116</pre></div><div class='update_description'><i onclick="document.location='28826#1457645417'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-10T21:30:17+00:00">Mar 10, 2016 09:30 PM UTC</time><a class="anchor" name="1457645417">&nbsp;</a></div><pre>Is anyone looking into this ticket? I have not received any response so far.

Two of our collaborator sites have upgraded both OpenSSL and Globus Toolkit to the latest stable version and they still can not authenticate.

Below are the errors I am getting on our globus-gatekeeper server&#58;

TIME&#58; Thu Mar 10 16&#58;01&#58;48 2016
PID&#58; 26967 -- Notice&#58; 6&#58; Got connection &#58;&#58;ffff&#58;198.125.183.87 at Thu Mar 10 16&#58;01&#58;48 2016

Failed reading length 0
GSS authentication failure
globus_gss_assist token &#58;3&#58; read failure&#58; Connection closed
Failure&#58; GSS failed Major&#58;01090000 Minor&#58;00000000 Token&#58;00000003

TIME&#58; Thu Mar 10 16&#58;01&#58;48 2016
PID&#58; 26967 -- Failure&#58; GSS failed Major&#58;01090000 Minor&#58;00000000 Token&#58;00000003

TIME&#58; Thu Mar 10 16&#58;20&#58;16 2016
PID&#58; 28175 -- Notice&#58; 6&#58; Got connection &#58;&#58;ffff&#58;192.5.166.152 at Thu Mar 10 16&#58;20&#58;16 2016

Failed reading length 0
GSS authentication failure
globus_gss_assist token &#58;3&#58; read failure&#58; Connection closed
Failure&#58; GSS failed Major&#58;01090000 Minor&#58;00000000 Token&#58;00000003

TIME&#58; Thu Mar 10 16&#58;20&#58;16 2016
PID&#58; 28175 -- Failure&#58; GSS failed Major&#58;01090000 Minor&#58;00000000 Token&#58;00000003

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Irena Johnson 1116</pre></div><div class='update_description'><i onclick="document.location='28826#1457557700'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-09T21:08:20+00:00">Mar 9, 2016 09:08 PM UTC</time><a class="anchor" name="1457557700">&nbsp;</a></div><pre>Could you please elevate the priority for this issue? Thank you.

These are the errors we are getting on our server in globus-gatekeeper.log&#58;

TIME&#58; Wed Mar  9 12&#58;01&#58;29 2016
PID&#58; 20549 -- Notice&#58; 6&#58; Got connection &#58;&#58;ffff&#58;130.183.100.114 at Wed Mar  9 12&#58;01&#58;29 2016

Failed reading length 0
GSS authentication failure
globus_gss_assist token &#58;3&#58; read failure&#58; Connection closed
Failure&#58; GSS failed Major&#58;01090000 Minor&#58;00000000 Token&#58;00000003

TIME&#58; Wed Mar  9 12&#58;01&#58;29 2016
PID&#58; 20549 -- Failure&#58; GSS failed Major&#58;01090000 Minor&#58;00000000 Token&#58;00000003

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Irena Johnson 1116</pre></div><div class='update_description'><i onclick="document.location='28826#1457553287'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-09T19:54:47+00:00">Mar 9, 2016 07:54 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1457553287">&nbsp;</a></div><pre>Hi,

It seems that our collaborators are not able to connect to our FusionGrid server since the change yesterday. I am copying the errors below.
I am not sure if this is an issue with incompatibility between different versions of globus-toolkit or is related to the fact that our host certificate is now encrypted with sha256, or if the openssl version on the collaborator side is the problem.

In the past (March, 2014), after we renewed our host certificate (the expired certificate was sha1, the renewed certificate was sha256), authentication broke for our collaborators. Soichi Hayashi, Kevin Hill, Mine Altunay and others from the team looked into this problem and the only fix for this problem was for them to issue a sha1 host certificate for our server.

Could you please advise.

Thank you!
Irena

globusrun -a -r transpgrid.pppl.gov

GRAM Authentication test failure&#58; authentication failed&#58;
GSS Major Status&#58; Authentication Failed
GSS Minor Status Error Chain&#58;

init.c&#58;499&#58; globus_gss_assist_init_sec_context_async&#58; Error during context initialization
init_sec_context.c&#58;171&#58; gss_init_sec_context&#58; SSLv3 handshake problems
globus_i_gsi_gss_utils.c&#58;881&#58; globus_i_gsi_gss_handshake&#58; Unable to verify remote side&#39;s credentials
globus_i_gsi_gss_utils.c&#58;854&#58; globus_i_gsi_gss_handshake&#58; SSLv3 handshake problems&#58; Couldn&#39;t do ssl handshakeOpenSSL Error&#58; s3_clnt.c&#58;840&#58; in library&#58; SSL routines, function SSL3_GET_SERVER_CERTIFICATE&#58; certificate verify failed
....

globus-url-copy -nodcau
file&#58;///afs/ipp-garching.mpg.de/home/g/git/tr_client/AUGD/25832/25832M07_AUGD_tmp.tar.gz
<a href='gsiftp&#58;//transpgrid.pppl.gov/' target='_blank' rel='nofollow'>gsiftp&#58;//transpgrid.pppl.gov/</a>~/incoming/25832M07_AUGD_tmp.tar.gz

error&#58; globus_l_ftp_control_send_cmd_cb&#58; gss_init_sec_context failed

GSS failure&#58;
GSS Major Status&#58; Authentication Failed
GSS Minor Status Error Chain&#58;

init_sec_context.c&#58;171&#58; gss_init_sec_context&#58; SSLv3 handshake problems
<div id='show_1961614093' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1961614093'>globus_i_gsi_gss_utils.c&#58;881&#58; globus_i_gsi_gss_handshake&#58; Unable to verify
remote side&#39;s credentials
globus_i_gsi_gss_utils.c&#58;854&#58; globus_i_gsi_gss_handshake&#58; SSLv3 handshake
problems&#58; Couldn&#39;t do ssl handshake
OpenSSL Error&#58; s3_clnt.c&#58;840&#58; in library&#58; SSL routines, function
SSL3_GET_SERVER_CERTIFICATE&#58; certificate verify failed
OpenSSL Error&#58; a_verify.c&#58;86&#58; in library&#58; asn1 encoding routines, function
ASN1_verify&#58; unknown message digest algorithm
globus_gsi_callback.c&#58;351&#58; globus_i_gsi_callback_handshake_callback&#58; Could
not verify credential
globus_gsi_callback.c&#58;443&#58; globus_i_gsi_callback_cred_verify&#58; Could not
verify credential&#58; certificate signature failure
Error exit

Thank you for your help with this!
Irena

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Irena Johnson 1116

</div><script type='text/javascript'>
        $('#show_1961614093').click(function() {
            $('#detail_1961614093').slideDown("normal");
            $('#show_1961614093').hide();
            $('#hide_1961614093').show();
        });
        $('#hide_1961614093').click(function() {
            $('#detail_1961614093').slideUp();
            $('#hide_1961614093').hide();
            $('#show_1961614093').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F28826">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 28826});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
