<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[4465] Nagios monitoring of new GOC host jazmine.uits.indiana.edu</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=4465" method="post">
<div class="page-header">
    <h3><span class="muted">4465</span> / Nagios monitoring of new GOC host jazmine.uits.indiana.edu</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Rob Quick</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-04-08</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
        <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/4465", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/4465?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/4465?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Nagios%20monitoring%20of%20new%20GOC%20host%20jazmine.uits.indiana.edu%20ISSUE%3D4465%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='4465#1207146959'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-02T14:35:59+00:00">Apr 2, 2008 02:35 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1207146959">&nbsp;</a></div><pre>Luke made the correction and began using the plugin on the GRNOC Nagios yesterday. Closing ticket.

Tim</pre></div><div class='update_description'><i onclick="document.location='4465#1207082779'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-01T20:46:19+00:00">Apr 1, 2008 08:46 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1207082779">&nbsp;</a></div><pre>Hi Luke,

The usage is a bit off, that&#39;s my fault. To test it, you can execute&#58;

./check_http_curl jazmine.uits.indiana.edu 8443

Notice the host and port are separate. So in your services.cfg you&#39;ll enter

check_command                   check_http_curl!8443

It should work fine after that. If not, let me know.

Thanks,

Tim</pre></div><div class='update_description'><i onclick="document.location='4465#1207079055'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-01T19:44:15+00:00">Apr 1, 2008 07:44 PM UTC</time> by <b>Luke Fowler_</b><a class="anchor" name="1207079055">&nbsp;</a></div><pre>Hi Tim,

I&#39;m seeing similar issues with curl even with the &#34;k&#34; flag, and with the plugin that you&#39;ve attached.  Before I dig
in to this any further, can you verify that the plugin is still working on your host?

[root@nms-oexp libexec]# ./check_https_curl jazmine.uits.indiana.edu&#58;8443
HTTPS FAILURE - error code is - 6

.

[root@nms-oexp libexec]# curl -kv <a href='https&#58;//jazmine.uits.indiana.edu&#58;8443' target='_blank' rel='nofollow'>https&#58;//jazmine.uits.indiana.edu&#58;8443</a>
* About to connect() to jazmine.uits.indiana.edu port 8443
*   Trying 129.79.5.211... * connected
* Connected to jazmine.uits.indiana.edu (129.79.5.211) port 8443
* successfully set certificate verify locations&#58;
*   CAfile&#58; /usr/share/ssl/certs/ca-bundle.crt
CApath&#58; none
* error&#58;14094410&#58;SSL routines&#58;SSL3_READ_BYTES&#58;sslv3 alert handshake failure
* Closing connection #0
curl&#58; (35) error&#58;14094410&#58;SSL routines&#58;SSL3_READ_BYTES&#58;sslv3 alert handshake failure
[root@nms-oexp libexec]# man curl
[root@nms-oexp libexec]# curl -kv <a href='https&#58;//jazmine.uits.indiana.edu&#58;8443' target='_blank' rel='nofollow'>https&#58;//jazmine.uits.indiana.edu&#58;8443</a>
* About to connect() to jazmine.uits.indiana.edu port 8443
*   Trying 129.79.5.211... * connected
* Connected to jazmine.uits.indiana.edu (129.79.5.211) port 8443
* successfully set certificate verify locations&#58;
*   CAfile&#58; /usr/share/ssl/certs/ca-bundle.crt
CApath&#58; none
* error&#58;14094410&#58;SSL routines&#58;SSL3_READ_BYTES&#58;sslv3 alert handshake failure
* Closing connection #0
curl&#58; (35) error&#58;14094410&#58;SSL routines&#58;SSL3_READ_BYTES&#58;sslv3 alert handshake failure
[root@nms-oexp libexec]#</pre></div><div class='update_description'><i onclick="document.location='4465#1207077127'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-01T19:12:07+00:00">Apr 1, 2008 07:12 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1207077127">&nbsp;</a></div><pre>I spoke to Luke on the phone and he said that this had just fallen off his radar, but that he&#39;d get to it
soon. --Tim</pre></div><div class='update_description'><i onclick="document.location='4465#1207077056'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-01T19:10:56+00:00">Apr 1, 2008 07:10 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1207077056">&nbsp;</a></div><pre>OK. I hadn&#39;t attached the script so I&#39;m including it now. Thanks, Luke!

Tim</pre></div><div class='update_description'><i onclick="document.location='4465#1206463893'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-03-25T16:51:33+00:00">Mar 25, 2008 04:51 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1206463893">&nbsp;</a></div><pre>Hi. I&#39;m following up on the issue of monitoring port 8443 on Jazmine. Can this be accomplished soon?

Thanks,

Tim</pre></div><div class='update_description'><i onclick="document.location='4465#1205431386'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-03-13T18:03:06+00:00">Mar 13, 2008 06:03 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1205431386">&nbsp;</a></div><pre>Hi. I just wanted to followup. I see that GRNOC Nagios only monitors SSH to Jazmine currently. Let
me know if you have any questions about the script.

Tim</pre></div><div class='update_description'><i onclick="document.location='4465#1204834172'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-03-06T20:09:32+00:00">Mar 6, 2008 08:09 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1204834172">&nbsp;</a></div><pre>Luke/SYS ENG,

I&#39;ve written a simple shell script that is nothing more than a wrapper for checking the SSL port with
the curl command (it could easily be modified to work with wget if needed). Curl and wget have
options built-in to check SSL ports via an insecure connection (ignoring the certificate, which is
causing us issues because the cert used doesn&#39;t match the hostname). Unfortunately, both
commands still exit with error, even though they successfully connect to the secure port. Just run
the command with the verbose flag to confirm it does connect to the port (curl -kv
<a href='https&#58;//jazmine.uits.indiana.edu&#58;8443' target='_blank' rel='nofollow'>https&#58;//jazmine.uits.indiana.edu&#58;8443</a>).

So what I did was wrote a script that accepts error code 35 as an acceptable response, exits 0.
Other errors will result in a failure. I have this running as a plugin on our Nagios instance and it&#39;s
working fine. The script expects two arguments, hostname and port. So just put the script in your
plugins folder, make it executable, and then define in your services definitions for the host
(check_http_curl!8443).

Let me know if you have any questions.

Tim</pre></div><div class='update_description'><i onclick="document.location='4465#1200666786'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-18T14:33:06+00:00">Jan 18, 2008 02:33 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1200666786">&nbsp;</a></div><pre>Since my email didn&#39;t appear to update the ticket, I&#39;m pasting it in...

From&#58; 	  tsilver@....
Subject&#58; 	Re&#58; Nagios monitoring of new GOC host jazmine.uits.indiana.edu ISSUE=1632
Date&#58; 	January 17, 2008 3&#58;19&#58;31 PM EST
To&#58; 	  luke@....
Cc&#58; 	  thomlee@...., rquick@...., systems-support@....

Luke,

Let&#39;s go ahead and monitoring PING and SSH on the machine because this is a production server
already running critical services and we need it to be monitored. You can also remove Grid03 from
Nagios. In the meantime, we&#39;ll continue to look at the port 8443 issue.

To get back to the certificate, it&#39;s the way it is due to the GOC software configuration on the
machine. It is required that the certificate have the http in there for purposes of the web services
running on Jazmine. Grid03 would have had a similar setup. We were just monitoring http there and
not port 8443 from what I can see on GRNOC Nagios. I&#39;ve spent some time looking at the latest
nagios plugins and some of the others that are out there, but I (and Tom) need more time to look
into this.

Tim</pre></div><div class='update_description'><i onclick="document.location='4465#1200512793'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-16T19:46:33+00:00">Jan 16, 2008 07:46 PM UTC</time> by <b>Luke Fowler_</b><a class="anchor" name="1200512793">&nbsp;</a></div><pre>**An update was made to this Ticket based on an update made to dynamically-linked Issue #1632 in Project System Support**

From&#58; 	luke@....
Subject&#58; 	Re&#58; Nagios monitoring of new GOC host jazmine.uits.indiana.edu ISSUE=1632
Date&#58; 	January 16, 2008 9&#58;50&#58;18 AM GMT-05&#58;00
To&#58; 	tsilver@....
Cc&#58; 	thomlee@...., rquick@....

OK.  I&#39;ll wait to hear more from Tom on the questions I posed yesterday.

--Luke

On Jan 16, 2008, at 9&#58;12 AM, Tim Silvers wrote&#58;

Luke,

I&#39;m afraid I&#39;m going to have to abandon this issue for the moment. Our administrator, Tom Lee, is available to
work though this with you. We really need to get Jazmine monitored, as it is now running production OSG
services.

Thanks,

Tim</pre></div><div class='update_description'><i onclick="document.location='4465#1200057904'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-11T13:25:04+00:00">Jan 11, 2008 01:25 PM UTC</time> by <b>Luke Fowler_</b><a class="anchor" name="1200057904">&nbsp;</a></div><pre>**An update was made to this Ticket based on an update made to dynamically-linked Issue #1632 in Project System Support**

setting to ENG-WAIT pending more information from Tim/OSG.</pre></div><div class='update_description'><i onclick="document.location='4465#1199893446'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-09T15:44:06+00:00">Jan 9, 2008 03:44 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1199893446">&nbsp;</a></div><pre>Copied to System Support as Issue #1632 by Tim Silvers</pre></div><div class='update_description'><i onclick="document.location='4465#1199893384'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-09T15:43:04+00:00">Jan 9, 2008 03:43 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1199893384">&nbsp;</a></div><pre>Hi. We would like to have jazmine.uits.indiana.edu monitored on GRNOC Nagios. We need the
following monitored,

SSH
HTTPS on port 8443

This server currently provides the GUMS and VOMS authentication services to GOC and other
supported OSG virtual organizations.

Thanks,
Tim</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F4465">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 4465});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
