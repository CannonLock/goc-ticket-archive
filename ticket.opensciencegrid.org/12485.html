<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[12485] jobmanager-condor problems since upgrade to osg-version 3.1.7</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=12485" method="post">
<div class="page-header">
    <h3><span class="muted">12485</span> / jobmanager-condor problems since upgrade to osg-version 3.1.7</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Horst Severini</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/custom</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Horst Severini</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-08-13</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/12485", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/12485?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/12485?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20jobmanager-condor%20problems%20since%20upgrade%20to%20osg-version%203.1.7%20ISSUE%3D12485%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='12485#1344977069'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-14T20:44:29+00:00">Aug 14, 2012 08:44 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1344977069">&nbsp;</a></div><pre>Okay, I&#39;ll mark this ticket as resolved since there&#39;s a JIRA ticket tracking this setup and assigned to the appropriate person.

Suchandra</pre></div><div class='update_description'><i onclick="document.location='12485#1344976869'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-14T20:41:09+00:00">Aug 14, 2012 08:41 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1344976869">&nbsp;</a></div><pre>Hi Suchandra,

no, I think this was the problem, so once that&#39;s fixed, everything
should be okay again.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='12485#1344976545'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-14T20:35:45+00:00">Aug 14, 2012 08:35 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1344976545">&nbsp;</a></div><pre>Horst,

Is this issue resolved or is there another aspect of this ticket that needs to be addressed?

Suchandra</pre></div><div class='update_description'><i onclick="document.location='12485#1344975969'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-14T20:26:09+00:00">Aug 14, 2012 08:26 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1344975969">&nbsp;</a></div><pre>Hi Suchandra,

ahh, I see. Well, glad to have found yet another bug. &#58;)

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='12485#1344975775'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-14T20:22:55+00:00">Aug 14, 2012 08:22 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1344975775">&nbsp;</a></div><pre>I checked the spec file and it looks like the file isn&#39;t labeled as a config file so it&#39;ll get replaced whenever the rpm gets updated.  I&#39;ll file a JIRA bug for this.

Suchandra</pre></div><div class='update_description'><i onclick="document.location='12485#1344975299'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-14T20:14:59+00:00">Aug 14, 2012 08:14 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1344975299">&nbsp;</a></div><pre>It&#39;s possible that the file is not marked as a config file in the rpm so an rpm update will overwrite the file.  Unfortunately, I can&#39;t seem to find the spec file for the rpm so I can&#39;t determine if this is the case though.  I&#39;ll see if I can find the spec file and verify this is the case.

Suchandra Thapa
Software Team</pre></div><div class='update_description'><i onclick="document.location='12485#1344961928'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-14T16:32:08+00:00">Aug 14, 2012 04:32 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1344961928">&nbsp;</a></div><pre>Hi Suchandra,

/etc/globus/ doesn&#39;t have any .rpmsave files in it, but the update on July 31
did overwrite globus-condor.conf in that directory and wiped out our
condor_location settings; this is what broke things in the first place. &#58;)

So the question is, why did that happen?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='12485#1344960545'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-14T16:09:05+00:00">Aug 14, 2012 04:09 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1344960545">&nbsp;</a></div><pre>Hi Horst,

You only need to run osg-configure changes when rsv is updated or if there&#39;s new ini settings that you&#39;d like to take advantage of.  I was asking to figure out whether osg-configure may have reset the settings in the config files.  In /etc/globus, are there .rpmsave files that were generated around the time the update occurred?  RPM may have changed the config files depending on how the rpms are configured.

Suchandra Thapa
Software Team</pre></div><div class='update_description'><i onclick="document.location='12485#1344886868'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-13T19:41:08+00:00">Aug 13, 2012 07:41 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1344886868">&nbsp;</a></div><pre>Hi Suchandra,

no, I didn&#39;t run osg-configure, since the update was done automatically
by our nightly yum-updatesd. Do I need to run osg-configure every time
there&#39;s a yum/RPM update? That would kind of defeat the purpose of
having these automatic yum/RPM updates in the first place ... ;)

But yes, we do have the condor_location set in both the [Condor]
and [RSV] sections in our ini files.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='12485#1344884967'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-13T19:09:27+00:00">Aug 13, 2012 07:09 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1344884967">&nbsp;</a></div><pre>Hi Horst,

Did you run osg-configure after the update?  If so do you have the condor location set in the ini files?

Suchandra
OSG Software Team</pre></div><div class='update_description'><i onclick="document.location='12485#1344538211'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-09T18:50:11+00:00">Aug 9, 2012 06:50 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1344538211">&nbsp;</a></div><pre>Hi Alain,

ahh, now we&#39;re getting closer. I checked /etc/globus/globus-condor.conf,
and that was indeed reset to point to /usr/ instead of /opt/condor/
for condor_submit, condor_rm, and condor_config, so no wonder things broke.

As soon as I changed that back just now, things started working again.
So something in this update from 3.1.6 to 3.1.7 didn&#39;t preserve
the condor_location setting.

That&#39;s as far as I&#39;ll go today, since we&#39;re in Accra, waiting for our
flight to London, so I&#39;ll sign off again now. &#58;)

Thanks a lot for getting us back up,

Horst</pre></div><div class='update_description'><i onclick="document.location='12485#1344533066'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-09T17:24:26+00:00">Aug 9, 2012 05:24 PM UTC</time> by <b>Alain Roy</b><a class="anchor" name="1344533066">&nbsp;</a></div><pre>Hi Horst,

Sorry for your difficulty! I know you might be traveling right now, but when you have time can you give me a bit more detail?

1) Is Condor running on osgitb1? Can you submit jobs manually from the command-line? Do &#34;condor_q&#34; and &#34;condor_status&#34; work as expected?

2) If #1 isn&#39; the problem what is in /etc/globus/globus-condor.conf? That contains the pathnames to Condor. It&#39;s possible that the update didn&#39;t work correctly and preserve them. It should be the case that you set these in a configuration file for osg-configure and re-running osg-configure should reset them.

3) If that&#39;s not the problem, can you run the osg-system-profiler and send me the file it creates?

Thanks,
-alain
------------------------------------
Alain Roy
OSG Software Support
vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='12485#1344434769'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-08T14:06:09+00:00">Aug 8, 2012 02:06 PM UTC</time><a class="anchor" name="1344434769">&nbsp;</a></div><pre>-- by Douglas Strain</pre></div><div class='update_description'><i onclick="document.location='12485#1344430272'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-08T12:51:12+00:00">Aug 8, 2012 12:51 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1344430272">&nbsp;</a></div><pre>Hi all,

so we&#39;re here at the grid school in Ghana and were trying to run through
the last day grid exercises, and to our surprise the jobmanager-condor
no longer worked on OUHEP_ITB (osgitb1.nhn.ou.edu). It was working fine
when we tested these exercises before we left on July 31.

And in fact OUHEP_ITB was updated to 3.1.7 on July 31, the day we left. &#58;&#92;

So fork jobs still work, but jobmanager-condor no give us

----
GRAM Job failed because the job failed when the job manager attempted to run it (error code 17)
----

on the command line. And the logs, like /var/log/globus/gram_hs.log,
show pretty much the same thing&#58;

----
ts=2012-08-08T11&#58;31&#58;05.491575Z id=16311 event=gram.job.end level=ERROR gramid=/16217828263543723146/933117525531604896/ job_status=4 status=-17 reason=&#34;the job failed when the job manager attempted to run it&#34;
----

I see that globus-gram-job-manager-condor was updated that day, but even
downgrading it to the older version didn&#39;t fix the problem. I tried
restarting the gatekeeper, but that didn&#39;t seem to help, either.

Unfortunately it&#39;s not clear to me what else we might need to restart
for any changes to take effect. I&#39;m still waiting for a replacement
for the old vdt-control, by the way, since that would make issues like
this one much easier, since we could simply restart the entire CE
and be sure to catch all changes. Any update on that one?

I looked at the differences between the two versions of condor.pm, and it&#39;s
not obvious to me how this would affect our problem, but I&#39;m reasonably
convinced that the upgrade is what is causing the problem, since
<div id='show_1643641532' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1643641532'>everything was working perfectly fine before we left.

I&#39;m guessing that we&#39;re seeing this problem and not other sites
because we have Condor in a non-standard location, /opt/condor/,
which is the relocated RPM from the Condor website.

How can we debug this further? I haven&#39;t been able to find any more
useful logs so efar, which could tell us what&#39;s going on exactly.
Any hints greatly appreciated.

It might be next week before we can look into this in detail, since we
are traveling back to the US tomorrow and Friday, but I wanted to get the
ball rolling, just in case someone has a good idea of what might
be causing this.

Thanks,

Horst
</div><script type='text/javascript'>
        $('#show_1643641532').click(function() {
            $('#detail_1643641532').slideDown("normal");
            $('#show_1643641532').hide();
            $('#hide_1643641532').show();
        });
        $('#hide_1643641532').click(function() {
            $('#detail_1643641532').slideUp();
            $('#hide_1643641532').hide();
            $('#show_1643641532').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F12485">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 12485});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
