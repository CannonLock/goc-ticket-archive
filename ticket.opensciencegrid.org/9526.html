<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[9526] SAM BDII missing BNL SE info from time to time</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=9526" method="post">
<div class="page-header">
    <h3><span class="muted">9526</span> / SAM BDII missing BNL SE info from time to time</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Xin Zhao</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/gocticket</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Xin Zhao</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Check for any updates</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-11-15</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Scott Teige <span class="muted"> / OSG Operations Infrastructure</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/9526", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/9526?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/9526?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20SAM%20BDII%20missing%20BNL%20SE%20info%20from%20time%20to%20time%20ISSUE%3D9526%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='9526#1292425841'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-12-15T15:10:41+00:00">Dec 15, 2010 03:10 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1292425841">&nbsp;</a></div><pre>One of many things fixed by network repair.</pre></div><div class='update_description'><i onclick="document.location='9526#1291226836'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-12-01T18:07:16+00:00">Dec 1, 2010 06:07 PM UTC</time><a class="anchor" name="1291226836">&nbsp;</a></div><pre>Hi Scott,

Should we wait for cern to rollback the timeout setting then confirm it, before closing the ticket?

Xin

-- by Xin Zhao</pre></div><div class='update_description'><i onclick="document.location='9526#1291223582'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-12-01T17:13:02+00:00">Dec 1, 2010 05:13 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1291223582">&nbsp;</a></div><pre>Hello,
Has this problem happened again? Is it OK to close this ticket?
Thanks
Scott</pre></div><div class='update_description'><i onclick="document.location='9526#1290106685'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-18T18:58:05+00:00">Nov 18, 2010 06:58 PM UTC</time><a class="anchor" name="1290106685">&nbsp;</a></div><pre>Hello,

Thanks for checking, so this was a problem of site stopping publishing info at that time?

It looks ok now&#58;

# ldapsearch -LLL -h sam-bdii.cern.ch&#58;2170 -x -b mds-vo-name=WT2,mds-vo-name=local,o=grid &#39;(&(objectClass=GlueService)(objectClass=GlueKey)(GlueForeignKey=GlueSiteUniqueID=WT2))&#39; GlueServiceUniqueID
dn&#58; GlueServiceUniqueID=httpg&#58;//osgserv04.slac.stanford.edu&#58;8443/srm/v2/server
,Mds-Vo-name=WT2,Mds-Vo-name=local,o=grid
GlueServiceUniqueID&#58; httpg&#58;//osgserv04.slac.stanford.edu&#58;8443/srm/v2/server

dn&#58; GlueServiceUniqueID=<a href='https&#58;//osgserv02.slac.stanford.edu&#58;8443/gums/services' target='_blank' rel='nofollow'>https&#58;//osgserv02.slac.stanford.edu&#58;8443/gums/services</a>
/GUMSAuthorizationServicePort,Mds-Vo-name=WT2,Mds-Vo-name=local,o=grid
GlueServiceUniqueID&#58; <a href='https&#58;//osgserv02.slac.stanford.edu&#58;8443/gums/services/GU' target='_blank' rel='nofollow'>https&#58;//osgserv02.slac.stanford.edu&#58;8443/gums/services/GU</a>
MSAuthorizationServicePort

Xin

-- by Xin Zhao</pre></div><div class='update_description'><i onclick="document.location='9526#1290089468'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-18T14:11:08+00:00">Nov 18, 2010 02:11 PM UTC</time> by <b>ricardo.silva@....</b><a class="anchor" name="1290089468">&nbsp;</a></div><pre>That seems to have been caused by a problem when publishing&#58;

--&#62; OSG_WT2_WT2_SE&#58;
No such object (32)
Matched DN&#58; o=grid

--
Cheers,
Ricardo</pre></div><div class='update_description'><i onclick="document.location='9526#1290045076'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-18T01:51:16+00:00">Nov 18, 2010 01:51 AM UTC</time><a class="anchor" name="1290045076">&nbsp;</a></div><pre>Hello,

Things seem more stable now, we don&#39;t see cloud wide failures from many sites any more. But still occasionally some sites get dropped from the BDII, for example, this latest SAM test failure was due to missing info for one US T2 site, from the SAM BDII&#58;

<a href='https&#58;//gridview.cern.ch/GRIDVIEW/sa/bin/same_graphs.php?BackButton=0&Information=DetailResult&DR_SiteName=WT2&DR_NodeName=osgserv04.slac.stanford.edu&DR_ServiceName=SRMv2&DR_TestName=SRMv2-ATLAS-lcg-del&DR_TestVOName=Atlas&DR_Critical=Y&DR_DefVOName=Atlas&DR_TimeStamp=1290034473&DR_TestStatus=error&DR_TestSummary=&DR_EnvID=20294965' target='_blank' rel='nofollow'>https&#58;//gridview.cern.ch/GRIDVIEW/sa/bin/same_graphs.php?BackButton=0&Information=DetailResult&DR_SiteName=WT2&DR_NodeName=osgserv04.slac.stanford.edu&DR_ServiceName=SRMv2&DR_TestName=SRMv2-ATLAS-lcg-del&DR_TestVOName=Atlas&DR_Critical=Y&DR_DefVOName=Atlas&DR_TimeStamp=1290034473&DR_TestStatus=error&DR_TestSummary=&DR_EnvID=20294965</a>

Any idea what might have caused this?

Thanks,
Xin

-- by Xin Zhao</pre></div><div class='update_description'><i onclick="document.location='9526#1289577728'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-12T16:02:08+00:00">Nov 12, 2010 04:02 PM UTC</time> by <b>ricardo.silva@....</b><a class="anchor" name="1289577728">&nbsp;</a></div><pre>Hello,
As I told Rob privately already, as a temporary workaround, the timeout
has been increased on all Top Level and SAM BDIIs.

--
Cheers,
Ricardo</pre></div><div class='update_description'><i onclick="document.location='9526#1289415907'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-10T19:05:07+00:00">Nov 10, 2010 07:05 PM UTC</time> by <b>ricardo.silva@....</b><a class="anchor" name="1289415907">&nbsp;</a></div><pre>Hello,

I&#39;ve increased the timeout on a machine I took out of the top level
bdii to 120 seconds (bdii202).

I won&#39;t touch any production machine until tomorrow morning as I&#39;m
waiting for confirmation if this is safe (I need to know this won&#39;t
interfere with the 300 seconds delay between updates).

Since you are getting a fast response locally I would say the problem
is not what I mentioned before. It looks like network to me now. Time
to traceroute...

Cheers,
Ricardo</pre></div><div class='update_description'><i onclick="document.location='9526#1289412136'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-10T18:02:16+00:00">Nov 10, 2010 06:02 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1289412136">&nbsp;</a></div><pre>Ricardo,

Until we find and fix the problem can the 30s timeout be increased?

Rob</pre></div><div class='update_description'><i onclick="document.location='9526#1289410067'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-10T17:27:47+00:00">Nov 10, 2010 05:27 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1289410067">&nbsp;</a></div><pre>Ricardo,

I am getting less than a second response time from this query.

real	0m0.368s
user	0m0.071s
sys	0m0.092s
...
real	0m0.380s
user	0m0.072s
sys	0m0.094s
...
real	0m0.645s
user	0m0.076s
sys	0m0.101s

This is testing from FNAL. I get similar times for the query on lcg-bdii.cern.ch.

Moved to a machine on the IU network and the time seems to be at ~5s... Longer but nowhere near a minute.

We can restart our BDII and see if that clears up the issue. I&#39;ll discuss the impact of doing this now and determine if it is the right course.

Rob</pre></div><div class='update_description'><i onclick="document.location='9526#1289408707'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-10T17:05:07+00:00">Nov 10, 2010 05:05 PM UTC</time> by <b>ricardo.silva@....</b><a class="anchor" name="1289408707">&nbsp;</a></div><pre>Hi all,

Please see the GGUS ticket for my latest update&#58;
<a href='https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=64039' target='_blank' rel='nofollow'>https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=64039</a>

Basically, the OSG BDII is responding too slowly. I dump the same
information here (numbers corrected)&#58;
---
BNL seems to be gone from both BDIIs, looking at the number of times the
search timed out I can see that the problem has been getting worse everyday&#58;

2010-11-09&#58; ~230 failures
2010-11-08&#58; ~200 failures
2010-11-07&#58; ~100 failures
2010-11-06&#58; ~40 failures

One of the sam-bdii machines seems to be failing slightly more often
than the other, bdii115 (128.142.142.159), but the difference is
relatively small (~15%).

The progressive nature of the problem reminds me of some tests we did
when we upgraded to the SLC5 BDII. We saw that when querying the BDII
for the full directory the BDII responded progressively slower (over
several days). Restarting the BDII restored the initial performance. We
are currently running openldap2.4 on the backend (provided by BDII
developers, not certified) which seemed to improve the response.
Considering in this case we query a significant portion of the
information from the BDII for all OSG sites we could be triggering a
similar problem.

Could someone please check the response times locally on the OSG side?
The query the BDII is doing is, if I&#39;m not mistaken&#58;
ldapsearch -x -LLL -h is.grid.iu.edu -p 2180 -b
mds-vo-name=BNL-ATLAS,o=grid
&#39;(|(objectClass=GlueTop)(objectClass=MDS)(objectClass=GlueClusterTop)(objectClass=GlueCETop)(objectClass=GlueGeneralTop)(objectClass=GlueSETop)(objectClass=GlueSATop))
<div id='show_1050060695' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1050060695'>
The timeout is 30 seconds for each ldapsearch and I see the queries are
taking 50-70 seconds right now.
---

I just checked all the top level BDIIs and I see the same progression
from 0 failures on 3/Nov to ~200 per day per machine today.

--
Cheers,
Ricardo
</div><script type='text/javascript'>
        $('#show_1050060695').click(function() {
            $('#detail_1050060695').slideDown("normal");
            $('#show_1050060695').hide();
            $('#hide_1050060695').show();
        });
        $('#hide_1050060695').click(function() {
            $('#detail_1050060695').slideUp();
            $('#hide_1050060695').hide();
            $('#show_1050060695').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='9526#1289325187'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-09T17:53:07+00:00">Nov 9, 2010 05:53 PM UTC</time> by <b>Burt Holzman</b><a class="anchor" name="1289325187">&nbsp;</a></div><pre>Hi Xin,

That&#39;s my assumption as well.

- B

On 11/9/2010 11&#58;42 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9526#1289324530'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-09T17:42:10+00:00">Nov 9, 2010 05:42 PM UTC</time><a class="anchor" name="1289324530">&nbsp;</a></div><pre>Hi Brian and Burt,

Thanks for checking the GIP syntax. I assume all the GIP issues have been there and therefore not the real cause of the missing info at LCG/SAM BDIIs? Plus the OSG BDIIv5 is fine holding the info.

Xin

-- by Xin Zhao</pre></div><div class='update_description'><i onclick="document.location='9526#1289323152'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-09T17:19:12+00:00">Nov 9, 2010 05:19 PM UTC</time> by <b>Burt Holzman</b><a class="anchor" name="1289323152">&nbsp;</a></div><pre>Also, I checked the syntax coming from BNL-ATLAS.  I found three violations.  One is a GIP bug (wrong attribute published for some of the storage areas); it&#39;s fixed in the GIP repository and will be in GIP 1.1.13.  The second are multiple entries on the list of installed software in osg-locations.txt or grid3-locations.txt.  In a future GIP version we&#39;ll strip out duplicate entries.  The third is an extra GlueSEAccessProtocol line for GSIFTP_dcdoor14.*, which may be a GIP bug (or  dcache bug) that I don&#39;t understand yet.</pre></div><div class='update_description'><i onclick="document.location='9526#1289321542'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-09T16:52:22+00:00">Nov 9, 2010 04:52 PM UTC</time> by <b>Burt Holzman</b><a class="anchor" name="1289321542">&nbsp;</a></div><pre>Hi Xin,

I took a brief look at this.  It looks like the entire BNL-ATLAS entires are missing from the sam DB right now!

[burt@cmslpc11 ~]$ ldapsearch -xLLL -h sam-bdii.cern.ch&#58;2170 -b mds-vo-name=BNL-ATLAS,mds-vo-name=local,o=grid
No such object (32)
Matched DN&#58; Mds-Vo-name=local,o=grid

But it appears ok in the OSG BDIIv5&#58;

[burt@cmslpc11 ~]$ ldapsearch -s base -xLLL -h is3.grid.iu.edu&#58;2170 -b mds-vo-name=BNL-ATLAS,mds-vo-name=local,o=grid
dn&#58; Mds-Vo-name=bnl-atlas,Mds-Vo-name=local,o=grid
Mds-Vo-name&#58; bnl-atlas
objectClass&#58; Mds

And checking the lcg top-level BDII, I only succeed for one out of the four LCG BDIIs.   Update processes don&#39;t look stuck though, timestamps for other sites are within the last 20 minutes.  I&#39;ll check the logs on is3 with Soichi&#39;s help, hopefully the BDII maintainer s in Europe can send us more info.</pre></div><div class='update_description'><i onclick="document.location='9526#1289313541'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-09T14:39:01+00:00">Nov 9, 2010 02:39 PM UTC</time><a class="anchor" name="1289313541">&nbsp;</a></div><pre>Hello,

We need to fix this issue asap. Could this ticket priority be raised higher?

Thanks,
Xin

-- by Xin Zhao</pre></div><div class='update_description'><i onclick="document.location='9526#1289266028'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-09T01:27:08+00:00">Nov 9, 2010 01:27 AM UTC</time><a class="anchor" name="1289266028">&nbsp;</a></div><pre>Hello,

We continue to see such failures now&#58;

<a href='https&#58;//gridview.cern.ch/GRIDVIEW/sa/bin/same_graphs.php?BackButton=0&Information=DetailResult&DR_SiteName=BNL-ATLAS&DR_NodeName=dcsrm.usatlas.bnl.gov&DR_ServiceName=SRMv2&DR_TestName=SRMv2-ATLAS-lcg-del&DR_TestVOName=Atlas&DR_Critical=Y&DR_DefVOName=Atlas&DR_TimeStamp=1289260077&DR_TestStatus=error&DR_TestSummary=&DR_EnvID=20003079' target='_blank' rel='nofollow'>https&#58;//gridview.cern.ch/GRIDVIEW/sa/bin/same_graphs.php?BackButton=0&Information=DetailResult&DR_SiteName=BNL-ATLAS&DR_NodeName=dcsrm.usatlas.bnl.gov&DR_ServiceName=SRMv2&DR_TestName=SRMv2-ATLAS-lcg-del&DR_TestVOName=Atlas&DR_Critical=Y&DR_DefVOName=Atlas&DR_TimeStamp=1289260077&DR_TestStatus=error&DR_TestSummary=&DR_EnvID=20003079</a>

Thanks,
Xin

-- by Xin Zhao</pre></div><div class='update_description'><i onclick="document.location='9526#1289241653'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-08T18:40:53+00:00">Nov 8, 2010 06:40 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1289241653">&nbsp;</a></div><pre>Adding OSG-GIP Support as per Rob.</pre></div><div class='update_description'><i onclick="document.location='9526#1289241205'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-08T18:33:25+00:00">Nov 8, 2010 06:33 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1289241205">&nbsp;</a></div><pre>Restoring original assignment to infrastructure team as this is part of an ongoing BDII issue.</pre></div><div class='update_description'><i onclick="document.location='9526#1289239730'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-08T18:08:50+00:00">Nov 8, 2010 06:08 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1289239730">&nbsp;</a></div><pre>Re-assigning to support team.</pre></div><div class='update_description'><i onclick="document.location='9526#1289228889'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-08T15:08:09+00:00">Nov 8, 2010 03:08 PM UTC</time> by <b>Xin zhao</b><a class="anchor" name="1289228889">&nbsp;</a></div><pre>Hi Brian,

We don&#39;t have gip_diagnostic, we run GIP version 1.1.8&#58;

vdt-version | grep Generic
Generic Information Provider 1.1.8                       UPDATE
AVAILABLE [1.1.12]

Also, below please find some info from Hiro&#58;

Thanks,
Xin

===========================================================

Hello.

For some reason, one of the two SAM bdii has lost BNL information.

dig sam-bdii.cern.ch
...
sam-bdii.cern.ch.       57      IN      A       128.142.142.159
sam-bdii.cern.ch.       57      IN      A       128.142.198.42

export LCG_GFAL_INFOSYS=128.142.142.159&#58;2170
glite-sd-query -t SRM -s BNL-ATLAS
No entries found

while it works with the other one.

export LCG_GFAL_INFOSYS=128.142.198.42&#58;2170
glite-sd-query -t SRM -s BNL-ATLAS
Name&#58; httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2
Type&#58; SRM
Endpoint&#58; httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2
<div id='show_830583684' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_830583684'>Version&#58; 2.2.0

Name&#58; httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv1
Type&#58; SRM
Endpoint&#58; httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv1
Version&#58; 1.1.0

This is causing BNL to fail the SAM test half of the time due to the
round robin.  Can you check this?

Hiro

On 11/8/2010 9&#58;29 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_830583684').click(function() {
            $('#detail_830583684').slideDown("normal");
            $('#show_830583684').hide();
            $('#hide_830583684').show();
        });
        $('#hide_830583684').click(function() {
            $('#detail_830583684').slideUp();
            $('#hide_830583684').hide();
            $('#show_830583684').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='9526#1289226548'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-08T14:29:08+00:00">Nov 8, 2010 02:29 PM UTC</time><a class="anchor" name="1289226548">&nbsp;</a></div><pre>Hi Xin,

Is &#34;gip_diagnostic&#34; shipped with the version of GIP your site runs?  If so, please run it and send osg-gip@.... the resulting tarball.

This tool is designed to gather all the log files into a single bug-report for us to look at.

Thanks,

Brian

PS - You don&#39;t want rsv-sam CC&#39;d on this one (that list is concerned with the passing of RSV results directly into SAM, not EGI-based SAM tests), but I&#39;m not sure what the right list is.

-- by Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='9526#1289226211'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-08T14:23:31+00:00">Nov 8, 2010 02:23 PM UTC</time><a class="anchor" name="1289226211">&nbsp;</a></div><pre>Adding SAM team, so that they can follow the progress and provide any more info if needed...

Also, Flavia helped to open a GGUS ticket for this issue separately, <a href='https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=64039' target='_blank' rel='nofollow'>https&#58;//gus.fzk.de/ws/ticket_info.php?ticket=64039</a>
We can link them together (if there is a way) or close the GGUS one, and let OSG GOC to follow up starting with this GOC ticket.

Thanks,

Xin

-- by Xin Zhao</pre></div><div class='update_description'><i onclick="document.location='9526#1289216542'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-11-08T11:42:22+00:00">Nov 8, 2010 11:42 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1289216542">&nbsp;</a></div><pre>[Xin Zhao]

Hello GOC,

The SAM test has been failing from time to time at BNL since last night. Errors are&#58;

<a href='srm&#58;//dcsrm.usatlas.bnl.gov/pnfs/usatlas.bnl.gov/MCTAPE/atlasmctape/SAM/SRM-lcg-cr-dcsrm.usatlas.bnl' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov/pnfs/usatlas.bnl.gov/MCTAPE/atlasmctape/SAM/SRM-lcg-cr-dcsrm.usatlas.bnl</a>
.gov-ATLASMCTAPE-1289194972 ...
[BDII][][] sam-bdii.cern.ch&#58; No entries for host&#58; dcsrm.usatlas.bnl.gov
[BDII][][] sam-bdii.cern.ch&#58; No entries for host&#58; dcsrm.usatlas.bnl.gov
lcg_cp&#58; Invalid argument

As I check the SAM BDII directly, sometimes it reports no entry for BNL-ATLAS at all&#58;

ldapsearch -LLL -h sam-bdii.cern.ch&#58;2170 -x -b mds-vo-name=BNL-ATLAS,mds-vo-name=local,o=grid

OSG and LCG BDII look fine.

Could you help contact SAM BDII folks about this? This is pretty urgent, as SAM test still fails now. We can contact them directly if you can give us the info.

Thanks,
Xin</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F9526">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 9526});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
