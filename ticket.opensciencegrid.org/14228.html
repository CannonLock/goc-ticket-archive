<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[14228] glow jobs thrashing on UConn site</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=14228" method="post">
<div class="page-header">
    <h3><span class="muted">14228</span> / glow jobs thrashing on UConn site</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Richard T. Jones</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Richard T. Jones</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-04-19</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
        <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/14228", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/14228?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/14228?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20glow%20jobs%20thrashing%20on%20UConn%20site%20ISSUE%3D14228%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='14228#1366121271'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-16T14:07:51+00:00">Apr 16, 2013 02:07 PM UTC</time> by <b>echism</b><a class="anchor" name="1366121271">&nbsp;</a></div><pre>Thanks Richard and Aaron.

I&#39;ll close this.

Elizabeth</pre></div><div class='update_description'><i onclick="document.location='14228#1366053488'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-15T19:18:08+00:00">Apr 15, 2013 07:18 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1366053488">&nbsp;</a></div><pre>Elizabeth,

Yes, that is fine with me.

-Richard J.

On 4/12/2013 4&#58;28 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='14228#1365798515'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-12T20:28:35+00:00">Apr 12, 2013 08:28 PM UTC</time> by <b>echism</b><a class="anchor" name="1365798515">&nbsp;</a></div><pre>Richard,

For the time being, it seems the initial inquiry is resolved and there is a development effort to prevent this scenario in the future, albeit one that may require time.

I am satisfied with that answer and I would like to close this. Is that acceptable to you?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='14228#1365453582'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-08T20:39:42+00:00">Apr 8, 2013 08:39 PM UTC</time><a class="anchor" name="1365453582">&nbsp;</a></div><pre>Richard,

Unfortunately, I am fairly new to the field of HTC, and I do not yet possess the skill set to accomplish what you are suggesting.  Dan Bradley and Nathan Yehle (the other two GLOW admins) have an idea, but even so it will take some gradual testing before we implement the necessary changes.  I am confident that we will eventually be able to restrict jobs that use more than their requested resources, but it may be some time before we get there.

-Aaron Moate

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Aaron Moate 894</pre></div><div class='update_description'><i onclick="document.location='14228#1365248588'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-06T11:43:08+00:00">Apr 6, 2013 11:43 AM UTC</time> by <b>GLUEX</b><a class="anchor" name="1365248588">&nbsp;</a></div><pre>Elizabeth,

I do not see that user submitting that same type of job right now.  Ideally, a general mechanism would be put in place in the glideins to limit the ability of user jobs to demand resources on a worker node beyond what they specified in their submit file. The GLOW VO admins would be the ones to address that.

-Richard J.

On 4/5/2013 11&#58;05 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='14228#1365174329'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-05T15:05:29+00:00">Apr 5, 2013 03:05 PM UTC</time> by <b>echism</b><a class="anchor" name="1365174329">&nbsp;</a></div><pre>Hi Richard,

Is this resolved?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='14228#1364410330'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-27T18:52:10+00:00">Mar 27, 2013 06:52 PM UTC</time> by <b>moate@....</b><a class="anchor" name="1364410330">&nbsp;</a></div><pre>Richard,

Answers inline&#58;

<font color='#7F7E6F'>&#62;    I don&#39;t think this is a question for me, is it? The jobs come from the</font>
<font color='#7F7E6F'>&#62;    GLOW VO, so someone needs to consult the VO contact person for how they id</font>
<font color='#7F7E6F'>&#62;    their jobs and users for their VO.</font>

It was;  I was basically trying to make sure that you had just one
GLOW perpetrator with thrasing jobs on the uconn machines;  The attributes
you sent (which were very helpful) indicate that the offending jobs came
from the submit node spaldingsubmit.botany.wisc.edu.  I wanted to determine
if that was common to all thrashing jobs.

Feel free to wait on responding or to abstain from responding at all.
We have talked to the submit node&#39;s owners;  They are going to remove their
jobs from queue, and they will either reduce the memory their jobs use, or
increase the memory requirement in the jobad.

If no GLOW jobs are thrashing in the near future, we will know the
problem is solved.

<font color='#7F7E6F'>&#62;    Or maybe this question was not for me. In the future, would you mind</font>
<font color='#7F7E6F'>&#62;    putting the person&#39;s name you are addressing at the top of the message?</font>
<font color='#7F7E6F'>&#62;    These tickets are read by a number of people, who can contribute their</font>
<font color='#7F7E6F'>&#62;    expertise when a question is directed to them by name.</font>

Certainly.  Sorry for not being more clear.

-Aaron Moate</pre></div><div class='update_description'><i onclick="document.location='14228#1364409607'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-27T18:40:07+00:00">Mar 27, 2013 06:40 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1364409607">&nbsp;</a></div><pre>Hello Aaron,

I don&#39;t think this is a question for me, is it?  The jobs come from the GLOW VO, so someone needs to consult the VO contact person for how they id their jobs and users for their VO.

Or maybe this question was not for me.  In the future, would you mind putting the person&#39;s name you are addressing at the top of the message?  These tickets are read by a number of people, who can contribute their expertise when a question is directed to them by name.

-Richard J.

On 3/26/2013 11&#58;23 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='14228#1364407270'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-27T18:01:10+00:00">Mar 27, 2013 06:01 PM UTC</time> by <b>moate@....</b><a class="anchor" name="1364407270">&nbsp;</a></div><pre>Outstanding, thank you for the info Richard.  I&#39;m assuming all the churning
jobs have &#39;GlobalJobId = &#34;spaldingsubmit.botany.wisc.edu#XXXXXXX.X#XXXXXXXXXX&#34;?

I&#39;m talking to the CHTC engagement team to decide how to deal with this.

-Aaron Moate

On Wed, Mar 27, 2013 at 04&#58;13&#58;00PM +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62;    [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='14228#1364406471'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-27T17:47:51+00:00">Mar 27, 2013 05:47 PM UTC</time><a class="anchor" name="1364406471">&nbsp;</a></div><pre>Bill & Aaron,

I looked at the jobs on spaldingsubmit.botany.wisc.edu.  I see that the requirements expression for these jobs contains this&#58; Memory &#62; 1000.  The Memory attribute on the UConn glideins is 1024.  The ImageSize on the job I&#39;m looking at is ImageSize = 17500000, and ResidentSetSize = 13705156.

--Dan

by /DC=org/DC=doegrids/OU=People/CN=Dan Bradley 268953</pre></div><div class='update_description'><i onclick="document.location='14228#1364400788'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-27T16:13:08+00:00">Mar 27, 2013 04:13 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1364400788">&nbsp;</a></div><pre>Hello,

I see a dozen running on my cluster right now.  They are running &#34;R&#34; and have upwards of 10GB of resident set, churning for more. Here is a snippet from the StartdLog inside one of these running glideins that might help you track it down.

MyAddress = &#34;&#60;128.104.98.118&#58;50120?sock=6920_8412_17666&#62;&#34;
GlobalJobId = &#34;spaldingsubmit.botany.wisc.edu#3452742.0#1364398198&#34;
LocalSysCpu = 0.0
DiskUsage = 372848
MemoryUsage = ( ( ResidentSetSize + 1023 ) / 1024 )
WhenToTransferOutput = &#34;ON_EXIT_OR_EVICT&#34;
UserLog = &#34;/spalding/SOAR/html/condorruns/qtl/7106/dataset_grav2primcomp-4/run_perm_test_4_25.log&#34;
LastMatchName0 = &#34;glidein_26970@....&#34;
RequestMemory = ceiling(ifThenElse(JobVMMemory =!= undefined,JobVMMemory,ImageSize / 1024.000000))

-Richard Jones

On 3/25/2013 6&#58;57 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='14228#1364311407'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-26T15:23:27+00:00">Mar 26, 2013 03:23 PM UTC</time><a class="anchor" name="1364311407">&nbsp;</a></div><pre>Do any of the jobad attributes from the GlideinWMS come directly from the jobad attributes of the submitter&#39;s actual job?  Let me ask the question in a different way&#58;  Could I query each of the submit nodes that use GLOW glidein and compare the jobad attributes for each job on those submit nodes against any of the jobad attributes you provided to me below and get useful information? Would I be able to do it with the &#34;requirements&#34; attribute?  And if so, which one?  There are two in the posted jobad attributes. I am struggling with how I should track down the offending submitter.

-Aaron Moate

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Aaron Moate 894</pre></div><div class='update_description'><i onclick="document.location='14228#1364252262'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-25T22:57:42+00:00">Mar 25, 2013 10:57 PM UTC</time><a class="anchor" name="1364252262">&nbsp;</a></div><pre>I need to talk to Bill Taylor to see where he&#39;s at with this;  Last we spoke, it sounded like he was struggling to identify the jobs based on the available information.

-Aaron Moate

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Aaron Moate 894</pre></div><div class='update_description'><i onclick="document.location='14228#1364220460'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-25T14:07:40+00:00">Mar 25, 2013 02:07 PM UTC</time> by <b>echism</b><a class="anchor" name="1364220460">&nbsp;</a></div><pre>GLOW,

Have you been able to follow up with this user?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='14228#1363796049'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-20T16:14:09+00:00">Mar 20, 2013 04:14 PM UTC</time> by <b>moate@....</b><a class="anchor" name="1363796049">&nbsp;</a></div><pre>Bill Taylor (CC&#39;ed) will be taking this ticket on from our end.

-Moate

On Mon, Mar 18, 2013 at 03&#58;49&#58;00PM +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62;    [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='14228#1363621760'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-18T15:49:20+00:00">Mar 18, 2013 03:49 PM UTC</time><a class="anchor" name="1363621760">&nbsp;</a></div><pre>Richard,

Sorry to hear about this problem.

In the past when this issue happened, we found that the glideins running at UConn were advertising the factory default of 2GB/slot.  We requested the glidein factory to reduce this to 1GB/slot, and they did.  Jobs that request more than 1GB of memory will therefore not run at UConn.  The most likely explanation for this latest incident is that jobs were submitted with a memory request smaller than what was really needed, so they were allowed to run at UConn, but they used more than 1GB of RAM.  We will need to investigate this and also review the glidein job management policies in cases such as this.

--Dan

by /DC=org/DC=doegrids/OU=People/CN=Dan Bradley 268953</pre></div><div class='update_description'><i onclick="document.location='14228#1363382708'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-15T21:25:08+00:00">Mar 15, 2013 09:25 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1363382708">&nbsp;</a></div><pre>Hello Aaron,

I believe that running &#34;condor_q -l&#34; will not be very helpful to you because it only reports the parameters of the glideinwms pilot, which is generic for all GLOW jobs.  For example, the grid proxy dn reported by &#34;condor_q -l&#34; for these jobs (see below for an example) is

x509UserProxyFQAN = &#34;/DC=org/DC=doegrids/OU=Services/CN=pilot/glidein.chtc.wisc.edu,/GLOW/Role=NULL/Capability=NULL&#34;

which is the glideinwms pilot id, and tells nothing discernable about the user that submitted the job, at least to me.  Maybe something in the listing below (from one of the thrashing jobs) can be given to the GLOW factory admin, and that person can give you more particulars on which submit host claimed the pilot.  If I had been able to work on the node while it was thrashing, I could have descended into the log of the slave condor_startd and gotten more relevant info.  As it was, the machine was too sluggish to allow that.

-Richard Jones

gluskap&#62;  condor_q -l 3079319.0

-- Submitter&#58; gluskap.phys.uconn.edu &#58; &#60;137.99.79.130&#58;43871&#62; &#58; gluskap.phys.uconn.edu
PeriodicRemove = false
CommittedSlotTime = 0
Out = &#34;/home/glow/.globus/glow/.globus/job/gluskap/16289977857884966716.6559580960382267317/stdout&#34;
ImageSize_RAW = 45
x509UserProxyEmail = &#34;moate@....&#34;
NumCkpts_RAW = 0
AutoClusterAttrs = &#34;JobUniverse,LastCheckpointPlatform,NumCkpts,Scheduler,User,JobType,RemoteGroupQuota,SubmitterGroupQuota,AccountingGroup,DiskUsage,ImageSize,
RequestDisk,RequestMemory,Requirements,NiceUser,ConcurrencyLimits&#34;
EnteredCurrentStatus = 1363376311
CommittedSuspensionTime = 0
WhenToTransferOutput = &#34;ON_EXIT&#34;
NumSystemHolds = 0
StreamOut = false
UserLogUseXML = true
NumRestarts = 0
ImageSize = 45
Cmd = &#34;/home/glow/.globus/.gass_cache/local/md5/c5/902a0bead500f8e900cd30e0c30e2a/md5/64/3fc74d3412a3798d9b46ea413fb240/data&#34;
x509UserProxyVOName = &#34;GLOW&#34;
CurrentHosts = 0
Iwd = &#34;/home/glow/gram_scratch_n0IzGz&#34;
CumulativeSlotTime = 0
ExecutableSize_RAW = 45
<div id='show_761850993' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_761850993'>CondorVersion = &#34;$CondorVersion&#58; 7.8.6 Dec 21 2012 $&#34;
RemoteUserCpu = 0.0
NumCkpts = 0
JobStatus = 5
Arguments = &#34;-v std -cluster 331584 -name v1_0 -entry GLOW_US_UConn_gluskap_64 -clientname chtc.main -subcluster 6 -schedd schedd_glideins2@.....e
du -factory SDSC -web <a href='http&#58;//gfactory-1.t2.ucsd.edu/glidefactory//stage/glidein_v1_0' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/glidefactory//stage/glidein_v1_0</a> -sign bf1cb74b21c37c72dbbbc39fa50bf2dec5b2d877 -signentry f2193ae291ff62f95
93cf8cc50fdaaf23d992e3d -signtype sha1 -descript description.d1mbqO.cfg -descriptentry description.d1ffGw.cfg -dir Condor -param_GLIDEIN_Client chtc.main -clien
tweb <a href='http&#58;//glidein.chtc.wisc.edu/gwms/stage/frontend_chtc' target='_blank' rel='nofollow'>http&#58;//glidein.chtc.wisc.edu/gwms/stage/frontend_chtc</a> -clientsign 25f98cbc186fb82ae987a6000ca8bdd38ec1d0a9 -clientsigntype sha1 -clientdescript description
.d2jcym.cfg -clientgroup main -clientwebgroup <a href='http&#58;//glidein.chtc.wisc.edu/gwms/stage/frontend_chtc/group_main' target='_blank' rel='nofollow'>http&#58;//glidein.chtc.wisc.edu/gwms/stage/frontend_chtc/group_main</a> -clientsigngroup 72c35f7b687e1329e81b6632dc6aa0f6
d0f43973 -clientdescriptgroup description.cbqgrW.cfg -param_CONDOR_VERSION default -param_GLIDEIN_Glexec_Use NEVER -param_GLIDEIN_Job_Max_Time 34800 -param_GLIDECLIENT_ReqNode gfactory.minus,1.dot,t2.dot,ucsd.dot,edu -param_CONDOR_ARCH default -param_MIN_DISK_GBS 1 -param_CONDOR_OS default -param_UPDATE_COLLECTOR_WITH_TCP True -param_USE_MATCH_AUTH True -param_GLIDEIN_Entry_Start True -param_GLIDE
IN_Collector glidein.dot,chtc.dot,wisc.dot,edu.colon,9620.minus,9669&#34;
RemoteSysCpu = 0.0
OnExitRemove = true
BufferBlockSize = 32768
ClusterId = 3079319
In = &#34;/dev/null&#34;
LocalUserCpu = 0.0
x509UserProxyFQAN = &#34;/DC=org/DC=doegrids/OU=Services/CN=pilot/glidein.chtc.wisc.edu,/GLOW/Role=NULL/Capability=NULL&#34;
MinHosts = 1
JobUniverse = 5
RequestDisk = DiskUsage
RootDir = &#34;/&#34;
NumJobStarts = 0
WantRemoteIO = true
RequestMemory = ifthenelse(MemoryUsage =!= undefined,MemoryUsage,( ImageSize + 1023 ) / 1024)
GlobalJobId = &#34;gluskap.phys.uconn.edu#3079319.0#1363373017&#34;
x509UserProxyFirstFQAN = &#34;/GLOW/Role=NULL/Capability=NULL&#34;
LocalSysCpu = 0.0
PeriodicRelease = false
HoldReasonSubCode = 0
DiskUsage = 45
CumulativeSuspensionTime = 0
JobLeaseDuration = 1200
UserLog = &#34;/var/lib/globus/gram_job_state/condor.16289977857884966716.6559580960382267317&#34;
GratiaJobOrigin = &#34;GRAM&#34;
ExecutableSize = 45
Env = &#34;PATH=/sbin&#58;/usr/sbin&#58;/bin&#58;/usr/bin;GLOBUS_REMOTE_IO_URL=/home/glow/.globus/glow/.globus/job/gluskap/16289977857884966716.6559580960382267317/remote_io_file;LD_LIBRARY_PATH=/usr/lib;OSG_JOB_CONTACT=host.name/jobmanager-condor;KEEPINTVL=60;KEEPCNT=9;OSG_SQUID_LOCATION=UNAVAILABLE;MPICH_ROOT=/usr/local/mpich;XERCES
CROOT=/usr/local/xerces;OSG_DEFAULT_SE=grinch.phys.uconn.edu;OSG_GRID=/etc/osg/wn-client/;GLOBUS_TCP_SOURCE_RANGE=20000,20499;GLOBUS_LOCATION=/usr;OSG_HOSTNAME=gluskap.phys.uconn.edu;LD_PRELOAD=/$LIB/libkeepalive.so;GLOBUS_TCP_PORT_RANGE=45000,49999;OSG_STORAGE_ELEMENT=True;GLOBUS_GRAM_JOB_CONTACT=<a href='https&#58;//gluskap.phys.uconn.edu&#58;45320/16289977857884966716/6559580960382267317/' target='_blank' rel='nofollow'>https&#58;//gluskap.phys.uconn.edu&#58;45320/16289977857884966716/6559580960382267317/</a>;OSG_SITE_NAME=UConn-OSG_CE;OPENMPI_ROOT=/usr/local/openmpi;GLOBUS_GASS_CACHE_DEFAULT=/home/glow/.globus/.gass_cache;KEEPIDLE=500;LOCAL_ROOTSYS=/usr/local/root;MY_INITIAL_DIR=$_CONDOR
_SCRATCH_DIR;OSG_APP=/nfs/direct/app;OSG_WN_TMP=worker_node_temp;SCRATCH_DIRECTORY=$_CONDOR_SCRATCH_DIR;QTLIB=/usr/lib64/qt-3.3/lib;CERN=/usr/local/cern;OSG_SITE_WRITE=<a href='srm&#58;//grinch.phys.uconn.edu&#58;8443/' target='_blank' rel='nofollow'>srm&#58;//grinch.phys.uconn.edu&#58;8443/</a>;OSG_GLEXEC_LOCATION=None;OSG_DATA=/nfs/direct/annex/osg-data;CERN_ROOT=/usr/local/cern/pro;HOME=/home/glow;LOGNAME=glow;CHANGED_X509=/home/glow/.globus/glow/.globus/job/gluskap/16289977857884966716.6559580960382267317/x509_user_proxy;OSG_SITE_READ=dcap&#58;//nod25.phys.uconn.edu&#58;22125/pnfs/phys.uconn.edu/data&#34;
MaxHosts = 1
ServerTime = 1363382167
CoreSize = 0
DiskUsage_RAW = 45
ProcId = 0
ShouldTransferFiles = &#34;YES&#34;
CommittedTime = 0
TotalSuspensions = 0
Err = &#34;/home/glow/.globus/glow/.globus/job/gluskap/16289977857884966716.6559580960382267317/stderr&#34;
EnvDelim = &#34;;&#34;
HoldReason = &#34;via condor_hold (by user condor)&#34;
x509userproxysubject = &#34;/DC=org/DC=doegrids/OU=Services/CN=pilot/glidein.chtc.wisc.edu&#34;
AutoClusterId = 707
RequestCpus = 1
StreamErr = false
x509UserProxyExpiration = 1363630082
NiceUser = false
RemoteWallClockTime = 0.0
TargetType = &#34;Machine&#34;
PeriodicHold = false
QDate = 1363373017
OnExitHold = false
Rank = 0.0
ExitBySignal = false
CondorPlatform = &#34;$CondorPlatform&#58; X86_64-CentOS_5.7 $&#34;
HoldReasonCode = 1
JobPrio = 0
LastSuspensionTime = 0
CurrentTime = time()
x509userproxy = &#34;/home/glow/.globus/glow/.globus/job/gluskap/16289977857884966716.6559580960382267317/x509_user_proxy&#34;
JobNotification = 0
User = &#34;glow@....&#34;
BufferSize = 524288
WantRemoteSyscalls = false
LeaveJobInQueue = false
ExitStatus = 0
CompletionDate = 0
MyType = &#34;Job&#34;
Requirements = ( Arch =?= &#34;X86_64&#34; ) && ( TARGET.OpSys == &#34;LINUX&#34; ) && ( TARGET.Disk &#62;= RequestDisk ) && ( TARGET.Memory &#62;= RequestMemory ) && (TARGET.HasFileTCondorPlatform = &#34;$CondorPlatform&#58; X86_64-CentOS_5.7 $&#34;
HoldReasonCode = 1
JobPrio = 0
LastSuspensionTime = 0
CurrentTime = time()
x509userproxy = &#34;/home/glow/.globus/glow/.globus/job/gluskap/16289977857884966716.6559580960382267317/x509_user_proxy&#34;
JobNotification = 0
User = &#34;glow@....&#34;
BufferSize = 524288
WantRemoteSyscalls = false
LeaveJobInQueue = false
ExitStatus = 0
CompletionDate = 0
MyType = &#34;Job&#34;
Requirements = ( Arch =?= &#34;X86_64&#34; ) && ( TARGET.OpSys == &#34;LINUX&#34; ) && ( TARGET.Disk &#62;= RequestDisk ) && ( TARGET.Memory &#62;= RequestMemory ) && ( TARGET.HasFileT
ransfer )
WantCheckpoint = false
Owner = &#34;glow&#34;
LastJobStatus = 1
TransferIn = false

On 3/15/2013 5&#58;01 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_761850993').click(function() {
            $('#detail_761850993').slideDown("normal");
            $('#show_761850993').hide();
            $('#hide_761850993').show();
        });
        $('#hide_761850993').click(function() {
            $('#detail_761850993').slideUp();
            $('#hide_761850993').hide();
            $('#show_761850993').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='14228#1363381268'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-15T21:01:08+00:00">Mar 15, 2013 09:01 PM UTC</time> by <b>moate@....</b><a class="anchor" name="1363381268">&nbsp;</a></div><pre>Elizabeth,

My apologies if any of the questions I ask below betray my lack
of understanding for most things OSG - I will attempt to clean this
up.

Which jobs are thrashing (clusterid, jobid)?  Could you send me
the &#34;condor_q -l &#60;clusterid.jobid&#62;&#34; or equivalent for that job?
Can you see any evidence or metadata regarding the submitter of the
job?  Do you have a copy of the submit file?

I&#39;m not aware of a current prevention mechanism, although
application of cgroups in the future will keep process trees from using
more than an alotted amount of memory.  I believe that for now, we&#39;re
on the honor system;  The best I can do is to find the submitter and
communicate with them to prevent this from happening again.

I&#39;m sorry for the inconvenience.

Aaron Moate
CHTC Infrastructure Team

On Fri, Mar 15, 2013 at 08&#58;03&#58;00PM +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62;    [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='14228#1363377780'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-15T20:03:00+00:00">Mar 15, 2013 08:03 PM UTC</time> by <b>echism</b><a class="anchor" name="1363377780">&nbsp;</a></div><pre>GLOW Management,

We received the following complaint from UConn&#58;
====
I see jobs from GLOW are thrashing on the worker nodes.  Our site limit on RAM per job slot is 1GB.  I see resident sets up to 2.8GB for jobs running R on our site.  This is not the first time I have reported this problem.  Might a mechanism be found or a policy put in place to prevent this from happening again?

For the moment, I am running a script to condor_hold all glow jobs on our site.  Please let me know as soon as possible when that block can be lifted.
====

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='14228#1363376606'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-15T19:43:26+00:00">Mar 15, 2013 07:43 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1363376606">&nbsp;</a></div><pre>I see jobs from GLOW are thrashing on the worker nodes.  Our site limit on RAM per job slot is 1GB.  I see resident sets up to 2.8GB for jobs running R on our site.  This is not the first time I have reported this problem.  Might a mechanism be found or a policy put in place to prevent this from happening again?

For the moment, I am running a script to condor_hold all glow jobs on our site.  Please let me know as soon as possible when that block can be lifted.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Richard T. Jones 594</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F14228">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
