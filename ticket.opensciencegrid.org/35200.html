<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[35200] Thousands of jobs with 139 exit code at T2_US_UCSD</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=35200" method="post">
<div class="page-header">
    <h3><span class="muted">35200</span> / Thousands of jobs with 139 exit code at T2_US_UCSD</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">del Re</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">del Re</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier2</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-11-03</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USCMS Tier 2 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=131295">131295</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/35200", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/35200?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/35200?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Thousands%20of%20jobs%20with%20139%20exit%20code%20at%20T2_US_UCSD%20ISSUE%3D35200%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='35200#1511222403'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-21T00:00:03+00:00">Nov 21, 2017 12:00 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1511222403">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according to your expectations or if you need further information, please submit a new ticket referencing this one.&#13;

-- by GGUS SYSTEM at Mon Nov 20 23&#58;59&#58;00 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295</a></pre></div><div class='update_description'><i onclick="document.location='35200#1509734377'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-11-03T18:39:37+00:00">Nov 3, 2017 06:39 PM UTC</time> by <b>echism</b><a class="anchor" name="1509734377">&nbsp;</a></div><pre>After speaking to Terrence out of band, I&#39;m closing this.</pre></div><div class='update_description'><i onclick="document.location='35200#1509406627'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-30T23:37:07+00:00">Oct 30, 2017 11:37 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1509406627">&nbsp;</a></div><pre>The systems are back on and all have singularity so probably.</pre></div><div class='update_description'><i onclick="document.location='35200#1509393785'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-30T20:03:05+00:00">Oct 30, 2017 08:03 PM UTC</time> by <b>echism</b><a class="anchor" name="1509393785">&nbsp;</a></div><pre>Does anything further need to happen in this ticket?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35200#1509127181'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-27T17:59:41+00:00">Oct 27, 2017 05:59 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1509127181">&nbsp;</a></div><pre>Hallo Terrence,
those SL7 machines have working Singularity, right? In that case
i see no reason to not turn them back on. Thanks,
cheers,  Stephan&#13;

-- by Stephan Lammel at Fri Oct 27 17&#58;58&#58;59 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295</a></pre></div><div class='update_description'><i onclick="document.location='35200#1509126610'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-27T17:50:10+00:00">Oct 27, 2017 05:50 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1509126610">&nbsp;</a></div><pre>Is there an update on this? I would like to turn those machines back on
to accept jobs. They run analysis from our factories fine.

Terrence

On 10/26/2017 1&#58;23 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35200#1509049386'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T20:23:06+00:00">Oct 26, 2017 08:23 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1509049386">&nbsp;</a></div><pre>Terrence --

Yes, that is a problem and should be fixed on the CMS side.

Additionally, you may want to be aware of current issues with the latest RHEL7.4 kernel which causes autofs to incorrectly unmount active mountpoints.  Nebraska had to workaround and set timeout=0 on our hosts.

RedHat has acknowledged the bug and will roll out a fix in a future kernel version.  Please see <a href='https&#58;//bugzilla.redhat.com/show_bug.cgi?id=1489542#c10' target='_blank' rel='nofollow'>https&#58;//bugzilla.redhat.com/show_bug.cgi?id=1489542#c10</a> for more info.

Not sure if this information is relevant to this ticket, but it is worthwhile to keep in mind when upgrading.&#13;

-- by Brian Bockelman at Thu Oct 26 20&#58;22&#58;52 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295</a></pre></div><div class='update_description'><i onclick="document.location='35200#1509038054'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T17:14:14+00:00">Oct 26, 2017 05:14 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1509038054">&nbsp;</a></div><pre>Just to be clear, all of these nodes below have singularity, installed
since August. So the check is failing for some other reason than
singularity not being there.

[1008] root@cabinet-0-0-10 ~# rpm -qi singularity
Name        &#58; singularity                  Relocations&#58; (not relocatable)
Version     &#58; 2.2.1                             Vendor&#58; Fedora Project
Release     &#58; 3.el6                         Build Date&#58; Sun 21 May 2017
02&#58;45&#58;31 PM PDT
Install Date&#58; Wed 30 Aug 2017 06&#58;39&#58;30 PM PDT      Build Host&#58;
buildhw-10.phx2.fedoraproject.org

Terrence

On 10/26/2017 9&#58;16 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35200#1509036677'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T16:51:17+00:00">Oct 26, 2017 04:51 PM UTC</time><a class="anchor" name="1509036677">&nbsp;</a></div><pre>Hi Diego,

I found one of the problems.

If you check here&#58;

<a href='https&#58;//gitlab.cern.ch/efajardo/cmsgwms-frontend-configurations/blob/cern/itb/frontend.xml#L655' target='_blank' rel='nofollow'>https&#58;//gitlab.cern.ch/efajardo/cmsgwms-frontend-configurations/blob/cern/itb/frontend.xml#L655</a>

This script has period=&#34;0&#34; that means it only runs once. That is really problematic specially for keeping cvmfs mounts alive inside sinuglairy and if singularity is actually fixed the pilot never realizes it. See for example&#58;

condor_status -wide -pool vocms0808.cern.ch -const &#39;GLIDEIN_CMSSIte==&#34;T2_US_UCSD&#34; && GLIDEIN_REQUIRED_OS==&#34;any&#34; && HAS_SINGULARITY==false&#39;
Name                                                       OpSys      Arch   State     Activity LoadAv Mem  ActivityTime

slot1@glidein_2943030_317728260@.... LINUX      X86_64 Unclaimed Idle      1.000 2064   1+02&#58;10&#58;35
slot1_1@glidein_2943030_317728260@.... LINUX      X86_64 Claimed   Busy     23.040 18176   0+07&#58;31&#58;23
slot1@glidein_1800139_6683642@....     LINUX      X86_64 Unclaimed Idle      1.000 1808   0+20&#58;47&#58;38
slot1_1@glidein_1800139_6683642@....   LINUX      X86_64 Claimed   Busy     19.610 4096   0+01&#58;29&#58;16
slot1_2@glidein_1800139_6683642@....   LINUX      X86_64 Claimed   Busy      1.030 4096   0+01&#58;29&#58;16
slot1_3@glidein_1800139_6683642@....   LINUX      X86_64 Claimed   Busy      1.010 4096   0+00&#58;39&#58;14
slot1_4@glidein_1800139_6683642@....   LINUX      X86_64 Claimed   Busy      1.000 2048   0+00&#58;00&#58;00
slot1_5@glidein_1800139_6683642@....   LINUX      X86_64 Claimed   Busy      1.000 2048   0+00&#58;00&#58;01
slot1_6@glidein_1800139_6683642@....   LINUX      X86_64 Claimed   Busy      1.000 2048   0+00&#58;00&#58;01
slot1@glidein_1003965_240506922@....   LINUX      X86_64 Unclaimed Idle      1.000 16144   1+09&#58;58&#58;58
slot1_3@glidein_1003965_240506922@.... LINUX      X86_64 Claimed   Busy     11.590 4096   0+14&#58;36&#58;35
slot1@glidein_2978665_57286710@....    LINUX      X86_64 Unclaimed Idle      1.000 2064   1+00&#58;31&#58;15
slot1_1@glidein_2978665_57286710@....  LINUX      X86_64 Claimed   Busy     13.600 18176   0+00&#58;21&#58;15
slot1@glidein_4190602_772074320@....   LINUX      X86_64 Unclaimed Idle      1.000 7952   1+07&#58;39&#58;21
slot1_1@glidein_4190602_772074320@.... LINUX      X86_64 Claimed   Busy      7.170 4096   0+12&#58;48&#58;53
slot1_2@glidein_4190602_772074320@.... LINUX      X86_64 Claimed   Busy      1.090 4096   0+08&#58;58&#58;40
slot1_3@glidein_4190602_772074320@.... LINUX      X86_64 Claimed   Busy      1.050 4096   0+08&#58;58&#58;35

But I log in to cabinet-5-5-14&#58;

[0943] root@cabinet-5-5-14 ~# singularity --version
2.2.1
<div id='show_1646759796' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1646759796'>
This happens cause the periodicity is set to 0. I am sorry I never noticed that before. A good number is what we do in OSG 240 so it is less than five minutes.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020
</div><script type='text/javascript'>
        $('#show_1646759796').click(function() {
            $('#detail_1646759796').slideDown("normal");
            $('#show_1646759796').hide();
            $('#hide_1646759796').show();
        });
        $('#hide_1646759796').click(function() {
            $('#detail_1646759796').slideUp();
            $('#hide_1646759796').hide();
            $('#show_1646759796').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='35200#1509035522'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T16:32:02+00:00">Oct 26, 2017 04:32 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1509035522">&nbsp;</a></div><pre>Ahh, thanks Diego!
Is there a way to modify the pilot to advertise only the WN OS
in case Singularity is not available (instead of any)? Thanks,
cheers,  Stephan&#13;

-- by Stephan Lammel at Thu Oct 26 16&#58;31&#58;37 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295</a></pre></div><div class='update_description'><i onclick="document.location='35200#1509034563'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T16:16:03+00:00">Oct 26, 2017 04:16 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1509034563">&nbsp;</a></div><pre>From some recent pilot logs[1] I can see there are some UCSD pilots which fail to find singularity[2] but  they continue to run, given that the singularity validation script is not required for the pilot execution. These pilots advertise REQUIRED_OS= &#34;any&#34; but they are not capable of running singularity, so even when they are matched to jobs requesting rhel6, they end up running on the rhel7 (the host OS).

You can find these failing pilots in the Global pool using this query[3] (can be executed from lxplus)

Regards,

Diego

[1]
<a href='http&#58;//submit-3.t2.ucsd.edu/CSstoragePath/FactoryLogsGlobalPool/sdsc/entry_CMSHTPC_T2_US_UCSD_gw6/job.4813648.8.out' target='_blank' rel='nofollow'>http&#58;//submit-3.t2.ucsd.edu/CSstoragePath/FactoryLogsGlobalPool/sdsc/entry_CMSHTPC_T2_US_UCSD_gw6/job.4813648.8.out</a>
<a href='http&#58;//submit-3.t2.ucsd.edu/CSstoragePath/FactoryLogsGlobalPool/sdsc/entry_CMSHTPC_T2_US_UCSD_gw6/job.4813648.8.err' target='_blank' rel='nofollow'>http&#58;//submit-3.t2.ucsd.edu/CSstoragePath/FactoryLogsGlobalPool/sdsc/entry_CMSHTPC_T2_US_UCSD_gw6/job.4813648.8.err</a>

[2] snippet of the singularity_validation script
HAS_SINGULARITY=&#34;False&#34;
export OSG_SINGULARITY_VERSION=&#96;singularity --version 2&#62;/dev/null&#96;
if [ &#34;x$OSG_SINGULARITY_VERSION&#34; != &#34;x&#34; ]; then
HAS_SINGULARITY=&#34;True&#34;
export OSG_SINGULARITY_PATH=&#96;which singularity&#96;
else
# some sites requires us to do a module load first - not sure if we always want to do that
export OSG_SINGULARITY_VERSION=&#96;module load singularity &#62;/dev/null 2&#62;&1; singularity --version 2&#62;/dev/null&#96;
if [ &#34;x$OSG_SINGULARITY_VERSION&#34; != &#34;x&#34; ]; then
HAS_SINGULARITY=&#34;True&#34;
export OSG_SINGULARITY_PATH=&#96;module load singularity &#62;/dev/null 2&#62;&1; which singularity&#96;
fi
fi

[3]
[ddavila@vocms0808 ~]$ condor_status -pool vocms0808 -const &#39;GLIDEIN_CMSSIte==&#34;T2_US_UCSD&#34; && GLIDEIN_REQUIRED_OS==&#34;any&#34; && HAS_SINGULARITY==false&#39;
Name                                                         OpSys      Arch   State     Activity LoadAv Mem    ActvtyTime

slot1@glidein_2943030_317728260@....   LINUX      X86_64 Unclaimed Idle      0.000  2064  1+01&#58;36&#58;26
slot1_1@glidein_2943030_317728260@.... LINUX      X86_64 Claimed   Busy      7.630 18176  0+06&#58;57&#58;14
slot1@glidein_1800139_6683642@....     LINUX      X86_64 Unclaimed Idle      0.000  2832  0+20&#58;11&#58;38
slot1_1@glidein_1800139_6683642@....   LINUX      X86_64 Claimed   Busy      0.060  4096  0+00&#58;53&#58;16
<div id='show_1352994131' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1352994131'>slot1_2@glidein_1800139_6683642@....   LINUX      X86_64 Claimed   Busy      0.020  4096  0+00&#58;53&#58;16
slot1_3@glidein_1800139_6683642@....   LINUX      X86_64 Claimed   Busy      0.000  4096  0+00&#58;00&#58;03
slot1_4@glidein_1800139_6683642@....   LINUX      X86_64 Claimed   Busy      0.000  2560  0+00&#58;00&#58;03
slot1_5@glidein_1800139_6683642@....   LINUX      X86_64 Claimed   Busy      0.000  2560  0+00&#58;03&#58;18
slot1_7@glidein_1800139_6683642@....   LINUX      X86_64 Claimed   Busy      0.000  2560  0+00&#58;00&#58;02
slot1@glidein_1003965_240506922@....   LINUX      X86_64 Unclaimed Idle      0.000 12048  1+09&#58;32&#58;53
slot1_3@glidein_1003965_240506922@.... LINUX      X86_64 Claimed   Busy      0.000  4096  0+14&#58;12&#58;27
slot1@glidein_2978665_57286710@....    LINUX      X86_64 Unclaimed Idle      0.000  2064  0+23&#58;54&#58;09
slot1_1@glidein_2978665_57286710@....  LINUX      X86_64 Claimed   Busy      7.960 18176  0+05&#58;47&#58;49
slot1@glidein_4190602_772074320@....   LINUX      X86_64 Unclaimed Idle      0.000  7952  1+07&#58;04&#58;36
slot1_1@glidein_4190602_772074320@.... LINUX      X86_64 Claimed   Busy      0.080  4096  0+12&#58;14&#58;08
slot1_2@glidein_4190602_772074320@.... LINUX      X86_64 Claimed   Busy      0.080  4096  0+08&#58;23&#58;55
slot1_3@glidein_4190602_772074320@.... LINUX      X86_64 Claimed   Busy      0.050  4096  0+08&#58;23&#58;50&#13;

-- by Diego Davila at Thu Oct 26 16&#58;14&#58;59 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295</a>
</div><script type='text/javascript'>
        $('#show_1352994131').click(function() {
            $('#detail_1352994131').slideDown("normal");
            $('#show_1352994131').hide();
            $('#hide_1352994131').show();
        });
        $('#hide_1352994131').click(function() {
            $('#detail_1352994131').slideUp();
            $('#hide_1352994131').hide();
            $('#show_1352994131').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='35200#1508982643'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T01:50:43+00:00">Oct 26, 2017 01:50 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1508982643">&nbsp;</a></div><pre>Sorry if I wasn&#39;t clear - the logs will need to be fetched on the CMS side.  I wouldn&#39;t expect them to be easily accessible from the site.&#13;

-- by Brian Bockelman at Thu Oct 26 01&#58;49&#58;37 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295</a></pre></div><div class='update_description'><i onclick="document.location='35200#1508980451'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T01:14:11+00:00">Oct 26, 2017 01:14 AM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1508980451">&nbsp;</a></div><pre>Their choice of versions. Where might the stack trace be? I do not have
core files that old on the machine.

Terrence

On 10/25/2017 5&#58;58 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35200#1508979523'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T00:58:43+00:00">Oct 26, 2017 12:58 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1508979523">&nbsp;</a></div><pre>Hey - that&#39;s a pretty darn old release series from CMSSW.  I wouldn&#39;t necessarily blame a Singularity, it could be a bug on the CMSSW side.

Did we isolate which workflow this occurred in?  It would be worthwhile to hand recreate the job.

Additionally, CMSSW should have left a stack trace -- where is that?&#13;

-- by Brian Bockelman at Thu Oct 26 00&#58;58&#58;12 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295</a></pre></div><div class='update_description'><i onclick="document.location='35200#1508976716'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-26T00:11:56+00:00">Oct 26, 2017 12:11 AM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1508976716">&nbsp;</a></div><pre>I just checked another nodes that has RHEL7, and singularity (since Sept.) and I find this.

Oct 25 16&#58;55&#58;50 cabinet-3-3-3 kernel&#58; cmsRun[3581584]&#58; segfault at 80 ip 00002ba4285ad18e sp 00007ffd03d92418 error 4 in libc-2.17.so[2ba428528000+1b8000]
Oct 25 16&#58;55&#58;58 cabinet-3-3-3 kernel&#58; cmsRun[3582078]&#58; segfault at 80 ip 00002b27dcd2a18e sp 00007ffecdb612e8 error 4 in libc-2.17.so[2b27dcca5000+1b8000]
Oct 25 16&#58;55&#58;58 cabinet-3-3-3 kernel&#58; cmsRun[3582080]&#58; segfault at 80 ip 00002b8527d8118e sp 00007fffb8be5cb8 error 4 in libc-2.17.so[2b8527cfc000+1b8000]
Oct 25 16&#58;56&#58;27 cabinet-3-3-3 kernel&#58; cmsRun[3583063]&#58; segfault at 80 ip 00002b7718c1818e sp 00007ffd559d3668 error 4 in libc-2.17.so[2b7718b93000+1b8000]
Oct 25 16&#58;57&#58;10 cabinet-3-3-3 kernel&#58; cmsRun[3584075]&#58; segfault at 80 ip 00002b66b651118e sp 00007ffc45b00138 error 4 in libc-2.17.so[2b66b648c000+1b8000]
Oct 25 16&#58;57&#58;34 cabinet-3-3-3 kernel&#58; cmsRun[3584920]&#58; segfault at 80 ip 00002ae940fe718e sp 00007fff7a4430a8 error 4 in libc-2.17.so[2ae940f62000+1b8000]

These are sefaults happening within the last few minutes local.

Just so we are clear about the relative existence of singularity.

[1659] root@cabinet-3-3-3 /var/log# rpm -qi singularity-2.2.1-3.el7.x86_64
Name        &#58; singularity
Version     &#58; 2.2.1
Release     &#58; 3.el7
Architecture&#58; x86_64
Install Date&#58; Fri 15 Sep 2017 02&#58;11&#58;40 PM PDT
Group       &#58; Unspecified

These are also nodes that are happily running CMSRun jobs.

19299 cuser5    20   0 2745268 1.349g  10232 R 100.0  0.5   1296&#58;07 cmsRun -j FrameworkJobReport.xml PSet.py
253823 cuser1    20   0  972332 679448  92788 R 100.0  0.3   1190&#58;38 cmsRun -j FrameworkJobReport.xml PSet.py
253829 cuser1    20   0  983988 674832  80432 R 100.0  0.3   1190&#58;19 cmsRun -j FrameworkJobReport.xml PSet.py</pre></div><div class='update_description'><i onclick="document.location='35200#1508974511'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-25T23:35:11+00:00">Oct 25, 2017 11:35 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1508974511">&nbsp;</a></div><pre>How are you drawing that conclusion from the data?

There was singularity on Monday, the segfaults were on Tuesday.

Name        &#58; singularity
Version     &#58; 2.2.1
Release     &#58; 3.el7
Architecture&#58; x86_64
*Install Date&#58; Mon 23 Oct 2017 02&#58;26&#58;02 PM PDT*
Group       &#58; Unspecified
Size        &#58; 241207
License     &#58; LBNL BSD
Signature   &#58; RSA/SHA256, Sun 21 May 2017 03&#58;27&#58;57 PM PDT, Key ID
6a2faea2352c64e5
Source RPM  &#58; singularity-2.2.1-3.el7.src.rpm
Build Date  &#58; Sun 21 May 2017 02&#58;44&#58;49 PM PDT
Build Host  &#58; buildvm-24.phx2.fedoraproject.org
Relocations &#58; (not relocatable)
Packager    &#58; Fedora Project
Vendor      &#58; Fedora Project
URL         &#58;<a href='http&#58;//singularity.lbl.gov/' target='_blank' rel='nofollow'>http&#58;//singularity.lbl.gov/</a>
Summary     &#58; Enabling &#34;Mobility of Compute&#34; with container based
applications
Description &#58;
Singularity is a container platform focused on supporting &#34;Mobility of
Compute&#34;.

*Oct 24 17&#58;00&#58;06 *sdsc-55 kernel&#58; cmsRun[1804503]&#58; segfault at 80 ip
00002b59ef00c18e sp 00007ffdf6b78b58 error 4 in
libc-2.17.so[2b59eef87000+1b8000]
Oct 24 17&#58;00&#58;07 sdsc-55 kernel&#58; cmsRun[1804593]&#58; segfault at 80 ip
00002b44dc08418e sp 00007ffcaa95f238 error 4 in
libc-2.17.so[2b44dbfff000+1b8000]
Oct 24 17&#58;00&#58;24 sdsc-55 kernel&#58; cmsRun[1806049]&#58; segfault at 80 ip
00002b5371b3c18e sp 00007ffd5f4218c8 error 4 in
<div id='show_758326376' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_758326376'>libc-2.17.so[2b5371ab7000+1b8000]
Oct 24 17&#58;00&#58;24 sdsc-55 kernel&#58; cmsRun[1806079]&#58; segfault at 80 ip
00002af804fa918e sp 00007ffe10159978 error 4 in
libc-2.17.so[2af804f24000+1b8000]

Time for the kernel log is in PDT because it is a local node.

I also know for a fact that this is not due to singularity not being
there? I know that because I have a test RHEL7 box that has had
singularity for over a month, and what happened when the CERN factories
starting sending prod to the nodes? Segfaults..

*Oct 24 15&#58;02&#58;35* cabinet-3-3-4 kernel&#58; cmsRun[3790024]&#58; segfault at 80
ip 00002b804d23718e sp 00007ffc2e2bac68 error 4 in
libc-2.17.so[2b804d1b2000+1b8000]
Oct 24 15&#58;02&#58;35 cabinet-3-3-4 kernel&#58; cmsRun[3790026]&#58; segfault at 80 ip
00002b401b59018e sp 00007ffc9eeab468 error 4 in
libc-2.17.so[2b401b50b000+1b8000]
Oct 24 15&#58;02&#58;36 cabinet-3-3-4 kernel&#58; cmsRun[3790043]&#58; segfault at 80 ip
00002b227f26818e sp 00007ffd73e17408 error 4 in
libc-2.17.so[2b227f1e3000+1b8000]
Oct 24 15&#58;02&#58;41 cabinet-3-3-4 kernel&#58; cmsRun[3790140]&#58; segfault at 80 ip
00002b7c292eb18e sp 00007ffe25ba72b8 error 4 in
libc-2.17.so[2b7c29266000+1b8000]
Oct 24 15&#58;02&#58;44 cabinet-3-3-4 kernel&#58; cmsRun[3790198]&#58; segfault at 80 ip
00002aefb3ac918e sp 00007ffe2c7d7228 error 4 in
libc-2.17.so[2aefb3a44000+1b8000]
Oct 24 15&#58;02&#58;46 cabinet-3-3-4 kernel&#58; cmsRun[3790349]&#58; segfault at 80 ip
00002b8f6e0fa18e sp 00007ffd3d07e5f8 error 4 in
libc-2.17.so[2b8f6e075000+1b8000]
Oct 24 15&#58;02&#58;52 cabinet-3-3-4 kernel&#58; cmsRun[3790406]&#58; segfault at 80 ip
00002b58d75a618e sp 00007ffc228a4408 error 4 in
libc-2.17.so[2b58d7521000+1b8000]
Oct 24 15&#58;02&#58;55 cabinet-3-3-4 kernel&#58; cmsRun[3790550]&#58; segfault at 80 ip
00002b1331eb818e sp 00007fff5519ae68 error 4 in
libc-2.17.so[2b1331e33000+1b8000]

Name        &#58; singularity
Version     &#58; 2.2.1
Release     &#58; 3.el7
Architecture&#58; x86_64
*Install Date&#58; Fri 15 Sep 2017 02&#58;12&#58;24 PM PDT*
Group       &#58; Unspecified
Size        &#58; 241207
License     &#58; LBNL BSD
Signature   &#58; RSA/SHA256, Sun 21 May 2017 03&#58;27&#58;57 PM PDT, Key ID
6a2faea2352c64e5
Source RPM  &#58; singularity-2.2.1-3.el7.src.rpm
Build Date  &#58; Sun 21 May 2017 02&#58;44&#58;49 PM PDT
Build Host  &#58; buildvm-24.phx2.fedoraproject.org
Relocations &#58; (not relocatable)
Packager    &#58; Fedora Project
Vendor      &#58; Fedora Project
URL         &#58; <a href='http&#58;//singularity.lbl.gov/' target='_blank' rel='nofollow'>http&#58;//singularity.lbl.gov/</a>
Summary     &#58; Enabling &#34;Mobility of Compute&#34; with container based
applications
Description &#58;
Singularity is a container platform focused on supporting &#34;Mobility of
Compute&#34;.

I have run an RHEL7 node with singularity for over a month, I only saw
these segfaults after the remove factories were told to send jobs to us
with RHEL6 restriction lifted.

On 10/25/2017 12&#58;57 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_758326376').click(function() {
            $('#detail_758326376').slideDown("normal");
            $('#show_758326376').hide();
            $('#hide_758326376').show();
        });
        $('#hide_758326376').click(function() {
            $('#detail_758326376').slideUp();
            $('#hide_758326376').hide();
            $('#show_758326376').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='35200#1508973970'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-25T23:26:10+00:00">Oct 25, 2017 11:26 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1508973970">&nbsp;</a></div><pre>They are doing fine now because I had to shut off the nodes that were
failing due to the jobs being broken.

This is a present and ongoing issue that needs to be resolved that I can
turn back on 1600+ job slots.

Terrence

On 10/25/2017 2&#58;42 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35200#1508967758'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-25T21:42:38+00:00">Oct 25, 2017 09:42 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1508967758">&nbsp;</a></div><pre>Some of these jobs are re-running after cooloff and they seem to be doing fine by now. Anyway it&#39;s worth to take a look and see what was the root cause of the issue so that it doesn&#39;t happen again.&#13;

-- by Maria Acosta at Wed Oct 25 21&#58;42&#58;18 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295</a></pre></div><div class='update_description'><i onclick="document.location='35200#1508961458'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-25T19:57:38+00:00">Oct 25, 2017 07:57 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1508961458">&nbsp;</a></div><pre>So, if there was no Singularity when the production
jobs run and the nodes are RHEL/CentOS 7 then this
explains the segmentation faults.
I&#39;ll include the SI team so they can take a look why/how
the SL 6 jobs ended up on such worker nodes.
Thanks,
- StephanChanged CC to ;cms-comp-ops-workflow-team@....;cms-comp-ops-site-support-team@....; cms-ggus-submissioninfrastructure@....&#13;

-- by Stephan Lammel at Wed Oct 25 19&#58;57&#58;07 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295</a></pre></div><div class='update_description'><i onclick="document.location='35200#1508960289'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-25T19:38:09+00:00">Oct 25, 2017 07:38 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1508960289">&nbsp;</a></div><pre>Name        &#58; singularity
Version     &#58; 2.2.1
Release     &#58; 3.el7
Architecture&#58; x86_64
Install Date&#58; Mon 23 Oct 2017 02&#58;26&#58;02 PM PDT
Group       &#58; Unspecified
Size        &#58; 241207
License     &#58; LBNL BSD
Signature   &#58; RSA/SHA256, Sun 21 May 2017 03&#58;27&#58;57 PM PDT, Key ID
6a2faea2352c64e5
Source RPM  &#58; singularity-2.2.1-3.el7.src.rpm
Build Date  &#58; Sun 21 May 2017 02&#58;44&#58;49 PM PDT
Build Host  &#58; buildvm-24.phx2.fedoraproject.org
Relocations &#58; (not relocatable)
Packager    &#58; Fedora Project
Vendor      &#58; Fedora Project
URL         &#58; <a href='http&#58;//singularity.lbl.gov/' target='_blank' rel='nofollow'>http&#58;//singularity.lbl.gov/</a>
Summary     &#58; Enabling &#34;Mobility of Compute&#34; with container based
applications
Description &#58;
Singularity is a container platform focused on supporting &#34;Mobility of
Compute&#34;.

Oct 24 17&#58;00&#58;06 sdsc-55 kernel&#58; cmsRun[1804503]&#58; segfault at 80 ip
00002b59ef00c18e sp 00007ffdf6b78b58 error 4 in
libc-2.17.so[2b59eef87000+1b8000]
Oct 24 17&#58;00&#58;07 sdsc-55 kernel&#58; cmsRun[1804593]&#58; segfault at 80 ip
00002b44dc08418e sp 00007ffcaa95f238 error 4 in
libc-2.17.so[2b44dbfff000+1b8000]
Oct 24 17&#58;00&#58;24 sdsc-55 kernel&#58; cmsRun[1806049]&#58; segfault at 80 ip
00002b5371b3c18e sp 00007ffd5f4218c8 error 4 in
libc-2.17.so[2b5371ab7000+1b8000]
Oct 24 17&#58;00&#58;24 sdsc-55 kernel&#58; cmsRun[1806079]&#58; segfault at 80 ip
00002af804fa918e sp 00007ffe10159978 error 4 in
libc-2.17.so[2af804f24000+1b8000]
<div id='show_1047155297' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1047155297'>
On 10/25/2017 12&#58;34 PM, Terrence Martin wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; There was no singularity last Friday, but it was installed on the</font>
<font color='#7F7E6F'>&#62; 23rd, before your jobs were kicking up errors on the 24th. The pilots</font>
<font color='#7F7E6F'>&#62; would have caught that though and there were no segfaults.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Terrence</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On 10/25/2017 12&#58;11 PM, Open Science Grid FootPrints wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1047155297').click(function() {
            $('#detail_1047155297').slideDown("normal");
            $('#show_1047155297').hide();
            $('#hide_1047155297').show();
        });
        $('#hide_1047155297').click(function() {
            $('#detail_1047155297').slideUp();
            $('#hide_1047155297').hide();
            $('#show_1047155297').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='35200#1508960123'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-25T19:35:23+00:00">Oct 25, 2017 07:35 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1508960123">&nbsp;</a></div><pre>There was no singularity last Friday, but it was installed on the 23rd,
before your jobs were kicking up errors on the 24th. The pilots would
have caught that though and there were no segfaults.

Terrence

On 10/25/2017 12&#58;11 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35200#1508958712'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-25T19:11:52+00:00">Oct 25, 2017 07:11 PM UTC</time><a class="anchor" name="1508958712">&nbsp;</a></div><pre>Hi Terrence,

I found some logs digging into the pilots from CMS than ran in those nodes&#58;

CVMFS_cms_cern_ch_REVISION = 42880
HAS_CVMFS_oasis_opensciencegrid_org = True
CVMFS_oasis_opensciencegrid_org_REVISION = 8134
HAS_CVMFS_singularity_opensciencegrid_org = True
CVMFS_singularity_opensciencegrid_org_REVISION = 16723
CVMFS_oasis_opensciencegrid_org_TIMESTAMP = 1508531245
GPUDetection = &#34;No GPUs detected&#34;
HAS_SINGULARITY = False

This mean it did not find singularity. But they were all from sept12.

Is this problem still going on?

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='35200#1508955073'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-25T18:11:13+00:00">Oct 25, 2017 06:11 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1508955073">&nbsp;</a></div><pre>Are you sure you are running within Singularity?

Terrence

On 10/25/2017 10&#58;59 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35200#1508954374'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-25T17:59:34+00:00">Oct 25, 2017 05:59 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1508954374">&nbsp;</a></div><pre>Seangchan can you comment if something is needed to help trace
down where the wrong bin/lib is picket up? Thanks,
cheers,  Stephan&#13;

-- by Stephan Lammel at Wed Oct 25 17&#58;58&#58;43 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295</a></pre></div><div class='update_description'><i onclick="document.location='35200#1508952910'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-25T17:35:10+00:00">Oct 25, 2017 05:35 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1508952910">&nbsp;</a></div><pre>Well in the mean time I can have the production pilot factories removed
from consideration for these nodes. User factories were able to handle
this fine running within singularity and I want to make sure these nodes
are being used. Do you need any help to test or are do they have what
they need?

Terrence

On 10/25/2017 6&#58;31 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35200#1508938284'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-25T13:31:24+00:00">Oct 25, 2017 01:31 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1508938284">&nbsp;</a></div><pre>Thanks Terrence! &#39;didn&#39;t know the nodes were CentOS 7 with
Singularity. Then this is likely a problem of the production
infrastructure picking up binaries/libraries from the wrong
location and the WMagent development/support team needs to
debug this.
Thanks,
cheers,  Stephan&#13;

-- by Stephan Lammel at Wed Oct 25 13&#58;30&#58;41 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295</a></pre></div><div class='update_description'><i onclick="document.location='35200#1508890582'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-25T00:16:22+00:00">Oct 25, 2017 12:16 AM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1508890582">&nbsp;</a></div><pre>So just to be a bit more interesting, I looked at our older RHEL7 node, the one we ran as a test. That message, only appears on the 24th of Oct. The previous logs did not contain any such error. So, did the pilot change? I know we had requested a change to allow jobs to ignore the OS version to allow these nodes to run. However they should still run within the container.</pre></div><div class='update_description'><i onclick="document.location='35200#1508889436'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-24T23:57:16+00:00">Oct 24, 2017 11:57 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1508889436">&nbsp;</a></div><pre>Clearly there is an error, but again, if it is running within a container how come it is having an error?

Oct 23 14&#58;52&#58;20 sdsc-76 kernel&#58; cmsRun[1108433]&#58; segfault at 80 ip 00002b794872718e sp 00007ffe2530f808 error 4 in libc-2.17.so[2b79486a2000+1b8000]
Oct 23 14&#58;52&#58;22 sdsc-76 kernel&#58; cmsRun[1108707]&#58; segfault at 80 ip 00002ba9aae0018e sp 00007ffc7ba56be8 error 4 in libc-2.17.so[2ba9aad7b000+1b8000]
Oct 23 14&#58;52&#58;23 sdsc-76 kernel&#58; cmsRun[1108788]&#58; segfault at 80 ip 00002aad8c89a18e sp 00007ffc33c1b8f8 error 4 in libc-2.17.so[2aad8c815000+1b8000]
Oct 23 14&#58;52&#58;32 sdsc-76 kernel&#58; cmsRun[1109737]&#58; segfault at 80 ip 00002ad1939c618e sp 00007ffe3d070858 error 4 in libc-2.17.so[2ad193941000+1b8000]
Oct 23 14&#58;52&#58;32 sdsc-76 kernel&#58; cmsRun[1109941]&#58; segfault at 80 ip 00002b693632a18e sp 00007ffefd2a82d8 error 4 in libc-2.17.so[2b69362a5000+1b8000]</pre></div><div class='update_description'><i onclick="document.location='35200#1508889303'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-24T23:55:03+00:00">Oct 24, 2017 11:55 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1508889303">&nbsp;</a></div><pre>Ok, these nodes are RHEL7, and the jobs should be running within singularity. They are in fact running a lot of jobs seemingly successfully and if the jobs are failing is it because they are passed the presumed check of the pilot to allow them to run in the first place?</pre></div><div class='update_description'><i onclick="document.location='35200#1508882624'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-24T22:03:44+00:00">Oct 24, 2017 10:03 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1508882624">&nbsp;</a></div><pre>Dear UCSD admins,

Can you please check the syslog of one of the problematic WNs (i.e sdsc-76.t2.ucsd.edu or sdsc-62.t2.ucsd.edu) to see if there&#39;s any entry for the timeframe of 2017-10-24T14&#58;12&#58;59 and 2017-10-24T14&#58;13&#58;13 that provides more information?.

From the above log file it looks like the segmentation violation is already happening during init (perhaps misconfigured paths?).

Thank you. Regards,

Maria
Site SupportChanged CC to ;cms-comp-ops-workflow-team@....;cms-comp-ops-site-support-team@....&#13;

-- by Maria Acosta at Tue Oct 24 22&#58;03&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295</a></pre></div><div class='update_description'><i onclick="document.location='35200#1508851712'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-24T13:28:32+00:00">Oct 24, 2017 01:28 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1508851712">&nbsp;</a></div><pre>Dear site admin,

We have noticed T2_US_UCSD is having a bad time. The site is getting thousands of 139 [1] exit codes [2].
Could you help us to understand what is going on?
Regards.

Daniele (CSP)

[1]
<a href='http&#58;//dashb-cms-job.cern.ch/dashboard/templates/web-job2/#user=&refresh=0&table=Jobs&p=1&records=25&activemenu=1&usr=&site=T2_US_UCSD&submissiontool=&application=&activity=production&status=&check=submitted&tier=&date1=2017-10-24+08%3A57&date2=2017-10-24+14%3A57&sortby=appexitcode&scale=linear&bars=20&ce=&rb=&grid=&jobtype=&submissionui=&dataset=&submissiontype=&task=&subtoolver=&genactivity=&outputse=&appexitcode=&accesstype=&inputse=&cores=' target='_blank' rel='nofollow'>http&#58;//dashb-cms-job.cern.ch/dashboard/templates/web-job2/#user=&refresh=0&table=Jobs&p=1&records=25&activemenu=1&usr=&site=T2_US_UCSD&submissiontool=&application=&activity=production&status=&check=submitted&tier=&date1=2017-10-24+08%3A57&date2=2017-10-24+14%3A57&sortby=appexitcode&scale=linear&bars=20&ce=&rb=&grid=&jobtype=&submissionui=&dataset=&submissiontype=&task=&subtoolver=&genactivity=&outputse=&appexitcode=&accesstype=&inputse=&cores=</a>[2]

logArch1
cmsRun1
CMSSWStepFailure (Exit Code&#58; 139)
Adding last 25 lines of CMSSW stdout&#58;
Beginning CMSSW wrapper script
slc6_amd64_gcc481 scramv1 CMSSW
Performing SCRAM setup...
Completed SCRAM setup
Retrieving SCRAM project...
Completed SCRAM project
Executing CMSSW
cmsRun  -j FrameworkJobReport.xml PSet.py
Complete
process id is 1298209 status is 139
&#60;@========== WMException Start ==========@&#62;
Exception Class&#58; CmsRunFailure
Message&#58; Error running cmsRun
{&#39;arguments&#39;&#58; [&#39;/bin/bash&#39;, &#39;/data1/condor_local/execute/dir_752883/glide_L4toZC/execute/dir_1296061/job/WMTaskSpace/cmsRun1/cmsRun1-main.sh&#39;, &#39;&#39;, &#39;slc6_amd64_gcc481&#39;, &#39;scramv1&#39;, &#39;CMSSW&#39;, &#39;CMSSW_7_1_29&#39;, &#39;FrameworkJobReport.xml&#39;, &#39;cmsRun&#39;, &#39;PSet.py&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;]}
Return code&#58; 139

ModuleName &#58; WMCore.WMSpec.Steps.WMExecutionFailure
MethodName &#58; __init__
ClassInstance &#58; None
FileName &#58; /data1/condor_local/execute/dir_752883/glide_L4toZC/execute/dir_1296061/job/WMCore.zip/WMCore/WMSpec/Steps/WMExecutionFailure.py
<div id='show_1691734242' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1691734242'>ClassName &#58; None
LineNumber &#58; 18
ErrorNr &#58; 139

Traceback&#58;

&#60;@---------- WMException End ----------@&#62;
MissingJobReport (Exit Code&#58; 50115)
No Job Report Found&#58; /data1/condor_local/execute/dir_752883/glide_L4toZC/execute/dir_1296061/job/WMTaskSpace/cmsRun1/FrameworkJobReport.xml
stageOut1
ReportManipulatingError (Exit Code&#58; 99999)
Could not find report file for step stageOut1!

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=131295</a>

[Ticket History]
Subject&#58; Thousands of jobs with 139 exit code at T2_US_UCSD
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-workflow-team@....
-- by del Re at Tue Oct 24 13&#58;27&#58;48 UTC 2017
</div><script type='text/javascript'>
        $('#show_1691734242').click(function() {
            $('#detail_1691734242').slideDown("normal");
            $('#show_1691734242').hide();
            $('#hide_1691734242').show();
        });
        $('#hide_1691734242').click(function() {
            $('#detail_1691734242').slideUp();
            $('#hide_1691734242').hide();
            $('#show_1691734242').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F35200">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 35200});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
