<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="/">
    <title>[7582] RSV results for Nebraska SEs stopped working</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="//netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="https://ticket.opensciencegrid.org/images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="https://ticket.opensciencegrid.org/lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=7582" method="post">
<div class="page-header">
    <h3><span class="muted">7582</span> / RSV results for Nebraska SEs stopped working</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Brian Bockelman</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">please investigate</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2009-10-12</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=7582", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="/7582?sort=up&"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="/7582?expandall=true&">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20RSV%20results%20for%20Nebraska%20SEs%20stopped%20working%20ISSUE%3D7582%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='7582#1255352120'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-10-12T12:55:20+00:00">Oct 12, 2009 12:55 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1255352120">&nbsp;</a></div><pre>No further requests from Brian - closing this ticket. -ag</pre></div><div class='update_description'><i onclick="document.location='7582#1254860835'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-10-06T20:27:15+00:00">Oct 6, 2009 08:27 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1254860835">&nbsp;</a></div><pre>Brian,

I am relaying what  you confirmed via IM. That the update to RSVProcess that Soichi put in place has fixed this problem, and the end-to-end recalculation of numbers has caused the older records to be picked up.

Additionally, I have applied the code update on the server from which we pick up RSV results to send to SAM, and I have sent all records  from Oct 1st through now that were not sent initially. Please check with David Collados / rsv-sam to be sure everything looks good. If any further resends are necessary, let me know.

I will keep this ticket open for a day or two just in case you have any other open business to complete in this context.

-ag</pre></div><div class='update_description'><i onclick="document.location='7582#1254775031'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-10-05T20:37:11+00:00">Oct 5, 2009 08:37 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1254775031">&nbsp;</a></div><pre>(1) I misspoke; I meant that Firefly_SE is in a different resource
group, hence having it sent to WLCG doesn&#39;t help resource group
Nebraska.

(2) Whoops - appears I forgot to do &#34;vdt-control --on&#34; after &#34;--off&#34;

(3) Gotcha.  It seems to have affected Friday - current.

Brian</pre></div><div class='update_description'><i onclick="document.location='7582#1254774666'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-10-05T20:31:06+00:00">Oct 5, 2009 08:31 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1254774666">&nbsp;</a></div><pre>On Oct 5, 2009, at 2&#58;08 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7582#1254769723'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-10-05T19:08:43+00:00">Oct 5, 2009 07:08 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1254769723">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62;&#62; 1) Firefly_SE (ff-se.unl.edu&#58;8443)</font>
<font color='#7F7E6F'>&#62; (1) unfortunately doesn&#39;t get forwarded to the WLCG...</font>

I notice records for this SE has been consistently sent to SAM without error. Feel free to check with the SAM team on that.

<font color='#7F7E6F'>&#62;&#62; 2) T2_Nebraska_Storage (srm.unl.edu&#58;8446)</font>
<font color='#7F7E6F'>&#62; (2) Sounds good, thanks</font>

Welcome.

<font color='#7F7E6F'>&#62;&#62; 3) T2_Nebraska_Hadoop (dcache07.unl.edu&#58;8443) and T2_Nebraska_Hadoop2 (red-srm1.unl.edu&#58;8443)</font>
<font color='#7F7E6F'>&#62; (3) Trying out the workaround now.</font>

We have made a change on our end in the code, and would like to test it on our dev instance before patching the production server. But It looks like you have stopped your client completely; the last SRM records we received were ~2 hours ago -- keep us posted.

<font color='#7F7E6F'>&#62; What&#39;s the best way to recover the weekend&#39;s lost records and resend them to the WLCG?  We&#39;ll need to ask GridView to recompute, at least.</font>

Once we sort the whole thing out in the RSVProcess context, we will be happy to resend records for any days you request us to.

-ag</pre></div><div class='update_description'><i onclick="document.location='7582#1254762967'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-10-05T17:16:07+00:00">Oct 5, 2009 05:16 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1254762967">&nbsp;</a></div><pre>Hey folks,

(1) unfortunately doesn&#39;t get forwarded to the WLCG...

(2) Sounds good, thanks

(3) Trying out the workaround now.

What&#39;s the best way to recover the weekend&#39;s lost records and resend
them to the WLCG?  We&#39;ll need to ask GridView to recompute, at least.

Brian

On Oct 5, 2009, at 11&#58;25 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='7582#1254759944'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-10-05T16:25:44+00:00">Oct 5, 2009 04:25 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1254759944">&nbsp;</a></div><pre>Brian,

I spent a few hours on this...

Relevant URLs
<a href='http&#58;//tinyurl.com/ycqgxxp' target='_blank' rel='nofollow'>http&#58;//tinyurl.com/ycqgxxp</a>
<a href='http&#58;//tinyurl.com/yaruwqz' target='_blank' rel='nofollow'>http&#58;//tinyurl.com/yaruwqz</a>

I see four SEs in the Nebraska sites (Lincoln and Omaha).

1) Firefly_SE (ff-se.unl.edu&#58;8443)

This one seemed to be fine even before we started investigating.

2) T2_Nebraska_Storage (srm.unl.edu&#58;8446)

This one was not showing up in MyOSG because you had not set an end point override. The default port for SRM is 8443. but I noticed your RSV client results indicate the service runs on port 8446.

On your behalf, I have set the end-point override on the OIM registration. Now this SE shows up on MyOSG, as the status URL above indicates.

3) T2_Nebraska_Hadoop (dcache07.unl.edu&#58;8443) and T2_Nebraska_Hadoop2 (red-srm1.unl.edu&#58;8443)

These are still now showing up on MyOSG due to a limitation in RSVprocess -- you appear to have set the serviceURI to &#34;hostname&#58;port&#34; on your RSV client but those records are being ignored by RSVProcess.
- We (GOC) need to fix this but it is a fairly complicated solution. Soichi and I  are discussing how to proceed, stay tuned.
- The easiest immediate fix might be for you to strip the &#34;&#58;8443&#34; from your RSV config.

-ag</pre></div><div class='update_description'><i onclick="document.location='7582#1254607494'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-10-03T22:04:54+00:00">Oct 3, 2009 10:04 PM UTC</time> by <b>Nizar Louly</b><a class="anchor" name="1254607494">&nbsp;</a></div><pre>Talked to Tom Lee per the instructions page in regards to RSV so that he look into
this issue (his cell).

Tom talked to Arvind about it who stated that a ticket will be needed and will be
addressed Monday morning during business hours so I am making this ticket to track
the issue and have force assigned Arvind to the ticket.

Forwarded this thread to Tom Lee who fwd it in turn to Arvind

From&#58; Brian Bockelman &#60;bbockelm@....&#62;
To&#58; OSG Grid Operations Center &#60;goc@....&#62;,
Gratia Operation &#60;gratia-operation@....&#62;
Subject&#58; RSV results for Nebraska SEs stopped working
Date-Sent&#58; Saturday, October 03, 2009 4&#58;22 PM -0500

Hey folks,

It appears there is a problem with RSV results for Nebraska.  Particularly, the GOC
RSV collector claims that there have been no records for any of our SEs in more than
a day.  This is affecting WLCG results, and hence should be considered pretty
high-priority.

About 1 week ago, we transitioned all our RSV reporting to a single instance at our
site; you can view it here&#58;

<a href='https&#58;//red-mon.unl.edu&#58;8443/rsv/' target='_blank' rel='nofollow'>https&#58;//red-mon.unl.edu&#58;8443/rsv/</a>

This instance sends Gratia information to here&#58;

<a href='https&#58;//rcf-gratia.unl.edu&#58;8443/gratia-administration/index.html' target='_blank' rel='nofollow'>https&#58;//rcf-gratia.unl.edu&#58;8443/gratia-administration/index.html</a>

You can use the same interface to verify there are indeed metric records for each of
our SEs.  The information is then forwarded to the GOC&#39;s Gratia instance.  Chris -
I&#39;ve started a new replication to the OSG-ITB instance at FNAL, just to rule out any
issues.
<div id='show_1567868599' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1567868599'>
It appears that something is happening in the transition from the Gratia collector to
the RSVProcess database...

Brian
</div><script type='text/javascript'>
        $('#show_1567868599').click(function() {
            $('#detail_1567868599').slideDown("normal");
            $('#show_1567868599').hide();
            $('#hide_1567868599').show();
        });
        $('#hide_1567868599').click(function() {
            $('#detail_1567868599').slideUp();
            $('#hide_1567868599').hide();
            $('#show_1567868599').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F7582">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="/images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 7582});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
