<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[9984] OSG 1.2.18 Upgrade problem on IllinoisHEP</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=9984" method="post">
<div class="page-header">
    <h3><span class="muted">9984</span> / OSG 1.2.18 Upgrade problem on IllinoisHEP</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">David Lesny</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">IllinoisHEP</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/resource</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">David Lesny</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2011-03-07</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
        <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/9984", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/9984?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/9984?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20OSG%201.2.18%20Upgrade%20problem%20on%20IllinoisHEP%20ISSUE%3D9984%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='9984#1299012199'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-01T20:43:19+00:00">Mar 1, 2011 08:43 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1299012199">&nbsp;</a></div><pre>Thank you for informing us that this issue has been resolved. I will close this ticket.

Please submit problems, requests, and questions at&#58;
<a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a>

OSG Grid Operations Center
goc@...., 317-278-9699
Visit the OSG Operations Page&#58;
<a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='9984#1299011887'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-01T20:38:07+00:00">Mar 1, 2011 08:38 PM UTC</time> by <b>ddl@....</b><a class="anchor" name="1299011887">&nbsp;</a></div><pre>The issue has been resolved by a work around until 1.2.19 is released.

Please close this ticket

thanks, dave

On 3/1/2011 2&#58;31 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9984#1299011529'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-01T20:32:09+00:00">Mar 1, 2011 08:32 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1299011529">&nbsp;</a></div><pre>Hi David,
I&#39;m investigating the issue right now.  Does your site use the WLCG
site availability statistics?  If so please check that your
gratia-consumer is not having the same problem as the html-consumer.
If it is not sending information to the GOC then your site
availability statistics may be affected.

I see your site reported in MyOSG 2 hours ago but I can&#39;t tell if it
has reported since then and I&#39;m not sure of the exact timing of your
update.

<a href='http&#58;//myosg.grid.iu.edu/rgcurrentstatus/index?datasource=currentstatus&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&start_type=7daysago&start_date=02%2F21%2F2011&end_type=now&end_date=02%2F21%2F2011&site=on&site_10077=on&gridtype=on&gridtype_1=on&service_central_value=0&service_hidden_value=0&active_value=1&disable_value=1' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/rgcurrentstatus/index?datasource=currentstatus&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&start_type=7daysago&start_date=02%2F21%2F2011&end_type=now&end_date=02%2F21%2F2011&site=on&site_10077=on&gridtype=on&gridtype_1=on&service_central_value=0&service_hidden_value=0&active_value=1&disable_value=1</a>

Thanks,
scot
-- by kronenfe at Mon Feb 21 22&#58;12&#58;33 UTC 2011

Scott,

Yes...my site reports the WLCG, but I have not used the new config.ini
parameters as yet.
I have not found the documenation on the right syntax for it!

The gratia does fail, as well as all the metrics.

What you see in the report was me running it by hand from rsvuser.

I first used rsv-control --run  as root to run all metrics.
Then ran the gratia and html consumers as rsvuser.

Everything updated and reported.....

But running within condor_cron, everything fails with permission errors.

I will run the consumers, etc later tonight by hand again, and then in
<div id='show_832495255' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_832495255'>the morning
to update and report everything....I can to that till this gets figured
out

thanks, dave

On 2/21/2011 4&#58;12 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
-- by ddl@.... at Mon Feb 21 22&#58;20&#58;07 UTC 2011
-- by GOC at Mon Feb 21 22&#58;21&#58;07 UTC 2011

David,
Can you please share the output of this command?  (It assumes you have
sources setup.sh)

condor_cron_q -l | grep Iwd

I think that the problem is the directory you are located in when you
start services.  If you are in a directory where your rsvuser does not
have permission to &#39;cd&#39; into then this permission denied occurs.  This
is a bug - you should be able to start services from any directory -
and I will put a bug fix in place for this in the next release.  The
workaround in the meantime is to cd into VDT_LOCATION before starting
services (or at least before starting your osg-rsv service).

Thanks,
scot
-- by kronenfe at Mon Feb 21 22&#58;47&#58;52 UTC 2011

Dave,
I&#39;m still interested to see the output of this command to confirm my hypothesis&#58;

<font color='#7F7E6F'>&#62; condor_cron_q -l | grep Iwd</font>

If the problem is the directory that the RSV probes were started from,
here is how you can fix this issue.  As root, stop the probes, change
to a directory that the rsvuser has access to, and then start the
probes.  For example&#58;

vdt-control --off osg-rsv
cd $VDT_LOCATION
vdt-control --on osg-rsv

Let me know how this goes.

Thanks,
scot
-- by kronenfe at Mon Feb 21 23&#58;29&#58;28 UTC 2011

[by David Lesny]

Today I upgraded my CE to OSG 1.2.18 with RSV 3.3.0.

Everything seems to be working correctly except for the new RSV

When the html-consumer attempts to run, it fails.

Looking in html-consumer.log, I see the following errors

001 (251.000.000) 02/21 14&#58;45&#58;39 Job executing on host&#58;
&#60;127.0.0.1&#58;32663&#62;
...
021 (251.000.000) 02/21 14&#58;45&#58;39 Error from starter on
&#60;127.0.0.1&#58;32663&#62;&#58;
Failed to execute
&#39;/home/osg/CE/1.2/osg-rsv/bin/consumers/html-consumer&#39;&#58; Permission
denied
...
021 (251.000.000) 02/21 14&#58;45&#58;39 Error from starter on
&#60;127.0.0.1&#58;32663&#62;&#58;

Create_Process(/home/osg/CE/1.2/osg-rsv/bin/consumers/html-consumer,,
...) failed
...
004 (251.000.000) 02/21 14&#58;45&#58;39 Job was evicted.
(0) Job was not checkpointed.
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Run Remote Usage
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Run Local Usage
0  -  Run Bytes Sent By Job
0  -  Run Bytes Received By Job
...
012 (251.000.000) 02/21 14&#58;45&#58;39 Job was held.
Failed to execute
&#39;/home/osg/CE/1.2/osg-rsv/bin/consumers/html-consumer&#39;&#58; Permission
denied
Code 6 Subcode 13

There is also permission errors for the gratia consumer and all the
metrics in their log files,
so it appears to be a central problem within my RSV installation.

If I run the metrics as root with

rsv-control --run --all-enabled

they all succeed.. I did not try to run this as &#34;rsvuser&#34; since I
believe there is a note in the
release notes that rsv-control can only be run as root.

If I then run the html-consumer by hand as &#34;rsvuser&#34; it works just fine

[rsvuser@osgx0]$ source /opt/osg/ce/setup.sh
[rsvuser@osgx0]$ /opt/osg/ce/osg-rsv/bin/consumers/html-consumer
2011-02-21 14&#58;38&#58;04&#58; html-consumer initializing.
2011-02-21 14&#58;38&#58;04&#58; Processing 18 files

And the web page is updated appropriately.

Here is the output from rsv-control

[root@osgx0 consumers]# rsv-control -j

Hostname&#58; osgx0.hep.uiuc.edu
ID OWNER      ST NEXT RUN TIME   METRIC

231.0 rsvuser    I  02-21 18&#58;15
org.osg.certificates.cacert-expiry
232.0 rsvuser    I  02-22 01&#58;12
org.osg.local.containercert-expiry
233.0 rsvuser    I  02-21 14&#58;31
org.osg.globus.gram-authentication
234.0 rsvuser    I  02-21 14&#58;25
org.osg.batch.jobmanager-default-status
235.0 rsvuser    I  02-21 18&#58;30     org.osg.certificates.crl-expiry

236.0 rsvuser    I  02-21 14&#58;37
org.osg.general.osg-directories-CE-permissions
237.0 rsvuser    I  02-21 14&#58;08     org.osg.globus.gridftp-simple

238.0 rsvuser    I  02-21 14&#58;09     org.osg.gratia.condor

239.0 rsvuser    I  02-21 14&#58;23     org.osg.gratia.metric

240.0 rsvuser    I  02-21 18&#58;47     org.osg.general.vdt-version

241.0 rsvuser    I  02-21 13&#58;41     org.osg.general.osg-version

242.0 rsvuser    I  02-22 01&#58;24     org.osg.local.httpcert-expiry

243.0 rsvuser    I  02-22 04&#58;59
org.osg.batch.jobmanagers-available
244.0 rsvuser    I  02-22 01&#58;40     org.osg.local.hostcert-expiry

245.0 rsvuser    I  02-21 13&#58;47     org.osg.general.ping-host

246.0 rsvuser    I  02-21 18&#58;47     org.osg.general.vo-supported

Hostname&#58; osgx1.hep.uiuc.edu
ID OWNER      ST NEXT RUN TIME   METRIC

247.0 rsvuser    I  02-21 13&#58;53     org.osg.srm.srmping

248.0 rsvuser    I  02-21 14&#58;28     org.osg.srm.srmcp-readwrite

ID OWNER      ST CONSUMER
250.0 rsvuser    I  gratia-consumer
251.0 rsvuser    I  html-consumer

Any ideas why the permission error when the consumers and metrics run
automatically as rsvuser?

What else should I check for??

FYI....RSV was working properly with OSG 1.2.16 so I know my
configuration of rsvuser, rsv certificate and gums entries are proper
(at least for the previous version of RSV!!)

thanks, dave

</div><script type='text/javascript'>
        $('#show_832495255').click(function() {
            $('#detail_832495255').slideDown("normal");
            $('#show_832495255').hide();
            $('#hide_832495255').show();
        });
        $('#hide_832495255').click(function() {
            $('#detail_832495255').slideUp();
            $('#hide_832495255').hide();
            $('#show_832495255').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='9984#1299011507'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-01T20:31:47+00:00">Mar 1, 2011 08:31 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1299011507">&nbsp;</a></div><pre>Are there any updates on this issue?

Please submit problems, requests, and questions at&#58;
<a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a>

Thank You,
OSG Grid Operations Center
goc@...., 317-278-9699
Visit the Open Science Grid Operations Page&#58;
<a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='9984#1298330975'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-21T23:29:35+00:00">Feb 21, 2011 11:29 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1298330975">&nbsp;</a></div><pre>Hi David,
I&#39;m investigating the issue right now.  Does your site use the WLCG
site availability statistics?  If so please check that your
gratia-consumer is not having the same problem as the html-consumer.
If it is not sending information to the GOC then your site
availability statistics may be affected.

I see your site reported in MyOSG 2 hours ago but I can&#39;t tell if it
has reported since then and I&#39;m not sure of the exact timing of your
update.

<a href='http&#58;//myosg.grid.iu.edu/rgcurrentstatus/index?datasource=currentstatus&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&start_type=7daysago&start_date=02%2F21%2F2011&end_type=now&end_date=02%2F21%2F2011&site=on&site_10077=on&gridtype=on&gridtype_1=on&service_central_value=0&service_hidden_value=0&active_value=1&disable_value=1' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/rgcurrentstatus/index?datasource=currentstatus&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&start_type=7daysago&start_date=02%2F21%2F2011&end_type=now&end_date=02%2F21%2F2011&site=on&site_10077=on&gridtype=on&gridtype_1=on&service_central_value=0&service_hidden_value=0&active_value=1&disable_value=1</a>

Thanks,
scot
-- by kronenfe at Mon Feb 21 22&#58;12&#58;33 UTC 2011

Scott,

Yes...my site reports the WLCG, but I have not used the new config.ini
parameters as yet.
I have not found the documenation on the right syntax for it!

The gratia does fail, as well as all the metrics.

What you see in the report was me running it by hand from rsvuser.

I first used rsv-control --run  as root to run all metrics.
Then ran the gratia and html consumers as rsvuser.

Everything updated and reported.....

But running within condor_cron, everything fails with permission errors.

I will run the consumers, etc later tonight by hand again, and then in
<div id='show_1646816888' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1646816888'>the morning
to update and report everything....I can to that till this gets figured
out

thanks, dave

On 2/21/2011 4&#58;12 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
-- by ddl@.... at Mon Feb 21 22&#58;20&#58;07 UTC 2011
-- by GOC at Mon Feb 21 22&#58;21&#58;07 UTC 2011

David,
Can you please share the output of this command?  (It assumes you have
sources setup.sh)

condor_cron_q -l | grep Iwd

I think that the problem is the directory you are located in when you
start services.  If you are in a directory where your rsvuser does not
have permission to &#39;cd&#39; into then this permission denied occurs.  This
is a bug - you should be able to start services from any directory -
and I will put a bug fix in place for this in the next release.  The
workaround in the meantime is to cd into VDT_LOCATION before starting
services (or at least before starting your osg-rsv service).

Thanks,
scot
-- by kronenfe at Mon Feb 21 22&#58;47&#58;52 UTC 2011

Dave,
I&#39;m still interested to see the output of this command to confirm my hypothesis&#58;

<font color='#7F7E6F'>&#62; condor_cron_q -l | grep Iwd</font>

If the problem is the directory that the RSV probes were started from,
here is how you can fix this issue.  As root, stop the probes, change
to a directory that the rsvuser has access to, and then start the
probes.  For example&#58;

vdt-control --off osg-rsv
cd $VDT_LOCATION
vdt-control --on osg-rsv

Let me know how this goes.

Thanks,
scot
-- by kronenfe at Mon Feb 21 23&#58;29&#58;28 UTC 2011
</div><script type='text/javascript'>
        $('#show_1646816888').click(function() {
            $('#detail_1646816888').slideDown("normal");
            $('#show_1646816888').hide();
            $('#hide_1646816888').show();
        });
        $('#hide_1646816888').click(function() {
            $('#detail_1646816888').slideUp();
            $('#hide_1646816888').hide();
            $('#show_1646816888').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='9984#1298328488'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-21T22:48:08+00:00">Feb 21, 2011 10:48 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1298328488">&nbsp;</a></div><pre>Hi David,
I&#39;m investigating the issue right now.  Does your site use the WLCG
site availability statistics?  If so please check that your
gratia-consumer is not having the same problem as the html-consumer.
If it is not sending information to the GOC then your site
availability statistics may be affected.

I see your site reported in MyOSG 2 hours ago but I can&#39;t tell if it
has reported since then and I&#39;m not sure of the exact timing of your
update.

<a href='http&#58;//myosg.grid.iu.edu/rgcurrentstatus/index?datasource=currentstatus&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&start_type=7daysago&start_date=02%2F21%2F2011&end_type=now&end_date=02%2F21%2F2011&site=on&site_10077=on&gridtype=on&gridtype_1=on&service_central_value=0&service_hidden_value=0&active_value=1&disable_value=1' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/rgcurrentstatus/index?datasource=currentstatus&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&start_type=7daysago&start_date=02%2F21%2F2011&end_type=now&end_date=02%2F21%2F2011&site=on&site_10077=on&gridtype=on&gridtype_1=on&service_central_value=0&service_hidden_value=0&active_value=1&disable_value=1</a>

Thanks,
scot
-- by kronenfe at Mon Feb 21 22&#58;12&#58;33 UTC 2011

Scott,

Yes...my site reports the WLCG, but I have not used the new config.ini
parameters as yet.
I have not found the documenation on the right syntax for it!

The gratia does fail, as well as all the metrics.

What you see in the report was me running it by hand from rsvuser.

I first used rsv-control --run  as root to run all metrics.
Then ran the gratia and html consumers as rsvuser.

Everything updated and reported.....

But running within condor_cron, everything fails with permission errors.

I will run the consumers, etc later tonight by hand again, and then in
<div id='show_1913511223' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1913511223'>the morning
to update and report everything....I can to that till this gets figured
out

thanks, dave

On 2/21/2011 4&#58;12 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
-- by ddl@.... at Mon Feb 21 22&#58;20&#58;07 UTC 2011
-- by GOC at Mon Feb 21 22&#58;21&#58;07 UTC 2011

David,
Can you please share the output of this command?  (It assumes you have
sources setup.sh)

condor_cron_q -l | grep Iwd

I think that the problem is the directory you are located in when you
start services.  If you are in a directory where your rsvuser does not
have permission to &#39;cd&#39; into then this permission denied occurs.  This
is a bug - you should be able to start services from any directory -
and I will put a bug fix in place for this in the next release.  The
workaround in the meantime is to cd into VDT_LOCATION before starting
services (or at least before starting your osg-rsv service).

Thanks,
scot
-- by kronenfe at Mon Feb 21 22&#58;47&#58;52 UTC 2011
</div><script type='text/javascript'>
        $('#show_1913511223').click(function() {
            $('#detail_1913511223').slideDown("normal");
            $('#show_1913511223').hide();
            $('#hide_1913511223').show();
        });
        $('#hide_1913511223').click(function() {
            $('#detail_1913511223').slideUp();
            $('#hide_1913511223').hide();
            $('#show_1913511223').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='9984#1298326807'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-21T22:20:07+00:00">Feb 21, 2011 10:20 PM UTC</time> by <b>ddl@....</b><a class="anchor" name="1298326807">&nbsp;</a></div><pre>Scott,

Yes...my site reports the WLCG, but I have not used the new config.ini parameters as yet.
I have not found the documenation on the right syntax for it!

The gratia does fail, as well as all the metrics.

What you see in the report was me running it by hand from rsvuser.

I first used rsv-control --run  as root to run all metrics.
Then ran the gratia and html consumers as rsvuser.

Everything updated and reported.....

But running within condor_cron, everything fails with permission errors.

I will run the consumers, etc later tonight by hand again, and then in the morning
to update and report everything....I can to that till this gets figured out

thanks, dave

On 2/21/2011 4&#58;12 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='9984#1298326360'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-21T22:12:40+00:00">Feb 21, 2011 10:12 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1298326360">&nbsp;</a></div><pre>Hi David,
I&#39;m investigating the issue right now.  Does your site use the WLCG
site availability statistics?  If so please check that your
gratia-consumer is not having the same problem as the html-consumer.
If it is not sending information to the GOC then your site
availability statistics may be affected.

I see your site reported in MyOSG 2 hours ago but I can&#39;t tell if it
has reported since then and I&#39;m not sure of the exact timing of your
update.

<a href='http&#58;//myosg.grid.iu.edu/rgcurrentstatus/index?datasource=currentstatus&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&start_type=7daysago&start_date=02%2F21%2F2011&end_type=now&end_date=02%2F21%2F2011&site=on&site_10077=on&gridtype=on&gridtype_1=on&service_central_value=0&service_hidden_value=0&active_value=1&disable_value=1' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/rgcurrentstatus/index?datasource=currentstatus&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&start_type=7daysago&start_date=02%2F21%2F2011&end_type=now&end_date=02%2F21%2F2011&site=on&site_10077=on&gridtype=on&gridtype_1=on&service_central_value=0&service_hidden_value=0&active_value=1&disable_value=1</a>

Thanks,
scot
-- by kronenfe at Mon Feb 21 22&#58;12&#58;33 UTC 2011</pre></div><div class='update_description'><i onclick="document.location='9984#1298324174'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-21T21:36:14+00:00">Feb 21, 2011 09:36 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1298324174">&nbsp;</a></div><pre>[by David Lesny]

Today I upgraded my CE to OSG 1.2.18 with RSV 3.3.0.

Everything seems to be working correctly except for the new RSV

When the html-consumer attempts to run, it fails.

Looking in html-consumer.log, I see the following errors

001 (251.000.000) 02/21 14&#58;45&#58;39 Job executing on host&#58; &#60;127.0.0.1&#58;32663&#62;
...
021 (251.000.000) 02/21 14&#58;45&#58;39 Error from starter on &#60;127.0.0.1&#58;32663&#62;&#58;
Failed to execute &#39;/home/osg/CE/1.2/osg-rsv/bin/consumers/html-consumer&#39;&#58; Permission denied
...
021 (251.000.000) 02/21 14&#58;45&#58;39 Error from starter on &#60;127.0.0.1&#58;32663&#62;&#58;
Create_Process(/home/osg/CE/1.2/osg-rsv/bin/consumers/html-consumer,, ...) failed
...
004 (251.000.000) 02/21 14&#58;45&#58;39 Job was evicted.
(0) Job was not checkpointed.
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Run Remote Usage
Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00  -  Run Local Usage
0  -  Run Bytes Sent By Job
0  -  Run Bytes Received By Job
...
012 (251.000.000) 02/21 14&#58;45&#58;39 Job was held.
Failed to execute &#39;/home/osg/CE/1.2/osg-rsv/bin/consumers/html-consumer&#39;&#58; Permission denied
Code 6 Subcode 13

There is also permission errors for the gratia consumer and all the metrics in their log files,
so it appears to be a central problem within my RSV installation.

If I run the metrics as root with

rsv-control --run --all-enabled
<div id='show_749346207' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_749346207'>
they all succeed.. I did not try to run this as &#34;rsvuser&#34; since I believe there is a note in the
release notes that rsv-control can only be run as root.

If I then run the html-consumer by hand as &#34;rsvuser&#34; it works just fine

[rsvuser@osgx0]$ source /opt/osg/ce/setup.sh
[rsvuser@osgx0]$ /opt/osg/ce/osg-rsv/bin/consumers/html-consumer
2011-02-21 14&#58;38&#58;04&#58; html-consumer initializing.
2011-02-21 14&#58;38&#58;04&#58; Processing 18 files

And the web page is updated appropriately.

Here is the output from rsv-control

[root@osgx0 consumers]# rsv-control -j

Hostname&#58; osgx0.hep.uiuc.edu
ID OWNER      ST NEXT RUN TIME   METRIC
231.0 rsvuser    I  02-21 18&#58;15     org.osg.certificates.cacert-expiry
232.0 rsvuser    I  02-22 01&#58;12     org.osg.local.containercert-expiry
233.0 rsvuser    I  02-21 14&#58;31     org.osg.globus.gram-authentication
234.0 rsvuser    I  02-21 14&#58;25     org.osg.batch.jobmanager-default-status
235.0 rsvuser    I  02-21 18&#58;30     org.osg.certificates.crl-expiry
236.0 rsvuser    I  02-21 14&#58;37     org.osg.general.osg-directories-CE-permissions
237.0 rsvuser    I  02-21 14&#58;08     org.osg.globus.gridftp-simple
238.0 rsvuser    I  02-21 14&#58;09     org.osg.gratia.condor
239.0 rsvuser    I  02-21 14&#58;23     org.osg.gratia.metric
240.0 rsvuser    I  02-21 18&#58;47     org.osg.general.vdt-version
241.0 rsvuser    I  02-21 13&#58;41     org.osg.general.osg-version
242.0 rsvuser    I  02-22 01&#58;24     org.osg.local.httpcert-expiry
243.0 rsvuser    I  02-22 04&#58;59     org.osg.batch.jobmanagers-available
244.0 rsvuser    I  02-22 01&#58;40     org.osg.local.hostcert-expiry
245.0 rsvuser    I  02-21 13&#58;47     org.osg.general.ping-host
246.0 rsvuser    I  02-21 18&#58;47     org.osg.general.vo-supported

Hostname&#58; osgx1.hep.uiuc.edu
ID OWNER      ST NEXT RUN TIME   METRIC
247.0 rsvuser    I  02-21 13&#58;53     org.osg.srm.srmping
248.0 rsvuser    I  02-21 14&#58;28     org.osg.srm.srmcp-readwrite

ID OWNER      ST CONSUMER
250.0 rsvuser    I  gratia-consumer
251.0 rsvuser    I  html-consumer

Any ideas why the permission error when the consumers and metrics run automatically as rsvuser?

What else should I check for??

FYI....RSV was working properly with OSG 1.2.16 so I know my
configuration of rsvuser, rsv certificate and gums entries are proper
(at least for the previous version of RSV!!)

thanks, dave

</div><script type='text/javascript'>
        $('#show_749346207').click(function() {
            $('#detail_749346207').slideDown("normal");
            $('#show_749346207').hide();
            $('#hide_749346207').show();
        });
        $('#hide_749346207').click(function() {
            $('#detail_749346207').slideUp();
            $('#hide_749346207').hide();
            $('#show_749346207').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F9984">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 9984});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
