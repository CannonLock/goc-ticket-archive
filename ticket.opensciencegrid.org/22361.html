<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[22361] T3_US_UMiss - Worker nodes being upgraded to rhel6?</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=22361" method="post">
<div class="page-header">
    <h3><span class="muted">22361</span> / T3_US_UMiss - Worker nodes being upgraded to rhel6?</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Brendan Dennis</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Brendan Dennis</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier3</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">check on upgrade</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-09-24</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USCMS_Tier3 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=108313">108313</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Carl Edquist <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/22361", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/22361?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/22361?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20T3_US_UMiss%20-%20Worker%20nodes%20being%20upgraded%20to%20rhel6%3F%20ISSUE%3D22361%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='22361#1412726402'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-10-08T00:00:02+00:00">Oct 8, 2014 12:00 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1412726402">&nbsp;</a></div><pre>-- by SYSTEM at Tue Oct 07 23&#58;59&#58;05 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=108313' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=108313</a></pre></div><div class='update_description'><i onclick="document.location='22361#1411483903'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-23T14:51:43+00:00">Sep 23, 2014 02:51 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1411483903">&nbsp;</a></div><pre>I&#39;ve gone ahead and switched the factory entries over to rhel6 only with the assumption that the one rhel5 node shouldn&#39;t interfere. I&#39;ll keep an eye on UMiss glideins for the future and open a new ticket if any further issues develop related to this OS switch. Thanks for the help!

Brendan Dennis
UCSD Glidein Factory OperationsResolved.

-- by Brendan Dennis at Tue Sep 23 14&#58;50&#58;53 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=108313' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=108313</a></pre></div><div class='update_description'><i onclick="document.location='22361#1411429818'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-22T23:50:18+00:00">Sep 22, 2014 11:50 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1411429818">&nbsp;</a></div><pre>We completed the upgrade of our worker nodes to RHEL6 (all but 1 that, for the moment,  we are keeping for backward compatibility). So you can change the configuration to RHEL6 and we can close this ticket. Sorry for not responding but I thought that the ticket <a href='https&#58;//ticket.grid.iu.edu/22361' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/22361</a> was taking care of it.

-- by David Sanders at Mon Sep 22 16&#58;53&#58;59 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=108313' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=108313</a></pre></div><div class='update_description'><i onclick="document.location='22361#1411429791'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-22T23:49:51+00:00">Sep 22, 2014 11:49 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1411429791">&nbsp;</a></div><pre>Hi David, I&#39;ll try to find an answer for you...

Carl</pre></div><div class='update_description'><i onclick="document.location='22361#1411397939'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-22T14:58:59+00:00">Sep 22, 2014 02:58 PM UTC</time> by <b>echism</b><a class="anchor" name="1411397939">&nbsp;</a></div><pre>Software team,

Can you assist on this?

I appreciate it.

Thank you</pre></div><div class='update_description'><i onclick="document.location='22361#1411073325'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-18T20:48:45+00:00">Sep 18, 2014 08:48 PM UTC</time> by <b>echism</b><a class="anchor" name="1411073325">&nbsp;</a></div><pre>David,

I&#39;m actually not sure how you mix nodes with different OSes in condor. I&#39;ll ask the software team.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='22361#1410995474'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-17T23:11:14+00:00">Sep 17, 2014 11:11 PM UTC</time> by <b>David Sanders</b><a class="anchor" name="1410995474">&nbsp;</a></div><pre>Dear Elizabeth&#58;

I am working on the last node now. So it will be completed either this evening or tomorrow. Therefore, you can consider the upgrade done, barring any troubles.

For the one remaining rhel5 node, umiss101, I plan to try to use condor_config_local. Should I use &#34;START = ( (distro = &#34;RHEL5&#34;) )&#34;?

Best regards,

David Sanders

On Sep 17, 2014, at 2&#58;16 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='22361#1410981360'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-17T19:16:00+00:00">Sep 17, 2014 07:16 PM UTC</time> by <b>echism</b><a class="anchor" name="1410981360">&nbsp;</a></div><pre>Hi David,

Is this upgrade still going? Is there an approximate timeframe?

Thank you</pre></div><div class='update_description'><i onclick="document.location='22361#1410212894'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-08T21:48:14+00:00">Sep 8, 2014 09:48 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1410212894">&nbsp;</a></div><pre>Hi David,

Thanks for the info.  I have temporarily reconfigured the factories to accept either rhel5 or rhel6 nodes while you are in transition.  Can you please update this ticket when it is complete?  Also do you plan to restrict umiss101 in any way from grid jobs going through your CE, so we don&#39;t start up rhel6 pilots on that node?

Thanks,
Jeff Dost
OSG Glidein Factory Operations

-- by Jeffrey Dost at Mon Sep 08 21&#58;47&#58;11 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=108313' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=108313</a></pre></div><div class='update_description'><i onclick="document.location='22361#1410191836'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-08T15:57:16+00:00">Sep 8, 2014 03:57 PM UTC</time> by <b>David Sanders</b><a class="anchor" name="1410191836">&nbsp;</a></div><pre>Dear Brendan&#58;

Sorry for  the trouble. We are currently upgrading our worker nodes from RHEL5 to RHEL6. Also to add to the confusion we have a mixed group of hardware. Our older nodes are dual single core and we have 20 in the range umiss101 - umiss124 (20/24 are still working). Our newer ones are dual 12-core and we have 4 of those, umiss125 - umiss128. So far I have completed an upgrade on one of each group (umiss124 and umiss125). I hope to complete the newer ones in the next couple of days and then get back to the older ones. I&#39;ll let you know both when I have completed the newer ones and the full change-over. (I plan to keep one of the dual single-core units, umiss101, as RHEL5 for local compatibility.)

Best regards,

David Sanders

On Sep 8, 2014, at 10&#58;01 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='22361#1410188518'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-08T15:01:58+00:00">Sep 8, 2014 03:01 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1410188518">&nbsp;</a></div><pre>Hi,

I noticed over the weekend that some glideins submitted to the following gatekeeper have started to fail validation&#58;
gatekeeper=&#34;umiss001.hep.olemiss.edu&#58;2119/jobmanager-condor&#34;
gridtype=&#34;gt5&#34;

Specifically, they&#39;re failing the OS validation test&#58;
---
Executing /var/lib/condor/execute/dir_13946/glide_rk1UV9/main/test_os.sh
Requesting RHEL variant &#39;rhel5&#39;
RHEL Linux flavor found
Scientific Linux release 6.5 (Carbon)
Failed OS test for rhel5
---

Normally in this case, when it appears that a site has upgraded its worker nodes, I&#39;d convert our entry in the factory over to requiring rhel6 instead of rhel5. However, it appears as if only a small subset of worker nodes have been upgraded to rhel6, rather than all nodes. The three nodes I&#39;ve seen failing glideins due to this are&#58;
umiss104.hep.olemiss.edu
umiss124.hep.olemiss.edu
umiss125.hep.olemiss.edu

The majority of worker nodes still seem to be running rhel5 variants; it&#39;s only those three that I&#39;ve seen failing due to rhel6.

I just wanted to check in with the admins of the site to get the head&#39;s up on this- are the WNs being upgraded and these three just the first few initial ones? Or are they just test nodes or some sort of fluke?

Thanks!
Brendan Dennis
UCSD Glidein Factory Operations

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=108313' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=108313</a>

[Ticket History]
Subject&#58; T3_US_UMiss - Worker nodes being upgraded to rhel6?
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-site-support-team@....
<div id='show_469418751' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_469418751'>-- by Brendan Dennis at Mon Sep 08 15&#58;01&#58;29 UTC 2014
</div><script type='text/javascript'>
        $('#show_469418751').click(function() {
            $('#detail_469418751').slideDown("normal");
            $('#show_469418751').hide();
            $('#hide_469418751').show();
        });
        $('#hide_469418751').click(function() {
            $('#detail_469418751').slideUp();
            $('#hide_469418751').hide();
            $('#show_469418751').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F22361">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 22361});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
