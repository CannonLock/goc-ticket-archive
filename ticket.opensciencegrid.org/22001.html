<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[22001] Digicert not accepting CN with double space</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="robots" content="noindex, nofollow" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=22001" method="post">
<div class="page-header">
    <h3><span class="muted">22001</span> / Digicert not accepting CN with double space</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Mine Altunay</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Mine Altunay</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Mine to review</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-08-18</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG RA <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Scott Teige <span class="muted"> / OSG Operations Infrastructure</span></div><div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/22001", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='22001#1408041757'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-14T18:42:37+00:00">Aug 14, 2014 06:42 PM UTC</time> by <b>Mine Altunay</b><a class="anchor" name="1408041757">&nbsp;</a></div><pre>We can close this ticket. Soichi opened a jura ticket that will track this. He will enhance OIM code to catch double spaces before the request is submitted. We do not have any requests from DigiCert.</pre></div><div class='update_description'><i onclick="document.location='22001#1407502478'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-08T12:54:38+00:00">Aug 8, 2014 12:54 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1407502478">&nbsp;</a></div><pre>From&#58; Mine Altunay &#60;maltunay@....&#62;
Date&#58; August 7, 2014 3&#58;18&#58;56 PM EDT
To&#58; Soichi Hayashi &#60;hayashis@....&#62;
Cc&#58; Bockjoo Kim &#60;bockjoo@....&#62;, Alain John Deximo &#60;adeximo@....&#62;
Subject&#58; Re&#58; Digicert not accepting CN with double space?

Yes please. I think this is the best way to go.
Thanks
Mine
On Aug 7, 2014, at 12&#58;09 PM, Soichi Hayashi &#60;hayashis@....&#62; wrote&#58;

Mine,

So, it sounds like we should update our CN validator to check for double space. Should I open a Jira ticket?

Soichi

On Thu, Aug 7, 2014 at 12&#58;43 PM, Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;
Hi Mine,
I guess this is fine by me.
I obtained a new certificate for my T2 operation.
Thanks,
Bockjoo

On 8/7/14 12&#58;30 PM, Mine Altunay wrote&#58;
Hello Bockjoo, all
DigiCert confirmed that they changed their API. Is there a particular reason why there is a double space needed in these certs?

We have two options, we can leave the API as it is and if anyone mistakenly puts double spaces in, their request will be rejected.
Or, we can ask Digicert to do some scrubbing of double spaces.

If the rejection happens immediately meaning right after user types in the CN then it is acceptable. Otherwise, if the user waits for a few minutes/horus and then finds out he made a mistake, this is not a good interaction with our system. In that case I either ask OIM to check the CN immediately on the fly or ask DigiCert to scrub it.

Mine Altunay

<div id='show_38963155' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_38963155'>On Aug 4, 2014, at 3&#58;41 PM, Mine Altunay &#60;maltunay@....&#62; wrote&#58;

I will ask the Digicert folks. I am curious why double space is needed in an CN.
Mine
</div><script type='text/javascript'>
        $('#show_38963155').click(function() {
            $('#detail_38963155').slideDown("normal");
            $('#show_38963155').hide();
            $('#hide_38963155').show();
        });
        $('#hide_38963155').click(function() {
            $('#detail_38963155').slideUp();
            $('#hide_38963155').hide();
            $('#show_38963155').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='22001#1407177859'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-04T18:44:19+00:00">Aug 4, 2014 06:44 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1407177859">&nbsp;</a></div><pre>Adding Kevin to this ticket as well.</pre></div><div class='update_description'><i onclick="document.location='22001#1407177772'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-04T18:42:52+00:00">Aug 4, 2014 06:42 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1407177772">&nbsp;</a></div><pre>Mine,

Please review this ticket and let me know when I can contact DigiCert to look into the issue Soichi mentioned
below.

Thanks,
-Alain</pre></div><div class='update_description'><i onclick="document.location='22001#1407177675'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-04T18:41:15+00:00">Aug 4, 2014 06:41 PM UTC</time> by <b>OSG RA</b><a class="anchor" name="1407177675">&nbsp;</a></div><pre>From&#58; Soichi Hayashi &#60;hayashis@....&#62;
Date&#58; August 4, 2014 12&#58;59&#58;42 PM EDT
To&#58; Alain John Deximo &#60;adeximo@....&#62;, Mine Altunay &#60;maltunay@....&#62;
Subject&#58; Digicert not accepting CN with double space?

Alain, Mine,

Per <a href='https&#58;//ticket.grid.iu.edu/16009' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/16009</a>

It looks like DigiCert updated the validation rule since last year so that any certificate with double space inside CN will be rejected.

mysql&#62; select id,dn,status from certificate_request_user where dn like &#34;%  %&#34;;
+------+----------------------------------------------------------------------------------------------------+----------+
| id   | dn                                                                                                 | status   |
+------+----------------------------------------------------------------------------------------------------+----------+
|  338 | /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Neranjan  Edirisinghe 1147               | REJECTED |
|  904 | /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=&#34;Bockjoo Kim  (UFlorida T2 Service) 118&#34; | FAILED   |
| 1312 | /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=&#34;Khilesh  Mistry 1735&#34;                   | ISSUED   |
| 1410 | /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=&#34;James  Shank 433&#34;                       | ISSUED   |
+------+----------------------------------------------------------------------------------------------------+----------+
4 rows in set (0.01 sec)

This means that, apart from Bockjoo Kim, Kilesh and James will probably have problem renewing their user certificates when the time comes.

I am also not sure why there is double quotes around the CNs with double space inside it, but maybe that&#39;s how the PKCS library used by OIM deals with CN with double quote.. but I believe that&#39;s just another issue.

Can you ping Digicert and see if they indeed consider double space to be an invalid CN, and if so, if we should update our validaiton rule to prevent user from submitting a request with CN with double quote inside it?

Thanks,
Soichi</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F22001">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
