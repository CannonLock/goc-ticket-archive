<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[29534] glidein APPEND_REQ_VANILLA for x509userproxysubject</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=29534" method="post">
<div class="page-header">
    <h3><span class="muted">29534</span> / glidein APPEND_REQ_VANILLA for x509userproxysubject</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Steve Johnson</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">TAMU_BRAZOS_CE</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Steve Johnson</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier3</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-09-01</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Security Team <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=29534", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/29534?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/29534?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20glidein%20APPEND_REQ_VANILLA%20for%20x509userproxysubject%20ISSUE%3D29534%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='29534#1472765020'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-01T21:23:40+00:00">Sep 1, 2016 09:23 PM UTC</time><a class="anchor" name="1472765020">&nbsp;</a></div><pre>Steve,

Sounds good. And yeah, I you ever have further issues with glideins running at the site, please don&#39;t hesitate to open up a ticket and get a hold of us. Closing ticket.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29534#1472759950'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-01T19:59:10+00:00">Sep 1, 2016 07:59 PM UTC</time> by <b>jletts@....</b><a class="anchor" name="1472759950">&nbsp;</a></div><pre>This is an automated reply.

I will be out of the office beginning August 25, 2016, with very limited e-mail and internet connectivity, and may not be able to reply to you immediately.

JAMES LETTS</pre></div><div class='update_description'><i onclick="document.location='29534#1472759771'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-01T19:56:11+00:00">Sep 1, 2016 07:56 PM UTC</time> by <b>steve@....</b><a class="anchor" name="1472759771">&nbsp;</a></div><pre>Yeah, let&#39;s go ahead and close it.  The problem looks resolved to me.  I&#39;ll
check in on it from time to time when I see multiple users running glideins.

// Steve

On 09/01/2016 01&#58;53 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29534#1472756017'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-01T18:53:37+00:00">Sep 1, 2016 06:53 PM UTC</time><a class="anchor" name="1472756017">&nbsp;</a></div><pre>Steve,

Thanks for the update. We must have missed George&#39;s running jobs in our glidein logs --- they rotate quite frequently. Anyhow, if you guys are happy with the modifications made to support your local users, shall we close out this ticket? Everything looks normal from the factory-side. Or is there something else that still needs to be resolved?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29534#1472245453'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-26T21:04:13+00:00">Aug 26, 2016 09:04 PM UTC</time> by <b>steve@....</b><a class="anchor" name="1472245453">&nbsp;</a></div><pre>Marty,

User georgemm01 actually has glidein jobs running periodically as part of a
suite of tests.  He confirmed that they ran to completion last night.

// Steve

On 08/26/2016 12&#58;45 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29534#1472233544'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-26T17:45:44+00:00">Aug 26, 2016 05:45 PM UTC</time><a class="anchor" name="1472233544">&nbsp;</a></div><pre>Steve,

Okay, I&#39;ll keep an eye out. Please let us know when the jobs are sent --- I haven&#39;t seen any sign of them yet.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29534#1472165050'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-25T22:44:10+00:00">Aug 25, 2016 10:44 PM UTC</time> by <b>steve@....</b><a class="anchor" name="1472165050">&nbsp;</a></div><pre>Marty,

I think georgemm01 will likely be the first one to submit jobs.

// Steve

On 08/25/2016 05&#58;01 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29534#1472162516'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-25T22:01:56+00:00">Aug 25, 2016 10:01 PM UTC</time><a class="anchor" name="1472162516">&nbsp;</a></div><pre>Steve,

Great. Thanks. Let me know when they do. I&#39;ll then check and make sure I can confirm they are running. In fact, if you have a few usernames that will submit the jobs, it&#39;ll make it even easier.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29534#1472154614'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-25T19:50:14+00:00">Aug 25, 2016 07:50 PM UTC</time> by <b>steve@....</b><a class="anchor" name="1472154614">&nbsp;</a></div><pre>Hi Marty,

I&#39;ll ask some local people to submit some glideins to verify that we&#39;re
getting the pilot jobs and that they&#39;re getting sent into SLURM and running
the user jobs.

// Steve

On 08/25/2016 02&#58;01 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29534#1472151734'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-25T19:02:14+00:00">Aug 25, 2016 07:02 PM UTC</time> by <b>jletts@....</b><a class="anchor" name="1472151734">&nbsp;</a></div><pre>This is an automated reply.

I will be out of the office beginning August 25, 2016, with very limited e-mail and internet connectivity, and may not be able to reply to you immediately.

JAMES LETTS</pre></div><div class='update_description'><i onclick="document.location='29534#1472151695'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-25T19:01:35+00:00">Aug 25, 2016 07:01 PM UTC</time><a class="anchor" name="1472151695">&nbsp;</a></div><pre>Steve,

I can confirm from the factory-side that we&#39;re also seeing the glidein successfully startup, but simply sit idle having no user jobs match and run on them. Did you want me to send some test jobs from our test frontend to the site? If I recall correctly though, wasn&#39;t the issue here making sure local TAMU user jobs submitted to the CMS frontend got preferentially routed back to glideins submitted to TAMU? If so, then maybe my test jobs would not be a good proxy for this test. Anyhow, let us know if we can help.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29534#1472060472'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-24T17:41:12+00:00">Aug 24, 2016 05:41 PM UTC</time> by <b>steve@....</b><a class="anchor" name="1472060472">&nbsp;</a></div><pre>Kyle,

On last check when we had a batch of glideins arrive, the jobs were running
under the correct uid.  It&#39;s probably safe to call this a success story.

I see a handful of glideins at our CE from around 10&#58;30-11&#58;00 Central, but
there don&#39;t appear to be any T3_US_TAMU jobs in
cmsgwms-collector-{global,itb}, so these are just idling in the condor-ce queue.

// Steve

On 08/24/2016 12&#58;26 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29534#1472059603'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-24T17:26:43+00:00">Aug 24, 2016 05:26 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1472059603">&nbsp;</a></div><pre>Steve,

Any update on this since the jobs were waiting to come in?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='29534#1471022793'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-12T17:26:33+00:00">Aug 12, 2016 05:26 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1471022793">&nbsp;</a></div><pre>Steve,

Any update on this since the jobs were waiting to come in?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='29534#1470063194'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-01T14:53:14+00:00">Aug 1, 2016 02:53 PM UTC</time> by <b>steve@....</b><a class="anchor" name="1470063194">&nbsp;</a></div><pre>My bad. I had pointed to the global collector but forgot to remove cmspilot02
from the banned users.  It looks like there are 72 jobs waiting to come to our
site this morning.  Hopefully they&#39;ll finally get started.

// Steve

On 08/01/2016 03&#58;38 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29534#1470040689'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-01T08:38:09+00:00">Aug 1, 2016 08:38 AM UTC</time> by <b>farrukh.aftab.khan@....</b><a class="anchor" name="1470040689">&nbsp;</a></div><pre>Hi Steve,

Was the restriction on the pilots from the CE side lifted? I saw quite a lot of requests over the weekend, but no pilots.

Best regards,
Farrukh</pre></div><div class='update_description'><i onclick="document.location='29534#1469745130'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-28T22:32:10+00:00">Jul 28, 2016 10:32 PM UTC</time> by <b>steve@....</b><a class="anchor" name="1469745130">&nbsp;</a></div><pre>Thanks for the help, all.  I&#39;ve added the global collector to our list of
hosts to query and asked our local users to submit some crab3 jobs.
Hopefully, we&#39;ll have some feedback in the coming days.

// Steve

On 07/28/2016 03&#58;32 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29534#1469694730'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-28T08:32:10+00:00">Jul 28, 2016 08:32 AM UTC</time> by <b>farrukh.aftab.khan@....</b><a class="anchor" name="1469694730">&nbsp;</a></div><pre>Thanks James!

The change has been pushed to the CMS global pool. I leave it up to the TAMU folks to decide whether they&#39;d like to validate it first before closing the ticket or if they&#39;ll open a new one if they see any issues.

Best regards,
Farrukh</pre></div><div class='update_description'><i onclick="document.location='29534#1469651534'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-27T20:32:14+00:00">Jul 27, 2016 08:32 PM UTC</time> by <b>letts@....</b><a class="anchor" name="1469651534">&nbsp;</a></div><pre>Pull request merged.

JAMES

<font color='#7F7E6F'>&#62; On Jul 27, 2016, at 5&#58;41 AM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29534#1469623270'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-27T12:41:10+00:00">Jul 27, 2016 12:41 PM UTC</time> by <b>farrukh.aftab.khan@....</b><a class="anchor" name="1469623270">&nbsp;</a></div><pre>Hi Kyle,

I pushed the change to our production system early this week, but my pull request is still pending.

James, can you approve the pull request please? All other necessary changes are already in place and once we have the pull request approved, the change will start taking effect.

Best regards,
Farrukh</pre></div><div class='update_description'><i onclick="document.location='29534#1469622651'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-27T12:30:51+00:00">Jul 27, 2016 12:30 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1469622651">&nbsp;</a></div><pre>Farrukh,

It&#39;s been 9 days and we&#39;ve heard no response, so I am assuming that&#39;s a green light? What&#39;s the status of deploying this?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='29534#1468852690'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-18T14:38:10+00:00">Jul 18, 2016 02:38 PM UTC</time> by <b>farrukh.aftab.khan@....</b><a class="anchor" name="1468852690">&nbsp;</a></div><pre>Hi all,

The fix is still in the testbed pool, and it seems like Steve and others at TAMU haven&#39;t noticed any issues either, so I am going to apply the change to our global pool next Monday. Does that sound okay to everyone involved?

If I don&#39;t hear back anything, I&#39;ll take this as a green light. We should keep the ticket open until this has been deployed in the global pool.

Thanks!

Best regards,
Farrukh</pre></div><div class='update_description'><i onclick="document.location='29534#1468515424'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-14T16:57:04+00:00">Jul 14, 2016 04:57 PM UTC</time><a class="anchor" name="1468515424">&nbsp;</a></div><pre>Steve,

Ah, okay. I believe Farrukh will be back from vacation starting next week. So let&#39;s wait to hear from him.

Marty Kandes
UCSD Glidein Factory Operations

P.S. I&#39;ll be on vacation next week. But the other factory operators should be able to assist once we get a status update from Farrukh.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29534#1468515041'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-14T16:50:41+00:00">Jul 14, 2016 04:50 PM UTC</time><a class="anchor" name="1468515041">&nbsp;</a></div><pre>Hi Marty,

I think we need word if the changes Farrukh made were propagated out of the testbed. During the testing period, we placed /CN=cmspilot02 into our banned list in GUMS so we wouldn&#39;t get outside jobs infiltrating the testing of the glidein fix.

If the fix has gone global, we can put cmspilot02 back into the group of pilot users in GUMS, point our job router plugin to cmsgwms-collector-global to pull usernames for jobs, and probably bring closure to this ticket.

// Steve

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Steve Johnson 666</pre></div><div class='update_description'><i onclick="document.location='29534#1468512885'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-14T16:14:45+00:00">Jul 14, 2016 04:14 PM UTC</time><a class="anchor" name="1468512885">&nbsp;</a></div><pre>Hi Steve,

We&#39;re currently observing all glidein go held at the site due to the following hold reason [1]. It looks like the CMS pilot proxy [2] may not be authorized at the HTCondor-CE to allow glidein submission. What are you using for authorization? GUMS or grid-mapfile? You may also want to look in your /var/condor-ce/ScheddLog for more information about the authorization issue.

Marty Kandes
UCSD Glidein Factory Operations

[1]

4001060.0   fecmsglobal     7/14 15&#58;52 Error connecting to schedd ce01.brazos.tamu.edu&#58; SECMAN&#58;2007&#58;Failed to received post-auth ClassAd|AUTHENTICATE&#58;1004&#58;Failed to authenticate using FS

[2]

subject   &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot02/vocms080.cern.ch/CN=487157708
issuer    &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot02/vocms080.cern.ch
identity  &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot02/vocms080.cern.ch
type      &#58; RFC compliant proxy
strength  &#58; 1024 bits
path      &#58; /var/lib/gwms-factory/client-proxies/user_fecmsglobal/glidein_gfactory_instance/credential_CMSG-v1_0.local_users_208035
timeleft  &#58; 189&#58;03&#58;21
key usage &#58; Digital Signature, Key Encipherment
=== VO cms extension information ===
VO        &#58; cms
subject   &#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot02/vocms080.cern.ch
issuer    &#58; /DC=ch/DC=cern/OU=computers/CN=lcg-voms2.cern.ch
attribute &#58; /cms/local/Role=pilot/Capability=NULL
attribute &#58; /cms/dcms/Role=NULL/Capability=NULL
attribute &#58; /cms/escms/Role=NULL/Capability=NULL
attribute &#58; /cms/itcms/Role=NULL/Capability=NULL
attribute &#58; /cms/local/Role=NULL/Capability=NULL
attribute &#58; /cms/Role=NULL/Capability=NULL
attribute &#58; /cms/uscms/Role=NULL/Capability=NULL
timeleft  &#58; 189&#58;03&#58;20
uri       &#58; lcg-voms2.cern.ch&#58;15002

<div id='show_27403639' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_27403639'>by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049
</div><script type='text/javascript'>
        $('#show_27403639').click(function() {
            $('#detail_27403639').slideDown("normal");
            $('#show_27403639').hide();
            $('#hide_27403639').show();
        });
        $('#hide_27403639').click(function() {
            $('#detail_27403639').slideUp();
            $('#hide_27403639').hide();
            $('#show_27403639').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='29534#1468004891'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-08T19:08:11+00:00">Jul 8, 2016 07:08 PM UTC</time> by <b>steve@....</b><a class="anchor" name="1468004891">&nbsp;</a></div><pre>I&#39;ll defer to the job submission folks, but from our end the glideins appear
to be running jobs as the correct user.

// Steve

On 07/08/2016 01&#58;04 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29534#1468001062'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-08T18:04:22+00:00">Jul 8, 2016 06:04 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1468001062">&nbsp;</a></div><pre>Steve,

Any updates here?  Just checking in!

Thanks,
Kyle</pre></div><div class='update_description'><i onclick="document.location='29534#1466444395'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-20T17:39:55+00:00">Jun 20, 2016 05:39 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1466444395">&nbsp;</a></div><pre>Thanks.

I&#39;ll be pushing the ticket out for a few weeks and I&#39;ll check back in then.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='29534#1466004730'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-15T15:32:10+00:00">Jun 15, 2016 03:32 PM UTC</time> by <b>steve@....</b><a class="anchor" name="1466004730">&nbsp;</a></div><pre>I think we can continue off ticket but keep it open so that when we have a
resolution the OSG ticket can be updated and marked as solved (keeping up the
optimism here).

// Steve

On 06/15/2016 10&#58;14 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29534#1466003656'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-15T15:14:16+00:00">Jun 15, 2016 03:14 PM UTC</time> by <b>farrukh.aftab.khan@....</b><a class="anchor" name="1466003656">&nbsp;</a></div><pre>Hi Kyle,

We have been following up off ticket on the issue.

Steve,
If you agree, can we close this ticket and follow up in the email thread? Or should we move the discussion here? There are quite a few people copied on the thread.

Best regards,
Farrukh</pre></div><div class='update_description'><i onclick="document.location='29534#1465841022'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-13T18:03:42+00:00">Jun 13, 2016 06:03 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1465841022">&nbsp;</a></div><pre>I have added Rob Snihur to this ticket.

Rob, can you look at this?

Also, Farrukh have you been able to respond to James?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='29534#1464809590'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-01T19:33:10+00:00">Jun 1, 2016 07:33 PM UTC</time> by <b>letts@....</b><a class="anchor" name="1464809590">&nbsp;</a></div><pre>Hello Kyle,

Ideally I would like someone from the US CMS Tier-3 support team to take up support from the CMS side, rather than Farrukh and the Ops team at CERN. I suspect Brian is rather over-committed as well. CC’ing my co-coordinator for US CMS Kevin Lannon.

It sounds like something was deployed, but we (Submission Infrastructure) are kind of out of the loop (which is bad).

Farrukh, are the user-submitted TAMU glideins somehow authenticated in the Global Pool? Perhaps this is premature.

James

<font color='#7F7E6F'>&#62; On Jun 1, 2016, at 5&#58;28 AM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29534#1464794830'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-01T15:27:10+00:00">Jun 1, 2016 03:27 PM UTC</time> by <b>steve@....</b><a class="anchor" name="1464794830">&nbsp;</a></div><pre>Hello Farrukh,

You&#39;re mostly correct in your assessment.  Per policy, we cannot have pilots
reused by other users, so we need to have a one-to-one matching of the pilot
job to its internal jobs.  Yes, this also affects user accounting as well as
fairshare scheduling.

In our HTCondor job router the USER_DN environment variable is set to the dn
of the new local owner of the pilot, and the Owner ClassAd is set to the local
username of that owner.  Thus, when the job is handed off to SLURM, it&#39;s
submitted as the local user, and runs as that user on the compute node.  The
USER_DN variable is suppose to be used inside the pilot to prevent other users
from accessing it.

If it&#39;s of use, I&#39;ve tarred up a running pilot under the aperloff local user
which, according to StartdLog, was running jobs as another local user, bmichlin.

Much of this was setup by Trey Dockendorf here locally and Brian Bockelmann @
OSG. Trey has since moved on and I&#39;ve taken up the cause until his replacement
can be found.

BTW, I&#39;m unable to read the gitlab.cern.ch link as I do not have a CERN account.

// Steve

On 06/01/2016 09&#58;45 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29534#1464792310'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-01T14:45:10+00:00">Jun 1, 2016 02:45 PM UTC</time> by <b>farrukh.aftab.khan@....</b><a class="anchor" name="1464792310">&nbsp;</a></div><pre>Hi Steve,

After reading the ticket, I thought this was how it was intended to be? A pilot can be reused by another user as long as he is listed by a site as their own.

The list of users defined by TAMU can be found here&#58;
<a href='https&#58;//gitlab.cern.ch/SITECONF/T3_US_TAMU/blob/master/GlideinConfig/local-users.txt' target='_blank' rel='nofollow'>https&#58;//gitlab.cern.ch/SITECONF/T3_US_TAMU/blob/master/GlideinConfig/local-users.txt</a>

If I understand correctly, what you are looking for is to have one pilot per user? I am guessing this is somehow intertwined with the local user accounting on the site? Currently, a single pilot is being used by multiple users on the same system and that some how breaks the accounting?

In our current set up when a user submits an analysis job using CRAB3, CRAB3 looks up the sites which a user is &#39;local&#39; to and populates a classAd which is then used by our pool for matching. How we match pilots to users can be modified, but I&#39;d need to discuss this with the others in the submission infrastructure group. Please let me know if I understand the problem correctly. Thanks!

I wasn&#39;t directly involved in how things were set up at TAMU, so I might need to take a look at the scripts to see if something can be done on the site side as well to cater for this.

Best regards,
Farrukh</pre></div><div class='update_description'><i onclick="document.location='29534#1464787630'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-01T13:27:10+00:00">Jun 1, 2016 01:27 PM UTC</time> by <b>farrukh.aftab.khan@....</b><a class="anchor" name="1464787630">&nbsp;</a></div><pre>Hi Kyle,

I didn&#39;t have access to the ticket up until now (it was marked as a security issue so was visible to a certain group of people)

I&#39;ll take a look.

Best regards,
Farrukh</pre></div><div class='update_description'><i onclick="document.location='29534#1464784103'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-01T12:28:23+00:00">Jun 1, 2016 12:28 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1464784103">&nbsp;</a></div><pre>James, Farrukh, Brian,

Have you had a chance to look at this issue?  We haven&#39;t heard from any of you since Jeff added you.  Or has this been handled offline?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='29534#1464274450'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-26T14:54:10+00:00">May 26, 2016 02:54 PM UTC</time> by <b>steve@....</b><a class="anchor" name="1464274450">&nbsp;</a></div><pre>The main reason for checking the security box was that the glidein job from
our CE runs as a real user when it hits our batch system, and the problem was
that the interior condor jobs included those from other users, thus one user
was running processes under another user&#39;s ID.

// Steve

On 05/26/2016 07&#58;18 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29534#1464265113'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-26T12:18:33+00:00">May 26, 2016 12:18 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1464265113">&nbsp;</a></div><pre>I have now made this ticket into a security notification so that anyone authorized as a security contact in OIM can view the ticket.  If it&#39;s something you guys think should be done we can completely turn off the access control and make this a normal ticket.  Thoughts?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='29534#1463439940'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-16T23:05:40+00:00">May 16, 2016 11:05 PM UTC</time><a class="anchor" name="1463439940">&nbsp;</a></div><pre>Hi,

This all appears to be coming from the CMS Frontend, If I understand correctly from what Steve is reporting, it looks like CMS has some scripts that are supposed to only allow specific users to run on glideins at TAMU. This is the first I&#39;m learning about this, as none of this configuration is coming from factory ops.

So I&#39;m adding James Letts and Farrukh, they run the CMS global pool frontend and maintain the configuration.  I also am adding Brian Bockelman since it looks like he contributed  export_siteconf_info.py config.

It&#39;s not clear to me however if we can grant them access to this ticket since its flagged as a security issue.

Jeff Dost
OSG Glidein Factory Operations

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='29534#1463436017'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-16T22:00:17+00:00">May 16, 2016 10:00 PM UTC</time> by <b>steve@....</b><a class="anchor" name="1463436017">&nbsp;</a></div><pre>The aforementioned glidein started yesterday 05/15/2016 at 18&#58;19&#58;41 Central time.

Another job that started today, 05/16/2016, at 11&#58;35&#58;47, and is also still
running.  This job&#39;s StartLog does not show any foreign users.

// Steve

On 05/16/2016 04&#58;51 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29534#1463435469'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-16T21:51:09+00:00">May 16, 2016 09:51 PM UTC</time> by <b>steve@....</b><a class="anchor" name="1463435469">&nbsp;</a></div><pre>There are a few glidein jobs running now, all under the same user, bmichlin.

The glidein job was started under the DN&#58;
&#34;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bmichlin/CN=740656/CN=Benjamin
Ari Michlin&#34;

According to the glidein StartdLog on the compute node, 357 jobs ran as this
user, but there were 8 other jobs that ran as
&#34;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=moralesm/CN=725145/CN=Jorge
Daniel Morales Mendoza&#34;

There are currently no glideins running under Jorge&#39;s account.

// Steve

On 05/10/2016 12&#58;33 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29534#1463430342'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-16T20:25:42+00:00">May 16, 2016 08:25 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1463430342">&nbsp;</a></div><pre>Steven,

Can you respond to Marty?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='29534#1462901623'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T17:33:43+00:00">May 10, 2016 05:33 PM UTC</time><a class="anchor" name="1462901623">&nbsp;</a></div><pre>Hi Steven,

Can you provide some example proxies? Who are the different users you&#39;re seeing?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29534#1462822645'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-09T19:37:25+00:00">May 9, 2016 07:37 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1462822645">&nbsp;</a></div><pre>Adding Marty to this ticket as well.  And insight would be much appreciated.  Or any thoughts from Security.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='29534#1462381795'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-04T17:09:55+00:00">May 4, 2016 05:09 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1462381795">&nbsp;</a></div><pre>Adding GLidein Support and pinging Jeff.</pre></div><div class='update_description'><i onclick="document.location='29534#1461614021'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-25T19:53:41+00:00">Apr 25, 2016 07:53 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1461614021">&nbsp;</a></div><pre>Adding Jeff Dost to this ticket.  Perhaps he can shed some light on this.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='29534#1461613773'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-25T19:49:33+00:00">Apr 25, 2016 07:49 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1461613773">&nbsp;</a></div><pre>Our HTCondor-CE job router hook is setting the environment variable USER_DN=&#60;the dn of a valid user&#62; for glidein jobs. The job router correctly changes owner of the glidein job to a valid local real user and submits the job to SLURM as that user. Once the SLURM job begins and the local HTCondor environment is setup on the compute node, the classad variable APPEND_REQ_VANILLA = (&#34;&#60;the dn of the valid user&#62;&#34; =?= x509userproxysubject) is set and written to ./glidein_config at the top of the job&#39;s temp directory. This is done by ./client/export_siteconf_info.py per the mods at <a href='https&#58;//github.com/jamesletts/CMSglideinWMSValidation/pull/9.' target='_blank' rel='nofollow'>https&#58;//github.com/jamesletts/CMSglideinWMSValidation/pull/9.</a>  At this point everything is fine.  However, once the condor_* processes are running, we see jobs coming in from the factory on the compute node and running with a x509userproxysubject that is different from that of the original intended user.  I.e., if a user requests TAMU_BRAZOS_CE in their job, it could run under the wrong user&#39;s account.  It appears that the APPEND_REQ_VANILLA classad is being ignored somewhere in the process as a restriction on who can run jobs through the compute node&#39;s HTCondor instance.  I checked this as a security issue, but it likely only affects our site at this time.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Steve Johnson 666</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F29534">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 29534});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
