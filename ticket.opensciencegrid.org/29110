<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[29110] Increase max memory per glidein for the Fermilab VO?</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=29110" method="post">
<div class="page-header">
    <h3><span class="muted">29110</span> / Increase max memory per glidein for the Fermilab VO?</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Kenneth Herner</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">Clemson-Palmetto</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">OSG</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Kenneth Herner</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">Community Support Center</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Check for update</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-07-12</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">CSC <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=29110", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/29110?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/29110?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Increase%20max%20memory%20per%20glidein%20for%20the%20Fermilab%20VO%3F%20ISSUE%3D29110%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='29110#1482278005'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-20T23:53:25+00:00">Dec 20, 2016 11:53 PM UTC</time> by <b>Raynor Moore</b><a class="anchor" name="1482278005">&nbsp;</a></div><pre>From&#58; Bockjoo Kim &#60;bockjoo@....&#62;
To&#58; Brian Lin &#60;blin@....&#62;, osg-int &#60;osg-int@....&#62;
Subject&#58; Re&#58; &#60;blah&#62; execute_cmd&#58; 30 seconds timeout
Date-Sent&#58; Tuesday, December 20, 2016 6&#58;33 PM -0500

Sorry for late reply!
I have created /var/tmp/pbs_cache_*/pbs_status.debug
and I am seeing this error in /var/tmp/qstat_cache_cmspilot/pbs_status.log&#58;
12/20/16 18&#58;32&#58;33 2523767 Unable to acquire lock, try 3; will sleep for 0.16 seconds and try for 28.85 more seconds.
Thanks,
Bockjoo</pre></div><div class='update_description'><i onclick="document.location='29110#1468348849'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-12T18:40:49+00:00">Jul 12, 2016 06:40 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1468348849">&nbsp;</a></div><pre>OK, I&#39;m going to go ahead and close this. If something else pops up we can reopen it.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='29110#1468256831'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-11T17:07:11+00:00">Jul 11, 2016 05:07 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1468256831">&nbsp;</a></div><pre>I&#39;m ok with closing it at this point.</pre></div><div class='update_description'><i onclick="document.location='29110#1468254775'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-11T16:32:55+00:00">Jul 11, 2016 04:32 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1468254775">&nbsp;</a></div><pre>Hello All,

Is this ok to close or is there more discussion going on?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='29110#1467910590'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-07T16:56:30+00:00">Jul 7, 2016 04:56 PM UTC</time><a class="anchor" name="1467910590">&nbsp;</a></div><pre>Brian,

That&#39;s a fairly small blip on our radar. I&#39;m not sure we have enough eyeballs to spot and respond to that in any short amount of time, unless prodded to do so by someone (or some script) keeping a closer watch.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1467907511'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-07T16:05:11+00:00">Jul 7, 2016 04:05 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1467907511">&nbsp;</a></div><pre>As long as we can notice the large discrepancies in claimed vs running
glideins like the one on July 5th [1], I think that&#39;s enough. If so, I
think we can probably close this ticket.

Thanks,
Brian

[1]
<a href='http&#58;//glidein.grid.iu.edu/factory/monitor/factoryStatus.html?entry=OSG_US_Clemson-Palmetto_condce&frontend=Fermilab-fifebatch_frontend&infoGroup=running&elements=StatusRunning' target='_blank' rel='nofollow'>http&#58;//glidein.grid.iu.edu/factory/monitor/factoryStatus.html?entry=OSG_US_Clemson-Palmetto_condce&frontend=Fermilab-fifebatch_frontend&infoGroup=running&elements=StatusRunning</a>,ClientGlideRunning,ClientGlideIdle,&rra=2&window_min=0&window_max=0&timezone=-8</pre></div><div class='update_description'><i onclick="document.location='29110#1467906889'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-07T15:54:49+00:00">Jul 7, 2016 03:54 PM UTC</time><a class="anchor" name="1467906889">&nbsp;</a></div><pre>Hi Brian,

We do have automated reports sent to us every 12 hours providing us with statistics on glidein performance at sites. However, we do not specifically notify on held glideins because at some sites this is a feature, not a bug. i.e., they put glideins on hold on purpose, preempting them for their priority users.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1467903311'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-07T14:55:11+00:00">Jul 7, 2016 02:55 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1467903311">&nbsp;</a></div><pre>Xizhou,

You&#39;re right about the VOs, I was thinking of splitting up the VOs
further but upping the # of file descriptors and max stack size may
solve our problem.

I&#39;m still not very comfortable that we think that the jobs are being
held due to nodes being unavailable or that we reached your cluster&#39;s
max cores/jobs. That means that when your cluster is under heavy usage,
we&#39;ll see more held jobs again. That being said, I think that the file
descriptor limit was the problem.

Factory ops,

Do you guys get notifications when you see a lot of held pilots? I&#39;d be
interested in knowing if we see this problem again in the future.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1467832272'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-06T19:11:12+00:00">Jul 6, 2016 07:11 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1467832272">&nbsp;</a></div><pre>Hi Brian,

I don’t think the held jobs are related to the issue of max memory per glidein. The jobs were held were most likely because either (1) there was no available node to run those jobs or (2) the upper limits on maximum number of cores or jobs were reached.

The submit failures don’t seem to be caused by PBS configuration. Our login node has much more jobs being submitted and doesn’t show same or similar errors. Anyway, I increased the number of open files and max stack size on osg-ce to see if we can eliminate those errors. If not, those errors might be the results of PBS limits put on the osg job queue.

On the osg-ce.clemson.edu node, different VOs already run glidein_startup.sh under their own unix account. I wonder if this is same as mapping pilots from different VOs to different unix accounts.

Thanks,

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1467748007'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-05T19:46:47+00:00">Jul 5, 2016 07:46 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1467748007">&nbsp;</a></div><pre>Xizhou,

I&#39;m not so sure the problem&#39;s completely solved and it looks like things broke down once again this morning. There are more running jobs (690) but I see 1400 held jobs. Here are some example held messages&#58;

- Attempts to submit failed&#58; fork&#58; Cannot allocate memory&#92;nfork&#58; Cannot allocate memory&#92;nfork&#58; Cannot allocate memory&#92;nfork&#58; Cannot allocate memory&#92;n
- Attempts to submit failed&#58; pipe() for stdout&#58; Too many open files&#92;npipe() for stdout&#58; Too many open files&#92;npipe() for stdout&#58; Too many open files&#92;npipe() for stdout&#58; Too many open files&#92;n

It certainly seems like we&#39;re hitting the max number of file descriptors. Perhaps we should be mapping pilots from different VOs to different unix accounts? I&#39;m still not sure about the cause of the memory allocation failures but I believe it&#39;s an error coming from qsub.

- Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1467730576'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-05T14:56:16+00:00">Jul 5, 2016 02:56 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1467730576">&nbsp;</a></div><pre>I believe so, unless someone has a different thought.

Xizhou
From&#58; Open Science Grid FootPrints [mailto&#58;osg@....]
Sent&#58; Tuesday, July 05, 2016 9&#58;46 AM
To&#58; Xizhou Feng
Subject&#58; Open Science Grid&#58; Increase max memory per glidein for the Fermilab VO? ISSUE=29110 PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='29110#1467726413'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-05T13:46:53+00:00">Jul 5, 2016 01:46 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1467726413">&nbsp;</a></div><pre>Hello,

Just to confirm, this is ok to close now, correct?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='29110#1467233530'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-29T20:52:10+00:00">Jun 29, 2016 08:52 PM UTC</time><a class="anchor" name="1467233530">&nbsp;</a></div><pre>Xizhou,

Sounds good.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1467232690'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-29T20:38:10+00:00">Jun 29, 2016 08:38 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1467232690">&nbsp;</a></div><pre>Hi Marty,

It is not necessary to cap the maximum number of multicore glideins at this point. I will contact you if we find the capping from the factory operation side is necessary.

Thanks,

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1467232188'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-29T20:29:48+00:00">Jun 29, 2016 08:29 PM UTC</time><a class="anchor" name="1467232188">&nbsp;</a></div><pre>Xizhou,

From our perspective, gldiein performance continues to look quite normal. Unless Brian Lin has something else he would like to check before closing out this ticket, I think we&#39;re pretty much done here. Did you want me to go ahead and cap the maximum number of multicore glideins at the site until Brian gets back from vacation?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1467210012'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-29T14:20:12+00:00">Jun 29, 2016 02:20 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1467210012">&nbsp;</a></div><pre>We have tested preemption on osg job within PBS scheduler in the last two days, although the preemption is turned off currently. The clearing of held jobs could be due to the fact that completions of our local jobs had freed up more resources for OSG jobs to use.

The 30 multicore pilots may be just coincidental. I just checked the cluster and it seems that over 200 OSG multicore jobs are running on the cluster.
# qstat -n -1 | grep osg | grep &#39; 8 &#39; | grep &#39; R &#39; | wc
205    2460   19270

Please let me know if there is anything our site need to do on this ticket.

Thanks,

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1467095171'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-28T06:26:11+00:00">Jun 28, 2016 06:26 AM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1467095171">&nbsp;</a></div><pre>Hi,

I am out of the office until July 5, 2016. For OSG software related matters, you can contact the software team at osg-software@..... If your matter is urgent, please contact goc@.....

Cheers,

Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1467095123'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-28T06:25:23+00:00">Jun 28, 2016 06:25 AM UTC</time><a class="anchor" name="1467095123">&nbsp;</a></div><pre>Hi,

Has anything changed on the site side? The held jobs seem to have cleared up as of Jun 27 8 am PDT and we never capped the number of running pilots at the CEs.

Now we have 30 multicore pilots running (oddly this looks exact and never exceeds 30 maybe the site is already capping us?), and maybe about 100 single core running.

It doesn&#39;t seem like capping from the factory side is necessary anymore, Brian what do you think?

Thanks,
Jeff Dost
OSG Glidein Factory Operations

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='29110#1466805911'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-24T22:05:11+00:00">Jun 24, 2016 10:05 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1466805911">&nbsp;</a></div><pre>Let&#39;s say 20 since they haven&#39;t run more than that since the beginning
of the month. Randy, or someone else at Clemson, you should think about
removing all the held, completed, and idle jobs&#58;

condor_ce_rm &#39;jobstatus =?= 4 || jobstatus =?= 1 || jobstatus =?= 5&#39;

- Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1466790719'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-24T17:51:59+00:00">Jun 24, 2016 05:51 PM UTC</time><a class="anchor" name="1466790719">&nbsp;</a></div><pre>Brian, Randy,

What do you guys want to limit them to?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1466790611'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-24T17:50:11+00:00">Jun 24, 2016 05:50 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1466790611">&nbsp;</a></div><pre>Should we limit the number of pilots that we send to Clemson? Things
don&#39;t look healthy and we may be overloading their PBS Pro setup.</pre></div><div class='update_description'><i onclick="document.location='29110#1466781764'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-24T15:22:44+00:00">Jun 24, 2016 03:22 PM UTC</time><a class="anchor" name="1466781764">&nbsp;</a></div><pre>I have increased the OSG queue to support a maximum of 15G of memory (was previously 14G).

-Randy

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Randall Martin 3039</pre></div><div class='update_description'><i onclick="document.location='29110#1466781239'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-24T15:13:59+00:00">Jun 24, 2016 03:13 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1466781239">&nbsp;</a></div><pre>Xizhou,

Do you have a backup at Clemson that we could add to this ticket?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='29110#1466540771'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-21T20:26:11+00:00">Jun 21, 2016 08:26 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1466540771">&nbsp;</a></div><pre>Xizhou,

Unfortunately, I will be out on vacation next week. Do you have a backup
at Clemson that we could add to this ticket?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1466540592'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-21T20:23:12+00:00">Jun 21, 2016 08:23 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1466540592">&nbsp;</a></div><pre>Hi Brian,

Our cluster is pretty busy these days. We have throttled the resources available to OSG. Some OSG jobs are held because of insufficient amount of resources.

I am currently on an international travel and will be back to work next week. I will work with you to diagnose the problem further to see if there is any deep cause for the problem you just mentioned.

Thanks,

Xizhou

<font color='#7F7E6F'>&#62; On Jun 21, 2016, at 5&#58;05 AM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29110#1466456698'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-20T21:04:58+00:00">Jun 20, 2016 09:04 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1466456698">&nbsp;</a></div><pre>Xizhou,

It looks like the vast majority of jobs are being held on your CE with the following message&#58; &#60;blah&#62; execute_cmd&#58; 30 seconds timeout expired, killing child process.- &#60;blah&#62; killed by signal  15

Would you be able to take a look into why this is happening? Are we slamming your PBS Pro server too hard?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1466133256'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-17T03:14:16+00:00">Jun 17, 2016 03:14 AM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1466133256">&nbsp;</a></div><pre>We should be able to increase the maximum memory to higher to avoid this particular case. I am on an internal travel but will forward this case to our team to resolve it.

Xizhou

Sent from my iPhone

On Jun 16, 2016, at 9&#58;42 PM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='29110#1466084478'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-16T13:41:18+00:00">Jun 16, 2016 01:41 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1466084478">&nbsp;</a></div><pre>Xizhou,

Thanks for the update! In that case, how much memory should we be requesting per glidein?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1466041271'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-16T01:41:11+00:00">Jun 16, 2016 01:41 AM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1466041271">&nbsp;</a></div><pre>This could be caused by a change made by our HPC administrator at Clemson. The change on PBS server reduced the maximum memory to 14 go from 128gb I used when I did the testing.

-Xizhou

Sent from my iPhone

On Jun 16, 2016, at 3&#58;21 AM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='29110#1466018439'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-15T19:20:39+00:00">Jun 15, 2016 07:20 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1466018439">&nbsp;</a></div><pre>Hello Admins,

Does anyone have any updates on this? Or ideas as to why the jobs are matching up?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='29110#1465494635'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-09T17:50:35+00:00">Jun 9, 2016 05:50 PM UTC</time><a class="anchor" name="1465494635">&nbsp;</a></div><pre>Hi all,

From the factory view, everything at Clemson looks fine. However, it looks like the Fermilab user jobs simply aren&#39;t matching properly still, even with the multicore / more-memory glideins available now. e.g., see [1] [2].

Marty Kandes
UCSD Glidein Factory Operations

[1]

<a href='http&#58;//glidein.grid.iu.edu/factory/monitor/factoryStatus.html?entry=OSG_US_Clemson-Palmetto_condce_mcore&frontend=Fermilab-fifebatch_frontend&infoGroup=running&elements=StatusRunning' target='_blank' rel='nofollow'>http&#58;//glidein.grid.iu.edu/factory/monitor/factoryStatus.html?entry=OSG_US_Clemson-Palmetto_condce_mcore&frontend=Fermilab-fifebatch_frontend&infoGroup=running&elements=StatusRunning</a>,ClientGlideRunning,ClientGlideIdle,&rra=2&window_min=0&window_max=0&timezone=-7

[2]

<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=OSG_US_Clemson-Palmetto_condce_mcore&frontend=Fermilab-fifebatch_frontend&infoGroup=running&elements=StatusRunning' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=OSG_US_Clemson-Palmetto_condce_mcore&frontend=Fermilab-fifebatch_frontend&infoGroup=running&elements=StatusRunning</a>,ClientGlideRunning,ClientGlideIdle,&rra=0&window_min=0&window_max=0&timezone=-7

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1465221892'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-06T14:04:52+00:00">Jun 6, 2016 02:04 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1465221892">&nbsp;</a></div><pre>Hello All,

What is the latest on this ticket? Is there more testing to be done or is this resolved?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='29110#1464904091'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-02T21:48:11+00:00">Jun 2, 2016 09:48 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1464904091">&nbsp;</a></div><pre>Thank you, Ken.

Sent from my iPhone

On Jun 2, 2016, at 5&#58;46 PM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='29110#1464903952'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-02T21:45:52+00:00">Jun 2, 2016 09:45 PM UTC</time><a class="anchor" name="1464903952">&nbsp;</a></div><pre>Xizhou,

I&#39;ve reduced the +maxMemory and GLIDEIN_MaxMemMBs attributes in the glidein factory configuration to 14 GB from 20 GB as requested in your previous post.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1464822150'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-01T23:02:30+00:00">Jun 1, 2016 11:02 PM UTC</time><a class="anchor" name="1464822150">&nbsp;</a></div><pre>Our testers sent some more today, and if those are OK then I think we are done. We should know more tomorrow.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='29110#1464800051'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-01T16:54:11+00:00">Jun 1, 2016 04:54 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1464800051">&nbsp;</a></div><pre>Thanks, Ken. Yesterday, after I manually changed the memory requirement, all jobs started in less than 30 seconds. Please let me know if the jobs completed successfully. If yes, we can close this ticket.

Xizhou

On Jun 1, 2016, at 12&#58;44 PM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='29110#1464799891'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-01T16:51:31+00:00">Jun 1, 2016 04:51 PM UTC</time><a class="anchor" name="1464799891">&nbsp;</a></div><pre>Er sorry, I should have said &#34;more idle cores *per glidein* on average.&#34; However if we can then get access to additional resources with the change then we probably come out ahead.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='29110#1464799386'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-01T16:43:06+00:00">Jun 1, 2016 04:43 PM UTC</time><a class="anchor" name="1464799386">&nbsp;</a></div><pre>Hi,

I think it is OK to do that. I think we might end up with some more idle cores on average, but if the change will get us more resources overall, then it is probably better.

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='29110#1464724091'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-31T19:48:11+00:00">May 31, 2016 07:48 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1464724091">&nbsp;</a></div><pre>Hi Ken,

Can you modify the resource requirement to 8 cores/14GB memory per multicore glidein job? I just learned from our HPC admin team that the resources with 8 cores/20gb memory are not available to OSG jobs. I manually change the resource requirements for fermilab/glow multicore jobs to less than 16GB and get all queued jobs started.

Thanks,

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1464365171'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-27T16:06:11+00:00">May 27, 2016 04:06 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1464365171">&nbsp;</a></div><pre>Hi Brian and Ken,

I tried to directly submit a test multicore jobs as user “fermilab” and found that the “osg_e” queue set a max memory limit to 4gb. I increased the max mem to 128gb and was able to run a test job directly. The max memory limitation might be the cause for the process fork failures.

You may try submit several multicore jobs that requires 8 cores and 20gb memory and test if the previous memory limitation is the cause.

Thanks,

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1464360131'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-27T14:42:11+00:00">May 27, 2016 02:42 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1464360131">&nbsp;</a></div><pre>Hey,

Any updates on this?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1464209833'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-25T20:57:13+00:00">May 25, 2016 08:57 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1464209833">&nbsp;</a></div><pre>No. I haven&#39;t seen such message before. I will do some debugging and let you know what I found.

Xizhou

On May 25, 2016, at 3&#58;52 PM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='29110#1464205872'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-25T19:51:12+00:00">May 25, 2016 07:51 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1464205872">&nbsp;</a></div><pre>Xizhou,

It looks like a non-negligible number of jobs are being held with the
following reason&#58;

Attempts to submit failed&#58; fork&#58; Cannot allocate memory&#92;nfork&#58; Cannot
allocate memory&#92;nfork&#58; Cannot allocate memory&#92;nfork&#58; Cannot allocate
memory&#92;n

Have you ever seen such messages from qsub? It doesn&#39;t seem to be all
job submissions that are failing in such a manner, just some of them.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1464203352'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-25T19:09:12+00:00">May 25, 2016 07:09 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1464203352">&nbsp;</a></div><pre>Hi Brian and Ken,

During job traces similar to the following example, I notices that the multicore fermilab jobs was deleted after about six minutes by the fermilab user. Is this for testing or by design?
# tracejob -v 3893006
Job&#58; 3893006.pbs02

05/25/2016 14&#58;01&#58;07  S    Job Queued at request of fermilab@...., owner = fermilab@...., job name = bl_bf8d138983eb, queue = osg
05/25/2016 14&#58;01&#58;07  A    queue=osg
05/25/2016 14&#58;07&#58;21  S    delete job request received
05/25/2016 14&#58;07&#58;21  S    Job to be deleted at request of fermilab@....
05/25/2016 14&#58;07&#58;21  A    requestor=fermilab@....

Also, I would like to let you know that our cluster is currently still in a maintenance mode and only half of the cluster is accepting jobs. So the waiting time may be longer than usual.

Thanks,

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1464199750'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-25T18:09:10+00:00">May 25, 2016 06:09 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1464199750">&nbsp;</a></div><pre>Please ignore my previous message. The multicore jobs did run on the Palmetto cluster. I just find some fermilab jobs on our PBS Scheduler server.

I will check why those jobs were not shown in the XDMod database. One thing I have noticed is that the qstat results doesn’t show the node allocated to job and how long the job lasted. This might be related to our PBS queue configuration.

Results from “qstat -u fermilab -n -1”
Job ID                  Username Queue    Jobname   SessID NDS TSK  Req’d Memory Req’d Time  Status Elapsed Time
3892542.pbs02   fermilab osg        bl_ea5ca2a    --            1    8           20gb                 24&#58;00            F   --   --
3892544.pbs02   fermilab osg        bl_ca40c3b    --            1    8           20gb                 24&#58;00            F   --   --
3892546.pbs02   fermilab osg        bl_ec6bd90    --            1    8           20gb                24&#58;00             F   --   --
3892473.pbs02   fermilab osg_e    bl_63c5ccc  20997      1   1            2048mb          24&#58;00             F 00&#58;20 node0711/2

Thanks,

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1464198133'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-25T17:42:13+00:00">May 25, 2016 05:42 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1464198133">&nbsp;</a></div><pre>I checked the PBS job logs and could not find any fermilab job with more than 1 processors.

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1464198130'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-25T17:42:10+00:00">May 25, 2016 05:42 PM UTC</time><a class="anchor" name="1464198130">&nbsp;</a></div><pre>Hi,

The last round of tests was indeed much more stable than we&#39;ve previously seen. I&#39;ve got a request in to be a bit more aggressive with the memory requirements in the test. those jos should go out shortly I hope.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='29110#1464197410'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-25T17:30:10+00:00">May 25, 2016 05:30 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1464197410">&nbsp;</a></div><pre>Any updates today? I&#39;d like this to get into the June release and the
software freeze is next Tuesday.

Cheers,
Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1464034690'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-23T20:18:10+00:00">May 23, 2016 08:18 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1464034690">&nbsp;</a></div><pre>I forget to mention that our cluster is under maintenance mode since last Friday and will return to normal production mode in the next two or three days.

Xizhou

On May 23, 2016, at 4&#58;02 PM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='29110#1464033669'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-23T20:01:09+00:00">May 23, 2016 08:01 PM UTC</time><a class="anchor" name="1464033669">&nbsp;</a></div><pre>Hi,

Unfortunately it took quite a long time for the Fermilab test jobs to start. Apparently some are running now, so hopefully we should have some answers soon.

Best,

Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='29110#1464017231'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-23T15:27:11+00:00">May 23, 2016 03:27 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1464017231">&nbsp;</a></div><pre>Hey guys,

How&#39;s the update pbs_submit.sh working out? Are multicore jobs running
successfully at Clemson?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1463673971'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-19T16:06:11+00:00">May 19, 2016 04:06 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1463673971">&nbsp;</a></div><pre>pvmem doesn&#39;t get set at all with this latest change and pmem is only
set for singlecore jobs (to the same value as mem).

- Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1463672711'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-19T15:45:11+00:00">May 19, 2016 03:45 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1463672711">&nbsp;</a></div><pre>The vmem and pmem should be same. However, I am not sure if the vmem attributes will be passed to the PBS scripts from the OSG job or not .

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1463672533'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-19T15:42:13+00:00">May 19, 2016 03:42 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1463672533">&nbsp;</a></div><pre>Ken,

The version of pbs_submit.sh that Xizhou is running has the memory fixes
that made it into 1.18.19.bosco.

- Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1463670152'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-19T15:02:32+00:00">May 19, 2016 03:02 PM UTC</time><a class="anchor" name="1463670152">&nbsp;</a></div><pre>Hi Xizhou,

I can ask the users to test again, sure. Before I do, is the vmem limit getting set to the same value as the pmem limit? That is what was biting our users earlier when try tried to run more complicated workflows.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='29110#1463515753'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-17T20:09:13+00:00">May 17, 2016 08:09 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1463515753">&nbsp;</a></div><pre>Thank you, Brian.

The new pbs_submit.sh script is deployed. Meanwhile, I have updated OSG and Condor-CE.

Hi Ken, can you verify that if the multicore jobs is working now?

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1463513589'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-17T19:33:09+00:00">May 17, 2016 07:33 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1463513589">&nbsp;</a></div><pre>There are many changes since you&#39;re on an old version of the blahp.
Here&#39;s the git commit log&#58;
<a href='https&#58;//github.com/brianhlin/BLAH/commits/sw2326_mcore_pbspro/src/scripts/pbs_submit.sh' target='_blank' rel='nofollow'>https&#58;//github.com/brianhlin/BLAH/commits/sw2326_mcore_pbspro/src/scripts/pbs_submit.sh</a>

- Brian

On 05/17/2016 02&#58;27 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29110#1463513232'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-17T19:27:12+00:00">May 17, 2016 07:27 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1463513232">&nbsp;</a></div><pre>Than you, Brian. I saw the pbs_submit_clemson.sh but cannot find your outlines for the update.

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1463511968'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-17T19:06:08+00:00">May 17, 2016 07:06 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1463511968">&nbsp;</a></div><pre>Xizhou,

I&#39;ve attached a script that should be able to handle multicore requests. I highly recommend that you update to OSG 3.3 and update your versions of HTCondor, HTCondor-CE, and the blahp as I&#39;ve outlined below.

- Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1463502250'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-17T16:24:10+00:00">May 17, 2016 04:24 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1463502250">&nbsp;</a></div><pre>Hi Brian,

The attached script is currently deployed on osg-ce.clemson.edu.

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1463500823'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-17T16:00:23+00:00">May 17, 2016 04:00 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1463500823">&nbsp;</a></div><pre>Could you e-mail me the customized version?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1463500632'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-17T15:57:12+00:00">May 17, 2016 03:57 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1463500632">&nbsp;</a></div><pre>Hi Brian,

The current version of blahp on osg-ce.clemson.edu is&#58;
blahp-1.18.16.bosco-1.osg32.el6.x86_64

You provided us a customized version of pbs_submit.sh in March. I wonder if this customized version matches blahp-1.18.16.bosco-1.osg32.el6.x86_64.

Please let me know if you need further information.

Thanks,

Xizhou
From&#58; Open Science Grid FootPrints [mailto&#58;osg@....]
Sent&#58; Tuesday, May 17, 2016 11&#58;45 AM
To&#58; Xizhou Feng
Subject&#58; Open Science Grid&#58; Increase max memory per glidein for the Fermilab VO? ISSUE=29110 PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='29110#1463499910'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-17T15:45:10+00:00">May 17, 2016 03:45 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1463499910">&nbsp;</a></div><pre>Xizhou,

Please see my earlier question. I need to know which version of the
blahp you&#39;re using because we will not be releasing a version for the
OSG release that you currently have installed.

- Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1463498121'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-17T15:15:21+00:00">May 17, 2016 03:15 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1463498121">&nbsp;</a></div><pre>We are still waiting for the new release of an OSG module to enable the support of multicore jobs on our cluster.

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1463497151'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-17T14:59:11+00:00">May 17, 2016 02:59 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1463497151">&nbsp;</a></div><pre>Hello All,

Any updates for this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='29110#1463076435'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-12T18:07:15+00:00">May 12, 2016 06:07 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1463076435">&nbsp;</a></div><pre>Xizhou,

What version of the blahp are you running (rpm -q blahp)? It looks like you guys are on an old version of the OSG release, HTCondor-CE, and HTCondor. You should update to OSG 3.3 as soon as possible&#58; <a href='https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/OSGReleaseSeries#Updating_from_OSG_3_1_or_3_2_to.' target='_blank' rel='nofollow'>https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/OSGReleaseSeries#Updating_from_OSG_3_1_or_3_2_to.</a>

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1462978991'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-11T15:03:11+00:00">May 11, 2016 03:03 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1462978991">&nbsp;</a></div><pre>Next week would be nice. I will be on a vacation in June and will not return to work until the end of June.

Xizhou
From&#58; Open Science Grid FootPrints [mailto&#58;osg@....]
Sent&#58; Wednesday, May 11, 2016 10&#58;54 AM
To&#58; Xizhou Feng
Subject&#58; Open Science Grid&#58; Increase max memory per glidein for the Fermilab VO? ISSUE=29110 PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='29110#1462978491'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-11T14:54:51+00:00">May 11, 2016 02:54 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1462978491">&nbsp;</a></div><pre>I&#39;ve made a jira ticket here targeting the June 14th release&#58; <a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2326.' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2326.</a> If the need is dire, I can have scratch builds by next week for Xizhou to test or you can wait for an official build out of osg-testing that should be available by the end of the month.</pre></div><div class='update_description'><i onclick="document.location='29110#1462929670'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-11T01:21:10+00:00">May 11, 2016 01:21 AM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1462929670">&nbsp;</a></div><pre>When you have time, can we look together at the pbs_submit.sh to see how to enable the support of multicore jobs at Clemson?

Thanks,

Xizhou

On May 10, 2016, at 2&#58;29 PM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='29110#1462904927'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T18:28:47+00:00">May 10, 2016 06:28 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1462904927">&nbsp;</a></div><pre>Hello All,

Any updates for this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='29110#1462497071'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-06T01:11:11+00:00">May 6, 2016 01:11 AM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1462497071">&nbsp;</a></div><pre>It&#39;s a typo. We should change the ncpus to the number that glidein sets.

Sent from my iPhone

On May 5, 2016, at 5&#58;54 PM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='29110#1462485098'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-05T21:51:38+00:00">May 5, 2016 09:51 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1462485098">&nbsp;</a></div><pre>Xizhou,

What is npcps? Do you have documentation on it? pbs_submit.sh currently defaults to ncpus=1, should we change that to the number of CPUs requested by the glide-in?

There is an updated blahp in osg-testing that fixes some of the PBS memory request issues that we&#39;ve had (<a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2260' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2260</a>). This may solve some of the issues you&#39;re having and you can install it via &#96;yum update blahp &#39;condor*&#39; --enablerepo=osg-testing&#96;.

- Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1462474350'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-05T18:52:30+00:00">May 5, 2016 06:52 PM UTC</time><a class="anchor" name="1462474350">&nbsp;</a></div><pre>Xizhou,

Sorry, I was writing the reply when you updated the ticket. Once you confirm the 8-core / 2.5 GB per core glideins are running with your PBS scripts, we can adjust down to the 4-core / 2 GB per core limits. Just let us know when you&#39;re ready to do so.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1462474161'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-05T18:49:21+00:00">May 5, 2016 06:49 PM UTC</time><a class="anchor" name="1462474161">&nbsp;</a></div><pre>Xizhou, Ken,

Well, let&#39;s try the 8-core / 2.5 GB per core (20 GB total) glideins. If we need to adjust downward to land them on more resources, we can do so in the future. I&#39;d only be more worried about fitting the multicore glideins on more resources if we did not have a single-core glidein entry. But since we also have single-core glideins running at Clemson, we should be okay. That is, of course, unless there really is a lot more user job demand for the multicore glideins.

Changes to multicore entry in factory configuration is complete.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1462473850'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-05T18:44:10+00:00">May 5, 2016 06:44 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1462473850">&nbsp;</a></div><pre>4-cpu 8GB (or 10GB) could make more resources available. Once you configured the glideins, we can go through each step to verify the generated PBS job scripts is correct.

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1462473287'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-05T18:34:47+00:00">May 5, 2016 06:34 PM UTC</time><a class="anchor" name="1462473287">&nbsp;</a></div><pre>From Fermilab&#39;s perspective, that we certainly be fine, as well as 4-cpu 8GB (or 10GB) glideins would be fine too, if that would give additional resources on more parts of the cluster.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='29110#1462473130'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-05T18:32:10+00:00">May 5, 2016 06:32 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1462473130">&nbsp;</a></div><pre>That will work for us. A minor issue that those jobs may be only be run on the Phase 5a, 6, and 7a nodes on the cluster. In addition, we still needs to patch the pbs_submit.sh to generate the corresponding PBS job scripts.

Phase

Count

Make

Model

CPU tpye

Cores

RAM

/local_scratch

Interconnect

Accelerator

SSD

0

5

HP

DL580

Intel Xeon 7542

24
<div id='show_86694126' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_86694126'>
505 GB

99 GB

1g, 10g, mx

0

0

0

1

HP

DL980

Intel Xeon 7560

64

2 TB

99 GB

1g, 10g, mx

0

0

1

251

Dell

PE1950

Intel Xeon E5345

8

12 GB

37 GB

1g, 10g, mx

0

0

2

248

Dell

PE1950

Intel Xeon E5410

8

12 GB

37 GB

1g, 10g, mx

0

0

3

251

Sun

X2200

AMD Opteron 2356

8

16 GB

193 GB

1g, 10g, mx

0

0

4

337

IBM

DX340

Intel Xeon E5410

8

16 GB

111 GB

1g, 10g, mx

0

0

5a

390

Sun

X6250

Intel Xeon L5420

8

32 GB

31 GB

1g, 10g, mx

0

0

5b

9

Sun

X4150

Intel Xeon E5410

8

16 GB

99 GB

1g, 10g, mx

0

0

6

70

HP

DL165

AMD Opteron 6176

24

48 GB

193 GB

1g, 10g, mx

0

0

7a

42

HP

SL230

Intel Xeon E5-2665

16

64 GB

240 GB

1g, 56g, fdr

0

0

Xizhou
From&#58; Open Science Grid FootPrints [mailto&#58;osg@....]
Sent&#58; Thursday, May 5, 2016 2&#58;21 PM
To&#58; Xizhou Feng &#60;xizhouf@....&#62;
Subject&#58; Open Science Grid&#58; Increase max memory per glidein for the Fermilab VO? ISSUE=29110 PROJ=71

[Duplicate message snipped]
</div><script type='text/javascript'>
        $('#show_86694126').click(function() {
            $('#detail_86694126').slideDown("normal");
            $('#show_86694126').hide();
            $('#hide_86694126').show();
        });
        $('#hide_86694126').click(function() {
            $('#detail_86694126').slideUp();
            $('#hide_86694126').hide();
            $('#show_86694126').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='29110#1462472489'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-05T18:21:29+00:00">May 5, 2016 06:21 PM UTC</time><a class="anchor" name="1462472489">&nbsp;</a></div><pre>Xizhou,

I think we may have attempted to set up this multicore entry with too many fancy options. I&#39;m going to reconfigure it to a more standard 8-core 2.5 GB per core glidein so we can explicitly avoid the PBS default issue again. If you&#39;d like us to different core and memory count, let me know.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1462471041'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-05T17:57:21+00:00">May 5, 2016 05:57 PM UTC</time><a class="anchor" name="1462471041">&nbsp;</a></div><pre>Hi Brian,

The number chunk should be 1. It also needs to set the &#34;npcps=&#60;N&#62;&#34; option. I don&#39;t know how the muticore version is started on the node.

Marty also mentioned the memory option, which has to be explicitly set on our cluster. Otherwise, the scheduler will allocate the default memory.  On our cluster side, the scheduler doesn&#39;t differentiate jobs started from OSG or other users.

Xizhou

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Xizhou Feng 3402</pre></div><div class='update_description'><i onclick="document.location='29110#1462462202'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-05T15:30:02+00:00">May 5, 2016 03:30 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1462462202">&nbsp;</a></div><pre>Xizhou,

What should the number of chunks reflect? The number of cores requested by a job?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1462461791'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-05T15:23:11+00:00">May 5, 2016 03:23 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1462461791">&nbsp;</a></div><pre>The problem is caused by the script “ /usr/libexec/blahp/pbs_submit.sh” deployed on osg-ce node on our cluster. On line 127, it is set the default chunk to “1” and is not changed based on the condor job description.
120 ${pbs_binpath}/qstat --version | grep PBSPro
121 is_pbs_pro=$?
122 # Begin building the select statement&#58; select=x where x is the number of &#39;chunks&#39;
123 # to request. Chunk requests should precede any resource requests (resource
124 # requests are order independent). An example from the PBS Pro manual&#58;
125 # #PBS -l  select=2&#58;ncpus=8&#58;mpiprocs=8&#58;mem=6gb&#58;interconnect=10g,walltime=16&#58;00&#58;00
126 # Only one chunk is required for OSG needs at this time.
127 pbs_select=&#34;#PBS -l select=1&#34;

Brian, can you send me an update of the script for the multicore version of OSG jobs?

Thanks,

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1462310770'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-03T21:26:10+00:00">May 3, 2016 09:26 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1462310770">&nbsp;</a></div><pre>I think the pbs_submit.sh script may need to change. I will work with Brian to diagnose with it.

Sent from my iPhone

On May 3, 2016, at 5&#58;15 PM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='29110#1462310070'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-03T21:14:30+00:00">May 3, 2016 09:14 PM UTC</time><a class="anchor" name="1462310070">&nbsp;</a></div><pre>Hi Xizhou,

I&#39;m seeing a large number of OSG&#39;s multicore glideins reporting segfault issues like we saw before with single-core glideins not too long ago [1]. However, Fermilab&#39;s multicore glideins are not having the same problem. But I suspect that is only because they are not really using the glideins they are getting. I don&#39;t see any segfault like issues with the  single-core glideins at the moment. So can you check from your side what the differences between the single-core and multicore glideins queues might be? I&#39;m wondering if we&#39;re still running into a PBS defaults issue. e.g., We aren&#39;t currently submitting an explicit memory request for these glideins, but instead trying to detect the memory available on the nodes when glideins are submitted. If this is the problem, maybe could we request a higher memory default for this multicore glidein queue so that PBS doesn&#39;t kill the glideins?

Marty Kandes
UCSD Glidein Factory Operations

[1]

tack dump for process 3734 at timestamp 1462300336 (24 frames)
/local_scratch/glide_qBs392/main/condor/lib/libcondor_utils_8_4_6.so(dprintf_dump_stack+0x12d)[0x2b3769ddaced]
/local_scratch/glide_qBs392/main/condor/lib/libcondor_utils_8_4_6.so(+0x162542)[0x2b3769df8542]
/lib64/libpthread.so.0[0x3a7000f7e0]
/local_scratch/glide_qBs392/main/condor/lib/libcondor_utils_8_4_6.so(_ZN16ProcFamilyClient13signal_familyEi21proc_family_command_tRb+0x33)[0x2b3769f51f83]
/local_scratch/glide_qBs392/main/condor/lib/libcondor_utils_8_4_6.so(_ZN15ProcFamilyProxy11kill_familyEi+0x3f)[0x2b3769e3554f]
/local_scratch/glide_qBs392/main/condor/lib/libcondor_utils_8_4_6.so(_ZN10DaemonCore11Kill_FamilyEi+0x16)[0x2b3769f20b16]
/local_scratch/glide_qBs392/main/condor/sbin/condor_master(_ZN6daemon10KillFamilyEv+0x1f)[0x40a40f]
/local_scratch/glide_qBs392/main/condor/sbin/condor_master(_ZN6daemon8HardKillEv+0x53)[0x40a483]
/local_scratch/glide_qBs392/main/condor/sbin/condor_master(_ZN7Daemons18HardKillAllDaemonsEv+0x59)[0x40bc09]
/local_scratch/glide_qBs392/main/condor/sbin/condor_master(DoCleanup+0x46)[0x4115f6]
/local_scratch/glide_qBs392/main/condor/lib/libcondor_utils_8_4_6.so(_EXCEPT_+0x11e)[0x2b3769e2995e]
/local_scratch/glide_qBs392/main/condor/lib/libcondor_utils_8_4_6.so(_ZN15ProcFamilyProxy24recover_from_procd_errorEv+0x1bb)[0x2b3769e3535b]
/local_scratch/glide_qBs392/main/condor/lib/libcondor_utils_8_4_6.so(_ZN15ProcFamilyProxy11kill_familyEi+0x30)[0x2b3769e35540]
/local_scratch/glide_qBs392/main/condor/lib/libcondor_utils_8_4_6.so(_ZN10DaemonCore11Kill_FamilyEi+0x16)[0x2b3769f20b16]
/local_scratch/glide_qBs392/main/condor/sbin/condor_master(_ZN6daemon10KillFamilyEv+0x1f)[0x40a40f]
/local_scratch/glide_qBs392/main/condor/sbin/condor_master(_ZN6daemon6ExitedEi+0x149)[0x40aa59]
/local_scratch/glide_qBs392/main/condor/sbin/condor_master(_ZN7Daemons9AllReaperEii+0x109)[0x40c569]
/local_scratch/glide_qBs392/main/condor/lib/libcondor_utils_8_4_6.so(_ZN10DaemonCore10CallReaperEiPKcii+0x195)[0x2b3769f24795]
/local_scratch/glide_qBs392/main/condor/lib/libcondor_utils_8_4_6.so(_ZN10DaemonCore17HandleProcessExitEii+0x2e9)[0x2b3769f2c8b9]
/local_scratch/glide_qBs392/main/condor/lib/libcondor_utils_8_4_6.so(_ZN10DaemonCore24HandleDC_SERVICEWAITPIDSEi+0x7e)[0x2b3769f2cabe]
/local_scratch/glide_qBs392/main/condor/lib/libcondor_utils_8_4_6.so(_ZN10DaemonCore6DriverEv+0x823)[0x2b3769f30d23]
/local_scratch/glide_qBs392/main/condor/lib/libcondor_utils_8_4_6.so(_Z7dc_mainiPPc+0x1799)[0x2b3769f48ff9]
/lib64/libc.so.6(__libc_start_main+0xfd)[0x3a6f81ed5d]
/local_scratch/glide_qBs392/main/condor/sbin/condor_master[0x4090e9]
/local_scratch/glide_qBs392/main/condor_startup.sh&#58; line 13&#58;  3734 Segmentation fault      $CONDOR_DIR/sbin/condor_master -f -pidfile $PWD/condor_master2.pid
<div id='show_1281658026' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1281658026'>/local_scratch/glide_qBs392/main/condor_startup.sh&#58; line 15&#58; /local_scratch/glide_qBs392/main/condor/sbin/condor_master&#58; No such file or directory
ls&#58; cannot access log&#58; No such file or directory
/local_scratch/glide_qBs392/main/condor_startup.sh&#58; line 1134&#58; /local_scratch/glide_qBs392/main/error_gen.sh&#58; No such file or directory

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049
</div><script type='text/javascript'>
        $('#show_1281658026').click(function() {
            $('#detail_1281658026').slideDown("normal");
            $('#show_1281658026').hide();
            $('#hide_1281658026').show();
        });
        $('#hide_1281658026').click(function() {
            $('#detail_1281658026').slideUp();
            $('#hide_1281658026').hide();
            $('#show_1281658026').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='29110#1462207780'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-02T16:49:40+00:00">May 2, 2016 04:49 PM UTC</time><a class="anchor" name="1462207780">&nbsp;</a></div><pre>Hi,

I think it is OK to clsoe this particular ticket. I&#39;ve gotten some anecdotal reports that there are still some jobs failing due to exhausting their virtual memory allocation (are you still setting the vmem and pmem limits to be the same?) in testing. We can have a separate ticket about that if you prefer since the original request in this ticket is complete.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='29110#1462194671'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-02T13:11:11+00:00">May 2, 2016 01:11 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1462194671">&nbsp;</a></div><pre>We haven’t seen issues related to this change..

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1462193745'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-02T12:55:45+00:00">May 2, 2016 12:55 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1462193745">&nbsp;</a></div><pre>Hello All,

Does anyone have an update on the status of this ticket? Are the changes that Marty made working as expected?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='29110#1461872361'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-28T19:39:21+00:00">Apr 28, 2016 07:39 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1461872361">&nbsp;</a></div><pre>Hi Ken or Xizhou

Do either of you have an update on this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='29110#1461184330'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-20T20:32:10+00:00">Apr 20, 2016 08:32 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1461184330">&nbsp;</a></div><pre>Hi, Thank you for your email. I am on vacation April 20th - April 27th and unable to respond at this time. I will review your message following my return. Please contact Margaret Votava (votava@....) for the SDCS related issues, Kevin Retzke (kretzke@....) if you have questions about Gratia, OSG Production Support ( osg-prod-support@.... ) for the OSG issues. Best regards, Tanya</pre></div><div class='update_description'><i onclick="document.location='29110#1461184174'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-20T20:29:34+00:00">Apr 20, 2016 08:29 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1461184174">&nbsp;</a></div><pre>Hi Ken or Xizhou

Do either of you have an update on this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='29110#1460658196'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-14T18:23:16+00:00">Apr 14, 2016 06:23 PM UTC</time><a class="anchor" name="1460658196">&nbsp;</a></div><pre>Ken,

I&#39;ve pushed the new multicore entry out to the GOC and SDSC production glidein factories. Can you see if these glideins are now able to support the high memory needs of the Fermilab VO?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1460605448'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-14T03:44:08+00:00">Apr 14, 2016 03:44 AM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1460605448">&nbsp;</a></div><pre>Yes. We are.

Xizhou

<font color='#7F7E6F'>&#62; On Apr 13, 2016, at 4&#58;50 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29110#1460580601'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-13T20:50:01+00:00">Apr 13, 2016 08:50 PM UTC</time><a class="anchor" name="1460580601">&nbsp;</a></div><pre>Ken,

Thanks. I can confirm I observed your jobs to run successfully on multicore glideins at Clemson.

Xizhou,

Are you ready to receive multicore glideins? May we push this new multicore entry into production?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1460500304'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-12T22:31:44+00:00">Apr 12, 2016 10:31 PM UTC</time><a class="anchor" name="1460500304">&nbsp;</a></div><pre>Done.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='29110#1460499762'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-12T22:22:42+00:00">Apr 12, 2016 10:22 PM UTC</time><a class="anchor" name="1460499762">&nbsp;</a></div><pre>Ken,

Can you submit a batch of test jobs to Clemson via the GOC-ITB factory? It looks like our own test frontend proxy has expired and I can&#39;t get the GOC-ITB factory to request new multicore glideins at Clemson.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1460139434'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-08T18:17:14+00:00">Apr 8, 2016 06:17 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1460139434">&nbsp;</a></div><pre>Hi Brian,

I just fixed the certificate issue. Can you try again and let me know the results?

Thanks,

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1460135470'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-08T17:11:10+00:00">Apr 8, 2016 05:11 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1460135470">&nbsp;</a></div><pre>It was a certificate issue. I will investigate the problem and get it fixed soon.

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1460131035'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-08T15:57:15+00:00">Apr 8, 2016 03:57 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1460131035">&nbsp;</a></div><pre>Xizhou,

I think it&#39;s because your collector&#39;s down&#58;

$ condor_q -name osg-ce.clemson.edu -pool osg-ce.clemson.edu&#58;9619
Error&#58; Couldn&#39;t contact the condor_collector on osg-ce.clemson.edu&#58;9619.

Extra Info&#58; the condor_collector is a process that runs on the central
manager of your Condor pool and collects the status of all the machines and
jobs in the Condor pool. The condor_collector might not be running, it might
be refusing to communicate with you, there might be a network problem, or
there may be some other problem. Check with your system administrator to fix
this problem.

If you are the system administrator, check that the condor_collector is
running on osg-ce.clemson.edu&#58;9619, check the ALLOW/DENY configuration in
your condor_config, and check the MasterLog and CollectorLog files in your
log directory for possible clues as to why the condor_collector is not
responding. Also see the Troubleshooting section of the manual.

Could you run &#96;service condor-ce restart&#96; on the CE? I&#39;d also like to see the contents of /var/log/condor-ce to see why it was brought down.

- Brian</pre></div><div class='update_description'><i onclick="document.location='29110#1460077149'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-08T00:59:09+00:00">Apr 8, 2016 12:59 AM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1460077149">&nbsp;</a></div><pre>I think the problem may be related to the pbs_submit scripts.

Sent from my iPhone

On Apr 7, 2016, at 6&#58;48 PM, Open Science Grid FootPrints &#60;osg@....&#60;mailto&#58;osg@....&#62;&#62; wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='29110#1460069236'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-07T22:47:16+00:00">Apr 7, 2016 10:47 PM UTC</time><a class="anchor" name="1460069236">&nbsp;</a></div><pre>Xizhou,

I&#39;ve created a new entry on the GOC-ITB factory for testing multicore glideins. However, I noticed the production single-core glideins are waiting at the factory, which indicates they cannot be submitted to the HTCondor-CE for some reason. Are you ready for us to begin testing multicore glideins?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1459974280'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-06T20:24:40+00:00">Apr 6, 2016 08:24 PM UTC</time><a class="anchor" name="1459974280">&nbsp;</a></div><pre>Ken et al.,

We should have some time tomorrow to set this up and begin testing.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1459885236'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-05T19:40:36+00:00">Apr 5, 2016 07:40 PM UTC</time><a class="anchor" name="1459885236">&nbsp;</a></div><pre>Hi,

In terms of just getting something working quickly I think it is all right if it has to be a shared queue right now. The users in question can&#39;t run some of these high-memory workflows at Clemson at all at the moment, so getting something going quickly is at a premium, even if it takes longer on average to get started.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='29110#1459879569'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-05T18:06:09+00:00">Apr 5, 2016 06:06 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1459879569">&nbsp;</a></div><pre>Right now, all OSG jobs share a single osg queue. As all OSG jobs landed on Clemson are single core jobs, this has been not a problem. I agree this configuration may be an issue for multicore jobs.

I think it is a good idea to start a multicore jobs at the first stage. In the near future, we can plan to add a separate queue to optimize the startup time for multicore jobs.

Xizhou
From&#58; Open Science Grid FootPrints [mailto&#58;osg@....]
Sent&#58; Tuesday, April 5, 2016 1&#58;49 PM
To&#58; Xizhou Feng &#60;xizhouf@....&#62;
Subject&#58; Open Science Grid&#58; Increase max memory per glidein for the Fermilab VO? ISSUE=29110 PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='29110#1459878543'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-05T17:49:03+00:00">Apr 5, 2016 05:49 PM UTC</time><a class="anchor" name="1459878543">&nbsp;</a></div><pre>Xizhou,

On Ken&#39;s concern of glidein startup time&#58; How will you schedule the resources we&#39;ll be using? Will the nodes be a shared queue where the multicore glideins will compete against single-core user jobs? Or can we aim the multicore glideins at at queue that schedules all user jobs (and glideins) by whole nodes to begin with? I believe Ken is worried about long startup times when the multicore glideins compete against single-core jobs in the shared queue scenario.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29110#1459875567'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-05T16:59:27+00:00">Apr 5, 2016 04:59 PM UTC</time><a class="anchor" name="1459875567">&nbsp;</a></div><pre>Also I should mention that in our frontend we have a global setting for partitionable slots, so if we got whole nodes we could indeed just partition them however we needed.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='29110#1459873981'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-05T16:33:01+00:00">Apr 5, 2016 04:33 PM UTC</time><a class="anchor" name="1459873981">&nbsp;</a></div><pre>Hi everyone,

Whole node requests seem entirely reasonable to me. Even the smallest nodes would still allow essentially all of the Fermilab workflows to run. My only concern is that it doesn&#39;t take *too* long to get glideins started up (of course it&#39;s on the Fermilab experiments to keep the queues full too.) As long as we can expect to get things going within 24 hours most of the time (never a guarantee of course), I think this sounds like a good solution.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='29110#1459830429'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-05T04:27:09+00:00">Apr 5, 2016 04:27 AM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1459830429">&nbsp;</a></div><pre>Hi Jeff,

I pasted the configuration of the Palmetto cluster in Clemson at the end of this message. You can also find the information on Palmetto User Guide at <a href='http&#58;//citi.clemson.edu/palmetto/pages/userguide.html#submitting.' target='_blank' rel='nofollow'>http&#58;//citi.clemson.edu/palmetto/pages/userguide.html#submitting.</a> The OSG jobs are more likely to be allocated to phase 1-6 nodes. A job can either use a queue or resource specification strings to match nodes that belong to a certain phase.

Please let me know if you need further information.

Thanks,

Xizhou

PHASE COUNT MAKE   MODEL    CHIP(0)                CORES  RAM(1)    /local_scratch   Interconnect         FLOP  GPUs  PHIs SSD
1    247    Dell   PE1950   Intel Xeon    E5345       8    12 GB       37 GB         1g, 10g, mx           4     0     0    0
2    245    Dell   PE1950   Intel Xeon    E5410       8    12 GB       37 GB         1g, 10g, mx           4     0     0    0
3    247    Sun    X2200    AMD   Opteron 2356        8    16 GB      193 GB         1g, 10g, mx           4     0     0    0
4    332    IBM    DX340    Intel Xeon    E5410       8    16 GB      111 GB         1g, 10g, mx           4     0     0    0
5a   383    Sun    X6250    Intel Xeon    L5420       8    32 GB       31 GB         1g, 10g, mx           4     0     0    0
5b     9    Sun    X4150    Intel Xeon    E5410       8    16 GB       99 GB         1g, 10g, mx           4     0     0    0

6     69    HP     DL165    AMD   Opteron 6176       24    48 GB      193 GB         1g, 10g, mx           4     0     0    0

7a    42    HP     SL230    Intel Xeon    E5-2665    16    64 GB      240 GB         1g, 56g, fdr          8     0     0    0

7b    12    HP     SL250s   Intel Xeon    E5-2665    16    64 GB      240 GB         1g, 56g, fdr          8     2(3)  0    0

8a    96    HP     SL250s   Intel Xeon    E5-2665    16    64 GB      900 GB         1g, 56g, fdr          8     2(4)  0    300 GB(7)

8b    32    HP     SL250s   Intel Xeon    E5-2665    16    64 GB      420 GB         1g, 56g, fdr          8     2(4)  0    0

8c    68    Dell   PEC6220  Intel Xeon    E5-2665    16    64 GB      350 GB         1g, 40g, qdr, 10ge    8     0     0    0

8d     7    Dell   PER720   Intel Xeon    E5-2665    16    64 GB      350 GB         1g, 40g, qdr, 10ge    8     2(5)  0    0

9     72    HP     SL250s   Intel Xeon    E5-2665    16   128 GB      420 GB         1g, 56g, fdr, 10ge    8     2(4)  0    0

10     80    HP     SL250s   Intel Xeon    E5-2670v2  20   128 GB      800 GB         1g, 56g, fdr, 10ge    8     2(4)  0    0
<div id='show_1224717747' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1224717747'>
11a    40    HP     SL250s   Intel Xeon    E5-2670v2  20   128 GB      800 GB         1g, 56g, fdr, 10ge    8     2(6)  0    0

11b     4    HP     SL250s   Intel Xeon    E5-2670v2  20   128 GB      800 GB         1g, 56g, fdr, 10ge    8     0     2(8) 0

12     30    Lenovo NX360M5  Intel Xeon    E5-2680v3  24   128 GB      800 GB         1g, 56g, fdr, 10ge   16     2     0    0
</div><script type='text/javascript'>
        $('#show_1224717747').click(function() {
            $('#detail_1224717747').slideDown("normal");
            $('#show_1224717747').hide();
            $('#hide_1224717747').show();
        });
        $('#hide_1224717747').click(function() {
            $('#detail_1224717747').slideUp();
            $('#hide_1224717747').hide();
            $('#show_1224717747').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='29110#1459829254'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-05T04:07:34+00:00">Apr 5, 2016 04:07 AM UTC</time><a class="anchor" name="1459829254">&nbsp;</a></div><pre>Hi Ken, Xizhou,

We haven&#39;t yet made this change, and I want to discuss a bit more to come up with the best solution before jumping in on the factory side.

The entry we have is currently shared by Fermilab and 3 other VOs.  I want to customize it it in a way that will maximize all usage for all.

I like Xizhou&#39;s suggestion of whole node requests.  We can configure the glidein to autodetect the number of cores and memory.  That way we don&#39;t have to worry about fragmentation issues of the underlying nodes.  This seems to have worked well for  the Hyak site.

Ken, how does that sound?

And a quick question for Xizhou, what are the core counts like on your nodes?

Thanks,
Jeff Dost
OSG Glidein Factory Operations

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='29110#1459794289'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-04T18:24:49+00:00">Apr 4, 2016 06:24 PM UTC</time><a class="anchor" name="1459794289">&nbsp;</a></div><pre>Hi, did this change make it to the factory yet? I wanted to be sure it was in before I have some users test it. Thanks, Ken

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='29110#1459369387'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-30T20:23:07+00:00">Mar 30, 2016 08:23 PM UTC</time><a class="anchor" name="1459369387">&nbsp;</a></div><pre>Great! Can we go ahead and make this change in the factory then? I&#39;ve added them to the CC list now.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='29110#1459356790'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-30T16:53:10+00:00">Mar 30, 2016 04:53 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1459356790">&nbsp;</a></div><pre>It works for us.

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1459356464'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-30T16:47:44+00:00">Mar 30, 2016 04:47 PM UTC</time><a class="anchor" name="1459356464">&nbsp;</a></div><pre>Hi,

I&#39;ve added Brian to the ticket as well.

I&#39;ve spoken with users on multiple experiments and the reason I suggested 8 GB was that we do have users who would like to run some workflows that require more than 4 GB of memory, some over 7 in fact. So if we could do say 4-cpu 8000MB glideins, our frontend is set up to make them partitionable, so we can run multiple jobs inside of them. If there were no high-memory jobs in the queue we could run say four 2-GB jobs, or two 4-GB jobs, or one 4-GB and 2 2-GB jobs for example, or anything else that could fit in 8 GB. Does that sound all right to everyone?

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='29110#1459353197'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-30T15:53:17+00:00">Mar 30, 2016 03:53 PM UTC</time> by <b>xizhouf@....</b><a class="anchor" name="1459353197">&nbsp;</a></div><pre>Hi Ken,

As we don’t explicitly limit the memory for OSG jobs, you can raise GLIDEIN_MaxMemMBs to any value that is appropriate for Fermilab VO jobs.

However, there are two disadvantages for using an unnecessary large value. First, it may increase the waiting time for Fermilab jobs to be started by PBS since PBS has to reserve the nodes with the resources. Second, some of the nodes on the Palmetto cluster have 12, 16, or 32GB memory. Using 8Gb for a serial job may be inefficient if that job only uses a faction of  the 8GB  memory and such request prevents other jobs from being scheduled to run on the same node.

My suggestion is that you may increase GLIDEIN_MaxMemMBs to 3 or 4GB at this time. You can profile the memory usage of the Fermilab jobs and adjust the value based on the results. If your factory can dynamically set the GLIDEIN_MaxMemMBs to match the Fermilab jobs, that would be even better.

Alternatively, you may consider running Fermilab jobs in parallel by requesting an entire node and starting multiple jobs or a parallel job using the pilot. The pbs_submit scripts on the OSG CE node may need to be changed. We can work with Brian on that part.

Thanks,

Xizhou</pre></div><div class='update_description'><i onclick="document.location='29110#1459279246'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-29T19:20:46+00:00">Mar 29, 2016 07:20 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459279246">&nbsp;</a></div><pre>Hi,

I think some of the issues we are seeing with Fermilab VO jobs may stem from the GlideinWMS configuration. There is an attribute set in the factory called GLIDEIN_MaxMemMBs and it is set to 2048 for all Fermilab VO jobs. As I understand it this has to be raised in order for Fermilab VO glideins to be able to request additional memory. If you agree, we&#39;d like to raise that to 8192 MB. Of course we understand that it might result in fewer jobs running simultaneously, but that is acceptable as it would give us additional flexibility to run different types of jobs We could also have a separate entry set up for just the Fermilab VO with a higher GLIDEIN_MaxMemMBs value if you wanted to keep the main one the same.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F29110">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 29110});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
