<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[29760] Florida T2 WLCG Accounting</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=29760" method="post">
<div class="page-header">
    <h3><span class="muted">29760</span> / Florida T2 WLCG Accounting</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Kevin Lannon</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">UFlorida-CMS</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Kevin Lannon</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">fGOC</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"><p><a target='_blank' href='28852.html'><b>28852</b> OSG site metrics report for UFlorida-CMS et al. for month 2016-02-01 to 2016-02-29</a></p></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">remove timestamp file and re-run probe</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-08-18</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">fGOC <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Carl Edquist <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/29760", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/29760?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/29760?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Florida%20T2%20WLCG%20Accounting%20ISSUE%3D29760%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='29760#1471374937'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-16T19:15:37+00:00">Aug 16, 2016 07:15 PM UTC</time> by <b>echism</b><a class="anchor" name="1471374937">&nbsp;</a></div><pre>Thanks, Bockjoo!</pre></div><div class='update_description'><i onclick="document.location='29760#1471374671'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-16T19:11:11+00:00">Aug 16, 2016 07:11 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1471374671">&nbsp;</a></div><pre>No. Recent WLG is fine.
This is fine as it is.
You may close this one.
Thanks,
Bockjoo
On 8/16/16 2&#58;51 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29760#1471373498'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-16T18:51:38+00:00">Aug 16, 2016 06:51 PM UTC</time> by <b>echism</b><a class="anchor" name="1471373498">&nbsp;</a></div><pre>Hey Bockjoo,

Somehow it seems like you were removed from this ticket. Can you revisit this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='29760#1471024319'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-12T17:51:59+00:00">Aug 12, 2016 05:51 PM UTC</time> by <b>echism</b><a class="anchor" name="1471024319">&nbsp;</a></div><pre>Bockjoo,

Have you had a chance to look at this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='29760#1470689954'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-08T20:59:14+00:00">Aug 8, 2016 08:59 PM UTC</time> by <b>echism</b><a class="anchor" name="1470689954">&nbsp;</a></div><pre>Bockjoo,

Have you had a chance to look at this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='29760#1470170292'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-02T20:38:12+00:00">Aug 2, 2016 08:38 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1470170292">&nbsp;</a></div><pre>Hi, Thank you for your email.  I am traveling August 1st - August 8nd and unable to respond at this time. I will review your message following my return. Please contact Margaret Votava (votava@....) for the SDCS related issues, Kevin Retzke (kretzke@....) if you have questions about Gratia, OSG Production Support ( osg-prod-support@.... ) for the OSG issues. Best regards, Tanya</pre></div><div class='update_description'><i onclick="document.location='29760#1470170224'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-02T20:37:04+00:00">Aug 2, 2016 08:37 PM UTC</time> by <b>echism</b><a class="anchor" name="1470170224">&nbsp;</a></div><pre>Hey Bockjoo,

Can you revisit this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='29760#1469543173'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-26T14:26:13+00:00">Jul 26, 2016 02:26 PM UTC</time> by <b>Ken Bloom</b><a class="anchor" name="1469543173">&nbsp;</a></div><pre>I am on vacation until Monday, August 1.  I will be reading my mail, but I&#39;m only going to be handling urgent issues.  (Issues related to ICHEP are considered urgent.)  Thanks for your patience, best wishes.

Ken Bloom</pre></div><div class='update_description'><i onclick="document.location='29760#1469543128'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-26T14:25:28+00:00">Jul 26, 2016 02:25 PM UTC</time> by <b>echism</b><a class="anchor" name="1469543128">&nbsp;</a></div><pre>Hey Bockjoo,

I&#39;m checking in. Where are we on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='29760#1469203142'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-22T15:59:02+00:00">Jul 22, 2016 03:59 PM UTC</time> by <b>echism</b><a class="anchor" name="1469203142">&nbsp;</a></div><pre>Bockjoo,

Did you see that last bit?

Thank you</pre></div><div class='update_description'><i onclick="document.location='29760#1468880648'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-18T22:24:08+00:00">Jul 18, 2016 10:24 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1468880648">&nbsp;</a></div><pre>Hi Bockjoo,

I&#39;m very sorry for the long delay getting a solution to you on this.

The short answer (*) is it looks like you will be able to force reprocessing all available records by removing the timestamp file &#34;/var/lib/gratia/tmp/urCollectorBuffer.pbs&#34; - you can move it to a backup file with&#58;

mv /var/lib/gratia/tmp/urCollectorBuffer.pbs /var/lib/gratia/tmp/urCollectorBuffer.pbs.bak

To be safe, you can make sure that the probe is not already running; for example&#58;

ps -fC urCollector.pl
ps -fC pbs-lsf_meter.cron.sh

should not return any processes.  If you want, you can also temporarily disable the cron entry in /etc/cron.d/gratia-probe-pbs-lsf.cron before (re)moving the timestamp file, but if the above processes are not running, that&#39;s probably good enough.

The next time the probe runs it will probably take longer to complete but it should reprocess all the missing records.

(*) The slightly longer story is that the timestamp file (/var/lib/gratia/tmp/urCollectorBuffer.pbs) contains a line with a job id and an epoch-second timestamp.  In theory you should be able to edit the timestamp file to go back before a prior time, but this seems like a more brittle approach and it&#39;s not clear what the negative consequences are if you don&#39;t get the job id and timestamp to match up properly.  (I communicated with Marco off-ticket about this; he pointed out the fact that it is possible also to just remove the timestamp file to get all remaining records reprocessed -- thanks Marco for the help!)  ... There is also apparently a way to invoke the probe with a start-end range, but it&#39;s confusing what the proper way to do this is, as the whole probe is a mess of several scripts/programs in different languages that call each other with different arguments, and in any case the top-level script called by cron doesn&#39;t seem to take those arguments.  Anyway the most straightforward solution seems to be just removing the timestamp file.

Let me know how it goes...!

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='29760#1468868069'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-18T18:54:29+00:00">Jul 18, 2016 06:54 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1468868069">&nbsp;</a></div><pre>Nothing to report yet, I&#39;ll keep you posted.

Carl</pre></div><div class='update_description'><i onclick="document.location='29760#1468867749'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-18T18:49:09+00:00">Jul 18, 2016 06:49 PM UTC</time> by <b>echism</b><a class="anchor" name="1468867749">&nbsp;</a></div><pre>Is there anything new on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='29760#1468244187'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-11T13:36:27+00:00">Jul 11, 2016 01:36 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1468244187">&nbsp;</a></div><pre>Sorry I don&#39;t have a fix yet; I&#39;ll keep you posted.

(Though if anyone has an example of this being done before (resetting the timestamp for the pbs-lsf probe) that would be useful too.)

Carl</pre></div><div class='update_description'><i onclick="document.location='29760#1467997332'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-08T17:02:12+00:00">Jul 8, 2016 05:02 PM UTC</time> by <b>klannon@....</b><a class="anchor" name="1467997332">&nbsp;</a></div><pre>I am away from the office and will have limit internet access.  If your message requires a response, I will try to  respond to it as soon as I can.  I will be back in the office on July 18.</pre></div><div class='update_description'><i onclick="document.location='29760#1467739571'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-05T17:26:11+00:00">Jul 5, 2016 05:26 PM UTC</time> by <b>jletts@....</b><a class="anchor" name="1467739571">&nbsp;</a></div><pre>This is an automated reply.

I am out of the office until July 11, 2016 and may not be able to reply to you immediately.

JAMES LETTS</pre></div><div class='update_description'><i onclick="document.location='29760#1467739469'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-05T17:24:29+00:00">Jul 5, 2016 05:24 PM UTC</time><a class="anchor" name="1467739469">&nbsp;</a></div><pre>Cool,

Carl, please update the ticket when you have an update.

Edgar

OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='29760#1467294549'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-30T13:49:09+00:00">Jun 30, 2016 01:49 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1467294549">&nbsp;</a></div><pre>Sorry for the delay here -- working on it and I hope to have an update soon.

Carl</pre></div><div class='update_description'><i onclick="document.location='29760#1467220753'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-29T17:19:13+00:00">Jun 29, 2016 05:19 PM UTC</time> by <b>echism</b><a class="anchor" name="1467220753">&nbsp;</a></div><pre>Hi Carl,

Any updates?

Thank you</pre></div><div class='update_description'><i onclick="document.location='29760#1466776501'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-24T13:55:01+00:00">Jun 24, 2016 01:55 PM UTC</time> by <b>echism</b><a class="anchor" name="1466776501">&nbsp;</a></div><pre>Hi Carl,

Any updates?

Thank you</pre></div><div class='update_description'><i onclick="document.location='29760#1466094341'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-16T16:25:41+00:00">Jun 16, 2016 04:25 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1466094341">&nbsp;</a></div><pre>I&#39;ve spent some time digging around in the pbs-lsf probe code this week looking into the timestamp thing -- sorry I don&#39;t have an answer yet; hopefully soon.

Carl</pre></div><div class='update_description'><i onclick="document.location='29760#1466093880'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-16T16:18:00+00:00">Jun 16, 2016 04:18 PM UTC</time> by <b>echism</b><a class="anchor" name="1466093880">&nbsp;</a></div><pre>Hi Carl,

Any updates?

Thank you</pre></div><div class='update_description'><i onclick="document.location='29760#1465832248'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-13T15:37:28+00:00">Jun 13, 2016 03:37 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1465832248">&nbsp;</a></div><pre>Hey Carl,

Have you had a chance to take a look at the probe code?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='29760#1465507712'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-09T21:28:32+00:00">Jun 9, 2016 09:28 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1465507712">&nbsp;</a></div><pre>Sorry for the delay on this... I talked with Tanya about it -- I need to investigate the probe code to see how to manually reset the &#34;timestamp&#34; to back before the data we need to re-send.  Then, once we do that, SuppressNoDNRecords should be set to &#34;1&#34; (if it isn&#39;t still set to that), and the probe should be manually re-run.  This should pick up all the records that were missed and should not create any duplicates.

Carl</pre></div><div class='update_description'><i onclick="document.location='29760#1465484653'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-09T15:04:13+00:00">Jun 9, 2016 03:04 PM UTC</time> by <b>echism</b><a class="anchor" name="1465484653">&nbsp;</a></div><pre>Carl,

Please revisit this.</pre></div><div class='update_description'><i onclick="document.location='29760#1465224637'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-06T14:50:37+00:00">Jun 6, 2016 02:50 PM UTC</time> by <b>echism</b><a class="anchor" name="1465224637">&nbsp;</a></div><pre>Carl,

Please revisit this.</pre></div><div class='update_description'><i onclick="document.location='29760#1464877484'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-02T14:24:44+00:00">Jun 2, 2016 02:24 PM UTC</time><a class="anchor" name="1464877484">&nbsp;</a></div><pre>Carl, can you please follow up? Tanya is currently away.

thanks,
Bo

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='29760#1464876885'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-06-02T14:14:45+00:00">Jun 2, 2016 02:14 PM UTC</time> by <b>echism</b><a class="anchor" name="1464876885">&nbsp;</a></div><pre>Is there anything new on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='29760#1464709182'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-31T15:39:42+00:00">May 31, 2016 03:39 PM UTC</time> by <b>echism</b><a class="anchor" name="1464709182">&nbsp;</a></div><pre>Is there anything new on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='29760#1464116049'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-24T18:54:09+00:00">May 24, 2016 06:54 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1464116049">&nbsp;</a></div><pre>I didn&#39;t realize it was a question directed to me.

Yes, I would like the records with the ce_info to be added manually.

Thanks,

Bockjoo</pre></div><div class='update_description'><i onclick="document.location='29760#1464114546'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-24T18:29:06+00:00">May 24, 2016 06:29 PM UTC</time><a class="anchor" name="1464114546">&nbsp;</a></div><pre>Bockjoo (and Paul),

We need your feedback on Tanya&#39;s last question.

Thanks,
Bo

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='29760#1463587684'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-18T16:08:04+00:00">May 18, 2016 04:08 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1463587684">&nbsp;</a></div><pre>We have to understand if we want just to add records that have ce_info present or we need to have &#34;all&#34; records (with and without ce_info). In the latter case we need figure out how to generate duplicates</pre></div><div class='update_description'><i onclick="document.location='29760#1463587415'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-18T16:03:35+00:00">May 18, 2016 04:03 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1463587415">&nbsp;</a></div><pre>Adding Marco to take a peek also.</pre></div><div class='update_description'><i onclick="document.location='29760#1463428991'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-16T20:03:11+00:00">May 16, 2016 08:03 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1463428991">&nbsp;</a></div><pre>OK. Sounds good!

By the way, we are fully migrated to the SLURM.

I just was able to establish the gratia reporting from the SLURM DB.

I am checking the job accounting page from time to time to check if the jobs are reported correctly.

Thanks,

Bockjoo</pre></div><div class='update_description'><i onclick="document.location='29760#1463428202'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-16T19:50:02+00:00">May 16, 2016 07:50 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1463428202">&nbsp;</a></div><pre>I brought this up on the software team call this morning with Brian B.  He also recommended leaving SuppressNoDNRecords set to &#34;0&#34; and the second probe disabled -- in part this had to do with the new slurm probe coming out.  (Brian please comment if I&#39;m missing any key points.)

However we need to manually submit any records that didn&#39;t make it into the gratia db.  Admittedly I&#39;m not sure what all this involves.

Tanya, can you help point me in the right direction?  What other data/logs do we need?  How do we proceed with manually submitting these records?

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='29760#1463174306'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-13T21:18:26+00:00">May 13, 2016 09:18 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1463174306">&nbsp;</a></div><pre>this is what in gratia&#58;
+---------------------+---------------------+---------------------+---------------------------------------+--------------------------------------+------------------+
| StartTime           | EndTime             | LocalJobID          | CommonName                            | VOName                               | ReportableVOName |
+---------------------+---------------------+---------------------+---------------------------------------+--------------------------------------+------------------+
| 2016-04-12 11&#58;30&#58;49 | 2016-04-12 11&#58;30&#58;55 | 19815106.moab.ufhpc | /CN=sciaba/CN=430796/CN=Andrea Sciaba | /cms/Role=production/Capability=NULL | cms              |
| 2016-04-10 16&#58;00&#58;18 | 2016-04-12 11&#58;43&#58;43 | 19787664.moab.ufhpc | /CN=cmspilot02/vocms080.cern.ch       | /cms/Role=pilot/Capability=NULL      | cms              |
| 2016-04-10 16&#58;00&#58;36 | 2016-04-12 11&#58;44&#58;31 | 19787522.moab.ufhpc | /CN=cmspilot02/vocms080.cern.ch       | /cms/Role=pilot/Capability=NULL      | cms              |
| 2016-04-10 17&#58;43&#58;15 | 2016-04-12 11&#58;50&#58;59 | 19796398.moab.ufhpc | /CN=cmspilot02/vocms080.cern.ch       | /cms/Role=pilot/Capability=NULL      | cms              |
| 2016-04-12 11&#58;49&#58;27 | 2016-04-12 11&#58;51&#58;02 | 19815127.moab.ufhpc | /CN=sciaba/CN=430796/CN=Andrea Sciaba | /cms/Role=lcgadmin/Capability=NULL   | cms              |
| 2016-04-10 17&#58;55&#58;38 | 2016-04-12 12&#58;04&#58;25 | 19796537.moab.ufhpc | /CN=cmspilot02/vocms080.cern.ch       | /cms/Role=pilot/Capability=NULL      | cms              |
| 2016-04-10 17&#58;53&#58;53 | 2016-04-12 12&#58;04&#58;49 | 19796536.moab.ufhpc | /CN=cmspilot02/vocms080.cern.ch       | /cms/Role=pilot/Capability=NULL      | cms              |
+---------------------+---------------------+---------------------+---------------------------------------+--------------------------------------+------------------+

(VOName --- FQAN)</pre></div><div class='update_description'><i onclick="document.location='29760#1463173696'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-13T21:08:16+00:00">May 13, 2016 09:08 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1463173696">&nbsp;</a></div><pre>I guess - I&#39;m not sure how to interpret it.  In case it matters, taking 2016-04-12 as an example, the breakdown of counts of the gratia_certinfo files by the FQAN string that I see is&#58;

8	  &#60;FQAN&#62;/cms/Role=production/Capability=NULL&#60;/FQAN&#62;
20	  &#60;FQAN&#62;/cms/Role=NULL/Capability=NULL&#60;/FQAN&#62;
30	  &#60;FQAN&#62;/cms/Role=lcgadmin/Capability=NULL&#60;/FQAN&#62;
221	  &#60;FQAN&#62;/cms/Role=pilot/Capability=NULL&#60;/FQAN&#62;</pre></div><div class='update_description'><i onclick="document.location='29760#1463166339'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-13T19:05:39+00:00">May 13, 2016 07:05 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1463166339">&nbsp;</a></div><pre>so for 2016-04-12 gratia got 7 records while 279 were discarded?</pre></div><div class='update_description'><i onclick="document.location='29760#1463166185'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-13T19:03:05+00:00">May 13, 2016 07:03 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1463166185">&nbsp;</a></div><pre>I put just pbs&#58;osg.rc.ufl.edu in the table below (my mistake!) , this is cms.rc numbers&#58;
+---------------------+------+
| EndTime             | Jobs |
+---------------------+------+
| 2016-04-01 00&#58;00&#58;00 |   38 |
| 2016-04-02 00&#58;00&#58;00 |    7 |
| 2016-04-03 00&#58;00&#58;00 |    7 |
| 2016-04-04 00&#58;00&#58;00 |   16 |
| 2016-04-05 00&#58;00&#58;00 |   29 |
| 2016-04-06 00&#58;00&#58;00 |   51 |
| 2016-04-07 00&#58;00&#58;00 |    1 |
| 2016-04-08 00&#58;00&#58;00 |    9 |
| 2016-04-09 00&#58;00&#58;00 |    1 |
| 2016-04-11 00&#58;00&#58;00 |    8 |
| 2016-04-12 00&#58;00&#58;00 |    7 |
| 2016-04-14 00&#58;00&#58;00 |    3 |
| 2016-04-16 00&#58;00&#58;00 |   57 |
| 2016-04-17 00&#58;00&#58;00 |    8 |
| 2016-04-18 00&#58;00&#58;00 |   21 |
| 2016-04-19 00&#58;00&#58;00 |   11 |
| 2016-04-20 00&#58;00&#58;00 |  102 |
| 2016-04-21 00&#58;00&#58;00 |    1 |
| 2016-04-22 00&#58;00&#58;00 |   75 |
| 2016-04-23 00&#58;00&#58;00 |    1 |
| 2016-04-24 00&#58;00&#58;00 |   44 |
| 2016-04-25 00&#58;00&#58;00 |   21 |
| 2016-04-26 00&#58;00&#58;00 |    9 |
| 2016-04-28 00&#58;00&#58;00 |    6 |
| 2016-04-29 00&#58;00&#58;00 |    2 |
| 2016-04-30 00&#58;00&#58;00 |    6 |
+---------------------+------+</pre></div><div class='update_description'><i onclick="document.location='29760#1463165984'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-13T18:59:44+00:00">May 13, 2016 06:59 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1463165984">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Could you please count  # of files? What we are talking about 10? 1K? ...</font>

Actually, I see slightly different numbers than the table; I see 5.5k gratia_certinfo_batch_* files under /var/lib/gratia/data from the tarball from April (they go from Apr 11-30).  All of them have &#60;UniqID&#62;cms.rc.ufl.edu#...&#60;/UniqID&#62; (not osg.rc.ufl.edu)

[edquist@monza ~/scratch/goc/29760/lib/gratia/data]$ ls -lrt | awk &#39;$6 == &#34;Apr&#34; {print $6, $7}&#39; | uniq -c
31 Apr 11
279 Apr 12
76 Apr 13
308 Apr 14
125 Apr 15
280 Apr 16
173 Apr 17
204 Apr 18
248 Apr 19
174 Apr 20
121 Apr 21
242 Apr 22
181 Apr 23
152 Apr 24
288 Apr 25
161 Apr 26
123 Apr 27
21 Apr 28
85 Apr 29
314 Apr 30

There are also 8.6k files under /var/lib/gratia/data/quarantine/subdir.pbs_cms.rc.ufl.edu_gratia-osg-prod.opensciencegrid.org_80, all dated May 12 (yesterday).</pre></div><div class='update_description'><i onclick="document.location='29760#1463154984'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-13T15:56:24+00:00">May 13, 2016 03:56 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1463154984">&nbsp;</a></div><pre>These are numbers we had in Gratia for both probes in April per day&#58;
+---------------------+------+
| EndTime             | Jobs |
+---------------------+------+
| 2016-04-01 00&#58;00&#58;00 |  213 |
| 2016-04-02 00&#58;00&#58;00 |  107 |
| 2016-04-03 00&#58;00&#58;00 |  715 |
| 2016-04-04 00&#58;00&#58;00 | 1450 |
| 2016-04-05 00&#58;00&#58;00 | 5274 |
| 2016-04-06 00&#58;00&#58;00 | 6666 |
| 2016-04-07 00&#58;00&#58;00 |   34 |
| 2016-04-08 00&#58;00&#58;00 |  440 |
| 2016-04-09 00&#58;00&#58;00 |   70 |
| 2016-04-10 00&#58;00&#58;00 |  224 |
| 2016-04-11 00&#58;00&#58;00 |   56 |
| 2016-04-12 00&#58;00&#58;00 |  189 |
| 2016-04-14 00&#58;00&#58;00 |  281 |
| 2016-04-15 00&#58;00&#58;00 |    7 |
| 2016-04-16 00&#58;00&#58;00 |   20 |
| 2016-04-18 00&#58;00&#58;00 |    3 |
| 2016-04-20 00&#58;00&#58;00 |   17 |
| 2016-04-21 00&#58;00&#58;00 |   56 |
| 2016-04-22 00&#58;00&#58;00 |   84 |
| 2016-04-23 00&#58;00&#58;00 |   14 |
| 2016-04-24 00&#58;00&#58;00 |   35 |
| 2016-04-25 00&#58;00&#58;00 |   13 |
| 2016-04-27 00&#58;00&#58;00 |   43 |
| 2016-04-28 00&#58;00&#58;00 |   13 |
| 2016-04-29 00&#58;00&#58;00 |    8 |
| 2016-04-30 00&#58;00&#58;00 |   25 |
+---------------------+------+

The difference is huge, and for now I don&#39;t have any explanation for that.</pre></div><div class='update_description'><i onclick="document.location='29760#1463152770'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-13T15:19:30+00:00">May 13, 2016 03:19 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1463152770">&nbsp;</a></div><pre>Sorry, didn&#39;t notice that you have provided numbers already.</pre></div><div class='update_description'><i onclick="document.location='29760#1463152150'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-13T15:09:10+00:00">May 13, 2016 03:09 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1463152150">&nbsp;</a></div><pre>Thank you for your answers. Just to make it clear&#58;

==&#62; Yes. They don&#39;t have ce_info files as these are shown as errors in the log file and I believe this is expected.

Do you want these jobs to be reported?

4. You see that there are multiple ce_info files from April on cms.rc.ufl.edu?
Do you see the similar situation on osg.rc.ufl.edu?
==&#62; Yes

Could you please count  # of files? What we are talking about 10? 1K? ...

This is April with # jobs&#58;

+--------------------+--------+------------+--------+

| ProbeName          | VOName | NJobs | Hours  |

+--------------------+--------+------------+--------+

| pbs&#58;cms.rc.ufl.edu | cms    |        541 | 110770 |

| pbs&#58;osg.rc.ufl.edu | cms    |      15206 | 200227 |

| pbs&#58;osg.rc.ufl.edu | osg    |        851 |   6545 |

+--------------------+--------+------------+--------+

how big is the difference?</pre></div><div class='update_description'><i onclick="document.location='29760#1463151432'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-13T14:57:12+00:00">May 13, 2016 02:57 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1463151432">&nbsp;</a></div><pre>Hi Tanya,

My answer is inlined&#58;

1. before 3/28 you are sending duplicate information (same info from the each probe).

==&#62; Yes

2. on 3/28 you have switched to SuppressNoDNRecords to &#34;1&#34; this caused the jobs that doesn&#39;t have ce_info files to be discarded

==&#62; Yes, the attribute was switched to 1.

But I think even jobs with the ce_info files are discarded.

3. since 3/28 until April 1st you have reported

+--------------------+--------+--------+
| ProbeName | VOName | Hours |
+--------------------+--------+--------+
| pbs&#58;cms.rc.ufl.edu | cms | 110770 |
| pbs&#58;osg.rc.ufl.edu | cms | 200227 |
| pbs&#58;osg.rc.ufl.edu | osg | 6545 |
+--------------------+--------+--------+

You are sure that this numbers are way below real resource usage.

==&#62; I can not exactly tell the typical number of &#34;Hours&#34;,

but number of jobs were slightly smaller, but not dramatically smaller.

4. You see that there are multiple ce_info files from April on cms.rc.ufl.edu?
Do you see the similar situation on osg.rc.ufl.edu?
==&#62;  Yes

5. Do you have any jobs submitted directly to pbs and thus missing ce_info file?
<div id='show_504906456' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_504906456'>
==&#62; Yes. They don&#39;t have ce_info files as these are shown as errors in the log file and I believe this is expected.

6. pbs&#58;osg.rc.ufl.edu probe has stopped reporting on 4/30.

==&#62; Yes. This is only because the probe that was disabled was not enabled.

I turned it off on 5/12 again to prevent the double counting because I switched

SuppressNoDNRecords back to 0.

Thanks,

Bockjoo
</div><script type='text/javascript'>
        $('#show_504906456').click(function() {
            $('#detail_504906456').slideDown("normal");
            $('#show_504906456').hide();
            $('#hide_504906456').show();
        });
        $('#hide_504906456').click(function() {
            $('#detail_504906456').slideUp();
            $('#hide_504906456').hide();
            $('#show_504906456').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='29760#1463149208'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-13T14:20:08+00:00">May 13, 2016 02:20 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1463149208">&nbsp;</a></div><pre>Hi Bockjoo,

Do I understand the situation correctly&#58;

you have two CEs&#58;  UFlorida-HPC(pbs&#58;osg.rc.ufl.edu) and UFlorida-CMS(pbs&#58;cms.rc.ufl.edu). The two probes are  parsing the same pbs log.

1. before 3/28 you are sending duplicate information (same info from the each probe).
2. on 3/28   you have switched to  SuppressNoDNRecords to “1” this caused the jobs that doesn&#39;t have ce_info files to be discarded
3. since 3/28 until April 1st you have reported

+--------------------+--------+--------+
| ProbeName          | VOName | Hours  |
+--------------------+--------+--------+
| pbs&#58;cms.rc.ufl.edu | cms    | 110770 |
| pbs&#58;osg.rc.ufl.edu | cms    | 200227 |
| pbs&#58;osg.rc.ufl.edu | osg    |   6545 |
+--------------------+--------+--------+

You are sure that this numbers are way below real resource usage.

4. You see that there are multiple ce_info files from April on cms.rc.ufl.edu?
Do you see the similar situation on osg.rc.ufl.edu?

5. Do you have any jobs submitted directly to pbs and thus missing ce_info file?

6.  pbs&#58;osg.rc.ufl.edu  probe has stopped reporting on 4/30.

Thanks,
Tanya</pre></div><div class='update_description'><i onclick="document.location='29760#1463084471'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-12T20:21:11+00:00">May 12, 2016 08:21 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1463084471">&nbsp;</a></div><pre>Yes, I think some data are missing too.

I created tarballs for /var/lib/gratia and /var/log/gratia on UFlorida-CMS and

put them here&#58;

<a href='http&#58;//oo.ihepa.ufl.edu&#58;8080/T2/ops/var+lib+gratia.tar.gz' target='_blank' rel='nofollow'>http&#58;//oo.ihepa.ufl.edu&#58;8080/T2/ops/var+lib+gratia.tar.gz</a>
<a href='http&#58;//oo.ihepa.ufl.edu&#58;8080/T2/ops/var+log+gratia.tar.gz' target='_blank' rel='nofollow'>http&#58;//oo.ihepa.ufl.edu&#58;8080/T2/ops/var+log+gratia.tar.gz</a>

And the ProbeConfig&#58;

<a href='http&#58;//oo.ihepa.ufl.edu&#58;8080/T2/ops/etc+gratia+pbs-lsf+ProbeConfig' target='_blank' rel='nofollow'>http&#58;//oo.ihepa.ufl.edu&#58;8080/T2/ops/etc+gratia+pbs-lsf+ProbeConfig</a>

After switching from

SuppressNoDNRecords=&#34;1&#34;

to

SuppressNoDNRecords=&#34;0&#34;

, I see records are visibly increasing&#58;

<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/bysite/?starttime=2016-05-10+00%3A00%3A00&endtime=2016-05-12+23%3A59%3A59&span=86400&relativetime=absolute&facility=' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/bysite/?starttime=2016-05-10+00%3A00%3A00&endtime=2016-05-12+23%3A59%3A59&span=86400&relativetime=absolute&facility=</a>^UFlorida-CMS%24&exclude-facility=&vo=&exclude-vo=&user=&exclude-dn=&#60;<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/bysite/?starttime=2016-05-10+00%3A00%3A00&endtime=2016-05-12+23%3A59%3A59&span=86400&relativetime=absolute&facility=' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/bysite/?starttime=2016-05-10+00%3A00%3A00&endtime=2016-05-12+23%3A59%3A59&span=86400&relativetime=absolute&facility=</a>^UFlorida-CMS%24&exclude-facility=&vo=&exclude-vo=&user=&exclude-dn&#62;

Since I have to migrate from PBS scheduler to SLURM, this is enough for me now.

If experts want to investigate, they can check the tarball and the ProbeConfig and

see if something is wrong or not.

Bockjoo</pre></div><div class='update_description'><i onclick="document.location='29760#1463081411'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-12T19:30:11+00:00">May 12, 2016 07:30 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1463081411">&nbsp;</a></div><pre>Hi,

We are getting records from both probes but for some reason we are not getting ALL the data. Nothing is in quarantine so I think it is reasonable to take a subset of the log with &#34;good&#34; and &#34;bad&#34; record , ce-info files, configuration (ProbeConfig) and run it locally and understand why some records are ignored.</pre></div><div class='update_description'><i onclick="document.location='29760#1463081219'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-12T19:26:59+00:00">May 12, 2016 07:26 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1463081219">&nbsp;</a></div><pre>Ok, thanks Bockjoo.

So after re-reading this a couple more times, maybe it makes sense -- at first I thought you were saying the March 28 ProbeConfig change was from SuppressNoDNRecords=&#34;1&#34; -&#62; SuppressNoDNRecords=&#34;0&#34;, but now I think I see it was the other way around.  (Which makes a little more sense...)

I&#39;m linking to <a href='28852.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/28852</a> - I think this was the other ticket for the SuppressNoDNRecords change for multiple CEs with the same logging directory...

The way that ticket wrapped up, we seemed to think it was reporting correctly; but that&#39;s exactly when the numbers dropped off.  Is it possible that the (dramatically) reduced numbers we&#39;ve seen since then are in fact the correct numbers?

Adding Derek (who was involved with #28852) and Brian B, who I think had insight into the issue before also.  If you guys could take a peek at this, any ideas would be greatly appreciated as to whether Bockjoo&#39;s SuppressNoDNRecords=&#34;1&#34; ProbeConfig change from March 28 should have caused such a dramatic drop in reported records...

Thanks..!
Carl</pre></div><div class='update_description'><i onclick="document.location='29760#1463063237'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-12T14:27:17+00:00">May 12, 2016 02:27 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1463063237">&nbsp;</a></div><pre>I suspect

SuppressNoDNRecords=&#34;1&#34;

does not work.

So, I have reconfigured the Probe with

SuppressNoDNRecords=&#34;0&#34;

on UFlorida-CMS

and turned off the Probe on UFlorida-HPC

as a temporary solution.

Bockjoo</pre></div><div class='update_description'><i onclick="document.location='29760#1463016071'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-12T01:21:11+00:00">May 12, 2016 01:21 AM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1463016071">&nbsp;</a></div><pre>Number of gratia_certinfo_batch_&#60;PBS_JOBID&#62; files from Apr 1 to Apr 15&#58;

[root@cms ~]# for d in {1..15} ; do echo -n Apr $d &#34; &#34; ; for f in $(ls -al /var/lib/gratia/data/gratia_certinfo_batch_[0-9]* | grep &#34;Apr $d&#34; | awk &#39;{print $NF}&#39;) ; do grep -q Role=pilot $f ; [ $? -eq 0 ] && echo $f ; done | wc -l ;  done
Apr 1  1438
Apr 2  1333
Apr 3  288
Apr 4  0
Apr 5  0
Apr 6  0
Apr 7  0
Apr 8  0
Apr 9  0
Apr 10  24
Apr 11  94
Apr 12  215
Apr 13  33
Apr 14  271
Apr 15  85

Your DB query is inconsistent with this.

Bockjoo</pre></div><div class='update_description'><i onclick="document.location='29760#1463015169'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-12T01:06:09+00:00">May 12, 2016 01:06 AM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1463015169">&nbsp;</a></div><pre>[root@cms ~]# ls -al  /etc/gratia/pbs-lsf/ProbeConfig
-rw-r--r-- 1 root root 2268 Mar 28 17&#58;05 /etc/gratia/pbs-lsf/ProbeConfig

It was to change

SuppressNoDNRecords=&#34;1&#34;
from

SuppressNoDNRecords=&#34;0&#34;.

This was to distinguish two CEs.

Bockjoo</pre></div><div class='update_description'><i onclick="document.location='29760#1463014560'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-12T00:56:00+00:00">May 12, 2016 12:56 AM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1463014560">&nbsp;</a></div><pre>The drop-off in the counts in gratia actually starts after 2016-03-28 -- that is, the last 3 days of March actually show significantly less for &#39;pbs&#58;cms.rc.ufl.edu&#39; than before that.  This is in the gratia db so it&#39;s before the wlcg reporting that is based on it.  So it seems like the question is what changed with your site / gratia probe configuration on March 29?

Carl

---

select date(endtime), processors, count(*) from JobUsageRecord  j,JobUsageRecord_Meta m where m.dbid=j.dbid and probename=&#39;pbs&#58;cms.rc.ufl.edu&#39;  and EndTime&#62;=&#39;2016-03-15&#39; and EndTime&#60;&#39;2016-04-15&#39; group by date(endtime), processors order by 2,1;
+---------------+------------+----------+
| date(endtime) | processors | count(*) |
+---------------+------------+----------+
| 2016-03-15    |          1 |     3692 |
| 2016-03-16    |          1 |     4655 |
| 2016-03-17    |          1 |     4617 |
| 2016-03-18    |          1 |     2539 |
| 2016-03-19    |          1 |     4706 |
| 2016-03-20    |          1 |     1862 |
| 2016-03-21    |          1 |     1382 |
| 2016-03-22    |          1 |     5419 |
| 2016-03-23    |          1 |     2299 |
| 2016-03-24    |          1 |     2945 |
| 2016-03-25    |          1 |     1919 |
| 2016-03-26    |          1 |     3702 |
| 2016-03-27    |          1 |     3410 |
| 2016-03-28    |          1 |     3219 |
| 2016-03-29    |          1 |       53 |
| 2016-03-30    |          1 |       16 |
| 2016-03-31    |          1 |      244 |
| 2016-04-01    |          1 |       38 |
| 2016-04-02    |          1 |        4 |
| 2016-04-03    |          1 |        2 |
| 2016-04-04    |          1 |       13 |
| 2016-04-05    |          1 |        1 |
| 2016-04-06    |          1 |       51 |
| 2016-04-07    |          1 |        1 |
| 2016-04-08    |          1 |        2 |
<div id='show_730041737' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_730041737'>| 2016-04-09    |          1 |        1 |
| 2016-04-11    |          1 |        1 |
| 2016-04-12    |          1 |        2 |
| 2016-04-14    |          1 |        1 |

| 2016-03-24    |          8 |       28 |
| 2016-03-25    |          8 |      455 |
| 2016-03-26    |          8 |       87 |
| 2016-03-27    |          8 |      576 |
| 2016-03-28    |          8 |      657 |
| 2016-03-29    |          8 |       35 |
| 2016-03-30    |          8 |       24 |
| 2016-04-02    |          8 |        3 |
| 2016-04-03    |          8 |        5 |
| 2016-04-04    |          8 |        3 |
| 2016-04-05    |          8 |       28 |
| 2016-04-08    |          8 |        7 |
| 2016-04-11    |          8 |        7 |
| 2016-04-12    |          8 |        5 |
| 2016-04-14    |          8 |        2 |
+---------------+------------+----------+
44 rows in set (6.62 sec)
</div><script type='text/javascript'>
        $('#show_730041737').click(function() {
            $('#detail_730041737').slideDown("normal");
            $('#show_730041737').hide();
            $('#hide_730041737').show();
        });
        $('#hide_730041737').click(function() {
            $('#detail_730041737').slideUp();
            $('#hide_730041737').hide();
            $('#show_730041737').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='29760#1462923010'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T23:30:10+00:00">May 10, 2016 11:30 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1462923010">&nbsp;</a></div><pre>I don&#39;t see any file in the quarantine area&#58;

[root@osg ~]# ls  /var/lib/gratia/data/quarantine
subdir.pbs_cms.rc.ufl.edu_gratia-osg-prod.opensciencegrid.org_80
subdir.pbs_osg.rc.ufl.edu_gratia-osg-prod.opensciencegrid.org_80
[root@osg ~]# ls  /var/lib/gratia/data/quarantine/subdir.pbs_cms.rc.ufl.edu_gratia-osg-prod.opensciencegrid.org_80
[root@osg ~]# ls  /var/lib/gratia/data/quarantine/subdir.pbs_osg.rc.ufl.edu_gratia-osg-prod.opensciencegrid.org_80

[root@cms ~]# ls  /var/lib/gratia/data/quarantine
subdir.pbs_cms.rc.ufl.edu_gratia-osg-prod.opensciencegrid.org_80
[root@cms ~]# ls  /var/lib/gratia/data/quarantine/subdir.pbs_cms.rc.ufl.edu_gratia-osg-prod.opensciencegrid.org_80

Bockjoo</pre></div><div class='update_description'><i onclick="document.location='29760#1462920861'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T22:54:21+00:00">May 10, 2016 10:54 PM UTC</time><a class="anchor" name="1462920861">&nbsp;</a></div><pre>Just to add a data point to this, all of the CMS T2 sites (not just Florida) are running 8 core jobs and none of the others exhibit such a dramatic change in reported hours.

Bo

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='29760#1462920702'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T22:51:42+00:00">May 10, 2016 10:51 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1462920702">&nbsp;</a></div><pre>I&#39;m pretty sure WallDuration does not include the Cores factor.  (It used to a long time back though.)

Carl</pre></div><div class='update_description'><i onclick="document.location='29760#1462920669'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T22:51:09+00:00">May 10, 2016 10:51 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1462920669">&nbsp;</a></div><pre>In Gratia plots (<a href='http&#58;//gratiaweb-itb.grid.iu.edu/gratia/html/facility_hours_bar_smry?starttime=2016-03-01+00%3A00%3A00&endtime=2016-05-10+23%3A59%3A59&span=86400&resource-type=%5EBatch%24&vo=.*&facility=.*Florida.*&user=.*&exclude-vo=Unknown%7Cunknown%7Cother&exclude-facility=NONE%7CGeneric%7CObsolete&exclude-user=NONE&exclude-role=NONE&includeFailed=true&includeSuccess=true&opportunistic-filter=BOTH&probe=.*&role=.*&title=Hours+Spent+on+Jobs+By+Facility' target='_blank' rel='nofollow'>http&#58;//gratiaweb-itb.grid.iu.edu/gratia/html/facility_hours_bar_smry?starttime=2016-03-01+00%3A00%3A00&endtime=2016-05-10+23%3A59%3A59&span=86400&resource-type=%5EBatch%24&vo=.*&facility=.*Florida.*&user=.*&exclude-vo=Unknown%7Cunknown%7Cother&exclude-facility=NONE%7CGeneric%7CObsolete&exclude-user=NONE&exclude-role=NONE&includeFailed=true&includeSuccess=true&opportunistic-filter=BOTH&probe=.*&role=.*&title=Hours+Spent+on+Jobs+By+Facility</a>)

it does sum( Cores*WallDuration)/3600

I assume it is doing the same thing when it generates report. Scott, could you please confirm?
I am more concerned why we are missing jobs. Do you see any data in /var/lib/gratia/data/quarantine/..?

Carl, could you please investigate the reason we are missing so many jobs? We can start with yesterday data&#58;
That is all we have got for yesterday from cms probe&#58;

mysql&#62; select GlobalJobId,LocalJobId, LocalUserId,CpuUserDuration,WallDuration,Processors,StartTime,EndTime from JobUsageRecord  j,JobUsageRecord_Meta m where m.dbid=j.dbid and probename=&#39;pbs&#58;cms.rc.ufl.edu&#39;  and EndTime&#62;=&#39;2016-05-08&#39; and EndTime&#62;=&#39;2016-05-09&#39; and Processors=1;

+-------------------------------------------+---------------------+-------------+-----------------+--------------+------------+---------------------+---------------------+

| GlobalJobId                               | LocalJobId          | LocalUserId | CpuUserDuration | WallDuration | Processors | StartTime           | EndTime             |

+-------------------------------------------+---------------------+-------------+-----------------+--------------+------------+---------------------+---------------------+

| moab.ufhpc&#58;20101182.moab.ufhpc_1462771830 | 20101182.moab.ufhpc | lcg         |              36 |           92 |          1 | 2016-05-09 05&#58;30&#58;30 | 2016-05-09 05&#58;32&#58;02 |

| moab.ufhpc&#58;20101215.moab.ufhpc_1462778649 | 20101215.moab.ufhpc | cmspilot    |               0 |           60 |          1 | 2016-05-09 07&#58;24&#58;09 | 2016-05-09 07&#58;25&#58;09 |

| moab.ufhpc&#58;20125151.moab.ufhpc_1462907534 | 20125151.moab.ufhpc | cmsprod     |               0 |           60 |          1 | 2016-05-10 19&#58;12&#58;14 | 2016-05-10 19&#58;13&#58;15 |

+-------------------------------------------+---------------------+-------------+-----------------+--------------+------------+---------------------+---------------------+

3 rows in set (7.17 sec)

mysql&#62; select GlobalJobId,LocalJobId, LocalUserId,CpuUserDuration,WallDuration,Processors,StartTime,EndTime from JobUsageRecord  j,JobUsageRecord_Meta m where m.dbid=j.dbid and probename=&#39;pbs&#58;cms.rc.ufl.edu&#39;  and EndTime&#62;=&#39;2016-05-08&#39; and EndTime&#62;=&#39;2016-05-09&#39; and Processors=8;

+-------------------------------------------+---------------------+-------------+-----------------+--------------+------------+---------------------+---------------------+

| GlobalJobId                               | LocalJobId          | LocalUserId | CpuUserDuration | WallDuration | Processors | StartTime           | EndTime             |

+-------------------------------------------+---------------------+-------------+-----------------+--------------+------------+---------------------+---------------------+
<div id='show_1295323751' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1295323751'>
| moab.ufhpc&#58;20090754.moab.ufhpc_1462621408 | 20090754.moab.ufhpc | cmspilot    |          741708 |       141845 |          8 | 2016-05-07 11&#58;43&#58;28 | 2016-05-09 03&#58;07&#58;44 |

| moab.ufhpc&#58;20090653.moab.ufhpc_1462617280 | 20090653.moab.ufhpc | cmspilot    |          785650 |       146299 |          8 | 2016-05-07 10&#58;34&#58;40 | 2016-05-09 03&#58;12&#58;59 |

| moab.ufhpc&#58;20090622.moab.ufhpc_1462615804 | 20090622.moab.ufhpc | cmspilot    |          785560 |       148094 |          8 | 2016-05-07 10&#58;10&#58;04 | 2016-05-09 03&#58;18&#58;18 |

| moab.ufhpc&#58;20090755.moab.ufhpc_1462621408 | 20090755.moab.ufhpc | cmspilot    |          723160 |       141793 |          8 | 2016-05-07 11&#58;43&#58;28 | 2016-05-09 03&#58;06&#58;42 |

| moab.ufhpc&#58;20090830.moab.ufhpc_1462623689 | 20090830.moab.ufhpc | cmspilot    |          684899 |       139853 |          8 | 2016-05-07 12&#58;21&#58;29 | 2016-05-09 03&#58;12&#58;44 |

| moab.ufhpc&#58;20091408.moab.ufhpc_1462646759 | 20091408.moab.ufhpc | cmspilot    |          806921 |       117468 |          8 | 2016-05-07 18&#58;45&#58;59 | 2016-05-09 03&#58;23&#58;47 |

| moab.ufhpc&#58;20090743.moab.ufhpc_1462620711 | 20090743.moab.ufhpc | cmspilot    |          723461 |       148131 |          8 | 2016-05-07 11&#58;31&#58;51 | 2016-05-09 04&#58;40&#58;42 |

| moab.ufhpc&#58;20090809.moab.ufhpc_1462622862 | 20090809.moab.ufhpc | cmspilot    |          616005 |       146202 |          8 | 2016-05-07 12&#58;07&#58;42 | 2016-05-09 04&#58;44&#58;23 |

| moab.ufhpc&#58;20090746.moab.ufhpc_1462620952 | 20090746.moab.ufhpc | cmspilot    |          723205 |       148093 |          8 | 2016-05-07 11&#58;35&#58;52 | 2016-05-09 04&#58;44&#58;05 |

| moab.ufhpc&#58;20090638.moab.ufhpc_1462616833 | 20090638.moab.ufhpc | cmspilot    |          775014 |       155365 |          8 | 2016-05-07 10&#58;27&#58;13 | 2016-05-09 05&#58;36&#58;38 |

| moab.ufhpc&#58;20090721.moab.ufhpc_1462619474 | 20090721.moab.ufhpc | cmspilot    |          769380 |       152361 |          8 | 2016-05-07 11&#58;11&#58;14 | 2016-05-09 05&#58;30&#58;35 |

| moab.ufhpc&#58;20090805.moab.ufhpc_1462622632 | 20090805.moab.ufhpc | cmspilot    |          871748 |       149320 |          8 | 2016-05-07 12&#58;03&#58;52 | 2016-05-09 05&#58;32&#58;33 |

| moab.ufhpc&#58;20090677.moab.ufhpc_1462619101 | 20090677.moab.ufhpc | cmspilot    |          868835 |       152878 |          8 | 2016-05-07 11&#58;05&#58;01 | 2016-05-09 05&#58;32&#58;59 |

| moab.ufhpc&#58;20094094.moab.ufhpc_1462713931 | 20094094.moab.ufhpc | cmspilot    |          389974 |        65070 |          8 | 2016-05-08 13&#58;25&#58;31 | 2016-05-09 07&#58;30&#58;02 |

| moab.ufhpc&#58;20095359.moab.ufhpc_1462738152 | 20095359.moab.ufhpc | cmspilot    |          219636 |        40863 |          8 | 2016-05-08 20&#58;09&#58;12 | 2016-05-09 07&#58;30&#58;26 |

| moab.ufhpc&#58;20090867.moab.ufhpc_1462630585 | 20090867.moab.ufhpc | cmspilot    |          733033 |       147976 |          8 | 2016-05-07 14&#58;16&#58;25 | 2016-05-09 07&#58;22&#58;42 |

| moab.ufhpc&#58;20094054.moab.ufhpc_1462712652 | 20094054.moab.ufhpc | cmspilot    |          332969 |        66353 |          8 | 2016-05-08 13&#58;04&#58;12 | 2016-05-09 07&#58;30&#58;05 |

| moab.ufhpc&#58;20090957.moab.ufhpc_1462643635 | 20090957.moab.ufhpc | cmspilot    |          627092 |       143566 |          8 | 2016-05-07 17&#58;53&#58;55 | 2016-05-09 09&#58;46&#58;41 |

| moab.ufhpc&#58;20090862.moab.ufhpc_1462629847 | 20090862.moab.ufhpc | cmspilot    |          807751 |       157690 |          8 | 2016-05-07 14&#58;04&#58;07 | 2016-05-09 09&#58;52&#58;17 |

| moab.ufhpc&#58;20099146.moab.ufhpc_1462745692 | 20099146.moab.ufhpc | cmspilot    |          905304 |       161934 |          8 | 2016-05-08 22&#58;14&#58;52 | 2016-05-10 19&#58;13&#58;46 |

+-------------------------------------------+---------------------+-------------+-----------------+--------------+------------+---------------------+---------------------+

20 rows in set (6.72 sec)
</div><script type='text/javascript'>
        $('#show_1295323751').click(function() {
            $('#detail_1295323751').slideDown("normal");
            $('#show_1295323751').hide();
            $('#hide_1295323751').show();
        });
        $('#hide_1295323751').click(function() {
            $('#detail_1295323751').slideUp();
            $('#hide_1295323751').hide();
            $('#show_1295323751').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='29760#1462920129'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T22:42:09+00:00">May 10, 2016 10:42 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1462920129">&nbsp;</a></div><pre>From April 15 to April 30 alone, I see 4154 glidein jobs with 8 cores&#58;

[coldhead@oo job_timing]$ grep ^TMPDIR= 201604*/cmspilot.txt | grep ppn=8 | cut -d&#58; -f2 | awk &#39;{print $1}&#39; | cut -d/ -f4 | cut -d. -f1 | wc -l
4154

Is the WallDuration taking the 8-core into account?

If so, how does it calculate the actual walltime.

Bockjoo</pre></div><div class='update_description'><i onclick="document.location='29760#1462919058'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T22:24:18+00:00">May 10, 2016 10:24 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1462919058">&nbsp;</a></div><pre>I don&#39;t see this one but see similar&#58;
select GlobalJobId,LocalJobId, LocalUserId,CpuUserDuration,WallDuration,Processors,StartTime,EndTime from JobUsageRecord  j,JobUsageRecord_Meta m where m.dbid=j.dbid and probename=&#39;pbs&#58;cms.rc.ufl.edu&#39; and CommonName=&#34;/CN=cmspilot02/vocms080.cern.ch&#34; and EndTime&#62;=&#39;2016-04-01&#39; and ResourceType=&#39;Batch&#39; and EndTime&#60;&#39;2016-05-01&#39; and VOName like &#39;%cms%&#39; and Processors=8 and GlobalJobId like &#39;%199891%&#39;;
+-------------------------------------------+---------------------+-------------+-----------------+--------------+------------+---------------------+---------------------+
| GlobalJobId                               | LocalJobId          | LocalUserId | CpuUserDuration | WallDuration | Processors | StartTime           | EndTime             |
+-------------------------------------------+---------------------+-------------+-----------------+--------------+------------+---------------------+---------------------+
| moab.ufhpc&#58;19989117.moab.ufhpc_1461776787 | 19989117.moab.ufhpc | cmspilot    |          772655 |       141178 |          8 | 2016-04-27 17&#58;06&#58;27 | 2016-04-29 08&#58;19&#58;25 |
| moab.ufhpc&#58;19989114.moab.ufhpc_1461776684 | 19989114.moab.ufhpc | cmspilot    |          742929 |       141083 |          8 | 2016-04-27 17&#58;04&#58;44 | 2016-04-29 08&#58;16&#58;07 |
+-------------------------------------------+---------------------+-------------+-----------------+--------------+------------+---------------------+---------------------+

Processors == # of Cores

We need to figure out why this one was not reported. I see record for 375 jobs with 8 cores during month of April</pre></div><div class='update_description'><i onclick="document.location='29760#1462917617'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T22:00:17+00:00">May 10, 2016 10:00 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1462917617">&nbsp;</a></div><pre>Here you go&#58;

[root@osg ~]# stat  /var/lib/gratia/data/gratia_certinfo_batch_19989119
File&#58; &#96;/var/lib/gratia/data/gratia_certinfo_batch_19989119&#39;
Size&#58; 318             Blocks&#58; 8          IO Block&#58; 4096   regular file
Device&#58; 803h/2051d      Inode&#58; 1455480     Links&#58; 1
Access&#58; (0600/-rw-------)  Uid&#58; (    0/    root)   Gid&#58; (    0/    root)
Access&#58; 2016-05-10 14&#58;14&#58;42.676156860 -0400
Modify&#58; 2016-04-27 07&#58;30&#58;46.141934973 -0400
Change&#58; 2016-04-27 07&#58;30&#58;46.141934973 -0400

Bockjoo</pre></div><div class='update_description'><i onclick="document.location='29760#1462917129'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T21:52:09+00:00">May 10, 2016 09:52 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1462917129">&nbsp;</a></div><pre>do you know when it was created? what is time stamp on gratia_certinfo_batch_19989119</pre></div><div class='update_description'><i onclick="document.location='29760#1462912750'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T20:39:10+00:00">May 10, 2016 08:39 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1462912750">&nbsp;</a></div><pre>added tlevshin@....</pre></div><div class='update_description'><i onclick="document.location='29760#1462910770'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T20:06:10+00:00">May 10, 2016 08:06 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1462910770">&nbsp;</a></div><pre>osg-info-services was not running. It is restarted&#58;

[root@osg ~]# service osg-info-services status
Periodic osg-info-services is disabled.
[root@osg ~]# service osg-info-services start
Enabling periodic osg-info-services&#58;                       [  OK  ]

But the concernted WLCG reporting is for the month of April.

So, the osg-info-services is not the main problem.

This

[root@osg ~]# cat /var/lib/gratia/data/gratia_certinfo_batch_19989119
&#60;?xml version=&#34;1.0&#34; ?&#62;
&#60;GratiaCertInfo&#62;
&#60;BatchManager&#62;batch&#60;/BatchManager&#62;
&#60;UniqID&#62;osg.rc.ufl.edu#1771595.0#1461756284&#60;/UniqID&#62;
&#60;LocalJobId&#62;19989119&#60;/LocalJobId&#62;
&#60;DN&#62;/DC=ch/DC=cern/OU=computers/CN=cmspilot02/vocms080.cern.ch&#60;/DN&#62;
&#60;VO&#62;cms&#60;/VO&#62;
&#60;FQAN&#62;/cms/Role=pilot/Capability=NULL&#60;/FQAN&#62;
&#60;/GratiaCertInfo&#62;

is one of the 8-core job.

Can you compare that with Gratia record?

Bockjoo</pre></div><div class='update_description'><i onclick="document.location='29760#1462909506'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T19:45:06+00:00">May 10, 2016 07:45 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1462909506">&nbsp;</a></div><pre>Hi,
You have two probes reporting&#58;
pbs&#58;osg.rc.ufl.edu  Site&#58; UFlorida-HPC   - last reported 2016-04-30 22&#58;11&#58;12  (nothing since then) . Do you understand why????
pbs&#58;cms.rc.ufl.edu   Site&#58; UFlorida-CMS   - last reported 2016-05-10 18&#58;46&#58;31

When the probe are reported, they reported both multicore (8 cores) and singlecore jobs. As Bo has mentioned the difference between March and April is huge&#58;
+--------------------+-----------+----------+
| ProbeName          | WallHours | CPUHours |
+--------------------+-----------+----------+
March
| pbs&#58;cms.rc.ufl.edu |   1337588 |  1130996 |
| pbs&#58;osg.rc.ufl.edu |    1352387 |  1143962 |
April
| pbs&#58;cms.rc.ufl.edu |     110770 |    85671 |
| pbs&#58;osg.rc.ufl.edu |      206772 |   163264 |
+--------------------+-----------+----------+

You have to figure out why you have stopped reporting. We should also try to pick up some multicore records and compare it with what you have in the logs.
Tanya</pre></div><div class='update_description'><i onclick="document.location='29760#1462904650'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T18:24:10+00:00">May 10, 2016 06:24 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1462904650">&nbsp;</a></div><pre>This is when we started migrating from single-core to multi-core.

I see the gratia reporting file

/var/lib/gratia/data/gratia_certinfo_batch_19989119

has only jobid and CE and submiter info.

How does Gratia integrate the CPU time for actual jobs within multi-core glideins?</pre></div><div class='update_description'><i onclick="document.location='29760#1462903619'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T18:06:59+00:00">May 10, 2016 06:06 PM UTC</time><a class="anchor" name="1462903619">&nbsp;</a></div><pre>And a simple gratiaweb query shows a dramatic drop in reported records around the beginning of April&#58; <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/bysite?starttime=2016-02-01+00%3A00%3A00&endtime=2016-04-30+23%3A59%3A59&span=604800&relativetime=absolute&facility=UFlorida*&exclude-facility=&vo=cms&exclude-vo=&user=&exclude-dn=' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/bysite?starttime=2016-02-01+00%3A00%3A00&endtime=2016-04-30+23%3A59%3A59&span=604800&relativetime=absolute&facility=UFlorida*&exclude-facility=&vo=cms&exclude-vo=&user=&exclude-dn=</a>

A sign of a probe problem starting around then?

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='29760#1462903439'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T18:03:59+00:00">May 10, 2016 06:03 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1462903439">&nbsp;</a></div><pre>Assigned Carl per Rob&#39;s email.</pre></div><div class='update_description'><i onclick="document.location='29760#1462903416'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-05-10T18:03:36+00:00">May 10, 2016 06:03 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1462903416">&nbsp;</a></div><pre>Hello all,

The most recent (April) WLCG accounting report shows an inconsistent
result for Florida&#39;s T2&#58;

<a href='https&#58;//espace.cern.ch/WLCG-document-repository/Accounting/Tier-2/2016/april-16/Tier2_Accounting_Report_April2016.pdf' target='_blank' rel='nofollow'>https&#58;//espace.cern.ch/WLCG-document-repository/Accounting/Tier-2/2016/april-16/Tier2_Accounting_Report_April2016.pdf</a>

I know that recently, Florida was trying to correct an over-counting of
CPU time at their site.  We were hoping that the April numbers would be
the first to reflect the fully corrected numbers, but instead, it seems
that there is now a significant under-counting.  Can the relevant
experts please look into this? Note&#58; in addition to the Florida T2 site
admins, I&#39;ve also cc&#39;ed a couple of people who have helped with WLCG
accounting issues in the past.  If there are better people for me to
have included on this message, please let me know.

Note&#58; we&#39;ve been struggling with WLCG accounting issues at Florida for
nearly a half-year.  I think part of the problem is that the turn-around
time on deploying and testing a fix is about two months.  (The reports
are put out only once every two months, and allowing time to debug and
implement fixes, we basically only get to try to fix this every other
month.  Would it be possible to get accounting numbers on a much finer
granularity (say, daily or weekly) so that this problem could be solved
more efficiently?

Sincerely,
Kevin</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F29760">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 29760});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
