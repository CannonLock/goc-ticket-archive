<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="/">
    <title>[11599] Opportunistic Resource availability for GLOW</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="//netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="https://ticket.opensciencegrid.org/images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="https://ticket.opensciencegrid.org/lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=11599" method="post">
<div class="page-header">
    <h3><span class="muted">11599</span> / Opportunistic Resource availability for GLOW</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Miron Livny</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/custom</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Miron Livny</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-03-02</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=11599", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="/11599?sort=up&"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="/11599?expandall=true&">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Opportunistic%20Resource%20availability%20for%20GLOW%20ISSUE%3D11599%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='11599#1332782132'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-26T17:15:32+00:00">Mar 26, 2012 05:15 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1332782132">&nbsp;</a></div><pre>Talked to Jeff... This should be closed.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='11599#1330124485'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-24T23:01:25+00:00">Feb 24, 2012 11:01 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1330124485">&nbsp;</a></div><pre>Are there any updates on this issue?

Please submit problems, requests, and questions at&#58;
<a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a>

Thank You,
OSG Grid Operations Center
goc@...., 317-278-9699
Visit the Open Science Grid Operations Page&#58;
<a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='11599#1329513443'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-17T21:17:23+00:00">Feb 17, 2012 09:17 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1329513443">&nbsp;</a></div><pre>Are there any updates on this issue?

Please submit problems, requests, and questions at&#58;
<a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a>

Thank You,
OSG Grid Operations Center
goc@...., 317-278-9699
Visit the Open Science Grid Operations Page&#58;
<a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='11599#1328574277'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-07T00:24:37+00:00">Feb 7, 2012 12:24 AM UTC</time><a class="anchor" name="1328574277">&nbsp;</a></div><pre>--- copy here what went in the email thread ---

OK, this frames the problem ;)

The problem was all on the factory side;
MWT2 held a large number of jobs, which triggered a protection mechanism in the factory that stopped submitting more glideins until the held jobs could be dealt with.
<a href='http&#58;//glidein-1.t2.ucsd.edu&#58;8319/glidefactory/monitor/glidein_Production_v4_2/factoryStatus.html?entry=Engage_US_MWT2_osg&frontend=total&infoGroup=other&elements=StatusHeld' target='_blank' rel='nofollow'>http&#58;//glidein-1.t2.ucsd.edu&#58;8319/glidefactory/monitor/glidein_Production_v4_2/factoryStatus.html?entry=Engage_US_MWT2_osg&frontend=total&infoGroup=other&elements=StatusHeld</a>,&rra=0&window_min=0&window_max=0&timezone=0

We can discuss if the limit we have is too low or too high, but we need a limit like that, to protect both the factory and the site.

We will discuss in the Factory ops how to better handle this in the future, but it is the nature of the business.

Cheers,
Igor

BTW&#58; All held jobs are from GLOW&#58;
<a href='http&#58;//glidein-1.t2.ucsd.edu&#58;8319/glidefactory/monitor/glidein_Production_v4_2/factoryStatus.html?entry=Engage_US_MWT2_osg&frontend=glowVO_frontend&infoGroup=other&elements=StatusHeld' target='_blank' rel='nofollow'>http&#58;//glidein-1.t2.ucsd.edu&#58;8319/glidefactory/monitor/glidein_Production_v4_2/factoryStatus.html?entry=Engage_US_MWT2_osg&frontend=glowVO_frontend&infoGroup=other&elements=StatusHeld</a>,&rra=0&window_min=0&window_max=0&timezone=0

-- by Igor Sfiligoi</pre></div><div class='update_description'><i onclick="document.location='11599#1328574241'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-07T00:24:01+00:00">Feb 7, 2012 12:24 AM UTC</time><a class="anchor" name="1328574241">&nbsp;</a></div><pre>-- by Igor Sfiligoi</pre></div><div class='update_description'><i onclick="document.location='11599#1328572504'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-06T23:55:04+00:00">Feb 6, 2012 11:55 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1328572504">&nbsp;</a></div><pre>Title updated per Chander.</pre></div><div class='update_description'><i onclick="document.location='11599#1328566867'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-06T22:21:07+00:00">Feb 6, 2012 10:21 PM UTC</time> by <b>Chander Sehgal</b><a class="anchor" name="1328566867">&nbsp;</a></div><pre>Please change the title of this ticket to be

Opportunistic Resource availability for GLOW</pre></div><div class='update_description'><i onclick="document.location='11599#1328565652'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-06T22:00:52+00:00">Feb 6, 2012 10:00 PM UTC</time> by <b>echism</b><a class="anchor" name="1328565652">&nbsp;</a></div><pre>From&#58; Miron Livny &#60;miron@....&#62;
Date&#58; February 6, 2012 3&#58;48&#58;06 PM CST
To&#58; Igor Sfiligoi &#60;sfiligoi@....&#62;
Cc&#58; Chander S Sehgal &#60;cssehgal@....&#62;, Rob Gardner &#60;rwg@....&#62;, Dan Fraser &#60;fraser@....&#62;, Ruth Pordes &#60;ruth@....&#62;, Brian Paul Bockelman &#60;bbockelm@....&#62;, James D Weichel &#60;jweichel@....&#62;, Robert Quick &#60;rquick@....&#62;
Subject&#58; Re&#58; &#34;Max-minus-Avg&#34; Model for Avail Opportunistic Cycles

All I know is that for 13 hours them had free slots but NO OSG jobs in the queue ... Miron

On 2/6/2012 3&#58;35 PM, Igor Sfiligoi wrote&#58;
What are they looking at?
From the factory point of view, there has been constant pressure on OSG
from GLOW in that period&#58;
<a href='http&#58;//glidein-1.t2.ucsd.edu&#58;8319/glidefactory/monitor/glidein_Production_v4_2/factoryStatus.html?entry=total&frontend=glowVO_frontend&infoGroup=running&elements=StatusRunning' target='_blank' rel='nofollow'>http&#58;//glidein-1.t2.ucsd.edu&#58;8319/glidefactory/monitor/glidein_Production_v4_2/factoryStatus.html?entry=total&frontend=glowVO_frontend&infoGroup=running&elements=StatusRunning</a>,ClientGlideRunning,ClientGlideIdle,ReqIdle,StatusIdle,&rra=0&window_min=0&window_max=0&timezone=0

Igor

On 02/06/2012 01&#58;12 PM, Chander S Sehgal wrote&#58;
Hi Igor,

Can you help with Miron&#39;s question immediately below?

Chander

-----Original Message-----
From&#58; Miron Livny [mailto&#58;miron@....]
Sent&#58; Monday, February 06, 2012 3&#58;03 PM
To&#58; Rob Gardner
Cc&#58; Chander S Sehgal; Dan Fraser; Ruth Pordes; Brian Paul Bockelman;
James D Weichel; Robert Quick
Subject&#58; Re&#58; &#34;Max-minus-Avg&#34; Model for Avail Opportunistic Cycles

So, can someone tell me why OSG (the GlideInWMS?) did not send any
jobs for 13 hours? Was it because OSG did not have any work waiting?
... I believe that GLOW had jobs waiting this morning ... Miron

<div id='show_102105834' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_102105834'>On 2/6/2012 2&#58;53 PM, Rob Gardner wrote&#58;

On Feb 6, 2012, at 2&#58;25 PM, Miron Livny wrote&#58;

OK ... did not expect it fly ... but I still believe it needs to be
done ... for example, why do you see a (significant!) drop in the
number of jobs running on your site? ... is it because there were NO
OSG jobs available? .... or? ...

That&#39;s right - there were zero queued OSG jobs during a 13 hour
stretch 11pm last night to noon today, and now ATLAS has come back to
life and OSG jobs are queuing up again.
It preempt down
to our &#34;opportunistic pedestal&#34; which we&#39;ve set to ~ 200 jobs at all
times (5%).

- Rob
</div><script type='text/javascript'>
        $('#show_102105834').click(function() {
            $('#detail_102105834').slideDown("normal");
            $('#show_102105834').hide();
            $('#hide_102105834').show();
        });
        $('#hide_102105834').click(function() {
            $('#detail_102105834').slideUp();
            $('#hide_102105834').hide();
            $('#show_102105834').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F11599">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="/images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 11599});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
