<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[12472] OSG Upcoming CA Release Changes Inquiry</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=12472" method="post">
<div class="page-header">
    <h3><span class="muted">12472</span> / OSG Upcoming CA Release Changes Inquiry</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Steven Timm</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-09-27</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Security Team <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=12472", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/12472?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/12472?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20OSG%20Upcoming%20CA%20Release%20Changes%20Inquiry%20ISSUE%3D12472%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='12472#1349189477'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-10-02T14:51:17+00:00">Oct 2, 2012 02:51 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1349189477">&nbsp;</a></div><pre>Closing per Anand.

by /DC=org/DC=doegrids/OU=People/CN=Kyle Gross 398921</pre></div><div class='update_description'><i onclick="document.location='12472#1348166708'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-20T18:45:08+00:00">Sep 20, 2012 06:45 PM UTC</time> by <b>Anand Padmanabhan</b><a class="anchor" name="1348166708">&nbsp;</a></div><pre>I don&#39;t know why this is still open. Steve said this can be closed 2 weeks ago.
-Anand</pre></div><div class='update_description'><i onclick="document.location='12472#1348166485'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-20T18:41:25+00:00">Sep 20, 2012 06:41 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1348166485">&nbsp;</a></div><pre>Is this ticket still needed?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='12472#1347053590'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-07T21:33:10+00:00">Sep 7, 2012 09:33 PM UTC</time> by <b>Anand Padmanabhan</b><a class="anchor" name="1347053590">&nbsp;</a></div><pre>Thanks Steve!!

Also for the sake of completeness, I should note the project plan for this activity is at <a href='https&#58;//twiki.grid.iu.edu/bin/view/Security/PPOldLayoutCABundlePhaseOut' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Security/PPOldLayoutCABundlePhaseOut</a> and I am keeping it updated with the status of our communication with the VOs.</pre></div><div class='update_description'><i onclick="document.location='12472#1347053231'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-07T21:27:11+00:00">Sep 7, 2012 09:27 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1347053231">&nbsp;</a></div><pre>I saw the communication that was made to the various VO&#39;s,
according to the plan as outlined in this ticket.  Both the communication
plan and the communication itself appear to be good.  I have no
objections to closing this ticket.

Steve Timm

On Fri, 7 Sep 2012, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12472#1347050897'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-07T20:48:17+00:00">Sep 7, 2012 08:48 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1347050897">&nbsp;</a></div><pre>Steve,

Can you respond to Anand&#39;s request to let you decide about closure of this?

-kyle</pre></div><div class='update_description'><i onclick="document.location='12472#1345844551'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-24T21:42:31+00:00">Aug 24, 2012 09:42 PM UTC</time> by <b>Anand Padmanabhan</b><a class="anchor" name="1345844551">&nbsp;</a></div><pre>I will let Steve decide if it can be closed. Here is an update on what we are doing. I went through the list of VOMS servers used by VOs on OSG and identified their versions. For any active VO that were running a older version of the voms-admin server I sent them the following message.
-------------------------------------------------------
Hello VO security contact,

This is an important email, so please read carefully and take action!!

* Why are we contacting you?
Your VO is depending on an old VOMS-admin server and we need you to upgrade it.

* We have not seen any problems with the VOMS-admin server, why should we upgrade it?
The OSG security team will make some changes to our security infrastructure. If your VO is running a pre VOMS-Admin server 2.6 this change will impact you. Furthermore, old versions of Voms-admin are also susceptible to known security vulnerabilities.

* What are the specific changes being made to OSG security infrastructure?
The changes that are planned affect the CA certificate packages being distributed by OSG. CA package using the &#39;new layout&#39;, which works with both openssl 0.9.x and openssl 1.0.x, has been available from IGTF for a significant time now and is designed to accommodate openssl 1.0. The package with the &#39;new layout&#39; has also been in production in OSG for over a year, and in fact is the default recommended option in OSG 3. Till now we have continued to provide the &#39;old layout&#39; (which works with only openssl 0.9.x) even though it has been deprecated by IGTF for a long time. However, moving forward OSG security team will stop making the CA distribution with the &#39;old layout&#39;.

* How does this change affect OSG software?
Most software have been tested and are unaffected by these changes. Furthermore the &#39;new layout&#39; has been deployed in production by a number of CEs, SEs and VOMS and is working without any issues.  However, we know that a bug in the old versions of VOMS-admin server causes it to fail with the &#39;new layout&#39;. The bug affected VOMS-Admin server 2.x, and was fixed in VOMS-Admin server 2.6. (More details on this bug can be found at&#58;<a href='https&#58;//savannah.cern.ch/bugs/index.php?78349' target='_blank' rel='nofollow'>https&#58;//savannah.cern.ch/bugs/index.php?78349</a>).

* What actions am I expected to take?
You are expected to upgrade your voms and voms-admin servers to use the version in OSG 3.x release. (See&#58;<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallVoms' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallVoms</a>). The version of voms and voms-admin servers in OSG 3.x has been tested and used in production by a number of OSG VOs. The OSG software team has
expertise and is willing to help VOs make this transition. If your VO has a large number of users and would like to migrate users from your old database this can also be done. You are also expected to send the OSG security team (osg-security-team@....) your upgrade plans. If you have VO specific software, not distributed through OSG/VDT
software, you might want to test them out with the &#39;new layout&#39; CA package. Details on how to get the &#39;new layout&#39; CAs can be found at<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallCertAuth.' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallCertAuth.</a>

* What would happen if I do not take any action?
Once OSG security team retires the &#39;old layout&#39; by transparently switching to the &#39;new layout&#39; your VOMS-admin server will stop work and likely impact your VOs production runs.

Should you have any questions, concerns or  suggestions please send them to the security team. Please acknowledge the receipt of this email.

Best
Anand

-------------------------------------------------------</pre></div><div class='update_description'><i onclick="document.location='12472#1345833309'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-24T18:35:09+00:00">Aug 24, 2012 06:35 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1345833309">&nbsp;</a></div><pre>I will be on vacation on August 24, 2012. I will have access to email during this time but only limited time to reply.  For issues related to FermiGrid or FermiCloud please contact the Service Desk at <a href='http&#58;//servicedesk.fnal.gov' target='_blank' rel='nofollow'>http&#58;//servicedesk.fnal.gov</a> or at extension 2345.

Steve Timm</pre></div><div class='update_description'><i onclick="document.location='12472#1345833121'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-24T18:32:01+00:00">Aug 24, 2012 06:32 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1345833121">&nbsp;</a></div><pre>What should be done with this ticket at this point.  Can it be closed?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='12472#1344634832'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-10T21:40:32+00:00">Aug 10, 2012 09:40 PM UTC</time> by <b>Anand Padmanabhan</b><a class="anchor" name="1344634832">&nbsp;</a></div><pre>You are right the message should have clarified this. The known problem (and the bug mentioned in the message) affects voms-admin-server, specifically versions before 2.6.

Anand</pre></div><div class='update_description'><i onclick="document.location='12472#1344630381'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-10T20:26:21+00:00">Aug 10, 2012 08:26 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1344630381">&nbsp;</a></div><pre>I swore I assigned this to the security team, but I guess I didn&#39;t.  This also came up in the ops meeting.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='12472#1344050127'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-04T03:15:27+00:00">Aug 4, 2012 03:15 AM UTC</time> by <b>amymjenk</b><a class="anchor" name="1344050127">&nbsp;</a></div><pre>From&#58; Steven C Timm &#60;timm@....&#62;
To&#58; Grid Operations Center &#60;goc@....&#62;
Subject&#58; RE&#58; Upcoming OSG CA release changes
Date-Sent&#58; Saturday, August 04, 2012 2&#58;51 AM +0000

The message as sent is a little bit confusing, because the versioning of VOMS and
VOMS-Admin is a bit confusing.

The current version numbers of VOMS and VOMS-Admin as released in OSG 3.1.7 are

Voms-admin-server 2.6.1-9
Voms-admin-client 2.0.16-1
Voms 2.0.6

This version works fine with the new format CA Certs.
It is earlier versions of VOMS based on VDT 2.0.0 that have the problem.
(voms-admin 2.0.0 + voms 1.8.8).

Steve Timm

-----Original Message-----
From&#58; Grid Operations Center [mailto&#58;goc@....
Sent&#58; Friday, August 03, 2012 5&#58;22 PM
To&#58; goc@....
Subject&#58; Upcoming OSG CA release changes

Dear VO Admins,

The OSG security team will make some changes to our security infrastrcture. If your
VO is running a pre VOMS-Admin 2.6 this change will affect you. Please let us know
and provide us with your upgrade schedule. Additional information on this change is
provided in the following paragraphs.

CA packages using new layout have been released by IGTF for significant time now and
are designed to accommodate openssl 1.0. These packages have also been in production
<div id='show_1951410089' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1951410089'>in OSG for over a year, and infact are the default recommended option in OSG 3. Till
now we have continued to provide the old layout even though it has been deprecated by
IGTF for a long time.

However, moving forward OSG security team will stop making the CA distribution with
the old layout. Most software are unaffected by these changes. However, we know that
a bug in the early versions of VOMS 2.x causes it to fail with the new layout. The
bug affected VOMS-Admin 2.x, that will be fixed in VOMS Admin 2.6. (More details on
this bug can be found at&#58; <a href='https&#58;//savannah.cern.ch/bugs/index.php?78349' target='_blank' rel='nofollow'>https&#58;//savannah.cern.ch/bugs/index.php?78349</a>).

Should you have any question regarding the change please let us know at the earliest.

Best
Anand
</div><script type='text/javascript'>
        $('#show_1951410089').click(function() {
            $('#detail_1951410089').slideDown("normal");
            $('#show_1951410089').hide();
            $('#hide_1951410089').show();
        });
        $('#hide_1951410089').click(function() {
            $('#detail_1951410089').slideUp();
            $('#hide_1951410089').hide();
            $('#show_1951410089').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F12472">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 12472});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
