<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[24896] T2_US_Vanderbilt - factory problem</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=24896" method="post">
<div class="page-header">
    <h3><span class="muted">24896</span> / T2_US_Vanderbilt - factory problem</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Ali Mehmet</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Ali Mehmet Altundag</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier2</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-04-30</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USCMS Tier 2 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=112928">112928</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/24896", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/24896?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/24896?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20T2_US_Vanderbilt%20-%20factory%20problem%20ISSUE%3D24896%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='24896#1431475160'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-12T23:59:20+00:00">May 12, 2015 11:59 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1431475160">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.

-- by GGUS SYSTEM at Tue May 12 23&#58;59&#58;04 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1430159575'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-27T18:32:55+00:00">Apr 27, 2015 06:32 PM UTC</time> by <b>echism</b><a class="anchor" name="1430159575">&nbsp;</a></div><pre>Closing this ticket. Thank you, everyone!</pre></div><div class='update_description'><i onclick="document.location='24896#1430158070'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-27T18:07:50+00:00">Apr 27, 2015 06:07 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1430158070">&nbsp;</a></div><pre>Nevermind, Jeff just informed me that this is likely due to some changes made to the log cleanups we have on the factory side. Sorry about that, I guess it is fine to close this.

Brendan Dennis
UCSD Glidein Factory Operations

-- by Brendan Dennis at Mon Apr 27 18&#58;07&#58;10 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1430155550'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-27T17:25:50+00:00">Apr 27, 2015 05:25 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1430155550">&nbsp;</a></div><pre>Hey Edgar,

Sorry, I should have clarified in my previous email. There&#39;s still some sort of problem that&#39;s causing the status of Vanderbilt glideins to not report properly back to the factory, which is manifesting as improperly set permissions on the glidein stderr/stdout log files on the factory, along with our monitoring tools not properly reporting that glideins and user jobs seem to be running [1]. I&#39;m not seeing any sort of glidein cleanup errors any longer, however. I&#39;m going to look around some more and ask Jeff to take a look too.

Ultimately it does look like glideins are running user jobs, and those user jobs are running to completion, so at least there&#39;s that.

Brendan Dennis
UCSD Glidein Factory Operations

[1]
&#34;Wallclock time per glidein&#34; should not be returning any amount of &#34;Unknown&#34;
<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryCompletedStats.html?entry=CMS_T2_US_Vanderbilt_ce1&frontend=total&infoGroup=Lasted' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryCompletedStats.html?entry=CMS_T2_US_Vanderbilt_ce1&frontend=total&infoGroup=Lasted</a>

-- by Brendan Dennis at Mon Apr 27 17&#58;25&#58;30 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1430155420'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-27T17:23:40+00:00">Apr 27, 2015 05:23 PM UTC</time><a class="anchor" name="1430155420">&nbsp;</a></div><pre>The opinion of the local admins is that this ticket should be closed. As Sean pointed out, this ticket has actually covered three distinct issues all of which
have been resolved. We greatly, greatly appreciate everyone&#39;s help on those BTW!

The current situation is outlined by Sean. Jobs are falling off here because there appear to be no jobs in the queue.

Now, I guess it is possible that there are no jobs because of some problem, but it seems likely not to be a Vanderbilt issue if so?

- Paul -

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=sheldon/CN=644877/CN=Paul Sheldon</pre></div><div class='update_description'><i onclick="document.location='24896#1430155414'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-27T17:23:34+00:00">Apr 27, 2015 05:23 PM UTC</time><a class="anchor" name="1430155414">&nbsp;</a></div><pre>The opinion of the local admins is that this ticket should be closed. As Sean pointed out, this ticket has actually covered three distinct issues all of which
have been resolved. We greatly, greatly appreciate everyone&#39;s help on those BTW!

The current situation is outlined by Sean. Jobs are falling off here because there appear to be no jobs in the queue.

Now, I guess it is possible that there are no jobs because of some problem, but it seems likely not to be a Vanderbilt issue if so?

- Paul -

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=sheldon/CN=644877/CN=Paul Sheldon</pre></div><div class='update_description'><i onclick="document.location='24896#1430154022'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-27T17:00:22+00:00">Apr 27, 2015 05:00 PM UTC</time><a class="anchor" name="1430154022">&nbsp;</a></div><pre>Hi Factory Ops, Vanderbilt Admins,

At this moment I lost track of what is the current problem? Can somebody summarize it? So we can determine if we still need the software team to be involved on this ticket?

Cheers,

Edgar
OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='24896#1430153213'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-27T16:46:53+00:00">Apr 27, 2015 04:46 PM UTC</time><a class="anchor" name="1430153213">&nbsp;</a></div><pre>The isn&#39;t any sizable (27) exclusive pressure ( <a href='http&#58;//submit-3.t2.ucsd.edu/CSstoragePath/Monitor/latest.txt' target='_blank' rel='nofollow'>http&#58;//submit-3.t2.ucsd.edu/CSstoragePath/Monitor/latest.txt</a> ) and there aren&#39;t any pending ( <a href='http&#58;//dashb-ssb.cern.ch/dashboard/request.py/siteview?site=T2_US_Vanderbilt#currentView=default&highlight=true' target='_blank' rel='nofollow'>http&#58;//dashb-ssb.cern.ch/dashboard/request.py/siteview?site=T2_US_Vanderbilt#currentView=default&highlight=true</a> ). Would that explain the drop in job numbers?

Are we still talking about the original issue of GlideIns being held? The cause of that issue was discovered (wrong permissions on /var/tmp/qstat_uscms* directories), and rectified.

Also discussed in this ticket, but not related to the original issue have been&#58;
* node local disk exhaustion due to user error
* job submission issues due to an upstream change at CERN involving overflow pools

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Sean Johnson 2789</pre></div><div class='update_description'><i onclick="document.location='24896#1430152015'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-27T16:26:55+00:00">Apr 27, 2015 04:26 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1430152015">&nbsp;</a></div><pre>HTML-body converted&#58; (contains div-tag)

Oddly, things were working like gangbusters up until recently&#58;
<a href='http&#58;//cms.accre.vanderbilt.edu/job_graphs/index.php' target='_blank' rel='nofollow'>http&#58;//cms.accre.vanderbilt.edu/job_graphs/index.php</a> [1]

That&#39;s all running CMS jobs at Vandy. Did something change
correlated with the drop of jobs?

--
Sent from Gmail Mobile

Links&#58;
------
[1] <a href='http&#58;//cms.accre.vanderbilt.edu/job_graphs/index.php' target='_blank' rel='nofollow'>http&#58;//cms.accre.vanderbilt.edu/job_graphs/index.php</a>

-- by Andrew Melo at Mon Apr 27 16&#58;26&#58;36 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1430151767'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-27T16:22:47+00:00">Apr 27, 2015 04:22 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1430151767">&nbsp;</a></div><pre>Hi Elizabeth,

Unfortunately, no, they have not improved yet; I&#39;m still seeing the same issues. I&#39;ll try to see if I can find something new to help troubleshoot this, but I&#39;m not too hopeful.

Brendan Dennis
UCSD Glidein Factory Operations

-- by Brendan Dennis at Mon Apr 27 16&#58;21&#58;38 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1430143777'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-27T14:09:37+00:00">Apr 27, 2015 02:09 PM UTC</time> by <b>echism</b><a class="anchor" name="1430143777">&nbsp;</a></div><pre>Are things improving/resolved at vanderbilt?

Thank you</pre></div><div class='update_description'><i onclick="document.location='24896#1429719726'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-22T16:22:06+00:00">Apr 22, 2015 04:22 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429719726">&nbsp;</a></div><pre>Hi,

I need to correct Marty here. osg-gfactory-support@.... isn&#39;t generally intended for the public, but rather an internal list for factory ops communication.  Andrew I can ask around if you like to figure out if there&#39;s a CMS list that is more appropriate for communicating their activities to site admins.

Thanks,
Jeff Dost
OSG Glidein Factory Operations

-- by Jeffrey Dost at Wed Apr 22 16&#58;21&#58;14 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1429660834'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-22T00:00:34+00:00">Apr 22, 2015 12:00 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429660834">&nbsp;</a></div><pre>Hi Andrew,

Well, I first heard about this problem during our conference call for Factory Ops this morning. The only other place I saw a specific discussion of it in writing was on the osg-gfactory-support@.... mailing list. That&#39;s probably the most &#34;public&#34; list we have on the factory-side of things. I&#39;d recommend subscribing to the list for future alerts if your site admins haven&#39;t done so already.

Killing off the glideins early&#58; Yes, we can do that from the factory-end if you&#39;d like. However, it&#39;s going to be (nearly) impossible for me to tell which glideins are faulty and which ones might be happily running user jobs properly. So it&#39;s going to be an all or nothing restart if you&#39;re okay with that. Let me know if that&#39;s what you would like to do and I&#39;ll take care of it.

Marty Kandes
UCSD Glidein Factory Operations

-- by Marty Kandes at Wed Apr 22 00&#58;00&#58;11 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1429658849'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-21T23:27:29+00:00">Apr 21, 2015 11:27 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429658849">&nbsp;</a></div><pre>HTML-body converted&#58; (contains div-tag)

Hi Marty,
Thanks for the update. Is there a public list somewhere these changes
are announced to? We&#39;ve had a weird chain of site failures causing
the number of running pilots to drop even though we have a really high
number of jobs waiting to run. Not knowing this update, we spent a lot
of time chasing our tails trying to find out why.
Is it possible to somehow blow away the faulty pilots and make a fresh
batch churn through? The high number of jobs waiting to run
corresponds to a proportionally high number of people breathing down
our throat wanting to know what the holdup is &#58;)
Cheers

--
Sent from Gmail Mobile

-- by Andrew Melo at Tue Apr 21 23&#58;26&#58;48 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1429652065'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-21T21:34:25+00:00">Apr 21, 2015 09:34 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429652065">&nbsp;</a></div><pre>Hi Andrew,

Unfortunately, for a site like Vanderbilt that typically has a large number of glideins at any given time, the log files are purged fairly quickly to make room for the most recent glideins. As such, we no longer have the logs from 4/18 with the &#34;Permission denied&#34; issue Brendan mentioned in his last update. And I haven&#39;t found the same problem in the most recent logs yet.

You may have noticed, however, that starting yesterday your glidein numbers began dropping. I&#39;m not entirely sure what&#39;s caused this, but it may be related to the CERN front-end admins switching on an overflow job pool yesterday. They had problems with these overflow glideins and user jobs matching properly. They have since turned off this pool. I suspect it&#39;s these glideins moving through your site causing the drop in numbers. The circumstantial evidence for this in the logs is that the majority of the glideins seem to have started up properly, go idle waiting for a user job, never get a user job within the default 20 min idle lifetime and then kill themselves off. Once normal glideins begin running again, I&#39;ll bet the numbers should begin picking up again. Then maybe we can comeback and re-check if there are still any site specific issues to resolve.

Marty Kandes
UCSD Glidein Factory Operations

-- by Marty Kandes at Tue Apr 21 21&#58;33&#58;39 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1429616042'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-21T11:34:02+00:00">Apr 21, 2015 11:34 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429616042">&nbsp;</a></div><pre>stefano.belforte has subscribed to this ticket.

-- by stefano.belforte at Tue Apr 21 11&#58;33&#58;39 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1429615680'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-21T11:28:00+00:00">Apr 21, 2015 11:28 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429615680">&nbsp;</a></div><pre>I guess specifically [1]? What happens before the permission errors blow up?

-- by Andrew Melo at Tue Apr 21 11&#58;26&#58;52 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1429615565'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-21T11:26:05+00:00">Apr 21, 2015 11:26 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429615565">&nbsp;</a></div><pre>Hi Brendan,

Sorry for the delay replying, I was at CHEP and then did a little post-CHEP traveling.

I&#39;m not really sure what we can look at on our end. Can you give more of the logs? We&#39;ve been seeing that a user&#58;

JOB AD&#58; x509userproxysubject = &#34;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jalimena/CN=718388/CN=Juliette Alimena&#34;

Is sending jobs that fill up /tmp. Maybe that&#39;s part of the problem? Though, shouldn&#39;t the cleanup scripts run by the pilot supposed to be run under the payload UID? Did that glexec fail?

Cheers,
Andrew

-- by Andrew Melo at Tue Apr 21 11&#58;24&#58;56 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1429336213'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-18T05:50:13+00:00">Apr 18, 2015 05:50 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429336213">&nbsp;</a></div><pre>Is this similar to the problem bockjoo was seeing at Florida?&#60;span&#62;&#60;/span&#62;&#60;br&#62;&#60;br&#62;-- &#60;br&#62;Sent from Gmail Mobile&#60;br&#62;

-- by Andrew Melo at Sat Apr 18 05&#58;49&#58;28 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1429336098'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-18T05:48:18+00:00">Apr 18, 2015 05:48 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429336098">&nbsp;</a></div><pre>Added attachment mailbody.Sat._18_Apr_2015_07.47.41_.0200.txt
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT105230' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT105230</a>

-- by Stefano Belforte at Sat Apr 18 05&#58;47&#58;56 UTC 2015

----------- e-mail with large body ------

added in total as mailbody.Sat._18_Apr_2015_07.47.41_.0200.txt

------------ e-mail with large body ------shooting in the dark.. could [1] be related to some glexec issue ?

On 04/18/2015 12&#58;45 AM, helpdesk@.... wrote&#58;
<font color='#7F7E6F'>&#62; Dear user,</font>
<font color='#7F7E6F'>&#62; you have subscribed to ticket #112928.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; REFERENCE LINK&#58; <a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=112928</a></font>
<font color='#7F7E6F'>&#62; SUBJECT&#58; T2_US_Vanderbilt - factory problem</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; =====================</font>
<font color='#7F7E6F'>&#62; LATEST MODIFICATIONS&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; LAST MODIFIER -&#62; Brendan Dennis</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; PUBLIC DIARY -&#62;</font>
<font color='#7F7E6F'>&#62; Something is still not right, as both CMS and GLOW glideins are having trouble still on both ce1 and ce2.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; For CMS glideins, they appear to be running on the site and also each appear to be running one user job, but when they finish, something is causing them to not properly report back to the factory. The logs get back to the factory, but they don&#39;t have their permissions set properly, and our monitoring lists them with an unknown wallclock time and no user jobs having run. Additionally, I&#39;m seeing evidence of some sort of permissions issue in some of the stderr logs for the glideins [1] when it comes time to clean up. Plus, the fact they all only seem to be running one user job and no more is rather suspicious. I&#39;ve spent a lot of time today trying to find more information on this, but there&#39;s nothing in any of the logs that would point to what&#39;s causing this problems. I don&#39;t think it&#39;s a factory issue though, as this is the only site having issues and we haven&#39;t changed anything.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; For GLOW glideins, they&#39;re all going held with the following error [2]. That&#39;s all we see for them, unfortunately.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Brendan Dennis</font>
<font color='#7F7E6F'>&#62; UCSD Glidein Factory Operations</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [1]</font>
<font color='#7F7E6F'>&#62; ====</font>
<div id='show_41981621' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_41981621'><font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/condor_exec.exe&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/WMCore.zip&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/logCMSSWSaved.txt&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/ProcInfo.pyc&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/apmon.py&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/jobReport.json.401&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/ApmonIf.py&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/PSet.pkl&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/jobLog.26454.log&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/TweakPSet.py&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/FrameworkJobReport.xml&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/debug/originalPSet.py&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/debug/crabConfig.py&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/cmsRun-stdout.log&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/DashboardAPI.py&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/_condor_stderr&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/run_and_lumis.tar.gz&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/CMSSW_5_3_22/python&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/CMSSW_5_3_22/include&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/CMSSW_5_3_22/PSet.pkl&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/CMSSW_5_3_22/objs/slc6_amd64_gcc472&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/CMSSW_5_3_22/debug/originalPSet.py&#39;&#58; Permission denied</font>
<font color='#7F7E6F'>&#62; rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_...</font>
...
--- body truncated, see attachment mailbody.Sat._18_Apr_2015_07.47.41_.0200.txt for full text ---

-- by Stefano Belforte at Sat Apr 18 05&#58;47&#58;56 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a>
</div><script type='text/javascript'>
        $('#show_41981621').click(function() {
            $('#detail_41981621').slideDown("normal");
            $('#show_41981621').hide();
            $('#hide_41981621').show();
        });
        $('#hide_41981621').click(function() {
            $('#detail_41981621').slideUp();
            $('#hide_41981621').hide();
            $('#show_41981621').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='24896#1429310771'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-17T22:46:11+00:00">Apr 17, 2015 10:46 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429310771">&nbsp;</a></div><pre>Something is still not right, as both CMS and GLOW glideins are having trouble still on both ce1 and ce2.

For CMS glideins, they appear to be running on the site and also each appear to be running one user job, but when they finish, something is causing them to not properly report back to the factory. The logs get back to the factory, but they don&#39;t have their permissions set properly, and our monitoring lists them with an unknown wallclock time and no user jobs having run. Additionally, I&#39;m seeing evidence of some sort of permissions issue in some of the stderr logs for the glideins [1] when it comes time to clean up. Plus, the fact they all only seem to be running one user job and no more is rather suspicious. I&#39;ve spent a lot of time today trying to find more information on this, but there&#39;s nothing in any of the logs that would point to what&#39;s causing this problems. I don&#39;t think it&#39;s a factory issue though, as this is the only site having issues and we haven&#39;t changed anything.

For GLOW glideins, they&#39;re all going held with the following error [2]. That&#39;s all we see for them, unfortunately.

Brendan Dennis
UCSD Glidein Factory Operations

[1]
====
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/condor_exec.exe&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/WMCore.zip&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/logCMSSWSaved.txt&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/ProcInfo.pyc&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/apmon.py&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/jobReport.json.401&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/ApmonIf.py&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/PSet.pkl&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/jobLog.26454.log&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/TweakPSet.py&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/FrameworkJobReport.xml&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/debug/originalPSet.py&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/debug/crabConfig.py&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/cmsRun-stdout.log&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/DashboardAPI.py&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/_condor_stderr&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/run_and_lumis.tar.gz&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/CMSSW_5_3_22/python&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/CMSSW_5_3_22/include&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/CMSSW_5_3_22/PSet.pkl&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/CMSSW_5_3_22/objs/slc6_amd64_gcc472&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/CMSSW_5_3_22/debug/originalPSet.py&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/CMSSW_5_3_22/debug/crabConfig.py&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/CMSSW_5_3_22/bin/slc6_amd64_gcc472&#39;&#58; Permission denied
<div id='show_596093786' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_596093786'>rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/CMSSW_5_3_22/cfipython/slc6_amd64_gcc472&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/CMSSW_5_3_22/tmp/slc6_amd64_gcc472&#39;&#58; Permission denied
rm&#58; cannot remove &#96;/tmp/glide_tLN9jd/execute/dir_26247/CMSSW_5_3_22/PSet.py&#39;&#58; Permission denied
... it goes on for a while

[2]
status command failed&#58;  &#60;blah&#62; execute_cmd&#58; 30 seconds timeout expired, killing child process.- &#60;blah&#62; killed by signal  15.-

-- by Brendan Dennis at Fri Apr 17 22&#58;44&#58;58 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a>
</div><script type='text/javascript'>
        $('#show_596093786').click(function() {
            $('#detail_596093786').slideDown("normal");
            $('#show_596093786').hide();
            $('#hide_596093786').show();
        });
        $('#hide_596093786').click(function() {
            $('#detail_596093786').slideUp();
            $('#hide_596093786').hide();
            $('#show_596093786').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='24896#1429285786'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-17T15:49:46+00:00">Apr 17, 2015 03:49 PM UTC</time> by <b>echism</b><a class="anchor" name="1429285786">&nbsp;</a></div><pre>Hey Brendan,

Please let us know if glideins are completing when you get a chance.

Thank you.</pre></div><div class='update_description'><i onclick="document.location='24896#1429162617'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-16T05:36:57+00:00">Apr 16, 2015 05:36 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429162617">&nbsp;</a></div><pre>Replying to confirm that from the factory perspective, things are looking a lot better. I cleared out all the old idle glideins from before update#27, and all the new CMS ones that went in have started running. None have finished yet though, so we&#39;ll have to check in later to make sure everything is running to completion without issue.

Brendan Dennis
UCSD Glidein Factory Operations

-- by Brendan Dennis at Thu Apr 16 05&#58;35&#58;52 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1429118669'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-15T17:24:29+00:00">Apr 15, 2015 05:24 PM UTC</time><a class="anchor" name="1429118669">&nbsp;</a></div><pre>The more disruptive changes that had been made to our CE1 as part of the troubleshooting effort have been reverted, and the same modifications that had successfully been applied to CE2 are in place on CE1. New Glidein pilots landing on CE1 are now entering a Running state. The current belief is that the issue has been resolved.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Sean Johnson 2789</pre></div><div class='update_description'><i onclick="document.location='24896#1429105475'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-15T13:44:35+00:00">Apr 15, 2015 01:44 PM UTC</time><a class="anchor" name="1429105475">&nbsp;</a></div><pre>As a side effect of changing UIDs, the /var/tmp/qstat_cache_uscms4425 directory still held the old UID as the owner. Once the ownership of that directory was changed, Glideins started to be processed by the CE2 system, and the job count increased significantly.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Sean Johnson 2789</pre></div><div class='update_description'><i onclick="document.location='24896#1429070899'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-15T04:08:19+00:00">Apr 15, 2015 04:08 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429070899">&nbsp;</a></div><pre>Might also have to do with things. Looking at the machine, there&#39;s only a blahp process running for glow and not any other users. That&#39;s not what I would expect.

-- by Andrew Melo at Wed Apr 15 04&#58;07&#58;42 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1429066872'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-15T03:01:12+00:00">Apr 15, 2015 03:01 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429066872">&nbsp;</a></div><pre>Something is weird, the Schedd is complaining with&#58;
04/14/15 21&#58;59&#58;28 This process has a valid certificate & key
04/14/15 21&#58;59&#58;28 ZKM&#58; setting FQAN&#58; /DC=ch/DC=cern/OU=computers/CN=cmspilot02/vocms080.cern.ch,/cms/Role=pilot/Capability=NULL,/cms/Role=NULL/Capability=NULL,/cms/dcms/Role=NULL/Capability=NULL,/cms/escms/Role=NULL/Capability=NULL,/cms/itcms/Role=NULL/Capability=NULL,/cms/uscms/Role=NULL/Capability=NULL
04/14/15 21&#58;59&#58;28 DC_AUTHENTICATE&#58; authentication of &#60;131.225.205.7&#58;47182&#62; did not result in a valid mapped user name, which is required for this command (1112 QMGMT_WRITE_CMD), so aborting.
04/14/15 21&#58;59&#58;28 DC_AUTHENTICATE&#58; reason for authentication failure&#58; AUTHENTICATE&#58;1003&#58;Failed to authenticate with any method|AUTHENTICATE&#58;1004&#58;Failed to authenticate using GSI|GSI&#58;5005&#58;Failed to authenticate with client.  Client does not trust our certificate.  You may want to check the GSI_DAEMON_NAME in the condor_config|AUTHENTICATE&#58;1004&#58;Failed to authenticate using FS|FS&#58;1004&#58;Unable to lstat(/tmp/FS_XXXSyLyyh)

-- by Andrew Melo at Wed Apr 15 03&#58;00&#58;45 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1429066330'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-15T02:52:10+00:00">Apr 15, 2015 02:52 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429066330">&nbsp;</a></div><pre>I get copies of the factory logs generally … However, when I looked into the Vanderbilt entries there are no logs since around the start of the problem (Apr 8), which is very odd indeed. I’ve asked Jeff about the factory logs. Perhaps they have some information about the problem, but the complete lack of logs is suspicious in any case.

James

<font color='#7F7E6F'>&#62; On Apr 15, 2015, at 11&#58;17 AM, helpdesk@.... wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Dear user,</font>
<font color='#7F7E6F'>&#62; you have subscribed to ticket #112928.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; REFERENCE LINK&#58; <a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=112928</a></font>
<font color='#7F7E6F'>&#62; SUBJECT&#58; T2_US_Vanderbilt - factory problem</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; =====================</font>
<font color='#7F7E6F'>&#62; LATEST MODIFICATIONS&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; LAST MODIFIER -&#62; Andrew Melo</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; PUBLIC DIARY -&#62;</font>
<font color='#7F7E6F'>&#62; Also, the job router is vomiting&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; HOOK_UPDATE_JOB_INFO not configured.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>
<font color='#7F7E6F'>&#62; This is an automated mail. When replying don&#39;t change the subject line!</font>
<font color='#7F7E6F'>&#62; Type your text above this box and S T R I P  P R E V I O U S  M A I L S please!!</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>

-- by JAMES LETTS at Wed Apr 15 02&#58;51&#58;34 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1429064290'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-15T02:18:10+00:00">Apr 15, 2015 02:18 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429064290">&nbsp;</a></div><pre>Also, the job router is vomiting&#58;

HOOK_UPDATE_JOB_INFO not configured.

-- by Andrew Melo at Wed Apr 15 02&#58;17&#58;47 UTC 2015

Hi all,

I&#39;m not seeing anything super obvious. It looks like the SLURM PBS wrappers are complaining about something in the SLURM output&#58;

Use of uninitialized value in printf at /usr/scheduler/slurm/bin/qstat line 443, &#60;DATA&#62; line 608.

Which is probably a red-herring, but I&#39;m going to move the CE to submitting directly to SLURM just in case. Since it&#39;s late in both the US and EU, I&#39;ll just change the GridResource entry but not modify the name of the resource in the Job Router. Let me click that over on CE1 and then get onto looking through the logs more intensely.

Cheers,
Andrew

-- by Andrew Melo at Wed Apr 15 02&#58;17&#58;09 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1429063811'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-15T02:10:11+00:00">Apr 15, 2015 02:10 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429063811">&nbsp;</a></div><pre>Andrew Melo has subscribed to this ticket.

-- by Andrew Melo at Wed Apr 15 02&#58;09&#58;20 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1429021543'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-14T14:25:43+00:00">Apr 14, 2015 02:25 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1429021543">&nbsp;</a></div><pre>James Letts has subscribed to this ticket.

-- by James Letts at Tue Apr 14 06&#58;04&#58;36 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1428948871'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-13T18:14:31+00:00">Apr 13, 2015 06:14 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1428948871">&nbsp;</a></div><pre>Sean,

The logs may have rolled over at this point but it&#39;s important to note that you need to make sure that &#39;BLAH_JOB_STATUS&#39; command actually corresponds to the job in question. If you see my previous comment, the two lines prior to the &#39;BLAH_JOB_STATUS&#39; line include the same job ID as the error line we&#39;re interested in.

I&#39;ve actually been running some local jobs on your CE (ce2.accre.vanderbilt.edu) to peek at the logs and it looks like the gridmanager may even be having issues with submitting jobs to SLURM. Tracking job 1483152.0 in GridmanagerLog.uscms4425&#58;

04/13/15 06&#58;13&#58;14 [6594] Found job 1483152.0 --- inserting
...
04/13/15 06&#58;13&#58;14 [6594] (1483152.0) doEvaluateState called&#58; gmState GM_INIT, remoteState 0
...
04/13/15 06&#58;13&#58;19 [6594] (1483152.0) doEvaluateState called&#58; gmState GM_SAVE_SANDBOX_ID, remoteState 0
...
04/13/15 06&#58;13&#58;21 [6594] (1483152.0) doEvaluateState called&#58; gmState GM_SUBMIT, remoteState 0
...
04/13/15 06&#58;13&#58;26 [6594] (1483152.0) doEvaluateState called&#58; gmState GM_SUBMIT_SAVE, remoteState 0
...
04/13/15 06&#58;14&#58;26 [6594] (1483152.0) doEvaluateState called&#58; gmState GM_SUBMITTED, remoteState 0
...
04/13/15 06&#58;14&#58;27 [6594] (1483152.0) doEvaluateState called&#58; gmState GM_POLL_ACTIVE, remoteState 0
...
&#60;the gridmanager then tries to poll SLURM for the submitted job a few more times&#62;
...
04/13/15 06&#58;18&#58;29 [6594] (1483152.0) doEvaluateState called&#58; gmState GM_POLL_ACTIVE, remoteState 0
04/13/15 06&#58;18&#58;29 [6594] (1483152.0) blah_job_status() failed&#58; Error parsing classad or job not found

Can you check the SLURM logs for any failed submissions?

- Brian</pre></div><div class='update_description'><i onclick="document.location='24896#1428701860'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-10T21:37:40+00:00">Apr 10, 2015 09:37 PM UTC</time><a class="anchor" name="1428701860">&nbsp;</a></div><pre>Here&#39;s the output from that specific job&#58;

[johns443@ce1 ~]$ /usr/libexec/blahp/pbs_status.py pbs/20150410/1202898
0[BatchJobId=&#34;1202898&#34;; JobStatus=4; ExitCode= 0; ]

According to SLURM, it completed&#58;
[johns443@vmps15 ~]$ sacct -j 1202898
JobID    JobName  Partition    Account  AllocCPUS      State ExitCode
------------ ---------- ---------- ---------- ---------- ---------- --------
1202898      bl_335a57+ production        cms          1  COMPLETED      0&#58;0
1202898.bat+      batch                   cms          1  COMPLETED      0&#58;0

I picked a random new job from today that received the same &#34;Error parsing classad or job not found&#34; message&#58;

04/10/15 14&#58;56&#58;35 [33154] GAHP[33345] &#60;- &#39;BLAH_JOB_STATUS 61 pbs/20150410/1215236&#39;
04/10/15 14&#58;56&#58;35 [33154] GAHP[33345] -&#62; &#39;S&#39;
04/10/15 14&#58;56&#58;35 [33154] GAHP[33345] &#60;- &#39;RESULTS&#39;
04/10/15 14&#58;56&#58;35 [33154] GAHP[33345] -&#62; &#39;R&#39;
04/10/15 14&#58;56&#58;35 [33154] GAHP[33345] -&#62; &#39;S&#39; &#39;1&#39;
04/10/15 14&#58;56&#58;35 [33154] GAHP[33345] -&#62; &#39;58&#39; &#39;1&#39; &#39;Error parsing classad or job not found&#39; &#39;0&#39; &#39;N/A&#39;
04/10/15 14&#58;56&#58;35 [33154] (891675.0) doEvaluateState called&#58; gmState GM_POLL_ACTIVE, remoteState 0
04/10/15 14&#58;56&#58;35 [33154] (891675.0) blah_job_status() failed&#58; Error parsing classad or job not found
04/10/15 14&#58;56&#58;35 [33154] (891675.0) gm state change&#58; GM_POLL_ACTIVE -&#62; GM_HOLD
04/10/15 14&#58;56&#58;35 [33154] (891675.0) gm state change&#58; GM_HOLD -&#62; GM_DELETE
04/10/15 14&#58;56&#58;35 [33154] GAHP[33345] &#60;- &#39;RESULTS&#39;
04/10/15 14&#58;56&#58;35 [33154] GAHP[33345] -&#62; &#39;R&#39;
04/10/15 14&#58;56&#58;35 [33154] GAHP[33345] -&#62; &#39;S&#39; &#39;3&#39;
04/10/15 14&#58;56&#58;35 [33154] GAHP[33345] -&#62; &#39;61&#39; &#39;1&#39; &#39;Error parsing classad or job not found&#39; &#39;0&#39; &#39;N/A&#39;
04/10/15 14&#58;56&#58;35 [33154] GAHP[33345] -&#62; &#39;60&#39; &#39;1&#39; &#39;Error parsing classad or job not found&#39; &#39;0&#39; &#39;N/A&#39;
04/10/15 14&#58;56&#58;35 [33154] GAHP[33345] -&#62; &#39;59&#39; &#39;1&#39; &#39;Error parsing classad or job not found&#39; &#39;0&#39; &#39;N/A&#39;

When I check the job ID, I get the following from the CE PBS script&#58;

[johns443@ce1 ~]$ /usr/libexec/blahp/pbs_status.py pbs/20150410/1215236
0[BatchJobId=&#34;1215236&#34;; WorkerNode=&#34;vmp602&#34;; JobStatus=2; ]
<div id='show_102275488' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_102275488'>[johns443@ce1 ~]$

and then from SLURM&#58;

[johns443@vmps15 ~]$ squeue -j 1215236 --long
Fri Apr 10 16&#58;35&#58;43 2015
JOBID PARTITION     NAME     USER    STATE       TIME TIME_LIMI  NODES NODELIST(REASON)
1215236 productio bl_c9459 uscms442  RUNNING    1&#58;42&#58;42 2-00&#58;00&#58;00      1 vmp602
[johns443@vmps15 ~]$

Is any of that data relevant or useful?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Sean Johnson 2789
</div><script type='text/javascript'>
        $('#show_102275488').click(function() {
            $('#detail_102275488').slideDown("normal");
            $('#show_102275488').hide();
            $('#hide_102275488').show();
        });
        $('#hide_102275488').click(function() {
            $('#detail_102275488').slideUp();
            $('#hide_102275488').hide();
            $('#show_102275488').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='24896#1428699343'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-10T20:55:43+00:00">Apr 10, 2015 08:55 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1428699343">&nbsp;</a></div><pre>Sean, here&#39;s a bigger slice of the GridmanagerLog that you attached that provides us more information&#58;

04/10/15 07&#58;18&#58;50 [35063] (890477.0) doEvaluateState called&#58; gmState GM_SUBMITTED, remoteState 0
04/10/15 07&#58;18&#58;50 [35063] (890477.0) gm state change&#58; GM_SUBMITTED -&#62; GM_POLL_ACTIVE
04/10/15 07&#58;18&#58;50 [35063] GAHP[35087] &#60;- &#39;BLAH_JOB_STATUS 61 pbs/20150410/1202898&#39;
04/10/15 07&#58;18&#58;50 [35063] GAHP[35087] -&#62; &#39;S&#39;
04/10/15 07&#58;18&#58;50 [35063] GAHP[35087] &#60;- &#39;RESULTS&#39;
04/10/15 07&#58;18&#58;50 [35063] GAHP[35087] -&#62; &#39;R&#39;
04/10/15 07&#58;18&#58;50 [35063] GAHP[35087] -&#62; &#39;S&#39; &#39;1&#39;
04/10/15 07&#58;18&#58;50 [35063] GAHP[35087] -&#62; &#39;61&#39; &#39;1&#39; &#39;Error parsing classad or job not found&#39; &#39;0&#39; &#39;N/A&#39;
04/10/15 07&#58;18&#58;50 [35063] (890477.0) doEvaluateState called&#58; gmState GM_POLL_ACTIVE, remoteState 0
04/10/15 07&#58;18&#58;50 [35063] (890477.0) blah_job_status() failed&#58; Error parsing classad or job not found
04/10/15 07&#58;18&#58;50 [35063] (890477.0) gm state change&#58; GM_POLL_ACTIVE -&#62; GM_HOLD
04/10/15 07&#58;18&#58;50 [35063] (890477.0) gm state change&#58; GM_HOLD -&#62; GM_DELETE

The interesting bits being the job ID&#39;s, 890477.0 and 1202898, for the routed and grid jobs respectively. We can start troubleshooting the SLURM job and seeing if it completed or errored out on that side. You can also try running&#58;

/usr/libexec/blahp/pbs_status.pyp bs/20150410/1202898

That may not provide anything useful so you may want to do that with a more recent entry from your GridmanagerLog</pre></div><div class='update_description'><i onclick="document.location='24896#1428686002'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-10T17:13:22+00:00">Apr 10, 2015 05:13 PM UTC</time> by <b>echism</b><a class="anchor" name="1428686002">&nbsp;</a></div><pre>I&#39;m sending this to the SW team for comment.

From the job router log, it looks like the mechanism that does things like update image size, CPU time and so on isn&#39;t configured, but in my setup, that works &#34;out of the box&#34; so I&#39;m not sure what to think of it. I looked for people who had a similar issue and found none. I looked through your job routes in your config dump and nothing jumped out as particularly zany.

To save you the trouble of combing through various updates&#58;
Here is the JobRouterLog&#58;
<a href='https&#58;//vanderbilt.box.com/s/3ln8a54i0wlikrzfduhnlrtr57pari9a' target='_blank' rel='nofollow'>https&#58;//vanderbilt.box.com/s/3ln8a54i0wlikrzfduhnlrtr57pari9a</a>

Here are links to a GridmanagerLog
<a href='https&#58;//vanderbilt.box.com/s/m4v6mwx6lekp733t8blllradbvdhyvvr' target='_blank' rel='nofollow'>https&#58;//vanderbilt.box.com/s/m4v6mwx6lekp733t8blllradbvdhyvvr</a>

and the output of condor_ce_config_val -dump on the same CE that the above log file came from.
<a href='https&#58;//vanderbilt.box.com/s/ti2rytrkc9kd0i33l2rw860sy12xdcgr' target='_blank' rel='nofollow'>https&#58;//vanderbilt.box.com/s/ti2rytrkc9kd0i33l2rw860sy12xdcgr</a></pre></div><div class='update_description'><i onclick="document.location='24896#1428681766'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-10T16:02:46+00:00">Apr 10, 2015 04:02 PM UTC</time><a class="anchor" name="1428681766">&nbsp;</a></div><pre>Thanks so much for helping with this. &#58;)

Here is the JobRouterLog&#58;

<a href='https&#58;//vanderbilt.box.com/s/3ln8a54i0wlikrzfduhnlrtr57pari9a' target='_blank' rel='nofollow'>https&#58;//vanderbilt.box.com/s/3ln8a54i0wlikrzfduhnlrtr57pari9a</a>

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Sean Johnson 2789</pre></div><div class='update_description'><i onclick="document.location='24896#1428681146'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-10T15:52:26+00:00">Apr 10, 2015 03:52 PM UTC</time> by <b>echism</b><a class="anchor" name="1428681146">&nbsp;</a></div><pre>Hey Sean,

My debug stuff is in your queue, but in the meantime, can you share your JobRouterLog?

Thank you</pre></div><div class='update_description'><i onclick="document.location='24896#1428676440'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-10T14:34:00+00:00">Apr 10, 2015 02:34 PM UTC</time><a class="anchor" name="1428676440">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Do you accept MIS or OSG VO jobs?</font>

I assume we accept OSG VO jobs for CMS.

<font color='#7F7E6F'>&#62; It&#39;s hard to tell without a bigger slice of the log, and also you may want to turn up the logging level while you&#39;re troubleshooting.</font>

FULLDEBUG is turned on.

Here are links to a GridmanagerLog

<a href='https&#58;//vanderbilt.box.com/s/m4v6mwx6lekp733t8blllradbvdhyvvr' target='_blank' rel='nofollow'>https&#58;//vanderbilt.box.com/s/m4v6mwx6lekp733t8blllradbvdhyvvr</a>

and the output of condor_ce_config_val -dump on the same CE that the above log file came from.

<a href='https&#58;//vanderbilt.box.com/s/ti2rytrkc9kd0i33l2rw860sy12xdcgr' target='_blank' rel='nofollow'>https&#58;//vanderbilt.box.com/s/ti2rytrkc9kd0i33l2rw860sy12xdcgr</a>

If there&#39;s any other information or actions that would be helpful in troubleshooting this, please let me know.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Sean Johnson 2789</pre></div><div class='update_description'><i onclick="document.location='24896#1428674538'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-10T14:02:18+00:00">Apr 10, 2015 02:02 PM UTC</time> by <b>echism</b><a class="anchor" name="1428674538">&nbsp;</a></div><pre>Sean,

It&#39;s hard to tell without a bigger slice of the log, and also you may want to turn up the logging level while you&#39;re troubleshooting.

Do you accept MIS or OSG VO jobs? I can run debugging stuff from either of those channels.</pre></div><div class='update_description'><i onclick="document.location='24896#1428673847'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-10T13:50:47+00:00">Apr 10, 2015 01:50 PM UTC</time><a class="anchor" name="1428673847">&nbsp;</a></div><pre>I&#39;m seeing a lot of these lines in the GridmanagerLog files on our CEs &#58;

04/10/15 05&#58;43&#58;39 [25887] GAHP[25900] -&#62; &#39;85&#39; &#39;1&#39; &#39;Error parsing classad or job not found&#39; &#39;0&#39; &#39;N/A&#39;

Is it known what this is a symptom of?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Sean Johnson 2789</pre></div><div class='update_description'><i onclick="document.location='24896#1428669770'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-10T12:42:50+00:00">Apr 10, 2015 12:42 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1428669770">&nbsp;</a></div><pre>stefano.belforte has subscribed to this ticket.

-- by stefano.belforte at Thu Apr 09 23&#58;07&#58;33 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1428609132'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-09T19:52:12+00:00">Apr 9, 2015 07:52 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1428609132">&nbsp;</a></div><pre>Hmmm. Well, let&#39;s wait and see if Brian or Derek get back to us on this since they&#39;ve seen this parsing error before and will likely understand better than you or I what might be going on.

Marty Kandes
UCSD Glidein Factory Operations

-- by Marty Kandes at Thu Apr 09 19&#58;51&#58;48 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1428608096'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-09T19:34:56+00:00">Apr 9, 2015 07:34 PM UTC</time><a class="anchor" name="1428608096">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; the error [2] appears to be due to some condor + pbs interaction. Did you move back to PBS yesterday after the attempt to changeover to SLURM?</font>

We changed over to SLURM in February, and no we haven&#39;t switch back to PBS. &#58;)

The condor-ce process passes jobs to SLURM via SLURM&#39;s qsub wrappers. This has also been in place since the transition, and hasn&#39;t changed.

The problem yesterday was due to the fact that the UIDs for the uscms accounts on our side were changed on the cluster, but not the CEs. Unfortunately, this was an oversight, and the ramifications were not immediately noticed. Late in the day it was noticed that there were large number of CMS jobs being assigned to the nobody account by SLURM. This was because they were coming in with a uscms ID that was mismatched. For example, if uscms4444 was UID 810 on the CEs, it had been changed on the cluster to UID 60810. When a job was submitted to SLURM via the CEs, and it was told that it belonged to uscms4444, that was now mapping to UID 810 on the cluster, which did not correspond to a user account that SLURM recognized as being allowed to run jobs, hence the assignment to the nobody account. It wasn&#39;t until late in the day that we realized all of this and updated the UIDs on the CEs for the uscms accounts to line up with those on the cluster. While this situation was occurring the number of jobs running via the Site Status Board was 0. After the UID update, it has been rising, albeit slowly.

If there is something else we should do to speed recovery along, I&#39;m absolutely open to suggestions. My understanding of the moving parts and their interactions or dependencies is not deep by any means. &#58;)

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Sean Johnson 2789</pre></div><div class='update_description'><i onclick="document.location='24896#1428607391'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-09T19:23:11+00:00">Apr 9, 2015 07:23 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1428607391">&nbsp;</a></div><pre>*added osg-gfactory-support mailing list

-- by Marty Kandes at Thu Apr 09 19&#58;22&#58;39 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1428607273'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-09T19:21:13+00:00">Apr 9, 2015 07:21 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1428607273">&nbsp;</a></div><pre>Hi Sean,

Let&#39;s move and consolidate the Vanderbilt discussion here. If you look above in note [3] in update#3, the error [2] appears to be due to some condor + pbs interaction. Did you move back to PBS yesterday after the attempt to changeover to SLURM? Also, are you sure the increasing job numbers you are seeing are due to fecmsglobal glideins?

Marty Kandes
UCSD Glidein Factory Operations

-- by Marty Kandes at Thu Apr 09 19&#58;20&#58;01 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a></pre></div><div class='update_description'><i onclick="document.location='24896#1428606634'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-09T19:10:34+00:00">Apr 9, 2015 07:10 PM UTC</time><a class="anchor" name="1428606634">&nbsp;</a></div><pre>My understanding is this was due to UID mismatches yesterday. The situation has since been rectified, and as new Glideins come in they are successful, but ones that came in yesterday need to age out.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Sean Johnson 2789</pre></div><div class='update_description'><i onclick="document.location='24896#1428601213'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-09T17:40:13+00:00">Apr 9, 2015 05:40 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1428601213">&nbsp;</a></div><pre>Dear experts,

It seems that we have some problems with T2_US_Vanderbilt. Farrukh informed that this is because of the expired proxy.

Could you please have a look at the issue?

Regards,
Site Support Team

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=112928</a>

[Ticket History]
Notified CMS Glidein Factory team of this ticket.Subject&#58; T2_US_Vanderbilt - factory problem
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-site-support-team@....;farrukh.aftab.khan@....;justas.balcas@....
-- by Ali Mehmet Altundag at Thu Apr 09 11&#58;37&#58;18 UTC 2015

Hi,

The problem is not with any expired proxy, the glideins are going held and report the following hold reason&#58;

GridJobId = &#34;condor ce1.accre.vanderbilt.edu ce1.accre.vanderbilt.edu&#58;9619 885503.0&#34;
GridJobStatus = &#34;HELD&#34;
GridResource = &#34;condor ce1.accre.vanderbilt.edu ce1.accre.vanderbilt.edu&#58;9619&#34;
HoldReasonCode = 0
HoldReason = &#34;Failed to get expiration time of proxy&#34;
HoldReasonSubCode = 0

I took this from the CERN factory. I see from GOC monitoring that there are a bunch of held glideins there too. Can you please follow up with the site?

Thanks and best regards,
Farrukh

-- by Farrukh Khan at Thu Apr 09 11&#58;47&#58;34 UTC 2015
<div id='show_843830476' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_843830476'>
<a href='https&#58;//hypernews.cern.ch/HyperNews/CMS/get/comp-ops/2226.html' target='_blank' rel='nofollow'>https&#58;//hypernews.cern.ch/HyperNews/CMS/get/comp-ops/2226.html</a>

-- by Ali Mehmet Altundag at Thu Apr 09 13&#58;43&#58;04 UTC 2015

Hi Vanderbilt admins,

Unfortunately, I am not seeing the same proxy error Farrukh mentioned above. However, I am seeing the held glideins at the gatekeepers [1] with the error [2]. This could be a condor+pbs communication issue according to what I read here [3]. I&#39;ve added Brian and Derek from [3] to this ticket to help.

Marty Kandes
UCSD Glidein Factory Operations

[1]

ce1.accre.vanderbilt.edu
ce2.accre.vanderbilt.edu

[2]

2142818.5   fecmsglobal     4/9  16&#58;46 Error parsing classad or job not found

[3]

<a href='http&#58;//comments.gmane.org/gmane.comp.distributed.condor.user/30278' target='_blank' rel='nofollow'>http&#58;//comments.gmane.org/gmane.comp.distributed.condor.user/30278</a>

-- by Marty Kandes at Thu Apr 09 17&#58;39&#58;14 UTC 2015
</div><script type='text/javascript'>
        $('#show_843830476').click(function() {
            $('#detail_843830476').slideDown("normal");
            $('#show_843830476').hide();
            $('#hide_843830476').show();
        });
        $('#hide_843830476').click(function() {
            $('#detail_843830476').slideUp();
            $('#hide_843830476').hide();
            $('#show_843830476').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F24896">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
