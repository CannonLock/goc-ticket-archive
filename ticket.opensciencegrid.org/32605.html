<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[32605] UPITT transfer failures (connection error)</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=32605" method="post">
<div class="page-header">
    <h3><span class="muted">32605</span> / UPITT transfer failures (connection error)</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Xiaohu.Sun </div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">ATLAS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Xiaohu.Sun</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USATLAS_Tier3</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Resolved</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-05-05</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=126396">126396</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">USATLAS (BNL Prod)&nbsp;<a target="_blank" href="https://rt.racf.bnl.gov/rt/Ticket/Display.html?id=26941">26941</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/32605", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/32605?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/32605?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20UPITT%20transfer%20failures%20%28connection%20error%29%20ISSUE%3D32605%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='32605#1494979195'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-16T23:59:55+00:00">May 16, 2017 11:59 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1494979195">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.

-- by GGUS SYSTEM at Tue May 16 23&#58;59&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126396' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126396</a></pre></div><div class='update_description'><i onclick="document.location='32605#1493665416'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-01T19:03:36+00:00">May 1, 2017 07:03 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1493665416">&nbsp;</a></div><pre>Hi Gracie,

Thank you for the update. I&#39;ll resolve this since the issue appears to be resolved/alleviated but please let us know if this reoccurs.

Thanks!
Vince</pre></div><div class='update_description'><i onclick="document.location='32605#1493657051'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-01T16:44:11+00:00">May 1, 2017 04:44 PM UTC</time> by <b>gjgollinger@....</b><a class="anchor" name="1493657051">&nbsp;</a></div><pre>Vince,

It&#39;s been forwarded to one of the network ops, but I haven&#39;t heard from
him specifically.  That said, Ben Carlson did say that the speed had
drastically improved once the backlog of requests completed.

-- Gracie Jane

On 05/01/2017 12&#58;39 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32605#1493656750'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-01T16:39:10+00:00">May 1, 2017 04:39 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1493656750">&nbsp;</a></div><pre>Hi Gracie,

Have you heard anything from your Network Ops team?

Vince</pre></div><div class='update_description'><i onclick="document.location='32605#1493039722'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-24T13:15:22+00:00">Apr 24, 2017 01:15 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1493039722">&nbsp;</a></div><pre>Thank you for the update.  Please keep us posted on what they may find.</pre></div><div class='update_description'><i onclick="document.location='32605#1492710613'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-20T17:50:13+00:00">Apr 20, 2017 05:50 PM UTC</time> by <b>gjgollinger@....</b><a class="anchor" name="1492710613">&nbsp;</a></div><pre>Okay, I have also asked for assistance from our Network Ops, who manage
the PerfSonar instance here, in case they see anything amiss there.

-- Gracie Jane Gollinger

On 04/20/2017 01&#58;46 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32605#1492710358'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-20T17:45:58+00:00">Apr 20, 2017 05:45 PM UTC</time> by <b>echism</b><a class="anchor" name="1492710358">&nbsp;</a></div><pre>Okay so let&#39;s check on this next week when the backlog is through. If there&#39;s still an issue at that time perhaps we can help with network debugging.</pre></div><div class='update_description'><i onclick="document.location='32605#1492678730'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-20T08:58:50+00:00">Apr 20, 2017 08:58 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1492678730">&nbsp;</a></div><pre>So, I would say that xroot issue is solved. But there is a lot of timeouts. It is caused by very low throughput. In the last 4 hours, it is about 200 kB/s.

Transfer plots&#58;
<a href='http&#58;//dashb-atlas-ddm.cern.ch/ddm2/#activity=%28Analysis+Logs+OS+Upload' target='_blank' rel='nofollow'>http&#58;//dashb-atlas-ddm.cern.ch/ddm2/#activity=%28Analysis+Logs+OS+Upload</a>,Analysis+Logs+Upload,Data+Brokering,Data+Consolidation,Data+Export+Test,Data+Rebalancing,Debug,Deletion,Event+Service+Download,Event+Service+Upload,Express,Functional+Test,Group+Subscriptions,Production,Production+Input,Production+Logs+OS+Upload,Production+Logs+Upload,Production+Output,Recovery,Staging,T0+Export,T0+Tape,User+Subscriptions,default,on,on,rucio-integration,test,test%3AT0_T1+export,test%3AT1_T2+export,testactivity10,testactivity20,testactivity70%29&date.from=201704200450&date.interval=0&date.to=201704200850&dst.cloud=%28%22US%22%29&dst.site=%28%22UPITT%22%29&grouping.dst=%28cloud,site,token%29&m.content=%28d_dot,d_eff,s_eff,s_thr,t_eff,t_err,t_suc,t_thr%29&samples=true&tab=transfer_plots

-- by Michal.Svatos at Thu Apr 20 08&#58;58&#58;01 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126396' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126396</a></pre></div><div class='update_description'><i onclick="document.location='32605#1492588477'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-19T07:54:37+00:00">Apr 19, 2017 07:54 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1492588477">&nbsp;</a></div><pre>Hi,
yes we see successful transfers to UPITT. In the last 4 hours, I don&#39;t see any of those &#34;could not open connection to atlas-dtn.phyast.pitt.edu&#58;8443&#34;. There is a lot of failures too but that can be from overload caused by transfer backlog. So, I would wait a little bit before closing this ticket.

-- by Michal.Svatos at Wed Apr 19 07&#58;53&#58;28 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126396' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126396</a></pre></div><div class='update_description'><i onclick="document.location='32605#1492544352'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-18T19:39:12+00:00">Apr 18, 2017 07:39 PM UTC</time> by <b>gjgollinger@....</b><a class="anchor" name="1492544352">&nbsp;</a></div><pre>OSG -- we may have solved the xrootd issue locally; can you confirm on
your end that you see replications happening correctly to our SRM endpoint?

Thanks,

-- Gracie Jane Gollinger

On 04/12/2017 07&#58;45 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32605#1492040717'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-12T23:45:17+00:00">Apr 12, 2017 11:45 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1492040717">&nbsp;</a></div><pre>Hi try this config file on the fnode assuming it is a stand alone xrootd file
server
-------------
#COMMON INFORMATION

set exportpath = /atlas

# change to follow your local convention if different
set localroot = /data

all.adminpath /var/spool/xrootd/admin
xrootd.trace all
all.export $(exportpath)
all.role server
xrd.port 1094 if exec xrootd

oss.localroot $(localroot)
xrootd.chksum max 3 adler32 /usr/bin/xrdadler32

xrootd.seclib /usr/lib64/libXrdSec.so
sec.protocol /usr/lib64 unix
# this is the authorization file
acc.authdb /etc/xrootd/auth_file
ofs.authorize

all.export $(exportpath) r/w
#all.export $(exportpath)/local r/w

oss.xfr deny 10m
------------

What does /etc/sysconfig/xrootd look like.
Please restart xrootd daemon after you try this new file.

Are all of the nodes on a private network? cluster nodes and dtn node?
<div id='show_931118025' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_931118025'>
on the fnode what is the result of the commands

hostname -s
hostname -f
hostname -A

What does the network routing table look like on the dtn node and the fnode.

How is the fnode storage presented on the dtn node?

What does the command

traceroute -T -p 1094 fnode

output look like?
-- by benjamin@.... at Wed Apr 12 23&#58;45&#58;05 UTC 2017

GOCTX Source&#58; BNL Ticket&#58; Queue=USAtlasTier3 ID=26941
</div><script type='text/javascript'>
        $('#show_931118025').click(function() {
            $('#detail_931118025').slideDown("normal");
            $('#show_931118025').hide();
            $('#hide_931118025').show();
        });
        $('#hide_931118025').click(function() {
            $('#detail_931118025').slideUp();
            $('#hide_931118025').hide();
            $('#show_931118025').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32605#1492038613'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-12T23:10:13+00:00">Apr 12, 2017 11:10 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1492038613">&nbsp;</a></div><pre>Hi,
Have not had time to look at the configuration files.

Doug

-- by benjamin@.... at Wed Apr 12 23&#58;09&#58;57 UTC 2017

GOCTX Source&#58; BNL Ticket&#58; Queue=USAtlasTier3 ID=26941</pre></div><div class='update_description'><i onclick="document.location='32605#1492025893'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-12T19:38:13+00:00">Apr 12, 2017 07:38 PM UTC</time> by <b>gjgollinger@....</b><a class="anchor" name="1492025893">&nbsp;</a></div><pre>Marian,

I had sent Doug our config files last week, but have not heard back from
him.

The issue is that our SRM endpoint node (atlas-dtn.phyast.pitt.edu on
its external interface, dtn.atlaspitt on the internal) and filesystem
node (atlas-fnode.phyast.pitt.edu & fnode.atlaspitt) are on separate
machines, and for whatever reason the xrootd client on the endpoint will
not communicate with our filesystem node.  (All the other nodes in the
cluster can do so.)  When trying on dtn.atlaspitt to mount or even
communicate with fnode.atlaspitt via xrootd, it freezes and eventually
times out.  There is no entry in the logfile on fnode.atlaspitt of any
attempt to connect.  The physical file location that SRM points to is on
this xrootd mount point.

dtn.atlaspitt and fnode.atlaspitt are both connected to the same 10Gbps
switch internally, and xrootd should be going over that connection.
They also each have external networks that they communicate on, but are
separated by a firewall and don&#39;t (and shouldn&#39;t) communicate over it.
(In dtn&#39;s case, that is our 10Gbps ScienceDMZ pipeline; In fnode&#39;s case,
it&#39;s a regular firewalled 1Gbps connection to the campus network.)  I
suspect xrootd is trying to communicate over their respective external
networks, which is doomed to failure and not what we want anyway.

Let me know if you need any config or log files.  Thanks,

-- Gracie Jane

On 04/12/2017 03&#58;23 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32605#1492025001'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-12T19:23:21+00:00">Apr 12, 2017 07:23 PM UTC</time><a class="anchor" name="1492025001">&nbsp;</a></div><pre>Gracie&#58;

I&#39;m going to step in here and try to help. Did you say earlier Doug was looking at your xrootd issues? Were they fixed or you&#39;re having same problems? Though, I can&#39;t decipher from conversation below what sort of xrootd issues you&#39;re dealing with. Could you describe more in detail your xrootd setup and configuration?

Hope that helps and moves us forward a bit.

Thanks,
Marian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=zvada/CN=684832/CN=Marian Zvada</pre></div><div class='update_description'><i onclick="document.location='32605#1492009728'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-12T15:08:48+00:00">Apr 12, 2017 03:08 PM UTC</time> by <b>echism</b><a class="anchor" name="1492009728">&nbsp;</a></div><pre>It doesn&#39;t seem like ATLAS has chimed in here, software can you help?

Thanks</pre></div><div class='update_description'><i onclick="document.location='32605#1491424331'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-05T20:32:11+00:00">Apr 5, 2017 08:32 PM UTC</time> by <b>gjgollinger@....</b><a class="anchor" name="1491424331">&nbsp;</a></div><pre>All,

A new problem has arisen where our DTN (atlas-dtn.phyast) is unable to
communicate with our file storage node.  This prevents the SRM from
accessing its designated location on the file storage nodes.  xrootd is
used to communicate between the DTN and the file storage node.  I&#39;m not
terribly familiar with the inner workings of xrootd in this regard, so
any assistance that can be provided would be greatly appreciated.

-- Gracie Jane

On 04/05/2017 01&#58;03 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32605#1491411798'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-05T17:03:18+00:00">Apr 5, 2017 05:03 PM UTC</time> by <b>echism</b><a class="anchor" name="1491411798">&nbsp;</a></div><pre>Is there anything new on this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='32605#1490811054'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-29T18:10:54+00:00">Mar 29, 2017 06:10 PM UTC</time> by <b>echism</b><a class="anchor" name="1490811054">&nbsp;</a></div><pre>Is there anything new on this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='32605#1490121278'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-21T18:34:38+00:00">Mar 21, 2017 06:34 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490121278">&nbsp;</a></div><pre>I have not heard either way from anyone this week (I asked last on
Wednesday).

-- Gracie Jane (gjgollinger@....)

On 03/17/2017 03&#58;35 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
-- by gjgollinger@.... at Fri Mar 17 20&#58;08&#58;09 UTC 2017
-- by osg-goc-rest at Fri Mar 17 20&#58;09&#58;20 UTC 2017

GOCTX Source&#58; BNL Ticket&#58; Queue=USAtlasTier3 ID=26941</pre></div><div class='update_description'><i onclick="document.location='32605#1490121250'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-21T18:34:10+00:00">Mar 21, 2017 06:34 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1490121250">&nbsp;</a></div><pre>I have not heard either way from anyone this week (I asked last on
Wednesday).

-- Gracie Jane (gjgollinger@....)

On 03/17/2017 03&#58;35 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>

-- by gjgollinger@.... (via Footprints) at Fri Mar 17 20&#58;09&#58;10 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126396' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126396</a></pre></div><div class='update_description'><i onclick="document.location='32605#1489781289'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-17T20:08:09+00:00">Mar 17, 2017 08:08 PM UTC</time> by <b>gjgollinger@....</b><a class="anchor" name="1489781289">&nbsp;</a></div><pre>I have not heard either way from anyone this week (I asked last on
Wednesday).

-- Gracie Jane (gjgollinger@....)

On 03/17/2017 03&#58;35 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32605#1489779331'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-17T19:35:31+00:00">Mar 17, 2017 07:35 PM UTC</time> by <b>echism</b><a class="anchor" name="1489779331">&nbsp;</a></div><pre>Is there anything new on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='32605#1489160728'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-10T15:45:28+00:00">Mar 10, 2017 03:45 PM UTC</time> by <b>echism</b><a class="anchor" name="1489160728">&nbsp;</a></div><pre>Does /var/log/messages show the connection attempts?

Thanks</pre></div><div class='update_description'><i onclick="document.location='32605#1489000091'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-08T19:08:11+00:00">Mar 8, 2017 07:08 PM UTC</time> by <b>gjgollinger@....</b><a class="anchor" name="1489000091">&nbsp;</a></div><pre>Elizabeth,

Ports 2811 and 8443 are open to our DTN.

-- Gracie Jane

On 03/08/2017 01&#58;53 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32605#1488999204'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-08T18:53:24+00:00">Mar 8, 2017 06:53 PM UTC</time> by <b>echism</b><a class="anchor" name="1488999204">&nbsp;</a></div><pre>If no one has specified, this is on port 8443, which is a commonly forbidden port at many institutions.

Thank you</pre></div><div class='update_description'><i onclick="document.location='32605#1488999190'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-08T18:53:10+00:00">Mar 8, 2017 06:53 PM UTC</time> by <b>gjgollinger@....</b><a class="anchor" name="1488999190">&nbsp;</a></div><pre>Elizabeth,

This is a [separate] error on the cluster-side, so it should be directed
to me.  I&#39;m working with Doug Benjamin to figure out what is going wrong
(it&#39;s an xrootd issue.)

-- Gracie Jane Gollinger

On 03/08/2017 01&#58;50 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32605#1488999005'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-08T18:50:05+00:00">Mar 8, 2017 06:50 PM UTC</time> by <b>echism</b><a class="anchor" name="1488999005">&nbsp;</a></div><pre>Hey Marc,

I see 2,500+ failed transfers in the last 24 hours with the same &#34;couldn&#39;t open connection&#34; warning.

<a href='http&#58;//dashb-atlas-ddm.cern.ch/ddm2/#activity=' target='_blank' rel='nofollow'>http&#58;//dashb-atlas-ddm.cern.ch/ddm2/#activity=</a>(Data+Brokering,Data+Consolidation,Deletion,Express,Functional+Test,Group+Subscriptions,Production,Production+Input,Production+Output,Recovery,Staging,T0+Export,T0+Tape,User+Subscriptions,default,on)&d.dst.cloud=%22US%22&d.dst.site=%22UPITT%22&d.dst.token=%22LOCALGROUPDISK%22&d.error_code=261&d.state=(TRANSFER_FAILED)&date.interval=1440&dst.cloud=(%22US%22)&dst.site=(%22UPITT%22)&grouping.dst=(cloud,site,token)&m.content=(d_dof,d_eff,d_faf,s_eff,s_err,s_suc,t_eff,t_err,t_suc)&samples=true&src.site=(-TEST,-RDF,-AWS,-CEPH)&src.tier=(0,1,2)&src.token=(-TEST,-CEPH,-PPS,-GRIDFTP)&tab=details

Thank you</pre></div><div class='update_description'><i onclick="document.location='32605#1488837551'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-06T21:59:11+00:00">Mar 6, 2017 09:59 PM UTC</time> by <b>lucci@....</b><a class="anchor" name="1488837551">&nbsp;</a></div><pre>The issue seems to have been from the server. I just checked and it look to have been resolved.

Thank you,

Marc Lucci
Network Engineer | University of Pittsburgh | T&#58; (412) 624-6402 | E&#58;  lucci@....&#60;mailto&#58;lucci@....&#62;

Da&#58; Open Science Grid FootPrints [mailto&#58;osg@....]
Inviato&#58; lunedì 6 marzo 2017 16&#58;55
A&#58; Lucci, Marc Allen &#60;LUCCI@....&#62;
Oggetto&#58; Open Science Grid&#58; UPITT transfer failures (connection error) ISSUE=32605 PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='32605#1488837307'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-06T21:55:07+00:00">Mar 6, 2017 09:55 PM UTC</time> by <b>echism</b><a class="anchor" name="1488837307">&nbsp;</a></div><pre>Mark,

Anything further on this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='32605#1488400143'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-01T20:29:03+00:00">Mar 1, 2017 08:29 PM UTC</time> by <b>echism</b><a class="anchor" name="1488400143">&nbsp;</a></div><pre>Mark,

Historically, the error we&#39;re seeing here has been a network problem generally

Here are similar cases&#58;
<a href='http&#58;//ticket.grid.iu.edu/32154' target='_blank' rel='nofollow'>http&#58;//ticket.grid.iu.edu/32154</a>
<a href='http&#58;//ticket.grid.iu.edu/31568' target='_blank' rel='nofollow'>http&#58;//ticket.grid.iu.edu/31568</a>

Thank you</pre></div><div class='update_description'><i onclick="document.location='32605#1488224890'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-27T19:48:10+00:00">Feb 27, 2017 07:48 PM UTC</time> by <b>echism</b><a class="anchor" name="1488224890">&nbsp;</a></div><pre>I&#39;m CCing Mark Lucci on this ticket who is part of the UPITT networks team. Gracie has been working with Doug Benjamin and they believe it&#39;s a firewall issue.</pre></div><div class='update_description'><i onclick="document.location='32605#1487884155'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-23T21:09:15+00:00">Feb 23, 2017 09:09 PM UTC</time> by <b>gjgollinger@....</b><a class="anchor" name="1487884155">&nbsp;</a></div><pre>I did not receive a call on this issue (assuming I was the one being
called).  Please use my mobile number&#58; 724-590-0330.

Gracie Jane Gollinger | gjgollinger@.... | 121 OEH
CSSD Consulting Services, Dept. of Physics & Astronomy

On 02/23/2017 04&#58;00 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32605#1487883615'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-23T21:00:15+00:00">Feb 23, 2017 09:00 PM UTC</time> by <b>echism</b><a class="anchor" name="1487883615">&nbsp;</a></div><pre>I called but no one answered my calls. I&#39;ll try tomorrow.</pre></div><div class='update_description'><i onclick="document.location='32605#1487628607'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-20T22:10:07+00:00">Feb 20, 2017 10:10 PM UTC</time> by <b>echism</b><a class="anchor" name="1487628607">&nbsp;</a></div><pre>Hello,

We&#39;ve heard nothing on this. Have you had a chance to look into it?

Thank you</pre></div><div class='update_description'><i onclick="document.location='32605#1487105545'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-14T20:52:25+00:00">Feb 14, 2017 08:52 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1487105545">&nbsp;</a></div><pre>Hello Admins,

Please update this ticket once you&#39;ve had time to review the issue.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='32605#1486748436'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-10T17:40:36+00:00">Feb 10, 2017 05:40 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1486748436">&nbsp;</a></div><pre>Hello Admins,

Please update this ticket once you&#39;ve had time to review the issue.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='32605#1486500143'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-07T20:42:23+00:00">Feb 7, 2017 08:42 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1486500143">&nbsp;</a></div><pre>Hello Admins,

Please update this ticket once you&#39;ve had time to review the issue.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='32605#1486371332'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-06T08:55:32+00:00">Feb 6, 2017 08:55 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1486371332">&nbsp;</a></div><pre>Dear experts,

UPITT is experiencing transfer failure.

Typical error&#58;
TRANSFER DESTINATION OVERWRITE srm-ifce err&#58; Communication error on send, err&#58; [SE][srmRm][] httpg&#58;//atlas-dtn.phyast.pitt.edu&#58;8443/srm/v2/server&#58; CGSI-gSOAP running on fts301.usatlas.bnl.gov reports could not open connection to atlas-dtn.phyast.pitt.edu&#58;8443

DDM link&#58;
<a href='http&#58;//dashb-atlas-ddm.cern.ch/ddm2/#activity=' target='_blank' rel='nofollow'>http&#58;//dashb-atlas-ddm.cern.ch/ddm2/#activity=</a>(Data+Brokering,Data+Consolidation,Deletion,Express,Functional+Test,Group+Subscriptions,Production,Production+Input,Production+Output,Recovery,Staging,T0+Export,T0+Tape,User+Subscriptions,default,on)&d.dst.cloud=%22US%22&d.dst.site=%22UPITT%22&d.dst.token=%22LOCALGROUPDISK%22&d.error_code=261&d.state=(TRANSFER_FAILED)&date.from=201702060440&date.interval=0&date.to=201702060840&dst.cloud=(%22US%22)&dst.site=(%22UPITT%22)&grouping.dst=(cloud,site,token)&m.content=(d_dof,d_eff,d_faf,s_eff,s_err,s_suc,t_eff,t_err,t_suc)&samples=true&src.site=(-TEST,-RDF,-AWS,-CEPH)&src.tier=(0,1,2)&src.token=(-TEST,-CEPH,-PPS,-GRIDFTP)&tab=details

Best,
Xiaohu

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126396' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126396</a>

[Ticket History]
Subject&#58; UPITT transfer failures (connection error)
Ticket Type&#58; TEAM
CC&#58; atlas-adc-cloud-US@....;
-- by Xiaohu.Sun at Mon Feb 06 08&#58;54&#58;23 UTC 2017</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F32605">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 32605});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
