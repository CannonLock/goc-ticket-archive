<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[36064] T1_US_FNAL HammerCloud jobs failing</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="robots" content="noindex, nofollow" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=36064" method="post">
<div class="page-header">
    <h3><span class="muted">36064</span> / T1_US_FNAL HammerCloud jobs failing</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Maria Acosta</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Maria Acosta</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2018-02-23</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000925637">INC000000925637</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=133398">133398</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/36064", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='36064#1520553557'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-08T23:59:17+00:00">Mar 8, 2018 11:59 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1520553557">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according to your expectations or if you need further information, please submit a new ticket referencing this one.&#13;

-- by GGUS SYSTEM at Thu Mar 08 23&#58;59&#58;00 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a></pre></div><div class='update_description'><i onclick="document.location='36064#1519243276'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-21T20:01:16+00:00">Feb 21, 2018 08:01 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1519243276">&nbsp;</a></div><pre>Update ---

Things are back to normal and we now have regular HC jobs running smoothly!

Yujun and I did some debugging with an HC-ish test job and traced the file interactions at the cmsd logs [1]. The server was conflicting between serving the file and avoiding to do so within seconds.. We believe this was probably caused by the site redirector losing subscription to dCache. Explains why remote reads were preferred even when the files were present at the local disk. In the end, it was solved by just restarting cmsxrootd-site1/2 redirectors.

This whole situation revealed a bug somewhere in ROOT, where the basket buffer gets corrupted in between the oscillation of local and remote reads. We&#39;re working on getting rid of this with Philippe, but for now FNAL is free of guilt, so I&#39;m closing this.

Thanks!

Maria A.

[1] /store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/72EBD77E-0576-E711-8B0B-FA163E58A3F4.root
180220 10&#58;44&#58;13 26392 cmsprod.1410353&#58;108@cmswn2182 do_Select&#58;
/store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/72EBD77E-0576-E711-8B0B-FA163E58A3F4.root
180220 10&#58;44&#58;13 26392 SelNode cmsxrootd-site1.fnal.gov serving
/store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/72EBD77E-0576-E711-8B0B-FA163E58A3F4.root
180220 10&#58;44&#58;13 26392 cmsprod.1410353&#58;108@cmswn2182 do_Select&#58; Redirect -&#62;
cmsxrootd-site1.fnal.gov&#58;1093 for
/store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/72EBD77E-0576-E711-8B0B-FA163E58A3F4.root
180220 10&#58;45&#58;07 26408 cmsprod.1410353&#58;108@cmswn2182 do_Select&#58;
/store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/72EBD77E-0576-E711-8B0B-FA163E58A3F4.root
avoiding cmsxrootd-site1.fnal.govcmsxrootd-site1/2 redirectors were restarted.&#13;

-- by Maria Acosta at Wed Feb 21 20&#58;00&#58;42 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a></pre></div><div class='update_description'><i onclick="document.location='36064#1519144715'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-20T16:38:35+00:00">Feb 20, 2018 04:38 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1519144715">&nbsp;</a></div><pre>And as we continue...

Begin processing the 1670th record. Run 1, Event 405470, LumiSection 1352 at 20-Feb-2018 17&#58;35&#58;25.636 CET
Begin processing the 1671st record. Run 1, Event 405471, LumiSection 1352 at 20-Feb-2018 17&#58;35&#58;25.912 CET
%MSG-w XrdAdaptor&#58;  PostModuleEvent 20-Feb-2018 17&#58;35&#58;26 CET  Run&#58; 1 Event&#58; 405471
Data is now served from T2_US_Vanderbilt instead of previous T2_US_Caltech, T2_US_Vanderbilt
%MSG
Begin processing the 1672nd record. Run 1, Event 405472, LumiSection 1352 at 20-Feb-2018 17&#58;35&#58;30.139 CET
Begin processing the 1673rd record. Run 1, Event 405473, LumiSection 1352 at 20-Feb-2018 17&#58;35&#58;30.529 CET
Begin processing the 1674th record. Run 1, Event 405474, LumiSection 1352 at 20-Feb-2018 17&#58;35&#58;30.823 CET

...

and eventually

Begin processing the 1982nd record. Run 1, Event 422882, LumiSection 1410 at 20-Feb-2018 17&#58;36&#58;55.772 CET
Begin processing the 1983rd record. Run 1, Event 422883, LumiSection 1410 at 20-Feb-2018 17&#58;36&#58;55.951 CET
----- Begin Fatal Exception 20-Feb-2018 17&#58;36&#58;56 CET-----------------------
An exception of category &#39;FileReadError&#39; occurred while
[0] Processing  Event run&#58; 1 lumi&#58; 1410 event&#58; 422883 stream&#58; 0
[1] Running path &#39;MINIAODSIMoutput_step&#39;
[2] Prefetching for module PoolOutputModule/&#39;MINIAODSIMoutput&#39;
[3] Calling method for module OniaPhotonConversionProducer/&#39;oniaPhotonCandidates&#39;
[4] Processing  Event run&#58; 1 lumi&#58; 1410 event&#58; 422883 stream&#58; 0
[5] Running path &#39;MINIAODSIMoutput_step&#39;
[6] Prefetching for module PoolOutputModule/&#39;MINIAODSIMoutput&#39;
[7] Calling method for module ReducedEGProducer/&#39;reducedEgamma&#39;
[8] Processing  Event run&#58; 1 lumi&#58; 1410 event&#58; 422883 stream&#58; 0
[9] Running path &#39;MINIAODSIMoutput_step&#39;
[10] Prefetching for module PoolOutputModule/&#39;MINIAODSIMoutput&#39;
[11] Prefetching for module PATMETSlimmer/&#39;slimmedMETs&#39;
[12] Prefetching for module CorrectedPATMETProducer/&#39;patPFMetT1TauEnUp&#39;
[13] Prefetching for module ShiftedParticleMETcorrInputProducer/&#39;shiftedPatMETCorrTauEnUp&#39;
[14] Prefetching for module PATTauSelector/&#39;selectedPatTaus&#39;
[15] Calling method for module PATTauProducer/&#39;patTaus&#39;
<div id='show_908195947' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_908195947'>[16] Processing  Event run&#58; 1 lumi&#58; 1410 event&#58; 422883 stream&#58; 0
[17] Running path &#39;MINIAODSIMoutput_step&#39;
[18] Prefetching for module PoolOutputModule/&#39;MINIAODSIMoutput&#39;
[19] Prefetching for module PATMETSlimmer/&#39;slimmedMETs&#39;
[20] Prefetching for module PATMETProducer/&#39;patMETs&#39;
[21] Prefetching for module PATJetCleaner/&#39;cleanedPatJets&#39;
[22] Prefetching for module PATMuonSelector/&#39;selectedPatMuons&#39;
[23] Calling method for module PATMuonProducer/&#39;patMuons&#39;
[24] Rethrowing an exception that happened on a different thread.
[25] Reading branch recoTracks_standAloneMuons__RECO.
Additional Info&#58;
[a] Fatal Root Error&#58; @SUB=TBasket&#58;&#58;ReadBasketBuffers
basket&#58; has fNevBuf=0 but fEntryOffset=0, pos=233651001, len=442, fNbytes=0, fObjlen=0, trying to repair

----- End Fatal Exception -------------------------------------------------
20-Feb-2018 17&#58;36&#58;56 CET  Closed file root&#58;//cms-xrd-global.cern.ch//store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/DAE12CC5-0176-E711-BDE5-FA163E057847.root

None of this involved FNAL in this case.&#13;

-- by David Mason at Tue Feb 20 16&#58;38&#58;19 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a>
</div><script type='text/javascript'>
        $('#show_908195947').click(function() {
            $('#detail_908195947').slideDown("normal");
            $('#show_908195947').hide();
            $('#hide_908195947').show();
        });
        $('#hide_908195947').click(function() {
            $('#detail_908195947').slideUp();
            $('#hide_908195947').hide();
            $('#show_908195947').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='36064#1519144174'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-20T16:29:34+00:00">Feb 20, 2018 04:29 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1519144174">&nbsp;</a></div><pre>Yes but its not a FNAL specific thing.  I reproduce this running from different redirectors.  The following was done from CERN lxplus,  -- nothing to do with FNAL&#58;

-bash-4.1$ cmsRun pat_PAT.py
20-Feb-2018 17&#58;24&#58;20 CET  Initiating request to open file root&#58;//cms-xrd-global.cern.ch//store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/DAE12CC5-0176-E711-BDE5-FA163E057847.root
%MSG-w XrdAdaptor&#58;  file_open 20-Feb-2018 17&#58;24&#58;24 CET pre-events
Data is served from T2_US_Vanderbilt instead of original site CERN-PROD
%MSG
----- Begin Fatal Exception 20-Feb-2018 17&#58;24&#58;24 CET-----------------------
An exception of category &#39;FileOpenError&#39; occurred while
[0] Constructing the EventProcessor
[1] Constructing input source of type PoolSource
[2] Calling RootFileSequenceBase&#58;&#58;initTheFile()
Additional Info&#58;
[a] Input file root&#58;//cms-xrd-global.cern.ch//store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/DAE12CC5-0176-E711-BDE5-FA163E057847.root could not be opened.
[b] Fatal Root Error&#58; @SUB=TStorageFactoryFile&#58;&#58;Init
root&#58;//cms-xrd-global.cern.ch//store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/DAE12CC5-0176-E711-BDE5-FA163E057847.root not a ROOT file

----- End Fatal Exception -------------------------------------------------
-bash-4.1$ mv ~/pat_PAT.py .
-bash-4.1$ cmsRun pat_PAT.py
20-Feb-2018 17&#58;25&#58;17 CET  Initiating request to open file root&#58;//cms-xrd-global.cern.ch//store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/DAE12CC5-0176-E711-BDE5-FA163E057847.root
%MSG-w XrdAdaptor&#58;  file_open 20-Feb-2018 17&#58;25&#58;21 CET pre-events
Data is served from T2_US_Caltech instead of original site CERN-PROD
%MSG
20-Feb-2018 17&#58;25&#58;23 CET  Successfully opened file root&#58;//cms-xrd-global.cern.ch//store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/DAE12CC5-0176-E711-BDE5-FA163E057847.root
Begin processing the 1st record. Run 1, Event 3901, LumiSection 14 at 20-Feb-2018 17&#58;26&#58;18.512 CET
Begin processing the 2nd record. Run 1, Event 3902, LumiSection 14 at 20-Feb-2018 17&#58;26&#58;44.390 CET
Begin processing the 3rd record. Run 1, Event 3903, LumiSection 14 at 20-Feb-2018 17&#58;26&#58;44.713 CET
Begin processing the 4th record. Run 1, Event 3904, LumiSection 14 at 20-Feb-2018 17&#58;26&#58;45.039 CET
Begin processing the 5th record. Run 1, Event 3905, LumiSection 14 at 20-Feb-2018 17&#58;26&#58;45.264 CET
Begin processing the 6th record. Run 1, Event 3906, LumiSection 14 at 20-Feb-2018 17&#58;26&#58;45.521 CET
Begin processing the 7th record. Run 1, Event 3907, LumiSection 14 at 20-Feb-2018 17&#58;26&#58;45.784 CET

...

<div id='show_802041047' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_802041047'>I suspect we&#39;re deailing with Vanderbilt for some reason always answering first, and that the files may be corrupt there -- or getting corrupted across the network.

I don&#39;t know why from CERN it still seems to prefer sites in the US -- unless there are blocks that were placed only in the US...&#13;

-- by David Mason at Tue Feb 20 16&#58;28&#58;56 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a>
</div><script type='text/javascript'>
        $('#show_802041047').click(function() {
            $('#detail_802041047').slideDown("normal");
            $('#show_802041047').hide();
            $('#hide_802041047').show();
        });
        $('#hide_802041047').click(function() {
            $('#detail_802041047').slideUp();
            $('#hide_802041047').hide();
            $('#show_802041047').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='36064#1519143154'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-20T16:12:34+00:00">Feb 20, 2018 04:12 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1519143154">&nbsp;</a></div><pre>Update..

I checked the file both at FNAL and Vanderbilt and they look okay [1]. So we&#39;re not dealing with corrupted input files..

Dave we only see this oscillation on reading with jobs running at FNAL.. I&#39;ve looked into logs from these jobs at several sites and they all seem to stick to reading locally... It&#39;s rare for HC jobs to switch to remote reads unless there&#39;s a huge timeout, but for our jobs running here, It&#39;s a matter of ~1.5s before they jump to another site (see the difference of the timestamps at [2]). So this strongly suggests there&#39;s something in the configuration that needs to be changed in order to not go to remote reads unless it&#39;s strictly necessary because this opens the possibility for root to get confused and get the data corrupted...

[1]
From DAS&#58; &#34;adler32&#34;&#58; &#34;b9d33a6b&#34;
b9d33a6b root&#58;//cmsxrootd-site.fnal.gov//store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/DAE12CC5-0176-E711-BDE5-FA163E057847.root
b9d33a6b root&#58;//se1.accre.vanderbilt.edu&#58;1094//store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/DAE12CC5-0176-E711-BDE5-FA163E057847.root

[2] == CMSSW&#58; Begin processing the 1523rd record. Run 1, Event 341723, LumiSection 1140 at 19-Feb-2018 05&#58;29&#58;56.876 CST
== CMSSW&#58; %MSG-w XrdAdaptor&#58;  (NoModuleName) 19-Feb-2018 05&#58;29&#58;56 CST pre-events
== CMSSW&#58; Data is now served from fnal.gov, T2_US_Vanderbilt instead of previous fnal.gov
== CMSSW&#58; %MSG
== CMSSW&#58; Begin processing the 1524th record. Run 1, Event 341724, LumiSection 1140 at 19-Feb-2018 05&#58;29&#58;57.352 CST&#13;

-- by Maria Acosta at Tue Feb 20 16&#58;12&#58;17 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a></pre></div><div class='update_description'><i onclick="document.location='36064#1519140750'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-20T15:32:30+00:00">Feb 20, 2018 03:32 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1519140750">&nbsp;</a></div><pre>Sorry -- that was cmsxrootd2.fnal.gov -- typo.&#13;

-- by David Mason at Tue Feb 20 15&#58;31&#58;20 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a></pre></div><div class='update_description'><i onclick="document.location='36064#1519140630'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-20T15:30:30+00:00">Feb 20, 2018 03:30 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1519140630">&nbsp;</a></div><pre>So I was able to reproduce this replacing the input file with explicit root URL&#39;s.

Was able to see this flapping behavior with the CERN redirector (and others)

0-Feb-2018 09&#58;22&#58;33 CST  Initiating request to open file root&#58;//cms-xrd-global.cern.ch//store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/DAE12CC5-0176-E711-BDE5-FA163E057847.root
%MSG-w XrdAdaptor&#58;  file_open 20-Feb-2018 09&#58;22&#58;36 CST pre-events
Data is served from T2_US_Vanderbilt instead of original site CERN-PROD
%MSG
20-Feb-2018 09&#58;22&#58;37 CST  Successfully opened file root&#58;//cms-xrd-global.cern.ch//store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/DAE12CC5-0176-E711-BDE5-FA163E057847.root

Also if I explicitly point to root&#58;//xrootd.unl.edu/, root&#58;//xrootd2.fnal.gov, root&#58;//cmsxrootd.fnal.gov, root&#58;//cmsxrootd-site.fnal.gov.

So I think this is general behavior with CMSSW when its pointed at a redirector.  I thought we had this problem in the past and fixed it, but evidently this is not the case.

I was also able to reproduce the behavior with CMSSW_9_4_4, which I think has a later xrootd (4.6.1).&#13;

-- by David Mason at Tue Feb 20 15&#58;30&#58;07 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a></pre></div><div class='update_description'><i onclick="document.location='36064#1519137987'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-20T14:46:27+00:00">Feb 20, 2018 02:46 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1519137987">&nbsp;</a></div><pre>Hi all,

We exchanged a few e-mails and I think we have two issues here&#58;

1. This is related to the way FNAL has its storage setup where it chooses to use offsite reads even when data is on disk (I&#39;m quoting Brian here). I&#39;m meeting with Yujun to run a controlled test and see what&#39;s happening form the dCache/xrootd.log side of things... But ultimately, the recommendation is to check this configuration and evaluate changing it to prefer onsite reads when possible.

2. This shift in between reads, is making root confused and looping a lot, corrupting the data it receives. Root developers are aware of this and we&#39;re trying to get more insight on the main cause. Also from the CMSSW side of things we&#39;re trying to get deeper logging when these oscillations happen.. There&#39;s still the possibility for the actual file to be corrupted so just to be sure, can you please verify that all the files from HC dataset [1] are ok?

I&#39;ll keep you posted,

Maria A.

[1]  /GenericTTbar/HC-CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/AODSIM/&#13;

-- by Maria Acosta at Tue Feb 20 14&#58;45&#58;40 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a></pre></div><div class='update_description'><i onclick="document.location='36064#1519128317'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-20T12:05:17+00:00">Feb 20, 2018 12:05 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1519128317">&nbsp;</a></div><pre>I tried to run HC job locally on my lxplus with FNAL siteconf and saw the same jumps between the US sites.

[rmaciula@lxplus084 src]$ cmsRun -j output.xml -p PSet.py

20-Feb-2018 11&#58;47&#58;58 CET  Initiating request to open file root&#58;//cmsxrootd-site.fnal.gov//store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/CE1A5E29-3576-E711-ACCF-02163E016092.root
20-Feb-2018 11&#58;48&#58;04 CET  Successfully opened file root&#58;//cmsxrootd-site.fnal.gov//store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/CE1A5E29-3576-E711-ACCF-02163E016092.root
%MSG-w XrdAdaptor&#58;  (NoModuleName) 20-Feb-2018 11&#58;48&#58;12 CET pre-events
Data is now served from fnal.gov, T2_US_Vanderbilt instead of previous fnal.gov
...
%MSG-w XrdAdaptor&#58;  (NoModuleName) 20-Feb-2018 11&#58;52&#58;48 CET pre-events
Data is now served from fnal.gov, T2_US_Caltech instead of previous fnal.gov
...
Begin processing the 471st record. Run 1, Event 577371, LumiSection 1925 at 20-Feb-2018 11&#58;57&#58;19.412 CET
%MSG-w XrdAdaptor&#58;  (NoModuleName) 20-Feb-2018 11&#58;57&#58;21 CET pre-events
Data is now served from T2_US_Caltech, T2_US_Vanderbilt instead of previous T2_US_Caltech
%MSG

Is there any way to configure PSet.py to have detailed logs of xrootd?

All HC jobs related info can be found at the links below

<a href='https&#58;//cmsweb.cern.ch/scheddmon/0196/cmsprd/180219_102124&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/scheddmon/0196/cmsprd/180219_102124&#58</a>;sciaba_crab_HC-101-T1_US_FNAL-57826-20180218171901/
<a href='https&#58;//cmsweb.cern.ch/crabserver/ui/task/180219_102124%3Asciaba_crab_HC-101-T1_US_FNAL-57826-20180218171901&#13' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/crabserver/ui/task/180219_102124%3Asciaba_crab_HC-101-T1_US_FNAL-57826-20180218171901&#13</a>;

-- by Rokas maciulaitis at Tue Feb 20 12&#58;04&#58;57 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a></pre></div><div class='update_description'><i onclick="document.location='36064#1519075157'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-19T21:19:17+00:00">Feb 19, 2018 09:19 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1519075157">&nbsp;</a></div><pre>Hallo David,
i don&#39;t think it&#39;s network congestion&#58; The switching
between sites does not occur after a processing delay
(according to the logs) but instantly. That would
suggest a close from the server or something similar.
We need to get better/more complete logging in case
root switches sources during read. Maria is going to
talk to Chris (and Philippe) to see if this can be improved
and to Yujun if he can identify a reason for a disconnect
from the dcache logs.
It would have to be an odd bug as it doesn&#39;t affect
other sites. I would not be surprised if the oscillation
between Fermilab and Vanderbilt confuses root after
a while. At least to me it is not clear if the root error at
the end is to to corrupted buffers (as it looks to me) or
due to a read failure.
Thanks,
- Stephan&#13;

-- by Stephan Lammel at Mon Feb 19 21&#58;18&#58;54 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a></pre></div><div class='update_description'><i onclick="document.location='36064#1519072696'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-19T20:38:16+00:00">Feb 19, 2018 08:38 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1519072696">&nbsp;</a></div><pre>This improved when the PrePremix workflow wound down this weekend, but am seeing that these failures are picking up again.  Might be correlated with a pickup in network traffic due to tape writes, but that should not be saturating anything.  I am looking through logs of HC jobs over time and see that they tend to want to oscillate between reading from FNAL (not sure they necessarily ever are reading from FNAL) and a US T2.  Earlier successful (i.e. weeks ago) jobs seem to have the same &#34;now reading from&#34; messages in the logs from places like Caltech, etc.  In the failed (and successful) jobs of late though I always see Vanderbilt in particular, and know there have been network related issues from there.  How can I get a hold of a job tarball from one of these HC jobs?  I see they run through crab, and am wondering if there is some  overflow or different options given there than production.  Am not able to reproduce the read problems myself so far, and production jobs are running well here.  Incidentally the logs of these jobs found in Dashboard task monitoring look very much like failing analysis jobs we were seeing in the CMSSW 80x series -- even though this is CMSSW_9_2_6 -- wondering if a formerly fixed problem re-asserted itself somehow.&#13;

-- by David Mason at Mon Feb 19 20&#58;37&#58;38 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a></pre></div><div class='update_description'><i onclick="document.location='36064#1518451242'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-12T16:00:42+00:00">Feb 12, 2018 04:00 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1518451242">&nbsp;</a></div><pre>Just to clear some things up..

HC jobs read through the global redirector but since the dataset is at all sites, the obvious thing to do is to read locally.. However when for some reason local reads are not possible (i.e Network/Storage overload) it does fallback to near sites but this is invisible (or barely perceptible in job logs, hence my confusion here).

I did some digging and caught some of these troubled HC jobs trying to read from Vanderbilt and Nebraska with no luck.. Anyway we are aware of the Premix workflow sucking HC jobs down, but I&#39;ll keep the ticket open just in case something comes up before FNAL goes back to green.&#13;

-- by Maria Acosta at Mon Feb 12 16&#58;00&#58;07 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a></pre></div><div class='update_description'><i onclick="document.location='36064#1518194106'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-09T16:35:06+00:00">Feb 9, 2018 04:35 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1518194106">&nbsp;</a></div><pre>I think we&#39;ll be red like this until the Premix workflow is out of the system -- seeing us hit the ceiling network-wise.  Premix is at 13.5k cores, so only expect this to get worse if it increases the share.  All other workflows running here will suffer as well.

Yujun -- the file and logs Maria is pointing us to are test workflows that evaluate the functionality of the site -- I think they are correctly indicating PrePremix is sucking our network dry.  Attached an example from network monitoring -- I think showing us pegging 400G bit.
-- by dmason at Fri Feb 09 16&#58;34&#58;33 UTC 2018

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000925637' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000925637</a></pre></div><div class='update_description'><i onclick="document.location='36064#1518193607'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-09T16:26:47+00:00">Feb 9, 2018 04:26 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1518193607">&nbsp;</a></div><pre>Is it possible to ask the user if he can get the file through xrdcp?  Right now the overall read rate for CMS dCache is about 40GB/s.

Regards,
Yujun
-- by yujun at Fri Feb 09 16&#58;25&#58;21 UTC 2018

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000925637' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000925637</a></pre></div><div class='update_description'><i onclick="document.location='36064#1518192358'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-09T16:05:58+00:00">Feb 9, 2018 04:05 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1518192358">&nbsp;</a></div><pre>We have been under higher than normal network load due to the PrePremix workflow running here since yesterday.  Seeing similar failures in the xrootd-fallback SAM tests with read timeouts.  Both FNAL and UNL are two of the 3 sites running this request.   Suspecting we&#39;re seeing the timeouts due to the high activity, but still poking around.
-- by dmason at Fri Feb 09 16&#58;05&#58;22 UTC 2018

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000925637' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000925637</a></pre></div><div class='update_description'><i onclick="document.location='36064#1518192302'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-09T16:05:02+00:00">Feb 9, 2018 04:05 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1518192302">&nbsp;</a></div><pre>As far as I know, HC doesn&#39;t fallback unless the dataset is not present at the site (and HC datasets are present at all sites) so.. data is being read locally. This is a secondary input dataset (AODSIM) which to my understanding needs a constant IO stream while being read/processed.. So if this doesn&#39;t come from the processing side nor from storage..

Is the network under some kind of pressure (or has it been for the last 8hrs)?&#13;

-- by Maria Acosta at Fri Feb 09 16&#58;04&#58;50 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a></pre></div><div class='update_description'><i onclick="document.location='36064#1518191447'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-09T15:50:47+00:00">Feb 9, 2018 03:50 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1518191447">&nbsp;</a></div><pre>On the storage side, the file in [3] looks fine.

bash-4.1$ xrdcp -d 1 -f root&#58;//cmsxrootd-site.fnal.gov//store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/F04D2A27-1B76-E711-8DEF-02163E01501A.root /dev/null
[2018-02-09 09&#58;31&#58;14.053519 -0600][Warning][XRootDTransport   ] [131.225.206.151&#58;30661 #0.0] Logged in, accepting empty login response.
[2.24GB/2.24GB][100%][==================================================][208.6MB/s]
bash-4.1$

This is local at FNAL. However, if it were from CERN, the transfer rate is pretty slow.
-- by huangch at Fri Feb 09 15&#58;49&#58;49 UTC 2018

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000925637' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000925637</a></pre></div><div class='update_description'><i onclick="document.location='36064#1518191247'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-09T15:47:27+00:00">Feb 9, 2018 03:47 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1518191247">&nbsp;</a></div><pre>The failure message that was able to dig up is&#58;

======== CMSSW OUTPUT FINSHING ========
ERROR&#58; Caught WMExecutionFailure - code = 85 - name = CmsRunFailure - detail = Error running cmsRun
{&#39;arguments&#39;&#58; [&#39;/bin/bash&#39;, &#39;/storage/local/data1/condor/execute/dir_2473675/glide_rCSo6a/execute/dir_800638/cmsRun-main.sh&#39;, &#39;&#39;, &#39;slc6_amd64_gcc530&#39;, &#39;scramv1&#39;, &#39;CMSSW&#39;, &#39;CMSSW_9_2_6&#39;, &#39;FrameworkJobReport.xml&#39;, &#39;cmsRun&#39;, &#39;PSet.py&#39;, &#39;sandbox.tar.gz&#39;, &#39;&#39;, &#39;&#39;]}
Return code&#58; 85

NOTE&#58; FJR has exit code 8021 and WMCore reports 85; preferring the FJR one.
ERROR&#58; Exceptional exit at Fri Feb  9 14&#58;25&#58;25 2018 (8021)&#58; CmsRunFailure
CMSSW error message follows.
Fatal Exception
An exception of category &#39;FileReadError&#39; occurred while
[0] Rethrowing an exception that happened on a different thread.
[1] Reading branch recoPFMETs_pfMet__RECO.
Additional Info&#58;
[a] Fatal Root Error&#58; @SUB=TBranchElement&#58;&#58;GetBasket
File&#58; root&#58;//cmsxrootd-site.fnal.gov//store/mc/HC/GenericTTbar/AODSIM/CMSSW_9_2_6_91X_mcRun1_realistic_v2-v2/00000/F04D2A27-1B76-E711-8DEF-02163E01501A.root at byte&#58;0, branch&#58;recoPFMETs_pfMet__RECO.present, entry&#58;6300, badread=0, nerrors=1, basketnumber=38

ERROR&#58; Traceback follows&#58;
Traceback (most recent call last)&#58;
File &#34;CMSRunAnalysis.py&#34;, line 903, in &#60;module&#62;
cmssw = executeCMSSWStack(opts, scram)
File &#34;CMSRunAnalysis.py&#34;, line 701, in executeCMSSWStack
cmssw.execute()
File &#34;/storage/local/data1/condor/execute/dir_2473675/glide_rCSo6a/execute/dir_800638/WMCore.zip/WMCore/WMSpec/Steps/Executors/CMSSW.py&#34;, line 251, in execute
raise WMExecutionFailure(returncode, &#34;CmsRunFailure&#34;, msg)
WMExecutionFailure&#58; CmsRunFailure
Message&#58; Error running cmsRun
{&#39;arguments&#39;&#58; [&#39;/bin/bash&#39;, &#39;/storage/local/data1/condor/execute/dir_2473675/glide_rCSo6a/execute/dir_800638/cmsRun-main.sh&#39;, &#39;&#39;, &#39;slc6_amd64_gcc530&#39;, &#39;scramv1&#39;, &#39;CMSSW&#39;, &#39;CMSSW_9_2_6&#39;, &#39;FrameworkJobReport.xml&#39;, &#39;cmsRun&#39;, &#39;PSet.py&#39;, &#39;sandbox.tar.gz&#39;, &#39;&#39;, &#39;&#39;]}
Return code&#58; 85

Assigning it over to the group who handles storage
-- by fkhan at Fri Feb 09 15&#58;46&#58;55 UTC 2018

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000925637' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000925637</a></pre></div><div class='update_description'><i onclick="document.location='36064#1518190886'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-09T15:41:26+00:00">Feb 9, 2018 03:41 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1518190886">&nbsp;</a></div><pre>I am taking a look. From the worker node list, the job appears to be failing both on the new refactored cluster and the old one.

Do we have an errror message? (trying to dig it up myself as well). This could be a storage issue.

Farrukh
-- by fkhan at Fri Feb 09 15&#58;39&#58;49 UTC 2018

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000925637' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000925637</a></pre></div><div class='update_description'><i onclick="document.location='36064#1518190382'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-09T15:33:02+00:00">Feb 9, 2018 03:33 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1518190382">&nbsp;</a></div><pre>Attaching a list of faulty WNs... Might be easier to debug from there&#13;

-- by Maria Acosta at Fri Feb 09 15&#58;32&#58;11 UTC 2018

Added attachment FNAL_HC_WNs&#13;
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT108282&#13' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT108282&#13</a>;

-- by Maria Acosta at Fri Feb 09 15&#58;32&#58;10 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a></pre></div><div class='update_description'><i onclick="document.location='36064#1518189843'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-09T15:24:03+00:00">Feb 9, 2018 03:24 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1518189843">&nbsp;</a></div><pre>&#13;
Subject has been changed to [T1_US_FNAL HammerCloud jobs failing]&#13;

-- by Maria Acosta at Fri Feb 09 15&#58;22&#58;57 UTC 2018

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a></pre></div><div class='update_description'><i onclick="document.location='36064#1518189779'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-09T15:22:59+00:00">Feb 9, 2018 03:22 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1518189779">&nbsp;</a></div><pre>Dear FNAL admins,

I have quite a few HammerCloud jobs failing (or retrying more than twice) [1] due to FileReadErrors (exit code 8021). HC glidein metric is below threshold, and has been for ~8 hrs [2].

Can you please take a look?. You can find an example job and post-job log of a second retry at [3]

Thanks,

Maria A.

[1] <a href='http&#58;//dashb-cms-job-dev.cern.ch/dashboard/request.py/dailysummary#button=successfailures&sites%5B%5D=T1_US_FNAL&activities%5B%5D=hctest&sitesSort=1&start=null&end=null&timerange=last48&granularity=Hourly&generic=0&sortby=0&series=All' target='_blank' rel='nofollow'>http&#58;//dashb-cms-job-dev.cern.ch/dashboard/request.py/dailysummary#button=successfailures&sites%5B%5D=T1_US_FNAL&activities%5B%5D=hctest&sitesSort=1&start=null&end=null&timerange=last48&granularity=Hourly&generic=0&sortby=0&series=All</a>

[2] <a href='http&#58;//dashb-ssb.cern.ch/dashboard/request.py/siteviewhistory?columnid=217&debug=false#time=custom&start_date=2018-02-09&end_date=2018-02-10&values=false&spline=false&debug=false&resample=false&sites=one&clouds=all&site=T1_US_FNAL' target='_blank' rel='nofollow'>http&#58;//dashb-ssb.cern.ch/dashboard/request.py/siteviewhistory?columnid=217&debug=false#time=custom&start_date=2018-02-09&end_date=2018-02-10&values=false&spline=false&debug=false&resample=false&sites=one&clouds=all&site=T1_US_FNAL</a>

[3] <a href='https&#58;//cmsweb.cern.ch/scheddmon/0122/cmsprd/180209_110149&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/scheddmon/0122/cmsprd/180209_110149&#58</a>;sciaba_crab_HC-101-T1_US_FNAL-57465-20180208175701/job_out.39.0.txt

<a href='https&#58;//cmsweb.cern.ch/scheddmon/0122/cmsprd/180209_110149&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/scheddmon/0122/cmsprd/180209_110149&#58</a>;sciaba_crab_HC-101-T1_US_FNAL-57465-20180208175701/postjob.39.0.txt

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=133398</a>

[Ticket History]
Subject&#58; T2_US_FNAL HammerCloud jobs failing
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-site-support-team@....
-- by Maria Acosta at Fri Feb 09 15&#58;22&#58;40 UTC 2018</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F36064">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
