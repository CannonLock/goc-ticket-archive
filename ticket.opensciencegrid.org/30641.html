<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[30641] Services that osg-configure doesn&#39;t seem to configure to start on osg33.el7</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=30641" method="post">
<div class="page-header">
    <h3><span class="muted">30641</span> / Services that osg-configure doesn&#39;t seem to configure to start on osg33.el7</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Horst Severini</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Horst Severini</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Remaining Issues Tracked in JIRA</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-08-12</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Matyas Selmeci <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/30641", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/30641?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/30641?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Services%20that%20osg-configure%20doesn%26%2339%3Bt%20seem%20to%20configure%20to%20start%20on%20osg33.el7%20ISSUE%3D30641%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='30641#1471280032'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-15T16:53:52+00:00">Aug 15, 2016 04:53 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1471280032">&nbsp;</a></div><pre>Thanks all. I&#39;ll close this ticket and let the remaining items be tracked in the JIRA issue.

-Vince</pre></div><div class='update_description'><i onclick="document.location='30641#1471026371'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-12T18:26:11+00:00">Aug 12, 2016 06:26 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1471026371">&nbsp;</a></div><pre>Hi Mat,

yes, &#39;osg-control enable&#39; seems to have fixed the two services
which weren&#39;t on yet!

Thanks a lot,
have a good vacation -- or trip, or whatever, ;)

Horst</pre></div><div class='update_description'><i onclick="document.location='30641#1471021489'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-12T17:04:49+00:00">Aug 12, 2016 05:04 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1471021489">&nbsp;</a></div><pre>Hi Horst,

Does osg-control take care of your problems for now?  Can we close this ticket and track the tasks I mentioned below in JIRA?  I&#39;ll be out for the next week and a half starting Monday, so I won&#39;t be able to do much for a while.

Thanks,
-Mat</pre></div><div class='update_description'><i onclick="document.location='30641#1471014671'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-12T15:11:11+00:00">Aug 12, 2016 03:11 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1471014671">&nbsp;</a></div><pre>Hi Mat,

<font color='#7F7E6F'>&#62; By the way, I don&#39;t think &#34;osg-configure -c&#34; is supposed to configure</font>
<font color='#7F7E6F'>&#62; services to start at boot.  You have to run &#34;osg-control enable&#34; for that.</font>

Ah, interesting. Has that always been like that? I thought in the past
&#39;osg-configure -c&#39; took care of that. At least I don&#39;t find a record
of having to do it by hand in my install notes for an early 3.0 release.

But I do see it in later notes.

<font color='#7F7E6F'>&#62; I did run into an issue where osg-control was failing to show the status</font>
<font color='#7F7E6F'>&#62; of services with only systemd files (e.g. fetch-crl-boot and fetch-crl-cron).</font>
<font color='#7F7E6F'>&#62; I created SOFTWARE-2428 to deal with it.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I also created SOFTWARE-2429 for the project of converting init scripts</font>
<font color='#7F7E6F'>&#62; to systemd files.</font>

Great, thanks!

Horst</pre></div><div class='update_description'><i onclick="document.location='30641#1470955186'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-11T22:39:46+00:00">Aug 11, 2016 10:39 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1470955186">&nbsp;</a></div><pre>I did run into an issue where osg-control was failing to show the status of services with only systemd files (e.g. fetch-crl-boot and fetch-crl-cron). I created SOFTWARE-2428 to deal with it.

I also created SOFTWARE-2429 for the project of converting init scripts to systemd files.</pre></div><div class='update_description'><i onclick="document.location='30641#1470946554'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-11T20:15:54+00:00">Aug 11, 2016 08:15 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1470946554">&nbsp;</a></div><pre>By the way, I don&#39;t think &#34;osg-configure -c&#34; is supposed to configure services to start at boot.  You have to run &#34;osg-control enable&#34; for that.
-Mat</pre></div><div class='update_description'><i onclick="document.location='30641#1470766010'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-09T18:06:50+00:00">Aug 9, 2016 06:06 PM UTC</time><a class="anchor" name="1470766010">&nbsp;</a></div><pre>Hi Mat,

sure&#58;

----
[hs@grid1 ~]$ sudo osg-configure --enabled-services
[sudo] password for hs&#58;
WARNING  Option &#39;setup_for_apache&#39; in section &#39;RSV&#39; located in /etc/osg/config.d/99-config.ini&#58; Found unknown option
System services associated with current configuration&#58;
condor-ce
fetch-crl-boot
osg-info-services
globus-gridftp-server
gratia-probes-cron
rsv
osg-cleanup-cron
fetch-crl-cron
edg-mkgridmap
condor-cron
Completed successfully
----

So it thinks they&#39;re enabled, but neither one of the two is in fact enabled according to &#39;chkconfig&#39;.  Just like all the other services from the beginning of this ticket weren&#39;t.

And I have attached the osg-system-profiler output to this ticket as well.

Thanks,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='30641#1470761261'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-09T16:47:41+00:00">Aug 9, 2016 04:47 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1470761261">&nbsp;</a></div><pre>Also, can you post your osg-system-profiler output so I can try to replicate the problem?
-Mat</pre></div><div class='update_description'><i onclick="document.location='30641#1470760617'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-09T16:36:57+00:00">Aug 9, 2016 04:36 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1470760617">&nbsp;</a></div><pre>Hi Horst, can you give me the output of &#34;osg-configure --enabled-services&#34;? I&#39;d like to see what osg-configure thinks should be turned on...

Thanks,
-Mat</pre></div><div class='update_description'><i onclick="document.location='30641#1470756190'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-09T15:23:10+00:00">Aug 9, 2016 03:23 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1470756190">&nbsp;</a></div><pre>Hi again,

we just found out that in addition to osg-info-services, gratia-probes-cron
also doesn&#39;t seem to be configured properly by &#39;osg-configure -c&#39;,
since it&#39;s not references in /etc/init.d/*/, nor in &#39;chkconfig&#39;.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='30641#1470236354'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-03T14:59:14+00:00">Aug 3, 2016 02:59 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1470236354">&nbsp;</a></div><pre>Hi Mat and all,

actually, we had to reboot our head node several times yesterday,
to work out some NFS issues, and during these reboots, all OSG services
seemed to come back up properly, so maybe the order of services
isn&#39;t a problem after all? Not sure why we had problems earlier,
and don&#39;t anymore now. I don&#39;t think we manually changed the order,
and SELinux has been disabled for now, so that shouldn&#39;t cause any problems
anymore, either ...

We still need to figure out why &#39;osg-configure -c&#39; doesn&#39;t seem to
configure the services for a reboot properly, though, since I don&#39;t think
that is solved yet.

And it would also be nice to migrate all OSG services to systemd,
so that things are easier to debug if something isn&#39;t working --
and it would be very good to get some very detailed documentation
on how to debug systemd services, too, for systemd novices like myself,
and I&#39;m sure others as well. &#58;)

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='30641#1470180882'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-02T23:34:42+00:00">Aug 2, 2016 11:34 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1470180882">&nbsp;</a></div><pre>I still need to investigate to figure out the appropriate solution to the problem.
-Mat</pre></div><div class='update_description'><i onclick="document.location='30641#1470164038'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-02T18:53:58+00:00">Aug 2, 2016 06:53 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1470164038">&nbsp;</a></div><pre>Hi Mat,

Have you had an opportunity to create the JIRA tickets mentioned below?  I looked around JIRA but couldn&#39;t find anything that closely matched the issue reported.

Thanks!
Vince</pre></div><div class='update_description'><i onclick="document.location='30641#1469805790'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-29T15:23:10+00:00">Jul 29, 2016 03:23 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1469805790">&nbsp;</a></div><pre>Hi all,

thanks! We did create these directories, but not PID files appeared in
there. No errors in the MasterLog, either, though, and things seem to
run, so apparently that wasn&#39;t really necessary. &#58;)

The &#39;other&#39; problem was that condor-ce services had hung up, but we
tracked this problem down to a failed autofs service, which caused all
sorts of issues, like jobs not being submitted to SLURM properly. After
an autofs restart, that problem went away.

So things look okay now, as far as we can see!

We also think we found the problem with ATLAS MCORE jobs -- it has to do
with AthenaMP not being able to parse the htcondor-ce-spool directory
names containing #&#39;s -- but that&#39;s a different issue, so I&#39;ll open a
separate ticket on that.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='30641#1469802652'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-29T14:30:52+00:00">Jul 29, 2016 02:30 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1469802652">&nbsp;</a></div><pre>Horst,

I think the /var/run/condor-* dirs not existing does seem like an SELinux thing. Go ahead and create those dirs, here&#39;s what they look like on my dev box&#58;

# ls -l /var/run | grep condor-
drwxr-xr-x  2 condor    condor    4096 Jun 23 09&#58;49 condor-ce
drwxr-xr-x  2 cndrcron  cndrcron  4096 Jun  1 10&#58;48 condor-cron

I&#39;m not sure what you mean exactly with your other problem. Are you saying that all the running jobs on the CE have not submitted jobs to SLURM? Your CE looks to be chugging along ok but I only took a quick glance at it.

- Brian</pre></div><div class='update_description'><i onclick="document.location='30641#1469801333'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-29T14:08:53+00:00">Jul 29, 2016 02:08 PM UTC</time><a class="anchor" name="1469801333">&nbsp;</a></div><pre>Hi Mat,

DO you have any updates on the JIRA tickets?

Brian,

Can you take a look at the problem Horst is now having?

Thanks,

Edgar
OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='30641#1469226549'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-22T22:29:09+00:00">Jul 22, 2016 10:29 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1469226549">&nbsp;</a></div><pre>Hi again,

some more info on this. We rebooted the machine, with the startup
configuration fixed by hand, and all services came back up,
but condor-ce didn&#39;t work properly. Jobs were submitted and were
visible with &#39;condor_ce_q&#39;, but nothing was ever submitted to SLURM.
Probably the same issue was that none of these condor_ce_q jobs
were ever re-submitted to condor_ce, as is usually required
for SLURM submission, right?

I looked through the condor-ce logs, but couldn&#39;t find anything obvious
as to what the problem might be. So I restarted the entire CE with
&#39;sudo osg-control restart&#39;, and then things started worked again.
Pretty weird, eh?

Also, we noticed that the directories /var/run/condor-ce/ and
/var/run/condor-cron/ were apparently never created, and therefore
we get errors in the condor-ce and condor-cron about not being able
to create condor_master.pid files. That doesn&#39;t seem to be a fatal error,
though, since (after the restart) everything seems fine.

It&#39;s possible that this was prevented by SELinux, before we set that
to permissive. Should we created these directories by hand now --
owned by user condor, I presume? -- or does it not matter?

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='30641#1469217913'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-22T20:05:13+00:00">Jul 22, 2016 08:05 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1469217913">&nbsp;</a></div><pre>Thanks Mat!

Horst

On 07/22/2016 02&#58;50 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='30641#1469217044'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-22T19:50:44+00:00">Jul 22, 2016 07:50 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1469217044">&nbsp;</a></div><pre>Even though it&#39;s a SysV init script, systemd gets to control many
things about it, like when it starts.

I agree with you that it would be the best to use one kind of init
system. I&#39;ll make JIRA tickets to add systemd service files for the
other services you listed.</pre></div><div class='update_description'><i onclick="document.location='30641#1469133317'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-21T20:35:17+00:00">Jul 21, 2016 08:35 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1469133317">&nbsp;</a></div><pre>Hi Mat,

sure, it&#39;s definitely possible that the problem isn&#39;t the configuration
of the startup services, but a startup failure itself.

You&#39;re talking about &#34;systemctl status globus-gridftp-server&#34;, but as
far as I know, the gridftp-server is still using System V, doesn&#39;t it?
At least the RPM contains /etc/init.d/globus-gridftp-server, which I
assume to mean it actually uses that. Or am I misunderstanding that?

As I said, I know very little about systemd yet, sorry.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='30641#1469131004'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-21T19:56:44+00:00">Jul 21, 2016 07:56 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1469131004">&nbsp;</a></div><pre>I&#39;m wondering what exactly the symptoms are. I tried to reproduce this with
globus-gridftp-server&#58; I ran &#34;osg-control enable globus-gridftp-server&#34; then
&#34;reboot&#34;, and what &#34;systemctl status globus-gridftp-server&#34; told
me was that it tried to run but then exited -- &#39;successfully&#39;.
In fact, &#34;/var/log/gridftp-auth.log&#34; showed something different was happening&#58;

[1089] Thu Jul 21 14&#58;46&#58;52 2016 &#58;&#58; Could not start server&#58;
globus_xio&#58; globus_l_xio_tcp_contact_string failed.
globus_xio&#58; globus_libc_addr_to_contact_string failed.
globus_common&#58; globus_libc_gethostaddr failed

That looks like the kind of error I&#39;d see if I tried to start up the service
before networking is available.

So I&#39;m wondering if the problem is not that it&#39;s not configured to start up,
but that it&#39;s trying to start up too soon.

I haven&#39;t tried the other services yet. If this kind of thing is the problem
for the rest of them, then it might have to be fixed on a per-package basis...

-Mat</pre></div><div class='update_description'><i onclick="document.location='30641#1469122691'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-21T17:38:11+00:00">Jul 21, 2016 05:38 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1469122691">&nbsp;</a></div><pre>Hi Mat,

here&#39;s the output; does that mean that all the services below should
be configured to start at boot? Well, they weren&#39;t until we manually
turned them on.

Let me know what else we can do to help.

Thanks,

Horst

----
[hs@grid1 ~]$ sudo osg-control list
[sudo] password for hs&#58;
WARNING  Option &#39;setup_for_apache&#39; in section &#39;RSV&#39; located in /etc/osg/config.d/99-config.ini&#58; Found unknown option
Configured services&#58;
condor-ce
condor-cron
edg-mkgridmap
fetch-crl-boot
fetch-crl-cron
globus-gridftp-server
gratia-probes-cron
osg-cleanup-cron
osg-info-services
rsv</pre></div><div class='update_description'><i onclick="document.location='30641#1469118913'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-21T16:35:13+00:00">Jul 21, 2016 04:35 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1469118913">&nbsp;</a></div><pre>Hi Mat,

sure, I&#39;ll do that as soon as OSCER comes back out of its current
maintenance downtime.

Ah, I see. Well, I suppose having all scripts in systemd would
still be better than the current mix, because with this it&#39;s really
hard to figure out the status of the various services --
both current and bootup.

Thanks,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='30641#1469118133'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-21T16:22:13+00:00">Jul 21, 2016 04:22 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1469118133">&nbsp;</a></div><pre>Hi Horst,

Can you paste the output of &#34;osg-control list&#34;?

Unfortunately, there&#39;s not much chance of us going back to SysV init scripts for EL7 -- it&#39;s much more likely we&#39;ll go the other way, converting init scripts to systemd service files as we have the time. systemd&#39;s init emulation isn&#39;t perfect, and we&#39;ve already had it get confused with certain init scripts or sets of init scripts. For example, both condor and condor-ce use the same sets of daemons, just with different config. Until we wrote systemd service files for those, shutting one off would shut down the other.

-Mat</pre></div><div class='update_description'><i onclick="document.location='30641#1469057815'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-20T23:36:55+00:00">Jul 20, 2016 11:36 PM UTC</time> by <b>Tim Theisen</b><a class="anchor" name="1469057815">&nbsp;</a></div><pre>Assigning to Mat</pre></div><div class='update_description'><i onclick="document.location='30641#1469043040'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-07-20T19:30:40+00:00">Jul 20, 2016 07:30 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1469043040">&nbsp;</a></div><pre>Hi Suchandra and all,

we seem to be having some trouble with osg-configure on osg33.el7.

&#39;osg-configure -c&#39; seems to finish okay, and after that, &#39;osg-control start/stop&#39; starts and stops all the appropriate services, but they don&#39;t seem to be configured to come up on reboot -- at least not on our system.

Here are the services that we needed to manually enable on boot on grid1&#58;

edg-mkgridmap
globus-gridftp-server
osg-ca-certs-updater-cron
osg-cleanup-cron
rsv

condor-cron
condor-ce
fetch-crl

It seems that fetch-crl, condor-cron and condor-ce are systemd natively, while the rest are System V. Is that correct?

Personally, I think it would be nice to have all OSG services use the same system, so people don&#39;t have to dig through two separate configuration systems to debug these sorts of problems. I would prefer it if all osg33 services could use System V, since that seems to be a whole lot easier to figure out and configure. Of course I understand that that&#39;s mainly because I&#39;m not familiar with systemd yet, but then again, I could imagine that a lot of others who are just migrating to EL7 aren&#39;t, either, so it would be much easier for everyone involved if all services remain System V for the time being, and then move everything to systemd on EL8. &#58;)

Anyway, please let us know if there&#39;s anything we can do to help trouble shoot why these systems aren&#39;t configured properly on bootup. Maybe it&#39;s something we did incorrectly, but from what I remember with EL6, &#39;osg-configure -c&#39; took care of all boot scripts, right?

Thanks,

Horst</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F30641">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
