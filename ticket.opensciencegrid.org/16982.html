<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[16982] authentication problems with osg-upcoming bestman2</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=16982" method="post">
<div class="page-header">
    <h3><span class="muted">16982</span> / authentication problems with osg-upcoming bestman2</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Horst Severini</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Horst Severini</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-09-25</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Tim Cartwright <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/16982", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='16982#1379955250'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-23T16:54:10+00:00">Sep 23, 2013 04:54 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1379955250">&nbsp;</a></div><pre>Hi Tim,

yeah, I think we can close this now, since there&#39;s already a warning
in the install docs that the IBM Java won&#39;t work, and hopefully that&#39;s
enough for people to pay attention to this.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='16982#1379954927'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-23T16:48:47+00:00">Sep 23, 2013 04:48 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1379954927">&nbsp;</a></div><pre>Right, that was my main point&#58; It is subtle and complex, and not something
that we can fix in the OSG packages.

It sounds like you are on your way to handling the problem locally.  Can we
close this GOC ticket?</pre></div><div class='update_description'><i onclick="document.location='16982#1379954711'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-23T16:45:11+00:00">Sep 23, 2013 04:45 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1379954711">&nbsp;</a></div><pre>Hi Tim,

yeah, I can imagine that the java dependency forest isn&#39;t exactly trivial!
I checked, and the IBM java is indeed coming from a different repo as
the OpenJDK one&#58;

----
Installed Packages
java-1.7.0-ibm.x86_64           1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6
java-1.7.0-ibm-devel.x86_64     1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6
java-1.7.0-openjdk.x86_64       1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6
java-1.7.0-openjdk-devel.x86_64 1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6
----

I have no idea why RHEL6 decided to make the IBM one the default, and
the OpenJDK one the &#39;alternate&#39;; do you think that if we were to change
the repo priorities, it might be different? Or I guess we could try
to exclude the IBM one completely from the rhel-x86_64-server-supplementary-6
repo and see if all dependencies are still satisfied; they should be!

We can try to help debug this, but this would have to wait till we have
our &#39;new&#39; RHEL6 ITB cluster up, which may be a few weeks, since we&#39;re
still not quite done with our Tier2 upgrade because of hardware problems,
which obviously take preference.

Wait -- I just tried this on a RHEL6 test machine we have, which already
has java-1.7.0-openjdk installed, and then I started the installation
of osg-se-bestman, it wasn&#39;t going to bring in java-1.7.0-ibm,
even though that is also available as an option.

Hmm, and as an additional test, I removed java-1.7.0-openjdk and tried it
again, and it&#39;s still not trying to install java-1.7.0-ibm,
so I have no idea why our Tier2 head nodes insisted on installing that.

Maybe some subtle difference because the head nodes were installed
<div id='show_1174693140' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1174693140'>by ROCKS6? I have no idea ...

Thanks,

Horst
</div><script type='text/javascript'>
        $('#show_1174693140').click(function() {
            $('#detail_1174693140').slideDown("normal");
            $('#show_1174693140').hide();
            $('#hide_1174693140').show();
        });
        $('#hide_1174693140').click(function() {
            $('#detail_1174693140').slideUp();
            $('#hide_1174693140').hide();
            $('#show_1174693140').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1379948368'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-23T14:59:28+00:00">Sep 23, 2013 02:59 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1379948368">&nbsp;</a></div><pre>Horst&#58;

The Java dependency tree (forest, actually) is a mess.  Java-based packages
require a variety of real and virtual dependencies, such as &#34;jdk&#34;, &#34;java&#34;,
&#34;java7&#34;, and specific JRE or JDK implementations.  Currently, all OSG 3.1
Java packages require &#34;java7&#34;, which we believe to be the most standard way
of requesting a Java 7 implementation.  However, some OS and EPEL packages
still use the older dependencies, and so they often bring in extra Javas.

In your particular case, I think the IBM Java packages provide the &#34;java7&#34;
dependency, just like OpenJDK does.  So then it is up to the yum dependency
resolver and your priority scheme to select a particular package to meet
the dependency.  Apparently, IBM won by default.

There may be a couple ways to mitigate the situation.  One is to see if
there is a way to tweak yum repository priorities, such that the repository
containing the IBM Java is lower priority than the one containing OpenJDK,
IF THEY ARE DIFFERENT.  But messing with priorities can bring unintended
consequences, so that is not my recommendation.  The other method is to use
your yum configuration to block the installation of IBM Java.  This is the
method that we have adopted in our own automated tests.  If you would like
help with yum configuration, just let us know!</pre></div><div class='update_description'><i onclick="document.location='16982#1379709549'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-20T20:39:09+00:00">Sep 20, 2013 08:39 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1379709549">&nbsp;</a></div><pre>Hi Tim,

well, it&#39;s already documented that IBM Java won&#39;t work, so that part is done.

I guess the question is, what kind of dependency requirement caused
both the IBM and the OpenJDK Java&#39;s to be installed at the same time,
and whether there&#39;s a way to prevent that from happening automagically?

Thanks,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='16982#1379708995'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-20T20:29:55+00:00">Sep 20, 2013 08:29 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1379708995">&nbsp;</a></div><pre>I will talk to Tim Theisen about getting this documented. Given that we are committed to allowing alternate (but functioning) Java implementations, I am not aware of any reasonable mechanism that OSG Software could deploy to prevent the IBM Java from being downloaded from RHEL.</pre></div><div class='update_description'><i onclick="document.location='16982#1379610551'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-19T17:09:11+00:00">Sep 19, 2013 05:09 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1379610551">&nbsp;</a></div><pre>Hi Kyle,

no, I&#39;m not aware of a separate ticket, but I think we should probably
create one, to figure out if we can avoid the IBM java 7 to be pulled in
at all, since that caused us lots of trouble.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='16982#1379610233'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-19T17:03:53+00:00">Sep 19, 2013 05:03 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1379610233">&nbsp;</a></div><pre>The last update says the issue is resolved but not completely resolved.  IS there a separate ticket on this mystery issue?  Can this ticket be closed?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='16982#1379531172'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-18T19:06:12+00:00">Sep 18, 2013 07:06 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1379531172">&nbsp;</a></div><pre>Hi Suchandra,

yes, this has been resolved. The only problem we really had was that
by default java was pointing to the IBM version rather than
the OpenJDK version, and the IBM version only works for CERN and FNAL
certs, but not for DOEGrids and DigiCert certificates.

Well, I guess it&#39;s not completely resolved because we still don&#39;t
understand why the osg CE and the SE pulled in the IBM java to begin with,
since it wasn&#39;t installed beforehand, so something in the RPM dependencies
triggered BOTH IBM and OpenJDK 7 to be installed, and by default the IBM
one was setup, which I don&#39;t understand.

So ideally I would like to see the dependency fixed such that only
the OpanJDK version gets pulled in -- but I have no idea if that&#39;s
a simple fix, since I know nothing about these dependencies.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='16982#1379530539'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-18T18:55:39+00:00">Sep 18, 2013 06:55 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1379530539">&nbsp;</a></div><pre>Hi,

Has this issue been resolved? Were there other problems aside from the java 7 authentication issues?

Suchandra Thapa
OSG Software Team</pre></div><div class='update_description'><i onclick="document.location='16982#1378835470'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-10T17:51:10+00:00">Sep 10, 2013 05:51 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1378835470">&nbsp;</a></div><pre>Hi Horst,
In my opinion, some people are developing java without a good reason.
They actually are stalling advancement of human civilization.
Bockjoo
On 9/10/13 1&#58;39 PM, Horst Severini wrote&#58;
<font color='#7F7E6F'>&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; yes, I just figured that out, too! &#58;)</font>
<font color='#7F7E6F'>&#62; See the other email I just sent.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Bestman is not an easy beast to debug!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62; I think it&#39;s the same java issue.</font>
<font color='#7F7E6F'>&#62;&#62; You need something like</font>
<font color='#7F7E6F'>&#62;&#62; export JAVA_HOME=/etc/alternatives/java_sdk_openjdk</font>
<font color='#7F7E6F'>&#62;&#62; srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62;&#62; So you need to add the export JAVA_HOME=.... line somewhere</font>
<font color='#7F7E6F'>&#62;&#62; in the system profile, rsv configuration, or rsv account.</font>
<font color='#7F7E6F'>&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62;&#62; On 9/10/13 11&#58;31 AM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; well, I&#39;m still having one small problem. The srm probes run from</font>
<font color='#7F7E6F'>&#62;&#62;&#62; rsv/condor-cron still keep giving me the same old error as before</font>
<font color='#7F7E6F'>&#62;&#62;&#62; I fixed it -- but when I run them by hand as root on tier2-01 with</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; rsv-control --run --all-enabled</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<div id='show_2084214039' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2084214039'><font color='#7F7E6F'>&#62;&#62;&#62; then they all succeed! And then both our local RSV page and MyOSG</font>
<font color='#7F7E6F'>&#62;&#62;&#62; turn green again, too -- until the next time condor-cron rsv runs.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; My own personal tests with both my DOEGrids and DigiCert proxies work</font>
<font color='#7F7E6F'>&#62;&#62;&#62; just fine, too, so Bestman2 is definitely working fine!</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; I tried restarting rsv and condor-cron on tier2-01, even removed</font>
<font color='#7F7E6F'>&#62;&#62;&#62; /tmp/rsvproxy, which got recreated the next time I ran rsv-control</font>
<font color='#7F7E6F'>&#62;&#62;&#62; (and all ran fine again), and restarted bestman2 one more time,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; but the condor-cron rsv srm probes still fail!</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; So somewhere/somehow either bestman or condor-cron rsv seems to cache</font>
<font color='#7F7E6F'>&#62;&#62;&#62; something, which keeps failing these tests. But what?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; How can it be that rsv-control succeeds, but condor-cron jobs fail?</font>
<font color='#7F7E6F'>&#62;&#62;&#62; I thought rsv-control runs the exact same probes?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; How can we &#39;un-cache&#39; anything that might be cached here,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; so that our RSV will finally stay green?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; HELP! &#58;)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Hi Tim, and all,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; YESSS!!! &#58;)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; I changed /etc/sysconfig/bestman2 to</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; JAVA_HOME=/etc/alternatives/java_sdk_openjdk</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; which seemed less intrusive than changing the java alternative,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; and restarted Bestman2, and now it works, yay!!!</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; I&#39;m forcing a re-run of all RSV probes again now, hopefully</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; that&#39;ll make the SRM probes turn green as well,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; and then we can finally end this downtime!</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; So how do you want to fix this issue permanently?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; I think ideally we should find a way to not bring in</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; the IBM java at all -- but until then I think the fix above</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; is probably the simplest.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Thanks a lot for all your help,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; sorry it took so long to fix,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; but it was quite tricky indeed!</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Tim Cartwright &#60;cat@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Horst&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; If I understand Mat&#39;s RSV probe for Java, BeStMan gets its version of Java</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; to use from /etc/sysconfig/bestman2.  I see from your configuration files</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; from yesterday this setting in bestman2&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; JAVA_HOME=/etc/alternatives/java_sdk</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; So I think you have a couple of options here.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; 1. Change your alternatives system to point to java-1.7.0-openjdk</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; 2. Change /etc/sysconfig/bestman2 to point to java-1.7.0-openjdk</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; ? Tim</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; On 10 Sep 2013, at 08&#58;00, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Hi Brian,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; ahh, now we&#39;re getting somewhere!</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Right, all our java-1.7* RPMs come from RHEL6 repos.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; It looks like we&#39;re definitely using java-1.7-ibm, though, since</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#39;alternatives --display java&#39; returns</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; link currently points to /usr/lib/jvm/jre-1.7.0-ibm.x86_64/bin/java</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; and &#39;java -version&#39; returns</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java version &#34;1.7.0&#34;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Java(TM) SE Runtime Environment (build pxa6470sr5-20130619_01(SR5))</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; IBM J9 VM (build 2.6, JRE 1.7.0 Linux amd64-64 Compressed References 20130617_15</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; and the soft links java and javac in /etc/alternatives/ are pointing</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; to the IBM version as well.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; The question is, why did that version get installed in the first place?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; I just double checked the java RPMs we had before and after the bestman2</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; installation; before we had none, and after the installation with</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; yum --enablerepo=epel --enablerepo=osg-upcoming install empty-ca-certs osg-se-bestman</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; we now have these&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.5.0-gcj-1.5.0.0-29.1.el6.x86_64</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-ibm-1.7.0.5.0-1jpp.2.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-ibm-devel-1.7.0.5.0-1jpp.2.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-openjdk-1.7.0.25-2.3.10.4.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-openjdk-devel-1.7.0.25-2.3.10.4.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java_cup-0.10k-5.el6.x86_64</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; I did notice that the IBM version came from a different repo</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; than the openjdk version&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; [root@tier2-02 backup]# yum list java-1.7&#92;*</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Loaded plugins&#58; dellsysid, downloadonly, priorities, rhnplugin, security</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; This system is receiving updates from RHN Classic or RHN Satellite.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; 5 packages excluded due to repository priority protections</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Installed Packages</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-ibm.x86_64           1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-ibm-devel.x86_64     1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-openjdk.x86_64       1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-openjdk-devel.x86_64 1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; So maybe there&#39;s some unexpected prioritizing going on when the repo</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; rhel-x86_64-server-supplementary-6 is enabled, which apparently has never</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; been tested so far? This didn&#39;t happen on OUHEP_ITB, even though</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; the IBM version there is available as well, but wasn&#39;t installed&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; [root@osgitb2 ~]# yum list java-1.7&#92;*</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Loaded plugins&#58; downloadonly, priorities, rhnplugin</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; This system is receiving updates from RHN Classic or RHN Satellite.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Excluding Packages from Extra Packages for Enterprise Linux 5 - i386</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Finished</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Excluding Packages from OSG Software for Enterprise Linux 5 - i386</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Finished</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; 223 packages excluded due to repository priority protections</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Installed Packages</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-openjdk.i386           1&#58;1.7.0.25-2.3.10.5.el5_9   installed</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-openjdk-devel.i386     1&#58;1.7.0.25-2.3.10.5.el5_9   installed</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Available Packages</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-ibm.i386               1&#58;1.7.0.5.0-1jpp.2.el5_9    rhel-i386-client-supplementary-5</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-ibm-devel.i386         1&#58;1.7.0.5.0-1jpp.2.el5_9    rhel-i386-client-supplementary-5</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; It&#39;s possible that the channel rhel-i386-client-supplementary-5 wasn&#39;t enabled</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; during the initial bestman install, since I know it was added to our OU</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; RHEL5 machines some time later -- but I&#39;m 95% certain that was BEFORE</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; I did this osg-upcoming bestman2 testing, which as on June 19, so not</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; too long ago, and I&#39;m pretty sure that we added that channel earlier</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; than that.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Either way, we need to figure out a way to make sure that openjdk</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; is installed and ibm isn&#39;t, and I&#39;ll leave that up to you,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; since I know very little about yum priorities. =)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; As for right now, I guess I should use &#39;alternatives --config java[c]&#39;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; and point them to openjdk, and restart bestman, and hope that that</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; will fix it?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Brian Bockelman &#60;bbockelm@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; OSG does not distribute java-1.7.0-*; you&#39;re getting that from your OS.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; We currently only support two JDKs - sun/oracle 1.6.0 and OpenJDK 1.7.0.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; Can you check&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; alternatives --display java</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; (feel free to send the output if you can&#39;t interpret it); we ought to verify IBM&#39;s JDK is not used.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; Thanks!</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; Brian</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; On Sep 9, 2013, at 6&#58;15 PM, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; a few more observations which may or may not help.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Comparing tier2-02.ochep.ou.edu and osgitb2.nhn.ou.edu,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; I noticed that osgitb2 only has java-1.7.0-openjdk and</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-openjdk-devel installed, whereas tier2-02 has</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-ibm and java-1.7.0-ibm-devel installed as well.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Did this dependency change from RHEL5 to RHEL6, or because</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; it&#39;s 64-bit? java-1.7.0-ibm.i386 is available as well, but</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; apparently bestman2-server-2.3.0-14.osg.el5.noarch doesn&#39;t require it.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Why does bestman2-server-2.3.0-14.osg.el6.noarch need it?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Also, I noticed that most bestman RPMs are noarch; but I take it</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; they still only require the 64-bit java versions on 64-bit RHEL6?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; I tried looking for the 32-bit versions of java-1.7.0-ibm and</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-openjdk, but they don&#39;t seem to exist. I guess that&#39;s expected?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; I&#39;d really like to get this working tomorrow, so that we can come back</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; out of our downtime. Also, I believe osg-upcoming is scheduled to be</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; released as osg production on Wednesday, so I think it would be</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; very good to understand what&#39;s going on before doing that as well! =)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_2084214039').click(function() {
            $('#detail_2084214039').slideDown("normal");
            $('#show_2084214039').hide();
            $('#hide_2084214039').show();
        });
        $('#hide_2084214039').click(function() {
            $('#detail_2084214039').slideUp();
            $('#hide_2084214039').hide();
            $('#show_2084214039').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378834932'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-10T17:42:12+00:00">Sep 10, 2013 05:42 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378834932">&nbsp;</a></div><pre>Hi Bockjoo,

yes, I just figured that out, too! &#58;)
See the other email I just sent.

Bestman is not an easy beast to debug!

Thanks,

Horst

Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; I think it&#39;s the same java issue.</font>
<font color='#7F7E6F'>&#62; You need something like</font>
<font color='#7F7E6F'>&#62; export JAVA_HOME=/etc/alternatives/java_sdk_openjdk</font>
<font color='#7F7E6F'>&#62; srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; So you need to add the export JAVA_HOME=.... line somewhere</font>
<font color='#7F7E6F'>&#62; in the system profile, rsv configuration, or rsv account.</font>
<font color='#7F7E6F'>&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; On 9/10/13 11&#58;31 AM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; Hi again,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; well, I&#39;m still having one small problem. The srm probes run from</font>
<font color='#7F7E6F'>&#62; &#62; rsv/condor-cron still keep giving me the same old error as before</font>
<font color='#7F7E6F'>&#62; &#62; I fixed it -- but when I run them by hand as root on tier2-01 with</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; rsv-control --run --all-enabled</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; then they all succeed! And then both our local RSV page and MyOSG</font>
<font color='#7F7E6F'>&#62; &#62; turn green again, too -- until the next time condor-cron rsv runs.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; My own personal tests with both my DOEGrids and DigiCert proxies work</font>
<font color='#7F7E6F'>&#62; &#62; just fine, too, so Bestman2 is definitely working fine!</font>
<div id='show_1060707921' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1060707921'><font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; I tried restarting rsv and condor-cron on tier2-01, even removed</font>
<font color='#7F7E6F'>&#62; &#62; /tmp/rsvproxy, which got recreated the next time I ran rsv-control</font>
<font color='#7F7E6F'>&#62; &#62; (and all ran fine again), and restarted bestman2 one more time,</font>
<font color='#7F7E6F'>&#62; &#62; but the condor-cron rsv srm probes still fail!</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; So somewhere/somehow either bestman or condor-cron rsv seems to cache</font>
<font color='#7F7E6F'>&#62; &#62; something, which keeps failing these tests. But what?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; How can it be that rsv-control succeeds, but condor-cron jobs fail?</font>
<font color='#7F7E6F'>&#62; &#62; I thought rsv-control runs the exact same probes?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; How can we &#39;un-cache&#39; anything that might be cached here,</font>
<font color='#7F7E6F'>&#62; &#62; so that our RSV will finally stay green?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; HELP! &#58;)</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Hi Tim, and all,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; YESSS!!! &#58;)</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; I changed /etc/sysconfig/bestman2 to</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; JAVA_HOME=/etc/alternatives/java_sdk_openjdk</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; which seemed less intrusive than changing the java alternative,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; and restarted Bestman2, and now it works, yay!!!</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; I&#39;m forcing a re-run of all RSV probes again now, hopefully</font>
<font color='#7F7E6F'>&#62; &#62;&#62; that&#39;ll make the SRM probes turn green as well,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; and then we can finally end this downtime!</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; So how do you want to fix this issue permanently?</font>
<font color='#7F7E6F'>&#62; &#62;&#62; I think ideally we should find a way to not bring in</font>
<font color='#7F7E6F'>&#62; &#62;&#62; the IBM java at all -- but until then I think the fix above</font>
<font color='#7F7E6F'>&#62; &#62;&#62; is probably the simplest.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Thanks a lot for all your help,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; sorry it took so long to fix,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; but it was quite tricky indeed!</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Tim Cartwright &#60;cat@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Horst&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; If I understand Mat&#39;s RSV probe for Java, BeStMan gets its version of Java</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; to use from /etc/sysconfig/bestman2.  I see from your configuration files</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; from yesterday this setting in bestman2&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; JAVA_HOME=/etc/alternatives/java_sdk</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; So I think you have a couple of options here.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; 1. Change your alternatives system to point to java-1.7.0-openjdk</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; 2. Change /etc/sysconfig/bestman2 to point to java-1.7.0-openjdk</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; ? Tim</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; On 10 Sep 2013, at 08&#58;00, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Hi Brian,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; ahh, now we&#39;re getting somewhere!</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Right, all our java-1.7* RPMs come from RHEL6 repos.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; It looks like we&#39;re definitely using java-1.7-ibm, though, since</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; &#39;alternatives --display java&#39; returns</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; link currently points to /usr/lib/jvm/jre-1.7.0-ibm.x86_64/bin/java</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; and &#39;java -version&#39; returns</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; java version &#34;1.7.0&#34;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Java(TM) SE Runtime Environment (build pxa6470sr5-20130619_01(SR5))</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; IBM J9 VM (build 2.6, JRE 1.7.0 Linux amd64-64 Compressed References 20130617_15</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; and the soft links java and javac in /etc/alternatives/ are pointing</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; to the IBM version as well.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; The question is, why did that version get installed in the first place?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; I just double checked the java RPMs we had before and after the bestman2</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; installation; before we had none, and after the installation with</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; yum --enablerepo=epel --enablerepo=osg-upcoming install empty-ca-certs osg-se-bestman</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; we now have these&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; java-1.5.0-gcj-1.5.0.0-29.1.el6.x86_64</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; java-1.7.0-ibm-1.7.0.5.0-1jpp.2.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; java-1.7.0-ibm-devel-1.7.0.5.0-1jpp.2.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; java-1.7.0-openjdk-1.7.0.25-2.3.10.4.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; java-1.7.0-openjdk-devel-1.7.0.25-2.3.10.4.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; java_cup-0.10k-5.el6.x86_64</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; I did notice that the IBM version came from a different repo</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; than the openjdk version&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; [root@tier2-02 backup]# yum list java-1.7&#92;*</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Loaded plugins&#58; dellsysid, downloadonly, priorities, rhnplugin, security</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; This system is receiving updates from RHN Classic or RHN Satellite.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; 5 packages excluded due to repository priority protections</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Installed Packages</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; java-1.7.0-ibm.x86_64           1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; java-1.7.0-ibm-devel.x86_64     1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; java-1.7.0-openjdk.x86_64       1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; java-1.7.0-openjdk-devel.x86_64 1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; So maybe there&#39;s some unexpected prioritizing going on when the repo</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; rhel-x86_64-server-supplementary-6 is enabled, which apparently has never</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; been tested so far? This didn&#39;t happen on OUHEP_ITB, even though</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; the IBM version there is available as well, but wasn&#39;t installed&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; [root@osgitb2 ~]# yum list java-1.7&#92;*</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Loaded plugins&#58; downloadonly, priorities, rhnplugin</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; This system is receiving updates from RHN Classic or RHN Satellite.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Excluding Packages from Extra Packages for Enterprise Linux 5 - i386</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Finished</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Excluding Packages from OSG Software for Enterprise Linux 5 - i386</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Finished</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; 223 packages excluded due to repository priority protections</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Installed Packages</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; java-1.7.0-openjdk.i386           1&#58;1.7.0.25-2.3.10.5.el5_9   installed</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; java-1.7.0-openjdk-devel.i386     1&#58;1.7.0.25-2.3.10.5.el5_9   installed</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Available Packages</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; java-1.7.0-ibm.i386               1&#58;1.7.0.5.0-1jpp.2.el5_9    rhel-i386-client-supplementary-5</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; java-1.7.0-ibm-devel.i386         1&#58;1.7.0.5.0-1jpp.2.el5_9    rhel-i386-client-supplementary-5</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; It&#39;s possible that the channel rhel-i386-client-supplementary-5 wasn&#39;t enabled</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; during the initial bestman install, since I know it was added to our OU</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; RHEL5 machines some time later -- but I&#39;m 95% certain that was BEFORE</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; I did this osg-upcoming bestman2 testing, which as on June 19, so not</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; too long ago, and I&#39;m pretty sure that we added that channel earlier</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; than that.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Either way, we need to figure out a way to make sure that openjdk</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; is installed and ibm isn&#39;t, and I&#39;ll leave that up to you,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; since I know very little about yum priorities. =)</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; As for right now, I guess I should use &#39;alternatives --config java[c]&#39;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; and point them to openjdk, and restart bestman, and hope that that</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; will fix it?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Brian Bockelman &#60;bbockelm@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; OSG does not distribute java-1.7.0-*; you&#39;re getting that from your OS.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; We currently only support two JDKs - sun/oracle 1.6.0 and OpenJDK 1.7.0.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; Can you check&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; alternatives --display java</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; (feel free to send the output if you can&#39;t interpret it); we ought to verify IBM&#39;s JDK is not used.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; Thanks!</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; Brian</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; On Sep 9, 2013, at 6&#58;15 PM, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; a few more observations which may or may not help.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Comparing tier2-02.ochep.ou.edu and osgitb2.nhn.ou.edu,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; I noticed that osgitb2 only has java-1.7.0-openjdk and</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-openjdk-devel installed, whereas tier2-02 has</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-ibm and java-1.7.0-ibm-devel installed as well.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Did this dependency change from RHEL5 to RHEL6, or because</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; it&#39;s 64-bit? java-1.7.0-ibm.i386 is available as well, but</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; apparently bestman2-server-2.3.0-14.osg.el5.noarch doesn&#39;t require it.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Why does bestman2-server-2.3.0-14.osg.el6.noarch need it?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Also, I noticed that most bestman RPMs are noarch; but I take it</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; they still only require the 64-bit java versions on 64-bit RHEL6?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; I tried looking for the 32-bit versions of java-1.7.0-ibm and</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-openjdk, but they don&#39;t seem to exist. I guess that&#39;s expected?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; I&#39;d really like to get this working tomorrow, so that we can come back</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; out of our downtime. Also, I believe osg-upcoming is scheduled to be</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; released as osg production on Wednesday, so I think it would be</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; very good to understand what&#39;s going on before doing that as well! =)</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_1060707921').click(function() {
            $('#detail_1060707921').slideDown("normal");
            $('#show_1060707921').hide();
            $('#hide_1060707921').show();
        });
        $('#hide_1060707921').click(function() {
            $('#detail_1060707921').slideUp();
            $('#hide_1060707921').hide();
            $('#show_1060707921').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378834753'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-10T17:39:13+00:00">Sep 10, 2013 05:39 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378834753">&nbsp;</a></div><pre>Hi again,

some more info on this RSV problem.
So when I run these commands as root@tier2-01 on the command line,
they work&#58;

----
rsv-control --run org.osg.srm.srmping -u tier2-02.ochep.ou.edu&#58;8443
rsv-control --run org.osg.srm.srmcp-readwrite -u tier2-02.ochep.ou.edu&#58;8443
----

However, when I tried to put them in a cron job in order to keep us
from turning red in RSV, they fail again! See below for the output
of the cron job.

So what is different when I run this on the command line from
when I run it in cron, or when condor-cron runs it?

I assume that rsv on the CE (where we have it installed) isn&#39;t using
java of any kind, right? tier2-01 also has the IBM java installed,
but I haven&#39;t messed with that at all, since I really can&#39;t imagine
it would have anything to do with this, right?

What login environment are the crons missing?

Wait -- I think I figured it out, by comparing the output from
the command line with the output in the cron job below.
My current login environment contains
JAVA_HOME=/usr/java/latest
while the cron jobs apparently get their JAVA_HOME from
/etc/sysconfig/bestman2 -- which on tier2-01 still pointed to
/etc/alternatives/java_sdk, which is the IBM version.

So now I changed that to /etc/alternatives/java_sdk_openjdk,
and hopefully the next condor-cron job will succeed!
<div id='show_558391199' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_558391199'>
Yes, it worked!

This is getting really complicated, I hope someone it keeping
detailed notes to put in the upgrade instructions! &#58;)

Thanks a lot,

Horst

Horst Severini &#60;hs@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi again,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; well, I&#39;m still having one small problem. The srm probes run from</font>
<font color='#7F7E6F'>&#62; rsv/condor-cron still keep giving me the same old error as before</font>
<font color='#7F7E6F'>&#62; I fixed it -- but when I run them by hand as root on tier2-01 with</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; rsv-control --run --all-enabled</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; then they all succeed! And then both our local RSV page and MyOSG</font>
<font color='#7F7E6F'>&#62; turn green again, too -- until the next time condor-cron rsv runs.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; My own personal tests with both my DOEGrids and DigiCert proxies work</font>
<font color='#7F7E6F'>&#62; just fine, too, so Bestman2 is definitely working fine!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I tried restarting rsv and condor-cron on tier2-01, even removed</font>
<font color='#7F7E6F'>&#62; /tmp/rsvproxy, which got recreated the next time I ran rsv-control</font>
<font color='#7F7E6F'>&#62; (and all ran fine again), and restarted bestman2 one more time,</font>
<font color='#7F7E6F'>&#62; but the condor-cron rsv srm probes still fail!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; So somewhere/somehow either bestman or condor-cron rsv seems to cache</font>
<font color='#7F7E6F'>&#62; something, which keeps failing these tests. But what?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; How can it be that rsv-control succeeds, but condor-cron jobs fail?</font>
<font color='#7F7E6F'>&#62; I thought rsv-control runs the exact same probes?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; How can we &#39;un-cache&#39; anything that might be cached here,</font>
<font color='#7F7E6F'>&#62; so that our RSV will finally stay green?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; HELP! &#58;)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>

----

From&#58; root@.... (Cron Daemon)
To&#58; root@....
Subject&#58; Cron &#60;root@tier2-01&#62;    ( /usr/bin/rsv-control --run org.osg.srm.srmping -u tier2-02.ochep.ou.edu&#58;8443 && /usr/bin/rsv-control --run org.osg.srm.srmcp-readwrite -u tier2-02.ochep.ou.edu&#58;8443 )
Content-Type&#58; text/plain; charset=ISO-8859-15
Date&#58; Tue, 10 Sep 2013 11&#58;55&#58;14 -0500 (CDT)

Running metric org.osg.srm.srmping&#58;

metricName&#58; org.osg.srm.srmping
metricType&#58; status
timestamp&#58; 2013-09-10 11&#58;55&#58;14 CDT
metricStatus&#58; CRITICAL
serviceType&#58; OSG-SRM
serviceURI&#58; tier2-02.ochep.ou.edu&#58;8443
gatheredAt&#58; tier2-01.ochep.ou.edu
summaryData&#58; CRITICAL
detailsData&#58; The command &#39;srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a> -debug 2&#62;&1&#39; returned an unknown exit code.
Output from srm-ping&#58;
srm-ping   2.2.2.3.0  Wed Nov  7 16&#58;03&#58;09 CST 2012

BeStMan and SRM-Clients Copyright(c) 2007-2012,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>
OSG Support at osg-software@.... and
documentation at <a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/</a>

##############################################################
# SRM_HOME = /etc/bestman2
# BESTMAN_LIB = /usr/share/java/bestman2
# JAVA_HOME = /etc/alternatives/java_sdk
java version &#34;1.7.0&#34;
Java(TM) SE Runtime Environment (build pxa6470sr5-20130619_01(SR5))
IBM J9 VM (build 2.6, JRE 1.7.0 Linux amd64-64 Compressed References 20130617_152572 (JIT enabled, AOT enabled)
J9VM - R26_Java726_SR5_20130617_1436_B152572
JIT  - r11.b04_20130528_38954ifx1
GC   - R26_Java726_SR5_20130617_1436_B152572_CMPRSS
J9CL - 20130617_152572)
JCL - 20130616_01 based on Oracle 7u25-b12

# BESTMAN_SYSCONF = /etc/sysconfig/bestman2
##############################################################
#################################################################
# BeStMan and BeStMan Clients Copyright(c) 2007-2011,
# Lawrence Berkeley National Laboratory. All rights reserved.
# Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>
#################################################################
#
# BESTMAN_SYSCONF contains both external env settings and internal definitions
#
#################################################################
# Below is ONLY for ESTERNAL env settings
#################################################################
#
#
# Initialization
SRM_HOME=/etc/bestman2
BESTMAN_SYSCONF=/etc/sysconfig/bestman2
BESTMAN_SYSCONF_LIB=/etc/sysconfig/bestman2lib
BESTMAN2_CONF=/etc/bestman2/conf/bestman2.rc
JAVA_HOME=/etc/alternatives/java_sdk
#
#
# BeStMan2 server system init variables
BESTMAN_LOG=/var/log/bestman2/bestman2.log
BESTMAN_PID=/var/run/bestman2.pid
BESTMAN_LOCK=/var/lock/bestman2
SRM_OWNER=bestman
#
#
# BeStMan2 server and clients common variables
BESTMAN_LIB=/usr/share/java/bestman2
X509_CERT_DIR=/etc/grid-security/certificates
# GLOBUS_HOSTNAME=
# GLOBUS_LOCATION=
# GLOBUS_TCP_PORT_RANGE=
# GLOBUS_TCP_SOURCE_RANGE=
# VOMSDIR=
# BESTMAN_JAVA_SRM_OTHER_OPTS=
#
#
# BeStMan2 server variables
BESTMAN_MAX_JAVA_HEAP=1024
# BESTMAN_JAVA_STACK_SIZE=
# BESTMAN_EVENT_LOG_COUNT=
# BESTMAN_EVENT_LOG_SIZE=
# BESTMAN_CONNECTOR_QUEUESIZE=
# BESTMAN_CONNECTION_ACCEPTORSIZE=
BESTMAN_GUMSCERTPATH=/etc/grid-security/bestman/bestmancert.pem
BESTMAN_GUMSKEYPATH=/etc/grid-security/bestman/bestmankey.pem
# BESTMAN_GUMSPROXYPATH=
# BESTMAN_PLUGIN=
# BESTMAN_EXTRALIB=
BESTMAN_GUMS_ENABLED=yes
JETTY_DEBUG_ENABLED=no
BESTMAN_GATEWAYMODE_ENABLED=yes
BESTMAN_FULLMODE_ENABLED=no
#
#
# BeStMan2 clients variables
JAVA_CLIENT_MAX_HEAP=512
JAVA_CLIENT_MIN_HEAP=32
# JAVA_CLIENT_STACK_SIZE=

#################################################################
# BESTMAN_SYSCONF_LIB = /etc/sysconfig/bestman2lib
##############################################################
#################################################################
# BeStMan and BeStMan Clients Copyright(c) 2007-2011,
# Lawrence Berkeley National Laboratory. All rights reserved.
# Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>
#################################################################
#
#
####################################################################
# Below is only for BESTMAN2 SERVER and BESTMAN2 CLIENT LIB settings
####################################################################
#
#
if [ &#34;x$BESTMAN_SYSCONF_MODE&#34; = &#34;xserver&#34; ]; then
BESTMAN2_SERVER_LIB=.
# Axis and related dependencies
BESTMAN2_SERVER_LIB=$BESTMAN2_SERVER_LIB&#58;$(build-classpath axis wsdl4j commons-discovery commons-logging bestman2/axis log4j)
# GUMS and related deps
BESTMAN2_SERVER_LIB=$BESTMAN2_SERVER_LIB&#58;$(build-classpath commons-collections joda-time voms-api-java trustmanager trustmanager-axis xalan-j2 jakarta-commons-lang)
BESTMAN2_SERVER_LIB=$BESTMAN2_SERVER_LIB&#58;/usr/lib/gums/privilege-xacml-2.2.4.jar&#58;/usr/lib/gums/openws-1.2.2.jar&#58;/usr/lib/gums/opensaml-2.2.3.jar&#58;/usr/lib/gums/xmltooling-1.3.2-1.jar&#58;/usr/lib/gums/velocity-1.5.jar&#58;/usr/lib/gums/xmlsec-1.4.2.jar
# Jetty JARs
BESTMAN2_SERVER_LIB=$BESTMAN2_SERVER_LIB&#58;$(build-classpath jetty)
# jglobus JARs
BESTMAN2_SERVER_LIB=$BESTMAN2_SERVER_LIB&#58;$(build-classpath jglobus bcprov cog-jglobus-axis)
# Remainder odds-n-ends
BESTMAN2_SERVER_LIB=$BESTMAN2_SERVER_LIB&#58;$(build-classpath bestman2/others)
else
BESTMAN2_CLIENT_LIB=.&#58;$(build-classpath cog-jglobus-axis)
BESTMAN2_CLIENT_LIB=$BESTMAN2_CLIENT_LIB&#58;$(build-classpath axis wsdl4j commons-discovery commons-logging bestman2/axis log4j)
BESTMAN2_CLIENT_LIB=$BESTMAN2_CLIENT_LIB&#58;$(build-classpath jglobus bcprov)
fi
#################################################################
##############################################################
# X509_USER_PROXY = /tmp/rsvproxy
##############################################################

Parsing config file /etc/bestman2/conf/srmclient.conf

Get Credential for proxyPath /tmp/rsvproxy

===================================
SRM Configuration

serviceUrl     &#58; httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server
Debug ON       &#58; true
Quiet ON       &#58; false
Using proxyFile &#58; /tmp/rsvproxy
SRM-CLIENT&#58; Connecting to serviceurl httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server

SRM-CLIENT&#58; ProxyType found 18

SRM-CLIENT&#58; limited delegation by system

SRM-PING&#58; Tue Sep 10 11&#58;55&#58;06 CDT 2013  Calling SrmPing Request...
SoapCallThread.Exception=; nested exception is&#58;
org.globus.common.ChainedIOException&#58; Authentication failed [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0
major string&#58; General failure, unspecified at GSSAPI level
minor string&#58; None [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0
major string&#58; General failure, unspecified at GSSAPI level
minor string&#58; None [Caused by&#58; General SSLEngine problem]]]

Exception &#58; proxy type mismatch, please check your proxy type

EOT

Running metric org.osg.srm.srmcp-readwrite&#58;

metricName&#58; org.osg.srm.srmcp-readwrite
metricType&#58; status
timestamp&#58; 2013-09-10 11&#58;55&#58;26 CDT
metricStatus&#58; CRITICAL
serviceType&#58; OSG-SRM
serviceURI&#58; tier2-02.ochep.ou.edu&#58;8443
gatheredAt&#58; tier2-01.ochep.ou.edu
summaryData&#58; CRITICAL
detailsData&#58; Failed to transfer file to remote server.
Command&#58; srm-copy &#39;file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file&#39; &#39;<a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server?SFN=/storage/data/griddata/storage-probe-test-file.1378832114.20256&#39' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server?SFN=/storage/data/griddata/storage-probe-test-file.1378832114.20256&#39</a>; 2&#62;&1
Output from srm-copy&#58;
srm-copy   2.2.2.3.0  Wed Nov  7 16&#58;03&#58;09 CST 2012

BeStMan and SRM-Clients Copyright(c) 2007-2012,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>
OSG Support at osg-software@.... and
documentation at <a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/</a>

SRM-CLIENT&#58; Tue Sep 10 11&#58;55&#58;18 CDT 2013 Connecting to httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server

SRM-CLIENT&#58; Tue Sep 10 11&#58;55&#58;18 CDT 2013 Calling SrmPrepareToPutRequest now ...
SoapCallThread.Exception=; nested exception is&#58;
org.globus.common.ChainedIOException&#58; Authentication failed [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0
major string&#58; General failure, unspecified at GSSAPI level
minor string&#58; None [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0
major string&#58; General failure, unspecified at GSSAPI level
minor string&#58; None [Caused by&#58; General SSLEngine problem]]]

Exception &#58; proxy type mismatch, please check your proxy type

EOT
</div><script type='text/javascript'>
        $('#show_558391199').click(function() {
            $('#detail_558391199').slideDown("normal");
            $('#show_558391199').hide();
            $('#hide_558391199').show();
        });
        $('#hide_558391199').click(function() {
            $('#detail_558391199').slideUp();
            $('#hide_558391199').hide();
            $('#show_558391199').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378833849'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-10T17:24:09+00:00">Sep 10, 2013 05:24 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1378833849">&nbsp;</a></div><pre>Hi Horst,
I think it&#39;s the same java issue.
You need something like
export JAVA_HOME=/etc/alternatives/java_sdk_openjdk
srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a>
So you need to add the export JAVA_HOME=.... line somewhere
in the system profile, rsv configuration, or rsv account.
Bockjoo
On 9/10/13 11&#58;31 AM, Horst Severini wrote&#58;
<font color='#7F7E6F'>&#62; Hi again,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; well, I&#39;m still having one small problem. The srm probes run from</font>
<font color='#7F7E6F'>&#62; rsv/condor-cron still keep giving me the same old error as before</font>
<font color='#7F7E6F'>&#62; I fixed it -- but when I run them by hand as root on tier2-01 with</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; rsv-control --run --all-enabled</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; then they all succeed! And then both our local RSV page and MyOSG</font>
<font color='#7F7E6F'>&#62; turn green again, too -- until the next time condor-cron rsv runs.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; My own personal tests with both my DOEGrids and DigiCert proxies work</font>
<font color='#7F7E6F'>&#62; just fine, too, so Bestman2 is definitely working fine!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I tried restarting rsv and condor-cron on tier2-01, even removed</font>
<font color='#7F7E6F'>&#62; /tmp/rsvproxy, which got recreated the next time I ran rsv-control</font>
<font color='#7F7E6F'>&#62; (and all ran fine again), and restarted bestman2 one more time,</font>
<font color='#7F7E6F'>&#62; but the condor-cron rsv srm probes still fail!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; So somewhere/somehow either bestman or condor-cron rsv seems to cache</font>
<font color='#7F7E6F'>&#62; something, which keeps failing these tests. But what?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; How can it be that rsv-control succeeds, but condor-cron jobs fail?</font>
<font color='#7F7E6F'>&#62; I thought rsv-control runs the exact same probes?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; How can we &#39;un-cache&#39; anything that might be cached here,</font>
<div id='show_748203688' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_748203688'><font color='#7F7E6F'>&#62; so that our RSV will finally stay green?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; HELP! &#58;)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Tim, and all,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; YESSS!!! &#58;)</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I changed /etc/sysconfig/bestman2 to</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; JAVA_HOME=/etc/alternatives/java_sdk_openjdk</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; which seemed less intrusive than changing the java alternative,</font>
<font color='#7F7E6F'>&#62;&#62; and restarted Bestman2, and now it works, yay!!!</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; I&#39;m forcing a re-run of all RSV probes again now, hopefully</font>
<font color='#7F7E6F'>&#62;&#62; that&#39;ll make the SRM probes turn green as well,</font>
<font color='#7F7E6F'>&#62;&#62; and then we can finally end this downtime!</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; So how do you want to fix this issue permanently?</font>
<font color='#7F7E6F'>&#62;&#62; I think ideally we should find a way to not bring in</font>
<font color='#7F7E6F'>&#62;&#62; the IBM java at all -- but until then I think the fix above</font>
<font color='#7F7E6F'>&#62;&#62; is probably the simplest.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks a lot for all your help,</font>
<font color='#7F7E6F'>&#62;&#62; sorry it took so long to fix,</font>
<font color='#7F7E6F'>&#62;&#62; but it was quite tricky indeed!</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Tim Cartwright &#60;cat@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Horst&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; If I understand Mat&#39;s RSV probe for Java, BeStMan gets its version of Java</font>
<font color='#7F7E6F'>&#62;&#62;&#62; to use from /etc/sysconfig/bestman2.  I see from your configuration files</font>
<font color='#7F7E6F'>&#62;&#62;&#62; from yesterday this setting in bestman2&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; JAVA_HOME=/etc/alternatives/java_sdk</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; So I think you have a couple of options here.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 1. Change your alternatives system to point to java-1.7.0-openjdk</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 2. Change /etc/sysconfig/bestman2 to point to java-1.7.0-openjdk</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; ? Tim</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; On 10 Sep 2013, at 08&#58;00, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Hi Brian,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; ahh, now we&#39;re getting somewhere!</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Right, all our java-1.7* RPMs come from RHEL6 repos.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; It looks like we&#39;re definitely using java-1.7-ibm, though, since</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; &#39;alternatives --display java&#39; returns</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; link currently points to /usr/lib/jvm/jre-1.7.0-ibm.x86_64/bin/java</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; and &#39;java -version&#39; returns</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java version &#34;1.7.0&#34;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Java(TM) SE Runtime Environment (build pxa6470sr5-20130619_01(SR5))</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; IBM J9 VM (build 2.6, JRE 1.7.0 Linux amd64-64 Compressed References 20130617_15</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; and the soft links java and javac in /etc/alternatives/ are pointing</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; to the IBM version as well.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; The question is, why did that version get installed in the first place?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; I just double checked the java RPMs we had before and after the bestman2</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; installation; before we had none, and after the installation with</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; yum --enablerepo=epel --enablerepo=osg-upcoming install empty-ca-certs osg-se-bestman</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; we now have these&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java-1.5.0-gcj-1.5.0.0-29.1.el6.x86_64</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java-1.7.0-ibm-1.7.0.5.0-1jpp.2.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java-1.7.0-ibm-devel-1.7.0.5.0-1jpp.2.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java-1.7.0-openjdk-1.7.0.25-2.3.10.4.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java-1.7.0-openjdk-devel-1.7.0.25-2.3.10.4.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java_cup-0.10k-5.el6.x86_64</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; I did notice that the IBM version came from a different repo</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; than the openjdk version&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; [root@tier2-02 backup]# yum list java-1.7&#92;*</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Loaded plugins&#58; dellsysid, downloadonly, priorities, rhnplugin, security</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; This system is receiving updates from RHN Classic or RHN Satellite.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; 5 packages excluded due to repository priority protections</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Installed Packages</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java-1.7.0-ibm.x86_64           1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java-1.7.0-ibm-devel.x86_64     1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java-1.7.0-openjdk.x86_64       1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java-1.7.0-openjdk-devel.x86_64 1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; So maybe there&#39;s some unexpected prioritizing going on when the repo</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; rhel-x86_64-server-supplementary-6 is enabled, which apparently has never</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; been tested so far? This didn&#39;t happen on OUHEP_ITB, even though</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; the IBM version there is available as well, but wasn&#39;t installed&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; [root@osgitb2 ~]# yum list java-1.7&#92;*</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Loaded plugins&#58; downloadonly, priorities, rhnplugin</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; This system is receiving updates from RHN Classic or RHN Satellite.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Excluding Packages from Extra Packages for Enterprise Linux 5 - i386</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Finished</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Excluding Packages from OSG Software for Enterprise Linux 5 - i386</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Finished</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; 223 packages excluded due to repository priority protections</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Installed Packages</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java-1.7.0-openjdk.i386           1&#58;1.7.0.25-2.3.10.5.el5_9   installed</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java-1.7.0-openjdk-devel.i386     1&#58;1.7.0.25-2.3.10.5.el5_9   installed</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Available Packages</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java-1.7.0-ibm.i386               1&#58;1.7.0.5.0-1jpp.2.el5_9    rhel-i386-client-supplementary-5</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java-1.7.0-ibm-devel.i386         1&#58;1.7.0.5.0-1jpp.2.el5_9    rhel-i386-client-supplementary-5</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; It&#39;s possible that the channel rhel-i386-client-supplementary-5 wasn&#39;t enabled</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; during the initial bestman install, since I know it was added to our OU</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; RHEL5 machines some time later -- but I&#39;m 95% certain that was BEFORE</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; I did this osg-upcoming bestman2 testing, which as on June 19, so not</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; too long ago, and I&#39;m pretty sure that we added that channel earlier</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; than that.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Either way, we need to figure out a way to make sure that openjdk</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; is installed and ibm isn&#39;t, and I&#39;ll leave that up to you,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; since I know very little about yum priorities. =)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; As for right now, I guess I should use &#39;alternatives --config java[c]&#39;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; and point them to openjdk, and restart bestman, and hope that that</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; will fix it?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Brian Bockelman &#60;bbockelm@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; OSG does not distribute java-1.7.0-*; you&#39;re getting that from your OS.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; We currently only support two JDKs - sun/oracle 1.6.0 and OpenJDK 1.7.0.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Can you check&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; alternatives --display java</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; (feel free to send the output if you can&#39;t interpret it); we ought to verify IBM&#39;s JDK is not used.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Thanks!</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Brian</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; On Sep 9, 2013, at 6&#58;15 PM, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; a few more observations which may or may not help.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Comparing tier2-02.ochep.ou.edu and osgitb2.nhn.ou.edu,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; I noticed that osgitb2 only has java-1.7.0-openjdk and</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-openjdk-devel installed, whereas tier2-02 has</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-ibm and java-1.7.0-ibm-devel installed as well.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Did this dependency change from RHEL5 to RHEL6, or because</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; it&#39;s 64-bit? java-1.7.0-ibm.i386 is available as well, but</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; apparently bestman2-server-2.3.0-14.osg.el5.noarch doesn&#39;t require it.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Why does bestman2-server-2.3.0-14.osg.el6.noarch need it?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Also, I noticed that most bestman RPMs are noarch; but I take it</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; they still only require the 64-bit java versions on 64-bit RHEL6?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; I tried looking for the 32-bit versions of java-1.7.0-ibm and</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; java-1.7.0-openjdk, but they don&#39;t seem to exist. I guess that&#39;s expected?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; I&#39;d really like to get this working tomorrow, so that we can come back</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; out of our downtime. Also, I believe osg-upcoming is scheduled to be</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; released as osg production on Wednesday, so I think it would be</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; very good to understand what&#39;s going on before doing that as well! =)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; 	Horst</font>
</div><script type='text/javascript'>
        $('#show_748203688').click(function() {
            $('#detail_748203688').slideDown("normal");
            $('#show_748203688').hide();
            $('#hide_748203688').show();
        });
        $('#hide_748203688').click(function() {
            $('#detail_748203688').slideUp();
            $('#hide_748203688').hide();
            $('#show_748203688').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378827192'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-10T15:33:12+00:00">Sep 10, 2013 03:33 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378827192">&nbsp;</a></div><pre>Hi again,

well, I&#39;m still having one small problem. The srm probes run from
rsv/condor-cron still keep giving me the same old error as before
I fixed it -- but when I run them by hand as root on tier2-01 with

rsv-control --run --all-enabled

then they all succeed! And then both our local RSV page and MyOSG
turn green again, too -- until the next time condor-cron rsv runs.

My own personal tests with both my DOEGrids and DigiCert proxies work
just fine, too, so Bestman2 is definitely working fine!

I tried restarting rsv and condor-cron on tier2-01, even removed
/tmp/rsvproxy, which got recreated the next time I ran rsv-control
(and all ran fine again), and restarted bestman2 one more time,
but the condor-cron rsv srm probes still fail!

So somewhere/somehow either bestman or condor-cron rsv seems to cache
something, which keeps failing these tests. But what?

How can it be that rsv-control succeeds, but condor-cron jobs fail?
I thought rsv-control runs the exact same probes?

How can we &#39;un-cache&#39; anything that might be cached here,
so that our RSV will finally stay green?

HELP! &#58;)

Thanks a lot,

Horst

Horst Severini &#60;hs@....&#62; wrote&#58;
<div id='show_909472251' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_909472251'>
<font color='#7F7E6F'>&#62; Hi Tim, and all,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; YESSS!!! &#58;)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I changed /etc/sysconfig/bestman2 to</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; JAVA_HOME=/etc/alternatives/java_sdk_openjdk</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; which seemed less intrusive than changing the java alternative,</font>
<font color='#7F7E6F'>&#62; and restarted Bestman2, and now it works, yay!!!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;m forcing a re-run of all RSV probes again now, hopefully</font>
<font color='#7F7E6F'>&#62; that&#39;ll make the SRM probes turn green as well,</font>
<font color='#7F7E6F'>&#62; and then we can finally end this downtime!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; So how do you want to fix this issue permanently?</font>
<font color='#7F7E6F'>&#62; I think ideally we should find a way to not bring in</font>
<font color='#7F7E6F'>&#62; the IBM java at all -- but until then I think the fix above</font>
<font color='#7F7E6F'>&#62; is probably the simplest.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks a lot for all your help,</font>
<font color='#7F7E6F'>&#62; sorry it took so long to fix,</font>
<font color='#7F7E6F'>&#62; but it was quite tricky indeed!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Tim Cartwright &#60;cat@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#62; Horst&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; If I understand Mat&#39;s RSV probe for Java, BeStMan gets its version of Java</font>
<font color='#7F7E6F'>&#62; &#62; to use from /etc/sysconfig/bestman2.  I see from your configuration files</font>
<font color='#7F7E6F'>&#62; &#62; from yesterday this setting in bestman2&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; JAVA_HOME=/etc/alternatives/java_sdk</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; So I think you have a couple of options here.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; 1. Change your alternatives system to point to java-1.7.0-openjdk</font>
<font color='#7F7E6F'>&#62; &#62; 2. Change /etc/sysconfig/bestman2 to point to java-1.7.0-openjdk</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; ? Tim</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; On 10 Sep 2013, at 08&#58;00, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Hi Brian,</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; ahh, now we&#39;re getting somewhere!</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Right, all our java-1.7* RPMs come from RHEL6 repos.</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; It looks like we&#39;re definitely using java-1.7-ibm, though, since</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#39;alternatives --display java&#39; returns</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; link currently points to /usr/lib/jvm/jre-1.7.0-ibm.x86_64/bin/java</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; and &#39;java -version&#39; returns</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; java version &#34;1.7.0&#34;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Java(TM) SE Runtime Environment (build pxa6470sr5-20130619_01(SR5))</font>
<font color='#7F7E6F'>&#62; &#62; &#62; IBM J9 VM (build 2.6, JRE 1.7.0 Linux amd64-64 Compressed References 20130617_15</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; and the soft links java and javac in /etc/alternatives/ are pointing</font>
<font color='#7F7E6F'>&#62; &#62; &#62; to the IBM version as well.</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; The question is, why did that version get installed in the first place?</font>
<font color='#7F7E6F'>&#62; &#62; &#62; I just double checked the java RPMs we had before and after the bestman2</font>
<font color='#7F7E6F'>&#62; &#62; &#62; installation; before we had none, and after the installation with</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; yum --enablerepo=epel --enablerepo=osg-upcoming install empty-ca-certs osg-se-bestman</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; we now have these&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; java-1.5.0-gcj-1.5.0.0-29.1.el6.x86_64</font>
<font color='#7F7E6F'>&#62; &#62; &#62; java-1.7.0-ibm-1.7.0.5.0-1jpp.2.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; &#62; &#62; java-1.7.0-ibm-devel-1.7.0.5.0-1jpp.2.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; &#62; &#62; java-1.7.0-openjdk-1.7.0.25-2.3.10.4.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; &#62; &#62; java-1.7.0-openjdk-devel-1.7.0.25-2.3.10.4.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; &#62; &#62; java_cup-0.10k-5.el6.x86_64</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; I did notice that the IBM version came from a different repo</font>
<font color='#7F7E6F'>&#62; &#62; &#62; than the openjdk version&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; ----</font>
<font color='#7F7E6F'>&#62; &#62; &#62; [root@tier2-02 backup]# yum list java-1.7&#92;*</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Loaded plugins&#58; dellsysid, downloadonly, priorities, rhnplugin, security</font>
<font color='#7F7E6F'>&#62; &#62; &#62; This system is receiving updates from RHN Classic or RHN Satellite.</font>
<font color='#7F7E6F'>&#62; &#62; &#62; 5 packages excluded due to repository priority protections</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Installed Packages</font>
<font color='#7F7E6F'>&#62; &#62; &#62; java-1.7.0-ibm.x86_64           1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6</font>
<font color='#7F7E6F'>&#62; &#62; &#62; java-1.7.0-ibm-devel.x86_64     1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6</font>
<font color='#7F7E6F'>&#62; &#62; &#62; java-1.7.0-openjdk.x86_64       1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6</font>
<font color='#7F7E6F'>&#62; &#62; &#62; java-1.7.0-openjdk-devel.x86_64 1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6</font>
<font color='#7F7E6F'>&#62; &#62; &#62; ----</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; So maybe there&#39;s some unexpected prioritizing going on when the repo</font>
<font color='#7F7E6F'>&#62; &#62; &#62; rhel-x86_64-server-supplementary-6 is enabled, which apparently has never</font>
<font color='#7F7E6F'>&#62; &#62; &#62; been tested so far? This didn&#39;t happen on OUHEP_ITB, even though</font>
<font color='#7F7E6F'>&#62; &#62; &#62; the IBM version there is available as well, but wasn&#39;t installed&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; ----</font>
<font color='#7F7E6F'>&#62; &#62; &#62; [root@osgitb2 ~]# yum list java-1.7&#92;*</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Loaded plugins&#58; downloadonly, priorities, rhnplugin</font>
<font color='#7F7E6F'>&#62; &#62; &#62; This system is receiving updates from RHN Classic or RHN Satellite.</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Excluding Packages from Extra Packages for Enterprise Linux 5 - i386</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Finished</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Excluding Packages from OSG Software for Enterprise Linux 5 - i386</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Finished</font>
<font color='#7F7E6F'>&#62; &#62; &#62; 223 packages excluded due to repository priority protections</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Installed Packages</font>
<font color='#7F7E6F'>&#62; &#62; &#62; java-1.7.0-openjdk.i386           1&#58;1.7.0.25-2.3.10.5.el5_9   installed</font>
<font color='#7F7E6F'>&#62; &#62; &#62; java-1.7.0-openjdk-devel.i386     1&#58;1.7.0.25-2.3.10.5.el5_9   installed</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Available Packages</font>
<font color='#7F7E6F'>&#62; &#62; &#62; java-1.7.0-ibm.i386               1&#58;1.7.0.5.0-1jpp.2.el5_9    rhel-i386-client-supplementary-5</font>
<font color='#7F7E6F'>&#62; &#62; &#62; java-1.7.0-ibm-devel.i386         1&#58;1.7.0.5.0-1jpp.2.el5_9    rhel-i386-client-supplementary-5</font>
<font color='#7F7E6F'>&#62; &#62; &#62; ----</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; It&#39;s possible that the channel rhel-i386-client-supplementary-5 wasn&#39;t enabled</font>
<font color='#7F7E6F'>&#62; &#62; &#62; during the initial bestman install, since I know it was added to our OU</font>
<font color='#7F7E6F'>&#62; &#62; &#62; RHEL5 machines some time later -- but I&#39;m 95% certain that was BEFORE</font>
<font color='#7F7E6F'>&#62; &#62; &#62; I did this osg-upcoming bestman2 testing, which as on June 19, so not</font>
<font color='#7F7E6F'>&#62; &#62; &#62; too long ago, and I&#39;m pretty sure that we added that channel earlier</font>
<font color='#7F7E6F'>&#62; &#62; &#62; than that.</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Either way, we need to figure out a way to make sure that openjdk</font>
<font color='#7F7E6F'>&#62; &#62; &#62; is installed and ibm isn&#39;t, and I&#39;ll leave that up to you,</font>
<font color='#7F7E6F'>&#62; &#62; &#62; since I know very little about yum priorities. =)</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; As for right now, I guess I should use &#39;alternatives --config java[c]&#39;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; and point them to openjdk, and restart bestman, and hope that that</font>
<font color='#7F7E6F'>&#62; &#62; &#62; will fix it?</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Brian Bockelman &#60;bbockelm@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; OSG does not distribute java-1.7.0-*; you&#39;re getting that from your OS.</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; We currently only support two JDKs - sun/oracle 1.6.0 and OpenJDK 1.7.0.</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; Can you check&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; alternatives --display java</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; (feel free to send the output if you can&#39;t interpret it); we ought to verify IBM&#39;s JDK is not used.</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; Thanks!</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; Brian</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; On Sep 9, 2013, at 6&#58;15 PM, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; a few more observations which may or may not help.</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; Comparing tier2-02.ochep.ou.edu and osgitb2.nhn.ou.edu,</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; I noticed that osgitb2 only has java-1.7.0-openjdk and</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; java-1.7.0-openjdk-devel installed, whereas tier2-02 has</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; java-1.7.0-ibm and java-1.7.0-ibm-devel installed as well.</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; Did this dependency change from RHEL5 to RHEL6, or because</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; it&#39;s 64-bit? java-1.7.0-ibm.i386 is available as well, but</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; apparently bestman2-server-2.3.0-14.osg.el5.noarch doesn&#39;t require it.</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; Why does bestman2-server-2.3.0-14.osg.el6.noarch need it?</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; Also, I noticed that most bestman RPMs are noarch; but I take it</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; they still only require the 64-bit java versions on 64-bit RHEL6?</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; I tried looking for the 32-bit versions of java-1.7.0-ibm and</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; java-1.7.0-openjdk, but they don&#39;t seem to exist. I guess that&#39;s expected?</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; I&#39;d really like to get this working tomorrow, so that we can come back</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; out of our downtime. Also, I believe osg-upcoming is scheduled to be</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; released as osg production on Wednesday, so I think it would be</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; very good to understand what&#39;s going on before doing that as well! =)</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
</div><script type='text/javascript'>
        $('#show_909472251').click(function() {
            $('#detail_909472251').slideDown("normal");
            $('#show_909472251').hide();
            $('#hide_909472251').show();
        });
        $('#hide_909472251').click(function() {
            $('#detail_909472251').slideUp();
            $('#hide_909472251').hide();
            $('#show_909472251').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378821076'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-10T13:51:16+00:00">Sep 10, 2013 01:51 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378821076">&nbsp;</a></div><pre>Hi Tim, and all,

YESSS!!! &#58;)

I changed /etc/sysconfig/bestman2 to

JAVA_HOME=/etc/alternatives/java_sdk_openjdk

which seemed less intrusive than changing the java alternative,
and restarted Bestman2, and now it works, yay!!!

I&#39;m forcing a re-run of all RSV probes again now, hopefully
that&#39;ll make the SRM probes turn green as well,
and then we can finally end this downtime!

So how do you want to fix this issue permanently?
I think ideally we should find a way to not bring in
the IBM java at all -- but until then I think the fix above
is probably the simplest.

Thanks a lot for all your help,
sorry it took so long to fix,
but it was quite tricky indeed!

Horst

Tim Cartwright &#60;cat@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Horst&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; If I understand Mat&#39;s RSV probe for Java, BeStMan gets its version of Java</font>
<font color='#7F7E6F'>&#62; to use from /etc/sysconfig/bestman2.  I see from your configuration files</font>
<font color='#7F7E6F'>&#62; from yesterday this setting in bestman2&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; JAVA_HOME=/etc/alternatives/java_sdk</font>
<div id='show_1129443170' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1129443170'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; So I think you have a couple of options here.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 1. Change your alternatives system to point to java-1.7.0-openjdk</font>
<font color='#7F7E6F'>&#62; 2. Change /etc/sysconfig/bestman2 to point to java-1.7.0-openjdk</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ? Tim</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On 10 Sep 2013, at 08&#58;00, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#62; Hi Brian,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; ahh, now we&#39;re getting somewhere!</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Right, all our java-1.7* RPMs come from RHEL6 repos.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; It looks like we&#39;re definitely using java-1.7-ibm, though, since</font>
<font color='#7F7E6F'>&#62; &#62; &#39;alternatives --display java&#39; returns</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; link currently points to /usr/lib/jvm/jre-1.7.0-ibm.x86_64/bin/java</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; and &#39;java -version&#39; returns</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; java version &#34;1.7.0&#34;</font>
<font color='#7F7E6F'>&#62; &#62; Java(TM) SE Runtime Environment (build pxa6470sr5-20130619_01(SR5))</font>
<font color='#7F7E6F'>&#62; &#62; IBM J9 VM (build 2.6, JRE 1.7.0 Linux amd64-64 Compressed References 20130617_15</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; and the soft links java and javac in /etc/alternatives/ are pointing</font>
<font color='#7F7E6F'>&#62; &#62; to the IBM version as well.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; The question is, why did that version get installed in the first place?</font>
<font color='#7F7E6F'>&#62; &#62; I just double checked the java RPMs we had before and after the bestman2</font>
<font color='#7F7E6F'>&#62; &#62; installation; before we had none, and after the installation with</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; yum --enablerepo=epel --enablerepo=osg-upcoming install empty-ca-certs osg-se-bestman</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; we now have these&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; java-1.5.0-gcj-1.5.0.0-29.1.el6.x86_64</font>
<font color='#7F7E6F'>&#62; &#62; java-1.7.0-ibm-1.7.0.5.0-1jpp.2.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; &#62; java-1.7.0-ibm-devel-1.7.0.5.0-1jpp.2.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; &#62; java-1.7.0-openjdk-1.7.0.25-2.3.10.4.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; &#62; java-1.7.0-openjdk-devel-1.7.0.25-2.3.10.4.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; &#62; java_cup-0.10k-5.el6.x86_64</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; I did notice that the IBM version came from a different repo</font>
<font color='#7F7E6F'>&#62; &#62; than the openjdk version&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; ----</font>
<font color='#7F7E6F'>&#62; &#62; [root@tier2-02 backup]# yum list java-1.7&#92;*</font>
<font color='#7F7E6F'>&#62; &#62; Loaded plugins&#58; dellsysid, downloadonly, priorities, rhnplugin, security</font>
<font color='#7F7E6F'>&#62; &#62; This system is receiving updates from RHN Classic or RHN Satellite.</font>
<font color='#7F7E6F'>&#62; &#62; 5 packages excluded due to repository priority protections</font>
<font color='#7F7E6F'>&#62; &#62; Installed Packages</font>
<font color='#7F7E6F'>&#62; &#62; java-1.7.0-ibm.x86_64           1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6</font>
<font color='#7F7E6F'>&#62; &#62; java-1.7.0-ibm-devel.x86_64     1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6</font>
<font color='#7F7E6F'>&#62; &#62; java-1.7.0-openjdk.x86_64       1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6</font>
<font color='#7F7E6F'>&#62; &#62; java-1.7.0-openjdk-devel.x86_64 1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6</font>
<font color='#7F7E6F'>&#62; &#62; ----</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; So maybe there&#39;s some unexpected prioritizing going on when the repo</font>
<font color='#7F7E6F'>&#62; &#62; rhel-x86_64-server-supplementary-6 is enabled, which apparently has never</font>
<font color='#7F7E6F'>&#62; &#62; been tested so far? This didn&#39;t happen on OUHEP_ITB, even though</font>
<font color='#7F7E6F'>&#62; &#62; the IBM version there is available as well, but wasn&#39;t installed&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; ----</font>
<font color='#7F7E6F'>&#62; &#62; [root@osgitb2 ~]# yum list java-1.7&#92;*</font>
<font color='#7F7E6F'>&#62; &#62; Loaded plugins&#58; downloadonly, priorities, rhnplugin</font>
<font color='#7F7E6F'>&#62; &#62; This system is receiving updates from RHN Classic or RHN Satellite.</font>
<font color='#7F7E6F'>&#62; &#62; Excluding Packages from Extra Packages for Enterprise Linux 5 - i386</font>
<font color='#7F7E6F'>&#62; &#62; Finished</font>
<font color='#7F7E6F'>&#62; &#62; Excluding Packages from OSG Software for Enterprise Linux 5 - i386</font>
<font color='#7F7E6F'>&#62; &#62; Finished</font>
<font color='#7F7E6F'>&#62; &#62; 223 packages excluded due to repository priority protections</font>
<font color='#7F7E6F'>&#62; &#62; Installed Packages</font>
<font color='#7F7E6F'>&#62; &#62; java-1.7.0-openjdk.i386           1&#58;1.7.0.25-2.3.10.5.el5_9   installed</font>
<font color='#7F7E6F'>&#62; &#62; java-1.7.0-openjdk-devel.i386     1&#58;1.7.0.25-2.3.10.5.el5_9   installed</font>
<font color='#7F7E6F'>&#62; &#62; Available Packages</font>
<font color='#7F7E6F'>&#62; &#62; java-1.7.0-ibm.i386               1&#58;1.7.0.5.0-1jpp.2.el5_9    rhel-i386-client-supplementary-5</font>
<font color='#7F7E6F'>&#62; &#62; java-1.7.0-ibm-devel.i386         1&#58;1.7.0.5.0-1jpp.2.el5_9    rhel-i386-client-supplementary-5</font>
<font color='#7F7E6F'>&#62; &#62; ----</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; It&#39;s possible that the channel rhel-i386-client-supplementary-5 wasn&#39;t enabled</font>
<font color='#7F7E6F'>&#62; &#62; during the initial bestman install, since I know it was added to our OU</font>
<font color='#7F7E6F'>&#62; &#62; RHEL5 machines some time later -- but I&#39;m 95% certain that was BEFORE</font>
<font color='#7F7E6F'>&#62; &#62; I did this osg-upcoming bestman2 testing, which as on June 19, so not</font>
<font color='#7F7E6F'>&#62; &#62; too long ago, and I&#39;m pretty sure that we added that channel earlier</font>
<font color='#7F7E6F'>&#62; &#62; than that.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Either way, we need to figure out a way to make sure that openjdk</font>
<font color='#7F7E6F'>&#62; &#62; is installed and ibm isn&#39;t, and I&#39;ll leave that up to you,</font>
<font color='#7F7E6F'>&#62; &#62; since I know very little about yum priorities. =)</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; As for right now, I guess I should use &#39;alternatives --config java[c]&#39;</font>
<font color='#7F7E6F'>&#62; &#62; and point them to openjdk, and restart bestman, and hope that that</font>
<font color='#7F7E6F'>&#62; &#62; will fix it?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Brian Bockelman &#60;bbockelm@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; OSG does not distribute java-1.7.0-*; you&#39;re getting that from your OS.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; We currently only support two JDKs - sun/oracle 1.6.0 and OpenJDK 1.7.0.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Can you check&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; alternatives --display java</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; (feel free to send the output if you can&#39;t interpret it); we ought to verify IBM&#39;s JDK is not used.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Thanks!</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Brian</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; On Sep 9, 2013, at 6&#58;15 PM, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; a few more observations which may or may not help.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Comparing tier2-02.ochep.ou.edu and osgitb2.nhn.ou.edu,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; I noticed that osgitb2 only has java-1.7.0-openjdk and</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; java-1.7.0-openjdk-devel installed, whereas tier2-02 has</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; java-1.7.0-ibm and java-1.7.0-ibm-devel installed as well.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Did this dependency change from RHEL5 to RHEL6, or because</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; it&#39;s 64-bit? java-1.7.0-ibm.i386 is available as well, but</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; apparently bestman2-server-2.3.0-14.osg.el5.noarch doesn&#39;t require it.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Why does bestman2-server-2.3.0-14.osg.el6.noarch need it?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Also, I noticed that most bestman RPMs are noarch; but I take it</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; they still only require the 64-bit java versions on 64-bit RHEL6?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; I tried looking for the 32-bit versions of java-1.7.0-ibm and</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; java-1.7.0-openjdk, but they don&#39;t seem to exist. I guess that&#39;s expected?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; I&#39;d really like to get this working tomorrow, so that we can come back</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; out of our downtime. Also, I believe osg-upcoming is scheduled to be</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; released as osg production on Wednesday, so I think it would be</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; very good to understand what&#39;s going on before doing that as well! =)</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_1129443170').click(function() {
            $('#detail_1129443170').slideDown("normal");
            $('#show_1129443170').hide();
            $('#hide_1129443170').show();
        });
        $('#hide_1129443170').click(function() {
            $('#detail_1129443170').slideUp();
            $('#hide_1129443170').hide();
            $('#show_1129443170').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378819812'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-10T13:30:12+00:00">Sep 10, 2013 01:30 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1378819812">&nbsp;</a></div><pre>Horst&#58;

If I understand Mat&#39;s RSV probe for Java, BeStMan gets its version of Java
to use from /etc/sysconfig/bestman2.  I see from your configuration files
from yesterday this setting in bestman2&#58;

JAVA_HOME=/etc/alternatives/java_sdk

So I think you have a couple of options here.

1. Change your alternatives system to point to java-1.7.0-openjdk
2. Change /etc/sysconfig/bestman2 to point to java-1.7.0-openjdk

— Tim

On 10 Sep 2013, at 08&#58;00, Horst Severini &#60;hs@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Brian,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ahh, now we&#39;re getting somewhere!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Right, all our java-1.7* RPMs come from RHEL6 repos.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; It looks like we&#39;re definitely using java-1.7-ibm, though, since</font>
<font color='#7F7E6F'>&#62; &#39;alternatives --display java&#39; returns</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; link currently points to /usr/lib/jvm/jre-1.7.0-ibm.x86_64/bin/java</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; and &#39;java -version&#39; returns</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; java version &#34;1.7.0&#34;</font>
<font color='#7F7E6F'>&#62; Java(TM) SE Runtime Environment (build pxa6470sr5-20130619_01(SR5))</font>
<font color='#7F7E6F'>&#62; IBM J9 VM (build 2.6, JRE 1.7.0 Linux amd64-64 Compressed References 20130617_15</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; and the soft links java and javac in /etc/alternatives/ are pointing</font>
<div id='show_991023837' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_991023837'><font color='#7F7E6F'>&#62; to the IBM version as well.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The question is, why did that version get installed in the first place?</font>
<font color='#7F7E6F'>&#62; I just double checked the java RPMs we had before and after the bestman2</font>
<font color='#7F7E6F'>&#62; installation; before we had none, and after the installation with</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; yum --enablerepo=epel --enablerepo=osg-upcoming install empty-ca-certs osg-se-bestman</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; we now have these&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; java-1.5.0-gcj-1.5.0.0-29.1.el6.x86_64</font>
<font color='#7F7E6F'>&#62; java-1.7.0-ibm-1.7.0.5.0-1jpp.2.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; java-1.7.0-ibm-devel-1.7.0.5.0-1jpp.2.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; java-1.7.0-openjdk-1.7.0.25-2.3.10.4.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; java-1.7.0-openjdk-devel-1.7.0.25-2.3.10.4.el6_4.x86_64</font>
<font color='#7F7E6F'>&#62; java_cup-0.10k-5.el6.x86_64</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I did notice that the IBM version came from a different repo</font>
<font color='#7F7E6F'>&#62; than the openjdk version&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ----</font>
<font color='#7F7E6F'>&#62; [root@tier2-02 backup]# yum list java-1.7&#92;*</font>
<font color='#7F7E6F'>&#62; Loaded plugins&#58; dellsysid, downloadonly, priorities, rhnplugin, security</font>
<font color='#7F7E6F'>&#62; This system is receiving updates from RHN Classic or RHN Satellite.</font>
<font color='#7F7E6F'>&#62; 5 packages excluded due to repository priority protections</font>
<font color='#7F7E6F'>&#62; Installed Packages</font>
<font color='#7F7E6F'>&#62; java-1.7.0-ibm.x86_64           1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6</font>
<font color='#7F7E6F'>&#62; java-1.7.0-ibm-devel.x86_64     1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6</font>
<font color='#7F7E6F'>&#62; java-1.7.0-openjdk.x86_64       1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6</font>
<font color='#7F7E6F'>&#62; java-1.7.0-openjdk-devel.x86_64 1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6</font>
<font color='#7F7E6F'>&#62; ----</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; So maybe there&#39;s some unexpected prioritizing going on when the repo</font>
<font color='#7F7E6F'>&#62; rhel-x86_64-server-supplementary-6 is enabled, which apparently has never</font>
<font color='#7F7E6F'>&#62; been tested so far? This didn&#39;t happen on OUHEP_ITB, even though</font>
<font color='#7F7E6F'>&#62; the IBM version there is available as well, but wasn&#39;t installed&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ----</font>
<font color='#7F7E6F'>&#62; [root@osgitb2 ~]# yum list java-1.7&#92;*</font>
<font color='#7F7E6F'>&#62; Loaded plugins&#58; downloadonly, priorities, rhnplugin</font>
<font color='#7F7E6F'>&#62; This system is receiving updates from RHN Classic or RHN Satellite.</font>
<font color='#7F7E6F'>&#62; Excluding Packages from Extra Packages for Enterprise Linux 5 - i386</font>
<font color='#7F7E6F'>&#62; Finished</font>
<font color='#7F7E6F'>&#62; Excluding Packages from OSG Software for Enterprise Linux 5 - i386</font>
<font color='#7F7E6F'>&#62; Finished</font>
<font color='#7F7E6F'>&#62; 223 packages excluded due to repository priority protections</font>
<font color='#7F7E6F'>&#62; Installed Packages</font>
<font color='#7F7E6F'>&#62; java-1.7.0-openjdk.i386           1&#58;1.7.0.25-2.3.10.5.el5_9   installed</font>
<font color='#7F7E6F'>&#62; java-1.7.0-openjdk-devel.i386     1&#58;1.7.0.25-2.3.10.5.el5_9   installed</font>
<font color='#7F7E6F'>&#62; Available Packages</font>
<font color='#7F7E6F'>&#62; java-1.7.0-ibm.i386               1&#58;1.7.0.5.0-1jpp.2.el5_9    rhel-i386-client-supplementary-5</font>
<font color='#7F7E6F'>&#62; java-1.7.0-ibm-devel.i386         1&#58;1.7.0.5.0-1jpp.2.el5_9    rhel-i386-client-supplementary-5</font>
<font color='#7F7E6F'>&#62; ----</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; It&#39;s possible that the channel rhel-i386-client-supplementary-5 wasn&#39;t enabled</font>
<font color='#7F7E6F'>&#62; during the initial bestman install, since I know it was added to our OU</font>
<font color='#7F7E6F'>&#62; RHEL5 machines some time later -- but I&#39;m 95% certain that was BEFORE</font>
<font color='#7F7E6F'>&#62; I did this osg-upcoming bestman2 testing, which as on June 19, so not</font>
<font color='#7F7E6F'>&#62; too long ago, and I&#39;m pretty sure that we added that channel earlier</font>
<font color='#7F7E6F'>&#62; than that.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Either way, we need to figure out a way to make sure that openjdk</font>
<font color='#7F7E6F'>&#62; is installed and ibm isn&#39;t, and I&#39;ll leave that up to you,</font>
<font color='#7F7E6F'>&#62; since I know very little about yum priorities. =)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; As for right now, I guess I should use &#39;alternatives --config java[c]&#39;</font>
<font color='#7F7E6F'>&#62; and point them to openjdk, and restart bestman, and hope that that</font>
<font color='#7F7E6F'>&#62; will fix it?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Brian Bockelman &#60;bbockelm@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; OSG does not distribute java-1.7.0-*; you&#39;re getting that from your OS.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; We currently only support two JDKs - sun/oracle 1.6.0 and OpenJDK 1.7.0.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Can you check&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; alternatives --display java</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; (feel free to send the output if you can&#39;t interpret it); we ought to verify IBM&#39;s JDK is not used.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks!</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Brian</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; On Sep 9, 2013, at 6&#58;15 PM, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; a few more observations which may or may not help.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Comparing tier2-02.ochep.ou.edu and osgitb2.nhn.ou.edu,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; I noticed that osgitb2 only has java-1.7.0-openjdk and</font>
<font color='#7F7E6F'>&#62;&#62;&#62; java-1.7.0-openjdk-devel installed, whereas tier2-02 has</font>
<font color='#7F7E6F'>&#62;&#62;&#62; java-1.7.0-ibm and java-1.7.0-ibm-devel installed as well.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Did this dependency change from RHEL5 to RHEL6, or because</font>
<font color='#7F7E6F'>&#62;&#62;&#62; it&#39;s 64-bit? java-1.7.0-ibm.i386 is available as well, but</font>
<font color='#7F7E6F'>&#62;&#62;&#62; apparently bestman2-server-2.3.0-14.osg.el5.noarch doesn&#39;t require it.</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Why does bestman2-server-2.3.0-14.osg.el6.noarch need it?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Also, I noticed that most bestman RPMs are noarch; but I take it</font>
<font color='#7F7E6F'>&#62;&#62;&#62; they still only require the 64-bit java versions on 64-bit RHEL6?</font>
<font color='#7F7E6F'>&#62;&#62;&#62; I tried looking for the 32-bit versions of java-1.7.0-ibm and</font>
<font color='#7F7E6F'>&#62;&#62;&#62; java-1.7.0-openjdk, but they don&#39;t seem to exist. I guess that&#39;s expected?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; I&#39;d really like to get this working tomorrow, so that we can come back</font>
<font color='#7F7E6F'>&#62;&#62;&#62; out of our downtime. Also, I believe osg-upcoming is scheduled to be</font>
<font color='#7F7E6F'>&#62;&#62;&#62; released as osg production on Wednesday, so I think it would be</font>
<font color='#7F7E6F'>&#62;&#62;&#62; very good to understand what&#39;s going on before doing that as well! =)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_991023837').click(function() {
            $('#detail_991023837').slideDown("normal");
            $('#show_991023837').hide();
            $('#hide_991023837').show();
        });
        $('#hide_991023837').click(function() {
            $('#detail_991023837').slideUp();
            $('#hide_991023837').hide();
            $('#show_991023837').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378818189'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-10T13:03:09+00:00">Sep 10, 2013 01:03 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378818189">&nbsp;</a></div><pre>Hi Brian,

ahh, now we&#39;re getting somewhere!

Right, all our java-1.7* RPMs come from RHEL6 repos.

It looks like we&#39;re definitely using java-1.7-ibm, though, since
&#39;alternatives --display java&#39; returns

link currently points to /usr/lib/jvm/jre-1.7.0-ibm.x86_64/bin/java

and &#39;java -version&#39; returns

java version &#34;1.7.0&#34;
Java(TM) SE Runtime Environment (build pxa6470sr5-20130619_01(SR5))
IBM J9 VM (build 2.6, JRE 1.7.0 Linux amd64-64 Compressed References 20130617_15

and the soft links java and javac in /etc/alternatives/ are pointing
to the IBM version as well.

The question is, why did that version get installed in the first place?
I just double checked the java RPMs we had before and after the bestman2
installation; before we had none, and after the installation with

yum --enablerepo=epel --enablerepo=osg-upcoming install empty-ca-certs osg-se-bestman

we now have these&#58;

java-1.5.0-gcj-1.5.0.0-29.1.el6.x86_64
java-1.7.0-ibm-1.7.0.5.0-1jpp.2.el6_4.x86_64
java-1.7.0-ibm-devel-1.7.0.5.0-1jpp.2.el6_4.x86_64
java-1.7.0-openjdk-1.7.0.25-2.3.10.4.el6_4.x86_64
java-1.7.0-openjdk-devel-1.7.0.25-2.3.10.4.el6_4.x86_64
java_cup-0.10k-5.el6.x86_64

<div id='show_518354630' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_518354630'>I did notice that the IBM version came from a different repo
than the openjdk version&#58;

----
[root@tier2-02 backup]# yum list java-1.7&#92;*
Loaded plugins&#58; dellsysid, downloadonly, priorities, rhnplugin, security
This system is receiving updates from RHN Classic or RHN Satellite.
5 packages excluded due to repository priority protections
Installed Packages
java-1.7.0-ibm.x86_64           1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6
java-1.7.0-ibm-devel.x86_64     1&#58;1.7.0.5.0-1jpp.2.el6_4   @rhel-x86_64-server-supplementary-6
java-1.7.0-openjdk.x86_64       1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6
java-1.7.0-openjdk-devel.x86_64 1&#58;1.7.0.25-2.3.10.4.el6_4  @rhel-x86_64-server-6
----

So maybe there&#39;s some unexpected prioritizing going on when the repo
rhel-x86_64-server-supplementary-6 is enabled, which apparently has never
been tested so far? This didn&#39;t happen on OUHEP_ITB, even though
the IBM version there is available as well, but wasn&#39;t installed&#58;

----
[root@osgitb2 ~]# yum list java-1.7&#92;*
Loaded plugins&#58; downloadonly, priorities, rhnplugin
This system is receiving updates from RHN Classic or RHN Satellite.
Excluding Packages from Extra Packages for Enterprise Linux 5 - i386
Finished
Excluding Packages from OSG Software for Enterprise Linux 5 - i386
Finished
223 packages excluded due to repository priority protections
Installed Packages
java-1.7.0-openjdk.i386           1&#58;1.7.0.25-2.3.10.5.el5_9   installed
java-1.7.0-openjdk-devel.i386     1&#58;1.7.0.25-2.3.10.5.el5_9   installed
Available Packages
java-1.7.0-ibm.i386               1&#58;1.7.0.5.0-1jpp.2.el5_9    rhel-i386-client-supplementary-5
java-1.7.0-ibm-devel.i386         1&#58;1.7.0.5.0-1jpp.2.el5_9    rhel-i386-client-supplementary-5
----

It&#39;s possible that the channel rhel-i386-client-supplementary-5 wasn&#39;t enabled
during the initial bestman install, since I know it was added to our OU
RHEL5 machines some time later -- but I&#39;m 95% certain that was BEFORE
I did this osg-upcoming bestman2 testing, which as on June 19, so not
too long ago, and I&#39;m pretty sure that we added that channel earlier
than that.

Either way, we need to figure out a way to make sure that openjdk
is installed and ibm isn&#39;t, and I&#39;ll leave that up to you,
since I know very little about yum priorities. =)

As for right now, I guess I should use &#39;alternatives --config java[c]&#39;
and point them to openjdk, and restart bestman, and hope that that
will fix it?

Thanks a lot,

Horst

Brian Bockelman &#60;bbockelm@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; OSG does not distribute java-1.7.0-*; you&#39;re getting that from your OS.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; We currently only support two JDKs - sun/oracle 1.6.0 and OpenJDK 1.7.0.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Can you check&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; alternatives --display java</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; (feel free to send the output if you can&#39;t interpret it); we ought to verify IBM&#39;s JDK is not used.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Brian</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Sep 9, 2013, at 6&#58;15 PM, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#62; Hi again,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; a few more observations which may or may not help.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Comparing tier2-02.ochep.ou.edu and osgitb2.nhn.ou.edu,</font>
<font color='#7F7E6F'>&#62; &#62; I noticed that osgitb2 only has java-1.7.0-openjdk and</font>
<font color='#7F7E6F'>&#62; &#62; java-1.7.0-openjdk-devel installed, whereas tier2-02 has</font>
<font color='#7F7E6F'>&#62; &#62; java-1.7.0-ibm and java-1.7.0-ibm-devel installed as well.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Did this dependency change from RHEL5 to RHEL6, or because</font>
<font color='#7F7E6F'>&#62; &#62; it&#39;s 64-bit? java-1.7.0-ibm.i386 is available as well, but</font>
<font color='#7F7E6F'>&#62; &#62; apparently bestman2-server-2.3.0-14.osg.el5.noarch doesn&#39;t require it.</font>
<font color='#7F7E6F'>&#62; &#62; Why does bestman2-server-2.3.0-14.osg.el6.noarch need it?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Also, I noticed that most bestman RPMs are noarch; but I take it</font>
<font color='#7F7E6F'>&#62; &#62; they still only require the 64-bit java versions on 64-bit RHEL6?</font>
<font color='#7F7E6F'>&#62; &#62; I tried looking for the 32-bit versions of java-1.7.0-ibm and</font>
<font color='#7F7E6F'>&#62; &#62; java-1.7.0-openjdk, but they don&#39;t seem to exist. I guess that&#39;s expected?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; I&#39;d really like to get this working tomorrow, so that we can come back</font>
<font color='#7F7E6F'>&#62; &#62; out of our downtime. Also, I believe osg-upcoming is scheduled to be</font>
<font color='#7F7E6F'>&#62; &#62; released as osg production on Wednesday, so I think it would be</font>
<font color='#7F7E6F'>&#62; &#62; very good to understand what&#39;s going on before doing that as well! =)</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_518354630').click(function() {
            $('#detail_518354630').slideDown("normal");
            $('#show_518354630').hide();
            $('#hide_518354630').show();
        });
        $('#hide_518354630').click(function() {
            $('#detail_518354630').slideUp();
            $('#hide_518354630').hide();
            $('#show_518354630').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378777870'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-10T01:51:10+00:00">Sep 10, 2013 01:51 AM UTC</time> by <b>bbockelm</b><a class="anchor" name="1378777870">&nbsp;</a></div><pre>Hi Bockjoo,

I suspect Horst followed the instructions for switching a node to Java7 here&#58;

<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallSoftwareWithOpenJDK7' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallSoftwareWithOpenJDK7</a>

Alternatives is the RHEL-way of selecting a Java stack (the more-commonly-known /usr/java/default and /usr/java/latest was an Sun/Oracle-only thing; you&#39;ll probably see less of that going forward).

Brian

On Sep 9, 2013, at 8&#58;45 PM, Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; Do you have any specific reason why you use /etc/alternatives/java_sdk/bin/java</font>
<font color='#7F7E6F'>&#62; for the bestman?</font>
<font color='#7F7E6F'>&#62; Closest discussion on the surface of the globe is</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//comments.gmane.org/gmane.comp.clustering.globus.user/4168' target='_blank' rel='nofollow'>http&#58;//comments.gmane.org/gmane.comp.clustering.globus.user/4168</a></font>
<font color='#7F7E6F'>&#62; It says something about JAVA issue.</font>
<font color='#7F7E6F'>&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; On 9/9/13 8&#58;49 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; yes, we&#39;re seeing these errors every time a DOEGrids or DigiCert user</font>
<font color='#7F7E6F'>&#62;&#62; is trying to connect&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62; 28354421 [qtp830767401-57] WARN gov.lbl.srm.server.JettyGSIConnector7 - java.io.EOFException</font>
<font color='#7F7E6F'>&#62;&#62; 28610788 [qtp830767401-64] WARN gov.lbl.srm.server.JettyGSIConnector7 - org.globus.common.ChainedIOException&#58; Authentication failed [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0</font>
<font color='#7F7E6F'>&#62;&#62;         major string&#58; General failure, unspecified at GSSAPI level</font>
<font color='#7F7E6F'>&#62;&#62;         minor string&#58; None [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0</font>
<font color='#7F7E6F'>&#62;&#62;         major string&#58; General failure, unspecified at GSSAPI level</font>
<font color='#7F7E6F'>&#62;&#62;         minor string&#58; None [Caused by&#58; General SSLEngine problem]]]</font>
<font color='#7F7E6F'>&#62;&#62; 28611793 [qtp830767401-58] WARN gov.lbl.srm.server.JettyGSIConnector7 - org.globus.common.ChainedIOException&#58; Authentication failed [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0</font>
<font color='#7F7E6F'>&#62;&#62;         major string&#58; General failure, unspecified at GSSAPI level</font>
<font color='#7F7E6F'>&#62;&#62;         minor string&#58; None [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0</font>
<div id='show_1486638096' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1486638096'><font color='#7F7E6F'>&#62;&#62;         major string&#58; General failure, unspecified at GSSAPI level</font>
<font color='#7F7E6F'>&#62;&#62;         minor string&#58; None [Caused by&#58; General SSLEngine problem]]]</font>
<font color='#7F7E6F'>&#62;&#62; 28654469 [qtp830767401-63] WARN gov.lbl.srm.server.JettyGSIConnector7 - java.io.EOFException</font>
<font color='#7F7E6F'>&#62;&#62; 28676525 [qtp830767401-59] WARN gov.lbl.srm.server.JettyGSIConnector7 - org.globus.common.ChainedIOException&#58; Authentication failed [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0</font>
<font color='#7F7E6F'>&#62;&#62;         major string&#58; General failure, unspecified at GSSAPI level</font>
<font color='#7F7E6F'>&#62;&#62;         minor string&#58; None [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0</font>
<font color='#7F7E6F'>&#62;&#62;         major string&#58; General failure, unspecified at GSSAPI level</font>
<font color='#7F7E6F'>&#62;&#62;         minor string&#58; None [Caused by&#58; General SSLEngine problem]]]</font>
<font color='#7F7E6F'>&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; The million dollar question is, what does that mean?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Indeed, I can do globus-url-copy but srm-ping still fails.</font>
<font color='#7F7E6F'>&#62;&#62;&#62; I have no idea.</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Do you see some error in /var/log/bestman2/bestman2.log</font>
<font color='#7F7E6F'>&#62;&#62;&#62; when DigiCert or Doe cert is used to execute srm-ping?</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62;&#62;&#62; On 9/9/13 7&#58;59 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; okay, I commented out the FNAL VOMS server -- but I also remapped you</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; manually to the mis account, since we don&#39;t currently have a uscms01 account.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; So please try a globus-url-copy like</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; globus-url-copy file&#58;/tmp/test123 <a href='gsiftp&#58;//tier2-02.ochep.ou.edu/tmp/test123' target='_blank' rel='nofollow'>gsiftp&#58;//tier2-02.ochep.ou.edu/tmp/test123</a></font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; and assuming that works okay, you can try an srm-ping command --</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; but I already know that that won&#39;t work, since I&#39;ve tried this myself</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; many times already. &#58;)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Thanks for your help, though!</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; My DN is completely irrelevant for atlas, but I would like to test if my</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; digicert glitch is the issue or something else.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; If you have two of my DigiCert DNs in your grid-mapfile, you need to get</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; rid of</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; group vomss&#58;//voms.fnal.gov&#58;8443/voms/cms uscms01</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; from your  /etc/edg-mkgridmap.conf (and run edg-mkgridmap manually like</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; so /usr/sbin/edg-mkgridmap ).</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; That voms server at FNAL is not correct for cms (only CERN voms server</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; should be used for cms),</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; but since you are an atlas site, you might not care.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; However, I am trying to see if my digicert really does not work even</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; after your correcting /etc/edg-mkgridmap.conf.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Then, the problem may be in the CA pem files or your suspicion about</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; java seems to be reasonable.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; On 9/9/13 7&#58;19 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; Do you have my DN</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; (UFlorida T2 Service) 118</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; in the grid-mapfile?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Yup; twice, actually, because of that extra space you were talking about</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; the other day&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; [hs@tier2-02 ~]$ grep Bockjoo /etc/grid-security/grid-mapfile</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim  (UFlorida T2 Service) 118&#34; uscms01</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim (UFlorida T2 Service) 118&#34; uscms01</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#34;/DC=org/DC=doegrids/OU=People/CN=Bockjoo Kim (UFlorida T2 Service) 606361&#34; uscms01</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; &#34;/DC=org/DC=doegrids/OU=People/CN=Bockjoo Kim 740786&#34; uscms01</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; On 9/9/13 6&#58;53 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; yes, the grid-mapfile is generated by edg-mkgridmap, and it contains</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; all users just fine, since that same grid-mapfile is also used by</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; the gridftp server, so these transfers would fail if the users</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; weren&#39;t there, but I can run globus-url-copy commands as myself --</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; and also the rsv service cert -- just fine.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Yes, it is very interesting -- but right now also very frustrating,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; since this is our production Tier2 and should be back up in 6 minutes! &#58;)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; I can confirm CERN cert can srm-ping your SE, but not with my DIgiCert cert.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Does your grid-map file get generated by edg-mkgridmap?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; If so, does the grid-map file contain any DigiCert DNs? or does it only</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; have CERN or FNAL DNs?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; It&#39;s apparently a very interesting thing that&#39;s happening.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; On 9/9/13 4&#58;26 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Hi Alan,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; right -- our /etc/grid-security/gsi-authz.conf is empty, and GridMapFileName</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; points to /etc/grid-security/grid-mapfile -- which is used for CERN and FNAL</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; certs just fine, so somehow there must be something in the CA authentication</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; that fails for DOEGrids and DigiCert CAs -- but where and what?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Thanks for all your suggestions,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#34;Sill, Alan&#34; &#60;alan.sill@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; On Sep 9, 2013, at 2&#58;14 PM, Horst Severini &#60;hs@....&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;      wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; [root@tier2-02 ~]# ps auxw | egrep &#39;bestman|tomcat&#39;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; root      7462  0.0  0.0 103076   864 pts/0    S+   14&#58;13   0&#58;00 egrep bestman|tomcat</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; bestman  11980 10.8  3.1 4034212 513848 ?      Sl   11&#58;35  17&#58;09 /etc/alternatives/java_sdk/bin/java -server -Xmx1024m -XX&#58;MaxDirectMemorySize=1024m -DX509_CERT_DIR=/etc/grid-security/certificates -DCADIR=/etc/grid-security/certificates -DJettyConfiguration=/etc/bestman2/conf/WEB-INF/jetty.xml -DJettyDescriptor=/etc/bestman2/conf/WEB-INF/web.xml -DJettyResource=/etc/bestman2/conf/ -Dorg.eclipse.jetty.util.log.IGNORE=true gov.lbl.srm.server.Server /etc/bestman2/conf/bestman2.rc</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Your gridftp server will use the authorization options in /etc/grid-security/gsi-authz.conf to handle the GSI callout, but bestman needs a bit more configuration.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; What are the contents of /etc/bestman2/conf/bestman2.rc with respect to the local certificate and authorization options?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; For example, on our local rpm-based test server, in that file, we have</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ## GUMS-XACML is the only supported interface.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ###########################################################</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### GUMSProtocol=XACML</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### GUMSserviceURL=</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### GUMSCurrHostDN=</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### Grid-mapfile will be used</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; GridMapFileName=/etc/bestman2/conf/grid-mapfile.empty</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; This matches our local use of GUMS via gsi-athz.conf&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; [root@tinge ~]# cat /etc/grid-security/gsi-authz.conf</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; globus_mapping liblcas_lcmaps_gt4_mapping.so lcmaps_callout</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; If you have set gsi-authz.conf to use a lobal grid-mapfile, you might have to do the same to the bestman2.rc configuration</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Just a suggestion.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_1486638096').click(function() {
            $('#detail_1486638096').slideDown("normal");
            $('#show_1486638096').hide();
            $('#hide_1486638096').show();
        });
        $('#hide_1486638096').click(function() {
            $('#detail_1486638096').slideUp();
            $('#hide_1486638096').hide();
            $('#show_1486638096').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378777689'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-10T01:48:09+00:00">Sep 10, 2013 01:48 AM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1378777689">&nbsp;</a></div><pre>Hi Horst,
Do you have any specific reason why you use
/etc/alternatives/java_sdk/bin/java
for the bestman?
Closest discussion on the surface of the globe is
<a href='http&#58;//comments.gmane.org/gmane.comp.clustering.globus.user/4168' target='_blank' rel='nofollow'>http&#58;//comments.gmane.org/gmane.comp.clustering.globus.user/4168</a>
It says something about JAVA issue.
Bockjoo
On 9/9/13 8&#58;49 PM, Horst Severini wrote&#58;
<font color='#7F7E6F'>&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; yes, we&#39;re seeing these errors every time a DOEGrids or DigiCert user</font>
<font color='#7F7E6F'>&#62; is trying to connect&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ----</font>
<font color='#7F7E6F'>&#62; 28354421 [qtp830767401-57] WARN gov.lbl.srm.server.JettyGSIConnector7 - java.io.EOFException</font>
<font color='#7F7E6F'>&#62; 28610788 [qtp830767401-64] WARN gov.lbl.srm.server.JettyGSIConnector7 - org.globus.common.ChainedIOException&#58; Authentication failed [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0</font>
<font color='#7F7E6F'>&#62;          major string&#58; General failure, unspecified at GSSAPI level</font>
<font color='#7F7E6F'>&#62;          minor string&#58; None [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0</font>
<font color='#7F7E6F'>&#62;          major string&#58; General failure, unspecified at GSSAPI level</font>
<font color='#7F7E6F'>&#62;          minor string&#58; None [Caused by&#58; General SSLEngine problem]]]</font>
<font color='#7F7E6F'>&#62; 28611793 [qtp830767401-58] WARN gov.lbl.srm.server.JettyGSIConnector7 - org.globus.common.ChainedIOException&#58; Authentication failed [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0</font>
<font color='#7F7E6F'>&#62;          major string&#58; General failure, unspecified at GSSAPI level</font>
<font color='#7F7E6F'>&#62;          minor string&#58; None [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0</font>
<font color='#7F7E6F'>&#62;          major string&#58; General failure, unspecified at GSSAPI level</font>
<font color='#7F7E6F'>&#62;          minor string&#58; None [Caused by&#58; General SSLEngine problem]]]</font>
<font color='#7F7E6F'>&#62; 28654469 [qtp830767401-63] WARN gov.lbl.srm.server.JettyGSIConnector7 - java.io.EOFException</font>
<font color='#7F7E6F'>&#62; 28676525 [qtp830767401-59] WARN gov.lbl.srm.server.JettyGSIConnector7 - org.globus.common.ChainedIOException&#58; Authentication failed [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0</font>
<font color='#7F7E6F'>&#62;          major string&#58; General failure, unspecified at GSSAPI level</font>
<font color='#7F7E6F'>&#62;          minor string&#58; None [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0</font>
<font color='#7F7E6F'>&#62;          major string&#58; General failure, unspecified at GSSAPI level</font>
<font color='#7F7E6F'>&#62;          minor string&#58; None [Caused by&#58; General SSLEngine problem]]]</font>
<font color='#7F7E6F'>&#62; ----</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The million dollar question is, what does that mean?</font>
<div id='show_1313587842' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1313587842'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62; Indeed, I can do globus-url-copy but srm-ping still fails.</font>
<font color='#7F7E6F'>&#62;&#62; I have no idea.</font>
<font color='#7F7E6F'>&#62;&#62; Do you see some error in /var/log/bestman2/bestman2.log</font>
<font color='#7F7E6F'>&#62;&#62; when DigiCert or Doe cert is used to execute srm-ping?</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62;&#62; On 9/9/13 7&#58;59 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; okay, I commented out the FNAL VOMS server -- but I also remapped you</font>
<font color='#7F7E6F'>&#62;&#62;&#62; manually to the mis account, since we don&#39;t currently have a uscms01 account.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; So please try a globus-url-copy like</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; globus-url-copy file&#58;/tmp/test123 <a href='gsiftp&#58;//tier2-02.ochep.ou.edu/tmp/test123' target='_blank' rel='nofollow'>gsiftp&#58;//tier2-02.ochep.ou.edu/tmp/test123</a></font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; and assuming that works okay, you can try an srm-ping command --</font>
<font color='#7F7E6F'>&#62;&#62;&#62; but I already know that that won&#39;t work, since I&#39;ve tried this myself</font>
<font color='#7F7E6F'>&#62;&#62;&#62; many times already. &#58;)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks for your help, though!</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; My DN is completely irrelevant for atlas, but I would like to test if my</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; digicert glitch is the issue or something else.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; If you have two of my DigiCert DNs in your grid-mapfile, you need to get</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; rid of</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; group vomss&#58;//voms.fnal.gov&#58;8443/voms/cms uscms01</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; from your  /etc/edg-mkgridmap.conf (and run edg-mkgridmap manually like</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; so /usr/sbin/edg-mkgridmap ).</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; That voms server at FNAL is not correct for cms (only CERN voms server</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; should be used for cms),</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; but since you are an atlas site, you might not care.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; However, I am trying to see if my digicert really does not work even</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; after your correcting /etc/edg-mkgridmap.conf.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Then, the problem may be in the CA pem files or your suspicion about</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; java seems to be reasonable.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; On 9/9/13 7&#58;19 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Do you have my DN</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; (UFlorida T2 Service) 118</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; in the grid-mapfile?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Yup; twice, actually, because of that extra space you were talking about</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; the other day&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; [hs@tier2-02 ~]$ grep Bockjoo /etc/grid-security/grid-mapfile</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim  (UFlorida T2 Service) 118&#34; uscms01</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim (UFlorida T2 Service) 118&#34; uscms01</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#34;/DC=org/DC=doegrids/OU=People/CN=Bockjoo Kim (UFlorida T2 Service) 606361&#34; uscms01</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#34;/DC=org/DC=doegrids/OU=People/CN=Bockjoo Kim 740786&#34; uscms01</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; On 9/9/13 6&#58;53 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; yes, the grid-mapfile is generated by edg-mkgridmap, and it contains</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; all users just fine, since that same grid-mapfile is also used by</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; the gridftp server, so these transfers would fail if the users</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; weren&#39;t there, but I can run globus-url-copy commands as myself --</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; and also the rsv service cert -- just fine.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; Yes, it is very interesting -- but right now also very frustrating,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; since this is our production Tier2 and should be back up in 6 minutes! &#58;)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; I can confirm CERN cert can srm-ping your SE, but not with my DIgiCert cert.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Does your grid-map file get generated by edg-mkgridmap?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; If so, does the grid-map file contain any DigiCert DNs? or does it only</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; have CERN or FNAL DNs?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; It&#39;s apparently a very interesting thing that&#39;s happening.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; On 9/9/13 4&#58;26 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Hi Alan,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; right -- our /etc/grid-security/gsi-authz.conf is empty, and GridMapFileName</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; points to /etc/grid-security/grid-mapfile -- which is used for CERN and FNAL</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; certs just fine, so somehow there must be something in the CA authentication</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; that fails for DOEGrids and DigiCert CAs -- but where and what?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Thanks for all your suggestions,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#34;Sill, Alan&#34; &#60;alan.sill@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; On Sep 9, 2013, at 2&#58;14 PM, Horst Severini &#60;hs@....&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;       wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; [root@tier2-02 ~]# ps auxw | egrep &#39;bestman|tomcat&#39;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; root      7462  0.0  0.0 103076   864 pts/0    S+   14&#58;13   0&#58;00 egrep bestman|tomcat</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; bestman  11980 10.8  3.1 4034212 513848 ?      Sl   11&#58;35  17&#58;09 /etc/alternatives/java_sdk/bin/java -server -Xmx1024m -XX&#58;MaxDirectMemorySize=1024m -DX509_CERT_DIR=/etc/grid-security/certificates -DCADIR=/etc/grid-security/certificates -DJettyConfiguration=/etc/bestman2/conf/WEB-INF/jetty.xml -DJettyDescriptor=/etc/bestman2/conf/WEB-INF/web.xml -DJettyResource=/etc/bestman2/conf/ -Dorg.eclipse.jetty.util.log.IGNORE=true gov.lbl.srm.server.Server /etc/bestman2/conf/bestman2.rc</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Your gridftp server will use the authorization options in /etc/grid-security/gsi-authz.conf to handle the GSI callout, but bestman needs a bit more configuration.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; What are the contents of /etc/bestman2/conf/bestman2.rc with respect to the local certificate and authorization options?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; For example, on our local rpm-based test server, in that file, we have</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ## GUMS-XACML is the only supported interface.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ###########################################################</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### GUMSProtocol=XACML</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### GUMSserviceURL=</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### GUMSCurrHostDN=</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### Grid-mapfile will be used</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; GridMapFileName=/etc/bestman2/conf/grid-mapfile.empty</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; This matches our local use of GUMS via gsi-athz.conf&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; [root@tinge ~]# cat /etc/grid-security/gsi-authz.conf</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; globus_mapping liblcas_lcmaps_gt4_mapping.so lcmaps_callout</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; If you have set gsi-authz.conf to use a lobal grid-mapfile, you might have to do the same to the bestman2.rc configuration</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Just a suggestion.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_1313587842').click(function() {
            $('#detail_1313587842').slideDown("normal");
            $('#show_1313587842').hide();
            $('#hide_1313587842').show();
        });
        $('#hide_1313587842').click(function() {
            $('#detail_1313587842').slideUp();
            $('#hide_1313587842').hide();
            $('#show_1313587842').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378777149'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-10T01:39:09+00:00">Sep 10, 2013 01:39 AM UTC</time> by <b>bbockelm</b><a class="anchor" name="1378777149">&nbsp;</a></div><pre>Hi Horst,

OSG does not distribute java-1.7.0-*; you&#39;re getting that from your OS.

We currently only support two JDKs - sun/oracle 1.6.0 and OpenJDK 1.7.0.

Can you check&#58;

alternatives --display java

(feel free to send the output if you can&#39;t interpret it); we ought to verify IBM&#39;s JDK is not used.

Thanks!

Brian

On Sep 9, 2013, at 6&#58;15 PM, Horst Severini &#60;hs@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi again,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; a few more observations which may or may not help.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Comparing tier2-02.ochep.ou.edu and osgitb2.nhn.ou.edu,</font>
<font color='#7F7E6F'>&#62; I noticed that osgitb2 only has java-1.7.0-openjdk and</font>
<font color='#7F7E6F'>&#62; java-1.7.0-openjdk-devel installed, whereas tier2-02 has</font>
<font color='#7F7E6F'>&#62; java-1.7.0-ibm and java-1.7.0-ibm-devel installed as well.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Did this dependency change from RHEL5 to RHEL6, or because</font>
<font color='#7F7E6F'>&#62; it&#39;s 64-bit? java-1.7.0-ibm.i386 is available as well, but</font>
<font color='#7F7E6F'>&#62; apparently bestman2-server-2.3.0-14.osg.el5.noarch doesn&#39;t require it.</font>
<font color='#7F7E6F'>&#62; Why does bestman2-server-2.3.0-14.osg.el6.noarch need it?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Also, I noticed that most bestman RPMs are noarch; but I take it</font>
<font color='#7F7E6F'>&#62; they still only require the 64-bit java versions on 64-bit RHEL6?</font>
<font color='#7F7E6F'>&#62; I tried looking for the 32-bit versions of java-1.7.0-ibm and</font>
<div id='show_1583203736' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1583203736'><font color='#7F7E6F'>&#62; java-1.7.0-openjdk, but they don&#39;t seem to exist. I guess that&#39;s expected?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;d really like to get this working tomorrow, so that we can come back</font>
<font color='#7F7E6F'>&#62; out of our downtime. Also, I believe osg-upcoming is scheduled to be</font>
<font color='#7F7E6F'>&#62; released as osg production on Wednesday, so I think it would be</font>
<font color='#7F7E6F'>&#62; very good to understand what&#39;s going on before doing that as well! =)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
</div><script type='text/javascript'>
        $('#show_1583203736').click(function() {
            $('#detail_1583203736').slideDown("normal");
            $('#show_1583203736').hide();
            $('#hide_1583203736').show();
        });
        $('#hide_1583203736').click(function() {
            $('#detail_1583203736').slideUp();
            $('#hide_1583203736').hide();
            $('#show_1583203736').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378774270'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-10T00:51:10+00:00">Sep 10, 2013 12:51 AM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378774270">&nbsp;</a></div><pre>Hi Bockjoo,

yes, we&#39;re seeing these errors every time a DOEGrids or DigiCert user
is trying to connect&#58;

----
28354421 [qtp830767401-57] WARN gov.lbl.srm.server.JettyGSIConnector7 - java.io.EOFException
28610788 [qtp830767401-64] WARN gov.lbl.srm.server.JettyGSIConnector7 - org.globus.common.ChainedIOException&#58; Authentication failed [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0
major string&#58; General failure, unspecified at GSSAPI level
minor string&#58; None [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0
major string&#58; General failure, unspecified at GSSAPI level
minor string&#58; None [Caused by&#58; General SSLEngine problem]]]
28611793 [qtp830767401-58] WARN gov.lbl.srm.server.JettyGSIConnector7 - org.globus.common.ChainedIOException&#58; Authentication failed [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0
major string&#58; General failure, unspecified at GSSAPI level
minor string&#58; None [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0
major string&#58; General failure, unspecified at GSSAPI level
minor string&#58; None [Caused by&#58; General SSLEngine problem]]]
28654469 [qtp830767401-63] WARN gov.lbl.srm.server.JettyGSIConnector7 - java.io.EOFException
28676525 [qtp830767401-59] WARN gov.lbl.srm.server.JettyGSIConnector7 - org.globus.common.ChainedIOException&#58; Authentication failed [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0
major string&#58; General failure, unspecified at GSSAPI level
minor string&#58; None [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0
major string&#58; General failure, unspecified at GSSAPI level
minor string&#58; None [Caused by&#58; General SSLEngine problem]]]
----

The million dollar question is, what does that mean?

Thanks,

Horst

Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; Indeed, I can do globus-url-copy but srm-ping still fails.</font>
<div id='show_9676143' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_9676143'><font color='#7F7E6F'>&#62; I have no idea.</font>
<font color='#7F7E6F'>&#62; Do you see some error in /var/log/bestman2/bestman2.log</font>
<font color='#7F7E6F'>&#62; when DigiCert or Doe cert is used to execute srm-ping?</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; On 9/9/13 7&#58;59 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; okay, I commented out the FNAL VOMS server -- but I also remapped you</font>
<font color='#7F7E6F'>&#62; &#62; manually to the mis account, since we don&#39;t currently have a uscms01 account.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; So please try a globus-url-copy like</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; globus-url-copy file&#58;/tmp/test123 <a href='gsiftp&#58;//tier2-02.ochep.ou.edu/tmp/test123' target='_blank' rel='nofollow'>gsiftp&#58;//tier2-02.ochep.ou.edu/tmp/test123</a></font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; and assuming that works okay, you can try an srm-ping command --</font>
<font color='#7F7E6F'>&#62; &#62; but I already know that that won&#39;t work, since I&#39;ve tried this myself</font>
<font color='#7F7E6F'>&#62; &#62; many times already. &#58;)</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks for your help, though!</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; My DN is completely irrelevant for atlas, but I would like to test if my</font>
<font color='#7F7E6F'>&#62; &#62;&#62; digicert glitch is the issue or something else.</font>
<font color='#7F7E6F'>&#62; &#62;&#62; If you have two of my DigiCert DNs in your grid-mapfile, you need to get</font>
<font color='#7F7E6F'>&#62; &#62;&#62; rid of</font>
<font color='#7F7E6F'>&#62; &#62;&#62; group vomss&#58;//voms.fnal.gov&#58;8443/voms/cms uscms01</font>
<font color='#7F7E6F'>&#62; &#62;&#62; from your  /etc/edg-mkgridmap.conf (and run edg-mkgridmap manually like</font>
<font color='#7F7E6F'>&#62; &#62;&#62; so /usr/sbin/edg-mkgridmap ).</font>
<font color='#7F7E6F'>&#62; &#62;&#62; That voms server at FNAL is not correct for cms (only CERN voms server</font>
<font color='#7F7E6F'>&#62; &#62;&#62; should be used for cms),</font>
<font color='#7F7E6F'>&#62; &#62;&#62; but since you are an atlas site, you might not care.</font>
<font color='#7F7E6F'>&#62; &#62;&#62; However, I am trying to see if my digicert really does not work even</font>
<font color='#7F7E6F'>&#62; &#62;&#62; after your correcting /etc/edg-mkgridmap.conf.</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Then, the problem may be in the CA pem files or your suspicion about</font>
<font color='#7F7E6F'>&#62; &#62;&#62; java seems to be reasonable.</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; On 9/9/13 7&#58;19 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Do you have my DN</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; (UFlorida T2 Service) 118</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; in the grid-mapfile?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Yup; twice, actually, because of that extra space you were talking about</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; the other day&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; [hs@tier2-02 ~]$ grep Bockjoo /etc/grid-security/grid-mapfile</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim  (UFlorida T2 Service) 118&#34; uscms01</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim (UFlorida T2 Service) 118&#34; uscms01</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; &#34;/DC=org/DC=doegrids/OU=People/CN=Bockjoo Kim (UFlorida T2 Service) 606361&#34; uscms01</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; &#34;/DC=org/DC=doegrids/OU=People/CN=Bockjoo Kim 740786&#34; uscms01</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; On 9/9/13 6&#58;53 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; yes, the grid-mapfile is generated by edg-mkgridmap, and it contains</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; all users just fine, since that same grid-mapfile is also used by</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; the gridftp server, so these transfers would fail if the users</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; weren&#39;t there, but I can run globus-url-copy commands as myself --</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; and also the rsv service cert -- just fine.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; Yes, it is very interesting -- but right now also very frustrating,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; since this is our production Tier2 and should be back up in 6 minutes! &#58;)</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; I can confirm CERN cert can srm-ping your SE, but not with my DIgiCert cert.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Does your grid-map file get generated by edg-mkgridmap?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; If so, does the grid-map file contain any DigiCert DNs? or does it only</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; have CERN or FNAL DNs?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; It&#39;s apparently a very interesting thing that&#39;s happening.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; On 9/9/13 4&#58;26 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; Hi Alan,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; right -- our /etc/grid-security/gsi-authz.conf is empty, and GridMapFileName</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; points to /etc/grid-security/grid-mapfile -- which is used for CERN and FNAL</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; certs just fine, so somehow there must be something in the CA authentication</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; that fails for DOEGrids and DigiCert CAs -- but where and what?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; Thanks for all your suggestions,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; &#34;Sill, Alan&#34; &#60;alan.sill@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; On Sep 9, 2013, at 2&#58;14 PM, Horst Severini &#60;hs@....&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;      wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; [root@tier2-02 ~]# ps auxw | egrep &#39;bestman|tomcat&#39;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; root      7462  0.0  0.0 103076   864 pts/0    S+   14&#58;13   0&#58;00 egrep bestman|tomcat</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; bestman  11980 10.8  3.1 4034212 513848 ?      Sl   11&#58;35  17&#58;09 /etc/alternatives/java_sdk/bin/java -server -Xmx1024m -XX&#58;MaxDirectMemorySize=1024m -DX509_CERT_DIR=/etc/grid-security/certificates -DCADIR=/etc/grid-security/certificates -DJettyConfiguration=/etc/bestman2/conf/WEB-INF/jetty.xml -DJettyDescriptor=/etc/bestman2/conf/WEB-INF/web.xml -DJettyResource=/etc/bestman2/conf/ -Dorg.eclipse.jetty.util.log.IGNORE=true gov.lbl.srm.server.Server /etc/bestman2/conf/bestman2.rc</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Your gridftp server will use the authorization options in /etc/grid-security/gsi-authz.conf to handle the GSI callout, but bestman needs a bit more configuration.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; What are the contents of /etc/bestman2/conf/bestman2.rc with respect to the local certificate and authorization options?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; For example, on our local rpm-based test server, in that file, we have</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ## GUMS-XACML is the only supported interface.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ###########################################################</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### GUMSProtocol=XACML</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### GUMSserviceURL=</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### GUMSCurrHostDN=</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### Grid-mapfile will be used</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; GridMapFileName=/etc/bestman2/conf/grid-mapfile.empty</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; This matches our local use of GUMS via gsi-athz.conf&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; [root@tinge ~]# cat /etc/grid-security/gsi-authz.conf</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; globus_mapping liblcas_lcmaps_gt4_mapping.so lcmaps_callout</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; If you have set gsi-authz.conf to use a lobal grid-mapfile, you might have to do the same to the bestman2.rc configuration</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Just a suggestion.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_9676143').click(function() {
            $('#detail_9676143').slideDown("normal");
            $('#show_9676143').hide();
            $('#hide_9676143').show();
        });
        $('#hide_9676143').click(function() {
            $('#detail_9676143').slideUp();
            $('#hide_9676143').hide();
            $('#show_9676143').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378773009'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-10T00:30:09+00:00">Sep 10, 2013 12:30 AM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1378773009">&nbsp;</a></div><pre>Hi Horst,
Indeed, I can do globus-url-copy but srm-ping still fails.
I have no idea.
Do you see some error in /var/log/bestman2/bestman2.log
when DigiCert or Doe cert is used to execute srm-ping?
Thanks,
Bockjoo
On 9/9/13 7&#58;59 PM, Horst Severini wrote&#58;
<font color='#7F7E6F'>&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; okay, I commented out the FNAL VOMS server -- but I also remapped you</font>
<font color='#7F7E6F'>&#62; manually to the mis account, since we don&#39;t currently have a uscms01 account.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; So please try a globus-url-copy like</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; globus-url-copy file&#58;/tmp/test123 <a href='gsiftp&#58;//tier2-02.ochep.ou.edu/tmp/test123' target='_blank' rel='nofollow'>gsiftp&#58;//tier2-02.ochep.ou.edu/tmp/test123</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; and assuming that works okay, you can try an srm-ping command --</font>
<font color='#7F7E6F'>&#62; but I already know that that won&#39;t work, since I&#39;ve tried this myself</font>
<font color='#7F7E6F'>&#62; many times already. &#58;)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks for your help, though!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62; My DN is completely irrelevant for atlas, but I would like to test if my</font>
<font color='#7F7E6F'>&#62;&#62; digicert glitch is the issue or something else.</font>
<font color='#7F7E6F'>&#62;&#62; If you have two of my DigiCert DNs in your grid-mapfile, you need to get</font>
<font color='#7F7E6F'>&#62;&#62; rid of</font>
<font color='#7F7E6F'>&#62;&#62; group vomss&#58;//voms.fnal.gov&#58;8443/voms/cms uscms01</font>
<font color='#7F7E6F'>&#62;&#62; from your  /etc/edg-mkgridmap.conf (and run edg-mkgridmap manually like</font>
<font color='#7F7E6F'>&#62;&#62; so /usr/sbin/edg-mkgridmap ).</font>
<div id='show_164932833' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_164932833'><font color='#7F7E6F'>&#62;&#62; That voms server at FNAL is not correct for cms (only CERN voms server</font>
<font color='#7F7E6F'>&#62;&#62; should be used for cms),</font>
<font color='#7F7E6F'>&#62;&#62; but since you are an atlas site, you might not care.</font>
<font color='#7F7E6F'>&#62;&#62; However, I am trying to see if my digicert really does not work even</font>
<font color='#7F7E6F'>&#62;&#62; after your correcting /etc/edg-mkgridmap.conf.</font>
<font color='#7F7E6F'>&#62;&#62; Then, the problem may be in the CA pem files or your suspicion about</font>
<font color='#7F7E6F'>&#62;&#62; java seems to be reasonable.</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; On 9/9/13 7&#58;19 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Do you have my DN</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; (UFlorida T2 Service) 118</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; in the grid-mapfile?</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Yup; twice, actually, because of that extra space you were talking about</font>
<font color='#7F7E6F'>&#62;&#62;&#62; the other day&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62;&#62; [hs@tier2-02 ~]$ grep Bockjoo /etc/grid-security/grid-mapfile</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim  (UFlorida T2 Service) 118&#34; uscms01</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim (UFlorida T2 Service) 118&#34; uscms01</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#34;/DC=org/DC=doegrids/OU=People/CN=Bockjoo Kim (UFlorida T2 Service) 606361&#34; uscms01</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#34;/DC=org/DC=doegrids/OU=People/CN=Bockjoo Kim 740786&#34; uscms01</font>
<font color='#7F7E6F'>&#62;&#62;&#62; ----</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; On 9/9/13 6&#58;53 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; yes, the grid-mapfile is generated by edg-mkgridmap, and it contains</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; all users just fine, since that same grid-mapfile is also used by</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; the gridftp server, so these transfers would fail if the users</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; weren&#39;t there, but I can run globus-url-copy commands as myself --</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; and also the rsv service cert -- just fine.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Yes, it is very interesting -- but right now also very frustrating,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; since this is our production Tier2 and should be back up in 6 minutes! &#58;)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; I can confirm CERN cert can srm-ping your SE, but not with my DIgiCert cert.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Does your grid-map file get generated by edg-mkgridmap?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; If so, does the grid-map file contain any DigiCert DNs? or does it only</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; have CERN or FNAL DNs?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; It&#39;s apparently a very interesting thing that&#39;s happening.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; On 9/9/13 4&#58;26 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; Hi Alan,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; right -- our /etc/grid-security/gsi-authz.conf is empty, and GridMapFileName</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; points to /etc/grid-security/grid-mapfile -- which is used for CERN and FNAL</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; certs just fine, so somehow there must be something in the CA authentication</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; that fails for DOEGrids and DigiCert CAs -- but where and what?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; Thanks for all your suggestions,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; &#34;Sill, Alan&#34; &#60;alan.sill@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; On Sep 9, 2013, at 2&#58;14 PM, Horst Severini &#60;hs@....&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;      wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; [root@tier2-02 ~]# ps auxw | egrep &#39;bestman|tomcat&#39;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; root      7462  0.0  0.0 103076   864 pts/0    S+   14&#58;13   0&#58;00 egrep bestman|tomcat</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; bestman  11980 10.8  3.1 4034212 513848 ?      Sl   11&#58;35  17&#58;09 /etc/alternatives/java_sdk/bin/java -server -Xmx1024m -XX&#58;MaxDirectMemorySize=1024m -DX509_CERT_DIR=/etc/grid-security/certificates -DCADIR=/etc/grid-security/certificates -DJettyConfiguration=/etc/bestman2/conf/WEB-INF/jetty.xml -DJettyDescriptor=/etc/bestman2/conf/WEB-INF/web.xml -DJettyResource=/etc/bestman2/conf/ -Dorg.eclipse.jetty.util.log.IGNORE=true gov.lbl.srm.server.Server /etc/bestman2/conf/bestman2.rc</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Your gridftp server will use the authorization options in /etc/grid-security/gsi-authz.conf to handle the GSI callout, but bestman needs a bit more configuration.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; What are the contents of /etc/bestman2/conf/bestman2.rc with respect to the local certificate and authorization options?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; For example, on our local rpm-based test server, in that file, we have</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ## GUMS-XACML is the only supported interface.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ###########################################################</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### GUMSProtocol=XACML</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### GUMSserviceURL=</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### GUMSCurrHostDN=</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; ### Grid-mapfile will be used</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; GridMapFileName=/etc/bestman2/conf/grid-mapfile.empty</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; This matches our local use of GUMS via gsi-athz.conf&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; [root@tinge ~]# cat /etc/grid-security/gsi-authz.conf</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; globus_mapping liblcas_lcmaps_gt4_mapping.so lcmaps_callout</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; If you have set gsi-authz.conf to use a lobal grid-mapfile, you might have to do the same to the bestman2.rc configuration</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Just a suggestion.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_164932833').click(function() {
            $('#detail_164932833').slideDown("normal");
            $('#show_164932833').hide();
            $('#hide_164932833').show();
        });
        $('#hide_164932833').click(function() {
            $('#detail_164932833').slideUp();
            $('#hide_164932833').hide();
            $('#show_164932833').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378771265'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-10T00:01:05+00:00">Sep 10, 2013 12:01 AM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378771265">&nbsp;</a></div><pre>Hi Bockjoo,

okay, I commented out the FNAL VOMS server -- but I also remapped you
manually to the mis account, since we don&#39;t currently have a uscms01 account.

So please try a globus-url-copy like

globus-url-copy file&#58;/tmp/test123 <a href='gsiftp&#58;//tier2-02.ochep.ou.edu/tmp/test123' target='_blank' rel='nofollow'>gsiftp&#58;//tier2-02.ochep.ou.edu/tmp/test123</a>

and assuming that works okay, you can try an srm-ping command --
but I already know that that won&#39;t work, since I&#39;ve tried this myself
many times already. &#58;)

Thanks for your help, though!

Horst

Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; My DN is completely irrelevant for atlas, but I would like to test if my</font>
<font color='#7F7E6F'>&#62; digicert glitch is the issue or something else.</font>
<font color='#7F7E6F'>&#62; If you have two of my DigiCert DNs in your grid-mapfile, you need to get</font>
<font color='#7F7E6F'>&#62; rid of</font>
<font color='#7F7E6F'>&#62; group vomss&#58;//voms.fnal.gov&#58;8443/voms/cms uscms01</font>
<font color='#7F7E6F'>&#62; from your  /etc/edg-mkgridmap.conf (and run edg-mkgridmap manually like</font>
<font color='#7F7E6F'>&#62; so /usr/sbin/edg-mkgridmap ).</font>
<font color='#7F7E6F'>&#62; That voms server at FNAL is not correct for cms (only CERN voms server</font>
<font color='#7F7E6F'>&#62; should be used for cms),</font>
<font color='#7F7E6F'>&#62; but since you are an atlas site, you might not care.</font>
<font color='#7F7E6F'>&#62; However, I am trying to see if my digicert really does not work even</font>
<font color='#7F7E6F'>&#62; after your correcting /etc/edg-mkgridmap.conf.</font>
<font color='#7F7E6F'>&#62; Then, the problem may be in the CA pem files or your suspicion about</font>
<font color='#7F7E6F'>&#62; java seems to be reasonable.</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<div id='show_1966159680' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1966159680'><font color='#7F7E6F'>&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On 9/9/13 7&#58;19 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Do you have my DN</font>
<font color='#7F7E6F'>&#62; &#62;&#62; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim</font>
<font color='#7F7E6F'>&#62; &#62;&#62; (UFlorida T2 Service) 118</font>
<font color='#7F7E6F'>&#62; &#62;&#62; in the grid-mapfile?</font>
<font color='#7F7E6F'>&#62; &#62; Yup; twice, actually, because of that extra space you were talking about</font>
<font color='#7F7E6F'>&#62; &#62; the other day&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; ----</font>
<font color='#7F7E6F'>&#62; &#62; [hs@tier2-02 ~]$ grep Bockjoo /etc/grid-security/grid-mapfile</font>
<font color='#7F7E6F'>&#62; &#62; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim  (UFlorida T2 Service) 118&#34; uscms01</font>
<font color='#7F7E6F'>&#62; &#62; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim (UFlorida T2 Service) 118&#34; uscms01</font>
<font color='#7F7E6F'>&#62; &#62; &#34;/DC=org/DC=doegrids/OU=People/CN=Bockjoo Kim (UFlorida T2 Service) 606361&#34; uscms01</font>
<font color='#7F7E6F'>&#62; &#62; &#34;/DC=org/DC=doegrids/OU=People/CN=Bockjoo Kim 740786&#34; uscms01</font>
<font color='#7F7E6F'>&#62; &#62; ----</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; On 9/9/13 6&#58;53 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; yes, the grid-mapfile is generated by edg-mkgridmap, and it contains</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; all users just fine, since that same grid-mapfile is also used by</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; the gridftp server, so these transfers would fail if the users</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; weren&#39;t there, but I can run globus-url-copy commands as myself --</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; and also the rsv service cert -- just fine.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Yes, it is very interesting -- but right now also very frustrating,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; since this is our production Tier2 and should be back up in 6 minutes! &#58;)</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; I can confirm CERN cert can srm-ping your SE, but not with my DIgiCert cert.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Does your grid-map file get generated by edg-mkgridmap?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; If so, does the grid-map file contain any DigiCert DNs? or does it only</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; have CERN or FNAL DNs?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; It&#39;s apparently a very interesting thing that&#39;s happening.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; On 9/9/13 4&#58;26 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; Hi Alan,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; right -- our /etc/grid-security/gsi-authz.conf is empty, and GridMapFileName</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; points to /etc/grid-security/grid-mapfile -- which is used for CERN and FNAL</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; certs just fine, so somehow there must be something in the CA authentication</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; that fails for DOEGrids and DigiCert CAs -- but where and what?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; Thanks for all your suggestions,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; &#34;Sill, Alan&#34; &#60;alan.sill@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; On Sep 9, 2013, at 2&#58;14 PM, Horst Severini &#60;hs@....&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;     wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; [root@tier2-02 ~]# ps auxw | egrep &#39;bestman|tomcat&#39;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; root      7462  0.0  0.0 103076   864 pts/0    S+   14&#58;13   0&#58;00 egrep bestman|tomcat</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; bestman  11980 10.8  3.1 4034212 513848 ?      Sl   11&#58;35  17&#58;09 /etc/alternatives/java_sdk/bin/java -server -Xmx1024m -XX&#58;MaxDirectMemorySize=1024m -DX509_CERT_DIR=/etc/grid-security/certificates -DCADIR=/etc/grid-security/certificates -DJettyConfiguration=/etc/bestman2/conf/WEB-INF/jetty.xml -DJettyDescriptor=/etc/bestman2/conf/WEB-INF/web.xml -DJettyResource=/etc/bestman2/conf/ -Dorg.eclipse.jetty.util.log.IGNORE=true gov.lbl.srm.server.Server /etc/bestman2/conf/bestman2.rc</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Your gridftp server will use the authorization options in /etc/grid-security/gsi-authz.conf to handle the GSI callout, but bestman needs a bit more configuration.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; What are the contents of /etc/bestman2/conf/bestman2.rc with respect to the local certificate and authorization options?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; For example, on our local rpm-based test server, in that file, we have</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; ## GUMS-XACML is the only supported interface.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; ###########################################################</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; ### GUMSProtocol=XACML</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; ### GUMSserviceURL=</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; ### GUMSCurrHostDN=</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; ### Grid-mapfile will be used</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; GridMapFileName=/etc/bestman2/conf/grid-mapfile.empty</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; This matches our local use of GUMS via gsi-athz.conf&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; [root@tinge ~]# cat /etc/grid-security/gsi-authz.conf</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; globus_mapping liblcas_lcmaps_gt4_mapping.so lcmaps_callout</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; If you have set gsi-authz.conf to use a lobal grid-mapfile, you might have to do the same to the bestman2.rc configuration</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Just a suggestion.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_1966159680').click(function() {
            $('#detail_1966159680').slideDown("normal");
            $('#show_1966159680').hide();
            $('#hide_1966159680').show();
        });
        $('#hide_1966159680').click(function() {
            $('#detail_1966159680').slideUp();
            $('#hide_1966159680').hide();
            $('#show_1966159680').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378769229'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T23:27:09+00:00">Sep 9, 2013 11:27 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1378769229">&nbsp;</a></div><pre>Hi Horst,
My DN is completely irrelevant for atlas, but I would like to test if my
digicert glitch is the issue or something else.
If you have two of my DigiCert DNs in your grid-mapfile, you need to get
rid of
group vomss&#58;//voms.fnal.gov&#58;8443/voms/cms uscms01
from your  /etc/edg-mkgridmap.conf (and run edg-mkgridmap manually like
so /usr/sbin/edg-mkgridmap ).
That voms server at FNAL is not correct for cms (only CERN voms server
should be used for cms),
but since you are an atlas site, you might not care.
However, I am trying to see if my digicert really does not work even
after your correcting /etc/edg-mkgridmap.conf.
Then, the problem may be in the CA pem files or your suspicion about
java seems to be reasonable.
Thanks,
Bockjoo

On 9/9/13 7&#58;19 PM, Horst Severini wrote&#58;
<font color='#7F7E6F'>&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Do you have my DN</font>
<font color='#7F7E6F'>&#62;&#62; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim</font>
<font color='#7F7E6F'>&#62;&#62; (UFlorida T2 Service) 118</font>
<font color='#7F7E6F'>&#62;&#62; in the grid-mapfile?</font>
<font color='#7F7E6F'>&#62; Yup; twice, actually, because of that extra space you were talking about</font>
<font color='#7F7E6F'>&#62; the other day&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ----</font>
<font color='#7F7E6F'>&#62; [hs@tier2-02 ~]$ grep Bockjoo /etc/grid-security/grid-mapfile</font>
<font color='#7F7E6F'>&#62; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim  (UFlorida T2 Service) 118&#34; uscms01</font>
<font color='#7F7E6F'>&#62; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim (UFlorida T2 Service) 118&#34; uscms01</font>
<font color='#7F7E6F'>&#62; &#34;/DC=org/DC=doegrids/OU=People/CN=Bockjoo Kim (UFlorida T2 Service) 606361&#34; uscms01</font>
<font color='#7F7E6F'>&#62; &#34;/DC=org/DC=doegrids/OU=People/CN=Bockjoo Kim 740786&#34; uscms01</font>
<font color='#7F7E6F'>&#62; ----</font>
<div id='show_1017249778' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1017249778'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; On 9/9/13 6&#58;53 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; yes, the grid-mapfile is generated by edg-mkgridmap, and it contains</font>
<font color='#7F7E6F'>&#62;&#62;&#62; all users just fine, since that same grid-mapfile is also used by</font>
<font color='#7F7E6F'>&#62;&#62;&#62; the gridftp server, so these transfers would fail if the users</font>
<font color='#7F7E6F'>&#62;&#62;&#62; weren&#39;t there, but I can run globus-url-copy commands as myself --</font>
<font color='#7F7E6F'>&#62;&#62;&#62; and also the rsv service cert -- just fine.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Yes, it is very interesting -- but right now also very frustrating,</font>
<font color='#7F7E6F'>&#62;&#62;&#62; since this is our production Tier2 and should be back up in 6 minutes! &#58;)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; I can confirm CERN cert can srm-ping your SE, but not with my DIgiCert cert.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Does your grid-map file get generated by edg-mkgridmap?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; If so, does the grid-map file contain any DigiCert DNs? or does it only</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; have CERN or FNAL DNs?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; It&#39;s apparently a very interesting thing that&#39;s happening.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; On 9/9/13 4&#58;26 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Hi Alan,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; right -- our /etc/grid-security/gsi-authz.conf is empty, and GridMapFileName</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; points to /etc/grid-security/grid-mapfile -- which is used for CERN and FNAL</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; certs just fine, so somehow there must be something in the CA authentication</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; that fails for DOEGrids and DigiCert CAs -- but where and what?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; Thanks for all your suggestions,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; &#34;Sill, Alan&#34; &#60;alan.sill@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; On Sep 9, 2013, at 2&#58;14 PM, Horst Severini &#60;hs@....&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;     wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; [root@tier2-02 ~]# ps auxw | egrep &#39;bestman|tomcat&#39;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; root      7462  0.0  0.0 103076   864 pts/0    S+   14&#58;13   0&#58;00 egrep bestman|tomcat</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;&#62; bestman  11980 10.8  3.1 4034212 513848 ?      Sl   11&#58;35  17&#58;09 /etc/alternatives/java_sdk/bin/java -server -Xmx1024m -XX&#58;MaxDirectMemorySize=1024m -DX509_CERT_DIR=/etc/grid-security/certificates -DCADIR=/etc/grid-security/certificates -DJettyConfiguration=/etc/bestman2/conf/WEB-INF/jetty.xml -DJettyDescriptor=/etc/bestman2/conf/WEB-INF/web.xml -DJettyResource=/etc/bestman2/conf/ -Dorg.eclipse.jetty.util.log.IGNORE=true gov.lbl.srm.server.Server /etc/bestman2/conf/bestman2.rc</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Your gridftp server will use the authorization options in /etc/grid-security/gsi-authz.conf to handle the GSI callout, but bestman needs a bit more configuration.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; What are the contents of /etc/bestman2/conf/bestman2.rc with respect to the local certificate and authorization options?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; For example, on our local rpm-based test server, in that file, we have</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; ## GUMS-XACML is the only supported interface.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; ###########################################################</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; ### GUMSProtocol=XACML</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; ### GUMSserviceURL=</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; ### GUMSCurrHostDN=</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; ### Grid-mapfile will be used</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; GridMapFileName=/etc/bestman2/conf/grid-mapfile.empty</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; This matches our local use of GUMS via gsi-athz.conf&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; [root@tinge ~]# cat /etc/grid-security/gsi-authz.conf</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; globus_mapping liblcas_lcmaps_gt4_mapping.so lcmaps_callout</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; If you have set gsi-authz.conf to use a lobal grid-mapfile, you might have to do the same to the bestman2.rc configuration</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Just a suggestion.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_1017249778').click(function() {
            $('#detail_1017249778').slideDown("normal");
            $('#show_1017249778').hide();
            $('#hide_1017249778').show();
        });
        $('#hide_1017249778').click(function() {
            $('#detail_1017249778').slideUp();
            $('#hide_1017249778').hide();
            $('#show_1017249778').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378768869'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T23:21:09+00:00">Sep 9, 2013 11:21 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378768869">&nbsp;</a></div><pre>Hi Bockjoo,

<font color='#7F7E6F'>&#62; Do you have my DN</font>
<font color='#7F7E6F'>&#62; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim</font>
<font color='#7F7E6F'>&#62; (UFlorida T2 Service) 118</font>
<font color='#7F7E6F'>&#62; in the grid-mapfile?</font>

Yup; twice, actually, because of that extra space you were talking about
the other day&#58;

----
[hs@tier2-02 ~]$ grep Bockjoo /etc/grid-security/grid-mapfile
&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim  (UFlorida T2 Service) 118&#34; uscms01
&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim (UFlorida T2 Service) 118&#34; uscms01
&#34;/DC=org/DC=doegrids/OU=People/CN=Bockjoo Kim (UFlorida T2 Service) 606361&#34; uscms01
&#34;/DC=org/DC=doegrids/OU=People/CN=Bockjoo Kim 740786&#34; uscms01
----

Thanks,

Horst

<font color='#7F7E6F'>&#62; On 9/9/13 6&#58;53 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; yes, the grid-mapfile is generated by edg-mkgridmap, and it contains</font>
<font color='#7F7E6F'>&#62; &#62; all users just fine, since that same grid-mapfile is also used by</font>
<font color='#7F7E6F'>&#62; &#62; the gridftp server, so these transfers would fail if the users</font>
<font color='#7F7E6F'>&#62; &#62; weren&#39;t there, but I can run globus-url-copy commands as myself --</font>
<font color='#7F7E6F'>&#62; &#62; and also the rsv service cert -- just fine.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Yes, it is very interesting -- but right now also very frustrating,</font>
<font color='#7F7E6F'>&#62; &#62; since this is our production Tier2 and should be back up in 6 minutes! &#58;)</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks,</font>
<div id='show_654696961' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_654696961'><font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; I can confirm CERN cert can srm-ping your SE, but not with my DIgiCert cert.</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Does your grid-map file get generated by edg-mkgridmap?</font>
<font color='#7F7E6F'>&#62; &#62;&#62; If so, does the grid-map file contain any DigiCert DNs? or does it only</font>
<font color='#7F7E6F'>&#62; &#62;&#62; have CERN or FNAL DNs?</font>
<font color='#7F7E6F'>&#62; &#62;&#62; It&#39;s apparently a very interesting thing that&#39;s happening.</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; &#62;&#62; On 9/9/13 4&#58;26 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Hi Alan,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; right -- our /etc/grid-security/gsi-authz.conf is empty, and GridMapFileName</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; points to /etc/grid-security/grid-mapfile -- which is used for CERN and FNAL</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; certs just fine, so somehow there must be something in the CA authentication</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; that fails for DOEGrids and DigiCert CAs -- but where and what?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Thanks for all your suggestions,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; &#34;Sill, Alan&#34; &#60;alan.sill@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; On Sep 9, 2013, at 2&#58;14 PM, Horst Severini &#60;hs@....&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;    wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; [root@tier2-02 ~]# ps auxw | egrep &#39;bestman|tomcat&#39;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; root      7462  0.0  0.0 103076   864 pts/0    S+   14&#58;13   0&#58;00 egrep bestman|tomcat</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; bestman  11980 10.8  3.1 4034212 513848 ?      Sl   11&#58;35  17&#58;09 /etc/alternatives/java_sdk/bin/java -server -Xmx1024m -XX&#58;MaxDirectMemorySize=1024m -DX509_CERT_DIR=/etc/grid-security/certificates -DCADIR=/etc/grid-security/certificates -DJettyConfiguration=/etc/bestman2/conf/WEB-INF/jetty.xml -DJettyDescriptor=/etc/bestman2/conf/WEB-INF/web.xml -DJettyResource=/etc/bestman2/conf/ -Dorg.eclipse.jetty.util.log.IGNORE=true gov.lbl.srm.server.Server /etc/bestman2/conf/bestman2.rc</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Your gridftp server will use the authorization options in /etc/grid-security/gsi-authz.conf to handle the GSI callout, but bestman needs a bit more configuration.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; What are the contents of /etc/bestman2/conf/bestman2.rc with respect to the local certificate and authorization options?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; For example, on our local rpm-based test server, in that file, we have</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; ## GUMS-XACML is the only supported interface.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; ###########################################################</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; ### GUMSProtocol=XACML</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; ### GUMSserviceURL=</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; ### GUMSCurrHostDN=</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; ### Grid-mapfile will be used</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; GridMapFileName=/etc/bestman2/conf/grid-mapfile.empty</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; This matches our local use of GUMS via gsi-athz.conf&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; [root@tinge ~]# cat /etc/grid-security/gsi-authz.conf</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; globus_mapping liblcas_lcmaps_gt4_mapping.so lcmaps_callout</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; If you have set gsi-authz.conf to use a lobal grid-mapfile, you might have to do the same to the bestman2.rc configuration</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Just a suggestion.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_654696961').click(function() {
            $('#detail_654696961').slideDown("normal");
            $('#show_654696961').hide();
            $('#hide_654696961').show();
        });
        $('#hide_654696961').click(function() {
            $('#detail_654696961').slideUp();
            $('#hide_654696961').hide();
            $('#show_654696961').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378768688'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T23:18:08+00:00">Sep 9, 2013 11:18 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378768688">&nbsp;</a></div><pre>Hi again,

a few more observations which may or may not help.

Comparing tier2-02.ochep.ou.edu and osgitb2.nhn.ou.edu,
I noticed that osgitb2 only has java-1.7.0-openjdk and
java-1.7.0-openjdk-devel installed, whereas tier2-02 has
java-1.7.0-ibm and java-1.7.0-ibm-devel installed as well.

Did this dependency change from RHEL5 to RHEL6, or because
it&#39;s 64-bit? java-1.7.0-ibm.i386 is available as well, but
apparently bestman2-server-2.3.0-14.osg.el5.noarch doesn&#39;t require it.
Why does bestman2-server-2.3.0-14.osg.el6.noarch need it?

Also, I noticed that most bestman RPMs are noarch; but I take it
they still only require the 64-bit java versions on 64-bit RHEL6?
I tried looking for the 32-bit versions of java-1.7.0-ibm and
java-1.7.0-openjdk, but they don&#39;t seem to exist. I guess that&#39;s expected?

I&#39;d really like to get this working tomorrow, so that we can come back
out of our downtime. Also, I believe osg-upcoming is scheduled to be
released as osg production on Wednesday, so I think it would be
very good to understand what&#39;s going on before doing that as well! =)

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='16982#1378767970'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T23:06:10+00:00">Sep 9, 2013 11:06 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1378767970">&nbsp;</a></div><pre>Hi Horst,
Do you have my DN
/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim
(UFlorida T2 Service) 118
in the grid-mapfile?
Bockjoo
On 9/9/13 6&#58;53 PM, Horst Severini wrote&#58;
<font color='#7F7E6F'>&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; yes, the grid-mapfile is generated by edg-mkgridmap, and it contains</font>
<font color='#7F7E6F'>&#62; all users just fine, since that same grid-mapfile is also used by</font>
<font color='#7F7E6F'>&#62; the gridftp server, so these transfers would fail if the users</font>
<font color='#7F7E6F'>&#62; weren&#39;t there, but I can run globus-url-copy commands as myself --</font>
<font color='#7F7E6F'>&#62; and also the rsv service cert -- just fine.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Yes, it is very interesting -- but right now also very frustrating,</font>
<font color='#7F7E6F'>&#62; since this is our production Tier2 and should be back up in 6 minutes! &#58;)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62; I can confirm CERN cert can srm-ping your SE, but not with my DIgiCert cert.</font>
<font color='#7F7E6F'>&#62;&#62; Does your grid-map file get generated by edg-mkgridmap?</font>
<font color='#7F7E6F'>&#62;&#62; If so, does the grid-map file contain any DigiCert DNs? or does it only</font>
<font color='#7F7E6F'>&#62;&#62; have CERN or FNAL DNs?</font>
<font color='#7F7E6F'>&#62;&#62; It&#39;s apparently a very interesting thing that&#39;s happening.</font>
<font color='#7F7E6F'>&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62;&#62; On 9/9/13 4&#58;26 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hi Alan,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; right -- our /etc/grid-security/gsi-authz.conf is empty, and GridMapFileName</font>
<div id='show_1355362350' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1355362350'><font color='#7F7E6F'>&#62;&#62;&#62; points to /etc/grid-security/grid-mapfile -- which is used for CERN and FNAL</font>
<font color='#7F7E6F'>&#62;&#62;&#62; certs just fine, so somehow there must be something in the CA authentication</font>
<font color='#7F7E6F'>&#62;&#62;&#62; that fails for DOEGrids and DigiCert CAs -- but where and what?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks for all your suggestions,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#34;Sill, Alan&#34; &#60;alan.sill@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; On Sep 9, 2013, at 2&#58;14 PM, Horst Severini &#60;hs@....&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;    wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; [root@tier2-02 ~]# ps auxw | egrep &#39;bestman|tomcat&#39;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; root      7462  0.0  0.0 103076   864 pts/0    S+   14&#58;13   0&#58;00 egrep bestman|tomcat</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;&#62; bestman  11980 10.8  3.1 4034212 513848 ?      Sl   11&#58;35  17&#58;09 /etc/alternatives/java_sdk/bin/java -server -Xmx1024m -XX&#58;MaxDirectMemorySize=1024m -DX509_CERT_DIR=/etc/grid-security/certificates -DCADIR=/etc/grid-security/certificates -DJettyConfiguration=/etc/bestman2/conf/WEB-INF/jetty.xml -DJettyDescriptor=/etc/bestman2/conf/WEB-INF/web.xml -DJettyResource=/etc/bestman2/conf/ -Dorg.eclipse.jetty.util.log.IGNORE=true gov.lbl.srm.server.Server /etc/bestman2/conf/bestman2.rc</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Your gridftp server will use the authorization options in /etc/grid-security/gsi-authz.conf to handle the GSI callout, but bestman needs a bit more configuration.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; What are the contents of /etc/bestman2/conf/bestman2.rc with respect to the local certificate and authorization options?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; For example, on our local rpm-based test server, in that file, we have</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; ## GUMS-XACML is the only supported interface.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; ###########################################################</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; ### GUMSProtocol=XACML</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; ### GUMSserviceURL=</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; ### GUMSCurrHostDN=</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; ### Grid-mapfile will be used</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; GridMapFileName=/etc/bestman2/conf/grid-mapfile.empty</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; This matches our local use of GUMS via gsi-athz.conf&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; [root@tinge ~]# cat /etc/grid-security/gsi-authz.conf</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; globus_mapping liblcas_lcmaps_gt4_mapping.so lcmaps_callout</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; If you have set gsi-authz.conf to use a lobal grid-mapfile, you might have to do the same to the bestman2.rc configuration</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Just a suggestion.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_1355362350').click(function() {
            $('#detail_1355362350').slideDown("normal");
            $('#show_1355362350').hide();
            $('#hide_1355362350').show();
        });
        $('#hide_1355362350').click(function() {
            $('#detail_1355362350').slideUp();
            $('#hide_1355362350').hide();
            $('#show_1355362350').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378767248'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T22:54:08+00:00">Sep 9, 2013 10:54 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378767248">&nbsp;</a></div><pre>Hi Bockjoo,

yes, the grid-mapfile is generated by edg-mkgridmap, and it contains
all users just fine, since that same grid-mapfile is also used by
the gridftp server, so these transfers would fail if the users
weren&#39;t there, but I can run globus-url-copy commands as myself --
and also the rsv service cert -- just fine.

Yes, it is very interesting -- but right now also very frustrating,
since this is our production Tier2 and should be back up in 6 minutes! &#58;)

Thanks,

Horst

Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; I can confirm CERN cert can srm-ping your SE, but not with my DIgiCert cert.</font>
<font color='#7F7E6F'>&#62; Does your grid-map file get generated by edg-mkgridmap?</font>
<font color='#7F7E6F'>&#62; If so, does the grid-map file contain any DigiCert DNs? or does it only</font>
<font color='#7F7E6F'>&#62; have CERN or FNAL DNs?</font>
<font color='#7F7E6F'>&#62; It&#39;s apparently a very interesting thing that&#39;s happening.</font>
<font color='#7F7E6F'>&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; On 9/9/13 4&#58;26 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; Hi Alan,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; right -- our /etc/grid-security/gsi-authz.conf is empty, and GridMapFileName</font>
<font color='#7F7E6F'>&#62; &#62; points to /etc/grid-security/grid-mapfile -- which is used for CERN and FNAL</font>
<font color='#7F7E6F'>&#62; &#62; certs just fine, so somehow there must be something in the CA authentication</font>
<font color='#7F7E6F'>&#62; &#62; that fails for DOEGrids and DigiCert CAs -- but where and what?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks for all your suggestions,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; 	Horst</font>
<div id='show_1285394629' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1285394629'><font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#34;Sill, Alan&#34; &#60;alan.sill@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; On Sep 9, 2013, at 2&#58;14 PM, Horst Severini &#60;hs@....&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;   wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; [root@tier2-02 ~]# ps auxw | egrep &#39;bestman|tomcat&#39;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; root      7462  0.0  0.0 103076   864 pts/0    S+   14&#58;13   0&#58;00 egrep bestman|tomcat</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; bestman  11980 10.8  3.1 4034212 513848 ?      Sl   11&#58;35  17&#58;09 /etc/alternatives/java_sdk/bin/java -server -Xmx1024m -XX&#58;MaxDirectMemorySize=1024m -DX509_CERT_DIR=/etc/grid-security/certificates -DCADIR=/etc/grid-security/certificates -DJettyConfiguration=/etc/bestman2/conf/WEB-INF/jetty.xml -DJettyDescriptor=/etc/bestman2/conf/WEB-INF/web.xml -DJettyResource=/etc/bestman2/conf/ -Dorg.eclipse.jetty.util.log.IGNORE=true gov.lbl.srm.server.Server /etc/bestman2/conf/bestman2.rc</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Your gridftp server will use the authorization options in /etc/grid-security/gsi-authz.conf to handle the GSI callout, but bestman needs a bit more configuration.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; What are the contents of /etc/bestman2/conf/bestman2.rc with respect to the local certificate and authorization options?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; For example, on our local rpm-based test server, in that file, we have</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; ## GUMS-XACML is the only supported interface.</font>
<font color='#7F7E6F'>&#62; &#62;&#62; ###########################################################</font>
<font color='#7F7E6F'>&#62; &#62;&#62; ### GUMSProtocol=XACML</font>
<font color='#7F7E6F'>&#62; &#62;&#62; ### GUMSserviceURL=</font>
<font color='#7F7E6F'>&#62; &#62;&#62; ### GUMSCurrHostDN=</font>
<font color='#7F7E6F'>&#62; &#62;&#62; ### Grid-mapfile will be used</font>
<font color='#7F7E6F'>&#62; &#62;&#62; GridMapFileName=/etc/bestman2/conf/grid-mapfile.empty</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; This matches our local use of GUMS via gsi-athz.conf&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; [root@tinge ~]# cat /etc/grid-security/gsi-authz.conf</font>
<font color='#7F7E6F'>&#62; &#62;&#62; globus_mapping liblcas_lcmaps_gt4_mapping.so lcmaps_callout</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; If you have set gsi-authz.conf to use a lobal grid-mapfile, you might have to do the same to the bestman2.rc configuration</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Just a suggestion.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Alan</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_1285394629').click(function() {
            $('#detail_1285394629').slideDown("normal");
            $('#show_1285394629').hide();
            $('#hide_1285394629').show();
        });
        $('#hide_1285394629').click(function() {
            $('#detail_1285394629').slideUp();
            $('#hide_1285394629').hide();
            $('#show_1285394629').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378767072'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T22:51:12+00:00">Sep 9, 2013 10:51 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378767072">&nbsp;</a></div><pre>Hi Saul,

thanks! I&#39;ve looked at your config files, and I can&#39;t find anything obvious,
though. Your bestman2.rc looks almost exactly like ours, modulo storage paths,
and the only difference I can find in bestman2 is in BESTMAN2_SERVER_LIB
and JAVA_HOME, which is presumably related to the fact that you&#39;re still
running Java6, while we&#39;re now running Java7.

I also noticed that your /etc/sysconfig/bestman sets both BESTMAN2_SERVER_LIB
and BESTMAN2_CLIENT_LIB, while in our case, this is broken out into
/etc/sysconfig/bestman2lib, and if I understand the logic correctly,
that only sets either the SERVER or the CLIENT LIB. But presumably
that&#39;s not a problem, since it works on our OUHEP_ITB the same way?

I really don&#39;t understand why we&#39;re not seeing this problem on OUHEP_ITB,
which is running the exact same versions of Bestman2 and Java7 and the
same configs essentially. The only thing I can think of is that
there&#39;s a difference either between RHEL5 and RHEL6, or between the
32- and 64-bit libraries.

How can we dial up the debug logging so that we can figure out
just where the authentication is failing?

I&#39;ve extended our downtime for another day, but I&#39;m not happy about that. &#58;

Thanks,

Horst

Saul Youssef &#60;youssef@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;       Just in case it helps, I&#39;m attaching our bestman.rc and</font>
<font color='#7F7E6F'>&#62; /etc/sysconfig/bestman2 and our current grid.mapfile for our production</font>
<div id='show_662040334' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_662040334'><font color='#7F7E6F'>&#62; bestman2 (atlas.bu.edu).</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; - Saul</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Mon, Sep 9, 2013 at 4&#58;26 PM, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#62; Hi Alan,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; right -- our /etc/grid-security/gsi-authz.conf is empty, and</font>
<font color='#7F7E6F'>&#62; &#62; GridMapFileName</font>
<font color='#7F7E6F'>&#62; &#62; points to /etc/grid-security/grid-mapfile -- which is used for CERN and</font>
<font color='#7F7E6F'>&#62; &#62; FNAL</font>
<font color='#7F7E6F'>&#62; &#62; certs just fine, so somehow there must be something in the CA</font>
<font color='#7F7E6F'>&#62; &#62; authentication</font>
<font color='#7F7E6F'>&#62; &#62; that fails for DOEGrids and DigiCert CAs -- but where and what?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks for all your suggestions,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;         Horst</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#34;Sill, Alan&#34; &#60;alan.sill@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; On Sep 9, 2013, at 2&#58;14 PM, Horst Severini &#60;hs@....&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;  wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62; [root@tier2-02 ~]# ps auxw | egrep &#39;bestman|tomcat&#39;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62; root      7462  0.0  0.0 103076   864 pts/0    S+   14&#58;13   0&#58;00 egrep</font>
<font color='#7F7E6F'>&#62; &#62; bestman|tomcat</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62; bestman  11980 10.8  3.1 4034212 513848 ?      Sl   11&#58;35  17&#58;09</font>
<font color='#7F7E6F'>&#62; &#62; /etc/alternatives/java_sdk/bin/java -server -Xmx1024m</font>
<font color='#7F7E6F'>&#62; &#62; -XX&#58;MaxDirectMemorySize=1024m</font>
<font color='#7F7E6F'>&#62; &#62; -DX509_CERT_DIR=/etc/grid-security/certificates</font>
<font color='#7F7E6F'>&#62; &#62; -DCADIR=/etc/grid-security/certificates</font>
<font color='#7F7E6F'>&#62; &#62; -DJettyConfiguration=/etc/bestman2/conf/WEB-INF/jetty.xml</font>
<font color='#7F7E6F'>&#62; &#62; -DJettyDescriptor=/etc/bestman2/conf/WEB-INF/web.xml</font>
<font color='#7F7E6F'>&#62; &#62; -DJettyResource=/etc/bestman2/conf/</font>
<font color='#7F7E6F'>&#62; &#62; -Dorg.eclipse.jetty.util.log.IGNORE=true gov.lbl.srm.server.Server</font>
<font color='#7F7E6F'>&#62; &#62; /etc/bestman2/conf/bestman2.rc</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Your gridftp server will use the authorization options in</font>
<font color='#7F7E6F'>&#62; &#62; /etc/grid-security/gsi-authz.conf to handle the GSI callout, but bestman</font>
<font color='#7F7E6F'>&#62; &#62; needs a bit more configuration.</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; What are the contents of /etc/bestman2/conf/bestman2.rc with respect to</font>
<font color='#7F7E6F'>&#62; &#62; the local certificate and authorization options?</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; For example, on our local rpm-based test server, in that file, we have</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; ## GUMS-XACML is the only supported interface.</font>
<font color='#7F7E6F'>&#62; &#62; &#62; ###########################################################</font>
<font color='#7F7E6F'>&#62; &#62; &#62; ### GUMSProtocol=XACML</font>
<font color='#7F7E6F'>&#62; &#62; &#62; ### GUMSserviceURL=</font>
<font color='#7F7E6F'>&#62; &#62; &#62; ### GUMSCurrHostDN=</font>
<font color='#7F7E6F'>&#62; &#62; &#62; ### Grid-mapfile will be used</font>
<font color='#7F7E6F'>&#62; &#62; &#62; GridMapFileName=/etc/bestman2/conf/grid-mapfile.empty</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; This matches our local use of GUMS via gsi-athz.conf&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; [root@tinge ~]# cat /etc/grid-security/gsi-authz.conf</font>
<font color='#7F7E6F'>&#62; &#62; &#62; globus_mapping liblcas_lcmaps_gt4_mapping.so lcmaps_callout</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; If you have set gsi-authz.conf to use a lobal grid-mapfile, you might</font>
<font color='#7F7E6F'>&#62; &#62; have to do the same to the bestman2.rc configuration</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Just a suggestion.</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Alan</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; --</font>
<font color='#7F7E6F'>&#62; ======================================================</font>
<font color='#7F7E6F'>&#62; Saul Youssef</font>
<font color='#7F7E6F'>&#62; Research Associate Professor</font>
<font color='#7F7E6F'>&#62; Center for Computational Science</font>
<font color='#7F7E6F'>&#62; Boston University</font>
<font color='#7F7E6F'>&#62; 3 Cummington Street</font>
<font color='#7F7E6F'>&#62; Boston, MA 02215</font>
<font color='#7F7E6F'>&#62; youssef@....</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//physics.bu.edu/' target='_blank' rel='nofollow'>http&#58;//physics.bu.edu/</a>~youssef &#60;<a href='http&#58;//physics.bu.edu/' target='_blank' rel='nofollow'>http&#58;//physics.bu.edu/</a>~yousef&#62;</font>
</div><script type='text/javascript'>
        $('#show_662040334').click(function() {
            $('#detail_662040334').slideDown("normal");
            $('#show_662040334').hide();
            $('#hide_662040334').show();
        });
        $('#hide_662040334').click(function() {
            $('#detail_662040334').slideUp();
            $('#hide_662040334').hide();
            $('#show_662040334').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378757349'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T20:09:09+00:00">Sep 9, 2013 08:09 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378757349">&nbsp;</a></div><pre>Hi Brian and Tony,

well, but it doesn&#39;t make any sense that the authentication would fail,
since I get that same error when I try that myself, and I am DEFINITELY
in the grid-mapfile, and when I run a globus-url-copy against
the same machine, which uses the same grid-mapfile, that works
just fine.

So the question remains, how is bestman2 doing its authentication differently
from the gridftp server, such that DOEGrids and DigiCert certificates
are failing to authenticate, but FNAL and CERN certificates are succeeding?

There&#39;s only one grid-mapfile, and everybody&#39;s in it, so there must be
something subtle in the authentication that it refuses to accept
DOEGrids or DigiCert CAs, but where/how/why?

Thanks,

Horst

Brian Bockelman &#60;bbockelm@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi all,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; As a simple reminder&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; SRM-CLIENT&#58;Exception from client=; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;          java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; That&#39;s one way SSL indicates the server dropped your connection!  Not all servers are nice enough to send back an SSL alert (devs rarely test failure cases, right?  Welcome to the grid!).</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; From that message, I would assume that Bockjoo successfully connected to the SRM server and his DN is not authenticated.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Brian</font>
<font color='#7F7E6F'>&#62;</font>
<div id='show_14360099' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_14360099'><font color='#7F7E6F'>&#62; On Sep 9, 2013, at 2&#58;56 PM, Anthony Tiradani &#60;tiradani@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; You say your firewall is pretty open, but people are reporting connectivity issues.  Do you have an institutional firewall in between your server and the rest of the world?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Anthony Tiradani</font>
<font color='#7F7E6F'>&#62; &#62; tiradani@....</font>
<font color='#7F7E6F'>&#62; &#62; +1 630 840 4479</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; On 09/09/2013 02&#58;44 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Hi Saul,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; it&#39;s a clue -- but not a useful one, since we&#39;re not running a gatekeeper</font>
<font color='#7F7E6F'>&#62; &#62;&#62; on tier2-02, but only bestman2 and a gridftp server. The gatekeeper</font>
<font color='#7F7E6F'>&#62; &#62;&#62; is only running on tier2-01. &#58;)</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Saul Youssef &#60;youssef@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;     Here&#39;s a clue&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; youssef@at4&#58;~$</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; youssef@at4&#58;~$ globus-job-run net2.bu.edu/jobmanager-fork /bin/hostname</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; atlas-net2</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; youssef@at4&#58;~$ globus-job-run tier2-02.ochep.ou.edu/jobmanager-fork/bin/hostname</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; GRAM Job submission failed because the connection to the server failed</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; (check host and port) (error code 12)</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; - Saul</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_14360099').click(function() {
            $('#detail_14360099').slideDown("normal");
            $('#show_14360099').hide();
            $('#hide_14360099').show();
        });
        $('#hide_14360099').click(function() {
            $('#detail_14360099').slideUp();
            $('#hide_14360099').hide();
            $('#show_14360099').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378756814'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T20:00:14+00:00">Sep 9, 2013 08:00 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1378756814">&nbsp;</a></div><pre>Hi all,

As a simple reminder&#58;

<font color='#7F7E6F'>&#62;&#62;&#62;&#62; SRM-CLIENT&#58;Exception from client=; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;          java.net.SocketException&#58; Connection reset</font>

That&#39;s one way SSL indicates the server dropped your connection!  Not all servers are nice enough to send back an SSL alert (devs rarely test failure cases, right?  Welcome to the grid!).

From that message, I would assume that Bockjoo successfully connected to the SRM server and his DN is not authenticated.

Brian

On Sep 9, 2013, at 2&#58;56 PM, Anthony Tiradani &#60;tiradani@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; You say your firewall is pretty open, but people are reporting connectivity issues.  Do you have an institutional firewall in between your server and the rest of the world?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Anthony Tiradani</font>
<font color='#7F7E6F'>&#62; tiradani@....</font>
<font color='#7F7E6F'>&#62; +1 630 840 4479</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On 09/09/2013 02&#58;44 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Saul,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; it&#39;s a clue -- but not a useful one, since we&#39;re not running a gatekeeper</font>
<font color='#7F7E6F'>&#62;&#62; on tier2-02, but only bestman2 and a gridftp server. The gatekeeper</font>
<font color='#7F7E6F'>&#62;&#62; is only running on tier2-01. &#58;)</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; 	Horst</font>
<div id='show_846054275' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_846054275'><font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Saul Youssef &#60;youssef@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;     Here&#39;s a clue&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; youssef@at4&#58;~$</font>
<font color='#7F7E6F'>&#62;&#62;&#62; youssef@at4&#58;~$ globus-job-run net2.bu.edu/jobmanager-fork /bin/hostname</font>
<font color='#7F7E6F'>&#62;&#62;&#62; atlas-net2</font>
<font color='#7F7E6F'>&#62;&#62;&#62; youssef@at4&#58;~$ globus-job-run tier2-02.ochep.ou.edu/jobmanager-fork/bin/hostname</font>
<font color='#7F7E6F'>&#62;&#62;&#62; GRAM Job submission failed because the connection to the server failed</font>
<font color='#7F7E6F'>&#62;&#62;&#62; (check host and port) (error code 12)</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; - Saul</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_846054275').click(function() {
            $('#detail_846054275').slideDown("normal");
            $('#show_846054275').hide();
            $('#hide_846054275').show();
        });
        $('#hide_846054275').click(function() {
            $('#detail_846054275').slideUp();
            $('#hide_846054275').hide();
            $('#show_846054275').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378756633'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T19:57:13+00:00">Sep 9, 2013 07:57 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1378756633">&nbsp;</a></div><pre>Hi Horst,

You say your firewall is pretty open, but people are reporting
connectivity issues.  Do you have an institutional firewall in between
your server and the rest of the world?

Thanks,

Anthony Tiradani
tiradani@....
+1 630 840 4479

On 09/09/2013 02&#58;44 PM, Horst Severini wrote&#58;
<font color='#7F7E6F'>&#62; Hi Saul,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; it&#39;s a clue -- but not a useful one, since we&#39;re not running a gatekeeper</font>
<font color='#7F7E6F'>&#62; on tier2-02, but only bestman2 and a gridftp server. The gatekeeper</font>
<font color='#7F7E6F'>&#62; is only running on tier2-01. &#58;)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Saul Youssef &#60;youssef@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;      Here&#39;s a clue&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; youssef@at4&#58;~$</font>
<font color='#7F7E6F'>&#62;&#62; youssef@at4&#58;~$ globus-job-run net2.bu.edu/jobmanager-fork /bin/hostname</font>
<font color='#7F7E6F'>&#62;&#62; atlas-net2</font>
<font color='#7F7E6F'>&#62;&#62; youssef@at4&#58;~$ globus-job-run tier2-02.ochep.ou.edu/jobmanager-fork/bin/hostname</font>
<font color='#7F7E6F'>&#62;&#62; GRAM Job submission failed because the connection to the server failed</font>
<font color='#7F7E6F'>&#62;&#62; (check host and port) (error code 12)</font>
<div id='show_1933176094' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1933176094'><font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; - Saul</font>
</div><script type='text/javascript'>
        $('#show_1933176094').click(function() {
            $('#detail_1933176094').slideDown("normal");
            $('#show_1933176094').hide();
            $('#hide_1933176094').show();
        });
        $('#hide_1933176094').click(function() {
            $('#detail_1933176094').slideUp();
            $('#hide_1933176094').hide();
            $('#show_1933176094').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378756091'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T19:48:11+00:00">Sep 9, 2013 07:48 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378756091">&nbsp;</a></div><pre>Hi Saul,

it&#39;s a clue -- but not a useful one, since we&#39;re not running a gatekeeper
on tier2-02, but only bestman2 and a gridftp server. The gatekeeper
is only running on tier2-01. &#58;)

Thanks,

Horst

Saul Youssef &#60;youssef@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;     Here&#39;s a clue&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; youssef@at4&#58;~$</font>
<font color='#7F7E6F'>&#62; youssef@at4&#58;~$ globus-job-run net2.bu.edu/jobmanager-fork /bin/hostname</font>
<font color='#7F7E6F'>&#62; atlas-net2</font>
<font color='#7F7E6F'>&#62; youssef@at4&#58;~$ globus-job-run tier2-02.ochep.ou.edu/jobmanager-fork/bin/hostname</font>
<font color='#7F7E6F'>&#62; GRAM Job submission failed because the connection to the server failed</font>
<font color='#7F7E6F'>&#62; (check host and port) (error code 12)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; - Saul</font></pre></div><div class='update_description'><i onclick="document.location='16982#1378755909'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T19:45:09+00:00">Sep 9, 2013 07:45 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378755909">&nbsp;</a></div><pre>Hi Bockjoo,

hmm, I don&#39;t know too much about this, but one thing that might
have something to do with our problem is that in our ps output,
we don&#39;t see the

axis.socketSecureFactory=org.glite.security.trustmanager.axis.AXISSocketFactory

here. Or is this only invoked if you&#39;re using GUMS, which we&#39;re not right now,
since we first need to get the simple authentication working?

Is there any way that there might be subtle differences between 32-bit RHEL5
and 64-bit RHEL6, since this same version is working fine on OUHEP_ITB?

Thanks,

Horst

Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; I have much longer options provided during the start&#58;</font>
<font color='#7F7E6F'>&#62; root     21221  2.1  2.9 1677036 978660 ?      Sl   Aug26 430&#58;06</font>
<font color='#7F7E6F'>&#62; /usr/java/latest/bin/java -server -Xmx1024m</font>
<font color='#7F7E6F'>&#62; -XX&#58;MaxDirectMemorySize=1024m -DConnectorAcceptQueueSize=512</font>
<font color='#7F7E6F'>&#62; -DAcceptorSize=16 -DX509_CERT_DIR=/etc/grid-security/certificates</font>
<font color='#7F7E6F'>&#62; -DCADIR=/etc/grid-security/certificates</font>
<font color='#7F7E6F'>&#62; -Daxis.socketSecureFactory=org.glite.security.trustmanager.axis.AXISSocketFactory</font>
<font color='#7F7E6F'>&#62; -DsslCAFiles=/etc/grid-security/certificates/*.0</font>
<font color='#7F7E6F'>&#62; -DsslCertfile=/etc/grid-security/hostcert.pem</font>
<font color='#7F7E6F'>&#62; -DsslKey=/etc/grid-security/hostkey.pem</font>
<font color='#7F7E6F'>&#62; -DJettyConfiguration=/etc/bestman2/conf/WEB-INF/jetty.xml</font>
<font color='#7F7E6F'>&#62; -DJettyDescriptor=/etc/bestman2/conf/WEB-INF/web.xml</font>
<font color='#7F7E6F'>&#62; -DJettyResource=/etc/bestman2/conf/</font>
<font color='#7F7E6F'>&#62; -Dorg.eclipse.jetty.util.log.IGNORE=true gov.lbl.srm.server.Server</font>
<div id='show_1070931033' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1070931033'><font color='#7F7E6F'>&#62; /etc/bestman2/conf/bestman2.rc</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Probably, it&#39;s because of different bestman2 version.</font>
<font color='#7F7E6F'>&#62; ( bestman2-server-2.3.0-9.osg.el5.noarch )</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; On 9/9/13 3&#58;14 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; hmm, &#39;lsof -p &#60;bestman process id&#62;&#39; shows a lot of stuff,</font>
<font color='#7F7E6F'>&#62; &#62; but nothing out of the ordinary. And I&#39;m sure there&#39;s only one bestman2</font>
<font color='#7F7E6F'>&#62; &#62; running, and no tomcat&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; ----</font>
<font color='#7F7E6F'>&#62; &#62; [root@tier2-02 ~]# ps auxw | egrep &#39;bestman|tomcat&#39;</font>
<font color='#7F7E6F'>&#62; &#62; root      7462  0.0  0.0 103076   864 pts/0    S+   14&#58;13   0&#58;00 egrep bestman|tomcat</font>
<font color='#7F7E6F'>&#62; &#62; bestman  11980 10.8  3.1 4034212 513848 ?      Sl   11&#58;35  17&#58;09 /etc/alternatives/java_sdk/bin/java -server -Xmx1024m -XX&#58;MaxDirectMemorySize=1024m -DX509_CERT_DIR=/etc/grid-security/certificates -DCADIR=/etc/grid-security/certificates -DJettyConfiguration=/etc/bestman2/conf/WEB-INF/jetty.xml -DJettyDescriptor=/etc/bestman2/conf/WEB-INF/web.xml -DJettyResource=/etc/bestman2/conf/ -Dorg.eclipse.jetty.util.log.IGNORE=true gov.lbl.srm.server.Server /etc/bestman2/conf/bestman2.rc</font>
<font color='#7F7E6F'>&#62; &#62; ----</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks for all the suggestions!</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Can you find any clue from lsof -p &#60;bestman process id&#62;?</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Are you sure you are running only one instance of bestman|tomcat?</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Sorry if you have already checked,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; &#62;&#62; On 9/9/13 1&#58;55 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; we&#39;re using ROCKS6, and as far as I can tell, the firewall is pretty open</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; for now, until we&#39;ve got all this straightened out.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Since Neha can connect just fine, I don&#39;t think it&#39;s network related.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; I used DigiCert certificate.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; It&#39;s complaining about the socket.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Do you have a firewall?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; On 9/9/13 1&#58;43 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; Thanks Bockjoo;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; what certificate do you use? DOEGrids?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; Can someone with a DigiCert certificate please try this as well?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; I get this&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; -bash-3.2$ srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; srm-ping   2.2.1.3.6   Mon Nov 30 09&#58;10&#58;48 PST 2009</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; SRM-Clients and BeStMan Copyright(c) 2007-2009,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Lawrence Berkeley National Laboratory. All rights reserved.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Support at SRM@.... and documents at <a href='http&#58;//datagrid.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//datagrid.lbl.gov/bestman</a></font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; SRM-CLIENT&#58; Connecting to serviceurl</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; SRM-PING&#58; Mon Sep 09 13&#58;37&#58;08 EDT 2013  Calling SrmPing Request...</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; SRM-PING &#58; Exception ; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;             java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; SRM-CLIENT&#58;Exception from client=; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;             java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62; On 9/9/13 1&#58;28 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; just one more piece of information&#58; I tested the gridftp server</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; on tier2-02 (and -03 and -04, which are used by bestman2 as well),</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; and which share the entire certificates and authentication setup</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; with bestman2, and that all works fine, so there&#39;s nothing missing</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; in general which would not support DOEGrids certs or anything like that.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; So why does only Bestman2 seem to have problems with these certs?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; &#62;From looking at the Bestman logs, it seems like the WLCG SAM tests</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; succeed, too, and they presumably use CERN CA certs? Not sure exactly.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; Can someone else with a DOEGrids cert please test this&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; And someone with a DigiCert cert as well, to see what does and does not</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; work exactly?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_1070931033').click(function() {
            $('#detail_1070931033').slideDown("normal");
            $('#show_1070931033').hide();
            $('#hide_1070931033').show();
        });
        $('#hide_1070931033').click(function() {
            $('#detail_1070931033').slideUp();
            $('#hide_1070931033').hide();
            $('#show_1070931033').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378755190'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T19:33:10+00:00">Sep 9, 2013 07:33 PM UTC</time> by <b>Saul Youssef</b><a class="anchor" name="1378755190">&nbsp;</a></div><pre>Hi Horst,

Here&#39;s a clue&#58;

youssef@at4&#58;~$
youssef@at4&#58;~$ globus-job-run net2.bu.edu/jobmanager-fork /bin/hostname
atlas-net2
youssef@at4&#58;~$ globus-job-run tier2-02.ochep.ou.edu/jobmanager-fork/bin/hostname
GRAM Job submission failed because the connection to the server failed
(check host and port) (error code 12)

- Saul</pre></div><div class='update_description'><i onclick="document.location='16982#1378754294'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T19:18:14+00:00">Sep 9, 2013 07:18 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378754294">&nbsp;</a></div><pre>Hi Doug,

hmm, I&#39;m not sure what nmap is checking exactly, but I don&#39;t think
it checks every port. These two are the only two services running --
wait, not true, gridftp is running on 2811, and that&#39;s accessible
from the outside as well.

Looking at iptables, I think only 1-1023 are blocked, with the exception
of 22 of course.

Thanks,

Horst

Doug Johnson &#60;drjohn@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; This is what I get when I scan for open ports on</font>
<font color='#7F7E6F'>&#62; tier2-02.ochep.ou.edu. It looks like you have ports 22 and 8443</font>
<font color='#7F7E6F'>&#62; open. This does not look like a wide open system.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Hope all is well,</font>
<font color='#7F7E6F'>&#62; 	doug</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; {root}&#62; nmap -v tier2-02.ochep.ou.edu</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Starting Nmap 4.11 ( <a href='http&#58;//www.insecure.org/nmap/' target='_blank' rel='nofollow'>http&#58;//www.insecure.org/nmap/</a> ) at 2013-09-09 12&#58;11 MDT</font>
<font color='#7F7E6F'>&#62; DNS resolution of 1 IPs took 0.55s.</font>
<font color='#7F7E6F'>&#62; Initiating SYN Stealth Scan against tier2-02.ochep.ou.edu (129.15.40.251) [1680 ports] at 12&#58;11</font>
<font color='#7F7E6F'>&#62; Discovered open port 22/tcp on 129.15.40.251</font>
<font color='#7F7E6F'>&#62; Increasing send delay for 129.15.40.251 from 0 to 5 due to max_successful_tryno increase to 4</font>
<font color='#7F7E6F'>&#62; Increasing send delay for 129.15.40.251 from 5 to 10 due to max_successful_tryno increase to 5</font>
<font color='#7F7E6F'>&#62; Increasing send delay for 129.15.40.251 from 10 to 20 due to max_successful_tryno increase to 6</font>
<div id='show_1406050601' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1406050601'><font color='#7F7E6F'>&#62; Increasing send delay for 129.15.40.251 from 20 to 40 due to max_successful_tryno increase to 7</font>
<font color='#7F7E6F'>&#62; Increasing send delay for 129.15.40.251 from 40 to 80 due to max_successful_tryno increase to 8</font>
<font color='#7F7E6F'>&#62; Increasing send delay for 129.15.40.251 from 80 to 160 due to max_successful_tryno increase to 9</font>
<font color='#7F7E6F'>&#62; Increasing send delay for 129.15.40.251 from 160 to 320 due to max_successful_tryno increase to 10</font>
<font color='#7F7E6F'>&#62; Warning&#58; Giving up on port early because retransmission cap hit.</font>
<font color='#7F7E6F'>&#62; SYN Stealth Scan Timing&#58; About 5.78% done; ETC&#58; 12&#58;20 (0&#58;08&#58;11 remaining)</font>
<font color='#7F7E6F'>&#62; Increasing send delay for 129.15.40.251 from 320 to 640 due to 11 out of 14 dropped probes since last increase.</font>
<font color='#7F7E6F'>&#62; SYN Stealth Scan Timing&#58; About 38.88% done; ETC&#58; 12&#58;33 (0&#58;13&#58;41 remaining)</font>
<font color='#7F7E6F'>&#62; Discovered open port 8443/tcp on 129.15.40.251</font>
<font color='#7F7E6F'>&#62; The SYN Stealth Scan took 1414.20s to scan 1680 total ports.</font>
<font color='#7F7E6F'>&#62; Host tier2-02.ochep.ou.edu (129.15.40.251) appears to be up ... good.</font>
<font color='#7F7E6F'>&#62; Interesting ports on tier2-02.ochep.ou.edu (129.15.40.251)&#58;</font>
<font color='#7F7E6F'>&#62; Not shown&#58; 1038 filtered ports, 640 closed ports</font>
<font color='#7F7E6F'>&#62; PORT     STATE SERVICE</font>
<font color='#7F7E6F'>&#62; 22/tcp   open  ssh</font>
<font color='#7F7E6F'>&#62; 8443/tcp open  https-alt</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Nmap finished&#58; 1 IP address (1 host up) scanned in 1414.927 seconds</font>
<font color='#7F7E6F'>&#62;                Raw packets sent&#58; 2546 (112.004KB) | Rcvd&#58; 1947 (124.356KB)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; we&#39;re using ROCKS6, and as far as I can tell, the firewall is pretty open</font>
<font color='#7F7E6F'>&#62; &#62; for now, until we&#39;ve got all this straightened out.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Since Neha can connect just fine, I don&#39;t think it&#39;s network related.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62; &#62; I used DigiCert certificate.</font>
<font color='#7F7E6F'>&#62; &#62; &#62; It&#39;s complaining about the socket.</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Do you have a firewall?</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; &#62; &#62; On 9/9/13 1&#58;43 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62; Thanks Bockjoo;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62; what certificate do you use? DOEGrids?</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62; Can someone with a DigiCert certificate please try this as well?</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62; I get this&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62; -bash-3.2$ srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62; srm-ping   2.2.1.3.6   Mon Nov 30 09&#58;10&#58;48 PST 2009</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62; SRM-Clients and BeStMan Copyright(c) 2007-2009,</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62; Lawrence Berkeley National Laboratory. All rights reserved.</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62; Support at SRM@.... and documents at <a href='http&#58;//datagrid.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//datagrid.lbl.gov/bestman</a></font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62; SRM-CLIENT&#58; Connecting to serviceurl</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62; httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62; SRM-PING&#58; Mon Sep 09 13&#58;37&#58;08 EDT 2013  Calling SrmPing Request...</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62; SRM-PING &#58; Exception ; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;           java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62; SRM-CLIENT&#58;Exception from client=; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;           java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62; On 9/9/13 1&#58;28 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62; just one more piece of information&#58; I tested the gridftp server</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62; on tier2-02 (and -03 and -04, which are used by bestman2 as well),</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62; and which share the entire certificates and authentication setup</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62; with bestman2, and that all works fine, so there&#39;s nothing missing</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62; in general which would not support DOEGrids certs or anything like that.</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62; So why does only Bestman2 seem to have problems with these certs?</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62; &#62;From looking at the Bestman logs, it seems like the WLCG SAM tests</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62; succeed, too, and they presumably use CERN CA certs? Not sure exactly.</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62; Can someone else with a DOEGrids cert please test this&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62; srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62; And someone with a DigiCert cert as well, to see what does and does not</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62; work exactly?</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ----------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62;    Doug Johnson                    email&#58; drjohn@....</font>
<font color='#7F7E6F'>&#62;    B390, Duane Physics             (303)-492-4506 Office</font>
<font color='#7F7E6F'>&#62;    Boulder, CO 80309               (303)-492-5119 FAX</font>
<font color='#7F7E6F'>&#62;                                    <a href='http&#58;//www.aaccchildren.org' target='_blank' rel='nofollow'>http&#58;//www.aaccchildren.org</a></font>
<font color='#7F7E6F'>&#62;    No one likes or dislikes zeros</font>
<font color='#7F7E6F'>&#62; ----------------------------------------------------------------------------</font>
</div><script type='text/javascript'>
        $('#show_1406050601').click(function() {
            $('#detail_1406050601').slideDown("normal");
            $('#show_1406050601').hide();
            $('#hide_1406050601').show();
        });
        $('#hide_1406050601').click(function() {
            $('#detail_1406050601').slideUp();
            $('#hide_1406050601').hide();
            $('#show_1406050601').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378753750'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T19:09:10+00:00">Sep 9, 2013 07:09 PM UTC</time> by <b>doug johnson</b><a class="anchor" name="1378753750">&nbsp;</a></div><pre>Hi Horst,

This is what I get when I scan for open ports on
tier2-02.ochep.ou.edu. It looks like you have ports 22 and 8443
open. This does not look like a wide open system.

Hope all is well,
doug

{root}&#62; nmap -v tier2-02.ochep.ou.edu

Starting Nmap 4.11 ( <a href='http&#58;//www.insecure.org/nmap/' target='_blank' rel='nofollow'>http&#58;//www.insecure.org/nmap/</a> ) at 2013-09-09 12&#58;11 MDT
DNS resolution of 1 IPs took 0.55s.
Initiating SYN Stealth Scan against tier2-02.ochep.ou.edu (129.15.40.251) [1680 ports] at 12&#58;11
Discovered open port 22/tcp on 129.15.40.251
Increasing send delay for 129.15.40.251 from 0 to 5 due to max_successful_tryno increase to 4
Increasing send delay for 129.15.40.251 from 5 to 10 due to max_successful_tryno increase to 5
Increasing send delay for 129.15.40.251 from 10 to 20 due to max_successful_tryno increase to 6
Increasing send delay for 129.15.40.251 from 20 to 40 due to max_successful_tryno increase to 7
Increasing send delay for 129.15.40.251 from 40 to 80 due to max_successful_tryno increase to 8
Increasing send delay for 129.15.40.251 from 80 to 160 due to max_successful_tryno increase to 9
Increasing send delay for 129.15.40.251 from 160 to 320 due to max_successful_tryno increase to 10
Warning&#58; Giving up on port early because retransmission cap hit.
SYN Stealth Scan Timing&#58; About 5.78% done; ETC&#58; 12&#58;20 (0&#58;08&#58;11 remaining)
Increasing send delay for 129.15.40.251 from 320 to 640 due to 11 out of 14 dropped probes since last increase.
SYN Stealth Scan Timing&#58; About 38.88% done; ETC&#58; 12&#58;33 (0&#58;13&#58;41 remaining)
Discovered open port 8443/tcp on 129.15.40.251
The SYN Stealth Scan took 1414.20s to scan 1680 total ports.
Host tier2-02.ochep.ou.edu (129.15.40.251) appears to be up ... good.
Interesting ports on tier2-02.ochep.ou.edu (129.15.40.251)&#58;
Not shown&#58; 1038 filtered ports, 640 closed ports
PORT     STATE SERVICE
22/tcp   open  ssh
8443/tcp open  https-alt

<div id='show_1189583493' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1189583493'>Nmap finished&#58; 1 IP address (1 host up) scanned in 1414.927 seconds
Raw packets sent&#58; 2546 (112.004KB) | Rcvd&#58; 1947 (124.356KB)

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Hi Bockjoo,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; we&#39;re using ROCKS6, and as far as I can tell, the firewall is pretty open</font>
<font color='#7F7E6F'>&#62; for now, until we&#39;ve got all this straightened out.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Since Neha can connect just fine, I don&#39;t think it&#39;s network related.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62; I used DigiCert certificate.</font>
<font color='#7F7E6F'>&#62; &#62; It&#39;s complaining about the socket.</font>
<font color='#7F7E6F'>&#62; &#62; Do you have a firewall?</font>
<font color='#7F7E6F'>&#62; &#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; &#62; On 9/9/13 1&#58;43 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Thanks Bockjoo;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; what certificate do you use? DOEGrids?</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Can someone with a DigiCert certificate please try this as well?</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; I get this&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; -bash-3.2$ srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; srm-ping   2.2.1.3.6   Mon Nov 30 09&#58;10&#58;48 PST 2009</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; SRM-Clients and BeStMan Copyright(c) 2007-2009,</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; Lawrence Berkeley National Laboratory. All rights reserved.</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; Support at SRM@.... and documents at <a href='http&#58;//datagrid.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//datagrid.lbl.gov/bestman</a></font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; SRM-CLIENT&#58; Connecting to serviceurl</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; SRM-PING&#58; Mon Sep 09 13&#58;37&#58;08 EDT 2013  Calling SrmPing Request...</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; SRM-PING &#58; Exception ; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;           java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; SRM-CLIENT&#58;Exception from client=; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;           java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62; On 9/9/13 1&#58;28 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; just one more piece of information&#58; I tested the gridftp server</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; on tier2-02 (and -03 and -04, which are used by bestman2 as well),</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; and which share the entire certificates and authentication setup</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; with bestman2, and that all works fine, so there&#39;s nothing missing</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; in general which would not support DOEGrids certs or anything like that.</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; So why does only Bestman2 seem to have problems with these certs?</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; &#62;From looking at the Bestman logs, it seems like the WLCG SAM tests</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; succeed, too, and they presumably use CERN CA certs? Not sure exactly.</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; Can someone else with a DOEGrids cert please test this&#58;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; And someone with a DigiCert cert as well, to see what does and does not</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; work exactly?</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62;</font>

----------------------------------------------------------------------------
Doug Johnson                    email&#58; drjohn@....
B390, Duane Physics             (303)-492-4506 Office
Boulder, CO 80309               (303)-492-5119 FAX
<a href='http&#58;//www.aaccchildren.org' target='_blank' rel='nofollow'>http&#58;//www.aaccchildren.org</a>
No one likes or dislikes zeros
----------------------------------------------------------------------------
</div><script type='text/javascript'>
        $('#show_1189583493').click(function() {
            $('#detail_1189583493').slideDown("normal");
            $('#show_1189583493').hide();
            $('#hide_1189583493').show();
        });
        $('#hide_1189583493').click(function() {
            $('#detail_1189583493').slideUp();
            $('#hide_1189583493').hide();
            $('#show_1189583493').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378753038'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T18:57:18+00:00">Sep 9, 2013 06:57 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378753038">&nbsp;</a></div><pre>Hi Alan,

yeah, we&#39;re not supporting uscms on this cluster yet, since we&#39;re still
in the process of setting things up. But the gridftp server is working fine,
so that&#39;s not the issue. There&#39;s something funky in the way Bestman2
does the authentication which is currently not working for DOEGrids
and DigiCert certs. Hopefully we can track this down soon,
since we&#39;re supposed to be done with our upgrade by tonight!

Thanks,

Horst

&#34;Sill, Alan&#34; &#60;alan.sill@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I tried just an uberftp connection to your SE, but got a &#34;user not mapped&#34; message&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [asill@hugin ~]$ uberftp tier2-02.ochep.ou.edu</font>
<font color='#7F7E6F'>&#62; 220 tier2-02.ochep.ou.edu GridFTP Server 6.14 (gcc64, 1342551528-83) [unknown] ready.</font>
<font color='#7F7E6F'>&#62; 530 Login incorrect. &#58; Mapped user &#39;uscms01&#39; is invalid.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The srm-ping failed with my DigiCert cer-based proxy as it did for Bockjoo&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [asill@hugin ~]$ srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; srm-ping   2.2.1.3.19   Wed Feb 23 10&#58;09&#58;34 PST 2011</font>
<font color='#7F7E6F'>&#62; BeStMan and SRM-Clients Copyright(c) 2007-2011,</font>
<font color='#7F7E6F'>&#62; Lawrence Berkeley National Laboratory. All rights reserved.</font>
<font color='#7F7E6F'>&#62; Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a></font>
<font color='#7F7E6F'>&#62; SRM-CLIENT&#58; Connecting to serviceurl httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; SRM-PING&#58; Mon Sep 09 13&#58;51&#58;48 CDT 2013  Calling SrmPing Request...</font>
<font color='#7F7E6F'>&#62; SoapCallThread.Exception=; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62; 	java.net.SocketException&#58; Connection reset</font>
<div id='show_1532693046' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1532693046'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Alan</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Sep 9, 2013, at 12&#58;43 PM, Horst Severini &#60;hs@....&#62;</font>
<font color='#7F7E6F'>&#62;  wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks Bockjoo;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; what certificate do you use? DOEGrids?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Can someone with a DigiCert certificate please try this as well?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; I get this&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; -bash-3.2$ srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; &#62;&#62; srm-ping   2.2.1.3.6   Mon Nov 30 09&#58;10&#58;48 PST 2009</font>
<font color='#7F7E6F'>&#62; &#62;&#62; SRM-Clients and BeStMan Copyright(c) 2007-2009,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Lawrence Berkeley National Laboratory. All rights reserved.</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Support at SRM@.... and documents at <a href='http&#58;//datagrid.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//datagrid.lbl.gov/bestman</a></font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; SRM-CLIENT&#58; Connecting to serviceurl</font>
<font color='#7F7E6F'>&#62; &#62;&#62; httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; SRM-PING&#58; Mon Sep 09 13&#58;37&#58;08 EDT 2013  Calling SrmPing Request...</font>
<font color='#7F7E6F'>&#62; &#62;&#62; SRM-PING &#58; Exception ; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;         java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; SRM-CLIENT&#58;Exception from client=; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;         java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; &#62;&#62; On 9/9/13 1&#58;28 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; just one more piece of information&#58; I tested the gridftp server</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; on tier2-02 (and -03 and -04, which are used by bestman2 as well),</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; and which share the entire certificates and authentication setup</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; with bestman2, and that all works fine, so there&#39;s nothing missing</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; in general which would not support DOEGrids certs or anything like that.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; So why does only Bestman2 seem to have problems with these certs?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; From looking at the Bestman logs, it seems like the WLCG SAM tests</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; succeed, too, and they presumably use CERN CA certs? Not sure exactly.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Can someone else with a DOEGrids cert please test this&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; And someone with a DigiCert cert as well, to see what does and does not</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; work exactly?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_1532693046').click(function() {
            $('#detail_1532693046').slideDown("normal");
            $('#show_1532693046').hide();
            $('#hide_1532693046').show();
        });
        $('#hide_1532693046').click(function() {
            $('#detail_1532693046').slideUp();
            $('#hide_1532693046').hide();
            $('#show_1532693046').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378752852'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T18:54:12+00:00">Sep 9, 2013 06:54 PM UTC</time> by <b>TIGRE</b><a class="anchor" name="1378752852">&nbsp;</a></div><pre>Hi Horst,

I tried just an uberftp connection to your SE, but got a &#34;user not mapped&#34; message&#58;

[asill@hugin ~]$ uberftp tier2-02.ochep.ou.edu
220 tier2-02.ochep.ou.edu GridFTP Server 6.14 (gcc64, 1342551528-83) [unknown] ready.
530 Login incorrect. &#58; Mapped user &#39;uscms01&#39; is invalid.

The srm-ping failed with my DigiCert cer-based proxy as it did for Bockjoo&#58;

[asill@hugin ~]$ srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a>
srm-ping   2.2.1.3.19   Wed Feb 23 10&#58;09&#58;34 PST 2011
BeStMan and SRM-Clients Copyright(c) 2007-2011,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>
SRM-CLIENT&#58; Connecting to serviceurl httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server

SRM-PING&#58; Mon Sep 09 13&#58;51&#58;48 CDT 2013  Calling SrmPing Request...
SoapCallThread.Exception=; nested exception is&#58;
java.net.SocketException&#58; Connection reset

Alan

On Sep 9, 2013, at 12&#58;43 PM, Horst Severini &#60;hs@....&#62;
wrote&#58;

<font color='#7F7E6F'>&#62; Thanks Bockjoo;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; what certificate do you use? DOEGrids?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Can someone with a DigiCert certificate please try this as well?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<div id='show_2097607382' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2097607382'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62; I get this&#58;</font>
<font color='#7F7E6F'>&#62;&#62; -bash-3.2$ srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62;&#62; srm-ping   2.2.1.3.6   Mon Nov 30 09&#58;10&#58;48 PST 2009</font>
<font color='#7F7E6F'>&#62;&#62; SRM-Clients and BeStMan Copyright(c) 2007-2009,</font>
<font color='#7F7E6F'>&#62;&#62; Lawrence Berkeley National Laboratory. All rights reserved.</font>
<font color='#7F7E6F'>&#62;&#62; Support at SRM@.... and documents at <a href='http&#58;//datagrid.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//datagrid.lbl.gov/bestman</a></font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; SRM-CLIENT&#58; Connecting to serviceurl</font>
<font color='#7F7E6F'>&#62;&#62; httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; SRM-PING&#58; Mon Sep 09 13&#58;37&#58;08 EDT 2013  Calling SrmPing Request...</font>
<font color='#7F7E6F'>&#62;&#62; SRM-PING &#58; Exception ; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62;&#62;         java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; SRM-CLIENT&#58;Exception from client=; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62;&#62;         java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62;&#62; On 9/9/13 1&#58;28 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; just one more piece of information&#58; I tested the gridftp server</font>
<font color='#7F7E6F'>&#62;&#62;&#62; on tier2-02 (and -03 and -04, which are used by bestman2 as well),</font>
<font color='#7F7E6F'>&#62;&#62;&#62; and which share the entire certificates and authentication setup</font>
<font color='#7F7E6F'>&#62;&#62;&#62; with bestman2, and that all works fine, so there&#39;s nothing missing</font>
<font color='#7F7E6F'>&#62;&#62;&#62; in general which would not support DOEGrids certs or anything like that.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; So why does only Bestman2 seem to have problems with these certs?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; From looking at the Bestman logs, it seems like the WLCG SAM tests</font>
<font color='#7F7E6F'>&#62;&#62;&#62; succeed, too, and they presumably use CERN CA certs? Not sure exactly.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Can someone else with a DOEGrids cert please test this&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; And someone with a DigiCert cert as well, to see what does and does not</font>
<font color='#7F7E6F'>&#62;&#62;&#62; work exactly?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_2097607382').click(function() {
            $('#detail_2097607382').slideDown("normal");
            $('#show_2097607382').hide();
            $('#hide_2097607382').show();
        });
        $('#hide_2097607382').click(function() {
            $('#detail_2097607382').slideUp();
            $('#hide_2097607382').hide();
            $('#show_2097607382').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378752312'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T18:45:12+00:00">Sep 9, 2013 06:45 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378752312">&nbsp;</a></div><pre>Hi Brian,

okay, I ran osg-system-profiler and put the result here&#58;

<a href='http&#58;//www.nhn.ou.edu/' target='_blank' rel='nofollow'>http&#58;//www.nhn.ou.edu/</a>~hs/tmp/osg-profile.txt

I can&#39;t find anything exciting in it, but I also don&#39;t know
what I&#39;m looking for. &#58;)

Nothing exciting in the verify, either&#58;

----
[root@tier2-02 tmp]# rpm -qa bestman&#92;* --verify
S.5......  c /etc/bestman2/conf/bestman2.rc
S.5......  c /etc/sysconfig/bestman2
S.5......  c /etc/bestman2/conf/bestman2.rc
S.5......  c /etc/sysconfig/bestman2
S.5......  c /etc/bestman2/conf/bestman2.rc
S.5......  c /etc/sysconfig/bestman2
----

Thanks a lot,

Horst

Brian Bockelman &#60;bbockelm@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Can you also do&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; rpm -qa bestman&#92;* --verify</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I see the November 2012 timestamp on my host too -- I guess it must be unrelated?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Can you do the osg-system-profiler?  I&#39;ll poke around the other usual suspects from there...</font>
<font color='#7F7E6F'>&#62;</font>
<div id='show_1796648493' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1796648493'><font color='#7F7E6F'>&#62; Brian</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Sep 9, 2013, at 1&#58;18 PM, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#62; Hi Brian,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; That should be fine.  I figured, since it appears the issue is related</font>
<font color='#7F7E6F'>&#62; &#62;&#62; with the DOEGrids CA, I might as well have you double- (triple?)-check</font>
<font color='#7F7E6F'>&#62; &#62;&#62; that.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Sure thing!</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; My next best guess would be to look in /usr/share/java and</font>
<font color='#7F7E6F'>&#62; &#62;&#62; /usr/share/java/bestman2 for broken symlinks.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Nope, no broken links there ...</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Also, I noticed the following in your bestman2.log&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; BeStMan (Gateway mode)   2.2.2.3.0  Wed Nov  7 16&#58;03&#58;09 CST 2012</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; That seems to correspond to bestman2-2.3.0-5; can you double-check your</font>
<font color='#7F7E6F'>&#62; &#62;&#62; version and try updating (if applicable)?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; I don&#39;t know where that&#39;s coming from , but I just installed this</font>
<font color='#7F7E6F'>&#62; &#62; this weekend from osg-upcoming, and I have all the latest versions&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; ----</font>
<font color='#7F7E6F'>&#62; &#62; [root@tier2-02 ~]# rpm -qa bestman&#92;* | sort</font>
<font color='#7F7E6F'>&#62; &#62; bestman2-client-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; &#62; bestman2-client-libs-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; &#62; bestman2-common-libs-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; &#62; bestman2-server-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; &#62; bestman2-server-dep-libs-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; &#62; bestman2-server-libs-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; &#62; bestman2-tester-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; &#62; bestman2-tester-libs-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; [root@tier2-02 ~]# yum --enablerepo=osg-upcoming update bestman&#92;*</font>
<font color='#7F7E6F'>&#62; &#62; Loaded plugins&#58; dellsysid, downloadonly, priorities, rhnplugin, security</font>
<font color='#7F7E6F'>&#62; &#62; This system is receiving updates from RHN Classic or RHN Satellite.</font>
<font color='#7F7E6F'>&#62; &#62; 13 packages excluded due to repository priority protections</font>
<font color='#7F7E6F'>&#62; &#62; Setting up Update Process</font>
<font color='#7F7E6F'>&#62; &#62; No Packages marked for Update</font>
<font color='#7F7E6F'>&#62; &#62; ----</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; So why would bestman2.log claim something different?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; By the way, I just got myself a DigiCert certificate and tried with that,</font>
<font color='#7F7E6F'>&#62; &#62; and just like Bookjoo, it fails, too. It works against our CE and all</font>
<font color='#7F7E6F'>&#62; &#62; three gridftp servers, so again, there&#39;s nothing wrong with it</font>
<font color='#7F7E6F'>&#62; &#62; in principle.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Where else can we look? This is really mysterious, that it works for</font>
<font color='#7F7E6F'>&#62; &#62; FNAL and CERN certs, but not for DOEGrids and DigiCert!</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; How is Bestman2 doing authentication differently from the way that</font>
<font color='#7F7E6F'>&#62; &#62; the CE and gridftp servers are doing it?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; On Sep 9, 2013, at 12&#58;57 PM, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; Hi Brian,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; actually, we only have osg-ca-certs installed on our gatekeeper,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; tier2-01.ochep.ou.edu, and empty-ca-certs on all other head nodes,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; but we&#39;re rsync&#39;ing the entire /etc/grid-security/certificates/ area</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; over every hour.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; [root@tier2-01 hs]# rpm -q osg-ca-certs</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; osg-ca-certs-1.35-1.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; [root@tier2-01 hs]# rpm -q --verify osg-ca-certs</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; [root@tier2-01 hs]# ssh tier2-02 rpm -qa | grep certs</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; empty-ca-certs-1.0-1.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; That should be all we need, right? Or are we missing something else?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; That should be fine.  I figured, since it appears the issue is related with the DOEGrids CA, I might as well have you double- (triple?)-check that.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; My next best guess would be to look in /usr/share/java and /usr/share/java/bestman2 for broken symlinks.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Also, I noticed the following in your bestman2.log&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; BeStMan (Gateway mode)   2.2.2.3.0  Wed Nov  7 16&#58;03&#58;09 CST 2012</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; That seems to correspond to bestman2-2.3.0-5; can you double-check your version and try updating (if applicable)?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Brian</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_1796648493').click(function() {
            $('#detail_1796648493').slideDown("normal");
            $('#show_1796648493').hide();
            $('#hide_1796648493').show();
        });
        $('#hide_1796648493').click(function() {
            $('#detail_1796648493').slideUp();
            $('#hide_1796648493').hide();
            $('#show_1796648493').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378751232'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T18:27:12+00:00">Sep 9, 2013 06:27 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1378751232">&nbsp;</a></div><pre>Can you also do&#58;

rpm -qa bestman&#92;* --verify

I see the November 2012 timestamp on my host too -- I guess it must be unrelated?

Can you do the osg-system-profiler?  I&#39;ll poke around the other usual suspects from there...

Brian

On Sep 9, 2013, at 1&#58;18 PM, Horst Severini &#60;hs@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Brian,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; That should be fine.  I figured, since it appears the issue is related</font>
<font color='#7F7E6F'>&#62;&#62; with the DOEGrids CA, I might as well have you double- (triple?)-check</font>
<font color='#7F7E6F'>&#62;&#62; that.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Sure thing!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; My next best guess would be to look in /usr/share/java and</font>
<font color='#7F7E6F'>&#62;&#62; /usr/share/java/bestman2 for broken symlinks.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Nope, no broken links there ...</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Also, I noticed the following in your bestman2.log&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; BeStMan (Gateway mode)   2.2.2.3.0  Wed Nov  7 16&#58;03&#58;09 CST 2012</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; That seems to correspond to bestman2-2.3.0-5; can you double-check your</font>
<font color='#7F7E6F'>&#62;&#62; version and try updating (if applicable)?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I don&#39;t know where that&#39;s coming from , but I just installed this</font>
<font color='#7F7E6F'>&#62; this weekend from osg-upcoming, and I have all the latest versions&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<div id='show_1609043683' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1609043683'><font color='#7F7E6F'>&#62; ----</font>
<font color='#7F7E6F'>&#62; [root@tier2-02 ~]# rpm -qa bestman&#92;* | sort</font>
<font color='#7F7E6F'>&#62; bestman2-client-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; bestman2-client-libs-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; bestman2-common-libs-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; bestman2-server-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; bestman2-server-dep-libs-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; bestman2-server-libs-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; bestman2-tester-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; bestman2-tester-libs-2.3.0-14.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [root@tier2-02 ~]# yum --enablerepo=osg-upcoming update bestman&#92;*</font>
<font color='#7F7E6F'>&#62; Loaded plugins&#58; dellsysid, downloadonly, priorities, rhnplugin, security</font>
<font color='#7F7E6F'>&#62; This system is receiving updates from RHN Classic or RHN Satellite.</font>
<font color='#7F7E6F'>&#62; 13 packages excluded due to repository priority protections</font>
<font color='#7F7E6F'>&#62; Setting up Update Process</font>
<font color='#7F7E6F'>&#62; No Packages marked for Update</font>
<font color='#7F7E6F'>&#62; ----</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; So why would bestman2.log claim something different?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; By the way, I just got myself a DigiCert certificate and tried with that,</font>
<font color='#7F7E6F'>&#62; and just like Bookjoo, it fails, too. It works against our CE and all</font>
<font color='#7F7E6F'>&#62; three gridftp servers, so again, there&#39;s nothing wrong with it</font>
<font color='#7F7E6F'>&#62; in principle.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Where else can we look? This is really mysterious, that it works for</font>
<font color='#7F7E6F'>&#62; FNAL and CERN certs, but not for DOEGrids and DigiCert!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; How is Bestman2 doing authentication differently from the way that</font>
<font color='#7F7E6F'>&#62; the CE and gridftp servers are doing it?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; On Sep 9, 2013, at 12&#58;57 PM, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; Hi Brian,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; actually, we only have osg-ca-certs installed on our gatekeeper,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; tier2-01.ochep.ou.edu, and empty-ca-certs on all other head nodes,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; but we&#39;re rsync&#39;ing the entire /etc/grid-security/certificates/ area</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; over every hour.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; [root@tier2-01 hs]# rpm -q osg-ca-certs</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; osg-ca-certs-1.35-1.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; [root@tier2-01 hs]# rpm -q --verify osg-ca-certs</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; [root@tier2-01 hs]# ssh tier2-02 rpm -qa | grep certs</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; empty-ca-certs-1.0-1.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; That should be all we need, right? Or are we missing something else?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; That should be fine.  I figured, since it appears the issue is related with the DOEGrids CA, I might as well have you double- (triple?)-check that.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; My next best guess would be to look in /usr/share/java and /usr/share/java/bestman2 for broken symlinks.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Also, I noticed the following in your bestman2.log&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; BeStMan (Gateway mode)   2.2.2.3.0  Wed Nov  7 16&#58;03&#58;09 CST 2012</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; That seems to correspond to bestman2-2.3.0-5; can you double-check your version and try updating (if applicable)?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Brian</font>
<font color='#7F7E6F'>&#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_1609043683').click(function() {
            $('#detail_1609043683').slideDown("normal");
            $('#show_1609043683').hide();
            $('#hide_1609043683').show();
        });
        $('#hide_1609043683').click(function() {
            $('#detail_1609043683').slideUp();
            $('#hide_1609043683').hide();
            $('#show_1609043683').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378750871'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T18:21:11+00:00">Sep 9, 2013 06:21 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378750871">&nbsp;</a></div><pre>Hi Brian,

<font color='#7F7E6F'>&#62; That should be fine.  I figured, since it appears the issue is related</font>
<font color='#7F7E6F'>&#62; with the DOEGrids CA, I might as well have you double- (triple?)-check</font>
<font color='#7F7E6F'>&#62; that.</font>

Sure thing!

<font color='#7F7E6F'>&#62; My next best guess would be to look in /usr/share/java and</font>
<font color='#7F7E6F'>&#62; /usr/share/java/bestman2 for broken symlinks.</font>

Nope, no broken links there ...

<font color='#7F7E6F'>&#62; Also, I noticed the following in your bestman2.log&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; BeStMan (Gateway mode)   2.2.2.3.0  Wed Nov  7 16&#58;03&#58;09 CST 2012</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; That seems to correspond to bestman2-2.3.0-5; can you double-check your</font>
<font color='#7F7E6F'>&#62; version and try updating (if applicable)?</font>

I don&#39;t know where that&#39;s coming from , but I just installed this
this weekend from osg-upcoming, and I have all the latest versions&#58;

----
[root@tier2-02 ~]# rpm -qa bestman&#92;* | sort
bestman2-client-2.3.0-14.osg.el6.noarch
bestman2-client-libs-2.3.0-14.osg.el6.noarch
bestman2-common-libs-2.3.0-14.osg.el6.noarch
bestman2-server-2.3.0-14.osg.el6.noarch
bestman2-server-dep-libs-2.3.0-14.osg.el6.noarch
bestman2-server-libs-2.3.0-14.osg.el6.noarch
bestman2-tester-2.3.0-14.osg.el6.noarch
bestman2-tester-libs-2.3.0-14.osg.el6.noarch

[root@tier2-02 ~]# yum --enablerepo=osg-upcoming update bestman&#92;*
<div id='show_1831115818' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1831115818'>Loaded plugins&#58; dellsysid, downloadonly, priorities, rhnplugin, security
This system is receiving updates from RHN Classic or RHN Satellite.
13 packages excluded due to repository priority protections
Setting up Update Process
No Packages marked for Update
----

So why would bestman2.log claim something different?

By the way, I just got myself a DigiCert certificate and tried with that,
and just like Bookjoo, it fails, too. It works against our CE and all
three gridftp servers, so again, there&#39;s nothing wrong with it
in principle.

Where else can we look? This is really mysterious, that it works for
FNAL and CERN certs, but not for DOEGrids and DigiCert!

How is Bestman2 doing authentication differently from the way that
the CE and gridftp servers are doing it?

Thanks,

Horst

<font color='#7F7E6F'>&#62; &#62; On Sep 9, 2013, at 12&#58;57 PM, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Hi Brian,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; actually, we only have osg-ca-certs installed on our gatekeeper,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; tier2-01.ochep.ou.edu, and empty-ca-certs on all other head nodes,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; but we&#39;re rsync&#39;ing the entire /etc/grid-security/certificates/ area</font>
<font color='#7F7E6F'>&#62; &#62;&#62; over every hour.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; [root@tier2-01 hs]# rpm -q osg-ca-certs</font>
<font color='#7F7E6F'>&#62; &#62;&#62; osg-ca-certs-1.35-1.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; &#62;&#62; [root@tier2-01 hs]# rpm -q --verify osg-ca-certs</font>
<font color='#7F7E6F'>&#62; &#62;&#62; [root@tier2-01 hs]# ssh tier2-02 rpm -qa | grep certs</font>
<font color='#7F7E6F'>&#62; &#62;&#62; empty-ca-certs-1.0-1.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; That should be all we need, right? Or are we missing something else?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; That should be fine.  I figured, since it appears the issue is related with the DOEGrids CA, I might as well have you double- (triple?)-check that.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; My next best guess would be to look in /usr/share/java and /usr/share/java/bestman2 for broken symlinks.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Also, I noticed the following in your bestman2.log&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; BeStMan (Gateway mode)   2.2.2.3.0  Wed Nov  7 16&#58;03&#58;09 CST 2012</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; That seems to correspond to bestman2-2.3.0-5; can you double-check your version and try updating (if applicable)?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Brian</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_1831115818').click(function() {
            $('#detail_1831115818').slideDown("normal");
            $('#show_1831115818').hide();
            $('#hide_1831115818').show();
        });
        $('#hide_1831115818').click(function() {
            $('#detail_1831115818').slideUp();
            $('#hide_1831115818').hide();
            $('#show_1831115818').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378749969'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T18:06:09+00:00">Sep 9, 2013 06:06 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1378749969">&nbsp;</a></div><pre>On Sep 9, 2013, at 1&#58;01 PM, Brian Bockelman &#60;bbockelm@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; On Sep 9, 2013, at 12&#58;57 PM, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Brian,</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; actually, we only have osg-ca-certs installed on our gatekeeper,</font>
<font color='#7F7E6F'>&#62;&#62; tier2-01.ochep.ou.edu, and empty-ca-certs on all other head nodes,</font>
<font color='#7F7E6F'>&#62;&#62; but we&#39;re rsync&#39;ing the entire /etc/grid-security/certificates/ area</font>
<font color='#7F7E6F'>&#62;&#62; over every hour.</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; [root@tier2-01 hs]# rpm -q osg-ca-certs</font>
<font color='#7F7E6F'>&#62;&#62; osg-ca-certs-1.35-1.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62;&#62; [root@tier2-01 hs]# rpm -q --verify osg-ca-certs</font>
<font color='#7F7E6F'>&#62;&#62; [root@tier2-01 hs]# ssh tier2-02 rpm -qa | grep certs</font>
<font color='#7F7E6F'>&#62;&#62; empty-ca-certs-1.0-1.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; That should be all we need, right? Or are we missing something else?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; That should be fine.  I figured, since it appears the issue is related with the DOEGrids CA, I might as well have you double- (triple?)-check that.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; My next best guess would be to look in /usr/share/java and /usr/share/java/bestman2 for broken symlinks.</font>
<font color='#7F7E6F'>&#62;</font>

Also, I noticed the following in your bestman2.log&#58;

BeStMan (Gateway mode)   2.2.2.3.0  Wed Nov  7 16&#58;03&#58;09 CST 2012

That seems to correspond to bestman2-2.3.0-5; can you double-check your version and try updating (if applicable)?

Brian</pre></div><div class='update_description'><i onclick="document.location='16982#1378749789'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T18:03:09+00:00">Sep 9, 2013 06:03 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1378749789">&nbsp;</a></div><pre>On Sep 9, 2013, at 12&#58;57 PM, Horst Severini &#60;hs@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Brian,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; actually, we only have osg-ca-certs installed on our gatekeeper,</font>
<font color='#7F7E6F'>&#62; tier2-01.ochep.ou.edu, and empty-ca-certs on all other head nodes,</font>
<font color='#7F7E6F'>&#62; but we&#39;re rsync&#39;ing the entire /etc/grid-security/certificates/ area</font>
<font color='#7F7E6F'>&#62; over every hour.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [root@tier2-01 hs]# rpm -q osg-ca-certs</font>
<font color='#7F7E6F'>&#62; osg-ca-certs-1.35-1.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62; [root@tier2-01 hs]# rpm -q --verify osg-ca-certs</font>
<font color='#7F7E6F'>&#62; [root@tier2-01 hs]# ssh tier2-02 rpm -qa | grep certs</font>
<font color='#7F7E6F'>&#62; empty-ca-certs-1.0-1.osg.el6.noarch</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; That should be all we need, right? Or are we missing something else?</font>
<font color='#7F7E6F'>&#62;</font>

That should be fine.  I figured, since it appears the issue is related with the DOEGrids CA, I might as well have you double- (triple?)-check that.

My next best guess would be to look in /usr/share/java and /usr/share/java/bestman2 for broken symlinks.

Brian</pre></div><div class='update_description'><i onclick="document.location='16982#1378749614'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T18:00:14+00:00">Sep 9, 2013 06:00 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378749614">&nbsp;</a></div><pre>Hi Brian,

actually, we only have osg-ca-certs installed on our gatekeeper,
tier2-01.ochep.ou.edu, and empty-ca-certs on all other head nodes,
but we&#39;re rsync&#39;ing the entire /etc/grid-security/certificates/ area
over every hour.

[root@tier2-01 hs]# rpm -q osg-ca-certs
osg-ca-certs-1.35-1.osg.el6.noarch
[root@tier2-01 hs]# rpm -q --verify osg-ca-certs
[root@tier2-01 hs]# ssh tier2-02 rpm -qa | grep certs
empty-ca-certs-1.0-1.osg.el6.noarch

That should be all we need, right? Or are we missing something else?

Thanks,

Horst

Brian Bockelman &#60;bbockelm@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On your problematic server, can you do the following&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; rpm -q osg-ca-certs</font>
<font color='#7F7E6F'>&#62; rpm -q --verify osg-ca-certs</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Additionally, can you please run the osg-system-profiler and upload the results (to wherever convenient)?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Brian</font>
<div id='show_823850883' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_823850883'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Sep 9, 2013, at 12&#58;43 PM, Horst Severini &#60;hs@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks Bockjoo;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; what certificate do you use? DOEGrids?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Can someone with a DigiCert certificate please try this as well?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; I get this&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; -bash-3.2$ srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; &#62;&#62; srm-ping   2.2.1.3.6   Mon Nov 30 09&#58;10&#58;48 PST 2009</font>
<font color='#7F7E6F'>&#62; &#62;&#62; SRM-Clients and BeStMan Copyright(c) 2007-2009,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Lawrence Berkeley National Laboratory. All rights reserved.</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Support at SRM@.... and documents at <a href='http&#58;//datagrid.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//datagrid.lbl.gov/bestman</a></font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; SRM-CLIENT&#58; Connecting to serviceurl</font>
<font color='#7F7E6F'>&#62; &#62;&#62; httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; SRM-PING&#58; Mon Sep 09 13&#58;37&#58;08 EDT 2013  Calling SrmPing Request...</font>
<font color='#7F7E6F'>&#62; &#62;&#62; SRM-PING &#58; Exception ; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;         java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; SRM-CLIENT&#58;Exception from client=; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;         java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; &#62;&#62; On 9/9/13 1&#58;28 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; just one more piece of information&#58; I tested the gridftp server</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; on tier2-02 (and -03 and -04, which are used by bestman2 as well),</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; and which share the entire certificates and authentication setup</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; with bestman2, and that all works fine, so there&#39;s nothing missing</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; in general which would not support DOEGrids certs or anything like that.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; So why does only Bestman2 seem to have problems with these certs?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;&#62; From looking at the Bestman logs, it seems like the WLCG SAM tests</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; succeed, too, and they presumably use CERN CA certs? Not sure exactly.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Can someone else with a DOEGrids cert please test this&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; And someone with a DigiCert cert as well, to see what does and does not</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; work exactly?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_823850883').click(function() {
            $('#detail_823850883').slideDown("normal");
            $('#show_823850883').hide();
            $('#hide_823850883').show();
        });
        $('#hide_823850883').click(function() {
            $('#detail_823850883').slideUp();
            $('#hide_823850883').hide();
            $('#show_823850883').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378749428'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T17:57:08+00:00">Sep 9, 2013 05:57 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378749428">&nbsp;</a></div><pre>Hi Bockjoo,

we&#39;re using ROCKS6, and as far as I can tell, the firewall is pretty open
for now, until we&#39;ve got all this straightened out.

Since Neha can connect just fine, I don&#39;t think it&#39;s network related.

Thanks,

Horst

Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; I used DigiCert certificate.</font>
<font color='#7F7E6F'>&#62; It&#39;s complaining about the socket.</font>
<font color='#7F7E6F'>&#62; Do you have a firewall?</font>
<font color='#7F7E6F'>&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; On 9/9/13 1&#58;43 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks Bockjoo;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; what certificate do you use? DOEGrids?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Can someone with a DigiCert certificate please try this as well?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; I get this&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; -bash-3.2$ srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; &#62;&#62; srm-ping   2.2.1.3.6   Mon Nov 30 09&#58;10&#58;48 PST 2009</font>
<div id='show_1545766972' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1545766972'><font color='#7F7E6F'>&#62; &#62;&#62; SRM-Clients and BeStMan Copyright(c) 2007-2009,</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Lawrence Berkeley National Laboratory. All rights reserved.</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Support at SRM@.... and documents at <a href='http&#58;//datagrid.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//datagrid.lbl.gov/bestman</a></font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; SRM-CLIENT&#58; Connecting to serviceurl</font>
<font color='#7F7E6F'>&#62; &#62;&#62; httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; SRM-PING&#58; Mon Sep 09 13&#58;37&#58;08 EDT 2013  Calling SrmPing Request...</font>
<font color='#7F7E6F'>&#62; &#62;&#62; SRM-PING &#58; Exception ; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;           java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; SRM-CLIENT&#58;Exception from client=; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;           java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; &#62;&#62; On 9/9/13 1&#58;28 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; just one more piece of information&#58; I tested the gridftp server</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; on tier2-02 (and -03 and -04, which are used by bestman2 as well),</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; and which share the entire certificates and authentication setup</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; with bestman2, and that all works fine, so there&#39;s nothing missing</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; in general which would not support DOEGrids certs or anything like that.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; So why does only Bestman2 seem to have problems with these certs?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; &#62;From looking at the Bestman logs, it seems like the WLCG SAM tests</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; succeed, too, and they presumably use CERN CA certs? Not sure exactly.</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Can someone else with a DOEGrids cert please test this&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; And someone with a DigiCert cert as well, to see what does and does not</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; work exactly?</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_1545766972').click(function() {
            $('#detail_1545766972').slideDown("normal");
            $('#show_1545766972').hide();
            $('#hide_1545766972').show();
        });
        $('#hide_1545766972').click(function() {
            $('#detail_1545766972').slideUp();
            $('#hide_1545766972').hide();
            $('#show_1545766972').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378748892'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T17:48:12+00:00">Sep 9, 2013 05:48 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1378748892">&nbsp;</a></div><pre>Hi Horst,

On your problematic server, can you do the following&#58;

rpm -q osg-ca-certs
rpm -q --verify osg-ca-certs

?

Additionally, can you please run the osg-system-profiler and upload the results (to wherever convenient)?

Thanks!

Brian

On Sep 9, 2013, at 12&#58;43 PM, Horst Severini &#60;hs@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Thanks Bockjoo;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; what certificate do you use? DOEGrids?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Can someone with a DigiCert certificate please try this as well?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62; I get this&#58;</font>
<font color='#7F7E6F'>&#62;&#62; -bash-3.2$ srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62;&#62; srm-ping   2.2.1.3.6   Mon Nov 30 09&#58;10&#58;48 PST 2009</font>
<font color='#7F7E6F'>&#62;&#62; SRM-Clients and BeStMan Copyright(c) 2007-2009,</font>
<font color='#7F7E6F'>&#62;&#62; Lawrence Berkeley National Laboratory. All rights reserved.</font>
<div id='show_744332987' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_744332987'><font color='#7F7E6F'>&#62;&#62; Support at SRM@.... and documents at <a href='http&#58;//datagrid.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//datagrid.lbl.gov/bestman</a></font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; SRM-CLIENT&#58; Connecting to serviceurl</font>
<font color='#7F7E6F'>&#62;&#62; httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; SRM-PING&#58; Mon Sep 09 13&#58;37&#58;08 EDT 2013  Calling SrmPing Request...</font>
<font color='#7F7E6F'>&#62;&#62; SRM-PING &#58; Exception ; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62;&#62;         java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; SRM-CLIENT&#58;Exception from client=; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62;&#62;         java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62;&#62; On 9/9/13 1&#58;28 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; just one more piece of information&#58; I tested the gridftp server</font>
<font color='#7F7E6F'>&#62;&#62;&#62; on tier2-02 (and -03 and -04, which are used by bestman2 as well),</font>
<font color='#7F7E6F'>&#62;&#62;&#62; and which share the entire certificates and authentication setup</font>
<font color='#7F7E6F'>&#62;&#62;&#62; with bestman2, and that all works fine, so there&#39;s nothing missing</font>
<font color='#7F7E6F'>&#62;&#62;&#62; in general which would not support DOEGrids certs or anything like that.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; So why does only Bestman2 seem to have problems with these certs?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;&#62; From looking at the Bestman logs, it seems like the WLCG SAM tests</font>
<font color='#7F7E6F'>&#62;&#62;&#62; succeed, too, and they presumably use CERN CA certs? Not sure exactly.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Can someone else with a DOEGrids cert please test this&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; And someone with a DigiCert cert as well, to see what does and does not</font>
<font color='#7F7E6F'>&#62;&#62;&#62; work exactly?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_744332987').click(function() {
            $('#detail_744332987').slideDown("normal");
            $('#show_744332987').hide();
            $('#hide_744332987').show();
        });
        $('#hide_744332987').click(function() {
            $('#detail_744332987').slideUp();
            $('#hide_744332987').hide();
            $('#show_744332987').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378748889'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T17:48:09+00:00">Sep 9, 2013 05:48 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1378748889">&nbsp;</a></div><pre>Hi Horst,
I used DigiCert certificate.
It&#39;s complaining about the socket.
Do you have a firewall?
Bockjoo
On 9/9/13 1&#58;43 PM, Horst Severini wrote&#58;
<font color='#7F7E6F'>&#62; Thanks Bockjoo;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; what certificate do you use? DOEGrids?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Can someone with a DigiCert certificate please try this as well?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62;&#62; I get this&#58;</font>
<font color='#7F7E6F'>&#62;&#62; -bash-3.2$ srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62;&#62; srm-ping   2.2.1.3.6   Mon Nov 30 09&#58;10&#58;48 PST 2009</font>
<font color='#7F7E6F'>&#62;&#62; SRM-Clients and BeStMan Copyright(c) 2007-2009,</font>
<font color='#7F7E6F'>&#62;&#62; Lawrence Berkeley National Laboratory. All rights reserved.</font>
<font color='#7F7E6F'>&#62;&#62; Support at SRM@.... and documents at <a href='http&#58;//datagrid.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//datagrid.lbl.gov/bestman</a></font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; SRM-CLIENT&#58; Connecting to serviceurl</font>
<font color='#7F7E6F'>&#62;&#62; httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; SRM-PING&#58; Mon Sep 09 13&#58;37&#58;08 EDT 2013  Calling SrmPing Request...</font>
<font color='#7F7E6F'>&#62;&#62; SRM-PING &#58; Exception ; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62;&#62;           java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; SRM-CLIENT&#58;Exception from client=; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62;&#62;           java.net.SocketException&#58; Connection reset</font>
<div id='show_1382234977' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1382234977'><font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62;&#62; On 9/9/13 1&#58;28 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Hi again,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; just one more piece of information&#58; I tested the gridftp server</font>
<font color='#7F7E6F'>&#62;&#62;&#62; on tier2-02 (and -03 and -04, which are used by bestman2 as well),</font>
<font color='#7F7E6F'>&#62;&#62;&#62; and which share the entire certificates and authentication setup</font>
<font color='#7F7E6F'>&#62;&#62;&#62; with bestman2, and that all works fine, so there&#39;s nothing missing</font>
<font color='#7F7E6F'>&#62;&#62;&#62; in general which would not support DOEGrids certs or anything like that.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; So why does only Bestman2 seem to have problems with these certs?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; &#62;From looking at the Bestman logs, it seems like the WLCG SAM tests</font>
<font color='#7F7E6F'>&#62;&#62;&#62; succeed, too, and they presumably use CERN CA certs? Not sure exactly.</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Can someone else with a DOEGrids cert please test this&#58;</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; And someone with a DigiCert cert as well, to see what does and does not</font>
<font color='#7F7E6F'>&#62;&#62;&#62; work exactly?</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
</div><script type='text/javascript'>
        $('#show_1382234977').click(function() {
            $('#detail_1382234977').slideDown("normal");
            $('#show_1382234977').hide();
            $('#hide_1382234977').show();
        });
        $('#hide_1382234977').click(function() {
            $('#detail_1382234977').slideUp();
            $('#hide_1382234977').hide();
            $('#show_1382234977').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378748710'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T17:45:10+00:00">Sep 9, 2013 05:45 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378748710">&nbsp;</a></div><pre>Thanks Bockjoo;

what certificate do you use? DOEGrids?

Can someone with a DigiCert certificate please try this as well?

Thanks,

Horst

Bockjoo Kim &#60;bockjoo@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Horst,</font>
<font color='#7F7E6F'>&#62; I get this&#58;</font>
<font color='#7F7E6F'>&#62; -bash-3.2$ srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; srm-ping   2.2.1.3.6   Mon Nov 30 09&#58;10&#58;48 PST 2009</font>
<font color='#7F7E6F'>&#62; SRM-Clients and BeStMan Copyright(c) 2007-2009,</font>
<font color='#7F7E6F'>&#62; Lawrence Berkeley National Laboratory. All rights reserved.</font>
<font color='#7F7E6F'>&#62; Support at SRM@.... and documents at <a href='http&#58;//datagrid.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//datagrid.lbl.gov/bestman</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; SRM-CLIENT&#58; Connecting to serviceurl</font>
<font color='#7F7E6F'>&#62; httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; SRM-PING&#58; Mon Sep 09 13&#58;37&#58;08 EDT 2013  Calling SrmPing Request...</font>
<font color='#7F7E6F'>&#62; SRM-PING &#58; Exception ; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62;          java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; SRM-CLIENT&#58;Exception from client=; nested exception is&#58;</font>
<font color='#7F7E6F'>&#62;          java.net.SocketException&#58; Connection reset</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Bockjoo</font>
<font color='#7F7E6F'>&#62; On 9/9/13 1&#58;28 PM, Horst Severini wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; Hi again,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; just one more piece of information&#58; I tested the gridftp server</font>
<div id='show_146479906' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_146479906'><font color='#7F7E6F'>&#62; &#62; on tier2-02 (and -03 and -04, which are used by bestman2 as well),</font>
<font color='#7F7E6F'>&#62; &#62; and which share the entire certificates and authentication setup</font>
<font color='#7F7E6F'>&#62; &#62; with bestman2, and that all works fine, so there&#39;s nothing missing</font>
<font color='#7F7E6F'>&#62; &#62; in general which would not support DOEGrids certs or anything like that.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; So why does only Bestman2 seem to have problems with these certs?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; &#62;From looking at the Bestman logs, it seems like the WLCG SAM tests</font>
<font color='#7F7E6F'>&#62; &#62; succeed, too, and they presumably use CERN CA certs? Not sure exactly.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Can someone else with a DOEGrids cert please test this&#58;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; And someone with a DigiCert cert as well, to see what does and does not</font>
<font color='#7F7E6F'>&#62; &#62; work exactly?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; 	Horst</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_146479906').click(function() {
            $('#detail_146479906').slideDown("normal");
            $('#show_146479906').hide();
            $('#hide_146479906').show();
        });
        $('#hide_146479906').click(function() {
            $('#detail_146479906').slideUp();
            $('#hide_146479906').hide();
            $('#show_146479906').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378748349'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T17:39:09+00:00">Sep 9, 2013 05:39 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1378748349">&nbsp;</a></div><pre>Hi Horst,
I get this&#58;
-bash-3.2$ srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a>
srm-ping   2.2.1.3.6   Mon Nov 30 09&#58;10&#58;48 PST 2009
SRM-Clients and BeStMan Copyright(c) 2007-2009,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@.... and documents at <a href='http&#58;//datagrid.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//datagrid.lbl.gov/bestman</a>

SRM-CLIENT&#58; Connecting to serviceurl
httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server

SRM-PING&#58; Mon Sep 09 13&#58;37&#58;08 EDT 2013  Calling SrmPing Request...
SRM-PING &#58; Exception ; nested exception is&#58;
java.net.SocketException&#58; Connection reset

SRM-CLIENT&#58;Exception from client=; nested exception is&#58;
java.net.SocketException&#58; Connection reset

Bockjoo
On 9/9/13 1&#58;28 PM, Horst Severini wrote&#58;
<font color='#7F7E6F'>&#62; Hi again,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; just one more piece of information&#58; I tested the gridftp server</font>
<font color='#7F7E6F'>&#62; on tier2-02 (and -03 and -04, which are used by bestman2 as well),</font>
<font color='#7F7E6F'>&#62; and which share the entire certificates and authentication setup</font>
<font color='#7F7E6F'>&#62; with bestman2, and that all works fine, so there&#39;s nothing missing</font>
<font color='#7F7E6F'>&#62; in general which would not support DOEGrids certs or anything like that.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; So why does only Bestman2 seem to have problems with these certs?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#62;From looking at the Bestman logs, it seems like the WLCG SAM tests</font>
<font color='#7F7E6F'>&#62; succeed, too, and they presumably use CERN CA certs? Not sure exactly.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Can someone else with a DOEGrids cert please test this&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<div id='show_1653798131' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1653798131'><font color='#7F7E6F'>&#62; srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; And someone with a DigiCert cert as well, to see what does and does not</font>
<font color='#7F7E6F'>&#62; work exactly?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks a lot,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 	Horst</font>
<font color='#7F7E6F'>&#62;</font>
</div><script type='text/javascript'>
        $('#show_1653798131').click(function() {
            $('#detail_1653798131').slideDown("normal");
            $('#show_1653798131').hide();
            $('#hide_1653798131').show();
        });
        $('#hide_1653798131').click(function() {
            $('#detail_1653798131').slideUp();
            $('#hide_1653798131').hide();
            $('#show_1653798131').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378747811'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T17:30:11+00:00">Sep 9, 2013 05:30 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378747811">&nbsp;</a></div><pre>Hi again,

just one more piece of information&#58; I tested the gridftp server
on tier2-02 (and -03 and -04, which are used by bestman2 as well),
and which share the entire certificates and authentication setup
with bestman2, and that all works fine, so there&#39;s nothing missing
in general which would not support DOEGrids certs or anything like that.

So why does only Bestman2 seem to have problems with these certs?

From looking at the Bestman logs, it seems like the WLCG SAM tests
succeed, too, and they presumably use CERN CA certs? Not sure exactly.

Can someone else with a DOEGrids cert please test this&#58;

srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a>

And someone with a DigiCert cert as well, to see what does and does not
work exactly?

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='16982#1378746908'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T17:15:08+00:00">Sep 9, 2013 05:15 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1378746908">&nbsp;</a></div><pre>Hi all,

I&#39;m adding the discussion between Neha and me here to the ticket&#58;

This is what Neha wrote&#58;

----
Hi Horst
Looking at your srm-ping debug output, you seem to be using an older client. Is there a reason you haven&#39;t upgraded that yet?

srm-ping   2.2.1.3.12  Tue Apr 27 13&#58;13&#58;24 PDT 2010
BeStMan and SRM-Clients Copyright(c) 2007-2010,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@....&#60;mailto&#58;SRM@....&#62; and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>
###########################################
SRM_HOME is /atlas/software/wlcgclient-1.6/srm-client-lbnl
JAVA_HOME is /atlas/software/wlcgclient-1.6/jdk1.6

I tried the same command and it successfully mapped me to local user &#39;cdf&#39;

-bash-3.2$ srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a> -debug
srm-ping   2.2.2.3.0  Wed Nov  7 16&#58;03&#58;09 CST 2012

BeStMan and SRM-Clients Copyright(c) 2007-2012,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@....&#60;mailto&#58;SRM@....&#62; and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>
OSG Support at osg-software@....&#60;mailto&#58;osg-software@....&#62; and
documentation at <a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/</a>

...
...
SRM-PING   #### Output from SRM ####
versionInfo=v2.3.0

Extra information (Key=Value)
<div id='show_364187392' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_364187392'>backend_type=BeStMan
backend_version=2.2.2.3.0
backend_build_date=2013-05-08T20&#58;31&#58;32.000Z
gsiftpTxfServers[0]=<a href='gsiftp&#58;//tier2-02.ochep.ou.edu' target='_blank' rel='nofollow'>gsiftp&#58;//tier2-02.ochep.ou.edu</a>
gsiftpTxfServers[1]=<a href='gsiftp&#58;//tier2-03.ochep.ou.edu' target='_blank' rel='nofollow'>gsiftp&#58;//tier2-03.ochep.ou.edu</a>
gsiftpTxfServers[2]=<a href='gsiftp&#58;//tier2-04.ochep.ou.edu' target='_blank' rel='nofollow'>gsiftp&#58;//tier2-04.ochep.ou.edu</a>
GatewayMode=Enabled
clientDN=/DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Neha Sharma/CN=UID&#58;neha
localIDMapped=cdf
-bash-3.2$
----

and my reply&#58;

Hi Neha,

well, we will upgrade the OUHEP cluster as soon as the OCHEP cluster is done.

But I&#39;m getting the same error when I run from OUHEP_ITB, which is running
the latest version of everything. See below for the output against
tier2-02, which fails, and against osgitb2, which succeeds.

So you&#39;re saying that for you, our Bestman2 is working perfectly fine?
That&#39;s great news!

Could it be that this newest osg-upcoming Bestman no longer accepts
DOEGrids certificates? I&#39;m still using mine, and the RSV cert is also
still one&#58;

<a href='https&#58;//tier2-01.ochep.ou.edu/rsv/' target='_blank' rel='nofollow'>https&#58;//tier2-01.ochep.ou.edu/rsv/</a>

But I&#39;m running the same version on OUHEP_ITB, osgitb2.nhn.ou.edu&#58;

[hs@osgitb2 ~]$ rpm -q bestman2-server
bestman2-server-2.3.0-14.osg.el5

[root@tier2-02 bestman2]# rpm -q bestman2-server
bestman2-server-2.3.0-14.osg.el6.noarch

Could there be a difference between RHEL5/43-bit and RHEL6/64-bit somehow?

Thanks a lot,

Horst

----
[hs@osgitb1 ~]$ srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a>
srm-ping   2.2.2.3.0  Wed Nov  7 16&#58;03&#58;09 CST 2012

BeStMan and SRM-Clients Copyright(c) 2007-2012,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>
OSG Support at osg-software@.... and
documentation at <a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/</a>

SRM-CLIENT&#58; Connecting to serviceurl httpg&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server

SRM-PING&#58; Mon Sep 09 11&#58;49&#58;40 CDT 2013  Calling SrmPing Request...
SoapCallThread.Exception=; nested exception is&#58;
java.net.SocketException&#58; Connection reset
SoapCallThread.Exception=; nested exception is&#58;
java.net.SocketException&#58; Connection reset
SoapCallThread.Exception=; nested exception is&#58;
java.net.SocketException&#58; Connection reset
[hs@osgitb1 ~]$
[hs@osgitb1 ~]$
[hs@osgitb1 ~]$ srm-ping <a href='srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server</a>
srm-ping   2.2.2.3.0  Wed Nov  7 16&#58;03&#58;09 CST 2012

BeStMan and SRM-Clients Copyright(c) 2007-2012,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>
OSG Support at osg-software@.... and
documentation at <a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/</a>

SRM-CLIENT&#58; Connecting to serviceurl httpg&#58;//osgitb2.nhn.ou.edu&#58;8443/srm/v2/server

SRM-PING&#58; Mon Sep 09 11&#58;51&#58;25 CDT 2013  Calling SrmPing Request...
versionInfo=v2.3.0

Extra information (Key=Value)
backend_type=BeStMan
backend_version=2.2.2.3.0
backend_build_date=2013-05-08T14&#58;22&#58;48.000Z
gsiftpTxfServers[0]=<a href='gsiftp&#58;//osgitb1.nhn.ou.edu' target='_blank' rel='nofollow'>gsiftp&#58;//osgitb1.nhn.ou.edu</a>
GatewayMode=Enabled
clientDN=/DC=org/DC=doegrids/OU=People/CN=Horst Severini 926890
localIDMapped=hs
----
</div><script type='text/javascript'>
        $('#show_364187392').click(function() {
            $('#detail_364187392').slideDown("normal");
            $('#show_364187392').hide();
            $('#hide_364187392').show();
        });
        $('#hide_364187392').click(function() {
            $('#detail_364187392').slideUp();
            $('#hide_364187392').hide();
            $('#show_364187392').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16982#1378743218'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T16:13:38+00:00">Sep 9, 2013 04:13 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1378743218">&nbsp;</a></div><pre>Hi again,

I just realized that I should&#39;ve sent this to osg-storage as well, so I&#39;m adding them here.

I forgot to mention that we&#39;re now running 64-bit RHEL6; when I tested the osg-upcoming bestman2 with java 7 in our ITB, that was 32-bit RHEL5. Not sure if this is relevant, but I suppose it&#39;s possible that there&#39;s a problem with 64-bit RHEL6 that didn&#39;t show up with 32-bit RHEL5? Hopefully someone can decypher the cryptic errors below and we can figure out what&#39;s going on here ...

By the way, &#39;osg-configure&#39; still needs to be fixed for RHEL6 as well, since &#39;osg-configure --enabled-services&#39; still reports &#39;tomcat5&#39;, instead of &#39;tomcat6&#39;, what RHEL6 is actually using, which in turn causes &#39;osg-control&#39; to not find &#39;tomcat6&#39; and therefore it can&#39;t enable/disable or start/stop it.

I&#39;m using 1.0.35-1.osg.el6 from the osg repo; maybe this has already been fixed in 1.0.41-1.osg.el6 in osg-testing? I&#39;d be happy to try this, but I&#39;d rather wait for confirmation first.

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='16982#1378743178'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T16:12:58+00:00">Sep 9, 2013 04:12 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1378743178">&nbsp;</a></div><pre>Hi all,

I&#39;m having problems getting the newest bestman2 from osg-upcoming to work on our newly upgraded Tier2 cluster. I&#39;m installing the osg-upcoming version instead of the current osg version since I don&#39;t want to downgrade java from v7 to v6 now and then upgrade everything again next week after osg-upcoming rolls into osg. I have tried this osg-upcoming version on our ITB a while back, and it worked fine, so I don&#39;t think there&#39;s anything wrong with that in principle.

The osg-ce on tier2-01.ochep.ou.edu works fine, as do the gridftp servers on tier2-02, -03, and -04 (all from osg-upcoming). And bestman2 is also installed on tier2-02, so it shares the CA and grid-mapfile infrastructure with the gridftp server, therefore I don&#39;t think there&#39;s any &#39;global&#39; authentication problem on that host, since a gridftp command like this works fine&#58;

globus-url-copy file&#58;/home/hs/tmp/test1 <a href='gsiftp&#58;//tier2-02.ochep.ou.edu/home/hs/tmp/test3' target='_blank' rel='nofollow'>gsiftp&#58;//tier2-02.ochep.ou.edu/home/hs/tmp/test3</a>

/etc/grid-security/grid-mapfile and /etc/grid-security/certificates/ are up to date, and I believe I have bestman2 configured to use all the correct authentication areas properly.

I have attached our /etc/sysconfig/bestman2, /etc/bestman2/conf/bestman2.rc, the output of

srm-ping <a href='srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//tier2-02.ochep.ou.edu&#58;8443/srm/v2/server</a> -debug

and bestman2.log and event.srm.log. If someone has any idea what&#39;s missing, please let me know, since we really want to bring up our cluster again as soon as possible!

By the way, the DEBUG setting in bestman2.rc doesn&#39;t seem to work, since the logging doesn&#39;t seem to change at all. I tried JETTY_DEBUG_ENABLED=no as well, didn&#39;t seem to make a difference. And unfortunately the log output isn&#39;t very helpful (see below for the relevant section of bestman2.log), since there&#39;s no mention of where exactly it&#39;s failing -- or if there is, I don&#39;t see it. Help! &#58;)

Thanks a lot,

Horst

----
54946 [qtp1409789210-56] WARN gov.lbl.srm.server.JettyGSIConnector7 - org.globus.common.ChainedIOException&#58; Authentication failed [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0
major string&#58; General failure, unspecified at GSSAPI level
minor string&#58; None [Caused by&#58; org.ietf.jgss.GSSException, major code&#58; 11, minor code&#58; 0
major string&#58; General failure, unspecified at GSSAPI level
minor string&#58; None [Caused by&#58; General SSLEngine problem]]]</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F16982">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
