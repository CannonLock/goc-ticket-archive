<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[19450] OSG Display mismatch with GratiaWeb summary</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=19450" method="post">
<div class="page-header">
    <h3><span class="muted">19450</span> / OSG Display mismatch with GratiaWeb summary</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Elizabeth Prout</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Elizabeth Prout</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Waiting to test in March</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-03-03</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Scott Teige <span class="muted"> / OSG Operations Infrastructure</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Carl Edquist <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/19450", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/19450?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/19450?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20OSG%20Display%20mismatch%20with%20GratiaWeb%20summary%20ISSUE%3D19450%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='19450#1393884911'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-03T22:15:11+00:00">Mar 3, 2014 10:15 PM UTC</time> by <b>Chander Sehgal</b><a class="anchor" name="1393884911">&nbsp;</a></div><pre>Excellent; thank you for the good work in solving this problem.  Please close this ticket.

Chander</pre></div><div class='update_description'><i onclick="document.location='19450#1393881006'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-03T21:10:06+00:00">Mar 3, 2014 09:10 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1393881006">&nbsp;</a></div><pre>Since these numbers are well within the 1-2MB that Chander spoke of earlier, I&#39;m closing this ticket.</pre></div><div class='update_description'><i onclick="document.location='19450#1393880230'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-03-03T20:57:10+00:00">Mar 3, 2014 08:57 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1393880230">&nbsp;</a></div><pre>Now that we are in March, I see 693.4M on <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/</a>  and <a href='http&#58;//display.grid.iu.edu/' target='_blank' rel='nofollow'>http&#58;//display.grid.iu.edu/</a> .  Also, 693.2M on <a href='http&#58;//hcc-gratiaweb-test.unl.edu&#58;8100/gratia/' target='_blank' rel='nofollow'>http&#58;//hcc-gratiaweb-test.unl.edu&#58;8100/gratia/</a> .

So, they&#39;re all pretty close.</pre></div><div class='update_description'><i onclick="document.location='19450#1393427253'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-26T15:07:33+00:00">Feb 26, 2014 03:07 PM UTC</time><a class="anchor" name="1393427253">&nbsp;</a></div><pre>You may also want to check against&#58;

<a href='http&#58;//hcc-gratiaweb-test.unl.edu&#58;8100/gratia/' target='_blank' rel='nofollow'>http&#58;//hcc-gratiaweb-test.unl.edu&#58;8100/gratia/</a>

as this site contains the next release of the WLCG pages; both (Overview) and (Detail).

Best Regards,
Brad Hurst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=William B Hurst 1156</pre></div><div class='update_description'><i onclick="document.location='19450#1393426573'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-26T14:56:13+00:00">Feb 26, 2014 02:56 PM UTC</time> by <b>Chander Sehgal</b><a class="anchor" name="1393426573">&nbsp;</a></div><pre>I have every reason to believe it is fixed but I would like to wait till March 1 before we close it.

On March 1 or shortly thereafter, we need to compare the 12 month results from

<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/</a>  and <a href='http&#58;//display.grid.iu.edu/' target='_blank' rel='nofollow'>http&#58;//display.grid.iu.edu/</a>

If they match (within 1-2M) then we can close this ticket.

Thanks,

Chander</pre></div><div class='update_description'><i onclick="document.location='19450#1393425817'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-26T14:43:37+00:00">Feb 26, 2014 02:43 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1393425817">&nbsp;</a></div><pre>The new OSG Display release is in production, as of yesterday. Is it good now? Can we close this ticket?</pre></div><div class='update_description'><i onclick="document.location='19450#1392913011'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-20T16:16:51+00:00">Feb 20, 2014 04:16 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1392913011">&nbsp;</a></div><pre>Soichi&#58; I have asked around, and the Software really lacks sufficient experience with PHP, web development, and web UI testing to be effective here. I think this code should stay with you for now. If that is a burden, you should bring it up with Rob or whomever.

Anyway, back to the point of this ticket&#58; The new OSG Display code is in the ITB, viewable now at &#60;<a href='http&#58;//display-itb.grid.iu.edu&#62' target='_blank' rel='nofollow'>http&#58;//display-itb.grid.iu.edu&#62</a>;, seems to work correctly, and will become the production release next Tuesday unless new bugs are found.</pre></div><div class='update_description'><i onclick="document.location='19450#1392832824'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-19T18:00:24+00:00">Feb 19, 2014 06:00 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1392832824">&nbsp;</a></div><pre>It&#39;s a very simple php application that uses twitter bootstrap. It needs to be tested on all major platforms / browsers (and especially on those large LCD monitors that this application is most often displayed on). Anyone who could maintain GratiaWeb should be able to maintain it (although it&#39;s written in PHP.. shouldn&#39;t be too hard to rewrite it in python, or whatever)</pre></div><div class='update_description'><i onclick="document.location='19450#1392832128'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-19T17:48:48+00:00">Feb 19, 2014 05:48 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1392832128">&nbsp;</a></div><pre>Thanks for the clear description, Soichi.

As for taking ownership, I am not sure if “interested” is the right word (or measure). We are willing to take it, especially if abandoned (which it is not). But maybe you should tell us what technical platform the UI is built in, to see if we have expertise here. If not, I would rather it stay with you, simply because you know it.</pre></div><div class='update_description'><i onclick="document.location='19450#1392831702'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-19T17:41:42+00:00">Feb 19, 2014 05:41 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1392831702">&nbsp;</a></div><pre>I&#39;ve transferred ownership of osg_display the &#34;web part&#34; to github/opensciencegrid.

When Brian B. was asked by Miron to create the OSG display, he asked me to create the web UI part of this application while he worked on a script that will query gratia and generate some graphs. The UI part became the current github/osg-display, and the python script that Brian wrote became the osg_display RPM.

Just like any other GOC hosted services; GOC Ticket, MyOSG, OIM, etc.. OSG Display UI is just part of such application is hosted & maintained at GOC. I will be happy if software team could take the ownership of github/osg-display UI, and make it part of osg_display RPM and maintain it. If we do, OSG display becomes the same model as GratiaWeb, meaning, GOC will only *host* the instance but not maintain it. Are you interested?</pre></div><div class='update_description'><i onclick="document.location='19450#1392829981'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-19T17:13:01+00:00">Feb 19, 2014 05:13 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1392829981">&nbsp;</a></div><pre>Interesting. Can someone briefly summarize the distinction between osg-display in our software/ area and the “web part” in Soichi’s github? If so, I recommend adding a sentence or two about the organization to our component page.</pre></div><div class='update_description'><i onclick="document.location='19450#1392829364'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-19T17:02:44+00:00">Feb 19, 2014 05:02 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1392829364">&nbsp;</a></div><pre>I will fix it for the next-next release.</pre></div><div class='update_description'><i onclick="document.location='19450#1392828402'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-19T16:46:42+00:00">Feb 19, 2014 04:46 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1392828402">&nbsp;</a></div><pre>I think the &#34;12 Month&#34;, etc, labels come from the web part (<a href='https&#58;//github.com/soichih/osg-display' target='_blank' rel='nofollow'>https&#58;//github.com/soichih/osg-display</a>) ... Not sure if there&#39;s a specific reason for the plural / non-plural distinction...</pre></div><div class='update_description'><i onclick="document.location='19450#1392823412'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-19T15:23:32+00:00">Feb 19, 2014 03:23 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1392823412">&nbsp;</a></div><pre>Ah, there it is! Cool, and the hours are close to 680M, as Chander expected. Yay!

This is a separate comment, but does anyone know why the “In the last …” labels go “24 Hours” and “30 Days” (both plural) but then “12 Month” (singular)?</pre></div><div class='update_description'><i onclick="document.location='19450#1392823064'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-19T15:17:44+00:00">Feb 19, 2014 03:17 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1392823064">&nbsp;</a></div><pre>Sorry, I meant <a href='http&#58;//display-itb.grid.iu.edu/' target='_blank' rel='nofollow'>http&#58;//display-itb.grid.iu.edu/</a> I forgot that we *usually* don&#39;t have .opensciencegrid.org aliased to our ITB instances.</pre></div><div class='update_description'><i onclick="document.location='19450#1392822989'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-19T15:16:29+00:00">Feb 19, 2014 03:16 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1392822989">&nbsp;</a></div><pre>Thanks, Carl and Soichi, for dealing with this last-minute push to get the changes in. Very much appreciated!

Is the full URL to the ITB instance &#60;<a href='http&#58;//display-itb.opensciencegrid.org/&#62' target='_blank' rel='nofollow'>http&#58;//display-itb.opensciencegrid.org/&#62</a>;? If so, I cannot get a DNS entry for that hostname here. Am I missing something?</pre></div><div class='update_description'><i onclick="document.location='19450#1392822596'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-19T15:09:56+00:00">Feb 19, 2014 03:09 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1392822596">&nbsp;</a></div><pre>You are in luck. We haven&#39;t shipped our release note yet, so I&#39;ve added item for osg-display update. I have updated display-itb.opensciencegrid.org with 1.0.9-1 for you to test. If everything looks good, I will release the new rpm on production instance on 2/25.</pre></div><div class='update_description'><i onclick="document.location='19450#1392820079'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-19T14:27:59+00:00">Feb 19, 2014 02:27 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1392820079">&nbsp;</a></div><pre>I made the changes discussed here and built a new osg-display-data-1.0.9-1 (available in osg-development), and my tests of it confirmed that it&#39;s working as expected.  (I&#39;ve updated SOFTWARE-1400 with the details)

Soichi, feel free to install it on display-itb if that sounds ok to you.  I know yesterday was the ITB release, but I believe TimC was talking with someone yesterday about the possibility of still getting this in today...

Thanks!
Carl</pre></div><div class='update_description'><i onclick="document.location='19450#1392753495'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-18T19:58:15+00:00">Feb 18, 2014 07:58 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1392753495">&nbsp;</a></div><pre>Thanks Chander, that sounds good.

I have created <a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1400' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1400</a> to track the work for this.

Carl</pre></div><div class='update_description'><i onclick="document.location='19450#1392649054'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-17T14:57:34+00:00">Feb 17, 2014 02:57 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1392649054">&nbsp;</a></div><pre>To be clear&#58; I am not asking for a change! I am just trying to understanding the deep requirements here. If that amounts to “Miron said”, that is fine.

In any case, I did not ask my question very clearly. I meant to ask why we snap to month boundaries instead of reporting the past 365 days, as of the moment when the report is generated. But essentially I have my answer, which is that it was requested to be the way it is (or is supposed to be).</pre></div><div class='update_description'><i onclick="document.location='19450#1392648789'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-17T14:53:09+00:00">Feb 17, 2014 02:53 PM UTC</time> by <b>Chander Sehgal</b><a class="anchor" name="1392648789">&nbsp;</a></div><pre>Doing only the last year would mean that the display would be inaccurate for most of the year; and only be roughly right in early January.  The requirements for this display came from Miron and if you can get this agreement on this, then that will be fine.

The caption says “last 12 months” so I think the plan to have the number be accurate at the end of each month is preferable.

Chander</pre></div><div class='update_description'><i onclick="document.location='19450#1392430443'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-15T02:14:03+00:00">Feb 15, 2014 02:14 AM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1392430443">&nbsp;</a></div><pre>Why not just report the past year? What is the value of clamping to month boundaries?</pre></div><div class='update_description'><i onclick="document.location='19450#1392421088'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-14T23:38:08+00:00">Feb 14, 2014 11:38 PM UTC</time> by <b>Chander Sehgal</b><a class="anchor" name="1392421088">&nbsp;</a></div><pre>Let us do something reasonable and explainable.

If at any point the 12 month number in the Display shows the number at the close of the previous month (e.g. anytime in February the number would be the 12 month total as of Jan 31) that would be reasonable in my view.  And it is a reasonable decision that is easy to explain.

Thanks,

Chander</pre></div><div class='update_description'><i onclick="document.location='19450#1392345971'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-14T02:46:11+00:00">Feb 14, 2014 02:46 AM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1392345971">&nbsp;</a></div><pre>So, it looks like the last value returned (month or otherwise) is getting discarded, regardless of 12 or 13 months&#58;

num_results = int(self.cp.get(&#34;Gratia&#34;, &#34;months&#34;))
count_results = count_results[-num_results-1&#58;-1]
hour_results = hour_results[-num_results-1&#58;-1]

I&#39;d like to think it was done that way for a reason, but I haven&#39;t found an explanation yet...

Chander, I guess the next question is, what would you like to see for the 12 Month number?  The easiest fix would be to just have it include the most recent month (so, 12 months going through the end of January).  But it looks like the total from <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/</a> is based on 53 weeks and updates weekly, so there is can still be some drift later on each month.  The fixed 12 Month would show ~679.6M all month, but gratiaweb is showing 683.3M.  ... Let me know what you think.

Thanks!
Carl</pre></div><div class='update_description'><i onclick="document.location='19450#1392157625'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-11T22:27:05+00:00">Feb 11, 2014 10:27 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1392157625">&nbsp;</a></div><pre>The rounding of the lowest 3 digits happened at the display web UI
<font color='#7F7E6F'>&#62; <a href='https&#58;//github.com/soichih/osg-display/blob/master/index.php#L11' target='_blank' rel='nofollow'>https&#58;//github.com/soichih/osg-display/blob/master/index.php#L11</a></font>

I don&#39;t have any new information on why the SQL is 1-month off (and still is), but it&#39;s probably related to the fact that the SQL used to pull 13 month data instead of 12.. for reason still unknown.</pre></div><div class='update_description'><i onclick="document.location='19450#1392154190'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-11T21:29:50+00:00">Feb 11, 2014 09:29 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1392154190">&nbsp;</a></div><pre>I had a look at previous display tickets, and I found Soichi noted the same 1-month lag&#58; <a href='https&#58;//ticket.grid.iu.edu/13630#1360249376' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/13630#1360249376</a>

<font color='#7F7E6F'>&#62; The osg_display script is now aggregating only 12 months of data</font>
<font color='#7F7E6F'>&#62; (instead of 13 months), although it is still off-by-one month from my</font>
<font color='#7F7E6F'>&#62; own view - it is aggregating data between 2012-01-01 and 2012-12-31,</font>
<font color='#7F7E6F'>&#62; instead of 2012-02-01 and 2013-1-31, but I think it&#39;s ok.. The result</font>
<font color='#7F7E6F'>&#62; is now much closer to the one reported in gratiaweb, although not</font>
<font color='#7F7E6F'>&#62; identical.</font>

In the osg_display scripts, it looks like this behavior of explicitly dropping the last value (month or otherwise) goes back to a change Brian made back in March 2010 ... I can try to see if he remembers if there&#39;s an important reason to be doing it that way...</pre></div><div class='update_description'><i onclick="document.location='19450#1392147643'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-11T19:40:43+00:00">Feb 11, 2014 07:40 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1392147643">&nbsp;</a></div><pre>As Soichi mentioned, the 12 Month CPU Hours number is calculated on month boundaries so it should only update once a month.  So I would expect the Feb 4 / Feb 5 numbers to be the same.

As for why it is the same as last month (when you looked around Jan 15), I tried running the sql by hand for the monthly jobs_query (from gratia_datasource.py in osg_display), and the totals I get are 672,720,057 when run relative to this month and 673,207,485 relative to last month.  So, I think it&#39;s probably updating, it&#39;s just still at about 673M.  (Relative to the month before that, I see 662,007,860.)

Apparently there is some kind of rounding that happens after the sql query, as the numbers on the display page all end in &#34;000&#34; ... I have to look a little deeper to see where that&#39;s happening...

But for some reason the 12 months don&#39;t include last month (and you can see that from the log message from Soichi below) ... If I run the sql query and total up 12 months including last month (Jan), I get 679,663,532, which is more like the 680M you were expecting from gratia.

I need to look into this further to see why the most recent month (prior to the current month) is not counted...  Soichi, off hand do you know if this is intentional?

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='19450#1392138411'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-11T17:06:51+00:00">Feb 11, 2014 05:06 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1392138411">&nbsp;</a></div><pre>Hi Chander, sorry for the delay getting back to you on this, I&#39;m looking into it now...

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='19450#1391615831'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-05T15:57:11+00:00">Feb 5, 2014 03:57 PM UTC</time> by <b>Chander Sehgal</b><a class="anchor" name="1391615831">&nbsp;</a></div><pre>I suspect that this did not update on Feb 1;  according to my records it showed 673M on Jan 15 – and it still shows 673M on Feb 5.

Chander</pre></div><div class='update_description'><i onclick="document.location='19450#1391614840'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-05T15:40:40+00:00">Feb 5, 2014 03:40 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1391614840">&nbsp;</a></div><pre>If I understand it correctly, 12 month graphs should only get updated on the 1st day of each month, since it uses start / end time based on current month.

2014-02-05 15&#58;34&#58;04,358 - DEBUG - Month starting on 2013-01-01 00&#58;00&#58;00&#58; Jobs 14549158, Job Hours 56274776.71
2014-02-05 15&#58;34&#58;04,358 - DEBUG - Month starting on 2013-02-01 00&#58;00&#58;00&#58; Jobs 12564194, Job Hours 47655588.45
2014-02-05 15&#58;34&#58;04,358 - DEBUG - Month starting on 2013-03-01 00&#58;00&#58;00&#58; Jobs 13952869, Job Hours 56356907.73
2014-02-05 15&#58;34&#58;04,358 - DEBUG - Month starting on 2013-04-01 00&#58;00&#58;00&#58; Jobs 14100893, Job Hours 57061886.48
2014-02-05 15&#58;34&#58;04,359 - DEBUG - Month starting on 2013-05-01 00&#58;00&#58;00&#58; Jobs 15864510, Job Hours 54391851.81
2014-02-05 15&#58;34&#58;04,359 - DEBUG - Month starting on 2013-06-01 00&#58;00&#58;00&#58; Jobs 13902309, Job Hours 56190630.16
2014-02-05 15&#58;34&#58;04,359 - DEBUG - Month starting on 2013-07-01 00&#58;00&#58;00&#58; Jobs 12591227, Job Hours 55310935.13
2014-02-05 15&#58;34&#58;04,359 - DEBUG - Month starting on 2013-08-01 00&#58;00&#58;00&#58; Jobs 18365832, Job Hours 54277278.28
2014-02-05 15&#58;34&#58;04,359 - DEBUG - Month starting on 2013-09-01 00&#58;00&#58;00&#58; Jobs 16538094, Job Hours 55556589.76
2014-02-05 15&#58;34&#58;04,359 - DEBUG - Month starting on 2013-10-01 00&#58;00&#58;00&#58; Jobs 16180859, Job Hours 58952034.86
2014-02-05 15&#58;34&#58;04,359 - DEBUG - Month starting on 2013-11-01 00&#58;00&#58;00&#58; Jobs 16057219, Job Hours 64952283.57
2014-02-05 15&#58;34&#58;04,359 - DEBUG - Month starting on 2013-12-01 00&#58;00&#58;00&#58; Jobs 16943146, Job Hours 55750296.86</pre></div><div class='update_description'><i onclick="document.location='19450#1391614132'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-05T15:28:52+00:00">Feb 5, 2014 03:28 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1391614132">&nbsp;</a></div><pre>I added Carl Edquist to the ticket, because he owns the OSG display code now.</pre></div><div class='update_description'><i onclick="document.location='19450#1391613666'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-05T15:21:06+00:00">Feb 5, 2014 03:21 PM UTC</time><a class="anchor" name="1391613666">&nbsp;</a></div><pre>Additional information is available via the two attached screenshots; the right hand pane does not appear to be updating - specifically the 12 month CPU hours.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Chander Sehgal 478</pre></div><div class='update_description'><i onclick="document.location='19450#1391612495'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-02-05T15:01:35+00:00">Feb 5, 2014 03:01 PM UTC</time> by <b>echism</b><a class="anchor" name="1391612495">&nbsp;</a></div><pre>Hi Scott,

It seems that

<a href='http&#58;//display.grid.iu.edu/' target='_blank' rel='nofollow'>http&#58;//display.grid.iu.edu/</a> - shows 672.7M

and

<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/</a> - shows 680M

are they are slowly diverging again  in terms of total hours for the last year.

(See below - on Jan 14, they both showed 673M)

Chander</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F19450">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 19450});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
