<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[35059] Bestman - Failed to accept the GSI socket</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=35059" method="post">
<div class="page-header">
    <h3><span class="muted">35059</span> / Bestman - Failed to accept the GSI socket</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Douglas Johnson</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">umd-cms</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Douglas Johnson</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier3</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-10-20</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USCMS_Tier3 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/35059", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='35059#1508445414'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-19T20:36:54+00:00">Oct 19, 2017 08:36 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1508445414">&nbsp;</a></div><pre>Ok in the meantime I&#39;m going to close this ticket.</pre></div><div class='update_description'><i onclick="document.location='35059#1508444052'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-19T20:14:12+00:00">Oct 19, 2017 08:14 PM UTC</time> by <b>jabeen@....</b><a class="anchor" name="1508444052">&nbsp;</a></div><pre>Hi Brian,

I have no idea. I have not heard back from the network engineer who fixed the issue. I will let you know if I learn something more.

Best,
Shabnam

<font color='#7F7E6F'>&#62; On Oct 19, 2017, at 4&#58;04 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35059#1508443464'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-19T20:04:24+00:00">Oct 19, 2017 08:04 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1508443464">&nbsp;</a></div><pre>I&#39;m glad you guys were able to get to the bottom of this! I&#39;m curious as to what network security changes caused this issue if you&#39;re at liberty to say.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35059#1508433458'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-19T17:17:38+00:00">Oct 19, 2017 05:17 PM UTC</time><a class="anchor" name="1508433458">&nbsp;</a></div><pre>All, thank you very much for your help. The issue is resolved. It turned out to be some network security changes where they were rejection some &#39;security vulnarabilities.&#39;
Everythings is UMD T3 seems to be working fine now.

Thanks again.
Shabnam

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=sjabeen/CN=682117/CN=Shabnam Jabeen</pre></div><div class='update_description'><i onclick="document.location='35059#1508348632'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-18T17:43:52+00:00">Oct 18, 2017 05:43 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1508348632">&nbsp;</a></div><pre>I am personally not sure as to how you would debug this from the network config standpoint .  Brian, do you have any idea?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='35059#1508173198'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-16T16:59:58+00:00">Oct 16, 2017 04:59 PM UTC</time><a class="anchor" name="1508173198">&nbsp;</a></div><pre>FYI&#58; There is a GGUS ticket for a similar (identical?) issue for the CMS Tier 3 site at Rice&#58; <a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=130690' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=130690</a>

Any thoughts on how to debug this further?

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=lannon/CN=490792/CN=Kevin Patrick Lannon</pre></div><div class='update_description'><i onclick="document.location='35059#1507748441'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-11T19:00:41+00:00">Oct 11, 2017 07:00 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1507748441">&nbsp;</a></div><pre>HI Elizabeth,

Removing the library that Brian suggested (cog-jglobus-axis) did not fix
the problem. I believe that Shabnam forwarded the versions of java and
javac which are identical to those installed at Colorado.

As Brian pointed out, it looks like the issue is with negotiating a
connection when using the newer X509 RFC 3820 compliant proxy. The failure
occurs for both outbound and inbound SRM authentication on all UMD hosts.
The failure does not occur for connections local to UMD nor when connecting
directing to their gridftp server. Since the failure seems to span all the
hosts, could there be a network configuration issue that the newer proxies
are sensitive to and the older ones were not?

​Thank you,
doug
​</pre></div><div class='update_description'><i onclick="document.location='35059#1507740889'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-11T16:54:49+00:00">Oct 11, 2017 04:54 PM UTC</time> by <b>echism</b><a class="anchor" name="1507740889">&nbsp;</a></div><pre>Hey Doug,

Did you have any luck?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35059#1507645570'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-10T14:26:10+00:00">Oct 10, 2017 02:26 PM UTC</time> by <b>jabeen@....</b><a class="anchor" name="1507645570">&nbsp;</a></div><pre>Bestman service restarted.

Best,
Shabnam

<font color='#7F7E6F'>&#62; On Oct 10, 2017, at 10&#58;17 AM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35059#1507645032'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-10T14:17:12+00:00">Oct 10, 2017 02:17 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1507645032">&nbsp;</a></div><pre>Shabnam,

Thanks, let&#39;s restart the bestman service now and let Doug try running
his client test again.

- Brian</pre></div><div class='update_description'><i onclick="document.location='35059#1507644853'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-10T14:14:13+00:00">Oct 10, 2017 02:14 PM UTC</time> by <b>jabeen@....</b><a class="anchor" name="1507644853">&nbsp;</a></div><pre>Hi Brian,

Thanks for looking into this.

Here is the required information&#58;

[root@hepcms-0 ]# java -version
java version &#34;1.7.0_151&#34;
OpenJDK Runtime Environment (rhel-2.6.11.0.el6_9-x86_64 u151-b00)
OpenJDK 64-Bit Server VM (build 24.151-b00, mixed mode)

[root@hepcms-0 ]# javac -version
javac 1.7.0_151

[root@hepcms-0 ]# yum remove cog-jglobus-axis
Loaded plugins&#58; priorities, security
Setting up Remove Process
Resolving Dependencies
--&#62; Running transaction check
---&#62; Package cog-jglobus-axis.noarch 0&#58;1.8.0-7.osg33.el6 will be erased
--&#62; Finished Dependency Resolution

Dependencies Resolved

=======================================================================================================================
Package                         Arch                  Version                           Repository               Size
=======================================================================================================================
Removing&#58;
cog-jglobus-axis                noarch                1.8.0-7.osg33.el6                 @osg/6.7                 28 k

Transaction Summary
=======================================================================================================================
Remove        1 Package(s)

Installed size&#58; 28 k
<div id='show_956428466' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_956428466'>Is this ok [y/N]&#58; y
Downloading Packages&#58;
Running rpm_check_debug
Running Transaction Test
Transaction Test Succeeded
Running Transaction
Erasing    &#58; cog-jglobus-axis-1.8.0-7.osg33.el6.noarch                                                           1/1
Verifying  &#58; cog-jglobus-axis-1.8.0-7.osg33.el6.noarch                                                           1/1

Removed&#58;
cog-jglobus-axis.noarch 0&#58;1.8.0-7.osg33.el6

Complete!

Best,
Shabnam

<font color='#7F7E6F'>&#62; On Oct 10, 2017, at 10&#58;00 AM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_956428466').click(function() {
            $('#detail_956428466').slideDown("normal");
            $('#show_956428466').hide();
            $('#hide_956428466').show();
        });
        $('#hide_956428466').click(function() {
            $('#detail_956428466').slideUp();
            $('#hide_956428466').hide();
            $('#show_956428466').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='35059#1507644013'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-10T14:00:13+00:00">Oct 10, 2017 02:00 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1507644013">&nbsp;</a></div><pre>A few things I noticed from your profile&#58;

1) You have multiple versions of Java installed, could you verify that your host is using the correct one by posting the output of &#96;java -version&#96; and &#96;javac -version&#96;?
2) You&#39;ve got cog-jglobus-axis installed alongside jglobus. The former shouldn&#39;t be necessary so try uninstalling it with &#96;yum remove cog-jglobus-axis&#96;.

- Brian</pre></div><div class='update_description'><i onclick="document.location='35059#1507585452'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-09T21:44:12+00:00">Oct 9, 2017 09:44 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1507585452">&nbsp;</a></div><pre>HI Brian,

Using 3.3.28, voms-proxy-init -old worked.

Do you know how to fix the system?

Thank you,
doug

On Mon, Oct 9, 2017 at 3&#58;23 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35059#1507584194'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-09T21:23:14+00:00">Oct 9, 2017 09:23 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1507584194">&nbsp;</a></div><pre>Doug,

No worries, that explanation was exactly what I was looking for! If you
look at our 3.3.15 release notes
(<a href='http&#58;//opensciencegrid.github.io/docs/release/3.3/release-3-3-15/' target='_blank' rel='nofollow'>http&#58;//opensciencegrid.github.io/docs/release/3.3/release-3-3-15/</a>),
you&#39;ll see that voms-proxy-init defaults to RFS-compliant proxies. Could
you try with the 3.3.28 tarball client and &#96;voms-proxy-init -old&#96;?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35059#1507583650'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-09T21:14:10+00:00">Oct 9, 2017 09:14 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1507583650">&nbsp;</a></div><pre>​​
Hi Brian,

I have tested OSG tar distributions 3.3.1 through 3.3.28. I believe I have
determined that the transfers fail when using a proxy generated with OSG
version &#62; 3.3.14 independent of which client is used. I have generated the
VOMS proxy using different versions of the OSG tar​ distribution and used
them with various versions of the client tools. I have also tested using
the version of gfal tools in CVMFS. I get the same behavior, the transfer
fails if the proxy is not generated using OSG &#60; 3.3.15.

The failures occur during the authentication phase of the transfer and only
when using an SRM endpoint The transfers do not fail when using GSIFTP.  If
running on UMD, the failure occurs when the client tries to connect to a
remote SRM and when running on a remote system, the failure occurs when
trying to connect to the UMD SRM. Failures occur even when the UMD SRM
(bestman) is not used.

It seems that this is a little hard to describe so if a phone conversation
would be help, we should arrange to do that.

Thank you,
doug

On Mon, Oct 9, 2017 at 1&#58;14 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35059#1507576457'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-09T19:14:17+00:00">Oct 9, 2017 07:14 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1507576457">&nbsp;</a></div><pre>Doug,

You mentioned different OSG versions on the client side, does that mean you&#39;re installing the client tools via tarball? What&#39;s the exact command you&#39;re using for generating your proxy? Have you tried gfal-copy using a proxy generated from different versions of OSG 3.3.x?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35059#1507561691'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-09T15:08:11+00:00">Oct 9, 2017 03:08 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1507561691">&nbsp;</a></div><pre>I attached a trace from bestman2.log on the remote site when the  OSG
3..3.28  gfal-copy client at UMD tries to open/authenticate the GSI
connection.

On Wed, Oct 4, 2017 at 1&#58;48 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35059#1507146534'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-04T19:48:54+00:00">Oct 4, 2017 07:48 PM UTC</time><a class="anchor" name="1507146534">&nbsp;</a></div><pre>Attaching osg-profile.txt

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=johnsond/CN=655679/CN=Douglas Johnson</pre></div><div class='update_description'><i onclick="document.location='35059#1507146499'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-10-04T19:48:19+00:00">Oct 4, 2017 07:48 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1507146499">&nbsp;</a></div><pre>Greetings,

We are looking for help in debugging the bestman at University of Maryland.

On 9/20, for no reason that we have been able to understand, bestman stopped accepting inbound transfers at UMD (hepcms-0.umd.edu). The issues that we have looked into include&#58;

1) DNS configuration
2) Certificates - hosts, CAs and CRLs.
3) Software version - All the software on the machine has now been updated to SL6.9 and OSG 3.3.28
4) Run tests using locally install OSG Worker Node Client
5) Run tests using OSG tools from CVMFS

One strange issue we have uncovered is that inbound transfers work when using the gfal tools for OSG 3 versions up to 3.3.14. After 3.3.14 (3.3.15 - 3.3.28) all attempts to connect to bestman fail. These sames tools are able to transfer directly to the gridftp server (bypassing bestman) hepcms-gridftp.umd.edu. In addition, transfers within the UMD local network work for all versions of the tools. The bestman failure occurs during the GSI authenication&#58;

Handshake start
Failed to accept the GSI socket
java.net.SocketException&#58; Connection reset

You can see this in more in the attached osg-profile.txt

I am not positive but it appears to be related to the OSG version used to create the VOMS proxy. For example&#58;

Working from a Colorado machine&#58;

Generate VOMS proxy using OSG 3.1.1, then using gfal from either 3.3.1 or 3.3.28, I can run&#58;

gfal-copy file&#58;///TestFile <a href='srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=Destination' target='_blank' rel='nofollow'>srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=Destination</a>

But if I use 3.3.28 to generate the proxy, then gfal-copy fails with the GSI error.

Any help would be greatly appreciated.

Thank you,
doug

<div id='show_479094256' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_479094256'>I don&#39;t see any way to attach a file to the ticket, so I will attempt to attach osg-profile after the ticket has been filed.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=johnsond/CN=655679/CN=Douglas Johnson

</div><script type='text/javascript'>
        $('#show_479094256').click(function() {
            $('#detail_479094256').slideDown("normal");
            $('#show_479094256').hide();
            $('#hide_479094256').show();
        });
        $('#hide_479094256').click(function() {
            $('#detail_479094256').slideUp();
            $('#hide_479094256').hide();
            $('#show_479094256').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F35059">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
