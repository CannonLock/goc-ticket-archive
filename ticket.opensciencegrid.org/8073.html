<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[8073] Downtime updated but RSV/GridView numbers still indicate MIT_CMS as unavailable</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=8073" method="post">
<div class="page-header">
    <h3><span class="muted">8073</span> / Downtime updated but RSV/GridView numbers still indicate MIT_CMS as unavailable</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Wei Li</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-02-08</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
        <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/8073", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/8073?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/8073?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Downtime%20updated%20but%20RSV%2FGridView%20numbers%20still%20indicate%20MIT_CMS%20as%20unavailable%20ISSUE%3D8073%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='8073#1265403727'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-02-05T21:02:07+00:00">Feb 5, 2010 09:02 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1265403727">&nbsp;</a></div><pre>I spoke to Wei shortly after the previous ticket update note I sent out, and confirmed that the patch we applied indeed works. He has updated the two relevant downtime records. I immediately noticed the DB got the change, and replicated (OIM) DB picked up the change.

Finally, I confirmed the downtime modify records were sent to SAM as well.

Thanks Wei for catching this obscure bug, and also helping us test the patch! I am closing out this ticket now.

Cheers,
-ag</pre></div><div class='update_description'><i onclick="document.location='8073#1265401328'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-02-05T20:22:08+00:00">Feb 5, 2010 08:22 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1265401328">&nbsp;</a></div><pre>Hi Wei/Max,

I did not completely understand what Max said just now on the phone (the call got disconected before I could clarify) but I think he said Wei is busy at the moment.

Anyway, can one of you please edit the MIT_CMS/MIT_CMS-SE downtime that currently has start and end time&#58;

Start Time	February 1, 2010 7&#58;00 PM (EST5EDT)
End Time	February 4, 2010 7&#58;00 PM (EST5EDT)

to whatever it should be in your opinion? I suspect you want end time 2010-02-03 16&#58;00&#58;00 Eastern time. We would like to confirm that we have fixed the OIM downtime bug, and that downtime edits work for users before we announce it to the rest of the OSG. Thanks!

Cheers,
-ag</pre></div><div class='update_description'><i onclick="document.location='8073#1265387701'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-02-05T16:35:01+00:00">Feb 5, 2010 04:35 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1265387701">&nbsp;</a></div><pre>Hi Wei [ticketCC Max Goncharov and rsv-sam mailing list],

Thanks for reporting this.

<font color='#7F7E6F'>&#62; what is the use of allowing downtime modification if it&#39;s not considered.</font>

Actually, downtime modification is indeed allowed, and services like MyOSG, RSVProcess (that Myosg&#39;s status page, status history page, etc.), RSV-SAM honor modified downtimes. Modified downtimes are indeed forwarded to WLCG SAM/GridView as well. Note that WLCG GridView has stricter rules on how it uses downtime modifications, and on unscheduled downtimes but I won&#39;t go into that in this note (mostly because I don&#39;t understand those rules all that well!)

Also note that RSVProcess marked your RG as up (green colored) starting around Feb 3rd 18&#58;00 hours&#58; <a href='http&#58;//tinyurl.com/ylbt5br' target='_blank' rel='nofollow'>http&#58;//tinyurl.com/ylbt5br</a> but EGEE GridView (and consequently the reporting scripts) ignore a service&#39;s real status as long as it&#39;s marked to be under downtime.

Anyway, coming back to your note/problem report&#58;

We just found a very odd problem inside OIM&#58;

-- This causes a situation in which the OIM web interface shows an altered downtime endtime of Feb 3rd 21&#58;00 UTC based on its cached DB data when you loaded OIM in your browser and when Soichi or I opened it on our browsers.

-- However, your update never made it to the database, and therefore MyOSG, RSVProcess, RSV-SAM, etc. did not know about the update to the downtime record.

The good news is I&#39;ve been able to replicate this problem, and Soichi/I are looking into it as we speak - stay tuned.

Meanwhile, can you confirm you changed the downtime endtime from 2010-02-05 00&#58;00&#58;00 to 2010-02-03 21&#58;00&#58;00 ??

If yes, then after we fix the above problem, I will updated the downtime (again) on your behalf, and ensure the updates make it to the database. Then the downtime_modify record will be forwarded to WLCG, and the monthly report should reflect your updated downtime setting. The way WLCG considers unscheduled downtime might throw a curveball in next month&#39;s report but that is beyond the scope of this ticket, so I won&#39;t address it any further.

-ag</pre></div><div class='update_description'><i onclick="document.location='8073#1265385772'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-02-05T16:02:52+00:00">Feb 5, 2010 04:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1265385772">&nbsp;</a></div><pre>From email sent by Wei Li dated 2010-02-05

------------

Dear Arvind,

Somehow, MIT&#39;s RSV availability is still 0% yesterday. We were already out of down time on Wed. I checked the myOSG page. It indicates our downtime ends on Friday. In OIM, I did originally schedule the downtime till Friday but later on I modified it after we are back online (you can check it). But it doesn&#39;t seem to help.

Is it supposed to be the way it works? We have to get it correct the first time we schedule it and modification doesn&#39;t work? I am still a bit not used to the new OIM page. In the old way, after a downtime is over, it will disappear automatically from the page. If I want to end a downtime earlier, I just remove it from the page. But now, I have to keep all the history there, otherwise the records will be lost, as we discussed some time ago. Most importantly, I didn&#39;t realize until today that one cannot modify it once it&#39;s scheduled.

Thanks a lot,
Wei

RSV Reporting System wrote&#58;
<font color='#7F7E6F'>&#62; CMS RSV vs WLCG Daily report for 02/04/10.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; This report compares the OSG calculation of resource availability against the WLCG calculation of resource availability.  The availability algorithm is the one documented at&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//twiki.grid.iu.edu/pub/Operations/RSVPeriodicReporting/Gridview_Service_Availability_Computation-1.pdf' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/pub/Operations/RSVPeriodicReporting/Gridview_Service_Availability_Computation-1.pdf</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; RSV versus WLCG values for WLCG sites</font>
<font color='#7F7E6F'>&#62; ---------------------------------------------------------------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; |    |        Site        | RSV Availability | WLCG Availability | Difference | RSV Reliability | WLCG Reliability | Difference |</font>
<font color='#7F7E6F'>&#62; ---------------------------------------------------------------------------------------------------------------------------------</font>
. . .
<font color='#7F7E6F'>&#62; |  6 | MIT_CMS            |                0 |                 0 |          0 | N/A             | Unknown          |          0 |</font>
. . .
---------------------------------------------------------------------------------------------------------------------------------
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;     CMS RSV vs WLCG Daily report for 02/04/10.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; This report compares the OSG calculation of resource availability against the WLCG calculation of resource availability. The availability algorithm is the one documented here &#60;<a href='https&#58;//twiki.grid.iu.edu/pub/Operations/RSVPeriodicReporting/Gridview_Service_Availability_Computation-1.pdf&#62' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/pub/Operations/RSVPeriodicReporting/Gridview_Service_Availability_Computation-1.pdf&#62</a>;.</font>
<div id='show_1282784150' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1282784150'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;       RSV versus WLCG values for WLCG sites</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;     Site     RSV Availability     WLCG Availability     Difference     RSV Reliability     WLCG Reliability     Difference</font>
. . .
<font color='#7F7E6F'>&#62; 6     MIT_CMS     0     0     0     N/A     Unknown     0</font>
. . .

</div><script type='text/javascript'>
        $('#show_1282784150').click(function() {
            $('#detail_1282784150').slideDown("normal");
            $('#show_1282784150').hide();
            $('#hide_1282784150').show();
        });
        $('#hide_1282784150').click(function() {
            $('#detail_1282784150').slideUp();
            $('#hide_1282784150').hide();
            $('#show_1282784150').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F8073">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
