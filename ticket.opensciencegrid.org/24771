<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[24771] Gratiaweb unresponsive</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=24771" method="post">
<div class="page-header">
    <h3><span class="muted">24771</span> / Gratiaweb unresponsive</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Bodhitha Jayatilaka</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Bodhitha Jayatilaka</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-04-15</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=24771", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/24771?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/24771?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Gratiaweb%20unresponsive%20ISSUE%3D24771%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='24771#1429126698'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-15T19:38:18+00:00">Apr 15, 2015 07:38 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1429126698">&nbsp;</a></div><pre>Scott said this was handled. Closing</pre></div><div class='update_description'><i onclick="document.location='24771#1429124569'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-15T19:02:49+00:00">Apr 15, 2015 07:02 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1429124569">&nbsp;</a></div><pre>This was updated on gratiaweb1/2 on the April 14 release (yesterday).

Carl</pre></div><div class='update_description'><i onclick="document.location='24771#1428525854'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-08T20:44:14+00:00">Apr 8, 2015 08:44 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1428525854">&nbsp;</a></div><pre>We&#39;re planning to update the http timeout to 600 (10min) on the April 14 release.

Carl</pre></div><div class='update_description'><i onclick="document.location='24771#1427836705'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-31T21:18:25+00:00">Mar 31, 2015 09:18 PM UTC</time><a class="anchor" name="1427836705">&nbsp;</a></div><pre>The script generates static plots creating a http request directly to the cherrypy web server of gratiaweb, so it skips the 3 min timeout set for the httpd. I have not seen any of the queries exceed 1 minute in the sql execution. I guess that if the database is busy this may change, but a longer timeout will allow more queries to fill the server and get stuck for a longer time and gratia web will seem unresponsive beacuse is busy. The timeout is only for the sql execution it is not related with an http timeout.

The releases that are deployed on itb right now have cherry py configured with a thread pool of size 30 and http timeout of 1800, each mysql pooled connection has size 10 and 600 seconds of timeout. So if for any reason there is a heavy load on the database gratia web will still be able to return the static pages.

I think the timeout can be bigger by default but then the size of the mysql pool should be smaller, so if there are long running queires the database don&#39;t get saturated.

Maybe we can discuss this next monday on the meeting?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=JUAN FELIPE MOSQUERA MORALES 2663</pre></div><div class='update_description'><i onclick="document.location='24771#1427833837'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-31T20:30:37+00:00">Mar 31, 2015 08:30 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1427833837">&nbsp;</a></div><pre>Ok, great, thanks Soichi!  I thought there was something like this but I didn&#39;t know the details...  So especially in this case we may not want to time out as early, right?  Or (Juan) do the timeouts only affect the web site?

I just want to make sure we won&#39;t break anything that legitimately runs for &#62; 10min.

Carl</pre></div><div class='update_description'><i onclick="document.location='24771#1427833271'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-31T20:21:11+00:00">Mar 31, 2015 08:21 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1427833271">&nbsp;</a></div><pre>gratiaweb generates some &#34;static&#34; graphs via cron
<font color='#7F7E6F'>&#62; 19 9   * * * root /usr/bin/static_graphs &#62;&#62; /var/log/static_graphs.log 2&#62;&#62; /var/log/static_graphs.err</font>
It generates about 300 or so graphs everyday.</pre></div><div class='update_description'><i onclick="document.location='24771#1427832566'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-31T20:09:26+00:00">Mar 31, 2015 08:09 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1427832566">&nbsp;</a></div><pre>Ok, in that case yeah it was probably just the httpd timeout getting hit.

Personally my &#34;on the safe side&#34; feeling is to raise both the httpd and sql timeouts to 1800 (30m), in case there are occasionally longer ones, but I don&#39;t have a very strong opinion here.  But even if you&#39;d like to keep it at 600s (10m) then probably we should do the same for httpd.

One thing I don&#39;t fully understand is whether gratiaweb does any routine (daily?) background queries on its own (ie, not for a webpage load), which might take a bit longer than the web page loads.  Do either of you guys know if this happens?

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='24771#1427831714'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-31T19:55:14+00:00">Mar 31, 2015 07:55 PM UTC</time><a class="anchor" name="1427831714">&nbsp;</a></div><pre>Proxy error after ~3 min is indeed what I was seeing.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='24771#1427831530'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-31T19:52:10+00:00">Mar 31, 2015 07:52 PM UTC</time><a class="anchor" name="1427831530">&nbsp;</a></div><pre>Sorry, This is the correct link&#58;

<a href='http&#58;//gratiaweb-itb.grid.iu.edu/gratia/xml/facility_transfer_volume?starttime=2013-03-18%2000%3A00%3A00&endtime=2015-03-18%2000%3A00%3A00&sql_query_timeout=10' target='_blank' rel='nofollow'>http&#58;//gratiaweb-itb.grid.iu.edu/gratia/xml/facility_transfer_volume?starttime=2013-03-18%2000%3A00%3A00&endtime=2015-03-18%2000%3A00%3A00&sql_query_timeout=10</a>

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jmosquer/CN=760823/CN=Juan Felipe Mosquera Morales</pre></div><div class='update_description'><i onclick="document.location='24771#1427831314'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-31T19:48:34+00:00">Mar 31, 2015 07:48 PM UTC</time><a class="anchor" name="1427831314">&nbsp;</a></div><pre>This is the correct link for the previous message&#58;

<a href='http&#58;//gratiaweb-itb.grid.iu.edu/gratia/xml/facility_transfer_volume?starttime=2013-03-18%2000&#58' target='_blank' rel='nofollow'>http&#58;//gratiaweb-itb.grid.iu.edu/gratia/xml/facility_transfer_volume?starttime=2013-03-18%2000&#58</a>;00&#58;00&endtime=2015-03-18%2000&#58;00&#58;00&sql_query_timeout=10

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jmosquer/CN=760823/CN=Juan Felipe Mosquera Morales</pre></div><div class='update_description'><i onclick="document.location='24771#1427831104'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-31T19:45:04+00:00">Mar 31, 2015 07:45 PM UTC</time><a class="anchor" name="1427831104">&nbsp;</a></div><pre>The default timeout for the sql execution is set in 600 seconds, but it can be adjusted including a parameter in the url if a longer tiemout is needed. However, this parameter if the parameter is set to a higher value than the web timeout of the apache the query will run for longer time but the user will not be able to notice the result anyway.

<a href='http&#58;//gratiaweb-itb.grid.iu.edu/gratia/xml/facility_transfer_volume?starttime=2013-03-18%2000&#58' target='_blank' rel='nofollow'>http&#58;//gratiaweb-itb.grid.iu.edu/gratia/xml/facility_transfer_volume?starttime=2013-03-18%2000&#58</a>;00&#58;00&endtime=2015-03-18%2000&#58;00&#58;00&sql_query_timeout=10

As well now the result image will change to distinguish an error/timeout from an empty result.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jmosquer/CN=760823/CN=Juan Felipe Mosquera Morales</pre></div><div class='update_description'><i onclick="document.location='24771#1427831045'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-31T19:44:05+00:00">Mar 31, 2015 07:44 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1427831045">&nbsp;</a></div><pre>Ah, in that case the Proxy Error might be the apache timeout, basically the same issue as <a href='https&#58;//ticket.grid.iu.edu/24132' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/24132</a> ...

Previously the httpd timeout was 60s ... I had suggested raising it to 1800s (30m) but it looks like it was only raised to 180s.  Bo, is that consistent with what you were seeing?  Did you get the &#34;502 Proxy Error&#34; after 3 min?

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='24771#1427829828'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-31T19:23:48+00:00">Mar 31, 2015 07:23 PM UTC</time><a class="anchor" name="1427829828">&nbsp;</a></div><pre>They were filed in response to separate outages, yes. In general the longest queries tend to be the multi-year ones that are made but I have no idea how long those queries should be expected to take. The last time I did a ~5 year request via gratiaweb I remember it taking just a minute or two.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='24771#1427829571'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-31T19:19:31+00:00">Mar 31, 2015 07:19 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1427829571">&nbsp;</a></div><pre>Just noticed this ticket and <a href='24715' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/24715</a> are two separate tickets.  Is it the same issue? (I&#39;m guessing yes?)  If so maybe we can close this one since there are a few more details in 24715.

Anyway, my quick notes/thoughts are&#58;

(1) the outage in 24715 was from the /var volume filling up, which was not a database issue.

(2) yes we did see a bunch of queries running at once this morning (35), but not that many (in the past it&#39;s been pegged at the mysql limit of 150), and this time the queries were only running for about 10 minutes (less than 15 anyway).  So again my hunch is the database wasn&#39;t in that bad of shape today...

I think it is really great that you are adding a mechanism for it to cancel queries that run too long, but also I&#39;m worried that 10min (600s) might be too short... Are there any queries that might need to run for longer than this?  (I don&#39;t know the answer.)  But in the past when we&#39;ve had db meltdowns, we had many queries running for multiple hours each.  So it seems like 10min is a still long ways away from that.  Maybe we can start with setting the timeout to something like 30min or 1hr?  I&#39;m open to suggestions.

Carl</pre></div><div class='update_description'><i onclick="document.location='24771#1427817810'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-31T16:03:30+00:00">Mar 31, 2015 04:03 PM UTC</time><a class="anchor" name="1427817810">&nbsp;</a></div><pre>Hi All,

I just checked the database and it was saturated with many queries, but it seems like most of them have finished already, and gratiaweb 1 and 2 are ok now. There are a couple of changes already deployed on itb, that will help reduce the execution time of queries that were using regexp, and that will timeout queries that run for longer than 600 seconds.

Thanks,
Juan F. Mosquera

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jmosquer/CN=760823/CN=Juan Felipe Mosquera Morales</pre></div><div class='update_description'><i onclick="document.location='24771#1427816038'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-31T15:33:58+00:00">Mar 31, 2015 03:33 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1427816038">&nbsp;</a></div><pre>Sending to Juan and Carl.  Could you please look into this?

Gratiaweb queries beyond just the homepage result in an error (&#34;502 Proxy Error&#34;) since about 11 am EDT.</pre></div><div class='update_description'><i onclick="document.location='24771#1427815260'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-31T15:21:00+00:00">Mar 31, 2015 03:21 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1427815260">&nbsp;</a></div><pre>Gratiaweb queries beyond just the homepage result in an error (&#34;502 Proxy Error&#34;) since about 11 am EDT.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F24771">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 24771});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
