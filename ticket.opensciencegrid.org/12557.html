<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[12557] Failures in org.osg.certificates.crl-expiry RSV on both Vanderbilt CEs</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=12557" method="post">
<div class="page-header">
    <h3><span class="muted">12557</span> / Failures in org.osg.certificates.crl-expiry RSV on both Vanderbilt CEs</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">John G. Mora</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">John G. Mora</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">High</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Check for updates</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-09-21</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Matyas Selmeci <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/12557", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='12557#1348252738'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-21T18:38:58+00:00">Sep 21, 2012 06:38 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1348252738">&nbsp;</a></div><pre>Thank you for informing us that this issue has been resolved. I will close this ticket.  Please submit problems, requests, and questions at&#58; <a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a> OSG Grid Operations Center goc@...., 317-278-9699 Visit the OSG Operations Page&#58; <a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='12557#1348251101'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-21T18:11:41+00:00">Sep 21, 2012 06:11 PM UTC</time><a class="anchor" name="1348251101">&nbsp;</a></div><pre>You can close this ticket. The issue is now resolved; I2 routing issue.

I&#39;ll remove the temporary fix.

Thanks for your help,
- John

-- by John G. Mora</pre></div><div class='update_description'><i onclick="document.location='12557#1348091978'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-19T21:59:38+00:00">Sep 19, 2012 09:59 PM UTC</time><a class="anchor" name="1348091978">&nbsp;</a></div><pre>All -

In the meantime, so that we don&#39;t get hit negatively in reporting metrics, I&#39;ve put a fix in place that will allow RSV to pass.

However, we still need to get the upstream issue resolved with the CA.

Please let me know if anyone has any questions/concerns.

Thanks,
- John

-- by John G. Mora</pre></div><div class='update_description'><i onclick="document.location='12557#1348000746'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-18T20:39:06+00:00">Sep 18, 2012 08:39 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1348000746">&nbsp;</a></div><pre>The USCMS Tier-1 at Fermilab has noticed enough transient issues with this particular CA that it is readily recognizable to me.  We have noticed in the past that is becomes unavailable for a couple of days then comes back.  Our RSV tests have not gone &#34;red&#34; from it, but we do see warnings.

Anthony Tiradani</pre></div><div class='update_description'><i onclick="document.location='12557#1347923965'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T23:19:25+00:00">Sep 17, 2012 11:19 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1347923965">&nbsp;</a></div><pre>I attached it to the ticket.
There was a plan by OSG security/operation to setup a mirror of the CRLs but I think it has been abandoned.
Marco</pre></div><div class='update_description'><i onclick="document.location='12557#1347919453'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T22:04:13+00:00">Sep 17, 2012 10:04 PM UTC</time><a class="anchor" name="1347919453">&nbsp;</a></div><pre>All -

Is there somewhere that this CRL can be downloaded from via an automated process or a mirror for these CRLs?

Thank you,
- John

-- by John G. Mora</pre></div><div class='update_description'><i onclick="document.location='12557#1347913631'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T20:27:11+00:00">Sep 17, 2012 08:27 PM UTC</time> by <b>Mine Altunay</b><a class="anchor" name="1347913631">&nbsp;</a></div><pre>Dear Uniandes CA operator,

I am contacting you on behalf of grid resources in Open Science Grid,
specifically at Vanderbilt university.

The system administrator at Vanderbilt university thinks that Vanderbilt
resources are being blocked at the Uniandes CA&#39;s firewall. Please see
his message below. I could not regenerate the problem; when I tried to
download the CA crl files from fnal.gov, I did not have any trouble.

Any help is very much appreciated.

Mine Altunay
OSG Security Officer
Fermilab
630-840-6490

On 9/17/12 2&#58;57 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12557#1347911837'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T19:57:17+00:00">Sep 17, 2012 07:57 PM UTC</time><a class="anchor" name="1347911837">&nbsp;</a></div><pre>Mine,

It appears they are firewalling our site (or a larger subnet)&#58;

[moraj@ce1 ~]$ nc -w 1 -vvv ra.uniandes.edu.co 80
nc&#58; connect to ra.uniandes.edu.co port 80 (tcp) timed out&#58; Operation now in progress

[moraj@ce1 ~]$ nc -w 1 -vvv google.com 80
Connection to google.com 80 port [tcp/http] succeeded!

Generally, &#96;Operation now in progress&#96; indicates a firewall issue. The node has a local iptables, but even when it is disabled, we are unable to access ra.uniandes.edu.co on tcp/80.

Thanks,
- John

-- by John G. Mora</pre></div><div class='update_description'><i onclick="document.location='12557#1347911603'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T19:53:23+00:00">Sep 17, 2012 07:53 PM UTC</time> by <b>Mine Altunay</b><a class="anchor" name="1347911603">&nbsp;</a></div><pre>The official contact is as listed in CA distribution file&#58;

alias = UniandesCA
url = <a href='https&#58;//ra.uniandes.edu.co' target='_blank' rel='nofollow'>https&#58;//ra.uniandes.edu.co</a>
email = ca@....
crl_url = <a href='http&#58;//ra.uniandes.edu.co/pki/pub/crl/cacrl.crl' target='_blank' rel='nofollow'>http&#58;//ra.uniandes.edu.co/pki/pub/crl/cacrl.crl</a>
ca_url = <a href='http&#58;//ra.uniandes.edu.co/pki/pub/cacert/cacert.pem' target='_blank' rel='nofollow'>http&#58;//ra.uniandes.edu.co/pki/pub/cacert/cacert.pem</a>
status = accredited&#58;classic
version = 1.48
sha1fp.0 = 00&#58;B7&#58;AA&#58;54&#58;AE&#58;7B&#58;1D&#58;BE&#58;FB&#58;40&#58;F4&#58;68&#58;02&#58;85&#58;5F&#58;73&#58;01&#58;83&#58;B6&#58;0D

I can easily download the crl file. I can contact the CA, but reading from the ticket below I am not sure what the problem is since the crl file seems available for me.</pre></div><div class='update_description'><i onclick="document.location='12557#1347909522'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T19:18:42+00:00">Sep 17, 2012 07:18 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1347909522">&nbsp;</a></div><pre>(Assigning Mine & CC-ing osg-security-team. Raised priority to High.)</pre></div><div class='update_description'><i onclick="document.location='12557#1347909290'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T19:14:50+00:00">Sep 17, 2012 07:14 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1347909290">&nbsp;</a></div><pre>It would not be the first time. It happened in the past I don&#39;t remember with which RA.
I opened a ticket for the VO managing the RA&#58; <a href='https&#58;//ticket.grid.iu.edu/goc/12679' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/12679</a></pre></div><div class='update_description'><i onclick="document.location='12557#1347909257'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T19:14:17+00:00">Sep 17, 2012 07:14 PM UTC</time><a class="anchor" name="1347909257">&nbsp;</a></div><pre>Hi John,

OIM seems to know Andrés&#39;s university email, so I&#39;ve CC&#39;d him on the ticket.

Brian

-- by Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='12557#1347908789'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T19:06:29+00:00">Sep 17, 2012 07:06 PM UTC</time><a class="anchor" name="1347908789">&nbsp;</a></div><pre>I found the following - perhaps this is the right person?

Andrés Holguín (administrator of the Uniandes CA)
Dirección de Tecnologías de Información.
Universidad de los Andes.
E-mail&#58; ca@....

-- by John G. Mora</pre></div><div class='update_description'><i onclick="document.location='12557#1347908440'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T19:00:40+00:00">Sep 17, 2012 07:00 PM UTC</time><a class="anchor" name="1347908440">&nbsp;</a></div><pre>It&#39;s reachable, so it&#39;s possible someone&#39;s just being aggressive or saw something and blocked it.

$ ping -c 5 ra.uniandes.edu.co |grep loss
5 packets transmitted, 5 received, 0% packet loss, time 3996ms

We&#39;re not blocking outbound tcp/80, so my guess is it may be their firewall?

- John

-- by John G. Mora</pre></div><div class='update_description'><i onclick="document.location='12557#1347908165'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T18:56:05+00:00">Sep 17, 2012 06:56 PM UTC</time><a class="anchor" name="1347908165">&nbsp;</a></div><pre>Hi John,

It&#39;s always possible that it&#39;s a pure network routing issue.  Would seem strange to have an aggressive firewall for a CRL!  I&#39;m not entirely sure how best to contact the CA&#39;s networking folks, so I&#39;m just going to request that Chris assign this ticket to the security team.

Chris?

Brian

-- by Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='12557#1347907889'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T18:51:29+00:00">Sep 17, 2012 06:51 PM UTC</time><a class="anchor" name="1347907889">&nbsp;</a></div><pre>Hmm. Let me dig a bit further.

$ nc -vvv -w 1 ra.uniandes.edu.co 80
nc&#58; connect to ra.uniandes.edu.co port 80 (tcp) timed out&#58; Operation now in progress

Not sure why this would be blocked, but I&#39;ll look into it. Definitely looks like it&#39;s being firewalled.

-- by John G. Mora</pre></div><div class='update_description'><i onclick="document.location='12557#1347907720'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T18:48:40+00:00">Sep 17, 2012 06:48 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1347907720">&nbsp;</a></div><pre>Other test&#58;
can you wget the file manually?
wget <a href='http&#58;//ra.uniandes.edu.co/pki/pub/crl/cacrl.crl' target='_blank' rel='nofollow'>http&#58;//ra.uniandes.edu.co/pki/pub/crl/cacrl.crl</a>

Can you reach the host, e.g. traceroute ra.uniandes.edu.co ?</pre></div><div class='update_description'><i onclick="document.location='12557#1347907697'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T18:48:17+00:00">Sep 17, 2012 06:48 PM UTC</time><a class="anchor" name="1347907697">&nbsp;</a></div><pre>Hi Kevin,

From the same host, can you perform the following&#58;

[bbockelm@brian-test ~]$ curl <a href='http&#58;//ra.uniandes.edu.co/pki/pub/crl/cacrl.crl' target='_blank' rel='nofollow'>http&#58;//ra.uniandes.edu.co/pki/pub/crl/cacrl.crl</a> 2&#62;/dev/null | openssl crl -inform der -noout -hash
fc1898ec

Would help eliminate &#34;networking issue&#34; from &#34;obscure fetch-crl issue&#34;.

Thanks,

Brian

-- by Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='12557#1347907496'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T18:44:56+00:00">Sep 17, 2012 06:44 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1347907496">&nbsp;</a></div><pre>I repeated a test right now (deleting the CRL) and it is working for me&#58;
fetch-crl[15132]&#58; 20120917T132044-0500 processing &#39;/etc/grid-security/certificates/UniandesCA.crl_url&#39;
fetch-crl[15132]&#58; 20120917T132044-0500 updating CRL &#39;Uniandes CA (fc1898ec)&#39;
fetch-crl[15132]&#58; 20120917T132044-0500 File /etc/grid-security/certificates/fc1898ec.r0 valid&#58; yes

Since the problems are only between you and a single RA I&#39;m thinking on some firewall that is misinterpreting the download as an attack.
Do you have one server that is fetching the CRLs or is each node updating its CRLs without a web proxy?

Can you try from a machine on a different network?</pre></div><div class='update_description'><i onclick="document.location='12557#1347904989'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T18:03:09+00:00">Sep 17, 2012 06:03 PM UTC</time> by <b>Kevin Buterbaugh</b><a class="anchor" name="1347904989">&nbsp;</a></div><pre>Hi Marco,

Yes, and the problem is we can&#39;t get a newer one.  The md5sum on the old one was&#58;

/etc/grid-security/certificates
root@ce1# md5sum fc1898ec.r0
7d2155ccbb00308bac98a02ba19627b0  fc1898ec.r0
/etc/grid-security/certificates
root@ce1#

I then removed all fc1898* files and reran fetch-crl.  It won&#39;t download anything from them - and only from them&#58;

fetch-crl[20851]&#58; 20120917T125834-0500 processing &#39;/etc/grid-security/certificates/UniandesCA.crl_url&#39;
fetch-crl[20851]&#58; 20120917T125855-0500 RetrieveFileByURL&#58; download no data from <a href='http&#58;//ra.uniandes.edu.co/pki/pub/crl/cacrl.crl' target='_blank' rel='nofollow'>http&#58;//ra.uniandes.edu.co/pki/pub/crl/cacrl.crl</a>
fetch-crl[20851]&#58; 20120917T125855-0500 could not download a valid file from &#39;<a href='http&#58;//ra.uniandes.edu.co/pki/pub/crl/cacrl.crl&#39' target='_blank' rel='nofollow'>http&#58;//ra.uniandes.edu.co/pki/pub/crl/cacrl.crl&#39</a>;

/etc/grid-security/certificates
root@ce1# ls -l *fc1898ec*
ls&#58; *fc1898ec*&#58; No such file or directory
/etc/grid-security/certificates
root@ce1#

Thanks...

Kevin

On Sep 17, 2012, at 12&#58;54 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12557#1347904440'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T17:54:00+00:00">Sep 17, 2012 05:54 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1347904440">&nbsp;</a></div><pre>HI Kevin,
the file is not the latest one published by the RA.
Looking at a CE in Chicago I have

-rw-r--r-- 1 root root 1003 Sep 17 12&#58;29 fc1898ec.r0

with MD5 sum
0677844d532c4f55d754d87649e10bab  fc1898ec.r0

Can you check the checksum of the version you have?
You may have an older version of the CRL.
Marco</pre></div><div class='update_description'><i onclick="document.location='12557#1347902829'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T17:27:09+00:00">Sep 17, 2012 05:27 PM UTC</time> by <b>Kevin Buterbaugh</b><a class="anchor" name="1347902829">&nbsp;</a></div><pre>Hi Brian,

Here&#39;s the relevant output from fetch-crl&#58;

fetch-crl[2169]&#58; 20120917T115149-0500 processing &#39;/etc/grid-security/certificates/UniandesCA.crl_url&#39;
fetch-crl[2169]&#58; 20120917T115210-0500 RetrieveFileByURL&#58; download no data from <a href='http&#58;//ra.uniandes.edu.co/pki/pub/crl/cacrl.crl' target='_blank' rel='nofollow'>http&#58;//ra.uniandes.edu.co/pki/pub/crl/cacrl.crl</a>
fetch-crl[2169]&#58; 20120917T115210-0500 could not download a valid file from &#39;<a href='http&#58;//ra.uniandes.edu.co/pki/pub/crl/cacrl.crl&#39' target='_blank' rel='nofollow'>http&#58;//ra.uniandes.edu.co/pki/pub/crl/cacrl.crl&#39</a>;

The error on the RSV tests is&#58;

CRITICAL&#58; Probe ended with unexpected error condition2012-09-17T17&#58;16&#58;16Z
CRITICAL&#58; CRL file for CA with hash fc1898ec has not been updated since 2012/09/07 12&#58;34&#58;09

But the CRL that we have looks OK&#58;

/etc/grid-security/certificates
root@ce1# ls -l *fc1898ec*
lrwxrwxrwx 1 root root   14 Aug 27 16&#58;00 fc1898ec.0 -&#62; UniandesCA.pem
lrwxrwxrwx 1 root root   21 Aug 27 16&#58;00 fc1898ec.namespaces -&#62; UniandesCA.namespaces
-rw-r--r-- 1 root root 1003 Sep  7 12&#58;34 fc1898ec.r0
lrwxrwxrwx 1 root root   25 Aug 27 16&#58;00 fc1898ec.signing_policy -&#62; UniandesCA.signing_policy
/etc/grid-security/certificates
root@ce1# openssl crl -hash -inform PEM -in fc1898ec.r0 -noout
fc1898ec
/etc/grid-security/certificates
root@ce1#

Any ideas?  Thanks!

Kevin

On Sep 17, 2012, at 11&#58;10 AM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12557#1347900668'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T16:51:08+00:00">Sep 17, 2012 04:51 PM UTC</time> by <b>john.mora@....</b><a class="anchor" name="1347900668">&nbsp;</a></div><pre>Brian -

Thanks for the information. Let me look into it and I&#39;ll let you know what
I find.

- John

On Mon, Sep 17, 2012 at 11&#58;10 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12557#1347898227'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-17T16:10:27+00:00">Sep 17, 2012 04:10 PM UTC</time><a class="anchor" name="1347898227">&nbsp;</a></div><pre>Hi John,

fetch-crl will refuse to update a CRL it believes to be invalid (ref <a href='http&#58;//jira.opensciencegrid.org/browse/SOFTWARE-689' target='_blank' rel='nofollow'>http&#58;//jira.opensciencegrid.org/browse/SOFTWARE-689</a>).  Two thoughts&#58;
1) Run fetch-crl by hand and post the results.  Scan for any error-looking-messages.
2) Check the bad CRL by hand&#58;
openssl crl -hash -inform PEM -in ${crlhashfile} -noout

If you do have an invalid CRL, I&#39;d sure appreciate it if you could post it so we can try to speculate why/how it went bad.  For example (and this is definitely not your case, judging by the &#34;ls -l&#34; outputs below), we have previously had issues with XFS truncating the CRL to be zero-sized.

Hope this helps - can always find me in the chat room if you want to debug realtime.

Brian

-- by Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='12557#1347648849'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-14T18:54:09+00:00">Sep 14, 2012 06:54 PM UTC</time><a class="anchor" name="1347648849">&nbsp;</a></div><pre>Marco - what debugging output would you like us to collect?

Thanks,
- John

-- by John G. Mora</pre></div><div class='update_description'><i onclick="document.location='12557#1347382999'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-11T17:03:19+00:00">Sep 11, 2012 05:03 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1347382999">&nbsp;</a></div><pre>Just a status update&#58; I&#39;ve added Marco Mambelli to the ticket. He&#39;s the one who wrote the CRL RSV probes, so he should be better at figuring out what&#39;s wrong than me.
-Mat</pre></div><div class='update_description'><i onclick="document.location='12557#1347043459'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-07T18:44:19+00:00">Sep 7, 2012 06:44 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1347043459">&nbsp;</a></div><pre>Hi John,
I&#39;ll continue to work on this. Apologies for not responding sooner; I had been dealing with local issues.
-Mat</pre></div><div class='update_description'><i onclick="document.location='12557#1347035722'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-07T16:35:22+00:00">Sep 7, 2012 04:35 PM UTC</time><a class="anchor" name="1347035722">&nbsp;</a></div><pre>Mat -

Who should be bugged upstream about debugging this issue? We&#39;re still failing on the RSV CRL metric. I&#39;ll be out of town until Thursday, but Kevin is available to work on this issue with anyone that can assist.

Thanks,
- John

-- by John G. Mora</pre></div><div class='update_description'><i onclick="document.location='12557#1346882528'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-05T22:02:08+00:00">Sep 5, 2012 10:02 PM UTC</time> by <b>Kevin Buterbaugh</b><a class="anchor" name="1346882528">&nbsp;</a></div><pre>Hi Mat,

John is out sick today but this issue has never been resolved.  We&#39;re still seeing the failures&#58;

CRITICAL&#58; 103 CRLs tested.	0 had not been updated for at least 72 hours;
0 CRLs have not been updated for at least 9 hours;
103 CRLs have been updated with the last 9 hours.
1 CRL/s is/are missing.

2012-09-05T17&#58;30&#58;13Z
WARNING&#58; MISSING&#58; CRL file for 20ce830e (type 1) is missing. OSG policy requires CRL for every CA distributed by OSG.
CRITICAL&#58; Warning messages persisted too long. Escalating WARNING to ERROR.

Kevin

On Sep 5, 2012, at 4&#58;55 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12557#1346882101'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-09-05T21:55:01+00:00">Sep 5, 2012 09:55 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1346882101">&nbsp;</a></div><pre>Hi John,
Can I resolve this?
Thanks,
-Mat</pre></div><div class='update_description'><i onclick="document.location='12557#1346296938'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-30T03:22:18+00:00">Aug 30, 2012 03:22 AM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1346296938">&nbsp;</a></div><pre>Hi John,

Your second message did not get into the ticket system--it is blank. However, your current RSV status is all green. Are you still having problems, or can this be resolved?

-Mat</pre></div><div class='update_description'><i onclick="document.location='12557#1346164514'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-28T14:35:14+00:00">Aug 28, 2012 02:35 PM UTC</time><a class="anchor" name="1346164514">&nbsp;</a></div><pre>-- by John G. Mora</pre></div><div class='update_description'><i onclick="document.location='12557#1346102624'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-27T21:23:44+00:00">Aug 27, 2012 09:23 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1346102624">&nbsp;</a></div><pre>[by John G. Mora]

Both our CEs recently began failing the RSV checks for crl-expiry, but the reason isn&#39;t entirely clear.

The RSV output is&#58;

-sh-3.2$ rsv-control --run --host ce1.accre.vanderbilt.edu org.osg.certificates.crl-expiry

Running metric org.osg.certificates.crl-expiry&#58;

metricName&#58; org.osg.certificates.crl-expiry
metricType&#58; status
timestamp&#58; 2012-08-27 16&#58;02&#58;21 CDT
metricStatus&#58; CRITICAL
serviceType&#58; OSG-CE
serviceURI&#58; ce1.accre.vanderbilt.edu
gatheredAt&#58; ce1.accre.vanderbilt.edu
summaryData&#58; CRITICAL
detailsData&#58; CRITICAL&#58; 103 CRLs tested.
0 had not been updated for at least 72 hours;
0 CRLs have not been updated for at least 9 hours;
103 CRLs have been updated with the last 9 hours.
1 CRL/s is/are missing.

2012-08-27T21&#58;02&#58;10Z
WARNING&#58; MISSING&#58; CRL file for 20ce830e (type 1) is missing. OSG policy requires CRL for every CA distributed by OSG.
CRITICAL&#58; Warning messages persisted too long. Escalating WARNING to ERROR.

EOT

===
root@ce1# ls -la 20ce830e*
lrwxrwxrwx 1 root root   26 Aug 27 16&#58;00 20ce830e.0 -&#62; TERENA-eScience-SSL-CA.pem
lrwxrwxrwx 1 root root   33 Aug 27 16&#58;00 20ce830e.namespaces -&#62; TERENA-eScience-SSL-CA.namespaces
-rw-r--r-- 1 root root 1283 Aug 27 16&#58;12 20ce830e.r0
<div id='show_1451983377' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1451983377'>lrwxrwxrwx 1 root root   37 Aug 27 16&#58;00 20ce830e.signing_policy -&#62; TERENA-eScience-SSL-CA.signing_policy

root@ce1# ls -la *fc1898ec*
lrwxrwxrwx 1 root root 14 Aug 27 16&#58;00 fc1898ec.0 -&#62; UniandesCA.pem
lrwxrwxrwx 1 root root 21 Aug 27 16&#58;00 fc1898ec.namespaces -&#62; UniandesCA.namespaces
lrwxrwxrwx 1 root root 25 Aug 27 16&#58;00 fc1898ec.signing_policy -&#62; UniandesCA.signing_policy

===

-sh-3.2$ rsv-control --run --host ce2.accre.vanderbilt.edu org.osg.certificates.crl-expiry

Running metric org.osg.certificates.crl-expiry&#58;

metricName&#58; org.osg.certificates.crl-expiry
metricType&#58; status
timestamp&#58; 2012-08-27 16&#58;03&#58;17 CDT
metricStatus&#58; CRITICAL
serviceType&#58; OSG-CE
serviceURI&#58; ce2.accre.vanderbilt.edu
gatheredAt&#58; ce1.accre.vanderbilt.edu
summaryData&#58; CRITICAL
detailsData&#58; CRITICAL&#58; Probe ended with unexpected error condition
2012-08-27T21&#58;03&#58;05Z
CRITICAL&#58; CRL file for CA with hash fc1898ec has not been updated since 2012/08/17 15&#58;07&#58;00

EOT

===
root@ce2# ls -la *fc1898ec*
lrwxrwxrwx 1 root root   14 Aug 27 16&#58;00 fc1898ec.0 -&#62; UniandesCA.pem
-rw-r--r-- 1 root root   48 Aug  2 09&#58;08 fc1898ec.crl_url
-rw-r--r-- 1 root root  312 Aug  2 09&#58;08 fc1898ec.info
lrwxrwxrwx 1 root root   21 Aug 27 16&#58;00 fc1898ec.namespaces -&#62; UniandesCA.namespaces
-rw-r--r-- 1 root root 1003 Aug 17 15&#58;07 fc1898ec.r0
lrwxrwxrwx 1 root root   25 Aug 27 16&#58;00 fc1898ec.signing_policy -&#62; UniandesCA.signing_policy
===

=======================

root@ce1# rpm -q osg-ca-certs.noarch
osg-ca-certs-1.29-2.osg.el5

root@ce2# rpm -q osg-ca-certs.noarch
osg-ca-certs-1.29-2.osg.el5

========================

Both nodes have fetch-crl present in /etc/cron.d and it appears to be running regularly.

Assistance in debugging is appreciated; please let me know if you need additional information. The two directories are inconsistent and I&#39;m curious as to how to get them consistent again.

Thank you,
- John

</div><script type='text/javascript'>
        $('#show_1451983377').click(function() {
            $('#detail_1451983377').slideDown("normal");
            $('#show_1451983377').hide();
            $('#hide_1451983377').show();
        });
        $('#hide_1451983377').click(function() {
            $('#detail_1451983377').slideUp();
            $('#hide_1451983377').hide();
            $('#show_1451983377').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F12557">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
