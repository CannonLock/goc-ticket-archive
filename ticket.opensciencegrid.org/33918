<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[33918] 99109 - Stage out errors for merges at MIT</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=33918" method="post">
<div class="page-header">
    <h3><span class="muted">33918</span> / 99109 - Stage out errors for merges at MIT</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Jennifer Adelman-McCarthy</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Jennifer Adelman-McCarthy</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier2</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">High</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-06-15</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">USCMS Tier 2 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=128456">128456</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=33918", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/33918?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/33918?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%2099109%20-%20Stage%20out%20errors%20for%20merges%20at%20MIT%20ISSUE%3D33918%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='33918#1497629186'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-16T16:06:26+00:00">Jun 16, 2017 04:06 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1497629186">&nbsp;</a></div><pre>Closing this ticket per the last update.</pre></div><div class='update_description'><i onclick="document.location='33918#1497014448'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-09T13:20:48+00:00">Jun 9, 2017 01:20 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1497014448">&nbsp;</a></div><pre>Hi,

Everything has been running smoothly at MIT. I think we can close this ticket.

Regards,&#13;

-- by Paola Katherine Rozo at Fri Jun 09 13&#58;19&#58;41 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1496942058'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-08T17:14:18+00:00">Jun 8, 2017 05:14 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1496942058">&nbsp;</a></div><pre>Paola,

Is that acceptable to you?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='33918#1496315236'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-01T11:07:16+00:00">Jun 1, 2017 11:07 AM UTC</time><a class="anchor" name="1496315236">&nbsp;</a></div><pre>It can only happen if DN for this activity changes. In such case I would need to map it to appropriate group as I did
with the current DN.

-Max

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=maxi/CN=682514/CN=Maxim Goncharov</pre></div><div class='update_description'><i onclick="document.location='33918#1496314514'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-01T10:55:14+00:00">Jun 1, 2017 10:55 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1496314514">&nbsp;</a></div><pre>Hi Max,

We did some recoveries, and the problem just went away.
How can we ensure that this will not happen again?

Thanks.&#13;

-- by Paola Katherine Rozo at Thu Jun 01 10&#58;54&#58;52 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1496306108'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-01T08:35:08+00:00">Jun 1, 2017 08:35 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1496306108">&nbsp;</a></div><pre>Dear all,

The solution for the ticket Natalia pointed was to change the parent folder permissions, in that case, /store/express.
In our case, should we modify the /store/data permissions?

Thanks.&#13;

-- by Paola Katherine Rozo at Thu Jun 01 08&#58;34&#58;21 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1496238167'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-31T13:42:47+00:00">May 31, 2017 01:42 PM UTC</time><a class="anchor" name="1496238167">&nbsp;</a></div><pre>We just adjusted permission settings, let&#39;s see if the problem goes away.

-Max

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=maxi/CN=682514/CN=Maxim Goncharov</pre></div><div class='update_description'><i onclick="document.location='33918#1496176812'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-30T20:40:12+00:00">May 30, 2017 08:40 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1496176812">&nbsp;</a></div><pre>Not sure if this is directly related, but here is another ticket to MIT, where it looks like  permissions are flipping around&#58;
<a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=128117' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=128117</a>
Cheers,
Natalia.

-- by Natalia Ratnikova at Tue May 30 20&#58;39&#58;03 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1496176572'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-30T20:36:12+00:00">May 30, 2017 08:36 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1496176572">&nbsp;</a></div><pre>Hi,

I talked to Seangchan about production jobs. The production actually writes data directly to the same namespace where PhEDEx puts the transferred data, and then injects the locally produced datasets into PhEDEx database. Neither PhEDEx, nor Production control the ownership of the files on the storage level, this is done by the site/storage admins.

Could it be that PhEDEx has places the RAW dataset in /store/data/Run2016B/HighMultiplicityEOF/RAW and created the parent directory with a permissions which do not allow the production job to create the /store/data/Run2016B/HighMultiplicityEOF/MINIAOD and write the reprocessed data?

When I list the RAW and the parent directory at MIT, the ownership and the mode look suspicious&#58;

-bash-4.1$ gfal-ls -la <a href='srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/data/Run2016B/HighMultiplicityEOF/' target='_blank' rel='nofollow'>srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/data/Run2016B/HighMultiplicityEOF/</a>
d--------- 1 0 0 0 May 20 19&#58;16 RAW
-bash-4.1$ gfal-ls -la <a href='srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/data/Run2016B/' target='_blank' rel='nofollow'>srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/data/Run2016B/</a> | head -11
d--------- 1 0 0 0 May 19 19&#58;15 BTagCSV
d--------- 1 0 0 0 May 23 15&#58;45 BTagMu
d--------- 1 0 0 0 May 21 17&#58;49 Charmonium
d--------- 1 0 0 0 May 20 20&#58;09 DoubleEG
d--------- 1 0 0 0 May 9 04&#58;18 DoubleMuon
d--------- 1 0 0 0 May 21 19&#58;56 DoubleMuonLowMass
d--------- 1 0 0 0 Jul 13 2016 HINCaloJets
d--------- 1 0 0 0 Jul 13 2016 HINPFJets
d--------- 1 0 0 0 Jul 12 2016 HLTPhysics1
d--------- 1 0 0 0 May 21 23&#58;24 HTMHT
d--------- 1 0 0 0 May 20 19&#58;16 HighMultiplicityEOF

For comparison, Nebraska&#39;s permissions look like this&#58;

-bash-4.1$ gfal-ls -la <a href='gsiftp&#58;//red-gridftp.unl.edu//mnt/hadoop/user/uscms01/pnfs/unl.edu/data4/cms/store/data/Run2016B/' target='_blank' rel='nofollow'>gsiftp&#58;//red-gridftp.unl.edu//mnt/hadoop/user/uscms01/pnfs/unl.edu/data4/cms/store/data/Run2016B/</a> | head
drwxrwxr-x 1 0 1916 4096 Mar 28 20&#58;02 BTagCSV
drwxrwxr-x 1 0 1916 4096 May 23 08&#58;48 BTagMu
drwxrwxr-x 1 0 1916 4096 May 21 18&#58;49 Charmonium
drwxrwxr-x 1 0 1916 4096 May 20 20&#58;16 DoubleEG
drwxrwxr-x 1 0 1916 4096 May 9 02&#58;40 DoubleMuon
drwxrwxr-x 1 0 1916 4096 May 21 20&#58;51 DoubleMuonLowMass
drwxrwxr-x 1 0 32007 4096 Apr 11 23&#58;24 HLTPhysics
drwxrwxr-x 1 0 1916 4096 May 22 00&#58;21 HTMHT
drwxrwxr-x 1 0 1916 4096 Mar 28 20&#58;02 HighMultiplicity85EOF
<div id='show_1236408477' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1236408477'>drwxrwxr-x 1 0 1916 4096 Mar 28 20&#58;02 HighMultiplicityEOF

-- by Natalia Ratnikova at Tue May 30 20&#58;35&#58;56 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a>
</div><script type='text/javascript'>
        $('#show_1236408477').click(function() {
            $('#detail_1236408477').slideDown("normal");
            $('#show_1236408477').hide();
            $('#hide_1236408477').show();
        });
        $('#hide_1236408477').click(function() {
            $('#detail_1236408477').slideUp();
            $('#hide_1236408477').hide();
            $('#show_1236408477').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='33918#1496175731'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-30T20:22:11+00:00">May 30, 2017 08:22 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1496175731">&nbsp;</a></div><pre>Hi Max, hi Natalia,

both is perfectly fine. Having RAW data in&#58;
/store/data/Run2016B/HighMultiplicityEOF/RAW
written by Phedex

and RE-RECO files in
/store/data/Run2016B/HighMultiplicityEOF/MINIAOD/18Apr2017_ver2-v1
written by Production AND perhaps later by Phedex, just assume someone subscribes the full dataset to MIT.

Phedex and Production need to have write access to potentially the same directories. This has been since &#34;ever&#34;. Do you really have different permissions for both? I wonder how that used work reliably before.

We (or at least I) should have missed something....

Cheers, Christoph

-- by Christoph Wissing at Tue May 30 20&#58;21&#58;08 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1496172612'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-30T19:30:12+00:00">May 30, 2017 07:30 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1496172612">&nbsp;</a></div><pre>Natalia Ratnikova has subscribed to this ticket.

-- by Natalia Ratnikova at Tue May 30 17&#58;28&#58;29 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1496172561'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-30T19:29:21+00:00">May 30, 2017 07:29 PM UTC</time><a class="anchor" name="1496172561">&nbsp;</a></div><pre>Thanks Natalia,
I should have been direct in my response asking why the job wants to write into a place
where it should not be writing anything.

-Max

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=maxi/CN=682514/CN=Maxim Goncharov</pre></div><div class='update_description'><i onclick="document.location='33918#1496165273'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-30T17:27:53+00:00">May 30, 2017 05:27 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1496165273">&nbsp;</a></div><pre>Dear All,

from PhEDEx side I see a block from  /HighMultiplicityEOF/Run2016B-v1/RAW  was subscribed to MIT about ten days ago for prestaging&#58;

<a href='https&#58;//cmsweb.cern.ch/phedex/prod/Request&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Request&#58</a>;&#58;View?request=1007148&.submit=Submit

Why would production jobs attempt to write into the space managed by PhEDEx?

-- by Natalia Ratnikova at Tue May 30 17&#58;26&#58;48 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1496159676'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-30T15:54:36+00:00">May 30, 2017 03:54 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1496159676">&nbsp;</a></div><pre>adding transfer team, just in case there is a question
regarding directory permissions/roles/etc.Changed CC to ;cms-comp-ops-workflow-team@....;cms-comp-ops-site-support-team@....; cms-comp-ops-transfer-team@....

-- by Stephan Lammel at Tue May 30 15&#58;54&#58;22 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1496158653'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-30T15:37:33+00:00">May 30, 2017 03:37 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1496158653">&nbsp;</a></div><pre>Dear Max,

All logs reported in here are related to productions jobs.

Regards.

-- by Paola Katherine Rozo at Tue May 30 15&#58;36&#58;25 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1496157569'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-30T15:19:29+00:00">May 30, 2017 03:19 PM UTC</time><a class="anchor" name="1496157569">&nbsp;</a></div><pre>The problem is that the directory
/cms/store/data/Run2016B/HighMultiplicityEOF
is created by PhEDEx, while now crab (?) jobs wants to write there.
Of course crab DN it is mapped to a different user who does not have permission to write there.

-Max

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=maxi/CN=682514/CN=Maxim Goncharov</pre></div><div class='update_description'><i onclick="document.location='33918#1496138486'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-30T10:01:26+00:00">May 30, 2017 10:01 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1496138486">&nbsp;</a></div><pre>Hi everyone,

Paola asked me to take a look at this case and, from the logs she provided in this ticket (condor.4961.79.out), there is a clear
failure while creating the output directory&#58;
[SE][Mkdir][SRM_FAILURE] httpg&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server&#58; <a href='srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/data/Run2016B/HighMultiplicityEOF/MINIAOD/18Apr2017_ver1-v1/910000&#58' target='_blank' rel='nofollow'>srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/data/Run2016B/HighMultiplicityEOF/MINIAOD/18Apr2017_ver1-v1/910000&#58</a>; Error&#58;/bin/mkdir&#58; cannot create directory &#96;/mnt/hadoop/cms/store/data/Run2016B/HighMultiplicityEOF/MINIAOD&#39;&#58; Permission denied
Ref-u cmspro87  /bin/mkdir /mnt/hadoop/cms/store/data/Run2016B/HighMultiplicityEOF/MINIAOD

The stage-out is performed with lcg-cp command, which is supposed to create the output directory in case it does not exist.

Can the MIT admins investigate this problem and fix the directory permissions and/or local user mapping?

In addition to that, could you please migrate to gfal2 tools? AFAIK lcg/smr utils have been deprecated already.
Maybe the Site Support Team can help you with this migration.

Thanks,
Alan.

-- by Alan Malta at Tue May 30 10&#58;01&#58;04 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1495807314'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-26T14:01:54+00:00">May 26, 2017 02:01 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495807314">&nbsp;</a></div><pre>Yes, it does not explain why local stage out failed.

-- by Rokas maciulaitis at Fri May 26 14&#58;01&#58;25 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1495807015'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-26T13:56:55+00:00">May 26, 2017 01:56 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495807015">&nbsp;</a></div><pre>Good catch Rokas!

Max, can you take a look and please fix this?

This leaves the question why the stage-out at MIT failed in the
first place, no?

Thanks,
cheers,  Stephan

On Fri, 26 May 2017, helpdesk@.... wrote&#58;

<font color='#7F7E6F'>&#62; Date&#58; Fri, 26 May 2017 08&#58;04&#58;07 +0000</font>
<font color='#7F7E6F'>&#62; From&#58; helpdesk@....</font>
<font color='#7F7E6F'>&#62; To&#58; cms-comp-ops-workflow-team@...., cms-comp-ops-site-support-team@....</font>
<font color='#7F7E6F'>&#62; Subject&#58; GGUS-Ticket-ID&#58; # 128456  &#34;ASSIGNED&#34;  &#34;OSG(Prod)&#34;</font>
<font color='#7F7E6F'>&#62;     &#34;99109 - Stage out errors for merges at MIT&#34;</font>
<font color='#7F7E6F'>&#62; Resent-From&#58; &#60;cms-comp-ops-site-support-team@....&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Hello,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GGUS Ticket #128456 was updated.</font>
<font color='#7F7E6F'>&#62; You receive this mail in CC for your information.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; REFERENCE LINK&#58; <a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=128456</a></font>
<font color='#7F7E6F'>&#62; SUBJECT&#58; 99109 - Stage out errors for merges at MIT</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; =====================</font>
<font color='#7F7E6F'>&#62; LATEST MODIFICATIONS&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; LAST MODIFIER -&#62; Rokas maciulaitis</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; PUBLIC DIARY -&#62;</font>
<font color='#7F7E6F'>&#62; I think there is typo in site-local-config -  &#60;lfn-prefix value=&#34;<a href='srm&#58;//srmb.ihepa.ufl.edu&#58;8443/srm/v2/server?SFN=/cms/data&#34' target='_blank' rel='nofollow'>srm&#58;//srmb.ihepa.ufl.edu&#58;8443/srm/v2/server?SFN=/cms/data&#34</a>;/&#62; [1], that explains why fallback stage out failed.</font>
<div id='show_1580245036' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1580245036'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [1] <a href='https&#58;//gitlab.cern.ch/SITECONF/T2_US_MIT/blob/master/JobConfig/site-local-config.xml#L18' target='_blank' rel='nofollow'>https&#58;//gitlab.cern.ch/SITECONF/T2_US_MIT/blob/master/JobConfig/site-local-config.xml#L18</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>
<font color='#7F7E6F'>&#62; This is an automated mail. When replying don&#39;t change the subject line!</font>
<font color='#7F7E6F'>&#62; S T R I P  P R E V I O U S  M A I L S please!!</font>
<font color='#7F7E6F'>&#62; *********************************************************************************</font>
<font color='#7F7E6F'>&#62;</font>

-- by Stephan Lammel at Fri May 26 13&#58;56&#58;01 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a>
</div><script type='text/javascript'>
        $('#show_1580245036').click(function() {
            $('#detail_1580245036').slideDown("normal");
            $('#show_1580245036').hide();
            $('#hide_1580245036').show();
        });
        $('#hide_1580245036').click(function() {
            $('#detail_1580245036').slideUp();
            $('#hide_1580245036').hide();
            $('#show_1580245036').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='33918#1495785856'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-26T08:04:16+00:00">May 26, 2017 08:04 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495785856">&nbsp;</a></div><pre>I think there is typo in site-local-config -  &#60;lfn-prefix value=&#34;<a href='srm&#58;//srmb.ihepa.ufl.edu&#58;8443/srm/v2/server?SFN=/cms/data&#34' target='_blank' rel='nofollow'>srm&#58;//srmb.ihepa.ufl.edu&#58;8443/srm/v2/server?SFN=/cms/data&#34</a>;/&#62; [1], that explains why fallback stage out failed.

[1] <a href='https&#58;//gitlab.cern.ch/SITECONF/T2_US_MIT/blob/master/JobConfig/site-local-config.xml#L18' target='_blank' rel='nofollow'>https&#58;//gitlab.cern.ch/SITECONF/T2_US_MIT/blob/master/JobConfig/site-local-config.xml#L18</a>

-- by Rokas maciulaitis at Fri May 26 08&#58;04&#58;01 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1495662242'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-24T21:44:02+00:00">May 24, 2017 09:44 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495662242">&nbsp;</a></div><pre>Hallo Paola,
the log file shows that the connection to Florida, srmb.ihepa.ufl.edu, failed.
This has nothing to do with access problems to files at MIT that you reported
earlier. What was the exact stage out command run?
As a note&#58; The hostname of the SRM endpoint at Florida is srm.ihepa.ufl.edu
NOT srmb.ihepa.ufl.edu. So, connections failing to srmb... is expected.
Thanks,
- Stephan

-- by Stephan Lammel at Wed May 24 21&#58;43&#58;19 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1495659720'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-24T21:02:00+00:00">May 24, 2017 09:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495659720">&nbsp;</a></div><pre>Hi Rokas, all,

The ACDC did not work [**]. We are getting some &#34;lcg_cp&#58; Communication error on send&#34;.
Could someone please take a look?

Thanks.

[**]
<a href='https&#58;//cmst2.web.cern.ch/cmst2/unified//joblogs/prozober_ACDC1_Run2016B-v1-HighMultiplicityEOF-18Apr2017_ver1_8028_170524_142354_5443/99109/DataProcessingMergeMINIAODoutput/6fe41d1e-407e-11e7-be68-02163e01820e-0-2-logArchive/stageOut1/stageout.log' target='_blank' rel='nofollow'>https&#58;//cmst2.web.cern.ch/cmst2/unified//joblogs/prozober_ACDC1_Run2016B-v1-HighMultiplicityEOF-18Apr2017_ver1_8028_170524_142354_5443/99109/DataProcessingMergeMINIAODoutput/6fe41d1e-407e-11e7-be68-02163e01820e-0-2-logArchive/stageOut1/stageout.log</a>

-- by Paola Katherine Rozo at Wed May 24 21&#58;01&#58;11 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1495628581'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-24T12:23:01+00:00">May 24, 2017 12:23 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495628581">&nbsp;</a></div><pre>I will try an ACDC to recover the file /store/unmerged/Run2016B/HighMultiplicityEOF/MINIAOD/18Apr2017_ver1-v1/100000/5CAB3F20-E03D-E711-BEC8-0019B9D96FC5.root.
I will report the results in here.

-- by Paola Katherine Rozo at Wed May 24 12&#58;21&#58;55 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1495627860'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-24T12:11:00+00:00">May 24, 2017 12:11 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495627860">&nbsp;</a></div><pre>I tried to copy one of the files you provided [1]. It is accessible now.

[1] [rmaciula@vocms037 ~]$ xrdcp -d 1 -f root&#58;//xrootd.cmsaf.mit.edu//store/unmerged/Run2016B/HighMultiplicityEOF/MINIAOD/18Apr2017_ver1-v1/100000/5CAB3F20-E03D-E711-BEC8-0019B9D96FC5.root /dev/null
[2.053MB/2.053MB][100%][==================================================][525.5kB/s]

-- by Rokas maciulaitis at Wed May 24 12&#58;09&#58;51 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1495626958'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-24T11:55:58+00:00">May 24, 2017 11:55 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495626958">&nbsp;</a></div><pre>Hi Rokas,

The workflow started running on Sun, 21 May 2017, so, the files are less than a week old.

-- by Paola Katherine Rozo at Wed May 24 11&#58;55&#58;25 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1495625755'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-24T11:35:55+00:00">May 24, 2017 11:35 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495625755">&nbsp;</a></div><pre>How fresh are these files?

Files older than 2 weeks usually are deleted on /store/unmerged/ area, with the exception of files belonging to ongoing workflows, which should be defined - <a href='https&#58;//cmst2.web.cern.ch/cmst2/unified/listProtectedLFN.txt' target='_blank' rel='nofollow'>https&#58;//cmst2.web.cern.ch/cmst2/unified/listProtectedLFN.txt</a>

You have reported the similar issue a couple months ago - <a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=126839' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=126839</a>

-- by Rokas maciulaitis at Wed May 24 11&#58;35&#58;21 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1495576833'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-23T22:00:33+00:00">May 23, 2017 10:00 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495576833">&nbsp;</a></div><pre>P.S.&#58; the gfal2 utility thinks the files are available&#58;

sh-4.1$ /usr/bin/gfal-ls -l &#39;<a href='srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/unmerged/Run2016B/HighMultiplicityEOF/AOD/18Apr2017_ver1-v1/100000/BAC52B20-E03D-E711-BEC8-0019B9D96FC5.root&#39' target='_blank' rel='nofollow'>srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/unmerged/Run2016B/HighMultiplicityEOF/AOD/18Apr2017_ver1-v1/100000/BAC52B20-E03D-E711-BEC8-0019B9D96FC5.root&#39</a>;
-rwxr-xr-x 1   2    2    May 21 05&#58;48 2296599   <a href='srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/unmerged/Run2016B/HighMultiplicityEOF/AOD/18Apr2017_ver1-v1/100000/BAC52B20-E03D-E711-BEC8-0019B9D96FC5.root' target='_blank' rel='nofollow'>srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/unmerged/Run2016B/HighMultiplicityEOF/AOD/18Apr2017_ver1-v1/100000/BAC52B20-E03D-E711-BEC8-0019B9D96FC5.root</a>

sh-4.1$ /usr/bin/gfal-ls -l &#39;<a href='srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/unmerged/Run2016B/HighMultiplicityEOF/DQMIO/18Apr2017_ver1-v1/100000/B4432C20-E03D-E711-BEC8-0019B9D96FC5.root&#39' target='_blank' rel='nofollow'>srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/unmerged/Run2016B/HighMultiplicityEOF/DQMIO/18Apr2017_ver1-v1/100000/B4432C20-E03D-E711-BEC8-0019B9D96FC5.root&#39</a>;
-rwxr-xr-x 1   2    2    May 21 05&#58;48 6395483   <a href='srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/unmerged/Run2016B/HighMultiplicityEOF/DQMIO/18Apr2017_ver1-v1/100000/B4432C20-E03D-E711-BEC8-0019B9D96FC5.root' target='_blank' rel='nofollow'>srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/unmerged/Run2016B/HighMultiplicityEOF/DQMIO/18Apr2017_ver1-v1/100000/B4432C20-E03D-E711-BEC8-0019B9D96FC5.root</a>

sh-4.1$ /usr/bin/gfal-ls -l &#39;<a href='srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/unmerged/Run2016B/HighMultiplicityEOF/MINIAOD/18Apr2017_ver1-v1/100000/5CAB3F20-E03D-E711-BEC8-0019B9D96FC5.root' target='_blank' rel='nofollow'>srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/unmerged/Run2016B/HighMultiplicityEOF/MINIAOD/18Apr2017_ver1-v1/100000/5CAB3F20-E03D-E711-BEC8-0019B9D96FC5.root</a> &#39;
-rwxr-xr-x 1   2    2    May 21 05&#58;48 2152393   <a href='srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/unmerged/Run2016B/HighMultiplicityEOF/MINIAOD/18Apr2017_ver1-v1/100000/5CAB3F20-E03D-E711-BEC8-0019B9D96FC5.root' target='_blank' rel='nofollow'>srm&#58;//se01.cmsaf.mit.edu&#58;8443/srm/v2/server?SFN=/mnt/hadoop/cms/store/unmerged/Run2016B/HighMultiplicityEOF/MINIAOD/18Apr2017_ver1-v1/100000/5CAB3F20-E03D-E711-BEC8-0019B9D96FC5.root</a>

-- by Stephan Lammel at Tue May 23 22&#58;00&#58;16 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1495576293'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-23T21:51:33+00:00">May 23, 2017 09:51 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495576293">&nbsp;</a></div><pre>The files are probably best checked by the local admins (to
exclude any SRM/xrootd issue). Max could you take a look
let Paola know? Thanks,
- Stephan

-- by Stephan Lammel at Tue May 23 21&#58;50&#58;59 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1495572687'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-23T20:51:27+00:00">May 23, 2017 08:51 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495572687">&nbsp;</a></div><pre>Thanks Rokas,

Could this problem cause missing files?
We would like to know if these files are in place [*], could you please help us?

Regards.

[*]
/store/unmerged/Run2016B/HighMultiplicityEOF/AOD/18Apr2017_ver1-v1/100000/BAC52B20-E03D-E711-BEC8-0019B9D96FC5.root
/store/unmerged/Run2016B/HighMultiplicityEOF/DQMIO/18Apr2017_ver1-v1/100000/B4432C20-E03D-E711-BEC8-0019B9D96FC5.root
/store/unmerged/Run2016B/HighMultiplicityEOF/MINIAOD/18Apr2017_ver1-v1/100000/5CAB3F20-E03D-E711-BEC8-0019B9D96FC5.root

-- by Paola Katherine Rozo at Tue May 23 20&#58;51&#58;14 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1495570644'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-23T20:17:24+00:00">May 23, 2017 08:17 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495570644">&nbsp;</a></div><pre>Thanks for the logs.

Looks like SE of MIT is facing some problems. I see some timeout errors in recent transfers [1]. Looks like SE is too loaded.

[1] <a href='https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58' target='_blank' rel='nofollow'>https&#58;//cmsweb.cern.ch/phedex/prod/Activity&#58</a>;&#58;ErrorInfo?tofilter=T2_US_MIT.*&fromfilter=.*&report_code=.*&xfer_code=.*&to_pfn=.*&from_pfn=.*&log_detail=.*&log_validate=.*&.submit=Update#

-- by Rokas maciulaitis at Tue May 23 20&#58;17&#58;05 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a></pre></div><div class='update_description'><i onclick="document.location='33918#1495566558'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-23T19:09:18+00:00">May 23, 2017 07:09 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495566558">&nbsp;</a></div><pre>I am seeing an uptick in 99109 errors for stage out Merge at MIT.
Can site support check the site for me and determine if we need to open a ticket?  WMArchive is down right now so I can&#39;t check temporal issues

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128456</a>

[Ticket History]
Subject&#58; 99109 - Stage out errors for merges at MIT
Ticket Type&#58; USER
CC&#58; ;cms-comp-ops-workflow-team@....;cms-comp-ops-site-support-team@....
-- by Jennifer Adelman-McCarthy at Tue May 23 03&#58;05&#58;06 UTC 2017

Added attachment MIT
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT107509' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT107509</a>

-- by Jennifer Adelman-McCarthy at Tue May 23 03&#58;05&#58;08 UTC 2017

Hi,

T2_US_MIT looks good in our probing systems, completely green.

According to the logs fall-back stage-out failed in T2_US_Florida, so I think local stage out have failed even before. Could you check for more detailed logs?

T2_US_Florida is also completely green in our probing systems.

-- by Rokas maciulaitis at Tue May 23 07&#58;05&#58;53 UTC 2017

Dear all,

All workflows we are trying to recover at MIT are failing for the same reason.
Here, a couple of logs[*].

Regards.

[*]
<div id='show_434622142' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_434622142'><a href='https&#58;//cmst2.web.cern.ch/cmst2/unified//joblogs/prozober_ACDC0_Run2016B-v1-HighMultiplicityEOF-18Apr2017_ver1_8028_170522_105214_174/99109/DataProcessingMergeMINIAODoutput/cd8cbc76-3ecd-11e7-b884-002590494fb0-0-0-logArchive/stageOut1/stageout.log' target='_blank' rel='nofollow'>https&#58;//cmst2.web.cern.ch/cmst2/unified//joblogs/prozober_ACDC0_Run2016B-v1-HighMultiplicityEOF-18Apr2017_ver1_8028_170522_105214_174/99109/DataProcessingMergeMINIAODoutput/cd8cbc76-3ecd-11e7-b884-002590494fb0-0-0-logArchive/stageOut1/stageout.log</a>
<a href='https&#58;//cmst2.web.cern.ch/cmst2/unified//joblogs/prozober_ACDC0_Run2016B-v1-HighMultiplicityEOF-18Apr2017_ver1_8028_170522_105206_9406/99109/DataProcessingMergeAODoutput/dee91fdc-3ecd-11e7-b884-002590494fb0-0-3-logArchive/stageOut1/stageout.log' target='_blank' rel='nofollow'>https&#58;//cmst2.web.cern.ch/cmst2/unified//joblogs/prozober_ACDC0_Run2016B-v1-HighMultiplicityEOF-18Apr2017_ver1_8028_170522_105206_9406/99109/DataProcessingMergeAODoutput/dee91fdc-3ecd-11e7-b884-002590494fb0-0-3-logArchive/stageOut1/stageout.log</a>

-- by Paola Katherine Rozo at Tue May 23 09&#58;21&#58;25 UTC 2017

Hi,

I think we should start looking why local stage out fails. The logs you provided are about fallback stage out (trying to use T2_US_Florida SE).

Recent MC test at T2_US_MIT done local stage out successfully - <a href='http&#58;//wlcg-sam-cms.cern.ch/dashboard/request.py/metricOutput?host=ce03.cmsaf.mit.edu&time=2017-05-23T08&#58' target='_blank' rel='nofollow'>http&#58;//wlcg-sam-cms.cern.ch/dashboard/request.py/metricOutput?host=ce03.cmsaf.mit.edu&time=2017-05-23T08&#58</a>;46&#58;44Z&metricfqan=org.cms.WN-mc%20(_cms_Role_production)

-- by Rokas maciulaitis at Tue May 23 09&#58;32&#58;03 UTC 2017

Added attachment Job_358284.tar.bz2
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT107515' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT107515</a>

-- by Paola Katherine Rozo at Tue May 23 19&#58;08&#58;44 UTC 2017

Priority has been changed from urgent to very urgent.
Dear site admin,

We are having some failures for merge task at your site. Every workflow we are trying to recover is getting the same failure.
It seems there is a problem with the lcg-del for fallback stage out. I am attaching the logs from one of the workflows.

Could you please help to understand what is going on?

Thanks.

-- by Paola Katherine Rozo at Tue May 23 19&#58;08&#58;45 UTC 2017
</div><script type='text/javascript'>
        $('#show_434622142').click(function() {
            $('#detail_434622142').slideDown("normal");
            $('#show_434622142').hide();
            $('#hide_434622142').show();
        });
        $('#hide_434622142').click(function() {
            $('#detail_434622142').slideUp();
            $('#hide_434622142').hide();
            $('#show_434622142').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F33918">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 33918});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
