<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[13641] Error &#34;Cannot verify AC signature!&#34; for OSG VO</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=13641" method="post">
<div class="page-header">
    <h3><span class="muted">13641</span> / Error &#34;Cannot verify AC signature!&#34; for OSG VO</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Marco Mambelli</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">OSG</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Marco Mambelli</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">CSC</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Wait for user response</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-03-11</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">CSC <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Tim Cartwright <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=13641", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/13641?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/13641?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Error%20%26%2334%3BCannot%20verify%20AC%20signature%21%26%2334%3B%20for%20OSG%20VO%20ISSUE%3D13641%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='13641#1365523275'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-09T16:01:15+00:00">Apr 9, 2013 04:01 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1365523275">&nbsp;</a></div><pre>It works now. Both with a new installation and the old one was failing before.
All attempts in the past failed (see ticket history).
Probably something changed in the OSG VO VOMS server configuration.
Closing the ticket.
Marco</pre></div><div class='update_description'><i onclick="document.location='13641#1365520786'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-04-09T15:19:46+00:00">Apr 9, 2013 03:19 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1365520786">&nbsp;</a></div><pre>Marco&#58; Can you please let us know whether the original problem in this ticket has been fixed, or if not, what fixes you have tried?</pre></div><div class='update_description'><i onclick="document.location='13641#1364314333'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-26T16:12:13+00:00">Mar 26, 2013 04:12 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1364314333">&nbsp;</a></div><pre>I&#39;ve learned a bit more about vomsdir/LSC file today. GOC (not software team) runs a command called osg-make-vomsdir to generate LSC files (with list of VOs in vomses). I am troubleshooting why this command isn&#39;t generating the correct content.</pre></div><div class='update_description'><i onclick="document.location='13641#1364226925'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-25T15:55:25+00:00">Mar 25, 2013 03:55 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1364226925">&nbsp;</a></div><pre>Neha,

Rob released the new version of vo-package (v44) tarball to software-itb service (which is used to create various RPMs by software team). I believe this will be released tomorrow to production and software team will rebuild RPMs from it.

However, unless I don&#39;t understand this, this will not fix the original issue Marco has reported.

Reasons are following..
1) We *already* publish correct(?) information in our current production version of vo-package (v43). The production version distributes vomses file which contains following entry..
&#34;osg&#34; &#34;voms.opensciencegrid.org&#34; &#34;15027&#34; &#34;/DC=org/DC=doegrids/OU=Services/CN=host/voms.opensciencegrid.org&#34; &#34;osg&#34;
2) As Tim pointed out earlier, LSC file is not generated from this file. Software team runs openssl command against the VOMS endpoint directly to obtain the certificate information.

Please clarify if I am wrong with this.

I am working on a project to replace our current tarball distribution to MyOSG/OIM based distribution (<a href='http&#58;//jira.opensciencegrid.org/browse/MYOSG-66' target='_blank' rel='nofollow'>http&#58;//jira.opensciencegrid.org/browse/MYOSG-66</a>), and I am interested in getting know what process is generating what, and how they are all interconnected. I will add you to the watcher on MYOSG-66 to further discuss this (I don&#39;t want to hijack this ticket).

Soichi</pre></div><div class='update_description'><i onclick="document.location='13641#1364226494'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-25T15:48:14+00:00">Mar 25, 2013 03:48 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1364226494">&nbsp;</a></div><pre>I&#39;m assigning rob to this as it is part of his VO package for tomorrow.</pre></div><div class='update_description'><i onclick="document.location='13641#1363964113'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-22T14:55:13+00:00">Mar 22, 2013 02:55 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1363964113">&nbsp;</a></div><pre>Hello Soichi
Can OSG Software further assist you with this in any way?

-Neha</pre></div><div class='update_description'><i onclick="document.location='13641#1362759687'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-08T16:21:27+00:00">Mar 8, 2013 04:21 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1362759687">&nbsp;</a></div><pre>Soichi&#58; I believe that the GOC owns and initiates the process for updating VO data. Contact Rob Q. if you have questions. You all are supposed to let us (Software) know when there is a new VO package ready to make into an RPM.</pre></div><div class='update_description'><i onclick="document.location='13641#1362758205'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-08T15:56:45+00:00">Mar 8, 2013 03:56 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1362758205">&nbsp;</a></div><pre>Tim,

We recently installed a new DigiCert service certificate (it was invalid due to one of the CA chain expiring) to voms.grid.iu.edu

/etc/grid-security/vomsdir/mis/voms.grid.iu.edu.lsc contained following
<font color='#7F7E6F'>&#62; /DC=org/DC=doegrids/OU=Services/CN=http/voms.grid.iu.edu</font>
<font color='#7F7E6F'>&#62; /DC=org/DC=DOEGrids/OU=Certificate Authorities/CN=DOEGrids CA 1</font>

This is wrong since we are not using DigiCert. I&#39;ve updated it to
/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=http/voms.grid.iu.edu
/DC=com/DC=DigiCert-Grid/O=DigiCert Grid/CN=DigiCert Grid CA-1

and now I don&#39;t see any &#34;AC signature&#34; error message (whatever that means) when I ran voms-proxy-init.

Meanwhile, I still see following in my /etc/vomses
<font color='#7F7E6F'>&#62; &#34;mis&#34; &#34;voms.grid.iu.edu&#34; &#34;15001&#34; &#34;/DC=org/DC=doegrids/OU=Services/CN=http/voms.grid.iu.edu&#34; &#34;mis&#34;</font>

This is wrong, and I believe it should be
<font color='#7F7E6F'>&#62; &#34;mis&#34; &#34;voms.grid.iu.edu&#34; &#34;15001&#34; &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=http/voms.grid.iu.edu&#34; &#34;mis&#34;</font>

.. but I can submit a job just fine... So I agree with Steve that this doesn&#39;t matter.

By the way, we just had SURAgrid VOMS update their http certificate. This means that we will also have to update the LSC file for SURAgrid.
See &#62; <a href='https&#58;//ticket.grid.iu.edu/goc/13587' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/13587</a>

I believe this will become more frequent issue as more VOMS migrate to DigiCert.

Soichi</pre></div><div class='update_description'><i onclick="document.location='13641#1362756308'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-08T15:25:08+00:00">Mar 8, 2013 03:25 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1362756308">&nbsp;</a></div><pre>﻿I will be out of state on vacation and business travel from Mar. 8 to Mar 14.  In the March 8-10 timeframe I will not see E-mail at all.
In March 11-14 timeframe I will see email but have limited time to respond.﻿
If there is any problem with FermiGrid or FermiCloud please contact <a href='https&#58;//servicedesk.fnal.gov' target='_blank' rel='nofollow'>https&#58;//servicedesk.fnal.gov</a>
and file a ticket.

Steven Timm</pre></div><div class='update_description'><i onclick="document.location='13641#1362756123'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-08T15:22:03+00:00">Mar 8, 2013 03:22 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1362756123">&nbsp;</a></div><pre>OK, I just reread this whole ticket, and I am confused about the evidence presented so far. It sounds like the LSC file should have these contents&#58;

/DC=org/DC=doegrids/OU=Services/CN=host/voms.opensciencegrid.org
/DC=org/DC=DOEGrids/OU=Certificate Authorities/CN=DOEGrids CA 1

I think the vomses entry should be as follows, but Steve Timm claimed that the contents do not matter&#58;

&#34;osg&#34; &#34;voms.opensciencegrid.org&#34; &#34;15027&#34; &#34;/DC=org/DC=doegrids/OU=Services/CN=host/voms.opensciencegrid.org&#34; &#34;osg&#34;

Marco&#58; Have you tested this particular configuration? If so, can you provide output that shows the (relevant) contents of both files, plus the debug output from voms-proxy-init?

Soichi&#58; If you look through this ticket, it has been entirely about the OSG VO. It is unclear that your issue with the MIS VO is directly related. For my sanity, could you put your request to troubleshoot the MIS VO into a separate GOC ticket? Also, when you do, if you could show the contents of the MIS VO’s LSC file plus its vomses entry, that would be helpful.</pre></div><div class='update_description'><i onclick="document.location='13641#1362750297'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-08T13:44:57+00:00">Mar 8, 2013 01:44 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1362750297">&nbsp;</a></div><pre>Adding myself to the CC-list.

I am seeing the same error message.

2013-03-08 13&#58;40&#58;22 UTC [hayashis@soichi&#58;~/test/ce]$ voms-proxy-init -voms mis
Your identity&#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Soichi Hayashi 238
Creating temporary proxy ............................ Done
Contacting  voms.grid.iu.edu&#58;15001 [/DC=org/DC=doegrids/OU=Services/CN=http/voms.grid.iu.edu] &#34;mis&#34; Done
Creating proxy ............................. Done

Your proxy is valid until Sat Mar  9 01&#58;40&#58;26 2013
Error&#58; verify failed.
Cannot verify AC signature!

I can actually run jobs using the proxy, so I think this isn&#39;t a critical issue (for me), but I&#39;d like to get this fixed if possible.</pre></div><div class='update_description'><i onclick="document.location='13641#1362588224'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-06T16:43:44+00:00">Mar 6, 2013 04:43 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1362588224">&nbsp;</a></div><pre>How about an email to sites explaining how to fix the one broken LSC file? It is not hard.

Does the GOC have a schedule for releasing the next updates to the VO data?</pre></div><div class='update_description'><i onclick="document.location='13641#1362588012'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-06T16:40:12+00:00">Mar 6, 2013 04:40 PM UTC</time><a class="anchor" name="1362588012">&nbsp;</a></div><pre>Can we get a temporary fix for this one case while we are waiting on OSG software to do the more general fix?
This has been broken for months.

by /DC=org/DC=doegrids/OU=People/CN=Steven Timm 74183</pre></div><div class='update_description'><i onclick="document.location='13641#1362587590'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-06T16:33:10+00:00">Mar 6, 2013 04:33 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1362587590">&nbsp;</a></div><pre>I agree with Marco&#58; There have been no updates to the VO contact data, at least in the OSG Software release.</pre></div><div class='update_description'><i onclick="document.location='13641#1362585076'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-06T15:51:16+00:00">Mar 6, 2013 03:51 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1362585076">&nbsp;</a></div><pre>yes, the problem is not fixed
{code}
-bash-3.2$ voms-proxy-init -voms osg
Enter GRID pass phrase&#58;
Your identity&#58; /DC=org/DC=doegrids/OU=People/CN=Marco Mambelli 325802
Creating temporary proxy ................................................................................. Done
Contacting  voms.opensciencegrid.org&#58;15027 [/DC=org/DC=doegrids/OU=Services/CN=host/voms.opensciencegrid.org] &#34;osg&#34; Done
Creating proxy ....................... Done

Your proxy is valid until Wed Mar  6 21&#58;48&#58;38 2013
Error&#58; verify failed.
Cannot verify AC signature!
{code}

Anyone with a OSG VO membership can verify it by requesting a voms proxy.
If the message &#34;Error&#58; verify failed. Cannot verify AC signature!&#34; is there, the issue has not been fixed.
Best,
Marco</pre></div><div class='update_description'><i onclick="document.location='13641#1362499679'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-03-05T16:07:59+00:00">Mar 5, 2013 04:07 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1362499679">&nbsp;</a></div><pre>Does this ticket need to remain open? The last update is 11 days ago.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='13641#1361471918'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-21T18:38:38+00:00">Feb 21, 2013 06:38 PM UTC</time><a class="anchor" name="1361471918">&nbsp;</a></div><pre>My testing indicates that it should be host/voms.opensciencegrid.org in the LSC file.
For voms-proxy-init of any 2.x version it turns out that the vomses file doesn&#39;t matter at all, you could have /DN=foo in there and it would work.

by /DC=org/DC=doegrids/OU=People/CN=Steven Timm 74183</pre></div><div class='update_description'><i onclick="document.location='13641#1360705082'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-12T21:38:02+00:00">Feb 12, 2013 09:38 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1360705082">&nbsp;</a></div><pre>Agreed about the wild attempts.

But Marco, your most recent update leaves me confused&#58; I thought that using &#34;host&#34; instead of &#34;http&#34; was exactly what DID work. Which is it?</pre></div><div class='update_description'><i onclick="document.location='13641#1360704649'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-12T21:30:49+00:00">Feb 12, 2013 09:30 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1360704649">&nbsp;</a></div><pre>Hi Steve,
those were wild attempts to try if something different worked.

vomses like this&#58;
&#34;osg&#34; &#34;voms.opensciencegrid.org&#34; &#34;15027&#34; &#34;/DC=org/DC=doegrids/OU=Services/CN=host/voms.opensciencegrid.org&#34; &#34;osg&#34;

And LSC file like this&#58;
/DC=org/DC=doegrids/OU=Services/CN=host/voms.opensciencegrid.org
/DC=org/DC=DOEGrids/OU=Certificate Authorities/CN=DOEGrids CA 1

Do not work. This is what originated the ticket.
Marco</pre></div><div class='update_description'><i onclick="document.location='13641#1360699211'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-12T20:00:11+00:00">Feb 12, 2013 08:00 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1360699211">&nbsp;</a></div><pre>Marco--I am not sure who told you to use voms.fnal.gov&#58;15027
That won&#39;t work.
Your vomses entry should look like this&#58;

&#34;osg&#34; &#34;voms.opensciencegrid.org&#34; &#34;15027&#34; &#34;/DC=org/DC=doegrids/OU=Services/CN=host/voms.opensciencegrid.org&#34; &#34;osg&#34;

And your LSC file should look like this.
[root@boxer osg]# cat voms.opensciencegrid.org.lsc
/DC=org/DC=doegrids/OU=Services/CN=host/voms.opensciencegrid.org
/DC=org/DC=DOEGrids/OU=Certificate Authorities/CN=DOEGrids CA 1

Please make these changes and try again, it should work.

Steve

On Tue, 12 Feb 2013, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='13641#1360698889'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-12T19:54:49+00:00">Feb 12, 2013 07:54 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1360698889">&nbsp;</a></div><pre>I followed the suggestion to change the files form the client side.

USING voms.fnal.gov&#58;15027, /DC=org/DC=doegrids/OU=Services/CN=http/voms.fnal.gov, &#34;osg&#34; returns an empty query (probably the server responding depends on the name)

-bash-3.2$ voms-proxy-init -debug -voms osg
Detected Globus version&#58; 2.2
Unspecified proxy version, settling on Globus version&#58; 2
Number of bits in key &#58;1024
Files being used&#58;
CA certificate file&#58; none
Trusted certificates directory &#58; /etc/grid-security/certificates
Proxy certificate file &#58; /tmp/x509up_u20003
User certificate file&#58; /home/marco/.globus/usercert.pem
User key file&#58; /home/marco/.globus/userkey.pem
Output to /tmp/x509up_u20003
Enter GRID pass phrase&#58;
Your identity&#58; /DC=org/DC=doegrids/OU=People/CN=Marco Mambelli 325802
Using configuration file /home/marco/.glite/vomses
Using configuration file /etc/vomses
Creating temporary proxy to /tmp/tmp_x509up_u20003_31524 ...++++++
.....................++++++
Done
Contacting  voms.fnal.gov&#58;15027 [/DC=org/DC=doegrids/OU=Services/CN=http/voms.fnal.gov] &#34;osg&#34; Failed

Error&#58; Error during SSL handshake&#58;

None of the contacted servers for osg were capable
of returning a valid AC for the user.

USING voms.opensciencegrid.org, 15027, /DC=org/DC=doegrids/OU=Services/CN=http/voms.fnal.gov,  &#34;osg&#34;  returns exactly the same LSC error

-bash-3.2$ voms-proxy-init -debug -voms osg
Detected Globus version&#58; 2.2
Unspecified proxy version, settling on Globus version&#58; 2
Number of bits in key &#58;1024
<div id='show_1960269571' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1960269571'>Files being used&#58;
CA certificate file&#58; none
Trusted certificates directory &#58; /etc/grid-security/certificates
Proxy certificate file &#58; /tmp/x509up_u20003
User certificate file&#58; /home/marco/.globus/usercert.pem
User key file&#58; /home/marco/.globus/userkey.pem
Output to /tmp/x509up_u20003
Enter GRID pass phrase&#58;
Your identity&#58; /DC=org/DC=doegrids/OU=People/CN=Marco Mambelli 325802
Using configuration file /home/marco/.glite/vomses
Using configuration file /etc/vomses
Creating temporary proxy to /tmp/tmp_x509up_u20003_31566 ......++++++
...........++++++
Done
Contacting  voms.opensciencegrid.org&#58;15027 [/DC=org/DC=doegrids/OU=Services/CN=http/voms.fnal.gov] &#34;osg&#34; Done
Creating proxy to /tmp/x509up_u20003 ..................................++++++
................................................................++++++
Done

Your proxy is valid until Wed Feb 13 01&#58;50&#58;01 2013
Error&#58; verify failed.
Cannot verify AC signature!
-bash-3.2$
</div><script type='text/javascript'>
        $('#show_1960269571').click(function() {
            $('#detail_1960269571').slideDown("normal");
            $('#show_1960269571').hide();
            $('#hide_1960269571').show();
        });
        $('#hide_1960269571').click(function() {
            $('#detail_1960269571').slideUp();
            $('#hide_1960269571').hide();
            $('#show_1960269571').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='13641#1360697767'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-12T19:36:07+00:00">Feb 12, 2013 07:36 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1360697767">&nbsp;</a></div><pre>For the OSG VO only, the VOMS-Admin service
has a certificate of subject http/voms.opensciencegrid.org
and the voms server has a certificate of subject
host/voms.opensciencegrid.org.
It is the latter one that shoud be used in the .lsc
file. (and has always been in the vomses file).
Do NOT believe the &#34;Configuration Info&#34; stanza as shown
at <a href='https&#58;//voms.opensciencegrid.org&#58;8443/voms/osg' target='_blank' rel='nofollow'>https&#58;//voms.opensciencegrid.org&#58;8443/voms/osg</a>

Only the GOC can change this.

Steve

On Tue, 12 Feb 2013, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='13641#1360697325'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-12T19:28:45+00:00">Feb 12, 2013 07:28 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1360697325">&nbsp;</a></div><pre>I sent a long email to osg-software and Rob Q. about all this, too long for here (IMO). But, I would like you, Marco, to try changing your OSG VO contact info as follows&#58;

In your vomses file, substitute the existing &#34;osg&#34; entry with this line instead&#58;

&#34;osg&#34; &#34;voms.fnal.gov&#34; &#34;15027&#34; &#34;/DC=org/DC=doegrids/OU=Services/CN=http/voms.fnal.gov&#34; &#34;osg&#34;

Then, replace the contents of the OSG VO LSC file with this&#58;

/DC=org/DC=doegrids/OU=Services/CN=http/voms.fnal.gov
/DC=org/DC=DOEGrids/OU=Certificate Authorities/CN=DOEGrids CA 1

Then try voms-proxy-init again. Let us know what happens!</pre></div><div class='update_description'><i onclick="document.location='13641#1360696432'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-12T19:13:52+00:00">Feb 12, 2013 07:13 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1360696432">&nbsp;</a></div><pre>The subject is also in the vomses file and it is the correct one to contact the server.
It is only the LSC verification that fails.
I don&#39;t know if the fact that the same host/server serves several VOs and has other hostnames and subjects in the configuration of other VOs.
Is it possible that LSC verification is using different queries and the server is confused?
Is it possible to do some tests changing the content of the server?
Thanks,
Marco</pre></div><div class='update_description'><i onclick="document.location='13641#1360689030'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-12T17:10:30+00:00">Feb 12, 2013 05:10 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1360689030">&nbsp;</a></div><pre>Rob Q. and I investigated the source of the &#34;http/voms.opensciencegrid.org&#34; CN, and it is confusing. Essentially, there is a script that determines the correct LSC entry for each VOMS server, and in part it does so by using openssl directly to query the VOMS server and get its signing certificate information. When we ran this against the OSG VO server, we got this info&#58;

subject=/DC=org/DC=doegrids/OU=Services/CN=http/voms.opensciencegrid.org
issuer=/DC=org/DC=DOEGrids/OU=Certificate Authorities/CN=DOEGrids CA 1

Clearly, openssl thinks that the subject contains the &#34;http/voms.opensciencegrid.org&#34; CN, which is how it ended up in the vomsdir entry.

So why is this the wrong CN to use in the LSC file? Are we using the wrong openssl command to request the service certificate? Is doing so completely the wrong approach? Who can help us here?

FWIW, here is the exact openssl command that I used, run as root from one of my fermicloud instances&#58;

openssl s_client -connect voms.opensciencegrid.org&#58;8443 -prexit -CApath /etc/grid-security/certificates -cert /etc/grid-security/hostcert.pem -key /etc/grid-security/hostkey.pem &#60; /dev/null</pre></div><div class='update_description'><i onclick="document.location='13641#1360680508'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-12T14:48:28+00:00">Feb 12, 2013 02:48 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1360680508">&nbsp;</a></div><pre>I just sent a similar message to Steve, Rob Q., Kyle, and the Software team, but just a refresher&#58; The GOC manages the VO package data, which includes the LSC files. When they cut a release, they inform the Software team, and we make a set of RPMs containing the same data. So I believe the process starts with the GOC&#58; &#60;<a href='https&#58;//www.opensciencegrid.org/bin/view/Operations/VOPackageReleases&#62' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Operations/VOPackageReleases&#62</a>;.</pre></div><div class='update_description'><i onclick="document.location='13641#1360622843'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-11T22:47:23+00:00">Feb 11, 2013 10:47 PM UTC</time><a class="anchor" name="1360622843">&nbsp;</a></div><pre>I can verify that indeed the .lsc for the OSG VO should have
/DC=org/DC=doegrids/OU=Services/CN=host/voms.opensciencegrid.org

And I&#39;m also curious--who is supposed to fix the .lsc package in this case?

AND--why does the OSG VO still have a lead contact of &#34;helpdesk-admin@....&#34;  That address is supposed
to have been dead for four years now.

Steve Timm
Admin of the OSG Voms server but certainly not the VO manager of OSG VO.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Steve Timm 167</pre></div><div class='update_description'><i onclick="document.location='13641#1360259289'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-07T17:48:09+00:00">Feb 7, 2013 05:48 PM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1360259289">&nbsp;</a></div><pre>I think the file contains the wrong subject&#58; http instead of host&#58;

-bash-3.2$ cat /etc/grid-security/vomsdir/osg/voms.opensciencegrid.org.lsc
/DC=org/DC=doegrids/OU=Services/CN=http/voms.opensciencegrid.org
/DC=org/DC=DOEGrids/OU=Certificate Authorities/CN=DOEGrids CA 1

-bash-3.2$ voms-proxy-init -valid 300&#58;0 -voms osg
Enter GRID pass phrase&#58;
Your identity&#58; /DC=org/DC=doegrids/OU=People/CN=Marco Mambelli 325802
Creating temporary proxy
................................................................ Done
Contacting  voms.opensciencegrid.org&#58;15027 [/DC=org/DC=doegrids/OU=Services/CN=host/voms.opensciencegrid.org] &#34;osg&#34; Done
...

Is the software theam or the VO responsible to change that?
Thanks,
Marco

On Thu, 7 Feb 2013, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='13641#1360258028'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-07T17:27:08+00:00">Feb 7, 2013 05:27 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1360258028">&nbsp;</a></div><pre>This error happens because you don’t have the appropriate .lsc file for the OSG VO on your local machine.
These files are supposed to be distributed in the vo-client rpm and stored in /etc/grid-security/vomsdir/osg
On your local client.  What do you have in that directory?
(PS—I need to check OIM—“Fermilab CD Helpdesk”) shouldn’t be lead admin for OSG VO.

Steve Timm</pre></div><div class='update_description'><i onclick="document.location='13641#1360200429'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-02-07T01:27:09+00:00">Feb 7, 2013 01:27 AM UTC</time> by <b>Marco Mambelli</b><a class="anchor" name="1360200429">&nbsp;</a></div><pre>When issuing a proxy for the  OSG VO I receive the error&#58; &#34;Cannot verify AC signature!&#34;

I&#39;m using voms-proxy-init after installing the glideinwms-vofrontend.
This error is not happening with other VOs like ATLAS.

Below a transcript.
Thank you,
Marco
{code}
-bash-3.2$ voms-proxy-init -valid 300&#58;0 -voms osg
Enter GRID pass phrase&#58;
Your identity&#58; /DC=org/DC=doegrids/OU=People/CN=Marco Mambelli 325802
Creating temporary proxy ........................................ Done
Contacting  voms.opensciencegrid.org&#58;15027 [/DC=org/DC=doegrids/OU=Services/CN=host/voms.opensciencegrid.org] &#34;osg&#34; Done

Warning&#58; voms.opensciencegrid.org&#58;15027&#58; The validity of this VOMS AC in your proxy is shortened to 86400 seconds!

Creating proxy ....................................... Done

Your proxy is valid until Tue Feb 19 07&#58;21&#58;28 2013
Error&#58; verify failed.
Cannot verify AC signature!
{code}</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F13641">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 13641});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
