<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[11473] Resource Specific Issue on UFlorida-HPC</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=11473" method="post">
<div class="page-header">
    <h3><span class="muted">11473</span> / Resource Specific Issue on UFlorida-HPC</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Steve Timm</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">UFlorida-HPC</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/resource</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Steve Timm</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-02-20</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">fGOC <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/11473", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='11473#1329838714'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-21T15:38:34+00:00">Feb 21, 2012 03:38 PM UTC</time><a class="anchor" name="1329838714">&nbsp;</a></div><pre>It is OK to close this ticket.
Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11473#1329523008'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-17T23:56:48+00:00">Feb 17, 2012 11:56 PM UTC</time><a class="anchor" name="1329523008">&nbsp;</a></div><pre>Outside of the ticket, E-mail has been exchanged between Tanya and Bockjoo-- Jira issue GRATIA-53 did indeed turn out to be
another &#34;feature&#34;, namely that when the accounting flag is set in the PBS job, the urcollector appends that to
the usage record as UserVOName, and the gratia collector has that field take precedence over everything else.
Tanya asked Bockjoo to comment out those lines of code in the urcollector and now osg.hpc.ufl.edu is reporting
the individual VO&#39;s correctly to Gratia.

As far as Bockjoo&#39;s other questions&#58;
a) SuppressUnknownVORecords=&#34;0&#34; in ProbeConfig

up until a couple of weeks ago, osg.hpc.ufl.edu was sending us a lot of unknown vo records.
We managed to beat those because we enabled SuppressNoDNRecords=&#34;1&#34; which also has the side effect
of suppressing unknown VO records.. so it is ok to leave SuppressUnknownVOREcords=&#34;0&#34;
2) as I said in private email--it is up to the site to keep as many or as few PBS accounting

records as you want to.  There is no reason for Gratia to go back and look at the old pbs accounting logs again.

3) The security updates are mostly to apache and tomcat, which at least in theory can be accomplished by pacman -update of those packages without disturbing, for instance, the globus job manager pbs.pm file.
(and if you do do the full vdt-updater sequence instead, I can insure you that your customized pbs.pm file would get clobbered as you fear).

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11473#1329417188'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-16T18:33:08+00:00">Feb 16, 2012 06:33 PM UTC</time> by <b>Bockjoo Kim</b><a class="anchor" name="1329417188">&nbsp;</a></div><pre>I have uploaded it here&#58;
<a href='http&#58;//oo.ihepa.ufl.edu&#58;8080/t2/operations/hpc/urCollector.conf' target='_blank' rel='nofollow'>http&#58;//oo.ihepa.ufl.edu&#58;8080/t2/operations/hpc/urCollector.conf</a>

Now, I have questions for you&#58;
1.  How about
SuppressUnknownVORecords=&#34;0&#34;
inside ProbeConfig?

2. We have 21G in the accounting area
21G     /var/spool/torque/server_priv/accounting
Can we remove data that are older than a week, a month, or a year
in the area?
Can OSG provide the automated tool in the future?

3. We want to wait until we decide  to do the RPM-based upgrade.
(Due to the lots of hack went into the pbs.pm and gip scritps.)
Can the security patches or the list of the security issues
between 1.2.6 and 1.2.26 be provided as Steve mentions?

Thanks,
Bockjoo

On 2/16/12 12&#58;54 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11473#1329414848'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-16T17:54:08+00:00">Feb 16, 2012 05:54 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1329414848">&nbsp;</a></div><pre>Hi,

I am trying to debug this problem. Could you please send me also you urCollector.conf (under $VDT_LOCATION/gratia/probe/pbs).

Thanks a lot,
Tanya</pre></div><div class='update_description'><i onclick="document.location='11473#1329151965'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-13T16:52:45+00:00">Feb 13, 2012 04:52 PM UTC</time><a class="anchor" name="1329151965">&nbsp;</a></div><pre>Have created issue GRATIA-53. It is possible that there could be a further
bug in the PBS probe parsing VO information for mixed pool accounts such as you have.
It is also possible that an upgrade to OSG 1.2.26 would be good, to make sure that
all the rest of the software stack is up to date.  Really running at OSG 1.2.6 as
you are doing now is just saying &#34;hack me please.&#34;  there have been a lot of security updates since then.
But the real puzzle is why the managedfork jobs reported by the condor probe are ok
but the pbs jobs are not.  That is why I have a query out to the developers at this point.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11473#1329086936'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-12T22:48:56+00:00">Feb 12, 2012 10:48 PM UTC</time><a class="anchor" name="1329086936">&nbsp;</a></div><pre>Thanks, Yu.

There is still some &#34;grid&#34; VO being reported from your site and I don&#39;t quite
understand why.  In fact it seems that the pbs probe is pretty much still only
reporting &#34;grid&#34; VO.  The osg-user-vo-map.txt does appear to be correct  now
and fork jobs that I send are reporting to condor correctly.  I will poke around
a bit more and let you know.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11473#1328932327'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-11T03:52:07+00:00">Feb 11, 2012 03:52 AM UTC</time> by <b>Yu Fu</b><a class="anchor" name="1328932327">&nbsp;</a></div><pre>On 2/10/2012 5&#58;34 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; Yes, this is the thing I missed. It works as expected now!</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; ----------------------------------------------</font>
<font color='#7F7E6F'>&#62; This message is to let you know that Open Science Grid ticket 11473 &#34;Resource Specific Issue on UFlorida-HPC&#34; which is assigned to you, was updated on 02/10/2012 at 22&#58;34&#58;09 with the following information&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; FootPrints Ticket Description&#58;</font>
<font color='#7F7E6F'>&#62; I think you need to change</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; /osg/osg/osg-ce-1.2.6/gums/config/gums-client.properties</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; to point to the correct gums server.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Try that, then try to run gums-host-cron by hand once to see</font>
<font color='#7F7E6F'>&#62; if anything happens.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Steve Timm</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Fri, 10 Feb 2012, Open Science Grid FootPrints wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font>
<font color='#7F7E6F'>&#62; For complete ticket details, click</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//ticket.grid.iu.edu/goc/11473' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/11473</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Assignees&#58; Elizabeth Chism, fGOC</font>
<font color='#7F7E6F'>&#62; Status&#58; Engineering</font>
<font color='#7F7E6F'>&#62; Originating VO Support Center&#58; Fermilab</font>
<font color='#7F7E6F'>&#62; Destination VO Support Center&#58; USCMS</font>
<font color='#7F7E6F'>&#62; Originating Ticket Number&#58;</font>
<font color='#7F7E6F'>&#62; Destination Ticket Number&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; --</font>
<font color='#7F7E6F'>&#62; Please submit problems, requests, and questions at&#58;</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a></font>
<font color='#7F7E6F'>&#62;</font>
<div id='show_855172321' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_855172321'><font color='#7F7E6F'>&#62; OSG Grid Operations Center</font>
<font color='#7F7E6F'>&#62; goc@...., 317-278-9699</font>
<font color='#7F7E6F'>&#62; Visit the OSG Support Page&#58;</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//www.opensciencegrid.org/ops' target='_blank' rel='nofollow'>http&#58;//www.opensciencegrid.org/ops</a></font>
<font color='#7F7E6F'>&#62; RSS&#58; <a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></font>
</div><script type='text/javascript'>
        $('#show_855172321').click(function() {
            $('#detail_855172321').slideDown("normal");
            $('#show_855172321').hide();
            $('#hide_855172321').show();
        });
        $('#hide_855172321').click(function() {
            $('#detail_855172321').slideUp();
            $('#hide_855172321').hide();
            $('#show_855172321').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='11473#1328913249'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-10T22:34:09+00:00">Feb 10, 2012 10:34 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1328913249">&nbsp;</a></div><pre>I think you need to change

/osg/osg/osg-ce-1.2.6/gums/config/gums-client.properties

to point to the correct gums server.

Try that, then try to run gums-host-cron by hand once to see
if anything happens.

Steve Timm

On Fri, 10 Feb 2012, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11473#1328910577'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-10T21:49:37+00:00">Feb 10, 2012 09:49 PM UTC</time><a class="anchor" name="1328910577">&nbsp;</a></div><pre>gums-host-cron has been enabled on turned on, however osg-user-vo-map.txt has not been automatically updated. How often is it updated, once a day?

Thanks,

Yu

-- by Yu Fu</pre></div><div class='update_description'><i onclick="document.location='11473#1328813573'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-09T18:52:53+00:00">Feb 9, 2012 06:52 PM UTC</time><a class="anchor" name="1328813573">&nbsp;</a></div><pre>All current non-grid &#34;VO&#39;s&#34; including UT-NTLN0033,armino,baru-tro,cx32,foo,jaing,jmb,jms21,yuguo1
deleted from Gratia.  VO&#39;s grid14,grid15,grid16,grid17 split up into their correct component
parts based on the dn&#39;s associated with each MasterSummaryRecord.
Will do the same for vo &#34;grid&#34; once the new osg-user-vo-map.txt is in place, let us know
when that is done.

The adding &#34;SuppressNoDNRecords=1&#34; also stopped one of the largest sources of
incoming &#34;Unknown&#34; VO that we had been seeing.
Later we will go back through and find other local &#34;VO&#34;&#39;s at UFL which had already
been mapped to &#34;Other&#34; and &#34;Unknown&#34; and see if that usage, which shouldn&#39;t have
been reported, can be purged out of the database.
Let us know when the new osg-user-vo-map.txt is in place.  THanks for all your help
thus far.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11473#1328738466'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-08T22:01:06+00:00">Feb 8, 2012 10:01 PM UTC</time><a class="anchor" name="1328738466">&nbsp;</a></div><pre>“SuppressNoDNRecords” is added.

Yu

-- by Yu Fu</pre></div><div class='update_description'><i onclick="document.location='11473#1328738231'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-08T21:57:11+00:00">Feb 8, 2012 09:57 PM UTC</time><a class="anchor" name="1328738231">&nbsp;</a></div><pre>You can suppress the reporting of these local VO&#39;s, which
is still happening from time to time, by adding the following line to
/osg/osg/osg-ce-1.2.6/gratia/probe/pbs/ProbeConfig

SuppressNoDNRecords=&#34;1&#34;

Once this has been done, please let us know and then we will go ahead and remove this
non-OSG usage from Gratia.

Thanks

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11473#1328736411'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-08T21:26:51+00:00">Feb 8, 2012 09:26 PM UTC</time><a class="anchor" name="1328736411">&nbsp;</a></div><pre>Yes, we do have two user login machines to submit non-OSG jobs to the same PBS queue.

-- by Yu Fu</pre></div><div class='update_description'><i onclick="document.location='11473#1328736214'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-08T21:23:34+00:00">Feb 8, 2012 09:23 PM UTC</time><a class="anchor" name="1328736214">&nbsp;</a></div><pre>Is it possible that there is a second submit host, non-osg-related, that can submit to
this same cluster?  For the most recent of these weird VO&#39;s
(armino, UT-NTNL0033, baru-tro, cx32, foo, jaing, jms21, yuguo1) we still
have the JobUsageRecord available and those all show a MachineName of torx.ufhpc.
Is that a second system that submits to this same cluster with non-OSG usage?
That could be what we are dealing with here.  Could you please confirm.
(cx32 is a truncated cx32167).

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11473#1328734725'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-08T20:58:45+00:00">Feb 8, 2012 08:58 PM UTC</time><a class="anchor" name="1328734725">&nbsp;</a></div><pre>Yes, actually the reason is simple&#58; we transited from mapfile to GUMS on this UFlorida-HPC cluster a little more than one month ago. It is very obvious that we forgot to update the osg-user-vo-map.txt file after the transition.

We will update the map file to fix the problem.

Thanks,

Yu

-- by Yu Fu</pre></div><div class='update_description'><i onclick="document.location='11473#1328733975'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-08T20:46:15+00:00">Feb 8, 2012 08:46 PM UTC</time><a class="anchor" name="1328733975">&nbsp;</a></div><pre>Hi Yu--
I will map the &#34;avery&#34; VO usage to CMS for now.

This is a very puzzling osg-user-vo-map.txt because it does not show any
of the tens of thousands of pool accounts on your site.  Normally in a osg-user-vo-map.txt
there should be one entry for every single pool account that has been used to date,
along with the VO of the user to which it was mapped.   We need this information because
multiple vo&#39;s used different accounts starting with grid14nnn, grid15nnn, grid16nnn, and grid17nnn
and now that the pbs bug has been fixed, we need to figure out which usage was what.
It appears that the osg-user-vo-map.txt on this cluster was hand-generated and has no
resemblance to what GUMS is actually mapping the users to.

For instance when I run a fork job on the cluster as part of VO &#34;CDF&#34; I get mapped to
uid &#34;grid13637&#34; but the osg-user-vo-map.txt says nothing about that.  You should
have gums-host-cron enabled and it appears that you don&#39;t.

So there are two issues we have to resolve--
One is what VO does each of the many gridxxxxx pool accounts correspond to.. that information
is certainly known by your GUMS server and if you could even run a test invocation
of gums-host-cron it would help us to get this information.

The osg-user-vo-map.txt is only supposed to be a backup in case Gratia
does not get the VOMS information out of the proxy.   But that can happen in cases where
someone is running with a grid-proxy only and that&#39;s why we need to get this sorted out.

The second is where all the crazy VO&#39;s of individual name are coming from.. what I am
going to check next is to make sure that there isn&#39;t some other site also getting mapped
into UFlorida-HPC by mistake, because there are certainly no accounts or vo&#39;s like that on osg.hpc.ufl.edu
as it is currently configured.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11473#1328727069'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-08T18:51:09+00:00">Feb 8, 2012 06:51 PM UTC</time><a class="anchor" name="1328727069">&nbsp;</a></div><pre>Here is the osg-user-vo-map.txt&#58;

[root@osg ~]# cat /export/osg/osg/osg-ce-1.2.6/osg/etc/osg-user-vo-map.txt
# User-VO map
# Generated by generate-vo-map
# The voi line is used by MonaLISA, and is the lower-case version of all VO names
# The VOc line is used by MonaLISA, and is the proper-case version of all VO names
# Other lines are of the form &#60;account&#62; &#60;VO&#62;

#voi cdf grase mis fmri usatlas usatlas usatlas uscms ligo glow gridex osg ops engage
#VOc CDF GRASE MIS fMRI ATLAS ATLAS ATLAS CMS LIGO GLOW GRIDEX OSG OPS Engage

cdf cdf
grase grase
mis mis
fmri fmri
usatlas1 usatlas
usatlas3 usatlas
usatlas4 usatlas
uscms01 uscms
ligo ligo
glow glow
gridex gridex
osg osg
ops ops
engage engage
avery uscms
bockjoo uscms
bourilkov uscms
drozd uscms
gartner uscms
jorge uscms
kypt uscms
mschmitt uscms
pakhotin uscms
<div id='show_518047530' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_518047530'>phedex uscms
remrc uscms
lcg uscms
srmdcache uscms
bjk uscms
cmssoft uscms
cmsphedex uscms
bslock uscms
cmsprod uscms
madfish uscms
petterson uscms
lmuniz uscms
wangdy uscms
mschen uscms
lmuniz uscms
jhugon uscms
dmesick uscms
seanflow uscms
madfish uscms
sellers uscms
nramos5 uscms
ddidar uscms
garner uscms
hiprod uscms
nwoods uscms

I have no idea about the &#34;other&#34; VOs for &#34;UT-NTNL0033, armino, baru-tro, cx32, foo, grid, jaing, jmp, jms21, yuguo1&#34;.

As for the &#34;UF HPC Flock&#34;, this is from a Gratia running on a local interactive login server which runs a cross-platform (Condor-PBS) job flocking software Campus-Factory from the Campus Grid project. This Gratia is installed per Dan Fraser&#39;s suggestion/request. It collects information from the flocked jobs. I think it might be charged to CMS as the typical jobs are Pual Avery group&#39;s.

Thanks,

Yu

-- by Yu Fu

</div><script type='text/javascript'>
        $('#show_518047530').click(function() {
            $('#detail_518047530').slideDown("normal");
            $('#show_518047530').hide();
            $('#hide_518047530').show();
        });
        $('#hide_518047530').click(function() {
            $('#detail_518047530').slideUp();
            $('#hide_518047530').hide();
            $('#show_518047530').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='11473#1328283547'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-03T15:39:07+00:00">Feb 3, 2012 03:39 PM UTC</time><a class="anchor" name="1328283547">&nbsp;</a></div><pre>Also there is one entry for the &#34;Avery&#34; VO at a site called
&#34;UF HPC Flock&#34;--is this legitimate OSG usage and if so to which
VO should it be charged?

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11473#1328213390'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-02T20:09:50+00:00">Feb 2, 2012 08:09 PM UTC</time><a class="anchor" name="1328213390">&nbsp;</a></div><pre>There is one other question we have&#58;
In addition to the grid14,grid15,grid16, and grid17 VO&#39;s there
are also a few other unexplained VO&#39;s from UFlorida-HPC and associated sites,
a few of which are still reporting.  Can you give any background on what these VO&#39;s are--we
are wondering whether we should mark them as &#34;other&#34; in the OSG reports or if we should
instead just delete them from the accounting summaries because they should never have
been reported to OSG in the first place.
&#92;

UT-NTNL0033, armino, baru-tro, cx32, foo, grid, jaing, jmp, jms21, yuguo1,

Note that since you were running with a probe that was truncating numbers
off of pool accounts, it&#39;s possible that cx32 and jms21 and possibly others
are truncations of user names that are on your system.. likewise the same with &#34;grid&#34;.

Thanks for your help.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11473#1328209695'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-02T19:08:15+00:00">Feb 2, 2012 07:08 PM UTC</time><a class="anchor" name="1328209695">&nbsp;</a></div><pre>Thanks to all at U. Florida who helped in installing the patch.
The influx of grid14 through grid17 vo&#39;s has now been halted.
Could you please (under separate cover) e-mail a copy of your osg-user-vo-map.txt
to timm@.....  A side effect is that the usage that has been reported up until
now as grid14-grid17 is in fact a mix of several different VO&#39;s and now we
have to see if we can untangle it.

Thanks again for your help in getting this fixed.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11473#1328026687'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-01-31T16:18:07+00:00">Jan 31, 2012 04:18 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1328026687">&nbsp;</a></div><pre>Hi Yu--
No restart is necesssary.  The patch should take effect automatically on
the next run of the gratia pbs probe, which runs in cron.
Thanks for making the patch.  We will monitor your reporting
over the next couple of days and see if the problem is resolved.

Steve Timm
for Gratia operations.

On Tue, 31 Jan 2012, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11473#1328025606'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-01-31T16:00:06+00:00">Jan 31, 2012 04:00 PM UTC</time><a class="anchor" name="1328025606">&nbsp;</a></div><pre>Patch applied. It is necessary to restart VDT to make it effective?

Thanks,

Yu

-- by Yu Fu</pre></div><div class='update_description'><i onclick="document.location='11473#1327962262'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-01-30T22:24:22+00:00">Jan 30, 2012 10:24 PM UTC</time> by <b>echism</b><a class="anchor" name="1327962262">&nbsp;</a></div><pre>Craig,

Where are we on this issue?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='11473#1327352295'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-01-23T20:58:15+00:00">Jan 23, 2012 08:58 PM UTC</time> by <b>echism</b><a class="anchor" name="1327352295">&nbsp;</a></div><pre>Are there any updates on this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='11473#1326838370'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-01-17T22:12:50+00:00">Jan 17, 2012 10:12 PM UTC</time><a class="anchor" name="1326838370">&nbsp;</a></div><pre>Note--the patch to the PBS probe was just released today as part of a VDT
security fix, OSG 1.2.25.  a normal update via the vdt-updater should get
it for you now.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11473#1326815797'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-01-17T15:56:37+00:00">Jan 17, 2012 03:56 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1326815797">&nbsp;</a></div><pre>Hi,

I have sent Craig a patch. I was hoping that it would be released by VDT (pacman) , the following patch was submitted in early November&#58;

***************************
--- urCollector.pl      2011-11-07 16&#58;34&#58;55.000000000 -0600
+++ urCollector.pl.new  2011-11-08 15&#58;01&#58;54.000000000 -0600
@@ -1480,11 +1480,6 @@
$_[2] = $fqanParts[1];
$retVal = 0;
}
-   elsif ($uid =~ /^(.*)sgm$/o || $uid =~ /^(.*)prd$/o || $uid =~ /^(.*)&#92;d{3}$/o)
-   {
-      $_[2] = $1;
-      $retVal = 0;
-   }

return $retVal;
}</pre></div><div class='update_description'><i onclick="document.location='11473#1326812925'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-01-17T15:08:45+00:00">Jan 17, 2012 03:08 PM UTC</time><a class="anchor" name="1326812925">&nbsp;</a></div><pre>-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11473#1326812532'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-01-17T15:02:12+00:00">Jan 17, 2012 03:02 PM UTC</time> by <b>Craig Prescott</b><a class="anchor" name="1326812532">&nbsp;</a></div><pre>Hi Steve,

That sounds great.  Can you please send me Tanya&#39;s email?

Also, we should change the primary admin for UFlorida-HPC to Yu Fu.
I&#39;ve cc&#58;d him.

Thanks,
Craig Prescott
UF HPC Center

On 01/17/2012 09&#58;52 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11473#1326811935'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-01-17T14:52:15+00:00">Jan 17, 2012 02:52 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1326811935">&nbsp;</a></div><pre>[by Steve Timm]

For some number of months, the UFlorida-HPC cluster
has been reporting unknown VO&#39;s grid14,grid16,and grid17
to the production Gratia.  Through work with the gratia developers
we have traced this to a bug in the Gratia PBS probe which
simply truncates the last three numbers off of any pool account
and calls that the VO.  i.e.  grid14001 -&#62; grid14 VO, grid16001-&#62;grid16
VO, etc.

Tanya Levshina, one of the Gratia developers, has developed a patch for
this bug.  It may be quite some time before that patch is available
in the VDT.  Nebraska has already applied this patch with success.
I have copied her on this ticket, please contact her and she will get you
the patch.

Steve Timm
For Gratia operations</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F11473">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
