<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[23549] Bestman2 server does not list directories and behaves inconsistently on subsequent accesses</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=23549" method="post">
<div class="page-header">
    <h3><span class="muted">23549</span> / Bestman2 server does not list directories and behaves inconsistently on subsequent accesses</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Alan Sill</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">TTU-SIGMORGH</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Alan Sill</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">TIGRE</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Close</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-02-03</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">TIGRE <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Carl Edquist <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/23549", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/23549?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/23549?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Bestman2%20server%20does%20not%20list%20directories%20and%20behaves%20inconsistently%20on%20subsequent%20accesses%20ISSUE%3D23549%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='23549#1422648145'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-30T20:02:25+00:00">Jan 30, 2015 08:02 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1422648145">&nbsp;</a></div><pre>Thanks Alan for the update -- sorry I was not able to track down the source of the problem for you.  I&#39;ll close this for now and, yes, let us know if it resurfaces.

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='23549#1422644051'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-30T18:54:11+00:00">Jan 30, 2015 06:54 PM UTC</time><a class="anchor" name="1422644051">&nbsp;</a></div><pre>We rebooted all machines yesterday here at TTU that run OSG services after updates for the glibc vulnerability. After this reboot, the problem has mysteriously gone away.

Please close this ticket and we will let you know if the problem resurfaces. perhaps all it needed was this comprehensive reboot.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4</pre></div><div class='update_description'><i onclick="document.location='23549#1422561326'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-29T19:55:26+00:00">Jan 29, 2015 07:55 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1422561326">&nbsp;</a></div><pre>Hi Carl,
Any luck with this yet? Please advise if there is anything I can do to assist.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='23549#1421952642'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-22T18:50:42+00:00">Jan 22, 2015 06:50 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1421952642">&nbsp;</a></div><pre>Hi Carl,

Just checking to see if you saw Alan&#39;s last update, and when I should set this out to check for an update?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='23549#1421665290'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-19T11:01:30+00:00">Jan 19, 2015 11:01 AM UTC</time><a class="anchor" name="1421665290">&nbsp;</a></div><pre>The -debug flag does not add much useful information. Here is the latter portion of the output for a case where it fails&#58;

SRM-CLIENT&#58; Connecting to serviceurl httpg&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server

SRM-CLIENT&#58; ProxyType found 10

SRM-CLIENT&#58; full delegation by system

SRM-DIR&#58; Mon Jan 19 04&#58;55&#58;33 CST 2015 Calling srmLsRequest

SRM-DIR&#58; ..........................
SRM-DIR&#58; .....Input parameters for SrmLsRequest ....
SRM-DIR&#58; AuthorizationID=
SRM-DIR&#58; FullDetailedList=false
SRM-DIR&#58; Recursive=false
SRM-DIR&#58; SURL=<a href='srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms/buffer/store' target='_blank' rel='nofollow'>srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms/buffer/store</a>
SRM-DIR&#58; UseStorageSystemInfo=

SRM-DIR&#58; ..........................
SRM-DIR&#58; #### Output from SRM ####
Status    &#58; SRM_FAILURE
Explanation &#58; null
Request token=null

SURL=/lustre/hep/cms/buffer/store
Bytes=null
FileType=null
StorageType=null
Status=SRM_INVALID_PATH
Explanation=No such file or directory.
FileLocality=ONLINE

SRM-DIR&#58; Printing text report now ...
SRM-CLIENT*REQUEST_STATUS=SRM_FAILURE
SRM-CLIENT*SURL=/lustre/hep/cms/buffer/store
<div id='show_1781431625' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1781431625'>SRM-CLIENT*FILE_STATUS=SRM_INVALID_PATH
SRM-CLIENT*FILE_EXPLANATION=No such file or directory.
SRM-CLIENT*FILELOCALITY=ONLINE

The Bestman event log and main log file don&#39;t show much either.

ts=2015-01-19T10&#58;55&#58;38.899Z level=Debug class=gov.lbl.srm.util.TSRMUtil event=isRefToSRM surl=&#34;httpg&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server&#34; srmURI=httpg&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server incoming=<a href='srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms/buffer/store' target='_blank' rel='nofollow'>srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms/buffer/store</a> tid=qtp398814468-19
ts=2015-01-19T10&#58;55&#58;38.899Z level=Debug class=gov.lbl.srm.server.TSupportedURLWithFILE localFilePath=/lustre/hep/cms/buffer/store uri=<a href='srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms/buffer/store' target='_blank' rel='nofollow'>srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms/buffer/store</a> tid=qtp398814468-19
ts=2015-01-19T10&#58;55&#58;38.899Z level=Debug class=gov.lbl.srm.util.TSURLInfo url=<a href='srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms/buffer/store' target='_blank' rel='nofollow'>srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms/buffer/store</a> extrainfo=null tid=qtp398814468-19
ts=2015-01-19T10&#58;55&#58;38.899Z level=Debug class=gov.lbl.srm.server.TSupportedURLWithFILE localFilePath=/lustre/hep/cms/buffer/store uri=<a href='srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms/buffer/store' target='_blank' rel='nofollow'>srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms/buffer/store</a> tid=qtp398814468-19
ts=2015-01-19T10&#58;55&#58;38.906Z level=Debug class=gov.lbl.srm.server.TSRMFileAccessDefault event=listAttrStarts /lustre/hep/cms/buffer/store tid=qtp398814468-19
ts=2015-01-19T10&#58;55&#58;38.912Z level=Error class=gov.lbl.srm.server.TSRMFileAccessDefault event=listAttr msg=&#34;Does not exist on disk&#34; path=/lustre/hep/cms/buffer/store tid=qtp398814468-19
ts=2015-01-19T10&#58;55&#58;38.912Z level=Debug class=gov.lbl.srm.server.TSRMFileAccessDefault event=listAttrEnds /lustre/hep/cms/buffer/store tid=qtp398814468-19

=&#62; incoming [srmLs()]
### [srmLs()] tid =qtp398814468-19
### [getGUMSMap] tid =qtp398814468-19
### [srmLs] tid =qtp398814468-19
### [getGUMSMap] tid =qtp398814468-19

I&#39;ve attached the output of an osg-system-profiler run.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4
</div><script type='text/javascript'>
        $('#show_1781431625').click(function() {
            $('#detail_1781431625').slideDown("normal");
            $('#show_1781431625').hide();
            $('#hide_1781431625').show();
        });
        $('#hide_1781431625').click(function() {
            $('#detail_1781431625').slideUp();
            $('#hide_1781431625').hide();
            $('#show_1781431625').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='23549#1421661113'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-19T09:51:53+00:00">Jan 19, 2015 09:51 AM UTC</time><a class="anchor" name="1421661113">&nbsp;</a></div><pre>The answer to Carl&#39;s question appears to be yes, the command (lcg-ls) does work again after a failure after a certain amount of time. I have not investigated exactly the required amount of time, but a few minutes seems to be enough.

It is very odd and I cannot see any relevant messages in the system log files.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4</pre></div><div class='update_description'><i onclick="document.location='23549#1421258171'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-14T17:56:11+00:00">Jan 14, 2015 05:56 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1421258171">&nbsp;</a></div><pre>Hi Alan,

Do you have an update on this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='23549#1420677357'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-08T00:35:57+00:00">Jan 8, 2015 12:35 AM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1420677357">&nbsp;</a></div><pre>Hi Alan,

I&#39;m not sure what would cause that...

Does the command (lcg-ls) work again after a failure after a certain amount of time?

Carl</pre></div><div class='update_description'><i onclick="document.location='23549#1420654943'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-07T18:22:23+00:00">Jan 7, 2015 06:22 PM UTC</time><a class="anchor" name="1420654943">&nbsp;</a></div><pre>Hi Alan,

1. Can you please run osg-profile and attach the input to this ticket?

2. Can you repeat your srm-ls but with -debug flag and include the output?

3. Can you attach as well some bestman logs when this is done?

Carl,

Can you give this a look please?

Cheers,

Edgar
OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='23549#1420487439'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-05T19:50:39+00:00">Jan 5, 2015 07:50 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1420487439">&nbsp;</a></div><pre>Hello Alan and Software,

Sorry for the delay with this. I didn&#39;t realize that this was routed incorrectly. I have assigned the software team to this as I am not sure who the best person to talk to would be for a bestman issue.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='23549#1418854809'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-17T22:20:09+00:00">Dec 17, 2014 10:20 PM UTC</time><a class="anchor" name="1418854809">&nbsp;</a></div><pre>Update&#58; the problem remains after updating to the latest Bestman2 version&#58;

[root@sigmorgh bestman2]# rpm -qa | grep -i bestman
bestman2-tester-2.3.0-21.osg32.el6.noarch
bestman2-server-dep-libs-2.3.0-21.osg32.el6.noarch
bestman2-client-2.3.0-21.osg32.el6.noarch
bestman2-tester-libs-2.3.0-21.osg32.el6.noarch
bestman2-client-libs-2.3.0-21.osg32.el6.noarch
bestman2-server-2.3.0-21.osg32.el6.noarch
bestman2-server-libs-2.3.0-21.osg32.el6.noarch
osg-se-bestman-3.0.0-9.osg.el6.x86_64
bestman2-common-libs-2.3.0-21.osg32.el6.noarch

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4</pre></div><div class='update_description'><i onclick="document.location='23549#1418854736'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-17T22:18:56+00:00">Dec 17, 2014 10:18 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1418854736">&nbsp;</a></div><pre>We are seeing an odd problem in which the first usage of an lcg-ls or srm-ls command produces a result, but subsequent uses of the same command produce an error. Here is an example, with immediately sequential instances of the same command&#58;

antaeus&#58;$ lcg-ls -b -D srmv2 &#34;<a href='srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms/buffer&#34' target='_blank' rel='nofollow'>srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms/buffer&#34</a>;
/lustre/hep/cms/buffer

antaeus&#58;$ lcg-ls -b -D srmv2 &#34;<a href='srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms/buffer&#34' target='_blank' rel='nofollow'>srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms/buffer&#34</a>;
/lustre/hep/cms/buffer&#58; [SE][Ls][SRM_INVALID_PATH] No such file or directory.

There seem to be no problems with the gridftp server itself on the machine, as uberftp for example works fine and is able to access the indicated directory. The same happens with any other similar example.

using the srm-ls command gives a little more detail, but not much. The first instance of the command results in success, but returns a message that an empty directory has been read. The second instance of the same command results in a failure.  (The directory is of course not empty in this case, so even the first command appears not to be working correctly.) The full results using srm-ls are at the end of this message.

Has anyone seen this problem, and/or do you have any suggestions as to how to debug it? Suggestiosn would be appreciated.

The osg-version command returns OSG 3.2.9 as the version and our best man-related rpms are as below.

Alan

# rpm -qa | grep -i bestman

bestman2-common-libs-2.3.0-17.osg32.el6.noarch
bestman2-client-2.3.0-17.osg32.el6.noarch
bestman2-tester-libs-2.3.0-17.osg32.el6.noarch
bestman2-client-libs-2.3.0-17.osg32.el6.noarch
bestman2-server-libs-2.3.0-17.osg32.el6.noarch
bestman2-server-2.3.0-17.osg32.el6.noarch
osg-se-bestman-3.0.0-9.osg.el6.x86_64
bestman2-server-dep-libs-2.3.0-17.osg32.el6.noarch
bestman2-tester-2.3.0-17.osg32.el6.noarch

antaeus&#58;$ srm-ls &#34;<a href='srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms&#34' target='_blank' rel='nofollow'>srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms&#34</a>;
srm-ls   2.2.2.3.0  Wed Nov  7 16&#58;03&#58;09 CST 2012

BeStMan and SRM-Clients Copyright(c) 2007-2012,
Lawrence Berkeley National Laboratory. All rights reserved.
<div id='show_1548642771' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1548642771'>Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>
OSG Support at osg-software@.... and
documentation at <a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/</a>

SRM-CLIENT&#58; Connecting to serviceurl httpg&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server

SRM-DIR&#58; Tue Dec 16 08&#58;51&#58;20 CST 2014 Calling srmLsRequest

SRM-DIR&#58; ..........................
Status    &#58; SRM_SUCCESS
Explanation &#58; null
Request token=null

SURL=/lustre/hep/cms
Bytes=null
FileType=DIRECTORY
StorageType=null
Status=SRM_SUCCESS
Explanation=Empty dir read from disk
FileLocality=ONLINE

SRM-DIR&#58; Printing text report now ...
SRM-CLIENT*REQUEST_STATUS=SRM_SUCCESS
SRM-CLIENT*SURL=/lustre/hep/cms
SRM-CLIENT*FILETYPE=DIRECTORY
SRM-CLIENT*FILE_STATUS=SRM_SUCCESS
SRM-CLIENT*FILE_EXPLANATION=Empty dir read from disk
SRM-CLIENT*FILELOCALITY=ONLINE

antaeus&#58;$ srm-ls &#34;<a href='srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms&#34' target='_blank' rel='nofollow'>srm&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server?SFN=/lustre/hep/cms&#34</a>;
srm-ls   2.2.2.3.0  Wed Nov  7 16&#58;03&#58;09 CST 2012

BeStMan and SRM-Clients Copyright(c) 2007-2012,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>
OSG Support at osg-software@.... and
documentation at <a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/</a>

SRM-CLIENT&#58; Connecting to serviceurl httpg&#58;//sigmorgh.hpcc.ttu.edu&#58;49443/srm/v2/server

SRM-DIR&#58; Tue Dec 16 08&#58;51&#58;37 CST 2014 Calling srmLsRequest

SRM-DIR&#58; ..........................
Status    &#58; SRM_FAILURE
Explanation &#58; null
Request token=null

SURL=/lustre/hep/cms
Bytes=null
FileType=null
StorageType=null
Status=SRM_INVALID_PATH
Explanation=No such file or directory.
FileLocality=ONLINE

SRM-DIR&#58; Printing text report now ...
SRM-CLIENT*REQUEST_STATUS=SRM_FAILURE
SRM-CLIENT*SURL=/lustre/hep/cms
SRM-CLIENT*FILE_STATUS=SRM_INVALID_PATH
SRM-CLIENT*FILE_EXPLANATION=No such file or directory.
SRM-CLIENT*FILELOCALITY=ONLINE

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Alan Sill 4

</div><script type='text/javascript'>
        $('#show_1548642771').click(function() {
            $('#detail_1548642771').slideDown("normal");
            $('#show_1548642771').hide();
            $('#hide_1548642771').show();
        });
        $('#hide_1548642771').click(function() {
            $('#detail_1548642771').slideUp();
            $('#hide_1548642771').hide();
            $('#show_1548642771').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F23549">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 23549});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
