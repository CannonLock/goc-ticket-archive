<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[4896] User having problems while querying the status of jobs using &#39;globusrun-ws -status -j &#60;epr&#62;&#39;</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=4896" method="post">
<div class="page-header">
    <h3><span class="muted">4896</span> / User having problems while querying the status of jobs using &#39;globusrun-ws -status -j &#60;epr&#62;&#39;</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Thomas Radke</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Wait for response from assignee</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-05-16</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/4896", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/4896?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/4896?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20User%20having%20problems%20while%20querying%20the%20status%20of%20jobs%20using%20%26%2339%3Bglobusrun-ws%20-status%20-j%20%26%2360%3Bepr%26%2362%3B%26%2339%3B%20ISSUE%3D4896%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='4896#1210412228'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-05-10T09:37:08+00:00">May 10, 2008 09:37 AM UTC</time> by <b>Thomas Radke</b><a class="anchor" name="1210412228">&nbsp;</a></div><pre>Sorry for the missing reply, that was an oversight of mine.
The ticket can be closed, it is related to ticket 4895 by Britta Daudert
which has been resolved.

Thank you very much !

--
Cheers, Thomas.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4896#1210374971'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-05-09T23:16:11+00:00">May 9, 2008 11:16 PM UTC</time> by <b>echism</b><a class="anchor" name="1210374971">&nbsp;</a></div><pre>Thomas,

We never received a reply on this issue. Do you wish to keep this issue open?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='4896#1208964848'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-23T15:34:08+00:00">Apr 23, 2008 03:34 PM UTC</time> by <b>Charles Bacon</b><a class="anchor" name="1208964848">&nbsp;</a></div><pre>The lifetime doesn&#39;t inspect maxWallTime, that&#39;s correct.

However, there&#39;s no penalty for setting the termination time to far in
the future, and one can even set it to &#39;infinity&#39; if you never want it
to be destroyed automatically.  So there&#39;s no need to try to set it
based on queue lengths.  Also, if you are doing continuous monitoring
of your job, you can also increase the lifetime of the job while you
monitor it by using wsrf-set-termination-time.

When using the infinite lifetime, one should call wsrf-destroy on the
EPR file once the job is known to be done so that the container can
reclaim the memory/resources associated with keeping track of the job.

Charles

On Apr 23, 2008, at 10&#58;22 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4896#1208964129'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-23T15:22:09+00:00">Apr 23, 2008 03:22 PM UTC</time> by <b>Thomas Radke</b><a class="anchor" name="1208964129">&nbsp;</a></div><pre>Hi Charles,

just to get this confirmed&#58; if not set otherwise, a WS-GRAM job will
automatically be destroyed after 24 hours, regardless of its current
state and independent of what is set as &#60;maxWallTime&#62; in the job&#39;s RSL ?
This also implies that I have to make a guestimate on the maximum queue
waiting time on a given Grid resource and take that into account when
setting the job&#39;s lifetime ?

--
Cheers, Thomas.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4896#1208962149'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-23T14:49:09+00:00">Apr 23, 2008 02:49 PM UTC</time> by <b>Charles Bacon</b><a class="anchor" name="1208962149">&nbsp;</a></div><pre>If no lifetime is set with -term, the lifetime will be set to 24h.
You can extend the lifetime of the resource during those 24h using the
wsrf-set-termination-time client if you realize it is too short, or
you can set it longer in the beginning by using -term.  Otherwise when
the 24h are up, the resource will be destroyed, which includes
canceling the job at the scheduler.

We&#39;re still looking into the issue with globusrun-ws querying expired
jobs, our ticket for it is at <a href='http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=6036' target='_blank' rel='nofollow'>http&#58;//bugzilla.globus.org/bugzilla/show_bug.cgi?id=6036</a>

Please let me know if these new options improve your situation or
not.  I will followup when we have a resolution for bug 6036, I think
it would be a useful patch to apply to VDT when it&#39;s ready.

Charles

On Apr 23, 2008, at 7&#58;52 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4896#1208955129'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-23T12:52:09+00:00">Apr 23, 2008 12:52 PM UTC</time> by <b>Thomas Radke</b><a class="anchor" name="1208955129">&nbsp;</a></div><pre>Hi Charles et.al.,

thank you very much for checking into the problem so quickly !

Following your suggestion, I increased the idle timeout of our local
GridFtp server (where our Grid jobs&#39; logfiles get staged to) to 120 seconds.

Regarding the explicit setting of a job&#39;s life/termination time during
its submission, I&#39;m still confused though. I presume it&#39;s the time how
long WS-GRAM will keep this job in its database so that the owner can
query the job status ? Does that mean that, if I don&#39;t specify an option
&#39;-term &#60;lifetime&#62;&#39; on the &#39;globusrun-ws -submit&#39; command line, the job
will be vanish after 24 hours ? What if it is still running, will it be
killed then (I hope not) ? I guess I haven&#39;t really understood yet what
this option is about.
Interestingly, a former version of our code (not written by myself) used
to submit jobs with that option and a lifetime set to &#39;+168&#58;00&#39;. I
recently took out this option because (1) I didn&#39;t know what it does,
and (2) it didn&#39;t seem to have any curing effect on the number of
failing job sttaus queries. I now reactivated this option, with an
_absolute_ lifetime set to &#39;1 year from today&#39;, as you suggested. Let&#39;s
see (tomorrow) whether this has an effect.

I also noticed that, after their lifetime is over, &#39;globusrun-ws -status
-j &#60;epr&#62;&#39; gives that SOAP exception for _all_ jobs, including the ones
which had been reported as &#39;Done&#39; before. Apparently this is a bug in
the WS-GRAM code.

Finally, I could not check the container logfile for a correlation of an
&#39;idle timeout&#39; error from the GridFTP server during a job&#39;s stage-out
phase and its status query failing with the SOAP exception - because
today I was unable to reproduce the problem with my {submit,status}.pl
test program &#58;-( But thanks for the clarification how to identify a
job&#39;s entry in the container logfile. I will re-try when such an error
occurs again.
<div id='show_489138108' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_489138108'>
Let&#39;s see how my future jobs behave with the two changes described
above. Thanks for the very useful hints !

--
Cheers, Thomas.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_489138108').click(function() {
            $('#detail_489138108').slideDown("normal");
            $('#show_489138108').hide();
            $('#hide_489138108').show();
        });
        $('#hide_489138108').click(function() {
            $('#detail_489138108').slideUp();
            $('#hide_489138108').hide();
            $('#show_489138108').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4896#1208890509'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-22T18:55:09+00:00">Apr 22, 2008 06:55 PM UTC</time> by <b>Charles Bacon</b><a class="anchor" name="1208890509">&nbsp;</a></div><pre>Sorry to followup on myself so quickly, but I have been able to
reproduce the issue.  Here&#39;s what I&#39;ve got so far, but we&#39;re still
looking into the cause of the problem.

1)  WS-GRAM resources are setup to self-cleanup.
2)  Once a WS-GRAM resource expires, the client should get &#34;Resource
unknown&#34; when querying for status.

The lifetime is controlled by the globusrun-ws command&#58;
-term, -termination +&#60;HH&#58;MM&#62;|&#60;mm/dd/yyyy HH&#58;MM&#62;&#58;
Set a termination time (+relative to now).
*default&#58; +24&#58;00

So 24 hours after a job submission, the resource will get cleaned up,
and the globusrun-ws -status should return a &#34;Resource unknown&#34;
error.  However, something is going wrong and the client is instead
printing out this unhelpful SOAP Fault.  We&#39;re still looking into
what&#39;s going on, it&#39;s not obvious why this is happening.

As a workaround, you can set -term with a date one year in the
future.  Sadly, the relative date feature was fixed in 4.0.7, and
won&#39;t work for OSG until the next VDT release is installed.  Details
at <a href='http&#58;//bugzilla.globus.org/globus/show_bug.cgi?id=5711' target='_blank' rel='nofollow'>http&#58;//bugzilla.globus.org/globus/show_bug.cgi?id=5711</a>

However, absolute dates work, so&#58;
$ globusrun-ws -submit -term &#34;&#96;date -j -v +1y &#34;+%m/%d/%Y %H&#58;%M&#34;&#96;&#34; -F
wiggum.mcs.anl.gov&#58;50500 -c /bin/date
Submitting job...Done.
Job ID&#58; uuid&#58;dbe57cf4-109c-11dd-8310-001f5bec2cb8
Termination time&#58; 04/22/2009 13&#58;49 GMT

You can see that this job has a Termination time one year in the future.

So, in summary, I found these issues related to this ticket&#58;

<div id='show_234661092' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_234661092'>1)  The Idle timeout on some OSG GridFTP servers is probably too
short.  This led to the original job errors of &#34;421 Idle Timeout&#34;.
The GridFTP servers should get a longer timeout with &#34;-control-preauth-
timeout 120&#34;
2)  globusrun-ws has an error reporting &#34;Resource unknown&#34; and instead
prints an unhelpful error message.  We will investigate and fix this
3)  The user probably didn&#39;t want a 24 hour timeout, but that&#39;s the
default for globusrun-ws.  This can be fixed using the -term option.
The relative dates will work with VDT 1.10.0, but absolute dates are
guaranteed to work.

Charles

On Apr 22, 2008, at 1&#58;19 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_234661092').click(function() {
            $('#detail_234661092').slideDown("normal");
            $('#show_234661092').hide();
            $('#hide_234661092').show();
        });
        $('#hide_234661092').click(function() {
            $('#detail_234661092').slideUp();
            $('#hide_234661092').hide();
            $('#show_234661092').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4896#1208888349'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-22T18:19:09+00:00">Apr 22, 2008 06:19 PM UTC</time> by <b>Charles Bacon</b><a class="anchor" name="1208888349">&nbsp;</a></div><pre>Status update&#58;
I was unable to reproduce the problem locally.  However, it sounds
like the problem may not happen for jobs that succeed, and all my jobs
succeeded.  It sounds like the error&#58;
<font color='#7F7E6F'>&#62;   globusrun-ws&#58; Error querying job state</font>
<font color='#7F7E6F'>&#62; globus_soap_message_module&#58; SOAP Fault</font>
<font color='#7F7E6F'>&#62; Fault code&#58; soapenv&#58;Server.generalException</font>

happens when querying for job status on a job that failed, but only
some time after the original failure is available from the server.
I&#39;ve asked for clarification to see if that&#39;s true.

In the meantime, the submit/status scripts that Thomas provided all
output EPR files.  Those EPR files, as I mentioned earlier, contain
the unique JobID that one can look for in the container-real.log
file.  Can anyone who has been able to reproduce this problem get the
UUID of one of the jobs out of the .epr file and look for it in the
relevant container logs?  That is to say, given this EPR file&#58;

$ cat wiggum.mcs.anl.gov-0.epr
&#34;&#62;&#60;ns00&#58;Address&#62;https&#58;//140.221.11.99&#58;50500/wsrf/services/ManagedExecutableJobService
&#60;/ns00&#58;Address&#62;&#60;ns00&#58;ReferenceProperties&#62;&#60;ResourceID xmlns=&#34;<a href='http&#58;//www.globus.org/namespaces/2004/10/gram/job' target='_blank' rel='nofollow'>http&#58;//www.globus.org/namespaces/2004/10/gram/job</a>
&#34;&#62;2a525300-1096-11dd-9042-c2c81c5de375&#60;/ResourceID&#62;&#60;/
ns00&#58;ReferenceProperties&#62;&#60;wsa&#58;ReferenceParameters xmlns&#58;wsa=&#34;<a href='http&#58;//schemas.xmlsoap.org/ws/2004/03/addressing' target='_blank' rel='nofollow'>http&#58;//schemas.xmlsoap.org/ws/2004/03/addressing</a>
&#34;/&#62;&#60;/ns00&#58;EndpointReferenceType&#62;

The job&#39;s UUID is 2a525300-1096-11dd-9042-c2c81c5de375
The container that hosts the log is at 140.221.11.99

Grepping the log for that UUID should turn up all the relevant logs
for the job.

Charles
On Apr 22, 2008, at 8&#58;04 AM, Open Science Grid FootPrints wrote&#58;

<div id='show_1120584642' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1120584642'><font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1120584642').click(function() {
            $('#detail_1120584642').slideDown("normal");
            $('#show_1120584642').hide();
            $('#hide_1120584642').show();
        });
        $('#hide_1120584642').click(function() {
            $('#detail_1120584642').slideUp();
            $('#hide_1120584642').hide();
            $('#show_1120584642').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4896#1208869448'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-22T13:04:08+00:00">Apr 22, 2008 01:04 PM UTC</time> by <b>Charles Bacon</b><a class="anchor" name="1208869448">&nbsp;</a></div><pre>Okay.  Can you email me the two scripts (bacon@....)?  You can
figure out the unique jobid of the job if you look inside the epr file
when you have the problem.  The EPR is an xml blob, and you will see
that the ResourceKey of the EPR is equal to the UUID of the job in
GRAM, which will let you find it in the logs.

Charles

On Apr 22, 2008, at 4&#58;19 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4896#1208855949'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-22T09:19:09+00:00">Apr 22, 2008 09:19 AM UTC</time> by <b>Thomas Radke</b><a class="anchor" name="1208855949">&nbsp;</a></div><pre>Hi Charles et.al.,

thanks for looking into this issue of job status query problems !

I have not checked yet the Globus container logs for possible hints on
why the status of jobs couldn&#39;t be queried anymore. The difficulty is
also that I have no clear idea _when_ the general exception error
appears the first time so that one could look up the corresponding time
stamp in the log file.

I would suggest to pick an OSG machine with WS-GRAM and try out those
two scripts (submit.pl and then repeatedly status.pl) on it. I have used
BNL_ATLAS_1, Britta has tested it on UWMilwaukee with the standard
Globus WS-GRAM installation there. Maybe one should deploy a separate
Globus for testing, so as not to disturb OSG production runs ?

Please let me know if I can be of more help (from the client side) !

--
Cheers, Thomas.

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4896#1208815268'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-21T22:01:08+00:00">Apr 21, 2008 10:01 PM UTC</time> by <b>Charles Bacon</b><a class="anchor" name="1208815268">&nbsp;</a></div><pre>This is not one we know.  I forwarded the information on the GRAM
developers, and these were their followup questions&#58;

&#34;I have not seen this either.  This is only the client-side error, is
there any info in the container log file?  Any other info about the
state of the container / host when this happens?  Are job submission
failing at this time too or other failures?  What is the load on the
system at this time?&#34;

You might want to add smartin@.... to the ticket also to
shorten the feedback loop.

Charles

On Apr 21, 2008, at 3&#58;43 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4896#1208810274'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-04-21T20:37:54+00:00">Apr 21, 2008 08:37 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1208810274">&nbsp;</a></div><pre>Charles (Bacon), can you please look at this note, and see if it&#39;s something you&#39;re
aware off/ can resolve easily / look into resolving. Thomas Radke is seeing a fairly
consistent rate of failures with WS-Gram jobs at various OSG resources.

I am NOT assigning this ticket to any particular resource admin or the like since the
issue appears to be with Globus or its related bits. Correct me if I am wrong, thanks!

----------

There are now other problems though while querying the status of jobs
using &#39;globusrun-ws -status -j &#60;epr&#62;&#39;. The error I&#39;m seeing looks like this&#58;

<font color='#7F7E6F'>&#62; &#62; globusrun-ws&#58; Error querying job state</font>
<font color='#7F7E6F'>&#62; &#62; globus_soap_message_module&#58; SOAP Fault</font>
<font color='#7F7E6F'>&#62; &#62; Fault code&#58; soapenv&#58;Server.generalException</font>

and it happens for a considerable (5-50%, it varies a lot over time)
number of my jobs. I&#39;m seeing the very same problem at other OSG sites.
I also wrote a test program, to exclude the possibility of a bug in my
application code. This very simple test program (it&#39;s just two short
perl scripts) reproduces the above error, and it was also tested and
seen by another LIGO user (Britta Daudert, &#60;bdaudert@....&#62;).
Britta will probably forward the test program to the admins she knows,
for further investigation. Would you also have time to look into this
problem ? Should we open a separate OSG ticket for that ?
-- Cheers, Thomas.
---------------</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F4896">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
