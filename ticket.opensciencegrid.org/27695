<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="/">
    <title>[27695] MIT_CMS_2 not sending Gratia records</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="//netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="https://ticket.opensciencegrid.org/images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="https://ticket.opensciencegrid.org/lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=27695" method="post">
<div class="page-header">
    <h3><span class="muted">27695</span> / MIT_CMS_2 not sending Gratia records</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Bodhitha Jayatilaka</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">MIT_CMS_2</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Bodhitha Jayatilaka</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier2</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Scott resubmit Nov data</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-12-16</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Scott Teige <span class="muted"> / OSG Operations Infrastructure</span></div><div class="assignee" style="width: 60%">USCMS Tier 2 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Carl Edquist <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=27695", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="/27695?sort=up&"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="/27695?expandall=true&">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20MIT_CMS_2%20not%20sending%20Gratia%20records%20ISSUE%3D27695%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='27695#1450186622'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-15T13:37:02+00:00">Dec 15, 2015 01:37 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1450186622">&nbsp;</a></div><pre>the regenerated november report provided by Carl has been resent. Resolving this ticket.</pre></div><div class='update_description'><i onclick="document.location='27695#1450102106'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-14T14:08:26+00:00">Dec 14, 2015 02:08 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1450102106">&nbsp;</a></div><pre>Hi,
Thank you for your email. I am on vacation  December 10th - December 27th and unable to respond at this time. I will review your message following my return.
Please contact Margaret Votava (votava@....)  for the SDCS related issues, Kevin Retzke (kretzke@....) if you have questions about Gratia, OSG Production Support ( osg-prod-support@.... ) for the OSG issues.
Best regards,
Tanya</pre></div><div class='update_description'><i onclick="document.location='27695#1449863259'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-11T19:47:39+00:00">Dec 11, 2015 07:47 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1449863259">&nbsp;</a></div><pre>The only thing left is for Scott to resubmit the November data, I think.

Carl</pre></div><div class='update_description'><i onclick="document.location='27695#1449859934'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-11T18:52:14+00:00">Dec 11, 2015 06:52 PM UTC</time><a class="anchor" name="1449859934">&nbsp;</a></div><pre>Yes, I believe the issue is resolved, we would like to thank everyone for the help.

Regards, -Max

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=maxi/CN=682514/CN=Maxim Goncharov</pre></div><div class='update_description'><i onclick="document.location='27695#1449859846'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-11T18:50:46+00:00">Dec 11, 2015 06:50 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1449859846">&nbsp;</a></div><pre>Hi,
Thank you for your email. I am on vacation  December 10th - December 27th and unable to respond at this time. I will review your message following my return.
Please contact Margaret Votava (votava@....)  for the SDCS related issues, Kevin Retzke (kretzke@....) if you have questions about Gratia, OSG Production Support ( osg-prod-support@.... ) for the OSG issues.
Best regards,
Tanya</pre></div><div class='update_description'><i onclick="document.location='27695#1449859737'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-11T18:48:57+00:00">Dec 11, 2015 06:48 PM UTC</time><a class="anchor" name="1449859737">&nbsp;</a></div><pre>Hi Scott, Carl,

It looks like this is fixed. Can we close this?

Edgar

OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='27695#1449769244'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-10T17:40:44+00:00">Dec 10, 2015 05:40 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1449769244">&nbsp;</a></div><pre>Actually, I think I did the math wrong.  I multiplied the totals by 13/30, to get 13 days worth, but the previous totals only represented 17 days, not 30. So the totals should be multiplied by 13/17 to get the extrapolated section.  That brings the extra section to&#58;

%%
Site&#58; MIT_CMS
VO&#58; cms
EarliestEndTime&#58; 1446336000
LatestEndTime&#58; 1448841600
Month&#58; 11
Year&#58; 2015
Infrastructure&#58; Gratia-OSG
GlobalUserName&#58; extrapolated MIT_CMS accounting for November 13-25 2015
Processors&#58; 1
NodeCount&#58; 1
WallDuration&#58; 7348643674
CpuDuration&#58; 5266586846
NormalisedWallDuration&#58; 79365351681
NormalisedCpuDuration&#58; 56879137940
NumberOfJobs&#58; 119480
%%

Sorry about that.

I&#39;ve updated the report here&#58;
<a href='https&#58;//raw.githubusercontent.com/edquist/apel/reports/send/11_2015.apel' target='_blank' rel='nofollow'>https&#58;//raw.githubusercontent.com/edquist/apel/reports/send/11_2015.apel</a>

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='27695#1449757678'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-10T14:27:58+00:00">Dec 10, 2015 02:27 PM UTC</time><a class="anchor" name="1449757678">&nbsp;</a></div><pre>I&#39;m fine with that logic, Carl.

Scott, do you agree?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='27695#1449699864'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-09T22:24:24+00:00">Dec 9, 2015 10:24 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1449699864">&nbsp;</a></div><pre>So I found the following MIT_CMS/cms entries for the November apel report&#58;

Site     VO   EarliestET  LatestET    Count   NormWallDur   GlobalUserName
MIT_CMS  cms  2015-11-01  2015-11-30  5682    11045386      /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=sciaba/CN=430796/CN=Andrea Sciaba
MIT_CMS  cms  2015-11-01  2015-11-30  1081    251593786     /DC=ch/DC=cern/OU=computers/CN=cmspilot01/vocms080.cern.ch
MIT_CMS  cms  2015-11-01  2015-11-30  142645  103084125908  /DC=ch/DC=cern/OU=computers/CN=cmspilot02/vocms080.cern.ch
MIT_CMS  cms  2015-11-03  2015-11-30  103     1905508       /DC=ch/DC=cern/OU=computers/CN=cmspilot04/vocms080.cern.ch
MIT_CMS  cms  2015-11-18  2015-11-22  321     257225004     /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=pilot/cmsgwms-frontend.fnal.gov
MIT_CMS  cms  2015-11-25  2015-11-30  6412    179564299     /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bockjoo Kim UFlorida T2 Service 118

And also one for MIT_CMS/atlas, which I assume we are ignoring based on the gratiaweb links below

MIT_CMS atlas 2015-11-01  2015-11-27  1387    18576475      /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jhover/CN=653174/CN=John Raymond Hover

Rather than trying to do something clever an extrapolate the value for each GlobalUserName/DN, I&#39;ve just added a single entry that is the total for each field for the month times 13/30 (for the 13 missing days from Nov 13-25), and I am giving an obvious name for the GlobalUserName field&#58;

%%
Site&#58; MIT_CMS
VO&#58; cms
EarliestEndTime&#58; 1446336000
LatestEndTime&#58; 1448841600
Month&#58; 11
Year&#58; 2015
Infrastructure&#58; Gratia-OSG
GlobalUserName&#58; extrapolated MIT_CMS accounting for November 13-25 2015
Processors&#58; 1
NodeCount&#58; 1
WallDuration&#58; 4164231415
CpuDuration&#58; 2984399213
NormalisedWallDuration&#58; 44973699286
NormalisedCpuDuration&#58; 32231511499
NumberOfJobs&#58; 67705
%%

Does this seem like the right way to handle it?
<div id='show_500883247' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_500883247'>
If so, Scott, I&#39;ve posted the amended report here&#58;
<a href='https&#58;//raw.githubusercontent.com/edquist/apel/reports/send/11_2015.apel' target='_blank' rel='nofollow'>https&#58;//raw.githubusercontent.com/edquist/apel/reports/send/11_2015.apel</a>

Thanks,
Carl
</div><script type='text/javascript'>
        $('#show_500883247').click(function() {
            $('#detail_500883247').slideDown("normal");
            $('#show_500883247').hide();
            $('#hide_500883247').show();
        });
        $('#hide_500883247').click(function() {
            $('#detail_500883247').slideUp();
            $('#hide_500883247').hide();
            $('#show_500883247').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='27695#1449683761'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-09T17:56:01+00:00">Dec 9, 2015 05:56 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1449683761">&nbsp;</a></div><pre>Ok, I can work on amending the report and post a link to it here for Scott to resend.

Scott, let me know if you&#39;d like to handle it any differently.

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='27695#1449681573'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-09T17:19:33+00:00">Dec 9, 2015 05:19 PM UTC</time><a class="anchor" name="1449681573">&nbsp;</a></div><pre>Just for the WLCG report. I don&#39;t think we want anything but actual records ever going to Gratia.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='27695#1449681484'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-09T17:18:04+00:00">Dec 9, 2015 05:18 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1449681484">&nbsp;</a></div><pre>Bo,

Are you suggesting just extrapolating the numbers in the WLCG report, or adding (extrapolated) data to the gratia db and then just re-running the report normally?

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='27695#1449677081'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-09T16:04:41+00:00">Dec 9, 2015 04:04 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1449677081">&nbsp;</a></div><pre>Thanks Max for the feedback; I&#39;ll discuss the packaging dependency question with our team.

But I think the problem is that gratia-probe-condor requires condor, not the other way around.  Since empty-condor also provides &#34;condor&#34;, it satisfies gratia-probe-condor&#39;s requirement for condor to be installed, and then when empty-condor is removed, gratia-probe-condor is forced to be removed also (since it requires condor to be installed).  condor does not require gratia-probe-condor though, since it possible to have a working condor setup without gratia-probe-condor installed.

We can look into a better way to either &#34;upgrade&#34; from empty-condor to the real condor without messing up dependent packages (like gratia-probe-condor), or else it might be a matter of installing the right osg meta-package that includes both condor and gratia-probe-condor...

Carl</pre></div><div class='update_description'><i onclick="document.location='27695#1449674340'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-09T15:19:00+00:00">Dec 9, 2015 03:19 PM UTC</time><a class="anchor" name="1449674340">&nbsp;</a></div><pre>Note to Carl about the dependencies in the package.
It seems to me that something needs to be adjusted in the list of dependencies for gratia condor part.
I should be able through yum install and remove packages in any reasonable way and end up with the same final
installation no matter what. So if I remove condor yum removes gratia condor part, then when I install condor
again it should install gratia condor again. After all, I installed empty condor not because I mis-typed something by mistake
but because I misunderstood instructions (meaning I would have enabled extra repo).

-Max

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=maxi/CN=682514/CN=Maxim Goncharov</pre></div><div class='update_description'><i onclick="document.location='27695#1449674001'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-09T15:13:21+00:00">Dec 9, 2015 03:13 PM UTC</time><a class="anchor" name="1449674001">&nbsp;</a></div><pre>It looks like the records for for that time period (roughly 11/13 to 11/27) are lost then. Can we amend the WLCG report for that time period by extrapolating the numbers from MIT_CMS_1 (it should be roughly the same level of usage). Either way, we&#39;d need some sort of note in the report indicating what the numbers are (that they&#39;re partially extrapolated).

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='27695#1449665439'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-09T12:50:39+00:00">Dec 9, 2015 12:50 PM UTC</time><a class="anchor" name="1449665439">&nbsp;</a></div><pre>Hi Tanya,
when I run condor_history I do not see anything for for November. I had to blow away some time ago condor spool directory that
has history files, so I guess we cant recover data for missing days.

-Max

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=maxi/CN=682514/CN=Maxim Goncharov</pre></div><div class='update_description'><i onclick="document.location='27695#1449619386'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-09T00:03:06+00:00">Dec 9, 2015 12:03 AM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1449619386">&nbsp;</a></div><pre>Yeah, those timestamps (JobStartDate, CompletionDate) do not appear to be new, they are for Dec 6/8.

You can try to limit the history with&#58;

condor_history -constraint &#39;((JobCurrentStartDate &#62; &#34;2015-11-13&#34;) && (JobCurrentStartDate &#60; &#34;2015-11-26&#34;))&#39; &#62; hist.log

or else just run

condor_history | less

and page-down until you get to that part of November.

The question is whether or not jobs show up between 11/13 and 11/26...

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='27695#1449618252'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T23:44:12+00:00">Dec 8, 2015 11:44 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1449618252">&nbsp;</a></div><pre>Hi,

There is no changes in Gratia. If you just do condor_history for this period - what do you get?

Thanks,
Tanya
On Dec 8, 2015, at 5&#58;33 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27695#1449617611'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T23:33:31+00:00">Dec 8, 2015 11:33 PM UTC</time><a class="anchor" name="1449617611">&nbsp;</a></div><pre>Ok, I have done this one, but our CE was restarted a couple of times since then, so I get only&#58;

cd /var/lib/gratia/data; ls -1rt | tail -1 | xargs egrep -H &#39;JobStartDate|CompletionDate&#39;
history.9862.0&#58;CompletionDate = 1449617242
history.9862.0&#58;JobStartDate = 1449447073

-Max

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=maxi/CN=682514/CN=Maxim Goncharov</pre></div><div class='update_description'><i onclick="document.location='27695#1449608527'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T21:02:07+00:00">Dec 8, 2015 09:02 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1449608527">&nbsp;</a></div><pre>Sorry that should have been &#34;/var&#34;, not &#34;./var&#34;&#58;

( cd /var/lib/gratia/data; ls -1rt | tail -1 | xargs egrep -H &#39;JobStartDate|CompletionDate&#39; )</pre></div><div class='update_description'><i onclick="document.location='27695#1449608466'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T21:01:06+00:00">Dec 8, 2015 09:01 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1449608466">&nbsp;</a></div><pre>Max,

Can you run this command&#58;

/usr/share/gratia/condor/condor_meter --history --start-time=2015-11-13 --end-time=2015-11-26

That will default to 00&#58;00&#58;00 for each date, and should attempt to get the history for that time range from condor_history...

I *think* after that you should see new history files under /var/lib/gratia/data, and we can check the dates in the latest one with&#58;

( cd ./var/lib/gratia/data; ls -1rt | tail -1 | xargs egrep -H &#39;JobStartDate|CompletionDate&#39; )

Give that a try and see what comes back.

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='27695#1449605813'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T20:16:53+00:00">Dec 8, 2015 08:16 PM UTC</time><a class="anchor" name="1449605813">&nbsp;</a></div><pre>Ok, stopped gratia-probes-cron ob this CE

-Max

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=maxi/CN=682514/CN=Maxim Goncharov</pre></div><div class='update_description'><i onclick="document.location='27695#1449602062'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T19:14:22+00:00">Dec 8, 2015 07:14 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1449602062">&nbsp;</a></div><pre>we can run with —history --start-time --end-time

manually. You have to stop probe first.

Tanya
On Dec 8, 2015, at 1&#58;01 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27695#1449601280'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T19:01:20+00:00">Dec 8, 2015 07:01 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1449601280">&nbsp;</a></div><pre>Tanya, is there anywhere else we can get the data for this period if the history files are missing?

Carl</pre></div><div class='update_description'><i onclick="document.location='27695#1449600976'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T18:56:16+00:00">Dec 8, 2015 06:56 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1449600976">&nbsp;</a></div><pre>Based on the timestamps of the history files in your tar gratia_varlib.tar file, I also see the gap between Nov 12 and Nov 26...

Carl</pre></div><div class='update_description'><i onclick="document.location='27695#1449600878'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T18:54:38+00:00">Dec 8, 2015 06:54 PM UTC</time><a class="anchor" name="1449600878">&nbsp;</a></div><pre>I posted what I had in log and var/lib here&#58;
<a href='http&#58;//www.cmsaf.mit.edu/Gratia/' target='_blank' rel='nofollow'>http&#58;//www.cmsaf.mit.edu/Gratia/</a>
I have no idea if it has anything for missing 15 days or not

-Max

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=maxi/CN=682514/CN=Maxim Goncharov</pre></div><div class='update_description'><i onclick="document.location='27695#1449600443'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T18:47:23+00:00">Dec 8, 2015 06:47 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1449600443">&nbsp;</a></div><pre>there is a gap between  2015-11-13 00&#58;00&#58;00  and 2015-11-26 00&#58;00&#58;00. I don’t know if the data are missing or jobs were not running …
We are getting current records now. Do you have any history file from this period in /var/lib/gratia/data?

Thanks,
Tanya
On Dec 8, 2015, at 12&#58;33 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27695#1449599623'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T18:33:43+00:00">Dec 8, 2015 06:33 PM UTC</time><a class="anchor" name="1449599623">&nbsp;</a></div><pre>There is still a gap in reporting for as long as 15 days for November.

-Max

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=maxi/CN=682514/CN=Maxim Goncharov</pre></div><div class='update_description'><i onclick="document.location='27695#1449597390'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T17:56:30+00:00">Dec 8, 2015 05:56 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1449597390">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Tanya, do I understand correctly that we do not need to try to resend Max&#39;s data ourselves since his site is reporting all the accumulated data for November now? We (Scott) just need to re-generate & send the WLCG data for November?</font>
<font color='#7F7E6F'>&#62;</font>

Yes, there are all there.
Thanks,
Tanya
On Dec 8, 2015, at 11&#58;44 AM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='27695#1449596639'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T17:43:59+00:00">Dec 8, 2015 05:43 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1449596639">&nbsp;</a></div><pre>Thanks Max for the explanation, that makes sense what happened with the empty-condor package.  In OSG 3.2 and newer, we make it a little harder to install the empty-condor package by mistake -- now you have to explicitly enable the empty repo &#34;yum install --enablerepo=osg-empty empty-condor&#34; to get it.

Tanya, do I understand correctly that we do not need to try to resend Max&#39;s data ourselves since his site is reporting all the accumulated data for November now?  We (Scott) just need to re-generate & send the WLCG data for November?

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='27695#1449591595'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T16:19:55+00:00">Dec 8, 2015 04:19 PM UTC</time><a class="anchor" name="1449591595">&nbsp;</a></div><pre>Hi All,
It took me a while tp realize what happened when I was installing this CE. At some point during installation of HTCondor-ce I installed
by mistake empty condor package. Hence down the road I needed to remove condor packages and reinstall them in correct way.
During remove I think gratia condor rpm was removed but then never installed back when I repeated installation,
while all config files were there, all commands from for gratia were working, and from log file looked like gratia is doing things.
Only when comparing rpms by hand with another CE I saw that gratia condor rpm was not actually installed. All install and removes were done with yum.
Once I installed the missing rpm everything started to work.

-Max

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=maxi/CN=682514/CN=Maxim Goncharov</pre></div><div class='update_description'><i onclick="document.location='27695#1449590957'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T16:09:17+00:00">Dec 8, 2015 04:09 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1449590957">&nbsp;</a></div><pre>Adding Scott T. to this ticket to update WLCG data.</pre></div><div class='update_description'><i onclick="document.location='27695#1449590317'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T15:58:37+00:00">Dec 8, 2015 03:58 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1449590317">&nbsp;</a></div><pre>Hi,
It looks like ce02.cmsaf.mit.edu  have started reporting. Check gratiaweb&#58;
<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/xml/monthly_vo_cpu_hours?facility=.*MIT.*&probe=.*&resource-type=%5EBatch%24&sql_dynamic_modif_func=oim_vo_ownership.alter_sql&vo=.*cms.*&endtime=2015-12-07+23%3A59%3A59&exclude-vo=NONE&includeFailed=true&exclude-role=NONE&span=2419200&sql_dynamic_modif_func_mod_name=gratia.database.opportunistic_filter&role=.*&opportunistic-filter=BOTH&starttime=2015-06-01+00%3A00%3A00&exclude-facility=NONE%7CGeneric%7CObsolete&exclude-user=NONE&includeSuccess=true' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/xml/monthly_vo_cpu_hours?facility=.*MIT.*&probe=.*&resource-type=%5EBatch%24&sql_dynamic_modif_func=oim_vo_ownership.alter_sql&vo=.*cms.*&endtime=2015-12-07+23%3A59%3A59&exclude-vo=NONE&includeFailed=true&exclude-role=NONE&span=2419200&sql_dynamic_modif_func_mod_name=gratia.database.opportunistic_filter&role=.*&opportunistic-filter=BOTH&starttime=2015-06-01+00%3A00%3A00&exclude-facility=NONE%7CGeneric%7CObsolete&exclude-user=NONE&includeSuccess=true</a>

We need to notify Scott that he needs to update WLCG data.
Thanks,
Tanya</pre></div><div class='update_description'><i onclick="document.location='27695#1449590315'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T15:58:35+00:00">Dec 8, 2015 03:58 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1449590315">&nbsp;</a></div><pre>Hi,
It looks like ce02.cmsaf.mit.edu  have started reporting. Check gratiaweb&#58;
<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/xml/monthly_vo_cpu_hours?facility=.*MIT.*&probe=.*&resource-type=%5EBatch%24&sql_dynamic_modif_func=oim_vo_ownership.alter_sql&vo=.*cms.*&endtime=2015-12-07+23%3A59%3A59&exclude-vo=NONE&includeFailed=true&exclude-role=NONE&span=2419200&sql_dynamic_modif_func_mod_name=gratia.database.opportunistic_filter&role=.*&opportunistic-filter=BOTH&starttime=2015-06-01+00%3A00%3A00&exclude-facility=NONE%7CGeneric%7CObsolete&exclude-user=NONE&includeSuccess=true' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/xml/monthly_vo_cpu_hours?facility=.*MIT.*&probe=.*&resource-type=%5EBatch%24&sql_dynamic_modif_func=oim_vo_ownership.alter_sql&vo=.*cms.*&endtime=2015-12-07+23%3A59%3A59&exclude-vo=NONE&includeFailed=true&exclude-role=NONE&span=2419200&sql_dynamic_modif_func_mod_name=gratia.database.opportunistic_filter&role=.*&opportunistic-filter=BOTH&starttime=2015-06-01+00%3A00%3A00&exclude-facility=NONE%7CGeneric%7CObsolete&exclude-user=NONE&includeSuccess=true</a>

We need to notify Scott that he needs to update WLCG data.
Thanks,
Tanya</pre></div><div class='update_description'><i onclick="document.location='27695#1449587585'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T15:13:05+00:00">Dec 8, 2015 03:13 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1449587585">&nbsp;</a></div><pre>Moved ticket to Software Support and Carl Edquist as assignees, not CCs.</pre></div><div class='update_description'><i onclick="document.location='27695#1449543469'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T02:57:49+00:00">Dec 8, 2015 02:57 AM UTC</time><a class="anchor" name="1449543469">&nbsp;</a></div><pre>Hi, I put all files at this location&#58;
<a href='http&#58;//www.cmsaf.mit.edu/Gratia/' target='_blank' rel='nofollow'>http&#58;//www.cmsaf.mit.edu/Gratia/</a>

-Max

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=maxi/CN=682514/CN=Maxim Goncharov</pre></div><div class='update_description'><i onclick="document.location='27695#1449534154'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-08T00:22:34+00:00">Dec 8, 2015 12:22 AM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1449534154">&nbsp;</a></div><pre>Hi,
You are not reporting anything new, only probes from&#58;
condor&#58;ce01.cmsaf.mit.edu
condor&#58;t3serv007.mit.edu

ProbeConfig should be very small as well as output of condor command. Can you make log available via web?
Thanks,
Tanya</pre></div><div class='update_description'><i onclick="document.location='27695#1449532759'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-07T23:59:19+00:00">Dec 7, 2015 11:59 PM UTC</time><a class="anchor" name="1449532759">&nbsp;</a></div><pre>I mis-configured MIT_CMS_2 CE during upgrade, I think I have fixed it, from now it should be reporting.
It is not allowing me to attach those tar files, they are too big. How can I get them to you, e-mail?

-Max

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=maxi/CN=682514/CN=Maxim Goncharov</pre></div><div class='update_description'><i onclick="document.location='27695#1449530732'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-07T23:25:32+00:00">Dec 7, 2015 11:25 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1449530732">&nbsp;</a></div><pre>Hi Carl and Maxim,
Could you please try to debug this problem asap. MIT is underreported to WLCG and Frank is trying to understand why it is happening. We will need to redo November report after it is fixed.
Maxim,
for sure we need the following info and files&#58;
ProbeConfig ,  condor_config_val -v PER_JOB_HISTORY_DIR output, and  log in /var/log/gratia and list of files in /var/lob/gratia/data

Thanks,
Tanya</pre></div><div class='update_description'><i onclick="document.location='27695#1449525621'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-07T22:00:21+00:00">Dec 7, 2015 10:00 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1449525621">&nbsp;</a></div><pre>MIT_CMS_2 has stopped sending gratia records as of late October.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F27695">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="/images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 27695});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
