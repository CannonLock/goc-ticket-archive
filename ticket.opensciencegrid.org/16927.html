<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[16927] OSG VO job failures at BNL - preemption or something else?</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=16927" method="post">
<div class="page-header">
    <h3><span class="muted">16927</span> / OSG VO job failures at BNL - preemption or something else?</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Mats Rynge</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">BNL_ATLAS_1</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">ATLAS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Mats Rynge</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USATLAS</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-10-14</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USATLAS (BNL Prod)&nbsp;<a target="_blank" href="https://rt.racf.bnl.gov/rt/Ticket/Display.html?id=23690">23690</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/16927", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='16927#1381177722'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-10-07T20:28:42+00:00">Oct 7, 2013 08:28 PM UTC</time><a class="anchor" name="1381177722">&nbsp;</a></div><pre>Sure - I&#39;m not 100% sure the policy is working as expected, but we can open another ticket later if we have more evidence.

by /DC=org/DC=doegrids/OU=People/CN=Mats Rynge 274484</pre></div><div class='update_description'><i onclick="document.location='16927#1381177256'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-10-07T20:20:56+00:00">Oct 7, 2013 08:20 PM UTC</time> by <b>echism</b><a class="anchor" name="1381177256">&nbsp;</a></div><pre>Mats,

May I close this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='16927#1380553906'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-30T15:11:46+00:00">Sep 30, 2013 03:11 PM UTC</time> by <b>echism</b><a class="anchor" name="1380553906">&nbsp;</a></div><pre>Mats,

Where are we on this?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='16927#1379607117'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-19T16:11:57+00:00">Sep 19, 2013 04:11 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1379607117">&nbsp;</a></div><pre>Hi Mats,

It&#39;s done using HTCondor expression, from the condor config file on worker
nodes&#58;

# If &#62; 1 day or &#62; memory limit, preempt
PREEMPT = ($(PREEMPT)) || &#92;
($(ANALYSIS_OVER_MEMORY)) || &#92;
($(IS_GRID) && ((ImageSize &#62;= $(GRID_MEMORY_LIMIT)) || ($(ActivityTimer) &#62;
(24*3600))))

$&#62; condor_config_val GRID_MEMORY_LIMIT
1800000

Hope this helps,
Xin
-- by xinzhao at Thu Sep 19 16&#58;11&#58;46 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=23690</pre></div><div class='update_description'><i onclick="document.location='16927#1379606516'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-19T16:01:56+00:00">Sep 19, 2013 04:01 PM UTC</time><a class="anchor" name="1379606516">&nbsp;</a></div><pre>Xin,

Thanks for the information - I think we will need to push that limit down to inside the glidein, and let the user job die and not the glidein. How do you enforce this? Ulimits or HTCondor expression? Can you share the rules?

Thanks!

by /DC=org/DC=doegrids/OU=People/CN=Mats Rynge 274484</pre></div><div class='update_description'><i onclick="document.location='16927#1379606018'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-19T15:53:38+00:00">Sep 19, 2013 03:53 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1379606018">&nbsp;</a></div><pre>Hello,

I see some recent held OSG jobs on our gatekeeper, and checking the log file,
they are evicted due to memory usage exceeding 1.8G limit, for example&#58;

[root@gridgk01 ~]# condor_q osg | grep &#34; H &#34;
3538807.0 osg 9/16 15&#58;10 0+00&#58;00&#58;22 H 0 1953.1 data
3539103.0 osg 9/16 15&#58;43 0+00&#58;00&#58;22 H 0 1953.1 data
3542593.0 osg 9/16 22&#58;26 0+00&#58;00&#58;41 H 0 2441.4 data
3543256.0 osg 9/16 23&#58;37 0+00&#58;00&#58;45 H 0 1953.1 data

......
......
......
&#60;c&#62;
&#60;a n=&#34;MyType&#34;&#62;&#60;s&#62;JobImageSizeEvent&#60;/s&#62;&#60;/a&#62;
&#60;a n=&#34;Cluster&#34;&#62;&#60;i&#62;3543256&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;EventTypeNumber&#34;&#62;&#60;i&#62;6&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;EventTime&#34;&#62;&#60;s&#62;2013-09-19T03&#58;35&#58;27&#60;/s&#62;&#60;/a&#62;
&#60;a n=&#34;Proc&#34;&#62;&#60;i&#62;0&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;Subproc&#34;&#62;&#60;i&#62;0&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;Size&#34;&#62;&#60;i&#62;1922552&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;CurrentTime&#34;&#62;&#60;e&#62;time()&#60;/e&#62;&#60;/a&#62;
&#60;/c&#62;
&#60;c&#62;
&#60;a n=&#34;MyType&#34;&#62;&#60;s&#62;JobEvictedEvent&#60;/s&#62;&#60;/a&#62;
&#60;a n=&#34;RunRemoteUsage&#34;&#62;&#60;s&#62;Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00&#60;/s&#62;&#60;/a&#62;
&#60;a n=&#34;Cluster&#34;&#62;&#60;i&#62;3543256&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;EventTypeNumber&#34;&#62;&#60;i&#62;4&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;TerminatedNormally&#34;&#62;&#60;b v=&#34;f&#34;/&#62;&#60;/a&#62;

So looks like our condor behaves as expected.

Thanks,
Xin
<div id='show_1100852741' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1100852741'>-- by xinzhao at Thu Sep 19 15&#58;53&#58;26 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=23690
</div><script type='text/javascript'>
        $('#show_1100852741').click(function() {
            $('#detail_1100852741').slideDown("normal");
            $('#show_1100852741').hide();
            $('#hide_1100852741').show();
        });
        $('#hide_1100852741').click(function() {
            $('#detail_1100852741').slideUp();
            $('#hide_1100852741').hide();
            $('#show_1100852741').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16927#1379432952'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-17T15:49:12+00:00">Sep 17, 2013 03:49 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1379432952">&nbsp;</a></div><pre>I don&#39;t see a held job in the more recent jobs, will have to wait for
one to appear to check the log...

Xin

On 9/17/2013 11&#58;41 AM, OSG GOC TX via RT wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;    *Ticket URL&#58;*</font>
<a href='https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=23690' target='_blank' rel='nofollow'>https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=23690</a>
<font color='#7F7E6F'>&#62;    *Requestors&#58;*  tx+rtbnlprod_fp71@....</font>
<font color='#7F7E6F'>&#62;           *Ccs&#58;*  (None)</font>
<font color='#7F7E6F'>&#62;         *Queue&#58;*  GridServices</font>
<font color='#7F7E6F'>&#62;         *Owner&#58;*  Xin Zhao</font>
<font color='#7F7E6F'>&#62;        *Status&#58;*  /open/</font>
<font color='#7F7E6F'>&#62;      *Priority&#58;*  /Low/</font>
<font color='#7F7E6F'>&#62;   *Transaction&#58;*  Correspondence added by osg-goc-rest</font>
<font color='#7F7E6F'>&#62;       *Subject&#58;*  OSG VO job failures at BNL - preemption or</font>
something else?
<font color='#7F7E6F'>&#62;            *OSG GOC Ticket&#58;*  16927</font>
&#60;<a href='16927.html' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=16927&#62</a>;
<font color='#7F7E6F'>&#62;       *Resource Group Name&#58;*  BNL-ATLAS</font>
<font color='#7F7E6F'>&#62;                   *VO Name&#58;*  ATLAS</font>
<font color='#7F7E6F'>&#62;             *Resource Name&#58;*  BNL_ATLAS_1</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
------------------------------------------------------------------------
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Well, we might have had some problems in July - hard to check now.</font>
What
<font color='#7F7E6F'>&#62; about recent jobs?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; by /DC=org/DC=doegrids/OU=People/CN=Mats Rynge 274484</font>
<font color='#7F7E6F'>&#62;   -- by goc at Tue Sep 17 15&#58;40&#58;47 UTC 2013</font>

<div id='show_930682027' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_930682027'>-- by xinzhao at Tue Sep 17 15&#58;49&#58;00 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=23690
</div><script type='text/javascript'>
        $('#show_930682027').click(function() {
            $('#detail_930682027').slideDown("normal");
            $('#show_930682027').hide();
            $('#hide_930682027').show();
        });
        $('#hide_930682027').click(function() {
            $('#detail_930682027').slideUp();
            $('#hide_930682027').hide();
            $('#show_930682027').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16927#1379432447'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-17T15:40:47+00:00">Sep 17, 2013 03:40 PM UTC</time><a class="anchor" name="1379432447">&nbsp;</a></div><pre>Well, we might have had some problems in July - hard to check now. What about recent jobs?

by /DC=org/DC=doegrids/OU=People/CN=Mats Rynge 274484</pre></div><div class='update_description'><i onclick="document.location='16927#1379431092'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-17T15:18:12+00:00">Sep 17, 2013 03:18 PM UTC</time> by <b>Xin zhao</b><a class="anchor" name="1379431092">&nbsp;</a></div><pre>Hello,

Once job starts, the timelimit is 24hours.

I just check some of your jobs on one gatekeeper&#58;

-- Submitter&#58; gridgk04.racf.bnl.gov &#58; &#60;130.199.185.165&#58;49383&#62; &#58;
gridgk04.racf.bnl.gov
ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD
1513880.0   osg             7/7  21&#58;07   0+00&#58;00&#58;42 H  0   1953.1 data
1605779.0   osg             7/18 13&#58;17   0+00&#58;00&#58;38 H  0   1953.1 data
1605802.0   osg             7/18 13&#58;20   0+00&#58;00&#58;41 H  0   1953.1 data
1605803.0   osg             7/18 13&#58;20   0+00&#58;00&#58;37 H  0   1953.1 data
1605804.0   osg             7/18 13&#58;20   0+00&#58;00&#58;43 H  0   1953.1 data
1605805.0   osg             7/18 13&#58;20   0+00&#58;00&#58;58 H  0   1953.1 data

Randomly check two of the log files, the job did exceed the memory limit&#58;

1)
&#60;c&#62;
&#60;a n=&#34;MyType&#34;&#62;&#60;s&#62;JobImageSizeEvent&#60;/s&#62;&#60;/a&#62;
&#60;a n=&#34;Cluster&#34;&#62;&#60;i&#62;1605805&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;EventTypeNumber&#34;&#62;&#60;i&#62;6&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;EventTime&#34;&#62;&#60;s&#62;2013-07-18T14&#58;40&#58;18&#60;/s&#62;&#60;/a&#62;
&#60;a n=&#34;Proc&#34;&#62;&#60;i&#62;0&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;Subproc&#34;&#62;&#60;i&#62;0&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;Size&#34;&#62;&#60;i&#62;1865940&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;CurrentTime&#34;&#62;&#60;e&#62;time()&#60;/e&#62;&#60;/a&#62;
&#60;/c&#62;
&#60;c&#62;
&#60;a n=&#34;MyType&#34;&#62;&#60;s&#62;JobEvictedEvent&#60;/s&#62;&#60;/a&#62;
&#60;a n=&#34;RunRemoteUsage&#34;&#62;&#60;s&#62;Usr 0 00&#58;00&#58;35, Sys 0 00&#58;00&#58;00&#60;/s&#62;&#60;/a&#62;
&#60;a n=&#34;Cluster&#34;&#62;&#60;i&#62;1605805&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;EventTypeNumber&#34;&#62;&#60;i&#62;4&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;TerminatedNormally&#34;&#62;&#60;b v=&#34;f&#34;/&#62;&#60;/a&#62;
<div id='show_341574817' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_341574817'>&#60;a n=&#34;RunLocalUsage&#34;&#62;&#60;s&#62;Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00&#60;/s&#62;&#60;/a&#62;
&#60;a n=&#34;ReceivedBytes&#34;&#62;&#60;r&#62;4.297000000000000E+03&#60;/r&#62;&#60;/a&#62;
&#60;a n=&#34;EventTime&#34;&#62;&#60;s&#62;2013-07-18T14&#58;40&#58;18&#60;/s&#62;&#60;/a&#62;
&#60;a n=&#34;SentBytes&#34;&#62;&#60;r&#62;0.000000000000000E+00&#60;/r&#62;&#60;/a&#62;
&#60;a n=&#34;Proc&#34;&#62;&#60;i&#62;0&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;Subproc&#34;&#62;&#60;i&#62;0&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;TerminatedAndRequeued&#34;&#62;&#60;b v=&#34;f&#34;/&#62;&#60;/a&#62;
&#60;a n=&#34;Checkpointed&#34;&#62;&#60;b v=&#34;f&#34;/&#62;&#60;/a&#62;
&#60;a n=&#34;CurrentTime&#34;&#62;&#60;e&#62;time()&#60;/e&#62;&#60;/a&#62;
&#60;/c&#62;

2)

&#60;c&#62;
&#60;a n=&#34;MyType&#34;&#62;&#60;s&#62;JobImageSizeEvent&#60;/s&#62;&#60;/a&#62;
&#60;a n=&#34;Cluster&#34;&#62;&#60;i&#62;1605803&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;EventTypeNumber&#34;&#62;&#60;i&#62;6&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;EventTime&#34;&#62;&#60;s&#62;2013-07-18T14&#58;38&#58;11&#60;/s&#62;&#60;/a&#62;
&#60;a n=&#34;Proc&#34;&#62;&#60;i&#62;0&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;Subproc&#34;&#62;&#60;i&#62;0&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;Size&#34;&#62;&#60;i&#62;1869884&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;CurrentTime&#34;&#62;&#60;e&#62;time()&#60;/e&#62;&#60;/a&#62;
&#60;/c&#62;
&#60;c&#62;
&#60;a n=&#34;MyType&#34;&#62;&#60;s&#62;JobEvictedEvent&#60;/s&#62;&#60;/a&#62;
&#60;a n=&#34;RunRemoteUsage&#34;&#62;&#60;s&#62;Usr 0 00&#58;00&#58;28, Sys 0 00&#58;00&#58;01&#60;/s&#62;&#60;/a&#62;
&#60;a n=&#34;Cluster&#34;&#62;&#60;i&#62;1605803&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;EventTypeNumber&#34;&#62;&#60;i&#62;4&#60;/i&#62;&#60;/a&#62;
&#60;a n=&#34;TerminatedNormally&#34;&#62;&#60;b v=&#34;f&#34;/&#62;&#60;/a&#62;
&#60;a n=&#34;RunLocalUsage&#34;&#62;&#60;s&#62;Usr 0 00&#58;00&#58;00, Sys 0 00&#58;00&#58;00&#60;/s&#62;&#60;/a&#62;
&#60;a n=&#34;ReceivedBytes&#34;&#62;&#60;r&#62;4.297000000000000E+03&#60;/r&#62;&#60;/a&#62;
&#60;a n=&#34;EventTime&#34;&#62;&#60;s&#62;2013-07-18T14&#58;38&#58;11&#60;/s&#62;&#60;/a&#62;

Xin

On 9/17/2013 10&#58;51 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_341574817').click(function() {
            $('#detail_341574817').slideDown("normal");
            $('#show_341574817').hide();
            $('#hide_341574817').show();
        });
        $('#hide_341574817').click(function() {
            $('#detail_341574817').slideUp();
            $('#hide_341574817').hide();
            $('#show_341574817').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16927#1379429508'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-17T14:51:48+00:00">Sep 17, 2013 02:51 PM UTC</time><a class="anchor" name="1379429508">&nbsp;</a></div><pre>The jobs should be under the 1.8 GB limit. Does your policy have a minimum time for the jobs to be allowed to run? What is MaxJobRetirementTime set to?

Take a look at the spiky graph for BNL&#58;

<a href='http&#58;//osg-xsede.grid.iu.edu/monitoring/condor/sites/BNL-ATLAS_1day.png' target='_blank' rel='nofollow'>http&#58;//osg-xsede.grid.iu.edu/monitoring/condor/sites/BNL-ATLAS_1day.png</a>

compare that to for example&#58;

<a href='http&#58;//osg-xsede.grid.iu.edu/monitoring/condor/sites/VT_OSG_1day.png' target='_blank' rel='nofollow'>http&#58;//osg-xsede.grid.iu.edu/monitoring/condor/sites/VT_OSG_1day.png</a>

by /DC=org/DC=doegrids/OU=People/CN=Mats Rynge 274484</pre></div><div class='update_description'><i onclick="document.location='16927#1379428102'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-17T14:28:22+00:00">Sep 17, 2013 02:28 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1379428102">&nbsp;</a></div><pre>OK, so jobs can start. Next question is if jobs use a lot of memory? Once job
uses &#62;1.8GB memory, they will be killed. Under that memory limit,
jobs can run up to 24 hours. That&#39;s the configuration for opportunistic usage
in our cluster now.

Thanks,
Xin
-- by xinzhao at Tue Sep 17 14&#58;28&#58;11 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=23690</pre></div><div class='update_description'><i onclick="document.location='16927#1379391897'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-17T04:24:57+00:00">Sep 17, 2013 04:24 AM UTC</time><a class="anchor" name="1379391897">&nbsp;</a></div><pre>The jobs seem to work, but they get killed really quickly.

2013-09-17 04&#58;23&#58;44 UTC [frontend@osg-xsede&#58;~]$ voms-proxy-info -all
subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=xsede-pilot/osg-xsede.grid.iu.edu/CN=proxy
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=xsede-pilot/osg-xsede.grid.iu.edu
identity  &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=xsede-pilot/osg-xsede.grid.iu.edu
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /tmp/x509up_u104
timeleft  &#58; 95&#58;27&#58;17
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO osg extension information ===
VO        &#58; osg
subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=xsede-pilot/osg-xsede.grid.iu.edu
issuer    &#58; /DC=org/DC=doegrids/OU=Services/CN=host/voms.opensciencegrid.org
attribute &#58; /osg/Role=NULL/Capability=NULL
timeleft  &#58; 23&#58;27&#58;17
uri       &#58; voms.opensciencegrid.org&#58;15027

2013-09-17 04&#58;23&#58;45 UTC [frontend@osg-xsede&#58;~]$ globus-job-run gridgk01.racf.bnl.gov /bin/pwd

/direct/usatlas+grid/osg

by /DC=org/DC=doegrids/OU=People/CN=Mats Rynge 274484</pre></div><div class='update_description'><i onclick="document.location='16927#1379365523'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-16T21:05:23+00:00">Sep 16, 2013 09:05 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1379365523">&nbsp;</a></div><pre>Hello,

Could you run the following commands and send me the output?

$&#62;voms-proxy-info -all
$&#62;globus-job-run gridgk01.racf.bnl.gov /bin/pwd

We recently changed the account mapping for VOs, there might be issue with
homedir etc...

Thanks,
Xin
-- by xinzhao at Mon Sep 16 21&#58;05&#58;09 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=23690</pre></div><div class='update_description'><i onclick="document.location='16927#1379364894'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-16T20:54:54+00:00">Sep 16, 2013 08:54 PM UTC</time> by <b>echism</b><a class="anchor" name="1379364894">&nbsp;</a></div><pre>Xin,

Please update this ticket.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='16927#1378397742'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-05T16:15:42+00:00">Sep 5, 2013 04:15 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1378397742">&nbsp;</a></div><pre>BNL,

We are seeing a large number of job failures at BNL for the OSG VO. The following graphs shows failed job count&#58;

<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/xml/facility_count_bar_smry?endtime=2013-09-05+23%3A59%3A59&span=86400&facility=.*BNL.*&probe=.*&resource-type=%5EBatch%24&vo=osg%7COSG&role=.*&user=.*&starttime=2013-08-23+00%3A00%3A00&exclude-facility=NONE%7CGeneric%7CObsolete&exclude-user=NONE&includeSuccess=false&exclude-vo=Unknown%7Cunknown%7Cother&includeFailed=true&exclude-role=NONE' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/xml/facility_count_bar_smry?endtime=2013-09-05+23%3A59%3A59&span=86400&facility=.*BNL.*&probe=.*&resource-type=%5EBatch%24&vo=osg%7COSG&role=.*&user=.*&starttime=2013-08-23+00%3A00%3A00&exclude-facility=NONE%7CGeneric%7CObsolete&exclude-user=NONE&includeSuccess=false&exclude-vo=Unknown%7Cunknown%7Cother&includeFailed=true&exclude-role=NONE</a>

It seems like the jobs start on the site, but get kicked of after a few minutes. Example HTCondor log&#58;

001 (7807.000.000) 09/05 15&#58;35&#58;29 Job executing on host&#58; gt2 gridgk01.racf.bnl.gov&#58;2119/jobmanager-condor
...
012 (7807.000.000) 09/05 15&#58;45&#58;09 Job was held.
Job failed, no reason given by GRAM server
Code 2 Subcode 0

We are not getting any outputs back so it is impossible for us to know what happened. Can you please take a look and let us know if this all preemption or if there is something else going on?

Thanks!
Mats Rynge
OSG User Support

by /DC=org/DC=doegrids/OU=People/CN=Mats Rynge 274484</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F16927">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
