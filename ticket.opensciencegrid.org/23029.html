<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[23029] gLExec hammercloud jobs keep failing at BNL</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=23029" method="post">
<div class="page-header">
    <h3><span class="muted">23029</span> / gLExec hammercloud jobs keep failing at BNL</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Edward Karavakis</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">ATLAS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Edward Karavakis</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USATLAS</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-02-06</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=109829">109829</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">USATLAS (BNL Prod)&nbsp;<a target="_blank" href="https://rt.racf.bnl.gov/rt/Ticket/Display.html?id=24905">24905</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/23029", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='23029#1423665657'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-11T14:40:57+00:00">Feb 11, 2015 02:40 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1423665657">&nbsp;</a></div><pre>-- by Edward Karavakis at Wed Feb 11 14&#58;40&#58;22 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1423228155'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-06T13:09:15+00:00">Feb 6, 2015 01:09 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1423228155">&nbsp;</a></div><pre>Yes please go ahead and close it. Thanks a lot once again!

-- by Edward Karavakis at Fri Feb 06 13&#58;08&#58;08 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1423227805'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-06T13:03:25+00:00">Feb 6, 2015 01:03 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1423227805">&nbsp;</a></div><pre>Hi Eddie,

OK, can we close the ticket ?

Thanks,
Xin
-- by xinzhao at Fri Feb 06 13&#58;00&#58;24 UTC 2015

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1423226295'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-06T12:38:15+00:00">Feb 6, 2015 12:38 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1423226295">&nbsp;</a></div><pre>Hi Xin,

Everything seems to be fine, thanks a lot!

Cheers, Eddie

-- by Edward Karavakis at Fri Feb 06 12&#58;37&#58;02 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1423223819'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-06T11:56:59+00:00">Feb 6, 2015 11:56 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1423223819">&nbsp;</a></div><pre>Hi Eddie,

All the worker nodes are now updated with the glexec changes. Please let us
know if there are still issues.

Thanks,
Xin
-- by xinzhao at Fri Feb 06 11&#58;56&#58;20 UTC 2015

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1422885402'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-02T13:56:42+00:00">Feb 2, 2015 01:56 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1422885402">&nbsp;</a></div><pre>Hi Xin,

No problem, thanks a lot!

Cheers, Eddie

-- by Edward Karavakis at Mon Feb 02 13&#58;55&#58;40 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1422885146'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-02T13:52:26+00:00">Feb 2, 2015 01:52 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1422885146">&nbsp;</a></div><pre>Hi Eddie,

We didn&#39;t push the change last week to more WNs, because I forgot the change to
the glexec.conf file that should go together with the new rpm. We will do one
more test on the puppet module and then push it this week.
Sorry about the delay.

Thanks,
Xin
-- by xinzhao at Mon Feb 02 13&#58;51&#58;54 UTC 2015

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1422884131'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-02T13:35:31+00:00">Feb 2, 2015 01:35 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1422884131">&nbsp;</a></div><pre>Hi Xin,

Not sure if you did something but the jobs are failing once again&#58; <a href='http&#58;//panda.cern.ch/server/pandamon/query?job=*&type=analysis&hours=12&jobsetID=any&jobStatus=&site=ANALY_BNL_GLEXEC&plot=no&detail=no' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch/server/pandamon/query?job=*&type=analysis&hours=12&jobsetID=any&jobStatus=&site=ANALY_BNL_GLEXEC&plot=no&detail=no</a>

Did you install the OSG rpm of mkgltempdir? If yes, is it 0.0.4 instead of 0.0.3 ? Does it fix the bug appearing on the old version of mkgltempdir as mentioned here <a href='https&#58;//ggus.eu/?mode=ticket_info&ticket_id=92324' target='_blank' rel='nofollow'>https&#58;//ggus.eu/?mode=ticket_info&ticket_id=92324</a> ?

Thank you.

Cheers, Eddie

-- by Edward Karavakis at Mon Feb 02 13&#58;34&#58;54 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1422398116'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-27T22:35:16+00:00">Jan 27, 2015 10:35 PM UTC</time> by <b>Xin zhao</b><a class="anchor" name="1422398116">&nbsp;</a></div><pre>Hi Elizabeth,

The change is ready to roll out, but as majority of the facility people
have day off now, due to the snow, we will wait for the relevant experts
to return, before applying the rpm update to all the farm nodes, just in
case. Anyway, this should be done in this week.

Thanks,
Xin

On 1/27/2015 5&#58;29 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='23029#1422397740'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-27T22:29:00+00:00">Jan 27, 2015 10:29 PM UTC</time> by <b>echism</b><a class="anchor" name="1422397740">&nbsp;</a></div><pre>Xin are you working on this remotely? I heard about the snow</pre></div><div class='update_description'><i onclick="document.location='23029#1422033591'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-23T17:19:51+00:00">Jan 23, 2015 05:19 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1422033591">&nbsp;</a></div><pre>Hi Eddie,

I will do one more test on the 0.0.4 version of mkgltempdir rpm, this time from
OSG. Then I will arrange for update on all our worker nodes, probably some time
next week. More later ...

Thanks,
Xin
-- by xinzhao at Fri Jan 23 17&#58;19&#58;12 UTC 2015

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1422031033'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-23T16:37:13+00:00">Jan 23, 2015 04:37 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1422031033">&nbsp;</a></div><pre>Hi Xin,
Everything seems to be fine on the acas0065~acas0068 WNs, thanks a lot for your effort! Would it be possible to install the corrected glexec environment also on the remaining WNs at BNL?

Thank you.
Eddie

-- by Edward Karavakis at Fri Jan 23 16&#58;36&#58;29 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1421938282'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-22T14:51:22+00:00">Jan 22, 2015 02:51 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421938282">&nbsp;</a></div><pre>Resending the message as the last one includes a snapshot graph which can&#39;t be
shown&#58;

Hi Eddie,

You are right, the failed jobs ran on WNs that don&#39;t have the proper rpms
installed. We recently added some production WNs to the test queue, because
another ongoing test needs more WNs.
For the glexec test, we can focus on jobs that ran on the following WNs&#58;
acas0065~acas0068.

Thanks,
Xin
-- by xinzhao at Thu Jan 22 14&#58;50&#58;51 UTC 2015

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1421938141'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-22T14:49:01+00:00">Jan 22, 2015 02:49 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421938141">&nbsp;</a></div><pre>Hi Eddie,

You are right, the failed jobs ran on WNs that don&#39;t have the rpms installed,
as shown below. The rpms are installed on acas0065~acas0068. We recently added
some production WNs to the test queue, because another test project needs more
WNs. This is why. I think we can now focus on the jobs run on
acas0065~acas0068, for the glexec test.

Thanks,
Xin
-- by xinzhao at Thu Jan 22 14&#58;48&#58;13 UTC 2015

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1421911041'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-22T07:17:21+00:00">Jan 22, 2015 07:17 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421911041">&nbsp;</a></div><pre>Hi Xin,

It seems that some jobs are failing without reporting anything and some are finishing properly according to <a href='http&#58;//panda.cern.ch/server/pandamon/query?job=*&type=analysis&hours=8&jobsetID=any&jobStatus=&site=ANALY_BNL_GLEXEC&plot=no&detail=no' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch/server/pandamon/query?job=*&type=analysis&hours=8&jobsetID=any&jobStatus=&site=ANALY_BNL_GLEXEC&plot=no&detail=no</a>

Have you installed the corrected gLExec Environment (wrapper/unwrapper script, mkgltempdir and etc) on all WNs?

I&#39;ll need to go through the APF logs to see if something is wrong on some WNs... Unfortunately I will be away until the 26th inclusive, so I will restart my investigation on Tuesday. In the meantime, I will make sure that some panda glexec jobs are running so that we can collect some statistics (WN hostname and etc).

We&#39;re getting closer!

Thanks.
Cheers, Eddie

-- by Edward Karavakis at Thu Jan 22 07&#58;16&#58;09 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1421879966'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-21T22:39:26+00:00">Jan 21, 2015 10:39 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421879966">&nbsp;</a></div><pre>Hi Eddie,

The GUMS problem was fixed several hours ago, how are jobs running now?

Thanks,
Xin
-- by xinzhao at Wed Jan 21 22&#58;38&#58;50 UTC 2015

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1421852172'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-21T14:56:12+00:00">Jan 21, 2015 02:56 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421852172">&nbsp;</a></div><pre>Hi Eddie,

There is a GUMS issue at site,which is under investigation now. More later ...

Thanks,
Xin
-- by xinzhao at Wed Jan 21 14&#58;55&#58;35 UTC 2015

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1421837737'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-21T10:55:37+00:00">Jan 21, 2015 10:55 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421837737">&nbsp;</a></div><pre>It seems now that the pilots are not reaching the WNs according to <a href='http&#58;//apfmon.lancs.ac.uk/q/ANALY_BNL_GLEXEC' target='_blank' rel='nofollow'>http&#58;//apfmon.lancs.ac.uk/q/ANALY_BNL_GLEXEC</a> , for example &#58; <a href='http&#58;//gridui21.usatlas.bnl.gov&#58;25880/2015-01-21/ANALY_BNL_GLEXEC-gridgk03/4725059.2.log' target='_blank' rel='nofollow'>http&#58;//gridui21.usatlas.bnl.gov&#58;25880/2015-01-21/ANALY_BNL_GLEXEC-gridgk03/4725059.2.log</a>

Globus error 7&#58; authentication with the remote server failed

Was there any recent change at the BNL pilot factories?

-- by Edward Karavakis at Wed Jan 21 10&#58;54&#58;31 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1421821947'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-21T06:32:27+00:00">Jan 21, 2015 06:32 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421821947">&nbsp;</a></div><pre>Hi Xin,

Yes I can confirm that some, if not most, of the jobs are finishing ok. I have created a new hammercloud stress test <a href='http&#58;//hammercloud.cern.ch/hc/app/atlas/test/20052239/' target='_blank' rel='nofollow'>http&#58;//hammercloud.cern.ch/hc/app/atlas/test/20052239/</a>

Let&#39;s see how it goes.

Thank, Eddie

-- by Edward Karavakis at Wed Jan 21 06&#58;31&#58;28 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1421793247'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-20T22:34:07+00:00">Jan 20, 2015 10:34 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421793247">&nbsp;</a></div><pre>Hi Eddie,

I don&#39;t know why the scratchdisk doesn&#39;t work, I ran test myself and it works.
BTW, I see a couple of jobs finish fine now, eg.
<a href='http&#58;//panda.cern.ch/server/pandamon/query?job=2364864743' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch/server/pandamon/query?job=2364864743</a>, can you confirm?

Thanks,
Xin
-- by xinzhao at Tue Jan 20 22&#58;33&#58;31 UTC 2015

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1421763308'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-20T14:15:08+00:00">Jan 20, 2015 02:15 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421763308">&nbsp;</a></div><pre>Hi Xin,

I&#39;ve changed the ATLASUSERDISK to ATLASSCRATCHDISK for testing as you can see at <a href='http&#58;//atlas-agis.cern.ch/agis/pandaqueue/detail/ANALY_BNL_GLEXEC/full/' target='_blank' rel='nofollow'>http&#58;//atlas-agis.cern.ch/agis/pandaqueue/detail/ANALY_BNL_GLEXEC/full/</a>

It still doesn&#39;t work as the ACLs are wrong.

<a href='http&#58;//panda.cern.ch/server/pandamon/query?job=2364085711' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch/server/pandamon/query?job=2364085711</a>

pilot&#58; Put error&#58; [206] Failed to create destination directory /pnfs/usatlas.bnl.gov/atlasscratchdisk/rucio/user/gangarbt/eb/7b! |Log put error&#58; [206] Failed to create destination directory /pnfs/usatlas.bnl.gov/atlasscratchdisk/rucio/user/gangarbt/36/86!

Let me know if you want me to keep using ATLASSCRATCHDISK or switch back to ATLASUSERDISK. If the former, could you please fix the ACLs?

Thanks.

Cheers, Eddie

-- by Edward Karavakis at Tue Jan 20 14&#58;14&#58;40 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1421678308'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-19T14:38:28+00:00">Jan 19, 2015 02:38 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421678308">&nbsp;</a></div><pre>19 Jan 11&#58;53&#58;56| SiteMover.py| Tracing server&#58; <a href='https&#58;//rucio-lb-prod.cern.ch/traces/' target='_blank' rel='nofollow'>https&#58;//rucio-lb-prod.cern.ch/traces/</a>
19 Jan 11&#58;53&#58;56| SiteMover.py| Sending tracing report&#58; {&#39;protocol&#39;&#58; &#39;local&#39;, &#39;duid&#39;&#58; None, &#39;eventType&#39;&#58; &#39;put_sm_a&#39;, &#39;suspicious&#39;&#58; &#39;0&#39;, &#39;timeEnd&#39;&#58; 1421668436.5320611, &#39;dataset&#39;&#58; u&#39;user.gangarbt.0119051553.487270.5395.lib&#39;, &#39;catStart&#39;&#58; 1421650227.157851, &#39;guid&#39;&#58; &#39;7ab7783720c44ba2a6296268ee0b6ce7&#39;, &#39;transferStart&#39;&#58; None, &#39;hostname&#39;&#58; &#39;acas0066.usatlas.bnl.gov&#39;, &#39;remoteSite&#39;&#58; &#39;BNL-OSG2_USERDISK&#39;, &#39;filename&#39;&#58; &#39;user.gangarbt.0119051553.487270.5395.lib.log.tgz&#39;, &#39;version&#39;&#58; None, &#39;filesize&#39;&#58; None, &#39;ip&#39;&#58; &#39;130.199.48.116&#39;, &#39;usrdn&#39;&#58; u&#39;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=gangarbt/CN=722147/CN=Robot&#58; Ganga Robot/CN=proxy&#39;, &#39;usr&#39;&#58; &#39;d41d8cd98f00b204e9800998ecf8427e&#39;, &#39;eventVersion&#39;&#58; &#39;pilot3&#39;, &#39;localSite&#39;&#58; &#39;BNL-OSG2_USERDISK&#39;, &#39;scope&#39;&#58; u&#39;user.gangarbt&#39;, &#39;validateStart&#39;&#58; None, &#39;uuid&#39;&#58; (&#39;72ef2bc29fa711e4873c00163e101005&#39;,), &#39;timeStart&#39;&#58; 1421650226.392592, &#39;relativeStart&#39;&#58; None, &#39;appid&#39;&#58; u&#39;2362817475&#39;, &#39;clientState&#39;&#58; &#39;CP_TIMEOUT&#39;}
19 Jan 11&#58;53&#58;56| SiteMover.py| Executing command&#58; curl --connect-timeout 20 --max-time 120 --cacert /home/condor/local/atlas/execute/dir_3893/gltmpdir.4657.LLgo/G9YR/ExPQ/user_proxy -v -k -d &#92;&#92;&#34;{&#92;&#92;&#92;&#34;protocol&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;local&#92;&#92;&#92;&#34;, &#92;&#92;&#92;&#34;duid&#92;&#92;&#92;&#34;&#58; null, &#92;&#92;&#92;&#34;eventType&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;put_sm_a&#92;&#92;&#92;&#34;, &#92;&#92;&#92;&#34;suspicious&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;0&#92;&#92;&#92;&#34;, &#92;&#92;&#92;&#34;timeEnd&#92;&#92;&#92;&#34;&#58; 1421668436.5320611, &#92;&#92;&#92;&#34;dataset&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;user.gangarbt.0119051553.487270.5395.lib&#92;&#92;&#92;&#34;, &#92;&#92;&#92;&#34;catStart&#92;&#92;&#92;&#34;&#58; 1421650227.157851, &#92;&#92;&#92;&#34;guid&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;7ab7783720c44ba2a6296268ee0b6ce7&#92;&#92;&#92;&#34;, &#92;&#92;&#92;&#34;transferStart&#92;&#92;&#92;&#34;&#58; null, &#92;&#92;&#92;&#34;hostname&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;acas0066.usatlas.bnl.gov&#92;&#92;&#92;&#34;, &#92;&#92;&#92;&#34;remoteSite&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;BNL-OSG2_USERDISK&#92;&#92;&#92;&#34;, &#92;&#92;&#92;&#34;filename&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;user.gangarbt.0119051553.487270.5395.lib.log.tgz&#92;&#92;&#92;&#34;, &#92;&#92;&#92;&#34;version&#92;&#92;&#92;&#34;&#58; null, &#92;&#92;&#92;&#34;filesize&#92;&#92;&#92;&#34;&#58; null, &#92;&#92;&#92;&#34;ip&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;130.199.48.116&#92;&#92;&#92;&#34;, &#92;&#92;&#92;&#34;usrdn&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=gangarbt/CN=722147/CN=Robot&#58; Ganga Robot/CN=proxy&#92;&#92;&#92;&#34;, &#92;&#92;&#92;&#34;usr&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;d41d8cd98f00b204e9800998ecf8427e&#92;&#92;&#92;&#34;, &#92;&#92;&#92;&#34;eventVersion&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;pilot3&#92;&#92;&#92;&#34;, &#92;&#92;&#92;&#34;localSite&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;BNL-OSG2_USERDISK&#92;&#92;&#92;&#34;, &#92;&#92;&#92;&#34;scope&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;user.gangarbt&#92;&#92;&#92;&#34;, &#92;&#92;&#92;&#34;validateStart&#92;&#92;&#92;&#34;&#58; null, &#92;&#92;&#92;&#34;uuid&#92;&#92;&#92;&#34;&#58; [&#92;&#92;&#92;&#34;72ef2bc29fa711e4873c00163e101005&#92;&#92;&#92;&#34;], &#92;&#92;&#92;&#34;timeStart&#92;&#92;&#92;&#34;&#58; 1421650226.392592, &#92;&#92;&#92;&#34;relativeStart&#92;&#92;&#92;&#34;&#58; null, &#92;&#92;&#92;&#34;appid&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;2362817475&#92;&#92;&#92;&#34;, &#92;&#92;&#92;&#34;clientState&#92;&#92;&#92;&#34;&#58; &#92;&#92;&#92;&#34;CP_TIMEOUT&#92;&#92;&#92;&#34;}&#92;&#92;&#34; <a href='https&#58;//rucio-lb-prod.cern.ch/traces/' target='_blank' rel='nofollow'>https&#58;//rucio-lb-prod.cern.ch/traces/</a>
19 Jan 11&#58;53&#58;57| SiteMover.py| Tracing report sent
19 Jan 11&#58;53&#58;57| Mover.py    | Stage-out returned&#58; s=1152, r_gpfn=<a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/bf/4a/user.gangarbt.0119051553.487270.5395.lib.log.tgz' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/bf/4a/user.gangarbt.0119051553.487270.5395.lib.log.tgz</a>, r_fsize=0, r_fchecksum=0, r_farch=, pilotErrorDiag=Copy command self timed out after 18204 s
19 Jan 11&#58;53&#58;57| SiteMover.py| Adding GUID (7ab77837-20c4-4ba2-a629-6268ee0b6ce7) and SURL (<a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/bf/4a/user.gangarbt.0119051553.487270.5395.lib.log.tgz' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/bf/4a/user.gangarbt.0119051553.487270.5395.lib.log.tgz</a>) to dictionary
19 Jan 11&#58;53&#58;57| SiteMover.py| SURL dictionary does not exist&#58; /home/condor/local/atlas/execute/dir_3893/gltmpdir.4657.LLgo/G9YR/ExPQ/output/Panda_Pilot_3962_1421644446/surlDictionary-2362817475.json (will be created)
19 Jan 11&#58;53&#58;57| SiteMover.py| Successfully updated SURL dictionary (which currectly has 1 key(s))
19 Jan 11&#58;53&#58;57| Mover.py    | !!WARNING!!2999!! Error in copying (attempt 1)&#58; 1152 - Copy command self timed out after 18204 s
19 Jan 11&#58;53&#58;57| Mover.py    | Return code&#58; 1152
19 Jan 11&#58;53&#58;57| Mover.py    | (Waiting 600 seconds before next stage-out attempt)
19 Jan 12&#58;03&#58;57| Mover.py    | Put attempt 2/2

-- by Edward Karavakis at Mon Jan 19 14&#58;38&#58;09 UTC 2015

some more messages&#58;
...
19 Jan 06&#58;49&#58;15| Monitor.py  | !!FAILED!!1999!! Job stuck in stage-out state&#58; file copy time-out
....
19 Jan 11&#58;53&#58;56| LocalSiteMov| !!WARNING!!2990!! Command failed&#58; source /afs/usatlas.bnl.gov/osg/pandasetup/@sys/current/copysetup.sh; export X509_USER_PROXY=/home/condor/local/atlas/execute/dir_3893/gltmpdir.4657.LLgo/G9YR/ExPQ/user_proxy; lsm-put -t ATLASUSERDISK --size 33855 --checksum adler32&#58;4fb38fe2 --guid 7ab77837-20c4-4ba2-a629-6268ee0b6ce7 /home/condor/local/atlas/execute/dir_3893/gltmpdir.4657.LLgo/G9YR/ExPQ/output/Panda_Pilot_3962_1421644446/user.gangarbt.0119051553.487270.5395.lib.log.tgz <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/bf/4a/user.gangarbt.0119051553.487270.5395.lib.log.tgz' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/bf/4a/user.gangarbt.0119051553.487270.5395.lib.log.tgz</a>
19 Jan 11&#58;53&#58;56| LocalSiteMov| !!WARNING!!2990!! Stage Out failed&#58; Status=-15 Output=
19 Jan 11&#58;53&#58;56| LocalSiteMov| !!WARNING!!2990!! Copy command self timed out after 18204 s
19 Jan 11&#58;53&#58;56| SiteMover.py| Tracing server&#58; <a href='https&#58;//atlas-ddmtracer.cern.ch&#58;443/dq2/ws_tracer/rpc' target='_blank' rel='nofollow'>https&#58;//atlas-ddmtracer.cern.ch&#58;443/dq2/ws_tracer/rpc</a>
19 Jan 11&#58;53&#58;56| SiteMover.py| Sending tracing report&#58; {&#39;protocol&#39;&#58; &#39;local&#39;, &#39;duid&#39;&#58; None, &#39;eventType&#39;&#58; &#39;put_sm_a&#39;, &#39;suspicious&#39;&#58; &#39;0&#39;, &#39;timeEnd&#39;&#58; 1421668436.5320611, &#39;dataset&#39;&#58; u&#39;user.gangarbt.0119051553.487270.5395.lib&#39;, &#39;catStart&#39;&#58; 1421650227.157851, &#39;guid&#39;&#58; &#39;7ab7783720c44ba2a6296268ee0b6ce7&#39;, &#39;transferStart&#39;&#58; None, &#39;hostname&#39;&#58; &#39;acas0066.usatlas.bnl.gov&#39;, &#39;remoteSite&#39;&#58; &#39;BNL-OSG2_USERDISK&#39;, &#39;filename&#39;&#58; &#39;user.gangarbt.0119051553.487270.5395.lib.log.tgz&#39;, &#39;version&#39;&#58; None, &#39;filesize&#39;&#58; None, &#39;ip&#39;&#58; &#39;130.199.48.116&#39;, &#39;usrdn&#39;&#58; u&#39;/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=gangarbt/CN=722147/CN=Robot&#58; Ganga Robot/CN=proxy&#39;, &#39;usr&#39;&#58; &#39;d41d8cd98f00b204e9800998ecf8427e&#39;, &#39;eventVersion&#39;&#58; &#39;pilot3&#39;, &#39;localSite&#39;&#58; &#39;BNL-OSG2_USERDISK&#39;, &#39;scope&#39;&#58; u&#39;user.gangarbt&#39;, &#39;validateStart&#39;&#58; None, &#39;uuid&#39;&#58; (&#39;72ef2bc29fa711e4873c00163e101005&#39;,), &#39;timeStart&#39;&#58; 1421650226.392592, &#39;relativeStart&#39;&#58; None, &#39;appid&#39;&#58; u&#39;2362817475&#39;, &#39;clientState&#39;&#58; &#39;CP_TIMEOUT&#39;}
19 Jan 11&#58;53&#58;56| SiteMover.py| Executing command&#58; curl --connect-timeout 20 --max-time 120 --cacert /home/condor/local/atlas/execute/dir_3893/gltmpdir.4657.LLgo/G9YR/ExPQ/user_proxy -v -k -d &#92;&#92;&#34;report=%7B%27protocol%27%3A+%27local%27%2C+%27duid%27%3A+None%2C+%27eventType%27%3A+%27put_sm_a%27%2C+%27suspicious%27%3A+%270%27%2C+%27timeEnd%27%3A+1421668436.5320611%2C+%27dataset%27%3A+u%27user.gangarbt.0119051553.487270.5395.lib%27%2C+%27catStart%27%3A+1421650227.157851%2C+%27guid%27%3A+%277ab7783720c44ba2a6296268ee0b6ce7%27%2C+%27transferStart%27%3A+None%2C+%27hostname%27%3A+%27acas0066.usatlas.bnl.gov%27%2C+%27remoteSite%27%3A+%27BNL-OSG2_USERDISK%27%2C+%27filename%27%3A+%27user.gangarbt.0119051553.487270.5395.lib.log.tgz%27%2C+%27version%27%3A+None%2C+%27filesize%27%3A+None%2C+%27ip%27%3A+%27130.199.48.116%27%2C+%27usrdn%27%3A+u%27%2FDC%3Dch%2FDC%3Dcern%2FOU%3DOrganic+Units%2FOU%3DUsers%2FCN%3Dgangarbt%2FCN%3D722147%2FCN%3DRobot%3A+Ganga+Robot%2FCN%3Dproxy%27%2C+%27usr%27%3A+%27d41d8cd98f00b204e9800998ecf8427e%27%2C+%27eventVersion%27%3A+%27pilot3%27%2C+%27localSite%27%3A+%27BNL-OSG2_USERDISK%27%2C+%27scope%27%3A+u%27user.gangarbt%27%2C+%27validateStart%27%3A+None%2C+%27uuid%27%3A+%28%2772ef2bc29fa711e4873c00163e101005%27%2C%29%2C+%27timeStart%27%3A+1421650226.392592%2C+%27relativeStart%27%3A+None%2C+%27appid%27%3A+u%272362817475%27%2C+%27clientState%27%3A+%27CP_TIMEOUT%27%7D&operation=addReport&API=0_3_0&#92;&#92;&#34; <a href='https&#58;//atlas-ddmtracer.cern.ch&#58;443/dq2/ws_tracer/rpc' target='_blank' rel='nofollow'>https&#58;//atlas-ddmtracer.cern.ch&#58;443/dq2/ws_tracer/rpc</a>
19 Jan 11&#58;53&#58;56| SiteMover.py| !!WARNING!!2999!! tracing failed&#58; (&#60;type &#39;exceptions.Exception&#39;&#62;, Exception(&#92;&#92;&#34;* About to connect() to atlas-ddmtracer.cern.ch port 443 (#0)&#92;n*   Trying 128.142.195.138... Connection refused&#92;n* couldn&#39;t connect to host&#92;n* Closing connection #0&#92;n&#92;ncurl&#58; (7) couldn&#39;t connect to host&#92;&#92;&#34;,), &#60;traceback object at 0x406cc68&#62;)

-- by Edward Karavakis at Mon Jan 19 14&#58;37&#58;26 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1421678009'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-19T14:33:29+00:00">Jan 19, 2015 02:33 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421678009">&nbsp;</a></div><pre>usatlas4 15835     1  0 Jan18 ?        00&#58;00&#58;01 python /afs/usatlas.bnl.gov/osg/pandasetup/@sys/lsm/1.4.8/bin/lsm-put -t ATLASUSERDISK --size 36694 --checksum adler32&#58;763aa997 --guid 81b3c2a0-c43b-422f-8ff2-744cf0e3a0a6 /home/condor/local/atlas/execute/dir_6606/gltmpdir.8872.Ta2D/JSSx/XrwK/output/Panda_Pilot_7860_1421610124/user.gangarbt.0118191715.739176.8753.lib.log.tgz <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/b2/3f/user.gangarbt.0118191715.739176.8753.lib.log.tgz' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/b2/3f/user.gangarbt.0118191715.739176.8753.lib.log.tgz</a>
usatlas4 32128  4712  0 01&#58;48 ?        00&#58;00&#58;00 sh -c { ps -fwu usatlas4; } 2&#62;&1
usatlas4 32129 32128  1 01&#58;48 ?        00&#58;00&#58;00 ps -fwu usatlas4

Thanks.

Cheers, Eddie

-- by Edward Karavakis at Mon Jan 19 14&#58;32&#58;26 UTC 2015

Hi Xin,
It still hangs according to&#58; <a href='http&#58;//gridui20.usatlas.bnl.gov&#58;25880/2015-01-19/ANALY_BNL_GLEXEC-gridtest02/5879098.0.out' target='_blank' rel='nofollow'>http&#58;//gridui20.usatlas.bnl.gov&#58;25880/2015-01-19/ANALY_BNL_GLEXEC-gridtest02/5879098.0.out</a>
hostname&#58;         acas0066.usatlas.bnl.gov
19 Jan 06&#58;48&#58;03| Monitor.py  | Stage-out with lsm site mover began at 05&#58;19&#58;13 (5330 s ago, site mover time-out&#58; 3600 s)
19 Jan 06&#58;48&#58;03| Monitor.py  | Adding a grace time of 300 s in case copy command has been aborted but file removal is not complete
19 Jan 06&#58;48&#58;03| Monitor.py  | !!FAILED!!1999!! Pilot has decided to kill looping job 2362817475 at 2015-01-19T01&#58;48&#58;03-0500
19 Jan 06&#58;48&#58;03| Monitor.py  | ps -fwu usatlas4
&#58; UID        PID  PPID  C STIME TTY          TIME CMD
usatlas4  4098  3943  0 Jan18 ?        00&#58;00&#58;00 sh -c cd /home/condor/local/atlas/execute/dir_2208/gltmpdir.3536.8eHt/9WHi/fyUy;                python -m glexec_aux 2&#62;1;
usatlas4  4302  4098  0 Jan18 ?        00&#58;00&#58;13 python -m glexec_aux
usatlas4  4705  4702  0 00&#58;16 ?        00&#58;00&#58;00 sh -c cd /home/condor/local/atlas/execute/dir_3893/gltmpdir.4657.LLgo/G9YR/ExPQ;                python -m glexec_aux 2&#62;1;
usatlas4  4712  4705  0 00&#58;16 ?        00&#58;00&#58;02 python -m glexec_aux
usatlas4  4752  4712  0 00&#58;16 ?        00&#58;00&#58;08 /usr/bin/python RunJob.py -a /cvmfs/atlas.cern.ch/repo/sw -b ANALY_BNL_GLEXEC -d /home/condor/local/atlas/execute/dir_3893/gltmpdir.4657.LLgo/G9YR/ExPQ/output/Panda_Pilot_3962_1421644446/PandaJob_2362817475_1421644575 -g /home/condor/local/atlas/execute/dir_3893/gltmpdir.4657.LLgo/G9YR/ExPQ -i 7ab77837-20c4-4ba2-a629-6268ee0b6ce7 -k /home/condor/local/atlas/execute/dir_3893/gltmpdir.4657.LLgo/G9YR/ExPQ/output/Panda_Pilot_3962_1421644446/pilotlog.txt -l /home/condor/local/atlas/execute/dir_3893/gltmpdir.4657.LLgo/G9YR/ExPQ -m /home/condor/local/atlas/execute/dir_3893/gltmpdir.4657.LLgo/G9YR/ExPQ -o /home/condor/local/atlas/execute/dir_3893/gltmpdir.4657.LLgo/G9YR/ExPQ/output/Panda_Pilot_3962_1421644446 -p 9628 -q  -s ANALY_BNL_GLEXEC -t True -x 2 -B False -E 2 -F ATLAS -H
usatlas4  5639  4302  0 Jan18 ?        00&#58;00&#58;00 [sh] &#60;defunct&#62;
usatlas4  5640     1  0 Jan18 ?        00&#58;00&#58;02 python /afs/usatlas.bnl.gov/osg/pandasetup/@sys/lsm/1.4.8/bin/lsm-put -t ATLASUSERDISK --size 33832 --checksum adler32&#58;50346add --guid abe857f7-bfc7-44f6-a572-bc232613d789 /home/condor/local/atlas/execute/dir_2208/gltmpdir.3536.8eHt/9WHi/fyUy/output/Panda_Pilot_2319_1421630751/user.gangarbt.0119012048.669237.2599.lib.log.tgz <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/b7/71/user.gangarbt.0119012048.669237.2599.lib.log.tgz' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/b7/71/user.gangarbt.0119012048.669237.2599.lib.log.tgz</a>
usatlas4  8906  8903  0 Jan18 ?        00&#58;00&#58;00 sh -c cd /home/condor/local/atlas/execute/dir_6606/gltmpdir.8872.Ta2D/JSSx/XrwK;                python -m glexec_aux 2&#62;1;
usatlas4  8913  8906  0 Jan18 ?        00&#58;00&#58;17 python -m glexec_aux
usatlas4 10909  4752  0 00&#58;19 ?        00&#58;00&#58;00 [sh] &#60;defunct&#62;
usatlas4 10910     1  0 00&#58;19 ?        00&#58;00&#58;00 python /afs/usatlas.bnl.gov/osg/pandasetup/@sys/lsm/1.4.8/bin/lsm-put -t ATLASUSERDISK --size 5667 --checksum adler32&#58;83e21aad --guid 20298fea-09c9-476f-8795-a49c57a4c2f5 /home/condor/local/atlas/execute/dir_3893/gltmpdir.4657.LLgo/G9YR/ExPQ/output/Panda_Pilot_3962_1421644446/PandaJob_2362817475_1421644575/user.gangarbt.0119051553.487270.5395.lib.tgz <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/db/8b/user.gangarbt.0119051553.487270.5395.lib.tgz' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/db/8b/user.gangarbt.0119051553.487270.5395.lib.tgz</a>
usatlas4 15834  8913  0 Jan18 ?        00&#58;00&#58;00 [sh] &#60;defunct&#62;
....end of 1st part---

-- by Edward Karavakis at Mon Jan 19 14&#58;32&#58;13 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1421437841'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-16T19:50:41+00:00">Jan 16, 2015 07:50 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421437841">&nbsp;</a></div><pre>Hi Eddie,

As John said, we changed group of the usatlas4 account, now it should have
access to that area. Please try again.

Thanks,
Xin
-- by xinzhao at Fri Jan 16 19&#58;50&#58;12 UTC 2015

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1421435827'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-16T19:17:07+00:00">Jan 16, 2015 07:17 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421435827">&nbsp;</a></div><pre>Hi all,

I talked with Michael about this, and there may be a couple other
solutions.

-- Stop making a distinction between /atlas and /atlas/usatlas members
in our mappings to UNIX IDs. All non-production users could be mapped
to
the &#39;usatlas3&#39; account.

-- Place the usatlas4 (non-US ATLAS) unix account in the usatlas UNIX
group (which has write access to the current location).

I think we&#39;re leaning toward the second solution.

--john

On 01/16/2015 10&#58;09 AM, OSG GOC TX via RT wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;    *Ticket URL&#58;*</font>
<a href='https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=24905' target='_blank' rel='nofollow'>https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=24905</a>
<font color='#7F7E6F'>&#62;    *Requestors&#58;*  tx+rtbnlprod_fp71@....</font>
<font color='#7F7E6F'>&#62;           *Ccs&#58;*  (None)</font>
<font color='#7F7E6F'>&#62;         *Queue&#58;*  GridServices</font>
<font color='#7F7E6F'>&#62;         *Owner&#58;*  Xin Zhao</font>
<font color='#7F7E6F'>&#62;        *Status&#58;*  /open/</font>
<font color='#7F7E6F'>&#62;      *Priority&#58;*  /Low/</font>
<font color='#7F7E6F'>&#62;   *Transaction&#58;*  Correspondence added by osg-goc-rest</font>
<font color='#7F7E6F'>&#62;       *Subject&#58;*  gLExec hammercloud jobs keep failing at BNL</font>
<font color='#7F7E6F'>&#62;               *GGUS Ticket&#58;*  109829</font>
&#60;<a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=109829&#62' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=109829&#62</a>;
<font color='#7F7E6F'>&#62;            *OSG GOC Ticket&#58;*  23029</font>
&#60;<a href='23029.html' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=23029&#62</a>;
<font color='#7F7E6F'>&#62;          *GGUS Ticket Type&#58;*  USER</font>
<div id='show_1387541581' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1387541581'><font color='#7F7E6F'>&#62;       *Resource Group Name&#58;*  BNL-ATLAS</font>
<font color='#7F7E6F'>&#62;                   *VO Name&#58;*  ATLAS</font>
<font color='#7F7E6F'>&#62;         *GGUS Problem Type&#58;*  Other</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
------------------------------------------------------------------------
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Involve person(s) has been changed to</font>
<font color='#7F7E6F'>&#62;</font>
Maarten.Litmaath@....;Alessandro.Di.Girolamo@....;Tomas.Kouba@.....
<font color='#7F7E6F'>&#62; Hi Xin,</font>
<font color='#7F7E6F'>&#62; Thank you for your email. Involving Alessandro and Tomas to comment</font>
on
<font color='#7F7E6F'>&#62; this.</font>
<font color='#7F7E6F'>&#62; Thank you.</font>
<font color='#7F7E6F'>&#62; Cheers, Eddie</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;   -- by Edward Karavakis at Fri Jan 16 15&#58;07&#58;35 UTC 2015</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></font>
<font color='#7F7E6F'>&#62;   -- by OSG-GOC at Fri Jan 16 15&#58;08&#58;09 UTC 2015</font>
<font color='#7F7E6F'>&#62;</font>

--
John Hover
Group Leader | Grid Group/Experiment Services
RHIC/ATLAS Computing Facility | Brookhaven National Laboratory
jhover@.... | 631-344-5828 | <a href='http&#58;//www.racf.bnl.gov/Members/jhover' target='_blank' rel='nofollow'>http&#58;//www.racf.bnl.gov/Members/jhover</a>

-- by jhover at Fri Jan 16 19&#58;16&#58;30 UTC 2015

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905
</div><script type='text/javascript'>
        $('#show_1387541581').click(function() {
            $('#detail_1387541581').slideDown("normal");
            $('#show_1387541581').hide();
            $('#hide_1387541581').show();
        });
        $('#hide_1387541581').click(function() {
            $('#detail_1387541581').slideUp();
            $('#hide_1387541581').hide();
            $('#show_1387541581').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='23029#1421420889'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-16T15:08:09+00:00">Jan 16, 2015 03:08 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421420889">&nbsp;</a></div><pre>Involve person(s) has been changed to Maarten.Litmaath@....;Alessandro.Di.Girolamo@....;Tomas.Kouba@.....
Hi Xin,
Thank you for your email. Involving Alessandro and Tomas to comment on this.
Thank you.
Cheers, Eddie

-- by Edward Karavakis at Fri Jan 16 15&#58;07&#58;35 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1421420575'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-16T15:02:55+00:00">Jan 16, 2015 03:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421420575">&nbsp;</a></div><pre>Hi Eddie,

Below please find some info from our dcache group. Basically it&#39;s about policy
on the different DISK areas.

&#34;
USERDISK area was originally placed to serve as temporary placeholders of jobs.
Since jobs were run as usatlas1 in the US for long timer, for all US sites, the
permission were set to be writable by usatlas1 user only. If one was going to
use GLEXEC for whatever reason and run jobs with user&#39;s proxy instead of
production proxy, we need to change the permission of all directories in
userdisk area. Alternatively, one can place the output of these jobs to be
SCRATCHDISK area where they are world writable. Since I am not sure what
USATLAS&#39;s official policy is, I included the Kaushik in this email.

in the summary, to accommodate GLEXEC, one needs to do one of the following two
choices.

A. Make USERDISK area to be world writeable.
B. Use SCRATCHDISK as output area for GLEXEC jobs/queues.
&#34;

I guess the question to you is that, is it possible to use SCRATCHDISK as
output area? If not, then it involves policy change in the US cloud.

Thanks,
Xin
-- by xinzhao at Fri Jan 16 15&#58;02&#58;15 UTC 2015

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1421341751'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-15T17:09:11+00:00">Jan 15, 2015 05:09 PM UTC</time> by <b>echism</b><a class="anchor" name="1421341751">&nbsp;</a></div><pre>Hi Xin,

Let me know when you have something on this.

Thank you</pre></div><div class='update_description'><i onclick="document.location='23029#1421340578'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-15T16:49:38+00:00">Jan 15, 2015 04:49 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421340578">&nbsp;</a></div><pre>and the voms roles&#58;
=== VO atlas extension information ===
VO        &#58; atlas
subject   &#58; /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=gangarbt/CN=722147/CN=Robot&#58; Ganga Robot
issuer    &#58; /DC=ch/DC=cern/OU=computers/CN=lcg-voms2.cern.ch
attribute &#58; /atlas/Role=NULL/Capability=NULL
attribute &#58; /atlas/lcg1/Role=NULL/Capability=NULL
attribute &#58; nickname = gangarbt (atlas)
timeleft  &#58; 88&#58;41&#58;56
uri       &#58; lcg-voms2.cern.ch&#58;15001

-- by Edward Karavakis at Thu Jan 15 16&#58;49&#58;14 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1421339380'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-15T16:29:40+00:00">Jan 15, 2015 04:29 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421339380">&nbsp;</a></div><pre>usatlas4 10577 28993  0 20&#58;52 ?        00&#58;00&#58;00 sh -c { ps -fwu usatlas4; } 2&#62;&1
usatlas4 10578 10577  1 20&#58;52 ?        00&#58;00&#58;00 ps -fwu usatlas4
usatlas4 13858 13855  0 14&#58;30 ?        00&#58;00&#58;00 sh -c cd /home/condor/local/atlas/execute/dir_13448/gltmpdir.13824.oFpK/yUuz/BvTc;                python -m glexec_aux 2&#62;1;
usatlas4 13865 13858  0 14&#58;30 ?        00&#58;00&#58;08 python -m glexec_aux
usatlas4 22605 22602  0 00&#58;53 ?        00&#58;00&#58;00 sh -c cd /home/condor/local/atlas/execute/dir_19935/gltmpdir.22570.0fry/u1X6/76xe;                python -m glexec_aux 2&#62;1;
usatlas4 22613 22605  0 00&#58;53 ?        00&#58;00&#58;13 python -m glexec_aux
usatlas4 22865 22862  0 13&#58;28 ?        00&#58;00&#58;00 sh -c cd /home/condor/local/atlas/execute/dir_21598/gltmpdir.22831.vBSa/lRnn/4WOv;                python -m glexec_aux 2&#62;1;
usatlas4 22872 22865  0 13&#58;28 ?        00&#58;00&#58;12 python -m glexec_aux
usatlas4 28986 28983  0 19&#58;20 ?        00&#58;00&#58;00 sh -c cd /home/condor/local/atlas/execute/dir_26023/gltmpdir.28951.BJBr/rMyQ/WBcS;                python -m glexec_aux 2&#62;1;
usatlas4 28993 28986  0 19&#58;20 ?        00&#58;00&#58;02 python -m glexec_aux
usatlas4 29034 28993  0 19&#58;20 ?        00&#58;00&#58;05 /usr/bin/python RunJob.py -a /cvmfs/atlas.cern.ch/repo/sw -b ANALY_BNL_GLEXEC -d /home/condor/local/atlas/execute/dir_26023/gltmpdir.28951.BJBr/rMyQ/WBcS/output/Panda_Pilot_26094_1421281099/PandaJob_2358490285_1421281232 -g /home/condor/local/atlas/execute/dir_26023/gltmpdir.28951.BJBr/rMyQ/WBcS -i 7d4e31c2-5dda-4808-a576-9003931362e0 -k /home/condor/local/atlas/execute/dir_26023/gltmpdir.28951.BJBr/rMyQ/WBcS/output/Panda_Pilot_26094_1421281099/pilotlog.txt -l /home/condor/local/atlas/execute/dir_26023/gltmpdir.28951.BJBr/rMyQ/WBcS -m /home/condor/local/atlas/execute/dir_26023/gltmpdir.28951.BJBr/rMyQ/WBcS -o /home/condor/local/atlas/execute/dir_26023/gltmpdir.28951.BJBr/rMyQ/WBcS/output/Panda_Pilot_26094_1421281099 -p 8952 -q  -s ANALY_BNL_GLEXEC -t True -x 2 -B False -E 2 -F ATLAS -H
15 Jan 01&#58;52&#58;20| Monitor.py  | ls -ltr /home/condor/local/atlas/execute/dir_26023/gltmpdir.28951.BJBr/rMyQ/WBcS/output/Panda_Pilot_26094_1421281099/PandaJob_2358490285_1421281232
&#58; total 14472
...
15 Jan 01&#58;53&#58;31| Monitor.py  | !!FAILED!!1999!! Job stuck in stage-out state&#58; file copy time-out
....
15 Jan 01&#58;54&#58;36| pUtil.py    | ..Job report..................................................................................................
15 Jan 01&#58;54&#58;36| pUtil.py    | . Pilot version             &#58; PICARD 59i
15 Jan 01&#58;54&#58;36| pUtil.py    | . Job id                    &#58; 2358490285
15 Jan 01&#58;54&#58;36| pUtil.py    | . Current job status        &#58; failed
15 Jan 01&#58;54&#58;36| pUtil.py    | . Trf job type              &#58; Single trf job
15 Jan 01&#58;54&#58;36| pUtil.py    | . Final job state           &#58; (not set, job should have failed)
15 Jan 01&#58;54&#58;36| pUtil.py    | . All out files transferred &#58; No
15 Jan 01&#58;54&#58;36| pUtil.py    | . Pilot error code          &#58; 1152, Put error&#58; File copy timed out
-------------------------------------------

The DN of gangarobot is the following and it has atlas voms roles&#58;

$ grid-proxy-info -f 700989b6886ed22cbb462a5000d2cc82bbf6dfc4 -all
subject  &#58; /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=gangarbt/CN=722147/CN=Robot&#58; Ganga Robot/CN=proxy/CN=proxy/CN=proxy/CN=proxy
issuer   &#58; /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=gangarbt/CN=722147/CN=Robot&#58; Ganga Robot/CN=proxy/CN=proxy/CN=proxy
identity &#58; /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=gangarbt/CN=722147/CN=Robot&#58; Ganga Robot
type     &#58; full legacy globus proxy
strength &#58; 1024 bits
path     &#58; 700989b6886ed22cbb462a5000d2cc82bbf6dfc4
<div id='show_2081936880' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2081936880'>timeleft &#58; 89&#58;04&#58;18  (3.7 days)

Thank you.

Cheers, Eddie

-- by Edward Karavakis at Thu Jan 15 16&#58;29&#58;24 UTC 2015

Hi Xin,

By looking at the latest failed jobs, I can see the following at&#58; <a href='http&#58;//gridui18.usatlas.bnl.gov&#58;25880/2015-01-14/ANALY_BNL_GLEXEC-gridtest02/6181174.0.out' target='_blank' rel='nofollow'>http&#58;//gridui18.usatlas.bnl.gov&#58;25880/2015-01-14/ANALY_BNL_GLEXEC-gridtest02/6181174.0.out</a>
-------------------------------------------
15 Jan 01&#58;52&#58;20| Monitor.py  | Stage-out with lsm site mover began at 00&#58;25&#58;01 (5239 s ago, site mover time-out&#58; 3600 s)
15 Jan 01&#58;52&#58;20| Monitor.py  | Adding a grace time of 300 s in case copy command has been aborted but file removal is not complete
15 Jan 01&#58;52&#58;20| Monitor.py  | !!FAILED!!1999!! Pilot has decided to kill looping job 2358490285 at 2015-01-14T20&#58;52&#58;20-0500

15 Jan 01&#58;52&#58;20| Monitor.py  | ps -fwu usatlas4
&#58; UID        PID  PPID  C STIME TTY          TIME CMD
usatlas4  5575 29034  0 19&#58;25 ?        00&#58;00&#58;00 [sh] &#60;defunct&#62;
usatlas4  5576     1  0 19&#58;25 ?        00&#58;00&#58;00 python /afs/usatlas.bnl.gov/osg/pandasetup/@sys/lsm/1.4.8/bin/lsm-put -t ATLASUSERDISK --size 9807603 --checksum adler32&#58;e60d7699 --guid 851a498a-cdb0-4b9c-8da5-036035e77e26 /home/condor/local/atlas/execute/dir_26023/gltmpdir.28951.BJBr/rMyQ/WBcS/output/Panda_Pilot_26094_1421281099/PandaJob_2358490285_1421281232/user.gangarbt.0115001921.538317.4969.lib.tgz <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/69/73/user.gangarbt.0115001921.538317.4969.lib.tgz' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/69/73/user.gangarbt.0115001921.538317.4969.lib.tgz</a>
usatlas4  5864 13865  0 16&#58;04 ?        00&#58;00&#58;00 [sh] &#60;defunct&#62;
usatlas4  5865     1  0 16&#58;04 ?        00&#58;00&#58;00 python /afs/usatlas.bnl.gov/osg/pandasetup/@sys/lsm/1.4.8/bin/lsm-put -t ATLASUSERDISK --size 36877 --checksum adler32&#58;b89d2579 --guid d0bd14e7-5aa5-40d5-8a81-d86a1604856b /home/condor/local/atlas/execute/dir_13448/gltmpdir.13824.oFpK/yUuz/BvTc/output/Panda_Pilot_13519_1421263827/user.gangarbt.0114192910.485712.4236.lib.log.tgz <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/9e/ab/user.gangarbt.0114192910.485712.4236.lib.log.tgz' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/9e/ab/user.gangarbt.0114192910.485712.4236.lib.log.tgz</a>
usatlas4  8550 22613  0 15&#58;11 ?        00&#58;00&#58;00 [sh] &#60;defunct&#62;
usatlas4  8551     1  0 15&#58;11 ?        00&#58;00&#58;00 python /afs/usatlas.bnl.gov/osg/pandasetup/@sys/lsm/1.4.8/bin/lsm-put -t ATLASUSERDISK --size 34149 --checksum adler32&#58;967739ac --guid 1e1683a5-c0d0-4bb6-9071-00a480b97d06 /home/condor/local/atlas/execute/dir_19935/gltmpdir.22570.0fry/u1X6/76xe/output/Panda_Pilot_20018_1421214697/user.gangarbt.0114055314.529984.1428.lib.log.tgz <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/06/63/user.gangarbt.0114055314.529984.1428.lib.log.tgz' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/06/63/user.gangarbt.0114055314.529984.1428.lib.log.tgz</a>
usatlas4 10372 22872  0 16&#58;13 ?        00&#58;00&#58;00 [sh] &#60;defunct&#62;
usatlas4 10373     1  0 16&#58;13 ?        00&#58;00&#58;00 python /afs/usatlas.bnl.gov/osg/pandasetup/@sys/lsm/1.4.8/bin/lsm-put -t ATLASUSERDISK --size 37181 --checksum adler32&#58;7b524dc4 --guid ed895d12-9995-4e19-a997-cb9abb996bd6 /home/condor/local/atlas/execute/dir_21598/gltmpdir.22831.vBSa/lRnn/4WOv/output/Panda_Pilot_21666_1421259969/user.gangarbt.0114182807.407154.9395.lib.log.tgz <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/cb/8f/user.gangarbt.0114182807.407154.9395.lib.log.tgz' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/cb/8f/user.gangarbt.0114182807.407154.9395.lib.log.tgz</a>

... end of message 1 ...

-- by Edward Karavakis at Thu Jan 15 16&#58;29&#58;04 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a>
</div><script type='text/javascript'>
        $('#show_2081936880').click(function() {
            $('#detail_2081936880').slideDown("normal");
            $('#show_2081936880').hide();
            $('#hide_2081936880').show();
        });
        $('#hide_2081936880').click(function() {
            $('#detail_2081936880').slideUp();
            $('#hide_2081936880').hide();
            $('#show_2081936880').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='23029#1421335228'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-15T15:20:28+00:00">Jan 15, 2015 03:20 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421335228">&nbsp;</a></div><pre>Hi Eddie,

Is the copy command that fails dccp ? If it&#39;s dccp, then what matters is the
local user account the in-play DN is mapped to, which I guess is &#34;usatlas2&#34;.
The target directory
(/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/6f/a1/) is group
writable, usatlas2 should be able to write to it. If the failed command is dq2
command that may go through our SRM door, could you show me the full DN,
including its role?

Thanks,
Xin
-- by xinzhao at Thu Jan 15 15&#58;19&#58;50 UTC 2015

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1421093124'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-12T20:05:24+00:00">Jan 12, 2015 08:05 PM UTC</time> by <b>Xin zhao</b><a class="anchor" name="1421093124">&nbsp;</a></div><pre>Hello,

Yes I am back, catching up with stuff now...

Thanks,
Xin

On 1/12/2015 3&#58;01 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='23029#1421092945'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-12T20:02:25+00:00">Jan 12, 2015 08:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1421092945">&nbsp;</a></div><pre>Hi Xin,

Are you back?

Thank you
-- by Elizabeth Prout at Mon Jan 12 20&#58;01&#58;16 UTC 2015

GOCTX Source&#58; <a href='https&#58;//ticket.grid.iu.edu/viewer?id=23029#1421092874' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/viewer?id=23029#1421092874</a></pre></div><div class='update_description'><i onclick="document.location='23029#1421092876'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-12T20:01:16+00:00">Jan 12, 2015 08:01 PM UTC</time> by <b>echism</b><a class="anchor" name="1421092876">&nbsp;</a></div><pre>Hi Xin,

Are you back?

Thank you</pre></div><div class='update_description'><i onclick="document.location='23029#1420489974'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-05T20:32:54+00:00">Jan 5, 2015 08:32 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1420489974">&nbsp;</a></div><pre>Hi,

<font color='#7F7E6F'>&#62; On Jan 5, 2015, at 3&#58;08 PM, OSG GOC TX via RT &#60;RT-RACF@....&#62;</font>
wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Hi Xin,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; It&#39;s the second week of January. Are you back?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thank you</font>
<font color='#7F7E6F'>&#62;  -- by Elizabeth Prout at Mon Jan 05 20&#58;07&#58;39 UTC 2015</font>
<font color='#7F7E6F'>&#62;</font>

No&#58; Xin is not back yet. BTW, it���s only 5 Jan; I believe Xin is back
next week.

~John
-- by jd at Mon Jan 05 20&#58;32&#58;23 UTC 2015

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1420488459'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-05T20:07:39+00:00">Jan 5, 2015 08:07 PM UTC</time> by <b>echism</b><a class="anchor" name="1420488459">&nbsp;</a></div><pre>Hi Xin,

It&#39;s the second week of January. Are you back?

Thank you</pre></div><div class='update_description'><i onclick="document.location='23029#1419012802'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-19T18:13:22+00:00">Dec 19, 2014 06:13 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1419012802">&nbsp;</a></div><pre>Hi,

Xin will be out until the second week of January, so this should be
put
on shelved status.

Thanks,

--john

On 12/18/2014 02&#58;09 PM, OSG GOC TX via RT wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;    *Ticket URL&#58;*</font>
<a href='https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=24905' target='_blank' rel='nofollow'>https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=24905</a>
<font color='#7F7E6F'>&#62;    *Requestors&#58;*  tx+rtbnlprod_fp71@....</font>
<font color='#7F7E6F'>&#62;           *Ccs&#58;*  (None)</font>
<font color='#7F7E6F'>&#62;         *Queue&#58;*  GridServices</font>
<font color='#7F7E6F'>&#62;         *Owner&#58;*  Xin Zhao</font>
<font color='#7F7E6F'>&#62;        *Status&#58;*  /open/</font>
<font color='#7F7E6F'>&#62;      *Priority&#58;*  /Low/</font>
<font color='#7F7E6F'>&#62;   *Transaction&#58;*  Correspondence added by osg-goc-rest</font>
<font color='#7F7E6F'>&#62;       *Subject&#58;*  gLExec hammercloud jobs keep failing at BNL</font>
<font color='#7F7E6F'>&#62;               *GGUS Ticket&#58;*  109829</font>
&#60;<a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=109829&#62' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=109829&#62</a>;
<font color='#7F7E6F'>&#62;            *OSG GOC Ticket&#58;*  23029</font>
&#60;<a href='23029.html' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=23029&#62</a>;
<font color='#7F7E6F'>&#62;          *GGUS Ticket Type&#58;*  USER</font>
<font color='#7F7E6F'>&#62;       *Resource Group Name&#58;*  BNL-ATLAS</font>
<font color='#7F7E6F'>&#62;                   *VO Name&#58;*  ATLAS</font>
<font color='#7F7E6F'>&#62;         *GGUS Problem Type&#58;*  Other</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
------------------------------------------------------------------------
<div id='show_1801258324' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1801258324'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Xin,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Have you had a chance to look into this?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thank you</font>
<font color='#7F7E6F'>&#62;   -- by Elizabeth Prout at Tue Dec 16 16&#58;24&#58;23 UTC 2014</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Xin,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Have you had a chance to look into this?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thank you</font>
<font color='#7F7E6F'>&#62;   -- by Elizabeth Prout at Thu Dec 18 19&#58;08&#58;32 UTC 2014</font>
<font color='#7F7E6F'>&#62;</font>

--
John Hover
Group Leader | Grid Group/Experiment Services
RHIC/ATLAS Computing Facility | Brookhaven National Laboratory
jhover@.... | 631-344-5828 | <a href='http&#58;//www.racf.bnl.gov/Members/jhover' target='_blank' rel='nofollow'>http&#58;//www.racf.bnl.gov/Members/jhover</a>

-- by jhover at Fri Dec 19 18&#58;12&#58;49 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905
</div><script type='text/javascript'>
        $('#show_1801258324').click(function() {
            $('#detail_1801258324').slideDown("normal");
            $('#show_1801258324').hide();
            $('#hide_1801258324').show();
        });
        $('#hide_1801258324').click(function() {
            $('#detail_1801258324').slideUp();
            $('#hide_1801258324').hide();
            $('#show_1801258324').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='23029#1418929712'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-18T19:08:32+00:00">Dec 18, 2014 07:08 PM UTC</time> by <b>echism</b><a class="anchor" name="1418929712">&nbsp;</a></div><pre>Xin,

Have you had a chance to look into this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='23029#1418747063'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-16T16:24:23+00:00">Dec 16, 2014 04:24 PM UTC</time> by <b>echism</b><a class="anchor" name="1418747063">&nbsp;</a></div><pre>Xin,

Have you had a chance to look into this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='23029#1418402712'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-12T16:45:12+00:00">Dec 12, 2014 04:45 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1418402712">&nbsp;</a></div><pre>OK it is clear that the jobs are now failing due to wrong ACLs on ATLASUSERDISK&#58;

12 Dec 02&#58;21&#58;35| LocalSiteMov| ec = -15, output = [207] Failed copying the file /pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/6f/a1/user.gangarbt.1211231959.50219.4884.lib.log.tgz due to permissions problem!  Using grid catalog type&#58; UNKNOWN Using grid catalog &#58; (null) VO name&#58; atlas Checksum type&#58; None Destination SE type&#58; SRMv2 Destination SRM Request Token&#58; 41994763 <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/6f/a1/user.gangarbt.1211231959.50219.4884.lib.log.tgz&#58' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/6f/a1/user.gangarbt.1211231959.50219.4884.lib.log.tgz&#58</a>; Permission denied lcg_cp&#58; Permission denied

According to AGIS <a href='http&#58;//atlas-agis.cern.ch/agis/ddm_endpoint/detail/BNL-OSG2_USERDISK/full/' target='_blank' rel='nofollow'>http&#58;//atlas-agis.cern.ch/agis/ddm_endpoint/detail/BNL-OSG2_USERDISK/full/</a>, I should be able to write there with the gangarbt proxy with /atlas/Role=NULL&#58;

&#39;Role&#58; /atlas/Role=NULL Permissions frwpu&#39;

Could you please have a look and correct the permissions?

Thank you.

Cheers, Eddie

-- by Edward Karavakis at Fri Dec 12 16&#58;44&#58;30 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1418137019'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-09T14:56:59+00:00">Dec 9, 2014 02:56 PM UTC</time> by <b>echism</b><a class="anchor" name="1418137019">&nbsp;</a></div><pre>Hello,

Is there any update on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='23029#1417867642'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-06T12:07:22+00:00">Dec 6, 2014 12:07 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417867642">&nbsp;</a></div><pre>Hi Xin,

I can see that Alessandro De Salvo&#39;s jobs are finishing ok&#58; <a href='http&#58;//panda.cern.ch/server/pandamon/query?job=*&type=&hours=12&jobsetID=any&jobStatus=finished&site=ANALY_BNL_GLEXEC&plot=no&detail=no' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch/server/pandamon/query?job=*&type=&hours=12&jobsetID=any&jobStatus=finished&site=ANALY_BNL_GLEXEC&plot=no&detail=no</a>

Since we don&#39;t have De Salvo&#39;s proxy, glexec uses the same cert that started the pilot.

The gangarbt jobs are failing at the stage out step&#58;
<a href='http&#58;//panda.cern.ch/server/pandamon/query?job=*&type=&hours=4&jobsetID=any&jobStatus=&site=ANALY_BNL_GLEXEC&plot=no&detail=no' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch/server/pandamon/query?job=*&type=&hours=4&jobsetID=any&jobStatus=&site=ANALY_BNL_GLEXEC&plot=no&detail=no</a>

If you see at <a href='http&#58;//gridui19.usatlas.bnl.gov&#58;25880/2014-12-05/ANALY_BNL_GLEXEC-gridtest02/5549107.0.out' target='_blank' rel='nofollow'>http&#58;//gridui19.usatlas.bnl.gov&#58;25880/2014-12-05/ANALY_BNL_GLEXEC-gridtest02/5549107.0.out</a>

05 Dec 21&#58;58&#58;09| LocalSiteMov| Executing command&#58; source /afs/usatlas.bnl.gov/osg/pandasetup/@sys/current/copysetup.sh; export X509_USER_PROXY=/home/condor/local/atlas/execute/dir_25499/gltmpdir.26478.imew/XajD/Ef2i/user_proxy; lsm-put -t ATLASUSERDISK --size 36690 --checksum adler32&#58;835af29f --guid c8711632-28e4-4aed-8420-8c0fe55ac7f3 /home/condor/local/atlas/execute/dir_25499/gltmpdir.26478.imew/XajD/Ef2i/output/Panda_Pilot_25683_1417811036/user.gangarbt.1205202348.692012.4151.lib.log.tgz <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/cc/09/user.gangarbt.1205202348.692012.4151.lib.log.tgz' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/cc/09/user.gangarbt.1205202348.692012.4151.lib.log.tgz</a>
05 Dec 23&#58;14&#58;57| LocalSiteMov| Command finished after 4607.920000 s
05 Dec 23&#58;14&#58;57| LocalSiteMov| ec = -15, output =
05 Dec 23&#58;14&#58;57| LocalSiteMov| !!WARNING!!2990!! Command failed&#58; source /afs/usatlas.bnl.gov/osg/pandasetup/@sys/current/copysetup.sh; export X509_USER_PROXY=/home/condor/local/atlas/execute/dir_25499/gltmpdir.26478.imew/XajD/Ef2i/user_proxy; lsm-put -t ATLASUSERDISK --size 36690 --checksum adler32&#58;835af29f --guid c8711632-28e4-4aed-8420-8c0fe55ac7f3 /home/condor/local/atlas/execute/dir_25499/gltmpdir.26478.imew/XajD/Ef2i/output/Panda_Pilot_25683_1417811036/user.gangarbt.1205202348.692012.4151.lib.log.tgz <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/cc/09/user.gangarbt.1205202348.692012.4151.lib.log.tgz' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/cc/09/user.gangarbt.1205202348.692012.4151.lib.log.tgz</a>

and at  <a href='http&#58;//gridui20.usatlas.bnl.gov&#58;25880/2014-12-05/ANALY_BNL_GLEXEC-gridtest02/5361266.0.out' target='_blank' rel='nofollow'>http&#58;//gridui20.usatlas.bnl.gov&#58;25880/2014-12-05/ANALY_BNL_GLEXEC-gridtest02/5361266.0.out</a>

05 Dec 23&#58;16&#58;04| LocalSiteMov| Executing command&#58; source /afs/usatlas.bnl.gov/osg/pandasetup/@sys/current/copysetup.sh; export X509_USER_PROXY=/home/condor/local/atlas/execute/dir_17645/gltmpdir.17980.wP6I/59M7/Ncx5/user_proxy; lsm-put -t ATLASUSERDISK --size 33876 --checksum adler32&#58;a7937a0e --guid e6e88344-3615-47ae-afb1-08c03203ac27 /home/condor/local/atlas/execute/dir_17645/gltmpdir.17980.wP6I/59M7/Ncx5/output/Panda_Pilot_17712_1417815712/user.gangarbt.1205214146.611916.4106.lib.log.tgz <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/56/80/user.gangarbt.1205214146.611916.4106.lib.log.tgz' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/56/80/user.gangarbt.1205214146.611916.4106.lib.log.tgz</a>
06 Dec 01&#58;50&#58;01| LocalSiteMov| Command finished after 9235.740000 s
06 Dec 01&#58;50&#58;01| LocalSiteMov| ec = -15, output =
06 Dec 01&#58;50&#58;01| LocalSiteMov| !!WARNING!!2990!! Command failed&#58; source /afs/usatlas.bnl.gov/osg/pandasetup/@sys/current/copysetup.sh; export X509_USER_PROXY=/home/condor/local/atlas/execute/dir_17645/gltmpdir.17980.wP6I/59M7/Ncx5/user_proxy; lsm-put -t ATLASUSERDISK --size 33876 --checksum adler32&#58;a7937a0e --guid e6e88344-3615-47ae-afb1-08c03203ac27 /home/condor/local/atlas/execute/dir_17645/gltmpdir.17980.wP6I/59M7/Ncx5/output/Panda_Pilot_17712_1417815712/user.gangarbt.1205214146.611916.4106.lib.log.tgz <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/56/80/user.gangarbt.1205214146.611916.4106.lib.log.tgz' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/atlasuserdisk/rucio/user/gangarbt/56/80/user.gangarbt.1205214146.611916.4106.lib.log.tgz</a>

I&#39;ve also found a bug in the pilot code while debugging the jobs and I have notified Paul to fix it.

Maybe gangarbt doesn&#39;t have permissions to write to atlasuserdisk/rucio/user/gangarbt ? Any idea why the default space token for this queue is ATLASUSERDISK and not a SCRATCHDISK? At least any atlas user can write to the SCRATCHDISK.

Thank you.

Cheers, Eddie

-- by Edward Karavakis at Sat Dec 06 12&#58;06&#58;52 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1417793815'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-05T15:36:55+00:00">Dec 5, 2014 03:36 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417793815">&nbsp;</a></div><pre>Hi Xin,

The following command&#58; &#39;/usr/sbin/glexec /usr/sbin/glexec_unwrapenv.pl -- &#39;cd /tmp/dir_test/gltmpdir.23581.yKtl/5lG5/8kfc; python -m glexec_aux 2&#62;1;&#39;&#39;
won&#39;t work outside of the scope of the pilot.

I will start some fresh hammercloud tests right now, thank you.

Cheers, Eddie

-- by Edward Karavakis at Fri Dec 05 15&#58;36&#58;13 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1417793540'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-05T15:32:20+00:00">Dec 5, 2014 03:32 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417793540">&nbsp;</a></div><pre>Hi Eddie,

After removing that setting (double commented out), I repeat the previous
manual test, the glexec_unwrapenv.pl still fails with the same error.

But nevertheless, I have changed the config for all test WNs, please resubmit
your jobs.

Thanks,
Xin
-- by xinzhao at Fri Dec 05 15&#58;31&#58;57 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1417792735'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-05T15:18:55+00:00">Dec 5, 2014 03:18 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417792735">&nbsp;</a></div><pre>Hi Xin,

That&#39;s it!! Please remove this line completely from the config file and let&#39;s see if it will finally work!

Thanks a lot once again for your help!

Cheers, Eddie

-- by Edward Karavakis at Fri Dec 05 15&#58;18&#58;32 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1417792341'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-05T15:12:21+00:00">Dec 5, 2014 03:12 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417792341">&nbsp;</a></div><pre>Hi Eddie,

Here is the config file&#58;

[glexec]
lcmaps_db_file = /etc/lcmaps.db
lcmaps_get_account_policy = glexec
log_level = 3
lcmaps_debug_level = 3
lcmaps_voms_verification = no
use_lcas = no
linger = no
create_target_proxy = no
user_white_list = *
preserve_env_variables = HOME, CONDOR_INHERIT, CONDOR_CONFIG, _CONDOR_EXECUTE,
_CONDOR_LOG, _CONDOR_GSI_DAEMON_PROXY, SSL_CLIENT_CERT

Do you mean to comment out the create_target_proxy setting, or set it to yes?

Thanks,
Xin
-- by xinzhao at Fri Dec 05 15&#58;11&#58;53 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1417792041'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-05T15:07:21+00:00">Dec 5, 2014 03:07 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417792041">&nbsp;</a></div><pre>Hi Eddie,

The old dirs on acas0067 are gone, cleaned up by pilot automatically.

I did the test manually on acas0068&#58;

bash-4.1$ export X509_USER_PROXY=/tmp/dir_test/x509_user_proxy
bash-4.1$ export GLEXEC_CLIENT_CERT=/tmp/x509up_u7631
bash-4.1$ export TMPDIR=/tmp/dir_test/
bash-4.1$ export GLEXEC_SOURCE_PROXY=/tmp/x509up_u7631
bash-4.1$ /usr/sbin/mkgltempdir -t 777
/tmp/dir_test//gltmpdir.23581.yKtl/5lG5/8kfc
bash-4.1$ env | grep X509_USER_PROXY
X509_USER_PROXY=/tmp/dir_test/x509_user_proxy
bash-4.1$ export GLEXEC_ENV=&#39;/usr/sbin/glexec_wrapenv.pl&#39;
bash-4.1$ /usr/sbin/glexec /usr/sbin/glexec_unwrapenv.pl -- &#39;cd
/tmp/dir_test/gltmpdir.23581.yKtl/5lG5/8kfc; python -m glexec_aux 2&#62;1;&#39;
Premature end of base64 data at /usr/sbin/glexec_unwrapenv.pl line 59.
inflation failed
bash-4.1$ env | grep X509_USER_PROXY
X509_USER_PROXY=/tmp/dir_test/x509_user_proxy

No particular error messages from the syslog.
This is the version of rpm we use&#58;
glexec-wrapper-scripts-0.0.7-1.1.osg.el6.noarch

Thanks,
Xin
-- by xinzhao at Fri Dec 05 15&#58;06&#58;53 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1417791593'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-05T14:59:53+00:00">Dec 5, 2014 02:59 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417791593">&nbsp;</a></div><pre>Hi Xin,

Could you please dump here the /etc/glexec.conf file?

With the help of Maarten, I discovered that the transfer of the proxy file and/or the setting of the corresponding variables in the target environment can be disabled in the config file, using the create_target_proxy option.

So my hope is that it is just disabled in the config file and that everything will work properly just by removing the create_target_proxy option.

Thank you.

Cheers, Eddie

-- by Edward Karavakis at Fri Dec 05 14&#58;59&#58;28 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1417778148'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-05T11:15:48+00:00">Dec 5, 2014 11:15 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417778148">&nbsp;</a></div><pre>Hi Xin,

These actions are supposed to be the result of the following&#58;

export GLEXEC_ENV=&#39;/usr/sbin/glexec_wrapenv.pl&#39;;                /usr/sbin/glexec /usr/sbin/glexec_unwrapenv.pl -- &#39;cd /home/condor/local/atlas/execute/dir_14381/gltmpdir.22801.sjNp/3oIl/CKH2;                python -m glexec_aux 2&#62;1;&#39;

Could you please send me the following two files from acas0067?

/home/condor/local/atlas/execute/dir_14381/gltmpdir.22801.sjNp/3oIl/CKH2/data-orig.json
/home/condor/local/atlas/execute/dir_14381/gltmpdir.22801.sjNp/3oIl/CKH2/data.json

This will hopefully help me find out the conditions before and after running glexec.

Thank you once again.

Cheers, Eddie

-- by Edward Karavakis at Fri Dec 05 11&#58;15&#58;20 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1417719018'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-04T18:50:18+00:00">Dec 4, 2014 06:50 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417719018">&nbsp;</a></div><pre>Hi Eddie,

&#34;
So basically glexec does the following&#58;
cd  /tmp/dir_test//gltmpdir.20496.FP8R/e9fQ/dvUR
su to the owner of the /tmp/dir_test//gltmpdir.20496.FP8R/e9fQ/dvUR
directory
and then the X509_USER_PROXY env var should point to  /tmp/x509up_u7631
which is the GLEXEC_CLIENT_CERT and GLEEC_SOURCE_PROXY env vars.
&#34;

Are the above actions supposed to be the result of mtgltempdir command?��Does this mean the glexec at BNL behaves differently?��

The version of glexec is glexec-0.9.9-1.2.osg32.el6.x86_64

Could you send me a simple recipe to test the expected behavior of glexec locally?��

Thanks,
Xin

(By the way, I��will be gone for several weeks, starting this weekend, so expect others from our facility to continue debug this with you....)
-- by xinzhao at Thu Dec 04 18&#58;49&#58;47 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1417712711'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-04T17:05:11+00:00">Dec 4, 2014 05:05 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417712711">&nbsp;</a></div><pre>Hi Xin,

Thank you. The X509_USER_PROXY env var does not disappear from usatlas1 during the whole process. It looks like it is not set after the gLExec uid switch from usatlas1 to usatlas2 or whatever user it switched to. So basically glexec does the following&#58;
cd  /tmp/dir_test//gltmpdir.20496.FP8R/e9fQ/dvUR
su to the owner of the /tmp/dir_test//gltmpdir.20496.FP8R/e9fQ/dvUR directory
and then the X509_USER_PROXY env var should point to  /tmp/x509up_u7631 which is the GLEXEC_CLIENT_CERT and GLEEC_SOURCE_PROXY env vars.

Thank you.

Cheers, Eddie

-- by Edward Karavakis at Thu Dec 04 17&#58;04&#58;41 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1417710992'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-04T16:36:32+00:00">Dec 4, 2014 04:36 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417710992">&nbsp;</a></div><pre>Hi Eddie and all,

The CHANGED_X509 env variable is probably OSG specific, as I see it on other
OSG sites as well. But I don&#39;t think that&#39;s the issue here.

The failed arcproxy command is known, for OSG, we use voms-proxy-info. So this
shouldn&#39;t be the issue, either.

The question is the X509_USER_PROXY env variable.

From the pilot log,
<a href='http&#58;//www.usatlas.bnl.gov/' target='_blank' rel='nofollow'>http&#58;//www.usatlas.bnl.gov/</a>~xinzhao/dbg/glexec-test/5574938.0.out, I see &#58;

1) pilot starts with a known X509_USER_PROXY, so that it successfully received
a job from panda server and ran the mkgltempdir command. Note that, the first
time voms-proxy-info is run, it explicitly set the env, in this command&#58;

Executing command&#58; source /afs/usatlas.bnl.gov/osg/pandasetup/@sys/current/envsetup.sh;export X509_USER_PROXY=/home/condor/local/atlas/execute/dir_14381/x509_user_proxy;voms-proxy-info -actimeleft --file $X509_USER_PROXY

2) later on, when pilot ran the voms-proxy-info again, from the newly created tempdir, it didn&#39;t explicitly set the X509_USER_PROXY env variable, and failed&#58;��

28 Nov 00&#58;26&#58;14| ATLASExperim| Executing command&#58; source /afs/usatlas.bnl.gov/osg/pandasetup/@sys/current/envsetup.sh;voms-proxy-info -actimeleft --file $X509_USER_PROXY

I don&#39;t know what logic is behind the change of this behavior...

I manually tested the glexec command, the X509_USER_PROXY doesn&#39;t disappear from the execution of the glexec command&#58;��

[usatlas1@acas0068 execute]$ setenv X509_USER_PROXY
/tmp/dir_test/x509_user_proxy
[usatlas1@acas0068 execute]$ setenv GLEXEC_CLIENT_CERT /tmp/x509up_u7631
[usatlas1@acas0068 execute]$ setenv TMPDIR /tmp/dir_test/
[usatlas1@acas0068 execute]$ setenv GLEXEC_SOURCE_PROXY /tmp/x509up_u7631
[usatlas1@acas0068 execute]$ env | grep X509
X509_USER_PROXY=/tmp/dir_test/x509_user_proxy
[usatlas1@acas0068 execute]$ /usr/sbin/mkgltempdir -t 777
<div id='show_585691419' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_585691419'>/tmp/dir_test//gltmpdir.20496.FP8R/e9fQ/dvUR
[usatlas1@acas0068 execute]$ env | grep X509
X509_USER_PROXY=/tmp/dir_test/x509_user_proxy

Thanks,
Xin
-- by xinzhao at Thu Dec 04 16&#58;35&#58;39 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905
</div><script type='text/javascript'>
        $('#show_585691419').click(function() {
            $('#detail_585691419').slideDown("normal");
            $('#show_585691419').hide();
            $('#hide_585691419').show();
        });
        $('#hide_585691419').click(function() {
            $('#detail_585691419').slideUp();
            $('#hide_585691419').hide();
            $('#show_585691419').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='23029#1417685665'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-04T09:34:25+00:00">Dec 4, 2014 09:34 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417685665">&nbsp;</a></div><pre>Now if I look at a logfile of an analysis job running at BNL without glexec (<a href='http&#58;//gridui21.usatlas.bnl.gov&#58;25880/2014-12-02/ANALY_BNL_LONG-gridgk05/3700840.9.out' target='_blank' rel='nofollow'>http&#58;//gridui21.usatlas.bnl.gov&#58;25880/2014-12-02/ANALY_BNL_LONG-gridgk05/3700840.9.out</a>) &#58;

03 Dec 09&#58;27&#58;02| ATLASExperim| Executing command&#58; . /cvmfs/atlas.cern.ch/repo/sw/arc/client/latest/slc6/x86_64/setup.sh;arcproxy -i vomsACvalidityLeft
03 Dec 09&#58;27&#58;02| ATLASExperim| ec=32512 output=arcproxy&#58; error while loading shared libraries&#58; libgiomm-2.4.so.1&#58; cannot open shared object file&#58; No such file or directory
03 Dec 09&#58;27&#58;02| ATLASExperim| !!WARNING!!2998!! Arcproxy failed&#58; arcproxy&#58; error while loading shared libraries&#58; libgiomm-2.4.so.1&#58; cannot open shared object file&#58; No such file or directory
03 Dec 09&#58;27&#58;02| ATLASExperim| Will try voms-proxy-info instead
03 Dec 09&#58;27&#58;02| ATLASExperim| Executing command&#58; source /afs/usatlas.bnl.gov/osg/pandasetup/@sys/current/envsetup.sh;export X509_USER_PROXY=/home/condor/local/atlas/execute/dir_589/x509_user_proxy;voms-proxy-info -actimeleft --file $X509_USER_PROXY
03 Dec 09&#58;27&#58;02| ATLASExperim| ec=0 output=302610
03 Dec 09&#58;27&#58;03| ATLASExperim| Voms proxy verified (302610s)
03 Dec 09&#58;27&#58;03| ATLASExperim| Voms proxy verified using voms-proxy-info

I can see that the X509_USER_PROXY is properly set&#58;  export X509_USER_PROXY=/home/condor/local/atlas/execute/dir_589/x509_user_proxy

This is very strange...

I can also see from your logfile ( <a href='http&#58;//www.usatlas.bnl.gov/' target='_blank' rel='nofollow'>http&#58;//www.usatlas.bnl.gov/</a>~xinzhao/dbg/glexec-test/5574938.0.out) the following two proxy env vars&#58;

CHANGED_X509=/home/usatlas1/.globus/usatlas1/.globus/job/gridtest02/16434079751237940396.9236900694580052359/x509_user_proxy
X509_USER_PROXY=/home/condor/local/atlas/execute/dir_14381/x509_user_proxy

Is this CHANGED_X509 env var BNL and/or OSG specific? Couldn&#39;t find this env var on any other site that I&#39;m testing.

Thanks.

Cheers, Eddie

-- by Edward Karavakis at Thu Dec 04 09&#58;34&#58;08 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1417685549'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-04T09:32:29+00:00">Dec 4, 2014 09:32 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417685549">&nbsp;</a></div><pre>Hi Xin,

mkgltempdir creates the temp dir, the uid switch does happen but the X509_USER_PROXY env var is completely null for some very strange reason..

Basically, when checking the validity of the proxy, it is supposed to do the following (copy/paste from a logfile from a glexec job running at PIC that everything is working properly)&#58;

03 Dec 11&#58;24&#58;58| ATLASExperim| Executing command&#58; export X509_USER_PROXY=/home/tmp/35941226.pbs04.pic.es/gltmpdir.57854.2wD7/Q5NQ/KWW3/user_proxy;. /cvmfs/atlas.cern.ch/repo/sw/arc/client/latest/slc6/x86_64/setup.sh;arcproxy -i vomsACvalidityLeft

But it does the following instead at BNL&#58;
---------------------------
28 Nov 00&#58;26&#58;14| ATLASExperim| Executing command&#58; . /cvmfs/atlas.cern.ch/repo/sw/arc/client/latest/slc6/x86_64/setup.sh;arcproxy -i vomsACvalidityLeft
28 Nov 00&#58;26&#58;14| ATLASExperim| ec=32512 output=arcproxy&#58; error while loading shared libraries&#58; libgiomm-2.4.so.1&#58; cannot open shared object file&#58; No such file or directory
28 Nov 00&#58;26&#58;14| ATLASExperim| !!WARNING!!2998!! Arcproxy failed&#58; arcproxy&#58; error while loading shared libraries&#58; libgiomm-2.4.so.1&#58; cannot open shared object file&#58; No such file or directory
28 Nov 00&#58;26&#58;14| ATLASExperim| Will try voms-proxy-info instead
28 Nov 00&#58;26&#58;14| ATLASExperim| Executing command&#58; source /afs/usatlas.bnl.gov/osg/pandasetup/@sys/current/envsetup.sh;voms-proxy-info -actimeleft --file $X509_USER_PROXY
28 Nov 00&#58;26&#58;14| ATLASExperim| ec=256 output=voms-proxy-info&#58; option &#39;--file&#39; requires an argument
28 Nov 00&#58;26&#58;14| futil.py    | WARNING&#58; Abnormal termination&#58; ecode=256, ec=1, sig=-, len(etext)=53
28 Nov 00&#58;26&#58;14| futil.py    | WARNING&#58; Error message&#58; voms-proxy-info&#58; option &#39;--file&#39; requires an argument
28 Nov 00&#58;26&#58;14| ATLASExperim| !!WARNING!!2999!! Voms proxy certificate check failure&#58; 256, voms-proxy-info&#58; option &#39;--file&#39; requires an argument
28 Nov 00&#58;26&#58;14| ATLASExperim| Executing command&#58; source /afs/usatlas.bnl.gov/osg/pandasetup/@sys/current/envsetup.sh;grid-proxy-info -exists -valid 48&#58;00
28 Nov 00&#58;26&#58;14| futil.py    | WARNING&#58; Abnormal termination&#58; ecode=256, ec=1, sig=-, len(etext)=272
28 Nov 00&#58;26&#58;14| futil.py    | WARNING&#58; Error message&#58;  ERROR&#58; Couldn&#39;t find a valid proxy.        globus_sysconfig&#58; Could not find a valid proxy certificate file location globus_sysconfig&#58; Error with key filename globus_sysconfig&#58; File does not exist&#58; /tmp/x509up_u6435 is not a valid file  Use -debug for further information.
28 Nov 00&#58;26&#58;14| ATLASExperim| !!WARNING!!2999!! Grid proxy certificate does not exist or is too short&#58; 256,
ERROR&#58; Couldn&#39;t find a valid proxy.
globus_sysconfig&#58; Could not find a valid proxy certificate file location
globus_sysconfig&#58; Error with key filename
globus_sysconfig&#58; File does not exist&#58; /tmp/x509up_u6435 is not a valid file

Use -debug for further information.
---------------------------

The missing &#39;export X509_USER_PROXY=/blah/blah&#39; is coming from the following code in the main pilot (nothing to do with the glexec part of the pilot code)&#58;
if os.environ.has_key(&#39;X509_USER_PROXY&#39;)&#58;
envsetup += &#34;export X509_USER_PROXY=%s;&#34; % (os.environ[&#39;X509_USER_PROXY&#39;])

<div id='show_328045716' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_328045716'>So it&#39;s clear that the X509_USER_PROXY env variable is not set at all after the uid switch that make me guess that something might be wrong with glexec and/or the glexec util scripts at BNL...

-- by Edward Karavakis at Thu Dec 04 09&#58;31&#58;37 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a>
</div><script type='text/javascript'>
        $('#show_328045716').click(function() {
            $('#detail_328045716').slideDown("normal");
            $('#show_328045716').hide();
            $('#hide_328045716').show();
        });
        $('#hide_328045716').click(function() {
            $('#detail_328045716').slideUp();
            $('#hide_328045716').hide();
            $('#show_328045716').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='23029#1417620685'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-03T15:31:25+00:00">Dec 3, 2014 03:31 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417620685">&nbsp;</a></div><pre>Hi Eddie,

From the pilot log
(<a href='http&#58;//www.usatlas.bnl.gov/' target='_blank' rel='nofollow'>http&#58;//www.usatlas.bnl.gov/</a>~xinzhao/dbg/glexec-test/5574938.0.out), I see this
line&#58;

28 Nov 00&#58;24&#58;04| pilot.py    | argParser arguments&#58; [&#39;-w&#39;, &#39;<a href='https&#58;//pandaserver.cern.ch&#39' target='_blank' rel='nofollow'>https&#58;//pandaserver.cern.ch&#39</a>;, &#39;-p&#39;, &#39;25443&#39;, &#39;-u&#39;, &#39;user&#39;, &#39;-s&#39;, &#39;ANALY_BNL_GLEXEC&#39;, &#39;-h&#39;, &#39;ANALY_BNL_GLEXEC&#39;, &#39;-d&#39;, &#39;/tmp&#39;]

I��believe these are the arguments passed to pilot at start time.

Thanks,
Xin
-- by xinzhao at Wed Dec 03 15&#58;30&#58;58 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1417617484'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-03T14:38:04+00:00">Dec 3, 2014 02:38 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417617484">&nbsp;</a></div><pre>Hi Xin,

I&#39;m trying to track down the reason for this weird error. Could you please tell me how the pilot is being started from the APF? Basically I&#39;m interested in knowing the arguments that are being passed when starting the pilot. Do you provide &#39;-t True&#39; by any chance? If yes, could you please remove this argument for a while to see if it will work? In any case the validity of the proxy is also validated at a previous stage.

Thank you.
Cheers, Eddie

-- by Edward Karavakis at Wed Dec 03 14&#58;37&#58;37 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1417454158'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-01T17:15:58+00:00">Dec 1, 2014 05:15 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417454158">&nbsp;</a></div><pre>Hi Xin,

Indeed this is problematic as I am unable to see what is happening. So far I could see everything from the APF logs at <a href='http&#58;//apfmon.lancs.ac.uk' target='_blank' rel='nofollow'>http&#58;//apfmon.lancs.ac.uk</a> but for some reason these do not contain anything useful for ANALY_BNL_GLEXEC.

In any case, this &#39;not a valid file&#39; error is happening in the normal pilot process after the call to the glexec mechanism. I need to investigate further why this is happening..

Thanks, Eddie

-- by Edward Karavakis at Mon Dec 01 17&#58;15&#58;10 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1417454007'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-01T17:13:27+00:00">Dec 1, 2014 05:13 PM UTC</time> by <b>echism</b><a class="anchor" name="1417454007">&nbsp;</a></div><pre>Hello,

Is there any update on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='23029#1417269255'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-29T13:54:15+00:00">Nov 29, 2014 01:54 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417269255">&nbsp;</a></div><pre>Hi Eddie,

One thing to understand is why pilot can&#39;t update panda-server with job status,
resulting in &#34;Sent job didn&#39;t receive reply from pilot within 30 min&#34;, is that
because of the &#34;/tmp/x509up_u6435 is not a valid file&#34; error ?
If this issue can be corrected, you will be able to see job log files from
panda server directly...

Thanks,
Xin
-- by xinzhao at Sat Nov 29 13&#58;53&#58;54 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1417181931'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-28T13:38:51+00:00">Nov 28, 2014 01:38 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417181931">&nbsp;</a></div><pre>Thank you Xin. I can see two issues&#58;
First of all, the panda server does not allow the pilot to retrieve any proxies maybe because the pliot is running with John Hover&#39;s certificate&#58;

28 Nov 00&#58;26&#58;11| glexec_utils| !!WARNING!! We did NOT get any proxy from panda_server! We will use the one that started the pilot!!!!!!!!!!!!!!!!!!!!!!!
28 Nov 00&#58;26&#58;11| glexec_utils| copied original pilot proxy in /home/tmp/Panda_Pilot_14524_1417134244/tmpbbet2z/user_proxy

I have notified Tadashi to whilelist John Hover&#39;s cert from the panda server.

Secondly, mkgltempdir runs fine, the glexec wrapper scripts run fine but something seems to be wrong with the certificate according to&#58;

globus_sysconfig&#58; File does not exist&#58; /tmp/x509up_u6435 is not a valid file

Attaching full log&#58;
----
28 Nov 00&#58;26&#58;14| ATLASExperim| Executing command&#58; source /afs/usatlas.bnl.gov/osg/pandasetup/@sys/current/envsetup.sh;voms-proxy-info -actimeleft --file $X509_USER_PROXY
28 Nov 00&#58;26&#58;14| ATLASExperim| ec=256 output=voms-proxy-info&#58; option &#39;--file&#39; requires an argument
28 Nov 00&#58;26&#58;14| futil.py    | WARNING&#58; Abnormal termination&#58; ecode=256, ec=1, sig=-, len(etext)=53
28 Nov 00&#58;26&#58;14| futil.py    | WARNING&#58; Error message&#58; voms-proxy-info&#58; option &#39;--file&#39; requires an argument
28 Nov 00&#58;26&#58;14| ATLASExperim| !!WARNING!!2999!! Voms proxy certificate check failure&#58; 256, voms-proxy-info&#58; option &#39;--file&#39; requires an argument
28 Nov 00&#58;26&#58;14| ATLASExperim| Executing command&#58; source /afs/usatlas.bnl.gov/osg/pandasetup/@sys/current/envsetup.sh;grid-proxy-info -exists -valid 48&#58;00
28 Nov 00&#58;26&#58;14| futil.py    | WARNING&#58; Abnormal termination&#58; ecode=256, ec=1, sig=-, len(etext)=272
28 Nov 00&#58;26&#58;14| futil.py    | WARNING&#58; Error message&#58;  ERROR&#58; Couldn&#39;t find a valid proxy.        globus_sysconfig&#58; Could not find a valid proxy certificate file location globus_sysconfig&#58; Error with key filename globus_sysconfig&#58; File does not exist&#58; /tmp/x509up_u6435 is not a valid file  Use -debug for further information.
28 Nov 00&#58;26&#58;14| ATLASExperim| !!WARNING!!2999!! Grid proxy certificate does not exist or is too short&#58; 256,
ERROR&#58; Couldn&#39;t find a valid proxy.
globus_sysconfig&#58; Could not find a valid proxy certificate file location
globus_sysconfig&#58; Error with key filename
globus_sysconfig&#58; File does not exist&#58; /tmp/x509up_u6435 is not a valid file

Use -debug for further information.
----

No idea why this is happening... checking..

Thanks.
Eddie
<div id='show_679723732' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_679723732'>
-- by Edward Karavakis at Fri Nov 28 13&#58;37&#58;54 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a>
</div><script type='text/javascript'>
        $('#show_679723732').click(function() {
            $('#detail_679723732').slideDown("normal");
            $('#show_679723732').hide();
            $('#hide_679723732').show();
        });
        $('#hide_679723732').click(function() {
            $('#detail_679723732').slideUp();
            $('#hide_679723732').hide();
            $('#show_679723732').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='23029#1417179840'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-28T13:04:00+00:00">Nov 28, 2014 01:04 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417179840">&nbsp;</a></div><pre>Hi Eddie,

Here is another one&#58;
<a href='http&#58;//www.usatlas.bnl.gov/' target='_blank' rel='nofollow'>http&#58;//www.usatlas.bnl.gov/</a>~xinzhao/dbg/glexec-test/5574938.0.out

Hope it helps,
Xin
-- by xinzhao at Fri Nov 28 13&#58;03&#58;15 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1417178808'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-28T12:46:48+00:00">Nov 28, 2014 12:46 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417178808">&nbsp;</a></div><pre>Hi Xin,

Thank you for this. Unfortunately I cannot find any log file of a job running at <a href='http&#58;//apfmon.lancs.ac.uk/q/ANALY_BNL_GLEXEC' target='_blank' rel='nofollow'>http&#58;//apfmon.lancs.ac.uk/q/ANALY_BNL_GLEXEC</a> and it&#39;s impossible for me to figure out what is wrong.. Would it be possible to send me once again a pilot output file from the APF host?

Thank you very much.

Cheers, Eddie

-- by Edward Karavakis at Fri Nov 28 12&#58;45&#58;47 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1417107241'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-27T16:54:01+00:00">Nov 27, 2014 04:54 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417107241">&nbsp;</a></div><pre>Hi Eddie,

Yes, the env wasn&#39;t set in the job environment correctly, I just corrected it.
Let&#39;s see how the new jobs go ...

Thanks,
Xin
-- by xinzhao at Thu Nov 27 16&#58;53&#58;37 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1417106607'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-27T16:43:27+00:00">Nov 27, 2014 04:43 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417106607">&nbsp;</a></div><pre>Hi Xin,

Thank you very much for this. Could you please tell me the following env variables on acas0067.usatalas.bnl.gov &#58;

OSG_GLEXEC_LOCATION
GLEXEC_LOCATION

?

I think one of these two are set but are empty or not pointing to /usr/sbin/glexec.

This&#58;

26 Nov 10&#58;30&#58;43| glexec_utils| executable&#58; export GLEXEC_ENV=&#39;glexec_wrapenv.pl&#39;;                None glexec_unwrapenv.pl -- &#39;cd /home/condor/local/atlas/execute/dir_5141/gltmpdir.5474.gWD7/CVW2

is supposed to be&#58; /usr/sbin/glexec instead of &#39;None&#39;.

We first look for the OSG_GLEXEC_LOCATION and if it is set, we use that. If it is not set, then we check for GLEXEC_LOCATION and use that one.

Thank you.

Cheers, Eddie

-- by Edward Karavakis at Thu Nov 27 16&#58;43&#58;08 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1417100530'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-27T15:02:10+00:00">Nov 27, 2014 03:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417100530">&nbsp;</a></div><pre>Hi Eddie,

The label is set to test, because the queue is now in &#34;test&#34; state. That&#39;s the
way it&#39;s supposed to be, and doesn&#39;t seem to cause problem, because HC test
jobs could start to run.

Looking at this job&#58;
<a href='http&#58;//panda.cern.ch/server/pandamon/query?job=2321336676' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch/server/pandamon/query?job=2321336676</a>

I managed to find its pilot output file from APF host, which is copied here&#58;
<a href='http&#58;//www.usatlas.bnl.gov/' target='_blank' rel='nofollow'>http&#58;//www.usatlas.bnl.gov/</a>~xinzhao/dbg/glexec-test/5557001.2.out

The job failed, but I can see it passed the mkgltempdir step...

Hope it helps,
Xin
-- by xinzhao at Thu Nov 27 15&#58;01&#58;44 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1417011046'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-26T14:10:46+00:00">Nov 26, 2014 02:10 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417011046">&nbsp;</a></div><pre>Hi Xin,

I just realised that the pilots are started with prodSourceLabel=test , could you please start them with prodSourceLabel=user? The hammercloud jobs are using the &#39;user&#39; prodsourcelabel.

Thank you.
Eddie

-- by Edward Karavakis at Wed Nov 26 14&#58;09&#58;43 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1416932111'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-25T16:15:11+00:00">Nov 25, 2014 04:15 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416932111">&nbsp;</a></div><pre>Hi Xin,

Perfect, thanks for the update. I have just scheduled a new hammercloud stress test on the ANALY_BNL_GLEXEC queue&#58; <a href='http&#58;//hammercloud.cern.ch/hc/app/atlas/test/20045989/' target='_blank' rel='nofollow'>http&#58;//hammercloud.cern.ch/hc/app/atlas/test/20045989/</a>
Cheers, eddie

-- by Edward Karavakis at Tue Nov 25 16&#58;13&#58;56 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1416931481'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-25T16:04:41+00:00">Nov 25, 2014 04:04 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416931481">&nbsp;</a></div><pre>Hi Eddie,

These commands work fine now with the new version, from command line. I want to
see some jobs succeed through the whole workflow, in case we run into some
other package issues, before pushing it to all the WNs.
Hopefully some job payload can be activated and run soon on these 4 nodes.

Thanks,
Xin
-- by xinzhao at Tue Nov 25 16&#58;04&#58;04 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1416928686'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-25T15:18:06+00:00">Nov 25, 2014 03:18 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416928686">&nbsp;</a></div><pre>Hi Xin,

I wanted to ask you if you could try running once again the following at any of the 4 test WNs&#58;
setenv X509_USER_PROXY /home/condor/local/atlas/execute/dir_881/x509_user_proxy
setenv GLEXEC_CLIENT_CERT /tmp/x509up_u7631
setenv GLEXEC_SOURCE_PROXY /tmp/x509up_u7631
echo $TMPDIR /home/condor/local/atlas/execute/dir_881
/usr/sbin/mkgltempdir -t 777

As mentioned yesterday, I have submitted hammercloud stress tests but as you can see at [1], none of the 163 jobs made it into the &#39;running&#39; state at the ANALY_BNL_GLEXEC queue.

Thanks, Eddie

[1] <a href='http&#58;//hammercloud.cern.ch/hc/app/atlas/test/20044831/' target='_blank' rel='nofollow'>http&#58;//hammercloud.cern.ch/hc/app/atlas/test/20044831/</a>

-- by Edward Karavakis at Tue Nov 25 15&#58;17&#58;00 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1416928117'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-25T15:08:37+00:00">Nov 25, 2014 03:08 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416928117">&nbsp;</a></div><pre>Hi Eddie,

What do you mean by &#34;rerun the previous test&#34; ? I thought you are doing that
... The new version of mkgltempdir is installed on all the 4 test WNs, where
the pilots for ANALY_BNL_GLEXEC are landed now.
The message from the pilot log indicates there are no activated job payload for
that queue. Someone will need to define some glexec jobs to submit to this
queue, I guess.

Thanks,
Xin
-- by xinzhao at Tue Nov 25 15&#58;08&#58;14 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1416907437'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-25T09:23:57+00:00">Nov 25, 2014 09:23 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416907437">&nbsp;</a></div><pre>Hi Xin,

I am checking <a href='http&#58;//apfmon.lancs.ac.uk/q/ANALY_BNL_GLEXEC' target='_blank' rel='nofollow'>http&#58;//apfmon.lancs.ac.uk/q/ANALY_BNL_GLEXEC</a> but I can not find any running job... the pilots exit with &#39;!!FINISHED!!0!!Dispatcher has no jobs&#39;.

Would it be possible to rerun the previous exercise with mkgltempdir on any of the 4 test WNs? Thank you.

Cheers, Eddie

-- by Edward Karavakis at Tue Nov 25 09&#58;23&#58;31 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1416826624'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-24T10:57:04+00:00">Nov 24, 2014 10:57 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416826624">&nbsp;</a></div><pre>Hi Xin,

Sorry for my late reply but I was quite busy with other tasks. I have scheduled a hammercloud stress test against all the atlas tier1s. I will let you know how it goes with ANALY_BNL_GLEXEC.

Thank you.

Cheers, Eddie

-- by Edward Karavakis at Mon Nov 24 10&#58;56&#58;42 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1416603218'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-21T20:53:38+00:00">Nov 21, 2014 08:53 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416603218">&nbsp;</a></div><pre>Hello,

We update 4 test WNs to this new version, and right now all glexec pilots are
directed to only those nodes. Please give it a try again.

Thanks,
Xin
-- by xinzhao at Fri Nov 21 20&#58;52&#58;50 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1416513912'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-20T20:05:12+00:00">Nov 20, 2014 08:05 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416513912">&nbsp;</a></div><pre>Hi Xin,
you can take it from EMI&#58;

<a href='http&#58;//emisoft.web.cern.ch/emisoft/dist/EMI/3/' target='_blank' rel='nofollow'>http&#58;//emisoft.web.cern.ch/emisoft/dist/EMI/3/</a> --&#62;

<a href='http&#58;//emisoft.web.cern.ch/emisoft/dist/EMI/3/sl6/x86_64/updates/mkgltempdir-0.0.4-1.el6.noarch.rpm' target='_blank' rel='nofollow'>http&#58;//emisoft.web.cern.ch/emisoft/dist/EMI/3/sl6/x86_64/updates/mkgltempdir-0.0.4-1.el6.noarch.rpm</a>

-- by Maarten Litmaath at Thu Nov 20 20&#58;04&#58;55 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1416513231'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-20T19:53:51+00:00">Nov 20, 2014 07:53 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416513231">&nbsp;</a></div><pre>Hi Maarten,

Which repo has this new version? I got the 0.0.3 version from the OSG repo. We
can ask OSG to upgrade, but that will take a while.

Thanks,
Xin
-- by xinzhao at Thu Nov 20 19&#58;53&#58;34 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1416508449'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-20T18:34:09+00:00">Nov 20, 2014 06:34 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416508449">&nbsp;</a></div><pre>Hi Xin,
the problem appears to be due to the old version of mkgltempdir
that your WN have; we are running into this old bug&#58;

<a href='https&#58;//ggus.eu/?mode=ticket_info&ticket_id=92324' target='_blank' rel='nofollow'>https&#58;//ggus.eu/?mode=ticket_info&ticket_id=92324</a>

Can you update to version 0.0.4?  Thanks!

-- by Maarten Litmaath at Thu Nov 20 18&#58;33&#58;57 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1416506706'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-20T18:05:06+00:00">Nov 20, 2014 06:05 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416506706">&nbsp;</a></div><pre>Hi all,
in this particular case &#34;umask 067&#34; and/or &#34;chmod 710&#34; would work,
but in general one cannot be certain that the glexec target account
will be in the same UNIX group as that of the pilot account.

-- by Maarten Litmaath at Thu Nov 20 18&#58;04&#58;12 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1416506409'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-20T18:00:09+00:00">Nov 20, 2014 06:00 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416506409">&nbsp;</a></div><pre>Hi all,
the trouble is with this directory&#58;

drwx------ 3 usatlas1 usatlas 4096 Nov 19 10&#58;15
/home/condor/local/atlas/execute/dir_20910/gltmpdir.29757.XONO

It is not accessible for usatlas2.

This could be due to a &#34;umask&#34; that is set to 077 --&#62; in that case
we could try setting it temporarily to 066 such that the directory
may have mode 711 in the end, thereby allowing the access needed.

We also could do a &#34;chmod 711&#34; in the right place, that may be better.

-- by Maarten Litmaath at Thu Nov 20 17&#58;59&#58;15 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1416505208'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-20T17:40:08+00:00">Nov 20, 2014 05:40 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416505208">&nbsp;</a></div><pre>Hi Xin,

Could you please export TMPDIR to /tmp and redo it once again? Just to see if it will work or not as I am using a newer version of mkgltempdir (0.0.4-1).

export TMPDIR=/tmp
/usr/sbin/mkgltempdir -t 777

Thanks! Eddie

-- by Edward Karavakis at Thu Nov 20 17&#58;39&#58;10 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1416410982'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-19T15:29:42+00:00">Nov 19, 2014 03:29 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416410982">&nbsp;</a></div><pre>Hi Maarten and all,

Below is the output of the script, showing the ownership and permission of the
parent dirs&#58;

drwx------ 2 usatlas2 usatlas 4096 Nov 19 10&#58;15
/home/condor/local/atlas/execute/dir_20910/gltmpdir.29757.XONO/P1eT/7h5c
drwxrwxrwt 3 usatlas1 usatlas 4096 Nov 19 10&#58;15
/home/condor/local/atlas/execute/dir_20910/gltmpdir.29757.XONO/P1eT
drwx------ 3 usatlas1 usatlas 4096 Nov 19 10&#58;15
/home/condor/local/atlas/execute/dir_20910/gltmpdir.29757.XONO
drwxr-xr-x 5 usatlas1 usatlas 12288 Nov 19 10&#58;15
/home/condor/local/atlas/execute/dir_20910
drwxr-xr-x 10 condor root 4096 Nov 19 09&#58;09 /home/condor/local/atlas/execute
drwxr-xr-x 3 condor root 4096 Jun 24 15&#58;29 /home/condor/local/atlas
drwxr-xr-x 3 condor root 4096 May 28 2013 /home/condor/local
drwxr-xr-x 3 condor root 4096 Jun 24 15&#58;29 /home/condor
drwxrwxrwt. 8 root root 4096 May 30 2013 /home

Thanks,
Xin
-- by xinzhao at Wed Nov 19 15&#58;29&#58;20 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1416349671'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-18T22:27:51+00:00">Nov 18, 2014 10:27 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416349671">&nbsp;</a></div><pre>Hi all,
I suspect one of the leading directories has restrictive permissions
that then result in the access error&#58;

/bin/chmod&#58; cannot access &#39;/home/condor/local/atlas/execute/
dir_5798/gltmpdir.6301.Um1S/wd0o/aGI1&#39;&#58; Permission denied

We would need to see the ownership and mode of each of the
leading directories&#58;

-----------------------------------------------------------------------------
#!/bin/sh

d=/home/condor/local/atlas/execute/dir_5798/gltmpdir.6301.Um1S/wd0o/aGI1

while [ &#34;x$d&#34; != x ]
do
ls -ld &#34;$d&#34;
d=${d%/*}
done
-----------------------------------------------------------------------------

The PanDA code may have to explicitly &#34;chmod a+x&#34; a few of them.

-- by Maarten Litmaath at Tue Nov 18 22&#58;27&#58;36 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1416348447'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-18T22:07:27+00:00">Nov 18, 2014 10:07 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416348447">&nbsp;</a></div><pre>Hi Eddie,

The different proxies used did make the difference. If I use the same proxy for
all the three environment variables, it can create the dir under
/home/condor/.../dir_xxx.

But when I switch to use different proxies, I get the same errors.

[usatlas1@acas1178 /tmp]$ setenv X509_USER_PROXY
/home/condor/local/atlas/execute/dir_881/x509_user_proxy
[usatlas1@acas1178 /tmp]$ setenv GLEXEC_CLIENT_CERT /tmp/x509up_u7631
[usatlas1@acas1178 /tmp]$ setenv GLEXEC_SOURCE_PROXY /tmp/x509up_u7631
[usatlas1@acas1178 /tmp]$ echo $TMPDIR
/home/condor/local/atlas/execute/dir_881
[usatlas1@acas1178 /tmp]$ /usr/sbin/mkgltempdir -t 777
/bin/chmod&#58; cannot access
&#96;/home/condor/local/atlas/execute/dir_881/gltmpdir.29364.R0A5/OdEV/Jxni&#39;&#58;
Permission denied
Cannot set target mode 0777 for
/home/condor/local/atlas/execute/dir_881/gltmpdir.29364.R0A5/OdEV/Jxni&#58; 1
/bin/rmdir&#58; failed to remove
&#96;/home/condor/local/atlas/execute/dir_881/gltmpdir.29364.R0A5/OdEV&#39;&#58; Directory
not empty
/bin/rmdir&#58; failed to remove
&#96;/home/condor/local/atlas/execute/dir_881/gltmpdir.29364.R0A5&#39;&#58; Directory not
empty
Cleanup attempted, exiting.

Here is what&#39;s from the system log&#58;
Nov 18 16&#58;44&#58;41 acas1178 glexec[29381]&#58; lcmaps&#58;
lcmaps_plugin_scas_client-plugin_run()&#58; User &#34;/DC=com/DC=DigiCert-Grid/O=Open
Science Grid/OU=People/CN=Xin Zhao 87&#34; with first FQAN
&#34;/atlas/usatlas/Role=software/Capability=NULL&#34; Permitted at endpoint
&#34;<a href='https&#58;//gums.racf.bnl.gov&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort&#34' target='_blank' rel='nofollow'>https&#58;//gums.racf.bnl.gov&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort&#34</a>;
Nov 18 16&#58;44&#58;42 acas1178 glexec.mon[29386#29381]&#58; Started, target uid 6436
<div id='show_888395558' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_888395558'>Nov 18 16&#58;44&#58;42 acas1178 glexec.mon[29386#29381]&#58; Used DN&#58;
&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Xin Zhao 87&#34;
Nov 18 16&#58;44&#58;42 acas1178 glexec.mon[29386#29381]&#58; Used VO&#58; &#34;atlas&#34; Issuer&#58;
&#34;/DC=ch/DC=cern/OU=computers/CN=voms.cern.ch&#34;
Nov 18 16&#58;44&#58;42 acas1178 glexec.mon[29386#29381]&#58; Used FQAN&#58;
&#34;/atlas/usatlas/Role=software/Capability=NULL&#34;
Nov 18 16&#58;44&#58;42 acas1178 glexec.mon[29386#29381]&#58; Used FQAN&#58;
&#34;/atlas/lcg1/Role=NULL/Capability=NULL&#34;
Nov 18 16&#58;44&#58;42 acas1178 glexec.mon[29386#29381]&#58; Used FQAN&#58;
&#34;/atlas/usatlas/Role=NULL/Capability=NULL&#34;
Nov 18 16&#58;44&#58;42 acas1178 glexec.mon[29386#29381]&#58; Used FQAN&#58;
&#34;/atlas/Role=NULL/Capability=NULL&#34;
Nov 18 16&#58;44&#58;42 acas1178 glexec[29381]&#58; lcmaps&#58; LCMAPS CRED FINAL&#58;
DN&#58;&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Xin Zhao
87&#34;-&#62;mapped
uid&#58;&#39;6436&#39;,pgid&#58;&#39;31152&#39;,sgid&#58;&#39;6436&#39;,sgid&#58;&#39;6437&#39;,sgid&#58;&#39;31152&#39;,sgid&#58;&#39;65000&#39;,sgid&#58;&#39;69907&#39;
Nov 18 16&#58;44&#58;42 acas1178 glexec[29381]&#58;
real_user(usatlas1),real_group(usatlas)-&#62;mapped_user(usatlas2),mapped_group(usatlas)
cwd&#58; &#34;/usatlas/grid/usatlas2&#34; cmd&#58; &#34;/bin/mktemp&#34; (=&#34;/bin/mktemp&#34;) args&#58; &#34;-d
/home/condor/local/atlas/execute/dir_881/gltmpdir.29364.R0A5/OdEV/XXXX&#34;
Nov 18 16&#58;44&#58;42 acas1178 glexec[29401]&#58; lcmaps&#58;
lcmaps_plugin_scas_client-plugin_run()&#58; User &#34;/DC=com/DC=DigiCert-Grid/O=Open
Science Grid/OU=People/CN=Xin Zhao 87&#34; with first FQAN
&#34;/atlas/usatlas/Role=software/Capability=NULL&#34; Permitted at endpoint
&#34;<a href='https&#58;//gums.racf.bnl.gov&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort&#34' target='_blank' rel='nofollow'>https&#58;//gums.racf.bnl.gov&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort&#34</a>;
Nov 18 16&#58;44&#58;42 acas1178 glexec.mon[29405#29401]&#58; Started, target uid 6436
Nov 18 16&#58;44&#58;42 acas1178 glexec.mon[29405#29401]&#58; Used DN&#58;
&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Xin Zhao 87&#34;
Nov 18 16&#58;44&#58;42 acas1178 glexec.mon[29405#29401]&#58; Used VO&#58; &#34;atlas&#34; Issuer&#58;
&#34;/DC=ch/DC=cern/OU=computers/CN=voms.cern.ch&#34;
Nov 18 16&#58;44&#58;42 acas1178 glexec.mon[29405#29401]&#58; Used FQAN&#58;
&#34;/atlas/usatlas/Role=software/Capability=NULL&#34;
Nov 18 16&#58;44&#58;42 acas1178 glexec.mon[29405#29401]&#58; Used FQAN&#58;
&#34;/atlas/lcg1/Role=NULL/Capability=NULL&#34;
Nov 18 16&#58;44&#58;42 acas1178 glexec.mon[29405#29401]&#58; Used FQAN&#58;
&#34;/atlas/usatlas/Role=NULL/Capability=NULL&#34;
Nov 18 16&#58;44&#58;42 acas1178 glexec.mon[29405#29401]&#58; Used FQAN&#58;
&#34;/atlas/Role=NULL/Capability=NULL&#34;
Nov 18 16&#58;44&#58;42 acas1178 glexec[29401]&#58; lcmaps&#58; LCMAPS CRED FINAL&#58;
DN&#58;&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Xin Zhao
87&#34;-&#62;mapped
uid&#58;&#39;6436&#39;,pgid&#58;&#39;31152&#39;,sgid&#58;&#39;6436&#39;,sgid&#58;&#39;6437&#39;,sgid&#58;&#39;31152&#39;,sgid&#58;&#39;65001&#39;,sgid&#58;&#39;69907&#39;
Nov 18 16&#58;44&#58;42 acas1178 glexec[29401]&#58;
real_user(usatlas1),real_group(usatlas)-&#62;mapped_user(usatlas2),mapped_group(usatlas)
cwd&#58; &#34;/usatlas/grid/usatlas2&#34; cmd&#58; &#34;/bin/chmod&#34; (=&#34;/bin/chmod&#34;) args&#58; &#34;0777
/home/condor/local/atlas/execute/dir_881/gltmpdir.29364.R0A5/OdEV/Jxni&#34;
Nov 18 16&#58;45&#58;42 acas1178 glexec.mon[29386#29381]&#58; Terminated, CPU user 0 system
0
Nov 18 16&#58;45&#58;42 acas1178 glexec.mon[29405#29401]&#58; Terminated, CPU user 0 system
0

As you can see, it tried to create subdir under
/home/condor/local/atlas/execute/dir_881/, which succeed, the dir exists&#58;
[usatlas1@acas1178 /tmp]$ ls -lrt
/home/condor/local/atlas/execute/dir_881/gltmpdir.29364.R0A5/OdEV/
total 4
drwx------ 2 usatlas2 usatlas 4096 Nov 18 16&#58;44 Jxni

(usatlas2 is the local user account the second proxy is mapped to)

Then next, it tried to chmod on this subdir, but failed with permission denied
error.

It seems to me that, it can behave like the second user when creating the
subdir, but can&#39;t do that when running the chmod command. Is this expected to
work?

Thanks,

Xin
-- by xinzhao at Tue Nov 18 22&#58;07&#58;04 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905
</div><script type='text/javascript'>
        $('#show_888395558').click(function() {
            $('#detail_888395558').slideDown("normal");
            $('#show_888395558').hide();
            $('#hide_888395558').show();
        });
        $('#hide_888395558').click(function() {
            $('#detail_888395558').slideUp();
            $('#hide_888395558').hide();
            $('#show_888395558').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='23029#1416346188'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-18T21:29:48+00:00">Nov 18, 2014 09:29 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416346188">&nbsp;</a></div><pre>Hi Xin,

There are some differences, in my example the X509_USER_PROXY is different from the GLEXEC_SOURCE_PROXY and GLEXEC_CLIENT_CERT proxies - but I do not think it matters.

In my case, mkgltempdir tried to create a temp dir at &#39;/home/condor/local/atlas/execute/dir_5798/gltmpdir.6301.Um1S/wd0o/aGI1&#39;  and in your case in /tmp which is world writeable. It looks like it is just a filesystem permission issue.

Please do the following and try once again running the mkgltempdir command*&#58;

export TMPDIR=/home/condor/local/atlas/execute/dir_5798
/usr/sbin/mkgltempdir -t 777

* as it is in <a href='http&#58;//gridui20.usatlas.bnl.gov&#58;25880/2014-11-18/ANALY_BNL_GLEXEC-gridgk03/5172659.1.out' target='_blank' rel='nofollow'>http&#58;//gridui20.usatlas.bnl.gov&#58;25880/2014-11-18/ANALY_BNL_GLEXEC-gridgk03/5172659.1.out</a>
TEMP=/home/condor/local/atlas/execute/dir_5798
TMP=/home/condor/local/atlas/execute/dir_5798
TMPDIR=/home/condor/local/atlas/execute/dir_5798

Thank you.
Eddie

-- by Edward Karavakis at Tue Nov 18 21&#58;29&#58;20 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1416345253'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-18T21:14:13+00:00">Nov 18, 2014 09:14 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416345253">&nbsp;</a></div><pre>Hi Eddie,

It works for me, below is what I did&#58;

on acas1178&#58;

[root@acas1178 ~]# su usatlas1

[usatlas1@acas1178 /root]$ cp
/home/condor/local/atlas/execute/dir_20197/x509_user_proxy /tmp/ (randomly pick
a running job for the proxy)

[usatlas1@acas1178 /root]$ cd /tmp/

[usatlas1@acas1178 /tmp]$ echo $SHELL
/bin/tcsh

[usatlas1@acas1178 /tmp]$ setenv X509_USER_PROXY /tmp/x509_user_proxy

[usatlas1@acas1178 /tmp]$ setenv GLEXEC_SOURCE_PROXY /tmp/x509_user_proxy

[usatlas1@acas1178 /tmp]$ setenv GLEXEC_CLIENT_CERT /tmp/x509_user_proxy

[usatlas1@acas1178 /tmp]$ /usr/sbin/mkgltempdir -t 777
/tmp/gltmpdir.5977.poCg/uzK3/gyTB

[usatlas1@acas1178 /tmp]$ ls -lrt /tmp/gltmpdir.5977.poCg/uzK3/gyTB
total 0

Thanks,

Xin
-- by xinzhao at Tue Nov 18 21&#58;13&#58;55 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1416341202'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-18T20:06:42+00:00">Nov 18, 2014 08:06 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416341202">&nbsp;</a></div><pre>Hi Xin,

On acas1178, please do the following&#58;

su usatlas1
export X509_USER_PROXY=/home/condor/local/atlas/execute/dir_5798/x509_user_proxy
export GLEXEC_CLIENT_CERT=/home/tmp/Panda_Pilot_5870_1416323517/tmp4def9O/user_proxy
export GLEXEC_SOURCE_PROXY=/home/tmp/Panda_Pilot_5870_1416323517/tmp4def9O/user_proxy

and then run&#58;

/usr/sbin/mkgltempdir -t 777

Thank you.

Cheers, Eddie

-- by Edward Karavakis at Tue Nov 18 20&#58;05&#58;41 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1416338827'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-18T19:27:07+00:00">Nov 18, 2014 07:27 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416338827">&nbsp;</a></div><pre>Hi Eddie,

If you could provide a recipe for me to reproduce your error, that will be
great. The simple /usr/bin/id test works for me, but I am not familiar with the
mkgltempdir command ...

Thanks,
Xin
-- by xinzhao at Tue Nov 18 19&#58;26&#58;44 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1416326315'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-18T15:58:35+00:00">Nov 18, 2014 03:58 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416326315">&nbsp;</a></div><pre>Hi Xin,

Unfortunately, the mkgltempdir command is failing due to permission errors as you can see at <a href='http&#58;//gridui20.usatlas.bnl.gov&#58;25880/2014-11-18/ANALY_BNL_GLEXEC-gridgk03/5172659.1.out' target='_blank' rel='nofollow'>http&#58;//gridui20.usatlas.bnl.gov&#58;25880/2014-11-18/ANALY_BNL_GLEXEC-gridgk03/5172659.1.out</a>

working dir&#58;      /home/condor/local/atlas/execute/dir_5798
user&#58;             uid=6435(usatlas1) gid=31152(usatlas) groups=31152(usatlas),6435(usatlas1),6437(usatlas3),69907(atlas)
usatlas1&#58;*&#58;6435&#58;31152&#58;USAtlas 1 Grid Test, Dantong Yu #G#&#58;/usatlas/grid/usatlas1&#58;/bin/tcsh
.......
18 Nov 15&#58;12&#58;00| pilot.py    | glexec is set to test, we will hard-fail miserably in case of errors
18 Nov 15&#58;12&#58;00| glexec_utils| new proxy path is .. /home/tmp/Panda_Pilot_5870_1416323517/tmp4def9O/user_proxy
18 Nov 15&#58;12&#58;00| glexec_utils| wrote retrieved proxy file to /home/tmp/Panda_Pilot_5870_1416323517/tmp4def9O/user_proxy
18 Nov 15&#58;12&#58;00| glexec_utils| extending curring path to /home/tmp/Panda_Pilot_5870_1416323517
18 Nov 15&#58;12&#58;00| glexec_utils| sys path is ... [&#39;/home/condor/local/atlas/execute/dir_5798&#39;, &#39;/home/condor/local/atlas/execute/dir_5798&#39;, &#39;/afs/usatlas.bnl.gov/osg/pandasetup/@sys/lsm/1.4.8/lib&#39;, &#39;/cvmfs/atlas.cern.ch/repo/sw/ddm/rucio-clients/0.1.35/externals/kerberos/lib.slc6-x86_64-2.6&#39;, &#39;/cvmfs/atlas.cern.ch/repo/sw/ddm/rucio-clients/0.1.35/externals/kerberos/lib.slc6-i686-2.6&#39;, &#39;/cvmfs/atlas.cern.ch/repo/sw/ddm/rucio-clients/0.1.35/lib/python2.6/site-packages&#39;, &#39;/cvmfs/atlas.cern.ch/repo/sw/ddm/2.6.0/DQ2Clients/opt/dq2/lib&#39;, &#39;/afs/usatlas.bnl.gov/osg/wn-client/x8664_sl6/osg-wn-client-3.2.12/usr/lib/python2.6/site-packages&#39;, &#39;/afs/usatlas.bnl.gov/osg/wn-client/x8664_sl6/osg-wn-client-3.2.12/usr/lib64/python2.6/site-packages&#39;, &#39;/cvmfs/atlas.cern.ch/repo/sw/local/noarch/python-yampl/1.0/lib.linux-x86_64-2.6&#39;, &#39;/usr/lib64/python26.zip&#39;, &#39;/usr/lib64/python2.6&#39;, &#39;/usr/lib64/python2.6/plat-linux2&#39;, &#39;/usr/lib64/python2.6/lib-tk&#39;, &#39;/usr/lib64/python2.6/lib-old&#39;, &#39;/usr/lib64/python2.6/lib-dynload&#39;, &#39;/usr/lib64/python2.6/site-packages&#39;, &#39;/usr/lib64/python2.6/site-packages/gtk-2.0&#39;, &#39;/usr/lib/python2.6/site-packages&#39;, &#39;/home/condor/local/atlas/execute/dir_5798&#39;, &#39;/home/tmp/Panda_Pilot_5870_1416323517&#39;]
18 Nov 15&#58;12&#58;00| glexec_utils| folder is &#58; /usr/sbin/mkgltempdir
18 Nov 15&#58;12&#58;00| glexec_utils| executable&#58; /usr/sbin/mkgltempdir -t 777
18 Nov 15&#58;12&#58;01| glexec_utils| cmd&#58; /usr/sbin/mkgltempdir -t 777
18 Nov 15&#58;12&#58;01| glexec_utils| output&#58;
18 Nov 15&#58;12&#58;01| glexec_utils| error&#58; /bin/chmod&#58; cannot access &#39;/home/condor/local/atlas/execute/dir_5798/gltmpdir.6301.Um1S/wd0o/aGI1&#39;&#58; Permission denied
Cannot set target mode 0777 for /home/condor/local/atlas/execute/dir_5798/gltmpdir.6301.Um1S/wd0o/aGI1&#58; 1
/bin/rmdir&#58; failed to remove &#39;/home/condor/local/atlas/execute/dir_5798/gltmpdir.6301.Um1S/wd0o&#39;&#58; Directory not empty
/bin/rmdir&#58; failed to remove &#39;/home/condor/local/atlas/execute/dir_5798/gltmpdir.6301.Um1S&#39;&#58; Directory not empty
Cleanup attempted, exiting.

18 Nov 15&#58;12&#58;01| glexec_utils| status&#58; 1
18 Nov 15&#58;12&#58;01| glexec_utils| error! gltmpdir has failed

Cheers, Eddie

-- by Edward Karavakis at Tue Nov 18 15&#58;57&#58;55 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1416252160'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-17T19:22:40+00:00">Nov 17, 2014 07:22 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416252160">&nbsp;</a></div><pre>Hello,

We pushed the rpms to all WNs, please give it a try and let us know how it
goes...

Thanks,
Xin
-- by xinzhao at Mon Nov 17 19&#58;22&#58;19 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1416235982'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-17T14:53:02+00:00">Nov 17, 2014 02:53 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1416235982">&nbsp;</a></div><pre>Hello,

We pushed the rpms to one rack of WNs last week, just to make sure no big
surprise would happen. It looks fine, so we will push it to all WNs early this
week, probably on Monday.
I will let you know when it&#39;s done.

Thanks,
Xin
-- by xinzhao at Mon Nov 17 14&#58;52&#58;42 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1416233463'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-17T14:11:03+00:00">Nov 17, 2014 02:11 PM UTC</time> by <b>echism</b><a class="anchor" name="1416233463">&nbsp;</a></div><pre>Hi Xin,

Did the update go in?

Thank you</pre></div><div class='update_description'><i onclick="document.location='23029#1415648500'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-10T19:41:40+00:00">Nov 10, 2014 07:41 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1415648500">&nbsp;</a></div><pre>Hello,

It&#39;s not resolved yet. Later this week, we will update glexec rpms on all WNs.

Thanks,
Xin
-- by xinzhao at Mon Nov 10 19&#58;41&#58;10 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1415648015'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-10T19:33:35+00:00">Nov 10, 2014 07:33 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1415648015">&nbsp;</a></div><pre>Hi Eddie and Xin,

Has this issue be resolved?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='23029#1415292144'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-06T16:42:24+00:00">Nov 6, 2014 04:42 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1415292144">&nbsp;</a></div><pre>Hi Xin,

Perfect, thank you!

Eddie

-- by Edward Karavakis at Thu Nov 06 16&#58;41&#58;31 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1415114252'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-04T15:17:32+00:00">Nov 4, 2014 03:17 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1415114252">&nbsp;</a></div><pre>OK Eddie, we will add that as well.

We need to go through some testing with the new packages, will let you know
when they are installed on WNs.

Thanks,
Xin
-- by xinzhao at Tue Nov 04 15&#58;17&#58;05 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1415106958'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-04T13:15:58+00:00">Nov 4, 2014 01:15 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1415106958">&nbsp;</a></div><pre>Hi Xin,

Could you please also check if you have the gLExec Environment Wrap and Unwrap scripts installed at the WNs as we need them as well? They should be installed at /usr/sbin/glexec_wrapenv.pl and /usr/sbin/glexec_unwrapenv.pl along with /usr/sbin/mkgltempdir

Thanks, Eddie

-- by Edward Karavakis at Tue Nov 04 13&#58;15&#58;32 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1415106482'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-04T13:08:02+00:00">Nov 4, 2014 01:08 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1415106482">&nbsp;</a></div><pre>Thank you very much xin. Please let me know when you finish so that I can start testing BNL again..

-- by Edward Karavakis at Tue Nov 04 13&#58;07&#58;32 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1415052711'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-03T22:11:51+00:00">Nov 3, 2014 10:11 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1415052711">&nbsp;</a></div><pre>OK, we will install the rpm. One thing is that, our WNs use osg-wn-client
that&#39;s installed as a tarball on AFS, we keep minimum packages needed by glexec
local on WNs, and I will add the mkgltemnpdir rpm as a local package to be
installed on WNs.

Thanks,
Xin
-- by xinzhao at Mon Nov 03 22&#58;11&#58;34 UTC 2014

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=24905</pre></div><div class='update_description'><i onclick="document.location='23029#1415025685'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-03T14:41:25+00:00">Nov 3, 2014 02:41 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1415025685">&nbsp;</a></div><pre>-- by Edward Karavakis at Mon Nov 03 14&#58;40&#58;52 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a></pre></div><div class='update_description'><i onclick="document.location='23029#1415025624'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-03T14:40:24+00:00">Nov 3, 2014 02:40 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1415025624">&nbsp;</a></div><pre>Dear site admins,

I am testing gLExec jobs with hammercloud on a newly created queue, ANALY_BNL_GLEXEC, where the pilot switches to the uid of the gangarbt user by invoking gLExec.

It seems that the gLExec mechanism is there at BNL but one utility script is missing from your OSG_GLEXEC_LOCATION setup location. Thus, all the jobs keep failing with the same error&#58;

/usr/sbin/mkgltempdir&#58; No such file or directory

Would it be possible to include the mkgltempdir script at the BNL WNs?

This utility script is used by gLExec to create a directory owned by the glexec target user in a secure fashion and then switch to it.

According to Rob Quick&#58;

&#34;It is not part of the standard OSG WN package (osg-wn-client). However, there is an osg-wn-client-glexec package that contains mkgltempdir.&#34;.

Thank you very much.

Best regards,

Eddie
Affected Site&#58; BNL-ATLAS

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=109829</a>

[Ticket History]
Subject&#58; gLExec hammercloud jobs keep failing at BNL
Ticket Type&#58; USER
CC&#58;
-- by Edward Karavakis at Mon Nov 03 14&#58;39&#58;32 UTC 2014</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F23029">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
