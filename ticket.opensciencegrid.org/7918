<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[7918] many &#34;locality is UNaVAILABLE&#34; at RAL</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=7918" method="post">
<div class="page-header">
    <h3><span class="muted">7918</span> / many &#34;locality is UNaVAILABLE&#34; at RAL</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">wguan 0</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Operator Review</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-02-16</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=7918", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/7918?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/7918?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20many%20%26%2334%3Blocality%20is%20UNaVAILABLE%26%2334%3B%20at%20RAL%20ISSUE%3D7918%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='7918#1266004739'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-02-12T19:58:59+00:00">Feb 12, 2010 07:58 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1266004739">&nbsp;</a></div><pre>This has been reassigned to the CASTOR team. Closing the OSG ticket.

Dear User,

This is a follow up to your request (problem report&#58; CT658233).
-------------------------------------------------------------
Although this problem is related to the discussion concerning the reporting at the SRM level of draining files in CASTOR, the peak of errors that triggered the ticket seems more related to operationnal issues than to a new software issue. As a matter of fact, the bad reporting of draining files could only create such a number of errors if RAL would have had many boxes in DRAINING concurrently and if the file replication would have been very slow ?
I reassign the ticket to second level in case they want to check these points.
-------------------------------------------------------------
Best Regards,
Sebastien Ponce
IT Services / Mass Storage
(Cc&#58; castor.operations@....)</pre></div><div class='update_description'><i onclick="document.location='7918#1265723797'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-02-09T13:56:37+00:00">Feb 9, 2010 01:56 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1265723797">&nbsp;</a></div><pre>GGUS, Wen, Hiro

Could you please respond with an update for this ticket? It has been lingering for a while now.

Kyle</pre></div><div class='update_description'><i onclick="document.location='7918#1265047224'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-02-01T18:00:24+00:00">Feb 1, 2010 06:00 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1265047224">&nbsp;</a></div><pre>GGUS,

do you have any update on this ticket?

Kyle</pre></div><div class='update_description'><i onclick="document.location='7918#1264515537'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-26T14:18:57+00:00">Jan 26, 2010 02:18 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1264515537">&nbsp;</a></div><pre>To all parties involved,

Are there any updates on this issue?

Please submit problems, requests, and questions at&#58;
<a href='http&#58;//oim.grid.iu.edu/gocticket' target='_blank' rel='nofollow'>http&#58;//oim.grid.iu.edu/gocticket</a>

Thank You,
OSG Grid Operations Center
goc@...., 317-278-9699
Visit the OSG Support Page&#58;
<a href='http&#58;//www.opensciencegrid.org/ops' target='_blank' rel='nofollow'>http&#58;//www.opensciencegrid.org/ops</a>
RSS&#58; <a href='http&#58;//www.grid.iu.edu/news' target='_blank' rel='nofollow'>http&#58;//www.grid.iu.edu/news</a></pre></div><div class='update_description'><i onclick="document.location='7918#1263906126'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-19T13:02:06+00:00">Jan 19, 2010 01:02 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1263906126">&nbsp;</a></div><pre>To all parties involved,

Are there any updates on this issue?

Please submit problems, requests, and questions at&#58;
<a href='http&#58;//oim.grid.iu.edu/gocticket' target='_blank' rel='nofollow'>http&#58;//oim.grid.iu.edu/gocticket</a>

Thank You,
OSG Grid Operations Center
goc@...., 317-278-9699
Visit the OSG Support Page&#58;
<a href='http&#58;//www.opensciencegrid.org/ops' target='_blank' rel='nofollow'>http&#58;//www.opensciencegrid.org/ops</a>
RSS&#58; <a href='http&#58;//www.grid.iu.edu/news' target='_blank' rel='nofollow'>http&#58;//www.grid.iu.edu/news</a></pre></div><div class='update_description'><i onclick="document.location='7918#1263304997'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-12T14:03:17+00:00">Jan 12, 2010 02:03 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1263304997">&nbsp;</a></div><pre>BNL,

are there any updates for this ticket?

Kyle</pre></div><div class='update_description'><i onclick="document.location='7918#1262947442'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-08T10:44:02+00:00">Jan 8, 2010 10:44 AM UTC</time> by <b>GGUS</b><a class="anchor" name="1262947442">&nbsp;</a></div><pre>[Diary Of Steps]
Ticket is reassigned to FTS</pre></div><div class='update_description'><i onclick="document.location='7918#1262918583'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-08T02:43:03+00:00">Jan 8, 2010 02:43 AM UTC</time> by <b>GGUS</b><a class="anchor" name="1262918583">&nbsp;</a></div><pre>[Public Diary]
for the transfer to continue, it needs to show &#34;ONLINE&#34;

for example, using one file at BNL.

srmls -l <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/MCDISK/mc09_7TeV/log/e507_s624/mc09_7TeV.108091.HerwigPhotonJet_Unbinned35.simul.log.e507_s624_tid105270_00/log.105270._004105.job.log.tgz.1' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/MCDISK/mc09_7TeV/log/e507_s624/mc09_7TeV.108091.HerwigPhotonJet_Unbinned35.simul.log.e507_s624_tid105270_00/log.105270._004105.job.log.tgz.1</a>
233565 /pnfs/usatlas.bnl.gov/MCDISK/mc09_7TeV/log/e507_s624/mc09_7TeV.108091.HerwigPhotonJet_Unbinned35.simul.log.e507_s624_tid105270_00/log.105270._004105.job.log.tgz.1
space token(s) &#58;10001
storage type&#58;PERMANENT
retention policy&#58;REPLICA
access latency&#58;ONLINE
locality&#58;ONLINE
- Checksum value&#58;  ed3c2cb9
- Checksum type&#58;  adler32
UserPermission&#58; uid=6435 PermissionsRW
GroupPermission&#58; gid=31152 PermissionsR
WorldPermission&#58; R
created at&#58;2010/01/07 21&#58;23&#58;16
modified at&#58;2010/01/07 21&#58;23&#58;16
- Assigned lifetime (in seconds)&#58;  -1
- Lifetime left (in seconds)&#58;  -1
- Original SURL&#58;  /pnfs/usatlas.bnl.gov/MCDISK/mc09_7TeV/log/e507_s624/mc09_7TeV.108091.HerwigPhotonJet_Unbinned35.simul.log.e507_s624_tid105270_00/log.105270._004105.job.log.tgz.1
- Status&#58;  null
- Type&#58;  FILE

Hiro</pre></div><div class='update_description'><i onclick="document.location='7918#1262917742'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-08T02:29:02+00:00">Jan 8, 2010 02:29 AM UTC</time> by <b>GGUS</b><a class="anchor" name="1262917742">&nbsp;</a></div><pre>[Public Diary]
Hello.

transfer is done by glite-transfer-submit -t DESTSPACETOKEN -f filelists

But, this error is nothing to do with the destination space token.  It is purely the return command from srmls -l

for example, the simple srmls -l of the following file shows the &#34;locality&#34; of the file at RAL SRM to be unavailable.  For the transfer to contiune, it must shows &#34;

srmls  -l <a href='srm&#58;//srm-atlas.gridpp.rl.ac.uk&#58;8443/srm/managerv2?SFN=/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000713.pool.root.1' target='_blank' rel='nofollow'>srm&#58;//srm-atlas.gridpp.rl.ac.uk&#58;8443/srm/managerv2?SFN=/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000713.pool.root.1</a>
486088630 /castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000713.pool.root.1
space token(s) &#58;none found
type&#58; null
retentionpolicyinfo &#58; null
locality&#58;UNAVAILABLE
- Checksum value&#58;  00000000
- Checksum type&#58;
UserPermission&#58; uid=atlas001 PermissionsRW
GroupPermission&#58; gid=atlas PermissionsR
WorldPermission&#58; R
created at&#58;2009/12/29 15&#58;20&#58;50
modified at&#58;2009/12/29 15&#58;20&#58;50
- Lifetime left (in seconds)&#58;  -1
- Original SURL&#58;  /castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000713.pool.root.1
- Status&#58;
- Type&#58;  FILE

Hiro</pre></div><div class='update_description'><i onclick="document.location='7918#1262879882'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-07T15:58:02+00:00">Jan 7, 2010 03:58 PM UTC</time> by <b>GGUS</b><a class="anchor" name="1262879882">&nbsp;</a></div><pre>[Public Diary]
Would like to thank BNL for this infomation. As discussed today at the WLCG daily operations, I am now passing this to FTS developers to see why the get is not done after the srmls returns . The one piece of infomation I do not know is what the exact command line that is used for this transfer. IF a destination  Space token is not specified then this might be a problem . Can this bee seen elsewher ein the BNL logs? if you cvan answre this question, I will hten moive this ticket to the FTS developers.</pre></div><div class='update_description'><i onclick="document.location='7918#1262853663'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-07T08:41:03+00:00">Jan 7, 2010 08:41 AM UTC</time> by <b>GGUS</b><a class="anchor" name="1262853663">&nbsp;</a></div><pre>[Diary Of Steps]
Added cross reference to GGUS-Ticket-ID&#58; #54071
See additional information there.</pre></div><div class='update_description'><i onclick="document.location='7918#1262830622'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-07T02:17:02+00:00">Jan 7, 2010 02:17 AM UTC</time> by <b>GGUS</b><a class="anchor" name="1262830622">&nbsp;</a></div><pre>[Public Diary]
2010-01-06 21&#58;05&#58;00,763 [INFO ] - STATUS&#58;END fail&#58;SOURCE - Preparation
2010-01-06 21&#58;05&#58;00,763 [DEBUG] - Setting final error from source.
2010-01-06 21&#58;05&#58;00,763 [ERROR] - Final error on SOURCE during PREPARATION phase&#58; [LOCALITY] Source file [<a href='srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1' target='_blank' rel='nofollow'>srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1</a>]&#58; locality is UNAVAILABLE
2010-01-06 21&#58;05&#58;00,763 [INFO ] - FINAL&#58;SOURCE&#58; Source file [<a href='srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1' target='_blank' rel='nofollow'>srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1</a>]&#58; locality is UNAVAILABLE
2010-01-06 21&#58;05&#58;00,763 [INFO ] - STATUS&#58;BEGIN&#58;SOURCE - Finalization
2010-01-06 21&#58;05&#58;00,763 [INFO ] - No request token provided for source file. Assuming PrepareToGet request has not been sent
2010-01-06 21&#58;05&#58;00,763 [INFO ] - STATUS&#58;END&#58;SOURCE - Finalization
2010-01-06 21&#58;05&#58;00,763 [INFO ] - STATUS&#58;BEGIN&#58;DESTINATION - Finalization
2010-01-06 21&#58;05&#58;00,763 [INFO ] - No request token provided for destination file. Assuming PrepareToPut request has not been sent
2010-01-06 21&#58;05&#58;00,763 [INFO ] - STATUS&#58;END&#58;DESTINATION - Finalization
2010-01-06 21&#58;05&#58;00,763 [INFO ] - FINAL&#58;fail  [SOURCE] - [PREPARATION] - [LOCALITY] &#58; &#39;Source file [<a href='srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1' target='_blank' rel='nofollow'>srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1</a>]&#58; locality is UNAVAILABLE&#39;
2010-01-06 21&#58;05&#58;00,763 [DEBUG] - Restoring previous signal handlers</pre></div><div class='update_description'><i onclick="document.location='7918#1262830563'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-07T02:16:03+00:00">Jan 7, 2010 02:16 AM UTC</time> by <b>GGUS</b><a class="anchor" name="1262830563">&nbsp;</a></div><pre>[Public Diary]
2010-01-06 21&#58;04&#58;59,386 [DEBUG] - Registered handler for stop signal
2010-01-06 21&#58;04&#58;59,393 [DEBUG] - Registered handler for continue signal
2010-01-06 21&#58;04&#58;59,397 [INFO ] - Transfer mode&#58; urlcopy
2010-01-06 21&#58;04&#58;59,397 [INFO ] - Transfer ID  &#58; RALLCG2-BNLDCACHE__2010-01-07-0204_wqzTtk
2010-01-06 21&#58;04&#58;59,397 [INFO ] - User DN      &#58; /O=dutchgrid/O=users/O=nikhef/CN=Kors Bos/CN=proxy/CN=proxy/CN=proxy
2010-01-06 21&#58;04&#58;59,397 [INFO ] - User Descr.  &#58; ee60289a-fb2e-11de-acb4-aebc95b8c4f4
2010-01-06 21&#58;04&#58;59,397 [INFO ] - Source SRM [2.2.0]&#58; httpg&#58;//srm-atlas.gridpp.rl.ac.uk&#58;8443/srm/managerv2
2010-01-06 21&#58;04&#58;59,397 [INFO ] - Dest.  SRM [2.2]&#58; httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2
2010-01-06 21&#58;04&#58;59,397 [INFO ] - Source     &#58; <a href='srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1' target='_blank' rel='nofollow'>srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1</a>
2010-01-06 21&#58;04&#58;59,397 [INFO ] - Destination&#58; <a href='srm&#58;//dcsrm.usatlas.bnl.gov/pnfs/usatlas.bnl.gov/MCDISK/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov/pnfs/usatlas.bnl.gov/MCDISK/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1</a>
2010-01-06 21&#58;04&#58;59,398 [DEBUG] - Contacting SRM endpoint [httpg&#58;//srm-atlas.gridpp.rl.ac.uk&#58;8443/srm/managerv2]. Version is [2.2.0]
2010-01-06 21&#58;04&#58;59,399 [DEBUG] - SRM &#62; invoking method&#58; srm2__srmPing
2010-01-06 21&#58;05&#58;00,091 [DEBUG] - SRM &#62; method srm2__srmPing completed successfully (ip = 130.246.183.239)
2010-01-06 21&#58;05&#58;00,093 [INFO ] - Source SRM server available
2010-01-06 21&#58;05&#58;00,093 [DEBUG] - Contacting SRM endpoint [httpg&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2]. Version is [2.2]
2010-01-06 21&#58;05&#58;00,093 [DEBUG] - SRM &#62; invoking method&#58; srm2__srmPing
2010-01-06 21&#58;05&#58;00,145 [DEBUG] - SRM &#62; method srm2__srmPing completed successfully (ip = 192.12.15.2)
2010-01-06 21&#58;05&#58;00,146 [INFO ] - Destination SRM server available
2010-01-06 21&#58;05&#58;00,146 [INFO ] - STATUS&#58;BEGIN&#58;SOURCE - Preparation
2010-01-06 21&#58;05&#58;00,146 [INFO ] - Getting source from SURL [<a href='srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1' target='_blank' rel='nofollow'>srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1</a>]
2010-01-06 21&#58;05&#58;00,146 [DEBUG] - Contacting SRM endpoint [httpg&#58;//srm-atlas.gridpp.rl.ac.uk&#58;8443/srm/managerv2]. Version is [2.2.0]
2010-01-06 21&#58;05&#58;00,147 [DEBUG] - SRM &#62; invoking method&#58; srm2__srmLs
2010-01-06 21&#58;05&#58;00,761 [DEBUG] - SRM &#62; method srm2__srmLs completed successfully (ip = 130.246.183.238)
2010-01-06 21&#58;05&#58;00,762 [DEBUG] - path [<a href='srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1' target='_blank' rel='nofollow'>srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1</a>] exists (type = FILE)
2010-01-06 21&#58;05&#58;00,763 [DEBUG] - file [<a href='srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1' target='_blank' rel='nofollow'>srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1</a>] size is [486043623]
2010-01-06 21&#58;05&#58;00,763 [DEBUG] - file [<a href='srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1' target='_blank' rel='nofollow'>srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1</a>] locality is [UNAVAILABLE]
2010-01-06 21&#58;05&#58;00,763 [ERROR] - source failed during PREPARATION phase. Error [LOCALITY]&#58;Source file [<a href='srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1' target='_blank' rel='nofollow'>srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_900GeV/ESD/e466_s659_s660_d252_r1003/mc09_900GeV.096099.PhojetCdiff.recon.ESD.e466_s659_s660_d252_r1003_tid104704_00/ESD.104704._000256.pool.root.1</a>]&#58; locality is UNAVAILABLE</pre></div><div class='update_description'><i onclick="document.location='7918#1262830503'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-07T02:15:03+00:00">Jan 7, 2010 02:15 AM UTC</time> by <b>GGUS</b><a class="anchor" name="1262830503">&nbsp;</a></div><pre>[Public Diary]
Hello.

Since RAL -&#62;BNL is showing the same error right now, I got FTS log of current failed transfer due to &#34;LOCALITY&#34; problem.  I run the FTS agent in the debug mode to show the detail.  As you can see from the log, it is failing in locality test of srmls.    If you need anything else, please let me know.    Since there seems to be character length limit, I will break up the log in two.

Hiro</pre></div><div class='update_description'><i onclick="document.location='7918#1262729403'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-05T22:10:03+00:00">Jan 5, 2010 10:10 PM UTC</time> by <b>GGUS</b><a class="anchor" name="1262729403">&nbsp;</a></div><pre>[Public Diary]
Hello.

I don&#39;t know the FTS log for these transfer any longer. But, I can tell you what FTS is doing.

FTS is doing srmls -l
and, it is looking for &#34;locality&#34; entry for that. If it returns &#34;ONLINE&#34;, the transfer will proceed. If not, it will halt the transfer. (FTS agent also check if the file is in the name space as well as the file size by srmls -l &#34;)

hiro</pre></div><div class='update_description'><i onclick="document.location='7918#1262722686'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-05T20:18:06+00:00">Jan 5, 2010 08:18 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1262722686">&nbsp;</a></div><pre>Subject&#58; Resolved&#58; Open Science Grid&#58; many &#34;locality is UNaVAILABLE&#34; at RAL ISSUE=7918 PROJ=71

Ticket ID&#58; [rt.racf.bnl.gov #14994]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; Yuri Smirnov
Status&#58; resolved
Priority&#58; None
Transaction&#58; Status changed from &#39;open&#39; to &#39;resolved&#39; by smithj4
Subject&#58; Open Science Grid&#58; many &#34;locality is UNaVAILABLE&#34; at RAL ISSUE=7918 PROJ=71
OSG GOC Ticket&#58; ISSUE=7918 PROJ=71

------------------------------------------------------------------------------

Please DO NOT reply with thank you messages.

According to our records, your request has been resolved and this
ticket has has been closed.  If you are satisfied with the resolution
of your request, then please DO NOT reply to this message, as doing
so will automatically re-open the ticket.

If you have any further questions or comments, or you would like to
re-open this ticket, then simply reply to this email.

Thank you,
RT-RACF@....</pre></div><div class='update_description'><i onclick="document.location='7918#1262720707'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-05T19:45:07+00:00">Jan 5, 2010 07:45 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1262720707">&nbsp;</a></div><pre>Subject&#58; Resolved&#58; Open Science Grid&#58; many &#34;locality is UNaVAILABLE&#34; at RAL ISSUE=7918 PROJ=71

Ticket ID&#58; [rt.racf.bnl.gov #14994]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; Yuri Smirnov
Status&#58; resolved
Priority&#58; None
Transaction&#58; Status changed from &#39;open&#39; to &#39;resolved&#39; by ysmirnov
Subject&#58; Open Science Grid&#58; many &#34;locality is UNaVAILABLE&#34; at RAL ISSUE=7918 PROJ=71
OSG GOC Ticket&#58; ISSUE=7918 PROJ=71

------------------------------------------------------------------------------

Please DO NOT reply with thank you messages.

According to our records, your request has been resolved and this
ticket has has been closed.  If you are satisfied with the resolution
of your request, then please DO NOT reply to this message, as doing
so will automatically re-open the ticket.

If you have any further questions or comments, or you would like to
re-open this ticket, then simply reply to this email.

Thank you,
RT-RACF@....</pre></div><div class='update_description'><i onclick="document.location='7918#1262720706'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-05T19:45:06+00:00">Jan 5, 2010 07:45 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1262720706">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #14994]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; Yuri Smirnov
Status&#58; new
Priority&#58; None
Transaction&#58; Correspondence added by ysmirnov
Subject&#58; Open Science Grid&#58; many &#34;locality is UNaVAILABLE&#34; at RAL ISSUE=7918 PROJ=71
OSG GOC Ticket&#58; ISSUE=7918 PROJ=71

------------------------------------------------------------------------------

RAL downtime (OUTAGE) 2010-01-05&#58;
<a href='https&#58;//goc.gridops.org/downtime/list?id=52405475' target='_blank' rel='nofollow'>https&#58;//goc.gridops.org/downtime/list?id=52405475</a>
No problems at BNL.I close the ticket.

Yuri</pre></div><div class='update_description'><i onclick="document.location='7918#1262719268'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-05T19:21:08+00:00">Jan 5, 2010 07:21 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1262719268">&nbsp;</a></div><pre>Subject&#58; AutoReply&#58; Open Science Grid&#58; many &#34;locality is UNaVAILABLE&#34; at RAL ISSUE=7918 PROJ=71

Greetings,

This message has been automatically generated in response to the
creation of a support ticket you submitted regarding&#58;

&#34;Open Science Grid&#58; many &#34;locality is UNaVAILABLE&#34; at RAL ISSUE=7918 PROJ=71&#34;

A summary of your ticket, which has been assigned a request ID of
[rt.racf.bnl.gov #14994], appears below.

To modify your ticket or add follow-ups, simply reply to this email
message.  Please DO NOT change the subject of this e-mail when
replying or you might generate a new ticket.

Thank you,
RT-RACF@....

------------------------------------------------------------------------------

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='7918#1262719075'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-05T19:17:55+00:00">Jan 5, 2010 07:17 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1262719075">&nbsp;</a></div><pre>USATLAS,

I am not sure about exactly which resource is being brought up here, but it appears to be at BNL.  If someone could look into this, it would be much appreciated.

Thanks,

Kyle</pre></div><div class='update_description'><i onclick="document.location='7918#1262694844'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-01-05T12:34:04+00:00">Jan 5, 2010 12:34 PM UTC</time> by <b>GGUS</b><a class="anchor" name="1262694844">&nbsp;</a></div><pre>Hi ,

When transferring data from RAL to BNL, there are many errors. Could someone help fix it?

(*)
[FTS] FTS State [Failed] FTS Retries [1] Reason [SOURCE error during TRANSFER_PREPARATION phase&#58; [LOCALITY] S
ource file [<a href='srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_14TeV/HI' target='_blank' rel='nofollow'>srm&#58;//srm-atlas.gridpp.rl.ac.uk/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/mc09_14TeV/HI</a>
TS/e478_s616/mc09_14TeV.105568.ttbar_Pythia.simul.HITS.e478_s616_tid095667/HITS.095667._000733.pool.root.1]&#58;
locality is UNAVAILABLE]	12843

(*)
<a href='http&#58;//dashb-atlas-data-test.cern.ch/dashboard/request.py/file-placement?site=BNL-OSG2_MCDISK&amp' target='_blank' rel='nofollow'>http&#58;//dashb-atlas-data-test.cern.ch/dashboard/request.py/file-placement?site=BNL-OSG2_MCDISK&amp</a>;fromDate=2009-12-13%2009&#58;30&#58;00&amp;toDate=2009-12-13%2013&#58;30&#58;00&amp;state=FAILED_TRANSFER&amp;errorType=351

Wen

[Other GGUS Ticket Info]
Date GGUS Ticket Opened&#58; 2009-12-13 12&#58;51
GGUS Ticket ID&#58;          54454
Short Description&#58;       many &quot;locality is UNaVAILABLE&quot; at RAL
Solution&#58;
Experiment&#58;              atlas
Affected Site&#58;
Responsible Unit&#58;        OSG</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F7918">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 7918});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
