<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[25441] Rebuilding SBGrid Glidein&#58; glidein-1.sbgrid.org</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="robots" content="noindex, nofollow" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=25441" method="post">
<div class="page-header">
    <h3><span class="muted">25441</span> / Rebuilding SBGrid Glidein&#58; glidein-1.sbgrid.org</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Michael (Mick) Timony</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Michael (Mick) Timony</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-06-10</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Edgar Fajardo <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/25441", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='25441#1433793362'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-08T19:56:02+00:00">Jun 8, 2015 07:56 PM UTC</time><a class="anchor" name="1433793362">&nbsp;</a></div><pre>Yes we can close the ticket. Jeff and Edgar got us running again, along with help from the Condor team.

Here&#39;s a summary of the the steps that might be useful to others&#58;

1. Fresh install of Condor and Glidein&#58;
yum install condor
yum install glideinwms-vofrontend

2. create a local config file named etc/condor/condor.d/99_local_tweaks.conf  and set the NETWORK_INTERFACE  to bind to&#58;
# bind to the external address
NETWORK_INTERFACE =  134.174.140.230

3. In /etc/gwms-frontend/frontend.xml set the node as the IP address and port or port range (like so)&#58;

&#60;collectors&#62;
&#60;collector DN=&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=glidein-1.sbgrid.org&#34; group=&#34;default&#34; node=&#34;134.174.140.230&#58;9618&#34; secondary=&#34;False&#34;/&#62;
&#60;collector DN=&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=glidein-1.sbgrid.org&#34; group=&#34;default&#34; node=&#34;134.174.140.230&#58;9620-9660&#34; secondary=&#34;True&#34;/&#62;
&#60;/collectors&#62;

And a copy of our frontend.xml, renamed as frontend.xml.txt as I&#39;m not allowed to attach .xml files.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Michael Timony 888</pre></div><div class='update_description'><i onclick="document.location='25441#1433777919'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-08T15:38:39+00:00">Jun 8, 2015 03:38 PM UTC</time><a class="anchor" name="1433777919">&nbsp;</a></div><pre>An update on this. We already saw some jobs succesfully ran.

Mick, can we close this ticket?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='25441#1433435144'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-04T16:25:44+00:00">Jun 4, 2015 04:25 PM UTC</time><a class="anchor" name="1433435144">&nbsp;</a></div><pre>We are still working on this with the gwms folks now that there was a problem with the network resolution at the glideins.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='25441#1433268233'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-02T18:03:53+00:00">Jun 2, 2015 06:03 PM UTC</time><a class="anchor" name="1433268233">&nbsp;</a></div><pre>Hi All,

We have been following this off the ticket. We will probably have a phone call with the SB Grid dudes tom. I will post the outcome here.

Cheers,

Edgar
OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='25441#1433257692'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-06-02T15:08:12+00:00">Jun 2, 2015 03:08 PM UTC</time> by <b>echism</b><a class="anchor" name="1433257692">&nbsp;</a></div><pre>Have the following errors subsided?

05/18/15 06&#58;39&#58;18 (pid&#58;20182) condor_write()&#58; Socket closed when trying to write 4000 bytes to collector glidein-1.sbgrid.org&#58;9623, fd is 11
05/18/15 06&#58;39&#58;18 (pid&#58;20182) Buf&#58;&#58;write()&#58; condor_write() failed
05/18/15 06&#58;39&#58;18 (pid&#58;20182) Failed to send non-blocking update to &#60;134.174.140.230&#58;9623&#62;.
05/18/15 06&#58;40&#58;12 (pid&#58;20182) condor_write()&#58; Socket closed when trying to write 86 bytes to collector glidein-1.sbgrid.org&#58;9623, fd is 11

If so, where are we on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='25441#1432770338'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-27T23:45:38+00:00">May 27, 2015 11:45 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1432770338">&nbsp;</a></div><pre>Hi all,

It seem like things are moving along in this ticket, but let us know if there are any specific condor questions for the software team.

I&#39;m also adding Edgar, who I think has a lot of glideinwms experience.

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='25441#1432741736'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-27T15:48:56+00:00">May 27, 2015 03:48 PM UTC</time><a class="anchor" name="1432741736">&nbsp;</a></div><pre>Hi Jeff,

Everything is running on the one host. We installed the glideinwms-vofrontend package with &#34;yum install glideinwms-vofrontend&#34; following the instructions at&#58;

<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallGlideinWMSFrontend#Install_OSG_Repositories' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallGlideinWMSFrontend#Install_OSG_Repositories</a>

Thanks
Mick

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Michael Timony 888</pre></div><div class='update_description'><i onclick="document.location='25441#1432649209'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-26T14:06:49+00:00">May 26, 2015 02:06 PM UTC</time> by <b>echism</b><a class="anchor" name="1432649209">&nbsp;</a></div><pre>I&#39;m adding the software team for condor questions.</pre></div><div class='update_description'><i onclick="document.location='25441#1432320945'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-22T18:55:45+00:00">May 22, 2015 06:55 PM UTC</time><a class="anchor" name="1432320945">&nbsp;</a></div><pre>Hi Justin,

I can try and help you debug, I think something is not quite right with your condor configuration. I have a few questions,
1. are you running your collector schedd and FE all on the same host or are they over multiple nodes?
2. are you using the glideinwms provided packages for your default condor settings? On my test frontend (all components on 1 node), I am mostly using all glideinwms defaults, which are pulled from these rpms&#58;
glideinwms-minimal-condor
glideinwms-usercollector
glideinwms-userschedd

If I run condor_ping the way you do, I get denies for everything, whether using localhost or my server IP.  Also I don&#39;t have CONDOR_VIEW_HOST set at all.  Although this works as expected&#58;
condor_ping -pool test-frontend-1.t2.ucsd.edu READ WRITE DAEMON
READ using (no encryption, MD5, and FS) succeeded as frontend@....
WRITE using (no encryption, MD5, and FS) succeeded as frontend@....
DAEMON using (no encryption, MD5, and FS) succeeded as frontend@....

Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='25441#1432315241'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-22T17:20:41+00:00">May 22, 2015 05:20 PM UTC</time><a class="anchor" name="1432315241">&nbsp;</a></div><pre>Hey Justin,

I&#39;ve been holding off replying while waiting to see the results of some recent SBGrid glideins to see if there&#39;s any failures still, but I haven&#39;t seen much of any SBGrid activity the last few days. As such, I&#39;m not totally sure if you do need to change those values for localhost. We&#39;ll have to wait and see how new SBGrid glideins run to see what current problems there may be.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='25441#1432064896'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-19T19:48:16+00:00">May 19, 2015 07:48 PM UTC</time><a class="anchor" name="1432064896">&nbsp;</a></div><pre>Hi Jeff,
Yes, and I have made several changes. I think the main one (and last one) I found this useful command in an older thread
&#96;condor_ping -addr &#34;&#60;x.x.x.x&#58;9618&#62;&#34; -table READ WRITE DAEMON&#96;
and realized that 127.0.0.1 had deny for write and daemon, but using the server ip had allow for all 3.
So I changed CONDOR_VIEW_HOST = localhost to CONDOR_VIEW_HOST = $(COLLECTOR_HOST)
and the job went through.

So, I am not sure this is the right path - I am still seeing some condor_write errors in SchedLog -
condor_write()&#58; Socket closed when trying to write 4096 bytes to collector localhost, fd is 18, errno=104 Connection reset by peer

Should I fix this the other way and get ALLOW for  READ, WRITE, and DAEMON for localhost to work?

Justin

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Justin O&#39;Connor 2983</pre></div><div class='update_description'><i onclick="document.location='25441#1432061197'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-19T18:46:37+00:00">May 19, 2015 06:46 PM UTC</time><a class="anchor" name="1432061197">&nbsp;</a></div><pre>I saw some glideins finally able to connect to the sbgrid collector today, around 8&#58;30 am PDT&#58;
<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html</a>

(select SBGrid from frontend pulldown list)

Mick or Justin, did you change anything on your side?

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='25441#1432004891'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-19T03:08:11+00:00">May 19, 2015 03:08 AM UTC</time> by <b>echism</b><a class="anchor" name="1432004891">&nbsp;</a></div><pre>This is a quick note to say that I am at a workshop this week, so please email
goc@.... if you need anything from my group before Monday.

Best,
Elizabeth Prout</pre></div><div class='update_description'><i onclick="document.location='25441#1431996511'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-19T00:48:31+00:00">May 19, 2015 12:48 AM UTC</time><a class="anchor" name="1431996511">&nbsp;</a></div><pre>Just updating to say that after the weekend, I&#39;m still seeing the same thing as Jeff posted previously with all user jobs failing to run due to issues with the worker nodes on various sites being unable to connect to glidein-1.sbgrid.org [1]. Unfortunately I can&#39;t offer much more that this; there&#39;s nothing else in the log files to point to what could be the cause. However, since it&#39;s happening on every site that SBGrid glideins are landing on, it definitely does seem to be some problem with the collector rather than a site-specific or factory issue. I&#39;ll continue to keep an eye on it but I don&#39;t think we&#39;ll get much more than this.

Brendan Dennis
UCSD Glidein Factory Operations

[1]
05/18/15 06&#58;39&#58;18 (pid&#58;20182) condor_write()&#58; Socket closed when trying to write 4000 bytes to collector glidein-1.sbgrid.org&#58;9623, fd is 11
05/18/15 06&#58;39&#58;18 (pid&#58;20182) Buf&#58;&#58;write()&#58; condor_write() failed
05/18/15 06&#58;39&#58;18 (pid&#58;20182) Failed to send non-blocking update to &#60;134.174.140.230&#58;9623&#62;.
05/18/15 06&#58;40&#58;12 (pid&#58;20182) condor_write()&#58; Socket closed when trying to write 86 bytes to collector glidein-1.sbgrid.org&#58;9623, fd is 11
05/18/15 06&#58;40&#58;12 (pid&#58;20182) Buf&#58;&#58;write()&#58; condor_write() failed
05/18/15 06&#58;40&#58;12 (pid&#58;20182) CCBListener&#58; connection to CCB server glidein-1.sbgrid.org&#58;9623 failed; will try to reconnect in 60 seconds.
05/18/15 06&#58;41&#58;13 (pid&#58;20182) condor_write()&#58; Socket closed when trying to write 86 bytes to collector glidein-1.sbgrid.org&#58;9623, fd is 11
05/18/15 06&#58;41&#58;13 (pid&#58;20182) Buf&#58;&#58;write()&#58; condor_write() failed
05/18/15 06&#58;41&#58;13 (pid&#58;20182) CCBListener&#58; connection to CCB server glidein-1.sbgrid.org&#58;9623 failed; will try to reconnect in 60 seconds.
05/18/15 06&#58;42&#58;14 (pid&#58;20182) condor_write()&#58; Socket closed when trying to write 86 bytes to collector glidein-1.sbgrid.org&#58;9623, fd is 11
05/18/15 06&#58;42&#58;14 (pid&#58;20182) Buf&#58;&#58;write()&#58; condor_write() failed
05/18/15 06&#58;42&#58;14 (pid&#58;20182) CCBListener&#58; connection to CCB server glidein-1.sbgrid.org&#58;9623 failed; will try to reconnect in 60 seconds.
05/18/15 06&#58;43&#58;15 (pid&#58;20182) condor_write()&#58; Socket closed when trying to write 86 bytes to collector glidein-1.sbgrid.org&#58;9623, fd is 11
05/18/15 06&#58;43&#58;15 (pid&#58;20182) Buf&#58;&#58;write()&#58; condor_write() failed
05/18/15 06&#58;43&#58;15 (pid&#58;20182) CCBListener&#58; connection to CCB server glidein-1.sbgrid.org&#58;9623 failed; will try to reconnect in 60 seconds.
05/18/15 06&#58;44&#58;16 (pid&#58;20182) condor_write()&#58; Socket closed when trying to write 86 bytes to collector glidein-1.sbgrid.org&#58;9623, fd is 11
05/18/15 06&#58;44&#58;16 (pid&#58;20182) Buf&#58;&#58;write()&#58; condor_write() failed
05/18/15 06&#58;44&#58;16 (pid&#58;20182) CCBListener&#58; connection to CCB server glidein-1.sbgrid.org&#58;9623 failed; will try to reconnect in 60 seconds.
05/18/15 06&#58;45&#58;16 (pid&#58;20182) condor_write()&#58; Socket closed when trying to write 86 bytes to collector glidein-1.sbgrid.org&#58;9623, fd is 12
05/18/15 06&#58;45&#58;16 (pid&#58;20182) Buf&#58;&#58;write()&#58; condor_write() failed
05/18/15 06&#58;45&#58;16 (pid&#58;20182) CCBListener&#58; connection to CCB server glidein-1.sbgrid.org&#58;9623 failed; will try to reconnect in 60 seconds.
05/18/15 06&#58;46&#58;17 (pid&#58;20182) condor_write()&#58; Socket closed when trying to write 86 bytes to collector glidein-1.sbgrid.org&#58;9623, fd is 12
05/18/15 06&#58;46&#58;17 (pid&#58;20182) Buf&#58;&#58;write()&#58; condor_write() failed
05/18/15 06&#58;46&#58;17 (pid&#58;20182) CCBListener&#58; connection to CCB server glidein-1.sbgrid.org&#58;9623 failed; will try to reconnect in 60 seconds.
05/18/15 06&#58;47&#58;18 (pid&#58;20182) condor_write()&#58; Socket closed when trying to write 86 bytes to collector glidein-1.sbgrid.org&#58;9623, fd is 12
05/18/15 06&#58;47&#58;18 (pid&#58;20182) Buf&#58;&#58;write()&#58; condor_write() failed
05/18/15 06&#58;47&#58;18 (pid&#58;20182) CCBListener&#58; connection to CCB server glidein-1.sbgrid.org&#58;9623 failed; will try to reconnect in 60 seconds.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='25441#1431966007'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-18T16:20:07+00:00">May 18, 2015 04:20 PM UTC</time><a class="anchor" name="1431966007">&nbsp;</a></div><pre>I&#39;ll phone into the Weekly meeting call today at 1pm (EST).

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Michael Timony 888</pre></div><div class='update_description'><i onclick="document.location='25441#1431965457'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-18T16:10:57+00:00">May 18, 2015 04:10 PM UTC</time><a class="anchor" name="1431965457">&nbsp;</a></div><pre>Hi Jeff,
There is no network filtering going on. The network settings are essentially same as the the other glidein server.
Justin

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Justin O&#39;Connor 2983</pre></div><div class='update_description'><i onclick="document.location='25441#1431727157'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-15T21:59:17+00:00">May 15, 2015 09:59 PM UTC</time><a class="anchor" name="1431727157">&nbsp;</a></div><pre>Hey Justin,

The problem Jeff mentioned in the previous issue with the cert having expired should now be resolved, so hopefully it&#39;s a bit easier to go through the logs now.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='25441#1431721328'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-15T20:22:08+00:00">May 15, 2015 08:22 PM UTC</time><a class="anchor" name="1431721328">&nbsp;</a></div><pre>Hi Justin,

I was more curious if there&#39;s any kind of filtering at the network level, rather than from the host. In any case what you&#39;re observing now is a new error, because our factory host cert just expired. I asked Terrence to issue a new one, and will get back to you when its back up.

Before that happened, the line of communication that was failing was between glidien (at any given external OSG site) and your host, glidein-1.sbgrid.org.  The factory should be out of the picture at that point, it&#39;s only responsible for submission.

Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='25441#1431720622'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-15T20:10:22+00:00">May 15, 2015 08:10 PM UTC</time><a class="anchor" name="1431720622">&nbsp;</a></div><pre>Hi All,
This may or may not be relevant, I am still looking through documentation. This command works by hand - /usr/bin/condor_status -any -xml -pool gfactory-1.t2.ucsd.edu , but fails as seen below.

[2015-05-15 13&#58;59&#58;53,273] ERROR&#58; glideinFrontendElement&#58;1158&#58; Failed to talk to factory_pool gfactory-1.t2.ucsd.edu for entry info&#58;
Traceback (most recent call last)&#58;
File &#34;/usr/sbin/glideinFrontendElement.py&#34;, line 1153, in query_entries
factory_glidein_dict = glideinFrontendInterface.findGlideins(factory_pool_node, None, self.signatureDescript.signature_type, factory_constraint)
File &#34;/usr/lib/python2.6/site-packages/glideinwms/frontend/glideinFrontendInterface.py&#34;, line 156, in findGlideins
status.load(status_constraint)
File &#34;/usr/lib/python2.6/site-packages/glideinwms/lib/condorMonitor.py&#34;, line 285, in load
self.stored_data = self.fetch(constraint, format_list)
File &#34;/usr/lib/python2.6/site-packages/glideinwms/lib/condorMonitor.py&#34;, line 344, in fetch
return QueryExe.fetch(self, constraint=constraint, format_list=format_list)
File &#34;/usr/lib/python2.6/site-packages/glideinwms/lib/condorMonitor.py&#34;, line 271, in fetch
xml_data = condorExe.exe_cmd(self.exe_name,&#34;%s -xml %s %s&#34;%(self.resource_str,self.pool_str,constraint_str),env=self.env);
File &#34;/usr/lib/python2.6/site-packages/glideinwms/lib/condorExe.py&#34;, line 56, in exe_cmd
return iexe_cmd(cmd,stdin_data,env)
File &#34;/usr/lib/python2.6/site-packages/glideinwms/lib/condorExe.py&#34;, line 93, in iexe_cmd
raise ExeError, &#34;Unexpected Error running &#39;%s&#39;. Details&#58; %s&#34; % (cmd, ex)
ExeError&#58; Unexpected Error running &#39;/usr/bin/condor_status -any -xml -pool gfactory-1.t2.ucsd.edu -constraint &#39;(GlideinMyType=?=&#34;glidefactory&#34;) && stringListMember(&#34;sha1
&#34;,SupportedSignTypes) && ((((stringListMember(&#34;SBGrid&#34;, GLIDEIN_Supported_VOs)))) && (True))&#39;&#39;. Details&#58; Command &#39;/usr/bin/condor_status -any -xml -pool gfactory-1.t2.uc
sd.edu -constraint &#39;(GlideinMyType=?=&#34;glidefactory&#34;) && stringListMember(&#34;sha1&#34;,SupportedSignTypes) && ((((stringListMember(&#34;SBGrid&#34;, GLIDEIN_Supported_VOs)))) && (True)
)&#39;&#39; returned non-zero exit status 1&#58; Error&#58; communication error
AUTHENTICATE&#58;1003&#58;Failed to authenticate with any method
AUTHENTICATE&#58;1004&#58;Failed to authenticate using GSI
GSI&#58;5002&#58;Failed to authenticate because the remote (server) side was not able to acquire its credentials.
Error&#58; Couldn&#39;t contact the condor_collector on gfactory-1.t2.ucsd.edu
(&#60;169.228.38.36&#58;9618&#62;).

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Justin O&#39;Connor 2983</pre></div><div class='update_description'><i onclick="document.location='25441#1431704693'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-15T15:44:53+00:00">May 15, 2015 03:44 PM UTC</time><a class="anchor" name="1431704693">&nbsp;</a></div><pre>Hi All,
There is no firewall side filtering or state table limit that should be preventing this traffic. I am looking at the server setup now trying to get a handle on it. Let me know what else I can help with.
Justin

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Justin O&#39;Connor 2983</pre></div><div class='update_description'><i onclick="document.location='25441#1431698733'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-15T14:05:33+00:00">May 15, 2015 02:05 PM UTC</time><a class="anchor" name="1431698733">&nbsp;</a></div><pre>Adding Justin O&#39;Connor to the ticket, he manages the network at the SBGrid.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Michael Timony 888</pre></div><div class='update_description'><i onclick="document.location='25441#1431692258'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-15T12:17:38+00:00">May 15, 2015 12:17 PM UTC</time><a class="anchor" name="1431692258">&nbsp;</a></div><pre>Hi Mick,

Now the glideins are getting past validation, but all of them are failing with network issues after condor starts up, see below [1]. TCP connections are consistently being cut off. Are you aware of any kind of packet filtering on the network side of glidein-1.sbgrid.org, or firewall restrictions that would prevent inbound TCP to your condor collector at glidein-1.sbgrid.org? I&#39;ve seen things like that affect glideins in this way in the past.

Can you check the network side of things and get back to us?

[1]
05/15/15 04&#58;31&#58;28 (pid&#58;19032) condor_write()&#58; Socket closed when trying to write 85 bytes to collector glidein-1.sbgrid.org&#58;9653, fd is 8
05/15/15 04&#58;31&#58;28 (pid&#58;19032) Buf&#58;&#58;write()&#58; condor_write() failed
05/15/15 04&#58;31&#58;28 (pid&#58;19032) CCBListener&#58; connection to CCB server glidein-1.sbgrid.org&#58;9653 failed; will try to reconnect in 60 seconds.
05/15/15 04&#58;32&#58;29 (pid&#58;19032) condor_write()&#58; Socket closed when trying to write 85 bytes to collector glidein-1.sbgrid.org&#58;9653, fd is 8
05/15/15 04&#58;32&#58;29 (pid&#58;19032) Buf&#58;&#58;write()&#58; condor_write() failed
05/15/15 04&#58;32&#58;29 (pid&#58;19032) CCBListener&#58; connection to CCB server glidein-1.sbgrid.org&#58;9653 failed; will try to reconnect in 60 seconds.
05/15/15 04&#58;33&#58;30 (pid&#58;19032) condor_write()&#58; Socket closed when trying to write 85 bytes to collector glidein-1.sbgrid.org&#58;9653, fd is 8
05/15/15 04&#58;33&#58;30 (pid&#58;19032) Buf&#58;&#58;write()&#58; condor_write() failed
05/15/15 04&#58;33&#58;30 (pid&#58;19032) CCBListener&#58; connection to CCB server glidein-1.sbgrid.org&#58;9653 failed; will try to reconnect in 60 seconds.
05/15/15 04&#58;34&#58;30 (pid&#58;19032) condor_write()&#58; Socket closed when trying to write 85 bytes to collector glidein-1.sbgrid.org&#58;9653, fd is 8
05/15/15 04&#58;34&#58;30 (pid&#58;19032) Buf&#58;&#58;write()&#58; condor_write() failed

...

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='25441#1431662349'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-15T03:59:09+00:00">May 15, 2015 03:59 AM UTC</time><a class="anchor" name="1431662349">&nbsp;</a></div><pre>I guess I shouldn&#39;t copy&#39;n&#39;paste while tired!

I&#39;ll update the frontend config, stop the test job, restart condor and the frontend,  and start a new job. And we can check the status in the morning.

Thanks
Mick

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Michael Timony 888</pre></div><div class='update_description'><i onclick="document.location='25441#1431661829'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-15T03:50:29+00:00">May 15, 2015 03:50 AM UTC</time><a class="anchor" name="1431661829">&nbsp;</a></div><pre>For tomorrow, I think its an easy fix, note there are two http&#58;//http&#58;// in the string

Failed to load file &#39;description.f58gR4.cfg&#39; from &#39;http&#58;//<a href='http&#58;//glidein-1.sbgrid.org/vofrontend/stage&#39' target='_blank' rel='nofollow'>http&#58;//glidein-1.sbgrid.org/vofrontend/stage&#39</a>; using proxy &#39;spserv01.sprace.org.br&#58;3128&#39;.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='25441#1431660095'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-15T03:21:35+00:00">May 15, 2015 03:21 AM UTC</time><a class="anchor" name="1431660095">&nbsp;</a></div><pre>Still rejected &#58;(

/var/log/condor/MatchLog&#58;05/14/15 23&#58;19&#58;18       Rejected 4.0 webportal@.... &#60;134.174.140.230&#58;9615?noUDP&sock=26378_1331_5&#62;&#58; no match found
/var/log/condor/NegotiatorLog&#58;05/14/15 23&#58;19&#58;18       Rejected 4.0 webportal@.... &#60;134.174.140.230&#58;9615?noUDP&sock=26378_1331_5&#62;&#58; no match found
/var/log/condor/SchedLog&#58;05/14/15 23&#58;19&#58;18 (pid&#58;26385) Finished negotiating for webportal in local pool&#58; 0 matched, 1 rejected

I&#39;ll be calling it quits for the night at midnight EST.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Michael Timony 888</pre></div><div class='update_description'><i onclick="document.location='25441#1431659472'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-15T03:11:12+00:00">May 15, 2015 03:11 AM UTC</time><a class="anchor" name="1431659472">&nbsp;</a></div><pre>Good catch. The URL should be&#58; <a href='http&#58;//glidein-1.sbgrid.org/vofrontend/stage/description.f58gR4.cfg' target='_blank' rel='nofollow'>http&#58;//glidein-1.sbgrid.org/vofrontend/stage/description.f58gR4.cfg</a>

stage_base_dir was&#58;
&#60;stage base_dir=&#34;/var/lib/gwms-frontend/web-area/stage&#34; use_symlink=&#34;True&#34; web_base_url=&#34;<a href='http&#58;//sbgrid-glidein1.in.hwlab/vofrontend/stage&#34' target='_blank' rel='nofollow'>http&#58;//sbgrid-glidein1.in.hwlab/vofrontend/stage&#34</a>;/

It&#39;s now&#58;
&#60;stage base_dir=&#34;/var/lib/gwms-frontend/web-area/stage&#34; use_symlink=&#34;True&#34; web_base_url=&#34;http&#58;//<a href='http&#58;//glidein-1.sbgrid.org/vofrontend/stage&#34' target='_blank' rel='nofollow'>http&#58;//glidein-1.sbgrid.org/vofrontend/stage&#34</a>;/&#62;

Looks like we had the internal hostname in the file. It is behind a firewall, we are using a  1&#58;1 NAT and all ports should be accessible from outside the local network.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Michael Timony 888</pre></div><div class='update_description'><i onclick="document.location='25441#1431659099'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-15T03:04:59+00:00">May 15, 2015 03:04 AM UTC</time><a class="anchor" name="1431659099">&nbsp;</a></div><pre>Hi Mick,

We&#39;re making progress, but I see a new error. The glideins are failing with

Validation failed in wget.

Failed to load file &#39;description.f58gR4.cfg&#39; from &#39;<a href='http&#58;//sbgrid-glidein1.in.hwlab/vofrontend/stage&#39' target='_blank' rel='nofollow'>http&#58;//sbgrid-glidein1.in.hwlab/vofrontend/stage&#39</a>; using proxy &#39;spserv01.sprace.org.br&#58;3128&#39;.

This doesn&#39;t look like a valid hostname. Can you double-check your frontend.xml setting for web_base_url in the &#60;stage&#62; section?

Also, it&#39;s ok if you have the IU factory off while we get you up and running, but we highly recommend you add it back in eventually, to have some redundancy, for whenever gfactory-1.t2.ucsd.edu is down for maintenance.

Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='25441#1431657920'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-15T02:45:20+00:00">May 15, 2015 02:45 AM UTC</time><a class="anchor" name="1431657920">&nbsp;</a></div><pre>Hi Jeff,

I replaced trust_domain=&#34;OSG&#34; with trust_domain=&#34;grid&#34;, reconfigured the frontend and restarted both it and condor and no success.

I also remove the line define the collecter at iu.edu&#58;

&#60;collector DN=&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=glidein.grid.iu.edu&#34; comment=&#34;IU Factory&#34; factory_identity=&#34;gfactory@....&#34; my_identity=&#34;fesbgrid@....&#34; node=&#34;glidein.grid.iu.edu&#34;/&#62;

Which leave the UCSD factory as the only collector&#58;

&#60;collector DN=&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=gfactory-1.t2.ucsd.edu&#34; comment=&#34;UCSD Factory&#34; factory_identity=&#34;gfactory@....&#34; my_identity=&#34;fesbgrid@....&#34; node=&#34;gfactory-1.t2.ucsd.edu&#34;/&#62;

The condor_status error message went away, and I don&#39;t see any other obvious error message and jobs are still being rejected.

Thanks
Mick

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Michael Timony 888</pre></div><div class='update_description'><i onclick="document.location='25441#1431647459'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-14T23:50:59+00:00">May 14, 2015 11:50 PM UTC</time><a class="anchor" name="1431647459">&nbsp;</a></div><pre>Hi Mick,

I see one other issue with your frontend.xml you sent us. In the credential section, I see&#58;
trust_domain=&#34;OSG&#34;

However it should be&#58;
trust_domain=&#34;grid&#34;

Please try changing this and do a frontend reconfig.

Thanks,
Jeff Dost
OSG Glidein Factory Operations

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='25441#1431644446'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-14T23:00:46+00:00">May 14, 2015 11:00 PM UTC</time><a class="anchor" name="1431644446">&nbsp;</a></div><pre>Adding myself as cc to watch

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bodhitha Jayatilaka 2312</pre></div><div class='update_description'><i onclick="document.location='25441#1431644097'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-14T22:54:57+00:00">May 14, 2015 10:54 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1431644097">&nbsp;</a></div><pre>Begin forwarded message&#58;
From&#58; Mick T. &#60;timony@....&#62;
Date&#58; May 14, 2015 at 6&#58;32&#58;35 PM EDT
To&#58; &#60;goc@....&#62;
Subject&#58; [goc] Fwd&#58; [Osg-gfactory-support] Rebuilding SBGrid Glidein&#58; glidein-1.sbgrid.org
Reply-To&#58; &#60;gocmail+owners@....&#62;
Hi,

Professor Piotr Sliz asked me to forward this e-mail chain to this mailing list.

The full thread is viewable at&#58;

<a href='https&#58;//physics-mail.ucsd.edu/pipermail/osg-gfactory-support/2015-May/023711.html' target='_blank' rel='nofollow'>https&#58;//physics-mail.ucsd.edu/pipermail/osg-gfactory-support/2015-May/023711.html</a>

Thanks

--
Mick Timony
Scientific Web Services Developer
SBGrid Consortium - SBGrid.org
Harvard Medical School
617-432-5608 Extension 76
--

---------- Forwarded message ----------
From&#58; Mick T. &#60;timony@....&#62;
Date&#58; Thu, May 14, 2015 at 12&#58;42 PM
Subject&#58; Re&#58; [Osg-gfactory-support] Rebuilding SBGrid Glidein&#58; glidein-1.sbgrid.org
To&#58; Brendan Dennis &#60;bmdennis@....&#62;
Cc&#58; &#34;osg-gfactory-support@....&#34; &#60;osg-gfactory-support@....&#62;, Justin O&#39;Connor &#60;oconnor@....&#62;

Rerunning voms-proxy-init solved that problem.

Now I&#39;m not sure if changes the schedd in the frontend.xml made any difference as jobs are still in an idle state.

<div id='show_59284865' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_59284865'>Here&#39;s some message from various log files that may help.

/var/log/condor/MasterLog&#58;
05/14/15 12&#58;36&#58;09       Rejected 2.0 webportal@.... &#60;134.174.140.230&#58;9615?noUDP&sock=31648_aede_5&#62;&#58; no match found
/var/log/condor/NegotiatorLog
05/14/15 12&#58;36&#58;09 ---------- Started Negotiation Cycle ----------
05/14/15 12&#58;36&#58;09 Phase 1&#58;  Obtaining ads from collector ...
05/14/15 12&#58;36&#58;09 Not considering preemption, therefore constraining idle machines with ifThenElse(State == &#34;Claimed&#34;,&#34;Name State Activity StartdIpAddr AccountingGroup Owner RemoteUser Requirements SlotWeight ConcurrencyLimits&#34;,&#34;&#34;)
05/14/15 12&#58;36&#58;09   Getting startd private ads ...
05/14/15 12&#58;36&#58;09   Getting Scheduler, Submitter and Machine ads ...
05/14/15 12&#58;36&#58;09   Sorting 14 ads ...
05/14/15 12&#58;36&#58;09 Got ads&#58; 14 public and 12 private
05/14/15 12&#58;36&#58;09 Public ads include 1 submitter, 12 startd
05/14/15 12&#58;36&#58;09 Phase 2&#58;  Performing accounting ...
05/14/15 12&#58;36&#58;09 Phase 3&#58;  Sorting submitter ads by priority ..
05/14/15 12&#58;36&#58;09 Phase 4.1&#58;  Negotiating with schedds ...
05/14/15 12&#58;36&#58;09   Negotiating with webportal@.... at &#60;134.174.140.230&#58;9615?noUDP&sock=31648_aede_5&#62;
05/14/15 12&#58;36&#58;09 0 seconds so far
05/14/15 12&#58;36&#58;09     Request 00002.00000&#58;  (request count 1 of 1)
05/14/15 12&#58;36&#58;09       Rejected 2.0 webportal@.... &#60;134.174.140.230&#58;9615?noUDP&sock=31648_aede_5&#62;&#58; no match found
05/14/15 12&#58;36&#58;09     Got NO_MORE_JOBS;  done negotiating
05/14/15 12&#58;36&#58;09  negotiateWithGroup resources used scheddAds length 0
05/14/15 12&#58;36&#58;09 ---------- Finished Negotiation Cycle ----------
/var/log/gwms-frontend/group_main/main.all.log
[2015-05-14 12&#58;40&#58;00,929] INFO&#58; glideinFrontendElement&#58;691&#58; Advertising 44 glideresource classads to the user pool
[2015-05-14 12&#58;40&#58;00,929] DEBUG&#58; glideinFrontendInterface&#58;1332&#58; CONDOR ADVERTISE /tmp/gfi_ad_batch_381621600_533_glidein.grid.iu.edu UPDATE_MASTER_AD glidein.grid.iu.edu True
[2015-05-14 12&#58;40&#58;00,929] INFO&#58; classadSupport&#58;212&#58; There are 44 classads to advertise
[2015-05-14 12&#58;40&#58;00,943] DEBUG&#58; classadSupport&#58;352&#58; CONDOR ADVERTISE /tmp/gfi_ar_381621600_585 UPDATE_AD_GENERIC None True True
[2015-05-14 12&#58;40&#58;01,253] ERROR&#58; glideinFrontendInterface&#58;731&#58; Advertising failed for factory pool glidein.grid.iu.edu&#58;
Traceback (most recent call last)&#58;
File &#34;/usr/lib/python2.6/site-packages/glideinwms/frontend/glideinFrontendInterface.py&#34;, line 729, in do_advertize_batch_one
advertizeWorkFromFile(factory_pool, filename, remove_file=remove_files, is_multi=frontendConfig.advertise_use_multi)
File &#34;/usr/lib/python2.6/site-packages/glideinwms/frontend/glideinFrontendInterface.py&#34;, line 604, in advertizeWorkFromFile
exe_condor_advertise(fname, &#34;UPDATE_MASTER_AD&#34;, factory_pool, is_multi=is_multi)
File &#34;/usr/lib/python2.6/site-packages/glideinwms/frontend/glideinFrontendInterface.py&#34;, line 1335, in exe_condor_advertise
is_multi, pool)
File &#34;/usr/lib/python2.6/site-packages/glideinwms/lib/condorManager.py&#34;, line 161, in condorAdvertise
return condorExe.exe_cmd_sbin(&#34;condor_advertise&#34;,cmd_opts)
File &#34;/usr/lib/python2.6/site-packages/glideinwms/lib/condorExe.py&#34;, line 67, in exe_cmd_sbin
return iexe_cmd(cmd,stdin_data,env)
File &#34;/usr/lib/python2.6/site-packages/glideinwms/lib/condorExe.py&#34;, line 93, in iexe_cmd
raise ExeError, &#34;Unexpected Error running &#39;%s&#39;. Details&#58; %s&#34; % (cmd, ex)
ExeError&#58; Unexpected Error running &#39;/usr/sbin/condor_advertise -pool glidein.grid.iu.edu -tcp -multiple UPDATE_MASTER_AD /tmp/gfi_ad_batch_381621600_533_glidein.grid.iu.edu&#39;. Details&#58; Command &#39;/usr/sbin/condor_advertise -pool glidein.grid.iu.edu -tcp -multiple UPDATE_MASTER_AD /tmp/gfi_ad_batch_381621600_533_glidein.grid.iu.edu&#39; returned non-zero exit status 1&#58; failed to send classad to &#60;129.79.53.27&#58;9618&#62;
[2015-05-14 12&#58;40&#58;05,543] INFO&#58; glideinFrontendElement&#58;695&#58; Done advertising
[2015-05-14 12&#58;40&#58;05,551] INFO&#58; glideinFrontendElement&#58;228&#58; iterate_one status&#58; None
[2015-05-14 12&#58;40&#58;05,551] INFO&#58; glideinFrontendElement&#58;230&#58; Writing stats
[2015-05-14 12&#58;40&#58;48,067] INFO&#58; glideinFrontendElement&#58;224&#58; Iteration at Thu May 14 12&#58;40&#58;48 2015
[2015-05-14 12&#58;40&#58;48,067] INFO&#58; glideinFrontendElement&#58;288&#58; Querying schedd, entry, and glidein status using child processes.
[2015-05-14 12&#58;40&#58;48,067] DEBUG&#58; glideinFrontendElement&#58;307&#58; 4 child query processes started
Does any of that help?
Thanks
Mick

On Thu, May 14, 2015 at 12&#58;08 PM, Mick T. &#60;timony@....&#62; wrote&#58;
Hi Brendan,

That did help as I&#39;m now seeing an error message in the frontend log about authentication issues with the glidein factory at UCSD.

I&#39;ll work on this on my end as I may have a cert misconfigured. Let me know if you see anything in you logs that may be helpful.

Here&#39;s the output from my logs&#58;

#################################################
[2015-05-14 12&#58;03&#58;27,002] ERROR&#58; glideinFrontendElement&#58;1158&#58; Failed to talk to factory_pool gfactory-1.t2.ucsd.edu for entry info&#58;
Traceback (most recent call last)&#58;
File &#34;/usr/sbin/glideinFrontendElement.py&#34;, line 1153, in query_entries
factory_glidein_dict = glideinFrontendInterface.findGlideins(factory_pool_node, None, self.signatureDescript.signature_type, factory_constraint)
File &#34;/usr/lib/python2.6/site-packages/glideinwms/frontend/glideinFrontendInterface.py&#34;, line 156, in findGlideins
status.load(status_constraint)
File &#34;/usr/lib/python2.6/site-packages/glideinwms/lib/condorMonitor.py&#34;, line 285, in load
self.stored_data = self.fetch(constraint, format_list)
File &#34;/usr/lib/python2.6/site-packages/glideinwms/lib/condorMonitor.py&#34;, line 344, in fetch
return QueryExe.fetch(self, constraint=constraint, format_list=format_list)
File &#34;/usr/lib/python2.6/site-packages/glideinwms/lib/condorMonitor.py&#34;, line 271, in fetch
xml_data = condorExe.exe_cmd(self.exe_name,&#34;%s -xml %s %s&#34;%(self.resource_str,self.pool_str,constraint_str),env=self.env);
File &#34;/usr/lib/python2.6/site-packages/glideinwms/lib/condorExe.py&#34;, line 56, in exe_cmd
return iexe_cmd(cmd,stdin_data,env)
File &#34;/usr/lib/python2.6/site-packages/glideinwms/lib/condorExe.py&#34;, line 93, in iexe_cmd
raise ExeError, &#34;Unexpected Error running &#39;%s&#39;. Details&#58; %s&#34; % (cmd, ex)
ExeError&#58; Unexpected Error running &#39;/usr/bin/condor_status -any -xml -pool gfactory-1.t2.ucsd.edu -constraint &#39;(GlideinMyType=?=&#34;glidefactory&#34;) && stringListMember(&#34;sha1
&#34;,SupportedSignTypes) && ((((stringListMember(&#34;SBGrid&#34;, GLIDEIN_Supported_VOs)))) && (True))&#39;&#39;. Details&#58; Command &#39;/usr/bin/condor_status -any -xml -pool gfactory-1.t2.uc
sd.edu -constraint &#39;(GlideinMyType=?=&#34;glidefactory&#34;) && stringListMember(&#34;sha1&#34;,SupportedSignTypes) && ((((stringListMember(&#34;SBGrid&#34;, GLIDEIN_Supported_VOs)))) && (True)
)&#39;&#39; returned non-zero exit status 1&#58; Error&#58; communication error
AUTHENTICATE&#58;1003&#58;Failed to authenticate with any method
AUTHENTICATE&#58;1004&#58;Failed to authenticate using GSI
GSI&#58;5003&#58;Failed to authenticate.  Globus is reporting error (851968&#58;14).  There is probably a problem with your credentials.  (Did you run grid-proxy-init?)
Error&#58; Couldn&#39;t contact the condor_collector on gfactory-1.t2.ucsd.edu
(&#60;169.228.38.36&#58;9618&#62;).

Extra Info&#58; the condor_collector is a process that runs on the central
manager of your Condor pool and collects the status of all the machines and
jobs in the Condor pool. The condor_collector might not be running, it might
be refusing to communicate with you, there might be a network problem, or
there may be some other problem. Check with your system administrator to fix
this problem.

If you are the system administrator, check that the condor_collector is
running on gfactory-1.t2.ucsd.edu (&#60;169.228.38.36&#58;9618&#62;), check the
ALLOW/DENY configuration in your condor_config, and check the MasterLog and
CollectorLog files in your log directory for possible clues as to why the
condor_collector is not responding. Also see the Troubleshooting section of
the manual.
#################################################
Thanks
Mick

On Wed, May 13, 2015 at 6&#58;38 PM, Brendan Dennis &#60;bmdennis@....&#62; wrote&#58;
Hey Mick,
I don&#39;t know how much this matters, but I noticed the formatting of the DN for your schedd in your frontend.xml is not in the same format as the rest of the DNs. Namely, it seems to be using the traditional comma delimited path instead of slashes.
Right now it is&#58;
&#60;schedd DN=&#34;DC=com,DC=DigiCert-Grid,O=Open Science Grid,OU=Services,CN=glidein-1.sbgrid.org&#34; fullname=&#34;glidein-1.sbgrid.org&#34;/&#62;
And I&#39;m wondering if it should be this instead&#58;
&#60;schedd DN=&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=glidein-1.sbgrid.org&#34; fullname=&#34;glidein-1.sbgrid.org&#34;/&#62;

--
Brendan Dennis
UCSD Glidein Factory Operations

On Tue, May 12, 2015 at 7&#58;50 AM, Mick T. &#60;timony@....&#62; wrote&#58;
Hi Brendan,

Yes I believe all of those settings are set correctly. I&#39;ve attached a copy of our frontend.xml .

If needed I can provide a copy of the condor config files and a copy of the log files for both Condor and the Frontend.

Thanks
Mick

On Tue, May 12, 2015 at 1&#58;46 AM, Brendan Dennis &#60;bmdennis@....&#62; wrote&#58;
Hi Mick,
From checking our docs, I&#39;d say the first step would be to check and make sure that the following changes have been made to your configuration for the SDSC factory&#58;

In your frontend security section please set&#58;
security_name=&#34;SBGrid&#34;

In factory collector section use the following&#58;
DN=&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=gfactory-1.t2.ucsd.edu&#34;
factory_identity=&#34;gfactory@....&#34;
my_identity=&#34;fesbgrid@....&#34;
node=&#34;gfactory-1.t2.ucsd.edu&#34;

In the pilot proxy section please use&#58;
security_class=&#34;frontend&#34;

Please also add stringListMember(&#34;SBGrid&#34;,GLIDEIN_Supported_VOs) to your factory query_expr.
From there, we can see if submission via the SDSC factory works, and if so, we can make sure everything is correct for GOC as well.
If that&#39;s all already set, then I&#39;ll talk to Jeff about further troubleshooting steps. We may need to kick it over to the frontend people.

--
Brendan Dennis
UCSD Glidein Factory Operations

On Mon, May 11, 2015 at 11&#58;05 AM, Mick T. &#60;timony@....&#62; wrote&#58;
Hi,

Last year I set up a new Glidein for the SBGrid called glidein-1.sbgrid.org. That server had hardware issues and we never ran it in production. We have new hardware and I&#39;ve rebuild the system and need help configuring Glidein and Condor.

I&#39;ve installed Glidein and Condor using the instructions here, using the OSG 3.2 release&#58;

<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallGlideinWMSFrontend' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallGlideinWMSFrontend</a>

I can see Glidein&#39;s being advertised, but when I submit jobs they sit in an idle state and are never run.

What should I do for next steps and what log files and configuration files should I send you to help me debug this?

Or would you rather I open I ticket at <a href='https&#58;//ticket.grid.iu.edu/submit' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/submit</a> ?

Thanks!
--
Mick Timony
Scientific Web Services Developer
SBGrid Consortium - SBGrid.org
Harvard Medical School
617-432-5608 Extension 76
--

_______________________________________________
Osg-gfactory-support mailing list
Osg-gfactory-support@....
<a href='https&#58;//physics-mail.ucsd.edu/mailman/listinfo/osg-gfactory-support' target='_blank' rel='nofollow'>https&#58;//physics-mail.ucsd.edu/mailman/listinfo/osg-gfactory-support</a>

--
Mick Timony
Scientific Web Services Developer
SBGrid Consortium - SBGrid.org
Harvard Medical School
617-432-5608 Extension 76
--

--
You received this message because you are subscribed to the Google Groups &#34;GOC Mailinglist&#34; group.
To unsubscribe from this group and stop receiving emails from it, send an email to gocmail+unsubscribe@.....
For more options, visit <a href='https&#58;//groups.google.com/d/optout.' target='_blank' rel='nofollow'>https&#58;//groups.google.com/d/optout.</a>
</div><script type='text/javascript'>
        $('#show_59284865').click(function() {
            $('#detail_59284865').slideDown("normal");
            $('#show_59284865').hide();
            $('#hide_59284865').show();
        });
        $('#hide_59284865').click(function() {
            $('#detail_59284865').slideUp();
            $('#hide_59284865').hide();
            $('#show_59284865').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F25441">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
