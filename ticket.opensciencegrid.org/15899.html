<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[15899] Need Ticket - GratiaWeb is slow</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=15899" method="post">
<div class="page-header">
    <h3><span class="muted">15899</span> / Need Ticket - GratiaWeb is slow</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Chander Sehgal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Chander Sehgal</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">GRATIA Ops</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-07-09</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Scott Teige <span class="muted"> / OSG Operations Infrastructure</span></div><div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839">INC000000389839</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/15899", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/15899?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/15899?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Need%20Ticket%20-%20GratiaWeb%20is%20slow%20ISSUE%3D15899%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='15899#1374681446'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-24T15:57:26+00:00">Jul 24, 2013 03:57 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1374681446">&nbsp;</a></div><pre>Chander just stopped by to update me on the status for this issue&#58; the response time is acceptable now, and this issue can be closed.

-- by gerard1 at Wed Jul 24 15&#58;56&#58;57 UTC 2013

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839</a></pre></div><div class='update_description'><i onclick="document.location='15899#1374611192'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-23T20:26:32+00:00">Jul 23, 2013 08:26 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1374611192">&nbsp;</a></div><pre>Change done on gr13x5&#58;/etc/my.cnf

# To prevent too large of innodb history list which affects inserts
innodb_max_purge_lag=50000
innodb_flush_method=O_DSYNC #InnoDB uses O_SYNC to open and flush the log files, and fsync() to flush the data files

-- by gerard1 at Tue Jul 23 20&#58;25&#58;11 UTC 2013

Hi Chander,

optimization is done, now the backup takes less time than before. I also added a couple tweaks in the DB setup that may have some beneficial impact on the performance. Please keep an eye on the performance for the next few days and let me know if it&#39;s slow (and when) or not.

This should be the last &#39;performance test&#39;, if this does not work well I&#39;ll shift the queries to the primary DB and use the replica for backups only.  I&#39;d like to avoid shifting to the primary DB for queries, as it may impact the data introduction process.
In the mid-term we have to replace the hardware, the opportunity will be used to rethink the gratia architecture to make it scale better.

thanks,
Gerard
-- by gerard1 at Tue Jul 23 20&#58;25&#58;11 UTC 2013

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839</a></pre></div><div class='update_description'><i onclick="document.location='15899#1374516403'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-22T18:06:43+00:00">Jul 22, 2013 06:06 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1374516403">&nbsp;</a></div><pre>Hi Gerard,

Well that is interesting… I had made a mental note on Saturday to ask you to close this ticket because things had been working good recently.  I had not checked Sunday or first thing this morning.   I just tried and it is again very slow….

Chander

From&#58; Gerard Bernabeu Altayo
Sent&#58; Monday, July 22, 2013 11&#58;41 AM
To&#58; Chander S Sehgal
Cc&#58; Tanya Levshina
Subject&#58; Re&#58; Two different queries

Hi Chander,

the DB optimization ended over the weekend, we&#39;re back to the replica DB for the queries since Saturday night. Did you observe good response times Sunday and today too?

Thanks,

Gerard Bernabeu

FermiCloud and FermiGrid Services at Fermilab

Phone (+1) 630-840-6509

On 07/22/2013 08&#58;59 AM, Chander S Sehgal wrote&#58;

Hi Gerard,

I think you can close the ticket; in the last few days the response time has been much better for the GratiaWeb queries.

<a href='https&#58;//ticket.grid.iu.edu/goc/15899' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/15899</a>

Chander
-- by gerard1 at Mon Jul 22 18&#58;05&#58;24 UTC 2013

<div id='show_654099743' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_654099743'>GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839</a>
</div><script type='text/javascript'>
        $('#show_654099743').click(function() {
            $('#detail_654099743').slideDown("normal");
            $('#show_654099743').hide();
            $('#hide_654099743').show();
        });
        $('#hide_654099743').click(function() {
            $('#detail_654099743').slideUp();
            $('#hide_654099743').hide();
            $('#show_654099743').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='15899#1374174072'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-18T19:01:12+00:00">Jul 18, 2013 07:01 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1374174072">&nbsp;</a></div><pre>Hi Chander,

this may be because today since 10&#58;18 I&#39;m running the &#39;optimization script&#39; (that was disabled on 2010) and this makes gratia-osg-prod-reports to go to the primary DB (gr12x5) instead of the replica DB (gr13x5).

If you check, today the website is very fast too&#58;

[gerard@dhcp-131-225-86-209 tmp]$ time wget <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
--2013-07-18 13&#58;58&#58;45--  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 293149 (286K) [text/html]
Saving to&#58; &#34;vo?vo=osg.24&#34;

100%[===================================================================================================================&#62;] 293,149     --.-K/s   in 0.07s

2013-07-18 13&#58;58&#58;46 (4.18 MB/s) - &#34;vo?vo=osg.24&#34; saved [293149/293149]

real    0m0.820s
user    0m0.005s
sys    0m0.010s
[gerard@dhcp-131-225-86-209 tmp]$ time wget <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
--2013-07-18 13&#58;58&#58;52--  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 293149 (286K) [text/html]
Saving to&#58; &#34;vo?vo=osg.25&#34;

100%[===================================================================================================================&#62;] 293,149     --.-K/s   in 0.07s

2013-07-18 13&#58;58&#58;54 (3.88 MB/s) - &#34;vo?vo=osg.25&#34; saved [293149/293149]

real    0m1.305s
user    0m0.002s
<div id='show_1374727140' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1374727140'>sys    0m0.015s
[gerard@dhcp-131-225-86-209 tmp]$

This is clearly a performance issue with the gr13x5 DB.

Gerard Bernabeu
FermiCloud and FermiGrid Services at Fermilab
Phone (+1) 630-840-6509

On 07/18/2013 12&#58;56 PM, Chander S Sehgal wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//gratia-osg-prod-reports.opensciencegrid.org/gratia-reporting/frameset?__report=/usr/share/tomcat5/webapps/gratia-reports/reports/UsageByVOByDate-ranked.rptdesign&__title&ReportTitle=Daily%20Usage%20by%20VO&DisplayMetric=WallDuration&StartDate=2013-07-11&EndDate=2013-07-18&GroupsPerChart=1000&SelType=NOT&SelectVOs=osg&amp' target='_blank' rel='nofollow'>http&#58;//gratia-osg-prod-reports.opensciencegrid.org/gratia-reporting/frameset?__report=/usr/share/tomcat5/webapps/gratia-reports/reports/UsageByVOByDate-ranked.rptdesign&__title&ReportTitle=Daily%20Usage%20by%20VO&DisplayMetric=WallDuration&StartDate=2013-07-11&EndDate=2013-07-18&GroupsPerChart=1000&SelType=NOT&SelectVOs=osg&amp</a>;__title</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Notice the difference in speed of response.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Chander</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>

-- by gerard1 at Thu Jul 18 18&#58;59&#58;55 UTC 2013

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839</a>
</div><script type='text/javascript'>
        $('#show_1374727140').click(function() {
            $('#detail_1374727140').slideDown("normal");
            $('#show_1374727140').hide();
            $('#hide_1374727140').show();
        });
        $('#hide_1374727140').click(function() {
            $('#detail_1374727140').slideUp();
            $('#hide_1374727140').hide();
            $('#show_1374727140').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='15899#1373660101'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-12T20:15:01+00:00">Jul 12, 2013 08:15 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1373660101">&nbsp;</a></div><pre>I see really slow response times as well, it seems to come from the DB&#58;

[gerard@dhcp-131-225-86-209 tmp]$ time wget <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
--2013-07-12 14&#58;54&#58;35--  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 293957 (287K) [text/html]
Saving to&#58; &#34;vo?vo=osg.16&#34;

100%[===================================================================================================================================================================================================&#62;] 293,957     --.-K/s   in 0.08s

2013-07-12 14&#58;55&#58;16 (3.38 MB/s) - &#34;vo?vo=osg.16&#34; saved [293957/293957]

real	0m41.214s
user	0m0.004s
sys	0m0.012s
[gerard@dhcp-131-225-86-209 tmp]$

Looking at the DB monitoring I can see how it was idle, and right after I started the wget the server started doing some tasks for ~41 seconds. Se dstat below, each line is 1 second&#58;

[root@gr13x5 ~]# dstat
----total-cpu-usage---- -dsk/total- -net/total- ---paging-- ---system--
usr sys idl wai hiq siq| read  writ| recv  send|  in   out | int   csw
16   1  70  13   0   0|  19M 2977k|   0     0 |   0   0.1 |1053  1416
0   0  99   1   0   0|8192B  144k|  16k 7256B|   0     0 | 128   116
0   1  99   0   0   1|   0     0 |  14k 9892B|   0     0 | 125    76
0   0 100   0   0   0|8192B  112k|  28k  816B|   0     0 |  91    70
0   0 100   0   0   0|   0   928k|  20k  750B|   0     0 | 133    82
0   0 100   0   0   0|   0    64k|  14k  750B|   0     0 |  71    62
0   0 100   0   0   0|   0  7800k|  20k  768B|   0     0 | 303   128
1   1  88   9   0   0|8192B   82M|  19k  953B|   0     0 |3059  1769
0   0  75  25   0   0|   0   272k|  11k 2086B|   0     0 |  77    71
0   0  85  15   0   0|8192B 7528k|  14k  816B|   0     0 | 477   184
10   0  89   1   0   0|8192B 9944k|  15k 1846B|   0     0 | 407   188
<div id='show_155640352' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_155640352'>24   0  76   0   0   0|   0  3360k|  17k 4720B|   0     0 | 464   112
26   1  61  11   0   0| 224k  105M|  15k  748B|   0     0 |6524  6220
24   0  70   6   0   0|  16k 6456k|  19k  682B|   0     0 | 452   110
26   0  73   0   0   0|   0  6592k|  17k  748B|   0     0 | 293   139
24   0  76   0   0   0|   0    64k|  17k  814B|   0     0 | 190   118
27   0  73   0   0   0|   0     0 |  12k  951B|   0     0 | 153    53
24   0  72   4   0   0| 296k  352k|  52k 2200B|   0     0 | 318   192
25   0  74   1   0   0|  72k  168k|  17k 3904B|   0     0 | 201    95
24   0  76   0   0   0|   0     0 |  12k  951B|   0     0 | 167    69
26   0  74   0   0   0|   0   128k|  18k  880B|   0     0 | 194   119
24   0  76   0   0   0|   0     0 |6013B   13k|   0     0 | 221   106
26   0  74   0   0   0|8192B  336k|  16k  814B|   0     0 | 202   104
24   0  76   0   0   0|   0    72k|  19k  814B|   0     0 | 175    94
26   0  74   0   0   0|   0  7288k|  26k  814B|   0     0 | 539   205
23   0  77   0   0   0|   0    64k|  15k 5157B|   0     0 | 233   137
24   0  76   0   0   0|   0    32k|  12k 1215B|   0     0 | 179    80
25   0  74   0   0   0|   0   144k|  10k  682B|   0     0 | 207    82
25   0  75   0   0   0|8192B  104k|  15k  748B|   0     0 | 172    81
25   0  75   0   0   0|   0    96k|  12k 1017B|   0     0 | 188    73
25   0  74   1   0   0|   0   160k|  16k 1078B|   0     0 | 194   103
25   0  73   2   0   0| 168k  224k|  35k 4302B|   0     0 | 237   144
25   0  75   0   0   0|8192B  224k|5150B   12k|   0     0 | 208   106
23   0  77   0   0   0|   0    72k|  13k   22k|   0     0 | 193   110
25   0  74   1   0   0|  16k 8288k|2168B  682B|   0     0 | 482   164
25   0  75   0   0   0|   0  5368k|  17k  698B|   0     0 | 274    93
30   2  59   9   0   0|   0    10M|6209B 1751B|   0     0 | 921   793
22   0  77   1   0   0|8192B  824k|  13k 1276B|   0     0 | 250   168
31   0  69   0   0   0|8192B   40k|  10k  880B|   0     0 | 166    75
21   0  79   0   0   0|   0   192k|  20k 1347B|   0     0 | 197   111
27   0  73   0   0   0|8192B   32k|  15k   34k|   0     0 | 209   112
21   0  79   0   0   0|   0   112k|  21k   13k|   0     0 | 200    88
26   0  74   0   0   0|   0   320k|  19k  946B|   0     0 | 239   145
24   0  76   0   0   0|   0   600k|  13k  682B|   0     0 | 222    58
26   0  74   0   0   0|8192B   72k|  12k  814B|   0     0 | 168    90
24   0  76   0   0   0|   0    64k|  13k  634B|   0     0 | 161    68
25   1  74   1   0   0|  16k 9552k|  15k  937B|   0     0 | 577   279
25   1  57  19   0   0|1408k   14M| 382k 8452B|   0     0 |1493  1212
26   0  49  25   0   0|1784k 1672k| 402k 8272B|   0     0 | 765   678
24   0  60  16   0   0|2176k 2104k| 513k  9.8k|   0     0 |1073   984
11   0  71  18   0   0|1984k 2144k| 502k   42k|   0     0 | 811   804
0   0  85  15   0   0|2008k 2016k| 484k   32k|   0     0 | 638   709
0   0  84  15   0   1|1608k 2088k| 540k   10k|   0     0 | 590   657
1   0  79  20   0   0|2688k 2200k| 493k 9394B|   0     0 | 627   735
0   0  90  10   0   0|1344k 1856k| 365k 6886B|   0     0 | 431   513
0   0  99   1   0   0|   0   184k|  18k 1210B|   0     0 | 112   113

I do not see any special task running in gr13x5, not any special load on it (<a href='http&#58;//ganglia1.fnal.gov/ganglia/?r=hour&c=Gratia&h=gr13x5.fnal.gov&mc=2' target='_blank' rel='nofollow'>http&#58;//ganglia1.fnal.gov/ganglia/?r=hour&c=Gratia&h=gr13x5.fnal.gov&mc=2</a>). Further queries do not take that much time (~15 seconds), probably because results are cached.

What I see is an unusual behaviour in gr13x6, a test server that&#39;s somehow missbehaving (crazy heartbeat) and consuming CPU. Both VMs are running on the same HW, this may help slowdown.... I&#39;ve stopped heartbeat there but queries do not go faster...

While running the query I see 100% CPU use for a while, there&#39;s not much we can do with this besides running it in a fastest CPU&#58;
PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
1727 mysql     15   0  9.9g 9.1g 5436 S 98.0 51.7  10616&#58;55 mysqld

Optimizing the query may be another option, as well as upgrading to a newer mysql version (documentation states newer versions have some performance benefits)&#58;

Here are tow of the queries that the web does&#58;

Id&#58; 1474634
User&#58; reader
Host&#58; gratiaweb1.grid.iu.edu&#58;56128
db&#58; gratia
Command&#58; Query
Time&#58; 1
State&#58; Sending data
Info&#58; SELECT
S.SiteName   ,
sum(R.Cores*R.WallDuration)/3600 as WallHours
FROM
MasterSummaryData R
JOIN
Probe P on R.ProbeName = P.probename
JOIN
Site S on S.siteid = P.siteid
JOIN
VONameCorrection VC ON (VC.corrid=R.VOcorrid)
JOIN
VO on (VC.void = VO.void)

WHERE
R.EndTime &#62;= &#39;2013-06-28 20&#58;12&#58;53&#39;         AND
R.EndTime &#60; &#39;2013-07-12 20&#58;12&#58;53&#39;       AND
S.SiteName regexp &#39;.*&#39;        AND
VO.VOName regexp &#39;osg&#39;  AND
VC.VOName regexp &#39;.*&#39;    AND
(NOT (VC.VOName regexp &#39;NONE&#39;           )) AND
(R.ResourceType regexp &#39;^Batch$&#39;             or R.ResourceType = &#39;&#39;) AND
(&#39;true&#39;            =&#39;true&#39; OR ApplicationExitCode=0) AND
(&#39;true&#39;              =&#39;true&#39; OR ApplicationExitCode!=0) AND
(NOT (S.SiteName regexp &#39;NONE|Generic|Obsolete&#39;               )) AND
(NOT (VO.VOName regexp &#39;Unknown|unknown|other&#39;         )) AND
R.WallDuration &#60; 1100000000 AND
R.ProbeName regexp &#39;.*&#39;     AND
(NOT (R.CommonName regexp &#39;NONE&#39;           )) AND
R.CommonName regexp &#39;.*&#39;

GROUP BY
S.SiteName
HAVING sum(R.Cores*R.WallDuration)/3600 &#62;= 10

Id&#58; 1474638
User&#58; reader
Host&#58; gratiaweb1.grid.iu.edu&#58;56131
db&#58; gratia
Command&#58; Query
Time&#58; 3
State&#58; Copying to tmp table
Info&#58; SELECT
S.SiteName   ,
truncate( unix_timestamp(EndTime) / 86400   , 0 ) * 86400    as time,
sum(Cores*WallDuration)/3600
FROM
MasterSummaryData R
JOIN
Probe P on R.ProbeName = P.probename
JOIN
Site S on S.siteid = P.siteid
JOIN
VONameCorrection VC ON (VC.corrid=R.VOcorrid)
JOIN
VO on (VC.void = VO.void)

WHERE
R.EndTime &#62;= &#39;2013-06-29 00&#58;00&#58;00&#39;         AND
R.EndTime &#60; &#39;2013-07-12 23&#58;59&#58;59&#39;       AND
S.SiteName regexp &#39;.*&#39;        AND
VO.VOName regexp &#39;osg&#39;  AND
VC.VOName regexp &#39;.*&#39;    AND
(NOT (VC.VOName regexp &#39;NONE&#39;           )) AND
(R.ResourceType regexp &#39;^Batch$&#39;             or R.ResourceType = &#39;&#39;) AND
R.CommonName regexp &#39;.*&#39;    AND
(&#39;true&#39;            =&#39;true&#39; OR ApplicationExitCode=0) AND
(&#39;true&#39;              =&#39;true&#39; OR ApplicationExitCode!=0) AND
(NOT (S.SiteName regexp &#39;NONE|Generic|Obsolete&#39;               )) AND
(NOT (R.CommonName regexp &#39;NONE&#39;           )) AND
(NOT (VO.VOName regexp &#39;Unknown|unknown|other&#39;         )) AND
R.WallDuration &#60; 1100000000 AND
R.ProbeName regexp &#39;.*&#39;
AND WallDuration &#62; 0
GROUP BY
S.SiteName   ,
time

-- by gerard1 at Fri Jul 12 20&#58;14&#58;21 UTC 2013

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839</a>
</div><script type='text/javascript'>
        $('#show_155640352').click(function() {
            $('#detail_155640352').slideDown("normal");
            $('#show_155640352').hide();
            $('#hide_155640352').show();
        });
        $('#hide_155640352').click(function() {
            $('#detail_155640352').slideUp();
            $('#hide_155640352').hide();
            $('#show_155640352').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='15899#1373658489'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-12T19:48:09+00:00">Jul 12, 2013 07:48 PM UTC</time> by <b>Chander Sehgal</b><a class="anchor" name="1373658489">&nbsp;</a></div><pre>2&#58;46pm on Friday afternoon… tried 4 different GratiaWeb queries.  All of them hung and no results were delivered

Chander</pre></div><div class='update_description'><i onclick="document.location='15899#1373568670'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-11T18:51:10+00:00">Jul 11, 2013 06:51 PM UTC</time> by <b>Chander Sehgal</b><a class="anchor" name="1373568670">&nbsp;</a></div><pre>I happy to help by using a special debug environment; just send me the link to use….

Chander</pre></div><div class='update_description'><i onclick="document.location='15899#1373557324'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-11T15:42:04+00:00">Jul 11, 2013 03:42 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1373557324">&nbsp;</a></div><pre>Hi Chander,

would it be useful to you if I deploy a standard local gratiaweb like this <a href='http&#58;//gratia-fermi-osg-reports.fnal.gov&#58;8100/gratia/' target='_blank' rel='nofollow'>http&#58;//gratia-fermi-osg-reports.fnal.gov&#58;8100/gratia/</a> but pointing to the production OSG DB?

If you can fetch the graphs from there (once it points to the right DB) I may be able to better see what&#39;s going on.

Gerard
-- by gerard1 at Thu Jul 11 15&#58;41&#58;26 UTC 2013

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839</a></pre></div><div class='update_description'><i onclick="document.location='15899#1373556430'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-11T15:27:10+00:00">Jul 11, 2013 03:27 PM UTC</time> by <b>Chander Sehgal</b><a class="anchor" name="1373556430">&nbsp;</a></div><pre>This morning at 7am about ½ the queries were either hanging or taking over 45 seconds.  The other ½ were completing quickly.

Chander</pre></div><div class='update_description'><i onclick="document.location='15899#1373556079'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-11T15:21:19+00:00">Jul 11, 2013 03:21 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1373556079">&nbsp;</a></div><pre>Hi,

I tried now in the morning, while the backup is running, and I see it working ok (10 seconds, see below).

Should I close the incident?

Gerard

[gerard@dhcp-131-225-86-209 tmp]$ time wget <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
--2013-07-11 10&#58;19&#58;06--  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 287098 (280K) [text/html]
Saving to&#58; &#34;vo?vo=osg.15&#34;

100%[======================================&#62;] 287,098     --.-K/s   in 0.08s

2013-07-11 10&#58;19&#58;17 (3.30 MB/s) - &#34;vo?vo=osg.15&#34; saved [287098/287098]

real	0m10.385s
user	0m0.005s
sys	0m0.010s
[gerard@dhcp-131-225-86-209 tmp]$

-- by gerard1 at Thu Jul 11 15&#58;20&#58;29 UTC 2013

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839</a></pre></div><div class='update_description'><i onclick="document.location='15899#1373404512'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-09T21:15:12+00:00">Jul 9, 2013 09:15 PM UTC</time> by <b>Chander Sehgal</b><a class="anchor" name="1373404512">&nbsp;</a></div><pre>I will try to gather data (and keep a log) of time-of-day when these queries are slow to respond.  Based on my recollection, I cannot give you a pattern as when the system is slow.

Thanks for looking into this…

Chander</pre></div><div class='update_description'><i onclick="document.location='15899#1373402587'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-09T20:43:07+00:00">Jul 9, 2013 08:43 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1373402587">&nbsp;</a></div><pre>Maybe the issue was caused due to a pile-up of requests or parallelism with the DB backup, that runs everyday at 2&#58;32 in the morning and runs till 12&#58;46.

May it be that the slow queries always happen before 1pm?

Steve,

this is the output from the DB (3 requests)  when launching 10 parallel wgets&#58;

mysql&#62; SHOW FULL PROCESSLIST &#92;G
*************************** 1. row ***************************
Id&#58; 1
User&#58; system user
Host&#58;
db&#58; NULL
Command&#58; Connect
Time&#58; 965046
State&#58; Waiting for master to send event
Info&#58; NULL
*************************** 2. row ***************************
Id&#58; 2
User&#58; system user
Host&#58;
db&#58; NULL
Command&#58; Connect
Time&#58; 2
State&#58; Has read all relay log; waiting for the slave I/O thread to update it
Info&#58; NULL
*************************** 3. row ***************************
Id&#58; 1137971
User&#58; reader
Host&#58; localhost
db&#58; gratia
Command&#58; Sleep
Time&#58; 10586
State&#58;
<div id='show_797123654' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_797123654'>Info&#58; NULL
*************************** 4. row ***************************
Id&#58; 1160342
User&#58; root
Host&#58; localhost
db&#58; NULL
Command&#58; Query
Time&#58; 0
State&#58; NULL
Info&#58; SHOW FULL PROCESSLIST
*************************** 5. row ***************************
Id&#58; 1160345
User&#58; reader
Host&#58; gratiaweb1.grid.iu.edu&#58;55863
db&#58; gratia
Command&#58; Query
Time&#58; 7
State&#58; Sending data
Info&#58; SELECT
S.SiteName   ,
sum(R.Cores*R.WallDuration)/3600 as WallHours
FROM
MasterSummaryData R
JOIN
Probe P on R.ProbeName = P.probename
JOIN
Site S on S.siteid = P.siteid
JOIN
VONameCorrection VC ON (VC.corrid=R.VOcorrid)
JOIN
VO on (VC.void = VO.void)

WHERE
R.EndTime &#62;= &#39;2013-06-25 20&#58;25&#58;06&#39;         AND
R.EndTime &#60; &#39;2013-07-09 20&#58;25&#58;06&#39;       AND
S.SiteName regexp &#39;.*&#39;        AND
VO.VOName regexp &#39;osg&#39;  AND
VC.VOName regexp &#39;.*&#39;    AND
(NOT (VC.VOName regexp &#39;NONE&#39;           )) AND
(R.ResourceType regexp &#39;^Batch$&#39;             or R.ResourceType = &#39;&#39;) AND
(&#39;true&#39;            =&#39;true&#39; OR ApplicationExitCode=0) AND
(&#39;true&#39;              =&#39;true&#39; OR ApplicationExitCode!=0) AND
(NOT (S.SiteName regexp &#39;NONE|Generic|Obsolete&#39;               )) AND
(NOT (VO.VOName regexp &#39;Unknown|unknown|other&#39;         )) AND
R.WallDuration &#60; 1100000000 AND
R.ProbeName regexp &#39;.*&#39;     AND
(NOT (R.CommonName regexp &#39;NONE&#39;           )) AND
R.CommonName regexp &#39;.*&#39;

GROUP BY
S.SiteName
HAVING sum(R.Cores*R.WallDuration)/3600 &#62;= 10
*************************** 6. row ***************************
Id&#58; 1160346
User&#58; reader
Host&#58; gratiaweb1.grid.iu.edu&#58;55864
db&#58; gratia
Command&#58; Query
Time&#58; 7
State&#58; Sending data
Info&#58; SELECT
S.SiteName   ,
sum(R.Njobs)
FROM
MasterSummaryData R
JOIN
Probe P on R.ProbeName = P.probename
JOIN
Site S on S.siteid = P.siteid
JOIN
VONameCorrection VC ON (VC.corrid=R.VOcorrid)
JOIN
VO on (VC.void = VO.void)

WHERE
R.EndTime &#62;= &#39;2013-06-25 20&#58;25&#58;06&#39;         AND
R.EndTime &#60; &#39;2013-07-09 20&#58;25&#58;06&#39;       AND
S.SiteName regexp &#39;.*&#39;        AND
VO.VOName regexp &#39;osg&#39;  AND
VC.VOName regexp &#39;.*&#39;    AND
(NOT (VC.VOName regexp &#39;NONE&#39;           )) AND
(R.ResourceType regexp &#39;^Batch$&#39;             or R.ResourceType = &#39;&#39;) AND
(&#39;true&#39;            =&#39;true&#39; OR ApplicationExitCode=0) AND
(&#39;true&#39;              =&#39;true&#39; OR ApplicationExitCode!=0) AND
(NOT (S.SiteName regexp &#39;NONE|Generic|Obsolete&#39;               )) AND
(NOT (VO.VOName regexp &#39;Unknown|unknown|other&#39;         )) AND
R.WallDuration &#60; 1100000000 AND
R.ProbeName regexp &#39;.*&#39;     AND
(NOT (R.CommonName regexp &#39;NONE&#39;           )) AND
R.CommonName regexp &#39;.*&#39;

GROUP BY
S.SiteName
*************************** 7. row ***************************
Id&#58; 1160349
User&#58; reader
Host&#58; gratiaweb1.grid.iu.edu&#58;55867
db&#58; gratia
Command&#58; Query
Time&#58; 7
State&#58; Copying to tmp table
Info&#58; SELECT
S.SiteName   ,
truncate( unix_timestamp(EndTime) / 86400   , 0 ) * 86400    as time,
sum(IF(CommonName regexp &#39;Thain&#39; AND Cores = 1, 8, Cores)*WallDuration)/3600
FROM
MasterSummaryData R
JOIN
Probe P on R.ProbeName = P.probename
JOIN
Site S on S.siteid = P.siteid
JOIN
VONameCorrection VC ON (VC.corrid=R.VOcorrid)
JOIN
VO on (VC.void = VO.void)

WHERE
(R.ResourceType regexp &#39;^Batch$&#39;             or R.ResourceType = &#39;&#39;) AND
EndTime &#62;= &#39;2013-06-26 00&#58;00&#58;00&#39;         AND
EndTime &#60; &#39;2013-07-09 23&#58;59&#58;59&#39;       AND
S.SiteName regexp &#39;.*&#39;        AND
VO.VOName regexp &#39;osg&#39;  AND
R.CommonName regexp &#39;.*&#39;    AND
(NOT (S.SiteName regexp &#39;NONE|Generic|Obsolete&#39;               )) AND
(NOT (R.CommonName regexp &#39;NONE&#39;           )) AND
(NOT (VO.VOName regexp &#39;Unknown|unknown|other&#39;         )) AND
R.ProbeName regexp &#39;.*&#39;     AND
WallDuration &#60; 1100000000
AND WallDuration &#62; 0
GROUP BY
S.SiteName   ,
time
7 rows in set (0.00 sec)

Also note that we&#39;re running a quite old mysql version (5.0.95), newer versions have many performance improvements&#58;

<a href='http&#58;//dev.mysql.com/tech-resources/articles/introduction-to-mysql-55.html' target='_blank' rel='nofollow'>http&#58;//dev.mysql.com/tech-resources/articles/introduction-to-mysql-55.html</a>

However upgrading is clearly not a short-term solution.

-- by gerard1 at Tue Jul 09 20&#58;42&#58;19 UTC 2013

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839</a>
</div><script type='text/javascript'>
        $('#show_797123654').click(function() {
            $('#detail_797123654').slideDown("normal");
            $('#show_797123654').hide();
            $('#hide_797123654').show();
        });
        $('#hide_797123654').click(function() {
            $('#detail_797123654').slideUp();
            $('#hide_797123654').hide();
            $('#show_797123654').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='15899#1373400920'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-09T20:15:20+00:00">Jul 9, 2013 08:15 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1373400920">&nbsp;</a></div><pre>reply from&#58; timm@....

What’s the output of

SHOW FULL PROCESSLIST &#92;G
In mysql on gr13x5

It could be that things are slow during the backups in the morning, but now not so bad.

Steve

From&#58; Fermilab Service Desk [mailto&#58;fermi@....]
Sent&#58; Tuesday, July 09, 2013 3&#58;01 PM
To&#58; tx+fermi_fp71@....; Karen E. Shepelak; Kevin M Hill; Neha Sharma; Keith Chadwick; Steven C Timm; Joseph B Boyd
Subject&#58; Incident INC000000389839 updated -- Need Ticket - GratiaWeb is slow

Incident INC000000389839&#60;<a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=90a03158a1ea8500a57871f8766cbd87%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true&#62' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=90a03158a1ea8500a57871f8766cbd87%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true&#62</a>; comments have been updated.

Last update&#58;
2013-07-09 15&#58;00&#58;30 CDT - Gerard Bernabeu Altayo (Additional comments)
May it bee that the webserver is getting more requests lately?

I tried a few parallel requests and it does not work very well. On the mysql server side I do not see the requests piling-up, so probably they are being (sort of) queued in the webserver.

Below you can see my test, most queries run ok, but some get stuck&#58;

[gerard@dhcp-131-225-86-209 tmp]$ for i in 0 1 2 3 4 5 6 7 8 9; do time wget <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a> & done
[1] 19779
[2] 19780
[3] 19781
[4] 19783
[5] 19784
[6] 19786
[7] 19787
[8] 19788
<div id='show_1800845377' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1800845377'>[9] 19790
[10] 19791
[gerard@dhcp-131-225-86-209 tmp]$ --2013-07-09 14&#58;40&#58;44-- <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
--2013-07-09 14&#58;40&#58;44-- <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... --2013-07-09 14&#58;40&#58;44-- <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... --2013-07-09 14&#58;40&#58;44-- <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... --2013-07-09 14&#58;40&#58;44-- <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
--2013-07-09 14&#58;40&#58;44-- <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... Resolving gratiaweb.grid.iu.edu... --2013-07-09 14&#58;40&#58;44-- <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... --2013-07-09 14&#58;40&#58;44-- <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... Resolving gratiaweb.grid.iu.edu... --2013-07-09 14&#58;40&#58;44-- <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... --2013-07-09 14&#58;40&#58;44-- <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... connected.
HTTP request sent, awaiting response... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... connected.
HTTP request sent, awaiting response... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... connected.
HTTP request sent, awaiting response... connected.
HTTP request sent, awaiting response... connected.
HTTP request sent, awaiting response... connected.
HTTP request sent, awaiting response... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13&#34;

100%[===================================================================================================================&#62;] 290,588 --.-K/s in 0.08s

2013-07-09 14&#58;40&#58;56 (3.44 MB/s) - &#34;vo?vo=osg.13&#34; saved [290588/290588]

real 0m11.668s
user 0m0.001s
sys 0m0.007s
200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13.1&#34;

0% [ ] 0 --.-K/s 200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13.2&#34;

100%[===================================================================================================================&#62;] 290,588 --.-K/s in 0.09s

2013-07-09 14&#58;41&#58;05 (3.10 MB/s) - &#34;vo?vo=osg.13.1&#34; saved [290588/290588]

real 0m21.117s
user 0m0.002s
sys 0m0.011s
200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13.3&#34;

100%[===================================================================================================================&#62;] 290,588 --.-K/s in 0.08s

2013-07-09 14&#58;41&#58;05 (3.41 MB/s) - &#34;vo?vo=osg.13.2&#34; saved [290588/290588]

real 0m21.157s
user 0m0.004s
sys 0m0.013s
100%[===================================================================================================================&#62;] 290,588 --.-K/s in 0.08s

2013-07-09 14&#58;41&#58;05 (3.51 MB/s) - &#34;vo?vo=osg.13.3&#34; saved [290588/290588]

real 0m21.214s
user 0m0.000s
sys 0m0.014s
200 OK
200 OK
Length&#58; 290588Length&#58; 290588 (284K) (284K) [text/html]
[text/html]
vo?vo=osg.13.4 has sprung into existence.
Saving to&#58; &#34;vo?vo=osg.13.4&#34;

Retrying.

0% [ ] 0 --.-K/s 200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13.5&#34;

100%[===================================================================================================================&#62;] 290,588 --.-K/s in 0.09s

2013-07-09 14&#58;41&#58;06 (3.20 MB/s) - &#34;vo?vo=osg.13.4&#34; saved [290588/290588]

real 0m21.341s
user 0m0.002s
sys 0m0.009s
200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13.6&#34;

0% [ ] 0 --.-K/s 200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13.7&#34;

100%[===================================================================================================================&#62;] 290,588 --.-K/s in 0.08s

2013-07-09 14&#58;41&#58;06 (3.47 MB/s) - &#34;vo?vo=osg.13.5&#34; saved [290588/290588]

real 0m21.435s
user 0m0.005s
sys 0m0.008s
200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13.8&#34;

100%[===================================================================================================================&#62;] 290,588 --.-K/s in 0.08s

2013-07-09 14&#58;41&#58;06 (3.33 MB/s) - &#34;vo?vo=osg.13.6&#34; saved [290588/290588]

real 0m21.478s
user 0m0.001s
sys 0m0.012s
100%[===================================================================================================================&#62;] 290,588 --.-K/s in 0.08s

2013-07-09 14&#58;41&#58;06 (3.39 MB/s) - &#34;vo?vo=osg.13.7&#34; saved [290588/290588]

real 0m21.494s
user 0m0.003s
sys 0m0.013s
100%[===================================================================================================================&#62;] 290,588 --.-K/s in 0.08s

2013-07-09 14&#58;41&#58;06 (3.53 MB/s) - &#34;vo?vo=osg.13.8&#34; saved [290588/290588]

real 0m21.522s
user 0m0.004s
sys 0m0.010s
--2013-07-09 14&#58;41&#58;07-- (try&#58; 2) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290588 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;41&#58;20-- (try&#58; 3) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290588 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;41&#58;33-- (try&#58; 4) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290588 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;41&#58;46-- (try&#58; 5) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;42&#58;03-- (try&#58; 6) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;42&#58;17-- (try&#58; 7) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;42&#58;32-- (try&#58; 8) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;42&#58;51-- (try&#58; 9) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;43&#58;09-- (try&#58;10) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;43&#58;28-- (try&#58;11) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;43&#58;49-- (try&#58;12) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;44&#58;07-- (try&#58;13) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;44&#58;25-- (try&#58;14) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;44&#58;46-- (try&#58;15) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;45&#58;04-- (try&#58;16) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290611 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;45&#58;23-- (try&#58;17) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290611 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;45&#58;41-- (try&#58;18) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290611 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;45&#58;59-- (try&#58;19) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290611 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;46&#58;19-- (try&#58;20) <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290611 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Giving up.

real 5m43.066s
user 0m0.007s
sys 0m0.010s

________________________________
Incident State&#58; Work in Progress
Caller&#58; cd-srv-goc-ops
Assignment Group&#58; Gratia Operations
Assigned To&#58; Gerard Bernabeu Altayo
Summary&#58;
Please open a ticket…
Gratiaweb has become very slow to respond when we query for certain results like
<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
The last week has been the worst.
Thanks,
Chander

</div><script type='text/javascript'>
        $('#show_1800845377').click(function() {
            $('#detail_1800845377').slideDown("normal");
            $('#show_1800845377').hide();
            $('#hide_1800845377').show();
        });
        $('#hide_1800845377').click(function() {
            $('#detail_1800845377').slideUp();
            $('#hide_1800845377').hide();
            $('#show_1800845377').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='15899#1373400089'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-09T20:01:29+00:00">Jul 9, 2013 08:01 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1373400089">&nbsp;</a></div><pre>May it bee that the webserver is getting more requests lately?

I tried a few parallel requests and it does not work very well. On the mysql server side I do not see the requests piling-up, so probably they are being (sort of) queued in the webserver.

Below you can see my test, most queries run ok, but some get stuck&#58;

[gerard@dhcp-131-225-86-209 tmp]$ for i in 0 1 2 3 4 5 6 7 8 9; do time wget <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a> & done
[1] 19779
[2] 19780
[3] 19781
[4] 19783
[5] 19784
[6] 19786
[7] 19787
[8] 19788
[9] 19790
[10] 19791
[gerard@dhcp-131-225-86-209 tmp]$ --2013-07-09 14&#58;40&#58;44--  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
--2013-07-09 14&#58;40&#58;44--  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... --2013-07-09 14&#58;40&#58;44--  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... --2013-07-09 14&#58;40&#58;44--  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... --2013-07-09 14&#58;40&#58;44--  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
--2013-07-09 14&#58;40&#58;44--  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... Resolving gratiaweb.grid.iu.edu... --2013-07-09 14&#58;40&#58;44--  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... --2013-07-09 14&#58;40&#58;44--  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... Resolving gratiaweb.grid.iu.edu... --2013-07-09 14&#58;40&#58;44--  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... --2013-07-09 14&#58;40&#58;44--  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... connected.
<div id='show_1154278326' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1154278326'>HTTP request sent, awaiting response... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... connected.
HTTP request sent, awaiting response... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... connected.
HTTP request sent, awaiting response... connected.
HTTP request sent, awaiting response... connected.
HTTP request sent, awaiting response... connected.
HTTP request sent, awaiting response... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13&#34;

100%[===================================================================================================================&#62;] 290,588     --.-K/s   in 0.08s

2013-07-09 14&#58;40&#58;56 (3.44 MB/s) - &#34;vo?vo=osg.13&#34; saved [290588/290588]

real	0m11.668s
user	0m0.001s
sys	0m0.007s
200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13.1&#34;

0% [                                                                                                                    ] 0           --.-K/s              200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13.2&#34;

100%[===================================================================================================================&#62;] 290,588     --.-K/s   in 0.09s

2013-07-09 14&#58;41&#58;05 (3.10 MB/s) - &#34;vo?vo=osg.13.1&#34; saved [290588/290588]

real	0m21.117s
user	0m0.002s
sys	0m0.011s
200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13.3&#34;

100%[===================================================================================================================&#62;] 290,588     --.-K/s   in 0.08s

2013-07-09 14&#58;41&#58;05 (3.41 MB/s) - &#34;vo?vo=osg.13.2&#34; saved [290588/290588]

real	0m21.157s
user	0m0.004s
sys	0m0.013s
100%[===================================================================================================================&#62;] 290,588     --.-K/s   in 0.08s

2013-07-09 14&#58;41&#58;05 (3.51 MB/s) - &#34;vo?vo=osg.13.3&#34; saved [290588/290588]

real	0m21.214s
user	0m0.000s
sys	0m0.014s
200 OK
200 OK
Length&#58; 290588Length&#58; 290588 (284K) (284K) [text/html]
[text/html]
vo?vo=osg.13.4 has sprung into existence.
Saving to&#58; &#34;vo?vo=osg.13.4&#34;

Retrying.

0% [                                                                                                                    ] 0           --.-K/s              200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13.5&#34;

100%[===================================================================================================================&#62;] 290,588     --.-K/s   in 0.09s

2013-07-09 14&#58;41&#58;06 (3.20 MB/s) - &#34;vo?vo=osg.13.4&#34; saved [290588/290588]

real	0m21.341s
user	0m0.002s
sys	0m0.009s
200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13.6&#34;

0% [                                                                                                                    ] 0           --.-K/s              200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13.7&#34;

100%[===================================================================================================================&#62;] 290,588     --.-K/s   in 0.08s

2013-07-09 14&#58;41&#58;06 (3.47 MB/s) - &#34;vo?vo=osg.13.5&#34; saved [290588/290588]

real	0m21.435s
user	0m0.005s
sys	0m0.008s
200 OK
Length&#58; 290588 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.13.8&#34;

100%[===================================================================================================================&#62;] 290,588     --.-K/s   in 0.08s

2013-07-09 14&#58;41&#58;06 (3.33 MB/s) - &#34;vo?vo=osg.13.6&#34; saved [290588/290588]

real	0m21.478s
user	0m0.001s
sys	0m0.012s
100%[===================================================================================================================&#62;] 290,588     --.-K/s   in 0.08s

2013-07-09 14&#58;41&#58;06 (3.39 MB/s) - &#34;vo?vo=osg.13.7&#34; saved [290588/290588]

real	0m21.494s
user	0m0.003s
sys	0m0.013s
100%[===================================================================================================================&#62;] 290,588     --.-K/s   in 0.08s

2013-07-09 14&#58;41&#58;06 (3.53 MB/s) - &#34;vo?vo=osg.13.8&#34; saved [290588/290588]

real	0m21.522s
user	0m0.004s
sys	0m0.010s
--2013-07-09 14&#58;41&#58;07--  (try&#58; 2)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290588 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;41&#58;20--  (try&#58; 3)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290588 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;41&#58;33--  (try&#58; 4)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290588 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;41&#58;46--  (try&#58; 5)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;42&#58;03--  (try&#58; 6)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;42&#58;17--  (try&#58; 7)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;42&#58;32--  (try&#58; 8)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;42&#58;51--  (try&#58; 9)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;43&#58;09--  (try&#58;10)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;43&#58;28--  (try&#58;11)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;43&#58;49--  (try&#58;12)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;44&#58;07--  (try&#58;13)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;44&#58;25--  (try&#58;14)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;44&#58;46--  (try&#58;15)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290582 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;45&#58;04--  (try&#58;16)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290611 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;45&#58;23--  (try&#58;17)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290611 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;45&#58;41--  (try&#58;18)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290611 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;45&#58;59--  (try&#58;19)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290611 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Retrying.

--2013-07-09 14&#58;46&#58;19--  (try&#58;20)  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290611 (284K) [text/html]
vo?vo=osg.13.4 has sprung into existence.
Giving up.

real	5m43.066s
user	0m0.007s
sys	0m0.010s

-- by gerard1 at Tue Jul 09 20&#58;00&#58;30 UTC 2013

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839</a>
</div><script type='text/javascript'>
        $('#show_1154278326').click(function() {
            $('#detail_1154278326').slideDown("normal");
            $('#show_1154278326').hide();
            $('#hide_1154278326').show();
        });
        $('#hide_1154278326').click(function() {
            $('#detail_1154278326').slideUp();
            $('#hide_1154278326').hide();
            $('#show_1154278326').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='15899#1373398569'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-09T19:36:09+00:00">Jul 9, 2013 07:36 PM UTC</time> by <b>Chander Sehgal</b><a class="anchor" name="1373398569">&nbsp;</a></div><pre>Right now it is responding well (&#60;15 seconds).  But in the last few days I have seen response times in excess of 1 minute.  I don’t have a precise threshold but I have not seen this kind of delay before (last couple of years).  I think 10-20 seconds is acceptable but &#62;30 seconds is a problem.

Chander</pre></div><div class='update_description'><i onclick="document.location='15899#1373397760'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-09T19:22:40+00:00">Jul 9, 2013 07:22 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1373397760">&nbsp;</a></div><pre>Hi,

sorry I provided the wrong server name/graphs, the DB being queried should be at gr-osg-mysql-reports.opensciencegrid.org which is actually served by gr13x5, the graphs are&#58;

<a href='http&#58;//fg-ganglia.fnal.gov/ganglia/?r=hour&c=Gratia&h=gr13x5.fnal.gov&mc=2' target='_blank' rel='nofollow'>http&#58;//fg-ganglia.fnal.gov/ganglia/?r=hour&c=Gratia&h=gr13x5.fnal.gov&mc=2</a>
<a href='http&#58;//fg-ganglia.fnal.gov/ganglia/?r=week&c=Gratia&h=gr13x5.fnal.gov&mc=2' target='_blank' rel='nofollow'>http&#58;//fg-ganglia.fnal.gov/ganglia/?r=week&c=Gratia&h=gr13x5.fnal.gov&mc=2</a>

The peaks one can see in the weekly graph are from the DB backups.

And by looking at the right server I see that the time the webserver takes to answer is actually the time it&#39;s making the DB query.

Still, I get response times of ~10-20 seconds, is this an issue?

Gerard
-- by gerard1 at Tue Jul 09 19&#58;21&#58;34 UTC 2013

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839</a></pre></div><div class='update_description'><i onclick="document.location='15899#1373397409'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-09T19:16:49+00:00">Jul 9, 2013 07:16 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1373397409">&nbsp;</a></div><pre>Hi,

I think that gratiaweb.grid.iu.edu is polling the DB at gratia-osg-prod-reports.opensciencegrid.org.

This service IP is at the moment being served by gr13x0 and the server is not under any heavy load and has not been under heavy load during the last week either&#58;

<a href='http&#58;//fg-ganglia.fnal.gov/ganglia/?r=hour&c=Gratia&h=gr13x0.fnal.gov&mc=2' target='_blank' rel='nofollow'>http&#58;//fg-ganglia.fnal.gov/ganglia/?r=hour&c=Gratia&h=gr13x0.fnal.gov&mc=2</a>
<a href='http&#58;//fg-ganglia.fnal.gov/ganglia/?r=week&c=Gratia&h=gr13x0.fnal.gov&mc=2' target='_blank' rel='nofollow'>http&#58;//fg-ganglia.fnal.gov/ganglia/?r=week&c=Gratia&h=gr13x0.fnal.gov&mc=2</a>

The website opened in firefox a bit slow to me (~15 secs), but it was not too slow (not minutes).

Testing response time with wget I see that the webserver takes about 10 seconds to respond, afterwards the data transfer happens fast though&#58;

[gerard@dhcp-131-225-86-209 tmp]$ time wget <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
--2013-07-09 14&#58;14&#58;08--  <a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>
Resolving gratiaweb.grid.iu.edu... 129.79.53.122
Connecting to gratiaweb.grid.iu.edu|129.79.53.122|&#58;80... connected.
HTTP request sent, awaiting response... 200 OK
Length&#58; 290399 (284K) [text/html]
Saving to&#58; &#34;vo?vo=osg.6&#34;

100%[===================================================================================================================&#62;] 290,399     --.-K/s   in 0.07s

2013-07-09 14&#58;14&#58;19 (3.70 MB/s) - &#34;vo?vo=osg.6&#34; saved [290399/290399]

real	0m11.181s
user	0m0.002s
sys	0m0.016s

The slow step would be &#39;HTTP request sent, awaiting response... &#39; until the 200 OK is received. While doing this I do not see any long-standing connection to the DB server, actually I&#39;d expect this queries to be cached.

Chander, what do you mean by very slow? Is it the ~10-20 seconds I see when trying to open the website from firefox or you&#39;re getting a higher waiting time?

Thanks,
Gerard
<div id='show_625787111' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_625787111'>-- by gerard1 at Tue Jul 09 19&#58;15&#58;59 UTC 2013

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000389839</a>
</div><script type='text/javascript'>
        $('#show_625787111').click(function() {
            $('#detail_625787111').slideDown("normal");
            $('#show_625787111').hide();
            $('#hide_625787111').show();
        });
        $('#hide_625787111').click(function() {
            $('#detail_625787111').slideUp();
            $('#hide_625787111').hide();
            $('#show_625787111').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='15899#1373393465'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-09T18:11:05+00:00">Jul 9, 2013 06:11 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1373393465">&nbsp;</a></div><pre>I see no load increase, resource issues on munin graph from gratiaweb1. GratiaWeb is simply a proxy to Gratia DB at Fermi (except graphs served via <a href='http&#58;//gratiaweb.grid.iu.edu/gratiastatic/today' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratiastatic/today</a> URLs), so the slowness is most likely caused by slow response from Fermi Gratia DB.

Gratia Ops,
Have you noticed any increased load since last week?</pre></div><div class='update_description'><i onclick="document.location='15899#1373392859'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-07-09T18:00:59+00:00">Jul 9, 2013 06:00 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1373392859">&nbsp;</a></div><pre>Please open a ticket…

Gratiaweb has become very slow to respond when we query for certain results like

<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo?vo=osg</a>

The last week has been the  worst.

Thanks,

Chander</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F15899">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 15899});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
