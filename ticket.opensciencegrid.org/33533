<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="/">
    <title>[33533] gfal-copy failure to dCache</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="//netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="https://ticket.opensciencegrid.org/images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="https://ticket.opensciencegrid.org/lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=33533" method="post">
<div class="page-header">
    <h3><span class="muted">33533</span> / gfal-copy failure to dCache</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Bob Ball</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Bob Ball</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"><p><a target='_blank' href='https://ticket.opensciencegrid.org/33610'><b>33610</b> The TLS/SSL filtering - CVE-2017-5334</a></p></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-05-08</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=33533", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="/33533?sort=up&"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="/33533?expandall=true&">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20gfal-copy%20failure%20to%20dCache%20ISSUE%3D33533%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='33533#1495027610'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-17T13:26:50+00:00">May 17, 2017 01:26 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1495027610">&nbsp;</a></div><pre>Since there has been no response in 6 days, I am concluding that there is nothing else to do with this ticket, so I will close it.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='33533#1494516845'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-11T15:34:05+00:00">May 11, 2017 03:34 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1494516845">&nbsp;</a></div><pre>No problem! Was there anything else you needed?</pre></div><div class='update_description'><i onclick="document.location='33533#1494516614'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-11T15:30:14+00:00">May 11, 2017 03:30 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1494516614">&nbsp;</a></div><pre>OK, thanks Brian.

bob

On 5/11/2017 11&#58;18 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33533#1494515905'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-11T15:18:25+00:00">May 11, 2017 03:18 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1494515905">&nbsp;</a></div><pre>Bob,

No, we&#39;re dropping the metric entirely because there isn&#39;t an exact equivalent in the GRACC. We do have a system in place to detect if a site has not reported accounting records for two days, by which OSG staff are notified and a GOC ticket gets generated with the site admin CC&#39;ed. If you&#39;d like to be more proactive about knowing when your site has last reported, you can look your Resource up here&#58; <a href='https&#58;//gracc.opensciencegrid.org/dashboard/db/probe-status?orgId=1.' target='_blank' rel='nofollow'>https&#58;//gracc.opensciencegrid.org/dashboard/db/probe-status?orgId=1.</a>

Cheers,
Brian</pre></div><div class='update_description'><i onclick="document.location='33533#1494515352'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-11T15:09:12+00:00">May 11, 2017 03:09 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1494515352">&nbsp;</a></div><pre>OK, so, the metric will later be fixed and can be re-enabled?  We don&#39;t
mind the yellow, if that is the case, we&#39;ll just leave it enabled.  As
long as gratia continues to report, then we are good with it.

bob

On 5/11/2017 10&#58;51 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33533#1494514288'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-11T14:51:28+00:00">May 11, 2017 02:51 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1494514288">&nbsp;</a></div><pre>Bob,

It looks like this is due to the OSG transition from Gratia to GRACC and gratia-osg-prod.opensciencegrid.org no longer provides the timestamp of a site&#39;s latest gratia probe update. We have a ticket for removing the metric here&#58; <a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2722' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2722</a>

For now, you can go ahead and disable that metric (&#96;rsv-control --disable --host &#60;HOSTNAME&#62; org.osg.gratia.condor&#96;).

Cheers,
Brian</pre></div><div class='update_description'><i onclick="document.location='33533#1494355721'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-09T18:48:41+00:00">May 9, 2017 06:48 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1494355721">&nbsp;</a></div><pre>Carl, could you look into the warnings below? We&#39;re seeing similar warnings here&#58; <a href='https&#58;//ticket.grid.iu.edu/33717' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/33717</a></pre></div><div class='update_description'><i onclick="document.location='33533#1493662093'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-01T18:08:13+00:00">May 1, 2017 06:08 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1493662093">&nbsp;</a></div><pre>Mat, could you look into the warning below?</pre></div><div class='update_description'><i onclick="document.location='33533#1493220430'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-26T15:27:10+00:00">Apr 26, 2017 03:27 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1493220430">&nbsp;</a></div><pre>Hi,

I am out of the office until May 1, 2017. For OSG software related matters, you can contact the software team at osg-software@..... If your matter is urgent, please contact goc@.....

Cheers,

Brian</pre></div><div class='update_description'><i onclick="document.location='33533#1493220249'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-26T15:24:09+00:00">Apr 26, 2017 03:24 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1493220249">&nbsp;</a></div><pre>Turns out I missed the bit about setting up and running the
gratia-probes-cron service, so the missing directory has now appeared.
The only bit I don&#39;t understand now is what I&#39;m getting from both of our
monitored gatekeepers for this service, ie,

WARNING&#58; Gratia server gratia-osg-prod.opensciencegrid.org&#58;80 not responding to obtain last contact details.

What should be done about this?

[root@gate02 ~]# host gratia-osg-prod.opensciencegrid.org
gratia-osg-prod.opensciencegrid.org is an alias for
gracc.opensciencegrid.org.
gracc.opensciencegrid.org has address 129.93.175.6

I see the Email from April 10 about the switchover to gracc, but this is
leaving the service in a constant WARNING state.

bob

On 4/25/2017 4&#58;51 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33533#1493153499'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-25T20:51:39+00:00">Apr 25, 2017 08:51 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1493153499">&nbsp;</a></div><pre>Has your gratia probe run at all? I believe that dir gets created when uploading records to the central collector.</pre></div><div class='update_description'><i onclick="document.location='33533#1493151433'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-25T20:17:13+00:00">Apr 25, 2017 08:17 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1493151433">&nbsp;</a></div><pre>OK, the gratia.condor rsv probe has now gone yellow, as shown. Should I
be concerned about this being an empty directory?
[root@gate02 ~]# ll /var/lib/gratia/tmp/
total 0

bob

metricName&#58; org.osg.gratia.condor
metricType&#58; status
timestamp&#58; 2017-04-25 16&#58;10&#58;31 EDT
metricStatus&#58; WARNING
serviceType&#58; OSG-CE
serviceURI&#58; gate02.grid.umich.edu
gatheredAt&#58; gate04.aglt2.org
summaryData&#58; WARNING
detailsData&#58; 1
WARNING&#58; The expected directory containing records waiting to be re-sent does not exist (/var/lib/gratia/tmp/gratiafiles/subdir.condor_gate02.grid.umich.edu_gratia-osg-prod.opensciencegrid.org_80).  This might be a problem in the gratia-config-probe itself.  Please report this error to OSG for assistance.
0 records waiting to be re-sent to gratia-osg-prod.opensciencegrid.org&#58;80 in 0 files (including 0 archive files).
116 total gratia files found&#58;
0 gratia_certinfo files under /var/lib/gratia/data/
116 classad records under /var/lib/gratia/data/
0 quarantine files under /var/lib/gratia/data/quarantine/
0 unsent collector records under /var/lib/gratia/tmp
WARNING&#58; Gratia server gratia-osg-prod.opensciencegrid.org&#58;80 not responding to obtain last contact details.

EOT

On 4/25/2017 3&#58;14 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33533#1493147651'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-25T19:14:11+00:00">Apr 25, 2017 07:14 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1493147651">&nbsp;</a></div><pre>I&#39;ll disable the rsv CE probes for gridftp.

Working through the gratia docs now, I may have left out something.

[root@gate04 ~]# rsv-control --run --host gate02.grid.umich.edu
org.osg.gratia.condor

Running metric org.osg.gratia.condor&#58;

metricName&#58; org.osg.gratia.condor
metricType&#58; status
timestamp&#58; 2017-04-25 13&#58;51&#58;21 EDT
metricStatus&#58; CRITICAL
serviceType&#58; OSG-CE
serviceURI&#58; gate02.grid.umich.edu
gatheredAt&#58; gate04.aglt2.org
summaryData&#58; CRITICAL
detailsData&#58; 2
WARNING&#58; The expected directory containing records waiting to be re-sent
does not exist
(/var/lib/gratia/tmp/gratiafiles/subdir.condor_gate02.grid.umich.edu_gratia-osg-prod.opensciencegrid.org_80).
This might be a problem in the gratia-config-probe itself.  Please
report this error to OSG for assistance.
0 records waiting to be re-sent to
gratia-osg-prod.opensciencegrid.org&#58;80 in 0 files (including 0 archive
files).
52 total gratia files found&#58;
0 gratia_certinfo files under /var/lib/gratia/data/
52 classad records under /var/lib/gratia/data/
0 quarantine files under /var/lib/gratia/data/quarantine/
0 unsent collector records under /var/lib/gratia/tmp
ERROR&#58; Probe condor&#58;gate02.grid.umich.edu has not been seen by Gratia
collector gratia-osg-prod.opensciencegrid.org&#58;80 in &#62;1d.
Last contact time = 2017-04-21 18&#58;46&#58;45 EDT.
Some information could not be gathered due to lack of privileges.
<div id='show_332217543' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_332217543'>Install and
run the latest version of osg-system-profiler for more diagnostic details,
especially if you have a WARNING or CRITICAL status.

EOT

bob

On 4/25/2017 2&#58;58 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_332217543').click(function() {
            $('#detail_332217543').slideDown("normal");
            $('#show_332217543').hide();
            $('#hide_332217543').show();
        });
        $('#hide_332217543').click(function() {
            $('#detail_332217543').slideUp();
            $('#hide_332217543').hide();
            $('#show_332217543').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='33533#1493146734'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-25T18:58:54+00:00">Apr 25, 2017 06:58 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1493146734">&nbsp;</a></div><pre>Ping looks good to me [1]! Do you intend to run a GridFTP server on the CE? It&#39;s a configuration that we don&#39;t really see around the OSG anymore but the osg-ce package should bring in the GridFTP server bits so you could start it if you choose. Gratia should be running though, I&#39;d be interested in what the probe says.

Cheers,
Brian

[1]

$ condor_ping -name gate02.grid.umich.edu -pool gate02.grid.umich.edu&#58;9619 -verbose WRITE
Remote Version&#58;              $CondorVersion&#58; 8.4.11 Feb 24 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.5.2 Jul 19 2016 BuildID&#58; RH-8.5.2-2.fc25 $
Session ID&#58;                  gate02&#58;4038&#58;1493146530&#58;471
Instruction&#58;                 WRITE
Command&#58;                     60021
Encryption&#58;                  none
Integrity&#58;                   MD5
Authenticated using&#58;         GSI
All authentication methods&#58;  FS,GSI
Remote Mapping&#58;              osg@....
Authorized&#58;                  TRUE

Information about authentication methods that were attempted but failed&#58;
AUTHENTICATE&#58;1004&#58;Failed to authenticate using FS</pre></div><div class='update_description'><i onclick="document.location='33533#1493146394'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-25T18:53:14+00:00">Apr 25, 2017 06:53 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1493146394">&nbsp;</a></div><pre>Just the condor_ce_ping, although methinks that will be just fine. I&#39;m
just that paranoid though.

Trying now to get all of our rsv probes green.  Two I would have
expected to pass are red, org.osg.glubus.gridftp-simple and
org.osg.gratia.condor .  Trying to understand that now, remembering that
this is a completely rebuilt gatekeeper.  I may open a separate ticket
on them if I can&#39;t get them going happily.

This assumes that the former SHOULD be running on a pure HTCondor-CE gk
with no gram install?

bob

On 4/25/2017 2&#58;38 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33533#1493145495'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-25T18:38:15+00:00">Apr 25, 2017 06:38 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1493145495">&nbsp;</a></div><pre>Bob,

What exactly would you like us to test? gfal-copy? If pilots are
running, I think we&#39;re in business.

- Brian</pre></div><div class='update_description'><i onclick="document.location='33533#1493144951'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-25T18:29:11+00:00">Apr 25, 2017 06:29 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1493144951">&nbsp;</a></div><pre>So, this is what I got back from the UM Network powers that be after
some phone chasing today&#58;

Contacted Robert Ball by phone and explained the functionality of the
IPS and the legitimate threat it was detecting. He agreed to IIA running
a bone scan of his system to validate a possible false positive by the
IPS. Once the scan is complete we will create an &#34;allow&#34; exception for
his servers and update this ticket.

Bottom line, they were blocking all TLS/SSL traffic at the university
boundary.  After talking with them, and expressing my intense feelings
about such a global blockage, I updated for OSG-SEC-2017-04-24 (best to
do that BEFORE they scan was my thought), they scanned, and the whole
grid.umich.edu domain is now white-listed in this regard.  Services seem
now to be working.

[ball@gate04&#58;~]$ condor_ping -verbose -name gate02.grid.umich.edu -pool
gate02.grid.umich.edu&#58;9619 WRITE
Remote Version&#58;              $CondorVersion&#58; 8.4.11 Feb 24 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.4.11 Jan 23 2017 BuildID&#58;
394757 $
Session ID&#58;                  gate02&#58;4038&#58;1493144680&#58;404
Instruction&#58;                 WRITE
Command&#58;                     60021
Encryption&#58;                  none
Integrity&#58;                   MD5
Authenticated using&#58;         GSI
All authentication methods&#58;  FS,GSI
Remote Mapping&#58;              usatlas3@....
Authorized&#58;                  TRUE

Information about authentication methods that were attempted but failed&#58;
AUTHENTICATE&#58;1004&#58;Failed to authenticate using FS

I assume this now works from OSG, as ucsd sbgrid and glow pilots now
<div id='show_1762889762' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1762889762'>seem to work, but it would be good to test that, please.

bob

On 4/24/2017 3&#58;05 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1762889762').click(function() {
            $('#detail_1762889762').slideDown("normal");
            $('#show_1762889762').hide();
            $('#hide_1762889762').show();
        });
        $('#hide_1762889762').click(function() {
            $('#detail_1762889762').slideUp();
            $('#hide_1762889762').hide();
            $('#show_1762889762').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='33533#1493060710'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-24T19:05:10+00:00">Apr 24, 2017 07:05 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1493060710">&nbsp;</a></div><pre>I actually generated new certs to go with the new hostname, but perhaps
missed some ordering of actions, or some other minor thing before doing
the testing.

bob

On 4/24/2017 2&#58;58 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33533#1493060287'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-24T18:58:07+00:00">Apr 24, 2017 06:58 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1493060287">&nbsp;</a></div><pre>I&#39;m going to guess the ping failed because of a hostname + cert mismatch but indeed, that is further along than the handshake timeout. I&#39;ll skim your osg-profile output but with the successful gfal-copy and semi-successful condor_ping, I think you&#39;re on the right path asking your local networking folks.

Cheers,
Brian</pre></div><div class='update_description'><i onclick="document.location='33533#1493059989'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-24T18:53:09+00:00">Apr 24, 2017 06:53 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1493059989">&nbsp;</a></div><pre>I have uploaded the osg-profile.txt output from osg-system-profiler to
the ticket.

I have been wondering if there was some sort of route or traffic
filtering applied to grid.umich.edu traffic, so, I attempted this
morning to temporarily change the name/ip on the host to
gate02.aglt2.org.  There were 2 interesting things to note about this
change.

1. condor_ce_ping did not time out, instead it returned DENIED&#58;
[ball@gate03&#58;~]$ date; condor_ce_ping -verbose -name gate02.aglt2.org
-pool gate02.aglt2.org&#58;9619 WRITE; date
Mon Apr 24 14&#58;15&#58;40 EDT 2017
WRITE failed!
SECMAN&#58;2010&#58;Received &#34;DENIED&#34; from server for user gsi@unmapped using
method GSI.
AUTHENTICATE&#58;1004&#58;Failed to authenticate using FS

Mon Apr 24 14&#58;15&#58;40 EDT 2017

2. While still addressed as gate02.aglt2.org, I tried the gfal-copy, and
it succeeded in writing to our dCache directory.

I have subsequently opened tickets within our local networking world to
find out what is known on that front.  I&#39;m going to be really angry with
someone if some deliberate filtering was applied to us without our
knowledge.

In any case, I look forward to hearing what you may see from the profile
output.

bob

On 4/24/2017 1&#58;59 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33533#1493056750'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-24T17:59:10+00:00">Apr 24, 2017 05:59 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1493056750">&nbsp;</a></div><pre>Could you provide the output of osg-system-profiler?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='33533#1493039831'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-24T13:17:11+00:00">Apr 24, 2017 01:17 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1493039831">&nbsp;</a></div><pre>OK, interesting.  First ping was as root, and got this result&#58;
[root@gate03 ~]# date; condor_ping -verbose -name gate02.grid.umich.edu
-pool gate02.grid.umich.edu&#58;9619 WRITE; date
Mon Apr 24 08&#58;53&#58;40 EDT 2017
WRITE failed!
SECMAN&#58;2010&#58;Received &#34;DENIED&#34; from server for user
gate03.aglt2.org@.... using method GSI.
AUTHENTICATE&#58;1004&#58;Failed to authenticate using FS

Mon Apr 24 08&#58;53&#58;40 EDT 2017

Then, I said &#34;oops&#34; and did it as myself with my proxy
[ball@gate03&#58;~]$ date; condor_ping -verbose -name gate02.grid.umich.edu
-pool gate02.grid.umich.edu&#58;9619 WRITE; date
Mon Apr 24 08&#58;54&#58;15 EDT 2017
WRITE failed!
AUTHENTICATE&#58;1006&#58;exceeded 1493038475 deadline during authentication
AUTHENTICATE&#58;1004&#58;Failed to authenticate using GSI
GSI&#58;5004&#58;Failed to authenticate.  Globus is reporting error (17367040&#58;0)
AUTHENTICATE&#58;1004&#58;Failed to authenticate using FS

Mon Apr 24 08&#58;54&#58;35 EDT 2017

Same old, same old.  Now, from the schedd log for the CE&#58;
From the first, as root, I got back&#58;
04/24/17 08&#58;53&#58;40 msgReady would have blocked.
04/24/17 08&#58;53&#58;40 Returning to DC as read would block.
04/24/17 08&#58;53&#58;40 ACCEPT bound to  fd=17 peer=
04/24/17 08&#58;53&#58;40 condor_read(fd=17
,,size=5,timeout=0,flags=0,non_blocking=0)
04/24/17 08&#58;53&#58;40 condor_read(fd=17
,,size=8,timeout=0,flags=0,non_blocking=0)
04/24/17 08&#58;53&#58;40 CONNECT bound to &#60;141.211.43.122&#58;9619&#62; fd=34
peer=&#60;10.10.2.35&#58;52233&#62;
04/24/17 08&#58;53&#58;40 condor_write(fd=17
<div id='show_48722634' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_48722634'>,,size=13,timeout=5,flags=0,non_blocking=0)
04/24/17 08&#58;53&#58;40 condor_read(fd=34
&#60;10.10.2.35&#58;52233&#62;,,size=5,timeout=1,flags=2,non_blocking=0)
04/24/17 08&#58;53&#58;40 condor_read(fd=34
&#60;10.10.2.35&#58;52233&#62;,,size=5,timeout=0,flags=0,non_blocking=1)
04/24/17 08&#58;53&#58;40 condor_read(fd=34
&#60;10.10.2.35&#58;52233&#62;,,size=412,timeout=0,flags=0,non_blocking=1)
04/24/17 08&#58;53&#58;40 condor_write(fd=34
&#60;10.10.2.35&#58;52233&#62;,,size=288,timeout=20,flags=0,non_blocking=0)
04/24/17 08&#58;53&#58;40 condor_read(fd=34
&#60;10.10.2.35&#58;52233&#62;,,size=5,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;53&#58;40 Reading header would have blocked.
04/24/17 08&#58;53&#58;40 msgReady would have blocked.
04/24/17 08&#58;53&#58;40 CLOSE TCP  fd=17

From the second, as myself, I got back&#58;
04/24/17 08&#58;54&#58;15 ACCEPT bound to  fd=17 peer=
04/24/17 08&#58;54&#58;15 condor_read(fd=17
,,size=5,timeout=0,flags=0,non_blocking=0)
04/24/17 08&#58;54&#58;15 condor_read(fd=17
,,size=8,timeout=0,flags=0,non_blocking=0)
04/24/17 08&#58;54&#58;15 CONNECT bound to &#60;141.211.43.122&#58;9619&#62; fd=30
peer=&#60;10.10.2.35&#58;5486&#62;
04/24/17 08&#58;54&#58;15 condor_write(fd=17
,,size=13,timeout=5,flags=0,non_blocking=0)
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=5,timeout=1,flags=2,non_blocking=0)
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=5,timeout=0,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=412,timeout=0,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 condor_write(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=288,timeout=20,flags=0,non_blocking=0)
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=5,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 Reading header would have blocked.
04/24/17 08&#58;54&#58;15 msgReady would have blocked.
04/24/17 08&#58;54&#58;15 CLOSE TCP  fd=17
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=5,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=8,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 condor_write(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=13,timeout=20,flags=0,non_blocking=0)
04/24/17 08&#58;54&#58;15 condor_write(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=23,timeout=20,flags=0,non_blocking=0)
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=5,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 Reading header would have blocked.
04/24/17 08&#58;54&#58;15 msgReady would have blocked.
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=5,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=8,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 condor_write(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=13,timeout=20,flags=0,non_blocking=0)
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=5,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 Reading header would have blocked.
04/24/17 08&#58;54&#58;15 msgReady would have blocked.
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=5,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=8,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 condor_write(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=13,timeout=20,flags=0,non_blocking=0)
04/24/17 08&#58;54&#58;15 This process has a valid certificate & key
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=5,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 Reading header would have blocked.
04/24/17 08&#58;54&#58;15 msgReady would have blocked.
04/24/17 08&#58;54&#58;15 Returning to DC as read would block in
authenticate_server_pre
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=5,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=8,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 condor_write(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=13,timeout=20,flags=0,non_blocking=0)
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=5,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 Reading header would have blocked.
04/24/17 08&#58;54&#58;15 msgReady would have blocked.
04/24/17 08&#58;54&#58;15 Returning to DC as read would block.
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=5,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=295,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 gss_assist_accept_sec_context(1)&#58;inlen&#58;287
04/24/17 08&#58;54&#58;15
gss_assist_accept_sec_context(2)maj&#58;00000001&#58;min&#58;00000000&#58;ret&#58;00000000
outlen&#58;2206&#58;context&#58;0x7f34fcd09230
04/24/17 08&#58;54&#58;15 condor_write(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=2219,timeout=20,flags=0,non_blocking=0)
04/24/17 08&#58;54&#58;15 condor_read(fd=30
&#60;10.10.2.35&#58;5486&#62;,,size=5,timeout=20,flags=0,non_blocking=1)
04/24/17 08&#58;54&#58;15 Reading header would have blocked.
04/24/17 08&#58;54&#58;15 msgReady would have blocked.
04/24/17 08&#58;54&#58;15 Returning to DC as read would block.

I don&#39;t see any further traffic with gate03 between this time and
8&#58;54&#58;35 when the timeout was reported.  I searched both for fd=30 and
the local IP of gate03 That was used.  Wait, I see this now that I&#39;ve
refreshed my view of the log

04/24/17 08&#58;56&#58;16 DaemonCommandProtocol&#58; deadline for security handshake
with &#60;10.10.2.35&#58;5486&#62; has expired.
04/24/17 08&#58;56&#58;16 CLOSE TCP &#60;141.211.43.122&#58;9619&#62; fd=30

bob

On 4/21/2017 3&#58;09 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_48722634').click(function() {
            $('#detail_48722634').slideDown("normal");
            $('#show_48722634').hide();
            $('#hide_48722634').show();
        });
        $('#hide_48722634').click(function() {
            $('#detail_48722634').slideUp();
            $('#hide_48722634').hide();
            $('#show_48722634').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='33533#1492801760'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T19:09:20+00:00">Apr 21, 2017 07:09 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1492801760">&nbsp;</a></div><pre>Did you bump the log level of the Schedd? You&#39;ll actually want to set &#34;SCHEDD_DEBUG = D_FULLDEBUG D_NETWORK&#58;1&#34;, reconfig, ping, check the logs, etc.</pre></div><div class='update_description'><i onclick="document.location='33533#1492801515'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T19:05:15+00:00">Apr 21, 2017 07:05 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1492801515">&nbsp;</a></div><pre>Please let me know what else you need from me, but, it will be tomorrow
now before I can send it along.

bob

On 4/21/2017 2&#58;52 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33533#1492801330'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T19:02:10+00:00">Apr 21, 2017 07:02 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1492801330">&nbsp;</a></div><pre>OK, last test before I roll.  Back on the new VM/Gatekeeper now, so, I
see this&#58;  Nothing
These are the wrapping times
[root@gate02 config.d]# date
Fri Apr 21 14&#58;55&#58;38 EDT 2017
[root@gate02 config.d]# date
Fri Apr 21 14&#58;56&#58;04 EDT 2017

The log contains nothing
04/21/17 14&#58;55&#58;33 DaemonCore&#58; No more children processes to reap.
04/21/17 14&#58;55&#58;42 This process has a valid certificate & key
(END)

I guess that&#39;s not quite true, this came in later
04/21/17 14&#58;55&#58;42 This process has a valid certificate & key
04/21/17 14&#58;57&#58;31 ForkWorker&#58;&#58;Fork&#58; New child of 4052 = 6153
04/21/17 14&#58;57&#58;31 Number of Active Workers 0
04/21/17 14&#58;57&#58;31 DaemonCore&#58; No more children processes to reap.
04/21/17 14&#58;57&#58;43 DaemonCommandProtocol&#58; deadline for security handshake
with &#60;192.41.231.35&#58;59639&#62; has expired.
04/21/17 14&#58;57&#58;58 Getting monitoring info for pid 4052
04/21/17 14&#58;58&#58;00 ForkWorker&#58;&#58;Fork&#58; New child of 4052 = 6158
04/21/17 14&#58;58&#58;00 Number of Active Workers 0
04/21/17 14&#58;58&#58;00 DaemonCore&#58; No more children processes to reap.

192.41.231.35 is the host from which I did the condor_ce_ping. gate02 is
141.211.43.122.  Both have private NIC addresses where most of the
standard condor traffic is exchanged.

bob

On 4/21/2017 2&#58;29 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33533#1492800760'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T18:52:40+00:00">Apr 21, 2017 06:52 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1492800760">&nbsp;</a></div><pre>Bob,

No I can&#39;t condor_ping the host and if this is affecting your CE (and not just your srm endpoint) then it points to a larger auth issue perhaps related to your certs? HTCondor-CE logs will give us more hints.

- Brian</pre></div><div class='update_description'><i onclick="document.location='33533#1492800072'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T18:41:12+00:00">Apr 21, 2017 06:41 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1492800072">&nbsp;</a></div><pre>OK, migrating to a different machine within VMWare made no difference.
The old machine is back up now, and condor_ce_ping does not work to it,
either.  Same result.  These were the rpms that I updated before trying
a virgin rebuild (this old one is OSG 3.3.21)

Apr 19 09&#58;42&#58;29 Installed&#58; json-c-0.11-13.el6.x86_64
Apr 19 09&#58;42&#58;29 Updated&#58; gfal2-2.13.3-1.el6.x86_64
Apr 19 09&#58;42&#58;29 Updated&#58; gfal2-python-1.9.2-1.el6.x86_64
Apr 19 09&#58;42&#58;30 Updated&#58; gfal2-util-1.5.0-1.el6.noarch
Apr 19 09&#58;42&#58;30 Updated&#58; gfal2-plugin-srm-2.13.3-1.el6.x86_64
Apr 19 09&#58;42&#58;30 Updated&#58; gfal2-plugin-file-2.13.3-1.el6.x86_64
Apr 19 09&#58;42&#58;30 Updated&#58; gfal2-plugin-xrootd-2.13.3-1.el6.x86_64
Apr 19 09&#58;42&#58;30 Updated&#58; gfal2-plugin-gridftp-2.13.3-1.el6.x86_64
Apr 19 09&#58;57&#58;42 Updated&#58; srm-ifce-1.24.2-1.el6.x86_64

I erased the same 4 rpms (openjdk in the 1.8 variety and openssl1098e),
rebooted, and....  drum roll please...  no better luck, it is all still
broken. &#58;-(

going back to the new VM as anything I fix may as well be for OSG 3.3.23 .

I&#39;m curious, can you condor_ce_ping gate02.grid.umich.edu?

bob

On 4/21/2017 1&#58;58 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33533#1492799380'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T18:29:40+00:00">Apr 21, 2017 06:29 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1492799380">&nbsp;</a></div><pre>condor_ce_ping will work locally because it defaults to FS auth instead of GSI. If you set SCHEDD_DEBUG = D_FULLDEBUG in your CE config, condor_ce_reconfig, then try a remote condor_ce_ping, I&#39;d like to see what the SchedLog turns up.</pre></div><div class='update_description'><i onclick="document.location='33533#1492799171'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T18:26:11+00:00">Apr 21, 2017 06:26 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1492799171">&nbsp;</a></div><pre>yum erase openssl1098e
yum erase java-1.8.0-openjdk java-1.8.0-openjdk-devel
java-1.8.0-openjdk-headless
The java security items are as you indicate they should be
reboot (to be clean)

Unfortunately,
[ball@gate03&#58;grid_test]$ condor_ce_ping -verbose -name
gate02.grid.umich.edu -pool gate02.grid.umich.edu&#58;9619 WRITE
WRITE failed!
AUTHENTICATE&#58;1006&#58;exceeded 1492798689 deadline during authentication
AUTHENTICATE&#58;1004&#58;Failed to authenticate using GSI
GSI&#58;5004&#58;Failed to authenticate.  Globus is reporting error (17367040&#58;0)
AUTHENTICATE&#58;1004&#58;Failed to authenticate using FS

This happily succeeds from gate02 to itself.
[root@gate02 security]# condor_ce_ping -verbose -name
gate02.grid.umich.edu -pool gate02.grid.umich.edu&#58;9619 WRITE
Remote Version&#58;              $CondorVersion&#58; 8.4.11 Feb 24 2017 $
Local  Version&#58;              $CondorVersion&#58; 8.4.11 Feb 24 2017 $
Session ID&#58;                  gate02&#58;4041&#58;1492798754&#58;5
Instruction&#58;                 WRITE
Command&#58;                     60021
Encryption&#58;                  none
Integrity&#58;                   MD5
Authenticated using&#58;         FS
All authentication methods&#58;  FS,GSI
Remote Mapping&#58;              condor@....
Authorized&#58;                  TRUE

Now, retry gfal-copy.  Nope, no better luck.

[root@gate02 security]# su - rsv
-sh-4.1$ export X509_USER_PROXY=/tmp/x509up_srmcp; gfal-copy -f
file&#58;///var/rsv/space-usage.json
<div id='show_1326233317' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1326233317'><a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json</a>
Copying file&#58;///var/rsv/space-usage.json..   23s  File size&#58; 1KB
Copying file&#58;///var/rsv/space-usage.json   [FAILED]  after 120s
gfal-copy error&#58; 70 (Communication error on send) - DESTINATION
OVERWRITE srm-ifce err&#58; Communication error on send, err&#58; [SE][srmRm][]
httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2&#58; CGSI-gSOAP running on
gate02.grid.umich.edu reports Error reading token data header&#58;
Connection closed

I&#39;ve got a few minutes before I turn into a pumpkin, so I&#39;m going to
roll back to the old VM and repeat these steps, after first migrating to
another host.

bob

On 4/21/2017 1&#58;58 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1326233317').click(function() {
            $('#detail_1326233317').slideDown("normal");
            $('#show_1326233317').hide();
            $('#hide_1326233317').show();
        });
        $('#hide_1326233317').click(function() {
            $('#detail_1326233317').slideUp();
            $('#hide_1326233317').hide();
            $('#show_1326233317').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='33533#1492797481'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T17:58:01+00:00">Apr 21, 2017 05:58 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1492797481">&nbsp;</a></div><pre>Why do you have two versions of openssl installed? I&#39;d get rid of the older one. The newer one disables TLS connections with less than 1024-bit DH params so you&#39;ll need to make sure your Java is up to date. I&#39;d also downgrade your version of Java to java-1.7.0-openjdk-1.7.0.131-2.6.9.0.el6_8.x86_64, which is known to work with that version of openssl. You&#39;ll also want to make sure that the disabled algorithms sections of your java.security looks like the following&#58;

# grep -A1 &#39;^[^#].*disabled&#39; /etc/alternatives/jre/lib/security/java.security
jdk.certpath.disabledAlgorithms=MD2, MD5, RSA keySize &#60; 1024, &#92;
DSA keySize &#60; 1024, EC keySize &#60; 224
--
jdk.jar.disabledAlgorithms=MD2, RSA keySize &#60; 1024

--
jdk.tls.disabledAlgorithms=SSLv3, RC4, MD5withRSA, DH keySize &#60; 768, &#92;
EC keySize &#60; 224</pre></div><div class='update_description'><i onclick="document.location='33533#1492797016'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T17:50:16+00:00">Apr 21, 2017 05:50 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1492797016">&nbsp;</a></div><pre>[root@gate02 config.d]# rpm -qa|grep ssl|sort
globus-gsi-openssl-error-3.5-2.osg33.el6.x86_64
globus-gsi-proxy-ssl-5.8-1.osg33.el6.x86_64
globus-openssl-module-4.6-2.osg33.el6.x86_64
mod_ssl-2.2.15-59.sl6.x86_64
openssl098e-0.9.8e-20.el6_7.1.x86_64
openssl-1.0.1e-57.el6.x86_64
xmlsec1-openssl-1.2.20-4.el6.x86_64

Sorry that I forgot those just now, on this new gatekeeper.

bob

On 4/21/2017 1&#58;13 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='33533#1492796291'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T17:38:11+00:00">Apr 21, 2017 05:38 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1492796291">&nbsp;</a></div><pre>I am really struggling with this right now.  I tried instead to build a
new &#34;gate02&#34; and it is not working at all, with this in the results from
any other of our gatekeepers, or another grid host that we have in the
aglt2.org domain&#58;

[ball@gate03&#58;grid_test]$ condor_ce_ping -verbose -name
gate02.grid.umich.edu -pool gate02.grid.umich.edu&#58;9619 WRITE
WRITE failed!
AUTHENTICATE&#58;1006&#58;exceeded 1492795072 deadline during authentication
AUTHENTICATE&#58;1004&#58;Failed to authenticate using GSI
GSI&#58;5004&#58;Failed to authenticate.  Globus is reporting error (17367040&#58;0)
AUTHENTICATE&#58;1004&#58;Failed to authenticate using FS

It kind of looks like the timeout is the original cause here?  The host
itself pings fine.

In fact, the failure of jobs to fetch their inputs, in conjunction with
the failed gfal-copy, is what lead me to try a full rebuild. From our
local host, the job seems to have never even been seen by gate02, it
just goes idle.

I also see these today in the condor-ce SchedLog
04/21/17 11&#58;00&#58;48 DaemonCommandProtocol&#58; deadline for security handshake
with &#60;10.10.1.190&#58;31384&#62; has expired.

Fortunately this is a VM, and I kept the old one un-touched, just in
case I wanted to switch back.

The only rpms I saw update were these, but, those also updated on our
other 2 gatekeepers&#58;
Apr 18 03&#58;44&#58;19 Updated&#58;
1&#58;java-1.8.0-openjdk-headless-1.8.0.121-1.b13.el6.x86_64
Apr 18 03&#58;44&#58;20 Updated&#58; 1&#58;java-1.8.0-openjdk-1.8.0.121-1.b13.el6.x86_64
Apr 18 03&#58;44&#58;22 Updated&#58;
1&#58;java-1.8.0-openjdk-devel-1.8.0.121-1.b13.el6.x86_64
<div id='show_1835350179' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1835350179'>
I am at your disposal until I leave for the weekend at 3pm.  I can
easily switch back to the old VM if you think that would be an easier
one to do, although I admit to updating a few of the gfal2 rpms to see
if that helped (it did not) and I don&#39;t have equivalent condor_ce_ping
results at this time.

I have kept a record of what I did for this new install on our Twiki&#58;
<a href='https&#58;//www.aglt2.org/wiki/bin/view/AGLT2/InstallUpgradeOSG#Clean_install_of_OSG_3.3' target='_blank' rel='nofollow'>https&#58;//www.aglt2.org/wiki/bin/view/AGLT2/InstallUpgradeOSG#Clean_install_of_OSG_3.3</a>

bob

On 4/21/2017 1&#58;13 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1835350179').click(function() {
            $('#detail_1835350179').slideDown("normal");
            $('#show_1835350179').hide();
            $('#hide_1835350179').show();
        });
        $('#hide_1835350179').click(function() {
            $('#detail_1835350179').slideUp();
            $('#hide_1835350179').hide();
            $('#show_1835350179').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='33533#1492794807'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T17:13:27+00:00">Apr 21, 2017 05:13 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1492794807">&nbsp;</a></div><pre>Bob,

What versions of OpenSSL and Java are installed on the endpoint?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='33533#1492722448'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-20T21:07:28+00:00">Apr 20, 2017 09:07 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1492722448">&nbsp;</a></div><pre>Two days ago one of our OSG 3.3 gatekeepers ceased being able to do a gfal-copy into our dCache storage at AGLT2.  Nothing I did or could think of doing made a difference.  So, today I did a fresh OSG 3.3.23 install.  Still, nogo.  So, I&#39;m now at a loss about this. Perhaps you can help me diagnose the issue?

The host name is gate02.grid.umich.edu.  Our dCache storage is all in the aglt2.org domain.  The same gfal-copy from hosts within aglt2.org work fine.  I did a full dCache admin machine restart, to no avail.

This is the simple result I get from the gfal-copy&#58;
-sh-4.1$ export X509_USER_PROXY=/tmp/x509up_srmcp; gfal-copy -f file&#58;///var/rsv/space-usage.json <a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json</a>
Copying file&#58;///var/rsv/space-usage.json   [FAILED]  after 120s
gfal-copy error&#58; 70 (Communication error on send) - DESTINATION OVERWRITE srm-ifce err&#58; Communication error on send, err&#58; [SE][srmRm][]
httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2&#58; CGSI-gSOAP running on gate02.grid.umich.edu reports Error reading token data header&#58;
Connection closed

So, I also ran this with -vvv, and this is what happens.  There is a long pause after this line.
DEBUG       [gfal_srm_statG] try to stat file
<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json</a>

Full log&#58;

-sh-4.1$ export X509_USER_PROXY=/tmp/x509up_srmcp; gfal-copy -f -vvv file&#58;///var/rsv/space-usage.json <a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json</a>
DEBUG     no GFAL_CONFIG_DIR env var found, try to load configuration
from default directory /etc/gfal2.d/
DEBUG     try to load configuration file
/etc/gfal2.d//gsiftp_plugin.conf ...
DEBUG     try to load configuration file /etc/gfal2.d//srm_plugin.conf ...
DEBUG     try to load configuration file
/etc/gfal2.d//xrootd_plugin.conf ...
DEBUG     try to load configuration file /etc/gfal2.d//bdii.conf ...
DEBUG     try to load configuration file /etc/gfal2.d//gfal2_core.conf ...
DEBUG    Using credentials from X509_USER_PROXY
DEBUG    Certificate&#58; /tmp/x509up_srmcp
DEBUG    Private key&#58; /tmp/x509up_srmcp
DEBUG    ... no GFAL_PLUGIN_DIR environment variable specified, try to
load plugins in the default directory &#58; /usr/lib64/gfal2-plugins/
DEBUG     [gfal_list_directory_plugins] add plugin to list to load
/usr/lib64/gfal2-plugins//libgfal_plugin_xrootd.so
DEBUG     [gfal_list_directory_plugins] add plugin to list to load
<div id='show_1628221755' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1628221755'>/usr/lib64/gfal2-plugins//libgfal_plugin_srm.so
DEBUG     [gfal_list_directory_plugins] add plugin to list to load
/usr/lib64/gfal2-plugins//libgfal_plugin_gridftp.so
DEBUG     [gfal_list_directory_plugins] add plugin to list to load
/usr/lib64/gfal2-plugins//libgfal_plugin_file.so
INFO     [gfal_module_load] plugin
/usr/lib64/gfal2-plugins//libgfal_plugin_xrootd.so loaded with success
DEBUG     gfal_plugin loaded succesfully &#58;
/usr/lib64/gfal2-plugins//libgfal_plugin_xrootd.so
INFO     [gfal_module_load] plugin
/usr/lib64/gfal2-plugins//libgfal_plugin_srm.so loaded with success
DEBUG     gfal_plugin loaded succesfully &#58;
/usr/lib64/gfal2-plugins//libgfal_plugin_srm.so
DEBUG     -&#62; [gridftp_plugin] try to load ..
DEBUG     define GSIFTP session re-use to TRUE
DEBUG     -&#62; [gridftp_plugin] loaded ..
INFO     [gfal_module_load] plugin
/usr/lib64/gfal2-plugins//libgfal_plugin_gridftp.so loaded with success
DEBUG     gfal_plugin loaded succesfully &#58;
/usr/lib64/gfal2-plugins//libgfal_plugin_gridftp.so
INFO     [gfal_module_load] plugin
/usr/lib64/gfal2-plugins//libgfal_plugin_file.so loaded with success
DEBUG     gfal_plugin loaded succesfully &#58;
/usr/lib64/gfal2-plugins//libgfal_plugin_file.so
DEBUG     plugin priority order&#58; xrootd-2.13.3 -&#62; srm-2.13.3 -&#62;
gridftp-2.13.3 -&#62; file-2.13.3 -&#62;
DEBUG    Service endpoint resolution, resolved from FULL SURL
<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json</a>
-&#62; httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2
DEBUG    SRM context not available
DEBUG     SRM connection keep-alive 1
DEBUG     SRM operation timeout 180
DEBUG     SRM connection timeout 60
DEBUG     SRM using certificate /tmp/x509up_srmcp
DEBUG     SRM using private key /tmp/x509up_srmcp
DEBUG       [gfal_srm_statG] try to stat file
<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json</a>
DEBUG    Service endpoint resolution, resolved from FULL SURL
<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json</a>
-&#62; httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2
DEBUG    SRM context recycled for
httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2
DEBUG       [gfal_srm_statG] try to stat file
<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json</a>
Copying 1333 bytes file&#58;///var/rsv/space-usage.json =&#62; <a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json</a>
DEBUG     -&#62; Gfal&#58;&#58;Transfer&#58;&#58;FileCopy
event&#58; [1492719791221] BOTH   GFAL2&#58;CORE&#58;COPY   LIST&#58;ENTER
INFO     Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY LIST&#58;ENTER
event&#58; [1492719791221] BOTH   GFAL2&#58;CORE&#58;COPY   LIST&#58;ITEM
file&#58;///var/rsv/space-usage.json =&#62;
<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json</a>
INFO     Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY LIST&#58;ITEM
file&#58;///var/rsv/space-usage.json =&#62;
<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json</a>
event&#58; [1492719791221] BOTH   GFAL2&#58;CORE&#58;COPY   LIST&#58;EXIT
INFO     Event triggered&#58; BOTH GFAL2&#58;CORE&#58;COPY LIST&#58;EXIT
DEBUG    Endpoint not SRM&#58; file&#58;///var/rsv/space-usage.json
DEBUG    Service endpoint resolution, resolved from FULL SURL
<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json</a>
-&#62; httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2
DEBUG    SRM context recycled for
httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2
WARNING  Failed to ping
<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json</a>
INFO     Found a Castor endpoint, or could not determine version!
Disabling GridFTP session reuse and stat on open
event&#58; [1492719851241] BOTH   SRM       PREPARE&#58;ENTER
INFO     Event triggered&#58; BOTH SRM PREPARE&#58;ENTER
DEBUG                   Checksum check enabled&#58; 0
DEBUG                   No SRM resolution needed on
file&#58;///var/rsv/space-usage.json
DEBUG                   PUT surl -&#62; turl resolution start
DEBUG    Trying to delete
<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json</a>
DEBUG    Service endpoint resolution, resolved from FULL SURL
<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/space-usage.json</a>
-&#62; httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2
DEBUG    SRM context recycled for
httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2
WARNING  Transfer failed with&#58; [srm_resolve_turls][srm_resolve_put_turl]
DESTINATION OVERWRITE
[srm_plugin_prepare_dest_put][srm_plugin_delete_existing_copy][gfal_srm_unlinkG][gfal_srm_report_error]
srm-ifce err&#58; Communication error on send, err&#58; [SE][srmRm][]
httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2&#58; CGSI-gSOAP running on gate02.grid.umich.edu reports Error reading token data header&#58;
Connection closed

INFO     Rolling back PUT
DEBUG     &#60;- Gfal&#58;&#58;Transfer&#58;&#58;FileCopy
gfal-copy error&#58; 70 (Communication error on send) - [gfalt_copy_file][perform_copy][srm_plugin_filecopy][srm_resolve_turls][srm_resolve_put_turl]
DESTINATION OVERWRITE
[srm_plugin_prepare_dest_put][srm_plugin_delete_existing_copy][gfal_srm_unlinkG][gfal_srm_report_error]
srm-ifce err&#58; Communication error on send, err&#58; [SE][srmRm][]
httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2&#58; CGSI-gSOAP running on gate02.grid.umich.edu reports Error reading token data header&#58;
Connection closed

DEBUG    gridftp session cache garbage collection ...

I stopped the firewalls on both head01 and gate02, to no avail, and I&#39;m not quite sure what to do next.  any help is appreciated.

bob

--

---
You received this message because you are subscribed to the Google Groups &#34;GOC Mailinglist&#34; group.
To unsubscribe from this group and stop receiving emails from it, send an email to gocmail+unsubscribe@.....
For more options, visit <a href='https&#58;//groups.google.com/d/optout.' target='_blank' rel='nofollow'>https&#58;//groups.google.com/d/optout.</a>

</div><script type='text/javascript'>
        $('#show_1628221755').click(function() {
            $('#detail_1628221755').slideDown("normal");
            $('#show_1628221755').hide();
            $('#hide_1628221755').show();
        });
        $('#hide_1628221755').click(function() {
            $('#detail_1628221755').slideUp();
            $('#hide_1628221755').hide();
            $('#show_1628221755').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F33533">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="/images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 33533});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
