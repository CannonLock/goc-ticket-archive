<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[3460] Request for monitoring of Gratia probe status to be added to VORS</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=3460" method="post">
<div class="page-header">
    <h3><span class="muted">3460</span> / Request for monitoring of Gratia probe status to be added to VORS</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Chris Green</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Rob to review</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2007-08-21</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/3460", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/3460?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/3460?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Request%20for%20monitoring%20of%20Gratia%20probe%20status%20to%20be%20added%20to%20VORS%20ISSUE%3D3460%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='3460#1188227273'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-08-27T15:07:53+00:00">Aug 27, 2007 03:07 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1188227273">&nbsp;</a></div><pre>Chris,

With John&#39;s resignation we are not developing anything with VORS until a replacement
is in place and trained.  I have added this ticket number and description to the VORS
development list and am closing this ticket.

Rob</pre></div><div class='update_description'><i onclick="document.location='3460#1187700507'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-08-21T12:48:27+00:00">Aug 21, 2007 12:48 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1187700507">&nbsp;</a></div><pre>Rob,

This ticket was John&#39;s, and the attempt to reassign it had failed. I&#39;m adding you as the assignee.

Tim</pre></div><div class='update_description'><i onclick="document.location='3460#1185569761'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-07-27T20:56:01+00:00">Jul 27, 2007 08:56 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1185569761">&nbsp;</a></div><pre>Removing John Rosheck from this ticket. Adding another GOC engineer from RR.</pre></div><div class='update_description'><i onclick="document.location='3460#1183148241'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-06-29T20:17:21+00:00">Jun 29, 2007 08:17 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1183148241">&nbsp;</a></div><pre>Hi John,

Thanks for this; enjoy your vacation, and we&#39;ll talk when you return.

Thanks,
Chris.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='3460#1183098254'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-06-29T06:24:14+00:00">Jun 29, 2007 06:24 AM UTC</time> by <b>John Rosheck</b><a class="anchor" name="1183098254">&nbsp;</a></div><pre>Hello,

The development gratia reporting to gindex.cgi has been updated using a new gratia
monitoring daemon
that now takes into account the OSG version information for a resource.  Reporting of
resource short
names that are unregistered is available at the url&#58;
<a href='http&#58;//vors.grid.iu.edu/osg-unregistered.txt' target='_blank' rel='nofollow'>http&#58;//vors.grid.iu.edu/osg-unregistered.txt</a> and
<a href='http&#58;//vors.grid.iu.edu/osg-itb-unregistered.txt' target='_blank' rel='nofollow'>http&#58;//vors.grid.iu.edu/osg-itb-unregistered.txt</a> for the OSG production and ITB grids
respectively.

The currently reported version information for all registered OSG resources is
available at&#58;
<a href='http&#58;//vors.grid.iu.edu/osg-versions.txt' target='_blank' rel='nofollow'>http&#58;//vors.grid.iu.edu/osg-versions.txt</a> and
<a href='http&#58;//vors.grid.iu.edu/osg-itb-versions.txt' target='_blank' rel='nofollow'>http&#58;//vors.grid.iu.edu/osg-itb-versions.txt</a> for the OSG production and ITB grids
respectively.

The files are byproducts of the new gratia monitoring daemon that produces the gratia
summary information for the gindex interface and are updated at the same rate (every
15 minutes currently).
There are known issues with the gratia reporting featured in the detailed information
for any specific
resource using the gindex interface.  I hope to fix this when I return from vacation
the week of July
9th.

John</pre></div><div class='update_description'><i onclick="document.location='3460#1182900496'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-06-26T23:28:16+00:00">Jun 26, 2007 11:28 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1182900496">&nbsp;</a></div><pre>Thanks, John.

Chris.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='3460#1182896043'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-06-26T22:14:03+00:00">Jun 26, 2007 10:14 PM UTC</time> by <b>John Rosheck</b><a class="anchor" name="1182896043">&nbsp;</a></div><pre>Hello,

I have not had the opportunity to do the work I promised on updating the gratia
interface for VORS.  I am putting it on the short list for this week and expect to
have something together by the end of Thursday the 28th.

John</pre></div><div class='update_description'><i onclick="document.location='3460#1181588872'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-06-11T19:07:52+00:00">Jun 11, 2007 07:07 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1181588872">&nbsp;</a></div><pre>Philippe has been given an account in Footprints. We&#39;ll need to discuss how the Gratis tickets will need
to be handled and assigned out to your list, as described earlier in the ticket. If Philippe can contact
the GOC between normal business hours, 8-5 EST I&#39;ll share the account information with him.

Tim</pre></div><div class='update_description'><i onclick="document.location='3460#1181588586'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-06-11T19:03:06+00:00">Jun 11, 2007 07:03 PM UTC</time> by <b>John Rosheck</b><a class="anchor" name="1181588586">&nbsp;</a></div><pre>Hi Chris,

I&#39;ve started the gratia pulls from VORS from a daemon on a 15 minute interval.  Let
me know if it causes
any problems with your server.

John</pre></div><div class='update_description'><i onclick="document.location='3460#1181331972'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-06-08T19:46:12+00:00">Jun 8, 2007 07:46 PM UTC</time> by <b>John Rosheck</b><a class="anchor" name="1181331972">&nbsp;</a></div><pre>Hi Chris,

I finally got a chance to put in some more time on this -- I always try to do
something each week or it will fall off my radar.  In particular, I added the days
figure to the age column and fixed it so that missing entries are updated (that&#39;s why
BNL_ATLAS_1 was still showing up).

Concerning the other issues you brought up.  I&#39;m not displaying anything that doesn&#39;t
have a matching
registered shortname - and I really can&#39;t do anything else.  What I could do is have
it record names that
have no match in the registration database and then email those somewhere on a
regular interval (daily?).  On the other hand, all of the VORS &#39;monitors&#39; I build do
that themselves.  It&#39;s really easy to
pull the currently supported site list for each grid.

About highlighting suspect entries -- how would you like me to highlight them and
what specifically defines a suspect entry?  Finally, on the version number -- right
now that would be too difficult.  But I
need to change the way I handle that anyway so it will be available by the time this
data display gets
into production.  Making a new development version of VORS is on my list of things to
do in the nearer
term.

John</pre></div><div class='update_description'><i onclick="document.location='3460#1180560840'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-30T21:34:00+00:00">May 30, 2007 09:34 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1180560840">&nbsp;</a></div><pre>Hi John,

Thanks for this, and your reply yesterday. I just took a quick look, and it appears
that you&#39;re still displaying data that we don&#39;t report any more, notably BNL_ATLAS_1
and BNL_ATLAS_2; and not reporting what we get fro BNL_LOCAL, BNL_OSG and BNL_PANDA.
In my view it is also a ticket for a site&#39;s Gratia SiteName to be inconsistent with
that site&#39;s VORS registration or for it not to be registered in VORS at all (at least
on the production site). Other than that, I think things are looking good. I
understand you&#39;ve been working on other things, but when you get chance I&#39;d
appreciate your views on my suggestions in earlier entries on this ticket about
showing the OSG version on the same page and highlighting suspect entries. Adding the
&#34;days&#34; unit is of lower importance but still desirable if not technically difficult.

Thanks again,
Chris.</pre></div><div class='update_description'><i onclick="document.location='3460#1180560630'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-30T21:30:30+00:00">May 30, 2007 09:30 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1180560630">&nbsp;</a></div><pre>Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='3460#1180559637'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-30T21:13:57+00:00">May 30, 2007 09:13 PM UTC</time> by <b>John Rosheck</b><a class="anchor" name="1180559637">&nbsp;</a></div><pre>Hi Chris,

I forced through an update.  Please take a look but I haven&#39;t had a chance to check
the detail.

John</pre></div><div class='update_description'><i onclick="document.location='3460#1180495216'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-30T03:20:16+00:00">May 30, 2007 03:20 AM UTC</time> by <b>John Rosheck</b><a class="anchor" name="1180495216">&nbsp;</a></div><pre>Hi Chris,

I&#39;ve been overloaded recently with a machine down and other issues consuming time so
I haven&#39;t had a chance to update the displayed data.  I&#39;ve built the new script for
retrieving all site data at once for each
grid and confirmed that the itb is now readable too so its just a matter of an hour
or two to get this all updated.  End of week for sure (but hopefully sooner).

About the second paragraph &#58; I don&#39;t see that there would be a problem with getting
Philippe an account or the cc of tickets to gratia-operation.  I&#39;ll take it up with
the folks here that manage that tomorrow.  I am very sure that as of right now, we
aren&#39;t prepared to issue tickets on the lack of gratia reporting.  Its absolutely
doable in the future (we issue tickets based on other monitoring now) but that
requires input from a lot more people than me.  I know its coming and I&#39;ll talk to
the other folks in operations about it tomorrow too.

John</pre></div><div class='update_description'><i onclick="document.location='3460#1180475142'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-29T21:45:42+00:00">May 29, 2007 09:45 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1180475142">&nbsp;</a></div><pre>Hi John,

I have a request&#58; could you delete VORS display of information that is no longer
being received  from the monitor-status site? Some probes (especially old ones) may
be marked inactive by us and therefore will no longer be sent to you. These entries
shouldprobably also be removed from your status page.

On another note&#58; are we ready to move to automatic ticketing of non-reporting sites
yet? I think Philippe should have a FootPrints account and tickets should be cc&#39;d to
gratia-operation. What I&#39;m not sure about is whether tickets should be assigned to
the site initially; or to us. My preference is the former; but then the wording of
the ticket should tell them that they should install if not installed, or reply to
the ticket requesting guidance diagnosing and fixing the problem.

I&#39;d be interested to know what you think.

Thanks,
Chris.</pre></div><div class='update_description'><i onclick="document.location='3460#1179873555'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-22T22:39:15+00:00">May 22, 2007 10:39 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1179873555">&nbsp;</a></div><pre>Hi John,

I thought I&#39;d already done this&#58; my apologies.

This is now done and checked. Sorry for the inconvenience.

Chris.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='3460#1179778264'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-21T20:11:04+00:00">May 21, 2007 08:11 PM UTC</time> by <b>John Rosheck</b><a class="anchor" name="1179778264">&nbsp;</a></div><pre>Hi Chris,

I&#39;m rewriting the data pull to use the &#39;allsites=1&#39; parameter but while everything
seems to work fine on the production instance (port 8880) it doesn&#39;t not return the
expect information from the ITB gratia site.  The
response I get is &#58;
&#39;record-count-hour=260|record-count-24hour=7859|queuesize0=0|queuesize1=0|queuesize2=0&#39;

Could the ITB gratia site be updated to provide the same information as the production?

Thanks,
John</pre></div><div class='update_description'><i onclick="document.location='3460#1179335779'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-16T17:16:19+00:00">May 16, 2007 05:16 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1179335779">&nbsp;</a></div><pre>Hi John,

Thanks for this.

I have added the functionality to be able to get all site information at once&#58;

<a href='http&#58;//gratia.opensciencegrid.org&#58;8880/gratia-administration/monitor-status.html?allsites=1' target='_blank' rel='nofollow'>http&#58;//gratia.opensciencegrid.org&#58;8880/gratia-administration/monitor-status.html?allsites=1</a>

This should lessen the load on the server and you can update pretty much as often as you like, but 15 minutes should be a reasonable default.

As for the &#34;age&#34; field, two minor enhancement requests&#58;
Ages &gt; 24h in orange, &gt;168h in red. d&#58;h&#58;m&#58;s instead of h&#58;m&#58;s?  Thanks,
Chris.

Open Science Grid FootPrints wrote&#58;  [Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='3460#1179158743'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-14T16:05:43+00:00">May 14, 2007 04:05 PM UTC</time> by <b>John Rosheck</b><a class="anchor" name="1179158743">&nbsp;</a></div><pre>Hi Chris,

I&#39;ve added an &#39;Age&#39; field to the display for all probes on all sites.  I know it
doesn&#39;t make much sense to resolve it to the second but everything else is so I
thought it better to stay consistant.

As far as update rate, there is no problem on our side with running every 15 minutes
(or faster) if you like.  3 hours seems excessive to me.

Let me know what you think,
John</pre></div><div class='update_description'><i onclick="document.location='3460#1178945175'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-12T04:46:15+00:00">May 12, 2007 04:46 AM UTC</time> by <b>Chris Green</b><a class="anchor" name="1178945175">&nbsp;</a></div><pre>Hi John,

This is a very nice web page, and concisely gives us the sites we need
to go after to install Gratia.

I must confess though, to being a little confused by the presentation of
the time, since you&#39;re printing a &#34;last updated&#34; time, but I don&#39;t know
how long it is since you checked. If possible, could you (at check time)
calculate the time between when you checked a particular site and its
last-updated probe time? That way one can tell at a glance that the
probe (for instance) last reported 4 hours before the VORS check.
Ideally it would be presented in, &#34;human-readable time,&#34; ie whatever
time unit is appropriate for the time interval; but I know this is extra
work.

I think a reasonable &#34;reporting&#34; threshold is when a probe hasn&#39;t been
seen for 24 hours *unless* it&#39;s in the Ops maintenance DB as down.

I think every 3 hours is a reasonable time to update&#58; Philippe?

Also, if you are performing this check outside of your normal site
verify run, I could provide a URL (probably similar to the one you had
but with sitename null) which will list all sites with one query,
perhaps in&#58;

SITENAME|PROBENAME|LASTCONTACT

format. We initially provided the single query so sites could check
themselves, and I also made the initial assumption that your were
running this with the main site test cycle.

Please let me know what you think.

Thanks again,
Chris.
<div id='show_152230920' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_152230920'>
Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_152230920').click(function() {
            $('#detail_152230920').slideDown("normal");
            $('#show_152230920').hide();
            $('#hide_152230920').show();
        });
        $('#hide_152230920').click(function() {
            $('#detail_152230920').slideUp();
            $('#hide_152230920').hide();
            $('#show_152230920').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='3460#1178937565'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-12T02:39:25+00:00">May 12, 2007 02:39 AM UTC</time> by <b>John Rosheck</b><a class="anchor" name="1178937565">&nbsp;</a></div><pre>Hi Chris,

Sorry it took so long but I haven&#39;t had a chance to hit this till late this
afternoon.  Please have a look at&#58;
<a href='http&#58;//vors.grid.iu.edu/cgi-bin/gindex.cgi' target='_blank' rel='nofollow'>http&#58;//vors.grid.iu.edu/cgi-bin/gindex.cgi</a>

Note that any url to VORS using index.cgi can be replaced with gindex.cgi and get the
new, gratia-enabled, VORS display.  There is a specific data label for Gratia
information (along with site_verfiy, bdii, and vo) in the data selection bar as well
as a Gratia report table entry in the details for each resource except in the BDII
display (i.e. when either gratia or site_verify is selected for a particular resource
then the same information will be displayed).

Please have a look at this and let me know if anything looks catatonic.  I&#39;m using
the interface supplied
earlier in this ticket exclusively.  I&#39;ve only made one run against the production
sites but this can be
run by a daemon at your earliest convience.  I&#39;ll need an update rate when this goes
automatic.  Site retrievals are currently spaced by one second but that can be
changed either way.

John</pre></div><div class='update_description'><i onclick="document.location='3460#1178224278'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-03T20:31:18+00:00">May 3, 2007 08:31 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1178224278">&nbsp;</a></div><pre>Thank you for the prompt response, John. I hope your days off are for a
pleasant long weekend, and please let me know if you have any problems
or questions when you&#39;re able to get back to this.

Best,
Chris.

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='3460#1178223383'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-03T20:16:23+00:00">May 3, 2007 08:16 PM UTC</time> by <b>John Rosheck</b><a class="anchor" name="1178223383">&nbsp;</a></div><pre>Hi Chris,

Thanks for the information.  I believe that I have everything I need to take my part
to the next stage.  I was hoping to have something up today and even got started on
it but a server died unexpectedly and I had to
deal with it.  I&#39;m off the next two days but expect to have something for you by the
middle of next week.

Thanks again for the very complete information,
John</pre></div><div class='update_description'><i onclick="document.location='3460#1178123476'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-02T16:31:16+00:00">May 2, 2007 04:31 PM UTC</time> by <b>Chris Green</b><a class="anchor" name="1178123476">&nbsp;</a></div><pre>Hi John,

The information is updated every time that probe sends records to the
collector. If there were no jobs completed since the last probe upload,
the collector will not be contacted. Probes will under normal
circumstances (a regular flow of jobs) upload to the collector every
10-15 minutes depending on the local configuration.

We are considering updates to the probe infrastructure to require a
handshake with the collector at least every &#60;insert-time-period-here&#62;
regardless of whether jobs have completed since the last update; but in
the meantime I think 24 hours is a reasonable time -- if no jobs have
completed in that time requiring an upload and the site is not under
maintenance then there&#39;s likely to be a problem anyway.

Old gatekeepers will continue to be listed unless they are manually
marked as inactive by a Gratia administrator. I have marked your old one
inactive so it should no longer show up. In the general case, I think we
should keep this as a manual task, as the MeterName is not necessarily
something upon which you can filter by (eg) registered gatekeeper name,
since there may be reasons that a particular probe might not be running
on the gatekeeper (eg PBS master is not on the gatekeeper). I think that
we can do some preliminary cleanup before this service goes live, but in
general a probe that hasn&#39;t reported in a while is worthy of a GOC
ticket, even if its resolution is to ask the Gratia administrators to
remove it from consideration. We might want to consider a regime where
de-registration of a gatekeeper generates a ticket for the Gratia
administrators to clean up probe entries.

As for links back to Gratia, I&#39;m assuming you mean the relevant probe
status link?

Thanks,
Chris.

<div id='show_47224006' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_47224006'>Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_47224006').click(function() {
            $('#detail_47224006').slideDown("normal");
            $('#show_47224006').hide();
            $('#hide_47224006').show();
        });
        $('#hide_47224006').click(function() {
            $('#detail_47224006').slideUp();
            $('#hide_47224006').hide();
            $('#show_47224006').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='3460#1178053525'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-01T21:05:25+00:00">May 1, 2007 09:05 PM UTC</time> by <b>John Rosheck</b><a class="anchor" name="1178053525">&nbsp;</a></div><pre>Hi,

I pulled data using the link you supplied and it looks like it will be quite easy to
integrate but there are some
questions concerning placement that I&#39;ll have to take up with others.  It seems to me
that there should be a summary page for gratia just like that for the site verify and
bdii tests.

Concerning this test information - how often is it updated and when would an update
be too old to be considered good (the fail condition)?

Also, when I looked at my own ITB site, IUB-VTB, I received the folowing response&#58;
condor&#58;tb10.grid.iu.edu&#58; last-contact=2007-05-01 20&#58;03&#58;44
condor&#58;tb02.grid.iu.edu&#58; last-contact=2007-02-14 17&#58;36&#58;24

Why is the old gatekeeper still listed?  This is really not a problem though since
VORS can easily filter by the currently listed gatekeeper.

Also, we will probably want to include links into the VORS page back to gratia so we
should think about that too.

I&#39;ll see if I can get the summary page put together on a development instance in
short order.

John</pre></div><div class='update_description'><i onclick="document.location='3460#1178043098'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-05-01T18:11:38+00:00">May 1, 2007 06:11 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1178043098">&nbsp;</a></div><pre>Hi,

Now that Gratia reporting is a requirement for OSG0.6.0, we&#39;d like to be able to have VORS show
the last-seen date for Gratia probes for each site. There is a URL for this purpose&#58; please see
<a href='http&#58;//gratia.opensciencegrid.org&#58;8880/gratia-administration/monitor-status.html?sitename=FNAL_GPFARM' target='_blank' rel='nofollow'>http&#58;//gratia.opensciencegrid.org&#58;8880/gratia-administration/monitor-status.html?sitename=FNAL_GPFARM</a> (or equivalently <a href='http&#58;//gratia.opensciencegrid.org&#58;8881/gratia-' target='_blank' rel='nofollow'>http&#58;//gratia.opensciencegrid.org&#58;8881/gratia-</a>
administration/monitor-status.html?sitename=FNAL_GPFARM_TEST for ITB sites). Ideally, sites
would be able to tell at a glance whether their probes are operating).

This page can also respond specifically to probename (eg <a href='http&#58;//gratia.opensciencegrid.org&#58;8880/' target='_blank' rel='nofollow'>http&#58;//gratia.opensciencegrid.org&#58;8880/</a>
gratia-administration/monitor-status.html?probename=condor&#58;fngp-osg.fnal.gov) but I think the
sitename variant is more appropriate for GOC&#39;s purposes.

I&#39;d be grateful if you could contact us to discuss feasibility and next steps.

Thanks for your time,
Chris Green for the Gratia team.

--
Chris Green &#60;greenc@....&#62;, FNAL CD/SCF/GRID.
&#39;Phone (630) 840-2167.
IRC&#58; greenc (jabber.fnal.gov); chissgreen (AIM, Yahoo);
chissg@.... (MSNM); chris.h.green (Google Talk).</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F3460">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
