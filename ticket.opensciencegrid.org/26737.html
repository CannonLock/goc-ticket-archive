<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[26737] gfal2-copy leads to segmentation fault</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=26737" method="post">
<div class="page-header">
    <h3><span class="muted">26737</span> / gfal2-copy leads to segmentation fault</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Manoj Kumar Jha</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Manoj Kumar Jha</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Update from Manoj after a few days</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-10-07</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000597647">INC000000597647</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Carl Edquist <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/26737", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26737?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/26737?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20gfal2-copy%20leads%20to%20segmentation%20fault%20ISSUE%3D26737%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='26737#1444252110'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-07T21:08:30+00:00">Oct 7, 2015 09:08 PM UTC</time> by <b>echism</b><a class="anchor" name="1444252110">&nbsp;</a></div><pre>Closing as agreed.</pre></div><div class='update_description'><i onclick="document.location='26737#1443720124'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-01T17:22:04+00:00">Oct 1, 2015 05:22 PM UTC</time><a class="anchor" name="1443720124">&nbsp;</a></div><pre>This ticket can be closed from the site side.

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='26737#1443718724'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-01T16:58:44+00:00">Oct 1, 2015 04:58 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1443718724">&nbsp;</a></div><pre>Can this ticket be closed, or should we leave it open until the updated software is in the production repos?

Suchandra</pre></div><div class='update_description'><i onclick="document.location='26737#1443639548'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-30T18:59:08+00:00">Sep 30, 2015 06:59 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1443639548">&nbsp;</a></div><pre>Great, thanks Edgar!  It sounds like the scratch build (gfal2-2.9.3-1.1.osg33.el6) was working for Manoj also.

Carl</pre></div><div class='update_description'><i onclick="document.location='26737#1443633799'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-30T17:23:19+00:00">Sep 30, 2015 05:23 PM UTC</time><a class="anchor" name="1443633799">&nbsp;</a></div><pre>Hi Brian,

That works now I see it failling&#58;

[1016] efajardo@cabinet-10-10-1 ~$ ulimit -s 1024
[1016] efajardo@cabinet-10-10-1 ~$  gfal-copy -vf -K CRC32  file&#58;///tmp/sample.txt <a href='gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/temp/user/test13b.txt' target='_blank' rel='nofollow'>gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/temp/user/test13b.txt</a>
Copying 67108864 bytes file&#58;///tmp/sample.txt =&#62; <a href='gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/temp/user/test13b.txt' target='_blank' rel='nofollow'>gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/temp/user/test13b.txt</a>
Segmentation fault (core dumped)

Then Carl,

I tested your rpms here&#58;

<a href='https&#58;//koji-hub.batlab.org/koji/taskinfo?taskID=186400' target='_blank' rel='nofollow'>https&#58;//koji-hub.batlab.org/koji/taskinfo?taskID=186400</a>

And after installing them the problem is gone&#58;

gfal-copy -vf -K CRC32  file&#58;///tmp/sample.txt <a href='gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/temp/user/test13b.txt' target='_blank' rel='nofollow'>gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/temp/user/test13b.txt</a>
Copying 67108864 bytes file&#58;///tmp/sample.txt =&#62; <a href='gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/temp/user/test13b.txt' target='_blank' rel='nofollow'>gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/temp/user/test13b.txt</a>

Edgar

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='26737#1443632510'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-30T17:01:50+00:00">Sep 30, 2015 05:01 PM UTC</time><a class="anchor" name="1443632510">&nbsp;</a></div><pre>Hi Edgar,

The problem is not reproducible on all hosts - it depends on a few OS settings.

Try decreasing the stack size in your shell&#58;

ulimit -s 1024

That seems to make the segfault reliable for me.

Brian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26737#1443556588'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-29T19:56:28+00:00">Sep 29, 2015 07:56 PM UTC</time><a class="anchor" name="1443556588">&nbsp;</a></div><pre>After using the scratch build route, it seems the problem has been fixed.  The resource is &#39;hammer-osg.rcac.purdue.edu&#39;.  We are in the  process of deploying  patch fix version of gfal2 on the cluster.  We will monitor the job failure rate on this cluster for couple of days.  We will keep you updated about it.

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='26737#1443553554'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-29T19:05:54+00:00">Sep 29, 2015 07:05 PM UTC</time><a class="anchor" name="1443553554">&nbsp;</a></div><pre>HI Carl,

I think I am doing something wrong here. I was able to gfal-copy&#58;

gfal-copy -vf -K CRC32  file&#58;///tmp/sample.txt <a href='gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/temp/user/test13b.txt' target='_blank' rel='nofollow'>gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/temp/user/test13b.txt</a>
Copying 67108864 bytes file&#58;///tmp/sample.txt =&#62; <a href='gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/temp/user/test13b.txt' target='_blank' rel='nofollow'>gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/temp/user/test13b.txt</a>

And it worked. Was it not supposed to work?

This is the version I am using&#58;

gfal-copy --version
gfal2-util version 1.2.1 (gfal2 2.9.3)
file-2.9.3
gridftp-2.9.3
srm-2.9.3

And this is my proxy&#58;

voms-proxy-info -all
subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020/CN=proxy
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020
identity  &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /tmp/x509up_u501
timeleft  &#58; 11&#58;48&#58;14
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO cms extension information ===
VO        &#58; cms
subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020
issuer    &#58; /DC=ch/DC=cern/OU=computers/CN=voms2.cern.ch
attribute &#58; /cms/Role=NULL/Capability=NULL
attribute &#58; /cms/uscms/Role=NULL/Capability=NULL
timeleft  &#58; 11&#58;48&#58;14
<div id='show_630250462' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_630250462'>uri       &#58; voms2.cern.ch&#58;15002

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020
</div><script type='text/javascript'>
        $('#show_630250462').click(function() {
            $('#detail_630250462').slideDown("normal");
            $('#show_630250462').hide();
            $('#hide_630250462').show();
        });
        $('#hide_630250462').click(function() {
            $('#detail_630250462').slideUp();
            $('#hide_630250462').hide();
            $('#show_630250462').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='26737#1443553361'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-29T19:02:41+00:00">Sep 29, 2015 07:02 PM UTC</time><a class="anchor" name="1443553361">&nbsp;</a></div><pre>Hi,

What Purdue resource are we talking about here? Generally we don&#39;t stop submitting anyway just because sam tests go red, but I&#39;ll let the factory ops team know.

Thanks,
Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='26737#1443489325'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-29T01:15:25+00:00">Sep 29, 2015 01:15 AM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1443489325">&nbsp;</a></div><pre>If you&#39;d like to go the scratch build route, I&#39;ve made a scratch build with Brian&#39;s patch here&#58;

<a href='https&#58;//koji-hub.batlab.org/koji/taskinfo?taskID=186400' target='_blank' rel='nofollow'>https&#58;//koji-hub.batlab.org/koji/taskinfo?taskID=186400</a>

(Unfortunately it&#39;s not part of a yum repo so you have to download all the ones you need...)

Carl</pre></div><div class='update_description'><i onclick="document.location='26737#1443489165'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-29T01:12:45+00:00">Sep 29, 2015 01:12 AM UTC</time><a class="anchor" name="1443489165">&nbsp;</a></div><pre>Gotcha - so it&#39;s a SAM test issue, not really an issue with running jobs, right?

(also CC&#39;ing Erik since I see he was on the original GGUS ticket

I see a couple options here&#58;
1.  Stage your own gfal RPMs.  Either have Carl do a scratch build or try the version in  <a href='http&#58;//grid-deployment.web.cern.ch/grid-deployment/dms/lcgutil/repos/el6/x86_64/.' target='_blank' rel='nofollow'>http&#58;//grid-deployment.web.cern.ch/grid-deployment/dms/lcgutil/repos/el6/x86_64/.</a>
- This is easiest if you use cobbler or have some other mechanism to maintain a private RPM build at Purdue.
- I don&#39;t see a tag yet for 2.10, which means that EPEL updates are at least 2 weeks away.
2.  The &#39;#&#39; character causing the problem is part of a string generated by HTCondor.  It&#39;s a small, modest patch to HTCondor that upstream will likely accept.
- Jaime&#58; effectively, we&#39;d like to add &#39;#&#39; as a case here&#58; <a href='https&#58;//github.com/htcondor/htcondor/blob/master/src/condor_gridmanager/infnbatchjob.cpp#L1586' target='_blank' rel='nofollow'>https&#58;//github.com/htcondor/htcondor/blob/master/src/condor_gridmanager/infnbatchjob.cpp#L1586</a>
- This would require Purdue to keep a separate RPMs for a few weeks (as in item 1).  However, we can turn around this almost instantly.
3.  We can submit a patch to the SAM tests to generate the test file in a different local directory.  Andrea Sciaba typically takes 2-3 days to validate SAM test patches.
4.  Revert back to srmv2-lcg and explain the issue to the glidein factory operators and just run pilots at Purdue without waiting for SAM tests to pass.  Factory Ops are reasonable people and they tend to understand &#34;software bug beyond our control&#34;.
- I&#39;ve CC&#39;d Jeff Dost, who may have some input on this item.

Which would you like to pursue?

Thanks!

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26737#1443473540'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-28T20:52:20+00:00">Sep 28, 2015 08:52 PM UTC</time><a class="anchor" name="1443473540">&nbsp;</a></div><pre>Hi Brian,
For HTCondor based PBS CE,  SAM test was failing if one uses &#39;srmv2-lcg&#39; for local stage out from the  worker node.  The local stage out problem was solved after migrating to &#39;gfal2&#39;.  Please see the following ticket for more information

<a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=114386' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=114386</a>

If we use gfal2 on worker nodes, production and reprocessing jobs are being aborted with the exit code  99109 (Uncaught exception in WMAgent step executor).  In the &#34;/var/log/messages&#34;  file of these worker nodes, we observed &#39;lib_gfal_plugin_file.so&#39;  crashed with segmentation violation.  Similar error one can reproduce  by copying file using gfal-copy (with checksum enabled) from these worker nodes.   If fix for gfal2 doesn&#39;t come up quickly, only option left for us to switch back to GRAM based PBS CE.  Let us know if you have other opinion.

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='26737#1443472403'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-28T20:33:23+00:00">Sep 28, 2015 08:33 PM UTC</time><a class="anchor" name="1443472403">&nbsp;</a></div><pre>Hi Carl,

(Grumble - I wrote a response Thursday but it appears the update didn&#39;t make it to the ticket)

Let&#39;s go ahead and make a scratch build for Manoj to validate the fix.

Manoj - I don&#39;t understand your question.  The CE technology and the SRM client used for worker node stageout shouldn&#39;t be related.  How are you ending up with the dependency?

Brian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26737#1443453877'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-28T15:24:37+00:00">Sep 28, 2015 03:24 PM UTC</time><a class="anchor" name="1443453877">&nbsp;</a></div><pre>Hello,
If implementing fix for &#39;gfa2-copy&#39; takes time, should we move back to GRAM bsed CE  ?  CMS is not able to utilize this cluster.  Let us know accordingly we will decide.

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='26737#1443127086'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-24T20:38:06+00:00">Sep 24, 2015 08:38 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1443127086">&nbsp;</a></div><pre>Brian, will the plan be to wait for the fix to make its way upstream to EPEL?  (The alternative I guess being pulling gfal2 into OSG.)

Carl</pre></div><div class='update_description'><i onclick="document.location='26737#1442976269'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-23T02:44:29+00:00">Sep 23, 2015 02:44 AM UTC</time><a class="anchor" name="1442976269">&nbsp;</a></div><pre>Hi Brian,
On Hammer cluster worker  nodes, &#34;ulimit -s&#34;   is set to unlimited.  However,  it is set to  10 MB on lxplus.    There is no limit on stack size  for worker nodes on which &#39;libgfal_plugin_file.so&#39; is crashing.

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='26737#1442974573'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-23T02:16:13+00:00">Sep 23, 2015 02:16 AM UTC</time><a class="anchor" name="1442974573">&nbsp;</a></div><pre>Pull request sent to the GFAL2 folks&#58; <a href='https&#58;//gitlab.cern.ch/dmc/gfal2/merge_requests/1' target='_blank' rel='nofollow'>https&#58;//gitlab.cern.ch/dmc/gfal2/merge_requests/1</a>

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26737#1442972891'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-23T01:48:11+00:00">Sep 23, 2015 01:48 AM UTC</time><a class="anchor" name="1442972891">&nbsp;</a></div><pre>Figured this one out.  In gfal_file_plugin_main.c, we have&#58;

do{
char buffer[chunk_size+1];

ret = gfal2_read(handle, fd, buffer, MIN(chunk_size, remain_bytes),  &tmp_err);
if (data_length &#62; 0 ){
remain_bytes -= ret;
}
if( ret &#62; 0){
i_chk-&#62;update(c_handle, buffer, ret);
}
}while(ret &#62; 0 && remain_bytes &#62; 0);

Chunk size can be up to 2MB and is allocated on the stack.  This can blow the stack, depending on the output of &#39;ulimit -s&#39;.  I can reproduce the segfault if I decrease this from 10MB (the default on my dev box) to 1MB.

I bet this explains why Manoj doesn&#39;t see it on lxplus; I tested the GFAL2 developer build from early September and still see the problem if I adjust ulimit.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26737#1442947190'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-22T18:39:50+00:00">Sep 22, 2015 06:39 PM UTC</time><a class="anchor" name="1442947190">&nbsp;</a></div><pre>Edgar,
You can copy file using your proxy in the folder &#34;<a href='gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/temp/user&#34' target='_blank' rel='nofollow'>gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/temp/user&#34</a>;.

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='26737#1442939985'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-22T16:39:45+00:00">Sep 22, 2015 04:39 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442939985">&nbsp;</a></div><pre>Hi Manoj,

I&#39;m not part of the CMS VO actually, I have a fermilab identity that I generally use for all voms-proxy testing&#58;

$ voms-proxy-info -all
subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Carl C. Edquist/CN=UID&#58;edquist/CN=proxy
issuer    &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Carl C. Edquist/CN=UID&#58;edquist
identity  &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Carl C. Edquist/CN=UID&#58;edquist
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /tmp/x509up_u47596
timeleft  &#58; 11&#58;59&#58;51
key usage &#58; Digital Signature, Key Encipherment
=== VO fermilab extension information ===
VO        &#58; fermilab
subject   &#58; /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Carl C. Edquist/CN=UID&#58;edquist
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=voms1.fnal.gov
attribute &#58; /fermilab/Role=NULL/Capability=NULL
timeleft  &#58; 11&#58;59&#58;51
uri       &#58; voms1.fnal.gov&#58;15001

(I also have a &#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Carl Edquist 1013&#34; identity that is part of GLOW, but in any case not CMS.)

Edgar, you are part of CMS, right?  Is this something you would have time to take a look at?  (trying a &#34;gfal-copy -K CRC32&#34; command against <a href='gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/user/...' target='_blank' rel='nofollow'>gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/user/...</a> as below)

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='26737#1442928812'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-22T13:33:32+00:00">Sep 22, 2015 01:33 PM UTC</time> by <b>echism</b><a class="anchor" name="1442928812">&nbsp;</a></div><pre>Hey Carl,

Purdue is waiting on the output of voms-proxy-info -all, could you pass that along?

Thank you</pre></div><div class='update_description'><i onclick="document.location='26737#1442626690'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-19T01:38:10+00:00">Sep 19, 2015 01:38 AM UTC</time> by <b>manoj.jha@....</b><a class="anchor" name="1442626690">&nbsp;</a></div><pre>You need cms proxy to write file in our hadoop storage.   Please send us the output of the command “voms-proxy-info —all “.

-Manoj

<font color='#7F7E6F'>&#62; On Sep 18, 2015, at 7&#58;41 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26737#1442619685'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T23:41:25+00:00">Sep 18, 2015 11:41 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442619685">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; You can use our gridftp server &#34;cms-i006.rcac.purdue.edu&#34;  for copying file.</font>

I get an error copying to that server...

$ gfal-copy -vf -K CRC32  file&#58;///tmp/test <a href='gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/user/jha/test13b.txt/mnt/hadoop/store/user/jha/test13b.txt' target='_blank' rel='nofollow'>gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/user/jha/test13b.txt/mnt/hadoop/store/user/jha/test13b.txt</a>
Copying 3 bytes file&#58;///tmp/test =&#62; <a href='gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/user/jha/test13b.txt/mnt/hadoop/store/user/jha/test13b.txt' target='_blank' rel='nofollow'>gsiftp&#58;//cms-i006.rcac.purdue.edu/mnt/hadoop/store/user/jha/test13b.txt/mnt/hadoop/store/user/jha/test13b.txt</a>
gfal-copy error&#58; 70 (Communication error on send) - globus_ftp_client&#58; the server responded with an error 530 Please login with USER and PASS.

Carl</pre></div><div class='update_description'><i onclick="document.location='26737#1442618846'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T23:27:26+00:00">Sep 18, 2015 11:27 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442618846">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Try running gdb against python, not the wrapper script.</font>

Ah, of course!  Yes that works.  There are a bunch more debuginfo packages to install, but they are the right ones this time.  (Manoj, you can probably do the same if you&#39;d like to get gdb working.)

I&#39;m attaching the deepest part of the backtrace.  It&#39;s happening inside gfal_plugin_file_chk_compute(), inside a call to gfal2_checksum() ...

I want to make sure that the versions I have installed actually match what Manoj has, since I&#39;m a little skeptical of the line numbers in the actual failure.

<font color='#7F7E6F'>&#62; You can use our gridftp server &#34;cms-i006.rcac.purdue.edu&#34;  for copying</font>
<font color='#7F7E6F'>&#62; file.  If I use the latest version of &#34;gfal-copy&#34;  from lxplus or VM</font>
<font color='#7F7E6F'>&#62; provided by CERN, I don&#39;t get segmentation fault.  Problem happens when</font>
<font color='#7F7E6F'>&#62; I use  gfal-copy from nodes managed by OSG repository.   Node managed</font>
<font color='#7F7E6F'>&#62; by OSG repository doesn&#39;t have latest version of globus packages.</font>

Ok, thanks, I&#39;ll give that a try.  Yeah, I&#39;m guessing you are right that it has to do with globus package version differences between EPEL and OSG.

Carl</pre></div><div class='update_description'><i onclick="document.location='26737#1442616049'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T22:40:49+00:00">Sep 18, 2015 10:40 PM UTC</time><a class="anchor" name="1442616049">&nbsp;</a></div><pre>You can use our gridftp server &#34;cms-i006.rcac.purdue.edu&#34;  for copying file.  If I use the latest version of &#34;gfal-copy&#34;  from lxplus or VM provided by CERN, I don&#39;t get segmentation fault.  Problem happens when I use  gfal-copy from nodes managed by OSG repository.   Node managed by OSG repository doesn&#39;t have latest version of globus packages.

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='26737#1442615891'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T22:38:11+00:00">Sep 18, 2015 10:38 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1442615891">&nbsp;</a></div><pre>Try running gdb against python, not the wrapper script.

Sent from my iPhone

<font color='#7F7E6F'>&#62; On Sep 18, 2015, at 5&#58;29 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26737#1442615372'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T22:29:32+00:00">Sep 18, 2015 10:29 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442615372">&nbsp;</a></div><pre>I&#39;m seeing the same messages as you with gdb; including it complaining about missing debug symbols, which I also am having no luck installing.  Plus I&#39;m not really sure if the fact that gfal-copy is a python script obscures things in gdb, but anyway I don&#39;t seem to be able to get a backtrace&#58;

&#34;/usr/bin/gfal-copy&#34;&#58; not in executable format&#58; File format not recognized
Missing separate debuginfo for the main executable file
Try&#58; yum --enablerepo=&#39;*-debug*&#39; install /usr/lib/debug/.build-id/5a/3f2004833902dab17910930592b74860cf1a7c
[New Thread 53240]
[New Thread 53237]
[New Thread 53239]
[New Thread 53238]
[New Thread 53235]
[New Thread 53236]
Core was generated by &#96;/usr/bin/python /usr/bin/gfal-copy -vf -K CRC32 file&#58;////tmp/mess_hammer-a118.t&#39;.
Program terminated with signal 11, Segmentation fault.
#0  0x00002ac467d034f4 in ?? ()
(gdb) bt
#0  0x00002ac467d034f4 in ?? ()
Cannot access memory at address 0x2ac47645e180

...

I&#39;m going to try to set up a hadoop instance and see if I can get gfal-copy to segfault with the &#34;-K CRC32&#34; option like you were seeing...

Carl</pre></div><div class='update_description'><i onclick="document.location='26737#1442605521'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T19:45:21+00:00">Sep 18, 2015 07:45 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442605521">&nbsp;</a></div><pre>Hi Manoj,

I am not sure what the exact dependency relationship is between globus-ftp-client and gfal2-util, I&#39;m taking a look; it could be we&#39;ll need to update the osg version to match what EPEL&#39;s gfal2 is built against... I don&#39;t know offhand whether anyone has tested the latest version of the gfal2 tools.

Carl</pre></div><div class='update_description'><i onclick="document.location='26737#1442597950'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-18T17:39:10+00:00">Sep 18, 2015 05:39 PM UTC</time><a class="anchor" name="1442597950">&nbsp;</a></div><pre>Any update on it ?

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='26737#1442505557'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-17T15:59:17+00:00">Sep 17, 2015 03:59 PM UTC</time><a class="anchor" name="1442505557">&nbsp;</a></div><pre>When we tried to install &#34;globus-ftp-client-8.23-1&#34;  on our test node, it complains with the other globus packages available from OSG.  It seems globus packages from  epel6   repository is not compatible with the osg worker node  packages.    Has any OSG site tested the installation  of  latest version of GFAL2 ?

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='26737#1442504789'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-17T15:46:29+00:00">Sep 17, 2015 03:46 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442504789">&nbsp;</a></div><pre>Right, that was just for Manoj to get his gdb working.  I haven&#39;t gotten to play around with the core file yet...

Carl</pre></div><div class='update_description'><i onclick="document.location='26737#1442453631'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-17T01:33:51+00:00">Sep 17, 2015 01:33 AM UTC</time><a class="anchor" name="1442453631">&nbsp;</a></div><pre>Hi Carl,

If you&#39;re able to get the exact versions of globus-* on your dev host, you should be able to process the core file.  No need for debug symbols to be present when the core is taken - just when it&#39;s analyzed.

Brian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='26737#1442341116'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T18:18:36+00:00">Sep 15, 2015 06:18 PM UTC</time><a class="anchor" name="1442341116">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Try&#58; yum --enablerepo=&#39;*-debug*&#39; install /usr/lib/debug/.build-id/5a/3f2004833902dab17910930592b74860cf1a7c</font>

I tried above command.

&#34;&#34;&#34;
[root@cmstest-v001 ~]#  yum --enablerepo=&#39;*-debug*&#39; install /usr/lib/debug/.build-id/5a/3f2004833902dab17910930592b74860cf1a7c
Loaded plugins&#58; auto-update-debuginfo, priorities, rpm-warm-cache, security, versionlock
Setting up Install Process
13003 packages excluded due to repository priority protections
No package /usr/lib/debug/.build-id/5a/3f2004833902dab17910930592b74860cf1a7c available.
Error&#58; Nothing to do
[root@cmstest-v001 ~]#

&#34;&#34;&#34;

Concerning &#34;globus-ftp-client-8.23-1&#34; , we need to update our local repository first.

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='26737#1442338250'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T17:30:50+00:00">Sep 15, 2015 05:30 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442338250">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; I tried &#34;debuginfo-install gfal2&#92;*&#34;.  But, gdb is still complaining.</font>

It might just be complaining that gfal-copy is a python script; you might already have the debuginfo packages installed that are really relevant, but to get everything you can just follow the instructions it prints for the missing ones&#58;

<font color='#7F7E6F'>&#62; &#34;/usr/bin/gfal-copy&#34;&#58; not in executable format&#58; File format not recognized</font>
<font color='#7F7E6F'>&#62; Missing separate debuginfo for the main executable file</font>
<font color='#7F7E6F'>&#62; Try&#58; yum --enablerepo=&#39;*-debug*&#39; install /usr/lib/debug/.build-id/5a/3f2004833902dab17910930592b74860cf1a7c</font>

<font color='#7F7E6F'>&#62; From where one can get the OSG equivalent of the package  &#34;globus-ftp-client-8.23-1&#34; ?</font>

EPEL has 8.23-1, but OSG is still at 8.19.  If you really want the newer ones you can yum update or yum install with --disablerepo=osg&#92;* and then the newer EPEL ones will show up.

Carl</pre></div><div class='update_description'><i onclick="document.location='26737#1442337735'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T17:22:15+00:00">Sep 15, 2015 05:22 PM UTC</time><a class="anchor" name="1442337735">&nbsp;</a></div><pre>From where one can get the OSG equivalent of the package  &#34;globus-ftp-client-8.23-1&#34; ?

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='26737#1442337592'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T17:19:52+00:00">Sep 15, 2015 05:19 PM UTC</time><a class="anchor" name="1442337592">&nbsp;</a></div><pre>I tried &#34;debuginfo-install gfal2&#92;*&#34;.  But, gdb is still complaining.

&#34;&#34;&#34;
[jha2@cmstest-v001 Junk]$ gdb /usr/bin/gfal-copy core.53235
GNU gdb (GDB) Red Hat Enterprise Linux (7.2-83.el6)
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+&#58; GNU GPL version 3 or later &#60;<a href='http&#58;//gnu.org/licenses/gpl.html&#62' target='_blank' rel='nofollow'>http&#58;//gnu.org/licenses/gpl.html&#62</a>;
This is free software&#58; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &#34;show copying&#34;
and &#34;show warranty&#34; for details.
This GDB was configured as &#34;x86_64-redhat-linux-gnu&#34;.
For bug reporting instructions, please see&#58;
&#60;<a href='http&#58;//www.gnu.org/software/gdb/bugs/&#62' target='_blank' rel='nofollow'>http&#58;//www.gnu.org/software/gdb/bugs/&#62</a>;...
&#34;/usr/bin/gfal-copy&#34;&#58; not in executable format&#58; File format not recognized
Missing separate debuginfo for the main executable file
Try&#58; yum --enablerepo=&#39;*-debug*&#39; install /usr/lib/debug/.build-id/5a/3f2004833902dab17910930592b74860cf1a7c
[New Thread 53240]
[New Thread 53237]
[New Thread 53239]
[New Thread 53238]
[New Thread 53235]
[New Thread 53236]
Core was generated by &#96;/usr/bin/python /usr/bin/gfal-copy -vf -K CRC32 file&#58;////tmp/mess_hammer-a118.t&#39;.
Program terminated with signal 11, Segmentation fault.
#0  0x00002ac467d034f4 in ?? ()
(gdb)

&#34;&#34;&#34;

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='26737#1442337347'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T17:15:47+00:00">Sep 15, 2015 05:15 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1442337347">&nbsp;</a></div><pre>Yeah, you need the corresponding debuginfo package(s) installed; I think to install those you can run&#58;

debuginfo-install gfal2&#92;*

Carl</pre></div><div class='update_description'><i onclick="document.location='26737#1442337272'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T17:14:32+00:00">Sep 15, 2015 05:14 PM UTC</time><a class="anchor" name="1442337272">&nbsp;</a></div><pre>You can find the core file on following link

<a href='https&#58;//web.rcac.purdue.edu/cms/Manoj/2015/Site/gfal2/core.53235' target='_blank' rel='nofollow'>https&#58;//web.rcac.purdue.edu/cms/Manoj/2015/Site/gfal2/core.53235</a>

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='26737#1442336896'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T17:08:16+00:00">Sep 15, 2015 05:08 PM UTC</time><a class="anchor" name="1442336896">&nbsp;</a></div><pre>We updated the gfal2 client to &#39;2.9.3-1&#39;. But, the problem is still there.  Please find the core file attached.  Installed following version of gfal2 packages.

&#34;&#34;&#34;
[jha2@cmstest-v001 Junk]$ rpm -qa | grep gfal2
gfal2-all-2.9.3-1.el6.x86_64
gfal2-plugin-rfio-2.9.3-1.el6.x86_64
gfal2-plugin-gridftp-2.9.3-1.el6.x86_64
gfal2-python-debuginfo-1.8.3-1.el6.x86_64
gfal2-plugin-lfc-2.9.3-1.el6.x86_64
gfal2-debuginfo-2.9.3-1.el6.x86_64
gfal2-plugin-file-2.9.3-1.el6.x86_64
gfal2-plugin-srm-2.9.3-1.el6.x86_64
gfal2-devel-2.9.3-1.el6.x86_64
gfal2-plugin-http-2.9.3-1.el6.x86_64
gfal2-util-1.2.1-1.el6.noarch
gfal2-2.9.3-1.el6.x86_64
gfal2-plugin-xrootd-0.3.4-1.el6.x86_64
gfal2-python-1.8.3-1.el6.x86_64
gfal2-plugin-dcap-2.9.3-1.el6.x86_64
[jha2@cmstest-v001 Junk]$

&#34;&#34;&#34;
But, gdb is still complaining about &#34;missing separate debuginfo for the main executable file&#34;.

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='26737#1442331807'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-15T15:43:27+00:00">Sep 15, 2015 03:43 PM UTC</time> by <b>echism</b><a class="anchor" name="1442331807">&nbsp;</a></div><pre>Manoj,

Is everything okay? Did you get the new version from EPEL?

Thank you</pre></div><div class='update_description'><i onclick="document.location='26737#1441909630'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-10T18:27:10+00:00">Sep 10, 2015 06:27 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1441909630">&nbsp;</a></div><pre>Hi Manoj,

You&#39;ll have to get it from EPEL; we don&#39;t ship gfal2 at all in OSG.  (It looks like the one you currently have installed is from EPEL also.)

Carl</pre></div><div class='update_description'><i onclick="document.location='26737#1441908741'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-10T18:12:21+00:00">Sep 10, 2015 06:12 PM UTC</time><a class="anchor" name="1441908741">&nbsp;</a></div><pre>Hi Carl,
Is &#39;gfal2-2.9.3-1&#39;  available in OSG repository ?  Should we install &#34;gfal2-2.9.3-1&#34;  from EPEL  repository ?

Thanks,
Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='26737#1441903895'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-10T16:51:35+00:00">Sep 10, 2015 04:51 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1441903895">&nbsp;</a></div><pre>I don&#39;t remember hearing about that before.  A quick google search seems to show there have been multiple segfault issues fixed in gfal2 in the past.

So, gfal2 actually comes from EPEL (we don&#39;t ship it in OSG, with the exception of the xrootd plugin).

It looks like you&#39;ve got gfal2-2.8.4-1 installed, and EPEL currently has gfal2-2.9.3-1.  Maybe try &#34;yum update gfal2*&#34;, and see if it&#39;s fixed in their latest version?

Otherwise, yeah, I&#39;d probably try debugging with core file next...

Carl</pre></div><div class='update_description'><i onclick="document.location='26737#1441901963'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-10T16:19:23+00:00">Sep 10, 2015 04:19 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1441901963">&nbsp;</a></div><pre>Assigning to Carl</pre></div><div class='update_description'><i onclick="document.location='26737#1441835517'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-09T21:51:57+00:00">Sep 9, 2015 09:51 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1441835517">&nbsp;</a></div><pre>Hello,
While using gfal-copy  with checksum enabled  leads to  segmentation fault.  Please see below.

&#34;&#34;&#34;
[jha2@cmstest-v001 grid-security]$ gfal-copy -vf -K CRC32  file&#58;////tmp/mess_hammer-a118.txt gsiftp&#58;//cms-i006/mnt/hadoop/store/user/jha/test13b.txt
GFAL2-Message&#58; ... no GFAL_PLUGIN_DIR environnement variable specified, try to load plugins in the default directory &#58; /usr/lib64/gfal2-plugins/
GFAL2-Message&#58;  gfal_plugin loaded succesfully &#58; /usr/lib64/gfal2-plugins//libgfal_plugin_file.so
GFAL2-Message&#58;  gfal_plugin loaded succesfully &#58; /usr/lib64/gfal2-plugins//libgfal_plugin_srm.so
GFAL2-Message&#58;  gfal_plugin loaded succesfully &#58; /usr/lib64/gfal2-plugins//libgfal_plugin_xrootd.so
GFAL2-Message&#58;  gfal_plugin loaded succesfully &#58; /usr/lib64/gfal2-plugins//libgfal_plugin_gridftp.so
event&#58; [1441834430885] SOURCE FileCopy&#58;&#58;local_copy	CHECKSUM&#58;ENTER
GFAL2-Message&#58; Event triggered&#58; SOURCE FileCopy&#58;&#58;local_copy CHECKSUM&#58;ENTER
GFAL2-Message&#58;  gfal2_checksum -&#62;
Segmentation fault
[jha2@cmstest-v001 grid-security]$
&#34;&#34;&#34;

Is it known problem ?  We can provide you the core file as need arises.  The output of the command &#34;osg-system-profiler&#34;  is also attached.

Thanks,
Manoj

&#34;&#34;&#34;

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F26737">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 26737});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
