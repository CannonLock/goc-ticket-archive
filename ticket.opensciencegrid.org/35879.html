<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[35879] Transitioning UCD to LCMAPS VOMS authentication</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="robots" content="noindex, nofollow" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=35879" method="post">
<div class="page-header">
    <h3><span class="muted">35879</span> / Transitioning UCD to LCMAPS VOMS authentication</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Brian Lin</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">UCD</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/bulkresource</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Kyle Gross</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier3</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Transition complete</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2018-03-16</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG Glidein Factory Support <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">USCMS_Tier3 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Edgar Fajardo <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/35879", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='35879#1521213862'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-16T15:24:22+00:00">Mar 16, 2018 03:24 PM UTC</time> by <b>echism</b><a class="anchor" name="1521213862">&nbsp;</a></div><pre>Tracking the rest in the other ticket.

Thanks!</pre></div><div class='update_description'><i onclick="document.location='35879#1521062053'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-14T21:14:13+00:00">Mar 14, 2018 09:14 PM UTC</time> by <b>echism</b><a class="anchor" name="1521062053">&nbsp;</a></div><pre>Edgar,

This ticket hasn&#39;t been assigned <a href='36417.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/36417</a> and it&#39;s really a followup to this one. Can you help Teresa?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35879#1520870357'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-12T15:59:17+00:00">Mar 12, 2018 03:59 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1520870357">&nbsp;</a></div><pre>Yes, if you see no problems on your end.

On Mon, Mar 12, 2018 at 8&#58;41 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35879#1520869260'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-12T15:41:00+00:00">Mar 12, 2018 03:41 PM UTC</time> by <b>echism</b><a class="anchor" name="1520869260">&nbsp;</a></div><pre>Should this ticket be closed?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35879#1520553516'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-08T23:58:36+00:00">Mar 8, 2018 11:58 PM UTC</time><a class="anchor" name="1520553516">&nbsp;</a></div><pre>Hi Teresa,

I think this is fine. Since you retired Bestman and replaced it with I guess gridFTP you would probably need to create accounts for your local users so when they use gridftp they can write back to their areas.

Edgar
OSG Software Support

by emfajardohernandez@....</pre></div><div class='update_description'><i onclick="document.location='35879#1520551398'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-08T23:23:18+00:00">Mar 8, 2018 11:23 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1520551398">&nbsp;</a></div><pre>This should be completed. Bestman and GUMs are retired. I shutdown the
server that was running GUMS as it was reporting cpu errors. lcmaps is
configured on the CE. I created local accounts for
osg, uscmslocal, cmslocal, cmsprod, lcgadmin, and glow.

Its not clear to me who else would need a local account.

On Thu, Mar 8, 2018 at 10&#58;47 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35879#1520534870'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-08T18:47:50+00:00">Mar 8, 2018 06:47 PM UTC</time> by <b>echism</b><a class="anchor" name="1520534870">&nbsp;</a></div><pre>What is the status of this one?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35879#1519857194'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-28T22:33:14+00:00">Feb 28, 2018 10:33 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1519857194">&nbsp;</a></div><pre>Excellent- thanks for your quick response.

On Wed, Feb 28, 2018 at 2&#58;16 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35879#1519856188'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-28T22:16:28+00:00">Feb 28, 2018 10:16 PM UTC</time><a class="anchor" name="1519856188">&nbsp;</a></div><pre>Hi Teresa,

It is in upcoming&#58;

yum install osg-se-hadoop-datanode --enablerepo=osg-upcoming

by emfajardohernandez@....</pre></div><div class='update_description'><i onclick="document.location='35879#1519853777'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-28T21:36:17+00:00">Feb 28, 2018 09:36 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1519853777">&nbsp;</a></div><pre>Thanks, I will give this a try!

On a different subject- It appears osg-se-hadoop-datanode is not available
in the osg 7 repo?

[root@c1-14 ~]# yum install osg-se-hadoop-datanode
Loaded plugins&#58; langpacks, priorities
64 packages excluded due to repository priority protections
No package osg-se-hadoop-datanode available.
Error&#58; Nothing to do

[root@c1-14 ~]# yum search hadoop
Loaded plugins&#58; langpacks, priorities
64 packages excluded due to repository priority protections
=========================================================== N/S matched&#58;
hadoop ============================================================
gratia-probe-hadoop-storage.x86_64 &#58; HDFS Storage Probe for Gratia OSG
accounting system.

[root@c1-14 yum.repos.d]# ls
epel.repo          osg-contrib.repo      osg-prerelease.repo
osg-upcoming-minefield.repo   repos.repo         sl7-rolling.repo
epel-testing.repo  osg-development.repo  osg.repo
osg-upcoming-prerelease.repo  sl7-fastbugs.repo  sl7-security.repo
goc-itb.repo       osg-empty.repo        osg-testing.repo
osg-upcoming.repo             sl7-other.repo     sl7-testing.repo
goc.repo           osg-minefield.repo    osg-upcoming-development.repo
osg-upcoming-testing.repo     sl7.repo           sl-extras.repo

<a href='http&#58;//opensciencegrid.github.io/docs/data/install-hadoop-2-0-0/' target='_blank' rel='nofollow'>http&#58;//opensciencegrid.github.io/docs/data/install-hadoop-2-0-0/</a>

On Wed, Feb 28, 2018 at 11&#58;00 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35879#1519844448'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-28T19:00:48+00:00">Feb 28, 2018 07:00 PM UTC</time> by <b>Terrence Martin</b><a class="anchor" name="1519844448">&nbsp;</a></div><pre>This is not so much a cobbler situation I suspect as it is a redhat kickstart one.

So first I assume you do not have enough spare space to do a drain and full re-install and use a completely new setup. &#58;) Have you removed some of the excess options that might be interfering with the --noformat.  You also need to do it in all places in that kickstart. That is unfortunately a super small boot partition.

The documentation is a bit confusing since it says.

--noformat - Use an existing logical volume and do not format it.
--useexisting - Use an existing logical volume and reformat it.

So you want to swap a bit from one to the other. I think if you use them together it just works like --noformat, if I understand the documentation, but the key is to put that setting everywhere since you are stacking partition on partition. ie you need to preserve the stack. I would try something like.

part /boot --useexisting --ondisk=sda
part swap  --useexisting --ondisk=sda
part pv.01  --noformat --ondisk=sda
part pv.02 --noformat  --ondisk=sdb

volgroup vg01 --noformat
volgroup vg02 --noformat

logvol  /  --vgname=vg01  --useexisting --name=root
logvol  /tmp  --vgname=vg01  --useexisting --name=tmp

logvol  /scratch  --vgname=vg02  --useexisting  --name=scratch

logvol  /hadoop1  --vgname=vg01 --noformat --name=hadoop1
logvol  /hadoop2  --vgname=vg02  --noformat --name=hadoop2</pre></div><div class='update_description'><i onclick="document.location='35879#1519844233'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-28T18:57:13+00:00">Feb 28, 2018 06:57 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1519844233">&nbsp;</a></div><pre>I think we&#39;re clear on verifying pilot auth&#58;
<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=CMS_T3_US_UCD_cms&frontend=total&infoGroup=running&elements=StatusRunning' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=CMS_T3_US_UCD_cms&frontend=total&infoGroup=running&elements=StatusRunning</a>,ClientGlideRunning,ClientGlideIdle,&rra=0&window_min=0&window_max=0&timezone=-6

And Teresa mentioned retiring BeStMan/making the required changes for
BeStMan

- Brian</pre></div><div class='update_description'><i onclick="document.location='35879#1519843518'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-28T18:45:18+00:00">Feb 28, 2018 06:45 PM UTC</time><a class="anchor" name="1519843518">&nbsp;</a></div><pre>Hi Brian,

I think we need to double check with factory ops that authentication is working fine at cms.tier3.ucdavis.edu. Then there is the issue of the transition of Bestman

by emfajardohernandez@....</pre></div><div class='update_description'><i onclick="document.location='35879#1519843218'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-28T18:40:18+00:00">Feb 28, 2018 06:40 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1519843218">&nbsp;</a></div><pre>It sounds like the LCMAPS VOMS related stuff is all complete so unless Teresa wants us to keep this open, I think this ticket can be closed.</pre></div><div class='update_description'><i onclick="document.location='35879#1519842974'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-28T18:36:14+00:00">Feb 28, 2018 06:36 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1519842974">&nbsp;</a></div><pre>Thanks, I&#39;m just doing a rolling upgrade instead of try to retain the
hadoop data. I&#39;ll decommission nodes from hadoop as I reinstall them. I&#39;m
close to getting the puppet configuration tweaked.

On Wed, Feb 28, 2018 at 9&#58;40 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35879#1519839606'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-28T17:40:06+00:00">Feb 28, 2018 05:40 PM UTC</time><a class="anchor" name="1519839606">&nbsp;</a></div><pre>Hi Elizabeth,

Unfortunately, I am not a cobbler expert and this really is entirely up to the site internal management. I am not sure how much Carl or myself could help here.

Edgar
OSG Software Support

by emfajardohernandez@....</pre></div><div class='update_description'><i onclick="document.location='35879#1519834441'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-28T16:14:01+00:00">Feb 28, 2018 04:14 PM UTC</time> by <b>echism</b><a class="anchor" name="1519834441">&nbsp;</a></div><pre>Carl and Edgar,

Do you have any tips on the hadoop/cobbler situation?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35879#1519697719'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-27T02:15:19+00:00">Feb 27, 2018 02:15 AM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1519697719">&nbsp;</a></div><pre>I made the GUMS and Bestman changes on the servers but am still working on
upgrading the OS everywhere to SL 7.4. I&#39;m a bit stuck at creating a
cobbler kickstart that will preserve the hadoop data. Its tricky as the
hadoop data are on logical volumes .

The original kickstart includes&#58;
part /boot --fstype ext4 --size=100 --ondisk=sda
part swap --size=4096 --ondisk=sda
part pv.01 --size=1 --grow --ondisk=sda
part pv.02 --size=1 --grow --ondisk=sdb
volgroup vg01 pv.01
volgroup vg02 pv.02
logvol  /  --vgname=vg01  --size=16384 --name=root --fstype ext4
logvol  /tmp  --vgname=vg01  --size=2048  --name=tmp --fstype ext4
logvol  /scratch  --vgname=vg02  --size=88064  --name=scratch --fstype ext4
logvol  /hadoop1  --vgname=vg01  --size=1  --grow --name=hadoop1 --fstype
ext3
logvol  /hadoop2  --vgname=vg02  --size=1  --grow --name=hadoop2 --fstype
ext3

--useexisting, and --noformat are what I&#39;ve been playing around with but no
luck so far (and no IPMI on this ancient cluster so I have to walk over to
its location to test making slow progress).

On Mon, Feb 26, 2018 at 6&#58;38 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35879#1519655927'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-26T14:38:47+00:00">Feb 26, 2018 02:38 PM UTC</time> by <b>echism</b><a class="anchor" name="1519655927">&nbsp;</a></div><pre>Hi Teresa,

How is the transition going? Can we help with anything?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35879#1519076899'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-19T21:48:19+00:00">Feb 19, 2018 09:48 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1519076899">&nbsp;</a></div><pre>I&#39;m currently getting a cobbler pxe boot working to upgrade the cluster to
SL 7.4, then I can work on retiring bestman. I hope to get to it this week
(today is a U.S. holiday though).

On Mon, Feb 19, 2018 at 12&#58;55 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35879#1519073756'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-19T20:55:56+00:00">Feb 19, 2018 08:55 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1519073756">&nbsp;</a></div><pre>Ok, adding factory ops to ensure that pilots are authenticating correctly with your site. Do you have a timeline for the bestman server retirement?</pre></div><div class='update_description'><i onclick="document.location='35879#1519072939'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-19T20:42:19+00:00">Feb 19, 2018 08:42 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1519072939">&nbsp;</a></div><pre>The script did not create a voms-mapfile.additions. I made the changes
today.

On Mon, Feb 19, 2018 at 12&#58;18 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35879#1519071493'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-19T20:18:13+00:00">Feb 19, 2018 08:18 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1519071493">&nbsp;</a></div><pre>Teresa,

If the script produced a voms-mapfile.additions file with contents,
you&#39;ll want to create /etc/grid-security/voms-mapfile on the client and
copy in those changes.

When did you make the change? Looking at the factory, it looks like
there are a lot of running pilots but none of them appear to be getting
claimed as of a few days ago&#58;

<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=CMS_T3_US_UCD_cms&frontend=total&infoGroup=running&elements=StatusRunning' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=CMS_T3_US_UCD_cms&frontend=total&infoGroup=running&elements=StatusRunning</a>,ClientGlideRunning,ClientGlideIdle,&rra=2&window_min=0&window_max=0&timezone=-6

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35879#1519070953'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-19T20:09:13+00:00">Feb 19, 2018 08:09 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1519070953">&nbsp;</a></div><pre>Sorry, I&#39;m in the middle of getting a cobbler pxe boot configured for an
upgrade of the cluster to SL 7.4.

I&#39;ve made the changes described in
<a href='http&#58;//opensciencegrid.github.io/docs/security/lcmaps-voms-authentication/#migrating-from-gums' target='_blank' rel='nofollow'>http&#58;//opensciencegrid.github.io/docs/security/lcmaps-voms-authentication/#migrating-from-gums</a>
The test succeeded. I don&#39;t have a /etc/grid-secuity/voms-mapfile though.

On Mon, Feb 19, 2018 at 7&#58;23 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35879#1519053831'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-19T15:23:51+00:00">Feb 19, 2018 03:23 PM UTC</time> by <b>echism</b><a class="anchor" name="1519053831">&nbsp;</a></div><pre>Hi Teresa,

What&#39;s the latest news on this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='35879#1518457087'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-12T17:38:07+00:00">Feb 12, 2018 05:38 PM UTC</time><a class="anchor" name="1518457087">&nbsp;</a></div><pre>Hi Teresa,

I think the first step would be to try to change the configuration on your CE.

1. So in the gums server follow the instructions here&#58;
<a href='http&#58;//opensciencegrid.github.io/docs/security/lcmaps-voms-authentication/#migrating-from-gums' target='_blank' rel='nofollow'>http&#58;//opensciencegrid.github.io/docs/security/lcmaps-voms-authentication/#migrating-from-gums</a>
2. On cms.tier3.ucdavis.edu update lcmaps.db not to use GUMS.
3. Change the different config files if needed.

Thanks,

Edgar
OSG SOftware Support

by emfajardohernandez@....</pre></div><div class='update_description'><i onclick="document.location='35879#1517934304'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-06T16:25:04+00:00">Feb 6, 2018 04:25 PM UTC</time><a class="anchor" name="1517934304">&nbsp;</a></div><pre>Hi Teresa,

This is good. I think this is all I needed for now.

So to summarize for Carl&#58;

The site has one CE, one Bestman both pointing to same gums config.

So what should be next?

Thanks,

Edgar

OSG Software Support

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='35879#1517865855'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-05T21:24:15+00:00">Feb 5, 2018 09:24 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1517865855">&nbsp;</a></div><pre>I am also starting the process of upgrading (reinstalling) the cluster from
SLC 6 to SLC 7. Some software requested needs newer glibc,etc.

[root@cms ~]# cat /etc/lcmaps.db
# THIS FILE WAS WRITTEN BY OSG-CONFIGURE AND WILL BE OVERWRITTEN ON FUTURE
RUNS
# Set edit_lcmaps_db = False in the [Misc Services] section of your OSG
configuration to
# keep your changes.
##############################################################################
#
# lcmaps.db (GUMS-based authorization with glExec)
#
##############################################################################

gumsclient = &#34;lcmaps_gums_client.mod&#34;
&#34;-resourcetype ce&#34;
&#34;-actiontype execute-now&#34;
&#34;-capath /etc/grid-security/certificates&#34;
&#34;-cert   /etc/grid-security/hostcert.pem&#34;
&#34;-key    /etc/grid-security/hostkey.pem&#34;
&#34;--cert-owner root&#34;
&#34;--endpoint
<a href='https&#58;//agent.tier3.ucdavis.edu&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort' target='_blank' rel='nofollow'>https&#58;//agent.tier3.ucdavis.edu&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort</a>
&#34;
# Uncomment this to set a different expected host certificate name for
server
#            &#34;--override-expected-hostname overridegumsname.yourdomain&#34;

glexectracking = &#34;lcmaps_glexec_tracking.mod&#34;
&#34;-exec /usr/sbin/glexec_monitor&#34;
# Uncomment if your procd is located in a non-standard directory
#                 &#34;-procddir /usr&#34;
# Uncomment to write tracking info to glexec_monitor.log in the given dir
#     otherwise the default is to use syslog
<div id='show_2051912169' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2051912169'>#                 &#34;-logdir /var/log/glexec&#34;
# Uncomment to change the default logging level for the glexec_monitor
#   Level 0&#58; none, 1&#58; errors, 2&#58; warnings, 3&#58; notices, 4&#58; info, 5&#58; debug
#   The notices level is used for usage tracking; info is commonly useful.
#   Default is lcmaps_debug_level from glexec.conf.
#                 &#34;-log-level 4&#34;
# Uncomment to change the syslog facility.  Default is LOG_DAEMON
#                 &#34;-log-facility LOG_DAEMON&#34;
# Uncomment to use local time in the file log (doesn&#39;t apply to syslog)
#                 &#34;-datetime-local&#34;
# Uncomment to change the minimum tracking group id
#                 &#34;-min-gid 65000&#34;
# Uncomment to change the maximum tracking group id
#                 &#34;-max-gid 65049&#34;
# Uncomment to not kill processes still running after the main process
finishes
#                 &#34;-dont-kill-leftovers&#34;

verifyproxy = &#34;lcmaps_verify_proxy.mod&#34;
&#34;--allow-limited-proxy&#34;
&#34; -certdir /etc/grid-security/certificates&#34;

good        = &#34;lcmaps_dummy_good.mod&#34;
bad         = &#34;lcmaps_dummy_bad.mod&#34;

authorize_only&#58;
gumsclient -&#62; good | bad

glexec&#58;
verifyproxy -&#62; gumsclient
gumsclient -&#62; glexectracking
-------------------------------------------------------------------------
[root@cms ~]# cat /etc/osg/config.d/10-misc.ini
;===================================================================
;                              Misc Services
;===================================================================

[Misc Services]
; If you have glexec installed on your worker nodes, enter the location
; of the glexec binary in this setting
glexec_location = /usr/sbin/glexec

; This setting should be set to the host used for gums host.
; If your site is not using a gums host, you can set this to DEFAULT
gums_host = agent.tier3.ucdavis.edu

; This setting should be set to one of the following&#58; gridmap, xacml
; to indicate whether gridmap files or  gums with xacml should be used
;
; By default, this is set to xacml
authorization_method = xacml

; The OSG cleanup scripts are provided to help remove Globus files that
; build up over time on your system.  For more information see the Twiki&#58;
;
<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallCleanupScripts' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallCleanupScripts</a>
; enable_cleanup indicates whether to setup OSG cleanup scripts.   They are
; disabled by default
; enable_cleanup = True

; The age in days after which files that have not been accessed should be
; deleted. Jobs that run longer than this number of days may be killed
because
; necessary files may be removed.  If this is a problem for you do not run
the
; osg-cleanup scripts and email vdt-support@....
; Default = 14
;cleanup_age_in_days = 14

; The user&#39;s home directories that should be cleaned up.  The default value
; is @vo-file.  This will open osg-user-vo-map.txt and try to get the list
; of users from this file.  Alternatively you can specify a whitespace
; separated list of users.
;cleanup_users_list = @vo-file

; The cron time at which the cleanup script will run.  By default it will
run
; once a day during the night.
;cleanup_cron_time = 15 1 * * *

On Mon, Feb 5, 2018 at 1&#58;14 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_2051912169').click(function() {
            $('#detail_2051912169').slideDown("normal");
            $('#show_2051912169').hide();
            $('#hide_2051912169').show();
        });
        $('#hide_2051912169').click(function() {
            $('#detail_2051912169').slideUp();
            $('#hide_2051912169').hide();
            $('#show_2051912169').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='35879#1517865245'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-05T21:14:05+00:00">Feb 5, 2018 09:14 PM UTC</time><a class="anchor" name="1517865245">&nbsp;</a></div><pre>Teresa,

In cms.tier3.ucdavis.edu can you upload the contents of &#58;

/etc/lcmaps.db

and

/etc/osg/config.d/10-misc.ini

Thanks,

Edgar

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='35879#1517510101'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-02-01T18:35:01+00:00">Feb 1, 2018 06:35 PM UTC</time><a class="anchor" name="1517510101">&nbsp;</a></div><pre>Thanks Teresa so your Bestman and CE  are using gums. With osg-gums-config-71-4.osg33.el6.noarch.

Carl, what is next step?

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='35879#1517345292'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-30T20:48:12+00:00">Jan 30, 2018 08:48 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1517345292">&nbsp;</a></div><pre>Here they are&#58;

[root@se ~]# cat /etc/grid-security/gsi-authz.conf
globus_mapping liblcas_lcmaps_gt4_mapping.so lcmaps_callout

[root@se ~]# cat /etc/lcmaps.db
##############################################################################
#
# lcmaps.db
#
# This file is used to configure lcmaps, but it might be slightly
# confusing at first glance because it&#39;s configured differently when
# you use glexec (usually on worker nodes) and when you configure
# services to use lcmaps for mapping users.
#
# In general, you need to modify up to three portions of this file
# unless you are doing unusual advanced configurations.
#
# 1) The gumsclient module definition (in Section 1)
#    This is where you configure the GUMS host you are using. This is
#    true for both glexec and lcmaps for a service.
# 2) The glexectracking module (in Section 1)
#    If you are using glexec, uncomment the glexectracking module
#    definition and edit appropriately. You should always uncomment
#    this for glexec but should always leave it commented if you haven&#39;t
#    installed glexec.
# 3) glexec mapping policy (in Section 2)
#    You should select the proper policy for glexec, if you are using
glexec.
#    Most sites will use the first policy.
#
##############################################################################

#-----------------------------------------------------------------------------
#
<div id='show_419889753' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_419889753'># Section 1&#58; Module definitions
#
# These generally should not be modified, except for the GUMS host in
# gumsclient.
#
#-----------------------------------------------------------------------------

gumsclient = &#34;lcmaps_gums_client.mod&#34;
&#34;-resourcetype ce&#34;
&#34;-actiontype execute-now&#34;
&#34;-capath /etc/grid-security/certificates&#34;
&#34;-cert   /etc/grid-security/hostcert.pem&#34;
&#34;-key    /etc/grid-security/hostkey.pem&#34;
&#34;--cert-owner root&#34;
# Change this URL to your GUMS server
#             &#34;--endpoint
<a href='https&#58;//yourgums.yourdomain&#58' target='_blank' rel='nofollow'>https&#58;//yourgums.yourdomain&#58</a>;8443/gums/services/GUMSXACMLAuthorizationServicePort
&#34;
&#34;--endpoint
<a href='https&#58;//agent.tier3.ucdavis.edu&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort' target='_blank' rel='nofollow'>https&#58;//agent.tier3.ucdavis.edu&#58;8443/gums/services/GUMSXACMLAuthorizationServicePort</a>
&#34;
# Uncomment this to set a different expected host certificate name for
server
#            &#34;--override-expected-hostname overridegumsname.yourdomain&#34;

# Uncomment the first two lines in order to enable glexec tracking
#glexectracking = &#34;lcmaps_glexec_tracking.mod&#34;
#         &#34;-exec /usr/sbin/glexec_monitor&#34;
# Uncomment if your procd is located in a non-standard directory
#         &#34;-procddir /usr&#34;
# Uncomment to write tracking info to glexec_monitor.log in the given dir
#     otherwise the default is to use syslog
#         &#34;-logdir /var/log/glexec&#34;
# Uncomment to change the default logging level for the glexec_monitor
#   Level 0&#58; none, 1&#58; errors, 2&#58; warnings, 3&#58; notices, 4&#58; info, 5&#58; debug
#   The notices level is used for usage tracking; info is commonly useful.
#   Default is lcmaps_debug_level from glexec.conf.
#         &#34;-log-level 4&#34;
# Uncomment to change the syslog facility.  Default is LOG_DAEMON
#   &#34;-log-facility LOG_DAEMON&#34;
# Uncomment to use local time in the file log (doesn&#39;t apply to syslog)
#         &#34;-datetime-local&#34;
# Uncomment to change the minimum tracking group id
#         &#34;-min-gid 65000&#34;
# Uncomment to change the maximum tracking group id
#         &#34;-max-gid 65049&#34;
# Uncomment to not kill processes still running after the main process
finishes
#         &#34;-dont-kill-leftovers&#34;

gridmapfile = &#34;lcmaps_localaccount.mod&#34;
&#34;-gridmap /etc/grid-security/grid-mapfile&#34;
banfile = &#34;lcmaps_ban_dn.mod&#34;
&#34;-banmapfile /etc/grid-security/ban-mapfile&#34;
banvomsfile = &#34;lcmaps_ban_fqan.mod&#34;
&#34;-banmapfile /etc/grid-security/ban-voms-mapfile&#34;
vomsmapfile = &#34;lcmaps_voms_localaccount.mod&#34;
&#34;-gridmap /etc/grid-security/voms-mapfile&#34;
# Uncomment to consider all VOMS FQANs of a proxy instead of just the first
#              &#34;-all-fqans&#34;
defaultmapfile = &#34;lcmaps_voms_localaccount2.mod&#34;
&#34;-gridmap /usr/share/osg/voms-mapfile-default&#34;
# Uncomment to consider all VOMS FQANs of a proxy instead of just the first
#                 &#34;-all-fqans&#34;

verifyproxy = &#34;lcmaps_verify_proxy.mod&#34;
&#34;--allow-limited-proxy&#34;
&#34; -certdir /etc/grid-security/certificates&#34;

verifyproxynokey = &#34;lcmaps_verify_proxy2.mod&#34;
&#34;--allow-limited-proxy&#34;
&#34;--discard_private_key_absence&#34;
&#34; -certdir /etc/grid-security/certificates&#34;

# lcmaps policies require at least two modules, so these are here to
#   fill in if only one module is needed.  &#34;good | bad&#34; has no effect.
good        = &#34;lcmaps_dummy_good.mod&#34;
bad         = &#34;lcmaps_dummy_bad.mod&#34;

#-----------------------------------------------------------------------------
#
# Mapping policies
#
# Each of these define how lcmaps is used in different scenarios.
#
# For the authorize_only mapping, the default policy is generally good
# but we have supplied a couple of options in comments.
#
# We&#39;ve left the various glexec policies commented out--you need to
# choose one of the three policies (because otherwise it causes a
# package dependency problem). Most sites will use the first policy
# (verify proxy, gums client, glexectracking). There is no need to
# uncomment the glexec policies if you are not using glexec.
#
#-----------------------------------------------------------------------------

#
# Mapping policy&#58; authorize_only
# Purpose&#58; Used for the programs that only want authorization and don&#39;t
# want lcmaps to do anything else for them.  This is good for most
# applications that use globus as their interface to lcmaps.
#

## If the default policy isn&#39;t what you want, pick another one.  Make
## sure that only one authorize_only policy is uncommented--the other
## policies should be commented out. For example, if you want policy #2,
## put a hash mark before the first &#34;gumsclient&#34; line and remove the hash
## mark on two lines&#58; just before &#34;gridmapfile&#34; and just before the next
## &#34;gumsclient&#34;.

authorize_only&#58;

## Policy 1&#58; GUMS (most common, default)
gumsclient -&#62; good | bad

## Policy 2&#58; grid-mapfile
#gridmapfile -&#62; good | bad

## Policy 3&#58; voms-mapfiles with banfiles, proxy verification and
grid-mapfile
#verifyproxynokey -&#62; banfile
#banfile -&#62; banvomsfile | bad
#banvomsfile -&#62; gridmapfile | bad
#gridmapfile -&#62; good | vomsmapfile
#vomsmapfile -&#62; good | defaultmapfile
#defaultmapfile -&#62; good | bad

#
# Mapping policy&#58; glexec
# Purpose&#58;        Used for glexec on the worker nodes.
#
glexec&#58;

## If you use glexec, pick an appropriate policy from the ones below.
## Make sure that only one policy is uncommented.

## Policy 1&#58; GUMS (most common)
verifyproxy -&#62; gumsclient
gumsclient -&#62; glexectracking

## Policy 2&#58; grid-mapfile
#verifyproxy -&#62; gridmapfile
#gridmapfile -&#62; glexectracking

[root@se ~]# cat /etc/bestman2/conf/bestman2.rc | grep GridMapFileName
GridMapFileName=/etc/bestman2/conf/grid-mapfile.empty

On Tue, Jan 30, 2018 at 10&#58;16 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_419889753').click(function() {
            $('#detail_419889753').slideDown("normal");
            $('#show_419889753').hide();
            $('#hide_419889753').show();
        });
        $('#hide_419889753').click(function() {
            $('#detail_419889753').slideUp();
            $('#hide_419889753').hide();
            $('#show_419889753').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='35879#1517336166'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-30T18:16:06+00:00">Jan 30, 2018 06:16 PM UTC</time><a class="anchor" name="1517336166">&nbsp;</a></div><pre>HI Teresa,

In the bestman server, can you paste the contents of&#58;

/etc/grid-security/gsi-authz.conf

and
/etc/lcmaps.db

and

/etc/bestman2/conf/bestman2.rc | grep GridMapFileName

Thank you,

Edgar
OSG Software Support

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='35879#1517279234'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-30T02:27:14+00:00">Jan 30, 2018 02:27 AM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1517279234">&nbsp;</a></div><pre>On cms.tier3.ucdavis.edu, there is a /etc/lcmaps that point to the gums
server (agent.tier3)
On se.tier3.ucdavis.edu /etc/bestman2/conf/bestman2.conf has
BESTMAN_GUMSCERTPATH=/etc/grid-security/http/httpcert.pem
BESTMAN_GUMSKEYPATH=/etc/grid-security/http/httpkey.pem
On agent.tier3,
rpm -q osg-gums-config
osg-gums-config-71-4.osg33.el6.noarch

Thanks

On Mon, Jan 29, 2018 at 9&#58;10 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35879#1517245850'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-29T17:10:50+00:00">Jan 29, 2018 05:10 PM UTC</time><a class="anchor" name="1517245850">&nbsp;</a></div><pre>Hi Teresa,

So I have some questiosn&#58;

Do se.tier3.ucdavis.edu and cms.tier3.ucdavis.edu both use GUMS?

In your GUMS server&#58;

agent.tier3.ucdavis.edu

Can you run&#58;

rpm -q osg-gums-config

Thanks,

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='35879#1517012507'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-27T00:21:47+00:00">Jan 27, 2018 12:21 AM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1517012507">&nbsp;</a></div><pre>Just to make a note here, from what I can see there are two customizations with this gums config, compared to the osg template&#58;

1. The &#39;/mcdrd&#39; vo group from the mcdrd voms server gets mapped to the account &#39;mcdrd&#39;

This translates to the following line for a voms-mapfile&#58;

&#34;/mcdrd/Role=NULL/Capability=NULL&#34; mcdrd

2. The &#39;rsv&#39; manual user group maps to the account &#39;rsv&#39;

The list of DNs for the rsv group are stored in the mysql db for the gums server, and should be accessible from the gums web interface.

Carl</pre></div><div class='update_description'><i onclick="document.location='35879#1517008692'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-26T23:18:12+00:00">Jan 26, 2018 11:18 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1517008692">&nbsp;</a></div><pre>I&#39;ll research that next week. I would guess by the end of Feb is feasible.

On Fri, Jan 26, 2018 at 11&#58;48 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35879#1516996091'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-26T19:48:11+00:00">Jan 26, 2018 07:48 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1516996091">&nbsp;</a></div><pre>Terri,

With the impending BeStMan2 retirement
(<a href='https&#58;//opensciencegrid.github.io/technology/policy/bestman2-retire/' target='_blank' rel='nofollow'>https&#58;//opensciencegrid.github.io/technology/policy/bestman2-retire/</a>),
do you have a timeline for replacing it with GridFTP?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='35879#1516994478'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-26T19:21:18+00:00">Jan 26, 2018 07:21 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1516994478">&nbsp;</a></div><pre>and the CE is on cms.tier3.ucdavis.edu

On Fri, Jan 26, 2018 at 11&#58;19 AM, Terri Knight &#60;tlknight@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; GUMS is on its own server agent.tier3.ucdavis.edu, Hadoop and Bestman run</font>
<font color='#7F7E6F'>&#62; on se.tier3.ucdavis.edu.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Fri, Jan 26, 2018 at 10&#58;36 AM, Open Science Grid FootPrints &#60;</font>
<font color='#7F7E6F'>&#62; osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35879#1516994474'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-26T19:21:14+00:00">Jan 26, 2018 07:21 PM UTC</time> by <b>tlknight@....</b><a class="anchor" name="1516994474">&nbsp;</a></div><pre>GUMS is on its own server agent.tier3.ucdavis.edu, Hadoop and Bestman run
on se.tier3.ucdavis.edu.

On Fri, Jan 26, 2018 at 10&#58;36 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='35879#1516991799'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-26T18:36:39+00:00">Jan 26, 2018 06:36 PM UTC</time><a class="anchor" name="1516991799">&nbsp;</a></div><pre>Hi Teresa,

Do you use GUMS only on your CE&#39;s? Do you have a hadoop/Bestman setup where you are using gums too?

Thanks,

Edgar

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='35879#1516932257'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-26T02:04:17+00:00">Jan 26, 2018 02:04 AM UTC</time><a class="anchor" name="1516932257">&nbsp;</a></div><pre>Thanks, gums.config is attached.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=tknight/CN=740452/CN=Teresa Lynn Knight</pre></div><div class='update_description'><i onclick="document.location='35879#1516924602'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-25T23:56:42+00:00">Jan 25, 2018 11:56 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1516924602">&nbsp;</a></div><pre>Assigning Edgar</pre></div><div class='update_description'><i onclick="document.location='35879#1516911704'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-01-25T20:21:44+00:00">Jan 25, 2018 08:21 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1516911704">&nbsp;</a></div><pre>Dear Teresa Knight,

As part of the VOMS Admin server retirement (<a href='https&#58;//opensciencegrid.github.io/technology/policy/voms-admin-retire/' target='_blank' rel='nofollow'>https&#58;//opensciencegrid.github.io/technology/policy/voms-admin-retire/</a>), we are encouraging sites using edg-mkgridmap or GUMS to make the transition to LCMAPS VOMS Admin (<a href='http&#58;//opensciencegrid.github.io/docs/security/lcmaps-voms-authentication/' target='_blank' rel='nofollow'>http&#58;//opensciencegrid.github.io/docs/security/lcmaps-voms-authentication/</a>). If you are receiving this e-mail, we&#39;ve identified the following hosts at your site querying VOMS Admin servers in the OSG&#58;

UCD ( cms.tier3.ucdavis.edu )

For edg-mkgridmap users, you can find specific instructions here&#58; <a href='http&#58;//opensciencegrid.github.io/docs/security/lcmaps-voms-authentication/#migrating-from-edg-mkgridmap.' target='_blank' rel='nofollow'>http&#58;//opensciencegrid.github.io/docs/security/lcmaps-voms-authentication/#migrating-from-edg-mkgridmap.</a>

For GUMS users, we can assist with the transition. If you would like help, please attach &#39;/etc/gums/gums.config&#39;, redacting the &#39;hibernate.connection.username&#39; and &#39;hibernate.connection.password&#39;. If you are unable to update your GUMS server at this time, you need to update the lcmaps package (latest OSG 3.3 version is 1.6.6-1.9) for all clients of your GUMS server (HTCondor-CE&#39;s, GridFTP servers, etc.). This causes lcmaps to perform VOMS attribute verification instead of GUMS. Note&#58; as VOMS Admin servers are retired, errors will appear in GUMS when VO member lists are updated. This is OK if you have updated lcmaps on your clients.

Thank You,
OSG Grid Operations Center (GOC)
Email/Phone&#58; help@...., 317-278-9699
GOC Homepage&#58; <a href='http&#58;//www.opensciencegrid.org/ops' target='_blank' rel='nofollow'>http&#58;//www.opensciencegrid.org/ops</a>
RSS Feed&#58; <a href='http&#58;//osggoc.blogspot.com' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com</a></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F35879">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
