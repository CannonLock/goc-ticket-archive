<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[22250] Urgent&#58; Jobs idle in the VO frontend, not glide in after upgrading the glideinwms vofrontend to v3.2.6 from v2.7.1</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=22250" method="post">
<div class="page-header">
    <h3><span class="muted">22250</span> / Urgent&#58; Jobs idle in the VO frontend, not glide in after upgrading the glideinwms vofrontend to v3.2.6 from v2.7.1</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Shaomin Hu</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">OSG</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Shaomin Hu</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">CSC</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Check for update</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-08-29</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">CSC <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/22250", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='22250#1409332808'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-29T17:20:08+00:00">Aug 29, 2014 05:20 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1409332808">&nbsp;</a></div><pre>Thank you for informing us that this issue has been resolved. I will close this ticket.  Please submit problems, requests, and questions at&#58; <a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a> OSG Grid Operations Center goc@...., 317-278-9699 Visit the OSG Operations Page&#58; <a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='22250#1409327670'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-29T15:54:30+00:00">Aug 29, 2014 03:54 PM UTC</time><a class="anchor" name="1409327670">&nbsp;</a></div><pre>I think our problem is fixed. This ticket can be closed.

Thanks all for the help.

Shaomin

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Shaomin Hu 958</pre></div><div class='update_description'><i onclick="document.location='22250#1409269603'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T23:46:43+00:00">Aug 28, 2014 11:46 PM UTC</time><a class="anchor" name="1409269603">&nbsp;</a></div><pre>I just noticed the previous idled jobs finished to run now. I will put more jobs to test the system.

Shaomin

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Shaomin Hu 958</pre></div><div class='update_description'><i onclick="document.location='22250#1409269222'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T23:40:22+00:00">Aug 28, 2014 11:40 PM UTC</time><a class="anchor" name="1409269222">&nbsp;</a></div><pre>Can you see my attachment main.info.log.tar.gz?

I was trying to attach the main.info.log.tar.gz by clicking the green button &#34;Attach files...&#34; , but the file type could not be recognized. The plain main.info.log is too big.

I replied the ticket through email with the attachment. Hope the file is actually attached in the ticket.

Shaomin

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Shaomin Hu 958</pre></div><div class='update_description'><i onclick="document.location='22250#1409268852'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T23:34:12+00:00">Aug 28, 2014 11:34 PM UTC</time> by <b>hu8@....</b><a class="anchor" name="1409268852">&nbsp;</a></div><pre>Here is the main.info.log.

On Thu, Aug 28, 2014 at 3&#58;00 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62;  [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='22250#1409263213'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T22:00:13+00:00">Aug 28, 2014 10:00 PM UTC</time><a class="anchor" name="1409263213">&nbsp;</a></div><pre>Can you attach the whole INFO file?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='22250#1409260333'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T21:12:13+00:00">Aug 28, 2014 09:12 PM UTC</time><a class="anchor" name="1409260333">&nbsp;</a></div><pre>I just stop/start the GlideinWMS frontend per your note. I did not see  errors in the main.info.log except &#34;glideins found total 0 ...&#34; still there.

[2014-08-28 17&#58;06&#58;37,141] INFO&#58; Group glideins found total 0 limit 100000 curb 90000; of these idle 0 limit 1000 curb 200 running 0
[2014-08-28 17&#58;06&#58;37,141] INFO&#58; Frontend glideins found total 0 limit 100000 curb 90000; of these idle 0 limit 1000 curb 200

FYI, in the main.err.log, it looks like as the following,

[2014-08-28 17&#58;08&#58;39,986] DEBUG&#58; glideinFrontendInterface&#58;931&#58; In create Advertize work
[2014-08-28 17&#58;08&#58;39,986] DEBUG&#58; glideinFrontendInterface&#58;970&#58; Checking Credential file /tmp/x509up-u297895 ...
[2014-08-28 17&#58;08&#58;39,987] DEBUG&#58; glideinFrontendInterface&#58;1008&#58; Advertizing credential /tmp/x509up-u297895 with (1 idle, 2 max run) for request OSG_BR_UNESP_medium@v3_0@SDSC
[2014-08-28 17&#58;08&#58;39,987] DEBUG&#58; glideinFrontendInterface&#58;1019&#58; Writing /tmp/gfi_ad_batch_359260119_30673_gfactory-1.t2.ucsd.edu
[2014-08-28 17&#58;08&#58;39,988] DEBUG&#58; glideinFrontendInterface&#58;931&#58; In create Advertize work
[2014-08-28 17&#58;08&#58;39,988] DEBUG&#58; glideinFrontendInterface&#58;970&#58; Checking Credential file /tmp/x509up-u297895 ...
[2014-08-28 17&#58;08&#58;39,988] DEBUG&#58; glideinFrontendInterface&#58;1008&#58; Advertizing credential /tmp/x509up-u297895 with (1 idle, 2 max run) for request OSG_US_MWT2_mwt2@v3_0@SDSC
[2014-08-28 17&#58;08&#58;39,988] DEBUG&#58; glideinFrontendInterface&#58;1019&#58; Writing /tmp/gfi_ad_batch_359260119_30673_gfactory-1.t2.ucsd.edu
[2014-08-28 17&#58;08&#58;39,993] DEBUG&#58; glideinFrontendInterface&#58;1324&#58; CONDOR ADVERTISE /tmp/gfi_ad_batch_359260119_30673_gfactory-1.t2.ucsd.edu UPDATE_MASTER_AD gfactory-1.t2.ucsd.edu True
[2014-08-28 17&#58;08&#58;40,030] DEBUG&#58; classadSupport&#58;352&#58; CONDOR ADVERTISE /tmp/gfi_ar_359260119_30713 UPDATE_AD_GENERIC None True True

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Shaomin Hu 958</pre></div><div class='update_description'><i onclick="document.location='22250#1409259499'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T20:58:19+00:00">Aug 28, 2014 08:58 PM UTC</time><a class="anchor" name="1409259499">&nbsp;</a></div><pre>Yes that looks fine. Did you restart your GlideinWMS frontend? Any errors in those logs?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='22250#1409259280'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T20:54:40+00:00">Aug 28, 2014 08:54 PM UTC</time><a class="anchor" name="1409259280">&nbsp;</a></div><pre>Hi Mats,

Thanks for the reply. I just re-created the proxy. Here are the output of &#34;vows-proxy-info -all&#34;

[root@lsst-glidein tmp]# voms-proxy-info -all -file x509up-u297895
subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=lsst-glidein.rcac.purdue.edu/CN=proxy
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=lsst-glidein.rcac.purdue.edu
identity  &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=lsst-glidein.rcac.purdue.edu
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; x509up-u297895
timeleft  &#58; 95&#58;52&#58;53
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO lsst extension information ===
VO        &#58; lsst
subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=lsst-glidein.rcac.purdue.edu
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=voms2.fnal.gov
attribute &#58; /lsst/Role=NULL/Capability=NULL
timeleft  &#58; 23&#58;52&#58;53
uri       &#58; voms2.fnal.gov&#58;15003
[root@lsst-glidein tmp]#

Does the output look good to you?

Shaomin

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Shaomin Hu 958</pre></div><div class='update_description'><i onclick="document.location='22250#1409257594'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T20:26:34+00:00">Aug 28, 2014 08:26 PM UTC</time><a class="anchor" name="1409257594">&nbsp;</a></div><pre>The verification error is just a warning, and it should work anyways. You can skip the verification with -dont-verify-ac

To make sure you have the VOMS attributes, run&#58;

voms-proxy-info -all

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='22250#1409257266'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T20:21:06+00:00">Aug 28, 2014 08:21 PM UTC</time><a class="anchor" name="1409257266">&nbsp;</a></div><pre>add Gabriele Garzoglio in the CC list

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Shaomin Hu 958</pre></div><div class='update_description'><i onclick="document.location='22250#1409257209'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T20:20:09+00:00">Aug 28, 2014 08:20 PM UTC</time><a class="anchor" name="1409257209">&nbsp;</a></div><pre>Here are the proxy created by the &#34;glide in_proxy_regen&#34;,

[root@lsst-glidein tmp]# su -s /usr/local/bin/bash glidein
bash-4.1$ id
uid=297895(glidein) gid=4493(pustaff) groups=4493(pustaff)
bash-4.1$

bash-4.1$ voms-proxy-info -file x509up-u297895
subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=lsst-glidein.rcac.purdue.edu/CN=proxy
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=lsst-glidein.rcac.purdue.edu
identity  &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=lsst-glidein.rcac.purdue.edu
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; x509up-u297895
timeleft  &#58; 92&#58;30&#58;41
bash-4.1$

Shaomin

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Shaomin Hu 958</pre></div><div class='update_description'><i onclick="document.location='22250#1409249602'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T18:13:22+00:00">Aug 28, 2014 06:13 PM UTC</time><a class="anchor" name="1409249602">&nbsp;</a></div><pre>I used the following &#34;glidein_proxy_regen&#34; script to re-create the proxy, but still got errors &#34;Error&#58; verify failed. Cannot verify AC signature!&#34; .  What is the right syntax?

[root@lsst-glidein cron.daily]# cat glidein_proxy_regen
#!/bin/bash

set -e

TMP_OUT=/tmp/x509up-u&#96;id -u&#96;.tmp
FINAL_OUT=/tmp/x509up-u&#96;id -u glidein&#96;

/usr/bin/voms-proxy-init -quiet -voms lsst -valid 96&#58;00 &#92;
-cert /etc/grid-security/hostcert.pem &#92;
-key /etc/grid-security/hostkey.pem &#92;
-out $TMP_OUT

cp $TMP_OUT $FINAL_OUT
chown glidein&#58; $FINAL_OUT
rm -f $TMP_OUT

[root@lsst-glidein cron.daily]# glidein_proxy_regen
Error&#58; verify failed.
Cannot verify AC signature!
[root@lsst-glidein cron.daily]#

Thanks,
Shaomin

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Shaomin Hu 958</pre></div><div class='update_description'><i onclick="document.location='22250#1409240703'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T15:45:03+00:00">Aug 28, 2014 03:45 PM UTC</time> by <b>Gabriele Garzoglio</b><a class="anchor" name="1409240703">&nbsp;</a></div><pre>Hi Shaomin,
I&#39;ve restored the glidein user in VOMS. You should try to create a voms proxy again.

I see that you are associated with the glidein identity&#58; this is the AUP that I&#39;ve resigned on your behalf.

Best,
Gabriele

By registering with the Virtual Organization (the &#34;VO&#34;) as a GRID user you shall be deemed to accept these conditions of use&#58;

1. You shall only use the GRID to perform work, or transmit or store data consistent with the stated goals and policies of the VO of which you are a member and in compliance with these conditions of use.

2. You shall not use the GRID for any unlawful purpose and not (attempt to) breach or circumvent any GRID administrative or security controls. You shall respect copyright and confidentiality agreements and protect your GRID credentials (e.g. private keys, passwords), sensitive data and files.

3. You shall immediately report any known or suspected security breach or misuse of the GRID or GRID credentials to the incident reporting locations specified by the VO and to the relevant credential issuing authorities.

4. Use of the GRID is at your own risk. There is no guarantee that the GRID will be available at any time or that it will suit any purpose.

5. Logged information, including information provided by you for registration purposes, shall be used for administrative, operational, accounting, monitoring and security purposes only. This information may be disclosed to other organizations anywhere in the world for these purposes. Although efforts are made to maintain confidentiality, no guarantees are given.

6. The Resource Providers, the VOs and the GRID operators are entitled to regulate and terminate access for administrative, operational and security purposes and you shall immediately comply with their instructions.

7. You are liable for the consequences of any violation by you of these conditions of use.</pre></div><div class='update_description'><i onclick="document.location='22250#1409237583'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T14:53:03+00:00">Aug 28, 2014 02:53 PM UTC</time><a class="anchor" name="1409237583">&nbsp;</a></div><pre>Here are what we have for the certification related setup here at our side. We did not have any changes recently.

1.  osg-ca-certs-1.36-1.osg31.el6.noarch and fetch-crl-3.0.11-1.el6.noarch packages installed. In every 6 hours we get the new updated CRL. And we confirmed it is working fine.

2. every day around midnight, we run the script &#34;glidein_proxy_regen&#34; to create the proxy file. It works.
#!/bin/bash

set -e

TMP_OUT=/tmp/x509up-u&#96;id -u&#96;.tmp
FINAL_OUT=/tmp/x509up-u&#96;id -u glidein&#96;

/usr/bin/voms-proxy-init -quiet -valid 96&#58;00 &#92;
-cert /etc/grid-security/hostcert.pem &#92;
-key /etc/grid-security/hostkey.pem &#92;
-out $TMP_OUT

cp $TMP_OUT $FINAL_OUT
chown glidein&#58; $FINAL_OUT
rm -f $TMP_OUT

3.  the /etc/grid-security/hostcert.perm is valid

[root@lsst-glidein grid-security]#  openssl x509 -in /etc/grid-security/hostcert.pem -noout -text
Certificate&#58;
Data&#58;
Version&#58; 3 (0x2)
Serial Number&#58;
0b&#58;8d&#58;69&#58;da&#58;e4&#58;3f&#58;f7&#58;80&#58;18&#58;01&#58;31&#58;53&#58;c4&#58;da&#58;89&#58;1e
Signature Algorithm&#58; sha256WithRSAEncryption
Issuer&#58; DC=com, DC=DigiCert-Grid, O=DigiCert Grid, CN=DigiCert Grid CA-1
Validity
Not Before&#58; Mar  4 00&#58;00&#58;00 2014 GMT
Not After &#58; Apr  9 12&#58;00&#58;00 2015 GMT
Subject&#58; DC=com, DC=DigiCert-Grid, O=Open Science Grid, OU=Services, CN=lsst-glidein.rcac.purdue.edu
<div id='show_901198538' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_901198538'>Subject Public Key Info&#58;
Public Key Algorithm&#58; rsaEncryption
Public-Key&#58; (2048 bit)
Modulus&#58;
00&#58;95&#58;e4&#58;64&#58;85&#58;40&#58;ad&#58;61&#58;3f&#58;c8&#58;f6&#58;8a&#58;80&#58;d2&#58;4c&#58;
e5&#58;3f&#58;24&#58;36&#58;ab&#58;5e&#58;19&#58;72&#58;50&#58;c6&#58;79&#58;c8&#58;c7&#58;7f&#58;46&#58;
9c&#58;b9&#58;17&#58;77&#58;ed&#58;3d&#58;4e&#58;60&#58;46&#58;80&#58;18&#58;2f&#58;9a&#58;fb&#58;38&#58;
25&#58;88&#58;f8&#58;07&#58;a3&#58;d5&#58;50&#58;7d&#58;86&#58;13&#58;14&#58;fb&#58;b0&#58;38&#58;8d&#58;
1b&#58;50&#58;78&#58;97&#58;f0&#58;0b&#58;b3&#58;55&#58;78&#58;78&#58;b3&#58;e4&#58;e7&#58;01&#58;ef&#58;
2e&#58;6d&#58;05&#58;7e&#58;88&#58;7e&#58;49&#58;bc&#58;4e&#58;95&#58;27&#58;0e&#58;d0&#58;7d&#58;93&#58;
f7&#58;ce&#58;a1&#58;ca&#58;90&#58;a1&#58;b8&#58;97&#58;f1&#58;45&#58;44&#58;fe&#58;21&#58;e9&#58;c3&#58;
08&#58;8a&#58;53&#58;d7&#58;0f&#58;79&#58;5c&#58;b8&#58;a1&#58;d9&#58;dd&#58;84&#58;72&#58;8a&#58;e9&#58;
5a&#58;e9&#58;52&#58;0d&#58;9b&#58;e0&#58;ee&#58;94&#58;a0&#58;3a&#58;2f&#58;2b&#58;75&#58;63&#58;2e&#58;
68&#58;a6&#58;64&#58;e0&#58;7c&#58;15&#58;71&#58;17&#58;12&#58;7a&#58;f5&#58;15&#58;3c&#58;27&#58;20&#58;
4f&#58;09&#58;53&#58;2e&#58;ee&#58;47&#58;fb&#58;82&#58;0f&#58;02&#58;33&#58;5c&#58;3a&#58;4a&#58;7a&#58;
49&#58;0f&#58;2f&#58;62&#58;e2&#58;bf&#58;05&#58;69&#58;cb&#58;45&#58;30&#58;db&#58;cc&#58;ba&#58;7d&#58;
1b&#58;33&#58;ec&#58;74&#58;d8&#58;b8&#58;55&#58;eb&#58;f4&#58;a7&#58;c1&#58;bf&#58;4f&#58;2d&#58;b0&#58;
25&#58;98&#58;2a&#58;e1&#58;7d&#58;9f&#58;52&#58;4a&#58;00&#58;3a&#58;a0&#58;d1&#58;be&#58;81&#58;5e&#58;
f9&#58;d5&#58;c5&#58;51&#58;ae&#58;29&#58;83&#58;4a&#58;94&#58;eb&#58;32&#58;b8&#58;46&#58;aa&#58;aa&#58;
0c&#58;eb&#58;6a&#58;db&#58;e3&#58;8d&#58;2d&#58;87&#58;40&#58;06&#58;5b&#58;48&#58;bf&#58;ba&#58;5f&#58;
18&#58;c7&#58;b5&#58;61&#58;49&#58;de&#58;28&#58;2c&#58;e8&#58;6e&#58;8c&#58;5e&#58;e4&#58;0b&#58;76&#58;
21&#58;61
Exponent&#58; 65537 (0x10001)
X509v3 extensions&#58;
X509v3 Authority Key Identifier&#58;
keyid&#58;EF&#58;B0&#58;75&#58;9D&#58;68&#58;31&#58;D1&#58;E4&#58;F7&#58;2A&#58;89&#58;82&#58;53&#58;9D&#58;39&#58;77&#58;68&#58;2E&#58;20&#58;51

X509v3 Subject Key Identifier&#58;
7C&#58;ED&#58;29&#58;49&#58;6E&#58;4B&#58;11&#58;90&#58;FE&#58;1D&#58;9A&#58;B6&#58;5E&#58;8C&#58;8F&#58;A8&#58;E5&#58;4E&#58;DE&#58;C4
X509v3 Subject Alternative Name&#58;
DNS&#58;lsst-glidein.rcac.purdue.edu
X509v3 Key Usage&#58; critical
Digital Signature, Key Encipherment, Data Encipherment
X509v3 Extended Key Usage&#58;
TLS Web Server Authentication, TLS Web Client Authentication
X509v3 CRL Distribution Points&#58;

Full Name&#58;
URI&#58;<a href='http&#58;//crl3.digicert.com/DigiCertGridCA-1.crl' target='_blank' rel='nofollow'>http&#58;//crl3.digicert.com/DigiCertGridCA-1.crl</a>

Full Name&#58;
URI&#58;<a href='http&#58;//crl4.digicert.com/DigiCertGridCA-1.crl' target='_blank' rel='nofollow'>http&#58;//crl4.digicert.com/DigiCertGridCA-1.crl</a>

X509v3 Certificate Policies&#58;
Policy&#58; 1.2.840.113612.5.2.2.1
Policy&#58; 2.16.840.1.114412.31.1.1.1
Policy&#58; 1.2.840.113612.5.2.3.3.2

Authority Information Access&#58;
OCSP - URI&#58;<a href='http&#58;//ocsp.digicert.com' target='_blank' rel='nofollow'>http&#58;//ocsp.digicert.com</a>
CA Issuers - URI&#58;<a href='http&#58;//cacerts.digicert.com/DigiCertGridCA-1.crt' target='_blank' rel='nofollow'>http&#58;//cacerts.digicert.com/DigiCertGridCA-1.crt</a>

X509v3 Basic Constraints&#58; critical
CA&#58;FALSE
Signature Algorithm&#58; sha256WithRSAEncryption
03&#58;71&#58;fd&#58;55&#58;cf&#58;d0&#58;31&#58;01&#58;78&#58;51&#58;af&#58;32&#58;c7&#58;bb&#58;85&#58;47&#58;70&#58;78&#58;
e6&#58;64&#58;1a&#58;07&#58;1b&#58;cd&#58;de&#58;ed&#58;a5&#58;2a&#58;58&#58;15&#58;ee&#58;89&#58;84&#58;77&#58;bc&#58;45&#58;
88&#58;ec&#58;9d&#58;54&#58;d1&#58;a6&#58;47&#58;81&#58;23&#58;b6&#58;ed&#58;29&#58;7b&#58;32&#58;30&#58;04&#58;6f&#58;e9&#58;
b0&#58;46&#58;d0&#58;51&#58;d3&#58;c6&#58;50&#58;e3&#58;af&#58;e4&#58;16&#58;5f&#58;8c&#58;c3&#58;dc&#58;79&#58;1d&#58;c4&#58;
3a&#58;f7&#58;c3&#58;70&#58;f4&#58;55&#58;9b&#58;46&#58;00&#58;9b&#58;d2&#58;26&#58;6f&#58;a0&#58;7b&#58;31&#58;af&#58;2c&#58;
d2&#58;a5&#58;c2&#58;bc&#58;8a&#58;5b&#58;0e&#58;7e&#58;8e&#58;d5&#58;cd&#58;c6&#58;1d&#58;14&#58;f0&#58;ed&#58;93&#58;a9&#58;
b8&#58;47&#58;76&#58;e2&#58;8e&#58;ec&#58;aa&#58;8e&#58;9e&#58;9b&#58;dc&#58;cc&#58;8e&#58;a8&#58;62&#58;2f&#58;85&#58;d3&#58;
e8&#58;ff&#58;a5&#58;81&#58;cc&#58;c0&#58;8e&#58;ec&#58;51&#58;62&#58;ac&#58;ca&#58;24&#58;de&#58;52&#58;40&#58;03&#58;4b&#58;
2c&#58;24&#58;eb&#58;1b&#58;a5&#58;86&#58;8a&#58;98&#58;e8&#58;e3&#58;ff&#58;26&#58;e3&#58;11&#58;2c&#58;03&#58;80&#58;9e&#58;
14&#58;55&#58;d9&#58;8a&#58;5e&#58;46&#58;de&#58;ed&#58;fa&#58;26&#58;42&#58;bc&#58;88&#58;1c&#58;fc&#58;c2&#58;89&#58;fe&#58;
fd&#58;3d&#58;0a&#58;86&#58;1e&#58;70&#58;27&#58;f1&#58;01&#58;9f&#58;8e&#58;0c&#58;1c&#58;f5&#58;5a&#58;5b&#58;27&#58;85&#58;
88&#58;b0&#58;35&#58;b1&#58;63&#58;49&#58;08&#58;04&#58;2e&#58;95&#58;29&#58;dc&#58;f5&#58;6e&#58;05&#58;0a&#58;dc&#58;96&#58;
d8&#58;d3&#58;a1&#58;21&#58;98&#58;6e&#58;6c&#58;e2&#58;c2&#58;d3&#58;55&#58;a9&#58;19&#58;85&#58;c3&#58;a6&#58;54&#58;7c&#58;
e9&#58;fb&#58;0c&#58;28&#58;f4&#58;fe&#58;7d&#58;70&#58;f1&#58;e2&#58;a6&#58;7d&#58;b8&#58;76&#58;1d&#58;ed&#58;6d&#58;04&#58;
b8&#58;1c&#58;b5&#58;95
[root@lsst-glidein grid-security]#

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Shaomin Hu 958
</div><script type='text/javascript'>
        $('#show_901198538').click(function() {
            $('#detail_901198538').slideDown("normal");
            $('#show_901198538').hide();
            $('#hide_901198538').show();
        });
        $('#hide_901198538').click(function() {
            $('#detail_901198538').slideUp();
            $('#hide_901198538').hide();
            $('#show_901198538').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='22250#1409236510'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T14:35:10+00:00">Aug 28, 2014 02:35 PM UTC</time><a class="anchor" name="1409236510">&nbsp;</a></div><pre>We talked to Jeff Dost/Gabriele Garzoglio/Brendan Dennis yesterday, here are the emails between us.

----------------------------------------------------------------------------------------------------------

Hi Jeff,

I added &#34;-voms lsst&#34; in the &#34;glidein_proxy_regen&#34; script, but the script could not run anymore. Here are the messages when run it,

[root@lsst-glidein cron.daily]# cat glidein_proxy_regen
#!/bin/bash

set -e

TMP_OUT=/tmp/x509up-u&#96;id -u&#96;.tmp
FINAL_OUT=/tmp/x509up-u&#96;id -u glidein&#96;

/usr/bin/voms-proxy-init -quiet -voms lsst -valid 96&#58;00 &#92;
-cert /etc/grid-security/hostcert.pem &#92;
-key /etc/grid-security/hostkey.pem &#92;
-out $TMP_OUT

cp $TMP_OUT $FINAL_OUT
chown glidein&#58; $FINAL_OUT
rm -f $TMP_OUT

[root@lsst-glidein cron.daily]#

[root@lsst-glidein cron.daily]# glidein_proxy_regen

Error&#58; User is currently suspended!
Suspension reason&#58; User failed to sign the AUP in time.

None of the contacted servers for lsst were capable
of returning a valid AC for the user.
[root@lsst-glidein cron.daily]#
<div id='show_1505638176' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1505638176'>
We have been using this glidein_proxy_regen script without &#34;-voms lsst&#34; option for a long time with v2.7.1 and it was fine.

Please help!

Thanks,
Shaomin

On Wed, Aug 27, 2014 at 6&#58;37 PM, Jeff Dost &#60;jdost@....&#62; wrote&#58;
I don&#39;t see you specifying a voms in the voms-proxy-init command.

just a wild guess, can you try adding&#58;
-voms lsst

Jeff

On 8/27/14 2&#58;08 PM, Shaomin Hu wrote&#58;
Hi Jeff/Gabriele,

Thanks for your reply. What should I do at our side to fix the problem?

the /etc/grid-security/hostcert.pem won&#39;t expire till Apr. 9, 2015 (next year), and we have the following script to run daily,

[root@lsst-glidein cron.daily]# cat glidein_proxy_regen
#!/bin/bash

set -e

TMP_OUT=/tmp/x509up-u&#96;id -u&#96;.tmp
FINAL_OUT=/tmp/x509up-u&#96;id -u glidein&#96;

/usr/bin/voms-proxy-init -quiet -valid 96&#58;00 &#92;
-cert /etc/grid-security/hostcert.pem &#92;
-key /etc/grid-security/hostkey.pem &#92;
-out $TMP_OUT

cp $TMP_OUT $FINAL_OUT
chown glidein&#58; $FINAL_OUT
rm -f $TMP_OUT

[root@lsst-glidein cron.daily]# id -u glidein
297895
[root@lsst-glidein cron.daily]# ls -l /tmp/x509up-u297895
-rw------- 1 glidein pustaff 4031 Aug 27 03&#58;15 /tmp/x509up-u297895
[root@lsst-glidein cron.daily]#

And the following configurations in the frontend.xml,

&#60;credentials&#62;
&#60;credential absfname=&#34;/tmp/x509up-u297895&#34; security_class=&#34;frontend&#34; trust_domain=&#34;grid&#34; type=&#34;grid_proxy&#34;/&#62;
&#60;/credentials&#62;

Is there any special step to I need to take for upgrading the Glideinwms vofrontend to v3.2.6 from v2.7.1 for this authentication issue?

Please help!

Thanks,
Shaomin

On Wed, Aug 27, 2014 at 4&#58;33 PM, Jeff Dost &#60;jdost@....&#62; wrote&#58;
It turns out the LSST pilot proxy has no VOMS extension.  I don&#39;t expect any site will authenticate unless you make sure the pilot proxies are in VOMS.  Sample output of voms-proxy-info -all&#58;

subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=lsst-glidein.rcac.purdue.edu/CN=proxy
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=lsst-glidein.rcac.purdue.edu
identity  &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=lsst-glidein.rcac.purdue.edu
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /var/gfactory/clientproxies/user_felsst/glidein_v3_0/credential_LSST-lsst_v1_0.main_289969
timeleft  &#58; 84&#58;12&#58;24
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment

This is consistent with what you show us because if glideins can&#39;t authenticate, they will never start, and your user jobs will remain idle.

Jeff

On 8/27/14 12&#58;58 PM, Gabriele Garzoglio wrote&#58;
Hi Shaomin,
the frontend passes a pilot certificate to the factory to submit pilot jobs. If the certificate is expired, no new pilots can start so no user jobs can start either.

The frontend configuration is organized in groups&#58; there should be an XML entry pointing to your certificate there and you can check if that is expired.

If that does not solve your problem, I recommend for you to open a GOC ticket to involve the OSG user support

<a href='https&#58;//ticket.grid.iu.edu/submit' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/submit</a>

Good luck
Gabriele

On 8/27/14 1&#58;39 PM, Shaomin Hu wrote&#58;
Brendan,

Thanks for your information. I don&#39;t quite understand how these messages related to our issues. Did you see the same messages from our GlideinWMS frontend server is last-glidein.rcac.purdue.edu with IP (128.211.140.36)?

Hope someone else can take a look at our problem soon.

Thanks,
Shaomin

On Wed, Aug 27, 2014 at 2&#58;10 PM, Brendan Dennis &#60;bmdennis@....&#62; wrote&#58;
Hi Shaomin,

I won’t be able to help you much with the frontend issues, but I can at least provide you some info from the factory operations perspective. I’ve checked out a few sites where LSST glideins have attempted to run, and I’m seeing the glideins failing to submit with globus error 7 before finally going held&#58;

000 (2358061.000.000) 08/27 10&#58;30&#58;59 Job submitted from host&#58; &#60;169.228.38.36&#58;60515&#62;
...
018 (2358061.000.000) 08/27 10&#58;31&#58;07 Globus job submission failed!
Reason&#58; 7 authentication with the remote server failed
...
018 (2358061.000.000) 08/27 10&#58;36&#58;09 Globus job submission failed!
Reason&#58; 7 authentication with the remote server failed
...
018 (2358061.000.000) 08/27 10&#58;41&#58;11 Globus job submission failed!
Reason&#58; 7 authentication with the remote server failed
...
012 (2358061.000.000) 08/27 10&#58;41&#58;16 Job was held.
Globus error 7&#58; authentication with the remote server failed
Code 2 Subcode 7

Unfortunately I don’t see much more than that, hopefully it’s helpful in some way.
--
Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Shaomin Hu 958
</div><script type='text/javascript'>
        $('#show_1505638176').click(function() {
            $('#detail_1505638176').slideDown("normal");
            $('#show_1505638176').hide();
            $('#hide_1505638176').show();
        });
        $('#hide_1505638176').click(function() {
            $('#detail_1505638176').slideUp();
            $('#hide_1505638176').hide();
            $('#show_1505638176').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='22250#1409236382'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T14:33:02+00:00">Aug 28, 2014 02:33 PM UTC</time><a class="anchor" name="1409236382">&nbsp;</a></div><pre>I think this should be reassigned to the gfactory and/or glideinwms teams. They should be able to help with the debugging.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='22250#1409235999'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-28T14:26:39+00:00">Aug 28, 2014 02:26 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1409235999">&nbsp;</a></div><pre>We upgraded our glideinwms vofrontend on lsst-glidein.rcac.purdue.edu to v3.2.6 from v2.7.1 on Aug 19. Right after the upgrade, jobs were able to glide and run. However since late afternoon on Aug 25,  we noticed jobs just idled there and not glide any more. We tried to trouble shooting and noticed the frontend was able to talk to the Schedulers both on lsst-glidein.rcac and new-lsst.rcac (the job submitter only frontend), but always could not found Glideins.  The /var/glidein/frontlogs/frontend_LSST-lsst_v1_0/group_main/main.info.log always shows &#34;
[2014-08-27 09&#58;51&#58;12,340] INFO&#58; Group glideins found total 0 limit 100000 curb 90000; of these idle 0 limit 1000 curb 200 running 0
[2014-08-27 09&#58;51&#58;12,340] INFO&#58; Frontend glideins found total 0 limit 100000 curb 90000; of these idle 0 limit 1000 curb 200

We tried to roll back the glideinwms vofrontend v 2.7.1 and saw the same issues, with the similar message &#34;Glideins found total 0 idle 0 .....&#34; in the frontend.xxxxxxxx.info.log.

Are the system in the factory side very busy recently? Our jobs idled there for more than 10 hours and were not able to run. What&#39;s wrong?

Here are the procedures we used to upgrade the glideinwms vofrontend to v3.2.6,

stop the glideinwms frontend service  /etc/init.d/frontend_startup stop
the glideinwms vofrontend v3.2.6 source is installed at /opt/glideinwms

Save the working directory on /var/glidein and rename the frontend.xml file to frontend.xml-v2.7.1 on /var/glidein/frontstage/frontend_LSST-lsst_v1_0/ and /var/glidein/frontstage/instance_lsst_v1_0.cfg

/opt/glideinwms/frontend/tools/convert_frontend_2to3.sh -i  /var/glidein/frontstage/frontend_LSST-lsst_v1_0/frontend.xml-v2.7.1 -o /var/glidein/frontstage/frontend_LSST-lsst_v1_0/frontend.xml  -s /opt/glideinwms

/opt/glideinwms/frontend/tools/convert_frontend_2to3.sh -i   /var/glidein/frontstage/instance_lsst_v1_0.cfg/frontend.xml-v2.7.1 -o /var/glidein/frontstage/instance_lsst_v1_0.cfg/frontend.xml  -s /opt/glideinwms

Run &#34;upgrade&#34;  /etc/init.d/frontend_startup upgrade
start the glideinwms frontend service  /etc/init.d/frontend_startup start

There are no changes in the condor and other configurations.

Currently, our Glideinwms vofrontend on lsst-glidein is broken. Hope we can get it fix very soon. Thanks for your help.

It seems we can not attach the files, so we include the frontend.xml content in the email.
$ cat frontend.xml
&#60;frontend advertise_delay=&#34;5&#34; advertise_with_multiple=&#34;True&#34; advertise_with_tcp=&#34;True&#34; frontend_monitor_index_page=&#34;True&#34; frontend_name=&#34;LSST-lsst_v1_0&#34; frontend_versioning=&#34;True&#34; group_parallel_workers=&#34;2&#34; loop_delay=&#34;60&#34; restart_attempts=&#34;3&#34; restart_interval=&#34;1800&#34;&#62;
&#60;config&#62;
&#60;idle_vms_total curb=&#34;200&#34; max=&#34;1000&#34;/&#62;
&#60;idle_vms_total_global curb=&#34;200&#34; max=&#34;1000&#34;/&#62;
&#60;running_glideins_total curb=&#34;90000&#34; max=&#34;100000&#34;/&#62;
&#60;running_glideins_total_global curb=&#34;90000&#34; max=&#34;100000&#34;/&#62;
&#60;/config&#62;
<div id='show_2143652866' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2143652866'>&#60;log_retention&#62;
&#60;process_logs&#62;
&#60;process_log backup_count=&#34;5&#34; extension=&#34;info&#34; max_days=&#34;7.0&#34; max_mbytes=&#34;100.0&#34; min_days=&#34;3.0&#34; msg_types=&#34;INFO&#34;/&#62;
&#60;process_log backup_count=&#34;5&#34; extension=&#34;err&#34; max_days=&#34;7.0&#34; max_mbytes=&#34;100.0&#34; min_days=&#34;3.0&#34; msg_types=&#34;DEBUG,ERR,WARN&#34;/&#62;
&#60;/process_logs&#62;
&#60;/log_retention&#62;
&#60;match match_expr=&#34;True&#34; start_expr=&#34;True&#34;&#62;
&#60;factory query_expr=&#39;(stringListMember(&#34;LSST&#34;,GLIDEIN_Supported_VOs))&#39;&#62;
&#60;match_attrs&#62;
&#60;/match_attrs&#62;
&#60;collectors&#62;
&#60;collector DN=&#34;/DC=org/DC=doegrids/OU=Services/CN=gfactory-1.t2.ucsd.edu&#34; comment=&#34;Define factory collector globally for simplicity&#34; factory_identity=&#34;gfactory@....&#34; my_identity=&#34;felsst@....&#34; node=&#34;gfactory-1.t2.ucsd.edu&#34;/&#62;
&#60;collector DN=&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=gfactory-1.t2.ucsd.edu&#34; comment=&#34;Define factory collector globally for simplicity&#34; factory_identity=&#34;gfactory@....&#34; my_identity=&#34;felsst@....&#34; node=&#34;gfactory-1.t2.ucsd.edu&#34;/&#62;
&#60;/collectors&#62;
&#60;/factory&#62;
&#60;job comment=&#34;Define job constraint and schedds globally for simplicity&#34; query_expr=&#34;(JobUniverse==5)&amp;&amp;(GLIDEIN_Is_Monitor =!= TRUE)&amp;&amp;(JOB_Is_Monitor =!= TRUE)&#34;&#62;
&#60;match_attrs&#62;
&#60;/match_attrs&#62;
&#60;schedds&#62;
&#60;schedd DN=&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=lsst-glidein.rcac.purdue.edu&#34; fullname=&#34;lsst-glidein.rcac.purdue.edu&#34;/&#62;
&#60;schedd DN=&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=new-lsst.rcac.purdue.edu&#34; fullname=&#34;new-lsst.rcac.purdue.edu&#34;/&#62;
&#60;/schedds&#62;
&#60;/job&#62;
&#60;/match&#62;
&#60;monitor base_dir=&#34;/var/www/html/vofrontend/monitor&#34; flot_dir=&#34;/usr/share/javascriptrrd-1.1.1/flot&#34; javascriptRRD_dir=&#34;/usr/share/javascriptrrd-1.1.1&#34; jquery_dir=&#34;/usr/share/javascriptrrd-1.1.1/flot&#34;/&#62;
&#60;monitor_footer display_txt=&#34;&#34; href_link=&#34;&#34;/&#62;
&#60;security classad_proxy=&#34;/tmp/x509up-u297895&#34; proxy_DN=&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=lsst-glidein.rcac.purdue.edu&#34; proxy_selection_plugin=&#34;ProxyAll&#34; security_name=&#34;LSST&#34; sym_key=&#34;aes_256_cbc&#34;&#62;
&#60;credentials&#62;
&#60;credential absfname=&#34;/tmp/x509up-u297895&#34; security_class=&#34;frontend&#34; trust_domain=&#34;grid&#34; type=&#34;grid_proxy&#34;/&#62;
&#60;/credentials&#62;
&#60;/security&#62;
&#60;stage base_dir=&#34;/var/www/html/vofrontend/stage&#34; use_symlink=&#34;True&#34; web_base_url=&#34;<a href='http&#58;//lsst-glidein.rcac.purdue.edu/vofrontend//stage&#34' target='_blank' rel='nofollow'>http&#58;//lsst-glidein.rcac.purdue.edu/vofrontend//stage&#34</a>;/&#62;
&#60;work base_dir=&#34;/var/glidein/frontstage&#34; base_log_dir=&#34;/var/glidein/frontlogs&#34;/&#62;
&#60;attrs&#62;
&#60;attr name=&#34;GLIDECLIENT_Rank&#34; glidein_publish=&#34;False&#34; job_publish=&#34;False&#34; parameter=&#34;True&#34; type=&#34;string&#34; value=&#34;1&#34;/&#62;
&#60;attr name=&#34;GLIDEIN_Expose_Grid_Env&#34; glidein_publish=&#34;True&#34; job_publish=&#34;True&#34; parameter=&#34;False&#34; type=&#34;string&#34; value=&#34;False&#34;/&#62;
&#60;attr name=&#34;GLIDEIN_Glexec_Use&#34; glidein_publish=&#34;True&#34; job_publish=&#34;True&#34; parameter=&#34;False&#34; type=&#34;string&#34; value=&#34;OPTIONAL&#34;/&#62;
&#60;attr name=&#34;USE_MATCH_AUTH&#34; glidein_publish=&#34;False&#34; job_publish=&#34;False&#34; parameter=&#34;True&#34; type=&#34;string&#34; value=&#34;True&#34;/&#62;
&#60;/attrs&#62;
&#60;groups&#62;
&#60;group name=&#34;main&#34; enabled=&#34;True&#34;&#62;
&#60;config&#62;
&#60;idle_glideins_per_entry max=&#34;100&#34; reserve=&#34;5&#34;/&#62;
&#60;idle_vms_per_entry curb=&#34;5&#34; max=&#34;100&#34;/&#62;
&#60;idle_vms_total curb=&#34;200&#34; max=&#34;1000&#34;/&#62;
&#60;processing_workers matchmakers=&#34;3&#34;/&#62;
&#60;running_glideins_per_entry max=&#34;10000&#34; relative_to_queue=&#34;1.15&#34;/&#62;
&#60;running_glideins_total curb=&#34;90000&#34; max=&#34;100000&#34;/&#62;
&#60;/config&#62;
&#60;match match_expr=&#34;True&#34; start_expr=&#34;True&#34;&#62;
&#60;factory query_expr=&#34;True&#34;&#62;
&#60;match_attrs&#62;
&#60;/match_attrs&#62;
&#60;collectors&#62;
&#60;/collectors&#62;
&#60;/factory&#62;
&#60;job query_expr=&#34;True&#34;&#62;
&#60;match_attrs&#62;
&#60;/match_attrs&#62;
&#60;schedds&#62;
&#60;/schedds&#62;
&#60;/job&#62;
&#60;/match&#62;
&#60;security&#62;
&#60;credentials&#62;
&#60;/credentials&#62;
&#60;/security&#62;
&#60;attrs&#62;
&#60;/attrs&#62;
&#60;files&#62;
&#60;/files&#62;
&#60;/group&#62;
&#60;/groups&#62;
&#60;collectors&#62;
&#60;collector DN=&#34;/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=lsst-glidein.rcac.purdue.edu&#34; group=&#34;default&#34; node=&#34;lsst-glidein.rcac.purdue.edu&#34; secondary=&#34;False&#34;/&#62;
&#60;/collectors&#62;
&#60;files&#62;
&#60;/files&#62;
&#60;/frontend&#62;

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Shaomin Hu 958

</div><script type='text/javascript'>
        $('#show_2143652866').click(function() {
            $('#detail_2143652866').slideDown("normal");
            $('#show_2143652866').hide();
            $('#hide_2143652866').show();
        });
        $('#hide_2143652866').click(function() {
            $('#detail_2143652866').slideUp();
            $('#hide_2143652866').hide();
            $('#show_2143652866').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F22250">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
