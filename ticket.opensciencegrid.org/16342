<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[16342] gratia LSF probe creating ~1M files and using up all inodes</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=16342" method="post">
<div class="page-header">
    <h3><span class="muted">16342</span> / gratia LSF probe creating ~1M files and using up all inodes</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">John Brunelle</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">John Brunelle</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Waiting for user response</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-10-14</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Suchandra Thapa <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=16342", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/16342?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/16342?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20gratia%20LSF%20probe%20creating%20~1M%20files%20and%20using%20up%20all%20inodes%20ISSUE%3D16342%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='16342#1383677710'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-11-05T18:55:10+00:00">Nov 5, 2013 06:55 PM UTC</time><a class="anchor" name="1383677710">&nbsp;</a></div><pre>Sorry to re-open a closed ticket, but I do just want to add that the files started accumulating just the same as before, but I&#39;ve now symlinked /var/lib/gratia to storage with over an order of magnitude more inodes, and we seem to have capped out at 8M files and are okay, at least for the time being.

You can close the ticket again.

Thanks,

John

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=John Brunelle 221</pre></div><div class='update_description'><i onclick="document.location='16342#1381521798'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-10-11T20:03:18+00:00">Oct 11, 2013 08:03 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1381521798">&nbsp;</a></div><pre>Closing per John&#39;s comment.

Suchandra</pre></div><div class='update_description'><i onclick="document.location='16342#1381521558'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-10-11T19:59:18+00:00">Oct 11, 2013 07:59 PM UTC</time> by <b>john_brunelle@....</b><a class="anchor" name="1381521558">&nbsp;</a></div><pre>Things look good now!  At least the condor-cron and rsv service have
been running and there is no accumulation of files.  We can close the
ticket.

Thanks!

John

On Fri, Oct 11, 2013 at 2&#58;26 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='16342#1381516003'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-10-11T18:26:43+00:00">Oct 11, 2013 06:26 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1381516003">&nbsp;</a></div><pre>Hi John,

Are you still having issues with this? Or is this resolved now?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='16342#1380915375'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-10-04T19:36:15+00:00">Oct 4, 2013 07:36 PM UTC</time> by <b>john_brunelle@....</b><a class="anchor" name="1380915375">&nbsp;</a></div><pre>Hi Suchandra,

I&#39;ve attached my ProbeConfig, before making any changes.  I&#39;ve now changed&#58;

SuppressGridLocalRecords=&#34;0&#34;

to

SuppressGridLocalRecords=&#34;1&#34;

and will see how that goes.  I bet it&#39;ll make a big difference.  If
there is still an issue I&#39;ll set QuarantineSize to something smaller.

Thanks for the help!

John

On Wed, Sep 25, 2013 at 5&#58;13 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='16342#1380618908'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-10-01T09:15:08+00:00">Oct 1, 2013 09:15 AM UTC</time> by <b>john_brunelle@....</b><a class="anchor" name="1380618908">&nbsp;</a></div><pre>I will be away from the office through Wednesday, Oct 2.

If you need immediate assistance with FAS Research Computing or ATLAS
issues, please write to rchelp@.....

Best,

John Brunelle
Harvard University
FAS Research Computing
38 Oxford St Rm 204
Cambridge, MA 02138
john_brunelle@....
617-384-6794</pre></div><div class='update_description'><i onclick="document.location='16342#1380618587'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-10-01T09:09:47+00:00">Oct 1, 2013 09:09 AM UTC</time><a class="anchor" name="1380618587">&nbsp;</a></div><pre>Hi Suchandra,

Our situation is similar to Johns, but also maybe a bit more &#34;strange&#34;. We have one torque server, that serves two CE&#39;s, Our cluster however supports two middlewares  (Both EGI and OSG). It is the EMI jobs that are all being quarantined.
I created a separate partition and mounted the gratia directories there to make sure it doesn&#39;t kill the server again, and also disabled local job submission. The jobs are all still technically ATLAS however.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=chlee/CN=727357/CN=Christopher Jon Lee</pre></div><div class='update_description'><i onclick="document.location='16342#1380143710'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-25T21:15:10+00:00">Sep 25, 2013 09:15 PM UTC</time> by <b>john_brunelle@....</b><a class="anchor" name="1380143710">&nbsp;</a></div><pre>I will be away from the office through Wednesday, Oct 2.

If you need immediate assistance with FAS Research Computing or ATLAS
issues, please write to rchelp@.....

Best,

John Brunelle
Harvard University
FAS Research Computing
38 Oxford St Rm 204
Cambridge, MA 02138
john_brunelle@....
617-384-6794</pre></div><div class='update_description'><i onclick="document.location='16342#1380143637'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-25T21:13:57+00:00">Sep 25, 2013 09:13 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1380143637">&nbsp;</a></div><pre>Hi John,

Could you provide your /etc/gratia/pbs-lsf/ProbeConfig file?  I think you may want to change the SuppressGridLocalRecords setting there.   In addition, you can reduce the number of files kept by changing the QuarantineSize setting so that less space (and therefore fewer files) are quarantined.

Chris, what do your gratia logs show?  Do you also have a significant amount of local non-grid jobs?

Suchandra</pre></div><div class='update_description'><i onclick="document.location='16342#1379591799'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-19T11:56:39+00:00">Sep 19, 2013 11:56 AM UTC</time><a class="anchor" name="1379591799">&nbsp;</a></div><pre>Hi All,

Just for info.. I&#39;ve run into the exact same thing on our site (OSG-UJ) with the pbs probe and would love to hear what the solution is
(Other than of course adding a new partition where those directories are mounted on so that the system continues to work even if they do fill up)

Cheers
Chris

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=chlee/CN=727357/CN=Christopher Jon Lee</pre></div><div class='update_description'><i onclick="document.location='16342#1379458306'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-17T22:51:46+00:00">Sep 17, 2013 10:51 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1379458306">&nbsp;</a></div><pre>Hi,

I&#39;m looking at this and should have an update tomorrow.

Suchandra</pre></div><div class='update_description'><i onclick="document.location='16342#1379362229'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-16T20:10:29+00:00">Sep 16, 2013 08:10 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1379362229">&nbsp;</a></div><pre>Hello All,

Does anyone have any new information on this issue?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='16342#1378498149'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-06T20:09:09+00:00">Sep 6, 2013 08:09 PM UTC</time> by <b>john_brunelle@....</b><a class="anchor" name="1378498149">&nbsp;</a></div><pre>I don&#39;t see anything in the web interface for attaching files.  I
suppose because I&#39;m not logged in, but when I click the (NoCert) link
I&#39;m redirected to the form to fill out a new tickets.

I posted the log at&#58;

<a href='https&#58;//software.rc.fas.harvard.edu/jab/tmp/var.log.gratia.2013-08-07.1000_lines.log' target='_blank' rel='nofollow'>https&#58;//software.rc.fas.harvard.edu/jab/tmp/var.log.gratia.2013-08-07.1000_lines.log</a>

Best,

John

On Fri, Sep 6, 2013 at 4&#58;03 PM, John Brunelle &#60;john_brunelle@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; Here it is again, pulled and re-attached from my sent mail on Aug 16th.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;ll log into the web interface and see if there are any additional</font>
<font color='#7F7E6F'>&#62; options for attaching there...</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; John</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Fri, Sep 6, 2013 at 3&#58;59 PM, Open Science Grid FootPrints</font>
<font color='#7F7E6F'>&#62; &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='16342#1378497969'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-06T20:06:09+00:00">Sep 6, 2013 08:06 PM UTC</time> by <b>john_brunelle@....</b><a class="anchor" name="1378497969">&nbsp;</a></div><pre>Here it is again, pulled and re-attached from my sent mail on Aug 16th.

I&#39;ll log into the web interface and see if there are any additional
options for attaching there...

John

On Fri, Sep 6, 2013 at 3&#58;59 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='16342#1378497565'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-06T19:59:25+00:00">Sep 6, 2013 07:59 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1378497565">&nbsp;</a></div><pre>Hi John
If you are back from vacation, please attach the gratia log. To me, it doesn&#39;t look like it is attached.
Thanks
-Neha</pre></div><div class='update_description'><i onclick="document.location='16342#1377718928'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-28T19:42:08+00:00">Aug 28, 2013 07:42 PM UTC</time> by <b>john_brunelle@....</b><a class="anchor" name="1377718928">&nbsp;</a></div><pre>I will be away from the office at least until Thursday, August 29th.

If you need immediate assistance with FAS Research Computing or ATLAS
issues, please write to rchelp@.....

Best,

John Brunelle
Harvard University
FAS Research Computing
38 Oxford St Rm 204
Cambridge, MA 02138
john_brunelle@....
617-384-6794</pre></div><div class='update_description'><i onclick="document.location='16342#1377718729'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-28T19:38:49+00:00">Aug 28, 2013 07:38 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1377718729">&nbsp;</a></div><pre>Suchandra, did you get John&#39;s attached log?  I don&#39;t actually see it here on the web interface for this ticket, though I see &#34;Added Attachment&#34; in the info under John&#39;s comment...

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='16342#1376685553'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-16T20:39:13+00:00">Aug 16, 2013 08:39 PM UTC</time> by <b>john_brunelle@....</b><a class="anchor" name="1376685553">&nbsp;</a></div><pre>Oh, I should point out that none of those jobs originated from this
SL6-based gatekeeper.  We&#39;re still running our SL5 gatekeeper in
production.  So this gatekeeper doesn&#39;t &#34;own&#34; any of these, if that&#39;s
a concept that involved.

Best,

John

On Fri, Aug 16, 2013 at 4&#58;30 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='16342#1376685009'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-16T20:30:09+00:00">Aug 16, 2013 08:30 PM UTC</time> by <b>john_brunelle@....</b><a class="anchor" name="1376685009">&nbsp;</a></div><pre>Hello,

Attached is the last 1000 lines of /var/log/gratia/2013-08-07.log

There are many, many pairs of lines such as the following&#58;

13&#58;56&#58;55 EDT Gratia&#58; Info&#58; suppressing record with GlobalJobId
heroint5.rc.fas.harvard.edu&#58;70456615_1375408396 due to unknown or null
VOName, will be quarantined in /var/lib/gratia/data/quarantine
13&#58;56&#58;55 EDT Gratia&#58; No unsuppressed usage records in
/var/lib/gratia/tmp/urCollector/lsf_70456615_1375412027&#58; not sending

Most of these correspond to non-grid jobs that are also in the local
batch system and that it would be best if gratia ignored.  Some of
these do correpond to grid jobs that should be accounted, though.

Maybe this has to do with the fact that our config files do not say we
fully support any VO.  We&#39;re part of ATLAS, but in order to allow an
exception to the security policy of requiring two-factor
authentication to all resources, we only allow a small subset of DNs
to connect.  In technical terms, /etc/edg-mkgridmap.conf is empty
except for a single gmf_local entry pointing to the static list of DNs
we allow.

I see we have a file named /var/lib/osg/user-vo-map, but that is also
essentially blank.

Thanks,

John

On Fri, Aug 16, 2013 at 2&#58;46 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='16342#1376678767'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-16T18:46:07+00:00">Aug 16, 2013 06:46 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1376678767">&nbsp;</a></div><pre>John,

Have you been able to send Suchandra the last 1000 lines of the log file?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='16342#1376342877'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-12T21:27:57+00:00">Aug 12, 2013 09:27 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1376342877">&nbsp;</a></div><pre>Hi,

The files should be processed by gratia and deleted regularly but it sounds like there is something wrong.  Can you send me the the last 1000 or so lines of the current gratia logs in /var/log/gratia?

Thanks,
Suchandra Thapa</pre></div><div class='update_description'><i onclick="document.location='16342#1376084711'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-09T21:45:11+00:00">Aug 9, 2013 09:45 PM UTC</time> by <b>john_brunelle@....</b><a class="anchor" name="1376084711">&nbsp;</a></div><pre>Thanks for the attention.  Regarding the files, I put a cron job in
place to regularly purge them.  Possibly disabling the rsv or
condor-cron services stopped them, too.  In any case, they are not
coming back and not an immediate problem now, so we can continue on
the path of making it work properly.

Thanks,

John

On Fri, Aug 9, 2013 at 4&#58;28 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='16342#1376081595'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-09T20:53:15+00:00">Aug 9, 2013 08:53 PM UTC</time><a class="anchor" name="1376081595">&nbsp;</a></div><pre>Suchandra to investigate

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Tim Theisen 1349</pre></div><div class='update_description'><i onclick="document.location='16342#1376080114'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-09T20:28:34+00:00">Aug 9, 2013 08:28 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1376080114">&nbsp;</a></div><pre>Software Team,

While we are waiting on a solution to this issue, could you provide a way to disable whatever is writing
out these files?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='16342#1375968069'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-08T13:21:09+00:00">Aug 8, 2013 01:21 PM UTC</time> by <b>john_brunelle@....</b><a class="anchor" name="1375968069">&nbsp;</a></div><pre>Hello,

In the meantime, what&#39;s the best way to disable whatever is writing
out these files?  This same host runs a production squid server, so I
need to prevent this from happening.  I had turned off
gratia-probes-cron, but the filesystem is still filling nightly.  I&#39;ll
try stopping rsv and condor-cron, too.  But if there&#39;s something else
I need to do to stop the records from being written, please let me
know.

Thanks,

John

On Tue, Aug 6, 2013 at 3&#58;30 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='16342#1375817456'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-06T19:30:56+00:00">Aug 6, 2013 07:30 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1375817456">&nbsp;</a></div><pre>Hello Software,

Could you take a look at this and provide feedback?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='16342#1375817409'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-06T19:30:09+00:00">Aug 6, 2013 07:30 PM UTC</time> by <b>john_brunelle@....</b><a class="anchor" name="1375817409">&nbsp;</a></div><pre>osg-profile.txt and rsv-profiler.tar.gz attached

On Tue, Aug 6, 2013 at 2&#58;56 PM, John Brunelle &#60;john_brunelle@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; Hello,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;ll be adding the output of osg-system-profiler and rsv-control</font>
<font color='#7F7E6F'>&#62; --profile as soon as those processes complete...</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; John</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Tue, Aug 6, 2013 at 2&#58;44 PM, Open Science Grid FootPrints</font>
<font color='#7F7E6F'>&#62; &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='16342#1375815437'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-06T18:57:17+00:00">Aug 6, 2013 06:57 PM UTC</time> by <b>john_brunelle@....</b><a class="anchor" name="1375815437">&nbsp;</a></div><pre>Hello,

I&#39;ll be adding the output of osg-system-profiler and rsv-control
--profile as soon as those processes complete...

John

On Tue, Aug 6, 2013 at 2&#58;44 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='16342#1375814664'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-06T18:44:24+00:00">Aug 6, 2013 06:44 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1375814664">&nbsp;</a></div><pre>Hello,

I&#39;ve built an OSG 3 CE, net2.rc.fas.harvard.edu, that will replace our current CE, heroatlas.fas.harvard.edu.  This will be for resource HU_ATLAS_Tier2.

After getting gratia to work yesterday (probes are green on our local rsv page), it has now exhausted all inodes in the / filesystem.  There are about 250k files in&#58;

/var/lib/gratia/tmp/urCollector

and about 500k files in&#58;

/var/lib/gratia/data/quarantine/subdir.lsf_net2.rc.fas.harvard.edu_gratia-osg-prod.opensciencegrid.org_80/

There appears to be one file per recent cluster job, and we regularly have ~50k jobs running, with a lot of turnover, the majority of which is local cluster jobs completely independent of the grid.

What are the next steps I can take to figure out what&#39;s wrong?  The word &#34;quarantine&#34; in the path is interesting... might this be an issue with the CE FQDN not being in OIM yet?  Even in OSG 1.2, we had issues with the scale of our LSF and had some hacks for OSG components to only care about jobs under grid-related local accounts... where should I look to add such things in OSG 3?

Thanks a lot,

John Brunelle
US ATLAS Northeast Tier2 / HU_ATLAS_Tier2

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=John Brunelle 221</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F16342">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 16342});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
