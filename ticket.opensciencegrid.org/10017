<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[10017] Resource Specific Issue on UConn-OSG_CE</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=10017" method="post">
<div class="page-header">
    <h3><span class="muted">10017</span> / Resource Specific Issue on UConn-OSG_CE</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Ian MacNeill</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">UConn-OSG_CE</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/resource</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Ian MacNeill</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2011-03-18</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">GLUEX <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=10017", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/10017?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/10017?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Resource%20Specific%20Issue%20on%20UConn-OSG_CE%20ISSUE%3D10017%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='10017#1300116612'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-14T15:30:12+00:00">Mar 14, 2011 03:30 PM UTC</time><a class="anchor" name="1300116612">&nbsp;</a></div><pre>Yes, this sounds good. Thanks again for the hard work, Richard.

This ticket may be closed.

Ian

-- by Ian MacNeill</pre></div><div class='update_description'><i onclick="document.location='10017#1300105092'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-14T12:18:12+00:00">Mar 14, 2011 12:18 PM UTC</time> by <b>echism</b><a class="anchor" name="1300105092">&nbsp;</a></div><pre>Ian,

Did you receive that last update? It seems that an allowance has been made for the IP range 137.99.79.128/25

Will that do?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='10017#1299280447'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-04T23:14:07+00:00">Mar 4, 2011 11:14 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1299280447">&nbsp;</a></div><pre>Ian,

Here is a somewhat extended explanation of what went on, provided to me by UConn netops.  I will simply submit this and we can discuss it in subsequent exchange, because it is somewhat detailed.

Hi Richard,

Yes, now is a good time to explain what has been going on.  The past several incidents you&#39;ve reported (this one and the broken LDAP query from 12/2010) have both been from our bandwidth management system.  The firewall and its security functionality have not been an issue.

The problem that has been occurring is that our University has a policy that peer-to-peer (p2p) traffic is blocked by default.  The bandwidth management system receives regular signature updates so that it can accurately detect different protocols across the network.  Sometimes there are false positives in the system in which a protocol &#39;LDAP Query&#39; can be misclassified as something else like &#39;Skype&#39; or &#39;BitTorrent&#39;.  Now this is a real problem when the false positive is a p2p protocol that we&#39;ve chosen to block, which has happened to your traffic several times now.

Unfortunately the signatures for p2p are quite aggressive as this is constantly a cat&  mouse game of p2p developers trying to make their protocols undetectable and bandwidth management system developers trying to find techniques to detect it.  I see the false positives more often when dealing with custom application traffic, such as that I suspect from OSG project.

The option I normally take for this is to packet capture the stream that is failing and send it to vendor with a false positive report like &#39;following pcap shows OSG LDAP traffic detected as BitTorrent&#39;  They then provide a signature update to all their customers that corrects the behavior and potentially creates a new application type &#39;OSG&#39;.

In your case since this keeps happening with the custom network application traffic for OSG - and rather than go through the find and fix process I&#39;ve exempted your entire network 137.99.79.128/25 from any policy enforcement on the bandwidth management system.  This prevents this system from causing any problems to your traffic in the future.

While I believe this is the best solution it also breaks our policy a bit of &#39;blocking p2p by default&#39;.  I&#39;m going to talk to the team and suggest we create a policy exception that can be used for situations like this.  The exception will state that we don&#39;t apply firewall and/or bandwidth policies to your network that are normally applied to all traffic - and that you accept the risk / agree not to infringe copyrights / properly protect your network from network attacks.

Hope that clears it up.  Let me know if you have any questions.

- Mike

On 3/4/2011 5&#58;18 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10017#1299277122'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-04T22:18:42+00:00">Mar 4, 2011 10:18 PM UTC</time><a class="anchor" name="1299277122">&nbsp;</a></div><pre>I think there&#39;s more left to do.

Richard, since you said that we were given a temporary exception in the firewall, I assume that the net ops people will want to revoke it at some point. Do they have any idea what might have changed in the patch to start filtering the ccb traffic?

Ian

-- by Ian MacNeill</pre></div><div class='update_description'><i onclick="document.location='10017#1299274437'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-04T21:33:57+00:00">Mar 4, 2011 09:33 PM UTC</time> by <b>echism</b><a class="anchor" name="1299274437">&nbsp;</a></div><pre>Is everyone satisfied or is there more left to do?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='10017#1299201090'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-04T01:11:30+00:00">Mar 4, 2011 01:11 AM UTC</time><a class="anchor" name="1299201090">&nbsp;</a></div><pre>Hi Richard,
Thanks for working with us to trouble shoot this. Since you&#39;ve given us a temporary exception and I brought the UConn entry back up, we have not seen any CCB issues. The glideins seem to be running jobs.

Ian

-- by Ian MacNeill</pre></div><div class='update_description'><i onclick="document.location='10017#1299087289'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-02T17:34:49+00:00">Mar 2, 2011 05:34 PM UTC</time><a class="anchor" name="1299087289">&nbsp;</a></div><pre>Hi Richard,
Thanks for helping us. I just put set the uconn entry in active status. I&#39;ll let you know when we get some glidein exit logs.

Ian

-- by Ian MacNeill</pre></div><div class='update_description'><i onclick="document.location='10017#1299083497'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-02T16:31:37+00:00">Mar 2, 2011 04:31 PM UTC</time><a class="anchor" name="1299083497">&nbsp;</a></div><pre>Igor and all,

My netops tells me that he has installed a temporary exception in the UConn firewall for us, and would like us to try it again.  Can you tell me if anything has changed?

-Richard J

-- by Richard T. Jones</pre></div><div class='update_description'><i onclick="document.location='10017#1299019086'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-03-01T22:38:06+00:00">Mar 1, 2011 10:38 PM UTC</time> by <b>GLUEX</b><a class="anchor" name="1299019086">&nbsp;</a></div><pre>Igor and all,

UConn firewall acting up again?  Could be, because the vendor just released a major patch that they believe fixes the problems we reported earlier.  Would you like to stage a test, where I ask the netops to bypass the firewall for a brief period and test if it makes a difference?

-Richard J.

On 2/25/2011 7&#58;38 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10017#1298637488'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-25T12:38:08+00:00">Feb 25, 2011 12:38 PM UTC</time><a class="anchor" name="1298637488">&nbsp;</a></div><pre>Hi all.

The error would let us believe that we have a problem in the security layer.
But since it is related to two different servers, the error
&#34;Failed to authenticate because the remote (server) side was not able to acquire its credentials.&#34;
seems misleading at best.

Maybe the clock is severely screwed up on the worker node?
Or is the UConn firewall acting up again and blocking all communication to the two CCB nodes?
(via TCP, this time)

My 2c,
Igor

-- by Igor Sfiligoi</pre></div><div class='update_description'><i onclick="document.location='10017#1298596844'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-02-25T01:20:44+00:00">Feb 25, 2011 01:20 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1298596844">&nbsp;</a></div><pre>[by Ian MacNeill]

Hi Derek, Peter, and UConn Admins,
This ticket has a bigger cc list since I&#39;m a completely inexperienced with dealing with ccb issues and our leadership has mostly been out of touch this week so I don&#39;t have anyone here to consult.

At,
gatekeeper=&#34;gluskap.phys.uconn.edu&#58;/jobmanager-condor&#34;
gridtype=&#34;gt2&#34;
rsl=&#34;(queue=default)(jobtype=single)&#34;
we&#39;re seeing all of the gliding pilots that HCC (Derek) and SBGrid (Peter) have submitted run but not produce any useful output.

I believe I have tracked the error to the condor startd logs. This is for SBGrid. The errors are essentially the same for HCC replacing the glidein.nebiogrid.org&#58;9633 below with glidein.unl.edu&#58;9782.

02/24/11 19&#58;28&#58;46 (pid&#58;26015) CCBListener&#58; connection to CCB server glidein.nebiogrid.org&#58;9633 failed; will try to reconnect in 60 seconds.
02/24/11 19&#58;29&#58;46 (pid&#58;26015) condor_read() failed&#58; recv() returned -1, errno = 104 Connection reset by peer, reading 5 bytes from collector glidein.nebiogrid.org&#58;9633.
02/24/11 19&#58;29&#58;46 (pid&#58;26015) IO&#58; Failed to read packet header
02/24/11 19&#58;29&#58;46 (pid&#58;26015) condor_write()&#58; Socket closed when trying to write 13 bytes to collector glidein.nebiogrid.org&#58;9633, fd is 9
02/24/11 19&#58;29&#58;46 (pid&#58;26015) Buf&#58;&#58;write()&#58; condor_write() failed
02/24/11 19&#58;29&#58;46 (pid&#58;26015) AUTHENTICATE&#58; handshake failed!
02/24/11 19&#58;29&#58;46 (pid&#58;26015) SECMAN&#58; required authentication with collector glidein.nebiogrid.org&#58;9633 failed, so aborting command CCB_REGISTER.
02/24/11 19&#58;29&#58;46 (pid&#58;26015) ERROR&#58; AUTHENTICATE&#58;1002&#58;Failure performing handshake|AUTHENTICATE&#58;1004&#58;Failed to authenticate using GSI|GSI&#58;5002&#58;Failed to authenticate because the remote (server) side was not able to acquire its credentials.

Like I said, I don&#39;t know much about how CCB works, so I&#39;m not sure if the authentication is failing because of something at UConn or because of something on the front end side.

I hope you guys can help.

Thanks,

Ian</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F10017">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 10017});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
