<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[11307] Total Opportunistic Usage Graph</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=11307" method="post">
<div class="page-header">
    <h3><span class="muted">11307</span> / Total Opportunistic Usage Graph</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Ruth Pordes</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/other</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Ruth Pordes</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-02-27</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/11307", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/11307?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/11307?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Total%20Opportunistic%20Usage%20Graph%20ISSUE%3D11307%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='11307#1330627959'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-01T18:52:39+00:00">Mar 1, 2012 06:52 PM UTC</time><a class="anchor" name="1330627959">&nbsp;</a></div><pre>The change in OIM is complete and it is what we asked for.

I was not sure at first if it was a problem of &#34;usatlas&#34; being hardcoded in the
reporting scripts or whether it was a problem of the OIM entry.  It turns out
that both were problems.  the OIM problem is now solved.  John Weigand is looking
for a fix of the reporting script problem.

None of this should have any effect on the opportunistic usage plot which was
the original subject of this ticket. that should already have the configuration
that it needs now.  The stuff we are talking about is all cleanup after
changing the reporting VO name in gratia to make the opportunistic usage plot be OK, hopefully.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11307#1330623114'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-01T17:31:54+00:00">Mar 1, 2012 05:31 PM UTC</time> by <b>Robert Gardner</b><a class="anchor" name="1330623114">&nbsp;</a></div><pre>This change was made yesterday by John Hover.  Is this not correct now&#58;

<a href='https&#58;//oim.grid.iu.edu/oim/vo?id=35' target='_blank' rel='nofollow'>https&#58;//oim.grid.iu.edu/oim/vo?id=35</a>

- Rob</pre></div><div class='update_description'><i onclick="document.location='11307#1330622055'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-03-01T17:14:15+00:00">Mar 1, 2012 05:14 PM UTC</time> by <b>echism</b><a class="anchor" name="1330622055">&nbsp;</a></div><pre>I&#39;m rerouting that update. Dantong, Alessandro, or Michael might you be able to help us? See below&#58;

-----------------
With respect to John Weigand&#39;s question--the original ticket was opened because
the gratia reporting was showing everything as &#34;usatlas&#34; and all the sites were owned
by &#34;atlas&#34;.  now we have changed the gratia reporting to say &#34;atlas&#34; too, so Ashu&#39;s
opportunistic plot should be able to correctly detect that all the atlas sites are owned
by atlas.  I checked in myosg and all the atlas sites are already owned by atlas, (not usatlas)
there is nothing to change there.

The change that we are asking Rob and usatlas to make is to change the name of
the gratia report in oim so that gratia doesn&#39;t complain about atlas being an unregistered VO.
Looks like any of Michael Ernst, Dantong Yu, John Hover, or Alessandro Di Salvo
could make the required change in OIM.</pre></div><div class='update_description'><i onclick="document.location='11307#1330543777'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-29T19:29:37+00:00">Feb 29, 2012 07:29 PM UTC</time><a class="anchor" name="1330543777">&nbsp;</a></div><pre>With respect to John Weigand&#39;s question--the original ticket was opened because
the gratia reporting was showing everything as &#34;usatlas&#34; and all the sites were owned
by &#34;atlas&#34;.  now we have changed the gratia reporting to say &#34;atlas&#34; too, so Ashu&#39;s
opportunistic plot should be able to correctly detect that all the atlas sites are owned
by atlas.  I checked in myosg and all the atlas sites are already owned by atlas, (not usatlas)
there is nothing to change there.

The change that we are asking Rob and usatlas to make is to change the name of
the gratia report in oim so that gratia doesn&#39;t complain about atlas being an unregistered VO.
Looks like any of Michael Ernst, Dantong Yu, John Hover, or Alessandro Di Salvo
could make the required change in OIM.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11307#1330535861'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-29T17:17:41+00:00">Feb 29, 2012 05:17 PM UTC</time> by <b>Robert Gardner</b><a class="anchor" name="1330535861">&nbsp;</a></div><pre>I do not appear to have the needed privileges.  Who can make the change?</pre></div><div class='update_description'><i onclick="document.location='11307#1330531213'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-29T16:00:13+00:00">Feb 29, 2012 04:00 PM UTC</time> by <b>Steven Timm</b><a class="anchor" name="1330531213">&nbsp;</a></div><pre>No. Only the ATLAS VO itself has to change the name of its gratia report.
That is all.  ATLAS sites don&#39;t have to change anything.
All you have to do is change the &#34;reporting name&#34; from &#34;usatlas&#34; to
&#34;atlas&#34;

in

<a href='https&#58;//oim.grid.iu.edu/oim/vo?id=35' target='_blank' rel='nofollow'>https&#58;//oim.grid.iu.edu/oim/vo?id=35</a>

and you are done.

Steve Timm

On Wed, 29 Feb 2012, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='11307#1330531169'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-29T15:59:29+00:00">Feb 29, 2012 03:59 PM UTC</time><a class="anchor" name="1330531169">&nbsp;</a></div><pre>All,

The reference Steve is making is to the &#34;Reporting Group&#34; seen here&#58; <a href='http&#58;//tinyurl.com/6scn3vr' target='_blank' rel='nofollow'>http&#58;//tinyurl.com/6scn3vr</a>

However, the discovery I made was in investigating this JIRA ticket...
<a href='https&#58;//jira.opensciencegrid.org/browse/GRATIA-54' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/GRATIA-54</a>
... which only deals with a weekly VO discrepancy report from Gratia.
I was not really aware of this one which is entirely different and
not within the scope of any reports I have access to (I don&#39;t think).

Based on what I am reading here, what I requested may resolve the
issue with the VO discrepancy report but I don&#39;t understand how it
relates to the original request on this ticket 11307 which appears
to deal with ownership.

Help me out here.
John Weigand

-- by John Weigand</pre></div><div class='update_description'><i onclick="document.location='11307#1330529981'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-29T15:39:41+00:00">Feb 29, 2012 03:39 PM UTC</time> by <b>Robert Gardner</b><a class="anchor" name="1330529981">&nbsp;</a></div><pre>Steve,

Are you and the Gratia team asking all US ATLAS sites to change their OIM registrations in some way?

Can you provide a list of specific endpoints which are registered incorrectly and what exactly needs to be changed (I looked in OIM for MWT2 - the VO owner is already &#34;ATLAS&#34; and I don&#39;t even find &#34;usatlas&#34; as an option)?

- Rob</pre></div><div class='update_description'><i onclick="document.location='11307#1330528640'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-29T15:17:20+00:00">Feb 29, 2012 03:17 PM UTC</time><a class="anchor" name="1330528640">&nbsp;</a></div><pre>John Weigand tells me that the critical piece of info here is that the gratia
reporting name is declared as &#34;usatlas&#34; in the ATLAS oim registration.  If that is
changed to &#34;atlas&#34; everything should work ok.

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11307#1329752530'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-20T15:42:10+00:00">Feb 20, 2012 03:42 PM UTC</time> by <b>bbockelm</b><a class="anchor" name="1329752530">&nbsp;</a></div><pre>Hi Steve,

Poking in the code for the summary reports, I see the &#34;atlas&#34; VO registration is explicitly ignored by the and the &#34;usatlas&#34; VO is hardcoded in instead.

I filed this as a bug in Gratia here&#58; <a href='http&#58;//jira.opensciencegrid.org/browse/GRATIA-54.' target='_blank' rel='nofollow'>http&#58;//jira.opensciencegrid.org/browse/GRATIA-54.</a>

Brian</pre></div><div class='update_description'><i onclick="document.location='11307#1329751877'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-20T15:31:17+00:00">Feb 20, 2012 03:31 PM UTC</time><a class="anchor" name="1329751877">&nbsp;</a></div><pre>The atlas registration has to be changed in OIM to match the VO name.
Now gratia is complaining &#34;atlas&#34; is not a registered  VO.

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11307#1329524965'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-18T00:29:25+00:00">Feb 18, 2012 12:29 AM UTC</time><a class="anchor" name="1329524965">&nbsp;</a></div><pre>The usatlas-&#62;atlas change has been made.  On the gratia reporting page all ATLAS usage, whether
reported to GRATIA as ATLAS, atlas, or usatlas or any combination, shows under the VO name &#34;atlas&#34;.
This is a change from before when it was all shown on the graphs as &#34;usatlas&#34;.  This has the side
effect that any further new roles that show up in the atlas VO will automatically correctly map to &#34;atlas&#34;.

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11307#1329320060'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-15T15:34:20+00:00">Feb 15, 2012 03:34 PM UTC</time> by <b>Robert Gardner</b><a class="anchor" name="1329320060">&nbsp;</a></div><pre>Sorry for not replying sooner - I should have paid more close attention.

Now is as good a time as any to make the naming consistent.  I&#39;ve not grok&#39;d the dependencies but so long as nothing &#39;breaks&#39; there is no problem whatsoever changing the VO name to &#34;atlas&#34;.

- Rob</pre></div><div class='update_description'><i onclick="document.location='11307#1329088152'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-12T23:09:12+00:00">Feb 12, 2012 11:09 PM UTC</time><a class="anchor" name="1329088152">&nbsp;</a></div><pre>Adding myself to the CC.
Gratia collector does have a VO Correction table.  Right now, whether a site
reports atlas or usatlas, we are putting out the VO name of &#34;usatlas&#34; in all
reports.  That could easily be changed to &#34;atlas&#34;--it is one field in a database.
As soon as Rob gives us the go, we can easily make that change.

The VO template as currently distributed by the OSG does make all new accounting info
for atlas come in as ATLAS.  The challenge will be to get all the gums templates and edg-mkgridmap.conf
files across the OSG (including FermiGrid) to not say &#34;usatlas&#34; anymore.  Once that is done
the long-standing problem in MyOSG (whereby several big ATLAS sites don&#39;t list ATLAS as a supported VO)
will also be fixed.

By the way I also had sent email outside of the ticket a while ago to notify Brian and Ashu that several
other VO&#39;s are overestimating opportunistic usage in this plot, by quite a bit.  CDF and Dzero for sure,
probably many others.

Steve Timm

-- by Steve Timm</pre></div><div class='update_description'><i onclick="document.location='11307#1328576230'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-07T00:57:10+00:00">Feb 7, 2012 12:57 AM UTC</time><a class="anchor" name="1328576230">&nbsp;</a></div><pre>The &#34;USATLAS versus ATLAS&#34; issue is as old as time (well, as old as the OSG!).  It dates back to how the GUMS template was originally filled in in 2006, I think.  Most probes should take the VO name from the VOMS certificate these days, and likely will report &#34;atlas&#34;.  There are a multitude of hacks throughout the OSG software code base to drop the &#34;us&#34; where appropriate.

We can use the VO renaming capability of Gratia to fix this (where &#34;fix&#34; is to rename &#34;usatlas&#34; to &#34;atlas&#34;), but I&#39;d definitely want to get Rob Gardner&#39;s (or the appropriate ATLAS contact) permission first!

Rob - I&#39;d be extremely helpful for us if ATLAS can report a consistent name between Gratia and OIM.  Have any suggestions how we can solve it?

-- by Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='11307#1328565554'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-06T21:59:14+00:00">Feb 6, 2012 09:59 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1328565554">&nbsp;</a></div><pre>Chander,

I might be completely missing your request, but are you thinking that in OIM, resources should owned by &#34;usatlas&#34; instead of &#34;atlas&#34;? If so, this is because in OIM, Atlas VO is registered with the name of &#34;ATLAS&#34;. Also, Atlas support center is registered with the name of &#34;USATLAS&#34;. Meanwhile, VOMS template distributed uses name of &#34;usatlas&#34;. Can you clarify your request?

Soichi</pre></div><div class='update_description'><i onclick="document.location='11307#1328564090'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-06T21:34:50+00:00">Feb 6, 2012 09:34 PM UTC</time> by <b>echism</b><a class="anchor" name="1328564090">&nbsp;</a></div><pre>I&#39;m adding Soichi to this ticket. So, I&#39;m a little confused. Are you saying that we need to differentiate, in OIM, USATLAS users from the rest of WLCG ATLAS users?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='11307#1328221987'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-02T22:33:07+00:00">Feb 2, 2012 10:33 PM UTC</time> by <b>Chander Sehgal</b><a class="anchor" name="1328221987">&nbsp;</a></div><pre>HI Ashu,

This is very useful.  I hacked it a bit by putting &#34;usatlas&#34; in the exclude VO field.   The results after that look very credible.  Thank you....

Dear GOC,

Can you please work with ATLAS to arrange to fix the OIM ownership their sites; in OIM the resources are allocated to &#39;atlas&#39; vs &#39;usatlas&#39;

Thanks,

Chander</pre></div><div class='update_description'><i onclick="document.location='11307#1328221267'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-02T22:21:07+00:00">Feb 2, 2012 10:21 PM UTC</time> by <b>aguru2@....</b><a class="anchor" name="1328221267">&nbsp;</a></div><pre>Hi Chander,
I have resolved the issue at the gratia metrics end (there is an edit in
OIM that needs please see details below) and mentioned a link to the
report that captures the information you need.
Please let me know your feedback and if there is additional information
that you need, I can then look into it further. Also, once I hear an ok
from your end I can release this for the ITB release.
Thanks,
Ashu

Details follow
==============
1. In summary a graph with sum of all the graphs at &#58;
<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo_opp' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo_opp</a> is needed ** However the
individual graphs from the page(<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo_opp' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo_opp</a>
) itself are most likely reporting incorrectly (these graphs were
referencing a deprecated list of allocations)
2. I have fixed the code so that the most recent version (as installed on
red-web) references OIM at&#58;
<a href='https&#58;//myosg.grid.iu.edu/rgsummary/index?datasource=summary&summary_attrs_showvoownership=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=7daysago&start_date=02%2F02%2F2012&end_type=now&end_date=02%2F02%2F2012&all_resources=on&facility_10009=on&gridtype=on&gridtype_1=on&active_value=1&disable_value=1' target='_blank' rel='nofollow'>https&#58;//myosg.grid.iu.edu/rgsummary/index?datasource=summary&summary_attrs_showvoownership=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=7daysago&start_date=02%2F02%2F2012&end_type=now&end_date=02%2F02%2F2012&all_resources=on&facility_10009=on&gridtype=on&gridtype_1=on&active_value=1&disable_value=1</a>

3. ** Here is the graph that lists the summation of all the opportunistic
usage&#58; <a href='http&#58;//red-web.unl.edu/gratia/xml/osg_sharing_vos' target='_blank' rel='nofollow'>http&#58;//red-web.unl.edu/gratia/xml/osg_sharing_vos</a>
NOTE&#58; you may notice that the usage of usatlas is incorrect - this is
because in OIM the resources are allocated to &#39;atlas&#39; vs &#39;usatlas&#39;
You may verify this from the following the above OIM link and
<a href='http&#58;//red-web.unl.edu/gratia/xml/vo_opp_hours_bar?endtime=2012-02-02+23%3A59%3A59&span=86401&facility=.*&probe=.*&resource-type' target='_blank' rel='nofollow'>http&#58;//red-web.unl.edu/gratia/xml/vo_opp_hours_bar?endtime=2012-02-02+23%3A59%3A59&span=86401&facility=.*&probe=.*&resource-type</a>
=^Batch%24&vo=usatlas&role=.&user=.
&starttime=2012-01-22+00%3A00%3A00&exclude-facility=NONE|Generic|Obsolete&exclude-user=NONE&includeSuccess=true&exclude-vo=unknown|other&includeFailed=true&exclude-role=NONE

As a verification please see the following two graphs comparing dzero data
as an example&#58;
-------------------------------------------------------------------------------------------------------------------

<a href='http&#58;//red-web.unl.edu/gratia/xml/vo_opp_hours_bar?endtime=2012-02-02+23%3A59%3A59&span=86401&facility=.*&probe=.*&resource-type=' target='_blank' rel='nofollow'>http&#58;//red-web.unl.edu/gratia/xml/vo_opp_hours_bar?endtime=2012-02-02+23%3A59%3A59&span=86401&facility=.*&probe=.*&resource-type=</a>^Batch%24&vo=dzero&role=.*&user=.*&starttime=2012-01-19+00%3A00%3A00&exclude-facility=NONE|Generic|Obsolete&exclude-user=NONE&includeSuccess=true&exclude-vo=unknown|other&includeFailed=true&exclude-role=NONE
<div id='show_1524216025' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1524216025'>
<a href='http&#58;//red-web.unl.edu/gratia/xml/osg_sharing_vos' target='_blank' rel='nofollow'>http&#58;//red-web.unl.edu/gratia/xml/osg_sharing_vos</a>
</div><script type='text/javascript'>
        $('#show_1524216025').click(function() {
            $('#detail_1524216025').slideDown("normal");
            $('#show_1524216025').hide();
            $('#hide_1524216025').show();
        });
        $('#hide_1524216025').click(function() {
            $('#detail_1524216025').slideUp();
            $('#hide_1524216025').hide();
            $('#show_1524216025').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='11307#1328196606'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-02T15:30:06+00:00">Feb 2, 2012 03:30 PM UTC</time> by <b>aguru2@....</b><a class="anchor" name="1328196606">&nbsp;</a></div><pre>I have identified the code change and am working on it now, you may see
the progress at&#58; <a href='http&#58;//jira.opensciencegrid.org/browse/METRICS-11' target='_blank' rel='nofollow'>http&#58;//jira.opensciencegrid.org/browse/METRICS-11</a>

Thanks,
Ashu</pre></div><div class='update_description'><i onclick="document.location='11307#1328113267'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-02-01T16:21:07+00:00">Feb 1, 2012 04:21 PM UTC</time> by <b>aguru2@....</b><a class="anchor" name="1328113267">&nbsp;</a></div><pre>I have the information from Brian to make the report - will be working on
it starting today.
Thanks,
Ashu</pre></div><div class='update_description'><i onclick="document.location='11307#1327962190'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-01-30T22:23:10+00:00">Jan 30, 2012 10:23 PM UTC</time> by <b>echism</b><a class="anchor" name="1327962190">&nbsp;</a></div><pre>Ashu and Brian,

Where are we on this issue?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='11307#1327344592'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-01-23T18:49:52+00:00">Jan 23, 2012 06:49 PM UTC</time> by <b>echism</b><a class="anchor" name="1327344592">&nbsp;</a></div><pre>Are there any updates on this?

Thank you.
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='11307#1326567874'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-01-14T19:04:34+00:00">Jan 14, 2012 07:04 PM UTC</time><a class="anchor" name="1326567874">&nbsp;</a></div><pre>Hi Ashu,

Can you touch base with me on this on Thursday (I&#39;m traveling next week)?  It&#39;s simple enough to create these graphs - you just need to do some post-parsing in GraphTool

Brian

-- by Brian Bockelman</pre></div><div class='update_description'><i onclick="document.location='11307#1326292529'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-01-11T14:35:29+00:00">Jan 11, 2012 02:35 PM UTC</time> by <b>echism</b><a class="anchor" name="1326292529">&nbsp;</a></div><pre>Ashu,

Brian wasn&#39;t CC&#39;d on this ticket. I added him. Brian, please see <a href='https&#58;//ticket.grid.iu.edu/goc/11307#1325874728' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/11307#1325874728</a>

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='11307#1325874728'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-01-06T18:32:08+00:00">Jan 6, 2012 06:32 PM UTC</time> by <b>aguru2@....</b><a class="anchor" name="1325874728">&nbsp;</a></div><pre>Hi Brian,
I was talking with Derek regarding this ticket and he suggested that you
had once created a report similar to what is requested by Chander.
Could you please direct me to where I may look if you had created similar
report, if not how would you suggest I get this done.
Thanks,
Ashu

From&#58;
Open Science Grid FootPrints &#60;osg@....&#62;
To&#58;
&#60;aguru2@....&#62;
Date&#58;
01/03/2012 03&#58;59 PM
Subject&#58;
Open Science Grid&#58; Total Opportunistic Usage Graph ISSUE=11307 PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='11307#1325627885'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-01-03T21:58:05+00:00">Jan 3, 2012 09:58 PM UTC</time> by <b>echism</b><a class="anchor" name="1325627885">&nbsp;</a></div><pre>Ashu,

Are there any updates?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='11307#1324473050'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-12-21T13:10:50+00:00">Dec 21, 2011 01:10 PM UTC</time> by <b>echism</b><a class="anchor" name="1324473050">&nbsp;</a></div><pre>Ashu,

Are there any updates?

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='11307#1324055106'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-12-16T17:05:06+00:00">Dec 16, 2011 05:05 PM UTC</time> by <b>Chander Sehgal</b><a class="anchor" name="1324055106">&nbsp;</a></div><pre>Ashu,

What I am looking for is total opportunistic usage in OSG.  So that would be
a summation of all the graphs at

<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo_opp' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo_opp</a>

Let&#39;s put it another way

Do for all VOs&#58; Sum
Total usage for that VO reduced by usage on their own resources
end

It would be nice to pull such a graph for varying periods of time; the items
in the stack chart should be VO names.

Hope this helps

Chander

-----Original Message-----
From&#58; Open Science Grid FootPrints [mailto&#58;osg@....]
Sent&#58; Wednesday, December 14, 2011 8&#58;13 AM
To&#58; cssehgal@....
Subject&#58; Open Science Grid&#58; Total Opportunistic Usage Graph ISSUE=11307
PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='11307#1323871989'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-12-14T14:13:09+00:00">Dec 14, 2011 02:13 PM UTC</time> by <b>echism</b><a class="anchor" name="1323871989">&nbsp;</a></div><pre>Ashu,

I think Chander means all of this data, but combined&#58;
<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/vo_opp' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/vo_opp</a>

If I am correct, the graph you suggested (<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/byvo?set=Non-HEP%20VOs&vo=nanohub|glow|sdss|dteam|ligo|osg|engage|osgedu|tigre|nysgrid|cigi|compbiogrid|des|fmri|gpn|grase|gugrid|i2u2|mariachi|nwicg|sbgrid|star|hcc|nebiogrid' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/byvo?set=Non-HEP%20VOs&vo=nanohub|glow|sdss|dteam|ligo|osg|engage|osgedu|tigre|nysgrid|cigi|compbiogrid|des|fmri|gpn|grase|gugrid|i2u2|mariachi|nwicg|sbgrid|star|hcc|nebiogrid</a>) would seem to be not quite right.

Chander, please clarify on this.

Thank you,
Elizabeth</pre></div><div class='update_description'><i onclick="document.location='11307#1323109747'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-12-05T18:29:07+00:00">Dec 5, 2011 06:29 PM UTC</time> by <b>aguru2@....</b><a class="anchor" name="1323109747">&nbsp;</a></div><pre>Does the graph listed below provide the information that is needed
<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/byvo?set=Non-HEP%20VOs&vo=nanohub|glow|sdss|dteam|ligo|osg|engage|osgedu|tigre|nysgrid|cigi|compbiogrid|des|fmri|gpn|grase|gugrid|i2u2|mariachi|nwicg|sbgrid|star|hcc|nebiogrid' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/byvo?set=Non-HEP%20VOs&vo=nanohub|glow|sdss|dteam|ligo|osg|engage|osgedu|tigre|nysgrid|cigi|compbiogrid|des|fmri|gpn|grase|gugrid|i2u2|mariachi|nwicg|sbgrid|star|hcc|nebiogrid</a>

Thanks,
Ashu

From&#58;
Open Science Grid FootPrints &#60;osg@....&#62;
To&#58;
&#60;aguru2@....&#62;
Date&#58;
11/30/2011 01&#58;13 PM
Subject&#58;
Open Science Grid&#58; Total Opportunistic Usage Graph ISSUE=11307 PROJ=71

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='11307#1322680242'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-11-30T19:10:42+00:00">Nov 30, 2011 07:10 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1322680242">&nbsp;</a></div><pre>[by Ruth Pordes]

Chander has asked me for a graph of the “total opportunistic usage” on OSG – perhaps he has asked for this separately.

Is this something Ashu could add to the set?

Thanks

Ruth</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F11307">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
