<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[36462] psrsv high IOwait</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=36462" method="post">
<div class="page-header">
    <h3><span class="muted">36462</span> / psrsv high IOwait</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Marian Babik</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">psrsv</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">Ops</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Marian Babik</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">OSG-GOC</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2018-04-20</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Sarah Schmiechen <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Sarah Schmiechen <span class="muted"> / OSG Operations Infrastructure</span></div><div class="assignee" style="width: 60%">Scott Teige <span class="muted"> / OSG Operations Infrastructure</span></div><div class="assignee" style="width: 60%">OSG-GOC <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/36462", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/36462?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/36462?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20psrsv%20high%20IOwait%20ISSUE%3D36462%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='36462#1524236663'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-04-20T15:04:23+00:00">Apr 20, 2018 03:04 PM UTC</time> by <b>Sarah Schmiechen</b><a class="anchor" name="1524236663">&nbsp;</a></div><pre>Hello,

Tom has left our group. RSV is slated to be decommissioned. I&#39;m closing this out.

Thanks,
Sarah</pre></div><div class='update_description'><i onclick="document.location='36462#1523647128'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-04-13T19:18:48+00:00">Apr 13, 2018 07:18 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1523647128">&nbsp;</a></div><pre>Handing this to Scott.</pre></div><div class='update_description'><i onclick="document.location='36462#1522769909'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-04-03T15:38:29+00:00">Apr 3, 2018 03:38 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1522769909">&nbsp;</a></div><pre>Tom,

Can you confirm what Shawn has said?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='36462#1522137806'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-27T08:03:26+00:00">Mar 27, 2018 08:03 AM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1522137806">&nbsp;</a></div><pre>Tom,

Can you confirm what Shawn has said?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='36462#1521476727'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-19T16:25:27+00:00">Mar 19, 2018 04:25 PM UTC</time><a class="anchor" name="1521476727">&nbsp;</a></div><pre>psrsv has been behaving well and the issues which prompted this ticket seem to be resolved.   However Tom should verify that the change I made are properly persisted within the OSG configuration management system(s) before we close this ticket.   Thanks,

Shawn

by smckee@....</pre></div><div class='update_description'><i onclick="document.location='36462#1521388531'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-18T15:55:31+00:00">Mar 18, 2018 03:55 PM UTC</time><a class="anchor" name="1521388531">&nbsp;</a></div><pre>Update&#58;  Marian stopped the RSV probes and did some cleanup.  Iljia reported there was a problem with the firewall at UC.   Both were fixed.

I implemented a longer-term fix as well.   IOPS on /usr/local/ was the initial reason for this ticket.  To try to address this I have allocated the /dev/sdf1 (RAID-1 SSD) partition to the psrsv VM as vdc&#58;

virsh attach-disk psrsv.1 /dev/sdf1  vdc
virsh attach-disk psrsv.1 /dev/sdf1  vdc --config

I then logged into psrsv as &#39;root&#39; and created vdc1&#58;

fdisk /dev/vdc   (&#39;n&#39;, &#39;p&#39;, &#39;1&#39; and use the whole partition)

I then mounted /dev/vdc1 as /usr/localnew

Running &#39;rsync -av /usr/local/*  /usr/localnew&#39;      This got a partially complete replica in place.   Then I stopped the services holding open files on /usr/local and did a final sync.

After the sync I changed the labels.   /dev/vdb1 was LABEL=/usr/local and I changed it to /usr/localold and the corresponding mount point was setup as /usr/localold.  I then added a label to /dev/vdc1 as LABEL=/usr/local.   I then remounted into the new locations and restarted the stopped services.

Based upon Marian&#39;s email I also increased the  maxmem for psrsv to 16G&#58;
virsh setmaxmem psrsv.1 16G --config

I am unable to change the --live mem without restarting the VM.  I ended up (from psvm01) doing a &#39;virsh shutdown psrsv.1&#39; and then, once it stopped, a &#39;virsh start psrsv.1&#39;

I fixed the psetf monitoring of the stompctl processes to match Marian&#39;s change to 3.   All green here now&#58;  <a href='https&#58;//psetf.grid.iu.edu/etf/check_mk/index.py?start_url=%2Fetf%2Fcheck_mk%2Fview.py%3Ffilled_in%3Dfilter%26host%3Dpsrsv%26view_name%3Dhost' target='_blank' rel='nofollow'>https&#58;//psetf.grid.iu.edu/etf/check_mk/index.py?start_url=%2Fetf%2Fcheck_mk%2Fview.py%3Ffilled_in%3Dfilter%26host%3Dpsrsv%26view_name%3Dhost</a>

Let&#39;s see how the RSV probes behave and if the added IO and memory capability helps.

Shawn

by smckee@....</pre></div><div class='update_description'><i onclick="document.location='36462#1521384492'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-18T14:48:12+00:00">Mar 18, 2018 02:48 PM UTC</time> by <b>marian.babik@....</b><a class="anchor" name="1521384492">&nbsp;</a></div><pre>RSV was started, it took couple of hours for stompclt to clean up /usr/local - it was altogether around 21 GB in 18M files. Clearly this workload is probably too big for stompclt to handle, so I have now started 3 stompclt processes each pointing to a different broker (netmon-mb is HA cluster with 3 nodes, so we now publish to each one separately), but I’m not sure it will help.

/dev/vdb hosting /usr/local is performing well, but the workload clearly too high (attaching graphs, 800 IOPS sustained with 1.6 MB/s - lots of small files to read).

I think we need to definitely add more memory (to 16 GB at least) as we have also issues with RSV and either add an SSD (which could be taken from psds0 where now it’s likely not needed) or re-write activemq probe to avoid using filesystem completely.</pre></div><div class='update_description'><i onclick="document.location='36462#1521359950'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-18T07:59:10+00:00">Mar 18, 2018 07:59 AM UTC</time> by <b>marian.babik@....</b><a class="anchor" name="1521359950">&nbsp;</a></div><pre>I have stopped RSV, cleaned up some of the files in /usr/local and now waiting for stompclt to clean up the rest of the directory.

Adding more inodes won’t solve the IOwait issue, so having SSD on psrsv would be preferable. Btw. ActiveMQ is no longer critical for getting data to UC ES, so we don’t have data loss as long as RabbitMQ is working fine.</pre></div><div class='update_description'><i onclick="document.location='36462#1521326539'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-17T22:42:19+00:00">Mar 17, 2018 10:42 PM UTC</time><a class="anchor" name="1521326539">&nbsp;</a></div><pre>The psrsv.grid.iu.edu node is now critical.   We have stopped getting perfSONAR data.

<a href='https&#58;//psetf.grid.iu.edu/etf/check_mk/index.py?start_url=%2Fetf%2Fcheck_mk%2Fview.py%3Ffilled_in%3Dfilter%26host%3Dpsrsv%26view_name%3Dhost' target='_blank' rel='nofollow'>https&#58;//psetf.grid.iu.edu/etf/check_mk/index.py?start_url=%2Fetf%2Fcheck_mk%2Fview.py%3Ffilled_in%3Dfilter%26host%3Dpsrsv%26view_name%3Dhost</a>

The load is around 100 right now.  I believe the /usr/local area is the root of the problem.  Currently it shows&#58;

CRIT	fs_/usr/local	Open the action menuThis service is stale, no data has been received within the last 1.5 check periods	CRIT - 15.4% used (42.46 of 274.91 GB), trend&#58; +8.91 GB / 24 hours, inodes available&#58; 0k/0.00% - less than 5.00% inodes availableCRIT

On the node I see&#58;

[0] 22&#58;35&#58;23 UTC [root@psrsv&#58;~]# df -i
Filesystem               Inodes    IUsed      IFree IUse% Mounted on
/dev/mapper/vg0-root    3203072    83718    3119354    3% /
tmpfs                   1007284        1    1007283    1% /dev/shm
/dev/vda1                 65536       50      65486    1% /boot
/dev/mapper/vg0-home     198800      143     198657    1% /home
/dev/mapper/vg0-opt      131072    35100      95972   27% /opt
/dev/mapper/vg0-tmp       65536       16      65520    1% /tmp
/dev/vdb1              18310656 18310656          0  100% /usr/local

So all inodes are consumed.

The stompctl and simplevisor processes have stopped, presumably because of the lack of inodes.   This is bad timing coming just before the OSG AHM meeting where we want to show data.   Can we  stop all services on psrsv, copy the /usr/local data someplace for safekeeping, reformat /usr/local with at least 8 times more inodes, restore the data to /usr/local and restart the services?

Shawn

Shawn

by smckee@....</pre></div><div class='update_description'><i onclick="document.location='36462#1521213966'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-16T15:26:06+00:00">Mar 16, 2018 03:26 PM UTC</time><a class="anchor" name="1521213966">&nbsp;</a></div><pre>Hi Tom, Scott,

Do we have SSD space available on psvm01 for the psrsv.grid.iu.edu VM ?   (Or problematic partitions on it at least)

After our refactoring and &#34;fix&#34; on the iptables connection tracking, the I/O load from psrsv.grid.iu.edu is problematic.

See&#58;
<a href='https&#58;//myosg.grid.iu.edu/rgstatushistory/index?downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=7daysago&start_date=11%2F08%2F2017&end_type=now&end_date=11%2F08%2F2017&rg=on&rg_sel%5B%5D=432&gridtype=on&gridtype_1=on&active=on&active_value=1&disable_value=1' target='_blank' rel='nofollow'>https&#58;//myosg.grid.iu.edu/rgstatushistory/index?downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=7daysago&start_date=11%2F08%2F2017&end_type=now&end_date=11%2F08%2F2017&rg=on&rg_sel%5B%5D=432&gridtype=on&gridtype_1=on&active=on&active_value=1&disable_value=1</a>

or

<a href='http&#58;//monitor.grid.iu.edu/availability/perfsonar.html' target='_blank' rel='nofollow'>http&#58;//monitor.grid.iu.edu/availability/perfsonar.html</a>

I believe we want to put psrsv on the SSD location if at all possible.   Giving it some more memory could help (via linux caching) as well.   Comments or suggestions?
Thanks,

Shawn

by smckee@....</pre></div><div class='update_description'><i onclick="document.location='36462#1521202395'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-16T12:13:15+00:00">Mar 16, 2018 12:13 PM UTC</time> by <b>marian.babik@....</b><a class="anchor" name="1521202395">&nbsp;</a></div><pre>I have restarted publishing and it appears to have recovered, so the immediate issue is now fixed, however IO wait is still significant which will have an impact on the services running on this VM. We’ll need to understand how we could improve this as any sudden IO spike will likely cause issues in the near future.</pre></div><div class='update_description'><i onclick="document.location='36462#1521194275'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2018-03-16T09:57:55+00:00">Mar 16, 2018 09:57 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1521194275">&nbsp;</a></div><pre>We received an alarm that publishing to ActiveMQ has stopped, investigation shows that this is because access to /usr/local/ is slow, the overall IOwait for the machine is reaching 50%. This started 2 days ago as seen from this graph&#58;
<a href='https&#58;//psetf.grid.iu.edu/etf/pnp4nagios/index.php/zoom?host=psrsv&srv=CPU_utilization&view=2&source=2&end=1521193411&start=1520563411&graph_width=500&graph_height=100' target='_blank' rel='nofollow'>https&#58;//psetf.grid.iu.edu/etf/pnp4nagios/index.php/zoom?host=psrsv&srv=CPU_utilization&view=2&source=2&end=1521193411&start=1520563411&graph_width=500&graph_height=100</a>

Spike in read IOPS occurred around the same time and continues&#58;
<a href='https&#58;//psetf.grid.iu.edu/etf/pnp4nagios/index.php/zoom?host=psrsv&srv=Disk_IO_SUMMARY&view=2&source=8&end=1521193518&start=1520563518&graph_width=500&graph_height=100' target='_blank' rel='nofollow'>https&#58;//psetf.grid.iu.edu/etf/pnp4nagios/index.php/zoom?host=psrsv&srv=Disk_IO_SUMMARY&view=2&source=8&end=1521193518&start=1520563518&graph_width=500&graph_height=100</a>

It could be related to <a href='36427.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/36427</a>

by Marian Babik (guest)</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F36462">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 36462});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
