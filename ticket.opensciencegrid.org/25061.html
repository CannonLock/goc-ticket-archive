<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[25061] No glideins being started for nova at Harvard/OSC</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=25061" method="post">
<div class="page-header">
    <h3><span class="muted">25061</span> / No glideins being started for nova at Harvard/OSC</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Neha Sharma</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">HU_ATLAS_Tier2</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Neha Sharma</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-05-14</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG Glidein Factory Support <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/25061", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/25061?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/25061?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20No%20glideins%20being%20started%20for%20nova%20at%20Harvard%2FOSC%20ISSUE%3D25061%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='25061#1431609141'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-14T13:12:21+00:00">May 14, 2015 01:12 PM UTC</time> by <b>echism</b><a class="anchor" name="1431609141">&nbsp;</a></div><pre>Closing this ticket, with the option to revisit this in the future.

Thanks all.</pre></div><div class='update_description'><i onclick="document.location='25061#1431559998'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-13T23:33:18+00:00">May 13, 2015 11:33 PM UTC</time><a class="anchor" name="1431559998">&nbsp;</a></div><pre>Thanks, Ken and Marty.  Sorry again for the delay in responding.  Besides our OSG upgrade troubles, we&#39;ve been preoccupied with a site-wide authentication denial of service.  But, that&#39;s great to know that our site is still configured for SL5 and we will certainly let you know when we upgrade those nodes to SL6.  Thanks.

Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dcaunt/CN=763648/CN=Daniel Caunt</pre></div><div class='update_description'><i onclick="document.location='25061#1431558534'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-13T23:08:54+00:00">May 13, 2015 11:08 PM UTC</time><a class="anchor" name="1431558534">&nbsp;</a></div><pre>I think we can close this for right now. If you do end up upgrading, just let someone on Nova know!

Thanks,

Ken

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='25061#1431546541'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-13T19:49:01+00:00">May 13, 2015 07:49 PM UTC</time><a class="anchor" name="1431546541">&nbsp;</a></div><pre>Dan, we do have Harvard configured as an SL5 site on the factory.

Amit, I&#39;m not sure how the SMU OS discussion [1] spilled over here, but we also have SMU down as an SL5 site.

If and when you do upgrade your sites to SL6, please let us know. We&#39;ll have to update the factory config to send the correct glideins your way.

Marty Kandes
UCSD Glidein Factory Operations

[1]
<a href='25279.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/25279</a>

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='25061#1431469213'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-12T22:20:13+00:00">May 12, 2015 10:20 PM UTC</time><a class="anchor" name="1431469213">&nbsp;</a></div><pre>Hi,

That is not true about the Nova code. It currently runs on both SL5 and SL6. At some point Nova does want to drop SL5 support though, so if things can be upgraded, it would be fine from Nova&#39;s perspective.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='25061#1431440278'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-12T14:17:58+00:00">May 12, 2015 02:17 PM UTC</time><a class="anchor" name="1431440278">&nbsp;</a></div><pre>Hi Ken,

I&#39;m glad to hear that we can use our SL5 resources for Nova.  I do hope that&#39;s the case.  When we were contacted about this recently, I got the following response from Arthur Kreymer&#58;

&#34;Color me confused.
It seems from <a href='https&#58;//ticket.grid.iu.edu/24354' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/24354</a>
that on March 23, NOvA glideins were set to run only under SLF5.
NOvA code runs only under SLF6.&#34;

This is in the following ticket thread&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=sc_req_item.do%3Fsys_id=afbce22d6f537900d6efce026e3ee47a%26sysparm_stack=sc_req_item_list.do%3Fsysparm_query=active=true' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=sc_req_item.do%3Fsys_id=afbce22d6f537900d6efce026e3ee47a%26sysparm_stack=sc_req_item_list.do%3Fsysparm_query=active=true</a>
Unfortunately, I don&#39;t have a login for that site so I can&#39;t see it there - I copy/pasted the content from an email notification I received from the thread.

Sorry for the delay with fixing CVMFS on the worker nodes.  We&#39;ve been very busy troubleshooting our low job volume with ATLAS.  I&#39;ll work on this very soon and keep you posted.

Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dcaunt/CN=763648/CN=Daniel Caunt</pre></div><div class='update_description'><i onclick="document.location='25061#1431115671'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-08T20:07:51+00:00">May 8, 2015 08:07 PM UTC</time><a class="anchor" name="1431115671">&nbsp;</a></div><pre>Hi,

There is no issue with Nova using SL5 resources. If there are any SL6 resources then of course Nova would like to use them as well. Presently the major issue is with CVMFS. Both nova.opensciencegrid.org and fermilab.opensciencegrid.org are not available on the worker nodes. We have a separate ticket open about that however&#58; <a href='25113.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/25113.</a>

Ken

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='25061#1431115044'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-08T19:57:24+00:00">May 8, 2015 07:57 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1431115044">&nbsp;</a></div><pre>Hi
Just a note that test jobs which I submitted under nova VO are very basic ( they just test if nova cvmfs repository is mounted). They are not &#39;real&#39; nova jobs.

- Neha</pre></div><div class='update_description'><i onclick="document.location='25061#1431112552'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-08T19:15:52+00:00">May 8, 2015 07:15 PM UTC</time><a class="anchor" name="1431112552">&nbsp;</a></div><pre>Hi everyone,

Sorry that I&#39;ve been offline for the last few days and am just catching up on this thread now.  We currently only have SL5 resources available and I believe someone told us before that NoVA jobs won&#39;t run on our SL5 resources.  Could this explain the current troubles that Neha is experiencing?  Also, we are still seeing job load issues since our OSG 3.2 upgrade.  Our ATLAS jobs are arriving at 1/10th the rate that they were prior to the upgrade, and it&#39;s still a mystery to us as to why that is.  Once we get our OSG 3.2 issues fixed, we&#39;ll be migrating to HTCondorCE and SLURM.  After that transition is complete, we should have SL6 resources available for NoVA jobs.

Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dcaunt/CN=763648/CN=Daniel Caunt</pre></div><div class='update_description'><i onclick="document.location='25061#1431108558'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-08T18:09:18+00:00">May 8, 2015 06:09 PM UTC</time><a class="anchor" name="1431108558">&nbsp;</a></div><pre>Hi Elizabeth,

I believe we&#39;re still waiting to hear back from Amit regarding access to the SL6 resources.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='25061#1431094042'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-08T14:07:22+00:00">May 8, 2015 02:07 PM UTC</time> by <b>echism</b><a class="anchor" name="1431094042">&nbsp;</a></div><pre>Should we close this, or continue to test?

Thank you</pre></div><div class='update_description'><i onclick="document.location='25061#1431028148'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-07T19:49:08+00:00">May 7, 2015 07:49 PM UTC</time><a class="anchor" name="1431028148">&nbsp;</a></div><pre>Hi,

My fresh jobs did run just now.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='25061#1431026020'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-07T19:13:40+00:00">May 7, 2015 07:13 PM UTC</time><a class="anchor" name="1431026020">&nbsp;</a></div><pre>Hi Amit,

Yes, we are indeed targeting smuosg1. If that resource is only SL5, then that explains everything. Nova would he happy to run on the SL6 resources as well. If we have the info we can get it set up.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='25061#1431025881'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-07T19:11:21+00:00">May 7, 2015 07:11 PM UTC</time><a class="anchor" name="1431025881">&nbsp;</a></div><pre>Hi Ken,

I believe you are targeting our SL5 resource smuosg1, SL6 resources has a different CE..I will update the details in a bit ...

Thank you,
Amit

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amit 953</pre></div><div class='update_description'><i onclick="document.location='25061#1431025873'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-07T19:11:13+00:00">May 7, 2015 07:11 PM UTC</time><a class="anchor" name="1431025873">&nbsp;</a></div><pre>Hi Ken,

I believe you are targeting our SL5 resource smuosg1, SL6 resources has a different CE..I will update the details in a bit ...

Thank you,
Amit

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Amit 953</pre></div><div class='update_description'><i onclick="document.location='25061#1431025486'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-07T19:04:46+00:00">May 7, 2015 07:04 PM UTC</time><a class="anchor" name="1431025486">&nbsp;</a></div><pre>Hi,

I&#39;ve just sent ten new jobs.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Kenneth Herner 1385</pre></div><div class='update_description'><i onclick="document.location='25061#1431022435'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-07T18:13:55+00:00">May 7, 2015 06:13 PM UTC</time><a class="anchor" name="1431022435">&nbsp;</a></div><pre>Hi all,

There still isn&#39;t much visible on the factory end when I investigated the logs for the glideins that ran Neha and Ken&#39;s test jobs a few days ago. However, there were a few strange bits&#58; missing shared libraries related to authentication [1], unusual condor startup messages that look like they are related to authentication [2], and the factory was sending an old version of condor in the glideins [3].

I&#39;ve updated our factory entries for the site to send in a more up-to-date glidein package (w/CONDOR_VERSION = &#34;8.2.x&#34;).

Neha and Ken, can you send another batch of test jobs through? Hopefully, these fresh glideins will do the trick. Also, can you let us know if you see your user test jobs complete successfully.

Thanks,

Marty Kandes
UCSD Glidein Factory Operations

[1]

setup_x509.f2amKi.sh&#58; OK
Signature OK for main&#58;setup_x509.f2amKi.sh.
grid-proxy-info&#58; error while loading shared libraries&#58; libcrypto.so.10&#58; cannot open shared object file&#58; No such file or directory
voms-proxy-info&#58; error while loading shared libraries&#58; libssl.so.10&#58; cannot open shared object file&#58; No such file or directory

check_proxy.f2amKi.sh&#58; OK
Signature OK for main&#58;check_proxy.f2amKi.sh.
grid-proxy-info&#58; error while loading shared libraries&#58; libcrypto.so.10&#58; cannot open shared object file&#58; No such file or directory
voms-proxy-info&#58; error while loading shared libraries&#58; libssl.so.10&#58; cannot open shared object file&#58; No such file or directory
date&#58; invalid date &#96;@&#39;
create_mapfile.f2amKi.sh&#58; OK
Signature OK for main&#58;create_mapfile.f2amKi.sh.
grid-proxy-info&#58; error while loading shared libraries&#58; libcrypto.so.10&#58; cannot open shared object file&#58; No such file or directory
voms-proxy-info&#58; error while loading shared libraries&#58; libssl.so.10&#58; cannot open shared object file&#58; No such file or directory
Using proxy file /scratch/glide_l25716/ticket/myproxy (OK)

[2]

/scratch/glide_l25716/main/condor_startup.sh&#58; line 291&#58; let&#58; X509_EXPIRE &#58; expression recursion level exceeded (error token is &#34;X509_EXPIRE &#34;)
max wall time, 84600
<div id='show_90825667' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_90825667'>job max time, 34800
calculated retire time, 49310
/scratch/glide_l25716/main/condor_startup.sh&#58; line 385&#58; [&#58; &#58; integer expression expected
used param retire spead, 1200
Retire time set to 48650
Die time set to 83450
/scratch/glide_l25716/main/condor_startup.sh&#58; line 427&#58; let&#58; session_duration=&#58; syntax error&#58; operand expected (error token is &#34;=&#34;)

[3]

05/06/15 15&#58;28&#58;30 (pid&#58;30450) ** $CondorVersion&#58; 8.0.5 Dec 02 2013 BuildID&#58; 212140 $

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049
</div><script type='text/javascript'>
        $('#show_90825667').click(function() {
            $('#detail_90825667').slideDown("normal");
            $('#show_90825667').hide();
            $('#hide_90825667').show();
        });
        $('#hide_90825667').click(function() {
            $('#detail_90825667').slideUp();
            $('#hide_90825667').hide();
            $('#show_90825667').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='25061#1430857753'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-05T20:29:13+00:00">May 5, 2015 08:29 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1430857753">&nbsp;</a></div><pre>Sure. I just submitted some.

- Neha</pre></div><div class='update_description'><i onclick="document.location='25061#1430850752'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-05T18:32:32+00:00">May 5, 2015 06:32 PM UTC</time><a class="anchor" name="1430850752">&nbsp;</a></div><pre>Hi Neha,

Can you send another set of Nova test jobs though the site? It should allow us to see if the glideins and/or user jobs are still failing to run. Of course, maybe what Dan is seeing is that there there simply isn&#39;t any Nova user job demand at the moment. In fact, I&#39;m not seeing any glideins running at any of the Nova-only sites.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='25061#1430849919'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-05T18:18:39+00:00">May 5, 2015 06:18 PM UTC</time><a class="anchor" name="1430849919">&nbsp;</a></div><pre>Hi all,

For completeness, below are some email exchanges between us and Dan the last few days ...

&#34;Hi,

I was directed to email here by the OSG GOC regarding a potential problem at our site (HU_ATLAS_Tier2, net2.rc.fas.harvard.edu) after upgrading to OSG 3.2.

We completed the OSG 3.2 upgrade yesterday around 5pm Eastern Time and since then our job activity has been unusually low.  We are receiving jobs and they seem to be completing successfully but the number of jobs is much lower than prior to the upgrade and the load on the worker nodes has been minimal.  Perhaps it just takes some time for the activity to pick up but I&#39;m wondering if you notice any glaring problems with the jobs at our site.  I haven&#39;t been able to find any error messages yet (on the CE or on the worker nodes) to indicate a definite problem.  I&#39;m simply concerned about the lower than usual activity.

Thanks in advance.

Dan

---
Daniel Caunt
Research Computing Associate
Harvard University
38 Oxford Street, Room 208
Cambridge, MA 02138
office&#58; 617-496-0042&#34;

&#34;Hi Dan,

From the factory perspective, it actually looks like no glideins have even attempted to run on your site since 4/30 (and before that, all that did attempt to run were going unmatched). All of the glidein logs just stop on 4/30 with nothing returned afterward. However, I&#39;m not seeing any sort of errors in any of the factory logs so unfortunately I can&#39;t offer you any ideas for what could be causing this after your upgrade.

--
Brendan Dennis
UCSD Glidein Factory Operations&#34;

&#34;Hi Brendan,

Thanks for looking into that for me.  Can you give me any ideas of what services to verify on my CE that could be causing the glideins problem?  Any help would be appreciated.

Thanks.
<div id='show_1142691140' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1142691140'>Dan&#34;

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049
</div><script type='text/javascript'>
        $('#show_1142691140').click(function() {
            $('#detail_1142691140').slideDown("normal");
            $('#show_1142691140').hide();
            $('#hide_1142691140').show();
        });
        $('#hide_1142691140').click(function() {
            $('#detail_1142691140').slideUp();
            $('#hide_1142691140').hide();
            $('#show_1142691140').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='25061#1430759162'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-05-04T17:06:02+00:00">May 4, 2015 05:06 PM UTC</time> by <b>echism</b><a class="anchor" name="1430759162">&nbsp;</a></div><pre>Daniel and Saul,

Fermifife glideins seem to be going held as follows&#58;

2313320.5   fefermifife     4/25 07&#58;31 Globus error 31&#58; the job manager failed to cancel the job as requested
2313343.8   fefermifife     4/27 19&#58;59 Globus error 121&#58; the job state file doesn&#39;t exist

Can you please look into it?

Thank you</pre></div><div class='update_description'><i onclick="document.location='25061#1430260573'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-28T22:36:13+00:00">Apr 28, 2015 10:36 PM UTC</time><a class="anchor" name="1430260573">&nbsp;</a></div><pre>Harvard admins,

Can you update us on the maintenance you may have performed recently? Specifically, anything that would have affected the gatekeeper [1]?

Thanks,

Marty Kandes
UCSD Glidein Factory Operations

[1]

net2.rc.fas.harvard.edu&#58;2119/jobmanager-lsf

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='25061#1430260340'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-28T22:32:20+00:00">Apr 28, 2015 10:32 PM UTC</time><a class="anchor" name="1430260340">&nbsp;</a></div><pre>Hi Neha,

Unfortunately, we&#39;re going to have to reopen this ticket. We&#39;re observing all glideins currently being held with the hold reasons [1]. Yesterday, it looks like some glideins did run, but went entirely unmatched [2]. I&#39;ve gone ahead and cleared out all of the held glideins. Hopefully, this should clear the way for new ones to startup and we can observe the failure modes again in case anything with the front-end or site-specific configuration has changed in the last few days. Can you look into this again from the front-end when you have a chance? I don&#39;t think this is a site specific-issue. I&#39;ve just been seeing too many problems with fefermifife glideins at other sites these past few weeks.

Marty Kandes

[1]

2313320.5   fefermifife     4/25 07&#58;31 Globus error 31&#58; the job manager failed to cancel the job as requested
2313343.8   fefermifife     4/27 19&#58;59 Globus error 121&#58; the job state file doesn&#39;t exist

[2]
<a href='http&#58;//glidein.grid.iu.edu/factory/monitor/factoryStatus.html?entry=Nova_US_Harvard_net2' target='_blank' rel='nofollow'>http&#58;//glidein.grid.iu.edu/factory/monitor/factoryStatus.html?entry=Nova_US_Harvard_net2</a>
<a href='http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=Nova_US_Harvard_net2' target='_blank' rel='nofollow'>http&#58;//gfactory-1.t2.ucsd.edu/factory/monitor/factoryStatus.html?entry=Nova_US_Harvard_net2</a>

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='25061#1429888047'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-24T15:07:27+00:00">Apr 24, 2015 03:07 PM UTC</time> by <b>echism</b><a class="anchor" name="1429888047">&nbsp;</a></div><pre>Closing this as requested.</pre></div><div class='update_description'><i onclick="document.location='25061#1429887937'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-24T15:05:37+00:00">Apr 24, 2015 03:05 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1429887937">&nbsp;</a></div><pre>Hi

An update -- my test jobs submitted to Harvard and OSC have now run. Perhaps sites were too busy or undergoing maintenance...
I am ok with closing this ticket
- Neha</pre></div><div class='update_description'><i onclick="document.location='25061#1429811546'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-23T17:52:26+00:00">Apr 23, 2015 05:52 PM UTC</time><a class="anchor" name="1429811546">&nbsp;</a></div><pre>Hi Harvard admins,

We&#39;ve been observing Fermilab Nova glideins going held and/or unmatched with user jobs at the gatekeeper [1] due to what appears to be an issue with x509 certificate authentication [2]. I noticed you&#39;re currently performing maintenance on your other gatekeeper [3]. Perhaps this authentication issue is related to the build out of the other gatekeeper? Below I&#39;ve also included the pilot proxy information [4] for the Nova glideins. Can you please have someone look into this issue when you get the chance?

Thanks,

Marty Kandes
UCSD Glidein Factory Operations

[1]

net2.rc.fas.harvard.edu

[2]

setup_x509.ecacxF.sh&#58; OK
Signature OK for main&#58;setup_x509.ecacxF.sh.
WARNING - Could not find CA certificates!
Looked in&#58;
$X509_CERT_DIR ()
$HOME/.globus/certificates/ (/n/feldman_lab/home/novaprod/.globus/certificates/)
/etc/grid-security/certificates/        $GLOBUS_LOCATION/share/certificates/ (/usr/share/certificates/)
$X509_CADIR ()
grid-proxy-init command not found in path!
voms-proxy-init command not found in path!
Not all x509 commands found in path (2 missing)!
/scratch/glide_h19669/main/setup_x509.sh&#58; line 220&#58; grid-proxy-info&#58; command not found
/scratch/glide_h19669/main/setup_x509.sh&#58; line 224&#58; voms-proxy-info&#58; command not found

[3]

net3.rc.fas.harvard.edu

[4]

<div id='show_1451109699' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1451109699'>subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov/CN=proxy
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov
identity  &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /var/lib/gwms-factory/client-proxies/user_fefermifife/glidein_gfactory_instance/credential_fifebatchgpvmhead1_OSG_gWMSFrontend.OSG_nova_714925
timeleft  &#58; 264&#58;04&#58;37
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO fermilab extension information ===
VO        &#58; fermilab
subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=voms1.fnal.gov
attribute &#58; /fermilab/nova/Role=pilot/Capability=NULL
attribute &#58; /fermilab/annie/Role=NULL/Capability=NULL
attribute &#58; /fermilab/argoneut/Role=NULL/Capability=NULL
attribute &#58; /fermilab/cdms/Role=NULL/Capability=NULL
attribute &#58; /fermilab/chips/Role=NULL/Capability=NULL
attribute &#58; /fermilab/coupp/Role=NULL/Capability=NULL
attribute &#58; /fermilab/darkside/Role=NULL/Capability=NULL
attribute &#58; /fermilab/genie/Role=NULL/Capability=NULL
attribute &#58; /fermilab/gm2/Role=NULL/Capability=NULL
attribute &#58; /fermilab/grid/Role=NULL/Capability=NULL
attribute &#58; /fermilab/lar1/Role=NULL/Capability=NULL
attribute &#58; /fermilab/lar1nd/Role=NULL/Capability=NULL
attribute &#58; /fermilab/lariat/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/accel/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/gm2/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/lbne/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/mu2e/Role=NULL/Capability=NULL
attribute &#58; /fermilab/minerva/Role=NULL/Capability=NULL
attribute &#58; /fermilab/miniboone/Role=NULL/Capability=NULL
attribute &#58; /fermilab/minos/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mu2e/Role=NULL/Capability=NULL
attribute &#58; /fermilab/nova/Role=NULL/Capability=NULL
attribute &#58; /fermilab/Role=NULL/Capability=NULL
attribute &#58; /fermilab/numix/Role=NULL/Capability=NULL
attribute &#58; /fermilab/patriot/Role=NULL/Capability=NULL
attribute &#58; /fermilab/seaquest/Role=NULL/Capability=NULL
attribute &#58; /fermilab/uboone/Role=NULL/Capability=NULL
timeleft  &#58; 20&#58;04&#58;37
uri       &#58; voms1.fnal.gov&#58;15001

subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov/CN=proxy
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov
identity  &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov
type      &#58; proxy
strength  &#58; 1024 bits
path      &#58; /var/lib/gwms-factory/client-proxies/user_fefermifife/glidein_gfactory_instance/credential_fifebatchgpvmhead2_OSG_gWMSFrontend.OSG_nova_714925
timeleft  &#58; 264&#58;02&#58;43
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO fermilab extension information ===
VO        &#58; fermilab
subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=frontend/fifebatch.fnal.gov
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=voms2.fnal.gov
attribute &#58; /fermilab/nova/Role=pilot/Capability=NULL
attribute &#58; /fermilab/annie/Role=NULL/Capability=NULL
attribute &#58; /fermilab/argoneut/Role=NULL/Capability=NULL
attribute &#58; /fermilab/cdms/Role=NULL/Capability=NULL
attribute &#58; /fermilab/chips/Role=NULL/Capability=NULL
attribute &#58; /fermilab/coupp/Role=NULL/Capability=NULL
attribute &#58; /fermilab/darkside/Role=NULL/Capability=NULL
attribute &#58; /fermilab/genie/Role=NULL/Capability=NULL
attribute &#58; /fermilab/gm2/Role=NULL/Capability=NULL
attribute &#58; /fermilab/grid/Role=NULL/Capability=NULL
attribute &#58; /fermilab/lar1/Role=NULL/Capability=NULL
attribute &#58; /fermilab/lar1nd/Role=NULL/Capability=NULL
attribute &#58; /fermilab/lariat/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/accel/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/gm2/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/lbne/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mars/mu2e/Role=NULL/Capability=NULL
attribute &#58; /fermilab/minerva/Role=NULL/Capability=NULL
attribute &#58; /fermilab/miniboone/Role=NULL/Capability=NULL
attribute &#58; /fermilab/minos/Role=NULL/Capability=NULL
attribute &#58; /fermilab/mu2e/Role=NULL/Capability=NULL
attribute &#58; /fermilab/nova/Role=NULL/Capability=NULL
attribute &#58; /fermilab/Role=NULL/Capability=NULL
attribute &#58; /fermilab/numix/Role=NULL/Capability=NULL
attribute &#58; /fermilab/patriot/Role=NULL/Capability=NULL
attribute &#58; /fermilab/seaquest/Role=NULL/Capability=NULL
attribute &#58; /fermilab/uboone/Role=NULL/Capability=NULL
timeleft  &#58; 20&#58;02&#58;43
uri       &#58; voms2.fnal.gov&#58;15001

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049
</div><script type='text/javascript'>
        $('#show_1451109699').click(function() {
            $('#detail_1451109699').slideDown("normal");
            $('#show_1451109699').hide();
            $('#hide_1451109699').show();
        });
        $('#hide_1451109699').click(function() {
            $('#detail_1451109699').slideUp();
            $('#hide_1451109699').hide();
            $('#show_1451109699').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='25061#1429806687'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-23T16:31:27+00:00">Apr 23, 2015 04:31 PM UTC</time><a class="anchor" name="1429806687">&nbsp;</a></div><pre>Hi Neha,

I&#39;ll have a look at this today. Be in touch soon.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='25061#1429799967'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-23T14:39:27+00:00">Apr 23, 2015 02:39 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1429799967">&nbsp;</a></div><pre>Just an update that Job at Harvard has run. One submitted to OSC is still idle

- Neha</pre></div><div class='update_description'><i onclick="document.location='25061#1429767441'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-23T05:37:21+00:00">Apr 23, 2015 05:37 AM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1429767441">&nbsp;</a></div><pre>Jobs are still idle.
Please investigate.

Thanks
- Neha</pre></div><div class='update_description'><i onclick="document.location='25061#1429716054'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-04-22T15:20:54+00:00">Apr 22, 2015 03:20 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1429716054">&nbsp;</a></div><pre>Hi GOC factory support
Could you please look in to why no glideins are being submitted for nova at Harvard and OSC sites?
I have had jobs in queue requesting these since 9.32 pm last night

frontend log entries&#58;

[2015-04-22 10&#58;01&#58;29,878] INFO&#58;   910( 1819   910   910     0)     0(    0 10000) |     0     0     0 |   100   911 Up   Nova_US_Harvard_net2@gfactory_instance@OSGGOC@....
[2015-04-22 10&#58;01&#58;29,879] INFO&#58;     1(    2     1     1     0)     0(    0 10000) |     0     0     0 |     1     2 Up   Nova_US_OSC_osg@gfactory_instance@OSGGOC@....

It could be that sites are just too busy, but I am not sure.
Let me know if I should provide any other info to help debug this.

Thanks
- Neha</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F25061">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 25061});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
