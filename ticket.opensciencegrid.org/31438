<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[31438] Wisconsin nodes&#39; host description doesn&#39;t match OIM - any reason for that?</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=31438" method="post">
<div class="page-header">
    <h3><span class="muted">31438</span> / Wisconsin nodes&#39; host description doesn&#39;t match OIM - any reason for that?</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Shreyas Bhat</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">CHTC and BATLAB OSG Mirror</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">GLOW</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Shreyas Bhat</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">GLOW-TECH</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-04-21</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">GLOW-TECH <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/31438", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/31438?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/31438?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Wisconsin%20nodes%26%2339%3B%20host%20description%20doesn%26%2339%3Bt%20match%20OIM%20-%20any%20reason%20for%20that%3F%20ISSUE%3D31438%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='31438#1492789818'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-21T15:50:18+00:00">Apr 21, 2017 03:50 PM UTC</time> by <b>echism</b><a class="anchor" name="1492789818">&nbsp;</a></div><pre>Thanks Brian! I know this is every-workshop-ever season, no worries.</pre></div><div class='update_description'><i onclick="document.location='31438#1492621472'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-19T17:04:32+00:00">Apr 19, 2017 05:04 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1492621472">&nbsp;</a></div><pre>Elizabeth,

Yea, go ahead, I think this is done. Sorry for the radio silence, this fell off the cliff of my priority list &#58;(

- Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1492620543'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-19T16:49:03+00:00">Apr 19, 2017 04:49 PM UTC</time> by <b>echism</b><a class="anchor" name="1492620543">&nbsp;</a></div><pre>Should I close this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='31438#1492448609'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-17T17:03:29+00:00">Apr 17, 2017 05:03 PM UTC</time> by <b>echism</b><a class="anchor" name="1492448609">&nbsp;</a></div><pre>Hey Brian,

Can you revisit this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='31438#1491853359'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-10T19:42:39+00:00">Apr 10, 2017 07:42 PM UTC</time> by <b>echism</b><a class="anchor" name="1491853359">&nbsp;</a></div><pre>Hey Brian,

Can you revisit this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='31438#1491411567'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-05T16:59:27+00:00">Apr 5, 2017 04:59 PM UTC</time> by <b>echism</b><a class="anchor" name="1491411567">&nbsp;</a></div><pre>Hey Brian,

Did you see that last question?

Thanks</pre></div><div class='update_description'><i onclick="document.location='31438#1491250887'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-04-03T20:21:27+00:00">Apr 3, 2017 08:21 PM UTC</time><a class="anchor" name="1491250887">&nbsp;</a></div><pre>I just ran another test, and it looks like the only records that aren&#39;t getting matched are the ones with Host_description GZK.  Brian - just to confirm, for this case, you said that this is not getting populated by the Frontend?

Thanks!
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1490990964'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-31T20:09:24+00:00">Mar 31, 2017 08:09 PM UTC</time> by <b>echism</b><a class="anchor" name="1490990964">&nbsp;</a></div><pre>Got it!

Thanks for the update.</pre></div><div class='update_description'><i onclick="document.location='31438#1490816297'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-29T19:38:17+00:00">Mar 29, 2017 07:38 PM UTC</time><a class="anchor" name="1490816297">&nbsp;</a></div><pre>Brian is right - the ball is in my court at the moment.   If his point about the factory setting the Host_description is correct, then there&#39;s no reason to keep this ticket open, and I&#39;ll open one with factory ops to look at that.

I&#39;m currently finishing up some other stuff, but I was planning on looking into this early next week and running some tests. Will that be okay, Elizabeth?

-Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1490812015'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-29T18:26:55+00:00">Mar 29, 2017 06:26 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1490812015">&nbsp;</a></div><pre>This is in Shreyas&#39; court. I don&#39;t think there are any more configuration issues on our end.</pre></div><div class='update_description'><i onclick="document.location='31438#1490811400'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-29T18:16:40+00:00">Mar 29, 2017 06:16 PM UTC</time> by <b>echism</b><a class="anchor" name="1490811400">&nbsp;</a></div><pre>What needs to be done on this ticket?</pre></div><div class='update_description'><i onclick="document.location='31438#1490047581'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-20T22:06:21+00:00">Mar 20, 2017 10:06 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1490047581">&nbsp;</a></div><pre>Shreyas,

Sorry for the late reply but I just found time to take a look at this. I think you&#39;re right that the unmapped Host_descriptions (GZK, osgconnect, xsede-osg) are because of missing resources in OIM. Since these there isn&#39;t a 1&#58;1 relationship between the ProbeName and Host_description, I don&#39;t think the Host_descriptions are being filled by the frontend like what we were seeing previously in this ticket. I believe this means that the Host_description is being populated by the factories submitting jobs to one of Wisconsin&#39;s CEs.

- Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1488215161'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-27T17:06:01+00:00">Feb 27, 2017 05:06 PM UTC</time> by <b>echism</b><a class="anchor" name="1488215161">&nbsp;</a></div><pre>Hey all,

Anything new on this one?

Thank you</pre></div><div class='update_description'><i onclick="document.location='31438#1487624385'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-20T20:59:45+00:00">Feb 20, 2017 08:59 PM UTC</time> by <b>echism</b><a class="anchor" name="1487624385">&nbsp;</a></div><pre>Who has an update?

Shreyas, we used to have a node called osg-xsede at Indiana, it was later supplanted by xd-login. I&#39;m not sure what to make of these records, so please disregard if that is an unhelpful comment.

Thanks</pre></div><div class='update_description'><i onclick="document.location='31438#1487187647'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-15T19:40:47+00:00">Feb 15, 2017 07:40 PM UTC</time> by <b>echism</b><a class="anchor" name="1487187647">&nbsp;</a></div><pre>Hey Brian,

What&#39;s new with this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='31438#1486744838'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-10T16:40:38+00:00">Feb 10, 2017 04:40 PM UTC</time> by <b>echism</b><a class="anchor" name="1486744838">&nbsp;</a></div><pre>Is there anything new on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='31438#1486587204'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-08T20:53:24+00:00">Feb 8, 2017 08:53 PM UTC</time><a class="anchor" name="1486587204">&nbsp;</a></div><pre>Brian,

Done.  The file is called testOIMTopology_2017-02-08.txt and is actually a CSV.  Please let me know if I can help in any other way.

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1486586832'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-08T20:47:12+00:00">Feb 8, 2017 08:47 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1486586832">&nbsp;</a></div><pre>Shreyas,

Yea, go ahead and attach the output file.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1486586160'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-08T20:36:00+00:00">Feb 8, 2017 08:36 PM UTC</time><a class="anchor" name="1486586160">&nbsp;</a></div><pre>Hi all,

It looks like the only host descriptions that aren&#39;t matching are GZK, osgconnect, and xsede-osg, all at the WIPAC site.  I think those aren&#39;t matching because they&#39;re not registered in OIM as far as I can see (<a href='https&#58;//oim.grid.iu.edu/oim/topology?facility_id=10011' target='_blank' rel='nofollow'>https&#58;//oim.grid.iu.edu/oim/topology?facility_id=10011</a>).  Does that sound right?

Would it help if I attached the output file here?

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1486586152'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-08T20:35:52+00:00">Feb 8, 2017 08:35 PM UTC</time><a class="anchor" name="1486586152">&nbsp;</a></div><pre>Hi all,

It looks like the only host descriptions that aren&#39;t matching are GZK, osgconnect, and xsede-osg, all at the WIPAC site.  I think those aren&#39;t matching because they&#39;re not registered in OIM as far as I can see (<a href='https&#58;//oim.grid.iu.edu/oim/topology?facility_id=10011' target='_blank' rel='nofollow'>https&#58;//oim.grid.iu.edu/oim/topology?facility_id=10011</a>).  Does that sound right?

Would it help if I attached the output file here?

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1486395900'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-06T15:45:00+00:00">Feb 6, 2017 03:45 PM UTC</time><a class="anchor" name="1486395900">&nbsp;</a></div><pre>Sure - I&#39;ll run those in a bit and let you know what I see.

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1486141129'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-03T16:58:49+00:00">Feb 3, 2017 04:58 PM UTC</time><a class="anchor" name="1486141129">&nbsp;</a></div><pre>Perhaps;  Shreyas, would you mind running your query again to see if any of our resources are not yet compliant?

-Aaron Moate
CHTC Infrastructure Team

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Aaron Moate 894</pre></div><div class='update_description'><i onclick="document.location='31438#1486131825'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-03T14:23:45+00:00">Feb 3, 2017 02:23 PM UTC</time> by <b>echism</b><a class="anchor" name="1486131825">&nbsp;</a></div><pre>Aaron,

All set?

Thanks</pre></div><div class='update_description'><i onclick="document.location='31438#1485965832'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-01T16:17:12+00:00">Feb 1, 2017 04:17 PM UTC</time> by <b>moate@....</b><a class="anchor" name="1485965832">&nbsp;</a></div><pre>Elizabeth,

I think I&#39;m the the holdout here;  I&#39;ll try to take
care of the remaining ATLAS node today so we can finally
close this ticket.

-Aaron Moate

On Wed, Feb 01, 2017 at 02&#58;54&#58;00PM +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62;    [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='31438#1485960839'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-01T14:53:59+00:00">Feb 1, 2017 02:53 PM UTC</time> by <b>echism</b><a class="anchor" name="1485960839">&nbsp;</a></div><pre>Hey all,

Anything new on this?

Thanks</pre></div><div class='update_description'><i onclick="document.location='31438#1485203069'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-23T20:24:29+00:00">Jan 23, 2017 08:24 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1485203069">&nbsp;</a></div><pre>Elizabeth,

Not yet, unfortunately! We still need to fix the problem on atlas02.chtc.wisc.edu and our admins will be looking into it. Thanks for keeping us on our toes.

Cheers,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1485202672'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-23T20:17:52+00:00">Jan 23, 2017 08:17 PM UTC</time> by <b>echism</b><a class="anchor" name="1485202672">&nbsp;</a></div><pre>Is this all set?

Thanks</pre></div><div class='update_description'><i onclick="document.location='31438#1484758573'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-18T16:56:13+00:00">Jan 18, 2017 04:56 PM UTC</time> by <b>GLOW-TECH</b><a class="anchor" name="1484758573">&nbsp;</a></div><pre>The configuration of uwlogin.cern.ch has now been updated.

--Dan

On 1/17/17 4&#58;44 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='31438#1484693054'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-17T22:44:14+00:00">Jan 17, 2017 10:44 PM UTC</time> by <b>GLOW-TECH</b><a class="anchor" name="1484693054">&nbsp;</a></div><pre>uwlogin.cern.ch is a UW HEP submit node at CERN.  I&#39;m looking into it.

--Dan</pre></div><div class='update_description'><i onclick="document.location='31438#1484692218'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-17T22:30:18+00:00">Jan 17, 2017 10:30 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1484692218">&nbsp;</a></div><pre>I&#39;m going to remove HEP and IceCube admins from this ticket since they&#39;ve fixed the issues on their end. Thanks guys!

Leaving CHTC admins on the hook here because I&#39;ll need their help tracking down the uwlogin.cern.ch and atlas02.chtc.wisc.edu admins.</pre></div><div class='update_description'><i onclick="document.location='31438#1484691816'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-17T22:23:36+00:00">Jan 17, 2017 10:23 PM UTC</time><a class="anchor" name="1484691816">&nbsp;</a></div><pre>Just looked again for 2016-01-14 through now.  We&#39;re still seeing 99%+ success, and there are fewer failures (76 out of 10k).  GLOW and CHTC are the sites on the failed records.  Here are two examples&#58;

#RecordID	ResourceType	ProbeName	Raw_SiteName	Host_description	Host	ResourceGroup	OIM_SiteName	SuccessfulMatch#
uwlogin.cern.ch&#58;703353.7	Payload	condor&#58;uwlogin.cern.ch	GLOW	g18n01.hep.wisc.edu	g18n01.hep.wisc.edu (primary)			Failure
atlas02.chtc.wisc.edu&#58;2898602.1	Payload	condor&#58;atlas02.chtc.wisc.edu	CHTC	Local Job	atlas64.chtc.wisc.edu (primary)			Failure

Please let me know if I should post the full CSV file like before.

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1484690219'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-17T21:56:59+00:00">Jan 17, 2017 09:56 PM UTC</time> by <b>echism</b><a class="anchor" name="1484690219">&nbsp;</a></div><pre>Hello! It&#39;s Tuesday. How are things looking, Shreyas?</pre></div><div class='update_description'><i onclick="document.location='31438#1484341386'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-13T21:03:06+00:00">Jan 13, 2017 09:03 PM UTC</time><a class="anchor" name="1484341386">&nbsp;</a></div><pre>We&#39;re getting way closer (99% success when sampling 10k records since Gonzalo posted).  I&#39;ve posted the latest results in the ticket.

If you don&#39;t want to go through all of those jobs, here&#39;s what it looks like to me.  There is a batch of CHTC jobs that still are showing &#34;Local Job&#34; [1], and a small batch of WIPAC jobs that are still giving the host as the host description [2].  Examples are below&#58;

[1]&#58;
RecordID	ResourceType	ProbeName	Raw_SiteName	Host_description	Host	ResourceGroup	OIM_SiteName	SuccessfulMatch
atlas02.chtc.wisc.edu&#58;2755850.2	Payload	condor&#58;atlas02.chtc.wisc.edu	CHTC	Local Job	atlas85.chtc.wisc.edu (primary)			Failure

[2]&#58;
sub-1.icecube.wisc.edu&#58;10913.109	Payload	condor&#58;sub-1.icecube.wisc.edu	WIPAC	g29n25.hep.wisc.edu	g29n25.hep.wisc.edu (primary)			Failure

Perhaps these are just old records that got sent after the update was made, but before the changes take effect?  I can rerun the tests on Tuesday for records that came in over the weekend to see if those go away.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1484237888'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-12T16:18:08+00:00">Jan 12, 2017 04:18 PM UTC</time><a class="anchor" name="1484237888">&nbsp;</a></div><pre>Great!  I&#39;ll go ahead and run some tests later today or early tomorrow to make sure the records are coming through correctly.

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1484175693'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-11T23:01:33+00:00">Jan 11, 2017 11:01 PM UTC</time><a class="anchor" name="1484175693">&nbsp;</a></div><pre>Hello,

Apologies for the long delay on this from the Icecube side... I have just applied the suggested changes to our gratia probe configurations.

If you can confirm that the changes are doing what is expected on your side, that will be useful.

thanks!
Gonzalo

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Gonzalo Merino 1270</pre></div><div class='update_description'><i onclick="document.location='31438#1484089582'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-10T23:06:22+00:00">Jan 10, 2017 11:06 PM UTC</time> by <b>echism</b><a class="anchor" name="1484089582">&nbsp;</a></div><pre>Is there anything new on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='31438#1483732981'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-06T20:03:01+00:00">Jan 6, 2017 08:03 PM UTC</time><a class="anchor" name="1483732981">&nbsp;</a></div><pre>Brian is right - the ticket isn&#39;t 100% done.  My tests show that what&#39;s failing to match is mostly ice cube if I check for 2017.  By the way - is that valid, Brian, to check records after 2017-01-01, or should I use some later date?

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1483732043'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-06T19:47:23+00:00">Jan 6, 2017 07:47 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1483732043">&nbsp;</a></div><pre>We&#39;re still waiting on IceCube, you can see the hostname records in the &#34;WallHoursSpentOnJobsByFacility&#34; graph [1]. We could take that off-ticket if Shreyas, others would like but I don&#39;t believe this ticket is 100% complete yet.

[1] <a href='https&#58;//gracc.opensciencegrid.org/dashboard/db/payload-jobs-summary?from=now-7d&to=now&var-VOName=All&var-Project=All&var-Facility=All&var-User=All&var-ExitCode=All&var-Probe=condor&#58' target='_blank' rel='nofollow'>https&#58;//gracc.opensciencegrid.org/dashboard/db/payload-jobs-summary?from=now-7d&to=now&var-VOName=All&var-Project=All&var-Facility=All&var-User=All&var-ExitCode=All&var-Probe=condor&#58</a>;sub-1.icecube.wisc.edu&var-Probe=condor&#58;sub-simprod.icecube.wisc.edu&var-interval=1d</pre></div><div class='update_description'><i onclick="document.location='31438#1483730902'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-06T19:28:22+00:00">Jan 6, 2017 07:28 PM UTC</time> by <b>echism</b><a class="anchor" name="1483730902">&nbsp;</a></div><pre>Should I close this, then?

Thanks</pre></div><div class='update_description'><i onclick="document.location='31438#1483722633'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-06T17:10:33+00:00">Jan 6, 2017 05:10 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1483722633">&nbsp;</a></div><pre>Dan,

Looking at the records that have been uploaded in the past day [1], things look exactly as expected. Thanks for helping us with this lengthy saga! I&#39;ve also submitted a pull request to change SUBMIT_EXPRS to SUBMIT_ATTRS [2].

Cheers,
Brian

[1] <a href='https&#58;//gracc.opensciencegrid.org/dashboard/db/payload-jobs-summary?var-VOName=All&var-Project=All&var-Facility=All&var-User=All&var-ExitCode=All&var-Probe=condor&#58' target='_blank' rel='nofollow'>https&#58;//gracc.opensciencegrid.org/dashboard/db/payload-jobs-summary?var-VOName=All&var-Project=All&var-Facility=All&var-User=All&var-ExitCode=All&var-Probe=condor&#58</a>;login01.hep.wisc.edu&var-Probe=condor&#58;login02.hep.wisc.edu&var-Probe=condor&#58;login03.hep.wisc.edu&var-Probe=condor&#58;login04.hep.wisc.edu&var-Probe=condor&#58;login05.hep.wisc.edu&var-Probe=condor&#58;login06.hep.wisc.edu&var-interval=1d

[2] <a href='https&#58;//github.com/opensciencegrid/gratia-probe/pull/13' target='_blank' rel='nofollow'>https&#58;//github.com/opensciencegrid/gratia-probe/pull/13</a></pre></div><div class='update_description'><i onclick="document.location='31438#1483637339'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-05T17:28:59+00:00">Jan 5, 2017 05:28 PM UTC</time><a class="anchor" name="1483637339">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; I&#39;d actually prefer if you set it back to &#34;Local Job&#34; so 1) we can test the change and 2) so that you&#39;re running a more standard configuration.</font>

We&#39;ll try it.  hep.wisc.edu is now using the default configuration for JOBGLIDEIN_ResourceName.

By the way&#58; I noticed that /etc/condor/config.d/99_gratia-gwms.conf installed by gratia-probe-glideinwms contains the following line&#58;

SUBMIT_EXPRS = $(SUBMIT_EXPRS) JOBGLIDEIN_ResourceName

The condor manual says SUBMIT_EXPRS is deprecated and that SUBMIT_ATTRS should be used instead.  No biggie.

--Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley</pre></div><div class='update_description'><i onclick="document.location='31438#1483635896'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-05T17:04:56+00:00">Jan 5, 2017 05:04 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1483635896">&nbsp;</a></div><pre>Dan,

You can keep the reference to &#34;GLOW&#34; in JOBGLIDEIN_ResourceName if you choose but setting it back to &#34;Local Job&#34; would still properly attribute your accounting records to GLOW through your ProbeConfig and OIM registration. I&#39;d actually prefer if you set it back to &#34;Local Job&#34; so 1) we can test the change and 2) so that you&#39;re running a more standard configuration.

Cheers,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1483635231'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-05T16:53:51+00:00">Jan 5, 2017 04:53 PM UTC</time><a class="anchor" name="1483635231">&nbsp;</a></div><pre>I believe that&#39;s right.  I&#39;ll go ahead and rerun my tests later today or early tomorrow and let you know what I find.

Thanks everyone!

Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1483632577'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-05T16:09:37+00:00">Jan 5, 2017 04:09 PM UTC</time><a class="anchor" name="1483632577">&nbsp;</a></div><pre>Gratia was updated yesterday at hep.wisc.edu.  SiteName was configured to match the resource name in OIM.

We left the JOBGLIDEIN_ResourceName configuration as is&#58;

&#34;$$([IfThenElse(IsUndefined(TARGET.GLIDEIN_ResourceName), IfThenElse(IsUndefined(TARGET.GLIDEIN_Site), &#92;&#34;GLOW&#92;&#34;, TARGET.GLIDEIN_Site), TARGET.GLIDEIN_ResourceName)])&#34;

Basically, instead of &#34;Local Job&#34;, it reports &#34;GLOW&#34;.  That seems right to us, but if it is causing trouble, please let us know.

--Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley</pre></div><div class='update_description'><i onclick="document.location='31438#1483555812'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-04T18:50:12+00:00">Jan 4, 2017 06:50 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1483555812">&nbsp;</a></div><pre>Dan,

gratia-probe-glideinwms pulls in gratia-probe-condor in addition to
supplying the configuration for JOBGLIDEIN_ResourceName and SUBMIT_EXPRS.

- Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1483554553'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-04T18:29:13+00:00">Jan 4, 2017 06:29 PM UTC</time> by <b>GLOW-TECH</b><a class="anchor" name="1483554553">&nbsp;</a></div><pre>Brian,

Should gratia-probe-glideinwms be installed in addition to or instead of
gratia-probe-condor?  What&#39;s the difference?

--Dan

On 1/4/17 11&#58;46 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='31438#1483552002'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-04T17:46:42+00:00">Jan 4, 2017 05:46 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1483552002">&nbsp;</a></div><pre>Dan&#58; Sorry for any confusion, I sent an e-mail late last month and I imagine it got lost in the holiday shuffle. In the e-mail, I asked you to test out a new version of the gratia-probe (1.17.2-1) for us because the fix we applied to your submit nodes was somewhat temporary and we wanted a more permanent solution baked into the packaging. See instructions below.

Vlad&#58; From the accounting page [1], it looks like you guys are still misreporting some payload records.

1. Install gratia-probe-glideinwms-1.17.2-1 out of testing&#58;

yum install gratia-probe-glideinwms --enablerepo=osg-testing

2. Verify the configuration value of JOBGLIDEIN_ResourceName&#58;

$ condor_config_val JOBGLIDEIN_ResourceName -v
JOBGLIDEIN_ResourceName = &#34;$$([IfThenElse(IsUndefined(TARGET.GLIDEIN_ResourceName), IfThenElse(IsUndefined(TARGET.GLIDEIN_Site), &#92;&#34;Local Job&#92;&#34;, TARGET.GLIDEIN_Site), TARGET.GLIDEIN_ResourceName)])&#34;
# at&#58; /etc/condor/config.d/99_gratia-gwms.conf, line 18
# raw&#58; JOBGLIDEIN_ResourceName = &#34;$$([IfThenElse(IsUndefined(TARGET.GLIDEIN_ResourceName), IfThenElse(IsUndefined(TARGET.GLIDEIN_Site), &#92;&#34;Local Job&#92;&#34;, TARGET.GLIDEIN_Site), TARGET.GLIDEIN_ResourceName)])&#34;

3. If you need to account for all jobs that run locally (e.g. all jobs submitted through HEP&#39;s submit nodes must be accounted for as GLOW jobs), skip to step 4. Otherwise set the value of &#39;SuppressGridLocalRecords&#39; in /etc/gratia/condor/ProbeConfig to &#34;1&#34;.

4. Verify that the value for &#39;SiteName&#39; in /etc/gratia/condor/ProbeConfig matches the Resource Name of the submit node registered in OIM [2]. For example, ProbeConfig&#39;s SiteName for sub-1.icecube.wisc.edu should be &#34;IceCube-submit-1&#34;.

[1] <a href='https&#58;//gracc.opensciencegrid.org/dashboard/db/payload-jobs-summary?var-VOName=All&var-Project=All&var-Facility=atlas36.chtc.wisc.edu&var-Facility=cs.wisc.edu&var-Facility=discovery.wisc.edu&var-User=All&var-ExitCode=All&var-Probe=condor&#58' target='_blank' rel='nofollow'>https&#58;//gracc.opensciencegrid.org/dashboard/db/payload-jobs-summary?var-VOName=All&var-Project=All&var-Facility=atlas36.chtc.wisc.edu&var-Facility=cs.wisc.edu&var-Facility=discovery.wisc.edu&var-User=All&var-ExitCode=All&var-Probe=condor&#58</a>;sub-1.icecube.wisc.edu&var-Probe=condor&#58;sub-simprod.icecube.wisc.edu&var-interval=1d&from=now-30d&to=now

[2] <a href='https&#58;//oim.opensciencegrid.org/oim/topology?facility_id=10011' target='_blank' rel='nofollow'>https&#58;//oim.opensciencegrid.org/oim/topology?facility_id=10011</a></pre></div><div class='update_description'><i onclick="document.location='31438#1483547269'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-04T16:27:49+00:00">Jan 4, 2017 04:27 PM UTC</time><a class="anchor" name="1483547269">&nbsp;</a></div><pre>Brian, what version do you need us to be running?  HEP is using gratia-probe-condor-1.17.0-2.6.osg33.el6.noarch.  From what I can tell, the data looks good.  Host names no longer show up in place of the site name.

--Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley</pre></div><div class='update_description'><i onclick="document.location='31438#1483546634'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-04T16:17:14+00:00">Jan 4, 2017 04:17 PM UTC</time> by <b>vladimir.brik@....</b><a class="anchor" name="1483546634">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Unfortunately we need Icecube and HEP to install the latest gratia-probe</font>
<font color='#7F7E6F'>&#62; to test our fix before we can close this.</font>
Could you send instructions please? I thought we did this, but the
person who takes care of gratia is on vacation so I can&#39;t confirm.

Vlad</pre></div><div class='update_description'><i onclick="document.location='31438#1483546071'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-04T16:07:51+00:00">Jan 4, 2017 04:07 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1483546071">&nbsp;</a></div><pre>Unfortunately we need Icecube and HEP to install the latest gratia-probe to test our fix before we can close this.</pre></div><div class='update_description'><i onclick="document.location='31438#1483473594'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-03T19:59:54+00:00">Jan 3, 2017 07:59 PM UTC</time> by <b>echism</b><a class="anchor" name="1483473594">&nbsp;</a></div><pre>Hello all,

This ticket is very stale. Is it ready to close?</pre></div><div class='update_description'><i onclick="document.location='31438#1482177397'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-19T19:56:37+00:00">Dec 19, 2016 07:56 PM UTC</time><a class="anchor" name="1482177397">&nbsp;</a></div><pre>I would not expect any such records to come from the two probes mentioned in the hep.wisc.edu domain (login01 and login05) after Dec 5 when these were fixed, so hopefully the small number of records reported were from Dec 5 prior to the fix being implemented.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley</pre></div><div class='update_description'><i onclick="document.location='31438#1482176052'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-19T19:34:12+00:00">Dec 19, 2016 07:34 PM UTC</time><a class="anchor" name="1482176052">&nbsp;</a></div><pre>Hi Brian,

Here they are (all records where Host_description = &#34;Local Job&#34; from 2016-12-05 onwards)&#58;

ProbeName    Count
condor&#58;submit-5.chtc.wisc.edu	1375754
condor&#58;submit-3.chtc.wisc.edu	820238
condor&#58;login06.hep.wisc.edu	38115
condor&#58;login05.hep.wisc.edu	79
condor&#58;login01.hep.wisc.edu	6

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1482175031'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-19T19:17:11+00:00">Dec 19, 2016 07:17 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1482175031">&nbsp;</a></div><pre>Shreyas,

For the &#39;Local Job&#39; records, could you give me a list of corresponding
probes so I can tell which submit nodes they&#39;re coming from?

Thanks,
Brian

On 12/19/2016 01&#58;09 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='31438#1482174567'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-19T19:09:27+00:00">Dec 19, 2016 07:09 PM UTC</time><a class="anchor" name="1482174567">&nbsp;</a></div><pre>Hi Brian,

The query is still showing a large number of bad records.  I&#39;ve attached my sample file to the ticket.  Most of the records we can&#39;t match have a host description of &#34;Local Job&#34;.

Here&#39;s a quick summary of the file I attached&#58;

Of 10000 sample records after 2016-12-05&#58;
Successful matches&#58;
Count    Host_description
111 GLOW
29 NPX
39 WIPAC

Failures (just a few)&#58;
Count    Host_description
9018 Local Job
1 c220g2-010618.wisc.cloudlab.us
1 c220g2-010620.wisc.cloudlab.us
1 c220g2-010624.wisc.cloudlab.us
3 c220g2-010629.wisc.cloudlab.us
2 c220g2-010632.wisc.cloudlab.us
1 c220g2-011019.wisc.cloudlab.us
1 c220g2-011020.wisc.cloudlab.us
1 c220g2-011022.wisc.cloudlab.us
2 c220g2-011025.wisc.cloudlab.us
2 c220g2-030631.wisc.cloudlab.us
1 c220g2-030632.wisc.cloudlab.us
217 cs.wisc.edu
15 discovery.wisc.edu
1 g18n01.hep.wisc.edu
3 g19n19.hep.wisc.edu
2 g19n21.hep.wisc.edu
5 g19n27.hep.wisc.edu
1 g19n28.hep.wisc.edu
3 g19n30.hep.wisc.edu
<div id='show_488595077' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_488595077'>
The percent of records like this does go down the more recent we go, though.  If I look for records after 12-15, for example, the same two lists look like this&#58;

Successful matches&#58;
3385 GLOW
16 NPX
312 WIPAC

Failures (complete list)&#58;
6273 Local Job
2 g18n01.hep.wisc.edu
1 g18n16.hep.wisc.edu
1 g19n09.hep.wisc.edu
1 g22n12.hep.wisc.edu
4 g28n07.hep.wisc.edu
1 g28n35.hep.wisc.edu
2 g31n14.hep.wisc.edu
1 g31n26.hep.wisc.edu
1 g31n38.hep.wisc.edu

Is that what you expected to see?

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733
</div><script type='text/javascript'>
        $('#show_488595077').click(function() {
            $('#detail_488595077').slideDown("normal");
            $('#show_488595077').hide();
            $('#hide_488595077').show();
        });
        $('#hide_488595077').click(function() {
            $('#detail_488595077').slideUp();
            $('#hide_488595077').hide();
            $('#show_488595077').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='31438#1481831632'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-15T19:53:52+00:00">Dec 15, 2016 07:53 PM UTC</time><a class="anchor" name="1481831632">&nbsp;</a></div><pre>Hi Brian,

Sorry for the delay - some other stuff came up and currently the GRACC cluster is down for maintenance and upgrades.  I&#39;ll run this query after the cluster is back up and give you an update.

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1481657175'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-13T19:26:15+00:00">Dec 13, 2016 07:26 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1481657175">&nbsp;</a></div><pre>Shreyas,

Could you repeat your below query to check for any bad records coming from Wisconsin starting December 5th?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1480970290'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-05T20:38:10+00:00">Dec 5, 2016 08:38 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1480970290">&nbsp;</a></div><pre>Tanya,

I&#39;ve created a JIRA ticket for this so we can stop spamming everyone
else on the ticket discussing solutions. If you&#39;re interested in
following the discussion, you can find the ticket here&#58;
<a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2551' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2551</a>

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1480965791'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-05T19:23:11+00:00">Dec 5, 2016 07:23 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1480965791">&nbsp;</a></div><pre>Hi Brian,

It is perfectly ok with us but is it ok with your PIs? Are you sure that don&#39;t want to distinguish between CHTC&#60;<a href='https&#58;//oim.grid.iu.edu/oim/resourcegroupedit?id=314&#62' target='_blank' rel='nofollow'>https&#58;//oim.grid.iu.edu/oim/resourcegroupedit?id=314&#62</a>;, GLOW, GLOW_ATLAS, GLOW_CMS? If this is ok with them - we really don&#39;t care.

Thanks,

Tanya</pre></div><div class='update_description'><i onclick="document.location='31438#1480965436'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-05T19:17:16+00:00">Dec 5, 2016 07:17 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1480965436">&nbsp;</a></div><pre>Shreyas,

Ok, if you guys are happy with &#34;jobs ran at University of Wisconsin&#34;,
does filling the &#39;Host Description&#39; field with the submit node&#39;s
OIM-registered resource name (e.g. login06.hep.wisc.edu,
submit-4.wisc.edu) suffice?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1480964551'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-05T19:02:31+00:00">Dec 5, 2016 07:02 PM UTC</time><a class="anchor" name="1480964551">&nbsp;</a></div><pre>Hi Brian,

For us, the level of granularity doesn&#39;t make a difference.  I think the more pertinent question is, if someone wants to attribute resources being used to Wisconsin for OSG jobs (or for flocking between GLOW, CHTC, etc.), does it matter to you whether GLOW, CHTC, etc. are reported back, or just Wisconsin?  We&#39;re perfectly happy with &#34;this job ran at University of Wisconsin&#34;.

Thanks!
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1480718651'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-02T22:44:11+00:00">Dec 2, 2016 10:44 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1480718651">&nbsp;</a></div><pre>Shreyas,

Are &#34;clusters&#34; registered, though? Are you referring to the OIM Site
name? At what level of granularity does the accounting team need the
host description? Is it enough to say &#34;this job ran at University of
Wisconsin&#34; or do you need to know which OIM Site at UW ran the job? How
accurate does this have to be?

At UW we&#39;ve got GLOW, CHTC, and WIPAC among others and the issue is that
jobs submitted at one site can run at any of the other sites, so if you
want the detailed Site information, we can&#39;t simply get that information
from the frontend&#58; we&#39;d need to have admins set this information in
their worker node configuration, which strikes me as OSG overreach. On
top of that, there are pools that users can flock to that aren&#39;t
registered in OIM because they don&#39;t have any OSG affiliation.

Heck, there are plans for Clemson/UW to flock to each other meaning that
the job will run &#34;locally&#34; (i.e. not on a glidein slot) but not
geographically locally!

TL;DR&#58; There are technical and non-technical hurdles to associating a
non-glidein slot with an OIM site name or even a Facility name. The only
thing we can know for sure, because we don&#39;t tell sites how to run their
clusters, is that a job was submitted to an OIM submit host and whether
or not it ran in a glidein slot.

- Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1480708962'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-02T20:02:42+00:00">Dec 2, 2016 08:02 PM UTC</time><a class="anchor" name="1480708962">&nbsp;</a></div><pre>Hi Brian,

The individual worker nodes don&#39;t need to be registered - that&#39;s right.  Only the cluster needs to be registered, and that should work.  To your second point, if I understand correctly and the locally-run jobs are being submitted from and run on the same cluster, then as long as that&#39;s registered in OIM, that should be what we need.

Please let me know if I&#39;m misunderstanding anything here.

Thanks!
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1480708574'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-02T19:56:14+00:00">Dec 2, 2016 07:56 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1480708574">&nbsp;</a></div><pre>Shreyas,

Well, I guess that depends because the terms &#34;resource&#34; and &#34;run&#34; are so
overloaded.

- If we&#39;re talking about where the job&#39;s actual executable runs (i.e.
the worker node), no that&#39;s not registered in OIM because sites never
register their worker nodes as resources.
- If we&#39;re talking about OSG nodes that have jobs submitted to them but
don&#39;t actually do any scientific work (CEs, GWMS frontends), the submit
hosts should be registered in OIM (it looks like the HEP submit node
actually isn&#39;t, at the moment).

- Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1480704276'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-02T18:44:36+00:00">Dec 2, 2016 06:44 PM UTC</time><a class="anchor" name="1480704276">&nbsp;</a></div><pre>Hi Brian,

For the locally-run jobs, is the resource they run on registered in OIM?  Because then, if Host Description is populated with that resource name, as you&#39;re suggesting, we&#39;ll be able to attribute the running job to Wisconsin resources.

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1480691861'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-02T15:17:41+00:00">Dec 2, 2016 03:17 PM UTC</time><a class="anchor" name="1480691861">&nbsp;</a></div><pre>Hi Brian,

Sorry for the delay - we&#39;ll discuss this internally on our end and I&#39;ll get back to you later today.  I could see it go either way, as you said.

Thanks!
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1480547312'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-30T23:08:32+00:00">Nov 30, 2016 11:08 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1480547312">&nbsp;</a></div><pre>Shreyas,

Does the resource name of the frontend make sense as the host description?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1480463699'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-29T23:54:59+00:00">Nov 29, 2016 11:54 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1480463699">&nbsp;</a></div><pre>Shreyas,

We&#39;ve encountered an issue with one of our glideinwms frontend nodes here at UW&#58; login06.hep.wisc.edu is owned by CMS and they need all of their jobs to be accounted for. However, with the new versions of the gratia-probe package, the &#39;Host Description&#39; field will be populated with &#39;Local Job&#39; for any job that doesn&#39;t not run on a glidein slot, which I imagine isn&#39;t what you want. What information exactly are you looking to gather from the &#39;Host Description&#39; field? If the job is run locally from a frontend, does it make sense to populate it with the resource name of the frontend or would you rather see that the job is attributed to the site? I think the former is easier to do at this point since we tell users to enter the Resource Name into their ProbeConfig.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1480454539'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-29T21:22:19+00:00">Nov 29, 2016 09:22 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1480454539">&nbsp;</a></div><pre>Elizabeth&#58; Thanks for the reminder, we still need confirmation from Vlad and Dan that they&#39;ve made the changes then we&#39;ll need to verify that it&#39;s been fixed on Shreyas&#39; end.</pre></div><div class='update_description'><i onclick="document.location='31438#1480452979'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-29T20:56:19+00:00">Nov 29, 2016 08:56 PM UTC</time> by <b>echism</b><a class="anchor" name="1480452979">&nbsp;</a></div><pre>Is there anything further on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='31438#1479406594'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-17T18:16:34+00:00">Nov 17, 2016 06:16 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1479406594">&nbsp;</a></div><pre>I&#39;ve cut a new version of the gratia probes and notified the admins of the offending submit nodes to update their packages and configuration.</pre></div><div class='update_description'><i onclick="document.location='31438#1478901028'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T21:50:28+00:00">Nov 11, 2016 09:50 PM UTC</time><a class="anchor" name="1478901028">&nbsp;</a></div><pre>We don&#39;t summarize on Host, but I can include &#34;CHTC&#34; (ResourceType&#58;Payload AND Host_description&#58;(*wisc.edu OR CHTC) AND ProbeName&#58;*wisc.edu).
Updated <a href='https&#58;//gracc.opensciencegrid.org/dev/dashboard/db/wisconsin' target='_blank' rel='nofollow'>https&#58;//gracc.opensciencegrid.org/dev/dashboard/db/wisconsin</a>
Are you in OSG Slack? Feel free to stop by #gracc and we can iterate on this some more.

Thanks,
Kevin

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kevin Retzke 3130</pre></div><div class='update_description'><i onclick="document.location='31438#1478900113'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T21:35:13+00:00">Nov 11, 2016 09:35 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1478900113">&nbsp;</a></div><pre>Kevin,

Could we search on Host instead of Host_description? Our
Host_description for many of our local jobs has changed from wisc.edu to
CHTC recently.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1478898821'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T21:13:41+00:00">Nov 11, 2016 09:13 PM UTC</time><a class="anchor" name="1478898821">&nbsp;</a></div><pre>Here&#39;s graphs of # jobs and total core hours (ResourceType&#58;Payload AND Host_description&#58;*wisc.edu AND ProbeName&#58;*wisc.edu)&#58; <a href='https&#58;//gracc.opensciencegrid.org/dev/dashboard/db/wisconsin' target='_blank' rel='nofollow'>https&#58;//gracc.opensciencegrid.org/dev/dashboard/db/wisconsin</a>

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Kevin Retzke 3130</pre></div><div class='update_description'><i onclick="document.location='31438#1478896330'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T20:32:10+00:00">Nov 11, 2016 08:32 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1478896330">&nbsp;</a></div><pre>What exactly are the summary records? And I&#39;d be interested in CoreHours
for payload jobs that have been submitted from *wisc.edu and ran a
*wisc.edu host.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1478895661'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T20:21:01+00:00">Nov 11, 2016 08:21 PM UTC</time><a class="anchor" name="1478895661">&nbsp;</a></div><pre>Hi Brian and Carl,

We have summary records that have a lot of the same information.  I just took a random summary record, and here are the fields&#58;
&#34;DN&#34;, &#34;Count&#34;, &#34;Resource&#34;, &#34;Processors&#34;, &#34;ResourceType&#34;, &#34;Host_description&#34;, &#34;VOName&#34;, &#34;CommonName&#34;, &#34;Site&#34;, &#34;ResourceGroup&#34;, &#34;ProbeName&#34;, &#34;Resource_ExitCode&#34;, &#34;EndTime&#34;, &#34;ReportableVOName&#34;, &#34;CpuDuration_system&#34;, &#34;Facility&#34;, &#34;SiteName&#34;, &#34;ProjectName&#34;, &#34;FQDN&#34;, &#34;CpuDuration_user&#34;, &#34;CoreHours&#34;, &#34;Grid&#34;, &#34;UsageModel&#34;, &#34;WallDuration&#34;, &#34;type&#34;, &#34;RawVOName&#34;, &#34;RawProjectName&#34;

Which of these would you like to see, if this is what you need?

Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1478894644'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T20:04:04+00:00">Nov 11, 2016 08:04 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1478894644">&nbsp;</a></div><pre>I can look into getting aggregate results if we don&#39;t actually care about all the details of individual records..

Carl</pre></div><div class='update_description'><i onclick="document.location='31438#1478892858'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T19:34:18+00:00">Nov 11, 2016 07:34 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1478892858">&nbsp;</a></div><pre>Shreyas,

Oh geez, at least we&#39;ve got a sense of scale now. In the future we may want to remove those records but for now we can give up on running those queries. Thanks for looking into it. We&#39;ve got a ticket to fix the root issue (<a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2532' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2532</a>) and once we converge on a solution, we&#39;ll implement it ASAP.

I&#39;ve got a few questions about payload records, which you may or may not know&#58; What exactly are they used for? Do VOs use the data from these records to see where their payload jobs have run and for how long?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1478890122'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T18:48:42+00:00">Nov 11, 2016 06:48 PM UTC</time><a class="anchor" name="1478890122">&nbsp;</a></div><pre>It&#39;s still a huge file - it&#39;ll be about 1.4 million records we&#39;re returning for the past week (the file is still getting written).  I&#39;m not sure if this ticket will let me put the file here, but if not, I can use Dropbox or Google Drive or something like that.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1478885754'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-11T17:35:54+00:00">Nov 11, 2016 05:35 PM UTC</time><a class="anchor" name="1478885754">&nbsp;</a></div><pre>That sounds good.  I&#39;m running the query now.  I&#39;ll keep the timing stuff plus a little more.

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1478816590'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-10T22:23:10+00:00">Nov 10, 2016 10:23 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1478816590">&nbsp;</a></div><pre>Oh, wow. Yea, we should probably cut that down by limiting it to a week
and/or removing some of the fields (I think we just want the
time-related ones).

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1478816020'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-10T22:13:40+00:00">Nov 10, 2016 10:13 PM UTC</time><a class="anchor" name="1478816020">&nbsp;</a></div><pre>I was just about to post my reply when you did, Brian!

I generated a CSV with Carl&#39;s list for records going back to 10/01 (NJobs isn&#39;t in there, since in GRACC each job gets its own record).  It&#39;s 343 MB - should I cut that down?

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1478815690'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-10T22:08:10+00:00">Nov 10, 2016 10:08 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1478815690">&nbsp;</a></div><pre>And if there are too many records in the past month, perhaps we could
get the number of records over the past week instead?

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1478805610'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-10T19:20:10+00:00">Nov 10, 2016 07:20 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1478805610">&nbsp;</a></div><pre>Carl,

Of those, I&#39;d think we would want the following&#58;

CoreHours
CpuDuration
WallDuration
NJobs

So we can calculate how many local job hours we&#39;ve reported.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1478802791'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-10T18:33:11+00:00">Nov 10, 2016 06:33 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1478802791">&nbsp;</a></div><pre>Brian, do you know what specific fields we need?

Otherwise Shreyas I would say all these could potentially be useful&#58;

CoreHours
CpuDuration
WallDuration
Processors
SubmitHost
MachineName
EndTime
Grid
PayloadSiteName
ProbeName
RecordId
ResourceType
LocalJobId
GlobalJobId
SiteName
VOName
Host
Njobs

Thanks,
Carl</pre></div><div class='update_description'><i onclick="document.location='31438#1478802047'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-10T18:20:47+00:00">Nov 10, 2016 06:20 PM UTC</time><a class="anchor" name="1478802047">&nbsp;</a></div><pre>Brian and Carl,

When I moved the start date to 10/01, my connection also got dropped.  What fields did you need to see in these records?

-Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1478798908'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-10T17:28:28+00:00">Nov 10, 2016 05:28 PM UTC</time><a class="anchor" name="1478798908">&nbsp;</a></div><pre>Yeah - it takes a few minutes to even get the data from 11/01 onwards.

I&#39;m running this, which is almost the exact as Carl&#39;s&#58;

SELECT
*
FROM
JobUsageRecord J
INNER JOIN JobUsageRecord_Meta JM on JM.dbid = J.dbid
WHERE
1=1
AND (JM.recordId&#96; like &#39;%wisc.edu%&#39; OR JM.ProbeName like &#39;%wisc.edu%&#39;)
AND J.Host like &#39;%wisc.edu%&#39;
and J.EndTime &#62; &#39;2016-11-01&#39;
;

GRACC (ElasticSearch) seems to be doing much quicker.  What fields are you looking at in particular?  I could write up a quick python script to extract them from the GRACC JSON output, and paste the result here.

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1478798384'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-10T17:19:44+00:00">Nov 10, 2016 05:19 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1478798384">&nbsp;</a></div><pre>I was trying this yesterday also and the connection kept getting killed (after running for many minutes)

select * from JobUsageRecord j join JobUsageRecord_Meta jm on j.dbid = jm.dbid
where EndTime &#62; &#39;2016-01-01&#39; and recordId like &#39;%.wisc.edu&#39; and Host like &#39;%.wisc.edu&#39;;

not sure if it&#39;s something automatic killing the queries or what.  I tried a few variations hoping to take advantage of indexes for faster results but didn&#39;t have any luck.

Maybe gracc will be faster...

Carl</pre></div><div class='update_description'><i onclick="document.location='31438#1478797465'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-10T17:04:25+00:00">Nov 10, 2016 05:04 PM UTC</time><a class="anchor" name="1478797465">&nbsp;</a></div><pre>Thanks Tanya!  I&#39;m rerunning the query now.  But it&#39;s taking many minutes to even go back to 11/01, so if I go back much further, it probably will time out.

In the meantime, I&#39;m querying GRACC for the same info.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1478796613'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-10T16:50:13+00:00">Nov 10, 2016 04:50 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1478796613">&nbsp;</a></div><pre>Shreyas,

You should do join between JobsUsageRecord and JobUsageRecord_Meta (it has probename)

Tanya</pre></div><div class='update_description'><i onclick="document.location='31438#1478796269'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-10T16:44:29+00:00">Nov 10, 2016 04:44 PM UTC</time><a class="anchor" name="1478796269">&nbsp;</a></div><pre>Hi Brian,

How are you querying the Probe Name for gratia?  There&#39;s no probe field in the JobUsageRecord table - so I&#39;m just running the query on GlobalJobID and Host matching *wisc.edu*.

I&#39;m currently running the query on gratia, and it looks like it may also time out.  I&#39;ll try GRACC if that&#39;s the case.

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1478731422'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-09T22:43:42+00:00">Nov 9, 2016 10:43 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1478731422">&nbsp;</a></div><pre>Shreyas,

Let&#39;s go as far back as we can. I think we&#39;d want at least a month of records.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1478730763'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-09T22:32:43+00:00">Nov 9, 2016 10:32 PM UTC</time><a class="anchor" name="1478730763">&nbsp;</a></div><pre>Hi Brian,

I can certainly try to do that in both GRATIA and GRACC (which should give us the same results).  Did you want me to look at any specific time range?  Like the last week or so?

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1478725822'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-09T21:10:22+00:00">Nov 9, 2016 09:10 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1478725822">&nbsp;</a></div><pre>Shreyas,

Thanks for the clarification. We think we&#39;ve tracked the root issue down to the gratia probe picking up locally run jobs at the CHTC (e.g. jobs that do not get run through glideinWMS). We&#39;d like to tease out how many of these local records have been uploaded to Gratia and we should be able to do that by checking for records that are associated with a *wisc.edu RecordID or ProbeName and a *wisc.edu Host. Carl tried to run a MySQL query but it timed out and we were wondering if you could give it a try with better luck.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='31438#1478629484'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-08T18:24:44+00:00">Nov 8, 2016 06:24 PM UTC</time><a class="anchor" name="1478629484">&nbsp;</a></div><pre>Hi all,

Sorry for the delay in responding!

To find the records that should be Wisconsin records, I look in the Host field for &#34;*wisc*&#34;.  Then, to see if those match what&#39;s in OIM, I check the Host Description in the record to see if it matches the Resource, Site, or Resource Group name (in that order) registered in OIM.  If any of those matches, we can say that record&#39;s job ran at Wisconsin.

Please let me know if you have any other questions.

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1478557210'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-07T22:20:10+00:00">Nov 7, 2016 10:20 PM UTC</time> by <b>echism</b><a class="anchor" name="1478557210">&nbsp;</a></div><pre>Shreyas,

Can you clarify&#58;

What tests are you running to determine if an entry &#34;matches&#34; Wisconsin?

Thank you</pre></div><div class='update_description'><i onclick="document.location='31438#1478290450'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-04T20:14:10+00:00">Nov 4, 2016 08:14 PM UTC</time> by <b>egrasmick@....</b><a class="anchor" name="1478290450">&nbsp;</a></div><pre>We&#39;re still attempting to diagnose the problem; we&#39;re trying to understand the gratia probe configuration file better. We&#39;ve made a little bit of progress but there is little documentation it seems...

What tests are you running to determine if an entry &#34;matches&#34; Wisconsin?

Thanks!</pre></div><div class='update_description'><i onclick="document.location='31438#1478190790'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-11-03T16:33:10+00:00">Nov 3, 2016 04:33 PM UTC</time> by <b>echism</b><a class="anchor" name="1478190790">&nbsp;</a></div><pre>Is there anything further on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='31438#1477936524'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-31T17:55:24+00:00">Oct 31, 2016 05:55 PM UTC</time><a class="anchor" name="1477936524">&nbsp;</a></div><pre>I tried to attach the file as a CSV or XLSX, but the ticket didn&#39;t allow me to.  I&#39;ve put it as a .txt, but it is a comma-separated file.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1477936294'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-31T17:51:34+00:00">Oct 31, 2016 05:51 PM UTC</time><a class="anchor" name="1477936294">&nbsp;</a></div><pre>Hi Erin,

I apologize - my answer to (1) was wrong - this is only Payload records that we&#39;re concerned about.  I just did a test on Batch records and those match properly in my tests (I&#39;ll let you know in a separate ticket if that changes).  I&#39;ve attached a sample file to this ticket with information from the payload records as well as whether we could match those records to Wisconsin (marked Success/Failure in the last column).

Please let me know if I can provide more information to help with this.

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1477686325'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-28T20:25:25+00:00">Oct 28, 2016 08:25 PM UTC</time><a class="anchor" name="1477686325">&nbsp;</a></div><pre>Aaron&#58;  Thanks!

Erin&#58;  1)  It&#39;s from both pilot and payload
2)  I&#39;d be happy to send you that.  I&#39;ll generate it and attach the file here early next week.

Thanks,
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1477608611'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-27T22:50:11+00:00">Oct 27, 2016 10:50 PM UTC</time> by <b>egrasmick@....</b><a class="anchor" name="1477608611">&nbsp;</a></div><pre>We had a long conversation with the OSG folks here at UW Madison this afternoon and in order to debug the hostname issue accurately this we&#39;ll need a couple pieces of information from the Gratia folks.

1) Is the erroneous data in Gratia from the pilot or the payload?

2) Could you send us a larger sized dump of some of the data that&#39;s exhibiting the erroneous behavior (say, 100 entries)? This would be incredibly helpful in diagnosing exactly what is causing this issue.

Thanks,

Erin</pre></div><div class='update_description'><i onclick="document.location='31438#1477586884'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-27T16:48:04+00:00">Oct 27, 2016 04:48 PM UTC</time><a class="anchor" name="1477586884">&nbsp;</a></div><pre>Folks,

We&#39;ve updated the schedds that we at CHTC control to publish JOBGLIDEIN_ResourceName = &#34;CHTC&#34; in jobs.  This will of course take effect only for new jobs.

-Aaron Moate

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Aaron Moate 894</pre></div><div class='update_description'><i onclick="document.location='31438#1477518569'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-26T21:49:29+00:00">Oct 26, 2016 09:49 PM UTC</time><a class="anchor" name="1477518569">&nbsp;</a></div><pre>Elizabeth,

Erin has been out last week and this week.  Hopefully she&#39;s in tomorrow and can give an update.

Cheers,
-Aaron Moate

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Aaron Moate 894</pre></div><div class='update_description'><i onclick="document.location='31438#1477510395'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-26T19:33:15+00:00">Oct 26, 2016 07:33 PM UTC</time> by <b>echism</b><a class="anchor" name="1477510395">&nbsp;</a></div><pre>Erin and Aaron,

Any movement on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='31438#1477061068'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-21T14:44:28+00:00">Oct 21, 2016 02:44 PM UTC</time><a class="anchor" name="1477061068">&nbsp;</a></div><pre>Hi all,

Sorry for the delay.  Please set the name to either the resource name of the specific resource, the site name (GLOW or CHTC), or the resource group name as registered in OIM, in that order of preference.  We can key off any of those.

Thanks!
Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1476987126'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-20T18:12:06+00:00">Oct 20, 2016 06:12 PM UTC</time> by <b>echism</b><a class="anchor" name="1476987126">&nbsp;</a></div><pre>Is there anything new on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='31438#1476473510'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-14T19:31:50+00:00">Oct 14, 2016 07:31 PM UTC</time><a class="anchor" name="1476473510">&nbsp;</a></div><pre>Ideally it would be whatever the submit node is registered as in OIM (I see that you have a number of nodes with names like CHTC-submit-1, CHTC-submit-2, GLOW-submit1, etc).  I think the way we have it set up on the reporting end, the site name (GLOW or CHTC) would also work.  Let me check into that and get back to you.

Thanks for looking into this!

Shreyas

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><div class='update_description'><i onclick="document.location='31438#1476390777'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-13T20:32:57+00:00">Oct 13, 2016 08:32 PM UTC</time> by <b>echism</b><a class="anchor" name="1476390777">&nbsp;</a></div><pre>Shreyas

Did you see that last question?

They want to know what to change the name to.

Thank you</pre></div><div class='update_description'><i onclick="document.location='31438#1476200514'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-11T15:41:54+00:00">Oct 11, 2016 03:41 PM UTC</time><a class="anchor" name="1476200514">&nbsp;</a></div><pre>Hi Shreyas,

This took a bit of detective work...
Unfortunately, we don&#39;t control the configuration for more than a few submit nodes that submit to the CHTC pool (and HEP are their own pool) due to them being owned by other research groups.  This is a bit of configuration that&#39;s unfortunately set per submit node, not on our glidein WMS frontend. According to the graphs on gratiaweb, it looks like the vast majority of jobs are going through our submit nodes, and thus reporting wisc.edu since we have that hardcoded in our config, which we can fix (should it be CHTC or GLOW?)

Thanks,

Erin G.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Erin Grasmick 3025</pre></div><div class='update_description'><i onclick="document.location='31438#1475770030'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-06T16:07:10+00:00">Oct 6, 2016 04:07 PM UTC</time><a class="anchor" name="1475770030">&nbsp;</a></div><pre>Acknowledged;  It&#39;s not surprising that our OIM is a mess, it&#39;s been badly neglected.  We&#39;ll try to grock this and follow up.

-Aaron Moate

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Aaron Moate 894</pre></div><div class='update_description'><i onclick="document.location='31438#1475763680'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-06T14:21:20+00:00">Oct 6, 2016 02:21 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1475763680">&nbsp;</a></div><pre>Hi Wisconsin Admins and Factory ops,

I&#39;m working on pulling in OIM topology information into GRACC accounting reports.  We are trying to make sure that the resources Wisconsin provides to OSG users can be seen and correctly attributed to you in GRACC.  When looking at Payload records, we match on the host description to get the OIM Topology information.  Unfortunately, for the Wisconsin nodes, I&#39;ve seen that the host description is set to the local hostname (examples are g29n11.hep.wisc.edu and g19n23.hep.wisc.edu), or in some cases just wisc.edu.  Is there any reason that the host description (which ordinarily is the Glidein_ResourceName) reports these names?  If not, it would be great if the host description be reconfigured to match what&#39;s in the OIM Topology - it would really help us account for the usage of these resources.  For your reference, I&#39;ve included the (very long) link below to OIM (1), as well as the link to the probe configuration page on the OSG Wiki (2)&#58;

If the condor config is set as (2) describes, is there something at the factory level that&#39;s overriding the host description?

(1)
<a href='http&#58;//myosg.grid.iu.edu/rgsummary/index?summary_attrs_showhierarchy=on&summary_attrs_showservice=on&summary_attrs_showfqdn=on&current_status_attrs_shownc=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=7daysago&start_date=04%2F08%2F2009&end_type=now&end_date=04%2F15%2F2009&facility=on&facility_sel%5B%5D=10011&site=on&gridtype=on&gridtype_1=on&active=on&active_value=1&disable_value=1' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/rgsummary/index?summary_attrs_showhierarchy=on&summary_attrs_showservice=on&summary_attrs_showfqdn=on&current_status_attrs_shownc=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=7daysago&start_date=04%2F08%2F2009&end_type=now&end_date=04%2F15%2F2009&facility=on&facility_sel%5B%5D=10011&site=on&gridtype=on&gridtype_1=on&active=on&active_value=1&disable_value=1</a>

(2)
<a href='https&#58;//twiki.grid.iu.edu/bin/view/Accounting/ProbeConfigGlideinWMS' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Accounting/ProbeConfigGlideinWMS</a>

Thanks very much,
Shreyas Bhat
User Support for Distributed Computing
Fermilab

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Shreyas Bhat 3733</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F31438">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 31438});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
