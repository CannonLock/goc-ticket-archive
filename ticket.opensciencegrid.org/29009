<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[29009] New host cert for xd-login</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=29009" method="post">
<div class="page-header">
    <h3><span class="muted">29009</span> / New host cert for xd-login</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Mats Rynge</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">XD-Login</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">OSG</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Mats Rynge</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">OSG-GOC</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Resolved</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-04-08</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Thomas Lee <span class="muted"> / OSG Operations Infrastructure</span></div><div class="assignee" style="width: 60%">Scott Teige <span class="muted"> / OSG Operations Infrastructure</span></div><div class="assignee" style="width: 60%">OSG-GOC <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/29009", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/29009?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/29009?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20New%20host%20cert%20for%20xd-login%20ISSUE%3D29009%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='29009#1460127685'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-08T15:01:25+00:00">Apr 8, 2016 03:01 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1460127685">&nbsp;</a></div><pre>Per Tom&#39;s entry below and I checked with Sarah and we are okay to close this ticket.</pre></div><div class='update_description'><i onclick="document.location='29009#1459969541'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-06T19:05:41+00:00">Apr 6, 2016 07:05 PM UTC</time> by <b>Thomas Lee</b><a class="anchor" name="1459969541">&nbsp;</a></div><pre>I was able to request this certificate on the web UI of oim-itb, so this ticket itself can (I hope) be closed.  The certificate is in place on xd-login.  Whether we can get the command-line tool to correctly request multi-domain certificates in general is beyond the scope of this ticket.</pre></div><div class='update_description'><i onclick="document.location='29009#1459875113'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-05T16:51:53+00:00">Apr 5, 2016 04:51 PM UTC</time> by <b>Thomas Lee</b><a class="anchor" name="1459875113">&nbsp;</a></div><pre>There is still no code fix that allows this to work.</pre></div><div class='update_description'><i onclick="document.location='29009#1459176585'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-28T14:49:45+00:00">Mar 28, 2016 02:49 PM UTC</time> by <b>Thomas Lee</b><a class="anchor" name="1459176585">&nbsp;</a></div><pre>The cause has been discovered and requires a code fix.  The issue is the unusual situation that xsede.org has both MIS and OSG VOs associated with it, while opensciencegrid.org has only the OSG VO.  The code on OIM is requiring there to be GAs in common for all domains and VOs in such cases.  This is erroneous -- there only needs to exist one VO for which there is a common GA among the domains.  A code fix is under way, and once it is in place on ITB, I can request this certificate from there, as there is (to my knowledge) nothing different about certificates obtained from ITB OIM.</pre></div><div class='update_description'><i onclick="document.location='29009#1459174641'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-28T14:17:21+00:00">Mar 28, 2016 02:17 PM UTC</time> by <b>Sarah Schmiechen</b><a class="anchor" name="1459174641">&nbsp;</a></div><pre>adding myself as cc</pre></div><div class='update_description'><i onclick="document.location='29009#1458845131'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-24T18:45:31+00:00">Mar 24, 2016 06:45 PM UTC</time> by <b>Thomas Lee</b><a class="anchor" name="1458845131">&nbsp;</a></div><pre>I am now a GridAdmin for both opensciencegrid.org and xsede.org under the OSG VO, but I am still unable to request the cert.  Talking to our support staff in an attempt to resolve this.  The error message remains &#34;Couldn&#39;t find GridAdmin group under specified VO.&#34;  The cause is currently unknown.</pre></div><div class='update_description'><i onclick="document.location='29009#1458834508'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-24T15:48:28+00:00">Mar 24, 2016 03:48 PM UTC</time><a class="anchor" name="1458834508">&nbsp;</a></div><pre>I recommend that the GridAdmins for opensciencegrid.org also be made GridAdmins for osg.xsede.org since the osg.xsede.org subdomain is delegated from XSEDE to OSG.

by /DC=org/DC=cilogon/C=US/O=University of Illinois at Urbana-Champaign/CN=James Basney A534</pre></div><div class='update_description'><i onclick="document.location='29009#1458833881'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-24T15:38:01+00:00">Mar 24, 2016 03:38 PM UTC</time><a class="anchor" name="1458833881">&nbsp;</a></div><pre>Jim, can you comment on what it the appropriate path forward? I have no problems with one of us be added as an approver to the other domain.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='29009#1458832692'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-24T15:18:12+00:00">Mar 24, 2016 03:18 PM UTC</time> by <b>Thomas Lee</b><a class="anchor" name="1458832692">&nbsp;</a></div><pre>Thank you for the answers!

I&#39;ve run into a snag.  It seems that one cannot have a SAN certificate unless all domains share an approver.  Currently Jim Basney is the only approver for xsede.org, and he is not an approver for opensciencegrid.org.  Either an opensciencegrid.org approver will need to be added as an approver for xsede.org, or Jim Basney will need to be added as an approver for opensciencegrid.org.</pre></div><div class='update_description'><i onclick="document.location='29009#1458831225'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-24T14:53:45+00:00">Mar 24, 2016 02:53 PM UTC</time><a class="anchor" name="1458831225">&nbsp;</a></div><pre>Yes, it will replace /etc/grid-security/host/cert.pem

containercert is not used anymore. I can be removed

CILogin, yes please.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='29009#1458830767'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-24T14:46:07+00:00">Mar 24, 2016 02:46 PM UTC</time> by <b>Thomas Lee</b><a class="anchor" name="1458830767">&nbsp;</a></div><pre>I have a few questions ...

Is this going to replace the certificate in /etc/grid-security/host/cert.pem?

Does any of this affect /etc/grid-security/containercert.pem, which has a different CN?

I&#39;m assuming this should be a CILogon certificate; is this correct?</pre></div><div class='update_description'><i onclick="document.location='29009#1458313210'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-18T15:00:10+00:00">Mar 18, 2016 03:00 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1458313210">&nbsp;</a></div><pre>Tom will be at his desk Monday morning and will attend to this then.</pre></div><div class='update_description'><i onclick="document.location='29009#1458220203'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-17T13:10:03+00:00">Mar 17, 2016 01:10 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1458220203">&nbsp;</a></div><pre>Adding Tom and Scott to this ticket.</pre></div><div class='update_description'><i onclick="document.location='29009#1458220181'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-17T13:09:41+00:00">Mar 17, 2016 01:09 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1458220181">&nbsp;</a></div><pre>GOC,

We need a new hostcert for xd-login.opensciencegrid.org , with a special subjectAltName of submit-1.osg.xsede.org . Both names are valid for the host, and the Globus change to RFC 2818 means we have to have both in the cert.

Some more background&#58; <a href='https&#58;//docs.globus.org/security-bulletins/2015-12-strict-mode/' target='_blank' rel='nofollow'>https&#58;//docs.globus.org/security-bulletins/2015-12-strict-mode/</a>

Thanks,

--
Mats Rynge
USC/ISI - Pegasus Team &#60;<a href='http&#58;//pegasus.isi.edu&#62' target='_blank' rel='nofollow'>http&#58;//pegasus.isi.edu&#62</a>;</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F29009">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 29009});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
