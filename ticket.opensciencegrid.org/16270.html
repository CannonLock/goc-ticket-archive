<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[16270] APEL OSG Interface Down</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=16270" method="post">
<div class="page-header">
    <h3><span class="muted">16270</span> / APEL OSG Interface Down</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Robert Quick</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Robert Quick</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-08-01</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=96304">96304</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/16270", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/16270?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/16270?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20APEL%20OSG%20Interface%20Down%20ISSUE%3D16270%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='16270#1377043232'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-21T00:00:32+00:00">Aug 21, 2013 12:00 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1377043232">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.

-- by SYSTEM at Tue Aug 20 23&#58;59&#58;01 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304</a></pre></div><div class='update_description'><i onclick="document.location='16270#1375459060'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T15:57:40+00:00">Aug 2, 2013 03:57 PM UTC</time><a class="anchor" name="1375459060">&nbsp;</a></div><pre>Well... this explains the erratic behavior over the last several weeks.  Some days the interface worked.  Some days it did not.  I never worry about one day&#39;s failures as the next night it will make up for it.  Except, in this case, we had a site that had local reporting problems and I was headed off for 2 weeks.

We are now set to report exclusively to msg.cro-ngi.hr&#58;6162&#92;

Both July and August updates have been sent.
For OSG folks, I am suspending the July updates as I am not aware of any sites behind in reporting July anymore and I do not want a delete to go through and an update fail.

Hopefully, the messaging team will figure out a reasonable solution to this so we don&#39;t waste all this time yet again.

I guess this issue is closed.

John Weigand

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=John Weigand 144</pre></div><div class='update_description'><i onclick="document.location='16270#1375457493'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T15:31:33+00:00">Aug 2, 2013 03:31 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1375457493">&nbsp;</a></div><pre>John,
Yes, connecting to either of the cern ones is not working - that showed up in your tests today and yet I can not find out from messaging team what the difference on the cern hosts is from the ones in Hungary and Greece so that if you run with network set to PROD you may get any one of the 4 returned from a query to the bdii and if you get a cern one your publishing fails (since 30th july) but if you get the Hungary one your publishing succeeds.  SO, I suggest you change from network&#58; PROD to specifiying the host and port as&#58;
msg.cro-ngi.hr&#58;6162

I have just had a message from the messaging team that they do not recomment using PROD network of brokers but that is the first I had heard of that - my apologies for the mixed messages!

Please try publishing with msg.cro-ngi.hr&#58;6162 - that is certainly working for the other sites who&#39;ve published successfully.

Thanks,
Alison

-- by Alison Packer at Fri Aug 02 15&#58;30&#58;44 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304</a></pre></div><div class='update_description'><i onclick="document.location='16270#1375456266'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T15:11:06+00:00">Aug 2, 2013 03:11 PM UTC</time><a class="anchor" name="1375456266">&nbsp;</a></div><pre>Oh well,  I knew it was too good to be true.

Just ran from my production node... gr13x6.fnal.gov with the same test file

NOTE it went to a different broker and connected to ta different node and FAILED.

2013-08-02 10&#58;03&#58;42,555 - SSM - INFO - =======================================================
2013-08-02 10&#58;03&#58;42,555 - SSM - INFO - Starting the SSM...
2013-08-02 10&#58;03&#58;42,574 - SSM - INFO - Running the SSM once only.
2013-08-02 10&#58;03&#58;42,574 - SSM - INFO - BDII URL&#58; ldap&#58;//lcg-bdii.cern.ch&#58;2170
2013-08-02 10&#58;03&#58;42,575 - SSM - INFO - BDII broker network&#58; PROD
2013-08-02 10&#58;03&#58;43,990 - SSM - DEBUG - Found broker in BDII&#58; egi-1.msg.cern.ch&#58;6162
2013-08-02 10&#58;03&#58;43,990 - SSM - DEBUG - Found broker in BDII&#58; egi-2.msg.cern.ch&#58;6162
2013-08-02 10&#58;03&#58;43,990 - SSM - DEBUG - Found broker in BDII&#58; broker.afroditi.hellasgrid.gr&#58;6162
2013-08-02 10&#58;03&#58;43,990 - SSM - DEBUG - Found broker in BDII&#58; msg.cro-ngi.hr&#58;6162
2013-08-02 10&#58;03&#58;43,990 - SSM - INFO - Connecting using SSL using key /etc/grid-security/gratia-apel-wlcg.opensciencegrid.org-hostkey.pem and cert /etc/grid-security/gratia-apel-wlcg.opensciencegrid.org-hostcert.pem.
2013-08-02 10&#58;03&#58;43,991 - stomp.py - DEBUG - Attempting connection to host egi-1.msg.cern.ch, port 6162
2013-08-02 10&#58;03&#58;44,993 - stomp.py - INFO - Established connection to host egi-1.msg.cern.ch, port 6162
2013-08-02 10&#58;03&#58;44,994 - stomp.py - DEBUG - starting receiver loop
2013-08-02 10&#58;03&#58;44,994 - SSM - INFO - Connecting&#58; (&#39;egi-1.msg.cern.ch&#39;, 6162)
2013-08-02 10&#58;03&#58;44,994 - stomp.py - DEBUG - Sent frame&#58; type=CONNECT, headers={&#39;wait&#39;&#58; False}, body=&#39;&#39;
2013-08-02 10&#58;03&#58;44,995 - SSM - INFO - The SSM will not run as a consumer.
2013-08-02 10&#58;03&#58;44,995 - SSM - INFO - The SSM will run as a producer.
2013-08-02 10&#58;03&#58;44,995 - stomp.py - DEBUG - Sent frame&#58; type=SUBSCRIBE, headers={&#39;ack&#39;&#58; &#39;auto&#39;, &#39;destination&#39;&#58; &#39;/topic/global.accounting.cpu.client.gr13x6.fnal.gov.8835&#39;}, body=&#39;&#39;
2013-08-02 10&#58;03&#58;44,995 - SSM - DEBUG - I will be a producer, my ack queue is&#58; /topic/global.accounting.cpu.client.gr13x6.fnal.gov.8835
2013-08-02 10&#58;03&#58;45,131 - stomp.py - DEBUG - Received frame&#58; result=&#39;CONNECTED&#39;, headers={&#39;session&#39;&#58; &#39;ID&#58;gridmsg105.cern.ch-39905-1370326311618-2&#58;5004813&#39;, &#39;version&#39;&#58; &#39;1.0&#39;, &#39;server&#39;&#58; &#39;ActiveMQ/5.5.1-fuse-10-16&#39;, &#39;heart-beat&#39;&#58; &#39;0,0&#39;}, body=&#39;&#39;
2013-08-02 10&#58;03&#58;45,131 - SSM - INFO - Connected
2013-08-02 10&#58;03&#58;45,193 - SSM - INFO - The SSM started successfully.
2013-08-02 10&#58;03&#58;45,194 - SSM - INFO - No certificate, requesting
2013-08-02 10&#58;03&#58;45,194 - SSM - DEBUG - Sending noid
2013-08-02 10&#58;03&#58;45,194 - stomp.py - DEBUG - Sent frame&#58; type=SEND, headers={&#39;reply-to&#39;&#58; &#39;/topic/global.accounting.cpu.client.gr13x6.fnal.gov.8835&#39;, &#39;destination&#39;&#58; &#39;/topic/global.accounting.cpu.central&#39;, &#39;ssm-msg-type&#39;&#58; &#39;certreq&#39;, &#39;ssm-msg-id&#39;&#58; &#39;noid&#39;, &#39;receipt&#39;&#58; &#39;noid&#39;}, body=&#39;&#39;
2013-08-02 10&#58;03&#58;45,435 - stomp.py - DEBUG - Received frame&#58; result=&#39;RECEIPT&#39;, headers={&#39;receipt-id&#39;&#58; &#39;noid&#39;}, body=&#39;&#39;
2013-08-02 10&#58;03&#58;45,435 - SSM - DEBUG - Broker received noid
2013-08-02 10&#58;04&#58;45,191 - SSM - WARNING - Error processing outgoing messages&#58; Timed out waiting for certificate
2013-08-02 10&#58;04&#58;45,191 - SSM - WARNING - The SSM will exit
<div id='show_199305420' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_199305420'>2013-08-02 10&#58;04&#58;45,192 - stomp.py - DEBUG - Sent frame&#58; type=DISCONNECT, headers={}, body=&#39;&#39;
2013-08-02 10&#58;04&#58;45,328 - SSM - INFO - SSM connection ended.
2013-08-02 10&#58;04&#58;45,328 - SSM - INFO - The SSM has shut down.
2013-08-02 10&#58;04&#58;45,328 - SSM - INFO - =======================================================

John Weigand

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=John Weigand 144
</div><script type='text/javascript'>
        $('#show_199305420').click(function() {
            $('#detail_199305420').slideDown("normal");
            $('#show_199305420').hide();
            $('#hide_199305420').show();
        });
        $('#hide_199305420').click(function() {
            $('#detail_199305420').slideUp();
            $('#hide_199305420').hide();
            $('#show_199305420').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16270#1375455810'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T15:03:30+00:00">Aug 2, 2013 03:03 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1375455810">&nbsp;</a></div><pre>It&#39;s ok - I see Dummysite record!  Will remove that.

-- by Alison Packer at Fri Aug 02 15&#58;03&#58;08 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304</a></pre></div><div class='update_description'><i onclick="document.location='16270#1375455750'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T15:02:30+00:00">Aug 2, 2013 03:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1375455750">&nbsp;</a></div><pre>That&#39;s good news indeed.  We should delete the test record - what was the site name?

Thanks,
Alison

-- by Alison Packer at Fri Aug 02 15&#58;02&#58;18 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304</a></pre></div><div class='update_description'><i onclick="document.location='16270#1375455694'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T15:01:34+00:00">Aug 2, 2013 03:01 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1375455694">&nbsp;</a></div><pre>Touching ticket to sync. Please disregard.</pre></div><div class='update_description'><i onclick="document.location='16270#1375455414'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T14:56:54+00:00">Aug 2, 2013 02:56 PM UTC</time><a class="anchor" name="1375455414">&nbsp;</a></div><pre>Alison,

BINGO!!!   Got a message through.  It was a small test message from my test node.

You need to tell me if it got to the right place.

Here is the the relavant part of the config I used&#58;
[broker]
#host&#58; egi-2.msg.cern.ch
#port&#58; 6162
bdii-url&#58; ldap&#58;//lcg-bdii.cern.ch&#58;2170
broker-network&#58; PROD
[producer]

consumer-dn&#58; /C=UK/O=eScience/OU=CLRC/L=RAL/CN=rap.esc.rl.ac.uk

Here is the log... NOTE the multiple &#34;found broker&#34;s ... and the one it connected to has &#34;hell&#34; in it,  appropriately named as to where I feel am now ;-)
2013-08-02 09&#58;50&#58;01,253 - SSM - INFO - =======================================================
2013-08-02 09&#58;50&#58;01,254 - SSM - INFO - Starting the SSM...
2013-08-02 09&#58;50&#58;01,271 - SSM - INFO - Running the SSM once only.
2013-08-02 09&#58;50&#58;01,271 - SSM - INFO - BDII URL&#58; ldap&#58;//lcg-bdii.cern.ch&#58;2170
2013-08-02 09&#58;50&#58;01,271 - SSM - INFO - BDII broker network&#58; PROD
2013-08-02 09&#58;50&#58;05,497 - SSM - DEBUG - Found broker in BDII&#58; msg.cro-ngi.hr&#58;6162
2013-08-02 09&#58;50&#58;05,497 - SSM - DEBUG - Found broker in BDII&#58; egi-1.msg.cern.ch&#58;6162
2013-08-02 09&#58;50&#58;05,498 - SSM - DEBUG - Found broker in BDII&#58; egi-2.msg.cern.ch&#58;6162
2013-08-02 09&#58;50&#58;05,498 - SSM - DEBUG - Found broker in BDII&#58; broker.afroditi.hellasgrid.gr&#58;6162
2013-08-02 09&#58;50&#58;05,498 - SSM - INFO - Connecting using SSL using key /etc/grid-security/gratia-apel-wlcg.opensciencegrid.org-hostkey.pem and cert /etc/grid-security/gratia-apel-wlcg.opensciencegrid.org-hostcert.pem.
2013-08-02 09&#58;50&#58;06,523 - stomp.py - INFO - Established connection to host msg.cro-ngi.hr, port 6162
2013-08-02 09&#58;50&#58;06,523 - SSM - INFO - Connecting&#58; (&#39;msg.cro-ngi.hr&#39;, 6162)
2013-08-02 09&#58;50&#58;06,524 - SSM - INFO - The SSM will not run as a consumer.
2013-08-02 09&#58;50&#58;06,524 - SSM - INFO - The SSM will run as a producer.
2013-08-02 09&#58;50&#58;06,524 - SSM - DEBUG - I will be a producer, my ack queue is&#58; /topic/global.accounting.cpu.client.fermicloud015.fnal.gov.9979
2013-08-02 09&#58;50&#58;06,688 - SSM - INFO - Connected
2013-08-02 09&#58;50&#58;06,724 - SSM - INFO - The SSM started successfully.
2013-08-02 09&#58;50&#58;06,724 - SSM - INFO - No certificate, requesting
<div id='show_1902939050' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1902939050'>2013-08-02 09&#58;50&#58;06,724 - SSM - DEBUG - Sending noid
2013-08-02 09&#58;50&#58;07,147 - SSM - DEBUG - Broker received noid
2013-08-02 09&#58;50&#58;07,246 - SSM - DEBUG - Receiving message from&#58; /topic/global.accounting.cpu.client.fermicloud015.fnal.gov.9979
2013-08-02 09&#58;50&#58;07,246 - SSM - INFO - Certificate received
2013-08-02 09&#58;50&#58;07,278 - SSM - DEBUG - /C=UK/O=eScience/OU=CLRC/L=RAL/CN=rap.esc.rl.ac.uk
2013-08-02 09&#58;50&#58;07,324 - SSM - DEBUG - Got certificate
2013-08-02 09&#58;50&#58;07,324 - SSM - DEBUG - Hash&#58; a1cbf85bc1157b99ccc8c5db5e2a964a
2013-08-02 09&#58;50&#58;07,324 - SSM - DEBUG - Raw length&#58; 307
2013-08-02 09&#58;50&#58;07,324 - SSM - DEBUG - Encoded length&#58; 292
2013-08-02 09&#58;50&#58;07,324 - SSM - DEBUG - Signing
2013-08-02 09&#58;50&#58;07,333 - SSM - DEBUG - Encrypting signed message of length 3284
2013-08-02 09&#58;50&#58;07,338 - SSM - DEBUG - Encrypted length&#58; 5323
2013-08-02 09&#58;50&#58;07,338 - SSM - DEBUG - Sending testfile
2013-08-02 09&#58;50&#58;07,817 - SSM - DEBUG - Broker received testfile
2013-08-02 09&#58;50&#58;07,817 - SSM - DEBUG - Receiving message from&#58; /topic/global.accounting.cpu.client.fermicloud015.fnal.gov.9979
2013-08-02 09&#58;50&#58;07,817 - SSM - DEBUG - Received ack for a1cbf85bc1157b99ccc8c5db5e2a964a
2013-08-02 09&#58;50&#58;07,939 - SSM - DEBUG - Message testfile acknowledged by consumer
2013-08-02 09&#58;50&#58;07,939 - SSM - DEBUG - Pinging
2013-08-02 09&#58;50&#58;07,939 - SSM - DEBUG - Sending ping
2013-08-02 09&#58;50&#58;07,939 - SSM - DEBUG - Sending reack a1cbf85bc1157b99ccc8c5db5e2a964a
2013-08-02 09&#58;50&#58;07,939 - SSM - INFO - All outgoing messages have been processed.
2013-08-02 09&#58;50&#58;08,259 - SSM - INFO - SSM connection ended.
2013-08-02 09&#58;50&#58;08,259 - SSM - INFO - The SSM has shut down.
2013-08-02 09&#58;50&#58;08,259 - SSM - INFO - =======================================================

Should I change my production client to that configuration?

John Weigand

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=John Weigand 144
</div><script type='text/javascript'>
        $('#show_1902939050').click(function() {
            $('#detail_1902939050').slideDown("normal");
            $('#show_1902939050').hide();
            $('#hide_1902939050').show();
        });
        $('#hide_1902939050').click(function() {
            $('#detail_1902939050').slideUp();
            $('#hide_1902939050').hide();
            $('#show_1902939050').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16270#1375455208'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T14:53:28+00:00">Aug 2, 2013 02:53 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1375455208">&nbsp;</a></div><pre>Good - just saw something arrive!  please also try with these&#58;

broker.afroditi.hellasgrid.gr&#58;6162

Thanks,
Alison

-- by Alison Packer at Fri Aug 02 14&#58;53&#58;02 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304</a></pre></div><div class='update_description'><i onclick="document.location='16270#1375455088'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T14:51:28+00:00">Aug 2, 2013 02:51 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1375455088">&nbsp;</a></div><pre>Thanks for this info, I&#39;ll pass it on.

One more try with these&#58;
message broker host and port &#58; msg.cro-ngi.hr&#58;6162

Thanks, Alison

-- by Alison Packer at Fri Aug 02 14&#58;50&#58;38 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304</a></pre></div><div class='update_description'><i onclick="document.location='16270#1375454642'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T14:44:02+00:00">Aug 2, 2013 02:44 PM UTC</time><a class="anchor" name="1375454642">&nbsp;</a></div><pre>[root@gr13x6 messages]$ date --utc
Fri Aug  2 14&#58;43&#58;38 UTC 2013
[root@gr13x6 messages]$ date
Fri Aug  2 09&#58;43&#58;42 CDT 2013

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=John Weigand 144</pre></div><div class='update_description'><i onclick="document.location='16270#1375454522'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T14:42:02+00:00">Aug 2, 2013 02:42 PM UTC</time><a class="anchor" name="1375454522">&nbsp;</a></div><pre>131.225.152.9           gr13x6.fnal.gov gr13x6

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=John Weigand 144</pre></div><div class='update_description'><i onclick="document.location='16270#1375454067'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T14:34:27+00:00">Aug 2, 2013 02:34 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1375454067">&nbsp;</a></div><pre>John,
I&#39;ve sent logs on to messaging for them to check their logs for that time.  Is your timezone UTC - 6?  Was not sure.

Also, they asked for source IP - can you provide that?

Thanks,
Alison

-- by Alison Packer at Fri Aug 02 14&#58;34&#58;06 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304</a></pre></div><div class='update_description'><i onclick="document.location='16270#1375453630'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T14:27:10+00:00">Aug 2, 2013 02:27 PM UTC</time><a class="anchor" name="1375453630">&nbsp;</a></div><pre>Alison,
Anything else I can do?
John Weigand

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=John Weigand 144</pre></div><div class='update_description'><i onclick="document.location='16270#1375452106'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T14:01:46+00:00">Aug 2, 2013 02:01 PM UTC</time><a class="anchor" name="1375452106">&nbsp;</a></div><pre>Alison,

I just re-read your earlier post about&#58;
bdii-url&#58; ldap&#58;//lcg-bdii.cern.ch&#58;2170
broker-network&#58; PROD

I have never used these for production.
Have always used egi-1.msg.cern.ch&#58;6162

Here is my production config for the broker section&#58;
[broker]

# The SSM will query a BDII to find brokers available.  These details are for the
# EGI test broker network
##TEST## bdii-url&#58; ldap&#58;//lcg-bdii.cern.ch&#58;2170
##TEST## broker-network&#58; TEST-NWOB
# OR (these details will only be used if the broker network settings aren&#39;t used)
#host&#58; test-msg01.afroditi.hellasgrid.gr
#port&#58; 6163
host&#58; egi-1.msg.cern.ch
port&#58; 6162
# broker authentication.  If use-ssl is set, the certificates configured
# in the mandatory [certificates] section will be used.
##TEST## use-ssl&#58; false
use-ssl&#58; true

use-pwd&#58; false
username&#58; apel
password&#58; ********

John Weigand

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=John Weigand 144</pre></div><div class='update_description'><i onclick="document.location='16270#1375450574'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T13:36:14+00:00">Aug 2, 2013 01:36 PM UTC</time><a class="anchor" name="1375450574">&nbsp;</a></div><pre>Alison,

Same output using  egi-2.msg.cern.ch&#58;6162

2013-08-02 08&#58;34&#58;23,251 - SSM - INFO - =======================================================
2013-08-02 08&#58;34&#58;23,252 - SSM - INFO - Starting the SSM...
2013-08-02 08&#58;34&#58;23,271 - SSM - INFO - Running the SSM once only.
2013-08-02 08&#58;34&#58;23,271 - SSM - INFO - Using broker details supplied&#58; egi-2.msg.cern.ch&#58;6162
2013-08-02 08&#58;34&#58;23,271 - SSM - INFO - Connecting using SSL using key /etc/grid-security/gratia-apel-wlcg.opensciencegrid.org-hostkey.pem and cert /etc/grid-security/gratia-apel-wlcg.opensciencegrid.org-hostcert.pem.
2013-08-02 08&#58;34&#58;23,271 - stomp.py - DEBUG - Attempting connection to host egi-2.msg.cern.ch, port 6162
2013-08-02 08&#58;34&#58;24,251 - stomp.py - INFO - Established connection to host egi-2.msg.cern.ch, port 6162
2013-08-02 08&#58;34&#58;24,251 - stomp.py - DEBUG - starting receiver loop
2013-08-02 08&#58;34&#58;24,251 - SSM - INFO - Connecting&#58; (&#39;egi-2.msg.cern.ch&#39;, 6162)
2013-08-02 08&#58;34&#58;24,254 - stomp.py - DEBUG - Sent frame&#58; type=CONNECT, headers={&#39;wait&#39;&#58; False}, body=&#39;&#39;
2013-08-02 08&#58;34&#58;24,254 - SSM - INFO - The SSM will not run as a consumer.
2013-08-02 08&#58;34&#58;24,254 - SSM - INFO - The SSM will run as a producer.
2013-08-02 08&#58;34&#58;24,254 - stomp.py - DEBUG - Sent frame&#58; type=SUBSCRIBE, headers={&#39;ack&#39;&#58; &#39;auto&#39;, &#39;destination&#39;&#58; &#39;/topic/global.accounting.cpu.client.gr13x6.fnal.gov.6098&#39;}, body=&#39;&#39;
2013-08-02 08&#58;34&#58;24,254 - SSM - DEBUG - I will be a producer, my ack queue is&#58; /topic/global.accounting.cpu.client.gr13x6.fnal.gov.6098
2013-08-02 08&#58;34&#58;24,390 - stomp.py - DEBUG - Received frame&#58; result=&#39;CONNECTED&#39;, headers={&#39;session&#39;&#58; &#39;ID&#58;gridmsg106.cern.ch-39711-1370327376378-2&#58;10106285&#39;, &#39;version&#39;&#58; &#39;1.0&#39;, &#39;server&#39;&#58; &#39;ActiveMQ/5.5.1-fuse-10-16&#39;, &#39;heart-beat&#39;&#58; &#39;0,0&#39;}, body=&#39;&#39;
2013-08-02 08&#58;34&#58;24,391 - SSM - INFO - Connected
2013-08-02 08&#58;34&#58;24,454 - SSM - INFO - The SSM started successfully.
2013-08-02 08&#58;34&#58;24,454 - SSM - INFO - No certificate, requesting
2013-08-02 08&#58;34&#58;24,454 - SSM - DEBUG - Sending noid
2013-08-02 08&#58;34&#58;24,455 - stomp.py - DEBUG - Sent frame&#58; type=SEND, headers={&#39;reply-to&#39;&#58; &#39;/topic/global.accounting.cpu.client.gr13x6.fnal.gov.6098&#39;, &#39;destination&#39;&#58; &#39;/topic/global.accounting.cpu.central&#39;, &#39;ssm-msg-type&#39;&#58; &#39;certreq&#39;, &#39;ssm-msg-id&#39;&#58; &#39;noid&#39;, &#39;receipt&#39;&#58; &#39;noid&#39;}, body=&#39;&#39;
2013-08-02 08&#58;34&#58;24,697 - stomp.py - DEBUG - Received frame&#58; result=&#39;RECEIPT&#39;, headers={&#39;receipt-id&#39;&#58; &#39;noid&#39;}, body=&#39;&#39;
2013-08-02 08&#58;34&#58;24,697 - SSM - DEBUG - Broker received noid
2013-08-02 08&#58;35&#58;24,456 - SSM - WARNING - Error processing outgoing messages&#58; Timed out waiting for certificate
2013-08-02 08&#58;35&#58;24,456 - SSM - WARNING - The SSM will exit
2013-08-02 08&#58;35&#58;24,457 - stomp.py - DEBUG - Sent frame&#58; type=DISCONNECT, headers={}, body=&#39;&#39;
2013-08-02 08&#58;35&#58;24,592 - SSM - INFO - SSM connection ended.
2013-08-02 08&#58;35&#58;24,592 - SSM - INFO - The SSM has shut down.
2013-08-02 08&#58;35&#58;24,592 - SSM - INFO - =======================================================

John Weigand

<div id='show_122365377' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_122365377'>by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=John Weigand 144
</div><script type='text/javascript'>
        $('#show_122365377').click(function() {
            $('#detail_122365377').slideDown("normal");
            $('#show_122365377').hide();
            $('#hide_122365377').show();
        });
        $('#hide_122365377').click(function() {
            $('#detail_122365377').slideUp();
            $('#hide_122365377').hide();
            $('#show_122365377').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16270#1375450348'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T13:32:28+00:00">Aug 2, 2013 01:32 PM UTC</time><a class="anchor" name="1375450348">&nbsp;</a></div><pre>added cc&#39;s on OSG goc side
tlevshin@....
kagross@....
steige@....

John Weigand

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=John Weigand 144</pre></div><div class='update_description'><i onclick="document.location='16270#1375450257'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T13:30:57+00:00">Aug 2, 2013 01:30 PM UTC</time><a class="anchor" name="1375450257">&nbsp;</a></div><pre>Alison,

here is the output with DEBUG on all.  btw.. the only one that was not set to debug was the logger_stomp.py.. is now

2013-08-02 08&#58;26&#58;50,165 - SSM - INFO - =======================================================
2013-08-02 08&#58;26&#58;50,165 - SSM - INFO - Starting the SSM...
2013-08-02 08&#58;26&#58;50,193 - SSM - INFO - Running the SSM once only.
2013-08-02 08&#58;26&#58;50,193 - SSM - INFO - Using broker details supplied&#58; egi-1.msg.cern.ch&#58;6162
2013-08-02 08&#58;26&#58;50,193 - SSM - INFO - Connecting using SSL using key /etc/grid-security/gratia-apel-wlcg.opensciencegrid.org-hostkey.pem and cert /etc/grid-security/gratia-apel-wlcg.opensciencegrid.org-hostcert.pem.
2013-08-02 08&#58;26&#58;50,193 - stomp.py - DEBUG - Attempting connection to host egi-1.msg.cern.ch, port 6162
2013-08-02 08&#58;26&#58;51,514 - stomp.py - INFO - Established connection to host egi-1.msg.cern.ch, port 6162
2013-08-02 08&#58;26&#58;51,515 - stomp.py - DEBUG - starting receiver loop
2013-08-02 08&#58;26&#58;51,515 - SSM - INFO - Connecting&#58; (&#39;egi-1.msg.cern.ch&#39;, 6162)
2013-08-02 08&#58;26&#58;51,517 - stomp.py - DEBUG - Sent frame&#58; type=CONNECT, headers={&#39;wait&#39;&#58; False}, body=&#39;&#39;
2013-08-02 08&#58;26&#58;51,517 - SSM - INFO - The SSM will not run as a consumer.
2013-08-02 08&#58;26&#58;51,517 - SSM - INFO - The SSM will run as a producer.
2013-08-02 08&#58;26&#58;51,517 - stomp.py - DEBUG - Sent frame&#58; type=SUBSCRIBE, headers={&#39;ack&#39;&#58; &#39;auto&#39;, &#39;destination&#39;&#58; &#39;/topic/global.accounting.cpu.client.gr13x6.fnal.gov.5971&#39;}, body=&#39;&#39;
2013-08-02 08&#58;26&#58;51,517 - SSM - DEBUG - I will be a producer, my ack queue is&#58; /topic/global.accounting.cpu.client.gr13x6.fnal.gov.5971
2013-08-02 08&#58;26&#58;51,656 - stomp.py - DEBUG - Received frame&#58; result=&#39;CONNECTED&#39;, headers={&#39;session&#39;&#58; &#39;ID&#58;gridmsg105.cern.ch-39905-1370326311618-2&#58;4999519&#39;, &#39;version&#39;&#58; &#39;1.0&#39;, &#39;server&#39;&#58; &#39;ActiveMQ/5.5.1-fuse-10-16&#39;, &#39;heart-beat&#39;&#58; &#39;0,0&#39;}, body=&#39;&#39;
2013-08-02 08&#58;26&#58;51,656 - SSM - INFO - Connected
2013-08-02 08&#58;26&#58;51,717 - SSM - INFO - The SSM started successfully.
2013-08-02 08&#58;26&#58;51,717 - SSM - INFO - No certificate, requesting
2013-08-02 08&#58;26&#58;51,717 - SSM - DEBUG - Sending noid
2013-08-02 08&#58;26&#58;51,718 - stomp.py - DEBUG - Sent frame&#58; type=SEND, headers={&#39;reply-to&#39;&#58; &#39;/topic/global.accounting.cpu.client.gr13x6.fnal.gov.5971&#39;, &#39;destination&#39;&#58; &#39;/topic/global.accounting.cpu.central&#39;, &#39;ssm-msg-type&#39;&#58; &#39;certreq&#39;, &#39;ssm-msg-id&#39;&#58; &#39;noid&#39;, &#39;receipt&#39;&#58; &#39;noid&#39;}, body=&#39;&#39;
2013-08-02 08&#58;26&#58;51,961 - stomp.py - DEBUG - Received frame&#58; result=&#39;RECEIPT&#39;, headers={&#39;receipt-id&#39;&#58; &#39;noid&#39;}, body=&#39;&#39;
2013-08-02 08&#58;26&#58;51,961 - SSM - DEBUG - Broker received noid
2013-08-02 08&#58;27&#58;51,731 - SSM - WARNING - Error processing outgoing messages&#58; Timed out waiting for certificate
2013-08-02 08&#58;27&#58;51,731 - SSM - WARNING - The SSM will exit
2013-08-02 08&#58;27&#58;51,731 - stomp.py - DEBUG - Sent frame&#58; type=DISCONNECT, headers={}, body=&#39;&#39;
2013-08-02 08&#58;27&#58;51,882 - SSM - INFO - SSM connection ended.
2013-08-02 08&#58;27&#58;51,882 - SSM - INFO - The SSM has shut down.
2013-08-02 08&#58;27&#58;51,882 - SSM - INFO - =======================================================
~
John Weigand

<div id='show_1390852902' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1390852902'>by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=John Weigand 144
</div><script type='text/javascript'>
        $('#show_1390852902').click(function() {
            $('#detail_1390852902').slideDown("normal");
            $('#show_1390852902').hide();
            $('#hide_1390852902').show();
        });
        $('#hide_1390852902').click(function() {
            $('#detail_1390852902').slideUp();
            $('#hide_1390852902').hide();
            $('#show_1390852902').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='16270#1375448716'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T13:05:16+00:00">Aug 2, 2013 01:05 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1375448716">&nbsp;</a></div><pre>Sorry John - one more thing, ensure all logging is set to DEBUG in /opt/apel/ssm/conf/ssm.log.cfg

Thanks,
Alison

-- by Alison Packer at Fri Aug 02 13&#58;04&#58;50 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304</a></pre></div><div class='update_description'><i onclick="document.location='16270#1375448539'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T13:02:19+00:00">Aug 2, 2013 01:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1375448539">&nbsp;</a></div><pre>John,
Just had this back from Lionel in the messaging team&#58;

---start of Lionel message---
The best would be to try with egi-1.msg.cern.ch and then with egi-2.msg.cern.ch. You can do this now.
Then send me the exact times and source IP address so that I can check what we get in the logs.

Also, more debugging on the client side would help&#58; what did the client do exactly and what failed?

----end of Lionel message---

So please edit you /opt/apel/ssm/conf/ssm.cfg file and comment lines I suggested in previous ticket update and try with&#58;
host&#58; egi-1.msg.cern.ch
port&#58; 6162

then try again with
host&#58; egi-2.msg.cern.ch
port&#58; 6162

Once you have done both these attempts at publishing let us have the ssm log file and source IP address and we can see what Lionel can find in the messaging log files.

Thanks,
Alison

-- by Alison Packer at Fri Aug 02 13&#58;01&#58;49 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304</a></pre></div><div class='update_description'><i onclick="document.location='16270#1375447930'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T12:52:10+00:00">Aug 2, 2013 12:52 PM UTC</time><a class="anchor" name="1375447930">&nbsp;</a></div><pre>Alison,
It needs to be today as I am gone for the next 2 weeks and may or may not have access.
So let me know when.
John Weigand

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=John Weigand 144</pre></div><div class='update_description'><i onclick="document.location='16270#1375447397'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-02T12:43:17+00:00">Aug 2, 2013 12:43 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1375447397">&nbsp;</a></div><pre>John,
Can we set up a time to test when you are available and I will ask the message broker guys to monitor? We could try testing with a specific message server - rather than the PROD network so we can get a specific message broker host monitored to see the activity there.  In which case you would change your /opt/apel/ssm/conf/ssm.cfg file to comment out the following 2 lines&#58;
bdii-url&#58; ldap&#58;//lcg-bdii.cern.ch&#58;2170
broker-network&#58; PROD

and uncomment these 2 lines&#58;
host&#58; egi-1.msg.cern.ch
port&#58; 6162
Then run the job to send using ssm again with these settings.

I&#39;ll check with messaging team for a time that might suit them today and update this ticket if I get more deail - but if you can&#39;t schedule this work in our afternoon then we will have to schedule something next week.  Let me  know timings which would work for you anyway.

Thanks,
Alison

-- by Alison Packer at Fri Aug 02 12&#58;42&#58;40 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304</a></pre></div><div class='update_description'><i onclick="document.location='16270#1375368938'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-01T14:55:38+00:00">Aug 1, 2013 02:55 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1375368938">&nbsp;</a></div><pre>John,
Yes I meant this&#58;
/DC=org/DC=doegrids/OU=Services/CN=gratia-apel-wlcg.opensciencegrid.org

I asked because of the &#34;Error processing outgoing messages&#58;
Timed out waiting for certificate &#34; message in you log - I did also double check ours which is in date.

I also raised a ticket with the Messaging Team to ask if they would check their logs to help us resolve this problem.  (<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=96309' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=96309</a>)

Other sites have also not published today - and I was concerned that our system patching on 30th July was the problem but several sites did successfully publish on 31st July which would suggest there is some other issue.

Thanks,
Alison

-- by Alison Packer at Thu Aug 01 14&#58;55&#58;20 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304</a></pre></div><div class='update_description'><i onclick="document.location='16270#1375367589'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-01T14:33:09+00:00">Aug 1, 2013 02:33 PM UTC</time> by <b>John Weigand</b><a class="anchor" name="1375367589">&nbsp;</a></div><pre>Allision,

When you say host cert, you really mean the cert I  am communicating with to SSM
with... which is not necessarily a host cert.

----- gratia-apel-wlcg.opensciencegrid.org-hostcert.pem
... openssl x509 -issuer -subject -dates -noout -in
issuer= /DC=org/DC=DOEGrids/OU=Certificate Authorities/CN=DOEGrids CA 1
subject= /DC=org/DC=doegrids/OU=Services/CN=gratia-apel-wlcg.opensciencegrid.org
notBefore=Mar 17 04&#58;45&#58;24 2013 GMT
notAfter=Mar 17 04&#58;45&#58;24 2014 GMT

and why would it not complain on my side if their was a problem?

John Weigand

On 8/1/2013 9&#58;16 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='16270#1375366593'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-01T14:16:33+00:00">Aug 1, 2013 02:16 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1375366593">&nbsp;</a></div><pre>Just picked up John&#39;s email to APEL-SUPPORT and responded too - looks like it could be a certificate issue for your server - can you check please?

Thanks,
Alison

-- by Alison Packer at Thu Aug 01 14&#58;15&#58;54 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304</a></pre></div><div class='update_description'><i onclick="document.location='16270#1375365873'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-01T14:04:33+00:00">Aug 1, 2013 02:04 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1375365873">&nbsp;</a></div><pre>There was a scheduled network outage yesterday and we took the opportunity to patch all systems. Looks like something might have missed restarting.

We&#39;ll investigate.

-- by John Gordon at Thu Aug 01 14&#58;03&#58;34 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304</a></pre></div><div class='update_description'><i onclick="document.location='16270#1375362930'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-01T13:15:30+00:00">Aug 1, 2013 01:15 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1375362930">&nbsp;</a></div><pre>-- by Rob Quick at Thu Aug 01 13&#58;14&#58;32 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=96304</a></pre></div><div class='update_description'><i onclick="document.location='16270#1375362780'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-01T13:13:00+00:00">Aug 1, 2013 01:13 PM UTC</time><a class="anchor" name="1375362780">&nbsp;</a></div><pre>Created GGUS ticket and adding John as a CC.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Robert Quick 62</pre></div><div class='update_description'><i onclick="document.location='16270#1375362715'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-01T13:11:55+00:00">Aug 1, 2013 01:11 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1375362715">&nbsp;</a></div><pre>The SSM interface has been failing the last several days.
With this it being the end of the month, its pretty important.
The usual timeout.
John Weigand

2013-08-01 01&#58;15&#58;06,235 - SSM - INFO - Starting the SSM...
2013-08-01 01&#58;15&#58;06,254 - SSM - INFO - Running the SSM once only.
2013-08-01 01&#58;15&#58;06,254 - SSM - INFO - Using broker details supplied&#58;
egi-1.msg.cern.ch&#58;6162
2013-08-01 01&#58;15&#58;06,254 - SSM - INFO - Connecting using SSL using key
/etc/grid-security/gratia-apel-wlcg.opensciencegrid.org-hostkey.pem and cert
/etc/grid-security/gratia-apel-wlcg.opensciencegrid.org-hostcert.pem.
2013-08-01 01&#58;15&#58;07,255 - stomp.py - INFO - Established connection to host
egi-1.msg.cern.ch, port 6162
2013-08-01 01&#58;15&#58;07,255 - SSM - INFO - Connecting&#58; (&#39;egi-1.msg.cern.ch&#39;, 6162)
2013-08-01 01&#58;15&#58;07,256 - SSM - INFO - The SSM will not run as a consumer.
2013-08-01 01&#58;15&#58;07,256 - SSM - INFO - The SSM will run as a producer.
2013-08-01 01&#58;15&#58;07,256 - SSM - DEBUG - I will be a producer, my ack queue is&#58;
/topic/global.accounting.cpu.client.gr13x6.fnal.gov.11618
2013-08-01 01&#58;15&#58;07,391 - SSM - INFO - Connected
2013-08-01 01&#58;15&#58;07,453 - SSM - INFO - The SSM started successfully.
2013-08-01 01&#58;15&#58;07,454 - SSM - INFO - No certificate, requesting
2013-08-01 01&#58;15&#58;07,454 - SSM - DEBUG - Sending noid
2013-08-01 01&#58;15&#58;07,696 - SSM - DEBUG - Broker received noid
2013-08-01 01&#58;16&#58;07,451 - SSM - WARNING - Error processing outgoing messages&#58;
Timed out waiting for certificate
2013-08-01 01&#58;16&#58;07,451 - SSM - WARNING - The SSM will exit
2013-08-01 01&#58;16&#58;07,587 - SSM - INFO - SSM connection ended.
2013-08-01 01&#58;16&#58;07,587 - SSM - INFO - The SSM has shut down.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Robert Quick 62</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F16270">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
