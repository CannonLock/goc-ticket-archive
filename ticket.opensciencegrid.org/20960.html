<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[20960] BeStMan and RFC 3820 compliant proxies</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=20960" method="post">
<div class="page-header">
    <h3><span class="muted">20960</span> / BeStMan and RFC 3820 compliant proxies</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Pieter Jacques</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Pieter Jacques</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Waiting for user response</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-05-26</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">USCMS_Tier3 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Carl Edquist <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/20960", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='20960#1400857121'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-23T14:58:41+00:00">May 23, 2014 02:58 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1400857121">&nbsp;</a></div><pre>Based on Carl&#39;s response, I&#39;m closing this ticket.  Pieter, feel free to reopen the ticket if the problem isn&#39;t resolved.

Suchandra Thapa
OSG Software Team</pre></div><div class='update_description'><i onclick="document.location='20960#1400705924'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T20:58:44+00:00">May 21, 2014 08:58 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400705924">&nbsp;</a></div><pre>Ah, ok.  I think that makes sense.

As far as academic interest goes, it might also work to install java7 from a tarball into a user-writable directory and export PATH and JAVA_HOME in your environment to point to it.  But if you already have a work-around in place I&#39;m guessing it&#39;s not worth the trouble.

Anyway, sounds like we can close this ticket.  Let us know if you run into any problems after updating to java7.

Thanks!
Carl</pre></div><div class='update_description'><i onclick="document.location='20960#1400698635'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:57:15+00:00">May 21, 2014 06:57 PM UTC</time> by <b>jacques@....</b><a class="anchor" name="1400698635">&nbsp;</a></div><pre>Carl,

I do, in fact, already have java7 installed on the machine that is
running bestman2.

The problem is that the machines which are running the 1.6.0_41 package
are not under our control so I can&#39;t modify the jdk setup.  However, as
I said, we&#39;ve found a work-around for this which solves our immediate
problem and will do until everyone has updated to java7.

Thanks for you help with this,

- Pieter

+-------------------------------------------------+
| Pieter F. Jacques (jacques@....) |
|  Serin Physics Laboratory, Rutgers University   |
|            136 Frelinghuysen Road               |
|         Piscataway, NJ 08854-8019 USA           |
|            Telephone&#58; 848-445-8977              |
+-------------------------------------------------+

On Wed, 21 May 2014, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20960#1400697949'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T18:45:49+00:00">May 21, 2014 06:45 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400697949">&nbsp;</a></div><pre>Thanks Pieter,

So your default &#39;java&#39; is the one from the &#39;jdk&#39; package (1.6.0_41), which we&#39;ve seen cause trouble sometimes when it&#39;s installed alongside other javas.

For the OSG&#39;s bestman2 package, we actually require java7 and java7-devel (or, java-1.7.0-openjdk and java-1.7.0-openjdk-devel).  With those installed, the simple fix is usually to run&#58;

yum remove jdk
alternatives --config java
alternatives --config javac

and for each the alternatives commands, choose the java-1.7.0-openjdk option.  But even if you don&#39;t want to install java7, running the above might still work...

Carl</pre></div><div class='update_description'><i onclick="document.location='20960#1400693059'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T17:24:19+00:00">May 21, 2014 05:24 PM UTC</time> by <b>jacques@....</b><a class="anchor" name="1400693059">&nbsp;</a></div><pre>Carl,

Here is the information you requested&#58;

1) rpm -qa | egrep &#39;java|jdk&#39;
jdk-1.6.0_41-fcs.x86_64
java-1.4.2-gcj-compat-1.4.2.0-40jpp.115.x86_64
jdk-1.6.0_41-fcs.i586
java-1.6.0-sun-compat-1.6.0.41-3.sl5.jpp.i586
java-1.6.0-sun-compat-1.6.0.41-3.sl5.jpp.x86_64

2) java -version
java version &#34;1.6.0_41&#34;
Java(TM) SE Runtime Environment (build 1.6.0_41-b02)
Java HotSpot(TM) 64-Bit Server VM (build 20.14-b01, mixed mode)

3) javac -version
javac 1.6.0_41

I would like to add that at this point, the issue is largely of only
academic interest to us, as we have found a work-around to deal with the
situation that prompted my original query.  It is probabaly not worth
too much effort at this time, as we will likely be migrating to SL6
shortly, in any case.

- Pieter

+-------------------------------------------------+
| Pieter F. Jacques (jacques@....) |
|  Serin Physics Laboratory, Rutgers University   |
|            136 Frelinghuysen Road               |
|         Piscataway, NJ 08854-8019 USA           |
|            Telephone&#58; 848-445-8977              |
+-------------------------------------------------+

<div id='show_1244198727' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1244198727'>On Wed, 21 May 2014, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1244198727').click(function() {
            $('#detail_1244198727').slideDown("normal");
            $('#show_1244198727').hide();
            $('#hide_1244198727').show();
        });
        $('#hide_1244198727').click(function() {
            $('#detail_1244198727').slideUp();
            $('#hide_1244198727').hide();
            $('#show_1244198727').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='20960#1400689152'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-21T16:19:12+00:00">May 21, 2014 04:19 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1400689152">&nbsp;</a></div><pre>Alex, do you happen to know the svn revision from the bestman repo that Pieter&#39;s tarball install corresponds to?  I know that, besides the package versions being different, there are a number of patches that get applied when building the osg rpm.

Pieter, on the SL5 machine, can you give the output of&#58;

rpm -qa | egrep &#39;java|jdk&#39;
java -version
javac -version

I&#39;ve seen &#39;jdk&#39; package cause trouble for us on SL5 before...

Thanks!
Carl</pre></div><div class='update_description'><i onclick="document.location='20960#1400255235'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-16T15:47:15+00:00">May 16, 2014 03:47 PM UTC</time> by <b>Alex Sim</b><a class="anchor" name="1400255235">&nbsp;</a></div><pre>because he installed from our tar distribution looking for the latest pkg, the pkg version number is different.   It should be the same as 2.3.0 from his ping log.

backend_type=BeStMan
backend_version=2.2.2.3.0
backend_build_date=2013-01-04T13&#58;36&#58;34.000Z

By the way, he had 1.3.20 before.

__
-- Alex

On May 16, 2014, at 8&#58;15 AM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20960#1400253323'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-16T15:15:23+00:00">May 16, 2014 03:15 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1400253323">&nbsp;</a></div><pre>Wait a minute, here ... the OSG does not ship BeStMan 2.3.1. Where did you get that version of BeStMan? And what version of jGlobus do you have installed?</pre></div><div class='update_description'><i onclick="document.location='20960#1399503249'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-07T22:54:09+00:00">May 7, 2014 10:54 PM UTC</time> by <b>Alex Sim</b><a class="anchor" name="1399503249">&nbsp;</a></div><pre>That’s my understanding. Pieter can confirm.

__
-- Alex

On May 7, 2014, at 3&#58;49 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20960#1399502955'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-07T22:49:15+00:00">May 7, 2014 10:49 PM UTC</time><a class="anchor" name="1399502955">&nbsp;</a></div><pre>Hi All,

So let me understand the problem. You are stating that srmcp to bestman fails when srmcp client is running with an rfc proxy on an sl5 machine?

Is that a correct stating of the problem?

Edgar
OSG Software Team

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='20960#1399303162'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-05T15:19:22+00:00">May 5, 2014 03:19 PM UTC</time> by <b>Alex Sim</b><a class="anchor" name="1399303162">&nbsp;</a></div><pre>Pieter sent us a separate email that we followed up.
The problem seems to be with srmcp that CMS crab uses. It should have been an issue before. If you can find the previous solution or workaround, please provide it to him.
--Alex

On May 1, 2014, at 9&#58;11 AM, Alex Sim &#60;Asim@....&#62; wrote&#58;

Pieter,

when you get a chance,  send in your findings to the GOC ticket as a record.
thanks

__
-- Alex

On May 1, 2014, at 8&#58;17 AM, Alex Sim &#60;Asim@....&#62; wrote&#58;

Hi Pieter,

So, it seems that some kind of dependencies (e.g. Java version) on SL5 and SL6 plays a role.
Can you try srmping or srmcp (the other clients) with SL6 and see what happens?
This will isolate the problem.

Thanks

__
-- Alex

On May 1, 2014, at 8&#58;05 AM, Pieter Jacques &#60;jacques@....&#62; wrote&#58;

Alex,

Further information&#58;  I have repeated the same tests, but using a different lxplus machine at CERN.  The machine I used before, lxplus433, is running Scientific Linux 5 (SL5).  I have now repeated the tests on an SL6 machine.  When using SL6 all 4 cases succeed.

- Pieter

<div id='show_524981698' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_524981698'>+-------------------------------------------------+
| Pieter F. Jacques (jacques@....) |
|  Serin Physics Laboratory, Rutgers University   |
|            136 Frelinghuysen Road               |
|         Piscataway, NJ 08854-8019 USA           |
|            Telephone&#58; 848-445-8977              |
+-------------------------------------------------+

On Thu, 1 May 2014, Pieter Jacques wrote&#58;

Alex,

I have done some further tests, as per your request.

The setup is BeStMan server bestman2 version 2.3.1 installed on my system, ruhex-osgce.rutgers.edu.

For the client end, I have the same BeStMan version on lxplus433.cern.ch.  On that machine, I execute srm-ping like this&#58;
./bestman2/bin/srm-ping <a href='srm&#58;//ruhex-osgce.rutgers.edu&#58;9988/srm/v2/server' target='_blank' rel='nofollow'>srm&#58;//ruhex-osgce.rutgers.edu&#58;9988/srm/v2/server</a>

I am using non-standard port 9988 here, as I have an earlier version of BeStMan setup on ruhex-osgce.rutgers.edu, running in production mode on port 8443.

I have tired 4 cases&#58;

1) Obtaining proxy with grid-proxy-init
2) Obtaining proxy with grid-proxy-init -rfc
3) Obtaining proxy with voms-proxy-init
4) Obtaining proxy with voms-proxy-init -rfc

Only case 3 succeeds.  The result returned is&#58;
SRM-PING&#58; Thu May 01 16&#58;30&#58;54 CEST 2014  Calling SrmPing Request...
versionInfo=v2.2

Extra information (Key=Value)
backend_type=BeStMan
backend_version=2.2.2.3.0
backend_build_date=2013-01-04T13&#58;36&#58;34.000Z
gsiftpTxfServers[0]=<a href='gsiftp&#58;//ruhex-osgce.rutgers.edu' target='_blank' rel='nofollow'>gsiftp&#58;//ruhex-osgce.rutgers.edu</a>
GatewayMode=Enabled
clientDN=/DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jacques/CN=541489/CN=Pieter Jacques
localIDMapped=jacques

For cases 1, 2, and 4 the result returned is&#58;
SRM-PING&#58; Thu May 01 16&#58;29&#58;17 CEST 2014  Calling SrmPing Request...
SoapCallThread.Exception=; nested exception is&#58;
java.net.SocketException&#58; Connection reset
SoapCallThread.Exception=; nested exception is&#58;
java.net.SocketException&#58; Connection reset

- Pieter

On Apr 30, 2014, at 4&#58;32 PM, Pieter Jacques &#60;jacques@....&#62; wrote&#58;

Alex,

The machine where I am running the client is lxplus433.cern.ch, and srm-ping does not appear to be available there.  I can probably install the bestman client tools in my own area there, however.  I will do that on Thursday.  Do you have a preference for which bestman version I use for this?

My bestman server is running on ruhex-osgce.rutgers.edu (for which I am the administrator).

This issue came up when one of my colleagues attempted to use the CMS &#34;crab&#34; system. &#34;crab&#34; submits batch jobs to CMS Tier2 sites. Generally, the submitter does not know (or care) which Tier2 site will be chosen to run the jobs.  &#34;crab&#34; selects the site on the basis of data availability.  The mode of operation selected in this case was for the submitted crab jobs to copy their output back to Rutgers, which is done via our bestman server.

I mention this because even if we find that everything works correctly when using your srm-ping client, it won&#39;t really help solve the problem at hand, since we have no control over what client is being used at the Tier2 sites where the crab jobs are run.

I have tried some additional tests using grid-proxy-init instead of voms-proxy-init, again working from lxplus433.cern.ch.  I find that if I use bestman server version 2.2.1.3.20 on ruhex-osgce.rutgers.edu, the results are the same as when using voms-proxy-init, both when I include &#34;-rfc&#34; and when I do not.

However, if I use bestman2 server version 2.3.1 on ruhex-osgce, srmcp fails regardless of whether the proxy is obtained with &#34;-rfc&#34;, or not. In both cases, the client exits with
SRMClientV2 &#58; srmPrepareToPut&#58; try # 0 failed with error
SRMClientV2 &#58; ; nested exception is&#58;
java.net.SocketException&#58; Connection reset
There are no messages from the bestman2 server in either case.

- Pieter

On Wed, 30 Apr 2014, Alex Sim wrote&#58;

Pieter,
In our test with srm-ping (one of the bestman-client tools), RFC compliant proxy works ok.
We don?t have access to VOMS, and it was created with grid-proxy-init -rfc (which should be the same).
To make your test simpler, see if you can test with srm-ping and voms-proxy-init -rfc.
A comple possible causes&#58;
1. srmcopy (which is different from srm-copy if you have used this srmcopy) may not work with RFC compliant proxy.
2. SHA2 based certificates require all parties to use SHA2 based certs.
Please make another round of tests with srm-ping and get back to us.
Thanks
__
-- Alex
</div><script type='text/javascript'>
        $('#show_524981698').click(function() {
            $('#detail_524981698').slideDown("normal");
            $('#show_524981698').hide();
            $('#hide_524981698').show();
        });
        $('#hide_524981698').click(function() {
            $('#detail_524981698').slideUp();
            $('#hide_524981698').hide();
            $('#show_524981698').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='20960#1399303136'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-05T15:18:56+00:00">May 5, 2014 03:18 PM UTC</time> by <b>jacques@....</b><a class="anchor" name="1399303136">&nbsp;</a></div><pre>Kyle,

The current status of this is that I have updated my machine which is
running BeStMan to the most recent version of Bestman2, version 2.3.1.

With that version of BeStMan I find that I can receive connections from
srm clients which are using an RFC 3820 compliant proxy, if the client
is running on a machine using the Scientific Linux 6 operating system.
I have so far been unsuccessful in getting this to work when the client
is run on an SL5 machine.  Under SL5, I have tried both Java version
1.6.0_41 and 1.7.0_51, but both fial when the proxy is RFC 3820
compliant.

At the moment, I&#39;ve had to divert my activity to another matter, so I
have not had a chance to work further on this since early last week,

Thanks,

- Pieter

+-------------------------------------------------+
| Pieter F. Jacques (jacques@....) |
|  Serin Physics Laboratory, Rutgers University   |
|            136 Frelinghuysen Road               |
|         Piscataway, NJ 08854-8019 USA           |
|            Telephone&#58; 848-445-8977              |
+-------------------------------------------------+

On Mon, 5 May 2014, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='20960#1399294441'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-05-05T12:54:01+00:00">May 5, 2014 12:54 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1399294441">&nbsp;</a></div><pre>Software Support,

Not sure if you can help with this one, but... any ideas? I&#39;m also including USCMS T3 support.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='20960#1398898989'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-04-30T23:03:09+00:00">Apr 30, 2014 11:03 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1398898989">&nbsp;</a></div><pre>Note&#58;  ticket opened at the request of sdmsupport@.....  Included below is a copy of the email I sent to them on this issue.  They also requested the SHA status of my server side certificate&#58;  it is SHA1.

I am the administrator of a CMS Tier 3 site, T3_US_Rutgers, and we have been
using BeStMan successfully for several years now.  Recently, however, I am
seeing failures, which appear to be the result of connections that are made
to the BeStMan server where the client-side proxy has been created to be RFC
3820 compliant.  I have been using BeStMan version 2.2.1.3.20.  Since that
is an older version, I have also tried using BeStMan2, version 2.3.1, which
appears to be the most recent available for download.  I am not able to make
connections to either of these, when the proxy has been created to be RFC
3820 compliant

The proxies are generated using &#34;voms-proxy-init&#34;, which is part of the
glite distribution included with CMS/OSG setup.  This can generate an RFC
3820 compliant proxy by the inclusion of the &#34;-rfc&#34; flag.

I observe the following&#58;

1) If the proxy is generated with &#34;voms-proxy-init&#34; (that is, without the
-rfc flag, hence is not RFC 3820 compliant), successful transfers can be
made both with the older version 2.2.1.3.20 and the new Bestman2, version
2.3.1.

2) If the proxy is generated with &#34;voms-proxy-init -rfc&#34;, neither the older
version or the new Bestman2 version work.  On the client side, when the
server is running the older version (2.2.1.3.20), the following error
messages occur&#58;

SRMClientV2 &#58; srmPrepareToPut&#58; try # 0	 failed with error
SRMClientV2 &#58; ; nested exception is&#58;
java.io.EOFException
Wed Apr 30 21&#58;50&#58;00 CEST 2014&#58; java.io.EOFException
Wed Apr 30 21&#58;50&#58;00 CEST 2014&#58; stopping copier

If the server is running the new Bestman2 version, the error messages are&#58;
<div id='show_1019812846' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1019812846'>
SRMClientV2 &#58; srmPrepareToPut&#58; try # 0 failed with error
SRMClientV2 &#58; ; nested exception is&#58;
java.net.SocketException&#58; Connection reset
Wed Apr 30 21&#58;49&#58;48 CEST 2014&#58; java.net.SocketException&#58; Connection reset
Wed Apr 30 21&#58;49&#58;48 CEST 2014&#58; stopping copier

On the server side, the version 2.2.1.3.20 log file contains

2014-04-30T15&#58;47&#58;39.977 EDT ### [srmPutDone()] tid =Thread-100-
Error processing request&#58; Authentication failed [Root error message&#58;
Defective credential detected [Root error message&#58; Unsuppored critical
exception &#58; 1.3.6.1.5.5.7.1.14]]
org.globus.common.ChainedIOException&#58; Authentication failed [Root error
message&#58; Defective credential detected [Root error message&#58;
Unsuppored critical exception &#58; 1.3.6.1.5.5.7.1.14]].  Root exception is
GSSException&#58; Defective credential detected [Root error message&#58;
Unsuppored critical exception &#58; 1.3.6.1.5.5.7.1.14].  Root exception
is org.globus.gsi.proxy.ProxyPathValidatorException&#58; Unsuppored critical
exception &#58; 1.3.6.1.5.5.7.1.14

However, when running Bestman2 on the server side, nothing at all appears in
the log file when a connection is attempted using an RFC compliant proxy.

I have done some Google searching regarding RFC 3820 compliant proxies, and
see that there has been considerable activity in this area, but the end
result is not clear to me.  I would appreciate any assistance or advice you
have in this matter.

Thanks in advance,

- Pieter

+-------------------------------------------------+
| Pieter F. Jacques (jacques@....) |
|  Serin Physics Laboratory, Rutgers University   |
|            136 Frelinghuysen Road               |
|         Piscataway, NJ 08854-8019 USA           |
|            Telephone&#58; 848-445-8977              |
+-------------------------------------------------+

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jacques/CN=541489/CN=Pieter Jacques
</div><script type='text/javascript'>
        $('#show_1019812846').click(function() {
            $('#detail_1019812846').slideDown("normal");
            $('#show_1019812846').hide();
            $('#hide_1019812846').show();
        });
        $('#hide_1019812846').click(function() {
            $('#detail_1019812846').slideUp();
            $('#hide_1019812846').hide();
            $('#show_1019812846').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F20960">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
